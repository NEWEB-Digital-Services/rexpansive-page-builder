!function(e,t){"use strict";e.PopUpVideo=t()}("undefined"!=typeof window?window:this,function(){function e(){var e,t,o;this.element=null,this.content=null,this.close=null,arguments[0]&&(this.element=arguments[0]),null===this.element&&((e=document.createElement("div")).className="popup-video__modal",(t=document.createElement("div")).className="popup-video__modal__close",t.innerHTML='<i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i>',(o=document.createElement("div")).className="popup-video__modal__content",e.appendChild(t),e.appendChild(o),document.body.appendChild(e),this.element=e),this.content=this.element.querySelector(".popup-video__modal__content"),this.close=this.element.querySelector(".popup-video__modal__close"),this.element.addEventListener("click",i.bind(this)),this.close.addEventListener("click",i.bind(this))}function i(e){e.preventDefault(),this.close_modal()}e.prototype.open_modal=function(e){this.content.appendChild(e),this.element.style.display="block"},e.prototype.close_modal=function(){this.element.style.display="",this.content.innerHTML=""};var n=new e(document.querySelector(".popup-video__modal"));function s(){this.video_element.removeEventListener("ended",s.bind(this)),n.close_modal()}return function(){this.element=null,this.typology=null,this.video_element=null,arguments[0]&&(this.element=arguments[0]);var e={closeOnEnd:!1};this.options=arguments[1]&&"object"==typeof arguments[1]?function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(e,arguments[1]):e,null!==this.element&&""!==this.element.href&&void 0!==this.element.href&&(function(){{var e;-1!==this.element.href.search(/https?:\/\/youtu\.be\/[a-zA-Z0-9\-\_]+$/g)?(this.typology="youtube",e=/https+:\/\/youtu.be\/([a-zA-Z0-9\-\_]+)$/g.exec(this.element.href),this.resource_id=e[1]):-1!==this.element.href.search(/https?:\/\/vimeo\.com\/[a-zA-Z0-9]+(?:\/[a-zA-Z0-9]+)?$/g)?(this.typology="vimeo",e=/https?:\/\/vimeo\.com\/([a-zA-Z0-9]+)(?:\/([a-zA-Z0-9]+))?$/g.exec(this.element.href),this.resource_id=e[1],this.resource_optional=e[2]):-1!==this.element.href.search(/https?:\/\/\S*\.mp4$/g)&&(this.typology="mp4")}}.call(this),this.typology)&&(this.options.closeOnEnd&&function(){switch(this.typology){case"youtube":"undefined"==typeof YT&&((e=document.createElement("script")).src="https://www.youtube.com/iframe_api",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t));break;case"vimeo":var e,t;"undefined"==typeof Vimeo&&((e=document.createElement("script")).src="https://player.vimeo.com/api/player.js",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t))}}.call(this),function(){this.element.addEventListener("click",function(e){var t;switch(e.preventDefault(),this.typology){case"youtube":(t=document.createElement("iframe")).setAttribute("allowfullscreen",!0),t.setAttribute("frameborder","0"),t.setAttribute("allow","autoplay"),t.setAttribute("src","https://www.youtube.com/embed/"+this.resource_id+"?autoplay=1&rel=0&color=white&frameborder=0"+(this.options.closeOnEnd?"&enablejsapi=1&origin="+window.location.origin:""));break;case"vimeo":(t=document.createElement("iframe")).setAttribute("allowfullscreen",!0),t.setAttribute("frameborder","0"),t.setAttribute("allow","autoplay,fullscreen"),t.setAttribute("src","https://player.vimeo.com/video/"+this.resource_id+"?autoplay=1"+(void 0!==this.resource_optional?"&h="+this.resource_optional:""));break;case"mp4":t=document.createElement("video");var o=document.createElement("source");t.setAttribute("autoplay",!0),t.setAttribute("controls",!0),t.setAttribute("preload","metadata"),t.appendChild(o),o.setAttribute("type","video/mp4"),o.setAttribute("src",this.element.href)}if(this.video_element=t,this.options.closeOnEnd)switch(this.typology){case"youtube":!function(){new YT.Player(this.video_element,{events:{onStateChange:function(e){YT.PlayerState.ENDED==e.data&&n.close_modal()}}})}.call(this);break;case"vimeo":!function(){var e=new Vimeo.Player(this.video_element),t=function(){n.close_modal(),e.off("ended",t)};e.on("ended",t)}.call(this);break;case"mp4":this.video_element.addEventListener("ended",s.bind(this))}n.open_modal(t)}.bind(this))}.call(this))}});