!function(l,t){"use strict";l.SplitScrollable=t(l)}("undefined"!=typeof window?window:this,function(){function l(){this.element=null,this.splitScrollWrapper=null,this.scrollElsWrapper=null,this.scrollEls=[],this.scrollElsToWatch=[],this.totScrollEls=0,this.totScrollElsToWatch=0,this.actualScrollEl=null,this.opacityElsWrapper=null,this.opacityEls=[],this.totOpacityEls=0,this.scrollElsState=[],this.scrollObserver=null,this.userScrolled=!1,arguments[0]&&(this.element=arguments[0]);var l={splitScrollElClass:"split-scrollable-container",splitScrollActiveElClass:"split-scrollable--active",scrollElsWrapClass:"scroll-block-wrapper",scrollElsClass:"scroll-block",scrollElsToWatchClass:"scroll-block",scrollElActiveClass:"scroll-block-active",opacityElsWrapClass:"opacity-block-wrapper",opacityElsClass:"opacity-block",opacityFakeElClass:"opacity-block-fake",opacityElActiveClass:"opacity-block-active",initializeComplete:null};arguments[1]&&"object"==typeof arguments[1]?this.options=m(l,arguments[1]):this.options=l,t.call(this),s.call(this),"function"==typeof this.options.initializeComplete&&this.options.initializeComplete.call(this),e.call(this),v.push(E.bind(this)),r.call(this),S.push(r.bind(this)),C.push(this)}function t(){if(this.scrollEls=[].slice.call(this.element.getElementsByClassName(this.options.scrollElsClass)),this.totScrollEls=this.scrollEls.length,this.options.scrollElsClass===this.options.scrollElsToWatchClass)this.scrollElsToWatch=this.scrollEls;else for(var l=0;l<this.totScrollEls;l++)this.scrollElsToWatch.push(this.scrollEls[l].querySelector("."+this.options.scrollElsToWatchClass));this.totScrollElsToWatch=this.scrollElsToWatch.length,this.opacityEls=[].slice.call(this.element.getElementsByClassName(this.options.opacityElsClass)),this.totOpacityEls=this.opacityEls.length;var t=0;for(t=0;t<this.totScrollEls;t++)this.scrollElsToWatch[t].setAttribute("data-scroll-el-index",t),this.scrollElsState.push(null);w(this.element,this.options.splitScrollActiveElClass)}function s(){if(g(this.scrollEls[0].parentNode,this.options.scrollElsWrapClass))this.scrollElsWrapper=this.scrollEls[0].parentNode;else{this.scrollElsWrapper=document.createElement("div"),w(this.scrollElsWrapper,this.options.scrollElsWrapClass),this.scrollEls[0].parentNode.appendChild(this.scrollElsWrapper);for(var l=0;l<this.totScrollEls;l++)this.scrollElsWrapper.appendChild(this.scrollEls[l])}if(g(this.opacityEls[0].parentNode,this.options.opacityElsWrapClass))this.opacityElsWrapper=this.opacityEls[0].parentNode;else{this.opacityElsWrapper=document.createElement("div"),w(this.opacityElsWrapper,this.options.opacityElsWrapClass),this.opacityEls[0].parentNode.appendChild(this.opacityElsWrapper);for(var l=0;l<this.totOpacityEls;l++)this.opacityElsWrapper.appendChild(this.opacityEls[l])}g(this.scrollElsWrapper.parentNode,this.options.splitScrollElClass)?this.splitScrollWrapper=this.element:(this.splitScrollWrapper=document.createElement("div"),w(this.splitScrollWrapper,this.options.splitScrollElClass),this.scrollElsWrapper.parentNode.appendChild(this.splitScrollWrapper),this.splitScrollWrapper.appendChild(this.scrollElsWrapper),this.splitScrollWrapper.appendChild(this.opacityElsWrapper))}function i(){u(this.scrollElsWrapper),u(this.opacityElsWrapper),u(this.splitScrollWrapper)}function o(){b=y()}function e(){this.opacityElsWrapper.style.height=parseFloat(getComputedStyle(this.opacityEls[this.opacityEls.length-1],null).top.replace("px",""))+this.opacityEls[this.opacityEls.length-1].offsetHeight+"px"}function c(){function l(){userScrolled=!0}userScrolled=!1,window.addEventListener("scroll",l),W(function(){userScrolled&&(S.forEach(function(l){l.call()}),userScrolled=!1)},150)}function r(){var l=n.call(this);l&&this.actualScrollEl!==l&&a.call(this,l)}function n(){var l,t,s=f(),i=0,o=null,e=!1;for(l=0;l<this.totScrollElsToWatch;l++)if(this.scrollElsToWatch[l]&&(t=d(this.scrollElsToWatch[l]),e=(t.top>s+i||t.top+t.height>s+i)&&t.top<s+b.height+i)){o=this.scrollElsToWatch[l].getAttribute("data-scroll-el-index");break}return o}function a(l){p.call(this,l),this.actualScrollEl=l}function p(l){for(var t=0;t<this.totScrollEls;t++)this.scrollElsToWatch[t].getAttribute("data-scroll-el-index")==l?(w(this.scrollEls[t],this.options.scrollElActiveClass),w(this.opacityEls[t],this.options.opacityElActiveClass)):(T(this.scrollEls[t],this.options.scrollElActiveClass),T(this.opacityEls[t],this.options.opacityElActiveClass))}function h(){function l(){userResized=!0}userResized=!1,window.addEventListener("resize",l),W(function(){userResized&&(v.forEach(function(l){l.call()}),userResized=!1)},150)}function E(){}function u(l){for(var t=l.parentNode;l.firstChild;)t.insertBefore(l.firstChild,l);t.removeChild(l)}function d(l){var t=l.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.body.scrollTop)-(document.body.clientTop||0),left:t.left+(window.pageXOffset||document.body.scrollLeft)-(document.body.clientLeft||0),height:t.height}}function f(){return window.pageYOffset||document.documentElement.scrollTop}function y(){var l=window,t="inner";return"innerWidth"in window||(t="client",l=document.documentElement||document.body),{width:l[t+"Width"],height:l[t+"Height"]}}function W(l,t){var s,i=Date.now,o=window.requestAnimationFrame,e=i(),c=function(){i()-e<t||(e+=t,l()),s||o(c)};return o(c),{clear:function(){s=1}}}function m(l,t){var s;for(s in t)t.hasOwnProperty(s)&&(l[s]=t[s]);return l}var C=[],S=[],v=[],b=y();v.push(o);var g,w,T,N;return"classList"in document.documentElement?(g=function(l,t){return l.classList.contains(t)},w=function(l,t){l.classList.add(t)},T=function(l,t){l.classList.remove(t)}):(g=function(l,t){return new RegExp("\\b"+t+"\\b").test(l.className)},w=function(l,t){g(l,t)||(l.className+=" "+t)},T=function(l,t){l.className=l.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),N=function(l,t){g(l,t)?T(l,t):w(l,t)},l.prototype.refreshScrollableIndex=function(){var l=n.call(this);l&&a.call(this,l)},l.prototype.callFixStickyHeight=function(){e.call(this)},l.prototype.destroy=function(){function l(l){return l.element!==this.element}T(this.element,this.options.splitScrollActiveElClass),i.call(this),C=C.filter(l.bind(this))},l.destroyAll=function(){C.forEach(function(l){l.destroy()})},l.data=function(l){var t=0,s=C.length;for(t=0;t<s;t++)if(l===C[t].element)return C[t];return null},c(),h(),l});