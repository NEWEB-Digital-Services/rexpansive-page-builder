/**
 * Stick a the content of a section to the top of the screen
 * 
 * @version 1.0.0
 */
!function(t,e){"use strict";t.StickySection=e(t)}("undefined"!=typeof window?window:this,function(){function t(){this.element=null,this.stickyElement=null,this.borderAnimationEl={},this.overlayAnimationEl=null,this.ticking=!1,this.stickyId=null,arguments[0]&&(this.element=arguments[0]);var t={offset:0,stickyElementSelector:".sticky-element",stickyJS:!0,borderAnimation:!1,overlayAnimation:!1,originalOverlaySelector:".responsive-overlay",borderCustomClass:"",requestAnimationFrame:!1};if(arguments[1]&&"object"==typeof arguments[1]?this.options=m(t,arguments[1]):this.options=t,this.stickyElement=""!==this.options.stickyElementSelector?this.element.querySelector(this.options.stickyElementSelector):null,null!==this.stickyElement){if(this.stickyId=v,b[this.stickyId]=!1,v++,this.options.borderAnimation&&(this.borderAnimationEl.el=document.createElement("div"),_(this.borderAnimationEl.el,"sticky__border-animation__wrap"),this.borderAnimationEl.bt=document.createElement("div"),_(this.borderAnimationEl.bt,"sticky__border-animation__top"),this.borderAnimationEl.br=document.createElement("div"),_(this.borderAnimationEl.br,"sticky__border-animation__right"),this.borderAnimationEl.bb=document.createElement("div"),_(this.borderAnimationEl.bb,"sticky__border-animation__bottom"),this.borderAnimationEl.bl=document.createElement("div"),_(this.borderAnimationEl.bl,"sticky__border-animation__left"),this.borderAnimationEl.el.appendChild(this.borderAnimationEl.bt),this.borderAnimationEl.el.appendChild(this.borderAnimationEl.br),this.borderAnimationEl.el.appendChild(this.borderAnimationEl.bb),this.borderAnimationEl.el.appendChild(this.borderAnimationEl.bl),""!==this.options.borderCustomClass&&_(this.borderAnimationEl.el,this.options.borderCustomClass),this.element.insertBefore(this.borderAnimationEl.el,this.element.firstChild)),this.options.overlayAnimation){var e=this.element.querySelector(this.options.originalOverlaySelector);e&&(this.overlayAnimationEl=document.createElement("div"),_(this.overlayAnimationEl,"sticky__overlay"),this.overlayAnimationEl.style.backgroundColor=e.style.backgroundColor,w(e,"rex-active-overlay"),this.stickyElement.appendChild(this.overlayAnimationEl))}if(this.options.stickyJS?_(this.element,"sticky-js"):_(this.element,"sticky-css"),s.call(this),this.options.requestAnimationFrame)window.addEventListener("scroll",n.bind(this));else if(f){var i=this;setInterval(function(){b[i.stickyId]&&(b[i.stickyId]=!1,s.call(i))},50)}else E?y[this.stickyId]=s.bind(this):window.addEventListener("scroll",s.bind(this));u.push(this)}}function e(){var t,e=y.length;for(t=0;t<e;t++)y[t].call()}function i(){var t,e=b.length;for(t=0;t<e;t++)b[t]=!0}function n(t){o.call(this)}function o(){this.ticking||requestAnimationFrame(s.bind(this)),this.ticking=!0}function s(t){this.ticking=!1;var e=c(),i=e+p,n=d(this.element,e),o=this.element.offsetHeight,s=n+o,a=p*this.options.offset;e+=a,i-=a;var m=e>=n,h=i<=s,u=e<=n,b=i>=s;if(this.options.stickyJS)if(m&&h){var y=e-n;r.call(this,y),_(this.element,"will-change-rule")}else w(this.element,"will-change-rule"),u?r.call(this,0):b&&r.call(this,o-p);var v=s>e,f=n<i;v&&f?_(this.element,"visibile"):w(this.element,"visibile");var E=100*(e-n)/(o-p);if(this.options.borderAnimation)if(m&&h){var A=1-1*E/5;A<=1&&A>0?l.call(this,A):l.call(this,0)}else u?this.options.borderAnimation&&l.call(this,1):b&&this.options.borderAnimation&&l.call(this,0);var k;this.options.overlayAnimation&&(m&&h?(k=1-Math.pow(1-E/100,3),this.overlayAnimationEl.style.opacity=k):u?this.overlayAnimationEl.style.opacity=0:b&&(this.overlayAnimationEl.style.opacity=1))}function r(t){for(var e=0;e<k;e++)this.stickyElement.style[A[e]]="translate(0px,"+t+"px)"}function l(t){for(var e=0;e<k;e++)this.borderAnimationEl.bt.style[A[e]]="scale(1,"+t+")",this.borderAnimationEl.bb.style[A[e]]="scale(1,"+t+")",this.borderAnimationEl.br.style[A[e]]="scale("+t+",1)",this.borderAnimationEl.bl.style[A[e]]="scale("+t+",1)"}function a(t){p=document.documentElement.clientHeight}function c(){return window.pageYOffset||document.documentElement.scrollTop}function d(t,e){e="undefined"!=typeof e?e:window.pageYOffset||document.documentElement.scrollTop;var i=t.getBoundingClientRect();return i.top+e}function m(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function h(t){t&&t.parentNode&&t.parentNode.removeChild(t)}var u=[],b=[],y=[],v=0,f=!0,E=!1;f?window.addEventListener("scroll",i):E&&window.addEventListener("scroll",e);var p=document.documentElement.clientHeight;window.addEventListener("resize",a);var A=["-webkit-transform","-ms-transform","transform"],k=A.length;t.prototype.hideBorder=function(){l.call(this,0)};var g,_,w,C;return"classList"in document.documentElement?(g=function(t,e){return t.classList.contains(e)},_=function(t,e){t.classList.add(e)},w=function(t,e){t.classList.remove(e)}):(g=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},_=function(t,e){g(t,e)||(t.className+=" "+e)},w=function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}),C=function(t,e){g(t,e)?w(t,e):_(t,e)},t.prototype.destroy=function(){function t(t){return t.element!==this.element}h(this.overlayAnimationEl),h(this.borderAnimationEl.el),h(this.stickyElement),u=u.filter(t.bind(this))},t.prepare=function(t){var e=t.querySelector(".section-data");if(g(t,"mp4-player"))videoEl=t.querySelector(".rex-video-wrap"),videoControls=videoEl.querySelector(".rex-video__controls"),videoControls&&(stickyVideoControls=document.createElement("div"),_(stickyVideoControls,"sticky-video-controls"),videoEl.insertAdjacentElement("afterend",stickyVideoControls));else if(""!==t.style.backgroundImage||g(t,"section-w-image")){var i=t.querySelector(".responsive-overlay");i.insertAdjacentHTML("beforebegin",'<div class="sticky-background-simulator"></div>');var n=t.querySelector(".sticky-background-simulator");"0"===_plugin_frontend_settings.fast_load&&(n.style.backgroundImage="url("+e.getAttribute("data-image_bg_section")+")")}},t.data=function(t){var e=0,i=u.length;for(e=0;e<i;e++)if(t===u[e].element)return u[e];return null},t});