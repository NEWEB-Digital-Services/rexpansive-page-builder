/**
 * PopUp Content plugin
 * 
 */
!function(t,e){"use strict";t.PopUpContent=e(t)}("undefined"!=typeof window?window:this,function(){function t(){this.element=null,this.iframeContainer=null,this.hashTarget="",this.target=null,this.urlTarget="",this.closeBtn=null,this.contentLoaded=!1,arguments[0]&&(this.element=arguments[0]);var t={bodyPopUpViewClass:"popup-content--active",iframePopUpLoadClass:"popup-iframe--loaded",popUpContentLoaded:"popup-content--loaded",popUpWrapper:"popup-content",popupViewClass:"popup-content--view",popUpCloseWrapper:"popup-content-close-wrapper",popUpCloseClass:"popup-content-close",popUpContent:"popup-content-content",contentInjectorPoint:"rexpansive_section",loadTiming:"hover",contentRetrieveMethod:"ajax",getPopUpContentComplete:null,ajaxSettings:null};arguments[1]&&"object"==typeof arguments[1]?this.options=d(t,arguments[1]):this.options=t,null!==this.element&&(e.call(this),null!==this.target&&(n.call(this),C.push(this)))}function e(){if(this.hashTarget=this.element.hash.substr(1),""!==this.hashTarget)this.target=document.getElementById(this.hashTarget);else{this.urlTarget=this.element.href,this.target=c(this.options),null!==this.options.ajaxSettings&&(this.options.ajaxSettings.data.target=this.urlTarget,this.options.ajaxSettings.success=i.bind(this),this.options.ajaxSettings.error=function(t){console.log("There was an error")});var t=h(this.element,this.options.contentInjectorPoint);t.insertAdjacentElement("afterend",this.target),"load"===this.options.loadTiming&&s.call(this)}null!==this.target&&(this.closeBtn=[].slice.call(this.target.getElementsByClassName(this.options.popUpCloseClass)),this.closeBtn.length>0&&(this.closeBtn=this.closeBtn[0]))}function n(){this.element.addEventListener("click",o.bind(this)),this.closeBtn&&this.closeBtn.addEventListener("click",o.bind(this)),"hover"===this.options.loadTiming&&this.element.addEventListener("mouseover",s.bind(this),{once:!0})}function o(t){t.preventDefault(),g(this.target,this.options.popupViewClass),g(document.body,this.options.bodyPopUpViewClass)}function i(t){console.time("load_content"),t.success&&a.call(this,t.data.data),console.timeEnd("load_content")}function s(t){if(!this.contentLoaded){t.preventDefault();var e=this;switch(this.options.contentRetrieveMethod){case"iframe":a.call(this);break;case"append":default:if(null!==this.options.ajaxSettings)$.ajax(this.options.ajaxSettings);else{var n=new XMLHttpRequest;n.open("GET",this.urlTarget,!0),n.onload=function(){if(n.status>=200&&n.status<400){var t=n.responseText;a.call(e,t)}},n.onerror=function(){},n.send()}}}}function a(t){switch(p.call(this,t),this.options.contentRetrieveMethod){case"iframe":this.iframeContainer.addEventListener("load",r.bind(this));break;case"append":default:f(this.target,this.options.popUpContentLoaded),"function"==typeof this.options.getPopUpContentComplete&&this.options.getPopUpContentComplete.call(this)}this.contentLoaded=!0}function p(t){switch(this.options.contentRetrieveMethod){case"iframe":this.target.querySelector("."+this.options.popUpContent).innerHTML='<iframe src="'+this.urlTarget+'"></iframe>',this.iframeContainer=this.target.getElementsByTagName("IFRAME")[0];break;case"append":default:this.target.querySelector("."+this.options.popUpContent).innerHTML=t}}function r(t){f(this.iframeContainer.contentDocument.body,this.options.iframePopUpLoadClass),f(this.target,this.options.popUpContentLoaded),"function"==typeof this.options.getPopUpContentComplete&&this.options.getPopUpContentComplete.call(this);var e=new Event("popUpContent:loadComplete");this.iframeContainer.contentDocument.dispatchEvent(e),this.iframeContainer.contentWindow.addEventListener("click",l.bind(this))}function l(t){if("A"===t.target.tagName.toUpperCase()&&""!==t.target.href){t.preventDefault(),m(this.target,this.options.popupViewClass),m(document.body,this.options.bodyPopUpViewClass);var e={rexliveEvent:!0,eventName:"popUpContent:changePage",href:t.target.href};window.parent.postMessage(e,"*")}}function c(t){var e=document.createElement("div");f(e,t.popUpWrapper),f(e,"popup-content__method--"+t.contentRetrieveMethod);var n=document.createElement("div");f(n,t.popUpCloseWrapper);var o=document.createElement("div");o.innerHTML='<i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i>',f(o,t.popUpCloseClass);var i=document.createElement("div");return f(i,t.popUpContent),n.appendChild(o),e.appendChild(n),e.appendChild(i),e}function h(t,e){return null===t.parentNode||t.parentNode instanceof HTMLDocument?null:u(t.parentNode,e)?t.parentNode:h(t.parentNode,e)}function d(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var u,f,m,g,C=[];return"classList"in document.documentElement?(u=function(t,e){return t.classList.contains(e)},f=function(t,e){t.classList.add(e)},m=function(t,e){t.classList.remove(e)}):(u=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},f=function(t,e){u(t,e)||(t.className+=" "+e)},m=function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}),g=function(t,e){u(t,e)?m(t,e):f(t,e)},t.data=function(t){var e=0,n=C.length;for(e=0;e<n;e++)if(t===C[e].element)return C[e];return null},t});