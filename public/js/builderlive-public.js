/**
 * Utilities functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Live_Utilities=function(t){"use strict";var e=function(t){t.find(".tool-button--spectrum").remove(),t.find("input.spectrum-input-element").spectrum("destroy")},n=function(e){var n=tmpl("tmpl-tool-save",{}),o=t(n);e.spectrum("container").append(o),o.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.spectrum("container").find(".sp-choose").trigger("click")})},o=function(e){var n=tmpl("tmpl-tool-close",{}),o=t(n);e.spectrum("container").append(o),o.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.attr("data-revert",!0),e.spectrum("container").find(".sp-cancel").trigger("click")})},i=function(t){t="undefined"!=typeof t?t:null,Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),t&&t.removeClass("activeRowTools")},r=function(){};return{init:r,removeColorPicker:e,addSpectrumCustomSaveButton:n,addSpectrumCustomCloseButton:o,activeAddSection:i}}(jQuery);
/**
 * JS Object to manipulate and reorder a grid
 * @param {int} maxWidth max column width
 * @since 2.0.0
 */
function IndexedGrid(i){i="undefined"!=typeof i?i:12,this.grid=[],this.maxWidth=i}IndexedGrid.prototype.insertionSort=function(){for(var i,r=this.grid.length,t=1;t<r;t++){for(var d=this.grid[t],i=t-1;i>=0&&this.grid[i]>d;i--)this.grid[i+1]=this.grid[i];this.grid[i+1]=d}},IndexedGrid.prototype.setGrid=function(i,r,t,d){for(var h=0;h<d;h++)for(var e=0;e<t;e++)this.grid.push(i+e+(r+h)*this.maxWidth);this.insertionSort()},IndexedGrid.prototype.checkGrid=function(i){for(var r=0;this.grid[r]<i;){var t=this.grid[r];t+1!==this.grid[r+1]&&this.grid.push(t+1),r++}this.insertionSort()},IndexedGrid.prototype.willFit=function(i,r){if(0==this.grid.length)return 0;for(var t=this.findHoles(),d=0,h=t.length;d<h;d++){var e=t[d],o=t[d]+1;if("undefined"!=typeof e&&"undefined"!=typeof o)for(var n=this.grid[e]+1;n<this.grid[o];n++){var s=this.searchFreeSpace(n,i,r);if(s)return n}}for(var f=this.grid[this.grid.length-1]+1,a=Math.floor(f/this.maxWidth),g=Math.floor((f+(i-1))/this.maxWidth);a!==g;)f+=1,a=Math.floor(f/this.maxWidth),g=Math.floor((f+(i-1))/this.maxWidth);return f},IndexedGrid.prototype.findHoles=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)"undefined"!=typeof this.grid[r+1]&&this.grid[r]+1===this.grid[r+1]||i.push(r);return i},IndexedGrid.prototype.searchFreeSpace=function(i,r,t){var d=Math.floor(i/this.maxWidth),h=Math.floor((i+r-1)/this.maxWidth);if(d!==h)return!1;for(var e=0;e<t;e++)for(var o=0;o<r;o++){var n=i+o+e*this.maxWidth;if(-1!==this.grid.indexOf(n))return!1}return!0},IndexedGrid.prototype.negativeGrid=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)if(this.grid[r]+1!==this.grid[r+1])for(var d=this.grid[r]+1;d<this.grid[r+1];d++)i.push(d);return i};
/**
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.
 *
 *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 *
 */
!function(){"use strict";function t(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||c(),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,i=o.width*o.height;n?this.intersectionRatio=Number((i/n).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function e(t,e){var n=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function n(){return window.performance&&performance.now&&performance.now()}function o(t,e){var n=null;return function(){n||(n=setTimeout(function(){t(),n=null},e))}}function i(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t,e){var n=Math.max(t.top,e.top),o=Math.min(t.bottom,e.bottom),i=Math.max(t.left,e.left),r=Math.min(t.right,e.right),s=r-i,h=o-n;return s>=0&&h>=0&&{top:n,bottom:o,left:i,right:r,width:s,height:h}}function h(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):c()}function c(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(t,e){for(var n=e;n;){if(n==t)return!0;n=a(n)}return!1}function a(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}if("object"==typeof window){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return void("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));var l=window.document,d=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){var e=this._observationTargets.some(function(e){return e.element==t});if(!e){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},e.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},e.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(window,"resize",this._checkForIntersections,!0),i(l,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(l,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(window,"resize",this._checkForIntersections,!0),r(l,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),o=e?this._getRootRect():c();this._observationTargets.forEach(function(i){var r=i.element,s=h(r),c=this._rootContainsTarget(r),u=i.entry,a=e&&c&&this._computeTargetAndRootIntersection(r,o),l=i.entry=new t({time:n(),target:r,boundingClientRect:s,rootBounds:o,intersectionRect:a});u?e&&c?this._hasCrossedThreshold(u,l)&&this._queuedEntries.push(l):u&&u.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(t,e){if("none"!=window.getComputedStyle(t).display){for(var n=h(t),o=n,i=a(t),r=!1;!r;){var c=null,u=1==i.nodeType?window.getComputedStyle(i):{};if("none"==u.display)return;if(i==this.root||i==l?(r=!0,c=e):i!=l.body&&i!=l.documentElement&&"visible"!=u.overflow&&(c=h(i)),c&&(o=s(c,o),!o))break;i=a(i)}return o}},e.prototype._getRootRect=function(){var t;if(this.root)t=h(this.root);else{var e=l.documentElement,n=l.body;t={top:0,left:0,right:e.clientWidth||n.clientWidth,width:e.clientWidth||n.clientWidth,bottom:e.clientHeight||n.clientHeight,height:e.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},e.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},e.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var i=0;i<this.thresholds.length;i++){var r=this.thresholds[i];if(r==n||r==o||r<n!=r<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||u(l,this.root)},e.prototype._rootContainsTarget=function(t){return u(this.root||l,t)},e.prototype._registerInstance=function(){d.indexOf(this)<0&&d.push(this)},e.prototype._unregisterInstance=function(){var t=d.indexOf(this);t!=-1&&d.splice(t,1)},window.IntersectionObserver=e,window.IntersectionObserverEntry=t}}();
/*! jQuery requestAnimationFrame - 0.1.3-pre - 2016-10-26
* https://github.com/gnarf37/jquery-requestAnimationFrame
 * Copyright (c) 2016 Corey Frang; Licensed MIT */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function e(){i&&(window.requestAnimationFrame(e),n.fx.tick())}if(Number(n.fn.jquery.split(".")[0])>=3)return void(window.console&&window.console.warn&&window.console.warn("The jquery.requestanimationframe plugin is not needed in jQuery 3.0 or newer as they handle it natively."));var i;window.requestAnimationFrame&&(n.fx.timer=function(o){o()&&n.timers.push(o)&&!i&&(i=!0,e())},n.fx.stop=function(){i=!1})});
!function(e){"use strict";var n=function(e,t){var r=/[^\w\-.:]/.test(e)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+e.replace(n.regexp,n.func)+"';return _s;"):n.cache[e]=n.cache[e]||n(n.load(e));return t?r(t,n):function(e){return r(e,n)}};n.cache={},n.load=function(e){return document.getElementById(e).innerHTML},n.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(e,n,t,r,c,u){return n?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[n]||"\\"+n:t?"="===t?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":c?"';":u?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},n.encode=function(e){return(null==e?"":""+e).replace(n.encReg,function(e){return n.encMap[e]||""})},n.arg="o",n.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.tmpl=n}(this);
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var a=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&r<8&&(i.isOldIOSPhone=!0))}var l=a.match(/Android\s([0-9\.]*)/),s=l?l[1]:0;s=parseFloat(s),s>=1&&(s<4.4&&(i.isOldAndroid=!0),i.androidVersion=s),i.isMobileOpera=/opera mini|opera mobi/i.test(a)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],m=0;m<4;m++){n=p[m];for(var f=0;f<3;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var h=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)});var a=this,r=25,l=3,s={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(s,i);var u,c,d,p,m,f,h,y,v,x,g,w,b,I,C,D,T,M,S,A,E,O,k,R,Z,P,F,L,z,_,N,U,H,Y,W,B,G,X,V,K,q,$,j,J,Q,ee,te,ne,ie,oe,ae,re,le,se,ue,ce,de,pe=function(){return{x:0,y:0}},me=pe(),fe=pe(),he=pe(),ye={},ve=0,xe={},ge=pe(),we=0,be=!0,Ie=[],Ce={},De=!1,Te=function(e,t){o.extend(a,t.publicMethods),Ie.push(e)},Me=function(e){var t=en();return e>t-1?e-t:e<0?t+e:e},Se={},Ae=function(e,t){return Se[e]||(Se[e]=[]),Se[e].push(t)},Ee=function(e){var t=Se[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(a,n)}},Oe=function(){return(new Date).getTime()},ke=function(e){ue=e,a.bg.style.opacity=e*s.bgOpacity},Re=function(e,t,n,i,o){(!De||o&&o!==a.currItem)&&(i/=o?o.fitRatio:a.currItem.fitRatio),e[O]=w+t+"px, "+n+"px"+b+" scale("+i+")"},Ze=function(e){oe&&(e&&(x>a.currItem.fitRatio?De||(mn(a.currItem,!1,!0),De=!0):De&&(mn(a.currItem),De=!1)),Re(oe,he.x,he.y,x))},Pe=function(e){e.container&&Re(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Fe=function(e,t){t[O]=w+e+"px, 0px"+b},Le=function(e,t){if(!s.loop&&t){var n=p+(ge.x*ve-e)/ge.x,i=Math.round(e-gt.x);(n<0&&i>0||n>=en()-1&&i<0)&&(e=gt.x+i*s.mainScrollEndFriction)}gt.x=e,Fe(e,m)},ze=function(e,t){var n=wt[e]-xe[e];return fe[e]+me[e]+n-n*(t/g)},_e=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ne=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ue=null,He=function(){Ue&&(o.unbind(document,"mousemove",He),o.addClass(e,"pswp--has_mouse"),s.mouseUsed=!0,Ee("mouseUsed")),Ue=setTimeout(function(){Ue=null},100)},Ye=function(){o.bind(document,"keydown",a),N.transform&&o.bind(a.scrollWrap,"click",a),s.mouseUsed||o.bind(document,"mousemove",He),o.bind(window,"resize scroll orientationchange",a),Ee("bindEvents")},We=function(){o.unbind(window,"resize scroll orientationchange",a),o.unbind(window,"scroll",v.scroll),o.unbind(document,"keydown",a),o.unbind(document,"mousemove",He),N.transform&&o.unbind(a.scrollWrap,"click",a),V&&o.unbind(window,h,a),clearTimeout(U),Ee("unbindEvents")},Be=function(e,t){var n=un(a.currItem,ye,e);return t&&(ie=n),n},Ge=function(e){return e||(e=a.currItem),e.initialZoomLevel},Xe=function(e){return e||(e=a.currItem),e.w>0?s.maxSpreadZoom:1},Ve=function(e,t,n,i){return i===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],!0):(n[e]=ze(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ke=function(){if(O){var t=N.perspective&&!R;return w="translate"+(t?"3d(":"("),void(b=N.perspective?", 0px)":")")}O="left",o.addClass(e,"pswp--ie"),Fe=function(e,t){t.left=e+"px"},Pe=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Ze=function(){if(oe){var e=oe,t=a.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},qe=function(e){var t="";s.escKey&&27===e.keyCode?t="close":s.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))},$e=function(e){e&&($||q||ae||G)&&(e.preventDefault(),e.stopPropagation())},je=function(){a.setScrollOffset(0,o.getScrollY())},Je={},Qe=0,et=function(e){Je[e]&&(Je[e].raf&&P(Je[e].raf),Qe--,delete Je[e])},tt=function(e){Je[e]&&et(e),Je[e]||(Qe++,Je[e]={})},nt=function(){for(var e in Je)Je.hasOwnProperty(e)&&et(e)},it=function(e,t,n,i,o,a,r){var l,s=Oe();tt(e);var u=function(){if(Je[e]){if(l=Oe()-s,l>=i)return et(e),a(n),void(r&&r());a((n-t)*o(l/i)+t),Je[e].raf=Z(u)}};u()},ot={shout:Ee,listen:Ae,viewportSize:ye,options:s,isMainScrollAnimating:function(){return ae},getZoomLevel:function(){return x},getCurrentIndex:function(){return p},isDragging:function(){return V},isZooming:function(){return ee},setScrollOffset:function(e,t){xe.x=e,_=xe.y=t,Ee("updateScrollOffset",xe)},applyZoomPan:function(e,t,n,i){he.x=t,he.y=n,x=e,Ze(i)},init:function(){if(!u&&!c){var n;a.framework=o,a.template=e,a.bg=o.getChildByClass(e,"pswp__bg"),F=e.className,u=!0,N=o.detectFeatures(),Z=N.raf,P=N.caf,O=N.transform,z=N.oldIE,a.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),a.container=o.getChildByClass(a.scrollWrap,"pswp__container"),m=a.container.style,a.itemHolders=D=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],D[0].el.style.display=D[2].el.style.display="none",Ke(),v={resize:a.updateSize,orientationchange:function(){clearTimeout(U),U=setTimeout(function(){ye.x!==a.scrollWrap.clientWidth&&a.updateSize()},500)},scroll:je,keydown:qe,click:$e};var i=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!i||(s.showAnimationDuration=s.hideAnimationDuration=0),n=0;n<Ie.length;n++)a["init"+Ie[n]]();if(t){var r=a.ui=new t(a,o);r.init()}Ee("firstUpdate"),p=p||s.index||0,(isNaN(p)||p<0||p>=en())&&(p=0),a.currItem=Qt(p),(N.isOldIOSPhone||N.isOldAndroid)&&(be=!1),e.setAttribute("aria-hidden","false"),s.modal&&(be?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===_&&(Ee("initialLayout"),_=L=o.getScrollY());var d="pswp--open ";for(s.mainClass&&(d+=s.mainClass+" "),s.showHideOpacity&&(d+="pswp--animate_opacity "),d+=R?"pswp--touch":"pswp--notouch",d+=N.animationName?" pswp--css_animation":"",d+=N.svg?" pswp--svg":"",o.addClass(e,d),a.updateSize(),f=-1,we=null,n=0;n<l;n++)Fe((n+f)*ge.x,D[n].el.style);z||o.bind(a.scrollWrap,y,a),Ae("initialZoomInEnd",function(){a.setContent(D[0],p-1),a.setContent(D[2],p+1),D[0].el.style.display=D[2].el.style.display="block",s.focus&&e.focus(),Ye()}),a.setContent(D[1],p),a.updateCurrItem(),Ee("afterInit"),be||(I=setInterval(function(){Qe||V||ee||x!==a.currItem.initialZoomLevel||a.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,Ee("close"),We(),nn(a.currItem,null,!0,a.destroy))},destroy:function(){Ee("destroy"),qt&&clearTimeout(qt),e.setAttribute("aria-hidden","true"),e.className=F,I&&clearInterval(I),o.unbind(a.scrollWrap,y,a),o.unbind(window,"scroll",a),Tt(),nt(),Se=null},panTo:function(e,t,n){n||(e>ie.min.x?e=ie.min.x:e<ie.max.x&&(e=ie.max.x),t>ie.min.y?t=ie.min.y:t<ie.max.y&&(t=ie.max.y)),he.x=e,he.y=t,Ze()},handleEvent:function(e){e=e||window.event,v[e.type]&&v[e.type](e)},goTo:function(e){e=Me(e);var t=e-p;we=t,p=e,a.currItem=Qt(p),ve-=t,Le(ge.x*ve),nt(),ae=!1,a.updateCurrItem()},next:function(){a.goTo(p+1)},prev:function(){a.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Ee("beforeChange",0),D[1].el.children.length){var t=D[1].el.children[0];oe=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else oe=null;ie=a.currItem.bounds,g=x=a.currItem.initialZoomLevel,he.x=ie.center.x,he.y=ie.center.y,e&&Ee("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<l;e++)D[e].item&&(D[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==we){var t,n=Math.abs(we);if(!(e&&n<2)){a.currItem=Qt(p),De=!1,Ee("beforeChange",we),n>=l&&(f+=we+(we>0?-l:l),n=l);for(var i=0;i<n;i++)we>0?(t=D.shift(),D[l-1]=t,f++,Fe((f+2)*ge.x,t.el.style),a.setContent(t,p-n+i+1+1)):(t=D.pop(),D.unshift(t),f--,Fe(f*ge.x,t.el.style),a.setContent(t,p+n-i-1-1));if(oe&&1===Math.abs(we)){var o=Qt(T);o.initialZoomLevel!==x&&(un(o,ye),mn(o),Pe(o))}we=0,a.updateCurrZoomItem(),T=p,Ee("afterChange")}}},updateSize:function(t){if(!be&&s.modal){var n=o.getScrollY();if(_!==n&&(e.style.top=n+"px",_=n),!t&&Ce.x===window.innerWidth&&Ce.y===window.innerHeight)return;Ce.x=window.innerWidth,Ce.y=window.innerHeight,e.style.height=Ce.y+"px"}if(ye.x=a.scrollWrap.clientWidth,ye.y=a.scrollWrap.clientHeight,je(),ge.x=ye.x+Math.round(ye.x*s.spacing),ge.y=ye.y,Le(ge.x*ve),Ee("beforeResize"),void 0!==f){for(var i,r,u,c=0;c<l;c++)i=D[c],Fe((c+f)*ge.x,i.el.style),u=p+c-1,s.loop&&en()>2&&(u=Me(u)),r=Qt(u),r&&(C||r.needsUpdate||!r.bounds)?(a.cleanSlide(r),a.setContent(i,u),1===c&&(a.currItem=r,a.updateCurrZoomItem(!0)),r.needsUpdate=!1):i.index===-1&&u>=0&&a.setContent(i,u),r&&r.container&&(un(r,ye),mn(r),Pe(r));C=!1}g=x=a.currItem.initialZoomLevel,ie=a.currItem.bounds,ie&&(he.x=ie.center.x,he.y=ie.center.y,Ze(!0)),Ee("resize")},zoomTo:function(e,t,n,i,a){t&&(g=x,wt.x=Math.abs(t.x)-he.x,wt.y=Math.abs(t.y)-he.y,_e(fe,he));var r=Be(e,!1),l={};Ve("x",r,l,e),Ve("y",r,l,e);var s=x,u={x:he.x,y:he.y};Ne(l);var c=function(t){1===t?(x=e,he.x=l.x,he.y=l.y):(x=(e-s)*t+s,he.x=(l.x-u.x)*t+u.x,he.y=(l.y-u.y)*t+u.y),a&&a(t),Ze(1===t)};n?it("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},at=30,rt=10,lt={},st={},ut={},ct={},dt={},pt=[],mt={},ft=[],ht={},yt=0,vt=pe(),xt=0,gt=pe(),wt=pe(),bt=pe(),It=function(e,t){return e.x===t.x&&e.y===t.y},Ct=function(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r},Dt=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},Tt=function(){j&&(P(j),j=null)},Mt=function(){V&&(j=Z(Mt),Yt())},St=function(){return!("fit"===s.scaleMode&&x===a.currItem.initialZoomLevel)},At=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:At(e.parentNode,t))},Et={},Ot=function(e,t){return Et.prevent=!At(e.target,s.isClickableElement),Ee("preventDragEvent",e,t,Et),Et.prevent},kt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Zt=function(e,t,n){if(e-Y>50){var i=ft.length>2?ft.shift():{};i.x=t,i.y=n,ft.push(i),Y=e}},Pt=function(){var e=he.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(ye.y/2))},Ft={},Lt={},zt=[],_t=function(e){for(;zt.length>0;)zt.pop();return k?(de=0,pt.forEach(function(e){0===de?zt[0]=e:1===de&&(zt[1]=e),de++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(zt[0]=kt(e.touches[0],Ft),e.touches.length>1&&(zt[1]=kt(e.touches[1],Lt))):(Ft.x=e.pageX,Ft.y=e.pageY,Ft.id="",zt[0]=Ft),zt},Nt=function(e,t){var n,i,o,r,l=0,u=he[e]+t[e],c=t[e]>0,d=gt.x+t.x,p=gt.x-mt.x;return n=u>ie.min[e]||u<ie.max[e]?s.panEndFriction:1,u=he[e]+t[e]*n,!s.allowPanToNext&&x!==a.currItem.initialZoomLevel||(oe?"h"!==re||"x"!==e||q||(c?(u>ie.min[e]&&(n=s.panEndFriction,l=ie.min[e]-u,i=ie.min[e]-fe[e]),(i<=0||p<0)&&en()>1?(r=d,p<0&&d>mt.x&&(r=mt.x)):ie.min.x!==ie.max.x&&(o=u)):(u<ie.max[e]&&(n=s.panEndFriction,l=u-ie.max[e],i=fe[e]-ie.max[e]),(i<=0||p>0)&&en()>1?(r=d,p>0&&d<mt.x&&(r=mt.x)):ie.min.x!==ie.max.x&&(o=u))):r=d,"x"!==e)?void(ae||J||x>a.currItem.fitRatio&&(he[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),J=r!==mt.x),ie.min.x!==ie.max.x&&(void 0!==o?he.x=o:J||(he.x+=t.x*n)),void 0!==r)},Ut=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Jt)return void e.preventDefault();if(!X||"mousedown"!==e.type){if(Ot(e,!0)&&e.preventDefault(),Ee("pointerDown"),k){var t=o.arraySearch(pt,e.pointerId,"id");t<0&&(t=pt.length),pt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=_t(e),i=n.length;Q=null,nt(),V&&1!==i||(V=le=!0,o.bind(window,h,a),B=ce=se=G=J=$=K=q=!1,re=null,Ee("firstTouchStart",n),_e(fe,he),me.x=me.y=0,_e(ct,n[0]),_e(dt,ct),mt.x=ge.x*ve,ft=[{x:ct.x,y:ct.y}],Y=H=Oe(),Be(x,!0),Tt(),Mt()),!ee&&i>1&&!ae&&!J&&(g=x,q=!1,ee=K=!0,me.y=me.x=0,_e(fe,he),_e(lt,n[0]),_e(st,n[1]),Rt(lt,st,bt),wt.x=Math.abs(bt.x)-he.x,wt.y=Math.abs(bt.y)-he.y,te=ne=Dt(lt,st))}}},Ht=function(e){if(e.preventDefault(),k){var t=o.arraySearch(pt,e.pointerId,"id");if(t>-1){var n=pt[t];n.x=e.pageX,n.y=e.pageY}}if(V){var i=_t(e);if(re||$||ee)Q=i;else if(gt.x!==ge.x*ve)re="h";else{var a=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(a)>=rt&&(re=a>0?"h":"v",Q=i)}}},Yt=function(){if(Q){var e=Q.length;if(0!==e)if(_e(lt,Q[0]),ut.x=lt.x-ct.x,ut.y=lt.y-ct.y,ee&&e>1){if(ct.x=lt.x,ct.y=lt.y,!ut.x&&!ut.y&&It(Q[1],st))return;_e(st,Q[1]),q||(q=!0,Ee("zoomGestureStarted"));var t=Dt(lt,st),n=Vt(t);n>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ce=!0);var i=1,o=Ge(),r=Xe();if(n<o)if(s.pinchToClose&&!ce&&g<=a.currItem.initialZoomLevel){var l=o-n,u=1-l/(o/1.2);ke(u),Ee("onPinchClose",u),se=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>r&&(i=(n-r)/(6*o),i>1&&(i=1),n=r+i*o);i<0&&(i=0),te=t,Rt(lt,st,vt),me.x+=vt.x-bt.x,me.y+=vt.y-bt.y,_e(bt,vt),he.x=ze("x",n),he.y=ze("y",n),B=n>x,x=n,Ze()}else{if(!re)return;if(le&&(le=!1,Math.abs(ut.x)>=rt&&(ut.x-=Q[0].x-dt.x),Math.abs(ut.y)>=rt&&(ut.y-=Q[0].y-dt.y)),ct.x=lt.x,ct.y=lt.y,0===ut.x&&0===ut.y)return;if("v"===re&&s.closeOnVerticalDrag&&!St()){me.y+=ut.y,he.y+=ut.y;var c=Pt();return G=!0,Ee("onVerticalDrag",c),ke(c),void Ze()}Zt(Oe(),lt.x,lt.y),$=!0,ie=a.currItem.bounds;var d=Nt("x",ut);d||(Nt("y",ut),Ne(he),Ze())}}},Wt=function(e){if(N.isOldAndroid){if(X&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(X),X=setTimeout(function(){X=0},600))}Ee("pointerUp"),Ot(e,!1)&&e.preventDefault();var t;if(k){var n=o.arraySearch(pt,e.pointerId,"id");if(n>-1)if(t=pt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var r,l=_t(e),u=l.length;if("mouseup"===e.type&&(u=0),2===u)return Q=null,!0;1===u&&_e(dt,l[0]),0!==u||re||ae||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ee("touchRelease",e,t));var c=-1;if(0===u&&(V=!1,o.unbind(window,h,a),Tt(),ee?c=0:xt!==-1&&(c=Oe()-xt)),xt=1===u?Oe():-1,r=c!==-1&&c<150?"zoom":"swipe",ee&&u<2&&(ee=!1,1===u&&(r="zoomPointerUp"),Ee("zoomGestureEnded")),Q=null,$||q||ae||G)if(nt(),W||(W=Bt()),W.calculateSwipeSpeed("x"),G){var d=Pt();if(d<s.verticalDragRange)a.close();else{var p=he.y,m=ue;it("verticalDrag",0,1,300,o.easing.cubic.out,function(e){he.y=(a.currItem.initialPosition.y-p)*e+p,ke((1-m)*e+m),Ze()}),Ee("onVerticalDrag",1)}}else{if((J||ae)&&0===u){var f=Xt(r,W);if(f)return;r="zoomPointerUp"}if(!ae)return"swipe"!==r?void Kt():void(!J&&x>a.currItem.fitRatio&&Gt(W))}},Bt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ft.length>1?(e=Oe()-Y+50,t=ft[ft.length-2][i]):(e=Oe()-H,t=dt[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ie.min[e]?n.backAnimDestination[e]=ie.min[e]:he[e]<ie.max[e]&&(n.backAnimDestination[e]=ie.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,it("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){he[e]=t,Ze()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Je.zoomPan&&(Je.zoomPan.raf=Z(n.panAnimLoop),n.now=Oe(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Ze(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),Ze(),void et("zoomPan")}};return n},Gt=function(e){return e.calculateSwipeSpeed("y"),ie=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(tt("zoomPan"),e.lastNow=Oe(),void e.panAnimLoop())},Xt=function(e,t){var n;ae||(yt=p);var i;if("swipe"===e){var r=ct.x-dt.x,l=t.lastFlickDist.x<10;r>at&&(l||t.lastFlickOffset.x>20)?i=-1:r<-at&&(l||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(p+=i,p<0?(p=s.loop?en()-1:0,u=!0):p>=en()&&(p=s.loop?0:en()-1,u=!0),u&&!s.loop||(we+=i,ve-=i,n=!0));var c,d=ge.x*ve,m=Math.abs(d-gt.x);return n||d>gt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?m/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,yt===p&&(n=!1),ae=!0,Ee("mainScrollAnimStart"),it("mainScroll",gt.x,d,c,o.easing.cubic.out,Le,function(){nt(),ae=!1,yt=-1,(n||yt!==p)&&a.updateCurrItem(),Ee("mainScrollAnimComplete")}),n&&a.updateCurrItem(!0),n},Vt=function(e){return 1/ne*e*g},Kt=function(){var e=x,t=Ge(),n=Xe();x<t?e=t:x>n&&(e=n);var i,r=1,l=ue;return se&&!B&&!ce&&x<t?(a.close(),!0):(se&&(i=function(e){ke((r-l)*e+l)}),a.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};Te("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){M=e+t,S=e+n,A=e+i,E=o?e+o:""};k=N.pointerEvent,k&&N.touch&&(N.touch=!1),k?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):N.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),h=S+" "+A+" "+E,y=M,k&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),a.likelyTouchDevice=R,v[M]=Ut,v[S]=Ht,v[A]=Wt,E&&(v[E]=v[A]),N.touch&&(y+=" mousedown",h+=" mousemove mouseup",v.mousedown=v[M],v.mousemove=v[S],v.mouseup=v[A]),R||(s.allowPanToNext=!1)}}});var qt,$t,jt,Jt,Qt,en,tn,nn=function(t,n,i,r){qt&&clearTimeout(qt),Jt=!0,jt=!0;var l;t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=s.getThumbBoundsFn&&s.getThumbBoundsFn(p);var u=i?s.hideAnimationDuration:s.showAnimationDuration,c=function(){et("initialZoom"),i?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(ke(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Ee("initialZoom"+(i?"OutEnd":"InEnd"))),r&&r(),Jt=!1};if(!u||!l||void 0===l.x)return Ee("initialZoom"+(i?"Out":"In")),x=t.initialZoomLevel,_e(he,t.initialPosition),Ze(),e.style.opacity=i?0:1,ke(1),void(u?setTimeout(function(){c()},u):c());var m=function(){var n=d,r=!a.currItem.src||a.currItem.loadError||s.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(x=l.w/t.w,he.x=l.x,he.y=l.y-L,a[r?"template":"bg"].style.opacity=.001,Ze()),tt("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),r&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),qt=setTimeout(function(){if(Ee("initialZoom"+(i?"Out":"In")),i){var a=l.w/t.w,s={x:he.x,y:he.y},d=x,p=ue,m=function(t){1===t?(x=a,he.x=l.x,he.y=l.y-_):(x=(a-d)*t+d,he.x=(l.x-s.x)*t+s.x,he.y=(l.y-_-s.y)*t+s.y),Ze(),r?e.style.opacity=1-t:ke(p-t*p)};n?it("initialZoom",0,1,u,o.easing.cubic.out,m,c):(m(1),qt=setTimeout(c,u+20))}else x=t.initialZoomLevel,_e(he,t.initialPosition),Ze(),ke(1),r?e.style.opacity=1:ke(1),qt=setTimeout(c,u+20)},i?25:90)};m()},on={},an=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return $t.length}},ln=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((on.x-t)/2),i.center.y=Math.round((on.y-n)/2)+e.vGap.top,i.max.x=t>on.x?Math.round(on.x-t):i.center.x,i.max.y=n>on.y?Math.round(on.y-n)+e.vGap.top:i.center.y,i.min.x=t>on.x?0:i.center.x,i.min.y=n>on.y?e.vGap.top:i.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ee("parseVerticalMargin",e)),on.x=t.x,on.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=on.x/e.w,a=on.y/e.h;e.fitRatio=o<a?o:a;var r=s.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=ln())}if(!n)return;return sn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=ln(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,mn(t,i,t===a.currItem&&De),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},dn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},pn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=s.errorMsg.replace("%url%",e.src),!0},mn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},fn=function(){if(an.length){for(var e,t=0;t<an.length;t++)e=an[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);an=[]}};Te("Controller",{publicMethods:{lazyLoadItem:function(e){e=Me(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||C)&&(Ee("gettingData",e,t),t.src&&dn(t))},initController:function(){o.extend(s,rn,!0),a.items=$t=n,Qt=a.getItemAt,en=s.getNumItemsFn,tn=s.loop,en()<3&&(s.loop=!1),Ae("beforeChange",function(e){var t,n=s.preload,i=null===e||e>=0,o=Math.min(n[0],en()),r=Math.min(n[1],en());for(t=1;t<=(i?r:o);t++)a.lazyLoadItem(p+t);for(t=1;t<=(i?o:r);t++)a.lazyLoadItem(p-t)}),Ae("initialLayout",function(){a.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)}),Ae("mainScrollAnimComplete",fn),Ae("initialZoomInEnd",fn),Ae("destroy",function(){for(var e,t=0;t<$t.length;t++)e=$t[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);an=null})},getItemAt:function(e){return e>=0&&void 0!==$t[e]&&$t[e]},allowProgressiveImg:function(){return s.forceProgressiveLoading||!R||s.mouseUsed||screen.width>1200},setContent:function(e,t){s.loop&&(t=Me(t));var n=a.getItemAt(e.index);n&&(n.container=null);var i,r=a.getItemAt(t);if(!r)return void(e.el.innerHTML="");Ee("gettingData",t,r),e.index=t,e.item=r;var l=r.container=o.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?l.appendChild(r.html):l.innerHTML=r.html),pn(r),un(r,ye),!r.src||r.loadError||r.loaded)r.src&&!r.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=r.src,mn(r,i),cn(t,r,l,i,!0));else{if(r.loadComplete=function(n){if(u){if(e&&e.index===t){if(pn(n,!0))return n.loadComplete=n.img=null,un(n,ye),Pe(n),void(e.index===p&&a.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):N.transform&&(ae||Jt)?an.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,l,n.img,ae||Jt,!0)}n.loadComplete=null,n.img=null,Ee("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=r.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,r.msrc?"img":"");r.msrc&&(d.src=r.msrc),mn(r,d),l.appendChild(d),r.placeholder=d}r.loading||dn(r),a.allowProgressiveImg()&&(!jt&&N.transform?an.push({item:r,baseDiv:l,img:r.img,index:t,holder:e}):cn(t,r,l,r.img,!0,!0))}jt||t!==p?Pe(r):(oe=l.style,nn(r,i||r.img)),e.el.innerHTML="",e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,yn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Te("Tap",{publicMethods:{initTap:function(){Ae("firstTouchStart",a.onTapStart),Ae("touchRelease",a.onTapRelease),Ae("destroy",function(){yn={},hn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!$&&!K&&!Qe){var n=t;if(hn&&(clearTimeout(hn),hn=null,Ct(n,yn)))return void Ee("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);_e(yn,n),hn=setTimeout(function(){vn(e,t),hn=null},300)}}}});var xn;Te("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(R?Ae("mouseUsed",function(){a.setupDesktopZoom()}):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){xn={};var n="wheel mousewheel DOMMouseScroll";Ae("bindEvents",function(){o.bind(e,n,a.handleMouseWheel)}),Ae("unbindEvents",function(){xn&&o.unbind(e,n,a.handleMouseWheel)}),a.mouseZoomedIn=!1;var i,r=function(){a.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),x<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),l()},l=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Ae("resize",r),Ae("afterChange",r),Ae("pointerDown",function(){a.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Ae("pointerUp",l),t||r()},handleMouseWheel:function(e){if(x<=a.currItem.fitRatio)return s.modal&&(!s.closeOnScroll||Qe||V?e.preventDefault():O&&Math.abs(e.deltaY)>2&&(d=!0,a.close())),!0;if(e.stopPropagation(),xn.x=0,"deltaX"in e)1===e.deltaMode?(xn.x=18*e.deltaX,xn.y=18*e.deltaY):(xn.x=e.deltaX,xn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(xn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?xn.y=-.16*e.wheelDeltaY:xn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;xn.y=e.detail}Be(x,!0);var t=he.x-xn.x,n=he.y-xn.y;(s.modal||t<=ie.min.x&&t>=ie.max.x&&n<=ie.min.y&&n>=ie.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ye.x/2+xe.x,y:ye.y/2+xe.y};var n=s.getDoubleTapZoom(!0,a.currItem),i=x===n;a.mouseZoomedIn=!i,a.zoomTo(i?a.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var gn,wn,bn,In,Cn,Dn,Tn,Mn,Sn,An,En,On,kn={history:!0,galleryUID:1},Rn=function(){return En.hash.substring(1)},Zn=function(){gn&&clearTimeout(gn),bn&&clearTimeout(bn)},Pn=function(){var e=Rn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(s.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<$t.length;n++)if($t[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Fn=function(){if(bn&&clearTimeout(bn),Qe||V)return void(bn=setTimeout(Fn,500));In?clearTimeout(wn):In=!0;var e=p+1,t=Qt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=Tn+"&gid="+s.galleryUID+"&pid="+e;Mn||En.hash.indexOf(n)===-1&&(An=!0);var i=En.href.split("#")[0]+"#"+n;On?"#"+n!==window.location.hash&&history[Mn?"replaceState":"pushState"]("",document.title,i):Mn?En.replace(i):En.hash=n,Mn=!0,wn=setTimeout(function(){In=!1},60)};Te("History",{publicMethods:{initHistory:function(){if(o.extend(s,kn,!0),s.history){En=window.location,An=!1,Sn=!1,Mn=!1,Tn=Rn(),On="pushState"in history,Tn.indexOf("gid=")>-1&&(Tn=Tn.split("&gid=")[0],Tn=Tn.split("?gid=")[0]),Ae("afterChange",a.updateURL),Ae("unbindEvents",function(){o.unbind(window,"hashchange",a.onHashChange)});var e=function(){Dn=!0,Sn||(An?history.back():Tn?En.hash=Tn:On?history.pushState("",document.title,En.pathname+En.search):En.hash=""),Zn()};Ae("unbindEvents",function(){d&&e()}),Ae("destroy",function(){Dn||e()}),Ae("firstUpdate",function(){p=Pn().pid});var t=Tn.indexOf("pid=");t>-1&&(Tn=Tn.substring(0,t),"&"===Tn.slice(-1)&&(Tn=Tn.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",a.onHashChange)},40)}},onHashChange:function(){return Rn()===Tn?(Sn=!0,void a.close()):void(In||(Cn=!0,a.goTo(Pn().pid),Cn=!1))},updateURL:function(){Zn(),Cn||(Mn?gn=setTimeout(Fn,800):Fn())}}}),o.extend(a,ot)};return e});
/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,o,l,r,i,s,a,u,c,p,d,m,f,h,w,v,g,b,_,C=this,T=!1,I=!0,E=!0,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},x=function(e){if(v)return!0;e=e||window.event,w.timeToIdle&&w.mouseUsed&&!c&&D();for(var n,o,l=e.target||e.srcElement,r=l.getAttribute("class")||"",i=0;i<N.length;i++)n=N[i],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),o=!0);if(o){e.stopPropagation&&e.stopPropagation(),v=!0;var s=t.features.isOldAndroid?600:30;g=setTimeout(function(){v=!1},s)}},S=function(){return!e.likelyTouchDevice||w.mouseUsed||screen.width>w.fitControlsWidth},k=function(e,n,o){t[(o?"add":"remove")+"Class"](e,"pswp__"+n)},K=function(){var e=1===w.getNumItemsFn();e!==h&&(k(o,"ui--one-slide",e),h=e)},L=function(){k(a,"share-modal--hidden",E)},O=function(){return E=!E,E?(t.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){E&&L()},300)):(L(),setTimeout(function(){E||t.addClass(a,"pswp__share-modal--fade-in")},30)),E||y(),!1},R=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),E||O(),1))},y=function(){for(var e,t,n,o,l,r="",i=0;i<w.shareButtons.length;i++)e=w.shareButtons[i],n=w.getImageURLForShare(e),o=w.getPageURLForShare(e),l=w.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(l)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",w.parseShareButtonOut&&(r=w.parseShareButtonOut(e,r));a.children[0].innerHTML=r,a.children[0].onclick=R},z=function(e){for(var n=0;n<w.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+w.closeElClasses[n]))return!0},M=0,D=function(){clearTimeout(_),M=0,c&&C.setIdle(!1)},A=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(_),_=setTimeout(function(){C.setIdle(!0)},w.timeToIdleOutside))},P=function(){w.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=C.getFullscreenAPI()),n?(t.bind(document,n.eventK,C.updateFullscreen),C.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},U=function(){w.preloaderEl&&(Z(!0),p("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&Z(!1):Z(!0)},w.loadingIndicatorDelay)}),p("imageLoadComplete",function(t,n){e.currItem===n&&Z(!0)}))},Z=function(e){m!==e&&(k(d,"preloader--active",!e),m=e)},q=function(e){var n=e.vGap;if(S()){var i=w.barsSize;if(w.captionEl&&"auto"===i.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),o.insertBefore(r,l),t.addClass(o,"pswp__ui--fit")),w.addCaptionHTMLFn(e,r,!0)){var s=r.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=i.top;else n.bottom="auto"===i.bottom?0:i.bottom;n.top=i.top}else n.top=n.bottom=0},B=function(){w.timeToIdle&&p("mouseUsed",function(){t.bind(document,"mousemove",D),t.bind(document,"mouseout",A),b=setInterval(function(){M++,2===M&&C.setIdle(!0)},w.timeToIdle/2)})},H=function(){p("onVerticalDrag",function(e){I&&e<.95?C.hideControls():!I&&e>=.95&&C.showControls()});var e;p("onPinchClose",function(t){I&&t<.9?(C.hideControls(),e=!0):e&&!I&&t>.9&&C.showControls()}),p("zoomGestureEnded",function(){e=!1,e&&!I&&C.showControls()})},N=[{name:"caption",option:"captionEl",onInit:function(e){l=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){i=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],W=function(){var e,n,l,r=function(o){if(o)for(var r=o.length,i=0;i<r;i++){e=o[i],n=e.className;for(var s=0;s<N.length;s++)l=N[s],n.indexOf("pswp__"+l.name)>-1&&(w[l.option]?(t.removeClass(e,"pswp__element--disabled"),l.onInit&&l.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(o.children);var i=t.getChildByClass(o,"pswp__top-bar");i&&r(i.children)};C.init=function(){t.extend(e.options,F,!0),w=e.options,o=t.getChildByClass(e.scrollWrap,"pswp__ui"),p=e.listen,H(),p("beforeChange",C.update),p("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(w.getDoubleTapZoom(!1,e.currItem),t,333)}),p("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(o.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),p("bindEvents",function(){t.bind(o,"pswpTap click",x),t.bind(e.scrollWrap,"pswpTap",C.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",C.onMouseOver)}),p("unbindEvents",function(){E||O(),b&&clearInterval(b),t.unbind(document,"mouseout",A),t.unbind(document,"mousemove",D),t.unbind(o,"pswpTap click",x),t.unbind(e.scrollWrap,"pswpTap",C.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",C.onMouseOver),n&&(t.unbind(document,n.eventK,C.updateFullscreen),n.isFullscreen()&&(w.hideAnimationDuration=0,n.exit()),n=null)}),p("destroy",function(){w.captionEl&&(r&&o.removeChild(r),t.removeClass(l,"pswp__caption--empty")),a&&(a.children[0].onclick=null),t.removeClass(o,"pswp__ui--over-close"),t.addClass(o,"pswp__ui--hidden"),C.setIdle(!1)}),w.showAnimationDuration||t.removeClass(o,"pswp__ui--hidden"),p("initialZoomIn",function(){w.showAnimationDuration&&t.removeClass(o,"pswp__ui--hidden")}),p("initialZoomOut",function(){t.addClass(o,"pswp__ui--hidden")}),p("parseVerticalMargin",q),W(),w.shareEl&&s&&a&&(E=!0),K(),B(),P(),U()},C.setIdle=function(e){c=e,k(o,"ui--idle",e)},C.update=function(){I&&e.currItem?(C.updateIndexIndicator(),w.captionEl&&(w.addCaptionHTMLFn(e.currItem,l),k(l,"caption--empty",!e.currItem.title)),T=!0):T=!1,E||O(),K()},C.updateFullscreen=function(o){o&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},C.updateIndexIndicator=function(){w.counterEl&&(i.innerHTML=e.getCurrentIndex()+1+w.indexIndicatorSep+w.getNumItemsFn())},C.onGlobalTap=function(n){n=n||window.event;var o=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(z(o))return void e.close();t.hasClass(o,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?w.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(w.tapToToggleControls&&(I?C.hideControls():C.showControls()),w.tapToClose&&(t.hasClass(o,"pswp__img")||z(o)))return void e.close()},C.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;k(o,"ui--over-close",z(t))},C.hideControls=function(){t.addClass(o,"pswp__ui--hidden"),I=!1},C.showControls=function(){I=!0,T||C.update(),t.removeClass(o,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var t,n=document.documentElement,o="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=w.closeOnScroll,w.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return w.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});
/*jquery.mb.YTPlayer 02-02-2017
 _ jquery.mb.components 
 _ email: matteo@open-lab.com 
 _ Copyright (c) 2001-2017. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */
function onYouTubeIframeAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+r:e}function setFilter(e,r,t){var a=uncamel(r),o=jQuery.browser.mozilla?"":jQuery.CSS.sfx;e[o+"filter"]=e[o+"filter"]||"",t=setUnit(t>jQuery.CSS.filters[r].max?jQuery.CSS.filters[r].max:t,jQuery.CSS.filters[r].unit),e[o+"filter"]+=a+"("+t+") ",delete e[r]}var ytp=ytp||{},getYTPVideoID=function(e){var r,t;return e.indexOf("youtu.be")>0?(r=e.substr(e.lastIndexOf("/")+1,e.length),t=r.indexOf("?list=")>0?r.substr(r.lastIndexOf("="),r.length):null,r=t?r.substr(0,r.lastIndexOf("?")):r):e.indexOf("http")>-1?(r=e.match(/[\\?&]v=([^&#]*)/)[1],t=e.indexOf("list=")>0?e.match(/[\\?&]list=([^&#]*)/)[1]:null):(r=e.length>15?null:e,t=r?null:e),{videoID:r,playlistID:t}};!function(jQuery,ytp){jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"3.0.11",build:"6092",author:"Matteo Bicocchi (pupunzi)",apiKey:"",defaults:{containment:"body",ratio:"auto",videoURL:null,playlistURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:50,addRaster:!1,mask:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnBlur:!0,realfullscreen:!0,mobileFallbackImage:null,gaTrack:!0,optimizeDisplay:!0,anchor:"center,center",onReady:function(e){},onError:function(e,r){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},controlBar:null,loading:null,locationProtocol:"https:",filters:{grayscale:{value:0,unit:"%"},hue_rotate:{value:0,unit:"deg"},invert:{value:0,unit:"%"},opacity:{value:0,unit:"%"},saturate:{value:0,unit:"%"},sepia:{value:0,unit:"%"},brightness:{value:0,unit:"%"},contrast:{value:0,unit:"%"},blur:{value:0,unit:"px"}},buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={},YTPlayer.state={},YTPlayer.filters=jQuery.mbYTPlayer.filters,YTPlayer.filtersEnabled=!0,YTPlayer.id=YTPlayer.id||"YTP_"+(new Date).getTime(),$YTPlayer.addClass("mb_YTPlayer");var property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property");"undefined"!=typeof property&&"undefined"!=typeof property.vol&&(property.vol=0===property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),YTPlayer.hasChanged||(YTPlayer.defaultOpt={},jQuery.extend(YTPlayer.defaultOpt,jQuery.mbYTPlayer.defaults,options)),"true"==YTPlayer.opt.loop&&(YTPlayer.opt.loop=9999),YTPlayer.isRetina=window.retina||window.devicePixelRatio>1;var isIframe=function(){var e=!1;try{self.location.href!=top.location.href&&(e=!0)}catch(r){e=!0}return e};YTPlayer.canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe()),YTPlayer.canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","ytp_"+(new Date).getTime());var playerID="mbYTP_"+YTPlayer.id;YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0,YTPlayer.videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).videoID,YTPlayer.playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={modestbranding:1,autoplay:0,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations};if(document.createElement("video").canPlayType&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1),YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.defaultOpt.containment=YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground=YTPlayer.opt.containment.is("body"),!YTPlayer.isBackground||!ytp.backgroundIsInited){var isPlayer=YTPlayer.opt.containment.is(jQuery(this));YTPlayer.canPlayOnMobile=isPlayer&&0===jQuery(this).children().length,YTPlayer.isPlayer=!1,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide();var overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");YTPlayer.isPlayer&&overlay.on("click",function(){$YTPlayer.YTPTogglePlay()});var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0});var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox");if(playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({position:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.addClass("visible")}).on("mouseleave",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100);else{jQuery("#YTAPI").remove();var tag=jQuery("<script></script>").attr({src:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/iframe_api?v="+jQuery.mbYTPlayer.version,id:"YTAPI"});jQuery("head").prepend(tag)}if(jQuery.browser.mobile&&!YTPlayer.canPlayOnMobile)return YTPlayer.opt.mobileFallbackImage&&wrapper.css({backgroundImage:"url("+YTPlayer.opt.mobileFallbackImage+")",backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",opacity:1}),$YTPlayer.remove(),void jQuery(document).trigger("YTPUnavailable");jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay="undefined"==typeof YTPlayer.opt.autoPlay?!!YTPlayer.isBackground:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromAPI(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){if(!YTPlayer.isInit){if(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile){if(YTPlayer.opt.containment.outerWidth()>jQuery(window).width()){YTPlayer.opt.containment.css({maxWidth:"100%"});var h=.563*YTPlayer.opt.containment.outerWidth();YTPlayer.opt.containment.css({maxHeight:h})}return void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),width:"100%",height:h,playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1})}}})}new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,YTPlayer.isReady||(YTPlayer.isReady=!(YTPlayer.isPlayer&&!YTPlayer.opt.autoPlay),YTPlayer.playerEl=YTPlayer.player.getIframe(),jQuery(YTPlayer.playerEl).unselectable(),$YTPlayer.optimizeDisplay(),jQuery(window).off("resize.YTP_"+YTPlayer.id).on("resize.YTP_"+YTPlayer.id,function(){$YTPlayer.optimizeDisplay()}),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState();if(YTPlayer.preventTrigger)return void(YTPlayer.preventTrigger=!1);YTPlayer.state=state;var eventType;switch(state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPPlay",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 5:eventType="YTPCued"}var YTPEvent=jQuery.Event(eventType);YTPEvent.time=YTPlayer.currentTime,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPEvent)}},onPlaybackQualityChange:function(e){var r=e.target.getPlaybackQuality(),t=jQuery.Event("YTPQualityChange");t.quality=r,jQuery(YTPlayer).trigger(t)},onError:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList&&jQuery(YTPlayer).playNext()),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}})}}))}),$YTPlayer.off("YTPTime.mask"),jQuery.mbYTPlayer.applyMask(YTPlayer)}})},getDataFromAPI:function(e){if(e.videoData=jQuery.mbStorage.get("YTPlayer_data_"+e.videoID),jQuery(e).off("YTPData.YTPlayer").on("YTPData.YTPlayer",function(){if(e.hasData&&e.isPlayer&&!e.opt.autoPlay){var r=e.videoData.thumb_max||e.videoData.thumb_high||e.videoData.thumb_medium;e.opt.containment.css({background:"rgba(0,0,0,0.5) url("+r+") center center",backgroundSize:"cover"}),e.opt.backgroundUrl=r}}),e.videoData)setTimeout(function(){e.opt.ratio="auto"==e.opt.ratio?"16/9":e.opt.ratio,e.dataReceived=!0,jQuery(e).trigger("YTPChanged");var r=jQuery.Event("YTPData");r.prop={};for(var t in e.videoData)r.prop[t]=e.videoData[t];jQuery(e).trigger(r)},500),e.hasData=!0;else if(jQuery.mbYTPlayer.apiKey)jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//www.googleapis.com/youtube/v3/videos?id="+e.videoID+"&key="+jQuery.mbYTPlayer.apiKey+"&part=snippet",function(r){function t(r){e.videoData={},e.videoData.id=e.videoID,e.videoData.channelTitle=r.channelTitle,e.videoData.title=r.title,e.videoData.description=r.description.length<400?r.description:r.description.substring(0,400)+" ...",e.videoData.aspectratio="auto"==e.opt.ratio?"16/9":e.opt.ratio,e.opt.ratio=e.videoData.aspectratio,e.videoData.thumb_max=r.thumbnails.maxres?r.thumbnails.maxres.url:null,e.videoData.thumb_high=r.thumbnails.high?r.thumbnails.high.url:null,e.videoData.thumb_medium=r.thumbnails.medium?r.thumbnails.medium.url:null,jQuery.mbStorage.set("YTPlayer_data_"+e.videoID,e.videoData)}e.dataReceived=!0,jQuery(e).trigger("YTPChanged"),t(r.items[0].snippet),e.hasData=!0;var a=jQuery.Event("YTPData");a.prop={};for(var o in e.videoData)a.prop[o]=e.videoData[o];jQuery(e).trigger(a)});else{if(setTimeout(function(){jQuery(e).trigger("YTPChanged")},50),e.isPlayer&&!e.opt.autoPlay){var r=jQuery.mbYTPlayer.locationProtocol+"//i.ytimg.com/vi/"+e.videoID+"/hqdefault.jpg";e.opt.containment.css({background:"rgba(0,0,0,0.5) url("+r+") center center",backgroundSize:"cover"}),e.opt.backgroundUrl=r}e.videoData=null,e.opt.ratio="auto"==e.opt.ratio?"16/9":e.opt.ratio}!e.isPlayer||e.opt.autoPlay||jQuery.browser.mobile||(e.loading=jQuery("<div/>").addClass("loading").html("Loading").hide(),jQuery(e).append(e.loading),e.loading.fadeIn())},removeStoredData:function(){jQuery.mbStorage.remove()},getVideoData:function(){var e=this.get(0);return e.videoData},getVideoID:function(){var e=this.get(0);return e.videoID||!1},setVideoQuality:function(e){var r=this.get(0);r.player.setPlaybackQuality(e)},playlist:function(e,r,t,a){var o=this,i=o.get(0);return i.isPlayList=!0,r&&(e=jQuery.shuffle(e)),i.videoID||(i.videos=e,i.videoCounter=0,i.videoLength=e.length,jQuery(i).data("property",e[0]),jQuery(i).mb_YTPlayer()),"function"==typeof t&&jQuery(i).one("YTPChanged",function(){t(i)}),jQuery(i).on("YTPEnd",function(){a="undefined"==typeof a||a,jQuery(i).playNext(a)}),this},playNext:function(e){var r=this.get(0);return r.checkForStartAt&&(clearTimeout(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter++,r.videoCounter>=r.videoLength&&e&&(r.videoCounter=0),r.videoCounter<r.videoLength?jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]):r.videoCounter--,this},playPrev:function(){var e=this.get(0);return e.checkForStartAt&&(clearInterval(e.checkForStartAt),clearInterval(e.getState)),e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e).YTPChangeMovie(e.videos[e.videoCounter]),this},playIndex:function(e){var r=this.get(0);return e-=1,r.checkForStartAt&&(clearInterval(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter=e,r.videoCounter>=r.videoLength-1&&(r.videoCounter=r.videoLength-1),jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]),this},changeMovie:function(e){var r=this,t=r.get(0);t.opt.startAt=0,t.opt.stopAt=0,t.opt.mask=!1,t.opt.mute=!0,t.hasData=!1,t.hasChanged=!0,t.player.loopTime=void 0,e&&jQuery.extend(t.opt,e),t.videoID=getYTPVideoID(t.opt.videoURL).videoID,"true"==t.opt.loop&&(t.opt.loop=9999),jQuery(t.playerEl).CSSAnimate({opacity:0},200,function(){var e=jQuery.Event("YTPChangeMovie");e.time=t.currentTime,e.videoId=t.videoID,jQuery(t).trigger(e),jQuery(t).YTPGetPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+t.videoID),1,t.opt.quality),jQuery(t).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(t),jQuery.mbYTPlayer.getDataFromAPI(t)}),jQuery.mbYTPlayer.applyMask(t)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);ytp.YTAPIReady=!0,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null,e.isReady=!1;var r=e.wrapper;return r.remove(),jQuery("#controlBar_"+e.id).remove(),clearInterval(e.checkForStartAt),clearInterval(e.getState),this},fullscreen:function(real){function hideMouse(){YTPlayer.overlay.css({cursor:"none"})}function RunPrefixMethod(e,r){for(var t,a,o=["webkit","moz","ms","o",""],i=0;i<o.length&&!e[t];){if(t=r,""==o[i]&&(t=t.substr(0,1).toLowerCase()+t.substr(1)),t=o[i]+t,a=typeof e[t],"undefined"!=a)return o=[o[i]],"function"==a?e[t]():e[t];i++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0);"undefined"==typeof real&&(real=YTPlayer.opt.realfullscreen),real=eval(real);var controls=jQuery("#controlBar_"+YTPlayer.id),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper;if(real){var fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){var e=RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen");e?(jQuery(YTPlayer).YTPSetVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).YTPSetVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("YTPFullscreen"),videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})}return YTPlayer.isAlone?(jQuery(document).off("mousemove.YTPlayer"),clearTimeout(YTPlayer.hideCursor),YTPlayer.overlay.css({cursor:"auto"}),real?cancelFullscreen():(videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(jQuery(document).on("mousemove.YTPlayer",function(e){YTPlayer.overlay.css({cursor:"auto"}),clearTimeout(YTPlayer.hideCursor),jQuery(e.target).parents().is(".mb_YTPBar")||(YTPlayer.hideCursor=setTimeout(hideMouse,3e3))}),hideMouse(),real?(videoWrapper.css({opacity:0}),videoWrapper.addClass("YTPFullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({opacity:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0),this},toggleLoops:function(){var e=this.get(0),r=e.opt;return 1==r.loop?r.loop=0:(r.startAt?e.player.seekTo(r.startAt):e.player.playVideo(),r.loop=1),this},play:function(){var e=this.get(0);if(!e.isReady)return this;e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},2e3),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPPlaypause");return t.html(jQuery.mbYTPlayer.controls.pause),e.state=1,jQuery(e).css("background-image","none"),this},togglePlay:function(e){var r=this.get(0);return 1==r.state?this.YTPPause():this.YTPPlay(),"function"==typeof e&&e(r.state),this},stop:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPPlaypause");return t.html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo(),this},pause:function(){var e=this.get(0);return e.player.pauseVideo(),e.state=2,this},seekTo:function(e){var r=this.get(0);return r.player.seekTo(e,!0),this},setVolume:function(e){var r=this.get(0);return e||r.opt.vol||0!=r.player.getVolume()?!e&&r.player.getVolume()>0||e&&r.opt.vol==e?r.isMute?jQuery(r).YTPUnmute():jQuery(r).YTPMute():(r.opt.vol=e,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(e)):jQuery(r).YTPUnmute(),this},toggleVolume:function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).YTPUnmute(),!0):(jQuery(e).YTPMute(),!1)},mute:function(){var e=this.get(0);if(!e.isMute){e.player.mute(),e.isMute=!0,e.player.setVolume(0),e.volumeBar&&e.volumeBar.length&&e.volumeBar.width()>10&&e.volumeBar.updateSliderVal(0);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPMuteUnmute");t.html(jQuery.mbYTPlayer.controls.unmute),jQuery(e).addClass("isMuted"),e.volumeBar&&e.volumeBar.length&&e.volumeBar.addClass("muted");var a=jQuery.Event("YTPMuted");return a.time=e.currentTime,e.canTrigger&&jQuery(e).trigger(a),this}},unmute:function(){var e=this.get(0);if(e.isMute){e.player.unMute(),e.isMute=!1,e.player.setVolume(e.opt.vol),e.volumeBar&&e.volumeBar.length&&e.volumeBar.updateSliderVal(e.opt.vol>10?e.opt.vol:10);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPMuteUnmute");t.html(jQuery.mbYTPlayer.controls.mute),jQuery(e).removeClass("isMuted"),e.volumeBar&&e.volumeBar.length&&e.volumeBar.removeClass("muted");var a=jQuery.Event("YTPUnmuted");return a.time=e.currentTime,e.canTrigger&&jQuery(e).trigger(a),this}},applyFilter:function(e,r){return this.each(function(){var t=this;t.filters[e].value=r,t.filtersEnabled&&jQuery(t).YTPEnableFilters()})},applyFilters:function(e){return this.each(function(){var r=this;if(!r.isReady)return void jQuery(r).on("YTPReady",function(){jQuery(r).YTPApplyFilters(e)});for(var t in e)jQuery(r).YTPApplyFilter(t,e[t]);jQuery(r).trigger("YTPFiltersApplied")})},toggleFilter:function(e,r){return this.each(function(){var t=this;t.filters[e].value?t.filters[e].value=0:t.filters[e].value=r,t.filtersEnabled&&jQuery(this).YTPEnableFilters()})},toggleFilters:function(e){return this.each(function(){var r=this;r.filtersEnabled?(jQuery(r).trigger("YTPDisableFilters"),jQuery(r).YTPDisableFilters()):(jQuery(r).YTPEnableFilters(),jQuery(r).trigger("YTPEnableFilters")),"function"==typeof e&&e(r.filtersEnabled)})},disableFilters:function(){return this.each(function(){var e=this,r=jQuery(e.playerEl);r.css("-webkit-filter",""),r.css("filter",""),e.filtersEnabled=!1})},enableFilters:function(){return this.each(function(){var e=this,r=jQuery(e.playerEl),t="";for(var a in e.filters)e.filters[a].value&&(t+=a.replace("_","-")+"("+e.filters[a].value+e.filters[a].unit+") ");r.css("-webkit-filter",t),r.css("filter",t),e.filtersEnabled=!0})},removeFilter:function(e,r){return this.each(function(){var t=this;if("function"==typeof e&&(r=e,e=null),e)jQuery(this).YTPApplyFilter(e,0),"function"==typeof r&&r(e);else for(var a in t.filters)jQuery(this).YTPApplyFilter(a,0),"function"==typeof r&&r(a)})},getFilters:function(){var e=this.get(0);return e.filters},addMask:function(e){var r=this.get(0),t=r.overlay;e||(e=r.actualMask);var a=jQuery("<img/>").attr("src",e).on("load",function(){t.CSSAnimate({opacity:0},500,function(){r.hasMask=!0,a.remove(),t.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"}),t.CSSAnimate({opacity:1},500)})});return this},removeMask:function(){var e=this.get(0),r=e.overlay;return r.CSSAnimate({opacity:0},500,function(){e.hasMask=!1,r.css({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""}),r.CSSAnimate({opacity:1},500)}),this},applyMask:function(e){var r=jQuery(e);if(r.off("YTPTime.mask"),e.opt.mask)if("string"==typeof e.opt.mask)r.YTPAddMask(e.opt.mask),e.actualMask=e.opt.mask;else if("object"==typeof e.opt.mask){for(var t in e.opt.mask)e.opt.mask[t]&&jQuery("<img/>").attr("src",e.opt.mask[t]);e.opt.mask[0]&&r.YTPAddMask(e.opt.mask[0]),r.on("YTPTime.mask",function(t){for(var a in e.opt.mask)t.time==a&&(e.opt.mask[a]?(r.YTPAddMask(e.opt.mask[a]),e.actualMask=e.opt.mask[a]):r.YTPRemoveMask())})}},toggleMask:function(){var e=this.get(0),r=$(e);return e.hasMask?r.YTPRemoveMask():r.YTPAddMask(),this},manageProgress:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPProgress"),a=r.find(".mb_YTPLoaded"),o=r.find(".mb_YTPseekbar"),i=t.outerWidth(),n=Math.floor(e.player.getCurrentTime()),l=Math.floor(e.player.getDuration()),s=n*i/l,u=0,y=100*e.player.getVideoLoadedFraction();return a.css({left:u,width:y+"%"}),o.css({left:0,width:s}),{totalTime:l,currentTime:n}},buildControls:function(YTPlayer){var data=YTPlayer.opt;if(data.showYTLogo=data.showYTLogo||data.printUrl,!jQuery("#controlBar_"+YTPlayer.id).length){YTPlayer.controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({whiteSpace:"noWrap",position:YTPlayer.isBackground?"fixed":"absolute",zIndex:YTPlayer.isBackground?1e4:1e3}).hide();var buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).YTPPause():jQuery(YTPlayer).YTPPlay()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).YTPUnmute():jQuery(YTPlayer).YTPMute()}),volumeBar=jQuery("<div/>").addClass("mb_YTPVolumeBar").css({display:"inline-block"});YTPlayer.volumeBar=volumeBar;var idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL?data.videoURL:"";vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL);var movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).YTPFullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({width:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0});var r=Math.floor(YTPlayer.player.getDuration());YTPlayer["goto"]=timeBar.outerWidth()*r/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer["goto"]),!0),YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute");progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(volumeBar).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),YTPlayer.controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(YTPlayer.controlBar):(YTPlayer.controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(YTPlayer.controlBar)),volumeBar.simpleSlider({initialval:YTPlayer.opt.vol,scale:100,orientation:"h",callback:function(e){0==e.value?jQuery(YTPlayer).YTPMute():jQuery(YTPlayer).YTPUnmute(),YTPlayer.player.setVolume(e.value),YTPlayer.isMute||(YTPlayer.opt.vol=e.value)}})}},checkForState:function(YTPlayer){var interval=YTPlayer.opt.showControls?100:400;return clearInterval(YTPlayer.getState),jQuery.contains(document,YTPlayer)?(jQuery.mbYTPlayer.checkForStart(YTPlayer),void(YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).YTPManageProgress(),$YTPlayer=jQuery(YTPlayer),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0;if(stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPlayer.currentTime!=prog.currentTime){var YTPEvent=jQuery.Event("YTPTime");YTPEvent.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(YTPEvent)}if(YTPlayer.currentTime=prog.currentTime,YTPlayer.totalTime=YTPlayer.player.getDuration(),0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),YTPlayer.opt.showControls&&(prog.totalTime?YTPlayer.controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):YTPlayer.controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.YTPPlay()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.YTPPause())),YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()<=400&&!YTPlayer.isCompact?(YTPlayer.controlBar.addClass("compact"),YTPlayer.isCompact=!0,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)):YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()>400&&YTPlayer.isCompact&&(YTPlayer.controlBar.removeClass("compact"),YTPlayer.isCompact=!1,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-1.5)<YTPlayer.player.getCurrentTime()||stopAt>0&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)){if(YTPlayer.isEnded)return;if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},1e3),YTPlayer.isPlayList){if(!data.loop||data.loop>0&&YTPlayer.player.loopTime===data.loop-1){YTPlayer.player.loopTime=void 0,clearInterval(YTPlayer.getState);var YTPEnd=jQuery.Event("YTPEnd");return YTPEnd.time=YTPlayer.currentTime,void jQuery(YTPlayer).trigger(YTPEnd)}}else if(!data.loop||data.loop>0&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),void YTPlayer.wrapper.CSSAnimate({opacity:0},500,function(){YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);var e=jQuery.Event("YTPEnd");e.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),YTPlayer.isBackground||YTPlayer.opt.containment.css({background:"rgba(0,0,0,0.5) url("+YTPlayer.opt.backgroundUrl+") center center",backgroundSize:"cover"})});YTPlayer.player.loopTime=YTPlayer.player.loopTime?++YTPlayer.player.loopTime:1,startAt=startAt||1,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),YTPlayer.player.seekTo(startAt,!0),$YTPlayer.YTPPlay()}},interval))):(jQuery(YTPlayer).YTPPlayerDestroy(),clearInterval(YTPlayer.getState),void clearInterval(YTPlayer.checkForStartAt))},getTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.currentTime)},getTotalTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.totalTime)},checkForStart:function(e){var r=jQuery(e);if(!jQuery.contains(document,e))return void jQuery(e).YTPPlayerDestroy();if(e.preventTrigger=!0,e.state=2,jQuery(e).YTPPause(),jQuery(e).muteYTPVolume(),jQuery("#controlBar_"+e.id).remove(),e.controlBar=!1,e.opt.showControls&&jQuery.mbYTPlayer.buildControls(e),e.opt.addRaster){var t="dot"==e.opt.addRaster?"raster-dot":"raster";e.overlay.addClass(e.isRetina?t+" retina":t)}else e.overlay.removeClass(function(e,r){var t=r.split(" "),a=[];return jQuery.each(t,function(e,r){/raster.*/.test(r)&&a.push(r)}),a.push("retina"),a.join(" ")});var a=e.opt.startAt?e.opt.startAt:1;e.player.playVideo(),e.player.seekTo(a,!0),e.checkForStartAt=setInterval(function(){jQuery(e).YTPMute();var t=e.player.getVideoLoadedFraction()>=a/e.player.getDuration();if(e.player.getDuration()>0&&e.player.getCurrentTime()>=a&&t){clearInterval(e.checkForStartAt),"function"==typeof e.opt.onReady&&e.opt.onReady(e),e.isReady=!0;var o=jQuery.Event("YTPReady");if(o.time=e.currentTime,jQuery(e).trigger(o),e.preventTrigger=!0,e.state=2,jQuery(e).YTPPause(),e.opt.mute||jQuery(e).YTPUnmute(),e.canTrigger=!0,e.opt.autoPlay){var i=jQuery.Event("YTPStart");i.time=e.currentTime,jQuery(e).trigger(i),r.css("background-image","none"),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3),r.YTPPlay(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},1e3),jQuery.browser.safari&&(e.safariPlay=setInterval(function(){1!=e.state?r.YTPPlay():clearInterval(e.safariPlay)},10)),r.on("YTPReady",function(){r.YTPPlay()})}else e.player.pauseVideo(),e.isPlayer||(jQuery(e.playerEl).CSSAnimate({opacity:1},500),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},500)),e.controlBar.length&&e.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);e.isPlayer&&!e.opt.autoPlay&&e.loading&&e.loading.length&&(e.loading.html("Ready"),setTimeout(function(){e.loading.fadeOut()},100)),e.controlBar&&e.controlBar.length&&e.controlBar.slideDown(1e3)}else jQuery.browser.safari&&(e.player.playVideo(),a>=0&&e.player.seekTo(a,!0))},1)},setAnchor:function(e){var r=this;r.optimizeDisplay(e)},getAnchor:function(){var e=this.get(0);return e.opt.anchor},formatTime:function(e){var r=Math.floor(e/60),t=Math.floor(e-60*r);return(9>=r?"0"+r:r)+" : "+(9>=t?"0"+t:t)}},jQuery.fn.optimizeDisplay=function(e){var r=this.get(0),t=jQuery(r.playerEl),a={};r.opt.anchor=e||r.opt.anchor,r.opt.anchor="undefined "!=typeof r.opt.anchor?r.opt.anchor:"center,center";var o=r.opt.anchor.split(",");if(r.opt.optimizeDisplay){var i=r.isPlayer?0:80,n={},l=r.wrapper;n.width=l.outerWidth(),n.height=l.outerHeight()+i,a.width=n.width,a.height="16/9"==r.opt.ratio?Math.ceil(a.width*(9/16)):Math.ceil(.75*a.width),a.marginTop=-((a.height-n.height)/2),a.marginLeft=0;var s=a.height<n.height;s&&(a.height=n.height,a.width="16/9"==r.opt.ratio?Math.floor(a.height*(16/9)):Math.floor(a.height*(4/3)),a.marginTop=0,a.marginLeft=-((a.width-n.width)/2));for(var u in o)if(o.hasOwnProperty(u)){var y=o[u].replace(/ /g,"");switch(y){case"top":a.marginTop=s?-((a.height-n.height)/2):0;
break;case"bottom":a.marginTop=s?0:-(a.height-n.height);break;case"left":a.marginLeft=0;break;case"right":a.marginLeft=s?-(a.width-n.width):0;break;default:a.width>n.width&&(a.marginLeft=-((a.width-n.width)/2))}}}else a.width="100%",a.height="100%",a.marginTop=0,a.marginLeft=0;t.css({width:a.width,height:a.height,marginTop:a.marginTop,marginLeft:a.marginLeft,maxWidth:"initial"})},jQuery.shuffle=function(e){for(var r=e.slice(),t=r.length,a=t;a--;){var o=parseInt(Math.random()*t),i=r[a];r[a]=r[o],r[o]=i}return r},jQuery.fn.unselectable=function(){return this.each(function(){jQuery(this).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).attr("unselectable","on")})},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPGetPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.YTPGetVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.YTPChangeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.YTPPlayerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.YTPPlay=jQuery.mbYTPlayer.play,jQuery.fn.YTPTogglePlay=jQuery.mbYTPlayer.togglePlay,jQuery.fn.YTPStop=jQuery.mbYTPlayer.stop,jQuery.fn.YTPPause=jQuery.mbYTPlayer.pause,jQuery.fn.YTPSeekTo=jQuery.mbYTPlayer.seekTo,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.playlist,jQuery.fn.YTPPlayNext=jQuery.mbYTPlayer.playNext,jQuery.fn.YTPPlayPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.YTPPlayIndex=jQuery.mbYTPlayer.playIndex,jQuery.fn.YTPMute=jQuery.mbYTPlayer.mute,jQuery.fn.YTPUnmute=jQuery.mbYTPlayer.unmute,jQuery.fn.YTPToggleVolume=jQuery.mbYTPlayer.toggleVolume,jQuery.fn.YTPSetVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.YTPGetVideoData=jQuery.mbYTPlayer.getVideoData,jQuery.fn.YTPFullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.YTPToggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.YTPSetVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.YTPManageProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPApplyFilter=jQuery.mbYTPlayer.applyFilter,jQuery.fn.YTPApplyFilters=jQuery.mbYTPlayer.applyFilters,jQuery.fn.YTPToggleFilter=jQuery.mbYTPlayer.toggleFilter,jQuery.fn.YTPToggleFilters=jQuery.mbYTPlayer.toggleFilters,jQuery.fn.YTPRemoveFilter=jQuery.mbYTPlayer.removeFilter,jQuery.fn.YTPDisableFilters=jQuery.mbYTPlayer.disableFilters,jQuery.fn.YTPEnableFilters=jQuery.mbYTPlayer.enableFilters,jQuery.fn.YTPGetFilters=jQuery.mbYTPlayer.getFilters,jQuery.fn.YTPGetTime=jQuery.mbYTPlayer.getTime,jQuery.fn.YTPGetTotalTime=jQuery.mbYTPlayer.getTotalTime,jQuery.fn.YTPAddMask=jQuery.mbYTPlayer.addMask,jQuery.fn.YTPRemoveMask=jQuery.mbYTPlayer.removeMask,jQuery.fn.YTPToggleMask=jQuery.mbYTPlayer.toggleMask,jQuery.fn.YTPSetAnchor=jQuery.mbYTPlayer.setAnchor,jQuery.fn.YTPGetAnchor=jQuery.mbYTPlayer.getAnchor,jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.play,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stop,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pause,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekTo,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.mute,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmute,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPGetDataFromFeed=jQuery.mbYTPlayer.getVideoData}(jQuery,ytp),jQuery.support.CSStransition=function(){var e=document.body||document.documentElement,r=e.style;return void 0!==r.transition||void 0!==r.WebkitTransition||void 0!==r.MozTransition||void 0!==r.MsTransition||void 0!==r.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var r=jQuery.extend(!0,{},e);jQuery.browser.webkit||jQuery.browser.opera?jQuery.CSS.sfx="-webkit-":jQuery.browser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.browser.msie&&(jQuery.CSS.sfx="-ms-");for(var t in r){"transform"===t&&(r[jQuery.CSS.sfx+"transform"]=r[t],delete r[t]),"transform-origin"===t&&(r[jQuery.CSS.sfx+"transform-origin"]=e[t],delete r[t]),"filter"!==t||jQuery.browser.mozilla||(r[jQuery.CSS.sfx+"filter"]=e[t],delete r[t]),"blur"===t&&setFilter(r,"blur",e[t]),"brightness"===t&&setFilter(r,"brightness",e[t]),"contrast"===t&&setFilter(r,"contrast",e[t]),"grayscale"===t&&setFilter(r,"grayscale",e[t]),"hueRotate"===t&&setFilter(r,"hueRotate",e[t]),"invert"===t&&setFilter(r,"invert",e[t]),"saturate"===t&&setFilter(r,"saturate",e[t]),"sepia"===t&&setFilter(r,"sepia",e[t]);var a="";"x"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateX("+setUnit(e[t],"px")+")",delete r[t]),"y"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateY("+setUnit(e[t],"px")+")",delete r[t]),"z"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateZ("+setUnit(e[t],"px")+")",delete r[t]),"rotate"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotate("+setUnit(e[t],"deg")+")",delete r[t]),"rotateX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateX("+setUnit(e[t],"deg")+")",delete r[t]),"rotateY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateY("+setUnit(e[t],"deg")+")",delete r[t]),"rotateZ"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateZ("+setUnit(e[t],"deg")+")",delete r[t]),"scale"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scale("+setUnit(e[t],"")+")",delete r[t]),"scaleX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleX("+setUnit(e[t],"")+")",delete r[t]),"scaleY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleY("+setUnit(e[t],"")+")",delete r[t]),"scaleZ"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleZ("+setUnit(e[t],"")+")",delete r[t]),"skew"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skew("+setUnit(e[t],"deg")+")",delete r[t]),"skewX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skewX("+setUnit(e[t],"deg")+")",delete r[t]),"skewY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skewY("+setUnit(e[t],"deg")+")",delete r[t]),"perspective"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" perspective("+setUnit(e[t],"px")+")",delete r[t])}return r},getProp:function(e){var r=[];for(var t in e)r.indexOf(t)<0&&r.push(uncamel(t));return r.join(",")},animate:function(e,r,t,a,o){return this.each(function(){function i(){n.called=!0,n.CSSAIsRunning=!1,l.off(jQuery.CSS.transitionEnd+"."+n.id),clearTimeout(n.timeout),l.css(jQuery.CSS.sfx+"transition",""),"function"==typeof o&&o.apply(n),"function"==typeof n.CSSqueue&&(n.CSSqueue(),n.CSSqueue=null)}var n=this,l=jQuery(this);n.id=n.id||"CSSA_"+(new Date).getTime();var s=s||{type:"noEvent"};if(n.CSSAIsRunning&&n.eventType==s.type&&!jQuery.browser.msie&&jQuery.browser.version<=9)return void(n.CSSqueue=function(){l.CSSAnimate(e,r,t,a,o)});if(n.CSSqueue=null,n.eventType=s.type,0!==l.length&&e){if(e=jQuery.normalizeCss(e),n.CSSAIsRunning=!0,"function"==typeof r&&(o=r,r=jQuery.fx.speeds._default),"function"==typeof t&&(a=t,t=0),"string"==typeof t&&(o=t,t=0),"function"==typeof a&&(o=a,a="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof r)for(var u in jQuery.fx.speeds){if(r==u){r=jQuery.fx.speeds[u];break}r=jQuery.fx.speeds._default}if(r||(r=jQuery.fx.speeds._default),"string"==typeof o&&(a=o,o=null),!jQuery.support.CSStransition){for(var y in e){if("transform"===y&&delete e[y],"filter"===y&&delete e[y],"transform-origin"===y&&delete e[y],"auto"===e[y]&&delete e[y],"x"===y){var c=e[y],p="left";e[p]=c,delete e[y]}if("y"===y){var c=e[y],p="top";e[p]=c,delete e[y]}("-ms-transform"===y||"-ms-filter"===y)&&delete e[y]}return void l.delay(t).animate(e,r,o)}var d={"default":"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};d[a]&&(a=d[a]),l.off(jQuery.CSS.transitionEnd+"."+n.id);var f=jQuery.CSS.getProp(e),T={};jQuery.extend(T,e),T[jQuery.CSS.sfx+"transition-property"]=f,T[jQuery.CSS.sfx+"transition-duration"]=r+"ms",T[jQuery.CSS.sfx+"transition-delay"]=t+"ms",T[jQuery.CSS.sfx+"transition-timing-function"]=a,setTimeout(function(){l.one(jQuery.CSS.transitionEnd+"."+n.id,i),l.css(T)},1),n.timeout=setTimeout(function(){return n.called||!o?(n.called=!1,void(n.CSSAIsRunning=!1)):(l.css(jQuery.CSS.sfx+"transition",""),o.apply(n),n.CSSAIsRunning=!1,void("function"==typeof n.CSSqueue&&(n.CSSqueue(),n.CSSqueue=null)))},r+t+10)}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(e){return this.each(function(){var r=jQuery(this),t=jQuery.normalizeCss(e);r.css(t)})};var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt);var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),function(e){e.simpleSlider={defaults:{initialval:0,scale:100,orientation:"h",readonly:!1,callback:!1},events:{start:e.browser.mobile?"touchstart":"mousedown",end:e.browser.mobile?"touchend":"mouseup",move:e.browser.mobile?"touchmove":"mousemove"},init:function(r){return this.each(function(){var t=this,a=e(t);a.addClass("simpleSlider"),t.opt={},e.extend(t.opt,e.simpleSlider.defaults,r),e.extend(t.opt,a.data());var o="h"==t.opt.orientation?"horizontal":"vertical",o=e("<div/>").addClass("level").addClass(o);a.prepend(o),t.level=o,a.css({cursor:"default"}),"auto"==t.opt.scale&&(t.opt.scale=e(t).outerWidth()),a.updateSliderVal(),t.opt.readonly||(a.on(e.simpleSlider.events.start,function(r){e.browser.mobile&&(r=r.changedTouches[0]),t.canSlide=!0,a.updateSliderVal(r),"h"==t.opt.orientation?a.css({cursor:"col-resize"}):a.css({cursor:"row-resize"}),r.preventDefault(),r.stopPropagation()}),e(document).on(e.simpleSlider.events.move,function(r){e.browser.mobile&&(r=r.changedTouches[0]),t.canSlide&&(e(document).css({cursor:"default"}),a.updateSliderVal(r),r.preventDefault(),r.stopPropagation())}).on(e.simpleSlider.events.end,function(){e(document).css({cursor:"auto"}),t.canSlide=!1,a.css({cursor:"auto"})}))})},updateSliderVal:function(r){var t=this.get(0);if(t.opt){t.opt.initialval="number"==typeof t.opt.initialval?t.opt.initialval:t.opt.initialval(t);var a=e(t).outerWidth(),o=e(t).outerHeight();t.x="object"==typeof r?r.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof r?r*a/t.opt.scale:t.opt.initialval*a/t.opt.scale,t.y="object"==typeof r?r.clientY+document.body.scrollTop-this.offset().top:"number"==typeof r?(t.opt.scale-t.opt.initialval-r)*o/t.opt.scale:t.opt.initialval*o/t.opt.scale,t.y=this.outerHeight()-t.y,t.scaleX=t.x*t.opt.scale/a,t.scaleY=t.y*t.opt.scale/o,t.outOfRangeX=t.scaleX>t.opt.scale?t.scaleX-t.opt.scale:0>t.scaleX?t.scaleX:0,t.outOfRangeY=t.scaleY>t.opt.scale?t.scaleY-t.opt.scale:0>t.scaleY?t.scaleY:0,t.outOfRange="h"==t.opt.orientation?t.outOfRangeX:t.outOfRangeY,t.value="undefined"!=typeof r?"h"==t.opt.orientation?t.x>=this.outerWidth()?t.opt.scale:0>=t.x?0:t.scaleX:t.y>=this.outerHeight()?t.opt.scale:0>=t.y?0:t.scaleY:"h"==t.opt.orientation?t.scaleX:t.scaleY,"h"==t.opt.orientation?t.level.width(Math.floor(100*t.x/a)+"%"):t.level.height(Math.floor(100*t.y/o)),"function"==typeof t.opt.callback&&t.opt.callback(t)}}},e.fn.simpleSlider=e.simpleSlider.init,e.fn.updateSliderVal=e.simpleSlider.updateSliderVal}(jQuery),!function(e){e.mbCookie={set:function(e,r,t,a){r=JSON.stringify(r),t||(t=7),a=a?"; domain="+a:"";var o,i=new Date;i.setTime(i.getTime()+864e5*t),o="; expires="+i.toGMTString(),document.cookie=e+"="+r+o+"; path=/"+a},get:function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(r))return JSON.parse(o.substring(r.length,o.length))}return null},remove:function(r){e.mbCookie.set(r,"",-1)}},e.mbStorage={set:function(e,r){r=JSON.stringify(r),localStorage.setItem(e,r)},get:function(e){return localStorage[e]?JSON.parse(localStorage[e]):null},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);
/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.store=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=e("../storages/all"),i=[e("../plugins/json2")];t.exports=r.createStore(o,i)},{"../plugins/json2":2,"../src/store-engine":4,"../storages/all":6}],2:[function(e,t,n){"use strict";function r(){return e("./lib/json2"),{}}t.exports=r},{"./lib/json2":3}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,u,a=gap,c=t[e];switch(c&&"object"===("undefined"==typeof c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),"undefined"==typeof c?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)u[n]=str(n,c)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+a+"]":"["+u.join(",")+"]",gap=a,o}if(rep&&"object"===("undefined"==typeof rep?"undefined":_typeof(rep)))for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,c),o&&u.push(quote(r)+(gap?": ":":")+o));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o&&u.push(quote(r)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+a+"}":"{"+u.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!==("undefined"==typeof t?"undefined":_typeof(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"===("undefined"==typeof o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],4:[function(e,t,n){"use strict";function r(){var e="undefined"==typeof console?null:console;if(e){var t=e.warn?e.warn:e.log;t.apply(e,arguments)}}function o(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var o=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+o):null,v=/^[a-zA-Z0-9_\-]*$/;if(!v.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h={_namespacePrefix:o,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(r){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){function t(){if(n)return c(arguments,function(e,t){r[t]=e}),n.apply(o,r)}var r=u(arguments,0),o=this,i=[t].concat(r);return e.apply(o,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(r){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))return void c(e,function(e){t._addPlugin(e)});var n=a(this.plugins,function(t){return e===t});if(!n){if(this.plugins.push(e),!p(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!d(r))throw new Error("Plugins must return an object of function properties");c(r,function(n,r){if(!p(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)})}},addStorage:function(e){r("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=s(h,g,{plugins:[]});return m.raw={},c(m,function(e,t){p(e)&&(m.raw[t]=f(m,e))}),c(e,function(e){m._addStorage(e)}),c(t,function(e){m._addPlugin(e)}),m}var i=e("./util"),u=i.slice,a=i.pluck,c=i.each,f=i.bind,s=i.create,l=i.isList,p=i.isFunction,d=i.isObject;t.exports={createStore:o};var g={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each(function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return o.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return o(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,t,n){(function(e){"use strict";function n(){return Object.assign?Object.assign:function(e,t,n,r){for(var o=1;o<arguments.length;o++)a(Object(arguments[o]),function(t,n){e[n]=t});return e}}function r(){if(Object.create)return function(e,t,n,r){var o=u(arguments,1);return d.apply(this,[Object.create(e)].concat(o))};var e=function(){};return function(t,n,r,o){var i=u(arguments,1);return e.prototype=t,d.apply(this,[new e].concat(i))}}function o(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function i(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function u(e,t){return Array.prototype.slice.call(e,t||0)}function a(e,t){f(e,function(e,n){return t(e,n),!1})}function c(e,t){var n=s(e)?[]:{};return f(e,function(e,r){return n[r]=t(e,r),!1}),n}function f(e,t){if(s(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function s(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function l(e){return e&&"[object Function]"==={}.toString.call(e)}function p(e){return e&&"[object Object]"==={}.toString.call(e)}var d=n(),g=r(),v=o(),h="undefined"!=typeof window?window:e;t.exports={assign:d,create:g,trim:v,bind:i,slice:u,each:a,map:c,pluck:f,isList:s,isFunction:l,isObject:p,Global:h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]},{"./cookieStorage":7,"./localStorage":8,"./memoryStorage":9,"./oldFF-globalStorage":10,"./oldIE-userDataStorage":11,"./sessionStorage":12}],7:[function(e,t,n){"use strict";function r(e){if(!e||!c(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(p.cookie.replace(new RegExp(t),"$1"))}function o(e){for(var t=p.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(l(t[n])){var r=t[n].split("="),o=unescape(r[0]),i=unescape(r[1]);e(i,o)}}function i(e,t){e&&(p.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function u(e){e&&c(e)&&(p.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function a(){o(function(e,t){u(t)})}function c(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(p.cookie)}var f=e("../src/util"),s=f.Global,l=f.trim;t.exports={name:"cookieStorage",read:r,write:i,each:o,remove:u,clearAll:a};var p=s.document},{"../src/util":5}],8:[function(e,t,n){"use strict";function r(){return s.localStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function u(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function a(e){return r().removeItem(e)}function c(){return r().clear()}var f=e("../src/util"),s=f.Global;t.exports={name:"localStorage",read:o,write:i,each:u,remove:a,clearAll:c}},{"../src/util":5}],9:[function(e,t,n){"use strict";function r(e){return c[e]}function o(e,t){c[e]=t}function i(e){for(var t in c)c.hasOwnProperty(t)&&e(c[t],t)}function u(e){delete c[e]}function a(e){c={}}t.exports={name:"memoryStorage",read:r,write:o,each:i,remove:u,clearAll:a};var c={}},{}],10:[function(e,t,n){"use strict";function r(e){return s[e]}function o(e,t){s[e]=t}function i(e){for(var t=s.length-1;t>=0;t--){var n=s.key(t);e(s[n],n)}}function u(e){return s.removeItem(e)}function a(){i(function(e,t){delete s[e]})}var c=e("../src/util"),f=c.Global;t.exports={name:"oldFF-globalStorage",read:r,write:o,each:i,remove:u,clearAll:a};var s=f.globalStorage},{"../src/util":5}],11:[function(e,t,n){"use strict";function r(e,t){if(!v){var n=c(e);g(function(e){e.setAttribute(n,t),e.save(p)})}}function o(e){if(!v){var t=c(e),n=null;return g(function(e){n=e.getAttribute(t)}),n}}function i(e){g(function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var o=n[r];e(t.getAttribute(o.name),o.name)}})}function u(e){var t=c(e);g(function(e){e.removeAttribute(t),e.save(p)})}function a(){g(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(p);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(p)})}function c(e){return e.replace(/^\d/,"___$&").replace(h,"___")}function f(){if(!d||!d.documentElement||!d.documentElement.addBehavior)return null;var e,t,n,r="script";try{t=new ActiveXObject("htmlfile"),t.open(),t.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(o){n=d.createElement("div"),e=d.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(p),t.apply(this,r),e.removeChild(n)}}var s=e("../src/util"),l=s.Global;t.exports={name:"oldIE-userDataStorage",write:r,read:o,each:i,remove:u,clearAll:a};var p="storejs",d=l.document,g=f(),v=(l.navigator?l.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],12:[function(e,t,n){"use strict";function r(){return s.sessionStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function u(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function a(e){return r().removeItem(e)}function c(){return r().clear()}var f=e("../src/util"),s=f.Global;t.exports={name:"sessionStorage",read:o,write:i,each:u,remove:a,clearAll:c}},{"../src/util":5}]},{},[1])(1)});
var Rexbuilder_Util=function($){"use strict";function rtimeOut(e,t){var i,a=Date.now,o=window.requestAnimationFrame,r=a(),n=function(){a()-r<t?i||o(n):e()};return o(n),{clear:function(){i=1}}}function rInterval(e,t){var i,a=Date.now,o=window.requestAnimationFrame,r=a(),n=function(){a()-r<t||(r+=t,e()),i||o(n)};return o(n),{clear:function(){i=1}}}function handlingRowReadyEnd(e){if(edlTimeouts[e]=null,""===edlTimeouts.join("")){var t=jQuery.Event("rexlive:editDomLayoutEnd");Rexbuilder_Util.$document.trigger(t),edlTimeouts=[]}}function handlingGridstackCommitEnd(e,t,i,a){Rexbuilder_Util.domUpdaiting=!0,e.batchGridstack(),e.properties.gridstackInstance&&e.properties.gridstackInstance.batchUpdate(),e.fixBlockDomOrder(),e.saveStateGrid(),"masonry"!=e.settings.galleryLayout||t?"fixed"==e.settings.galleryLayout&&"true"==e.settings.fullHeight.toString()&&e.updateFullHeight():e.updateBlocksHeight(),i[0].props.collapse_grid&&(e.collapseElements(),e.collapseElementsProperties()),e.properties.gridstackInstance&&e.properties.gridstackInstance.commit();var o=setTimeout(handlingRowReady.bind(null,e,a),200);edlTimeouts.push(o)}function handlingRowReady(e,t){Rexbuilder_Util.domUpdaiting=!1,e.properties.dispositionBeforeCollapsing=e.createActionDataMoveBlocksGrid(),e._createFirstReverseStack(),e._fixImagesDimension(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers(),Rexbuilder_Util.playAllVideos(),handlingRowReadyEnd(t),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e.section),1500)}function changeLayouHandling(e){var t=_edit_dom_layout(e);_updateGridsHeights(),Rexbuilder_Util.changedFrontLayout&&(0==t.collapse_needed?Rexbuilder_Util_Editor.endLoading():Rexbuilder_Util.$document.one("rexlive:collapsingElementsEnded",function(e){Rexbuilder_Util_Editor.endLoading()})),Rexbuilder_Util.changedFrontLayout=!1}function handleYtbVideoMobileClick(ev){ev.preventDefault();var data_yt=eval("("+this.getAttribute("data-property")+")"),url=data_yt.videoURL;window.location.href=url}function _smoothScroll(e){$("body,html").animate({scrollTop:e.offset().top+_plugin_frontend_settings.scroll_animation_offset},600)}var hasClass,addClass,removeClass,toggleClass;"classList"in document.documentElement?(hasClass=function(e,t){return e.classList.contains(t)},addClass=function(e,t){e.classList.add(t)},removeClass=function(e,t){e.classList.remove(t)}):(hasClass=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},removeClass=function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)};var fixSectionWidth=0,editorMode=!1,windowIsResizing=!1,firstResize=!0,responsiveLayouts,defaultLayoutSections,$modelsCustomizationsDataDiv,$pageCustomizationsDataDiv,$liveDataContainer,$layoutsDomOrder,$defaultLayoutState,$usedIDSContainer,sectionIDSused,frontAvailableLayouts,startFrontLayout,changedFrontLayout,loadWidth,$rexbuilderLayoutData,$rexbuilderModelData,$availableLayoutNames,edlTimeouts=[],createRandomID=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},_createRandomNumericID=function(e){for(var t="",i="0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return parseInt(t)},_storeNamesUsed=function(){sectionIDSused=$usedIDSContainer.length>0?JSON.parse($usedIDSContainer.text()):[]},_saveSectionNamesUsed=function(){$usedIDSContainer.text(JSON.stringify(sectionIDSused))},_getSectionNamesUsed=function(){return sectionIDSused},_addSectionID=function(e){var t;for(t=sectionIDSused.length-1;t>=0&&e!=sectionIDSused[t];t--);t==-1&&sectionIDSused.push(e)},_removeSectionID=function(e){var t=0;for(t=sectionIDSused.length-1;t>=0&&e!=sectionIDSused[t];t--);t>-1&&(sectionIDSused.splice(t,1),_saveSectionNamesUsed())},_createSectionID=function(){var e,t,i,a=4;do if(t=!0,e=createRandomID(a),"self"==e)t=!1;else for(i=0;i<sectionIDSused.length;i++)if(e==sectionIDSused[i]){t=!1;break}while(!t);return _addSectionID(e),e},createBlockID=function(){var e,t,i,a=4;do t=!0,e=createRandomID(a),"self"==e?t=!1:Rexbuilder_Util.$rexContainer.find(".grid-stack-item").each(function(){i=$(this),void 0!==i.attr("data-rexbuilder-block-id")&&i.attr("data-rexbuilder-block-id")==e&&(t=!1)});while(!t);return e},_updateSectionsID=function(){if(Rexbuilder_Util.rexContainer){var e,t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++){var o=i[t].getAttribute("data-rexlive-section-id");null!==o&&""!==o||(e=_createSectionID(),i[t].setAttribute("data-rexlive-section-id",e),_fix_tools_ids(i[t],e))}}},_fix_tools_ids=function(e,t){if(e){var i,a,o,r,n,s,d=[].slice.call(e.getElementsByClassName("tool-area--side tool-area--left")),l=d.length;for(i=0;i<l;i++){for(o=[].slice.call(d[i].getElementsByClassName("edit-row-width")),r=o.length,a=0;a<r;a++)o[a].setAttribute("id",o[a].getAttribute("id")+t),o[a].setAttribute("name",o[a].getAttribute("name")+t),o[a].nextElementSibling.setAttribute("for",o[a].nextElementSibling.getAttribute("for")+t);for(n=[].slice.call(d[i].getElementsByClassName("edit-row-layout")),s=n.length,a=0;a<s;a++)n[a].setAttribute("id",n[a].getAttribute("id")+t),n[a].setAttribute("name",n[a].getAttribute("name")+t),n[a].nextElementSibling.setAttribute("for",n[a].nextElementSibling.getAttribute("for")+t)}}},_updateSectionsNumber=function(){var e=-1;if(Rexbuilder_Util.rexContainer){var t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++)i[t].setAttribute("data-rexlive-section-number",t),e=t;Rexbuilder_Util.lastSectionNumber=e}},_findLayoutType=function(e){return"default"==e||"tablet"==e||"mobile"==e?"standard":"custom"},_findFrontLayout=function(){for(var e=_viewport().width,t=frontAvailableLayouts.length-1;t>=0;t--)if(e>=parseInt(frontAvailableLayouts[t].min)&&(""==frontAvailableLayouts[t].max||e<=parseInt(frontAvailableLayouts[t].max)))return frontAvailableLayouts[t].id},_getModelsCustomizations=function(){var e=[];return $modelsCustomizationsDataDiv.children(".model-customizations-container").each(function(t,i){var a=$(i),o=parseInt(a.attr("data-model-id")),r=[];a.children(".model-customization-data").each(function(e,t){var i=$(t),a=i.attr("data-model-layout-name"),o=JSON.parse(i.text()),n={name:a,targets:o};r.push(n)});var n={id:o,customizations:r};e.push(n)}),e},_updateModelsCustomizationsData=function(e){var t,i,a=e.id,o=$modelsCustomizationsDataDiv.children('.model-customizations-container[data-model-id="'+a+'"]');for(0!=o.length?o.children(".model-customization-data").remove():(o=$(document.createElement("div")),o.addClass("model-customizations-container"),o.attr("data-model-id",a),o.appendTo($modelsCustomizationsDataDiv[0])),t=0,i=e.customizations.length;t<i;t++){var r=$(document.createElement("div"));r.addClass("model-customization-data"),r.attr("data-model-layout-name",e.customizations[t].name),r.text(JSON.stringify(e.customizations[t].targets)),r.appendTo(o[0])}$modelsCustomizationsDataDiv.attr("data-empty-models-customizations",!1)},_updateDivModelCustomizationsNames=function(e){var t,i,a=$rexbuilderModelData.find(".available-models-customizations-names"),o=JSON.parse(a.text()),r=[];for(t=0,i=o.length;t<i;t++){var n=o[t];n.id!=e.id&&r.push(n)}r.push(e),a.text(JSON.stringify(r))},_getPageCustomizations=function(){var e=[],t={name:"default",sections:[]},i=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="default"]');return i.children(".section-targets").each(function(e,i){var a=$(i),o=a.attr("data-section-rex-id"),r=isNaN(parseInt(a.attr("data-model-id")))?-1:parseInt(a.attr("data-model-id")),n=isNaN(parseInt(a.attr("data-model-number")))?-1:parseInt(a.attr("data-model-number")),s="undefined"!=typeof a.attr("data-section-hide")&&"1"==a.attr("data-section-hide").toString(),d=""!=a.text()?JSON.parse(a.text()):[];t.sections.push({section_rex_id:o,section_model_id:r!=-1?r:"",section_model_number:n!=-1?n:"",section_is_model:r!=-1,section_hide:s,targets:d})}),e.push(t),$pageCustomizationsDataDiv.children('.customization-wrap:not([data-customization-name="default"])').each(function(t,i){var a=$(i),o=a.attr("data-customization-name"),r={name:o,sections:[]};a.children(".section-targets").each(function(e,t){var i=$(t),a=i.attr("data-section-rex-id"),o=isNaN(parseInt(i.attr("data-model-id")))?-1:parseInt(i.attr("data-model-id")),n=isNaN(parseInt(i.attr("data-model-number")))?-1:parseInt(i.attr("data-model-number")),s="undefined"!=typeof i.attr("data-section-hide")&&"1"==i.attr("data-section-hide").toString(),d=""!=i.text()?JSON.parse(i.text()):[],l="undefined"!=typeof i.attr("data-section-created-live")&&"1"==i.attr("data-section-created-live").toString();r.sections.push({section_rex_id:a,section_model_id:o!=-1?o:"",section_model_number:n!=-1?n:"",section_is_model:o!=-1,section_hide:s,section_created_live:l,targets:d})}),e.push(r)}),e},_createPageCustomizationsDataLive=function(e){$liveDataContainer.children().remove();var t,i;for(t=0,i=e.length;t<i;t++){var a=$(document.createElement("div"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($liveDataContainer[0])}},_updatePageCustomizationsData=function(e){var t,i,a=e.name,o=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="'+a+'"]');for(0!=o.length?o.children(".section-targets").remove():(o=$(document.createElement("div")),o.addClass("customization-wrap"),o.attr("data-customization-name",a),o.appendTo($pageCustomizationsDataDiv[0])),t=0,i=e.sections.length;t<i;t++){var r=$(document.createElement("div"));r.addClass("section-targets"),r.attr("data-section-rex-id",e.sections[t].section_rex_id),r.attr("data-model-id",e.sections[t].section_model_id),r.attr("data-model-number",e.sections[t].section_model_number),r.attr("data-section-hide",e.sections[t].section_hide),r.attr("data-section-created-live","true"==e.sections[t].section_created_live.toString()&&"1"),""==e.sections[t].section_model_id&&r.text(JSON.stringify(e.sections[t].targets)),r.appendTo(o[0])}$pageCustomizationsDataDiv.removeAttr("data-empty-customizations")},_updatePageAvaiableLayoutsNames=function(e){$availableLayoutNames.text(JSON.stringify(e))},_getSectionCustomLayouts=function(e){var t,i,a,o,r=[],n=Rexbuilder_Util.getPageCustomizations();for(t=0,a=n.length;t<a;t++){var s=n[t].name;if(null!=n[t].sections)for(i=0,o=n[t].sections.length;i<o;i++)if(n[t].sections[i].section_rex_id==e){var d=jQuery.extend(!0,[],n[t].sections[i].targets),l={name:s,targets:d};r.push(l)}}return r},chooseLayout=function(){var e=$rexbuilderLayoutData,t=$rexbuilderModelData;if(Rexbuilder_Util.chosenLayoutData={min:0,max:"",id:"default",label:"My Desktop",type:"standard"},"true"==e.children(".layouts-data").attr("data-empty-customizations")||Rexbuilder_Util.editorMode&&Rexbuilder_Util.firstStart)return"default";var i,a,o,r,n,s,d,l,u,c,m=_viewport().width,g=$("#layout-avaiable-dimensions"),p=g.length>0?JSON.parse(g.text()):[],f=t.children(".available-models-customizations-names"),h=f.length>0?JSON.parse(f.text()):[],y=e.children(".available-layouts-names"),v=y.length>0?JSON.parse(y.text()):[],b=[];for(i=0,r=p.length;i<r;i++){for(c=!1,a=0,n=h.length;a<n;a++)for(o=0,s=h[a].names.length;o<s;o++)if(p[i].id==h[a].names[o]){var x=p[i];x.model=!0,c=!0,b.push(x)}if(!c)for(o=0,d=v.length;o<d;o++)if(p[i].id==v[o]){var x=p[i];x.model=!1,c=!0,b.push(x)}}for(i=0,l=b.length;i<l;i++)""==b[i].min&&(b[i].min=0);var D="",S=_.sortBy(b,[function(e){return parseInt(e.min)}]);for(i=0,u=S.length;i<u;i++)m>=S[i].min&&(""!=S[i].max?m<=S[i].max&&(D=S[i].id,Rexbuilder_Util.chosenLayoutData=S[i]):(D=S[i].id,Rexbuilder_Util.chosenLayoutData=S[i]));return""===D&&(D="default"),D},predictLayout=function(){var e=_viewport().width;return e<=767?"mobile":e<=1024?"tablet":"default"},_createEmptyTargets=function(e){var t,i,a=[];for(t=0,i=e.length;t<i;t++){var o={name:e[t].name,props:{}};"self"==e[t].name&&_viewport().width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(o.props.collapse_grid=!0),a.push(o)}return a},_getDefaultPageLayout=function(e,t){var i,a,o,r,n,s,d,l,u,c=[];for(i=0,n=e.length;i<n;i++)if("default"==e[i].name){for(a=0,s=e[i].sections.length;a<s;a++)c.push(jQuery.extend(!0,{},e[i].sections[a]));break}for(i=0,d=c.length;i<d;i++)if("true"==c[i].section_is_model.toString())for(o=0,l=t.length;o<l;o++)if(t[o].id==c[i].section_model_id){for(r=0,u=t[o].customizations.length;r<u;r++)if("default"==t[o].customizations[r].name){c[i].targets=jQuery.extend(!0,[],t[o].customizations[r].targets);break}break}return c},_getDefaultModelsLayout=function(e){var t,i,a,o,r=[];for(t=0,a=e.length;t<a;t++)for(i=0,o=e[t].customizations.length;i<o;i++)if("default"==e[t].customizations[i].name){r.push({id:e[t].id,targets:e[t].customizations[i].targets});break}return r},_getCustomLayoutSections=function(e,t,i,a){if("default"==a)return i;var o,r,n,s,d,l,u,c,_,m,g,p,f=[],h=!1,y=_getDefaultModelsLayout(t);for(o=0,d=e.length;o<d;o++)if(e[o].name==a){for(h=!0,r=0,l=e[o].sections.length;r<l;r++)f.push(jQuery.extend(!0,{},e[o].sections[r]));break}if(!h)for(o=0,u=i.length;o<u;o++){var v=jQuery.extend(!0,{},i[o]);v.targets=_createEmptyTargets(i[o].targets),v.sectionCleared=!0,f.push(v)}for(o=0,c=f.length;o<c;o++)if("true"==f[o].section_is_model.toString()){for(n=0,_=t.length;n<_;n++)if(t[n].id==f[o].section_model_id){for(p=!1,s=0,m=t[n].customizations.length;s<m;s++)if(t[n].customizations[s].name==a){p=!0,f[o].targets=jQuery.extend(!0,[],t[n].customizations[s].targets),f[o].defaultSection=!1,f[o].sectionCleared=!1;break}if(!p)for(s=0,g=y.length;s<g;s++)if(f[o].section_model_id==y[s].id){f[o].targets=_createEmptyTargets(y[s].targets),f[o].sectionCleared=!0;break}break}}else if(0==f[o].targets.length)for(r=0,u=i.length;r<u;r++)if(f[o].section_rex_id==i[r].section_rex_id){f[o].targets=_createEmptyTargets(i[r].targets),f[o].sectionCleared=!0;break}return f},_mergeSections=function(e,t){var i,a,o,r,n,s,d,l,u;if("default"!=Rexbuilder_Util.activeLayout){for(i=0,n=e.length;i<n;i++)for(e[i].sectionFounded=!1,e[i].defaultSection=!1,a=0,s=t.length;a<s;a++)if(e[i].section_rex_id==t[a].section_rex_id){e[i].sectionFounded=!0;var c=e[i],m=t[a];for(("undefined"==typeof c.targets[0]||jQuery.isEmptyObject(c.targets[0].props)||"undefined"!=typeof c.sectionCleared&&c.sectionCleared)&&(c.defaultSection=!0,c.targets=jQuery.extend(!0,[],m.targets)),o=0,d=c.targets.length;o<d;o++){for(u=!1,r=0,l=m.targets.length;r<l;r++)if(c.targets[o].name==m.targets[r].name){if(c.targets[o].notDisplay=!1,u=!0,m.targets[r].oldElement=!0,o>=1&&jQuery.isEmptyObject(c.targets[o].props)&&"default"!=Rexbuilder_Util.activeLayout&&m.targets[0].props.layout!=c.targets[0].props.layout){var g=parseFloat(m.targets[0].props.grid_cell_width),p=5;"masonry"==m.targets[0].props.layout?(c.targets[o].props.gs_y=Math.round(m.targets[r].props.gs_y*p/g),c.targets[o].props.gs_height=Math.round(m.targets[r].props.gs_height*p/g),c.targets[o].props.gs_start_h=Math.round(m.targets[r].props.gs_start_h*p/g)):(c.targets[o].props.gs_y=Math.round(m.targets[r].props.gs_y*g/p),c.targets[o].props.gs_height=Math.round(m.targets[r].props.gs_height*g/p),c.targets[o].props.gs_start_h=Math.round(m.targets[r].props.gs_start_h*g/p))}c.targets[o].props=_.merge({},m.targets[r].props,c.targets[o].props);break}u||(c.targets[o].notDisplay=!0)}for(r=0,l=m.targets.length;r<l;r++)if("undefined"==typeof m.targets[r].oldElement){var f=jQuery.extend(!0,{},m.targets[r]);if("default"!=Rexbuilder_Util.activeLayout&&m.targets[0].props.layout!=c.targets[0].props.layout){var g=parseFloat(m.targets[0].props.grid_cell_width),p=5;"masonry"==m.targets[0].props.layout?(f.props.gs_y=Math.round(f.props.gs_y*p/g),f.props.gs_height=Math.round(f.props.gs_height*p/g),f.props.gs_start_h=Math.round(f.props.gs_start_h*p/g)):(f.props.gs_y=Math.round(f.props.gs_y*g/p),f.props.gs_height=Math.round(f.props.gs_height*g/p),f.props.gs_start_h=Math.round(f.props.gs_start_h*g/p))}c.targets.splice(1,0,f)}break}if(0==e.length)for(e=t,i=0,n=e.length;i<n;i++)e[i].defaultSection=!0}for(_createPageCustomizationsDataLive(e),i=0,n=e.length;i<n;i++)(e[i].sectionFounded||"default"==Rexbuilder_Util.activeLayout)&&("default"!=Rexbuilder_Util.activeLayout&&e[i].defaultSection||"default"==Rexbuilder_Util.activeLayout)&&_viewport().width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(e[i].targets[0].props.collapse_grid=!0,e[i].targets[0].props.layout="masonry");return jQuery.extend(!0,{},e)},_isMobile=function(){return _viewport().width<_plugin_frontend_settings.defaultSettings.collapseWidth},_cssPropertyValueSupported=function(e,t){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t},launchEditDomLayout=function(){var e=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.edit_dom_layout(e)},_edit_dom_layout=function(e){var t={collapse_needed:!1};if(e==Rexbuilder_Util.activeLayout&&"default"==e)return _viewport().width>=_plugin_frontend_settings.defaultSettings.collapseWidth?Rexbuilder_Util.removeCollapsedGrids():Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0),t;if(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,"true"==$rexbuilderLayoutData.children(".layouts-customizations").attr("data-empty-customizations")&&"true"==$rexbuilderModelData.children(".models-customizations").attr("data-empty-models-customizations"))return _viewport().width>=_plugin_frontend_settings.defaultSettings.collapseWidth?Rexbuilder_Util.removeCollapsedGrids():Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0),t;var i,a,o=[],r=[],n=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),s=n.length;for(i=0;i<s;i++)Rexbuilder_Util.hasClass(n[i],"rex-model-section")&&o.push(parseInt(n[i].getAttribute("data-rexlive-model-id"))),a={rexID:n[i].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(n[i].getAttribute("data-rexlive-model-id")))?"":parseInt(n[i].getAttribute("data-rexlive-model-id"))},r.push(a);var d,l,u=_getPageCustomizations();"default"==Rexbuilder_Util.activeLayout&&_saveCustomizationDomOrder(jQuery.extend(!0,[],u));var c,_=_getModelsCustomizations();"true"==$defaultLayoutState.attr("data-empty-default-customization")?(c=_getDefaultPageLayout(u,_),_createDefaultLayoutState(c)):(_updateDefaultLayoutState({modelsData:_}),c=_getDefaultLayoutState());var m,g=_getCustomLayoutSections(u,_,c,e),p=[];for(d=0;d<g;d++)if("true"==g[d].section_is_model.toString()){for(m=!1,l=0;l<p.length;l++)if(p[l].id==g[d].section_model_id){p[l].number=p[l].number+1,g[d].section_model_number=p[l].number,m=!0;break}m||(g[d].section_model_number=1,p.push({id:g[d].section_model_id,number:1}))}Rexbuilder_Util_Editor.clearSectionsEdited();var f=_mergeSections(g,c);Rexbuilder_Util.removeCollapsedGrids(),Rexbuilder_Util.domUpdaiting=!0;var h,y,v,b=!1,x=[];for(h in f)if(!f[h].notInSection||"default"==e){var D={rexID:f[h].section_rex_id,modelID:-1,modelNumber:-1};"true"==f[h].section_is_model.toString()?(D.modelID=f[h].section_model_id,D.modelNumber=f[h].section_model_number,y=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+f[h].section_rex_id+'"][data-rexlive-model-number="'+D.modelNumber+'"]')):y=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+f[h].section_rex_id+'"]'),y&&!Rexbuilder_Util.hasClass(y,"removing_section")&&("undefined"!=typeof f[h].section_hide&&"true"==f[h].section_hide.toString()?Rexbuilder_Util.addClass(y,"rex-hide-section"):(Rexbuilder_Util.removeClass(y,"rex-hide-section"),v=$(y),t.collapse_needed+=_updateDOMelements(v,f[h].targets,b,h)),x.push(D))}return Rexbuilder_Dom_Util.fixSectionDomOrder(x,!0),Rexbuilder_Util.domUpdaiting=!1,Rexbuilder_Util.editorMode||Rexbuilder_Photoswipe.init(".photoswipe-gallery"),t},_updateDOMelements=function(e,t,i,a){var o=e.find(".grid-stack-row"),r=o.data();if(t[0].props.gridEdited&&o.attr("data-rexlive-layout-changed",!0),void 0!==r){var n=r.plugin_perfectGridGalleryEditor;if(void 0!==n){for(var s=1,d=t.length;s<d;s++){var l=o.children('div[data-rexbuilder-block-id="'+t[s].name+'"]'),u="undefined"!=typeof t[s].props.hide&&"true"==t[s].props.hide.toString();u?l.hasClass("rex-hide-element")||(l.addClass("rex-hide-element"),n.removeBlock(l)):l.hasClass("rex-hide-element")&&(l.removeClass("rex-hide-element"),n.reAddBlock(l))}var c=n.properties.gridstackInstance;n.batchGridstack()}}var s,_,m,l,g,p,f,h,y,v=t.length;for(s=1;s<v;s++)if((!t[s].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(_=t[s].name,m=t[s].props,l=o.children('div[data-rexbuilder-block-id="'+_+'"]'),f=l[0],g=l.children(".rexbuilder-block-data"),p=l.find(".grid-item-content"),l.length>0)){if(h=[].slice.call(f.getElementsByTagName("img")),y=h.length,!Rexbuilder_Util.editorMode&&0!==y){var b;for(b=0;b<y;b++)"true"===h[b].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(h[b]))}_updateDOMSingleElement(l,m,g,p,c,{positionAndSize:!0})}updateSection(e,o,t[0].props,i),Rexbuilder_Util.editorMode&&updateSectionTools(e,o,t[0].props,i);var x="undefined"!=typeof t[0].props.collapse_grid&&("true"==t[0].props.collapse_grid.toString()||i);if(void 0!==r){var n=o.data().plugin_perfectGridGalleryEditor;if(void 0!==n){Rexbuilder_Util.domUpdaiting=!0,n.properties.gridstackInstance.commit();setTimeout(handlingGridstackCommitEnd.bind(null,n,x,t,a),300)}}return x},_updateDOMSingleElement=function(e,t,i,a,o,r){if(r.positionAndSize){var n={x:e.attr("data-gs-x"),y:e.attr("data-gs-y"),w:e.attr("data-gs-width"),h:e.attr("data-gs-height"),startH:i.attr("data-gs_start_h"),realFluid:i.attr("data-element_real_fluid")},s={x:"undefined"==typeof t.gs_x?n.x:t.gs_x,y:"undefined"==typeof t.gs_y?n.y:t.gs_y,w:"undefined"==typeof t.gs_width?n.w:t.gs_width,h:"undefined"==typeof t.gs_height?n.h:t.gs_height,startH:"undefined"==typeof t.gs_start_h?n.startH:t.gs_start_h,realFluid:"undefined"==typeof t.element_real_fluid?n.realFluid:t.element_real_fluid,gridstackInstance:o};_updateElementDimensions(e[0],i[0],s)}var d=isNaN(parseInt(t.video_bg_id))?"":parseInt(t.video_bg_id),l="undefined"==typeof t.video_bg_url_youtube?"":t.video_bg_url_youtube,u="undefined"==typeof t.video_bg_url_vimeo?"":t.video_bg_url_vimeo,c="";""!=d?c="mp4":""!=u?c="vimeo":""!=l&&(c="youtube");var _={mp4Data:{idMp4:d,linkMp4:"undefined"==typeof t.video_mp4_url?"":t.video_mp4_url,width:isNaN(parseInt(t.video_bg_width))?parseInt(t.video_bg_width):"",height:isNaN(parseInt(t.video_bg_height))?parseInt(t.video_bg_height):""},vimeoUrl:u,youtubeUrl:l,audio:"undefined"==typeof t.video_has_audio?"":"1"==t.video_has_audio||"true"==t.video_has_audio.toString(),typeVideo:c};Rexbuilder_Dom_Util.updateVideos(a,_);var m="undefined"==typeof t.image_bg_elem_active||"true"==t.image_bg_elem_active.toString(),g={active:m,idImage:m?isNaN(parseInt(t.id_image_bg))?"":parseInt(t.id_image_bg):"",urlImage:m?t.image_bg_url:"",width:m?isNaN(parseInt(t.image_width))?"":parseInt(t.image_width):"",height:m?isNaN(parseInt(t.image_height))?"":parseInt(t.image_height):"",typeBGimage:m?t.type_bg_image:"",photoswipe:m?t.photoswipe:""};Rexbuilder_Dom_Util.updateImageBG(a,g);var p={$elem:e,color:t.color_bg_block,active:"undefined"==typeof t.color_bg_block_active||t.color_bg_block_active.toString()};-1===p.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockBackgroundColor(p):Rexbuilder_Dom_Util.updateBlockBackgroundGradient(p);var f={$elem:e,color:t.overlay_block_color,active:"undefined"!=typeof t.overlay_block_color_active&&t.overlay_block_color_active.toString()};-1===f.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockOverlay(f):Rexbuilder_Dom_Util.updateBlockOverlayGradient(f),Rexbuilder_Dom_Util.updateBlockPaddings(e,_getPaddingsDataString("undefined"!=typeof t.block_padding?t.block_padding:""));var h="undefined"==typeof t.block_custom_class?"":t.block_custom_class,y=[];""!=h&&(h=h.trim(),y=h.split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(e,y);var v="undefined"!=typeof t.block_flex_position?t.block_flex_position.split(" "):"",b={x:v[0],y:v[1]};Rexbuilder_Dom_Util.updateFlexPostition(e,b);var x="undefined"==typeof t.slider_dimension_ratio?"":t.slider_dimension_ratio;i.attr("data-slider_ratio",x);var D="undefined"==typeof t.block_ratio?"":t.block_ratio;i.attr("data-block_ratio",D);var S="undefined"==typeof t.block_dimensions_live_edited?"":t.block_dimensions_live_edited;i.attr("data-block_dimensions_live_edited",S);var C="undefined"!=typeof t.hide&&"true"==t.hide.toString();C?(e.hasClass("rex-hide-element")||e.addClass("rex-hide-element"),Rexbuilder_Util.stopBlockVideos(e)):(e.hasClass("rex-hide-element")&&e.removeClass("rex-hide-element"),Rexbuilder_Util.playBlockVideos(e));"undefined"!=typeof t.element_edited&&"true"==t.element_edited.toString();for(var R in t)switch(R){case"type":i.attr("data-type",t.type);break;case"size_x":e.attr("data-width",t.size_x);break;case"size_y":e.attr("data-height",t.size_y);break;case"row":e.attr("data-row",t.row);break;case"col":e.attr("data-col",t.col);break;case"photoswipe":if(!Rexbuilder_Util.editorMode){if(""===t.linkurl&&"true"==t.photoswipe){Rexbuilder_Photoswipe.addElement(a,t.image_bg_block,parseInt(t.image_width),parseInt(t.image_height),t.image_size);var U=e.parents(".rexpansive_section");U.addClass("photoswipe-gallery")}else Rexbuilder_Photoswipe.removeElement(a);i.attr("data-photoswipe",t.photoswipe)}break;case"linkurl":if(!Rexbuilder_Util.editorMode){var w=a.parents(".element-link");if(""!=t.linkurl)if(0!=w.length)w.attr("href",t.linkurl),w.attr("title",t.linkurl);else{var k=a.parent();tmpl.arg="link",k.append(tmpl("tmpl-link-block",{url:t.linkurl}));var L=k.children(".element-link");a.detach().appendTo(L)}else 0!=w.length&&w.children().unwrap()}Rexbuilder_Dom_Util.updateBlockUrl(e,t.linkurl);break;case"zak_background":case"zak_side":case"zak_title":case"zak_icon":case"zak_foreground":break;case"block_animation":break;case"block_has_scrollbar":}},_getDefaultBlockMeasure=function(e){e="undefined"!=typeof e?e:"";var t={defDefaultWidth:3,defDefaultHeight:4,defMobileWidth:12,defMobileHeight:null};if(""!==e){var i=$pageCustomizationsDataDiv.find(".customization-wrap");i.each(function(i,a){for(var o=$(a),r=a.getAttribute("data-customization-name"),n=JSON.parse(o.find(".section-targets[data-section-rex-id="+e+"]").text()),s=0,d=n.length;s<d;s++)if("self"===n[s].name){switch(n[s].props.layout){case"masonry":"mobile"==r?t.defMobileHeight=52:t.defDefaultHeight=Math.ceil(4*n[s].props.grid_cell_width/5);break;case"fixed":"mobile"==r?t.defMobileHeight=4:t.defDefaultHeight=4}break}})}return t.defMobileHeight||(t.defMobileHeight=52),t},_updateModelsLive=function(e,t,i){Rexbuilder_Util.domUpdaiting=!0;var a,o,r=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),n=r.length;for(a=0;a<n;a++)r[a].getAttribute("data-rexlive-model-id")==e&&r[a].getAttribute("data-rexlive-model-number")!=i&&(o=$(r[a]),_updateDOMelements(o,t,!1));Rexbuilder_Util.domUpdaiting=!1},_saveCustomizationDomOrder=function(e){var t,i,a,o;$layoutsDomOrder.children().remove();var r=[];for(t=0,a=e.length;t<a;t++){var n=document.createElement("div");for(Rexbuilder_Util.addClass(n,"layout-sections"),n.setAttribute("data-rex-layout-name",e[t].name),r=[],i=0,o=e[t].sections.length;i<o;i++)r.push(e[t].sections[i]);n.textContent=JSON.stringify(r),$(n).appendTo($layoutsDomOrder[0])}},_getPageCustomizationsDom=function(){var e=[];return $layoutsDomOrder.children('.layout-sections:not([data-rex-layout-name="default"])').each(function(t,i){var a=$(i);e.push({name:a.attr("data-rex-layout-name"),sections:JSON.parse(a.text())})}),e},_updatePageCustomizationsDomOrder=function(e){for(var t=0,i=e.length;t<i;t++)$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="'+e[t].name+'"]').text(JSON.stringify(e[t].sections))},_getPageAvaiableLayoutsNames=function(){return JSON.parse($availableLayoutNames.text())},_getLayoutLiveSectionTargets=function(e){var t=[];if(e.hasClass("rex-model-section")){var i=e.attr("data-rexlive-model-id");$liveDataContainer.children().each(function(e,a){var o=$(a);if(i==o.attr("data-model-id"))return t=JSON.parse(o.text()),!1})}else{var a=e.attr("data-rexlive-section-id");$liveDataContainer.children().each(function(e,i){var o=$(i);if(a==o.attr("data-section-rex-id"))return t=JSON.parse(o.text()),!1})}return t},_applyDefaultBlocksDimentions=function(e,t,i){for(var a=_getDefaultLayoutState(),o=e.attr("data-rexlive-section-id"),r=0,n=a.length;r<n;r++)if(o==a[r].section_rex_id){var s=a[r],d=s.targets;i.layout=d[0].props.layout,i.fullHeight=d[0].props.full_height,i.collapsed="undefined"!=typeof d[0].props.collapsed&&d[0].props.collapsed;for(var l=1,u=t.length;l<u;l++)for(var c=0,_=d.length;c<_;c++){var m=t[l];m.name==d[c].name&&(m.props.gs_x=d[c].props.gs_x,m.props.gs_y=d[c].props.gs_y,m.props.gs_width=d[c].props.gs_width,m.props.gs_height=d[c].props.gs_height,m.props.gs_start_h=d[c].props.gs_start_h)}break}},_createDefaultLayoutState=function(e){$defaultLayoutState.children().remove();var t,i;for(t=0,i=e.length;t<i;t++){var a=$(document.createElement("div"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($defaultLayoutState[0])}$defaultLayoutState.removeAttr("data-empty-default-customization")},_updateDefaultLayoutState=function(e){var t,i,a,o,r,n,s="undefined"==typeof e.pageData?[]:e.pageData,d="undefined"==typeof e.modelsData?[]:e.modelsData;if(0==s.length)$defaultLayoutState.children(".section-targets").each(function(e,t){var r=$(t),n=isNaN(parseInt(r.attr("data-model-id")))?-1:parseInt(r.attr("data-model-id"));if(n!=-1)for(i=0;i<d.length;i++)if(n==d[i].id){for(a=0,o=d[i].customizations.length;a<o;a++)if("default"==d[i].customizations[a].name){r.text(JSON.stringify(d[i].customizations[a].targets));break}break}});else for($defaultLayoutState.children(".section-targets").remove(),t=0,r=s.length;t<r;t++){var l=$(document.createElement("div"));if(l.addClass("section-targets"),l.attr("data-section-rex-id",s[t].section_rex_id),l.attr("data-model-id",s[t].section_model_id),l.attr("data-model-number",s[t].section_model_number),l.attr("data-section-hide",s[t].section_hide),""==s[t].section_model_id||s[t].section_model_id==-1)l.text(JSON.stringify(s[t].targets));else if(s[t].section_model_id!=-1)for(i=0,n=d.length;i<n;i++)if(s[t].section_model_id==d[i].id){for(a=0,o=d[i].customizations.length;a<o;a++)if("default"==d[i].customizations[a].name){l.text(JSON.stringify(d[i].customizations[a].targets));break}break}l.appendTo($defaultLayoutState[0])}},_updateDefaultLayoutStateDOMOrder=function(e){var t=_getDefaultLayoutState();e=jQuery.extend(!0,[],e);var i,a,o,r,n,s,d=[];for(i=0,o=e.length;i<o;i++)if(e[i].modelID!=-1){for(s=!1,a=0,r=d.length;a<r;a++)if(d[a].id==e[i].modelID){d[a].number=d[a].number+1,e[i].modelNumber=d[a].number,s=!0;break}s||(d.push({id:e[i].modelID,number:1}),e[i].modelNumber=1)}var l,u=[];for(i=0,o=e.length;i<e;i++){for(a=0,n=t.length;a<n;a++)e[i].modelID!=-1?e[i].modelID==t[a].section_model_id&&e[i].modelNumber==t[a].section_model_number&&(l=t.splice(a,1)):e[i].rexID==t[a].section_rex_id&&(l=t.splice(a,1));u.push(l[0])}_updateDefaultLayoutState({pageData:u})},_updateDefaultLayoutStateSection=function(e,t){var i=e[0];t="undefined"==typeof t?-1:t,Rexbuilder_Dom_Util.fixModelNumbers();var a=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),o=!1;
if(hasClass(i,"rex-model-section")){var r,n=i.getAttribute("data-rexlive-model-id"),s=i.getAttribute("data-rexlive-section-number"),d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets")),l=d.length;for(r=0;r<l;r++)n==d[r].getAttribute("data-model-id")&&(d[r].textContent=JSON.stringify(a),s==d[r].getAttribute("data-model-number")&&(o=!0))}else{var r,u=i.getAttribute("data-rexlive-section-id"),d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets")),l=d.length;for(r=0;r<l;r++)u==d[r].getAttribute("data-section-rex-id")&&(d[r].textContent=JSON.stringify(a),o=!0)}if(!o){var c={section_rex_id:i.getAttribute("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1};c.section_hide=hasClass(i,"rex-hide-section"),hasClass(i,"rex-model-section")&&(c.section_is_model=!0,c.section_model_id=i.getAttribute("data-rexlive-model-id"),c.section_model_number=i.getAttribute("data-rexlive-model-number"));var _=document.createElement("div");addClass(_,"section-targets"),_.setAttribute("data-section-rex-id",c.section_rex_id),_.setAttribute("data-model-id",c.section_model_id),_.setAttribute("data-model-number",c.section_model_number),_.setAttribute("data-section-hide",c.section_hide),_.textContent=JSON.stringify(a);var m=$(_);if(t==-1)m.appendTo($defaultLayoutState[0]);else{var g;t-=1,$defaultLayoutState.children(".section-targets").each(function(e,i){if(e==t)return g=$(i),!1}),g.after(m[0])}}},_getDefaultLayoutState=function(){var e=[];return $defaultLayoutState.children(".section-targets").each(function(t,i){var a=$(i),o=a.attr("data-section-rex-id"),r=isNaN(parseInt(a.attr("data-model-id")))?-1:parseInt(a.attr("data-model-id")),n=isNaN(parseInt(a.attr("data-model-number")))?-1:parseInt(a.attr("data-model-number")),s="undefined"!=typeof a.attr("data-section-hide")&&"1"==a.attr("data-section-hide").toString(),d=""!=a.text()?JSON.parse(a.text()):[];e.push({section_rex_id:o,section_model_id:r!=-1?r:"",section_model_number:n!=-1?n:"",section_is_model:r!=-1,section_hide:s,targets:d})}),e},_updateSectionOrderCustomLayouts=function(e,t){var i,a,o,r,n,s,d,l=Rexbuilder_Util.getPageCustomizationsDom();for(o=0,n=t.length;o<n;o++)if(t[o].rexID==e.rexID&&t[o].modelNumber==e.modelNumber&&t[o].modelID==e.modelID){a=o;break}for(o=0,s=l.length;o<s;o++){for(i=!1,r=0,d=l[o].sections.length;r<d;r++)if(l[o].sections[r].section_is_model){if(l[o].sections[r].section_model_id==e.modelID&&l[o].sections[r].section_model_number==e.modelNumber){"undefined"!=typeof l[o].sections[r].section_created_live&&"true"==l[o].sections[r].section_created_live.toString()&&(i=!0);break}}else if(e.rexID==l[o].sections[r].section_rex_id){"undefined"!=typeof l[o].sections[r].section_created_live&&"true"==l[o].sections[r].section_created_live.toString()&&(i=!0);break}if(i){var u=l[o].sections.splice(r,1)[0];l[o].sections.splice(a,0,u)}}Rexbuilder_Util.updatePageCustomizationsDomOrder(l)},_updateSectionStateLive=function(e){Rexbuilder_Dom_Util.fixModelNumbers();var t=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),i=!1;if(e.hasClass("rex-model-section")){var a=e.attr("data-rexlive-model-id");$liveDataContainer.children().each(function(e,o){var r=$(o);a==r.attr("data-model-id")&&(r.text(JSON.stringify(t)),i=!0)})}else{var o=e.attr("data-rexlive-section-id");$liveDataContainer.children().each(function(e,a){var r=$(a);o==r.attr("data-section-rex-id")&&(r.text(JSON.stringify(t)),i=!0)})}if(!i){var r={section_rex_id:e.attr("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1};r.section_hide=e.hasClass("rex-hide-section"),e.hasClass("rex-model-section")&&(r.section_is_model=!0,r.section_model_id=e.attr("data-rexlive-model-id"),r.section_model_number=e.attr("data-rexlive-model-number"));var n=$(document.createElement("div"));n.addClass("section-targets"),n.attr("data-section-rex-id",r.section_rex_id),n.attr("data-model-id",r.section_model_id),n.attr("data-model-number",r.section_model_number),n.attr("data-section-hide",r.section_hide),n.text(JSON.stringify(t)),n.appendTo($liveDataContainer[0])}},_getGridLayoutLive=function(e){var t,i={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){var a=e.attr("data-rexlive-model-id");$liveDataContainer.children(".section-targets").each(function(e,i){var o=$(i);a==o.attr("data-model-id")&&(t=JSON.parse(o.text()))})}else{var o=e.attr("data-rexlive-section-id");$liveDataContainer.children(".section-targets").each(function(e,i){var a=$(i);o==a.attr("data-section-rex-id")&&(t=JSON.parse(a.text()))})}return i.layout=t[0].props.layout,i.fullHeight=t[0].props.full_height,i.collapsed=t[0].props.collapse_grid,i},_getLayoutSectionTargets=function(e,t){t="undefined"==typeof t?"default":t;var i,a,o,r,n,s,d=[];if(e.hasClass("rex-model-section")){var l=e.attr("data-rexlive-model-id"),u=_getModelsCustomizations();for(i=0,o=u.length;i<o;i++)if(u[i].id==l){for(a=0,r=u[i].customizations.length;a<r;a++)if(u[i].customizations[a].name==t){d=jQuery.extend(!0,[],u[i].customizations[a].targets);break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(i=0,n=_.length;i<n;i++)if(_[i].name==t&&"undefined"!=typeof _[i].sections){for(a=0,s=_[i].sections.length;a<s;a++)if(_[i].sections[a].section_rex_id==c){d=jQuery.extend(!0,[],_[i].sections[a].targets);break}break}}return d},_getDefaultBlockProps=function(e,t){var i,a,o=_getLayoutSectionTargets(e,"default"),r={};for(i=1,a=o.length;i<a;i++)if(o[i].name==t){r=jQuery.extend(!0,{},o[i].props);break}return r},_getGridLayout=function(e,t){t="undefined"==typeof t?"default":t;var i,a,o,r,n,s,d={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){var l=e.attr("data-rexlive-model-id"),u=_getModelsCustomizations();for(i=0,o=u.length;i<o;i++)if(u[i].id==l){for(a=0,r=u[i].customizations.length;a<r;a++)if(u[i].customizations[a].name==t){d.layout=u[i].customizations[a].targets[0].props.layout,d.fullHeight=u[i].customizations[a].targets[0].props.full_height,d.collapsed=u[i].customizations[a].targets[0].props.collapse_grid;break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(i=0,n=_.length;i<n;i++)if(_[i].name==t&&"undefined"!=typeof _[i].sections&&null!==typeof _[i].sections){for(a=0,s=_[i].sections.length;a<s;a++)if(_[i].sections[a].section_rex_id==c){0!=_[i].sections[a].targets.length&&(d.layout=_[i].sections[a].targets[0].props.layout,d.fullHeight=_[i].sections[a].targets[0].props.full_height,d.collapsed=_[i].sections[a].targets[0].props.collapse_grid);break}break}}return d},_customizationExists=function(e){var t,i,a=!1,o=[];for(""!=$availableLayoutNames.text()&&(o=JSON.parse($availableLayoutNames.text())),t=0,i=o.length;t<i;t++)if(o[t]==e){a=!0;break}return a},updateSection=function(e,t,i,a){var o=e.children(".section-data"),r=isNaN(parseInt(i.video_bg_id))?"":parseInt(i.video_bg_id),n="undefined"==typeof i.video_bg_url_section?"":i.video_bg_url_section,s="undefined"==typeof i.video_bg_url_vimeo_section?"":i.video_bg_url_vimeo_section,d="";""!=r?d="mp4":""!=s?d="vimeo":""!=n&&(d="youtube");var l="undefined"!==i.custom_classes&&-1!==i.custom_classes.indexOf("rex-video--with-audio"),u={mp4Data:{idMp4:r,linkMp4:"undefined"==typeof i.video_mp4_url?"":i.video_mp4_url,width:"",height:""},vimeoUrl:s,youtubeUrl:n,audio:l,typeVideo:d};Rexbuilder_Dom_Util.updateSectionVideoBackground(e,u),t.perfectGridGalleryEditor("fixVideoProportion");var c={active:"undefined"==typeof i.image_bg_section_active||i.image_bg_section_active.toString(),idImage:isNaN(parseInt(i.id_image_bg_section))?"":parseInt(i.id_image_bg_section),urlImage:i.image_bg_section,width:parseInt(i.image_width),height:parseInt(i.image_height)},_={color:i.row_overlay_color,active:"undefined"!=typeof i.row_overlay_active&&i.row_overlay_active.toString()};Rexbuilder_Dom_Util.updateImageBG(e,c);var m={color:i.color_bg_section,active:"undefined"==typeof i.color_bg_section_active||i.color_bg_section_active.toString()};-1===m.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionBackgroundColor(e,m):Rexbuilder_Dom_Util.updateSectionBackgroundGradient(e,m),-1===_.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionOverlay(e,_):Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,_);var g={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)};Rexbuilder_Dom_Util.updateSectionMarginsData(e,g),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1,i.layout=o.attr("data-layout"));var p={gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:"undefined"!=typeof i.collapse_grid&&("true"==i.collapse_grid.toString()||a)};Rexbuilder_Dom_Util.updateRow(e,o,t,p);var f="undefined"==typeof i.section_name?"":i.section_name;Rexbuilder_Dom_Util.updateSectionName(e,f),e.attr("data-type",i.type);var h="undefined"==typeof i.custom_classes?"":i.custom_classes,y=[];""!=h&&(h=h.trim(),y=h.split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(e,y);var v="undefined"!=typeof i.section_edited&&"true"==i.section_edited.toString();e.attr("data-rexlive-section-edited",v)},updateSectionTools=function(e,t,i,a){var o={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)};Rexbuilder_Section.fixSectionToolbox(e,o),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1);var r={gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:"undefined"!=typeof i.collapse_grid&&("true"==i.collapse_grid.toString()||a)};Rexbuilder_Section.fixBlockToolsAccordingToSeparator(e,r)},_updateElementDimensions=function(e,t,i){var a=parseInt(i.x),o=parseInt(i.y),r=parseInt(i.w),n=parseInt(i.h),s=parseInt(i.startH),d=(parseInt(i.increaseHeight),parseInt(i.realFluid));"undefined"!=typeof i.gridstackInstance?i.gridstackInstance.update(e,a,o,r,n):(e.setAttribute("data-gs-height",n),e.setAttribute("data-gs-width",r),e.setAttribute("data-gs-y",o),e.setAttribute("data-gs-x",a)),t.setAttribute("data-gs_start_h",s),t.setAttribute("data-gs_width",r),t.setAttribute("data-gs_height",n),t.setAttribute("data-gs_y",o),t.setAttribute("data-gs_x",a),t.setAttribute("data-element_real_fluid",d)},_detect_mobile=function(){"ontouchstart"in document.documentElement?document.documentElement.className+=" touch":document.documentElement.className+=" no-touch"},_viewport=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},getYoutubeID=function(e){var t;return t=e.indexOf("youtu.be")>0?e.substr(e.lastIndexOf("/")+1,e.length):e.indexOf("http")>-1?e.match(/[\\?&]v=([^&#]*)/)[1]:e.length>15?null:e},_getQueryVariable=function(e){for(var t=window.location.search.substring(1),i=t.split("&"),a=0,o=i.length;a<o;a++){var r=i[a].split("=");if(r[0]==e)return r[1]}return!1},_checkPresentationPage=function(){return 0!==$(".rexpansive_portfolio_presentation").length},_checkStaticPresentationPage=function(){return 0!==$(".rexpansive-static-portfolio").length},_checkPost=function(){return 0!==$("#rex-article").length},_whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},_whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},addWindowListeners=function(){Rexbuilder_Util.firstResize=!0;var e;Rexbuilder_Util.$window.on("resize",function(t){Rexbuilder_Util_Editor.elementIsResizing||(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.firstResize&&(Rexbuilder_Util.firstResize=!1),loadWidth!==Rexbuilder_Util.viewport().width&&(e&&clearTimeout(e),e=setTimeout(Rexbuilder_Util.doneResizing,1e3)))})},doneResizing=function(){if(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.editorMode){if(!Rexbuilder_Util_Editor.changedLayout)return"default"===Rexbuilder_Util.chosenLayoutData.id&&_updateGridsHeights(),void(Rexbuilder_Util.windowIsResizing=!1);Rexbuilder_Util_Editor.changedLayout=!1;var e=_edit_dom_layout(Rexbuilder_Util_Editor.clickedLayoutID);0===e.collapse_needed?Rexbuilder_Util_Editor.endLoading():Rexbuilder_Util.$document.one("rexlive:collapsingElementsEnded",function(e){Rexbuilder_Util_Editor.endLoading()})}else{var t=_findFrontLayout();if(startFrontLayout!=t&&(Rexbuilder_Util.changedFrontLayout=!0,startFrontLayout=t,Rexbuilder_Util_Editor.startLoading()),Rexbuilder_Util.changedFrontLayout){var i=chooseLayout();_set_initial_grids_state(i),setTimeout(changeLayouHandling.bind(null,i),300)}else{var e=(chooseLayout(),_edit_dom_layout(chooseLayout()));_updateGridsHeights()}}Rexbuilder_Util.windowIsResizing=!1,Rexbuilder_Util.firstResize=!0,loadWidth=Rexbuilder_Util.viewport().width},_set_initial_grids_state=function(e){if(e="undefined"!=typeof e?e:"default",Rexbuilder_Util.rexContainer){var t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++){for(var o=$(i[t]),r=o.find(".grid-stack-row"),n=r.data().plugin_perfectGridGalleryEditor,s=Rexbuilder_Util.getSectionCustomLayouts(i[t].getAttribute("data-rexlive-section-id")),d=null,l=null,u=0;u<s.length;u++){if("default"===s[u].name&&(l=u),s[u].name===e){d=u;break}u==s.length-1&&(d=l)}for(var c=[],u=0,_=s[d].targets.length;u<_;u++)if("self"!==s[d].targets[u].name){var m={};m.el=o.find(".perfect-grid-item[data-rexbuilder-block-id="+s[d].targets[u].name+"]"),m.x=parseInt(s[d].targets[u].props.gs_x),m.y=parseInt(s[d].targets[u].props.gs_y),m.width=parseInt(s[d].targets[u].props.gs_width),m.height=parseInt(s[d].targets[u].props.gs_height),c.push(m)}n.set_grid_initial_state(c)}}},_updateGridsHeights=function(){if(Rexbuilder_Util.rexContainer){var e,t,i,a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-row")),o=a.length;for(e=0;e<o;e++){t=$(a[e]),i=t.data().plugin_perfectGridGalleryEditor,void 0!==i&&(i.batchGridstack(),i._defineDynamicPrivateProperties(),i.updateGridstackStyles(),i.setFullWidthNaturalBackground(),i.setNaturalBackground(),i.updateBlocksHeight(),i.fixVideoProportion(),i.commitGridstack());var r=jQuery.Event("rexlive:updateGridsHeights");r.settings={$row:t},Rexbuilder_Util.$document.trigger(r)}}},_stopBlockVideos=function(e){_stopVideo(e.find(".grid-item-content"))},_playBlockVideos=function(e){_playVideoFromBegin(e.find(".grid-item-content"))},_stopPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");$.each(t,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(i,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(a,function(e,t){Rexbuilder_Util.stopVideo($(t))})},_playPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");("1"!=_plugin_frontend_settings.fast_load||Rexbuilder_Util.editorMode)&&$.each(t,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(i,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(a,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))})},_stopVideo=function(e){if(e.hasClass("mp4-player")){var t=e.children(".rex-video-wrap").find("video")[0];t.currentTime=0,t.pause()}else if(e.hasClass("vimeo-player")){var i=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);i&&i.unload()}else if(e.hasClass("youtube-player")){if(void 0===e.children(".rex-youtube-wrap").YTPGetPlayer())return;e.children(".rex-youtube-wrap").YTPStop()}},_fixVideosAudioSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");Rexbuilder_Util.fixVideoAudio(e),$.each(t,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(i,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(a,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))})},_fixYoutube=function(e){var t,i=[].slice.call(e.getElementsByClassName("rex-youtube-wrap")),a=i.length;for(t=0;t<a;t++){var o=$(i[t]),r=o.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),n=o.YTPGetPlayer();void 0!==n&&(o.optimizeDisplay(),o.YTPPlay(),0==r.length||r.hasClass("user-has-muted")?(n.mute(),n.isMute=!0,n.setVolume(0)):o.YTPUnmute())}},_fixVideoAudio=function(e){var t=e.children("rex-video-toggle-audio");if(e.hasClass("mp4-player")){var i=e.children(".rex-video-wrap").find("video")[0];0==t.length||t.hasClass("user-has-muted")?$(i).prop("muted",!0):$(i).prop("muted",!1)}else if(e.hasClass("vimeo-player")){var a=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);0==t.length||t.hasClass("user-has-muted")?a&&a.setVolume(0):a.setVolume(1)}else if(e.hasClass("youtube-player")){var o=e.children(".rex-youtube-wrap"),r=o.YTPGetPlayer();void 0!==r&&(0==t.length||t.hasClass("user-has-muted")?(r.mute(),r.isMute=!0,r.setVolume(0)):o.YTPUnmute())}},_playVideoFromBegin=function(e){if(e.hasClass("mp4-player")){var t=e.children(".rex-video-wrap").find("video")[0];t.currentTime=0,t.play()}else if(e.hasClass("vimeo-player")){var i=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);null!==i&&i.play()}else if(e.hasClass("youtube-player")){var a=e.children(".rex-youtube-wrap");if(0==a.length)return;var o=a.YTPGetPlayer();if(void 0===o)return;a.YTPPlay()}setTimeout(Rexbuilder_Util.fixVideoAudio.bind(null,e),500)},_launchVideoPlugins=function(){var ytVideos=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rex-youtube-wrap")),i,tot_ytVideos=ytVideos.length,$ytVideo,data_yt,url,id;if(jQuery.browser.mobile)for(i=0;i<tot_ytVideos;i++)data_yt=eval("("+ytVideos[i].getAttribute("data-property")+")"),url=data_yt.videoURL,id=getYoutubeID(url),ytVideos[i].style.backgroundImage="url(http://img.youtube.com/vi/"+id+"/0.jpg)",ytVideos[i].addEventListener("click",handleYtbVideoMobileClick);else for(i=0;i<tot_ytVideos;i++){if($ytVideo=$(ytVideos[i]),void 0===$ytVideo.YTPGetPlayer()&&!Rexbuilder_Util.hasClass(ytVideos[i],"youtube-player-launching"))return void $ytVideo.YTPlayer();Rexbuilder_Util.removeClass(ytVideos[i],"youtube-player-launching")}VimeoVideo.init()},setContainer=function(e){this.$rexContainer=e},_parents=function(e,t){for(;e.parentNode;){if(_matches(e,t))return e;e=e.parentNode}return null},_matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},_transitionEvent="",_animationEvent="",_scroll_timing=600,_getGalleryInstance=function(e){var t=e.find(".grid-stack-row");return 0==t.length?null:t.data().plugin_perfectGridGalleryEditor},removeCollapsedGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length;for(e=0;e<i;e++){var a=_getGalleryInstance($(t[e]));Rexbuilder_Dom_Util.collapseGrid(a,!1,a.properties.dispositionBeforeCollapsing,a.properties.layoutBeforeCollapsing)}}},collapseAllGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length;for(e=0;e<i;e++){var a=_getGalleryInstance($(t[e]));a._defineDynamicPrivateProperties(),a.collapseElements()}}},_startVideoPlugin=function(e){if(e.hasClass("mp4-player"));else if(e.hasClass("vimeo-player")){var t=e.children(".rex-video-vimeo-wrap").find("iframe")[0],i={autoplay:!0,background:!0,loop:!0};VimeoVideo.addPlayer("1",t,i)}else e.hasClass("youtube-player")&&void 0===e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPlayer()},_destroyVideo=function(e,t){var i="";return e.hasClass("mp4-player")?(i="mp4",Rexbuilder_Dom_Util.removeMp4Video(e,t)):e.hasClass("vimeo-player")?(i="vimeo",Rexbuilder_Dom_Util.removeVimeoVideo(e,t)):e.hasClass("youtube-player")&&(i="youtube",Rexbuilder_Dom_Util.removeYoutubeVideo(e,t)),i},_pauseVideo=function(e){if(e.hasClass("mp4-player"))e.children(".rex-video-wrap").find("video")[0].pause();else if(e.hasClass("vimeo-player")){var t=VimeoVideo.findVideo(e.find(".rex-video-vimeo-wrap").find("iframe")[0]);t.pause()}else if(e.hasClass("youtube-player")){if(void 0===e.children(".rex-youtube-wrap").YTPGetPlayer())return;e.children(".rex-youtube-wrap").YTPPause()}},_playAllVideos=function(){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("mp4-player")),i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("vimeo-player")),a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("youtube-player")),o=t.length,r=i.length,n=a.length;if("1"!=_plugin_frontend_settings.fast_load||Rexbuilder_Util.editorMode)for(e=0;e<o;e++)Rexbuilder_Util.playVideo($(t[e]));for(e=0;e<r;e++)Rexbuilder_Util.playVideo($(i[e]));for(e=0;e<n;e++)Rexbuilder_Util.playVideo($(a[e]))},_playVideo=function(e){var t=e[0];if("undefined"!=typeof t)if(Rexbuilder_Util.hasClass(t,"mp4-player")){var i=t.querySelector("video");i&&i.play()}else if(Rexbuilder_Util.hasClass(t,"vimeo-player")){var a=VimeoVideo.findVideo(t.querySelector("iframe"));a&&a.play()}else if(Rexbuilder_Util.hasClass(t,"youtube-player")){var o=t.querySelector(".rex-youtube-wrap");if(!o)return;var r=$(o);if(void 0===r.YTPGetPlayer())return;r.YTPPlay()}},_getBackgroundUrlFromCss=function(e){return e.replace("url(","").replace(")","").replace(/\"/gi,"")},_getPaddingsDataString=function(e){var t={top:"5",right:"5",bottom:"5",left:"5",type:"px"};if(""!=e){var i=e.split(/;/gm);t.top=parseInt(i[0].split(/\D+/gm)[0]),t.right=parseInt(i[1].split(/\D+/gm)[0]),t.bottom=parseInt(i[2].split(/\D+/gm)[0]),t.left=parseInt(i[3].split(/\D+/gm)[0]);var a="";a=i[0].indexOf("%")!=-1?"%":"px",t.type=a}return t},_paddingsToString=function(e){var t="";return t+=""+e.top+e.type+";",t+=""+e.right+e.type+";",t+=""+e.bottom+e.type+";",t+=""+e.left+e.type+";"},getCoord=function(e,t){return t="undefined"!=typeof t?t:12,{x:e%t,y:Math.floor(e/t)}},_diffStrings=function(e,t){t="undefined"!=typeof t?t:" ";for(var i=e.join(" "),a=i.split(t),o={},r=[],n=0,s=a.length;n<s;n++)o[a[n]]="undefined"!=typeof o[a[n]]?o[a[n]]+1:1;for(var d in o)1===o[d]&&r.push(d);return r},init=function(){if(this.fast_load="1"==_plugin_frontend_settings.fast_load,this.firstStart=!0,this.isIframe=window.location!==window.parent.location,_plugin_frontend_settings.scroll_animation_offset=0,Rexbuilder_Util.changedFrontLayout=!1,_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing)this.editorMode=!0;else{this.editorMode=!1;var e=$("#layout-avaiable-dimensions");frontAvailableLayouts=e.length>0?JSON.parse(e.text()):[],startFrontLayout=_findFrontLayout()}this._transitionEvent=_whichTransitionEvent(),this._animationEvent=_whichAnimationEvent(),this.$window=$(window),this.$document=$(document),this.$body=$("body"),this.galleryPluginActive=!1,_detect_mobile(),$rexbuilderLayoutData=$(document.getElementById("rexbuilder-layout-data")),$rexbuilderModelData=$(document.getElementById("rexbuilder-model-data")),$availableLayoutNames=$rexbuilderLayoutData.find(".available-layouts-names"),$modelsCustomizationsDataDiv=$("#rexbuilder-model-data").children(".models-customizations").eq(0),$pageCustomizationsDataDiv=$rexbuilderLayoutData.children(".layouts-customizations").eq(0),$liveDataContainer=$("#rexbuilder-layout-data-live"),$layoutsDomOrder=$("#rexbuilder-layouts-sections-order"),$defaultLayoutState=$("#rexbuilder-default-layout-state"),$usedIDSContainer=$("#sections-ids-used"),_storeNamesUsed(),this.$rexContainer=$(".rex-container"),this.rexContainer=this.$rexContainer[0],this.backendEdited=!1,Rexbuilder_Util.$rexContainer.length>0&&"true"==Rexbuilder_Util.$rexContainer.attr("data-backend-edited").toString()&&(Rexbuilder_Util.$rexContainer.addClass("backend-edited"),this.backendEdited=!0),this.lastSectionNumber=-1,this.activeLayout="",this.domUpdaiting=!1;var t=this.$rexContainer.children(".rexpansive_section").eq(0).attr("data-rex-collapse-grid");this.blockGridUnder768="undefined"!=typeof t&&"false"==t.toString(),this.chosenLayoutData=null,loadWidth=Rexbuilder_Util.viewport().width,_updateSectionsID(),Rexbuilder_Dom_Util.fixModelNumbers(),_updateSectionsNumber(),this.firstStart=!1};return{init:init,viewport:_viewport,getYoutubeID:getYoutubeID,transitionEvent:_transitionEvent,animationEvent:_animationEvent,getQueryVariable:_getQueryVariable,checkPresentationPage:_checkPresentationPage,checkStaticPresentationPage:_checkStaticPresentationPage,checkPost:_checkPost,scroll_timing:_scroll_timing,fixSectionWidth:fixSectionWidth,editorMode:editorMode,windowIsResizing:windowIsResizing,firstResize:firstResize,addWindowListeners:addWindowListeners,launchVideoPlugins:_launchVideoPlugins,stopPluginsSection:_stopPluginsSection,playPluginsSection:_playPluginsSection,stopBlockVideos:_stopBlockVideos,playBlockVideos:_playBlockVideos,chooseLayout:chooseLayout,predictLayout:predictLayout,setContainer:setContainer,createSectionID:_createSectionID,createBlockID:createBlockID,responsiveLayouts:responsiveLayouts,defaultLayoutSections:defaultLayoutSections,launchEditDomLayout:launchEditDomLayout,edit_dom_layout:_edit_dom_layout,smoothScroll:_smoothScroll,getGalleryInstance:_getGalleryInstance,removeCollapsedGrids:removeCollapsedGrids,collapseAllGrids:collapseAllGrids,stopVideo:_stopVideo,playVideoFromBegin:_playVideoFromBegin,pauseVideo:_pauseVideo,playVideo:_playVideo,destroyVideo:_destroyVideo,startVideoPlugin:_startVideoPlugin,getBackgroundUrlFromCss:_getBackgroundUrlFromCss,getPaddingsDataString:_getPaddingsDataString,paddingsToString:_paddingsToString,playAllVideos:_playAllVideos,findLayoutType:_findLayoutType,updateModelsLive:_updateModelsLive,getLayoutSectionTargets:_getLayoutSectionTargets,updateElementDimensions:_updateElementDimensions,getGridLayout:_getGridLayout,customizationExists:_customizationExists,getDefaultBlockProps:_getDefaultBlockProps,fixVideosAudioSection:_fixVideosAudioSection,fixVideoAudio:_fixVideoAudio,fixYoutube:_fixYoutube,getModelsCustomizations:_getModelsCustomizations,updateModelsCustomizationsData:_updateModelsCustomizationsData,getPageCustomizations:_getPageCustomizations,updatePageCustomizationsData:_updatePageCustomizationsData,updatePageAvaiableLayoutsNames:_updatePageAvaiableLayoutsNames,getPageAvaiableLayoutsNames:_getPageAvaiableLayoutsNames,updateDivModelCustomizationsNames:_updateDivModelCustomizationsNames,getSectionCustomLayouts:_getSectionCustomLayouts,getLayoutLiveSectionTargets:_getLayoutLiveSectionTargets,getGridLayoutLive:_getGridLayoutLive,updateSectionStateLive:_updateSectionStateLive,updatePageCustomizationsDomOrder:_updatePageCustomizationsDomOrder,getPageCustomizationsDom:_getPageCustomizationsDom,updateDefaultLayoutState:_updateDefaultLayoutState,updateDefaultLayoutStateSection:_updateDefaultLayoutStateSection,updateDefaultLayoutStateDOMOrder:_updateDefaultLayoutStateDOMOrder,getDefaultLayoutState:_getDefaultLayoutState,updateSectionOrderCustomLayouts:_updateSectionOrderCustomLayouts,updateGridsHeights:_updateGridsHeights,getSectionNamesUsed:_getSectionNamesUsed,saveSectionNamesUsed:_saveSectionNamesUsed,addSectionID:_addSectionID,removeSectionID:_removeSectionID,createRandomID:createRandomID,createRandomNumericID:_createRandomNumericID,updateDOMSingleElement:_updateDOMSingleElement,getDefaultBlockMeasure:_getDefaultBlockMeasure,doneResizing:doneResizing,getCoord:getCoord,diffStrings:_diffStrings,applyDefaultBlocksDimentions:_applyDefaultBlocksDimentions,isMobile:_isMobile,cssPropertyValueSupported:_cssPropertyValueSupported,changedFrontLayout:changedFrontLayout,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,rtimeOut:rtimeOut,rInterval:rInterval}}(jQuery);
var Rexbuilder_Photoswipe=function(e){"use strict";var t=function(e){var t=e.target,n=t.getAttribute("data-inline-pswp-info");if("undefined"!=typeof n&&""!==n){var i=document.querySelectorAll(".pswp")[0],r=!1,a=JSON.parse(n),l={galleryUID:t.getAttribute("data-pswp-uid"),closeOnScroll:!1,showHideOpacity:!0};r&&(l.showAnimationDuration=0);var p=new PhotoSwipe(i,PhotoSwipeUI_Default,a,l);p.init()}},n=function(e,t,n,i,r){if(!e.parents(".grid-stack-item").hasClass("block-has-slider")){tmpl.arg="image";var a=e.parents(".grid-stack-item-content");if(0==e.parents(".pswp-figure").length){e.parent().prepend(tmpl("tmpl-photoswipe-block",{link:t,width:n,height:i,type:r}));var l=a.find(".pswp-item");e.detach().appendTo(l)}}},i=function(t){var n=t.attr("class").split(" ")[1];tmpl.arg="image",t.before(tmpl("tmpl-photoswipe-block-inline",{link:t.attr("src"),width:t.css("width"),height:t.css("height"),type:"natural",align:n}));var i=t.parents(".text-wrap").find(".pswp-item"),r=i.filter(function(t){return 3==e(this).children().length});t.detach().appendTo(r)},r=function(e){var t=e.parents(".pswp-figure");if(0!=t.length){var n=t.parent();e.detach().appendTo(n),t.remove()}},a=function(t){for(var n=function(t){for(var n,i,r,a,l=e(t).find(".pswp-figure").get(),p=l.length,s=[],o=0;o<p;o++)n=l[o],1===n.nodeType&&(i=n.children[0],r=i.getAttribute("data-size").replace("px","").split("x"),a={src:i.getAttribute("href"),w:parseInt(r[0],10),h:parseInt(r[1],10)},n.children.length>1&&(a.title=n.children[1].innerHTML),i.children.length>0&&(a.msrc=i.children[0].getAttribute("data-thumburl")),a.el=n,s.push(a));return s},i=function g(e,t){return e&&(t(e)?e:g(e.parentNode,t))},r=function(n){if(n=n||window.event,!(e(n.target).parents(".perfect-grid-item").find(".element-link").length>0||e(n.target).is("a"))){n.preventDefault?n.preventDefault():n.returnValue=!1;var r=n.target||n.srcElement,a=i(r,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(a){for(var l,p=e(a).parents(t)[0],o=e(p).find(".pswp-figure").get(),d=o.length,u=0,c=0;c<d;c++)if(1===o[c].nodeType){if(o[c]===a){l=u;break}u++}return l>=0&&s(l,p),!1}}},a=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},l=function(){var e={eventName:"popUpContent:pswpOpened"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},p=function(){var e={eventName:"popUpContent:pswpClosed"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},s=function(e,t,i,r){var a,s,o,d=document.querySelectorAll(".pswp")[0];if(o=n(t),s={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=o[e].el.getElementsByClassName("pswp-item-thumb")[0],n=o[e].el.getElementsByClassName("rex-custom-scrollbar")[0],i=window.pageYOffset||document.documentElement.scrollTop,r=n.getBoundingClientRect(),a=t.getAttribute("data-thumb-image-type");return"natural"==a?{x:r.left,y:r.top+i,w:r.width}:null},closeOnScroll:!1,showHideOpacity:!0},r)if(s.galleryPIDs){for(var u=0,c=o.length;u<c;u++)if(o[u].pid==e){s.index=u;break}}else s.index=parseInt(e,10)-1;else s.index=parseInt(e,10);isNaN(s.index)||(i&&(s.showAnimationDuration=0),a=new PhotoSwipe(d,PhotoSwipeUI_Default,o,s),a.init(),Rexbuilder_Util.isIframe&&(l(),a.listen("close",p)))},o=document.querySelectorAll(t),d=0,u=o.length;d<u;d++)o[d].setAttribute("data-pswp-uid",d+1),o[d].onclick=r;var c=a();c.pid&&c.gid&&s(c.pid,o[c.gid-1],!0,!0)};return{init:a,addElement:n,addElementFromInline:i,removeElement:r,init_inline_pswp:t}}(jQuery);
/**
 * Util functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Util_Editor=function($){"use strict";var undoStackArray,redoStackArray,tippyCollection,_updateBlockContainerHeight=function(e,t){t=void 0===t||t,this.needToSave=t;var i=Rexbuilder_Util.getGalleryInstance(e.parents(".rexpansive_section").eq(0));i.updateElementHeight(e.parents(".grid-stack-item")[0]);var o=TextEditor.getEditorInstance().getExtensionByName("insert-media");if(o){var r=e.parents(".grid-item-content-wrap");o.placeMediaBtn(r)}this.needToSave=!0},setEndOfContenteditable=function(e){var t,i;document.createRange?(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):document.selection&&(t=document.body.createTextRange(),t.moveToElementText(e),t.collapse(!1),t.select())},_updateLayoutsAvaiable=function(e,t){var i,o=[];for(i=0;i<t.length;i++){var r=t[i];r.id==e.id&&(r.min!=e.min&&(r.min=e.min),r.max!=e.max&&(r.max=e.max),r.label!=e.label&&(r.label=e.label),e.presente=!0),o.push(r)}return"undefined"==typeof e.presente&&o.push(e),o},_createDefaultCustomLayouts=function(){var e=[],t={id:"mobile",label:"Mobile",min:320,max:767,type:"standard"},i={id:"tablet",label:"Tablet",min:768,max:1024,type:"standard"},o={id:"default",label:"My Desktop",min:1025,max:"",type:"standard"};return e.push(t),e.push(i),e.push(o),e},_createSliderData=function($sliderWrapper){for(var auto_start="true"==$sliderWrapper.attr("data-rex-slider-animation").toString(),prev_next="1"==$sliderWrapper.attr("data-rex-slider-prev-next").toString(),dots="1"==$sliderWrapper.attr("data-rex-slider-dots").toString(),data={id:parseInt($sliderWrapper.attr("data-slider-id")),settings:{auto_start:auto_start,prev_next:prev_next,dots:dots},slides:[]},slides=$sliderWrapper.find(".rex-slider-element"),i=0;i<slides.length;i++){var $slide=$(slides[i]),slide={slide_image_id:"",slide_image_url:"",slide_url:"",slide_text:"",slide_video:"",slide_videoMp4Url:"",slide_video_audio:"",slide_video_type:""};slide.slide_image_id=isNaN(parseInt($slide.attr("data-rex-slide-image-id")))?"":parseInt($slide.attr("data-rex-slide-image-id"));var backgroundImageUrl=Rexbuilder_Util.getBackgroundUrlFromCss($slide.css("background-image"));"none"!=backgroundImageUrl&&(slide.slide_image_url=backgroundImageUrl);var $linkDiv=$slide.children("a");0!=$linkDiv.length&&(slide.slide_url=$linkDiv.attr("href"));var $textContent=$slide.find(".rex-slider-element-title");0!=$textContent.length&&0!=$textContent.html().trim().length&&(slide.slide_text=$textContent.html());var $videoMp4Wrap=$slide.find(".mp4-player"),$videoVimeoWrap=$slide.find(".vimeo-player"),$videoYoutubeWrap=$slide.find(".youtube-player");if(0!=$videoMp4Wrap.length&&(slide.slide_video=parseInt($videoMp4Wrap.children(".rex-video-wrap").attr("data-rex-video-mp4-id")),slide.slide_videoMp4Url=$videoMp4Wrap.find("source").attr("src"),slide.slide_video_audio=0!=$videoMp4Wrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="mp4"),0!=$videoVimeoWrap.length){var $iframe=$videoVimeoWrap.find("iframe");slide.slide_video=$iframe.attr("src").split("?")[0],slide.slide_video_audio=0!=$videoVimeoWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="vimeo"}if(0!=$videoYoutubeWrap.length){var $ytpPlayer=$videoYoutubeWrap.find(".rex-youtube-wrap"),elemData=jQuery.extend(!0,{},eval("("+$ytpPlayer.attr("data-property")+")"));slide.slide_video=elemData.videoURL,slide.slide_video_audio=0!=$videoYoutubeWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="youtube"}data.slides.push(slide)}return data},_generateElementNewIDs=function(e,t,i){var o="block_"+i+"_"+t,r=e.children(".rexbuilder-block-data"),n=Rexbuilder_Util.createBlockID();e.attr("data-rexbuilder-block-id",n),r.attr("data-rexbuilder_block_id",n),e.attr("id",o),r.attr("data-id",o),r.attr("id",o+"-builder-data")},_fixCopiedElementSlider=function(e){if(e.hasClass("block-has-slider")){var t=e.find(".text-wrap"),i=e.attr("data-rexbuilder-block-id"),o=t.children('.rex-slider-wrap[data-rex-slider-active="true"]');t.children().remove();var r=e.parents(".rexpansive_section"),n=r.attr("data-rexlive-section-id"),d="undefined"!=typeof r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",l={sectionID:n,modelNumber:d,rexID:i},a=Rexbuilder_Util_Editor.createSliderData(o);Rexbuilder_Util_Editor.saveSliderOnDB(a,!0,i,l)}},_removeHandles=function(e){e.children(".ui-resizable-handle").each(function(e,t){$(t).remove()})},_removeScrollBar=function(e){if(1==Rexbuilder_Util_Editor.scrollbarsActive){var t=e.find(".grid-item-content"),i=$(document.createElement("div")),o=t.find(".rex-custom-scrollbar"),r=t.find(".text-wrap");i.addClass("rex-custom-scrollbar"),t.hasClass("rex-flexbox")&&i.addClass("rex-custom-position"),r.detach().appendTo(i),i.appendTo(o.parent()),o.remove(),t=void 0,i=void 0,o=void 0,r=void 0}},_removeTextEditor=function(e){var t,i,o,r=e.find(".text-wrap");0!=r.length&&r.hasClass("medium-editor-element")&&(t=r.html(),i=$(document.createElement("div")),o=r.attr("style"),i.appendTo(r.parent()),i.addClass("text-wrap"),r.hasClass("rex-content-resizable")&&i.addClass("rex-content-resizable"),r.remove(),i.attr("style",o),i.html(t),i.find(".text-editor-span-fix").remove(),i.find(".medium-insert-buttons").remove()),r=void 0,t=void 0,i=void 0,o=void 0},_getTextWrapLength=function(e){var t=e.find(".text-wrap"),i=0,o=0;if(t.hasClass("medium-editor-element")){var r=t.clone(!1);r.children(".medium-insert-buttons").remove(),i=r.text().trim().length,0!=i&&(t.hasClass("medium-editor-element")&&!t.hasClass("medium-editor-placeholder")||0!=t.parents(".pswp-item").length)&&(o=t.innerHeight())}else i=t.text().trim().length,0!=i&&(o=t.innerHeight());return 0==o?0:i},removeDeletedBlocks=function(e){e.children(".removing_block").each(function(){$(this).remove()})},endEditingElement=function(){var e=Rexbuilder_Util_Editor.editedGallery;clearTimeout(e.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.editedTextWrap.blur(),e.unFocusElement(Rexbuilder_Util_Editor.editedElement),Rexbuilder_Util_Editor.editingGallery=!1,Rexbuilder_Util_Editor.editedGallery=null,Rexbuilder_Util_Editor.editingElement=!1,Rexbuilder_Util_Editor.editedElement=null,Rexbuilder_Util_Editor.editedTextWrap=null},startEditingElement=function(){if(Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editingGallery){var e=Rexbuilder_Util_Editor.editedGallery,t=Rexbuilder_Util_Editor.editedElement;e.unFocusElementEditing(t),e.properties.elementStartingH=parseInt(t.attr("data-gs-height"))}},addWindowListeners=function(){function e(e){if(e.data.rexliveEvent){var t=jQuery.Event(e.data.eventName);t.settings={},jQuery.extend(t.settings,e.data),Rexbuilder_Util.$document.trigger(t)}}Rexbuilder_Util.$window.click(function(e){var t=$(e.target);Rexbuilder_Util_Editor.editingElement&&0==t.parents(".grid-stack-item").length&&0==t.parents(".media-frame").length&&!t.hasClass("grid-stack-item")&&(Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}),Rexbuilder_Util.$window.on("keydown",function(e){Rexbuilder_Util_Editor.editingGallery&&27==e.keyCode&&Rexbuilder_Util_Editor.endEditingElement()}),Rexbuilder_Util.$document.on("keydown",function(e){if(27===e.keyCode){var t={eventName:"rexlive:esc_pressed"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}),Rexbuilder_Util.$document.on("keydown",function(e){if((window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode){e.preventDefault();var t={eventName:"rexlive:savePageWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}),Rexbuilder_Util.$document.on("keydown",function(e){if("BODY"==e.target.nodeName&&(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode){e.preventDefault();var t={eventName:"rexlive:undoWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}),Rexbuilder_Util.$document.on("keydown",function(e){if("BODY"==e.target.nodeName&&((window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&89==e.keyCode)){e.preventDefault();var t={eventName:"rexlive:redoWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}),Rexbuilder_Util.$window.on("mousedown",function(e){Rexbuilder_Util_Editor.mouseDown=!0,Rexbuilder_Util_Editor.mouseUp=!1}),Rexbuilder_Util.$window.on("mouseup",function(e){Rexbuilder_Util_Editor.mouseDown=!1,Rexbuilder_Util_Editor.mouseUp=!0}),Rexbuilder_Util.$window[0].addEventListener("message",e,!1)},addDocumentListeners=function(){Rexbuilder_Util.$document.on("rexlive:changeLayout",function(e){var t=e.settings;undoStackArray=[],redoStackArray=[],Rexbuilder_Util.chosenLayoutData=jQuery.extend(!0,{},t.layoutData),Rexbuilder_Util_Editor.changedLayout=!0,Rexbuilder_Util_Editor.clickedLayoutID=t.selectedLayoutName,_fixToolsVisibility(t.selectedLayoutName)}),Rexbuilder_Util.$document.on("rexlive:startChangeLayout",function(e){_startLoading()}),Rexbuilder_Util.$document.on("rexlive:updateLayoutsDimensions",function(e){var t=e.settings.data_to_send;$("#layout-avaiable-dimensions").text(JSON.stringify(t.layouts)),t.updateHeights&&(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.updateGridsHeights(),Rexbuilder_Util.windowIsResizing=!1)}),Rexbuilder_Util.$document.on("rexlive:undo",function(e){if(undoStackArray.length>0){var t={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(t);var i=undoStackArray.pop();Rexbuilder_Dom_Util.performAction(i,!1),redoStackArray.push(i)}_sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:redo",function(e){if(redoStackArray.length>0){var t=redoStackArray.pop();Rexbuilder_Dom_Util.performAction(t,!0),undoStackArray.push(t)}_sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:updateSlider",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSliderStack(t.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:change_section_bg_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSectionBackgroundColorLive(t.data_to_send.sectionTarget,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_section_overlay_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSectionOverlayColorLive(t.data_to_send.sectionTarget,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_bg_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateBlockBackgroundColorLive(t.data_to_send.target,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_overlay_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateBlockOverlayColorLive(t.data_to_send.target,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:newSliderSavedOnDB",function(e){var t=e.settings;Rexbuilder_CreateBlocks.createSlider(t.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:dropChanges",function(e){Rexbuilder_Util_Editor.startLoading();var t=e.settings.data_to_send;_restorePageStartingState(t)}),Rexbuilder_Util.$document.on("rexlive:lockRows",function(e){_lockRows()}),Rexbuilder_Util.$document.on("rexlive:unlockRows",function(e){_releaseRows()}),Rexbuilder_Util.$document.on("rexlive:close_modal",function(e){_hideAllTools();var t=e.settings.blockID;"undefined"!=typeof t&&setTimeout(function(){$("#"+t).dblclick().addClass("item--me-focus").parents(".rexpansive_section").addClass("focusedRow block-editing")},0)}),Rexbuilder_Util.$document.on("rexlive:openCreateModelModal",function(e){var t=e.settings.data_to_send;$(".rexpansive_section[data-rexlive-section-id="+t.sectionTarget.sectionID+"]").find(".open-model").trigger("click")}),Rexbuilder_Util.$document.on("rexlive:importButton",function(e){Rexbuilder_Rexbutton.fixImportedButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateButtonLive",function(e){Rexbuilder_Rexbutton.updateButtonLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_button",function(e){Rexbuilder_Rexbutton.removeSeparateButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_button",function(e){Rexbuilder_Rexbutton.separateRexButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_button",function(e){Rexbuilder_Rexbutton.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:import_element",function(e){Rexbuilder_Rexelement.fixImportedElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_element",function(e){Rexbuilder_Rexelement.removeSeparateElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_element",function(e){Rexbuilder_Rexelement.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_element",function(e){Rexbuilder_Rexelement.separateRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:refresh_separated_rex_element",function(e){Rexbuilder_Rexelement.refreshSeparatedRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_add_field",function(e){Rexbuilder_Rexwpcf7.addField(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_form_span_data",function(e){Rexbuilder_Rexwpcf7.createFormSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_remove_form_span_data",function(e){Rexbuilder_Rexwpcf7.removeFormSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormLive",function(e){Rexbuilder_Rexwpcf7.updateFormLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormContentLive",function(e){Rexbuilder_Rexwpcf7.updateFormContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_column_content_span_data",function(e){Rexbuilder_Rexwpcf7.createColumnContentSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateColumnContentLive",function(e){Rexbuilder_Rexwpcf7.updateColumnContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:drag_drop_starded",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!0}),Rexbuilder_Util.$document.on("rexlive:drag_drop_ended",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!1}),Rexbuilder_Util.$document.on("rexlive:set_container_margins",function(e){Rexbuilder_Util_Editor.updateContainerMargins(e.settings.data_to_send)})},_updateContainerMargins=function(e){var t=Rexbuilder_Util.$rexContainer.parents(".rexbuilder-live-content").eq(0);e.distances.vals.top>0?t.addClass("fix-tools-first-row"):t.removeClass("fix-tools-first-row"),t.css("margin-top",e.distances.vals.top)},_hideAllTools=function(){Rexbuilder_Util_Editor.manageElement=!1,Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("focusedRow").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item").removeClass("focused"),Rexbuilder_Util.$rexContainer.find(".tool-button-floating--active").removeClass("tool-button-floating--active")},_pushAction=function(e,t,i,o){if("document"!==e)var r=getIDs(e);else var r={sectionID:"",targetID:"",modelNumber:-1};var n={sectionID:r.sectionID,targetID:r.targetID,modelNumber:r.modelNumber,actionName:t,performActionData:i,reverseActionData:o};undoStackArray.push(n),redoStackArray=[],_sendUndoRedoInformation()},_sendUndoRedoInformation=function(){var e={eventName:"rexlive:undoRedoStackChange",stacks:{undo:undoStackArray.length,redo:redoStackArray.length}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},getIDs=function(e){var t={sectionID:"",targetID:"",modelNumber:""},i=e.is("section")?e:e.parents(".rexpansive_section"),o=e.parents(".grid-stack-item");return t.sectionID=i.attr("data-rexlive-section-id"),i.hasClass("rex-model-section")&&(t.modelNumber=i.attr("data-rexlive-model-number")),0!=o.length?t.targetID=o.attr("data-rexbuilder-block-id"):t.targetID="self",t},_getStacks=function(){var e={undo:undoStackArray,redo:redoStackArray};return e},sendParentIframeMessage=function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),window.parent.postMessage(t,"*")},_addCustomClass=function(e,t){if(""!=e){_removeCustomClass(e,t);var i="";i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),i+=" "+e,i=i.trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i)}},_removeCustomClass=function(e,t){if(""!=e){var i="";i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),e=_escapeRegExp(e);var o="(\\s"+e+"\\s|^"+e+"\\s|\\s"+e+"$|^"+e+"$)",r=new RegExp(o,"g");i=i.replace(r," "),i=i.trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i)}},_escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},_fixCustomStyleElement=function(){if(0==Rexbuilder_Util_Editor.$styleElement.length){var e="",t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="rexpansive-builder-style-inline-css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}},_saveSliderOnDB=function(e,t,i,o){var r={eventName:"rexlive:uploadSliderFromLive",sliderInfo:{slider:e,newSlider:t,blockID:i,target:o}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)},_getElementsPhotoswipe=function(e){var t=[];return e.children(".grid-stack-item:not(.removing_block)").each(function(e,i){var o=$(i),r=o.children(".rexbuilder-block-data"),n={$data:r,photoswipe:!1};"true"==r.attr("data-photoswipe").toString()&&(n.photoswipe=!0),t.push(n)}),t},_fixToolsVisibility=function(e){"default"==e?(Rexbuilder_Util.$rexContainer.removeClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.parent().removeClass("rex-hide-responsive-tools")):(Rexbuilder_Util.$rexContainer.parent().addClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.addClass("rex-hide-responsive-tools"))},_startLoading=function(e){e="undefined"==typeof e||e,e&&(Rexbuilder_Util.$rexContainer.parent().addClass("rexbuilder-live-content--loading"),Rexbuilder_Util.$rexContainer.addClass("fade-out").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","0").removeClass("fade-out");var e={eventName:"rexlive:animateContentsFadeOutEnd"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}))},_endLoading=function(e){e="undefined"==typeof e||e,e&&Rexbuilder_Util.$rexContainer.addClass("fade-in").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","").removeClass("fade-in"),Rexbuilder_Util.$rexContainer.parent().removeClass("rexbuilder-live-content--loading");var e={eventName:"rexlive:animateContentsEnd"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)})},_clearSectionsEdited=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){var i=$(t);i.attr("data-rexlive-section-edited",!1),i.find(".grid-stack-row").attr("data-rexlive-layout-changed",!1),i.find(".grid-stack-item").attr("data-rexlive-element-edited",!1)})},_restorePageStartingState=function(e){if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")){var t=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0);Rexbuilder_Dom_Util.updateLockEditModel(t,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model")}var i={eventName:"rexlive:restoreStateEnded",buttonData:e.buttonData};Rexbuilder_Util_Editor.sendParentIframeMessage(i)},_lockRows=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){var i=$(t);i.wrap("<div></div>"),i.parent().attr("style","position:relative;"),i.parent().append(tmpl("tmpl-div-lock-section",{}))})},_releaseRows=function(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(e,t){var i=$(t);i.siblings().each(function(e,t){var i=$(t);i.hasClass("rexpansive-lock-section")&&i.remove()}),i.unwrap()})},_lockRowsLight=function(e){e=void 0!==typeof e?e:null;var t=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");null!==e&&t.not(e),t.addClass("rexpansive-lock-section--light")},_releaseRowsLight=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").removeClass("rexpansive-lock-section--light").removeClass("rexpansive-lock-section--overlay"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item--drag-to-row").removeClass("grid-stack-item--drag-to-row"),Rexbuilder_Util.$rexContainer.find(".drag-to-section-simulator").remove()},_getGradientSafeValue=function(e){for(var t,i=document.createElement("div"),o=i.style,r=Rexbuilder_Util_Editor.getPrefixedValues(e),n=0;n<r.length&&(t=r[n],o.backgroundImage=t,o.backgroundImage!=t);n++);return o.backgroundImage},_getPrefixedValues=function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],i=[],o=0;o<t.length;o++)i.push(t[o]+e);return i},_synchGradient=function(){$(".text-gradient").each(function(e,t){var i=t.getAttribute("data-gradient");i=_getGradientSafeValue(i);var o=$(t);o.css("background",i),o.css("-webkit-background-clip","text"),o.css("-webkit-text-fill-color","transparent")})},_tooltips=function(){tippyCollection=tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},noop=function(){},_checkVisibleRow=function(){function e(){var e,t,i=$(window).height();e=.8*i,t=.3*i;var o=null;return Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(i,r){var n=$(r),d=n.offset().top,l=n.height(),a=$(window).scrollTop();if(d-e<a&&d+l-t>a)return o=r,!1}),o}Rexbuilder_Util_Editor.visibleRow=e();var t={};if(null!==Rexbuilder_Util_Editor.visibleRow){var i=$(Rexbuilder_Util_Editor.visibleRow).find(".section-data")[0];t=_rowAttrsObj(i),t.collapse=Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rex-collapse-grid")}Rexbuilder_Util_Editor.visibleRowInfo={sectionID:null!==Rexbuilder_Util_Editor.visibleRow?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-section-id"):null,modelNumber:null!==Rexbuilder_Util_Editor.visibleRow?"undefined"!=typeof Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number"):"":null,modelEditing:null!==Rexbuilder_Util_Editor.visibleRow?"undefined"!=typeof Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing"):"":null};var o={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:t};Rexbuilder_Util_Editor.sendParentIframeMessage(o),$(Rexbuilder_Util_Editor.visibleRow).addClass("highLightRow");var r=!1,n=!1;Rexbuilder_Util.$window.on("scroll",function(e){r=!0,n=!0}),setInterval(function(){if(r){var t=e();null!==t&&Rexbuilder_Util_Editor.visibleRow!==t&&_traceVisibileRow(t),r=!1}},250),setInterval(function(){if(n){n=!1;var e,t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.focusedRow"),o=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();t.length>0?_isElVisible(t)?t.is(o)?e={eventName:"rexlive:hideTopFastTools"}:i.length>0?t.is(i)&&(e={eventName:"rexlive:hideTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:i.length>0?t.is(i)&&(e={eventName:"rexlive:viewTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:e={eventName:"rexlive:hideTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(e)}},250);var d;Rexbuilder_Util.$rexContainer.on("mouseenter",".rexpansive_section",function(e){var t,i=$(this);i.hasClass("highLightRow")?t=_isElVisible(i)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"}:(d=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),_traceVisibileRow(this),t=_isElVisible(i)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"}),Rexbuilder_Util_Editor.sendParentIframeMessage(t)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rexpansive_section",function(e){var t=$(this),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();if(!t.is(i)){var o;o={eventName:"rexlive:viewTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(o)}})},_rowAttrsObj=function(e){var t={};if("undefined"!=typeof e)for(var i=e.attributes,o=0;o<i.length;o++)"class"!==i[o].name&&"style"!==i[o].name&&(t[i[o].name.replace("data-","")]=i[o].value);return t},_traceVisibileRow=function(e){var t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("highLightRow"),i=t.filter(".focusedRow"),o=$(e);if(0==i.length||o.is(i)){o.addClass("highLightRow"),Rexbuilder_Util_Editor.visibleRow=e,Rexbuilder_Util_Editor.visibleRowInfo={sectionID:e.getAttribute("data-rexlive-section-id"),modelNumber:"undefined"!=typeof e.getAttribute("data-rexlive-model-number")?e.getAttribute("data-rexlive-model-number"):"",modelEditing:"undefined"!=typeof e.getAttribute("data-rexlive-model-editing")?e.getAttribute("data-rexlive-model-editing"):""};var r={},n=o.find(".section-data")[0];r=_rowAttrsObj(n),r.collapse=e.getAttribute("data-rex-collapse-grid");var d={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:r};Rexbuilder_Util_Editor.sendParentIframeMessage(d)}},_isElVisible=function(e,t,i){t=void 0===typeof t?t:0,i=void 0===typeof i?i:0;var o=e.offset().top,r=e.height(),n=$(window).scrollTop();return!(o+t<n&&o+r+i>n)},_builderEdited=function(e){e="undefined"!=typeof e&&e;var t={eventName:"rexlive:edited",modelEdited:e};Rexbuilder_Util_Editor.sendParentIframeMessage(t)},_getMousePosition=function(e,t){var i={};if("undefined"!=typeof e.clientX&&"undefined"!=typeof e.clientY&&"undefined"!=typeof e.offsetX&&"undefined"!=typeof e.offsetY&&"undefined"!=typeof t){var o=e.target.getBoundingClientRect();i={x:o.left+t.offset.w/2,y:o.top+Rexbuilder_Util_Editor.mousePositionFrameYOffset}}else null!==Rexbuilder_Util_Editor.mousePosition&&null!==Rexbuilder_Util_Editor.mouseClickObject?(i={x:Rexbuilder_Util_Editor.mousePosition.client.x-Rexbuilder_Util_Editor.mousePosition.offset.x+Rexbuilder_Util_Editor.mouseClickObject.offset.w/2,y:Rexbuilder_Util_Editor.mousePosition.client.y-Rexbuilder_Util_Editor.mousePosition.offset.y+Rexbuilder_Util_Editor.mousePositionFrameYOffset},Rexbuilder_Util_Editor.mousePosition=null,Rexbuilder_Util_Editor.mouseClickObject=null):i={x:Rexbuilder_Util_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Editor.viewportMeasurement.height/2};return i},_checkNewEmptyPage=function(){var e=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(removing_section)");"1"==e.length&&e.hasClass("empty-section")?(Rexbuilder_Util.$rexContainer.parent().addClass("add-new-section--hide"),e.addClass("activeRowTools")):Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide")},_updateLinks=function(){},_updateModelSectionTools=function(e,t){var i=Rexbuilder_Util_Editor.rowAttrsObj(t[0]),o={idImage:"undefined"!=typeof i.id_image_bg_section?i.id_image_bg_section:"",urlImage:"undefined"!=typeof i.image_bg_section?i.image_bg_section:""},r="undefined"!=typeof i.color_bg_section?i.color_bg_section:"",n={active:"undefined"!=typeof i.row_overlay_active?i.row_overlay_active:"",color:"undefined"!=typeof i.row_overlay_color?i.row_overlay_color:""},d={typeVideo:""};"undefined"!=typeof i.video_mp4_url&&""!=i.video_mp4_url?d.typeVideo="mp4":"undefined"!=typeof i.video_bg_url_vimeo_section&&""!=i.video_bg_url_vimeo_section?d.typeVideo="vimeo":"undefined"!=typeof i.video_bg_url_section&&""!=i.video_bg_url_section&&(d.typeVideo="youtube"),Rexbuilder_Section_Editor.updateRowTools(e),Rexbuilder_Section_Editor.updateSectionDimensionTool(e,i),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,i),""!==o.idImage?Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,o):Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e),-1===r.indexOf("gradient")?Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,r):Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,r),-1===n.color.indexOf("gradient")?(Rexbuilder_Dom_Util.updateSectionOverlay(e,n),Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,n)):(Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,n),Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,n)),Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,d),Rexbuilder_Block_Editor.updateBlockToolsOnRow(e),e.find(".perfect-grid-item").each(function(e,t){var i=$(t);Rexbuilder_Util_Editor.updateModelBlocksTools(i,i.find(".rexbuilder-block-data"))})},_updateModelBlocksTools=function(e,t){Rexbuilder_Util_Editor.blockAttrsObj(t[0]);e.removeClass("has-rs-animation")},addDnDEvents=function(){Rexbuilder_Util.$rexContainer.on("dragenter",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||e.stopPropagation()}),Rexbuilder_Util.$rexContainer.on("dragover",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.preventDefault(),e.stopPropagation())}),Rexbuilder_Util.$rexContainer.on("drop",function(e){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){e.preventDefault(),e.stopPropagation();var t;t=e.isTrigger?triggerEvent.originalEvent:e.originalEvent;var i=t.dataTransfer.getData("text/plain");try{i=void 0!==typeof i?JSON.parse(i):null}catch(e){i=null}if(i){var o,r,n=document.elementFromPoint(e.clientX,e.clientY),d=$(n);o=""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+i.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]').find('div [data-rexbuilder-block-id="'+i.rexID+'"]'),r=o.parents(".grid-stack-row"),d=d.parents(".rexpansive_section").find(".grid-stack-row"),d.length>0&&!d.is(r)&&(Rexbuilder_CreateBlocks.moveBlockToOtherSection(o,d),o.find(".builder-delete-block").first().trigger("click"))}}})},init=function(){this.elementIsResizing=!1,this.elementIsDragging=!1,this.sectionCopying=!1,this.blockCopying=!1,this.editingGallery=!1,this.editingElement=!1,this.manageElement=!1,this.editedGallery=null,this.editedElement=null,this.editedTextWrap=null,this.activateElementFocus=!1,this.mouseDownEvent=null,this.mouseUpEvent=null,this.mouseDown=!1,this.mouseUp=!1,this.mousePosition=null,this.mouseClickObject=null,this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexbuilder_Util.viewport(),this.elementDraggingTriggered=!1,this.focusedElement=null,this.hasResized=!1,this.changedLayout=!1,this.clickedLayoutID="",this.undoActive=!1,this.redoActive=!1,this.updatingGridstack=!1,this.addingNewBlocks=!1,this.removingBlocks=!1,this.updatingImageBg=!1,this.updatingPaddingBlock=!1,this.updatingCollapsedGrid=!1,this.updatingSectionWidth=!1,this.updatingSectionLayout=!1,this.savingPage=!1,this.savingModel=!1,this.openingModel=!1,this.insertingModel=!1,this.visibleRow=null,this.visibleRowInfo={},this.scrollbarsActive=!1,this.dragAndDropFromParent=!1,undoStackArray=[],redoStackArray=[],this.needToSave=!0,this.$styleElement=$("#rexpansive-builder-style-inline-css")},load=function(){_tooltips(),_checkVisibleRow(),_checkNewEmptyPage(),_fixCustomStyleElement()};return{init:init,load:load,removeTextEditor:_removeTextEditor,removeHandles:_removeHandles,generateElementNewIDs:_generateElementNewIDs,fixCopiedElementSlider:_fixCopiedElementSlider,removeDeletedBlocks:removeDeletedBlocks,addWindowListeners:addWindowListeners,addDocumentListeners:addDocumentListeners,addDnDEvents:addDnDEvents,updateModelSectionTools:_updateModelSectionTools,updateModelBlocksTools:_updateModelBlocksTools,endEditingElement:endEditingElement,startEditingElement:startEditingElement,setEndOfContenteditable:setEndOfContenteditable,sendParentIframeMessage:sendParentIframeMessage,addCustomClass:_addCustomClass,removeCustomClass:_removeCustomClass,escapeRegExp:_escapeRegExp,
pushAction:_pushAction,getIDs:getIDs,getStacks:_getStacks,createSliderData:_createSliderData,saveSliderOnDB:_saveSliderOnDB,getTextWrapLength:_getTextWrapLength,getElementsPhotoswipe:_getElementsPhotoswipe,updateLayoutsAvaiable:_updateLayoutsAvaiable,createDefaultCustomLayouts:_createDefaultCustomLayouts,fixToolsVisibility:_fixToolsVisibility,rowAttrsObj:_rowAttrsObj,blockAttrsObj:_rowAttrsObj,clearSectionsEdited:_clearSectionsEdited,startLoading:_startLoading,endLoading:_endLoading,builderEdited:_builderEdited,launchTooltips:_tooltips,getMousePosition:_getMousePosition,hideAllTools:_hideAllTools,lockRows:_lockRows,lockRowsLight:_lockRowsLight,releaseRows:_releaseRows,releaseRowsLight:_releaseRowsLight,getGradientSafeValue:_getGradientSafeValue,getPrefixedValues:_getPrefixedValues,synchGradient:_synchGradient,updateBlockContainerHeight:_updateBlockContainerHeight,updateContainerMargins:_updateContainerMargins}}(jQuery);
var Rexbuilder_Dom_Util=function($){"use strict";function htmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}var _updateSlider=function(e){var t=e.textWrap,i=e.sliderNumberToActive,a=t.children('.rex-slider-wrap:not([data-rex-slider-number="'+e.sliderNumberToActive+'"])');a.each(function(e,t){var i=$(t);t.style.display="none",t.setAttribute("data-rex-slider-active",!1),RexSlider.destroySliderPlugins(i)});var o=t.children('.rex-slider-wrap[data-rex-slider-number="'+i+'"]');if(0==o.length){var r=e.newSliderData;if("undefined"!=typeof r){var d=t.parents(".grid-stack-item");Rexbuilder_CreateBlocks.createSlider(e.newSliderData,d,i)}}else{var l=o[0];l.style.display="",RexSlider.initSlider(o)}},_updateSliderStack=function(e){var t;t=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]');var i=t.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]'),a=i.find(".text-wrap"),o=a.find('.rex-slider-wrap[data-rex-slider-number="'+e.target.sliderNumber+'"]'),r={textWrap:a,sliderNumberToActive:parseInt(o.attr("data-rex-slider-number"))};Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1;var d={textWrap:a,sliderNumberToActive:Rexbuilder_Dom_Util.lastSliderNumber,newSliderData:e};_updateSlider(d),Rexbuilder_Util_Editor.pushAction(t,"updateSlider",d,r)},_updateRow=function(e,t,i,a){var o=parseInt(a.gutter),r=parseInt(a.top),d=parseInt(a.right),l=parseInt(a.bottom),n=parseInt(a.left),u=20,c={gutter:isNaN(o)?u:o,top:isNaN(r)?u:r,right:isNaN(d)?u:d,bottom:isNaN(l)?u:l,left:isNaN(n)?u:n},s=c.gutter,p=c.top,g=c.right,_=c.bottom,m=c.left,v="undefined"==typeof a.layout?"fixed":a.layout,b="undefined"!=typeof a.full_height&&"masonry"!=v&&a.full_height,x="undefined"==typeof a.section_width?"100%":""+a.section_width,k="undefined"==typeof a.dimension?"full":a.dimension,f=!Rexbuilder_Util.editorMode&&a.collapse_grid,y=i.parent(),h=y[0];"full"==k?(y.removeClass("center-disposition"),y.addClass("full-disposition"),h.style.maxWidth="100%"):(y.removeClass("full-disposition"),y.addClass("center-disposition"),h.style.maxWidth=x),i.attr("data-separator",s),i.attr("data-row-separator-top",p),i.attr("data-row-separator-right",g),i.attr("data-row-separator-bottom",_),i.attr("data-row-separator-left",m),i.attr("data-layout",v),i.attr("data-full-height",b),t.attr("data-section_width",x),t.attr("data-dimension",k),t.attr("data-responsive_collapse",f),e.attr("data-rex-collapse-grid",f);var S=i.data();if(void 0!==S){var B=S.plugin_perfectGridGalleryEditor;void 0!==B&&B.updateGridSettingsChangeLayout(a)}Rexbuilder_Util.editorMode&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(e,a),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,a))},_updateImageBG=function(e,t){if(e.hasClass("rexpansive_section")){var i=e.children(".section-data");""==t.idImage||"true"!=t.active.toString()?_resetImageSection(e,i):_updateImageSection(e,i,t)}else if(e.hasClass("grid-item-content")){var a=e.parents(".grid-stack-item"),o=a.children(".rexbuilder-block-data");""==t.idImage||"true"!=t.active.toString()?_resetImageBlock(e,o,t):_updateImageBlock(e,o,t)}},_updateImageSection=function(e,t,i){if("undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,i),i.idImage!=parseInt(t.attr("data-id_image_bg_section"))){var a=e[0];Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode?a.setAttribute("data-src",i.urlImage):a.style.backgroundImage="url("+i.urlImage+")",a.setAttribute("data-background_image_width",i.width),a.setAttribute("data-background_image_height",i.height),t.attr("data-image_size",i.image_size),t.attr("data-id_image_bg_section",i.idImage),t.attr("data-image_bg_section",i.urlImage),t.attr("data-image_bg_section_active",i.active),Rexbuilder_Live_Utilities.activeAddSection(e)}},_updateImageBlock=function(e,t,i){t.attr("data-id_image_bg_block",i.idImage),t.attr("data-type_bg_block",i.typeBGimage),t.attr("data-image_bg_block",i.urlImage),t.attr("data-image_size",i.sizeImage),t.attr("data-photoswipe",i.photoswipe),t.attr("data-image_bg_elem_active",i.active),"full"==i.typeBGimage?_addImageFullBgBlock(e,i):"natural"==i.typeBGimage&&_addImageNaturalBgBlock(e,i),e.attr("data-background_image_width",i.width),e.attr("data-background_image_height",i.height),"undefined"!=typeof Rexbuilder_Block_Editor&&(Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(e,i),Rexbuilder_Block_Editor.updateBlockImagePositionTool(e,i))},_addImageNaturalBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".responsive-block-overlay");if(0==i.length){var o=document.createElement("div");i=$(o),i.addClass("rex-image-wrapper"),i.prependTo(a[0])}else i.hasClass("full-image-background")&&(i.detach().prependTo(a[0]),i.removeClass("full-image-background"));var r=i[0];i.addClass("natural-image-background"),Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode?r.setAttribute("data-src",t.urlImage):r.style.backgroundImage="url("+t.urlImage+")";var d=e.parents(".grid-stack-item"),l=d[0];l&&(l.offsetWidth<t.width?i.addClass("small-width"):i.removeClass("small-width"))},_removeImageBlock=function(e){var t=e.find(".rex-image-wrapper");0!=t.length&&t.remove()},_addImageFullBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".responsive-block-overlay");if(0==i.length){var o=document.createElement("div");i=$(o),i.addClass("rex-image-wrapper"),i.insertBefore(a[0])}else i.hasClass("natural-image-background")&&(i.detach().insertBefore(a[0]),i.removeClass("natural-image-background"),i.removeClass("small-width"));var r=i[0];i.addClass("full-image-background"),Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode?r.setAttribute("data-src",t.urlImage):r.style.backgroundImage="url("+t.urlImage+")"},_resetImageSection=function(e,t){var i=e[0];t.attr("data-image_bg_section",""),t.attr("data-id_image_bg_section",""),t.data("data-image_size",""),i.setAttribute("data-background_image_width",""),i.setAttribute("data-background_image_height",""),i.style.backgroundImage="","undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e)},_resetImageBlock=function(e,t,i){t.attr("data-id_image_bg_block",""),t.attr("data-type_bg_block",""),t.attr("data-image_bg_block",""),t.attr("data-image_size",""),e.parents(".grid-stack-item").hasClass("block-has-slider")?t.attr("data-photoswipe",i.photoswipe):t.attr("data-photoswipe",""),t.attr("data-image_bg_elem_active",""),_removeImageBlock(e),e.attr("data-background_image_width",""),e.attr("data-background_image_height","")},_removeYoutubeVideo=function($target,removeFromDom){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio");if(0!=$ytpWrapper.length)if(removeFromDom="undefined"==typeof removeFromDom||removeFromDom,$target.removeClass("youtube-player"),removeFromDom)void 0!==$ytpWrapper.YTPGetPlayer()&&$ytpWrapper.YTPPlayerDestroy(),$ytpWrapper.remove(),0!=$toggleAudio.length&&$toggleAudio.remove();else{var videoID;if(void 0!==$ytpWrapper.YTPGetPlayer())videoID=$ytpWrapper.YTPGetVideoID(),$ytpWrapper.YTPPlayerDestroy();else{var elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")"));videoID=elemData.videoURL}var wasSlide=0!=$ytpWrapper.parents(".rex-slider-element").length,hadAudio=0!=$toggleAudio.length;if(wasSlide&&(hadAudio=0!=$ytpWrapper.children(".rex-video-toggle-audio").length),$ytpWrapper.remove(),tmpl.arg="video",$target.prepend(tmpl("tmpl-video-youtube",{url:videoID,audio:!1})),hadAudio&&wasSlide){var $toggle=$(tmpl("tmpl-video-toggle-audio"));$toggle.addClass("removing-toggle-audio"),$toggle.appendTo($target.children(".rex-youtube-wrap")[0])}}},_removeVimeoVideo=function(e,t){var i=e.children(".rex-video-vimeo-wrap"),a=e.children(".rex-video-toggle-audio");if(0!=i.length){var o=i.children("iframe")[0];if(t="undefined"==typeof t||t,e.removeClass("vimeo-player"),t)VimeoVideo.removePlayer(o),i.remove(),0!=a.length&&a.remove();else{var r=VimeoVideo.findVideo(o);r&&r.unload(),0!=a.length&&a.addClass("removing-toggle-audio")}}},_removeMp4Video=function(e,t){var i=e.children(".rex-video-wrap"),a=e.children(".rex-video-toggle-audio");if(0!=i.length){t="undefined"==typeof t||t;var o=i.find("video")[0];o.pause(),o.currentTime=0,e.removeClass("mp4-player"),t?(i.remove(),0!=a.length&&a.remove()):(i.addClass("removing-video-mp4"),0!=a.length&&a.addClass("removing-toggle-audio"))}},_addMp4Video=function(e,t,i){var a=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio");e.addClass("mp4-player");var r=a.find("source"),d=Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode?r.attr("data-src"):r.attr("src");if(0!=a.length&&d!=t.linkMp4||0==a.length){_removeMp4Video(e,!0),tmpl.arg="video";var l=tmpl("tmpl-video-mp4",{url:t.linkMp4,width:t.width,height:t.height,fast_load:Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode});if(e.is("section")){var n="";n=Rexbuilder_Util.editorMode?".section-toolBox":".section-data",e.children(n).after(l)}else{var u=e.find(".rexlive-block-drag-handle");0==u.length?e.prepend(l):u.after(l)}}else 0!=a.length&&(a.removeClass("removing-video-mp4"),Rexbuilder_Util.fast_load&&!Rexbuilder_Util.editorMode||a.find("video")[0].play());0==o.length?i&&e.append(tmpl("tmpl-video-toggle-audio")):i?o.removeClass("removing-toggle-audio"):o.remove()},fixVideoProportion=function(e){var t=e.getElementsByClassName("rex-video-wrap");t.length>0&&(t[0].children[0].style.maxWidth=_findVideoMaxWidth(t[0]))},_findVideoMaxWidth=function(e){var t,i,a,o;a=e.getAttribute("data-rex-video-width"),o=e.getAttribute("data-rex-video-height");var r="100%";return t=e.offsetWidth,i=e.offsetHeight,a/o>t/i&&(r=i*a/o*100/t,r+="%"),r},_addYoutubeVideo=function($target,urlYoutube,hasAudio){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio");if(0!=$ytpWrapper.length){var elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),activeUrl=elemData.videoURL,videoID=Rexbuilder_Util.getYoutubeID(activeUrl),urlID=Rexbuilder_Util.getYoutubeID(urlYoutube);videoID!=urlID?void 0===$ytpWrapper.YTPGetPlayer()?($ytpWrapper.attr("data-property","{videoURL:'"+urlYoutube+"',containment:'self',startAt:0,mute:'"+!hasAudio+"',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"),$ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer()):(_removeYoutubeVideo($target,!0),setTimeout(function(){tmpl.arg="video",$target.prepend(tmpl("tmpl-video-youtube",{url:urlYoutube,audio:!hasAudio})),$target.children(".rex-youtube-wrap").YTPlayer();var e=$target.children(".rex-video-toggle-audio");0==e.length?hasAudio&&$target.append(tmpl("tmpl-video-toggle-audio")):hasAudio?e.removeClass("removing-toggle-audio"):e.remove()},1e3,$target,urlYoutube,hasAudio)):void 0===$ytpWrapper.YTPGetPlayer()&&($ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer())}else tmpl.arg="video",$target.prepend(tmpl("tmpl-video-youtube",{url:urlYoutube,audio:!hasAudio})),$target.children(".rex-youtube-wrap").YTPlayer();$target.addClass("youtube-player"),0==$toggleAudio.length?hasAudio&&$target.append(tmpl("tmpl-video-toggle-audio")):hasAudio?$toggleAudio.removeClass("removing-toggle-audio"):$toggleAudio.remove()},_addVimeoVideo=function(e,t,i){var a=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");if(e.addClass("vimeo-player"),""==t)_removeVimeoVideo(e,!0);else if(0!=a.length&&a.children("iframe").attr("src").split("?")[0]!=t||0==a.length){_removeVimeoVideo(e,!0),tmpl.arg="video",t+="?autoplay=1&loop=1&title=0&byline=0&portrait=0&autopause=0&muted="+("true"==i.toString()?"0":"1")+"&background=1",e.prepend(tmpl("tmpl-video-vimeo",{url:t}));var r=e.children(".rex-video-vimeo-wrap").find("iframe")[0];VimeoVideo.addPlayer("1",r)}else if(0!=a.length){var d=VimeoVideo.findVideo(a.find("iframe")[0]);null!=d&&d.play()}0==o.length?i&&e.append(tmpl("tmpl-video-toggle-audio")):i?o.removeClass("removing-toggle-audio"):o.remove()},_updateVideos=function(e,t){var i="";if(e.hasClass("rexpansive_section")){var a=e.children(".section-data");i="section"}else if(e.hasClass("grid-item-content")){var o=e.parents(".grid-stack-item").children(".rexbuilder-block-data");i="block"}else{if(!e.hasClass("rex-slider-video-wrapper"))return;i="slide"}var r=t.typeVideo;""==r?(_removeMp4Video(e,!0),_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0)):"mp4"==r?(_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0),_addMp4Video(e,t.mp4Data,t.audio)):"vimeo"==r?(_removeYoutubeVideo(e,!0),_removeMp4Video(e,!0),_addVimeoVideo(e,t.vimeoUrl,t.audio)):"youtube"==r&&(_removeVimeoVideo(e,!0),_removeMp4Video(e,!0),_addYoutubeVideo(e,t.youtubeUrl,t.audio)),"section"==i?(a.attr("data-video_bg_id_section",t.mp4Data.idMp4),a.attr("data-video_mp4_url",t.mp4Data.linkMp4),a.attr("data-video_bg_url_section",t.youtubeUrl),a.attr("data-video_bg_url_vimeo_section",t.vimeoUrl),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,t),Rexbuilder_Live_Utilities.activeAddSection(e)):"block"==i&&(o.attr("data-video_bg_id",t.mp4Data.idMp4),o.attr("data-video_mp4_url",t.mp4Data.linkMp4),o.attr("data-video_bg_url",t.youtubeUrl),o.attr("data-video_bg_url_vimeo",t.vimeoUrl),o.attr("data-video_has_audio",t.audio))},_updateBlockPaddings=function(e,t){var i=e.children(".rexbuilder-block-data");i.attr("data-block_padding",Rexbuilder_Util.paddingsToString(t));var a=e.find(".text-wrap");if(0!=a.length){var o=a[0];o.style.paddingTop=""+t.top+t.type,o.style.paddingRight=""+t.right+t.type,o.style.paddingBottom=""+t.bottom+t.type,o.style.paddingLeft=""+t.left+t.type}},_updateBlocksLayout=function(e){var t,i,a,o,r,d,l=e.blocks,n=e.gridstackInstance;if(l.length>0){var u=$(e.blocks[0].elem).parents(".rexpansive_section");for(Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.batchUpdate(),t=0;t<l.length;t++)i=l[t].x,a=l[t].y,o=l[t].w,r=l[t].h,d=l[t].elem,n.update(d,i,a,o,r);Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.commit(),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,u[0]),1500)}},_collapseGrid=function(e,t,i,a){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0,t?e.collapseElementsProperties():e.removeCollapseElementsProperties(),e.updateGridLayoutCollapse(a),_updateBlocksLayout(i),setTimeout(function(){Rexbuilder_Util_Editor.updatingCollapsedGrid=!1,e._fixImagesDimension(),e._createFirstReverseStack(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers()},200)},_updateRemovingBlock=function(e,t,i){if(t?(i.removeBlock(e),Rexbuilder_Util.stopBlockVideos(e)):(i.reAddBlock(e),Rexbuilder_Util.playBlockVideos(e)),0==i.properties.numberBlocksVisibileOnGrid)e.parents(".rexpansive_section").addClass("empty-section");else{var a=e.parents(".rexpansive_section");a.removeClass("empty-section"),Rexbuilder_Live_Utilities.activeAddSection(a)}},_updateSectionName=function(e,t){if(null!==t){e.attr("data-rexlive-section-name",t);var i=t.replace(/ /gm,"");Rex_Navigator.updateNavigatorItem(e,i,t)}},_fixSectionDomOrder=function(e,t,i){var a,o,r,d,l=[];t="undefined"!=typeof t&&t;var n,u=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),c=u.length;for(n=0;n<c;n++){o=$(u[n]);var s={rexID:u[n].getAttribute("data-rexlive-section-id"),section_is_model:Rexbuilder_Util.hasClass(u[n],"rex-model-section"),section_model_id:u[n].getAttribute("data-rexlive-model-id"),section_model_number:u[n].getAttribute("data-rexlive-model-number"),$section:o.detach()};l.push(s)}for(r=0;r<e.length;r++){for(d=0;d<l.length;d++)if(l[d].rexID==e[r].rexID){if(!l[d].section_is_model){a=l[d].$section;break}if(l[d].section_model_number==e[r].modelNumber){a=l[d].$section;break}}Rexbuilder_Util.$rexContainer.append(a),l.splice(d,1)}for(d=0;d<l.length;d++)Rexbuilder_Util.$rexContainer.append(l[d].$section);"default"==Rexbuilder_Util.activeLayout&&(Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(e),"undefined"!=typeof i&&Rexbuilder_Util.updateSectionOrderCustomLayouts(i,e))},_enablePhotoswipeAllBlocksSection=function(e){var t=e.find(".grid-stack-row");t.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var i=$(t).children(".rexbuilder-block-data"),a=Rexbuilder_Util_Editor.getTextWrapLength($(t));""!=i.attr("data-image_bg_block")&&0==a&&i.attr("data-photoswipe",!0)})},_removePhotoswipeAllBlocksSection=function(e){var t=e.find(".grid-stack-row");t.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var i=$(t).children(".rexbuilder-block-data");i.attr("data-photoswipe",!1)})},_updateSectionPhotoswipe=function(e){for(var t=0;t<e.length;t++)e[t].$data.attr("data-photoswipe",e[t].photoswipe)},_updateCustomClasses=function(e,t){var i,a="";e.is("section")?(i=e.children(".section-data"),a=i.attr("data-custom_classes")):(i=e.children(".rexbuilder-block-data"),a=i.attr("data-block_custom_class")),"undefined"==typeof a&&(a=""),a=a.trim();for(var o=a.split(/\s+/),r=0;r<o.length;r++)Rexbuilder_Util_Editor.removeCustomClass(o[r],i),e.removeClass(o[r]);for(var r=0;r<t.length;r++)Rexbuilder_Util_Editor.addCustomClass(t[r],i),e.addClass(t[r])},_updateBlockUrl=function(e,t){var i=e.children(".rexbuilder-block-data");i.attr("data-linkurl",t)},_updateFlexPostition=function(e,t){if(!e.hasClass("block-has-slider")){var i="rex-flex-top rex-flex-middle rex-flex-bottom rex-flex-left rex-flex-center rex-flex-right";e.removeClass(i);var a=e.children(".rexbuilder-block-data");a.attr("data-block_flex_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-"+t.x),e.addClass("rex-flex-"+t.y),a.attr("data-block_flex_position",t.x+" "+t.y))}},_updateImageFlexPostition=function(e,t){if(!e.hasClass("block-has-slider")){var i="rex-flex-img-top rex-flex-img-middle rex-flex-img-bottom rex-flex-img-left rex-flex-img-center rex-flex-img-right";e.removeClass(i);var a=e.children(".rexbuilder-block-data");a.attr("data-block_flex_img_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-img-"+t.x),e.addClass("rex-flex-img-"+t.y),a.attr("data-block_flex_img_position",t.x+" "+t.y))}},_updateCustomCSS=function(e){var t=document.getElementById("rexpansive-builder-style-inline-css");t&&(t.textContent=e)},_updateSectionVideoBackground=function(e,t){_updateVideos(e,t)},_updateSectionBackgroundColorLive=function(e,t){var i;""!=e.modelNumber?(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t)):(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t)),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorToolLive(i,t)},_updateSectionBackgroundColor=function(e,t){var i=e.children(".section-data"),a=e[0];-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t.color,i.attr("data-color_bg_section",t.color),i.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,t.color),Rexbuilder_Live_Utilities.activeAddSection(e)},_updateSectionBackgroundGradient=function(e,t){var i=e.children(".section-data"),a=Rexbuilder_Util_Editor.getGradientSafeValue(t.color),o=e[0];o.style.background=a,i.attr("data-color_bg_section",t.color),i.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,a),Rexbuilder_Live_Utilities.activeAddSection(e)},_updateBlockBackgroundColorLive=function(e,t){var i,a;if(""!=e.modelNumber){var o='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',r='div[data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content';i=Rexbuilder_Util.$rexContainer.find(o).find(r),a=i[0],-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t}else i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content'),a=i[0],-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t;"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(i,t),Rexbuilder_Live_Utilities.activeAddSection(i)},_updateBlockBackgroundColor=function(e){var t=e.$elem,i=t.find(".grid-item-content"),a=i[0],o=t.children(".rexbuilder-block-data");-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=e.color,o.attr("data-color_bg_block",e.color),o.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorTool(t,e.color)},_updateBlockBackgroundGradient=function(e){var t=e.$elem,i=t.find(".grid-item-content"),a=i[0],o=t.children(".rexbuilder-block-data"),r=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);a.style.background=r,o.attr("data-color_bg_block",e.color),o.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundGradientTool(t,r)},_updateSectionOverlayColorLive=function(e,t){var i;""!=e.modelNumber?(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'),-1!==i.children(".responsive-overlay").css("background").indexOf("linear-gradient")&&i.children(".responsive-overlay").css("background",""),i.children(".responsive-overlay").css("background-color",t)):(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),-1!==i.children(".responsive-overlay").css("background").indexOf("linear-gradient")&&i.children(".responsive-overlay").css("background",""),i.children(".responsive-overlay").css("background-color",t)),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorToolLive(i,t),Rexbuilder_Live_Utilities.activeAddSection(i)},_updateSectionOverlay=function(e,t){var i=e.children(".responsive-overlay"),a=i[0],o=e.children(".section-data");-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t.color,o.attr("data-row_overlay_color",t.color),o.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?i.addClass("rex-active-overlay"):i.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,t),Rexbuilder_Live_Utilities.activeAddSection(e)},_updateSectionOverlayGradient=function(e,t){var i=e.children(".section-data"),a=e.children(".responsive-overlay"),o=a[0],r=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);o.style.background=r,i.attr("data-row_overlay_color",t.color),i.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?a.addClass("rex-active-overlay"):a.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,{active:t.active,color:r}),Rexbuilder_Live_Utilities.activeAddSection(e)},_updateBlockOverlayColorLive=function(e,t){var i;if(""!=e.modelNumber){var a='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',o='div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay';i=Rexbuilder_Util.$rexContainer.find(a).find(o),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t)}else i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay'),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t);"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(i,t)},_updateBlockOverlay=function(e){var t=e.color,i=e.active,a=e.$elem,o=a.children(".rexbuilder-block-data"),r=a.find(".responsive-block-overlay"),d=r[0];-1!==getComputedStyle(d).background.indexOf("linear-gradient")&&(d.style.background=""),d.style.backgroundColor=t,o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",i),"true"==i.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorTool(a,t)},_updateBlockOverlayGradient=function(e){var t=e.color,i=e.active,a=e.$elem,o=a.children(".rexbuilder-block-data"),r=a.find(".responsive-block-overlay"),d=Rexbuilder_Util_Editor.getGradientSafeValue(e.color),l=r[0];l.style.background=d,o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",i),"true"==i.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayGradientTool(a,d)},_updateSectionBackgroundImage=function(e,t){_updateImageBG(e,t)},_updateSectionVisibility=function(e,t,i,a){t?("default"==Rexbuilder_Util.activeLayout&&(e.removeClass("removing_section"),Rexbuilder_Util.addSectionID(e.attr("data-rexlive-section-id"))),e.removeClass("rex-hide-section"),Rexbuilder_Util.playPluginsSection(e)):(Rexbuilder_Util.stopPluginsSection(e),"default"==Rexbuilder_Util.activeLayout&&(e.addClass("removing_section"),Rexbuilder_Util.removeSectionID(e.attr("data-rexlive-section-id"))),e.addClass("rex-hide-section")),"undefined"!=typeof i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),"undefined"!=typeof a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},_updateModelVisibility=function(e){var t=e.$sectionToHide,i=e.$sectionToShow,a=e.layoutsOrder,o=e.defaultStateSections;_updateSectionVisibility(t,!1),_updateSectionVisibility(i,!0),"undefined"!=typeof a&&null!=a&&Rexbuilder_Util.updatePageCustomizationsDomOrder(a),"undefined"!=typeof o&&null!=o&&Rexbuilder_Util.updateDefaultLayoutState({pageData:o})},_updateSectionBecameModel=function(e){var t=e.$section,i=e.layoutsOrder,a=e.defaultStateSections;e.isModel?(t.addClass("rex-model-section"),t.addClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),0==t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&t.find(".grid-stack-row").parent().prepend(tmpl("tmpl-div-block-grid",{})),0==t.find(".rexpansive-block-section-toolbox").length&&t.find(".section-toolBox").parent().prepend(tmpl("tmpl-div-block-section-toolbox",{}))):(t.removeClass("rex-model-section"),t.removeClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),t.find(".rexpansive-block-section-toolbox").remove()),t.attr("data-rexlive-model-id",e.modelID),t.attr("data-rexlive-model-name",e.modelName),t.attr("data-rexlive-model-number",e.modelNumber),t.attr("data-rexlive-section-id",e.sectionID),"undefined"!=typeof i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),"undefined"!=typeof a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},_updateLockEditModel=function(e,t){var i=e.parents(".rexpansive_section");t?(i.addClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","false"),0==i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&i.find(".grid-stack-row").parent().prepend(tmpl("tmpl-div-block-grid",{})),0==i.find(".rexpansive-block-section-toolbox").length&&i.find(".section-toolBox").parent().prepend(tmpl("tmpl-div-block-section-toolbox",{})),e.removeClass("unlocked"),e.addClass("locked")):(e.addClass("unlocked"),e.removeClass("locked"),i.removeClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","true"),i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),i.find(".rexpansive-block-section-toolbox").remove())},_fixModelNumbers=function(){var e,t,i=[];if(Rexbuilder_Util.rexContainer){var a,o=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),r=o.length;for(a=0;a<r;a++)if(Rexbuilder_Util.hasClass(o[a],"rex-model-section")){var d=o[a].getAttribute("data-rexlive-model-id");for(t=!1,e=0;e<i.length;e++)i[e].id==d&&(i[e].number=i[e].number+1,o[a].setAttribute("data-rexlive-model-number",i[e].number),t=!0);if(!t){var l={id:d,number:1};i.push(l),o[a].setAttribute("data-rexlive-model-number",l.number)}}}},_updateSectionWidthData=function(e,t){var i=e.children(".section-data");i.attr("data-section_width",t.sectionWidth),i.attr("data-dimension",t.widthType)},_updateSectionWidth=function(e,t){var i=t.section_width,a=t.dimension,o=t.galleryInstance;_updateSectionWidthData(e,{sectionWidth:i,widthType:a}),o.updateSectionWidthWrap(i),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateRowDistancesData=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-separator",t.gutter),e.attr("data-row-separator-top",t.top),e.attr("data-row-separator-right",t.right),e.attr("data-row-separator-bottom",t.bottom),e.attr("data-row-separator-left",t.left),i.attr("data-block_distance",t.gutter),i.attr("data-row_separator_top",t.top),i.attr("data-row_separator_right",t.right),i.attr("data-row_separator_bottom",t.bottom),i.attr("data-row_separator_left",t.left)},_updateRowDistances=function(e,t){var i=t.rowDistances,a=e.find(".grid-stack-row"),o=t.galleryInstance;_updateRowDistancesData(a,i),o.updateRowDistances(i),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionMarginsData=function(e,t){var i=e[0];i.style.marginTop=t.top+"px",i.style.marginRight=t.right+"px",i.style.marginBottom=t.bottom+"px",i.style.marginLeft=t.left+"px"},_updateSectionMargins=function(e,t){_updateSectionMarginsData(e,t.marginsSection);var i=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,i.batchGridstack(),i.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),i.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateGridLayoutDomProperties=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-layout",t),e.attr("data-full-height",!1),i.attr("data-layout",t),i.attr("data-full_height",!1)},_updateSectionLayout=function(e,t){_updateGridLayoutDomProperties(e,t.layout);var i=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,i.settings.galleryLayout=t.layout,i.batchGridstack(),i.updateFloatingElementsGridstack(),i.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),i.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionFullHeight=function(e){e.galleryInstance.updateFullHeight("true"==e.fullHeight.toString())},_updateRexButton=function(e){Rexbuilder_Rexbutton.updateButton(e)},_performAction=function(e,t){var i;t?(i=e.performActionData,Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!0):(i=e.reverseActionData,Rexbuilder_Util_Editor.redoActive=!1,Rexbuilder_Util_Editor.undoActive=!0);
var a;a=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]');var o=a.find(".grid-stack-row"),r=o.data();if(void 0!==r)var d=o.data().plugin_perfectGridGalleryEditor;switch(e.actionName){case"updateSectionLayout":_updateSectionLayout(o,i);break;case"updateSectionFullHeight":_updateSectionFullHeight(i);break;case"updateSectionBlocksDisposition":void 0!==d&&(_updateBlocksLayout(i),setTimeout(d._updateElementsSizeViewers(),200));break;case"updateBlockVisibility":void 0!==d&&_updateRemovingBlock(i.targetElement,i.hasToBeRemoved,i.galleryInstance);break;case"updateSlider":_updateSlider(i);break;case"updateSectionName":_updateSectionName(a,i.sectionName);break;case"updateSectionPhotoswipe":_updateSectionPhotoswipe(i.elements);break;case"collapseSection":_collapseGrid(i.gridInstance,i.collapse,i.blockDisposition,i.gridLayout);break;case"updateCustomClasses":_updateCustomClasses(i.$target,i.classes);break;case"updateCustomCSS":_updateCustomCSS(i.css);break;case"updateSectionBackgroundColor":_updateSectionBackgroundColor(a,i);break;case"updateSectionOverlay":_updateSectionOverlay(a,i);break;case"updateSectionImageBG":_updateImageBG(a,i);break;case"updateSectionVideoBG":Rexbuilder_Dom_Util.updateVideos(a,i);break;case"updateBlockBackgroundColor":_updateBlockBackgroundColor(i);break;case"updateBlockBackgroundGradient":_updateBlockBackgroundGradient(i);break;case"updateBlockOverlayGradient":_updateBlockOverlayGradient(i);break;case"updateBlockOverlay":_updateBlockOverlay(i);break;case"updateBlockImageBG":Rexbuilder_Util_Editor.updatingImageBg=!0,_updateImageBG(i.$itemContent,i.imageOpt),void 0!==d&&"masonry"==d.settings.galleryLayout&&d.updateElementHeight(i.$itemContent.parents(".grid-stack-item")[0]),Rexbuilder_Util_Editor.updatingImageBg=!1;break;case"updateBlockPadding":Rexbuilder_Util_Editor.updatingPaddingBlock=!0,_updateBlockPaddings(i.$elem,i.dataPadding),void 0!==d&&"masonry"==d.settings.galleryLayout&&d.updateElementHeight(i.$elem[0],0,!0),Rexbuilder_Util_Editor.updatingPaddingBlock=!1;break;case"updateBlockVideoBG":Rexbuilder_Dom_Util.updateVideos(i.$itemContent,i.videoOpt);break;case"updateBlockFlexPosition":_updateFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockImageFlexPosition":_updateImageFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockUrl":_updateBlockUrl(i.$elem,i.url);break;case"updateSectionVisibility":_updateSectionVisibility(a,i.show,i.layoutsOrder,i.stateDefault);break;case"updateSectionModel":_updateModelVisibility(i);break;case"sectionBecameModel":_updateSectionBecameModel(i);break;case"updateSectionOrder":_fixSectionDomOrder(i.sectionOrder,!1,i.sectionMoved);break;case"updateLockButton":_updateLockEditModel(i.$button,i.lock);break;case"updateSectionWidth":_updateSectionWidth(a,i);break;case"updateGridDistances":_updateRowDistances(a,i);break;case"updateSectionMargins":_updateSectionMargins(a,i);break;case"updateRexButton":_updateRexButton(i)}Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!1},init=function(){this.lastSliderNumber=0};return{init:init,updateRow:_updateRow,updateSectionMargins:_updateSectionMargins,updateSectionMarginsData:_updateSectionMarginsData,updateImageBG:_updateImageBG,performAction:_performAction,addYoutubeVideo:_addYoutubeVideo,removeYoutubeVideo:_removeYoutubeVideo,addVimeoVideo:_addVimeoVideo,removeVimeoVideo:_removeVimeoVideo,addMp4Video:_addMp4Video,removeMp4Video:_removeMp4Video,fixVideoProportion:fixVideoProportion,updateSlider:_updateSlider,updateSliderStack:_updateSliderStack,updateSectionName:_updateSectionName,enablePhotoswipeAllBlocksSection:_enablePhotoswipeAllBlocksSection,removePhotoswipeAllBlocksSection:_removePhotoswipeAllBlocksSection,updateCustomClasses:_updateCustomClasses,collapseGrid:_collapseGrid,updateCustomCSS:_updateCustomCSS,updateSectionVideoBackground:_updateSectionVideoBackground,updateSectionBackgroundImage:_updateSectionBackgroundImage,updateSectionBackgroundColor:_updateSectionBackgroundColor,updateSectionBackgroundColorLive:_updateSectionBackgroundColorLive,updateSectionBackgroundGradient:_updateSectionBackgroundGradient,updateSectionOverlay:_updateSectionOverlay,updateSectionOverlayColorLive:_updateSectionOverlayColorLive,updateSectionOverlayGradient:_updateSectionOverlayGradient,updateBlockBackgroundColor:_updateBlockBackgroundColor,updateBlockBackgroundColorLive:_updateBlockBackgroundColorLive,updateBlockBackgroundGradient:_updateBlockBackgroundGradient,updateBlockOverlayColorLive:_updateBlockOverlayColorLive,updateBlockOverlay:_updateBlockOverlay,updateBlockOverlayGradient:_updateBlockOverlayGradient,updateVideos:_updateVideos,updateBlockPaddings:_updateBlockPaddings,updateFlexPostition:_updateFlexPostition,updateImageFlexPostition:_updateImageFlexPostition,updateBlockUrl:_updateBlockUrl,updateSectionVisibility:_updateSectionVisibility,fixSectionDomOrder:_fixSectionDomOrder,updateSectionBecameModel:_updateSectionBecameModel,updateLockEditModel:_updateLockEditModel,fixModelNumbers:_fixModelNumbers,updateSectionWidthData:_updateSectionWidthData,updateSectionWidth:_updateSectionWidth,updateRowDistancesData:_updateRowDistancesData,updateGridLayoutDomProperties:_updateGridLayoutDomProperties,htmlToElement:htmlToElement}}(jQuery);
/**
 Values to insert on "wp_options" to work with rexbuttons
 Data are in form
 "option_name"
 "option_value"

 
_rex_buttons_ids

[\"9UEc\"]


_rex_buttons_styles

[{\"rexID\":\"9UEc\",\"buttonName\":\"Rex Funny v23\",\"rules\":{\"element\":{\"text_color\":\"rgb(111, 115, 181)\",\"font_size\":\"px\",\"background_color\":\"rgb(0, 238, 255)\",\"button_height\":\"px\",\"button_width\":\"\",\"border_color\":\"rgb(165, 0, 255)\",\"border_width\":\"px\",\"border_radius\":\"px\",\"margin_top\":\"px\",\"margin_bottom\":\"px\",\"margin_right\":\"px\",\"margin_left\":\"px\",\"padding_top\":\"px\",\"padding_bottom\":\"px\",\"padding_right\":\"px\",\"padding_left\":\"px\"},\"hover\":{\"background_color\":\"rgb(165, 0, 146)\",\"text_color\":\"rgb(0, 60, 255)\",\"border_color\":\"rgb(0, 255, 15)\"}}}]


_rex_button_9UEc_css

.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container{font-size: 12px;color: rgb(111, 115, 181);min-height: 70px;min-width: 100px;margin-top: 20px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-text{padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background{background-color: rgb(0, 238, 255);border-color: rgb(165, 0, 255);border-width: 5px;border-radius: 10px;border-style: solid;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background:hover{background-color: rgb(165, 0, 146);border-color: rgb(0, 255, 15);}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container:hover{color: rgb(0, 60, 255);}

_rex_button_9UEc_html

<span class=\"rex-button-wrapper\" data-rex-button-id=\"9UEc\"><span class=\"rex-button-data\" style=\"display:none;\" data-text-color=\"rgb(111, 115, 181)\" data-text-size=\"px\" data-background-color=\"rgb(0, 238, 255)\" data-background-color-hover=\"rgb(165, 0, 146)\" data-border-color-hover=\"rgb(0, 255, 15)\" data-text-color-hover=\"rgb(0, 60, 255)\" data-border-width=\"px\" data-border-color=\"rgb(165, 0, 255)\" data-border-radius=\"px\" data-button-height=\"px\" data-button-width=\"\" data-margin-top=\"px\" data-margin-bottom=\"px\" data-margin-left=\"px\" data-margin-right=\"px\" data-padding-left=\"px\" data-padding-right=\"px\" data-padding-top=\"px\" data-padding-bottom=\"px\" data-link-target=\"#\" data-link-type=\"_blank\" data-button-name=\"Rex Funny v23\"></span><a href=\"#\" class=\"rex-button-container\" target=\"_blank\"><span class=\"rex-button-background\"><span class=\"rex-button-text\">Learn More</span></span></a></span>


 */
var Rexbuilder_Rexbutton=function(t){"use strict";var e,r,o,a=function(){if(0==Rexbuilder_Rexbutton.$buttonsStyle.length){var t="",r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.id="rexpansive-builder-rexbutton-style-inline-css",o.dataset.rexName="buttons-style",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),r.appendChild(o)}for(var a=0;a<document.styleSheets.length;a++)"rexpansive-builder-rexbutton-style-inline-css"==document.styleSheets[a].ownerNode.id&&(e=document.styleSheets[a])},n=function(){return e},s=function(t,r){"insertRule"in e?e.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container{'+r+"}",e.cssRules.length):"addRule"in e&&e.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container{'+r+"}",e.cssRules.length)},i=function(t,r){"insertRule"in e?e.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background{'+r+"}",e.cssRules.length):"addRule"in e&&e.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background{'+r+"}",e.cssRules.length)},d=function(t,r){"insertRule"in e?e.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text{'+r+"}",e.cssRules.length):"addRule"in e&&e.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text{'+r+"}",e.cssRules.length)},u=function(t,r){"insertRule"in e?e.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover{'+r+"}",e.cssRules.length):"addRule"in e&&e.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover{'+r+"}",e.cssRules.length)},l=function(t,r){"insertRule"in e?e.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover{'+r+"}",e.cssRules.length):"addRule"in e&&e.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover{'+r+"}",e.cssRules.length)},b=function(t,r,o){for(var a=0;a<e.cssRules.length;a++)if(e.cssRules[a].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container'||e.cssRules[a].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container"){switch(r){case"font-size":e.cssRules[a].style.fontSize=o;break;case"color":e.cssRules[a].style.color=o;break;case"min-height":e.cssRules[a].style.minHeight=o;break;case"min-width":e.cssRules[a].style.minWidth=o;break;case"margin-top":e.cssRules[a].style.marginTop=o;break;case"margin-bottom":e.cssRules[a].style.marginBottom=o;break;case"margin-left":e.cssRules[a].style.marginLeft=o;break;case"margin-right":e.cssRules[a].style.marginRight=o}break}},g=function(t,r,o){for(var a=0;a<e.cssRules.length;a++)if(e.cssRules[a].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background'||e.cssRules[a].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background"){switch(r){case"border-width":e.cssRules[a].style.borderWidth=o,e.cssRules[a].style.borderTopWidth=o,e.cssRules[a].style.borderLeftWidth=o,e.cssRules[a].style.borderRightWidth=o,e.cssRules[a].style.borderBottomWidth=o,e.cssRules[a].style.borderTop=o+" "+e.cssRules[a].style.borderTopStyle+" "+e.cssRules[a].style.borderTopColor,e.cssRules[a].style.borderLeft=o+" "+e.cssRules[a].style.borderLeftStyle+" "+e.cssRules[a].style.borderLeftColor,e.cssRules[a].style.borderRight=o+" "+e.cssRules[a].style.borderRightStyle+" "+e.cssRules[a].style.borderRightColor,e.cssRules[a].style.borderBottom=o+" "+e.cssRules[a].style.borderBottomStyle+" "+e.cssRules[a].style.borderBottomColor;break;case"border-color":e.cssRules[a].style.borderColor=o,e.cssRules[a].style.borderTopColor=o,e.cssRules[a].style.borderLeftColor=o,e.cssRules[a].style.borderRightColor=o,e.cssRules[a].style.borderBottomColor=o;break;case"border-style":e.cssRules[a].style.borderStyle=o,e.cssRules[a].style.borderTopStyle=o,e.cssRules[a].style.borderLeftStyle=o,e.cssRules[a].style.borderRightStyle=o,e.cssRules[a].style.borderBottomStyle=o,e.cssRules[a].style.borderTop=e.cssRules[a].style.borderTopWidth+" "+o+" "+e.cssRules[a].style.borderTopColor,e.cssRules[a].style.borderLeft=e.cssRules[a].style.borderLeftWidth+" "+o+" "+e.cssRules[a].style.borderLeftColor,e.cssRules[a].style.borderRight=e.cssRules[a].style.borderRightWidth+" "+o+" "+e.cssRules[a].style.borderRightColor,e.cssRules[a].style.borderBottom=e.cssRules[a].style.borderBottomWidth+" "+o+" "+e.cssRules[a].style.borderBottomColor;break;case"border-radius":e.cssRules[a].style.borderRadius=o,e.cssRules[a].style.borderTopLeftRadius=o,e.cssRules[a].style.borderTopRightRadius=o,e.cssRules[a].style.borderBottomLeftRadius=o,e.cssRules[a].style.borderBottomRightRadius=o,e.cssRules[a].style.webkitBorderRadius=o,e.cssRules[a].style.webkitBorderTopLeftRadius=o,e.cssRules[a].style.webkitBorderTopRightRadius=o,e.cssRules[a].style.webkitBorderBottomLeftRadius=o,e.cssRules[a].style.webkitBorderBottomRightRadius=o;break;case"background-color":e.cssRules[a].style.backgroundColor=o}break}},p=function(t,r,o){for(var a=0;a<e.cssRules.length;a++)if(e.cssRules[a].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text'||e.cssRules[a].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-text")switch(r){case"padding-left":e.cssRules[a].style.paddingLeft=o;break;case"padding-right":e.cssRules[a].style.paddingRight=o;break;case"padding-top":e.cssRules[a].style.paddingTop=o;break;case"padding-bottom":e.cssRules[a].style.paddingBottom=o}},c=function(t,r,o){for(var a=0;a<e.cssRules.length;a++)if(e.cssRules[a].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover'||e.cssRules[a].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container:hover"){switch(r){case"color":e.cssRules[a].style.color=o}break}},h=function(t,r,o){for(var a=0;a<e.cssRules.length;a++)if(e.cssRules[a].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover'||e.cssRules[a].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background:hover"){switch(r){case"background-color":e.cssRules[a].style.backgroundColor=o;break;case"border-color":e.cssRules[a].style.borderColor=o,e.cssRules[a].style.borderTopColor=o,e.cssRules[a].style.borderLeftColor=o,e.cssRules[a].style.borderRightColor=o,e.cssRules[a].style.borderBottomColor=o;break;case"border-style":e.cssRules[a].style.borderStyle=o,e.cssRules[a].style.borderTopStyle=o,e.cssRules[a].style.borderLeftStyle=o,e.cssRules[a].style.borderRightStyle=o,e.cssRules[a].style.borderBottomStyle=o,e.cssRules[a].style.borderTop=e.cssRules[a].style.borderTopWidth+" "+o+" "+e.cssRules[a].style.borderTopColor,e.cssRules[a].style.borderLeft=e.cssRules[a].style.borderLeftWidth+" "+o+" "+e.cssRules[a].style.borderLeftColor,e.cssRules[a].style.borderRight=e.cssRules[a].style.borderRightWidth+" "+o+" "+e.cssRules[a].style.borderRightColor,e.cssRules[a].style.borderBottom=e.cssRules[a].style.borderBottomWidth+" "+o+" "+e.cssRules[a].style.borderBottomColor}break}},x=function(t){var e=Rexbuilder_Util.$rexContainer.find(".rex-loading-button .rex-button-wrapper");e.unwrap();var r=e.parents(".rex-buttons-paragraph").eq(0),o=e.parents(".text-wrap").eq(0),a=e.parents(".grid-stack-row").eq(0),n=e.parents(".rexpansive_section").eq(0),s=jQuery.extend(!0,{},t.buttonDimensions);a.find(".button__element--delete").remove();var i=e.find(".rex-button-data").eq(0),d={top:parseInt(i.attr("data-margin-top").replace("px","")),bottom:parseInt(i.attr("data-margin-bottom").replace("px","")),left:parseInt(i.attr("data-margin-left").replace("px","")),right:parseInt(i.attr("data-margin-right").replace("px",""))};d.top=isNaN(d.top)?0:d.top,d.bottom=isNaN(d.bottom)?0:d.bottom,d.left=isNaN(d.left)?0:d.left,d.right=isNaN(d.right)?0:d.right;var u={top:parseInt(i.attr("data-padding-top").replace("px","")),bottom:parseInt(i.attr("data-padding-bottom").replace("px","")),left:parseInt(i.attr("data-padding-left").replace("px","")),right:parseInt(i.attr("data-padding-right").replace("px",""))};u.top=isNaN(u.top)?0:u.top,u.bottom=isNaN(u.bottom)?0:u.bottom,u.left=isNaN(u.left)?0:u.left,u.right=isNaN(u.right)?0:u.right,s.height=s.height+d.top+d.bottom+u.top+u.bottom,s.width=s.width+d.left+d.right+u.left+u.right;var l;switch(l=0==o.length?0!=a.length?"inside-row":"inside-new-row":0!=r.length?"inside-paragraph":"inside-block"){case"inside-block":e.wrap('<p class="rex-buttons-paragraph"></p>'),m(e),Rexbuilder_Util_Editor.updateBlockContainerHeight(o);break;case"inside-paragraph":m(e),Rexbuilder_Util_Editor.updateBlockContainerHeight(o);break;case"inside-row":var b=jQuery.Event("rexlive:insert_new_text_block");b.settings={data_to_send:{$buttonWrapper:e,$section:n,addBlockButton:!0,mousePosition:t.mousePosition,blockDimensions:{w:s.width,h:s.height}}},Rexbuilder_Util.$document.trigger(b);break;case"inside-new-row":}},m=function(t){var e=t.attr("data-rex-button-id"),o=!1;t.attr("data-rex-button-number",1);for(var a=0;a<r.length;a++)if(r[a].id==e){r[a].number+=1,t.attr("data-rex-button-number",r[a].number),o=!0;break}o||(_(t),r.push({id:e,number:1})),k(t);var n=t.parents(".text-wrap");0!=n.length&&TextEditor.removePlaceholder(n.eq(0))},_=function(t){if(0!=t.find(".rex-button-data").eq(0).length){var e=A(t,!0),r=e.buttonInfo.buttonTarget.button_id;R(r,e.buttonInfo)}},R=function(t,e){var r="",a="",n="",b="",g="",p="";p+="color: "+e.text_color+";",g=isNaN(parseInt(e.font_size.replace("px","")))?o.font_size:e.font_size,p+="font-size: "+g+";",n=isNaN(parseInt(e.button_height.replace("px","")))?o.dimensions.height:e.button_height,p+="min-height: "+n+";",n=isNaN(parseInt(e.button_width.replace("px","")))?o.dimensions.width:e.button_width,p+="min-width: "+n+";",r=isNaN(parseInt(e.margin_top.replace("px","")))?o.margins.top:e.margin_top,p+="margin-top: "+r+";",r=isNaN(parseInt(e.margin_right.replace("px","")))?o.margins.right:e.margin_right,p+="margin-right: "+r+";",r=isNaN(parseInt(e.margin_bottom.replace("px","")))?o.margins.bottom:e.margin_bottom,p+="margin-bottom: "+r+";",r=isNaN(parseInt(e.margin_left.replace("px","")))?o.margins.left:e.margin_left,p+="margin-left: "+r+";",s(t,p);var c="";c+="border-color: "+e.border_color+";",c+="border-style: solid;",b=isNaN(parseInt(e.border_width.replace("px","")))?o.border.width:e.border_width,c+="border-width: "+b+";",b=isNaN(parseInt(e.border_radius.replace("px","")))?o.border.radius:e.border_radius,c+="border-radius: "+b+";",c+="background-color: "+e.background_color+";",i(t,c);var h="";a=isNaN(parseInt(e.padding_top.replace("px","")))?o.paddings.top:e.padding_top,h+="padding-top: "+a+";",a=isNaN(parseInt(e.padding_right.replace("px","")))?o.paddings.right:e.padding_right,h+="padding-right: "+a+";",a=isNaN(parseInt(e.padding_bottom.replace("px","")))?o.paddings.bottom:e.padding_bottom,h+="padding-bottom: "+a+";",a=isNaN(parseInt(e.padding_left.replace("px","")))?o.paddings.left:e.padding_left,h+="padding-left: "+a+";",d(t,h);var x="";x+="background-color: "+e.hover_color+";",x+="border-color: "+e.hover_border+";",u(t,x);var m="";m+="color: "+e.hover_text+";",l(t,m)},f=function(t){switch(t.propertyType){case"text":p(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"container":b(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"background":g(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"backgroundHover":case"borderHover":h(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"textHover":c(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"button":var e=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t.buttonTarget.button_id+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');switch(t.propertyName){case"link_target":e.find("a.rex-button-container").eq(0).attr("href",t.newValue);break;case"link_type":e.find("a.rex-button-container").eq(0).attr("target",t.newValue);break;case"button_label":e.find(".rex-button-text").eq(0).text(t.newValue);break;case"button_class":e.find("a.rex-button-container").eq(0).attr("class","").addClass("rex-button-container").addClass(t.newValue);break;case"button_name":e.find(".rex-button-data").eq(0).attr("data-button-name",t.newValue)}}},y=function(t){var e=t.buttonProperties,r=e.buttonTarget.button_id,a="",n="",s="",i="",d="";d=isNaN(parseInt(e.font_size.replace("px","")))?o.font_size:e.font_size,b(r,"font-size",d),b(r,"color",e.text_color),s=isNaN(parseInt(e.button_height.replace("px","")))?o.dimensions.height:e.button_height,b(r,"min-height",s),s=isNaN(parseInt(e.button_width.replace("px","")))?o.dimensions.width:e.button_width,b(r,"min-width",s),a=isNaN(parseInt(e.margin_top.replace("px","")))?o.margins.top:e.margin_top,b(r,"margin-top",a),a=isNaN(parseInt(e.margin_right.replace("px","")))?o.margins.right:e.margin_right,b(r,"margin-right",a),a=isNaN(parseInt(e.margin_bottom.replace("px","")))?o.margins.bottom:e.margin_bottom,b(r,"margin-bottom",a),a=isNaN(parseInt(e.margin_left.replace("px","")))?o.margins.left:e.margin_left,b(r,"margin-left",a),g(r,"border-color",e.border_color),i=isNaN(parseInt(e.border_width.replace("px","")))?o.border.width:e.border_width,g(r,"border-width",i),i=isNaN(parseInt(e.border_radius.replace("px","")))?o.border.radius:e.border_radius,g(r,"border-radius",i),g(r,"background-color",e.background_color),n=isNaN(parseInt(e.padding_top.replace("px","")))?o.paddings.top:e.padding_top,p(r,"padding-top",n),n=isNaN(parseInt(e.padding_right.replace("px","")))?o.paddings.right:e.padding_right,p(r,"padding-right",n),n=isNaN(parseInt(e.padding_bottom.replace("px","")))?o.paddings.bottom:e.padding_bottom,p(r,"padding-bottom",n),n=isNaN(parseInt(e.padding_left.replace("px","")))?o.paddings.left:e.padding_left,p(r,"padding-left",n),h(r,"background-color",e.hover_color),h(r,"border-color",e.hover_border),c(r,"color",e.hover_text);var u=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]'),l=u.find(".rex-button-data").eq(0);u.find(".rex-button-text").eq(0).text(e.text),u.find("a.rex-button-container").eq(0).attr("href",e.link_target),u.find("a.rex-button-container").eq(0).attr("target",e.link_type),l.attr("data-link-target",e.link_target),l.attr("data-link-type",e.link_type),u.hasClass("rex-separate-button")?N(u,e):k(u)},v=function(t){var e=t.buttonTarget.button_id,r=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"]');r.removeClass("rex-separate-button"),k(r)},w=function(t){var e=t.buttonData,o=t.newID,a=e.buttonTarget.button_id,n=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+a+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]');if(n.addClass("rex-separate-button"),n.attr("data-rex-button-id",o),n.attr("data-rex-button-number",1),r.push({id:o,number:1}),0==Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+a+'"]').length){var s;for(s=0;s<r.length&&r[s].id!=a;s++);s!=r.length&&r.splice(s,1)}N(n,e),_(n)},k=function(t){var e=t.find(".rex-button-data").eq(0);e.removeAttr("data-text-color"),e.removeAttr("data-text-size"),e.removeAttr("data-background-color"),e.removeAttr("data-background-color-hover"),e.removeAttr("data-border-color-hover"),e.removeAttr("data-text-color-hover"),e.removeAttr("data-border-width"),e.removeAttr("data-border-color"),e.removeAttr("data-border-radius"),e.removeAttr("data-button-height"),e.removeAttr("data-button-width"),e.removeAttr("data-margin-top"),e.removeAttr("data-margin-bottom"),e.removeAttr("data-margin-left"),e.removeAttr("data-margin-right"),e.removeAttr("data-padding-top"),e.removeAttr("data-padding-bottom"),e.removeAttr("data-padding-left"),e.removeAttr("data-padding-right"),e.removeAttr("data-button-name")},N=function(t,e){var r=t.find(".rex-button-data").eq(0);r.attr("data-text-color",e.text_color),r.attr("data-text-size",e.font_size),r.attr("data-background-color",e.background_color),r.attr("data-background-color-hover",e.hover_color),r.attr("data-border-color-hover",e.hover_border),r.attr("data-text-color-hover",e.hover_text),r.attr("data-border-width",e.border_width),r.attr("data-border-color",e.border_color),r.attr("data-border-radius",e.border_radius),r.attr("data-button-height",e.button_height),r.attr("data-button-width",e.button_width),r.attr("data-margin-top",e.margin_top),r.attr("data-margin-bottom",e.margin_bottom),r.attr("data-margin-right",e.margin_right),r.attr("data-margin-left",e.margin_left),r.attr("data-padding-top",e.padding_top),r.attr("data-padding-bottom",e.padding_bottom),r.attr("data-padding-right",e.padding_right),r.attr("data-padding-left",e.padding_left),r.attr("data-button-name",e.buttonTarget.button_name)},A=function(t,e){e="undefined"!=typeof e&&"true"==e.toString();var r={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_border:"",hover_text:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:""}},o=t.find(".rex-button-data").eq(0);r.buttonTarget.button_id=t.attr("data-rex-button-id"),r.buttonTarget.button_number=parseInt(t.attr("data-rex-button-number"));var a=o[0],n=!1;t.hasClass("rex-separate-button")||e?(r.font_size=a.getAttribute("data-text-size")?a.getAttribute("data-text-size").toString():"",r.text_color=a.getAttribute("data-text-color")?a.getAttribute("data-text-color").toString():"",r.button_height=a.getAttribute("data-button-height")?a.getAttribute("data-button-height").toString():"",r.button_width=a.getAttribute("data-button-width")?a.getAttribute("data-button-width").toString():"",r.margin_top=a.getAttribute("data-margin-top")?a.getAttribute("data-margin-top").toString():"",r.margin_bottom=a.getAttribute("data-margin-bottom")?a.getAttribute("data-margin-bottom").toString():"",r.margin_right=a.getAttribute("data-margin-right")?a.getAttribute("data-margin-right").toString():"",r.margin_left=a.getAttribute("data-margin-left")?a.getAttribute("data-margin-left").toString():"",r.border_color=a.getAttribute("data-border-color")?a.getAttribute("data-border-color").toString():"",r.border_width=a.getAttribute("data-border-width")?a.getAttribute("data-border-width").toString():"",r.border_radius=a.getAttribute("data-border-radius")?a.getAttribute("data-border-radius").toString():"",r.background_color=a.getAttribute("data-background-color")?a.getAttribute("data-background-color").toString():"",r.padding_top=a.getAttribute("data-padding-top")?a.getAttribute("data-padding-top").toString():"",r.padding_bottom=a.getAttribute("data-padding-bottom")?a.getAttribute("data-padding-bottom").toString():"",r.padding_right=a.getAttribute("data-padding-right")?a.getAttribute("data-padding-right").toString():"",r.padding_left=a.getAttribute("data-padding-left")?a.getAttribute("data-padding-left").toString():"",r.hover_color=a.getAttribute("data-background-color-hover")?a.getAttribute("data-background-color-hover").toString():"",r.hover_border=a.getAttribute("data-border-color-hover")?a.getAttribute("data-border-color-hover").toString():"",r.hover_text=a.getAttribute("data-text-color-hover")?a.getAttribute("data-text-color-hover").toString():"",r.buttonTarget.button_name=a.getAttribute("data-button-name")?a.getAttribute("data-button-name").toString():"",n=!0):r.synchronize="undefined"!=typeof o.attr("data-synchronize")&&o.attr("data-synchronize").toString(),r.text=t.find(".rex-button-text").eq(0).text(),r.link_target=o.attr("data-link-target"),r.link_type=o.attr("data-link-type"),r.classes=t.find("a.rex-button-container").eq(0).attr("class").replace("rex-button-container","").replace(/\s/,"");var s={separateButton:n,buttonInfo:r};return s},T=function(t){var e=t.buttonTarget.button_id,r=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');r.find(".rex-button-data").attr("data-synchronize",!0)},S=function(){Rexbuilder_Util.$document.on("rexlive:completeImportButton",function(t){var e=t.settings,r=e.$blockAdded,o=e.$buttonWrapper;o.detach().prependTo(r.find(".text-wrap").eq(0)),o.wrap('<p class="rex-buttons-paragraph"></p>'),m(o)})},C=function(){var e,o=!1;Rexbuilder_Util.$rexContainer.find(".rex-button-wrapper").each(function(a,n){var s=t(n),i=s.attr("data-rex-button-id"),d=parseInt(s.attr("data-rex-button-number"));for(o=!1,e=0;e<r.length;e++)if(r[e].id==i){o=!0;break}o=!1,o||(r.push({id:i,number:d}),s.hasClass("rex-separate-button")&&_(s)),r[e].number<d&&(r[e].number=d)})},B=function(){return r},I=function(){e=null,r=[],o={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},this.$buttonsStyle=t("#rexpansive-builder-rexbutton-style-inline-css"),a(),C(),S()};return{init:I,getActiveStyleSheet:n,fixImportedButton:x,getButtonsInPage:B,updateButtonLive:f,lockSynchronize:T,updateButton:y,removeSeparateButton:v,separateRexButton:w,generateButtonData:A,updateButtonContainerRule:b,updateButtonBackgroundRule:g,updateButtonBackgroundHoverRule:h,updateContainerHoverRule:c}}(jQuery);
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function e(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!(null==n||!n.length)&&-1<v(n,t,0)}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function _(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function v(n,t,r){if(t===t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=_(n,d,r);return n}function g(n,t,r,e){--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function d(n){return n!==n}function y(n,t){var r=null==n?0:n.length;return r?m(n,t)/r:F}function b(n){return function(t){return null==t?T:t[n]}}function x(n){return function(t){return null==n?T:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function w(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function m(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==T&&(r=r===T?i:r+i)}return r}function A(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function E(n,t){return c(t,function(t){return[t,n[t]]})}function k(n){return function(t){return n(t)}}function S(n,t){return c(t,function(t){return n[t]})}function O(n,t){return n.has(t)}function I(n,t){for(var r=-1,e=n.length;++r<e&&-1<v(t,n[r],0););return r}function R(n,t){for(var r=n.length;r--&&-1<v(t,n[r],0););return r}function z(n){return"\\"+Un[n]}function W(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function B(n,t){return function(r){return n(t(r))}}function L(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&"__lodash_placeholder__"!==o||(n[r]="__lodash_placeholder__",i[u++]=r)}return i}function U(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function C(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function D(n){if(Rn.test(n)){for(var t=On.lastIndex=0;On.test(n);)++t;n=t}else n=Qn(n);return n}function M(n){return Rn.test(n)?n.match(On)||[]:n.split("")}var T,$=1/0,F=NaN,N=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],P=/\b__p\+='';/g,Z=/\b(__p\+=)''\+/g,q=/(__e\(.*?\)|\b__t\))\+'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(V.source),H=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/[\\^$.*+?()[\]{}|]/g,en=RegExp(rn.source),un=/^\s+|\s+$/g,on=/^\s+/,fn=/\s+$/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,an=/\{\n\/\* \[wrapped with (.+)\] \*/,ln=/,? & /,sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hn=/\\(\\)?/g,pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_n=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,dn=/^\[object .+?Constructor\]$/,yn=/^0o[0-7]+$/i,bn=/^(?:0|[1-9]\d*)$/,xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jn=/($^)/,wn=/['\n\r\u2028\u2029\\]/g,mn="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",An="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+mn,En="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",kn=RegExp("['’]","g"),Sn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),On=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+En+mn,"g"),In=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",An].join("|"),"g"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),zn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Bn={};Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=!0,Bn["[object Arguments]"]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object Boolean]"]=Bn["[object DataView]"]=Bn["[object Date]"]=Bn["[object Error]"]=Bn["[object Function]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn["[object Object]"]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object WeakMap]"]=!1;var Ln={};Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=!0,Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object WeakMap]"]=!1;var Un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cn=parseFloat,Dn=parseInt,Mn="object"==typeof global&&global&&global.Object===Object&&global,Tn="object"==typeof self&&self&&self.Object===Object&&self,$n=Mn||Tn||Function("return this")(),Fn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nn=Fn&&"object"==typeof module&&module&&!module.nodeType&&module,Pn=Nn&&Nn.exports===Fn,Zn=Pn&&Mn.process,qn=function(){try{var n=Nn&&Nn.f&&Nn.f("util").types;return n?n:Zn&&Zn.binding&&Zn.binding("util")}catch(n){}}(),Vn=qn&&qn.isArrayBuffer,Kn=qn&&qn.isDate,Gn=qn&&qn.isMap,Hn=qn&&qn.isRegExp,Jn=qn&&qn.isSet,Yn=qn&&qn.isTypedArray,Qn=b("length"),Xn=x({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nt=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),tt=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rt=function et(x){function mn(n){if(du(n)&&!of(n)&&!(n instanceof On)){if(n instanceof En)return n;if(ii.call(n,"__wrapped__"))return $e(n)}return new En(n)}function An(){}function En(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=T}function On(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Un(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Mn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Tn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Fn(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Tn;++t<r;)this.add(n[t])}function Nn(n){this.size=(this.__data__=new Mn(n)).size}function Zn(n,t){var r,e=of(n),u=!e&&uf(n),i=!e&&!u&&cf(n),o=!e&&!u&&!i&&pf(n),u=(e=e||u||i||o)?A(n.length,Xu):[],f=u.length;for(r in n)!t&&!ii.call(n,r)||e&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Se(r,f))||u.push(r);return u}function qn(n){var t=n.length;return t?n[ir(0,t-1)]:T}function Qn(n,t){return Ce(Ur(n),pt(t,0,n.length))}function ut(n){return Ce(Ur(n))}function it(n,t,r){(r===T||au(n[t],r))&&(r!==T||t in n)||st(n,t,r)}function ot(n,t,r){var e=n[t];ii.call(n,t)&&au(e,r)&&(r!==T||t in n)||st(n,t,r)}function ft(n,t){for(var r=n.length;r--;)if(au(n[r][0],t))return r;return-1}function ct(n,t,r,e){return eo(n,function(n,u,i){t(e,n,r(n),i)}),e}function at(n,t){return n&&Cr(t,zu(t),n)}function lt(n,t){return n&&Cr(t,Wu(t),n)}function st(n,t,r){"__proto__"==t&&mi?mi(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function ht(n,t){for(var r=-1,e=t.length,u=Vu(e),i=null==n;++r<e;)u[r]=i?T:Iu(n,t[r]);return u}function pt(n,t,r){return n===n&&(r!==T&&(n=n<=r?n:r),t!==T&&(n=n>=t?n:t)),n}function _t(n,t,e,u,i,o){var f,c=1&t,a=2&t,l=4&t;if(e&&(f=i?e(n,u,i,o):e(n)),f!==T)return f;if(!gu(n))return n;if(u=of(n)){if(f=me(n),!c)return Ur(n,f)}else{var s=_o(n),h="[object Function]"==s||"[object GeneratorFunction]"==s;if(cf(n))return Ir(n,c);if("[object Object]"==s||"[object Arguments]"==s||h&&!i){if(f=a||h?{}:Ae(n),!c)return a?Mr(n,lt(f,n)):Dr(n,at(f,n))}else{if(!Ln[s])return i?n:{};f=Ee(n,s,c)}}if(o||(o=new Nn),i=o.get(n))return i;if(o.set(n,f),hf(n))return n.forEach(function(r){f.add(_t(r,t,e,r,n,o))}),f;if(lf(n))return n.forEach(function(r,u){f.set(u,_t(r,t,e,u,n,o))}),f;var a=l?a?ve:_e:a?Wu:zu,p=u?T:a(n);return r(p||n,function(r,u){p&&(u=r,r=n[u]),ot(f,u,_t(r,t,e,u,n,o))}),f}function vt(n){var t=zu(n);return function(r){return gt(r,n,t)}}function gt(n,t,r){var e=r.length;if(null==n)return!e;for(n=Yu(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===T&&!(u in n)||!i(o))return!1}return!0}function dt(n,t,r){if("function"!=typeof n)throw new ni("Expected a function");return yo(function(){n.apply(T,r)},t)}function yt(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;if(!l)return s;r&&(t=c(t,k(r))),e?(i=f,a=!1):200<=t.length&&(i=O,a=!1,t=new Fn(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p),p=e||0!==p?p:0;if(a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function bt(n,t){var r=!0;return eo(n,function(n,e,u){return r=!!t(n,e,u)}),r}function xt(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===T?o===o&&!ju(o):r(o,f)))var f=o,c=i}return c}function jt(n,t){var r=[];return eo(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function wt(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=ke),u||(u=[]);++i<o;){var f=n[i];0<t&&r(f)?1<t?wt(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function mt(n,t){return n&&io(n,t,zu)}function At(n,t){return n&&oo(n,t,zu)}function Et(n,t){return i(t,function(t){return pu(n[t])})}function kt(n,t){t=Sr(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[De(t[r++])];return r&&r==e?n:T}function St(n,t,r){return t=t(n),of(n)?t:a(t,r(n))}function Ot(n){if(null==n)n=n===T?"[object Undefined]":"[object Null]";else if(wi&&wi in Yu(n)){var t=ii.call(n,wi),r=n[wi];try{n[wi]=T;var e=!0}catch(n){}var u=ci.call(n);e&&(t?n[wi]=r:delete n[wi]),n=u}else n=ci.call(n);return n}function It(n,t){return n>t}function Rt(n,t){return null!=n&&ii.call(n,t)}function zt(n,t){return null!=n&&t in Yu(n)}function Wt(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=Vu(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,k(t))),s=Ui(p.length,s),l[a]=!r&&(t||120<=u&&120<=p.length)?new Fn(a&&p):T}var p=n[0],_=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],d=t?t(g):g,g=r||0!==g?g:0;if(v?!O(v,d):!e(h,d,r)){for(a=i;--a;){var y=l[a];if(y?!O(y,d):!e(n[a],d,r))continue n}v&&v.push(d),h.push(g)}}return h}function Bt(n,t,r){var e={};return mt(n,function(n,u,i){t(e,r(n),u,i)}),e}function Lt(t,r,e){return r=Sr(r,t),t=2>r.length?t:kt(t,hr(r,0,-1)),r=null==t?t:t[De(qe(r))],null==r?T:n(r,t,e)}function Ut(n){return du(n)&&"[object Arguments]"==Ot(n)}function Ct(n){return du(n)&&"[object ArrayBuffer]"==Ot(n)}function Dt(n){return du(n)&&"[object Date]"==Ot(n)}function Mt(n,t,r,e,u){if(n===t)t=!0;else if(null==n||null==t||!du(n)&&!du(t))t=n!==n&&t!==t;else n:{var i=of(n),o=of(t),f=i?"[object Array]":_o(n),c=o?"[object Array]":_o(t),f="[object Arguments]"==f?"[object Object]":f,c="[object Arguments]"==c?"[object Object]":c,a="[object Object]"==f,o="[object Object]"==c;if((c=f==c)&&cf(n)){if(!cf(t)){t=!1;break n}i=!0,a=!1}if(c&&!a)u||(u=new Nn),t=i||pf(n)?se(n,t,r,e,Mt,u):he(n,t,f,r,e,Mt,u);else{if(!(1&r)&&(i=a&&ii.call(n,"__wrapped__"),f=o&&ii.call(t,"__wrapped__"),i||f)){n=i?n.value():n,t=f?t.value():t,u||(u=new Nn),t=Mt(n,t,r,e,u);break n}if(c)t:if(u||(u=new Nn),i=1&r,f=_e(n),o=f.length,c=_e(t).length,o==c||i){for(a=o;a--;){var l=f[a];if(!(i?l in t:ii.call(t,l))){t=!1;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=!0,u.set(n,t),u.set(t,n);for(var s=i;++a<o;){var l=f[a],h=n[l],p=t[l];if(e)var _=i?e(p,h,l,t,n,u):e(h,p,l,n,t,u);if(_===T?h!==p&&!Mt(h,p,r,e,u):!_){c=!1;break}s||(s="constructor"==l)}c&&!s&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(c=!1)),u["delete"](n),u["delete"](t),t=c}}else t=!1;else t=!1}}return t}function Tt(n){return du(n)&&"[object Map]"==_o(n)}function $t(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Yu(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){var f=r[u],c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===T&&!(c in n))return!1}else{if(f=new Nn,e)var s=e(a,l,c,n,t,f);if(s===T?!Mt(l,a,3,e,f):!s)return!1}}return!0}function Ft(n){return!(!gu(n)||fi&&fi in n)&&(pu(n)?si:dn).test(Me(n))}function Nt(n){return du(n)&&"[object RegExp]"==Ot(n)}function Pt(n){return du(n)&&"[object Set]"==_o(n)}function Zt(n){return du(n)&&vu(n.length)&&!!Bn[Ot(n)]}function qt(n){return"function"==typeof n?n:null==n?Tu:"object"==typeof n?of(n)?Jt(n[0],n[1]):Ht(n):Pu(n)}function Vt(n){if(!ze(n))return Bi(n);var t,r=[];for(t in Yu(n))ii.call(n,t)&&"constructor"!=t&&r.push(t);return r}function Kt(n,t){return n<t}function Gt(n,t){var r=-1,e=lu(n)?Vu(n.length):[];return eo(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Ht(n){var t=xe(n);return 1==t.length&&t[0][2]?We(t[0][0],t[0][1]):function(r){return r===n||$t(r,n,t)}}function Jt(n,t){return Ie(n)&&t===t&&!gu(t)?We(De(n),t):function(r){var e=Iu(r,n);return e===T&&e===t?Ru(r,n):Mt(t,e,3)}}function Yt(n,t,r,e,u){n!==t&&io(t,function(i,o){if(gu(i)){u||(u=new Nn);var f=u,c="__proto__"==o?T:n[o],a="__proto__"==o?T:t[o],l=f.get(a);if(l)it(n,o,l);else{var l=e?e(c,a,o+"",n,t,f):T,s=l===T;if(s){var h=of(a),p=!h&&cf(a),_=!h&&!p&&pf(a),l=a;h||p||_?of(c)?l=c:su(c)?l=Ur(c):p?(s=!1,l=Ir(a,!0)):_?(s=!1,l=zr(a,!0)):l=[]:bu(a)||uf(a)?(l=c,uf(c)?l=Su(c):(!gu(c)||r&&pu(c))&&(l=Ae(a))):s=!1}s&&(f.set(a,l),Yt(l,a,r,e,f),f["delete"](a)),it(n,o,l)}}else f=e?e("__proto__"==o?T:n[o],i,o+"",n,t,u):T,f===T&&(f=i),it(n,o,f)},Wu)}function Qt(n,t){var r=n.length;if(r)return t+=0>t?r:0,Se(t,r)?n[t]:T}function Xt(n,t,r){var e=-1;return t=c(t.length?t:[Tu],k(ye())),n=Gt(n,function(n){return{a:c(t,function(t){return t(n)}),b:++e,c:n}}),w(n,function(n,t){var e;n:{e=-1;for(var u=n.a,i=t.a,o=u.length,f=r.length;++e<o;){var c=Wr(u[e],i[e]);if(c){e=e>=f?c:c*("desc"==r[e]?-1:1);break n}}e=n.b-t.b}return e})}function nr(n,t){return tr(n,t,function(t,r){return Ru(n,r)})}function tr(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=kt(n,o);r(f,o)&&lr(i,Sr(o,n),f)}return i}function rr(n){return function(t){return kt(t,n)}}function er(n,t,r,e){var u=e?g:v,i=-1,o=t.length,f=n;for(n===t&&(t=Ur(t)),r&&(f=c(n,k(r)));++i<o;)for(var a=0,l=t[i],l=r?r(l):l;-1<(a=u(f,l,a,e));)f!==n&&bi.call(f,a,1),bi.call(n,a,1);return n}function ur(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Se(u)?bi.call(n,u,1):xr(n,u)}}}function ir(n,t){return n+Oi(Mi()*(t-n+1))}function or(n,t){var r="";if(!n||1>t||9007199254740991<t)return r;do t%2&&(r+=n),(t=Oi(t/2))&&(n+=n);while(t);return r}function fr(n,t){return bo(Be(n,t,Tu),n+"")}function cr(n){return qn(Lu(n))}function ar(n,t){var r=Lu(n);return Ce(r,pt(t,0,r.length))}function lr(n,t,r,e){if(!gu(n))return n;t=Sr(t,n);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=De(t[u]),a=r;if(u!=o){var l=f[c],a=e?e(l,c,f):T;a===T&&(a=gu(l)?l:Se(t[u+1])?[]:{})}ot(f,c,a),f=f[c]}return n}function sr(n){return Ce(Lu(n))}function hr(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Vu(u);++e<u;)r[e]=n[e+t];return r}function pr(n,t){var r;return eo(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function _r(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t===t&&2147483647>=u){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!ju(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return vr(n,t,Tu,r)}function vr(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,c=ju(t),a=t===T;u<i;){var l=Oi((u+i)/2),s=r(n[l]),h=s!==T,p=null===s,_=s===s,v=ju(s);(o?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):p||v?0:e?s<=t:s<t)?u=l+1:i=l}return Ui(i,4294967294)}function gr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!au(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function dr(n){return"number"==typeof n?n:ju(n)?F:+n}function yr(n){if("string"==typeof n)return n;if(of(n))return c(n,yr)+"";if(ju(n))return to?to.call(n):"";var t=n+"";return"0"==t&&1/n==-$?"-0":t}function br(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(200<=i){if(u=t?null:lo(n))return U(u);c=!1,u=O,l=new Fn}else l=t?[]:a;n:for(;++e<i;){var s=n[e],h=t?t(s):s,s=r||0!==s?s:0;if(c&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue n;t&&l.push(h),a.push(s)}else u(l,h,r)||(l!==a&&l.push(h),a.push(s))}return a}function xr(n,t){return t=Sr(t,n),n=2>t.length?n:kt(n,hr(t,0,-1)),null==n||delete n[De(qe(t))]}function jr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?hr(n,e?0:i,e?i+1:u):hr(n,e?i+1:0,e?u:i)}function wr(n,t){var r=n;return r instanceof On&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mr(n,t,r){var e=n.length;if(2>e)return e?br(n[0]):[];for(var u=-1,i=Vu(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=yt(i[u]||o,n[f],t,r));return br(wt(i,1),t,r)}function Ar(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;)r(o,n[e],e<i?t[e]:T);return o}function Er(n){return su(n)?n:[]}function kr(n){return"function"==typeof n?n:Tu}function Sr(n,t){return of(n)?n:Ie(n,t)?[n]:xo(Ou(n))}function Or(n,t,r){var e=n.length;return r=r===T?e:r,!t&&r>=e?n:hr(n,t,r)}function Ir(n,t){if(t)return n.slice();var r=n.length,r=vi?vi(r):new n.constructor(r);return n.copy(r),r}function Rr(n){var t=new n.constructor(n.byteLength);return new _i(t).set(new _i(n)),t}function zr(n,t){return new n.constructor(t?Rr(n.buffer):n.buffer,n.byteOffset,n.length)}function Wr(n,t){if(n!==t){var r=n!==T,e=null===n,u=n===n,i=ju(n),o=t!==T,f=null===t,c=t===t,a=ju(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Br(n,t,r,e){var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Li(i-o,0),l=Vu(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<o;)(e||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function Lr(n,t,r,e){var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Li(i-f,0),s=Vu(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++o<f;)(e||u<i)&&(s[l+r[o]]=n[u++]);return s}function Ur(n,t){var r=-1,e=n.length;for(t||(t=Vu(e));++r<e;)t[r]=n[r];return t}function Cr(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):T;c===T&&(c=n[f]),u?st(r,f,c):ot(r,f,c)}return r}function Dr(n,t){return Cr(n,ho(n),t)}function Mr(n,t){return Cr(n,po(n),t)}function Tr(n,r){return function(e,u){var i=of(e)?t:ct,o=r?r():{};return i(e,n,ye(u,2),o)}}function $r(n){return fr(function(t,r){var e=-1,u=r.length,i=1<u?r[u-1]:T,o=2<u?r[2]:T,i=3<n.length&&"function"==typeof i?(u--,i):T;for(o&&Oe(r[0],r[1],o)&&(i=3>u?T:i,u=1),t=Yu(t);++e<u;)(o=r[e])&&n(t,o,e,i);return t})}function Fr(n,t){return function(r,e){if(null==r)return r;if(!lu(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Yu(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function Nr(n){return function(t,r,e){var u=-1,i=Yu(t);e=e(t);for(var o=e.length;o--;){var f=e[n?o:++u];if(!1===r(i[f],f,i))break}return t}}function Pr(n,t,r){function e(){return(this&&this!==$n&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=1&t,i=Vr(n);return e}function Zr(n){return function(t){t=Ou(t);var r=Rn.test(t)?M(t):T,e=r?r[0]:t.charAt(0);return t=r?Or(r,1).join(""):t.slice(1),e[n]()+t}}function qr(n){return function(t){return l(Du(Cu(t).replace(kn,"")),n,"")}}function Vr(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ro(n.prototype),t=n.apply(r,t);return gu(t)?t:r}}function Kr(t,r,e){function u(){for(var o=arguments.length,f=Vu(o),c=o,a=de(u);c--;)f[c]=arguments[c];return c=3>o&&f[0]!==a&&f[o-1]!==a?[]:L(f,a),o-=c.length,o<e?ue(t,r,Jr,u.placeholder,T,f,c,T,T,e-o):n(this&&this!==$n&&this instanceof u?i:t,this,f)}var i=Vr(t);return u}function Gr(n){return function(t,r,e){var u=Yu(t);if(!lu(t)){var i=ye(r,3);t=zu(t),r=function(n){return i(u[n],n,u)}}return r=n(t,r,e),-1<r?u[i?t[r]:r]:T}}function Hr(n){return pe(function(t){var r=t.length,e=r,u=En.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new ni("Expected a function");if(u&&!o&&"wrapper"==ge(i))var o=new En([],(!0))}for(e=o?e:r;++e<r;)var i=t[e],u=ge(i),f="wrapper"==u?so(i):T,o=f&&Re(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?o[ge(f[0])].apply(o,f[3]):1==i.length&&Re(i)?o[u]():o.thru(i);return function(){var n=arguments,e=n[0];if(o&&1==n.length&&of(e))return o.plant(e).value();for(var u=0,n=r?t[u].apply(this,n):e;++u<r;)n=t[u].call(this,n);return n}})}function Jr(n,t,r,e,u,i,o,f,c,a){function l(){for(var d=arguments.length,y=Vu(d),b=d;b--;)y[b]=arguments[b];if(_){var x,j=de(l),b=y.length;for(x=0;b--;)y[b]===j&&++x}if(e&&(y=Br(y,e,u,_)),i&&(y=Lr(y,i,o,_)),d-=x,_&&d<a)return j=L(y,j),ue(n,t,Jr,l.placeholder,r,y,j,f,c,a-d);if(j=h?r:this,b=p?j[n]:n,d=y.length,f){x=y.length;for(var w=Ui(f.length,x),m=Ur(y);w--;){var A=f[w];y[w]=Se(A,x)?m[A]:T}}else v&&1<d&&y.reverse();return s&&c<d&&(y.length=c),this&&this!==$n&&this instanceof l&&(b=g||Vr(b)),b.apply(j,y)}var s=128&t,h=1&t,p=2&t,_=24&t,v=512&t,g=p?T:Vr(n);return l}function Yr(n,t){return function(r,e){return Bt(r,n,t(e))}}function Qr(n,t){return function(r,e){var u;if(r===T&&e===T)return t;if(r!==T&&(u=r),e!==T){if(u===T)return e;"string"==typeof r||"string"==typeof e?(r=yr(r),e=yr(e)):(r=dr(r),e=dr(e)),u=n(r,e)}return u}}function Xr(t){return pe(function(r){return r=c(r,k(ye())),fr(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ne(n,t){t=t===T?" ":yr(t);var r=t.length;return 2>r?r?or(t,n):t:(r=or(t,Si(n/D(t))),Rn.test(t)?Or(M(r),0,n).join(""):r.slice(0,n))}function te(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=Vu(l+c),h=this&&this!==$n&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];return n(h,o?e:this,s)}var o=1&r,f=Vr(t);return i}function re(n){return function(t,r,e){e&&"number"!=typeof e&&Oe(t,r,e)&&(r=e=T),t=mu(t),r===T?(r=t,t=0):r=mu(r),e=e===T?t<r?1:-1:mu(e);var u=-1;r=Li(Si((r-t)/(e||1)),0);for(var i=Vu(r);r--;)i[n?r:++u]=t,t+=e;return i}}function ee(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ku(t),r=ku(r)),n(t,r)}}function ue(n,t,r,e,u,i,o,f,c,a){var l=8&t,s=l?o:T;o=l?T:o;var h=l?i:T;return i=l?T:i,t=(t|(l?32:64))&~(l?64:32),4&t||(t&=-4),u=[n,t,u,h,s,i,o,f,c,a],r=r.apply(T,u),Re(n)&&go(r,u),r.placeholder=e,Le(r,n,t)}function ie(n){var t=Ju[n];return function(n,r){if(n=ku(n),r=null==r?0:Ui(Au(r),292)){var e=(Ou(n)+"e").split("e"),e=t(e[0]+"e"+(+e[1]+r)),e=(Ou(e)+"e").split("e");return+(e[0]+"e"+(+e[1]-r))}return t(n)}}function oe(n){return function(t){var r=_o(t);return"[object Map]"==r?W(t):"[object Set]"==r?C(t):E(t,n(t))}}function fe(n,t,r,e,u,i,o,f){var c=2&t;if(!c&&"function"!=typeof n)throw new ni("Expected a function");var a=e?e.length:0;if(a||(t&=-97,e=u=T),o=o===T?o:Li(Au(o),0),f=f===T?f:Au(f),a-=u?u.length:0,64&t){var l=e,s=u;e=u=T}var h=c?T:so(n);return i=[n,t,r,e,u,l,s,i,o,f],h&&(r=i[1],n=h[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&i[7].length<=h[8]||384==n&&h[7].length<=h[8]&&8==r,131>t||e)&&(1&n&&(i[2]=h[2],t|=1&r?0:4),(r=h[3])&&(e=i[3],i[3]=e?Br(e,r,h[4]):r,i[4]=e?L(i[3],"__lodash_placeholder__"):h[4]),(r=h[5])&&(e=i[5],i[5]=e?Lr(e,r,h[6]):r,i[6]=e?L(i[5],"__lodash_placeholder__"):h[6]),(r=h[7])&&(i[7]=r),128&n&&(i[8]=null==i[8]?h[8]:Ui(i[8],h[8])),null==i[9]&&(i[9]=h[9]),i[0]=h[0],i[1]=t),n=i[0],t=i[1],r=i[2],e=i[3],u=i[4],f=i[9]=i[9]===T?c?0:n.length:Li(i[9]-a,0),!f&&24&t&&(t&=-25),Le((h?fo:go)(t&&1!=t?8==t||16==t?Kr(n,t,f):32!=t&&33!=t||u.length?Jr.apply(T,i):te(n,t,r,e):Pr(n,t,r),i),n,t)}function ce(n,t,r,e){return n===T||au(n,ri[r])&&!ii.call(e,r)?t:n}function ae(n,t,r,e,u,i){return gu(n)&&gu(t)&&(i.set(t,n),Yt(n,t,T,ae,i),i["delete"](t)),n}function le(n){return bu(n)?T:n}function se(n,t,r,e,u,i){var o=1&r,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;if((c=i.get(n))&&i.get(t))return c==t;var c=-1,a=!0,l=2&r?new Fn:T;for(i.set(n,t),i.set(t,n);++c<f;){var s=n[c],p=t[c];if(e)var _=o?e(p,s,c,t,n,i):e(s,p,c,n,t,i);if(_!==T){if(_)continue;a=!1;break}if(l){if(!h(t,function(n,t){if(!O(l,t)&&(s===n||u(s,n,r,e,i)))return l.push(t)})){a=!1;break}}else if(s!==p&&!u(s,p,r,e,i)){a=!1;break}}return i["delete"](n),i["delete"](t),a}function he(n,t,r,e,u,i,o){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":if(n.byteLength!=t.byteLength||!i(new _i(n),new _i(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return au(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=W;case"[object Set]":if(f||(f=U),n.size!=t.size&&!(1&e))break;return(r=o.get(n))?r==t:(e|=2,o.set(n,t),t=se(f(n),f(t),e,u,i,o),o["delete"](n),t);case"[object Symbol]":if(no)return no.call(n)==no.call(t)}return!1}function pe(n){return bo(Be(n,T,Pe),n+"")}function _e(n){return St(n,zu,ho)}function ve(n){return St(n,Wu,po)}function ge(n){for(var t=n.name+"",r=Ki[t],e=ii.call(Ki,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function de(n){return(ii.call(mn,"placeholder")?mn:n).placeholder}function ye(){var n=mn.iteratee||$u,n=n===$u?qt:n;return arguments.length?n(arguments[0],arguments[1]):n}function be(n,t){var r=n.__data__,e=typeof t;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function xe(n){for(var t=zu(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u===u&&!gu(u)]}return t}function je(n,t){var r=null==n?T:n[t];return Ft(r)?r:T}function we(n,t,r){t=Sr(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=De(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&vu(u)&&Se(o,u)&&(of(n)||uf(n)))}function me(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&ii.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ae(n){return"function"!=typeof n.constructor||ze(n)?{}:ro(gi(n))}function Ee(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Rr(n);case"[object Boolean]":case"[object Date]":return new e((+n));case"[object DataView]":return t=r?Rr(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":
case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return zr(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return t=new n.constructor(n.source,_n.exec(n)),t.lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return no?Yu(no.call(n)):{}}}function ke(n){return of(n)||uf(n)||!!(xi&&n&&n[xi])}function Se(n,t){var r=typeof n;return t=null==t?9007199254740991:t,!!t&&("number"==r||"symbol"!=r&&bn.test(n))&&-1<n&&0==n%1&&n<t}function Oe(n,t,r){if(!gu(r))return!1;var e=typeof t;return!!("number"==e?lu(r)&&Se(t,r.length):"string"==e&&t in r)&&au(r[t],n)}function Ie(n,t){if(of(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!ju(n))||nn.test(n)||!X.test(n)||null!=t&&n in Yu(t)}function Re(n){var t=ge(n),r=mn[t];return"function"==typeof r&&t in On.prototype&&(n===r||(t=so(r),!!t&&n===t[0]))}function ze(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||ri)}function We(n,t){return function(r){return null!=r&&r[n]===t&&(t!==T||n in Yu(r))}}function Be(t,r,e){return r=Li(r===T?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Li(u.length-r,0),f=Vu(o);++i<o;)f[i]=u[r+i];for(i=-1,o=Vu(r+1);++i<r;)o[i]=u[i];return o[r]=e(f),n(t,this,o)}}function Le(n,t,r){var e=t+"";t=bo;var u,i=Te;return u=(u=e.match(an))?u[1].split(ln):[],r=i(u,r),(i=r.length)&&(u=i-1,r[u]=(1<i?"& ":"")+r[u],r=r.join(2<i?", ":" "),e=e.replace(cn,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Ue(n){var t=0,r=0;return function(){var e=Ci(),u=16-(e-r);if(r=e,0<u){if(800<=++t)return arguments[0]}else t=0;return n.apply(T,arguments)}}function Ce(n,t){var r=-1,e=n.length,u=e-1;for(t=t===T?e:t;++r<t;){var e=ir(r,u),i=n[e];n[e]=n[r],n[r]=i}return n.length=t,n}function De(n){if("string"==typeof n||ju(n))return n;var t=n+"";return"0"==t&&1/n==-$?"-0":t}function Me(n){if(null!=n){try{return ui.call(n)}catch(n){}return n+""}return""}function Te(n,t){return r(N,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function $e(n){if(n instanceof On)return n.clone();var t=new En(n.__wrapped__,n.__chain__);return t.__actions__=Ur(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Fe(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Au(r),0>r&&(r=Li(e+r,0)),_(n,ye(t,3),r)):-1}function Ne(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==T&&(u=Au(r),u=0>r?Li(e+u,0):Ui(u,e-1)),_(n,ye(t,3),u,!0)}function Pe(n){return(null==n?0:n.length)?wt(n,1):[]}function Ze(n){return n&&n.length?n[0]:T}function qe(n){var t=null==n?0:n.length;return t?n[t-1]:T}function Ve(n,t){return n&&n.length&&t&&t.length?er(n,t):n}function Ke(n){return null==n?n:Ti.call(n)}function Ge(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){if(su(n))return t=Li(n.length,t),!0}),A(t,function(t){return c(n,b(t))})}function He(t,r){if(!t||!t.length)return[];var e=Ge(t);return null==r?e:c(e,function(t){return n(r,T,t)})}function Je(n){return n=mn(n),n.__chain__=!0,n}function Ye(n,t){return t(n)}function Qe(){return this}function Xe(n,t){return(of(n)?r:eo)(n,ye(t,3))}function nu(n,t){return(of(n)?e:uo)(n,ye(t,3))}function tu(n,t){return(of(n)?c:Gt)(n,ye(t,3))}function ru(n,t,r){return t=r?T:t,t=n&&null==t?n.length:t,fe(n,128,T,T,T,T,t)}function eu(n,t){var r;if("function"!=typeof t)throw new ni("Expected a function");return n=Au(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=T),r}}function uu(n,t,r){return t=r?T:t,n=fe(n,8,T,T,T,T,T,t),n.placeholder=uu.placeholder,n}function iu(n,t,r){return t=r?T:t,n=fe(n,16,T,T,T,T,T,t),n.placeholder=iu.placeholder,n}function ou(n,t,r){function e(t){var r=c,e=a;return c=a=T,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return n-=_,p===T||r>=t||0>r||g&&n>=l}function i(){var n=Ko();if(u(n))return o(n);var r,e=yo;r=n-_,n=t-(n-p),r=g?Ui(n,l-r):n,h=e(i,r)}function o(n){return h=T,d&&c?e(n):(c=a=T,s)}function f(){var n=Ko(),r=u(n);if(c=arguments,a=this,p=n,r){if(h===T)return _=n=p,h=yo(i,t),v?e(n):s;if(g)return h=yo(i,t),e(p)}return h===T&&(h=yo(i,t)),s}var c,a,l,s,h,p,_=0,v=!1,g=!1,d=!0;if("function"!=typeof n)throw new ni("Expected a function");return t=ku(t)||0,gu(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Li(ku(r.maxWait)||0,t):l,d="trailing"in r?!!r.trailing:d),f.cancel=function(){h!==T&&ao(h),_=0,c=p=a=h=T},f.flush=function(){return h===T?s:o(Ko())},f}function fu(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new ni("Expected a function");return r.cache=new(fu.Cache||Tn),r}function cu(n){if("function"!=typeof n)throw new ni("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function au(n,t){return n===t||n!==n&&t!==t}function lu(n){return null!=n&&vu(n.length)&&!pu(n)}function su(n){return du(n)&&lu(n)}function hu(n){if(!du(n))return!1;var t=Ot(n);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!bu(n)}function pu(n){return!!gu(n)&&(n=Ot(n),"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function _u(n){return"number"==typeof n&&n==Au(n)}function vu(n){return"number"==typeof n&&-1<n&&0==n%1&&9007199254740991>=n}function gu(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function du(n){return null!=n&&"object"==typeof n}function yu(n){return"number"==typeof n||du(n)&&"[object Number]"==Ot(n)}function bu(n){return!(!du(n)||"[object Object]"!=Ot(n))&&(n=gi(n),null===n||(n=ii.call(n,"constructor")&&n.constructor,"function"==typeof n&&n instanceof n&&ui.call(n)==ai))}function xu(n){return"string"==typeof n||!of(n)&&du(n)&&"[object String]"==Ot(n)}function ju(n){return"symbol"==typeof n||du(n)&&"[object Symbol]"==Ot(n)}function wu(n){if(!n)return[];if(lu(n))return xu(n)?M(n):Ur(n);if(ji&&n[ji]){n=n[ji]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return t=_o(n),("[object Map]"==t?W:"[object Set]"==t?U:Lu)(n)}function mu(n){return n?(n=ku(n),n===$||n===-$?1.7976931348623157e308*(0>n?-1:1):n===n?n:0):0===n?n:0}function Au(n){n=mu(n);var t=n%1;return n===n?t?n-t:n:0}function Eu(n){return n?pt(Au(n),0,4294967295):0}function ku(n){if("number"==typeof n)return n;if(ju(n))return F;if(gu(n)&&(n="function"==typeof n.valueOf?n.valueOf():n,n=gu(n)?n+"":n),"string"!=typeof n)return 0===n?n:+n;n=n.replace(un,"");var t=gn.test(n);return t||yn.test(n)?Dn(n.slice(2),t?2:8):vn.test(n)?F:+n}function Su(n){return Cr(n,Wu(n))}function Ou(n){return null==n?"":yr(n)}function Iu(n,t,r){return n=null==n?T:kt(n,t),n===T?r:n}function Ru(n,t){return null!=n&&we(n,t,zt)}function zu(n){return lu(n)?Zn(n):Vt(n)}function Wu(n){if(lu(n))n=Zn(n,!0);else if(gu(n)){var t,r=ze(n),e=[];for(t in n)("constructor"!=t||!r&&ii.call(n,t))&&e.push(t);n=e}else{if(t=[],null!=n)for(r in Yu(n))t.push(r);n=t}return n}function Bu(n,t){if(null==n)return{};var r=c(ve(n),function(n){return[n]});return t=ye(t),tr(n,r,function(n,r){return t(n,r[0])})}function Lu(n){return null==n?[]:S(n,zu(n))}function Uu(n){return Tf(Ou(n).toLowerCase())}function Cu(n){return(n=Ou(n))&&n.replace(xn,Xn).replace(Sn,"")}function Du(n,t,r){return n=Ou(n),t=r?T:t,t===T?zn.test(n)?n.match(In)||[]:n.match(sn)||[]:n.match(t)||[]}function Mu(n){return function(){return n}}function Tu(n){return n}function $u(n){return qt("function"==typeof n?n:_t(n,1))}function Fu(n,t,e){var u=zu(t),i=Et(t,u);null!=e||gu(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=Et(t,zu(t)));var o=!(gu(e)&&"chain"in e&&!e.chain),f=pu(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Ur(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Nu(){}function Pu(n){return Ie(n)?b(De(n)):rr(n)}function Zu(){return[]}function qu(){return!1}x=null==x?$n:rt.defaults($n.Object(),x,rt.pick($n,Wn));var Vu=x.Array,Ku=x.Date,Gu=x.Error,Hu=x.Function,Ju=x.Math,Yu=x.Object,Qu=x.RegExp,Xu=x.String,ni=x.TypeError,ti=Vu.prototype,ri=Yu.prototype,ei=x["__core-js_shared__"],ui=Hu.prototype.toString,ii=ri.hasOwnProperty,oi=0,fi=function(){var n=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ci=ri.toString,ai=ui.call(Yu),li=$n._,si=Qu("^"+ui.call(ii).replace(rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hi=Pn?x.Buffer:T,pi=x.Symbol,_i=x.Uint8Array,vi=hi?hi.g:T,gi=B(Yu.getPrototypeOf,Yu),di=Yu.create,yi=ri.propertyIsEnumerable,bi=ti.splice,xi=pi?pi.isConcatSpreadable:T,ji=pi?pi.iterator:T,wi=pi?pi.toStringTag:T,mi=function(){try{var n=je(Yu,"defineProperty");return n({},"",{}),n}catch(n){}}(),Ai=x.clearTimeout!==$n.clearTimeout&&x.clearTimeout,Ei=Ku&&Ku.now!==$n.Date.now&&Ku.now,ki=x.setTimeout!==$n.setTimeout&&x.setTimeout,Si=Ju.ceil,Oi=Ju.floor,Ii=Yu.getOwnPropertySymbols,Ri=hi?hi.isBuffer:T,zi=x.isFinite,Wi=ti.join,Bi=B(Yu.keys,Yu),Li=Ju.max,Ui=Ju.min,Ci=Ku.now,Di=x.parseInt,Mi=Ju.random,Ti=ti.reverse,$i=je(x,"DataView"),Fi=je(x,"Map"),Ni=je(x,"Promise"),Pi=je(x,"Set"),Zi=je(x,"WeakMap"),qi=je(Yu,"create"),Vi=Zi&&new Zi,Ki={},Gi=Me($i),Hi=Me(Fi),Ji=Me(Ni),Yi=Me(Pi),Qi=Me(Zi),Xi=pi?pi.prototype:T,no=Xi?Xi.valueOf:T,to=Xi?Xi.toString:T,ro=function(){function n(){}return function(t){return gu(t)?di?di(t):(n.prototype=t,t=new n,n.prototype=T,t):{}}}();mn.templateSettings={escape:J,evaluate:Y,interpolate:Q,variable:"",imports:{_:mn}},mn.prototype=An.prototype,mn.prototype.constructor=mn,En.prototype=ro(An.prototype),En.prototype.constructor=En,On.prototype=ro(An.prototype),On.prototype.constructor=On,Un.prototype.clear=function(){this.__data__=qi?qi(null):{},this.size=0},Un.prototype["delete"]=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},Un.prototype.get=function(n){var t=this.__data__;return qi?(n=t[n],"__lodash_hash_undefined__"===n?T:n):ii.call(t,n)?t[n]:T},Un.prototype.has=function(n){var t=this.__data__;return qi?t[n]!==T:ii.call(t,n)},Un.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=qi&&t===T?"__lodash_hash_undefined__":t,this},Mn.prototype.clear=function(){this.__data__=[],this.size=0},Mn.prototype["delete"]=function(n){var t=this.__data__;return n=ft(t,n),!(0>n||(n==t.length-1?t.pop():bi.call(t,n,1),--this.size,0))},Mn.prototype.get=function(n){var t=this.__data__;return n=ft(t,n),0>n?T:t[n][1]},Mn.prototype.has=function(n){return-1<ft(this.__data__,n)},Mn.prototype.set=function(n,t){var r=this.__data__,e=ft(r,n);return 0>e?(++this.size,r.push([n,t])):r[e][1]=t,this},Tn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(Fi||Mn),string:new Un}},Tn.prototype["delete"]=function(n){return n=be(this,n)["delete"](n),this.size-=n?1:0,n},Tn.prototype.get=function(n){return be(this,n).get(n)},Tn.prototype.has=function(n){return be(this,n).has(n)},Tn.prototype.set=function(n,t){var r=be(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Fn.prototype.add=Fn.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(n){return this.__data__.has(n)},Nn.prototype.clear=function(){this.__data__=new Mn,this.size=0},Nn.prototype["delete"]=function(n){var t=this.__data__;return n=t["delete"](n),this.size=t.size,n},Nn.prototype.get=function(n){return this.__data__.get(n)},Nn.prototype.has=function(n){return this.__data__.has(n)},Nn.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Mn){var e=r.__data__;if(!Fi||199>e.length)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Tn(e)}return r.set(n,t),this.size=r.size,this};var eo=Fr(mt),uo=Fr(At,!0),io=Nr(),oo=Nr(!0),fo=Vi?function(n,t){return Vi.set(n,t),n}:Tu,co=mi?function(n,t){return mi(n,"toString",{configurable:!0,enumerable:!1,value:Mu(t),writable:!0})}:Tu,ao=Ai||function(n){return $n.clearTimeout(n)},lo=Pi&&1/U(new Pi([,-0]))[1]==$?function(n){return new Pi(n)}:Nu,so=Vi?function(n){return Vi.get(n)}:Nu,ho=Ii?function(n){return null==n?[]:(n=Yu(n),i(Ii(n),function(t){return yi.call(n,t)}))}:Zu,po=Ii?function(n){for(var t=[];n;)a(t,ho(n)),n=gi(n);return t}:Zu,_o=Ot;($i&&"[object DataView]"!=_o(new $i(new ArrayBuffer(1)))||Fi&&"[object Map]"!=_o(new Fi)||Ni&&"[object Promise]"!=_o(Ni.resolve())||Pi&&"[object Set]"!=_o(new Pi)||Zi&&"[object WeakMap]"!=_o(new Zi))&&(_o=function(n){var t=Ot(n);if(n=(n="[object Object]"==t?n.constructor:T)?Me(n):"")switch(n){case Gi:return"[object DataView]";case Hi:return"[object Map]";case Ji:return"[object Promise]";case Yi:return"[object Set]";case Qi:return"[object WeakMap]"}return t});var vo=ei?pu:qu,go=Ue(fo),yo=ki||function(n,t){return $n.setTimeout(n,t)},bo=Ue(co),xo=function(n){n=fu(n,function(n){return 500===t.size&&t.clear(),n});var t=n.cache;return n}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(tn,function(n,r,e,u){t.push(e?u.replace(hn,"$1"):r||n)}),t}),jo=fr(function(n,t){return su(n)?yt(n,wt(t,1,su,!0)):[]}),wo=fr(function(n,t){var r=qe(t);return su(r)&&(r=T),su(n)?yt(n,wt(t,1,su,!0),ye(r,2)):[]}),mo=fr(function(n,t){var r=qe(t);return su(r)&&(r=T),su(n)?yt(n,wt(t,1,su,!0),T,r):[]}),Ao=fr(function(n){var t=c(n,Er);return t.length&&t[0]===n[0]?Wt(t):[]}),Eo=fr(function(n){var t=qe(n),r=c(n,Er);return t===qe(r)?t=T:r.pop(),r.length&&r[0]===n[0]?Wt(r,ye(t,2)):[]}),ko=fr(function(n){var t=qe(n),r=c(n,Er);return(t="function"==typeof t?t:T)&&r.pop(),r.length&&r[0]===n[0]?Wt(r,T,t):[]}),So=fr(Ve),Oo=pe(function(n,t){var r=null==n?0:n.length,e=ht(n,t);return ur(n,c(t,function(n){return Se(n,r)?+n:n}).sort(Wr)),e}),Io=fr(function(n){return br(wt(n,1,su,!0))}),Ro=fr(function(n){var t=qe(n);return su(t)&&(t=T),br(wt(n,1,su,!0),ye(t,2))}),zo=fr(function(n){var t=qe(n),t="function"==typeof t?t:T;return br(wt(n,1,su,!0),T,t)}),Wo=fr(function(n,t){return su(n)?yt(n,t):[]}),Bo=fr(function(n){return mr(i(n,su))}),Lo=fr(function(n){var t=qe(n);return su(t)&&(t=T),mr(i(n,su),ye(t,2))}),Uo=fr(function(n){var t=qe(n),t="function"==typeof t?t:T;return mr(i(n,su),T,t)}),Co=fr(Ge),Do=fr(function(n){var t=n.length,t=1<t?n[t-1]:T,t="function"==typeof t?(n.pop(),t):T;return He(n,t)}),Mo=pe(function(n){function t(t){return ht(t,n)}var r=n.length,e=r?n[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof On&&Se(e)?(u=u.slice(e,+e+(r?1:0)),u.__actions__.push({func:Ye,args:[t],thisArg:T}),new En(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(T),n})):this.thru(t)}),To=Tr(function(n,t,r){ii.call(n,r)?++n[r]:st(n,r,1)}),$o=Gr(Fe),Fo=Gr(Ne),No=Tr(function(n,t,r){ii.call(n,r)?n[r].push(t):st(n,r,[t])}),Po=fr(function(t,r,e){var u=-1,i="function"==typeof r,o=lu(t)?Vu(t.length):[];return eo(t,function(t){o[++u]=i?n(r,t,e):Lt(t,r,e)}),o}),Zo=Tr(function(n,t,r){st(n,r,t)}),qo=Tr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Vo=fr(function(n,t){if(null==n)return[];var r=t.length;return 1<r&&Oe(n,t[0],t[1])?t=[]:2<r&&Oe(t[0],t[1],t[2])&&(t=[t[0]]),Xt(n,wt(t,1),[])}),Ko=Ei||function(){return $n.Date.now()},Go=fr(function(n,t,r){var e=1;if(r.length)var u=L(r,de(Go)),e=32|e;return fe(n,e,t,r,u)}),Ho=fr(function(n,t,r){var e=3;if(r.length)var u=L(r,de(Ho)),e=32|e;return fe(t,e,n,r,u)}),Jo=fr(function(n,t){return dt(n,1,t)}),Yo=fr(function(n,t,r){return dt(n,ku(t)||0,r)});fu.Cache=Tn;var Qo=fr(function(t,r){r=1==r.length&&of(r[0])?c(r[0],k(ye())):c(wt(r,1),k(ye()));var e=r.length;return fr(function(u){for(var i=-1,o=Ui(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),Xo=fr(function(n,t){return fe(n,32,T,t,L(t,de(Xo)))}),nf=fr(function(n,t){return fe(n,64,T,t,L(t,de(nf)))}),tf=pe(function(n,t){return fe(n,256,T,T,T,t)}),rf=ee(It),ef=ee(function(n,t){return n>=t}),uf=Ut(function(){return arguments}())?Ut:function(n){return du(n)&&ii.call(n,"callee")&&!yi.call(n,"callee")},of=Vu.isArray,ff=Vn?k(Vn):Ct,cf=Ri||qu,af=Kn?k(Kn):Dt,lf=Gn?k(Gn):Tt,sf=Hn?k(Hn):Nt,hf=Jn?k(Jn):Pt,pf=Yn?k(Yn):Zt,_f=ee(Kt),vf=ee(function(n,t){return n<=t}),gf=$r(function(n,t){if(ze(t)||lu(t))Cr(t,zu(t),n);else for(var r in t)ii.call(t,r)&&ot(n,r,t[r])}),df=$r(function(n,t){Cr(t,Wu(t),n)}),yf=$r(function(n,t,r,e){Cr(t,Wu(t),n,e)}),bf=$r(function(n,t,r,e){Cr(t,zu(t),n,e)}),xf=pe(ht),jf=fr(function(n,t){n=Yu(n);var r=-1,e=t.length,u=2<e?t[2]:T;for(u&&Oe(t[0],t[1],u)&&(e=1);++r<e;)for(var u=t[r],i=Wu(u),o=-1,f=i.length;++o<f;){var c=i[o],a=n[c];(a===T||au(a,ri[c])&&!ii.call(n,c))&&(n[c]=u[c])}return n}),wf=fr(function(t){return t.push(T,ae),n(Sf,T,t)}),mf=Yr(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=ci.call(t)),n[t]=r},Mu(Tu)),Af=Yr(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=ci.call(t)),ii.call(n,t)?n[t].push(r):n[t]=[r]},ye),Ef=fr(Lt),kf=$r(function(n,t,r){Yt(n,t,r)}),Sf=$r(function(n,t,r,e){Yt(n,t,r,e)}),Of=pe(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=Sr(t,n),e||(e=1<t.length),t}),Cr(n,ve(n),r),e&&(r=_t(r,7,le));for(var u=t.length;u--;)xr(r,t[u]);return r}),If=pe(function(n,t){return null==n?{}:nr(n,t)}),Rf=oe(zu),zf=oe(Wu),Wf=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?Uu(t):t)}),Bf=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Lf=qr(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Uf=Zr("toLowerCase"),Cf=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Df=qr(function(n,t,r){return n+(r?" ":"")+Tf(t)}),Mf=qr(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Tf=Zr("toUpperCase"),$f=fr(function(n,t){try{return r(n,T,t)}catch(r){return hu(r)?r:new Gu(r)}}),Ff=pe(function(n,t){return r(t,function(t){t=De(t),st(n,t,Go(n[t],n))}),n}),Nf=Hr(),Pf=Hr(!0),Zf=fr(function(n,t){return function(r){return Lt(r,n,t)}}),qf=fr(function(n,t){return function(r){return Lt(n,r,t)}}),Vf=Xr(c),Kf=Xr(u),Gf=Xr(h),Hf=re(),Jf=re(!0),Yf=Qr(function(n,t){return n+t},0),Qf=ie("ceil"),Xf=Qr(function(n,t){return n/t},1),nc=ie("floor"),tc=Qr(function(n,t){return n*t},1),rc=ie("round"),ec=Qr(function(n,t){return n-t},0);return mn.after=function(n,t){if("function"!=typeof t)throw new ni("Expected a function");return n=Au(n),function(){if(1>--n)return t.apply(this,arguments)}},mn.ary=ru,mn.assign=gf,mn.assignIn=df,mn.assignInWith=yf,mn.assignWith=bf,mn.at=xf,mn.before=eu,mn.bind=Go,mn.bindAll=Ff,mn.bindKey=Ho,mn.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return of(n)?n:[n]},mn.chain=Je,mn.chunk=function(n,t,r){if(t=(r?Oe(n,t,r):t===T)?1:Li(Au(t),0),r=null==n?0:n.length,!r||1>t)return[];for(var e=0,u=0,i=Vu(Si(r/t));e<r;)i[u++]=hr(n,e,e+=t);return i},mn.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},mn.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Vu(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return a(of(r)?Ur(r):[r],wt(t,1))},mn.cond=function(t){var r=null==t?0:t.length,e=ye();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new ni("Expected a function");return[e(n[0]),n[1]]}):[],fr(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})},mn.conforms=function(n){return vt(_t(n,1))},mn.constant=Mu,mn.countBy=To,mn.create=function(n,t){var r=ro(n);return null==t?r:at(r,t)},mn.curry=uu,mn.curryRight=iu,mn.debounce=ou,mn.defaults=jf,mn.defaultsDeep=wf,mn.defer=Jo,mn.delay=Yo,mn.difference=jo,mn.differenceBy=wo,mn.differenceWith=mo,mn.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),hr(n,0>t?0:t,e)):[]},mn.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),t=e-t,hr(n,0,0>t?0:t)):[]},mn.dropRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!0,!0):[]},mn.dropWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!0):[]},mn.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&"number"!=typeof r&&Oe(n,t,r)&&(r=0,e=u),u=n.length,r=Au(r),0>r&&(r=-r>u?0:u+r),e=e===T||e>u?u:Au(e),0>e&&(e+=u),e=r>e?0:Eu(e);r<e;)n[r++]=t;return n},mn.filter=function(n,t){return(of(n)?i:jt)(n,ye(t,3))},mn.flatMap=function(n,t){return wt(tu(n,t),1)},mn.flatMapDeep=function(n,t){return wt(tu(n,t),$)},mn.flatMapDepth=function(n,t,r){return r=r===T?1:Au(r),wt(tu(n,t),r)},mn.flatten=Pe,mn.flattenDeep=function(n){return(null==n?0:n.length)?wt(n,$):[]},mn.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===T?1:Au(t),wt(n,t)):[]},mn.flip=function(n){return fe(n,512)},mn.flow=Nf,mn.flowRight=Pf,mn.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},mn.functions=function(n){return null==n?[]:Et(n,zu(n))},mn.functionsIn=function(n){return null==n?[]:Et(n,Wu(n))},mn.groupBy=No,mn.initial=function(n){return(null==n?0:n.length)?hr(n,0,-1):[]},mn.intersection=Ao,mn.intersectionBy=Eo,mn.intersectionWith=ko,mn.invert=mf,mn.invertBy=Af,mn.invokeMap=Po,mn.iteratee=$u,mn.keyBy=Zo,mn.keys=zu,mn.keysIn=Wu,mn.map=tu,mn.mapKeys=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,t(n,e,u),n)}),r},mn.mapValues=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,e,t(n,e,u))}),r},mn.matches=function(n){return Ht(_t(n,1))},mn.matchesProperty=function(n,t){return Jt(n,_t(t,1))},mn.memoize=fu,mn.merge=kf,mn.mergeWith=Sf,mn.method=Zf,mn.methodOf=qf,mn.mixin=Fu,mn.negate=cu,mn.nthArg=function(n){return n=Au(n),fr(function(t){return Qt(t,n)})},mn.omit=Of,mn.omitBy=function(n,t){return Bu(n,cu(ye(t)))},mn.once=function(n){return eu(2,n)},mn.orderBy=function(n,t,r,e){return null==n?[]:(of(t)||(t=null==t?[]:[t]),r=e?T:r,of(r)||(r=null==r?[]:[r]),Xt(n,t,r))},mn.over=Vf,mn.overArgs=Qo,mn.overEvery=Kf,mn.overSome=Gf,mn.partial=Xo,mn.partialRight=nf,mn.partition=qo,mn.pick=If,mn.pickBy=Bu,mn.property=Pu,mn.propertyOf=function(n){return function(t){return null==n?T:kt(n,t)}},mn.pull=So,mn.pullAll=Ve,mn.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,ye(r,2)):n},mn.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,T,r):n},mn.pullAt=Oo,mn.range=Hf,mn.rangeRight=Jf,mn.rearg=tf,mn.reject=function(n,t){return(of(n)?i:jt)(n,cu(ye(t,3)))},mn.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=ye(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return ur(n,u),r},mn.rest=function(n,t){if("function"!=typeof n)throw new ni("Expected a function");return t=t===T?t:Au(t),fr(n,t)},mn.reverse=Ke,mn.sampleSize=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Au(t),(of(n)?Qn:ar)(n,t)},mn.set=function(n,t,r){return null==n?n:lr(n,t,r)},mn.setWith=function(n,t,r,e){return e="function"==typeof e?e:T,null==n?n:lr(n,t,r,e)},mn.shuffle=function(n){return(of(n)?ut:sr)(n)},mn.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&Oe(n,t,r)?(t=0,r=e):(t=null==t?0:Au(t),r=r===T?e:Au(r)),hr(n,t,r)):[]},mn.sortBy=Vo,mn.sortedUniq=function(n){return n&&n.length?gr(n):[]},mn.sortedUniqBy=function(n,t){return n&&n.length?gr(n,ye(t,2)):[]},mn.split=function(n,t,r){return r&&"number"!=typeof r&&Oe(n,t,r)&&(t=r=T),r=r===T?4294967295:r>>>0,r?(n=Ou(n))&&("string"==typeof t||null!=t&&!sf(t))&&(t=yr(t),!t&&Rn.test(n))?Or(M(n),0,r):n.split(t,r):[]},mn.spread=function(t,r){if("function"!=typeof t)throw new ni("Expected a function");return r=null==r?0:Li(Au(r),0),fr(function(e){var u=e[r];return e=Or(e,0,r),u&&a(e,u),n(t,this,e)})},mn.tail=function(n){var t=null==n?0:n.length;return t?hr(n,1,t):[]},mn.take=function(n,t,r){return n&&n.length?(t=r||t===T?1:Au(t),hr(n,0,0>t?0:t)):[]},mn.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),t=e-t,hr(n,0>t?0:t,e)):[]},mn.takeRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!1,!0):[]},mn.takeWhile=function(n,t){return n&&n.length?jr(n,ye(t,3)):[]},mn.tap=function(n,t){return t(n),n},mn.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new ni("Expected a function");return gu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ou(n,t,{leading:e,maxWait:t,trailing:u})},mn.thru=Ye,mn.toArray=wu,mn.toPairs=Rf,mn.toPairsIn=zf,mn.toPath=function(n){return of(n)?c(n,De):ju(n)?[n]:Ur(xo(Ou(n)))},mn.toPlainObject=Su,mn.transform=function(n,t,e){var u=of(n),i=u||cf(n)||pf(n);if(t=ye(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:gu(n)&&pu(o)?ro(gi(n)):{}}return(i?r:mt)(n,function(n,r,u){return t(e,n,r,u)}),e},mn.unary=function(n){return ru(n,1)},mn.union=Io,mn.unionBy=Ro,mn.unionWith=zo,mn.uniq=function(n){return n&&n.length?br(n):[]},mn.uniqBy=function(n,t){return n&&n.length?br(n,ye(t,2)):[]},mn.uniqWith=function(n,t){return t="function"==typeof t?t:T,n&&n.length?br(n,T,t):[]},mn.unset=function(n,t){return null==n||xr(n,t)},mn.unzip=Ge,mn.unzipWith=He,mn.update=function(n,t,r){return null==n?n:lr(n,t,kr(r)(kt(n,t)),void 0)},mn.updateWith=function(n,t,r,e){return e="function"==typeof e?e:T,null!=n&&(n=lr(n,t,kr(r)(kt(n,t)),e)),n},mn.values=Lu,mn.valuesIn=function(n){return null==n?[]:S(n,Wu(n))},mn.without=Wo,mn.words=Du,mn.wrap=function(n,t){return Xo(kr(t),n)},mn.xor=Bo,mn.xorBy=Lo,mn.xorWith=Uo,mn.zip=Co,mn.zipObject=function(n,t){return Ar(n||[],t||[],ot)},mn.zipObjectDeep=function(n,t){return Ar(n||[],t||[],lr)},mn.zipWith=Do,mn.entries=Rf,mn.entriesIn=zf,mn.extend=df,mn.extendWith=yf,Fu(mn,mn),mn.add=Yf,mn.attempt=$f,mn.camelCase=Wf,mn.capitalize=Uu,mn.ceil=Qf,mn.clamp=function(n,t,r){return r===T&&(r=t,t=T),r!==T&&(r=ku(r),r=r===r?r:0),t!==T&&(t=ku(t),t=t===t?t:0),pt(ku(n),t,r)},mn.clone=function(n){return _t(n,4)},mn.cloneDeep=function(n){return _t(n,5)},mn.cloneDeepWith=function(n,t){return t="function"==typeof t?t:T,_t(n,5,t)},mn.cloneWith=function(n,t){return t="function"==typeof t?t:T,_t(n,4,t)},mn.conformsTo=function(n,t){return null==t||gt(n,t,zu(t))},mn.deburr=Cu,mn.defaultTo=function(n,t){return null==n||n!==n?t:n},mn.divide=Xf,mn.endsWith=function(n,t,r){n=Ou(n),t=yr(t);var e=n.length,e=r=r===T?e:pt(Au(r),0,e);return r-=t.length,0<=r&&n.slice(r,e)==t},mn.eq=au,mn.escape=function(n){return(n=Ou(n))&&H.test(n)?n.replace(K,nt):n},mn.escapeRegExp=function(n){return(n=Ou(n))&&en.test(n)?n.replace(rn,"\\$&"):n},mn.every=function(n,t,r){var e=of(n)?u:bt;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},mn.find=$o,mn.findIndex=Fe,mn.findKey=function(n,t){return p(n,ye(t,3),mt)},mn.findLast=Fo,mn.findLastIndex=Ne,mn.findLastKey=function(n,t){return p(n,ye(t,3),At)},mn.floor=nc,mn.forEach=Xe,mn.forEachRight=nu,mn.forIn=function(n,t){return null==n?n:io(n,ye(t,3),Wu)},mn.forInRight=function(n,t){return null==n?n:oo(n,ye(t,3),Wu)},mn.forOwn=function(n,t){return n&&mt(n,ye(t,3))},mn.forOwnRight=function(n,t){return n&&At(n,ye(t,3))},mn.get=Iu,mn.gt=rf,mn.gte=ef,mn.has=function(n,t){return null!=n&&we(n,t,Rt)},mn.hasIn=Ru,mn.head=Ze,mn.identity=Tu,mn.includes=function(n,t,r,e){return n=lu(n)?n:Lu(n),r=r&&!e?Au(r):0,e=n.length,0>r&&(r=Li(e+r,0)),xu(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<v(n,t,r)},mn.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Au(r),0>r&&(r=Li(e+r,0)),v(n,t,r)):-1},mn.inRange=function(n,t,r){return t=mu(t),r===T?(r=t,t=0):r=mu(r),n=ku(n),n>=Ui(t,r)&&n<Li(t,r)},mn.invoke=Ef,mn.isArguments=uf,mn.isArray=of,mn.isArrayBuffer=ff,mn.isArrayLike=lu,mn.isArrayLikeObject=su,mn.isBoolean=function(n){return!0===n||!1===n||du(n)&&"[object Boolean]"==Ot(n)},mn.isBuffer=cf,mn.isDate=af,mn.isElement=function(n){return du(n)&&1===n.nodeType&&!bu(n)},mn.isEmpty=function(n){if(null==n)return!0;if(lu(n)&&(of(n)||"string"==typeof n||"function"==typeof n.splice||cf(n)||pf(n)||uf(n)))return!n.length;var t=_o(n);if("[object Map]"==t||"[object Set]"==t)return!n.size;if(ze(n))return!Vt(n).length;for(var r in n)if(ii.call(n,r))return!1;return!0},mn.isEqual=function(n,t){return Mt(n,t)},mn.isEqualWith=function(n,t,r){var e=(r="function"==typeof r?r:T)?r(n,t):T;return e===T?Mt(n,t,T,r):!!e},mn.isError=hu,mn.isFinite=function(n){return"number"==typeof n&&zi(n)},mn.isFunction=pu,mn.isInteger=_u,mn.isLength=vu,mn.isMap=lf,mn.isMatch=function(n,t){return n===t||$t(n,t,xe(t))},mn.isMatchWith=function(n,t,r){return r="function"==typeof r?r:T,$t(n,t,xe(t),r)},mn.isNaN=function(n){return yu(n)&&n!=+n},mn.isNative=function(n){if(vo(n))throw new Gu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ft(n)},mn.isNil=function(n){return null==n},mn.isNull=function(n){return null===n},mn.isNumber=yu,mn.isObject=gu,mn.isObjectLike=du,mn.isPlainObject=bu,mn.isRegExp=sf,mn.isSafeInteger=function(n){return _u(n)&&-9007199254740991<=n&&9007199254740991>=n},mn.isSet=hf,mn.isString=xu,mn.isSymbol=ju,mn.isTypedArray=pf,mn.isUndefined=function(n){return n===T},mn.isWeakMap=function(n){return du(n)&&"[object WeakMap]"==_o(n)},mn.isWeakSet=function(n){return du(n)&&"[object WeakSet]"==Ot(n)},mn.join=function(n,t){return null==n?"":Wi.call(n,t)},mn.kebabCase=Bf,mn.last=qe,mn.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==T&&(u=Au(r),u=0>u?Li(e+u,0):Ui(u,e-1)),t===t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=_(n,d,u,!0);return n},mn.lowerCase=Lf,mn.lowerFirst=Uf,mn.lt=_f,mn.lte=vf,mn.max=function(n){return n&&n.length?xt(n,Tu,It):T},mn.maxBy=function(n,t){return n&&n.length?xt(n,ye(t,2),It):T},mn.mean=function(n){return y(n,Tu)},mn.meanBy=function(n,t){return y(n,ye(t,2))},mn.min=function(n){return n&&n.length?xt(n,Tu,Kt):T},mn.minBy=function(n,t){return n&&n.length?xt(n,ye(t,2),Kt):T},mn.stubArray=Zu,mn.stubFalse=qu,mn.stubObject=function(){return{}},mn.stubString=function(){return""},mn.stubTrue=function(){return!0},mn.multiply=tc,mn.nth=function(n,t){return n&&n.length?Qt(n,Au(t)):T},mn.noConflict=function(){return $n._===this&&($n._=li),this},mn.noop=Nu,mn.now=Ko,mn.pad=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return!t||e>=t?n:(t=(t-e)/2,ne(Oi(t),r)+n+ne(Si(t),r))},mn.padEnd=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return t&&e<t?n+ne(t-e,r):n},mn.padStart=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return t&&e<t?ne(t-e,r)+n:n},mn.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Di(Ou(n).replace(on,""),t||0)},mn.random=function(n,t,r){if(r&&"boolean"!=typeof r&&Oe(n,t,r)&&(t=r=T),r===T&&("boolean"==typeof t?(r=t,t=T):"boolean"==typeof n&&(r=n,n=T)),n===T&&t===T?(n=0,t=1):(n=mu(n),t===T?(t=n,n=0):t=mu(t)),n>t){var e=n;n=t,t=e}return r||n%1||t%1?(r=Mi(),Ui(n+r*(t-n+Cn("1e-"+((r+"").length-1))),t)):ir(n,t)},mn.reduce=function(n,t,r){var e=of(n)?l:j,u=3>arguments.length;return e(n,ye(t,4),r,u,eo)},mn.reduceRight=function(n,t,r){var e=of(n)?s:j,u=3>arguments.length;return e(n,ye(t,4),r,u,uo)},mn.repeat=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Au(t),or(Ou(n),t)},mn.replace=function(){var n=arguments,t=Ou(n[0]);return 3>n.length?t:t.replace(n[1],n[2])},mn.result=function(n,t,r){t=Sr(t,n);var e=-1,u=t.length;for(u||(u=1,n=T);++e<u;){var i=null==n?T:n[De(t[e])];i===T&&(e=u,i=r),n=pu(i)?i.call(n):i}return n},mn.round=rc,mn.runInContext=et,mn.sample=function(n){return(of(n)?qn:cr)(n)},mn.size=function(n){if(null==n)return 0;if(lu(n))return xu(n)?D(n):n.length;var t=_o(n);return"[object Map]"==t||"[object Set]"==t?n.size:Vt(n).length},mn.snakeCase=Cf,mn.some=function(n,t,r){var e=of(n)?h:pr;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},mn.sortedIndex=function(n,t){return _r(n,t)},mn.sortedIndexBy=function(n,t,r){return vr(n,t,ye(r,2))},mn.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=_r(n,t);if(e<r&&au(n[e],t))return e}return-1},mn.sortedLastIndex=function(n,t){return _r(n,t,!0)},mn.sortedLastIndexBy=function(n,t,r){return vr(n,t,ye(r,2),!0)},mn.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=_r(n,t,!0)-1;if(au(n[r],t))return r}return-1},mn.startCase=Df,mn.startsWith=function(n,t,r){
return n=Ou(n),r=null==r?0:pt(Au(r),0,n.length),t=yr(t),n.slice(r,r+t.length)==t},mn.subtract=ec,mn.sum=function(n){return n&&n.length?m(n,Tu):0},mn.sumBy=function(n,t){return n&&n.length?m(n,ye(t,2)):0},mn.template=function(n,t,r){var e=mn.templateSettings;r&&Oe(n,t,r)&&(t=T),n=Ou(n),t=yf({},t,e,ce),r=yf({},t.imports,e.imports,ce);var u,i,o=zu(r),f=S(r,o),c=0;r=t.interpolate||jn;var a="__p+='";r=Qu((t.escape||jn).source+"|"+r.source+"|"+(r===Q?pn:jn).source+"|"+(t.evaluate||jn).source+"|$","g");var l="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(wn,z),r&&(u=!0,a+="'+__e("+r+")+'"),f&&(i=!0,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=t.variable)||(a="with(obj){"+a+"}"),a=(i?a.replace(P,""):a).replace(Z,"$1").replace(q,"$1;"),a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=$f(function(){return Hu(o,l+"return "+a).apply(T,f)}),t.source=a,hu(t))throw t;return t},mn.times=function(n,t){if(n=Au(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Ui(n,4294967295);for(t=ye(t),n-=4294967295,e=A(e,t);++r<n;)t(r);return e},mn.toFinite=mu,mn.toInteger=Au,mn.toLength=Eu,mn.toLower=function(n){return Ou(n).toLowerCase()},mn.toNumber=ku,mn.toSafeInteger=function(n){return n?pt(Au(n),-9007199254740991,9007199254740991):0===n?n:0},mn.toString=Ou,mn.toUpper=function(n){return Ou(n).toUpperCase()},mn.trim=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(un,""):n&&(t=yr(t))?(n=M(n),r=M(t),t=I(n,r),r=R(n,r)+1,Or(n,t,r).join("")):n},mn.trimEnd=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(fn,""):n&&(t=yr(t))?(n=M(n),t=R(n,M(t))+1,Or(n,0,t).join("")):n},mn.trimStart=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(on,""):n&&(t=yr(t))?(n=M(n),t=I(n,M(t)),Or(n,t).join("")):n},mn.truncate=function(n,t){var r=30,e="...";if(gu(t))var u="separator"in t?t.separator:u,r="length"in t?Au(t.length):r,e="omission"in t?yr(t.omission):e;n=Ou(n);var i=n.length;if(Rn.test(n))var o=M(n),i=o.length;if(r>=i)return n;if(i=r-D(e),1>i)return e;if(r=o?Or(o,0,i).join(""):n.slice(0,i),u===T)return r+e;if(o&&(i+=r.length-i),sf(u)){if(n.slice(i).search(u)){var f=r;for(u.global||(u=Qu(u.source,Ou(_n.exec(u))+"g")),u.lastIndex=0;o=u.exec(f);)var c=o.index;r=r.slice(0,c===T?i:c)}}else n.indexOf(yr(u),i)!=i&&(u=r.lastIndexOf(u),-1<u&&(r=r.slice(0,u)));return r+e},mn.unescape=function(n){return(n=Ou(n))&&G.test(n)?n.replace(V,tt):n},mn.uniqueId=function(n){var t=++oi;return Ou(n)+t},mn.upperCase=Mf,mn.upperFirst=Tf,mn.each=Xe,mn.eachRight=nu,mn.first=Ze,Fu(mn,function(){var n={};return mt(mn,function(t,r){ii.call(mn.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),mn.VERSION="4.17.10",r("bind bindKey curry curryRight partial partialRight".split(" "),function(n){mn[n].placeholder=mn}),r(["drop","take"],function(n,t){On.prototype[n]=function(r){r=r===T?1:Li(Au(r),0);var e=this.__filtered__&&!t?new On(this):this.clone();return e.__filtered__?e.__takeCount__=Ui(r,e.__takeCount__):e.__views__.push({size:Ui(r,4294967295),type:n+(0>e.__dir__?"Right":"")}),e},On.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){var r=t+1,e=1==r||3==r;On.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:ye(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){var r="take"+(t?"Right":"");On.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");On.prototype[n]=function(){return this.__filtered__?new On(this):this[r](1)}}),On.prototype.compact=function(){return this.filter(Tu)},On.prototype.find=function(n){return this.filter(n).head()},On.prototype.findLast=function(n){return this.reverse().find(n)},On.prototype.invokeMap=fr(function(n,t){return"function"==typeof n?new On(this):this.map(function(r){return Lt(r,n,t)})}),On.prototype.reject=function(n){return this.filter(cu(ye(n)))},On.prototype.slice=function(n,t){n=Au(n);var r=this;return r.__filtered__&&(0<n||0>t)?new On(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==T&&(t=Au(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},On.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},On.prototype.toArray=function(){return this.take(4294967295)},mt(On.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=mn[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(mn.prototype[t]=function(){function t(n){return n=u.apply(mn,a([n],f)),e&&h?n[0]:n}var o=this.__wrapped__,f=e?[1]:arguments,c=o instanceof On,l=f[0],s=c||of(o);s&&r&&"function"==typeof l&&1!=l.length&&(c=s=!1);var h=this.__chain__,p=!!this.__actions__.length,l=i&&!h,c=c&&!p;return!i&&s?(o=c?o:new On(this),o=n.apply(o,f),o.__actions__.push({func:Ye,args:[t],thisArg:T}),new En(o,h)):l&&c?n.apply(this,f):(o=this.thru(t),l?e?o.value()[0]:o.value():o)})}),r("pop push shift sort splice unshift".split(" "),function(n){var t=ti[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);mn.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(of(u)?u:[],n)}return this[r](function(r){return t.apply(of(r)?r:[],n)})}}),mt(On.prototype,function(n,t){var r=mn[t];if(r){var e=r.name+"";(Ki[e]||(Ki[e]=[])).push({name:t,func:r})}}),Ki[Jr(T,2).name]=[{name:"wrapper",func:T}],On.prototype.clone=function(){var n=new On(this.__wrapped__);return n.__actions__=Ur(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ur(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ur(this.__views__),n},On.prototype.reverse=function(){if(this.__filtered__){var n=new On(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},On.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=of(t),u=0>r,i=e?t.length:0;n=i;for(var o=this.__views__,f=0,c=-1,a=o.length;++c<a;){var l=o[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=Ui(n,f+s);break;case"takeRight":f=Li(f,n-s)}}if(n={start:f,end:n},o=n.start,f=n.end,n=f-o,o=u?f:o-1,f=this.__iteratees__,c=f.length,a=0,l=Ui(n,this.__takeCount__),!e||!u&&i==n&&l==n)return wr(t,this.__actions__);e=[];n:for(;n--&&a<l;){for(o+=r,u=-1,i=t[o];++u<c;){var h=f[u],s=h.type,h=(0,h.iteratee)(i);if(2==s)i=h;else if(!h){if(1==s)continue n;break n}}e[a++]=i}return e},mn.prototype.at=Mo,mn.prototype.chain=function(){return Je(this)},mn.prototype.commit=function(){return new En(this.value(),this.__chain__)},mn.prototype.next=function(){this.__values__===T&&(this.__values__=wu(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?T:this.__values__[this.__index__++]}},mn.prototype.plant=function(n){for(var t,r=this;r instanceof An;){var e=$e(r);e.__index__=0,e.__values__=T,t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},mn.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof On?(this.__actions__.length&&(n=new On(this)),n=n.reverse(),n.__actions__.push({func:Ye,args:[Ke],thisArg:T}),new En(n,this.__chain__)):this.thru(Ke)},mn.prototype.toJSON=mn.prototype.valueOf=mn.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},mn.prototype.first=mn.prototype.head,ji&&(mn.prototype[ji]=Qe),mn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($n._=rt,define(function(){return rt})):Nn?((Nn.exports=rt)._=rt,Fn._=rt):$n._=rt}).call(this);
/**
 * gridstack.js 0.4.0
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2018 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(t){if("function"==typeof define&&define.amd)define(["jquery","lodash"],t);else if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(e){}try{_=require("lodash")}catch(e){}t(jQuery,_)}else t(jQuery,_)}(function(t,e){function i(t){this.grid=t}var o=window,a=function(t,e,i){var o=function(){return console.warn("gridstack.js: Function `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+i+"`. It will be **completely** removed in v1.0."),t.apply(this,arguments)};return o.prototype=t.prototype,o},n=function(t,e){console.warn("gridstack.js: Option `"+t+"` is deprecated as of v0.2.5 and has been replaced with `"+e+"`. It will be **completely** removed in v1.0.")},s={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,i,o){return o=o||e.chain(t).map(function(t){return t.x+t.width}).max().value(),i=i!=-1?1:-1,e.sortBy(t,[function(t){return i*(t.x+t.y*o)}])},createStylesheet:function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.setAttribute("data-gs-style-id",t),e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet},removeStylesheet:function(e){t("STYLE[data-gs-style-id="+e+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?(t=t.toLowerCase(),!(""===t||"no"==t||"false"==t||"0"==t)):Boolean(t)},_collisionNodeCheck:function(t){return t!=this.node&&s.isIntercepted(t,this.nn)},_didCollide:function(t){return s.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return s.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var i=t,o="px";if(i&&e.isString(i)){var a=i.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!a)throw new Error("Invalid height");o=a[2]||"px",i=parseFloat(a[1])}return{height:i,unit:o}},removePositioningStyles:function(t){var e=t[0].style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")},getScrollParent:function(t){var e;return e=null==t?null:t.scrollHeight>t.clientHeight?t:s.getScrollParent(t.parentNode)},updateScrollPosition:function(t,e,i){var o=t.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight;if(o.top<0||o.bottom>a){var n=o.bottom-a,d=o.top,r=s.getScrollParent(t),h=r.scrollTop;null!=r&&(o.top<0&&i<0?t.offsetHeight>a?r.scrollTop+=i:r.scrollTop+=Math.abs(d)>Math.abs(i)?i:d:i>0&&(t.offsetHeight>a?r.scrollTop+=i:r.scrollTop+=n>i?i:n),e.position.top+=r.scrollTop-h)}}};s.is_intercepted=a(s.isIntercepted,"is_intercepted","isIntercepted"),s.create_stylesheet=a(s.createStylesheet,"create_stylesheet","createStylesheet"),s.remove_stylesheet=a(s.removeStylesheet,"remove_stylesheet","removeStylesheet"),s.insert_css_rule=a(s.insertCSSRule,"insert_css_rule","insertCSSRule"),i.registeredPlugins=[],i.registerPlugin=function(t){i.registeredPlugins.push(t)},i.prototype.resizable=function(t,e){return this},i.prototype.draggable=function(t,e){return this},i.prototype.droppable=function(t,e){return this},i.prototype.isDroppable=function(t){return!1},i.prototype.on=function(t,e,i){return this};var d=0,r=function(t,e,i,o,a){this.width=t,this["float"]=i||!1,this.height=o||0,this.nodes=a||[],this.onchange=e||function(){},this._updateCounter=0,this._float=this["float"],this._addedNodes=[],this._removedNodes=[]};r.prototype.batchUpdate=function(){this._updateCounter=1,this["float"]=!0},r.prototype.commit=function(){0!==this._updateCounter&&(this._updateCounter=0,this["float"]=this._float,this._packNodes(),this._notify())},r.prototype.getNodeDataByDOMEl=function(t){return e.find(this.nodes,function(e){return t.get(0)===e.el.get(0)})},r.prototype._fixCollisions=function(t){this._sortNodes(-1);var i=t,o=Boolean(e.find(this.nodes,function(t){return t.locked}));for(this["float"]||o||(i={x:0,y:t.y,width:this.width,height:t.height});;){var a=e.find(this.nodes,e.bind(s._collisionNodeCheck,{node:t,nn:i}));if("undefined"==typeof a)return;this.moveNode(a,a.x,t.y+t.height,a.width,a.height,!0)}},r.prototype.isAreaEmpty=function(t,i,o,a){var n={x:t||0,y:i||0,width:o||1,height:a||1},d=e.find(this.nodes,e.bind(function(t){return s.isIntercepted(t,n)},this));return null===d||"undefined"==typeof d},r.prototype._sortNodes=function(t){this.nodes=s.sort(this.nodes,t,this.width)},r.prototype._packNodes=function(){this._sortNodes(),this["float"]?e.each(this.nodes,e.bind(function(t,i){if(!t._updating&&"undefined"!=typeof t._origY&&t.y!=t._origY)for(var o=t.y;o>=t._origY;){var a=e.chain(this.nodes).take(i).find(e.bind(s._didCollide,{n:t,newY:o})).value();a||(t._dirty=!0,t.y=o),--o}},this)):e.each(this.nodes,e.bind(function(t,i){if(!t.locked)for(;t.y>0;){var o=t.y-1,a=0===i;if(i>0){var n=e.chain(this.nodes).take(i).find(e.bind(s._didCollide,{n:t,newY:o})).value();a="undefined"==typeof n}if(!a)break;t._dirty=t.y!=o,t.y=o}},this))},r.prototype._prepareNode=function(t,i){return t=e.defaults(t||{},{width:1,height:1,x:0,y:0}),t.x=parseInt(""+t.x),t.y=parseInt(""+t.y),t.width=parseInt(""+t.width),t.height=parseInt(""+t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,t.width>this.width?t.width=this.width:t.width<1&&(t.width=1),t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.x+t.width>this.width&&(i?t.width=this.width-t.x:t.x=this.width-t.width),t.y<0&&(t.y=0),t},r.prototype._notify=function(){var t=Array.prototype.slice.call(arguments,0);if(t[0]="undefined"==typeof t[0]?[]:[t[0]],t[1]="undefined"==typeof t[1]||t[1],!this._updateCounter){var e=t[0].concat(this.getDirtyNodes());this.onchange(e,t[1])}},r.prototype.cleanNodes=function(){this._updateCounter||e.each(this.nodes,function(t){t._dirty=!1})},r.prototype.getDirtyNodes=function(){return e.filter(this.nodes,function(t){return t._dirty})},r.prototype.addNode=function(t,i){if(t=this._prepareNode(t),"undefined"!=typeof t.maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),"undefined"!=typeof t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),"undefined"!=typeof t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t._id=++d,t._dirty=!0,t.autoPosition){this._sortNodes();for(var o=0;;++o){var a=o%this.width,n=Math.floor(o/this.width);if(!(a+t.width>this.width||e.find(this.nodes,e.bind(s._isAddNodeIntercepted,{x:a,y:n,node:t})))){t.x=a,t.y=n;break}}}return this.nodes.push(t),"undefined"!=typeof i&&i&&this._addedNodes.push(e.clone(t)),this._fixCollisions(t),this._packNodes(),this._notify(),t},r.prototype.removeNode=function(t,i){i="undefined"==typeof i||i,this._removedNodes.push(e.clone(t)),t._id=null,this.nodes=e.without(this.nodes,t),this._packNodes(),this._notify(t,i)},r.prototype.canMoveNode=function(i,o,a,n,s){if(!this.isNodeChangedPosition(i,o,a,n,s))return!1;var d=Boolean(e.find(this.nodes,function(t){return t.locked}));if(!this.height&&!d)return!0;var h,l=new r(this.width,null,this["float"],0,e.map(this.nodes,function(e){return e==i?h=t.extend({},e):t.extend({},e)}));if("undefined"==typeof h)return!0;l.moveNode(h,o,a,n,s);var p=!0;return d&&(p&=!Boolean(e.find(l.nodes,function(t){return t!=h&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.height&&(p&=l.getGridHeight()<=this.height),p},r.prototype.canBePlacedWithRespectToHeight=function(i){if(!this.height)return!0;var o=new r(this.width,null,this["float"],0,e.map(this.nodes,function(e){return t.extend({},e)}));return o.addNode(i),o.getGridHeight()<=this.height},r.prototype.isNodeChangedPosition=function(t,e,i,o,a){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),"undefined"!=typeof t.maxWidth&&(o=Math.min(o,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(a=Math.min(a,t.maxHeight)),"undefined"!=typeof t.minWidth&&(o=Math.max(o,t.minWidth)),"undefined"!=typeof t.minHeight&&(a=Math.max(a,t.minHeight)),t.x!=e||t.y!=i||t.width!=o||t.height!=a},r.prototype.moveNode=function(t,e,i,o,a,n){if(!this.isNodeChangedPosition(t,e,i,o,a))return t;if("number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),"undefined"!=typeof t.maxWidth&&(o=Math.min(o,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(a=Math.min(a,t.maxHeight)),"undefined"!=typeof t.minWidth&&(o=Math.max(o,t.minWidth)),"undefined"!=typeof t.minHeight&&(a=Math.max(a,t.minHeight)),t.x==e&&t.y==i&&t.width==o&&t.height==a)return t;var s=t.width!=o;return t._dirty=!0,t.x=e,t.y=i,t.width=o,t.height=a,t.lastTriedX=e,t.lastTriedY=i,t.lastTriedWidth=o,t.lastTriedHeight=a,t=this._prepareNode(t,s),this._fixCollisions(t),n||(this._packNodes(),this._notify()),t},r.prototype.getGridHeight=function(){return e.reduce(this.nodes,function(t,e){return Math.max(t,e.y+e.height)},0)},r.prototype.beginUpdate=function(t){e.each(this.nodes,function(t){t._origY=t.y}),t._updating=!0},r.prototype.endUpdate=function(){e.each(this.nodes,function(t){t._origY=t.y});var t=e.find(this.nodes,function(t){return t._updating});t&&(t._updating=!1)};var h=function(o,a){var d,h,l=this;a=a||{},this.container=t(o),"undefined"!=typeof a.handle_class&&(a.handleClass=a.handle_class,n("handle_class","handleClass")),"undefined"!=typeof a.item_class&&(a.itemClass=a.item_class,n("item_class","itemClass")),"undefined"!=typeof a.placeholder_class&&(a.placeholderClass=a.placeholder_class,n("placeholder_class","placeholderClass")),"undefined"!=typeof a.placeholder_text&&(a.placeholderText=a.placeholder_text,n("placeholder_text","placeholderText")),"undefined"!=typeof a.cell_height&&(a.cellHeight=a.cell_height,n("cell_height","cellHeight")),"undefined"!=typeof a.vertical_margin&&(a.verticalMargin=a.vertical_margin,n("vertical_margin","verticalMargin")),"undefined"!=typeof a.min_width&&(a.minWidth=a.min_width,n("min_width","minWidth")),"undefined"!=typeof a.static_grid&&(a.staticGrid=a.static_grid,n("static_grid","staticGrid")),"undefined"!=typeof a.is_nested&&(a.isNested=a.is_nested,n("is_nested","isNested")),"undefined"!=typeof a.always_show_resize_handle&&(a.alwaysShowResizeHandle=a.always_show_resize_handle,n("always_show_resize_handle","alwaysShowResizeHandle")),a.itemClass=a.itemClass||"grid-stack-item";var p=this.container.closest("."+a.itemClass).length>0;if(this.opts=e.defaults(a||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,"float":!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:a.alwaysShowResizeHandle||!1,resizable:e.defaults(a.resizable||{},{autoHide:!a.alwaysShowResizeHandle,handles:"se"}),draggable:e.defaults(a.draggable||{},{handle:(a.handleClass?"."+a.handleClass:a.handle?a.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:a.disableDrag||!1,disableResize:a.disableResize||!1,rtl:"auto",removable:!1,removableOptions:e.defaults(a.removableOptions||{},{accept:"."+a.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:a.disableOneColumnMode||!1,oneColumnModeClass:a.oneColumnModeClass||"grid-stack-one-column-mode",ddPlugin:null}),this.opts.ddPlugin===!1?this.opts.ddPlugin=i:null===this.opts.ddPlugin&&(this.opts.ddPlugin=e.first(i.registeredPlugins)||i),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.container.css("direction")),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=p,h="auto"===this.opts.cellHeight,h?l.cellHeight(l.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),p&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new r(this.opts.width,function(t,i){i="undefined"==typeof i||i;var o=0;e.each(this.nodes,function(t){o=Math.max(o,t.y+t.height)}),e.each(t,function(t){i&&null===t._id?t.el&&t.el.remove():t.el.attr("data-gs-x",t.x).attr("data-gs-y",t.y).attr("data-gs-width",t.width).attr("data-gs-height",t.height)}),l._updateStyles(o+10)},this.opts["float"],this.opts.height),this.opts.auto){var g=[],c=this;this.container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(e,i){i=t(i),g.push({el:i,i:parseInt(i.attr("data-gs-x"))+parseInt(i.attr("data-gs-y"))*c.opts.width})}),e.chain(g).sortBy(function(t){return t.i}).each(function(t){l._prepareElement(t.el)}).value()}if(this.setAnimation(this.opts.animate),this.placeholder=t('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=e.throttle(function(){l.cellHeight(l.cellWidth(),!1)},100),this.onResizeHandler=function(){if(h&&l._updateHeightsOnResize(),l._isOneColumnMode()&&!l.opts.disableOneColumnMode){if(d)return;l.container.addClass(l.opts.oneColumnModeClass),d=!0,l.grid._sortNodes(),e.each(l.grid.nodes,function(t){l.container.append(t.el),l.opts.staticGrid||(l.dd.draggable(t.el,"disable"),l.dd.resizable(t.el,"disable"),t.el.trigger("resize"))})}else{if(!d)return;if(l.container.removeClass(l.opts.oneColumnModeClass),d=!1,l.opts.staticGrid)return;e.each(l.grid.nodes,function(t){t.noMove||l.opts.disableDrag||l.dd.draggable(t.el,"enable"),t.noResize||l.opts.disableResize||l.dd.resizable(t.el,"enable"),t.el.trigger("resize")})}},t(window).resize(this.onResizeHandler),this.onResizeHandler(),!l.opts.staticGrid&&"string"==typeof l.opts.removable){var u=t(l.opts.removable);this.dd.isDroppable(u)||this.dd.droppable(u,l.opts.removableOptions),this.dd.on(u,"dropover",function(e,i){var o=t(i.draggable),a=o.data("_gridstack_node");a._grid===l&&(o.data("inTrashZone",!0),l._setupRemovingTimeout(o))}).on(u,"dropout",function(e,i){var o=t(i.draggable),a=o.data("_gridstack_node");a._grid===l&&(o.data("inTrashZone",!1),l._clearRemovingTimeout(o))})}if(!l.opts.staticGrid&&l.opts.acceptWidgets){var _=null,f=function(t,e){var i=_,o=i.data("_gridstack_node"),a=l.getCellFromPixel({left:t.pageX,top:t.pageY},!0),n=Math.max(0,a.x),s=Math.max(0,a.y);o._added||(o._added=!0,o.el=i,o.autoPosition=!0,o.x=n,o.y=s,l.grid.cleanNodes(),l.grid.beginUpdate(o),l.grid.addNode(o),l.container.append(l.placeholder),l.placeholder.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).show(),o.el=l.placeholder,o._beforeDragX=o.x,o._beforeDragY=o.y,l._updateContainerHeight()),l.grid.canMoveNode(o,n,s)&&(l.grid.moveNode(o,n,s),l._updateContainerHeight())};this.dd.droppable(l.container,{accept:function(e){e=t(e);var i=e.data("_gridstack_node");return(!i||i._grid!==l)&&e.is(l.opts.acceptWidgets===!0?".grid-stack-item":l.opts.acceptWidgets)}}).on(l.container,"dropover",function(e,i){var o=(l.container.offset(),t(i.draggable)),a=l.cellWidth(),n=l.cellHeight(),s=o.data("_gridstack_node"),d=s?s.width:Math.ceil(o.outerWidth()/a),r=s?s.height:Math.ceil(o.outerHeight()/n);_=o;var h=l.grid._prepareNode({width:d,height:r,_added:!1,_temporary:!0});o.data("_gridstack_node",h),o.data("_gridstack_node_orig",s),o.on("drag",f)}).on(l.container,"dropout",function(e,i){var o=t(i.draggable);if(o.data("_gridstack_node")){o.unbind("drag",f);var a=o.data("_gridstack_node");a.el=null,l.grid.removeNode(a),l.placeholder.detach(),l._updateContainerHeight(),o.data("_gridstack_node",o.data("_gridstack_node_orig"))}}).on(l.container,"drop",function(e,i){l.placeholder.detach();var o=t(i.draggable).data("_gridstack_node");o._grid=l;var a=t(i.draggable).clone(!1);a.data("_gridstack_node",o);var n=t(i.draggable).data("_gridstack_node_orig");"undefined"!=typeof n&&"undefined"!=typeof n._grid&&n._grid._triggerRemoveEvent(),t(i.helper).remove(),o.el=a,l.placeholder.hide(),s.removePositioningStyles(a),a.find("div.ui-resizable-handle").remove(),a.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).addClass(l.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",f),l.container.append(a),l._prepareElementsByNode(a,o),l._updateContainerHeight(),l.grid._addedNodes.push(o),l._triggerAddEvent(),l._triggerChangeEvent(),l.grid.endUpdate(),t(i.draggable).unbind("drag",f),t(i.draggable).removeData("_gridstack_node"),t(i.draggable).removeData("_gridstack_node_orig")})}};return h.prototype._triggerChangeEvent=function(t){var e=this.grid.getDirtyNodes(),i=!1,o=[];e&&e.length&&(o.push(e),i=!0),(i||t===!0)&&this.container.trigger("change",o)},h.prototype._triggerAddEvent=function(){this.grid._addedNodes&&this.grid._addedNodes.length>0&&(this.container.trigger("added",[e.map(this.grid._addedNodes,e.clone)]),this.grid._addedNodes=[])},h.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&this.grid._removedNodes.length>0&&(this.container.trigger("removed",[e.map(this.grid._removedNodes,e.clone)]),this.grid._removedNodes=[])},h.prototype._initStyles=function(){this._stylesId&&s.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=s.createStylesheet(this._stylesId),null!==this._styles&&(this._styles._max=0)},h.prototype._updateStyles=function(t){if(null!==this._styles&&"undefined"!=typeof this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if("undefined"==typeof t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&s.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var a=this._styles._max;a<t;++a)s.insertCSSRule(this._styles,i+'[data-gs-height="'+(a+1)+'"]',"height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(a+1)+'"]',"min-height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(a+1)+'"]',"max-height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-y="'+a+'"]',"top: "+e(a,a)+";",a);this._styles._max=t}}},h.prototype._updateContainerHeight=function(){if(!this.grid._updateCounter){var t=this.grid.getGridHeight(),e=parseInt(this.container.css("min-height"));if(e>0){var i=(e+this.opts.verticalMargin)/(this.cellHeight()+this.opts.verticalMargin);t<i&&(t=i)}this.container.attr("data-gs-current-height",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit))}},h.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},h.prototype._setupRemovingTimeout=function(e){var i=this,o=t(e).data("_gridstack_node");!o._removeTimeout&&i.opts.removable&&(o._removeTimeout=setTimeout(function(){e.addClass("grid-stack-item-removing"),o._isAboutToRemove=!0},i.opts.removeTimeout))},h.prototype._clearRemovingTimeout=function(e){var i=t(e).data("_gridstack_node");i._removeTimeout&&(clearTimeout(i._removeTimeout),i._removeTimeout=null,e.removeClass("grid-stack-item-removing"),i._isAboutToRemove=!1)},h.prototype._prepareElementsByNode=function(e,i){var o,a,n=this,d=function(t,d){var r,h,l=Math.round(d.position.left/o),p=Math.floor((d.position.top+a/2)/a);if("drag"!=t.type&&(r=Math.round(d.size.width/o),h=Math.round(d.size.height/a)),"drag"==t.type){var g=d.position.top-i._prevYPix;i._prevYPix=d.position.top,s.updateScrollPosition(e[0],d,g),e.data("inTrashZone")||l<0||l>=n.grid.width||p<0||!n.grid["float"]&&p>n.grid.getGridHeight()?i._temporaryRemoved||(n.opts.removable===!0&&n._setupRemovingTimeout(e),l=i._beforeDragX,p=i._beforeDragY,n.placeholder.detach(),n.placeholder.hide(),n.grid.removeNode(i),n._updateContainerHeight(),i._temporaryRemoved=!0):(n._clearRemovingTimeout(e),i._temporaryRemoved&&(n.grid.addNode(i),n.placeholder.attr("data-gs-x",l).attr("data-gs-y",p).attr("data-gs-width",r).attr("data-gs-height",h).show(),n.container.append(n.placeholder),i.el=n.placeholder,i._temporaryRemoved=!1))}else if("resize"==t.type&&l<0)return;var c="undefined"!=typeof r?r:i.lastTriedWidth,u="undefined"!=typeof h?h:i.lastTriedHeight;!n.grid.canMoveNode(i,l,p,r,h)||i.lastTriedX===l&&i.lastTriedY===p&&i.lastTriedWidth===c&&i.lastTriedHeight===u||(i.lastTriedX=l,i.lastTriedY=p,i.lastTriedWidth=r,i.lastTriedHeight=h,n.grid.moveNode(i,l,p,r,h),n._updateContainerHeight())},r=function(s,d){n.container.append(n.placeholder);var r=t(this);n.grid.cleanNodes(),n.grid.beginUpdate(i),o=n.cellWidth();var h=Math.ceil(r.outerHeight()/r.attr("data-gs-height"));a=n.container.height()/parseInt(n.container.attr("data-gs-current-height")),n.placeholder.attr("data-gs-x",r.attr("data-gs-x")).attr("data-gs-y",r.attr("data-gs-y")).attr("data-gs-width",r.attr("data-gs-width")).attr("data-gs-height",r.attr("data-gs-height")).show(),i.el=n.placeholder,i._beforeDragX=i.x,i._beforeDragY=i.y,i._prevYPix=d.position.top,n.dd.resizable(e,"option","minWidth",o*(i.minWidth||1)),n.dd.resizable(e,"option","minHeight",h*(i.minHeight||1)),"resizestart"==s.type&&r.find(".grid-stack-item").trigger("resizestart")},h=function(o,a){var d=t(this);if(d.data("_gridstack_node")){var r=!1;if(n.placeholder.detach(),i.el=d,n.placeholder.hide(),i._isAboutToRemove){r=!0;var h=e.data("_gridstack_node")._grid;h._triggerRemoveEvent(),e.removeData("_gridstack_node"),e.remove()}else n._clearRemovingTimeout(e),i._temporaryRemoved?(s.removePositioningStyles(d),d.attr("data-gs-x",i._beforeDragX).attr("data-gs-y",i._beforeDragY).attr("data-gs-width",i.width).attr("data-gs-height",i.height),i.x=i._beforeDragX,i.y=i._beforeDragY,i._temporaryRemoved=!1,n.grid.addNode(i)):(s.removePositioningStyles(d),d.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height));n._updateContainerHeight(),n._triggerChangeEvent(r),n.grid.endUpdate();var l=d.find(".grid-stack");l.length&&"resizestop"==o.type&&(l.each(function(e,i){t(i).data("gridstack").onResizeHandler()}),d.find(".grid-stack-item").trigger("resizestop"),d.find(".grid-stack-item").trigger("gsresizestop")),"resizestop"==o.type&&n.container.trigger("gsresizestop",d)}};this.dd.draggable(e,{start:r,stop:h,drag:d}).resizable(e,{start:r,stop:h,resize:d}),(i.noMove||this._isOneColumnMode()&&!n.opts.disableOneColumnMode||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(e,"disable"),(i.noResize||this._isOneColumnMode()&&!n.opts.disableOneColumnMode||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(e,"disable"),e.attr("data-gs-locked",i.locked?"yes":null)},h.prototype._prepareElement=function(e,i){i="undefined"!=typeof i&&i;var o=this;e=t(e),e.addClass(this.opts.itemClass);var a=o.grid.addNode({x:parseInt(e.attr("data-gs-x"),10),y:parseInt(e.attr("data-gs-y"),10),width:e.attr("data-gs-width"),height:e.attr("data-gs-height"),maxWidth:e.attr("data-gs-max-width"),minWidth:e.attr("data-gs-min-width"),maxHeight:e.attr("data-gs-max-height"),minHeight:e.attr("data-gs-min-height"),autoPosition:s.toBool(e.attr("data-gs-auto-position")),noResize:s.toBool(e.attr("data-gs-no-resize")),noMove:s.toBool(e.attr("data-gs-no-move")),locked:s.toBool(e.attr("data-gs-locked")),resizeHandles:e.attr("data-gs-resize-handles"),el:e,id:e.attr("data-gs-id"),_grid:o},i);e.data("_gridstack_node",a),this._prepareElementsByNode(e,a)},h.prototype.setAnimation=function(t){t?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},h.prototype.addWidget=function(e,i,o,a,n,s,d,r,h,l,p){return e=t(e),"undefined"!=typeof i&&e.attr("data-gs-x",i),"undefined"!=typeof o&&e.attr("data-gs-y",o),"undefined"!=typeof a&&e.attr("data-gs-width",a),"undefined"!=typeof n&&e.attr("data-gs-height",n),"undefined"!=typeof s&&e.attr("data-gs-auto-position",s?"yes":null),"undefined"!=typeof d&&e.attr("data-gs-min-width",d),"undefined"!=typeof r&&e.attr("data-gs-max-width",r),"undefined"!=typeof h&&e.attr("data-gs-min-height",h),"undefined"!=typeof l&&e.attr("data-gs-max-height",l),"undefined"!=typeof p&&e.attr("data-gs-id",p),this.container.append(e),this._prepareElement(e,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),e},h.prototype.makeWidget=function(e){return e=t(e),this._prepareElement(e,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),e},h.prototype.willItFit=function(t,e,i,o,a){var n={x:t,y:e,width:i,height:o,autoPosition:a};return this.grid.canBePlacedWithRespectToHeight(n)},h.prototype.removeWidget=function(e,i){i="undefined"==typeof i||i,e=t(e);var o=e.data("_gridstack_node");o||(o=this.grid.getNodeDataByDOMEl(e)),this.grid.removeNode(o,i),e.removeData("_gridstack_node"),this._updateContainerHeight(),i&&e.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},h.prototype.removeAll=function(t){e.each(this.grid.nodes,e.bind(function(e){this.removeWidget(e.el,t)},this)),this.grid.nodes=[],this._updateContainerHeight()},h.prototype.destroy=function(e){t(window).off("resize",this.onResizeHandler),this.disable(),"undefined"==typeof e||e?this.container.remove():(this.removeAll(!1),this.container.removeData("gridstack")),s.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},h.prototype.resizable=function(e,i){var o=this;return e=t(e),e.each(function(e,a){a=t(a);var n=a.data("_gridstack_node");"undefined"!=typeof n&&null!==n&&(n.noResize=!i,n.noResize||o._isOneColumnMode()&&!o.opts.disableOneColumnMode?o.dd.resizable(a,"disable"):o.dd.resizable(a,"enable"))}),this},h.prototype.movable=function(e,i){var o=this;return e=t(e),e.each(function(e,a){a=t(a);var n=a.data("_gridstack_node");"undefined"!=typeof n&&null!==n&&(n.noMove=!i,n.noMove||o._isOneColumnMode()&&!o.opts.disableOneColumnMode?(o.dd.draggable(a,"disable"),a.removeClass("ui-draggable-handle")):(o.dd.draggable(a,"enable"),a.addClass("ui-draggable-handle")))}),this},h.prototype.enableMove=function(t,e){this.movable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},h.prototype.enableResize=function(t,e){this.resizable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},h.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},h.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},h.prototype.locked=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(a.locked=i||!1,o.attr("data-gs-locked",a.locked?"yes":null))}),this},h.prototype.maxHeight=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.maxHeight=i||!1,o.attr("data-gs-max-height",i)))}),this},h.prototype.minHeight=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.minHeight=i||!1,o.attr("data-gs-min-height",i)))}),this},h.prototype.maxWidth=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.maxWidth=i||!1,o.attr("data-gs-max-width",i)))}),this},h.prototype.minWidth=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.minWidth=i||!1,o.attr("data-gs-min-width",i)))}),this},h.prototype._updateElement=function(e,i){e=t(e).first();var o=e.data("_gridstack_node");if("undefined"!=typeof o&&null!==o){var a=this;a.grid.cleanNodes(),a.grid.beginUpdate(o),i.call(this,e,o),a._updateContainerHeight(),a._triggerChangeEvent(),a.grid.endUpdate()}},h.prototype.resize=function(t,e,i){this._updateElement(t,function(t,o){e=null!==e&&"undefined"!=typeof e?e:o.width,i=null!==i&&"undefined"!=typeof i?i:o.height,this.grid.moveNode(o,o.x,o.y,e,i)})},h.prototype.move=function(t,e,i){this._updateElement(t,function(t,o){e=null!==e&&"undefined"!=typeof e?e:o.x,i=null!==i&&"undefined"!=typeof i?i:o.y,this.grid.moveNode(o,e,i,o.width,o.height)})},h.prototype.update=function(t,e,i,o,a){this._updateElement(t,function(t,n){e=null!==e&&"undefined"!=typeof e?e:n.x,i=null!==i&&"undefined"!=typeof i?i:n.y,o=null!==o&&"undefined"!=typeof o?o:n.width,a=null!==a&&"undefined"!=typeof a?a:n.height,this.grid.moveNode(n,e,i,o,a)})},h.prototype.verticalMargin=function(t,e){if("undefined"==typeof t)return this.opts.verticalMargin;var i=s.parseHeight(t);this.opts.verticalMarginUnit===i.unit&&this.opts.height===i.height||(this.opts.verticalMarginUnit=i.unit,this.opts.verticalMargin=i.height,e||this._updateStyles())},h.prototype.cellHeight=function(t,e){if("undefined"==typeof t){if(this.opts.cellHeight)return this.opts.cellHeight;var i=this.container.children("."+this.opts.itemClass).first();return Math.ceil(i.outerHeight()/i.attr("data-gs-height"))}var o=s.parseHeight(t);this.opts.cellHeightUnit===o.unit&&this.opts.cellHeight===o.height||(this.opts.cellHeightUnit=o.unit,this.opts.cellHeight=o.height,e||this._updateStyles())},h.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},h.prototype.getCellFromPixel=function(t,e){var i="undefined"!=typeof e&&e?this.container.offset():this.container.position(),o=t.left-i.left,a=t.top-i.top,n=Math.floor(this.container.width()/this.opts.width),s=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(o/n),y:Math.floor(a/s)}},h.prototype.batchUpdate=function(){this.grid.batchUpdate()},h.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},h.prototype.isAreaEmpty=function(t,e,i,o){return this.grid.isAreaEmpty(t,e,i,o)},h.prototype.setStatic=function(t){this.opts.staticGrid=t===!0,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},h.prototype._setStaticClass=function(){var t="grid-stack-static";this.opts.staticGrid===!0?this.container.addClass(t):this.container.removeClass(t)},h.prototype._updateNodeWidths=function(t,e){this.grid._sortNodes(),this.grid.batchUpdate();for(var i={},o=0;o<this.grid.nodes.length;o++)i=this.grid.nodes[o],this.update(i.el,Math.round(i.x*e/t),void 0,Math.round(i.width*e/t),void 0);this.grid.commit()},h.prototype.setGridWidth=function(t,e){this.container.removeClass("grid-stack-"+this.opts.width),e!==!0&&this._updateNodeWidths(this.opts.width,t),
this.opts.width=t,this.grid.width=t,this.container.addClass("grid-stack-"+t)},r.prototype.batch_update=a(r.prototype.batchUpdate),r.prototype._fix_collisions=a(r.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),r.prototype.is_area_empty=a(r.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),r.prototype._sort_nodes=a(r.prototype._sortNodes,"_sort_nodes","_sortNodes"),r.prototype._pack_nodes=a(r.prototype._packNodes,"_pack_nodes","_packNodes"),r.prototype._prepare_node=a(r.prototype._prepareNode,"_prepare_node","_prepareNode"),r.prototype.clean_nodes=a(r.prototype.cleanNodes,"clean_nodes","cleanNodes"),r.prototype.get_dirty_nodes=a(r.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),r.prototype.add_node=a(r.prototype.addNode,"add_node","addNode, "),r.prototype.remove_node=a(r.prototype.removeNode,"remove_node","removeNode"),r.prototype.can_move_node=a(r.prototype.canMoveNode,"can_move_node","canMoveNode"),r.prototype.move_node=a(r.prototype.moveNode,"move_node","moveNode"),r.prototype.get_grid_height=a(r.prototype.getGridHeight,"get_grid_height","getGridHeight"),r.prototype.begin_update=a(r.prototype.beginUpdate,"begin_update","beginUpdate"),r.prototype.end_update=a(r.prototype.endUpdate,"end_update","endUpdate"),r.prototype.can_be_placed_with_respect_to_height=a(r.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),h.prototype._trigger_change_event=a(h.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),h.prototype._init_styles=a(h.prototype._initStyles,"_init_styles","_initStyles"),h.prototype._update_styles=a(h.prototype._updateStyles,"_update_styles","_updateStyles"),h.prototype._update_container_height=a(h.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),h.prototype._is_one_column_mode=a(h.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),h.prototype._prepare_element=a(h.prototype._prepareElement,"_prepare_element","_prepareElement"),h.prototype.set_animation=a(h.prototype.setAnimation,"set_animation","setAnimation"),h.prototype.add_widget=a(h.prototype.addWidget,"add_widget","addWidget"),h.prototype.make_widget=a(h.prototype.makeWidget,"make_widget","makeWidget"),h.prototype.will_it_fit=a(h.prototype.willItFit,"will_it_fit","willItFit"),h.prototype.remove_widget=a(h.prototype.removeWidget,"remove_widget","removeWidget"),h.prototype.remove_all=a(h.prototype.removeAll,"remove_all","removeAll"),h.prototype.min_height=a(h.prototype.minHeight,"min_height","minHeight"),h.prototype.min_width=a(h.prototype.minWidth,"min_width","minWidth"),h.prototype._update_element=a(h.prototype._updateElement,"_update_element","_updateElement"),h.prototype.cell_height=a(h.prototype.cellHeight,"cell_height","cellHeight"),h.prototype.cell_width=a(h.prototype.cellWidth,"cell_width","cellWidth"),h.prototype.get_cell_from_pixel=a(h.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),h.prototype.batch_update=a(h.prototype.batchUpdate,"batch_update","batchUpdate"),h.prototype.is_area_empty=a(h.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),h.prototype.set_static=a(h.prototype.setStatic,"set_static","setStatic"),h.prototype._set_static_class=a(h.prototype._setStaticClass,"_set_static_class","_setStaticClass"),o.GridStackUI=h,o.GridStackUI.Utils=s,o.GridStackUI.Engine=r,o.GridStackUI.GridStackDragDropPlugin=i,t.fn.gridstack=function(e){return this.each(function(){var i=t(this);i.data("gridstack")||i.data("gridstack",new h(this,e))})},o.GridStackUI});
var Rex_Navigator=function(e){"use strict";var t,i,r,n,a=function(t){var i=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");i.each(function(i,r){var n=e(r),a=n.attr("data-rexlive-section-name");if(""!=a){var l=a.replace(/ /gm,"");tmpl.arg="navigator";var d=tmpl("tmpl-navigator-item",{sectionName:a,sectionID:l,number:i+1});t.children("ul").append(d)}})},l=function(){var r,n,a;i.each(function(){r=e(this),null!==this.getAttribute("id")&&""!=this.getAttribute("id")&&(n=document.querySelector('.vertical-nav a[href="#'+this.getAttribute("id")+'"]'),n&&(a=n.getAttribute("data-number")-1,r.offset().top-Rexbuilder_Util.$window.height()/2<Rexbuilder_Util.$window.scrollTop()&&r.offset().top+r.height()-Rexbuilder_Util.$window.height()/2>Rexbuilder_Util.$window.scrollTop()?t.eq(n).addClass("is-selected"):t.eq(n).removeClass("is-selected")))})},d=function(){i=Rexbuilder_Util.$rexContainer.children(".rexpansive_section")},o=function(){t=Rexbuilder_Util.$document.find(".vertical-nav a")},c=function(){r=Rexbuilder_Util.$document.find(".touch .vertical-nav a")},u=function(e){if(void 0!=e.attr("id")&&""!=e.attr("id")){var t=e.attr("id"),i=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),r=i.find('li a[href="#'+t+'"]').parent(),n=e,a="";do if(n=n.next(),a=n.attr("id"),""!=a)break;while(0!=n.length);""==a||void 0==a?i.children("ul").append(r[0]):r.insertBefore(i.find('li a[href="#'+a+'"]').parent())}},v=function(t,i,r){var n=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');if(""!=i){if(""==t.attr("id")){var a=Rexbuilder_Util.$rexContainer.children(".rexpansive_section").length,l=Rexbuilder_Util.$rexContainer.children('.rexpansive_section[id=""]').length,d=t,o="";do if(d=d.next(),o=d.attr("id"),""!=o)break;while(0!=d.length);var c=a-l+1;tmpl.arg="navigator";var u=tmpl("tmpl-navigator-item",{sectionName:r,sectionID:i,number:c});""==o||void 0==o?n.children("ul").append(u):e(u).insertBefore(n.find('li a[href="#'+o+'"]').parent())}else{var v=t.attr("id"),s=n.find('li a[href="#'+v+'"]');s.attr("href","#"+i),s.find(".label").text(r)}t.attr("id",i),t.attr("href","#"+i)}else if(""!=t.attr("id")){var v=t.attr("id"),s=n.find('li a[href="#'+v+'"]').parent();s.remove(),t.attr("id",""),t.removeAttr("href")}f()},f=function(){d(),o(),c(),n&&l()},s=function(){Rexbuilder_Util.$document.on("click",".vertical-nav a",function(t){t.preventDefault();var i=e(t.target);i.is("a")||(i=i.parents("a"));var r=i.attr("href"),n=Rexbuilder_Util.$rexContainer.children(r);Rexbuilder_Util.smoothScroll(n)}),Rexbuilder_Util.$document.on("click",".touch .vertical-nav a",function(){r.find(".rex-label").removeClass("fadeInAndOut"),e(this).find(".rex-label").addClass("fadeInAndOut"),Rexbuilder_Util.$document.find(".touch .vertical-nav").removeClass("open")})},h=function(){var e=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');0!=e.length&&e.hasClass("nav-editor-mode-disable")&&a(e),n=document.querySelector(".vertical-nav"),n&&Rexbuilder_Util.$window.on("scroll",function(){l()}),s(),f()};return{init:h,updateNavigator:f,updateNavigatorItem:v,fixNavigatorItemOrder:u}}(jQuery);
/*!
 * Flickity PACKAGED v2.2.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */
!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,o,a){(a=a||e||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"!=typeof t)return d=t,this.each(function(t,e){var n=a.data(e,i);n?(n.option(d),n._init()):(n=new o(e,d),a.data(e,i,n))}),this;var e,n,l,h,c,d,u=s.call(arguments,1);return l=u,c="$()."+i+'("'+(n=t)+'")',(e=this).each(function(t,e){var s=a.data(e,i);if(s){var o=s[n];if(o&&"_"!=n.charAt(0)){var d=o.apply(s,l);h=void 0===h?d:h}else r(c+" is not a valid method")}else r(i+" not initialized. Cannot call methods, i.e. "+c)}),void 0!==h?h:e},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var s=Array.prototype.slice,o=t.console,r=void 0===o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function i(s){if(function(){if(!a){a=!0;var s=document.createElement("div");s.style.width="200px",s.style.padding="1px 2px 3px 4px",s.style.borderStyle="solid",s.style.borderWidth="1px 2px 3px 4px",s.style.boxSizing="border-box";var o=document.body||document.documentElement;o.appendChild(s);var r=e(s);n=200==Math.round(t(r.width)),i.isBoxSizeOuter=n,o.removeChild(s)}}(),"string"==typeof s&&(s=document.querySelector(s)),s&&"object"==typeof s&&s.nodeType){var l=e(s);if("none"==l.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<r;e++)t[o[e]]=0;return t}();var h={};h.width=s.offsetWidth,h.height=s.offsetHeight;for(var c=h.isBorderBox="border-box"==l.boxSizing,d=0;d<r;d++){var u=o[d],f=l[u],p=parseFloat(f);h[u]=isNaN(p)?0:p}var g=h.paddingLeft+h.paddingRight,v=h.paddingTop+h.paddingBottom,m=h.marginLeft+h.marginRight,y=h.marginTop+h.marginBottom,b=h.borderLeftWidth+h.borderRightWidth,E=h.borderTopWidth+h.borderBottomWidth,S=c&&n,C=t(l.width);!1!==C&&(h.width=C+(S?0:g+b));var x=t(l.height);return!1!==x&&(h.height=x+(S?0:v+E)),h.innerWidth=h.width-(g+b),h.innerHeight=h.height-(v+E),h.outerWidth=h.width+m,h.outerHeight=h.height+y,h}}var n,s="undefined"==typeof console?function(){}:function(t){console.error(t)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=o.length,a=!1;return i}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){e(t,n)&&s.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}else s.push(t)}),s},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var s=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var o=i.toDashed(n),r="data-"+o,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+o),h=i.makeArray(a).concat(i.makeArray(l)),c=r+"-options",d=t.jQuery;h.forEach(function(t){var i,o=t.getAttribute(r)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(i){return void(s&&s.error("Error parsing "+r+" on "+t.className+": "+i))}var a=new e(t,i);d&&d.data(t,n,a)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,function(t,e){var i={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame(function(){e.animate()})}},positionSlider:function(){var t=this.x;this.options.wrapAround&&1<this.cells.length&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+i+",0,0)":"translateX("+i+")"},dispatchScrollEvent:function(){var t=this.slides[0];if(t){var e=-this.x-t.target,i=e/this.slidesWidth;this.dispatchEvent("scroll",null,[i,e])}},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=0<e?i:0;s.wrapShift(o),e-=s.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x-this.velocity;this.applyForce(t)}},applySelectedAttraction:function(){if((!this.isDraggable||!this.isPointerDown)&&!this.isFreeScrolling&&this.slides.length){var t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction;this.applyForce(t)}}};return i}),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(i,n,s,o,r,a){return e(t,i,n,s,o,r,a)});else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,function(t,e,i,n,s,o,r){function a(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}function l(t,e){var i=n.getQueryElement(t);if(i){if(this.element=i,this.element.flickityGUID){var s=f[this.element.flickityGUID];return s.option(e),s}h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}else d&&d.error("Bad element for Flickity: "+(i||t))}var h=t.jQuery,c=t.getComputedStyle,d=t.console,u=0,f={};l.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},l.createMethods=[];var p=l.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++u;for(var i in this.element.flickityGUID=e,(f[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this),this.options.on){var n=this.options.on[i];this.on(i,n)}l.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),a(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){return this._filterFindCellElements(t).map(function(t){return new s(t,this)},this)},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t&&this.maxCellHeight||0;var e=0;if(0<t){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide?"marginRight":"marginLeft",i=this._getCanCellFit();this.cells.forEach(function(n,s){if(t.cells.length){var r=t.outerWidth-t.firstMargin+(n.size.outerWidth-n.size[e]);i.call(this,s,r)||(t.updateTarget(),t=new o(this),this.slides.push(t)),t.addCell(n)}else t.addCell(n)},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!=0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];0<t;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],r=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){t.target=s?n*this.cellAlign:(t.target=Math.max(t.target,o),Math.min(t.target,r))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h&&this.$element){var s=t+=this.options.namespaceJQueryEvents?".flickity":"";if(e){var o=h.Event(e);o.type=t,s=o}this.$element.trigger(s,i)}},p.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t])){var s=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=s&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},p._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&1<e))return t;var i=n.modulo(t,e),s=Math.abs(i-this.selectedIndex),o=Math.abs(i+e-this.selectedIndex),r=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&o<s?t+=e:!this.isDragSelect&&r<s&&(t-=e),t<0?this.x-=this.slideableWidth:e<=t&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),(this.selectedSlide=t).select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectInitialIndex=function(){var t=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(t&&"string"==typeof t&&this.queryCell(t))return void this.selectCell(t,!1,!0);var e=0;t&&this.slides[t]&&(e=t),this.select(e,!1,!0)}},p.selectCell=function(t,e,i){var n=this.queryCell(t);if(n){var s=this.getCellSlideIndex(n);this.select(s,e,i)}},p.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e||(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(i<=1+2*t)return this.getCellElements();for(var s=[],o=e-t;o<=e+t;o++){var r=this.options.wrapAround?n.modulo(o,i):o,a=this.slides[r];a&&(s=s.concat(a.getCellElements()))}return s},p.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#\.]?[\d\/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(l,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){this.options.watchCSS&&(-1!=c(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},p.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=l.keyboardHandlers[t.keyCode];i&&i.call(this)}},l.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},p.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),a(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),h&&this.$element&&h.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},n.extend(p,r),l.data=function(t){var e=(t=n.getQueryElement(t))&&t.flickityGUID;return e&&f[e]},n.htmlInit(l,"flickity"),h&&h.bridget&&h.bridget("flickity",l),l.setJQuery=function(t){h=t},l.Cell=s,l.Slide=o,l}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindStartEvent=function(t){this._bindStartEvent(t,!0)},n.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},n._bindStartEvent=function(e,i){var n=(i=void 0===i||i)?"addEventListener":"removeEventListener",s="mousedown";t.PointerEvent?s="pointerdown":"ontouchstart"in t&&(s="touchstart"),e[n](s,this)},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},n.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},n.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},n.onpointerdown=function(t){this._pointerDown(t,t)},n._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},n.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(e){if(e){var i=s[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},n.onmousemove=function(t){this._pointerMove(t,t)},n.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},n.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},n._pointerMove=function(t,e){this.pointerMove(t,e)},n.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},n.onmouseup=function(t){this._pointerUp(t,t)},n.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},n.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},n._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},n.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},n._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},n.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},i.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},i}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){for(var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",s=0;s<this.handles.length;s++){var o=this.handles[s];this._bindStartEvent(o,e),o[i]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var s={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=s[t.target.nodeName],i=o[t.target.type],n=!e||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},n._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},n.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},n.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(){return{x:t.pageXOffset,y:t.pageYOffset}}n.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var o=e.prototype;n.extend(o,i.prototype),o._touchActionValue="pan-y";var r="createTouch"in document,a=!1;o._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},o.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},o.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},o._uiChangeDrag=function(){delete this.isFreeScrolling},o.pointerDown=function(e,i){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=s(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i)):this._pointerDownDefault(e,i)},o._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var l={INPUT:!0,TEXTAREA:!0,SELECT:!0};return o.pointerDownFocus=function(t){l[t.target.nodeName]||this.focus()},o._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=l[t.target.nodeName];e||i||n||t.preventDefault()},o.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},o.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},o.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},o.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x=i.x%this.slideableWidth);var s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=o<s?.5*(s+o):s;var r=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<r?.5*(s+r):s}this.dragX=s,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i]);
}},o.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},o.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1);return i.distance<n.distance?i.index:n.index},o._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(n+=i,s=e,null!==(e=this.getSlideDistance(-t,n)));)e=Math.abs(e);return{distance:s,index:n-i}},o.getSlideDistance=function(t,e){var i=this.slides.length,s=this.options.wrapAround&&1<i,o=s?n.modulo(e,i):e,r=this.slides[o];if(!r)return null;var a=s?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+a)},o.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return 0<t&&0<e?1:t<0&&e<0?-1:0},o.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,s])},o.onscroll=function(){var t=s(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(3<Math.abs(e)||3<Math.abs(i))&&this._pointerDone()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";function s(t,e){this.direction=t,this.parent=e,this._create()}var o="http://www.w3.org/2000/svg";(s.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(o,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e,i=document.createElementNS(o,"path"),n="string"!=typeof(e=this.parent.options.arrowShape)?"M "+e.x0+",50 L "+e.x1+","+(e.y1+50)+" L "+e.x2+","+(e.y2+50)+" L "+e.x3+",50  L "+e.x2+","+(50-e.y2)+" L "+e.x1+","+(50-e.y1)+" Z":e;return i.setAttribute("d",n),i.setAttribute("class","arrow"),this.isLeft||i.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(i),t},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&1<t.length)this.enable();else{var e=t.length?t.length-1:0,i=this.isPrevious?0:e;this[this.parent.selectedIndex==i?"disable":"enable"]()}},s.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var r=e.prototype;return r._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s((-1),this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},r.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},r.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}(s.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;0<t?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=s.prototype.onClick=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(t.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var s=i.prototype;return s._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},s.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},s.playPlayer=function(){this.player.play()},s.stopPlayer=function(){this.player.stop()},s.pausePlayer=function(){this.player.pause()},s.unpausePlayer=function(){this.player.unpause()},s.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},s.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},s.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){var n=e.prototype;return n.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var n=this.cells.length;e=void 0===e?n:e;var s,o,r=(s=i,o=document.createDocumentFragment(),s.forEach(function(t){o.appendChild(t.element)}),o),a=e==n;if(a)this.slider.appendChild(r);else{var l=this.cells[e].element;this.slider.insertBefore(r,l)}if(0===e)this.cells=i.concat(this.cells);else if(a)this.cells=this.cells.concat(i);else{var h=this.cells.splice(e,n-e);this.cells=this.cells.concat(i).concat(h)}this._sizeCells(i),this.cellChange(e,!0)}},n.append=function(t){this.insert(t,this.cells.length)},n.prepend=function(t){this.insert(t,0)},n.remove=function(t){var e=this.getCells(t);if(e&&e.length){var n=this.cells.length-1;e.forEach(function(t){t.remove();var e=this.cells.indexOf(t);n=Math.min(e,n),i.removeFrom(this.cells,t)},this),this.cellChange(n,!0)}},n.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},n.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){"use strict";function n(t,e){this.img=t,this.flickity=e,this.load()}e.createMethods.push("_createLazyload");var s=e.prototype;return s._createLazyload=function(){this.on("select",this.lazyLoad)},s.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,s=this.getAdjacentCellElements(e),o=[];s.forEach(function(t){var e=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),n=t.getAttribute("data-flickity-lazyload-src"),s=t.getAttribute("data-flickity-lazyload-srcset");if(e||n||s)return[t]}var o=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return i.makeArray(o)}(t);o=o.concat(e)}),o.forEach(function(t){new n(t,this)},this)}},n.prototype.handleEvent=i.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=n,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(t){return t}),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){t.createMethods.push("_createAsNavFor");var i=t.prototype;return i._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},i.setNavCompanion=function(i){i=e.getQueryElement(i);var n=t.data(i);if(n&&n!=this){this.navCompanion=n;var s=this;this.onNavCompanionSelect=function(){s.navCompanionSelect()},n.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},i.navCompanionSelect=function(t){if(this.navCompanion){var e,i,n,s=this.navCompanion.selectedCells[0],o=this.navCompanion.cells.indexOf(s),r=o+this.navCompanion.selectedCells.length-1,a=Math.floor((e=o,i=r,n=this.navCompanion.cellAlign,(i-e)*n+e));if(this.selectCell(a,!1,t),this.removeNavSelectedElements(),!(a>=this.cells.length)){var l=this.cells.slice(o,r+1);this.navSelectedElements=l.map(function(t){return t.element}),this.changeNavSelectedClass("add")}}},i.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},i.activateAsNavFor=function(){this.navCompanionSelect(!0)},i.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},i.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},i.deactivateAsNavFor=function(){this.removeNavSelectedElements()},i.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t,e,s){if(!(this instanceof n))return new n(t,e,s);var o,h=t;"string"==typeof t&&(h=document.querySelectorAll(t)),h?(this.elements=(o=h,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?l.call(o):[o]),this.options=i({},this.options),"function"==typeof e?s=e:i(this.options,e),s&&this.on("always",s),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(h||t))}function s(t){this.img=t}function o(t,e){this.url=t,this.element=e,this.img=new Image}var r=t.jQuery,a=t.console,l=Array.prototype.slice;(n.prototype=Object.create(e.prototype)).options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&h[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var h={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},n.prototype.addImage=function(t){var e=new s(t);this.images.push(e)},n.prototype.addBackground=function(t,e){var i=new o(t,e);this.images.push(i)},n.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},n.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},n.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(s.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},s.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},s.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},s.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(o.prototype=Object.create(s.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},n.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((r=e).fn.imagesLoaded=function(t,e){return new n(this,t,e).jqDeferred.promise(r(this))})},n.makeJQueryPlugin(),n}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var n=e.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){if(this.options.imagesLoaded){var t=this;i(this.slider).on("progress",function(e,i){var n=t.getParentCell(i.img);t.cellSizeChange(n&&n.element),t.options.freeScroll||t.positionSliderAtSelected()})}},e});
/**
 * Flickity background lazyload v1.0.1
 * lazyload background cell images
 */
!function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){"use strict";function i(t,e,i){this.element=t,this.url=e,this.img=new Image,this.flickity=i,this.load()}t.createMethods.push("_createBgLazyLoad");var o=t.prototype;return o._createBgLazyLoad=function(){this.on("select",this.bgLazyLoad)},o.bgLazyLoad=function(){var t=this.options.bgLazyLoad;if(t)for(var e="number"==typeof t?t:0,i=this.getAdjacentCellElements(e),o=0;o<i.length;o++){var a=i[o];this.bgLazyLoadElem(a);for(var l=a.querySelectorAll("[data-flickity-bg-lazyload]"),n=0;n<l.length;n++)this.bgLazyLoadElem(l[n])}},o.bgLazyLoadElem=function(t){var e=t.getAttribute("data-flickity-bg-lazyload");e&&new i(t,e,this)},i.prototype.handleEvent=e.handleEvent,i.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.element.removeAttribute("data-flickity-bg-lazyload")},i.prototype.onload=function(t){this.element.style.backgroundImage='url("'+this.url+'")',this.complete(t,"flickity-bg-lazyloaded")},i.prototype.onerror=function(t){this.complete(t,"flickity-bg-lazyerror")},i.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this),this.element.classList.add(e),this.flickity.dispatchEvent("bgLazyLoad",t,this.element)},t.BgLazyLoader=i,t});
var RexSlider=function(e){"use strict";function t(e){var t=this,i=this.element.getAttribute("data-custom-autoplay-timer")?this.element.getAttribute("data-custom-autoplay-timer"):9e3;t.customAutoplayInterval&&t.customAutoplayInterval.clear(),t.customAutoplayInterval=Rexbuilder_Util.rtimeOut(function(){t.playPlayer()},i),t.pausePlayer()}var i=".rex-slider-wrap",a=".rex-slider-element",r=".flickity-page-dots.rex-slider__custom-nav",n=".flickity-page-dots.rex-slider__custom-nav__preview-slide",l=".rexpansive_section",d=".rex-box-slider-wrap",o=".rex-box-slider-element",s=function(i){var l={cellAlign:"left",prevNextButtons:!1,pageDots:!1,cellSelector:a,selectedAttraction:.018,friction:.3,wrapAround:!0,arrowShape:"M 71.080084,1.034481 C 71.763642,0.34482599 72.61809,-1.250001e-8 73.557983,-1.250001e-8 c 0.939893,0 1.794341,0.34482600250001 2.477899,1.03448101250001 1.367117,1.37931 1.367117,3.620689 0,5 L 32.459031,49.999998 76.035882,93.965515 c 1.367117,1.379311 1.367117,3.62069 0,5 -1.367117,1.379315 -3.588681,1.379315 -4.955798,0 L 25.025333,52.499998 c -1.367117,-1.37931 -1.367117,-3.62069 0,-5 l 46.054751,-46.465517 0,0 z"},d=i.parents(".block-has-slider");l.setGallerySize="undefined"!=typeof i.attr("data-set-gallery-size")&&JSON.parse(i.attr("data-set-gallery-size")),l.wrapAround="undefined"==typeof i.attr("data-wrap-around")||JSON.parse(i.attr("data-wrap-around"));var o=i.attr("data-rex-slider-animation");"undefined"!=typeof o&&"true"==o.toString()?l.autoPlay=!0:l.autoPlay=!1;var s=i.attr("data-rex-slider-prev-next");"undefined"!=typeof s&&"1"==s.toString()&&(l.prevNextButtons=!0);var c=i.attr("data-rex-slider-dots");"undefined"!=typeof c&&"1"==c.toString()&&(l.pageDots=!0);var u=i.attr("data-rexlider-lazyload");"undefined"!=typeof u&&"1"==u.toString()&&(l.bgLazyLoad=1),i.hasClass("rex-slider--bottom-interface")&&d.addClass("block-has-slider--navigator"),i.find(".rex-slider-element").each(function(t,i){var a=e(i).find(".rex-slider-video-wrapper");Rexbuilder_Util.startVideoPlugin(a)}),1==l.setGallerySize&&(l.on={ready:function(e){var t=this.$element.parents(".rexpansive_section").eq(0);if(t.length>0){var i=Rexbuilder_Util.getGalleryInstance(t);"undefined"!==i&&i.updateElementHeight(this.$element.parents(".grid-stack-item")[0])}}});var f=!0;if(l.prevNextButtons&&f&&(l.pauseAutoPlayOnHover=!1),i.flickity(l),i.flickity("stopPlayer"),Rexbuilder_Util.$window.on("resize",function(){i.data("flickity")&&i.flickity("resize")}),i.on("dragStart.flickity",function(){e(this).addClass("is-dragging")}),i.on("dragEnd.flickity",function(){e(this).removeClass("is-dragging")}),i.on("select.flickity",function(t,i){var a=e(t.target),r=a.find(".rex-slider-element.is-selected .rex-slider-video-wrapper");a.find(".rex-slider-video-wrapper").each(function(t,i){i!=r[0]&&Rexbuilder_Util.pauseVideo(e(i))}),Rexbuilder_Util.playVideo(r)}),l.autoPlay&&i.flickity("playPlayer"),f){var y=i.data("flickity");if(y.customAutoplayInterval=null,l.prevNextButtons&&(y.prevButton.element.addEventListener("click",t.bind(y)),y.nextButton.element.addEventListener("click",t.bind(y))),l.pageDots)for(var p=0;p<y.pageDots.dots.length;p++)y.pageDots.dots[p].addEventListener("click",t.bind(y));y.$element.on("dragEnd.flickity",t.bind(y))}i.attr("data-rex-slider-active",!0),i.find(r).children().first().addClass("is-selected"),i.find(r).on("click",".dot",function(t){var a=e(this),r=a.index();a.addClass("is-selected").siblings(".dot").removeClass("is-selected"),i.flickity("select",r)}),i.find(n).find(".rex-slider__b-label-image--item").hover(function(e){var t=parseInt(e.currentTarget.getAttribute("data-nav-index"));i.flickity("select",t)})},c=function(t){var i={cellAlign:"center",prevNextButtons:!0,pageDots:!0,cellSelector:o,selectedAttraction:.018,friction:.3,initialIndex:"undefined"!=typeof e(t).attr("data-rex-box-slider-initialIndex")?parseInt(e(t).attr("data-rex-box-slider-initialIndex")):0,setGallerySize:!1,arrowShape:"m 38.79662,40.087413 0,0 c -0.387529,0 -0.757576,-0.154429 -1.031468,-0.425408 L 1.2470862,3.1322842 c -0.56818177,-0.5681815 -0.56818177,-1.4918411 0,-2.060023 0.5681819,-0.56818197 1.4918415,-0.56818197 2.0600234,0 L 38.793706,36.570513 74.294872,1.0722612 c 0.568182,-0.56818197 1.491842,-0.56818197 2.060023,0 0.568182,0.5681819 0.568182,1.4918415 0,2.060023 L 39.825175,39.659091 c -0.273893,0.273893 -0.641026,0.428322 -1.028555,0.428322 l 0,0 0,0 z"},a=e(t).attr("data-rex-slider-animation");"undefined"!=typeof a&&"true"==a&&(i.autoPlay=!0),e(t).flickity(i),e(t).flickity("stopPlayer"),Rexbuilder_Util.$window.on("resize",function(){e(t).flickity("resize")}),e(t).on("dragStart.flickity",function(){e(this).addClass("is-dragging")}),e(t).on("dragEnd.flickity",function(){e(this).removeClass("is-dragging")})},u=function(){e(i,l).length>0&&e(i,l).each(function(t,i){RexSlider.initSlider(e(i)),e(i).attr("data-rex-slider-number",t),Rexbuilder_Dom_Util.lastSliderNumber=t}),e(d,l).length>0&&e(d,l).each(function(e,t){c(t)})},f=function(t){"undefined"!=typeof t.data("flickity")&&t.flickity("destroy"),t.find(".rex-slider-video-wrapper").each(function(t,i){Rexbuilder_Util.destroyVideo(e(i),!1)})},y=function(){e(i,l).length>0&&e(i,l).each(function(t,i){f(e(i))}),e(d,l).length>0&&e(d,l).each(function(t,i){f(e(i))})},p=function(){e(i,l).length&&e(i,l).each(function(t,i){var a=e(i).attr("data-rex-slider-animation");"undefined"!=typeof a&&"true"==a&&e(i).flickity("playPlayer")})},g=function(){u()};return{init:g,initSlider:s,startAutoPlay:p,destroy:y,destroySliderPlugins:f}}(jQuery);
/*
 *  TextFill
 */
!function(t,e,i,s){"use strict";function r(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},a,i),this._defaults=a,this._name=n,this.properties={canvas:null,text:"",ctx:null,img:null,background:null,lines:null,wrap:null},this.init()}var n="textFill",a={maxFontSize:100,textAlignment:"center",fontFamily:"sans-serif",fontWeight:"bold",relative:!1,relativeWrap:""};t.extend(r.prototype,{init:function(){this._defineSettings(),this._defineProperties(),this._attachImage();var i=this;t(e).on("resize",function(){i._resizeCanvas(),i._drawText()})},_defineSettings:function(){this.settings.maxFontSize=parseInt(this.element.dataset.maxFontSize||this.element.getAttribute("data-max-font-size")||this.settings.maxFontSize),this.settings.textAlignment=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.textAlign||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-text-align")||this.settings.textAlignment,this.settings.relativeWrap=this.element.getAttribute("data-relative-wrap")||this.settings.relativeWrap},_defineProperties:function(){this.properties.canvas=this.element.getElementsByClassName("text-fill-canvas")[0],this.properties.text=this.properties.canvas.textContent,this.properties.ctx=this.properties.canvas.getContext("2d"),this.properties.img=i.createElement("img"),this.properties.background=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.backSrc||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-back-src"),this.settings.relative&&""!==this.settings.relativeWrap&&(this.properties.wrap=t(this.element).parents(this.settings.relativeWrap)[0],"undefined"==typeof this.properties.wrap&&(this.settings.relative=!1))},_attachImage:function(){this.properties.img.src=this.properties.background;var t=this;this.properties.img.onload=function(){t._resizeCanvas(),t._drawText(),t.$element.trigger("textfill-render-complete")}},_drawText:function(){var t=this._calcFontSize(this.settings.maxFontSize);this.properties.ctx.font=this.settings.fontWeight+" "+t+"px "+this.settings.fontFamily,this.properties.rows=this._numRows(this.properties.ctx,this.properties.text,(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth)-20),this.properties.canvas.height=this.properties.ctx.height=this.properties.rows*t,this.properties.ctx.clearRect(0,0,this.properties.canvas.width,this.properties.canvas.height),this.properties.ctx.font=this.settings.fontWeight+" "+t+"px "+this.settings.fontFamily,this.properties.ctx.fillStyle=this.properties.ctx.createPattern(this.properties.img,"repeat"),this.properties.ctx.textAlign=this.settings.textAlignment,this.properties.ctx.textBaseline="middle";var e;switch(this.settings.textAlignment){case"left":e=0;break;case"right":e=this.properties.canvas.width;break;case"center":e=this.properties.canvas.width/2;break;default:e=this.properties.canvas.width/2}var i=t/2;this._wrapText(this.properties.ctx,this.properties.text,e,i,(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth)-20,t)},_calcFontSize:function(t){var e=this.settings.maxFontSize/1e3,i=this.properties.relative?this.properties.wrap.offsetWidth*e:this.element.offsetWidth*e,s=i;return s},_wrapText:function(t,e,i,s,r,n){for(var a=e.split(" "),h=(t.measureText(a).width,""),p=0;p<a.length;p++){var o=h+a[p]+" ",l=t.measureText(o),c=l.width;c>r&&p>0?(t.fillText(h,i,s),h=a[p]+" ",s+=n):h=o}h=h.trim(),t.fillText(h,i,s)},_numRows:function(t,e,i){for(var s,r=new Array,n=" ",a=e.split(" "),h=1,p=0;p<a.length;p++)r.unshift(n),r.unshift(a[p]),s=this._partialTextLenght(t,r),s>i&&(r.splice(1,r.length),h++);return h<=a.length?h:a.length},_partialTextLenght:function(t,e){for(var i=0,s=0;s<e.length;s++)i+=t.measureText(e[s]).width;return i},_resizeCanvas:function(){this.properties.canvas.width=this.properties.ctx.canvas.width=Math.floor(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth),this.properties.canvas.height=this.properties.ctx.canvas.height=this._calcFontSize(this.settings.maxFontSize+50)},_calcSlope:function(t,e){var i=(e[1]-t[1])/(e[0]-t[0]);return i}}),t.fn[n]=function(e){var i=arguments;if(e===s||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var a;return this.each(function(){var s=t.data(this,"plugin_"+n);s instanceof r&&"function"==typeof s[e]&&(a=s[e].apply(s,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+n,null)}),a!==s?a:this}}}(jQuery,window,document);
var VimeoVideo=function(e){"use strict";var i=null,o=null,n=function(){i=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--section"),o=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--block")},t=function(){i.length>0&&i.each(function(i,o){var n=e(o).find("iframe")[0];if("undefined"!=typeof Vimeo){var t=new Vimeo.Player(n);t.ready().then(function(){t.setVolume(0)})}})},r=function(i){var n=i;o.length>0&&o.each(function(i,o){var t=e(o).attr("data-vimeo-video-mute"),r=e(o).find("iframe")[0];"undefined"!=typeof Vimeo&&n.addPlayer(t,r)})},l=function(e,i,o){if("undefined"!=typeof this.blockVideos){var n;n="undefined"!=typeof o?new Vimeo.Player(i,o):new Vimeo.Player(i),"1"==e&&n.ready().then(function(){n.setVolume(0)});var t={el:i,player:n};this.blockVideos.push(t)}},d=function(e){if(void 0!==this.blockVideos)for(var i=0,o=this.blockVideos.length;i<o;i++)if(this.blockVideos[i].el===e)return this.blockVideos[i].player;return null},a=function(e){var i,o=!1;for(i=0,tot_blockVideos=this.blockVideos.length;i<tot_blockVideos;i++)if(this.blockVideos[i].el===e){this.blockVideos[i].player.destroy().then(function(){})["catch"](function(e){}),o=!0;break}o&&this.blockVideos.splice(i,1)},c=function(){this.blockVideos=[],n(),t(),r(this)};return{init:c,findVideo:d,initBlockVideos:r,addPlayer:l,removePlayer:a}}(jQuery);
/*
 *  rexScrolled - v0.1
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(t,e,i,n){"use strict";function s(t){f=i.documentElement.clientHeight}function l(){return e.pageYOffset||i.documentElement.scrollTop}function o(t,n){n="undefined"!=typeof n?n:e.pageYOffset||i.documentElement.scrollTop;var s=t.getBoundingClientRect();return s.top+n}function r(){var t=e,n="inner";return"innerWidth"in e||(n="client",t=i.documentElement||i.body),{width:t[n+"Width"],height:t[n+"Height"]}}function c(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},a,i),this._defaults=a,this._name=h,this.properties={launched:!1},this.settings.offset=parseInt(this.element.getAttribute("data-rs-animation-offset")||this.settings.offset),this.settings.force_launch=this.element.getAttribute("data-rs-animation-force-launch")||this.settings.force_launch,this.bindedScrollHandler=null,this.init()}var h="rexScrolled",a={offset:0,mobile:!0,force_launch:!1,callback:null},f=i.documentElement.clientHeight;e.addEventListener("resize",s),t.extend(c.prototype,{init:function(){this.has_scrolled(),this.bindedScrollHandler=this.has_scrolled.bind(this),e.addEventListener("scroll",this.bindedScrollHandler)},has_scrolled:function(){if(r().width<=767&&!this.settings.mobile)this.properties.launched=!0,this.removeScrollHandler();else{var t=this;if(!t.properties.launched){var e,i,n=f,s=l(),c=o(this.element,s),h=this.element.offsetHeight;0===this.settings.offset?(e=.7*n,i=.2*n):this.settings.offset>0?(e=n-this.settings.offset,i=.2*n):this.settings.offset<0&&(e=.7*n,i=n+this.settings.offset),(c-e<s&&c+h-i>s||t.settings.force_launch)&&(t.properties.launched=!0,t.$element.trigger("rs-scrolled-complete"),this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback(this.element),this.removeScrollHandler())}}},removeScrollHandler:function(){e.removeEventListener("scroll",this.bindedScrollHandler)}}),t.fn[h]=function(e){var i=arguments;if(e===n||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+h)||t.data(this,"plugin_"+h,new c(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var s;return this.each(function(){var n=t.data(this,"plugin_"+h);n instanceof c&&"function"==typeof n[e]&&(s=n[e].apply(n,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+h,null)}),s!==n?s:this}}}(jQuery,window,document);
/*
 *  rexAccordion - v1.0.0
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(t,e,s,n){"use strict";function i(e,s){this.element=e,this.$element=t(e),this.settings=t.extend({},l,s),this._defaults=l,this._name=o,null==this.settings.durationOpen&&(this.settings.durationOpen=this.settings.duration),null==this.settings.durationClose&&(this.settings.durationClose=this.settings.duration),this.properties={$toggle:this.$element.find(this.settings.selectors.toggle),$content:this.$element.find(this.settings.selectors.content)},this.init()}var o="rexAccordion",l={selectors:{toggle:".rex-accordion--toggle",content:".rex-accordion--content"},duration:150,durationOpen:null,durationClose:null};t.extend(i.prototype,{init:function(){var e=this;this.updateState(),this.properties.$toggle.each(function(s,n){t(n).on("click",function(){e._handle_click(s)})})},updateState:function(){this.$element.hasClass("close")&&this.close_all(),this.$element.hasClass("open")&&this.open_all()},_handle_click:function(t){var e=this;1==this.properties.$toggle.length?this.$element.hasClass("open")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof e.settings.close.startClbk&&e.settings.close.startClbk.call(this,e)},progress:function(t,s,n){"function"==typeof e.settings.close.progressClbk&&e.settings.close.progressClbk.call(this,e,s)},complete:function(){"function"==typeof e.settings.close.completeClbk&&e.settings.close.completeClbk.call(this,e),e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):this.$element.hasClass("close")&&(this.$element.addClass("open").removeClass("close"),this.properties.$content.slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof e.settings.open.startClbk&&e.settings.open.startClbk.call(this,e)},progress:function(t,s,n){"function"==typeof e.settings.open.progressClbk&&e.settings.open.progressClbk.call(this,e,s)},complete:function(){"function"==typeof e.settings.open.completeClbk&&e.settings.open.completeClbk.call(this,e),e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):1<this.properties.$toggle.length&&(this.$element.hasClass("open")?"open"==this.properties.$content.eq(t).attr("data-item-status")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(t).slideUp({duration:this.settings.durationClose,complete:function(){e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):(this.$element.addClass("close").removeClass("close"),this.properties.$content.not(t).slideUp({duration:this.settings.durationClose,complete:function(){e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.eq(t).slideDown({duration:this.settings.durationOpen,complete:function(){e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):this.$element.hasClass("close")&&("close"==this.properties.$content.eq(t).attr("data-item-status")?(this.$element.addClass("open").removeClass("close"),this.properties.$content.eq(t).slideDown({duration:this.settings.durationOpen,complete:function(){e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(t).slideUp({duration:this.settings.duration,complete:function(){e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.not(t).slideDown({duration:this.settings.durationOpen,complete:function(){e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open"))))},open_all:function(){this.properties.$content.attr("data-item-status","open"),this.properties.$content.css("display","block"),this.$element.hasClass("close")&&this.$element.addClass("open").removeClass("close")},close_all:function(){this.properties.$content.attr("data-item-status","close"),this.properties.$content.css("display","none"),this.$element.hasClass("open")&&this.$element.addClass("close").removeClass("open")}}),t.fn[o]=function(e){var s=arguments;if(e===n||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new i(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var l;return this.each(function(){var n=t.data(this,"plugin_"+o);n instanceof i&&"function"==typeof n[e]&&(l=n[e].apply(n,Array.prototype.slice.call(s,1))),"destroy"===e&&t.data(this,"plugin_"+o,null)}),l!==n?l:this}}}(jQuery,window,document);
/*
 *  rexIndicator
 * @version 1.0.0
 *
 *  Made by NEWEB - Digital Agency
 */
!function(t,e,i,s){"use strict";function o(){var t=e,s="inner";return"innerWidth"in e||(s="client",t=i.documentElement||i.body),{width:t[s+"Width"],height:t[s+"Height"]}}function n(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},r,i),this._defaults=r,this._name=h,this.settings.from=this.$element.find(this.settings.indicator).attr("data-ri-from")||this.settings.from,this.settings.to=this.$element.find(this.settings.indicator).attr("data-ri-to")||this.settings.to,this.settings.relative_to=this.$element.find(this.settings.indicator).attr("data-ri-relative-to")||this.settings.relative_to,this.settings.relative_to_parent_position=this.$element.find(this.settings.indicator).attr("data-ri-relative-to-parent-position")||this.settings.relative_to_parent_position,this.settings.relative_to_parent_position=parseInt(this.settings.relative_to_parent_position)/100,this.$line_ref=this.$element.children(this.settings.indicator),this.$block_ref=this.$element.parents(this.settings.block_parent),this.$after_ref=this.$element.parents(this.settings.after),this.init()}var h="rexIndicator",r={indicator:".rex-indicator__wrap--absolute",block_parent:".perfect-grid-item",after:".rexpansive_section"};t.extend(n.prototype,{init:function(){this.move_indicator(),this.place_indicator();var t=this;this.$after_ref.on("relayoutComplete",function(){t.place_indicator()})},move_indicator:function(){this.$after_ref.after(this.$line_ref)},place_indicator:function(){var t={top:0,left:0};switch(this.settings.relative_to){case"block":t=o().width>=parseInt(_plugin_frontend_settings.collapse_dimension)?this._get_position_desktop_block_relative():this._get_position_mobile();break;case"start":t=o().width>=parseInt(_plugin_frontend_settings.collapse_dimension)?this._get_position_desktop_start_relative():this._get_position_mobile();break;case"parent":t=o().width>=parseInt(_plugin_frontend_settings.collapse_dimension)?this._get_position_desktop_parent_relative():this._get_position_mobile()}this.$line_ref.offset(t)},_get_position_desktop_block_relative:function(){var t={top:0,left:0},e=this.$block_ref.offset();return"left"==this.settings.to||"right"==this.settings.to?t.top=e.top+this.$block_ref.outerHeight()/2:"top"==this.settings.to?t.top=e.top-this.$line_ref.height()/2:"bottom"==this.settings.to&&(t.top=e.top+this.$block_ref.outerHeight()-this.$line_ref.height()/2),"top"==this.settings.to||"bottom"==this.settings.to?t.left=e.left+this.$block_ref.outerWidth()/2-this.$line_ref.width()/2:"left"==this.settings.to?t.left=e.left-this.$line_ref.width()/2:"right"==this.settings.to&&(t.left=e.left+this.$block_ref.outerWidth()-this.$line_ref.width()/2),t},_get_position_desktop_start_relative:function(){var t={top:0,left:0},e=this.$block_ref.offset(),i=this.$element.offset();return"left"==this.settings.to||"right"==this.settings.to?t.top=i.top+this.$element.outerHeight(!0)/2-parseInt(this.$element.css("marginTop"))-this.$line_ref.height()/2:"top"==this.settings.to?t.top=e.top-this.$line_ref.height()/2:"bottom"==this.settings.to&&(t.top=e.top+this.$block_ref.outerHeight()-this.$line_ref.height()/2),"top"==this.settings.to||"bottom"==this.settings.to?t.left=i.left+this.$line_ref.width()/2:"left"==this.settings.to?t.left=e.left-this.$line_ref.width()/2:"right"==this.settings.to&&(t.left=e.left+this.$block_ref.outerWidth()-this.$line_ref.width()/2),t},_get_position_desktop_parent_relative:function(){var t={top:0,left:0},e=this.$block_ref.offset(),i=this.$element.parent().offset();return"left"==this.settings.to||"right"==this.settings.to?t.top=i.top+this.$element.parent().outerHeight(!0)*this.settings.relative_to_parent_position-parseInt(this.$element.parent().css("marginTop"))-this.$line_ref.height()/2:"top"==this.settings.to?t.top=e.top-this.$line_ref.height()/2:"bottom"==this.settings.to&&(t.top=e.top+this.$block_ref.outerHeight()-this.$line_ref.height()/2),"top"==this.settings.to||"bottom"==this.settings.to?t.left=i.left+this.$line_ref.width()/2:"left"==this.settings.to?t.left=e.left-this.$line_ref.width()/2:"right"==this.settings.to&&(t.left=e.left+this.$block_ref.outerWidth()-this.$line_ref.width()/2),t},_get_position_mobile:function(){var t={top:0,left:0},e=this.$block_ref.offset();switch(this.settings.to){case"left":t.top=e.top-this.$line_ref.width()/2,t.left=e.left+this.$block_ref.outerWidth()/2-this.$line_ref.height()/2;break;case"top":t.top=e.top-this.$line_ref.height()/2,t.left=e.left+this.$block_ref.outerWidth()/2-this.$line_ref.width()/2;break;case"right":t.top=e.top+this.$block_ref.outerHeight()-this.$line_ref.width()/2,t.left=e.left+this.$block_ref.outerWidth()/2-this.$line_ref.height()/2;break;case"bottom":t.top=e.top+this.$block_ref.outerHeight()-this.$line_ref.height()/2,t.left=e.left+this.$block_ref.outerWidth()/2-this.$line_ref.width()/2}return t}}),t.fn[h]=function(e){var i=arguments;if(e===s||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+h)||t.data(this,"plugin_"+h,new n(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var o;return this.each(function(){var s=t.data(this,"plugin_"+h);s instanceof n&&"function"==typeof s[e]&&(o=s[e].apply(s,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+h,null)}),o!==s?o:this}}}(jQuery,window,document);
!function(e){"use strict";e.fn.reverse=[].reverse}(jQuery);
/*
 *  Perfect Grid Gallery Editor
 *  @since 2.0.0
 */
!function(t,e,i,r,s){"use strict";function a(){var t=e,r="inner";return"innerWidth"in e||(r="client",t=i.documentElement||i.body),{width:t[r+"Width"],height:t[r+"Height"]}}function o(t,i){var r,s=Date.now,a=e.requestAnimationFrame,o=s(),n=function(){s()-o<i?r||a(n):t()};return a(n),{clear:function(){r=1}}}function n(t){return t%2==0}function l(t){var e,i,r,s;r=t.getAttribute("data-rex-video-width"),s=t.getAttribute("data-rex-video-height");var a="100%";return e=t.offsetWidth,i=t.offsetHeight,r/s>e/i&&(a=i*r/s*100/e,a+="%"),a}function d(t){var e=t.getElementsByClassName("rex-video-wrap");e.length>0&&(e[0].children[0].style.maxWidth=l(e[0]))}function p(t,e){var i=0;if(0!==t.length){var r=t[0],s=t.parents(".perfect-grid-item").hasClass("block-has-slider");if(e){var a=r.cloneNode(!0),o=a.querySelector(".text-editor-span-fix");o&&o.parentNode.removeChild(o),s||0===a.textContent.trim().length&&0===a.childElementCount||(!c(r,"medium-editor-placeholder")||a.childElementCount>0||0!=t.parents(".pswp-item").length)&&(i=r.offsetHeight)}else s||0==r.textContent.trim().length&&0===r.childElementCount||(i=r.offsetHeight)}return i}function h(t){this.batchGridstack(),this.updateCollapsedBlocksHeight(),this.commitGridstack(),setTimeout(g.bind(this,t),500),this.properties.collapsingElements=!1}function g(e){this._updateElementsSizeViewers(),this._createFirstReverseStack(),this._fixImagesDimension();var r=jQuery.Event("rexlive:collapsingElementsEnded"),s=this.$section;r.settings={galleryEditorInstance:this,$section:s,reverseData:e},setTimeout(Rexbuilder_Util.fixYoutube.bind(null,s[0]),1500),Rexbuilder_Util.windowIsResizing||Rexbuilder_Util.domUpdaiting||t(i).trigger(r)}function u(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},y,i),this._defaults=y,this._name=_,this.properties={halfSeparator:0,halfSeparatorTop:0,halfSeparatorRight:0,halfSeparatorBottom:0,halfSeparatorLeft:0,halfSeparatorElementTop:0,halfSeparatorElementRight:0,halfSeparatorElementBottom:0,halfSeparatorElementLeft:0,gridTopSeparator:null,gridRightSeparator:null,gridBottomSeparator:null,gridLeftSeparator:null,wrapWidth:0,singleWidth:0,singleHeight:0,paddingTopBottom:!1,setMobilePadding:!1,setDesktopPadding:!1,gutter:0,elementStartingH:0,resizeHandle:"",sectionNumber:null,gridstackInstance:null,gridstackInstanceID:null,serializedData:[],firstStartGrid:!1,gridBlocksHeight:0,editedFromBackend:!1,oneColumMode:!1,oneColumModeActive:!1,oldLayout:"",oldCellHeight:0,blocksBottomTop:null,updatingSectionSameGrid:!1,startingLayout:"",oldFullHeight:"",blocksDimensions:[],reverseDataGridDisposition:{},updatefullHeigth2Phases:!1,removingCollapsedElements:!1,collapsingElements:!1,lastIDBlock:0,updatingGridWidth:!1,numberBlocksVisibileOnGrid:0,beforeCollapseWasFixed:!1,dispositionBeforeCollapsing:{},layoutBeforeCollapsing:{},initialStateGrid:null,mirrorStateGrid:null,fullWidthNaturalBackground:!1,naturalBackground:!1},this.$section=this.$element.parents(this._defaults.gridParentWrap),this.section=this.$section[0],this.init()}var c,m,f,b,_="perfectGridGalleryEditor",y={itemSelector:".perfect-grid-item",gridItemWidth:.0833333333,numberCol:12,gridSizerSelector:".perfect-grid-sizer",galleryLayout:"fixed",separator:20,fullHeight:"false",gridParentWrap:".rexpansive_section",mobilePadding:"false",cellHeightMasonry:5,scrollbarWrapClass:".rexlive-custom-scrollbar",editorMode:!1};"classList"in i.documentElement?(c=function(t,e){return t.classList.contains(e)},m=function(t,e){t.classList.add(e)},f=function(t,e){t.classList.remove(e)}):(c=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},m=function(t,e){c(t,e)||(t.className+=" "+e)},f=function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}),b=function(t,e){c(t,e)?f(t,e):m(t,e)};var x=function(){var t,e=i.createElement("fakeelement"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in r)if(e.style[t]!==s)return r[t]},v=x();t.extend(u.prototype,{init:function(){if("true"!=this.$section.children(".section-data").attr("data-row_edited_live")&&(this.properties.editedFromBackend=!0),this.properties.firstStartGrid=!0,this._setGridID(),this._updateBlocksRexID(),this._countBlocks(),this.clearStateGrid(),this._defineDataSettings(),this._setGutter(),this._defineHalfSeparatorProperties(),this._defineRowSeparator(),this._defineFullWidthNaturalBackground(),this._defineNaturalBackground(),this._setGridPadding(),this._defineDynamicPrivateProperties(),this._prepareElements(),this._launchGridStack(),this.settings.editorMode){var e=this;this.$element.on("change",function(i,r){if(e.element==i.target&&!Rexbuilder_Util_Editor.undoActive&&!Rexbuilder_Util_Editor.redoActive&&!Rexbuilder_Util_Editor.updatingRowDistances&&!Rexbuilder_Util_Editor.updatingSectionMargins&&!Rexbuilder_Util_Editor.updatingSectionLayout&&!Rexbuilder_Util.domUpdaiting&&!Rexbuilder_Util.windowIsResizing&&!e.properties.removingCollapsedElements&&!e.properties.collapsingElements&&!Rexbuilder_Util_Editor.addingNewBlocks&&!Rexbuilder_Util_Editor.removingBlocks&&!e.properties.updatingGridWidth&&!Rexbuilder_Util_Editor.updatingImageBg&&!Rexbuilder_Util_Editor.updatingPaddingBlock&&!Rexbuilder_Util_Editor.updatingCollapsedGrid&&!Rexbuilder_Util_Editor.openingModel&&!Rexbuilder_Util_Editor.blockCopying&&!Rexbuilder_Util_Editor.savingPage&&!Rexbuilder_Util_Editor.savingModel&&Rexbuilder_Util_Editor.needToSave){var r={eventName:"rexlive:edited",modelEdited:e.$section.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(r),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e.$section);var s=e.createActionDataMoveBlocksGrid();e.$element.attr("data-rexlive-layout-changed",!0),Rexbuilder_Util_Editor.pushAction(e.$section,"updateSectionBlocksDisposition",t.extend(!0,{},s),t.extend(!0,{},e.properties.reverseDataGridDisposition)),e.properties.reverseDataGridDisposition=s}(Rexbuilder_Util_Editor.addingNewBlocks||Rexbuilder_Util_Editor.updatingSectionLayout||e.properties.collapsingElements||Rexbuilder_Util_Editor.blockCopying)&&e.fixVideoProportion()}),this._updateElementsSizeViewers(),this._linkResizeEvents(),this._linkDragEvents(),this._linkDnDEvents(),this._launchTextEditor(),this._createFirstReverseStack(),this._updatePlaceholderPosition()}this.saveStateGrid(),this.properties.startingLayout=this.settings.galleryLayout;var i=this.section.getAttribute("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&a().width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(null===i?this.collapseElements():"true"==i.toString()&&this.collapseElements()),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady(),this.properties.firstStartGrid=!1},_launchGridStack:function(){this.settings.editorMode?(this.$element.gridstack({auto:!0,autoHide:!1,animate:!0,acceptWidgets:!1,alwaysShowResizeHandle:!0,disableOneColumnMode:!0,cellHeight:this.properties.singleHeight,draggable:{containment:this.element,handle:".rexlive-block-drag-handle",scroll:!1},"float":"masonry"!=this.settings.galleryLayout,resizable:{minWidth:this.properties.singleWidth,minHeight:this.properties.singleHeight,handles:{e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw"}},verticalMargin:0,width:this.settings.numberCol}),this.$element.addClass("gridActive")):this.$element.gridstack({auto:!0,disableOneColumnMode:!0,cellHeight:this.properties.singleHeight,disableDrag:!0,"float":"masonry"!=this.settings.galleryLayout,verticalMargin:0,staticGrid:!0,width:this.settings.numberCol,ddPlugin:!1}),this.setGridstackIstanceNumber(),this.properties.gridstackInstance=this.$element.data("gridstack");var t=this.properties.gridstackInstance,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)c(e[r],"rex-hide-element")&&t.removeWidget(e[r],!1);for(Rexbuilder_Util.domUpdaiting||"undefined"!=typeof Rexbuilder_Util_Editor.sectionCopying&&!1!==Rexbuilder_Util_Editor.sectionCopying||this.updateBlocksHeight(),r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data");this.updateElementDataHeightProperties(s,parseInt(e[r].getAttribute("data-gs-height")))}this.fixVideoProportion()},triggerGalleryReady:function(){var e=jQuery.Event("rexlive:galleryReady");e.gallery=this,e.galleryID=this.properties.sectionNumber,t(i).trigger(e)},reInitGridFront:function(t){t="undefined"!=typeof t?t:{},this.settings.galleryLayout=t.galleryLayout,this._prepareElements(),this._launchGridStack(),this.properties.startingLayout=t.galleryLayout;var e=this.$section.attr("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:t.galleryLayout,fullHeight:t.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&a().width<_plugin_frontend_settings.defaultSettings.collapseWidth&&("undefined"==typeof e?this.collapseElements():"true"==e.toString()&&this.collapseElements()),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady()},createActionDataMoveBlocksGrid:function(){var t,e=[],i=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder), .grid-stack-item:not(.removing_block)")),r=i.length,s=0;for(s=0;s<r;s++){t=i[s].getAttribute("data-rexbuilder-block-id");var a,o,n,l;a=parseInt(i[s].getAttribute("data-gs-x")),o=parseInt(i[s].getAttribute("data-gs-y")),n=parseInt(i[s].getAttribute("data-gs-width")),l=parseInt(i[s].getAttribute("data-gs-height"));var d={rexID:t,elem:i[s],x:a,y:o,w:n,h:l};e.push(d)}var p={gridstackInstance:this.properties.gridstackInstance,blocks:e,cellHeight:this.properties.singleHeight};return p},_createFirstReverseStack:function(){this.properties.reverseDataGridDisposition=this.createActionDataMoveBlocksGrid()},clearStateGrid:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)t=e[r].getAttribute("data-rexbuilder-block-id"),store.remove(t),store.remove(t+"_noEdits")},saveStateGrid:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++){t=e[r].getAttribute("data-rexbuilder-block-id");var s,a,o,n;s=parseInt(e[r].getAttribute("data-gs-x")),a=parseInt(e[r].getAttribute("data-gs-y")),o=parseInt(e[r].getAttribute("data-gs-width")),n=parseInt(e[r].getAttribute("data-gs-height")),store.set(t,{properties:[{x:s},{y:a},{w:o},{h:n}]}),store.set(t+"_noEdits",{properties:[{x:s},{y:a},{w:o},{h:n}]})}},updateGridSettingsChangeLayout:function(t){this.properties.firstStartGrid=!0,this.$element.removeClass("grid-number-"+this.properties.sectionNumber),this.settings.fullHeight="undefined"!=typeof t.full_height&&t.full_height.toString(),this.properties.elementStartingH=0,this.properties.resizeHandle="",this.properties.firstStartGrid=!1,this.properties.editedFromBackend=!1,this.properties.oneColumMode=!1,this.properties.oneColumModeActive=!1,this.properties.startingLayout="",this.properties.oldFullHeight="",this.properties.updatingSectionSameGrid=!1,this.properties.blocksBottomTop=null,this.settings.galleryLayout=t.layout;var e=parseInt(t.gutter),i=parseInt(t.top),r=parseInt(t.right),s=parseInt(t.bottom),a=parseInt(t.left),o=20,n={gutter:isNaN(e)?o:e,top:isNaN(i)?o:i,right:isNaN(r)?o:r,bottom:isNaN(s)?o:s,left:isNaN(a)?o:a};this._setGridID(),this.updateGridDistance(n),this.updateFloatingElementsGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.clearStateGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.removeCollapseElementsProperties()},updateGridLayout:function(e,r){if(this.settings.galleryLayout!=e&&(this._saveBlocksPosition(),this.removeCollapseElementsProperties(),this.properties.oldCellHeight=this.properties.singleHeight,this.properties.oldLayout=this.settings.galleryLayout,this.properties.oldFullHeight=this.settings.fullHeight,this.settings.galleryLayout=e,this.settings.fullHeight="false",this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.updateLayoutBlocksHeight(),this.updateFloatingElementsGridstack(),this.commitGridstack(),"undefined"!=typeof r)){var s=this;setTimeout(function(){var e=s;e._updateElementsSizeViewers();var a=jQuery.Event("rexlive:galleryLayoutChanged");a.settings={galleryEditorInstance:e,$section:s.$section,reverseData:r},s.properties.oldLayout="",s.properties.oldCellHeight=s.properties.singleHeight,t(i).trigger(a)},300,r,s)}},updateFloatingElementsGridstack:function(){var t=this.properties.gridstackInstance;t&&("masonry"==this.settings.galleryLayout?(t.grid._float=!1,t.grid["float"]=!1):(t.grid._float=!0,t.grid["float"]=!0))},updateGridstack:function(){this.batchGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),Rexbuilder_Util.domUpdaiting||this.updateBlocksHeight(),this.commitGridstack()},updateSectionWidthWrap:function(e,r){var s=this.$element.parent();if("100%"==e?(s.removeClass("center-disposition"),s.addClass("full-disposition")):(s.removeClass("full-disposition"),s.addClass("center-disposition")),s.css("max-width",e),"undefined"!=typeof r){this.updateGridstack();var a=this;setTimeout(function(){var e=a;e._updateElementsSizeViewers();var s=jQuery.Event("rexlive:sectionWidthApplyed");s.settings={galleryEditorInstance:e,$section:a.$section,reverseData:r},t(i).trigger(s)},300,r,a)}},updateRowDistances:function(e,r){if(this.updateGridDistance(e),"undefined"!=typeof r){var s=this;this.updateGridstack(),setTimeout(function(){var a=s;a._updateElementsSizeViewers();var o=jQuery.Event("rexlive:rowDistancesApplied");o.settings={galleryEditorInstance:a,$section:s.$section,newDistances:e,reverseData:r},t(i).trigger(o)},300,r,s,e)}},updateRowSectionMargins:function(e,r){if("undefined"!=typeof r){var s=this;this.updateGridstack(),setTimeout(function(){var a=s;a._updateElementsSizeViewers();var o=jQuery.Event("rexlive:sectionMarginsApplied");o.settings={galleryEditorInstance:a,$section:s.$section,newMargins:e,reverseData:r},t(i).trigger(o)},300,r,s,e)}},updateGridDistance:function(e){this.properties.gutter=parseInt(e.gutter),this.properties.gridTopSeparator=parseInt(e.top),this.properties.gridRightSeparator=parseInt(e.right),this.properties.gridBottomSeparator=parseInt(e.bottom),this.properties.gridLeftSeparator=parseInt(e.left),this._setGutter(),this._defineHalfSeparatorProperties(),this.properties.setDesktopPadding=!1,this._setGridPadding();var i,r=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=r.length,a=0;for(a=0;a<s;a++)i=t(r[a]),this._updateElementPadding(i.find(".grid-stack-item-content")),this.settings.editorMode&&this._updateHandlersPosition(i);this.settings.editorMode&&this._updatePlaceholderPosition()},refreshGrid:function(){this._defineDynamicPrivateProperties(),this._setGridPadding(),this._fixHeightAllElements()},_countBlocks:function(){var e=0,i=0,r=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=r.length,a=0;for(a=0;a<s;a++){e=a;for(var o,n=/\d+$/gm,l=r[a].getAttribute("id");null!==(o=n.exec(l));)o.i===n.lastIndex&&n.lastIndex++,t.each(o,function(t,e){i=parseInt(e)});i>e&&(e=i)}this.properties.numberBlocksVisibileOnGrid=e,this.properties.lastIDBlock=e},getLastID:function(){return this.properties.lastIDBlock},getRowNumber:function(){return this.properties.sectionNumber},_setGridID:function(){this.properties.sectionNumber=parseInt(this.section.getAttribute("data-rexlive-section-number")),m(this.element,"grid-number-"+this.properties.sectionNumber)},_updateBlocksRexID:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)if(e[r].getAttribute("data-rexbuilder-block-id")===s||""==e[r].getAttribute("data-rexbuilder-block-id")){t=Rexbuilder_Util.createBlockID(),e[r].setAttribute("data-rexbuilder-block-id",t);var a=e[r].querySelector(".rexbuilder-block-data");a&&a.setAttribute("data-rexbuilder_block_id",t)}},saveGrid:function(){var e=this,i="masonry"==e.settings.galleryLayout?e.properties.singleHeight/e.properties.singleWidth:1;this.serializedData=r.map(e.$element.children(".grid-stack-item"),function(e){var r=t(e),s=r.data("_gridstack_node");return{id:e.id,x:s.x,y:Math.round(s.y*i),width:s.width,height:Math.round(s.height*i)}},this)},getGridData:function(){return JSON.stringify(this.serializedData,null,"    ")},getGridstackNodes:function(){return this.properties.gridstackInstance.grid.nodes},getElementBottomTop:function(){var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=i.length,a=0;for(a=0;a<s;a++)c(i[a],"removing_block")||(t=i[a],t.x=parseInt(i[a].attributes["data-gs-x"].value),t.y=parseInt(i[a].attributes["data-gs-y"].value),t.w=parseInt(i[a].attributes["data-gs-width"].value),t.h=parseInt(i[a].attributes["data-gs-height"].value),t.xw=t.x+t.w,t.yh=t.y+t.h,e.push(t));return r.sortBy(e,[function(t){return t.yh},function(t){return t.xw}]).reverse()},getElementsTopBottom:function(){var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=i.length,a=0;for(a=0;a<s;a++)c(i[a],"removing_block")||(t=i[a],t.x=parseInt(i[a].getAttribute("data-gs-x")),t.y=parseInt(i[a].getAttribute("data-gs-y")),e.push(t));return r.sortBy(e,[function(t){return t.y},function(t){return t.x}])},batchGridstack:function(){null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackBatchMode=!0},commitGridstack:function(){Rexbuilder_Util.domUpdaiting||null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.commit()},updateFullHeight:function(t){t="undefined"==typeof t||"true"==t.toString(),this.properties.gridBlocksHeight=parseInt(this.element.getAttribute("data-gs-current-height")),this.properties.gridBlocksHeight=0===this.properties.gridBlocksHeight?1:this.properties.gridBlocksHeight;var e;t?"fixed"==this.settings.galleryLayout&&(e=a().height/this.properties.gridBlocksHeight):e=this.properties.singleWidth,this.updateGridstackStyles(e),this.$element.attr("data-full-height",t)},updateGridstackStyles:function(t){if(t!==s&&(this.properties.singleHeight=t),0!==this.properties.singleHeight&&null!==this.element.offsetParent&&null!==this.properties.gridstackInstance){var e=this.properties.gridstackInstance;e.cellHeight(this.properties.singleHeight),e._initStyles(),e._updateStyles(this.properties.singleHeight)}},updateGridstackGridSizes:function(t,e){this.properties.singleHeight=e,this.properties.singleWidth=t;var i=this.properties.gridstackInstance;i.cellHeight(e),i._initStyles(),i._updateStyles(this.properties.singleHeight)},restoreBackup:function(){var e,i,r=this;r.$element.children(".grid-stack-item").each(function(){e=this,i=t(this),i.attr({"data-gs-x":e.attributes["data-col"].value-1,"data-gs-y":e.attributes["data-row"].value-1,"data-gs-width":e.attributes["data-width"].value,"data-gs-height":e.attributes["data-height"].value})})},destroyGridstack:function(){if(null!==this.properties.gridstackInstance){var e,i=this.properties.gridstackInstance;i.destroy(!1),this.settings.editorMode&&this.$element.children(".grid-stack-item").each(function(){e=t(this),e.draggable("destroy"),e.resizable("destroy")}),f(this.element,"grid-stack-instance-"+this.properties.gridstackInstanceID),c(this.element,"grid-stack-one-column-mode")&&f(this.element,"grid-stack-one-column-mode"),this.properties.gridstackInstance=null}},getGridWidth:function(){return this.properties.wrapWidth},setGridWidth:function(t){this.$element.outerWidth(t)},getSingleWidth:function(){return this.properties.singleWidth},getSeparator:function(){return this.properties.gutter},getSectionNumber:function(){return this.properties.sectionNumber},setProperty:function(t){this.properties[t[0]]=t[1]},fillEmptySpaces:function(){var t,e,r,s,a,o,n,l=this.settings.numberCol,d=this._calculateGridHeight(),p=this.properties.gridstackInstance,h=[];for(e=1;e<=d;e++)for(t=1;t<=l;t++)if(p.isAreaEmpty(t-1,e-1,1,1)){for(r=0,s=a=1,o=t,n=e;o<=l&&p.isAreaEmpty(o-1,n-1,1,1);)r=o,o++;for(s=o-t,n++,o=t;n<=d;){for(;o<=r&&p.isAreaEmpty(o-1,n-1,1,1);)o++;if(o-1!=r)break;n++,o=t}a=n-e;var g=i.createElement("div"),u={el:g,x:t-1,y:e-1,w:s,h:a};p.addWidget(u.el,u.x,u.y,u.w,u.h,!1),h.push(u)}var c=this.properties.singleWidth,m=h.length;for(t=0;t<m;t++)p.removeWidget(h[t].el,!0),"masonry"==this.settings.galleryLayout&&(h[t].y=Math.floor(h[t].y*this.properties.singleHeight/c)+1,h[t].h=Math.round(h[t].h*this.properties.singleHeight/c));return h},removeBlock:function(t){this.properties.numberBlocksVisibileOnGrid--,this.properties.gridstackInstance.removeWidget(t[0],!1),"default"==Rexbuilder_Util.activeLayout&&t.addClass("removing_block"),t.addClass("rex-hide-element")},reAddBlock:function(e){this.properties.numberBlocksVisibileOnGrid++;var i,r,s,a;i=parseInt(e.attr("data-gs-x")),r=parseInt(e.attr("data-gs-y")),s=parseInt(e.attr("data-gs-width")),a=parseInt(e.attr("data-gs-height")),"default"==Rexbuilder_Util.activeLayout&&e.removeClass("removing_block"),e.removeClass("rex-hide-element"),e.draggable("destroy"),e.resizable("destroy"),e.children(".ui-resizable-handle").each(function(e,i){t(i).remove()}),this._addHandles(e,"e, s, w, se, sw"),this.properties.gridstackInstance.addWidget(e[0],i,r,s,a,!1,1,500,1)},deleteBlock:function(e){var i={targetElement:e,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};this.removeBlock(e),this._createFirstReverseStack(),Rexbuilder_Util.stopBlockVideos(e),0==this.properties.numberBlocksVisibileOnGrid?this.$section.addClass("empty-section"):(this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"));var r={targetElement:e,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",r,i)},createNewBlock:function(e,i,r,s){s="undefined"!=typeof s?s:"",Rexbuilder_Util_Editor.addingNewBlocks=!0;var a="text"==s?12:6,o=4;i="undefined"==typeof i?a:parseInt(i),r="masonry"==e?"undefined"==typeof r?Math.round(this.properties.singleWidth*o/this.settings.cellHeightMasonry):parseInt(r):"undefined"==typeof r?o:parseInt(r),i=parseInt(i),r=parseInt(r);var n=this.createBlock(0,0,i,r,s),l={targetElement:n,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};this.properties.gridstackInstance.addWidget(n[0],0,0,i,r,!0,1,500,1),n.filter(".insert-block-animation").one(v,function(t){this.classList.remove("insert-block-animation")});var d=parseInt(n.attr("data-gs-x")),p=parseInt(n.attr("data-gs-y"));this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.update(n[0],d,p,i,r),this.properties.gridstackInstance.commit(),this._createFirstReverseStack();var h={targetElement:n,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};return Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",h,l),Rexbuilder_Util_Editor.addingNewBlocks=!1,n.removeAttr("data-gs-auto-position"),n.data("gs-height",parseInt(n.attr("data-gs-height"))),n.data("gs-width",parseInt(n.attr("data-gs-width"))),n.data("gs-y",parseInt(n.attr("data-gs-y"))),n.data("gs-x",parseInt(n.attr("data-gs-x"))),n},createBlock:function(e,i,r,s,a){a="undefined"!=typeof a?a:"",this.properties.numberBlocksVisibileOnGrid++,this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),this.properties.lastIDBlock=this.properties.lastIDBlock+1;var o=this.properties.lastIDBlock,n=Rexbuilder_Util.createBlockID();tmpl.arg="block";var l=tmpl("tmpl-new-block",{rexID:n,id:this.properties.sectionNumber+"_"+o,gsWidth:r,gsHeight:s,gsX:e,gsY:i,backendHeight:s,backendWidth:r,backendX:e+1,backendY:i+1,block_type:a}),d=t(l),p={block_type:a};d.append(tmpl("tmpl-toolbox-block-wrap",p)),d.find(".grid-item-content").prepend(tmpl("tmpl-block-drag-handle"));var h=d[0];return this._prepareElement(h),this.updateSizeViewerText(h,r,s),d},updateAllElementsProperties:function(){this.properties.editedFromBackend=!1,this.properties.startingLayout=this.settings.galleryLayout;var t=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder)")),e=t.length,i=0;if(this.properties.updatingSectionSameGrid)for(this.properties.updatingSectionSameGrid=!1,i=0;i<e;i++)this.updateElementAllProperties(t[i]),"undefined"!=typeof store.get(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits")&&store.remove(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits");for(i=0;i<e;i++)this.updateElementAllProperties(t[i])},updateElementAllProperties:function(t){var e,i,r=t,s=this.properties.singleWidth,a=r.querySelector(".rexbuilder-block-data");e=parseInt(r.getAttribute("data-gs-x")),e+=1,r.setAttribute("data-col",e),a.setAttribute("data-col",e),i="masonry"==this.settings.galleryLayout?Math.floor(parseInt(r.getAttribute("data-gs-y"))*this.properties.singleHeight/s):parseInt(r.getAttribute("data-gs-y")),i+=1,r.setAttribute("data-row",i),a.setAttribute("data-row",i);var o=parseInt(r.getAttribute("data-gs-width")),n=r.getAttribute("data-width");r.setAttribute("data-width",o),f(r,"w"+n),m(r,"w"+o),a.setAttribute("data-size_x",o);var l,d=r.getAttribute("data-height");l="masonry"==this.settings.galleryLayout?Math.round(parseInt(r.getAttribute("data-gs-height"))*this.properties.singleHeight/s):parseInt(r.getAttribute("data-gs-height")),r.setAttribute("data-height",l),this.updateElementDataHeightProperties(a,parseInt(r.getAttribute("data-gs-height"))),f(r,"h"+d),m(r,"h"+l),a.setAttribute("data-size_y",l)},_defineDataSettings:function(){this.element.getAttribute("data-separator")&&(this.properties.gutter=parseInt(this.element.getAttribute("data-separator"))),this.element.getAttribute("data-layout")&&(this.settings.galleryLayout=this.element.getAttribute("data-layout").toString()),this.element.getAttribute("data-full-height")&&(this.settings.fullHeight=this.element.getAttribute("data-full-height").toString()),this.element.getAttribute("data-mobile-padding")&&(this.settings.mobilePadding=this.element.getAttribute("data-mobile-padding").toString())},_defineDynamicPrivateProperties:function(){var t=this.element.offsetWidth,e=this.section.getAttribute("data-rex-collapse-grid");if(e&&("default"==Rexbuilder_Util.activeLayout&&a().width<=_plugin_frontend_settings.defaultSettings.collapseWidth&&"true"==e.toString()||"true"==e.toString())?this.properties.oneColumModeActive=!0:this.properties.oneColumModeActive=!1,this.properties.wrapWidth=t,this.properties.singleWidth=t*this.settings.gridItemWidth,!this.settings.editorMode&&this.properties.fullWidthNaturalBackground)this._setFullWidthNaturalBackground(),this._setElementsToHeight("12");else if(!this.settings.editorMode&&this.properties.naturalBackground)this._setNaturalBackground(),this._setElementsToHeight("12");else if("masonry"==this.settings.galleryLayout)this.properties.singleHeight=this.settings.cellHeightMasonry;else{var i,r=this.properties.singleHeight;if("true"==this.settings.fullHeight.toString()?(this.properties.gridBlocksHeight=this._calculateGridHeight(),i=a().height/this.properties.gridBlocksHeight):i=this.properties.singleWidth,r==i)return!1;this.properties.singleHeight=i}return!0},setFullWidthNaturalBackground:function(){!this.settings.editorMode&&this.properties.fullWidthNaturalBackground&&(this._setFullWidthNaturalBackground(),this._setElementsToHeight("12"))},_setFullWidthNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");if(null!==t&&null!==e&&""!==t&&""!==e){var i=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t);this.section.style.minHeight=i+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(i-this.properties.gutter)/5:this.properties.singleHeight=(i-this.properties.gutter)/12}},setNaturalBackground:function(){!this.settings.editorMode&&this.properties.naturalBackground&&(this._setNaturalBackground(),this._setElementsToHeight("12"))},_setNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");if(null!==t&&null!==e&&""!==t&&""!==e){var i=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t);i>e&&(i=e),this.section.style.minHeight=i+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(i-this.properties.gutter)/5:this.properties.singleHeight=(i-this.properties.gutter)/12}},_setElementsToHeight:function(t){var e=[].slice.call(this.element.getElementsByClassName("perfect-grid-item")),i=e.length,r=0;for(r=0;r<i;r++)e[r].setAttribute("data-gs-min-height",t)},_calculateGridHeight:function(){var t,e=0,i=[].slice.call(this.element.querySelectorAll(".grid-stack-item")),r=i.length,s=0;for(s=0;s<r;s++)-1===i[s].className.indexOf("removing_block")&&(t=parseInt(i[s].getAttribute("data-gs-height"))+parseInt(i[s].getAttribute("data-gs-y")),t>e&&(e=t));return e},_defineHalfSeparatorProperties:function(){n(this.properties.gutter)?(this.properties.halfSeparatorTop=this.properties.gutter/2,this.properties.halfSeparatorRight=this.properties.gutter/2,this.properties.halfSeparatorBottom=this.properties.gutter/2,this.properties.halfSeparatorLeft=this.properties.gutter/2):(this.properties.halfSeparatorTop=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorRight=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorBottom=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorLeft=Math.floor(this.properties.gutter/2)),this.properties.paddingTopBottom=-1!==this.section.className.indexOf("distance-block-top-bottom")},_defineRowSeparator:function(){this.properties.gridTopSeparator=this.element.getAttribute("data-row-separator-top")?parseInt(this.element.getAttribute("data-row-separator-top")):null,this.properties.gridRightSeparator=this.element.getAttribute("data-row-separator-right")?parseInt(this.element.getAttribute("data-row-separator-right")):null,this.properties.gridBottomSeparator=this.element.getAttribute("data-row-separator-bottom")?parseInt(this.element.getAttribute("data-row-separator-bottom")):null,this.properties.gridLeftSeparator=this.element.getAttribute("data-row-separator-left")?parseInt(this.element.getAttribute("data-row-separator-left")):null},_defineFullWidthNaturalBackground:function(){c(this.section,"full-width-natural-background")&&(this.properties.fullWidthNaturalBackground=!0)},_defineNaturalBackground:function(){c(this.section,"natural-background")&&(this.properties.naturalBackground=!0)},_setGutter:function(){n(this.properties.gutter)?(this.properties.halfSeparatorElementTop=this.properties.gutter/2,this.properties.halfSeparatorElementRight=this.properties.gutter/2,this.properties.halfSeparatorElementBottom=this.properties.gutter/2,this.properties.halfSeparatorElementLeft=this.properties.gutter/2):(this.properties.halfSeparatorElementTop=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementRight=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementBottom=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorElementLeft=Math.ceil(this.properties.gutter/2));
},_fixHeightGrid:function(){var t=this.element;this.$element.outerHeight(t.attributes["data-gs-current-height"].value*this.properties.singleWidth)},_updateElementPadding:function(t){t.css({"padding-left":this.properties.halfSeparatorElementLeft,"padding-right":this.properties.halfSeparatorElementRight,"padding-top":this.properties.halfSeparatorElementTop,"padding-bottom":this.properties.halfSeparatorElementBottom})},_updateHandlersPosition:function(t){t.find(".ui-focused-element-highlight").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-e").css({top:this.properties.halfSeparatorElementTop,right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-se").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-s").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-sw").css({bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-w").css({top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft})},_updatePlaceholderPosition:function(){this.properties.gridstackInstance.placeholder.children(".placeholder-content").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom})},_saveBlocksPosition:function(){var e,i,r,s,a,o=this,n="";this.$element.children(".grid-stack-item").each(function(){e=t(this),n=e.attr("data-rexbuilder-block-id"),i=parseInt(e.attr("data-gs-x")),r=parseInt(e.attr("data-gs-y")),s=parseInt(e.attr("data-gs-width")),a=parseInt(e.attr("data-gs-height")),store.set(n,{properties:[{x:i},{y:r},{w:s},{h:a}]}),Rexbuilder_Util_Editor.updatingSectionLayout&&!o.properties.updatingSectionSameGrid&&store.set(n+"_noEdits",{properties:[{x:i},{y:r},{w:s},{h:a}]})})},_restoreBlocksPosition:function(){var e,i=this.properties.gridstackInstance;this.$element.children(".grid-stack-item").each(function(){var r,s,a,o,n;e=t(this),n=Rexbuilder_Util_Editor.updatingSectionLayout&&"undefined"!=typeof store.get(e.attr("data-rexbuilder-block-id")+"_noEdits")?store.get(e.attr("data-rexbuilder-block-id")+"_noEdits"):store.get(e.attr("data-rexbuilder-block-id")),r=parseInt(n.properties[0].x),s=parseInt(n.properties[1].y),a=parseInt(n.properties[2].w),o=parseInt(n.properties[3].h),i.update(this,r,s,a,o)})},createResizePlaceHolder:function(e){var r=e[0],s=i.createElement("div"),a=t(s);e.parent().append(s),a.addClass("resizePlaceHolder"),a.addClass("w"+parseInt(r.attributes["data-width"].value));var o=parseInt(r.attributes["data-row"].value-1)*this.properties.singleWidth,n=parseInt(r.attributes["data-col"].value-1)*this.properties.singleWidth;return a.css("transform","translate("+n+"px, "+o+"px)"),a.css("position","absolute"),a},updateResizePlaceHolder:function(t,e){var i=e[0],r=this.properties.singleWidth,s=(parseInt(i.attributes["data-width"].value),Math.round(parseInt(e.outerWidth())/r));s<=0&&(s=1),t.removeClass(),t.addClass("resizePlaceHolder w"+s);var a=Math.round(parseInt(e.outerHeight())/r);a<=0&&(a=1),t.css("width",s*r+"px"),t.css("height",a*r+"px")},_prepareElements:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;if(this.properties.editedFromBackend&&("undefined"==typeof Rexbuilder_Util_Editor.sectionCopying||!1===Rexbuilder_Util_Editor.sectionCopying))for(i=0;i<e;i++)t[i].setAttribute("data-gs-x",parseInt(t[i].getAttribute("data-col"))-1),t[i].setAttribute("data-gs-y",parseInt(t[i].getAttribute("data-row"))-1),t[i].setAttribute("data-gs-width",t[i].getAttribute("data-width")),t[i].setAttribute("data-gs-height",t[i].getAttribute("data-height"));var r;for(i=0;i<e;i++)this._prepareElement(t[i]),r=t[i].querySelector(".rexbuilder-block-data"),null===r.getAttribute("data-gs_start_h")&&r.setAttribute("data-gs_start_h",parseInt(t[i].getAttribute("data-gs-height")))},_prepareElement:function(e){var i=this,r=t(e);i.settings.editorMode&&i._prepareElementEditing(r),i._updateElementPadding(r.find(".grid-stack-item-content")),i.settings.editorMode&&i._updateHandlersPosition(r),i._fixImageSize(e)},updateElementDataHeightProperties:function(t,e){"masonry"==this.settings.galleryLayout?t.setAttribute("data-block_height_masonry",e):t.setAttribute("data-block_height_fixed",e),t.setAttribute("data-gs_start_h",e),t.setAttribute("data-block_height_calculated",e)},_prepareElementEditing:function(e){if(this._addHandles(e,"e, s, w, se, sw"),e.attr({"data-gs-min-width":1,"data-gs-min-height":1,"data-gs-max-width":500}),0===e.find(".rex-slider-wrap").length){var r=e.find(".text-wrap");if(0==r.length){var s;s=i.createElement("div"),t(s).addClass("text-wrap"),e.find(".rex-custom-scrollbar").append(s)}else if(0==r.children(".text-editor-span-fix").length){var a=i.createElement("span");t(a).css("display","none"),t(a).addClass("text-editor-span-fix"),r.append(a)}}this.addElementListeners(e)},_fixImagesDimension:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;for(i=0;i<e;i++)this._fixImageSize(t[i])},_fixImageSize:function(t){var e=t.querySelector(".grid-item-content");if(null!==e){var i=e.querySelector(".rex-image-wrapper");if(null!==i&&c(i,"natural-image-background")){var r=isNaN(parseInt(e.getAttribute("data-background_image_width")))?-1:parseInt(e.getAttribute("data-background_image_width"));r!=-1&&(t.offsetWidth<r?m(i,"small-width"):f(i,"small-width"))}}},_removeHandles:function(e){e.children(".ui-resizable-handle").each(function(){t(this).remove()})},_addHandles:function(e,r){var s,a,o,n,l,d=e[0],p=d.getAttribute("data-rexbuilder-block-id"),h=r.split(", "),g=h.length;for(l=0;l<g;l++)s=i.createElement("span"),m(s,"circle-handle"),m(s,"circle-handle-"+h[l]),s.setAttribute("data-axis",h[l]),o=i.createElement("div"),m(o,"ui-resizable-handle"),m(o,"ui-resizable-"+h[l]),o.setAttribute("data-axis",h[l]),"DIV"===d.tagName.toUpperCase()&&""!==p&&o.setAttribute("id","_handle_"+h[l]),a=t(s),n=t(o),a.appendTo(n),n.appendTo(e)},addElementListeners:function(e){function i(i){var r=t(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(c=!1,Rexbuilder_Util_Editor.mouseDownEvent=i,(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&i.target!=u&&(clearTimeout(this.downTimer),this.downTimer=setTimeout(function(){h.addClass("drag-up"),e.addClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.mouseDownEvent&&(Rexbuilder_Util_Editor.mouseDownEvent.target=u,Rexbuilder_Util_Editor.mouseDownEvent.srcElement=u,Rexbuilder_Util_Editor.mouseDownEvent.toElement=u,Rexbuilder_Util_Editor.elementDraggingTriggered=!0,e.trigger(Rexbuilder_Util_Editor.mouseDownEvent))},125),clearTimeout(d.doubleDownTimer),d.doubleDownTimer=setTimeout(function(){if(!(Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.editingElement||e.hasClass("ui-resizable-resizing")||e.hasClass("ui-draggable-dragging")||r.hasClass("ui-resizable-handle")||r.hasClass("circle-handle"))&&1===i.which){e.trigger("mouseup");var s=tmpl("tmpl-tool-drag",{}),a=t(s);a.css("position","absolute"),a.css("zIndex",20),e.append(a);var o=e[0].getBoundingClientRect();a.css("left",i.clientX-o.left-a[0].offsetWidth/2),a.css("top",i.clientY-o.top-a[0].offsetHeight/2),e.addClass("grid-stack-item--drag-to-row"),d.$section.addClass("rexpansive-lock-section--overlay")}},1500))):(h.addClass("drag-up"),e.addClass("ui-draggable--drag-up"),i.target=u,i.srcElement=u,i.toElement=u)}function r(i){var r=t(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(Rexbuilder_Util_Editor.elementDraggingTriggered&&(h.removeClass("drag-up"),e.removeClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.elementDraggingTriggered=!1),clearTimeout(this.downTimer),clearTimeout(d.doubleDownTimer),Rexbuilder_Util_Editor.mouseDownEvent=null):(h.removeClass("drag-up"),e.removeClass("ui-draggable--drag-up"))}function s(t){if(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id")){if(Rexbuilder_Util_Editor.editingElement=!0,Rexbuilder_Util_Editor.editedElement=e,Rexbuilder_Util_Editor.editedTextWrap=g,Rexbuilder_Util_Editor.editingGallery=!0,Rexbuilder_Util_Editor.editedGallery=d,!g.is(":focus")){var i;if(e.hasClass("rex-flex-top"))i="end";else if(e.hasClass("rex-flex-middle")){var r=g.innerHeight(),s=e.innerHeight();i=t.offsetY<s/2-r/2?"begin":"end"}else i=e.hasClass("rex-flex-bottom")?"begin":"end";"begin"==i?g.focus():Rexbuilder_Util_Editor.setEndOfContenteditable(g[0])}Rexbuilder_Util_Editor.startEditingElement()}}function a(t){Rexbuilder_Util_Editor.elementDraggingTriggered||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id")&&(Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}function o(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=e,d.focusElement(Rexbuilder_Util_Editor.focusedElement))}function n(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement,d.unFocusElement(Rexbuilder_Util_Editor.focusedElement))}function l(e){var i=t(e.currentTarget),r=i.parents(".grid-stack-item").find(".block-toolBox__editor-tools"),s=r.find(".edit-block-content"),a=r.find(".edit-block-content-position");0==p(i,d.settings.editorMode)?(s.removeClass("tool-button--hide"),a.addClass("tool-button--hide")):(s.addClass("tool-button--hide"),a.removeClass("tool-button--hide"))}var d=this,h=e.find(".rexlive-block-drag-handle"),g=e.find(".text-wrap"),u=h[0],c=!1;e.on("mousedown",i),e.on("mouseup",r),e.on("dblclick",s),e.on("click",a),e.on("mouseenter",o),e.on("mouseleave",n),e.on("blur",".medium-editor-element",l)},unFocusElementEditing:function(t){t.removeClass("focused")},focusElement:function(t){t.addClass("focused"),this.$section.addClass("focusedRow")},unFocusElement:function(t){t.removeClass("focused"),this.$section.removeClass("focusedRow")},_updateElementsSizeViewers:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;for(i=0;i<e;i++)this.updateSizeViewerSizes(t[i]),this.checkBlockDimension(t[i])},updateSizeViewerText:function(t,e,i,r,a){if(r="undefined"!=typeof r?r:t.querySelector(".top-tools .el-size-viewer .el-size-viewer__val"),a="undefined"!=typeof a?a:t.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),e===s||i===s){var e,i;e=parseInt(t.getAttribute("data-gs-width")),i=parseInt(t.getAttribute("data-gs-height")),"masonry"==this.settings.galleryLayout&&(i=Math.round(i*this.properties.singleHeight))}var o=e+" x "+i,n=e+"x"+i;r&&(r.textContent=o),a&&(a.textContent=n)},updateSizeViewerSizes:function(t){this.updateSizeViewerText(t,Math.round(t.offsetWidth/this.properties.singleWidth),this.calculateHeightSizeViewer(t))},calculateHeightSizeViewer:function(t){return"masonry"==this.settings.galleryLayout?t.offsetHeight:Math.round(t.offsetHeight/this.properties.singleHeight)},checkBlockDimension:function(t,e){e="undefined"!=typeof e?e:t.offsetWidth,e<190?m(t,"ui-tools--view-mobile"):f(t,"ui-tools--view-mobile"),e<100?m(t,"ui-hide-mobile-size-viewer"):f(t,"ui-hide-mobile-size-viewer")},_linkResizeEvents:function(){var e,i,r,a,n,l,h,g,u,b,_,y,x,v,k,E,S,I,w,R,A=this;A.$element.on("resizestart",function(s,o){o.element.is("span")||(Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.endEditingElement(),A.properties.resizeHandle=t(s.toElement).attr("data-axis"),e=s.target,x=s.target.querySelector(".grid-item-content"),v=s.target.querySelector(".grid-item-content-wrap"),_=s.target.querySelector(".text-wrap"),y=t(_),S=s.target.querySelector(".top-tools .el-size-viewer .el-size-viewer__val"),I=s.target.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),w=s.target.getElementsByClassName("pswp-item").length>0,R=c(s.target,"block-has-slider"),a=isNaN(parseInt(x.getAttribute("data-background_image_width")))?0:parseInt(x.getAttribute("data-background_image_width")),n=isNaN(parseInt(x.getAttribute("data-background_image_height")))?0:parseInt(x.getAttribute("data-background_image_height")),k=x.querySelector(".rex-image-wrapper"),E=null!==k&&c(k,"natural-image-background"),Rexbuilder_Util_Editor.elementIsResizing=!0,i=parseInt(s.target.getAttribute("data-gs-x")),"e"==A.properties.resizeHandle||"se"==A.properties.resizeHandle?s.target.setAttribute("data-gs-max-width",A.settings.numberCol-i):"w"!=A.properties.resizeHandle&&"sw"!=A.properties.resizeHandle||(r=parseInt(s.target.getAttribute("data-gs-width"))),h=0,l=0,b="masonry"==A.settings.galleryLayout?1:A.properties.singleWidth)}).on("resize",function(t,e){e.element.is("span")||(E&&(e.size.width<a?m(k,"small-width"):f(k,"small-width")),A.updateSizeViewerText(t.target,Math.round(e.size.width/A.properties.singleWidth),Math.round(e.size.height/b),S,I),e.originalSize.width!==e.size.width&&A.checkBlockDimension(t.target,e.size.width),"masonry"==A.settings.galleryLayout&&E&&(u=t.target.offsetWidth,l=u<a?n*(u-A.properties.gutter)/a:n,l=isNaN(l)?0:l),h=p(y,A.settings.editorMode),g=Math.max(h,l),"masonry"==A.settings.galleryLayout?A.properties.gridstackInstance.minHeight(t.target,Math.round((g+A.properties.gutter)/A.properties.singleHeight)):A.properties.gridstackInstance.minHeight(t.target,Math.ceil((g+A.properties.gutter)/A.properties.singleWidth)))}).on("gsresizestop",function(t,e){if(Rexbuilder_Util_Editor.elementIsResizing){"masonry"==A.settings.galleryLayout&&(e.setAttribute("data-height",Math.round(e.getAttribute("data-gs-height")/A.properties.singleWidth)),e.querySelector(".rexbuilder-block-data").setAttribute("data-element_real_fluid",e.getAttribute("data-gs-min-height")==e.getAttribute("data-gs-height")?1:0)),A.updateAllElementsProperties(),d(e),A.updateSizeViewerText(e,s,s,S,I),A.checkBlockDimension(e),e.setAttribute("data-gs-max-width",500),clearTimeout(A.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.elementIsResizing=!1,A.$element.attr('data-rexlive-layout-changed="true"'),A.removeCollapseElementsProperties();var i=A.$section;A.properties.gridstackInstance.minHeight(e,1),A.properties.gridstackInstance.batchUpdate(),A.properties.gridstackInstance.commit(),_=null,x=null,v=null,S=null,I=null,o(Rexbuilder_Util.fixYoutube.bind(null,i[0]),1500)}})},_linkDragEvents:function(){var t=this;this.$element.on("dragstart",function(t,e){"undefined"!=typeof e&&(Rexbuilder_Util_Editor.elementIsDragging=!0,e.helper.eq(0).find(".text-wrap").blur(),Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.endEditingElement())}).on("drag",function(t,e){}).on("dragstop",function(e,i){"undefined"!=typeof i&&(t.updateAllElementsProperties(),Rexbuilder_Util_Editor.elementIsDragging=!1,clearTimeout(t.doubleDownTimer))})},_linkDnDEvents:function(){var e,r=this,s=!1,a=!0,o=function(e){var r=t(i).scrollTop();t(i).scrollTop(r+e),a||setTimeout(function(){o(e)},20)};r.$element.on("dragstart",".drag-to-section",function(i){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){s||setTimeout(function(){Rexbuilder_Util_Editor.lockRowsLight(r.$section),s=!0},100),i.originalEvent.dataTransfer.effectAllowed="all";var a=t(this).parents(".grid-stack-item");e=a.clone(!1),e.find(".rexbuilder-block-data").remove(),e.find(".ui-resizable-handle").remove(),e.find(".rexlive-block-toolbox").remove(),e.find(".grid-stack-item-content").css("height","100%"),t("body").append(e),e.css("position","fixed"),e.css("left",i.clientX),e.css("top",i.clientY),e.css("width",a.width()),e.css("height",a.height()),e.css("transform","scale(0.5)"),e.css("transformOrigin","top left");var o=a.attr("data-rexbuilder-block-id"),n=r.$section.attr("data-rexlive-section-id"),l="undefined"!=typeof r.$section.attr("data-rexlive-model-number")?r.$section.attr("data-rexlive-model-number"):"",d={sectionID:n,modelNumber:l,rexID:o};i.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(d))}}),r.$element.on("drag",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.css("left",t.clientX+5),e.css("top",t.clientY+5),e.css("zIndex",3e3),a=!0,event.clientY<150&&(a=!1,o(-1)),event.clientY>Rexbuilder_Util_Editor.viewportMeasurement.height-150&&(a=!1,o(1)))}),r.$element.on("dragend",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(s&&(Rexbuilder_Util_Editor.releaseRowsLight(),s=!1),a=!0,e.css("zIndex",-3e3),e.css("left",t.clientX+5),e.css("top",t.clientY+5),e.remove(),e=null)})},setGridstackIstanceNumber:function(){for(var t,e=this,i=this.$element.attr("class").split(/\s+/),r=0,a=i.length;r<a;r++)t=i[r].split("-"),t[2]!=s&&"instance"==t[2]&&(e.properties.gridstackInstanceID=t[3])},updateLayoutBlocksHeight:function(){var t=this.properties.gridstackInstance;if("null"!=typeof t&&(this.properties.blocksBottomTop=this.getElementBottomTop(),!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.batchGridstack();var e=[].slice.call(this.properties.blocksBottomTop),i=e.length,r=0;for(r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data"),a=this.getBlockSizeOnLayoutChange(e[r]);Rexbuilder_Util_Editor.elementIsResizing=!0,this.updateElementDataHeightProperties(s,a.height),this.resizeBlock(e[r],a.width,a.height),Rexbuilder_Util_Editor.elementIsResizing=!1}Rexbuilder_Util.windowIsResizing||this.commitGridstack()}},updateBlocksHeight:function(){var t=this.properties.gridstackInstance;if("null"!=typeof t&&(this.properties.blocksBottomTop=this.getElementBottomTop(),!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.batchGridstack();var e=[].slice.call(this.properties.blocksBottomTop),i=e.length,r=0;for(r=0;r<i;r++)Rexbuilder_Util.backendEdited||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util_Editor.updatingCollapsedGrid||this.properties.firstStartGrid?c(e[r],"rex-hide-element")||c(e[r],"removing_block")||c(e[r],"block-has-slider")||this.updateElementHeight(e[r]):this.properties.collapsingElements||this.updateElementHeight(e[r]);Rexbuilder_Util.windowIsResizing||this.commitGridstack()}},getBlockSizeOnLayoutChange:function(t){var e,i=t.querySelector(".rexbuilder-block-data"),r=t.querySelector(".text-wrap"),s=t.querySelector(".rex-image-wrapper"),a=t.querySelector(".grid-item-content"),o=(parseInt(i.getAttribute("data-element_real_fluid")),i.getAttribute("data-type_bg_block")),n=parseInt(t.getAttribute("data-gs-width")),l=parseInt(t.getAttribute("data-gs-height")),d=0,p=!1,h=l*this.properties.oldCellHeight,d=Math.round(h/this.properties.singleHeight);if(r&&r.innerText.trim().length>0&&r.childElementCount>0&&(p=!0,e=r.offsetHeight+this.properties.gutter),!p&&s&&"masonry"===this.settings.galleryLayout&&"natural"===o){var g=parseInt(a.getAttribute("data-background_image_width")),u=parseInt(a.getAttribute("data-background_image_height"));t.offsetWidth<g?(e=u*n*this.properties.singleWidth/g,m(s,"small-width")):(e=u+this.properties.gutter,f(s,"small-width"))}return e>h&&(d=Math.round(e/this.properties.singleHeight)),{width:n,height:d}},getBlockSizeOnCollapse:function(t){var e=t.querySelector(".rexbuilder-block-data"),i=t.querySelector(".text-wrap"),r=t.querySelector(".rex-image-wrapper"),s=t.querySelector(".grid-item-content"),a=-1!==t.className.indexOf("block-has-slider"),o=(-1!==s.className.indexOf("empty-content"),-1!==s.className.indexOf("youtube-player")),n=0!==[].slice.call(t.getElementsByClassName("rex-video-wrap")).length,l=-1!==s.className.indexOf("vimeo-player"),d=(parseInt(e.getAttribute("data-element_real_fluid")),e.getAttribute("data-type_bg_block"),parseInt(t.getAttribute("data-gs-width"))),p=parseInt(t.getAttribute("data-gs-height")),h=0,g=!1,u=null,c=p*this.properties.singleHeight,h=Math.round(c/this.properties.singleHeight);if(i&&i.innerText.trim().length>0&&i.childElementCount>0&&(g=!0,u=i.offsetHeight+this.properties.gutter),!g&&r){var b=parseInt(s.getAttribute("data-background_image_width")),_=parseInt(s.getAttribute("data-background_image_height"));t.offsetWidth<b?(u=_*(d*this.properties.singleWidth-this.properties.gutter)/b,m(r,"small-width")):(u=_+this.properties.gutter,f(r,"small-width"))}var y=.75;!g&&(o||n||l)&&(u=Math.round(d*this.properties.singleWidth*y));var x=parseFloat(e.getAttribute("data-slider_ratio"));return a&&!isNaN(x)&&(u=isNaN(x)?d*this.properties.singleWidth*y:d*this.properties.singleWidth*x),h=Math.round(u/this.properties.singleHeight),{width:d,height:h}},updateElementHeight:function(e,i,r){r="undefined"!=typeof r&&r,this.settings.editorMode&&!this.properties.oneColumModeActive&&(Rexbuilder_Util_Editor.elementIsResizing=!0);var s,a=e.querySelector(".rexbuilder-block-data");s=parseInt(a.getAttribute("data-gs_start_h"));var o,n,l=(parseInt(a.getAttribute("data-gs_start_h")),this.properties.singleWidth);n=this.properties.oneColumModeActive?this.element.offsetWidth*this.settings.gridItemWidth:l;var d,h=this.properties.gutter,g=e.querySelector(".text-wrap"),u=t(g),c=parseInt(e.getAttribute("data-gs-width")),m=parseInt(e.getAttribute("data-gs-height")),f=m*this.properties.singleHeight,b=parseInt(a.getAttribute("data-element_real_fluid")),_=0,y=0,x=0,v=0,k=!1,E=a.getAttribute("data-type_bg_block"),S=e.querySelector(".grid-item-content"),I=null,w=!1,R=!1,A=!1,B=!1,H=!1;if(S&&(I=S.querySelector(".rex-image-wrapper"),w=-1!==e.className.indexOf("block-has-slider"),R=-1!==S.className.indexOf("empty-content"),A=-1!==S.className.indexOf("youtube-player"),B=-1!==S.className.indexOf("mp4-player"),H=-1!==S.className.indexOf("vimeo-player")),d=p(u,this.settings.editorMode),this.properties.oneColumModeActive&&(c=12),0==d){if(null!==I){var C=parseInt(S.getAttribute("data-background_image_width")),U=parseInt(S.getAttribute("data-background_image_height"));_=e.offsetWidth<C?U*(c*n-h)/C:U}(A||B||H)&&(y=m*this.properties.singleHeight),w&&(v=m*this.properties.singleHeight),0==y&&0==_&&0==v&&(Rexbuilder_Util_Editor.updatingSectionLayout||R||this.properties.firstStartGrid||w)&&(x=this.properties.editedFromBackend&&"masonry"==this.settings.galleryLayout?Math.round(n*s):this.properties.oneColumModeActive&&this.properties.beforeCollapseWasFixed?s*this.properties.singleWidth:s*this.properties.singleHeight)}else d=d;if(w||0!=_||0!=y||0!=d||(k=!0),w||A||H||B||!("full"===E&&0===d||""===E&&0===d)||this.properties.oneColumModeActive?(r?s*=this.properties.singleHeight:s=0,o=Math.max(s,_,y,x,d,v)):o=s*this.properties.singleHeight,this.properties.oneColumModeActive&&!Rexbuilder_Util.windowIsResizing){var G=o;return{height:G,empty:k}}"undefined"!=typeof i&&0!=i&&(o=c*n*i);var D=!1;return 0!==d?("fixed"===this.settings.galleryLayout||1!==b&&"masonry"===this.settings.galleryLayout)&&o<f&&(D=!0):0!==_&&("fixed"===this.settings.galleryLayout?D=!0:"masonry"===this.settings.galleryLayout&&("natural"===E&&1!==b||"full"===E)&&o<f&&(D=!0)),D?void(this.settings.editorMode&&(Rexbuilder_Util_Editor.elementIsResizing=!1)):(o="fixed"==this.settings.galleryLayout&&(k||A||B||H)?Math.round((o+h)/this.properties.singleHeight):Math.ceil((o+h)/this.properties.singleHeight),this.updateElementDataHeightProperties(a,o),this.resizeBlock(e,c,o),void(this.settings.editorMode&&(Rexbuilder_Util_Editor.elementIsResizing=!1)))},resizeBlock:function(t,e,i){if(!isNaN(i)){var r=this.properties.gridstackInstance;if("undefined"!=typeof r&&null!==r)if(0!=this.properties.oldCellHeight&&this.properties.oldCellHeight!=this.properties.singleHeight&&"masonry"==this.properties.oldLayout){var s,a,o,n,l;l=store.get(t.getAttribute("data-rexbuilder-block-id")),s=l.properties[0].x,a=Math.round(parseInt(l.properties[1].y)*this.properties.oldCellHeight/this.properties.singleHeight),o=e,n=i,r.update(t,s,a,o,n)}else r.resize(t,e,i)}},_launchTextEditor:function(){var t,e,i,r=[].slice.call(this.element.getElementsByClassName("rex-text-editable")),s=r.length,a=0;for(a=0;a<s;a++)t=r[a].getElementsByClassName("pswp-figure"),e=r[a].getElementsByClassName("rex-slider-wrap"),0===t.length&&0===e.length&&(i=r[a].querySelector(".text-wrap"),TextEditor.addElementToTextEditor(i))},_setParentGridPadding:function(){var t=this.$element.parent();(a().width>=_plugin_frontend_settings.defaultSettings.collapseWidth&&!this.properties.setDesktopPadding||!this.properties.setDesktopPadding&&!this.properties.setMobilePadding&&"true"==this.$section.attr("data-rex-collapse-grid"))&&(this.properties.setDesktopPadding=!0,"true"==this.$section.attr("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?t.css("padding-top",this.properties.gridTopSeparator-this.properties.halfSeparatorTop):t.css("padding-top",this.properties.halfSeparatorTop),null!==this.properties.gridBottomSeparator?t.css("padding-bottom",this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom):t.css("padding-bottom",this.properties.halfSeparatorBottom),this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?t.css("padding-left",this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft):t.css("padding-left",this.properties.halfSeparatorLeft),null!==this.properties.gridRightSeparator?t.css("padding-right",this.properties.gridRightSeparator-this.properties.halfSeparatorRight):t.css("padding-right",this.properties.halfSeparatorRight)))},_setGridPadding:function(){this.properties.setDesktopPadding&&(this.properties.setDesktopPadding||this.properties.setMobilePadding||"true"!=this.section.getAttribute("data-rex-collapse-grid"))||(this.properties.setDesktopPadding=!0,"true"==this.section.getAttribute("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?this.element.style.marginTop=this.properties.gridTopSeparator-this.properties.halfSeparatorTop+"px":this.element.style.marginTop=this.properties.halfSeparatorTop+"px",null!==this.properties.gridBottomSeparator?this.element.style.marginBottom=this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom+"px":this.element.style.marginBottom=this.properties.halfSeparatorBottom+"px",this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?this.element.style.marginLeft=this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft+"px":this.element.style.marginLeft=this.properties.halfSeparatorLeft+"px",null!==this.properties.gridRightSeparator?this.element.style.marginRight=this.properties.gridRightSeparator-this.properties.halfSeparatorRight+"px":this.element.style.marginRight=this.properties.halfSeparatorRight+"px"))},collapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!0),this.$section.find(".collapse-grid").addClass("grid-collapsed"),this.properties.oneColumModeActive=!0},removeCollapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!1),this.$section.find(".collapse-grid").removeClass("grid-collapsed"),this.properties.oneColumModeActive=!1},updateGridLayoutCollapse:function(t){this.settings.galleryLayout=t.layout,this.settings.fullHeight=t.fullHeight,this.properties.singleHeight=t.singleHeight,this.element.setAttribute("data-full-height",t.fullHeight),this.element.setAttribute("data-layout",t.layout),this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack()},changeGridToMasonry:function(){this.settings.galleryLayout="masonry",this.settings.fullHeight=!1,this.properties.singleHeight=this.settings.cellHeightMasonry,this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack(),this.element.setAttribute("data-layout","masonry"),this.element.setAttribute("data-full-height","false")},collapseElements:function(t){t="undefined"==typeof t?{}:t,this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.fixBlockDomOrder(),this._saveBlocksPosition(),this.collapseElementsProperties(),this.properties.collapsingElements=!0,"fixed"==this.settings.galleryLayout&&(this.properties.beforeCollapseWasFixed=!0,this.changeGridToMasonry()),this.batchGridstack(),this.updateBlocksWidth(),this.commitGridstack(),setTimeout(h.bind(this,t),500)},updateBlocksWidth:function(){var t,e=this.getElementsTopBottom(),i=0,r=e.length;for(t=0;t<r;t++)this.properties.gridstackInstance.update(e[t],0,i,12,parseInt(e[t].getAttribute("data-gs-height"))),i+=parseInt(e[t].getAttribute("data-gs-height"))},updateCollapsedBlocksHeight:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,r=t.reverse();for(i=0;i<e;i++){var s=this.getBlockSizeOnCollapse(r[i]);this.properties.gridstackInstance.resize(r[i],s.width,s.height)}},fixVideoProportion:function(){var t=[].slice.call(this.section.getElementsByClassName("rex-video-wrap")),e=t.length,i=0,r=[];for(i=0;i<e;i++)r.push(l(t[i]));for(i=0;i<e;i++)t[i].children[0].style.maxWidth=r[i]},fixBlockDomOrder:function(){var e,i,r,s,a,o=this.getElementsTopBottom(),n=[],l=[],d=o.length;for(i=0;i<d;i++){var p={rexID:t(o[i]).attr("data-rexbuilder-block-id"),added:!1};n.push(p)}var h,g=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),u=g.length,i=0;for(i=0;i<u;i++)h={rexID:g[i].getAttribute("data-rexbuilder-block-id"),element:t(g[i]).detach()},l.push(h);for(i=0,s=n.length;i<s;i++){for(r=0,a=l.length;r<a;r++)if(l[r].rexID==n[i].rexID){e=l[r].element;break}this.$element.append(e),l.splice(r,1)}},filter:function(e){for(var r=[],s=this.properties.initialStateGrid.length,a=0;a<s;a++)r.push(this.properties.initialStateGrid[a].el);var o=t(r).map(function(){return this.toArray()}),n=o.filter(e.filter),l=o.not(e.filter),d=this;if(n.each(function(e,i){if("0"===i.style.opacity){var r=t(i);r.velocity({scale:1,opacity:1},{duration:200,begin:function(t){t[0].style.display=""}})}else i.style.opacity=1,i.style.display=""}),l.each(function(e,i){if("0"!==i.style.opacity){var r=t(i);r.velocity({scale:0,opacity:0},{duration:200,complete:function(t){t[0].style.display="none"}})}else i.style.opacity=0,i.style.display="none"}),this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.removeAll(!1),
"*"===e.filter){o.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),autoPosition:e.getAttribute("data-gs-auto-position"),minWidth:e.getAttribute("data-gs-min-width"),maxWidth:e.getAttribute("data-gs-max-width"),minHeight:e.getAttribute("data-gs-min-height"),maxHeight:e.getAttribute("data-gs-max-height"),id:e.getAttribute("data-gs-id")};d.properties.gridstackInstance.addWidget(e,i.x,i.y,i.width,i.height,i.autoPosition,i.minWidth,i.maxWidth,i.minHeight,i.maxHeight,i.id)});for(var a=0,p=this.properties.initialStateGrid.length;a<p;a++){var h=this.properties.initialStateGrid[a].el[0];this.properties.gridstackInstance.update(h,this.properties.initialStateGrid[a].x,this.properties.initialStateGrid[a].y)}}else this.properties.mirrorStateGrid=[],n.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))},r=d.placeElMirror(i);d.properties.mirrorStateGrid.push({x:r.x,y:r.y,el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))})}),n.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),el:e};d.properties.gridstackInstance.addWidget(e,i.x,i.y)}),n.each(function(t,e){d.properties.gridstackInstance.update(e,d.properties.mirrorStateGrid[t].x,d.properties.mirrorStateGrid[t].y)});this.properties.gridstackInstance.commit();var g=jQuery.Event("rexlive:galleryFiltered");g.settings={galleryEditorInstance:this},t(i).trigger(g)},placeElMirror:function(t){for(var e={x:0,y:0},i=0;;++i){var s=i%this.properties.gridstackInstance.grid.width,a=Math.floor(i/this.properties.gridstackInstance.grid.width);if(!(s+t.width>this.properties.gridstackInstance.grid.width||r.find(this.properties.mirrorStateGrid,r.bind(GridStackUI.Utils._isAddNodeIntercepted,{x:s,y:a,node:t})))){e.x=s,e.y=a;break}}return e},get_pixel_position:function(t){var e={left:"0",top:"0"};return e.left=this.properties.gridstackInstance.cellWidth()*t.x+"px",e.top=this.properties.gridstackInstance.cellHeight()*t.y+this.properties.gridstackInstance.opts.verticalMargin*t.y+"px",e},save_grid_state:function(){this.properties.initialStateGrid=this.properties.gridstackInstance.grid.nodes},fix_natural_image_blocks:function(){var e,i=[].slice.call(this.element.getElementsByClassName("rex-image-wrapper")),r=i.length,s=0;for(s=0;s<r;s++)if(c(i[s],"natural-image-background")){e=t(i[s]);var a=parseInt(e.parents(".grid-item-content").attr("data-background_image_width"));a>i[s].offsetWidth&&m(i[s],"small-width")}},set_grid_initial_state:function(t){this.properties.initialStateGrid=t},merge_grid_initial_state:function(t){this.properties.initialStateGrid=this.properties.initialStateGrid.concat(t)},_getCoord:function(t,e){return{x:t%e,y:Math.floor(t/e)}},destroyGridGallery:function(){this.destroyGridstack(),this.clearStateGrid(),this.$element.removeClass("grid-number-"+this.properties.sectionNumber)},_check_parent_class:function(t){return c(this.section,t)}}),t.fn[_]=function(e){var i=arguments;if(e===s||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+_)||t.data(this,"plugin_"+_,new u(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var r;return this.each(function(){var s=t.data(this,"plugin_"+_);s instanceof u&&"function"==typeof s[e]&&(r=s[e].apply(s,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+_,null)}),r!==s?r:this}}}(jQuery,window,document,_);
/*! VelocityJS.org (1.2.2). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
!function(e){function t(e){var t=e.length,a=r.type(e);return"function"!==a&&!r.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e))}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?o[i.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||n.call(e,t)},r.each=function(e,r,a){var o,n=0,i=e.length,s=t(e);if(a){if(s)for(;i>n&&(o=r.apply(e[n],a),o!==!1);n++);else for(n in e)if(o=r.apply(e[n],a),o===!1)break}else if(s)for(;i>n&&(o=r.call(e[n],n,e[n]),o!==!1);n++);else for(n in e)if(o=r.call(e[n],n,e[n]),o===!1)break;return e},r.data=function(e,t,o){if(void 0===o){var n=e[r.expando],i=n&&a[n];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var n=e[r.expando]||(e[r.expando]=++r.uuid);return a[n]=a[n]||{},a[n][t]=o,o}},r.removeData=function(e,t){var o=e[r.expando],n=o&&a[o];n&&r.each(t,function(e,t){delete n[t]})},r.extend=function(){var e,t,a,o,n,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(n=arguments[l]))for(o in n)e=s[o],a=n[o],s!==a&&(c&&a&&(r.isPlainObject(a)||(t=r.isArray(a)))?(t?(t=!1,i=e&&r.isArray(e)?e:[]):i=e&&r.isPlainObject(e)?e:{},s[o]=r.extend(c,i,a)):void 0!==a&&(s[o]=a));return s},r.queue=function(e,a,o){function n(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,o=e.length;r>a;)e[o++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[o++]=t[a++];return e.length=o,e}(a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var i=r.data(e,a);return o?(!i||r.isArray(o)?i=r.data(e,a,n(o)):i.push(o),i):i||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,a){t=t||"fx";var o=r.queue(a,t),n=o.shift();"inprogress"===n&&(n=o.shift()),n&&("fx"===t&&o.unshift("inprogress"),n.call(a,function(){r.dequeue(a,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),a=this.offset(),o=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,e.style&&(o.top+=parseFloat(e.style.borderTopWidth)||0,o.left+=parseFloat(e.style.borderLeftWidth)||0),{top:a.top-o.top,left:a.left-o.left}}};var a={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var o={},n=o.hasOwnProperty,i=o.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)o["[object "+s[l]+"]"]=s[l].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,a){function o(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var o=e[t];o&&a.push(o)}return a}function n(e){return y.isWrapped(e)?e=[].slice.call(e):y.isNode(e)&&(e=[e]),e}function i(e){var t=f.data(e,"velocity");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,o){function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((n(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*n(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var o=0;y>o;++o){var n=u(r,e,a);if(0===n)return r;var i=l(r,e,a)-t;r-=i/n}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,o){var n,i,s=0;do i=r+(o-r)/2,n=l(i,e,a)-t,n>0?o=i:r=i;while(Math.abs(n)>h&&++s<v);return i}function d(t){for(var r=0,o=1,n=b-1;o!=n&&w[o]<=t;++o)r+=x;--o;var i=(t-w[o])/(w[o+1]-w[o]),s=r+i*x,l=u(s,e,a);return l>=m?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=o)&&p()}var y=4,m=.001,h=1e-7,v=10,b=11,x=1/(b-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if("number"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===o?t:0===t?0:1===t?1:l(d(t),r,o)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:o}]};var T="generateBezier("+[e,r,a,o]+")";return C.toString=function(){return T},C}function u(e,t){var r=e;return y.isString(e)?b.Easings[e]||(r=!1):r=y.isArray(e)&&1===e.length?s.apply(null,e):y.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):!(!y.isArray(e)||4!==e.length)&&l.apply(null,e),r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:v),r}function c(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=o(b.State.calls));for(var n=0;r>n;n++)if(b.State.calls[n]){var s=b.State.calls[n],l=s[0],u=s[2],d=s[3],g=!!d,m=null;d||(d=b.State.calls[n][3]=t-16);for(var h=Math.min((t-d)/u.duration,1),v=0,x=l.length;x>v;v++){var P=l[v],V=P.element;if(i(V)){var C=!1;if(u.display!==a&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];f.each(T,function(e,t){S.setPropertyValue(V,"display",t)})}S.setPropertyValue(V,"display",u.display)}u.visibility!==a&&"hidden"!==u.visibility&&S.setPropertyValue(V,"visibility",u.visibility);for(var k in P)if("element"!==k){var A,F=P[k],E=y.isString(F.easing)?b.Easings[F.easing]:F.easing;if(1===h)A=F.endValue;else{var j=F.endValue-F.startValue;if(A=F.startValue+j*E(h,u,j),!g&&A===F.currentValue)continue}if(F.currentValue=A,"tween"===k)m=A;else{if(S.Hooks.registered[k]){var H=S.Hooks.getRoot(k),N=i(V).rootPropertyValueCache[H];N&&(F.rootPropertyValue=N)}var L=S.setPropertyValue(V,k,F.currentValue+(0===parseFloat(A)?"":F.unitType),F.rootPropertyValue,F.scrollData);S.Hooks.registered[k]&&(i(V).rootPropertyValueCache[H]=S.Normalizations.registered[H]?S.Normalizations.registered[H]("extract",null,L[1]):L[1]),"transform"===L[0]&&(C=!0)}}u.mobileHA&&i(V).transformCache.translate3d===a&&(i(V).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&S.flushTransformCache(V)}}u.display!==a&&"none"!==u.display&&(b.State.calls[n][2].display=!1),u.visibility!==a&&"hidden"!==u.visibility&&(b.State.calls[n][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],h,Math.max(0,d+u.duration-t),d,m),1===h&&p(n)}}b.State.isTicking&&w(c)}function p(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],o=b.State.calls[e][1],n=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||n.loop||("none"===n.display&&S.setPropertyValue(p,"display",n.display),"hidden"===n.visibility&&S.setPropertyValue(p,"visibility",n.visibility)),n.loop!==!0&&(f.queue(p)[1]===a||!/\.velocityQueueEntryFlag/i.test(f.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var d=!1;f.each(S.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,o=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp("^\\("+r+"[^.]").test(o)&&(d=!0,delete i(p).transformCache[t])}),n.mobileHA&&(d=!0,delete i(p).transformCache.translate3d),d&&S.flushTransformCache(p),S.Values.removeClass(p,"velocity-animating")}if(!t&&n.complete&&!n.loop&&u===c-1)try{n.complete.call(o,o)}catch(g){setTimeout(function(){throw g},1)}s&&n.loop!==!0&&s(o),i(p)&&n.loop===!0&&!t&&(f.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(p,"reverse",{loop:!0,delay:n.delay})),n.queue!==!1&&f.dequeue(p,n.queue)}b.State.calls[e]=!1;for(var y=0,m=b.State.calls.length;m>y;y++)if(b.State.calls[y]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var f,d=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return a}(),g=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r,a=(new Date).getTime();return r=Math.max(0,16-(a-e)),e=a+r,setTimeout(function(){t(a+r)},r)}}(),y={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},m=!1;if(e.fn&&e.fn.jquery?(f=e,m=!0):f=t.Velocity.Utilities,8>=d&&!m)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var h=400,v="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:f,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:v,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){f.data(e,"velocity",{isSVG:y.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var o={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:o.v,dv:e(o)}}function r(r,a){var o={dx:r.v,dv:e(r)},n=t(r,.5*a,o),i=t(r,.5*a,n),s=t(r,a,i),l=1/6*(o.dx+2*(n.dx+i.dx)+s.dx),u=1/6*(o.dv+2*(n.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,o){var n,i,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,p=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,o=o||null,l.tension=e,l.friction=t,n=null!==o,n?(c=a(e,t),i=c/o*f):i=f;s=r(s||l,i),u.push(1+s.x),c+=16,Math.abs(s.x)>p&&Math.abs(s.v)>p;);return n?function(e){return u[e*(u.length-1)|0]}:c}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},f.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var S=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,a,o;if(d)for(r in S.Hooks.templates){a=S.Hooks.templates[r],o=a[0].split(" ");var n=a[1].match(S.RegEx.valueSplit);"Color"===o[0]&&(o.push(o.shift()),n.push(n.shift()),S.Hooks.templates[r]=[o.join(" "),n.join(" ")])}for(r in S.Hooks.templates){a=S.Hooks.templates[r],o=a[0].split(" ");for(var e in o){var i=r+o[e],s=e;S.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=S.Hooks.registered[e];if(r){var a=r[0],o=r[1];return t=S.Hooks.cleanRootPropertyValue(a,t),t.toString().match(S.RegEx.valueSplit)[o]}return t},injectValue:function(e,t,r){var a=S.Hooks.registered[e];if(a){var o,n,i=a[0],s=a[1];return r=S.Hooks.cleanRootPropertyValue(i,r),o=r.toString().match(S.RegEx.valueSplit),o[s]=t,n=o.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var a;return S.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(S.RegEx.valueUnwrap),a=a?a[1].replace(/,(\s+)?/g," "):r),a;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var a=parseFloat(r);if(!a&&0!==a){var o=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);a=o?o[1]:0}return a;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=d)switch(e){case"name":return"filter";case"extract":var a=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=a?a[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=d||b.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,r,o){switch(e){case"name":return"transform";case"extract":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,"");case"inject":var n=!1;switch(t.substr(0,t.length-1)){case"translate":n=!/(%|px|em|rem|vw|vh|\d)$/i.test(o);break;case"scal":case"scale":b.State.isAndroid&&i(r).transformCache[t]===a&&1>o&&(o=1),n=!/(\d)$/i.test(o);break;case"skew":n=!/(deg|\d)$/i.test(o);break;case"rotate":n=!/(deg|\d)$/i.test(o)}return n||(i(r).transformCache[t]="("+o+")"),i(r).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,r,o){switch(e){case"name":return t;case"extract":var n;if(S.RegEx.wrappedValueAlreadyExtracted.test(o))n=o;else{var i,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(o)?i=s[o]!==a?s[o]:s.black:S.RegEx.isHex.test(o)?i="rgb("+S.Values.hexToRgb(o).join(" ")+")":/^rgba?\(/i.test(o)||(i=s.black),n=(i||o).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==n.split(" ").length||(n+=" 1"),n;case"inject":return 8>=d?4===o.split(" ").length&&(o=o.split(/\s+/).slice(0,3).join(" ")):3===o.split(" ").length&&(o+=" 1"),(8>=d?"rgb":"rgba")+"("+o.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,a=t.length;a>r;r++){var o;if(o=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),y.isString(b.State.prefixElement.style[o]))return b.State.prefixMatches[e]=o,[o,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(r,function(e,t,r,a){return t+t+r+r+a+a}),t=a.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,o,n){function s(e,r){function o(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=f.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!n){if("height"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return o(),c}if("width"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return o(),p}}var g;g=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),l=9===d&&"filter"===r?g.getPropertyValue(r):g[r],(""===l||null===l)&&(l=e.style[r]),o()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(r)){var y=s(e,"position");("fixed"===y||"absolute"===y&&/top|left/i.test(r))&&(l=f(e).position()[r]+"px")}return l}var l;if(S.Hooks.registered[r]){var u=r,c=S.Hooks.getRoot(u);o===a&&(o=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(o=S.Normalizations.registered[c]("extract",e,o)),l=S.Hooks.extractValue(u,o)}else if(S.Normalizations.registered[r]){var p,g;p=S.Normalizations.registered[r]("name",e),"transform"!==p&&(g=s(e,S.Names.prefixCheck(p)[0]),S.Values.isCSSNullValue(g)&&S.Hooks.templates[r]&&(g=S.Hooks.templates[r][1])),l=S.Normalizations.registered[r]("extract",e,g)}if(!/^[\d-]/.test(l))if(i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(y){l=0}else l=e.getAttribute(r);else l=s(e,S.Names.prefixCheck(r)[0]);return S.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+r+": "+l),l},setPropertyValue:function(e,r,a,o,n){var s=r;if("scroll"===r)n.container?n.container["scroll"+n.direction]=a:"Left"===n.direction?t.scrollTo(a,n.alternateValue):t.scrollTo(n.alternateValue,a);else if(S.Normalizations.registered[r]&&"transform"===S.Normalizations.registered[r]("name",e))S.Normalizations.registered[r]("inject",e,a),s="transform",a=i(e).transformCache[r];else{if(S.Hooks.registered[r]){var l=r,u=S.Hooks.getRoot(r);o=o||S.getPropertyValue(e,u),a=S.Hooks.injectValue(l,a,o),r=u}if(S.Normalizations.registered[r]&&(a=S.Normalizations.registered[r]("inject",e,a),r=S.Normalizations.registered[r]("name",e)),s=S.Names.prefixCheck(r)[0],8>=d)try{e.style[s]=a}catch(c){b.debug&&console.log("Browser does not support ["+a+"] for ["+s+"]")}else i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var r="";if((d||b.State.isAndroid&&!b.State.isChrome)&&i(e).isSVG){var a={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};f.each(i(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(r+=e+"("+a[e].join(" ")+") ",delete a[e])})}else{var o,n;f.each(i(e).transformCache,function(t){return o=i(e).transformCache[t],"transformPerspective"===t?(n=o,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(r+=t+o+" "))}),n&&(r="perspective"+n+" "+r)}S.setPropertyValue(e,"transform",r)}};S.Hooks.register(),S.Normalizations.register(),b.hook=function(e,t,r){var o=a;return e=n(e),f.each(e,function(e,n){if(i(n)===a&&b.init(n),r===a)o===a&&(o=b.CSS.getPropertyValue(n,t));else{var s=b.CSS.setPropertyValue(n,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(n),o=s}}),o};var P=function(){function e(){return s?k.promise||null:l}function o(){function e(e){function p(e,t){var r=a,o=a,i=a;return y.isArray(e)?(r=e[0],!y.isArray(e[1])&&/^[\d-]/.test(e[1])||y.isFunction(e[1])||S.RegEx.isHex.test(e[1])?i=e[1]:(y.isString(e[1])&&!S.RegEx.isHex.test(e[1])||y.isArray(e[1]))&&(o=t?e[1]:u(e[1],s.duration),e[2]!==a&&(i=e[2]))):r=e,t||(o=o||s.easing),y.isFunction(r)&&(r=r.call(n,V,w)),y.isFunction(i)&&(i=i.call(n,V,w)),[r||0,o,i]}function d(e,t){var r,a;return a=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=S.Values.getUnitType(e)),[a,r]}function h(){var e={myParent:n.parentNode||r.body,position:S.getPropertyValue(n,"position"),fontSize:S.getPropertyValue(n,"fontSize")},a=e.position===L.lastPosition&&e.myParent===L.lastParent,o=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,l={};if(o&&a)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var u=i(n).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(u),e.myParent.appendChild(u),f.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),f.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(r.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),n),l}if(s.begin&&0===V)try{s.begin.call(g,g)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===A){var P,C,T,F=/^x$/i.test(s.axis)?"Left":"Top",E=parseFloat(s.offset)||0;s.container?y.isWrapped(s.container)||y.isNode(s.container)?(s.container=s.container[0]||s.container,P=s.container["scroll"+F],T=P+f(n).position()[F.toLowerCase()]+E):s.container=null:(P=b.State.scrollAnchor[b.State["scrollProperty"+F]],C=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===F?"Top":"Left")]],T=f(n).offset()[F.toLowerCase()]+E),l={scroll:{rootPropertyValue:!1,startValue:P,currentValue:P,endValue:T,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:F,alternateValue:C}},element:n},b.debug&&console.log("tweensContainer (scroll): ",l.scroll,n)}else if("reverse"===A){if(!i(n).tweensContainer)return void f.dequeue(n,s.queue);"none"===i(n).opts.display&&(i(n).opts.display="auto"),"hidden"===i(n).opts.visibility&&(i(n).opts.visibility="visible"),i(n).opts.loop=!1,i(n).opts.begin=null,i(n).opts.complete=null,v.easing||delete s.easing,v.duration||delete s.duration,s=f.extend({},i(n).opts,s);var j=f.extend(!0,{},i(n).tweensContainer);for(var H in j)if("element"!==H){var N=j[H].startValue;j[H].startValue=j[H].currentValue=j[H].endValue,j[H].endValue=N,y.isEmptyObject(v)||(j[H].easing=s.easing),b.debug&&console.log("reverse tweensContainer ("+H+"): "+JSON.stringify(j[H]),n)}l=j}else if("start"===A){var j;i(n).tweensContainer&&i(n).isAnimating===!0&&(j=i(n).tweensContainer),f.each(m,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var r=p(t,!0),o=r[0],n=r[1],i=r[2];if(S.RegEx.isHex.test(o)){for(var s=["Red","Green","Blue"],l=S.Values.hexToRgb(o),u=i?S.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];n&&f.push(n),u!==a&&f.push(u[c]),m[e+s[c]]=f}delete m[e]}}});for(var O in m){var z=p(m[O]),q=z[0],$=z[1],M=z[2];O=S.Names.camelCase(O);var I=S.Hooks.getRoot(O),B=!1;if(i(n).isSVG||"tween"===I||S.Names.prefixCheck(I)[1]!==!1||S.Normalizations.registered[I]!==a){(s.display!==a&&null!==s.display&&"none"!==s.display||s.visibility!==a&&"hidden"!==s.visibility)&&/opacity|filter/.test(O)&&!M&&0!==q&&(M=0),s._cacheValues&&j&&j[O]?(M===a&&(M=j[O].endValue+j[O].unitType),B=i(n).rootPropertyValueCache[I]):S.Hooks.registered[O]?M===a?(B=S.getPropertyValue(n,I),M=S.getPropertyValue(n,O,B)):B=S.Hooks.templates[I][1]:M===a&&(M=S.getPropertyValue(n,O));var W,G,D,X=!1;if(W=d(O,M),M=W[0],D=W[1],W=d(O,q),q=W[0].replace(/^([+-\/*])=/,function(e,t){return X=t,""}),G=W[1],M=parseFloat(M)||0,q=parseFloat(q)||0,"%"===G&&(/^(fontSize|lineHeight)$/.test(O)?(q/=100,G="em"):/^scale/.test(O)?(q/=100,G=""):/(Red|Green|Blue)$/i.test(O)&&(q=q/100*255,G="")),/[\/*]/.test(X))G=D;else if(D!==G&&0!==M)if(0===q)G=D;else{o=o||h();var Y=/margin|padding|left|right|width|text|word|letter/i.test(O)||/X$/.test(O)||"x"===O?"x":"y";switch(D){case"%":M*="x"===Y?o.percentToPxWidth:o.percentToPxHeight;break;case"px":break;default:M*=o[D+"ToPx"]}switch(G){case"%":M*=1/("x"===Y?o.percentToPxWidth:o.percentToPxHeight);break;case"px":break;default:M*=1/o[G+"ToPx"]}}switch(X){case"+":q=M+q;break;case"-":q=M-q;break;case"*":q=M*q;break;case"/":q=M/q}l[O]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:q,unitType:G,easing:$},b.debug&&console.log("tweensContainer ("+O+"): "+JSON.stringify(l[O]),n)}else b.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.")}l.element=n}l.element&&(S.Values.addClass(n,"velocity-animating"),R.push(l),""===s.queue&&(i(n).tweensContainer=l,i(n).opts=s),i(n).isAnimating=!0,V===w-1?(b.State.calls.push([R,g,s,null,k.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):V++)}var o,n=this,s=f.extend({},b.defaults,v),l={};switch(i(n)===a&&b.init(n),parseFloat(s.delay)&&s.queue!==!1&&f.queue(n,s.queue,function(e){b.velocityQueueEntryFlag=!0,i(n).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=h;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}b.mock!==!1&&(b.mock===!0?s.duration=s.delay=1:(s.duration*=parseFloat(b.mock)||1,s.delay*=parseFloat(b.mock)||1)),s.easing=u(s.easing,s.duration),s.begin&&!y.isFunction(s.begin)&&(s.begin=null),s.progress&&!y.isFunction(s.progress)&&(s.progress=null),s.complete&&!y.isFunction(s.complete)&&(s.complete=null),s.display!==a&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=b.CSS.Values.getDisplayType(n))),s.visibility!==a&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,s.queue===!1?s.delay?setTimeout(e,s.delay):e():f.queue(n,s.queue,function(t,r){return r===!0?(k.promise&&k.resolver(g),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==s.queue&&"fx"!==s.queue||"inprogress"===f.queue(n)[0]||f.dequeue(n)}var s,l,d,g,m,v,x=arguments[0]&&(arguments[0].p||f.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||y.isString(arguments[0].properties));if(y.isWrapped(this)?(s=!1,d=0,g=this,l=this):(s=!0,d=1,g=x?arguments[0].elements||arguments[0].e:arguments[0]),g=n(g)){x?(m=arguments[0].properties||arguments[0].p,v=arguments[0].options||arguments[0].o):(m=arguments[d],v=arguments[d+1]);var w=g.length,V=0;if(!/^(stop|finish)$/i.test(m)&&!f.isPlainObject(v)){var C=d+1;v={};for(var T=C;T<arguments.length;T++)y.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?y.isString(arguments[T])||y.isArray(arguments[T])?v.easing=arguments[T]:y.isFunction(arguments[T])&&(v.complete=arguments[T]):v.duration=arguments[T]}var k={promise:null,resolver:null,rejecter:null};s&&b.Promise&&(k.promise=new b.Promise(function(e,t){k.resolver=e,k.rejecter=t}));var A;switch(m){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"stop":f.each(g,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var F=[];return f.each(b.State.calls,function(e,t){t&&f.each(t[1],function(r,o){var n=v===a?"":v;return n!==!0&&t[2].queue!==n&&(v!==a||t[2].queue!==!1)||void f.each(g,function(r,a){a===o&&((v===!0||y.isString(v))&&(f.each(f.queue(a,y.isString(v)?v:""),function(e,t){y.isFunction(t)&&t(null,!0)}),f.queue(a,y.isString(v)?v:"",[])),"stop"===m?(i(a)&&i(a).tweensContainer&&n!==!1&&f.each(i(a).tweensContainer,function(e,t){
t.endValue=t.currentValue}),F.push(e)):"finish"===m&&(t[2].duration=1))})})}),"stop"===m&&(f.each(F,function(e,t){p(t,!0)}),k.promise&&k.resolver(g)),e();default:if(!f.isPlainObject(m)||y.isEmptyObject(m)){if(y.isString(m)&&b.Redirects[m]){var E=f.extend({},v),j=E.duration,H=E.delay||0;return E.backwards===!0&&(g=f.extend(!0,[],g).reverse()),f.each(g,function(e,t){parseFloat(E.stagger)?E.delay=H+parseFloat(E.stagger)*e:y.isFunction(E.stagger)&&(E.delay=H+E.stagger.call(t,e,w)),E.drag&&(E.duration=parseFloat(j)||(/^(callout|transition)/.test(m)?1e3:h),E.duration=Math.max(E.duration*(E.backwards?1-e/w:(e+1)/w),.75*E.duration,200)),b.Redirects[m].call(t,t,E||{},e,w,g,k.promise?k:a)}),e()}var N="Velocity: First argument ("+m+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(N)):console.log(N),e()}A="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];f.each(g,function(e,t){y.isNode(t)&&o.call(t)});var O,E=f.extend({},b.defaults,v);if(E.loop=parseInt(E.loop),O=2*E.loop-1,E.loop)for(var z=0;O>z;z++){var q={delay:E.delay,progress:E.progress};z===O-1&&(q.display=E.display,q.visibility=E.visibility,q.complete=E.complete),P(g,"reverse",q)}return e()}};b=f.extend(P,b),b.animate=P;var w=t.requestAnimationFrame||g;return b.State.isMobile||r.hidden===a||r.addEventListener("visibilitychange",function(){r.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},c()):w=t.requestAnimationFrame||g}),e.Velocity=b,e!==t&&(e.fn.velocity=P,e.fn.velocity.defaults=b.defaults),f.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,o,n,i,s){var l=f.extend({},r),u=l.begin,c=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===a&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(i,i);for(var r in p){d[r]=e.style[r];var a=b.CSS.getPropertyValue(e,r);p[r]="Down"===t?[a,0]:[0,a]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(i,i),s&&s.resolver(i)},b(e,p,l)}}),f.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,o,n,i,s){var l=f.extend({},r),u={opacity:"In"===t?1:0},c=l.complete;l.complete=o!==n-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)});
/* VelocityJS.org UI Pack (5.0.4). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License. Portions copyright Daniel Eden, Christian Pucci. */
!function(t){"function"==typeof require&&"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["velocity"],t):t()}(function(){return function(t,a,e,r){function n(t,a){var e=[];return!(!t||!a)&&(s.each([t,a],function(t,a){var r=[];s.each(a,function(t,a){for(;a.toString().length<5;)a="0"+a;r.push(a)}),e.push(r.join(""))}),parseFloat(e[0])>parseFloat(e[1]))}if(!t.Velocity||!t.Velocity.Utilities)return void(a.console&&console.log("Velocity UI Pack: Velocity must be loaded first. Aborting."));var i=t.Velocity,s=i.Utilities,o=i.version,l={major:1,minor:1,patch:0};if(n(l,o)){var c="Velocity UI Pack: You need to update Velocity (jquery.velocity.js) to a newer version. Visit http://github.com/julianshapiro/velocity.";throw alert(c),new Error(c)}i.RegisterEffect=i.RegisterUI=function(t,a){function e(t,a,e,r){var n,o=0;s.each(t.nodeType?[t]:t,function(t,a){r&&(e+=t*r),n=a.parentNode,s.each(["height","paddingTop","paddingBottom","marginTop","marginBottom"],function(t,e){o+=parseFloat(i.CSS.getPropertyValue(a,e))})}),i.animate(n,{height:("In"===a?"+":"-")+"="+o},{queue:!1,easing:"ease-in-out",duration:e*("In"===a?.6:1)})}return i.Redirects[t]=function(n,o,l,c,u,f){function p(){o.display!==r&&"none"!==o.display||!/Out$/.test(t)||s.each(u.nodeType?[u]:u,function(t,a){i.CSS.setPropertyValue(a,"display","none")}),o.complete&&o.complete.call(u,u),f&&f.resolver(u||n)}var d=l===c-1;a.defaultDuration="function"==typeof a.defaultDuration?a.defaultDuration.call(u,u):parseFloat(a.defaultDuration);for(var g=0;g<a.calls.length;g++){var y=a.calls[g],m=y[0],X=o.duration||a.defaultDuration||1e3,Y=y[1],O=y[2]||{},v={};if(v.duration=X*(Y||1),v.queue=o.queue||"",v.easing=O.easing||"ease",v.delay=parseFloat(O.delay)||0,v._cacheValues=O._cacheValues||!0,0===g){if(v.delay+=parseFloat(o.delay)||0,0===l&&(v.begin=function(){o.begin&&o.begin.call(u,u);var a=t.match(/(In|Out)$/);a&&"In"===a[0]&&m.opacity!==r&&s.each(u.nodeType?[u]:u,function(t,a){i.CSS.setPropertyValue(a,"opacity",0)}),o.animateParentHeight&&a&&e(u,a[0],X+v.delay,o.stagger)}),null!==o.display)if(o.display!==r&&"none"!==o.display)v.display=o.display;else if(/In$/.test(t)){var D=i.CSS.Values.getDisplayType(n);v.display="inline"===D?"inline-block":D}o.visibility&&"hidden"!==o.visibility&&(v.visibility=o.visibility)}g===a.calls.length-1&&(v.complete=function(){if(a.reset){for(var t in a.reset){var e=a.reset[t];i.CSS.Hooks.registered[t]!==r||"string"!=typeof e&&"number"!=typeof e||(a.reset[t]=[a.reset[t],a.reset[t]])}var s={duration:0,queue:!1};d&&(s.complete=p),i.animate(n,a.reset,s)}else d&&p()},"hidden"===o.visibility&&(v.visibility=o.visibility)),i.animate(n,m,v)}},i},i.RegisterEffect.packagedEffects={"callout.bounce":{defaultDuration:550,calls:[[{translateY:-30},.25],[{translateY:0},.125],[{translateY:-15},.125],[{translateY:0},.25]]},"callout.shake":{defaultDuration:800,calls:[[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:11},.125],[{translateX:-11},.125],[{translateX:0},.125]]},"callout.flash":{defaultDuration:1100,calls:[[{opacity:[0,"easeInOutQuad",1]},.25],[{opacity:[1,"easeInOutQuad"]},.25],[{opacity:[0,"easeInOutQuad"]},.25],[{opacity:[1,"easeInOutQuad"]},.25]]},"callout.pulse":{defaultDuration:825,calls:[[{scaleX:1.1,scaleY:1.1},.5,{easing:"easeInExpo"}],[{scaleX:1,scaleY:1},.5]]},"callout.swing":{defaultDuration:950,calls:[[{rotateZ:15},.2],[{rotateZ:-10},.2],[{rotateZ:5},.2],[{rotateZ:-5},.2],[{rotateZ:0},.2]]},"callout.tada":{defaultDuration:1e3,calls:[[{scaleX:.9,scaleY:.9,rotateZ:-3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:3},.1],[{scaleX:1.1,scaleY:1.1,rotateZ:-3},.1],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],["reverse",.125],[{scaleX:1,scaleY:1,rotateZ:0},.2]]},"transition.fadeIn":{defaultDuration:500,calls:[[{opacity:[1,0]}]]},"transition.fadeOut":{defaultDuration:500,calls:[[{opacity:[0,1]}]]},"transition.flipXIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateY:[0,-55]}]],reset:{transformPerspective:0}},"transition.flipXOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateY:55}]],reset:{transformPerspective:0,rotateY:0}},"transition.flipYIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],rotateX:[0,-45]}]],reset:{transformPerspective:0}},"transition.flipYOut":{defaultDuration:800,calls:[[{opacity:[0,1],transformPerspective:[800,800],rotateX:25}]],reset:{transformPerspective:0,rotateX:0}},"transition.flipBounceXIn":{defaultDuration:900,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateY:[-10,90]},.5],[{opacity:.8,rotateY:10},.25],[{opacity:1,rotateY:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceXOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateY:-10},.5],[{opacity:0,rotateY:90},.5]],reset:{transformPerspective:0,rotateY:0}},"transition.flipBounceYIn":{defaultDuration:850,calls:[[{opacity:[.725,0],transformPerspective:[400,400],rotateX:[-10,90]},.5],[{opacity:.8,rotateX:10},.25],[{opacity:1,rotateX:0},.25]],reset:{transformPerspective:0}},"transition.flipBounceYOut":{defaultDuration:800,calls:[[{opacity:[.9,1],transformPerspective:[400,400],rotateX:-15},.5],[{opacity:0,rotateX:90},.5]],reset:{transformPerspective:0,rotateX:0}},"transition.swoopIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["100%","50%"],transformOriginY:["100%","100%"],scaleX:[1,0],scaleY:[1,0],translateX:[0,-700],translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%"}},"transition.swoopOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformOriginX:["50%","100%"],transformOriginY:["100%","100%"],scaleX:0,scaleY:0,translateX:-700,translateZ:0}]],reset:{transformOriginX:"50%",transformOriginY:"50%",scaleX:1,scaleY:1,translateX:0}},"transition.whirlIn":{defaultDuration:850,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,0],scaleY:[1,0],rotateY:[0,160]},1,{easing:"easeInOutSine"}]]},"transition.whirlOut":{defaultDuration:750,calls:[[{opacity:[0,"easeInOutQuint",1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:0,scaleY:0,rotateY:160},1,{easing:"swing"}]],reset:{scaleX:1,scaleY:1,rotateY:0}},"transition.shrinkIn":{defaultDuration:750,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,1.5],scaleY:[1,1.5],translateZ:0}]]},"transition.shrinkOut":{defaultDuration:600,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:1.3,scaleY:1.3,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.expandIn":{defaultDuration:700,calls:[[{opacity:[1,0],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:[1,.625],scaleY:[1,.625],translateZ:0}]]},"transition.expandOut":{defaultDuration:700,calls:[[{opacity:[0,1],transformOriginX:["50%","50%"],transformOriginY:["50%","50%"],scaleX:.5,scaleY:.5,translateZ:0}]],reset:{scaleX:1,scaleY:1}},"transition.bounceIn":{defaultDuration:800,calls:[[{opacity:[1,0],scaleX:[1.05,.3],scaleY:[1.05,.3]},.4],[{scaleX:.9,scaleY:.9,translateZ:0},.2],[{scaleX:1,scaleY:1},.5]]},"transition.bounceOut":{defaultDuration:800,calls:[[{scaleX:.95,scaleY:.95},.35],[{scaleX:1.1,scaleY:1.1,translateZ:0},.35],[{opacity:[0,1],scaleX:.3,scaleY:.3},.3]],reset:{scaleX:1,scaleY:1}},"transition.bounceUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[-30,1e3]},.6,{easing:"easeOutCirc"}],[{translateY:10},.2],[{translateY:0},.2]]},"transition.bounceUpOut":{defaultDuration:1e3,calls:[[{translateY:20},.2],[{opacity:[0,"easeInCirc",1],translateY:-1e3},.8]],reset:{translateY:0}},"transition.bounceDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateY:[30,-1e3]},.6,{easing:"easeOutCirc"}],[{translateY:-10},.2],[{translateY:0},.2]]},"transition.bounceDownOut":{defaultDuration:1e3,calls:[[{translateY:-20},.2],[{opacity:[0,"easeInCirc",1],translateY:1e3},.8]],reset:{translateY:0}},"transition.bounceLeftIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[30,-1250]},.6,{easing:"easeOutCirc"}],[{translateX:-10},.2],[{translateX:0},.2]]},"transition.bounceLeftOut":{defaultDuration:750,calls:[[{translateX:30},.2],[{opacity:[0,"easeInCirc",1],translateX:-1250},.8]],reset:{translateX:0}},"transition.bounceRightIn":{defaultDuration:750,calls:[[{opacity:[1,0],translateX:[-30,1250]},.6,{easing:"easeOutCirc"}],[{translateX:10},.2],[{translateX:0},.2]]},"transition.bounceRightOut":{defaultDuration:750,calls:[[{translateX:-30},.2],[{opacity:[0,"easeInCirc",1],translateX:1250},.8]],reset:{translateX:0}},"transition.slideUpIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,20],translateZ:0}]]},"transition.slideUpOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:-20,translateZ:0}]],reset:{translateY:0}},"transition.slideDownIn":{defaultDuration:900,calls:[[{opacity:[1,0],translateY:[0,-20],translateZ:0}]]},"transition.slideDownOut":{defaultDuration:900,calls:[[{opacity:[0,1],translateY:20,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,-20],translateZ:0}]]},"transition.slideLeftOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:-20,translateZ:0}]],reset:{translateX:0}},"transition.slideRightIn":{defaultDuration:1e3,calls:[[{opacity:[1,0],translateX:[0,20],translateZ:0}]]},"transition.slideRightOut":{defaultDuration:1050,calls:[[{opacity:[0,1],translateX:20,translateZ:0}]],reset:{translateX:0}},"transition.slideUpBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,75],translateZ:0}]]},"transition.slideUpBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:-75,translateZ:0}]],reset:{translateY:0}},"transition.slideDownBigIn":{defaultDuration:850,calls:[[{opacity:[1,0],translateY:[0,-75],translateZ:0}]]},"transition.slideDownBigOut":{defaultDuration:800,calls:[[{opacity:[0,1],translateY:75,translateZ:0}]],reset:{translateY:0}},"transition.slideLeftBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,-75],translateZ:0}]]},"transition.slideLeftBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:-75,translateZ:0}]],reset:{translateX:0}},"transition.slideRightBigIn":{defaultDuration:800,calls:[[{opacity:[1,0],translateX:[0,75],translateZ:0}]]},"transition.slideRightBigOut":{defaultDuration:750,calls:[[{opacity:[0,1],translateX:75,translateZ:0}]],reset:{translateX:0}},"transition.perspectiveUpIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveUpOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:["100%","100%"],rotateX:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveDownIn":{defaultDuration:800,calls:[[{opacity:[1,0],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveDownOut":{defaultDuration:850,calls:[[{opacity:[0,1],transformPerspective:[800,800],transformOriginX:[0,0],transformOriginY:[0,0],rotateX:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateX:0}},"transition.perspectiveLeftIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:[0,-180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveLeftOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:[0,0],transformOriginY:[0,0],rotateY:-180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}},"transition.perspectiveRightIn":{defaultDuration:950,calls:[[{opacity:[1,0],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:[0,180]}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%"}},"transition.perspectiveRightOut":{defaultDuration:950,calls:[[{opacity:[0,1],transformPerspective:[2e3,2e3],transformOriginX:["100%","100%"],transformOriginY:[0,0],rotateY:180}]],reset:{transformPerspective:0,transformOriginX:"50%",transformOriginY:"50%",rotateY:0}}};for(var u in i.RegisterEffect.packagedEffects)i.RegisterEffect(u,i.RegisterEffect.packagedEffects[u]);i.RunSequence=function(t){var a=s.extend(!0,[],t);a.length>1&&(s.each(a.reverse(),function(t,e){var r=a[t+1];if(r){var n=e.o||e.options,o=r.o||r.options,l=n&&n.sequenceQueue===!1?"begin":"complete",c=o&&o[l],u={};u[l]=function(){var t=r.e||r.elements,a=t.nodeType?[t]:t;c&&c.call(a,a),i(e)},r.o?r.o=s.extend({},o,u):r.options=s.extend({},o,u)}}),a.reverse()),i(a[0])}}(window.jQuery||window.Zepto||window,window,document)});
/*
 *  rexScrollify - v0.1
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(t,e,i,n){"use strict";function s(t){g=i.documentElement.clientHeight}function a(){return e.pageYOffset||i.documentElement.scrollTop}function o(t,n){n="undefined"!=typeof n?n:e.pageYOffset||i.documentElement.scrollTop;var s=t.getBoundingClientRect();return s.top+n}function r(){var t=e,n="inner";return"innerWidth"in e||(n="client",t=i.documentElement||i.body),{width:t[n+"Width"],height:t[n+"Height"]}}function l(){if(r().width<=767&&!this.settings.mobile)this.$element.css("opacity",1),this.properties.launched=!0,this.removeScrollHandler();else if(!this.properties.launched){var t,e,i=g,n=a(),s=o(this.element,n),l=this.element.offsetHeight;0===this.settings.offset?(t=.7*i,e=.2*i):this.settings.offset>0?(t=i-this.settings.offset,e=.2*i):this.settings.offset<0&&(t=.7*i,e=i+this.settings.offset),(s-t<n&&s+l-e>n||this.settings.force_launch)&&(this.settings.delay&&(this.properties.launched=!0),this.launchAnimation())}}function h(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},d,i),this._defaults=d,this._name=c,this.properties={launched:!1},this.settings.animation=this.element.getAttribute("data-rs-animation")||this.settings.animation,this.settings.duration=this.element.getAttribute("data-rs-animation-duration")||this.settings.duration,this.settings.offset=parseInt(this.element.getAttribute("data-rs-animation-offset")||this.settings.offset),this.settings.delay=parseInt(this.element.getAttribute("data-rs-animation-delay")||this.settings.delay),this.settings.stagger=parseInt(this.element.getAttribute("data-rs-animation-stagger")||this.settings.stagger),this.settings.force_launch=this.element.getAttribute("data-rs-animation-force-launch")||this.settings.force_launch,this.bindedScrollHandler=null,this.init()}var c="rexScrollify",d={animation:"transition.slideUpBigIn",duration:"500",offset:0,delay:0,stagger:0,mobile:!0,force_launch:!1,context:null},g=i.documentElement.clientHeight;e.addEventListener("resize",s),t.extend(h.prototype,{init:function(){l.call(this),this.bindedScrollHandler=l.bind(this),this.settings.context?this.settings.context.addEventListener("scroll",this.bindedScrollHandler):e.addEventListener("scroll",this.bindedScrollHandler)},launchAnimation:function(){var t=this;this.$element.velocity(t.settings.animation,{duration:t.settings.duration,delay:t.settings.delay,stagger:t.settings.stagger,begin:function(e){t.properties.launched=!0},complete:function(e){t.$element.trigger("rs-animation-complete"),t.removeScrollHandler()}})},removeScrollHandler:function(){this.settings.context?this.settings.context.removeEventListener("scroll",this.bindedScrollHandler):e.removeEventListener("scroll",this.bindedScrollHandler)}}),t.fn[c]=function(e){var i=arguments;if(e===n||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+c)||t.data(this,"plugin_"+c,new h(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var s;return this.each(function(){var n=t.data(this,"plugin_"+c);n instanceof h&&"function"==typeof n[e]&&(s=n[e].apply(n,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+c,null)}),s!==n?s:this}}}(jQuery,window,document);
// var lodash = _.noConflict();
var Rexbuilder_App=function(e){"use strict";function t(e){"undefined"!=typeof rexIndicator&&e.find(".rex-indicator__placeholder").rexIndicator()}function i(){e(".rex-effect-distortion").each(function(t,i){var n=e(i);1==_plugin_frontend_settings.animations?n.one("rs-animation-complete",function(){n.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}):n.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}),e(".rex-effect-distortion-section").each(function(t,i){var n=e(i);1==_plugin_frontend_settings.animations?n.one("rs-scrolled-complete",function(){n.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}):n.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})})}function n(){e("[class*=border-space-animated-]").each(function(t,i){var n=e(i);n.addClass("border-space-animated"),1==_plugin_frontend_settings.animations&&Rexbuilder_Util.viewport().width>768?n.one("rs-animation-complete",function(){n.addClass("border-active")}):n.parents(".rexpansive_section").one("rs-scrolled-complete",function(){n.addClass("border-active")})})}function r(t){function i(e){Rexbuilder_Util.removeClass(this,"rex-element--animated"),this.removeEventListener(Rexbuilder_Util._transitionEvent,i)}var n=e(document.getElementsByClassName("rex-element--animated"));n.rexScrolled({callback:function(e){e.addEventListener(Rexbuilder_Util._transitionEvent,i),Rexbuilder_Util.addClass(e,"run-animation")}})}function o(){var t=e(document.getElementsByClassName("rs-animation"));t.rexScrollify({mobile:!1})}function l(){"undefined"!=typeof PopUpContent&&(Rexbuilder_Util.isIframe||window.addEventListener("message",a,!1))}function a(e){if(e.data.rexliveEvent)switch(e.data.eventName){case"popUpContent:pswpOpened":Rexbuilder_Util.addClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:pswpClosed":Rexbuilder_Util.removeClass(document.body,"popup-content--active--pswp-open")}}function s(){var t,i=this.element.querySelector(".perfect-grid-gallery"),n=e(i);for(t=0;t<this.totScrollEls;t++)this.scrollEls[t].style.height=this.scrollEls[t].offsetHeight+"px";for(t=0;t<this.totOpacityEls;t++)this.opacityEls[t].style.height=this.opacityEls[t].offsetHeight+"px";n.data("plugin_perfectGridGalleryEditor").destroyGridGallery(),i.style.height=""}function d(){var e=Rexbuilder_Util.$rexContainer.find(".inline-pswp-gallery");e.on("click",Rexbuilder_Photoswipe.init_inline_pswp)}function c(){0==_plugin_frontend_settings.user.editing&&(d(),i(),n(),r(u),1==_plugin_frontend_settings.animations&&o(),b(),h(),y(),C(),k(document),l())}var u=null,p=null,f=null,m=[],g={},_=!1,v=function(){var e=[].slice.call(document.getElementsByClassName("rex-button-wrapper")),t=e.length,i=0;for(i=0;i<t;i++){var n=e[i].querySelector(".rex-button-container");if(!n){var r=document.createElement("span");r.className="rex-button-container";var o=e[i].querySelector(".rex-button-background");o.parentNode.insertBefore(r,o),r.appendChild(o)}}},x=function(){function t(t){var i=e(t.target),n=i.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),r=i.YTPGetPlayer();void 0!==r&&(i.optimizeDisplay(),0==n.length||n.hasClass("user-has-muted")?(r.mute(),r.isMute=!0,r.setVolume(0)):i.YTPUnmute())}function i(t){var i=e(t.target).parents(".rex-youtube-wrap");if(i.length>0){var n=i[0].state;1==n?i.YTPPause():i.YTPPlay()}}function n(t){var i=e(this).find(".grid-item-content"),n=i.children(".rex-youtube-wrap"),r=i.children(".rex-video-vimeo-wrap--block"),o=i.children(".rex-video-wrap");if(n.length>0){var l=n[0].state;1==l?n.YTPPause():n.YTPPlay()}if(r.length>0){var a=VimeoVideo.findVideo(r.find("iframe")[0]);a&&a.getPaused().then(function(e){e?a.play():a.pause()})["catch"](function(e){})}if(o.length>0){var s=o.find(".rex-video-container").get(0);s.paused?s.play():s.pause()}}function r(t){t.stopPropagation();var i=e(this),n=i.parents(".youtube-player").eq(0).children(".rex-youtube-wrap"),r=i.parents(".mp4-player").eq(0).find(".rex-video-container"),o=i.parents(".vimeo-player").eq(0).find(".rex-video-vimeo-wrap--block");if(n.length>0){var l=n.get(0).player.isMuted();l?(n.YTPUnmute(),i.removeClass("user-has-muted")):(n.YTPMute(),i.addClass("user-has-muted"))}if(r.length>0&&(r.prop("muted")?(r.prop("muted",!1),i.removeClass("user-has-muted")):(r.prop("muted",!0),i.addClass("user-has-muted"))),o.length>0){var a=VimeoVideo.findVideo(o.find("iframe")[0]);a&&a.getVolume().then(function(e){0==e?(a.setVolume(1),i.removeClass("user-has-muted")):(a.setVolume(0),i.addClass("user-has-muted"))})["catch"](function(e){})}}function o(t){var i=e(t.currentTarget),n=i.parent().children(".play"),r=i.parents(".rexpansive_section");i.removeClass("video-tool--view"),n.addClass("video-tool--view"),Rexbuilder_Util.pauseVideo(r)}function l(t){var i=e(t.currentTarget),n=i.parent().children(".pause"),r=i.parents(".rexpansive_section");i.removeClass("video-tool--view"),n.addClass("video-tool--view"),Rexbuilder_Util.playVideo(r)}function a(t){var i=e(t.currentTarget).prev().find(".video-tool--view");i.click()}Rexbuilder_Util.$document.on("YTPStart",t),Rexbuilder_Util.$document.on("click",".YTPOverlay",i),Rexbuilder_Util.$document.on("click",".block-has-slider",n),Rexbuilder_Util.$document.on("click",".rex-video-toggle-audio",r),Rexbuilder_Util.$document.on("click",".rex-video__controls .pause",o),Rexbuilder_Util.$document.on("click",".rex-video__controls .play",l),Rexbuilder_Util.$document.on("click",".sticky-video-controls",a)},b=function(){if("undefined"!=typeof StickySection){var e,t,i,n=!(Rexbuilder_Util.cssPropertyValueSupported("position","sticky")||Rexbuilder_Util.cssPropertyValueSupported("position","-webkit-sticky")),r=[].slice.call(document.getElementsByClassName("sticky-section")),o=r.length,l=0,a="",s=!1;for(l=0;l<o;l++){if(Rexbuilder_Util.hasClass(r[l],"mp4-player"))a=".rex-video-wrap",e=r[l].querySelector(a),t=e.querySelector(".rex-video__controls"),t&&(i=document.createElement("div"),Rexbuilder_Util.addClass(i,"sticky-video-controls"),e.insertAdjacentElement("afterend",i));else if(""!==r[l].style.backgroundImage){a=".sticky-background-simulator";var d=r[l].querySelector(".responsive-overlay");d.insertAdjacentHTML("beforebegin",'<div class="sticky-background-simulator"></div>');var c=r[l].querySelector(".sticky-background-simulator");c.style.backgroundImage=r[l].style.backgroundImage}else if(Rexbuilder_Util.hasClass(r[l],"section-w-image")){a=".sticky-background-simulator";var d=r[l].querySelector(".responsive-overlay");d.insertAdjacentHTML("beforebegin",'<div class="sticky-background-simulator"></div>');var c=r[l].querySelector(".sticky-background-simulator");"1"===_plugin_frontend_settings.fast_load?c.setAttribute("data-src",r[l].querySelector(".section-data").getAttribute("data-image_bg_section")):"0"===_plugin_frontend_settings.fast_load&&(c.style.backgroundImage="url("+r[l].querySelector(".section-data").getAttribute("data-image_bg_section")+")")}s="true"===r[l].querySelector(".section-data").getAttribute("data-row_overlay_active");new StickySection(r[l],{borderAnimation:!0,stickyJS:n,stickyElementSelector:a,overlayAnimation:s})}}},h=function(){if("undefined"!=typeof ScrollCSSAnimation){var e=[].slice.call(document.getElementsByClassName("fadeUpTextCSS")),t=e.length,i=0;for(i=0;i<t;i++){new ScrollCSSAnimation(e[i],{offset:.75})}}},y=function(){if("undefined"!=typeof DistanceAccordion)for(var e=document.getElementsByClassName("distance-accordion-toggle"),t=0,i=e.length;t<i;t++){new DistanceAccordion(e[t])}},R=function(){var e=this.iframeContainer.contentDocument.querySelector(".rexbuilder-live-content");e.parentElement.removeChild(e),this.iframeContainer.contentDocument.body.insertBefore(e,this.iframeContainer.contentDocument.body.firstChild)},C=function(){if("undefined"!=typeof PopUpContent){var e=[].slice.call(document.getElementsByClassName("popup-content-button")),t=e.length,i=0;for(i=0;i<t;i++)new PopUpContent(e[i],{contentRetrieveMethod:"iframe",getPopUpContentComplete:R,ajaxSettings:{type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_popup_content",nonce_param:_plugin_frontend_settings.rexajax.rexnonce}}})}},k=function(e,t){if("undefined"!=typeof SplitScrollable&&Rexbuilder_Util.viewport().width>=_plugin_frontend_settings.splitScrollable.minViewportWidth){var i,n=[].slice.call(e.getElementsByClassName("split-scrollable")),r=n.length;for(i=0;i<r;i++){new SplitScrollable(n[i],{scrollElsToWatchClass:"text-wrap",initializeComplete:s,customScrollContainer:"undefined"!=typeof t?t:null})}}},U=function(e){if("undefined"!==Odometer){var t=e.innerText;if(null!==e.getAttribute("data-yearly-inc")&&""!==_plugin_frontend_settings.sitedate){var i=new Date(_plugin_frontend_settings.sitedate),n=new Date,r=n.getFullYear()-i.getFullYear(),o=e.getAttribute("data-yearly-inc");t=parseInt(t)+parseInt(o)*r}if(null!==e.getAttribute("data-montly-inc")&&""!==_plugin_frontend_settings.sitedate){var i=new Date(_plugin_frontend_settings.sitedate),n=new Date,r=n.getMonth()-i.getMonth(),l=e.getAttribute("data-montly-inc");t=parseInt(t)+parseInt(l)*r}e.setAttribute("data-final-value",t);var a=e.getAttribute("data-start-value");if(null==a){a="";for(var s=0,d=e.innerText.length;s<d;s++)a+="1"}var c=new Odometer({el:e,value:a,format:_plugin_frontend_settings.odometer.format,theme:_plugin_frontend_settings.odometer.theme});return c}},w=function(){function t(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:Rexbuilder_Util.$rexContainer.find("[name="+this.hash.slice(1)+"]"),t.length)return Rexbuilder_Util.smoothScroll(t),!1}}if(Rexbuilder_Util.init(),Rexbuilder_Dom_Util.init(),Rexbuilder_Rexbutton.init(),_&&(Rexbuilder_Rexelement.init(),Rexbuilder_Rexwpcf7.init()),Rexbuilder_Util.editorMode?(Rexbuilder_CreateBlocks.init(),Rexbuilder_Util_Editor.init(),Rexbuilder_Color_Palette.init(),Rexbuilder_Overlay_Palette.init(),Rexbuilder_Section.init(),Rexbuilder_Section_Editor.init(),Rexbuilder_Block.init(),Rexbuilder_Block_Editor.init(),Rexbuilder_Util_Editor.addDocumentListeners(),Rexbuilder_Util_Editor.addWindowListeners(),Rexbuilder_Util_Editor.addDnDEvents(),TextEditor.init(),Rexbuilder_Section_Editor.triggerRowDataChange()):v(),Rex_Navigator.init(),Rexbuilder_Util.addWindowListeners(),u=Rexbuilder_Util.$rexContainer.find(".rexpansive_section"),p=Rexbuilder_Util.$rexContainer.find(".grid-stack-row"),f=Rexbuilder_Util.$rexContainer.find(".rex-accordion"),p&&p.perfectGridGalleryEditor({editorMode:Rexbuilder_Util.editorMode}),Rexbuilder_Util.$document.one("rexlive:editDomLayoutEnd",c),Rexbuilder_Util.launchEditDomLayout(),!Rexbuilder_Util.editorMode){u.each(function(e,t){var i=t.getElementsByClassName("pswp-figure");0===i.length&&Rexbuilder_Util.removeClass(t,"photoswipe-gallery")});var i,n=[].slice.call(document.getElementsByClassName("rex-num-spin")),r=n.length;for(i=0;i<r;i++){var o=U(n[i]);m.push(o),e(n[i]).rexScrolled({callback:function(e){e.innerHTML=e.getAttribute("data-final-value")}})}var l=Rexbuilder_Util.$body.find(".rex-slideshow");l.length>0&&l.rexSlideshow()}if(1==_plugin_frontend_settings.native_scroll_animation){for(var a=['[href="#"]',".no-smoothing",".vertical-nav-link",".rex-vertical-nav-link",".woocommerce-review-link"],s=Rexbuilder_Util.$body.find('a[href*="#"]'),d=0,b=a.length;d<b;d++)s=s.not(a[d]);s=s.not(h),s.on("click",t);var h=function(t){return 0!=e(this).parents(".woocommerce-tabs").length}}x(),RexSlider.init(),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),g={durationOpen:10,durationClose:300},Rexbuilder_Util.editorMode?(g.open={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=e.properties.$content.parents(".grid-stack").data("gridstack");i.resize(t,null,Math.round(e.element.parentElement.offsetHeight/i.opts.cellHeight))}},g.close={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=t.children[0].getAttribute("data-gs_start_h"),n=e.properties.$content.parents(".grid-stack").data("gridstack");n.resize(t,null,Math.round(parseInt(i)))}}):(g.open={completeClbk:function(t){var i=t.$element.parents(".text-wrap")[0].offsetHeight,n=t.properties.$content.parents(".grid-stack-item")[0],r=t.properties.$content.parents(".grid-stack").data("plugin_perfectGridGalleryEditor");if(r){var o=r.properties.gridstackInstance,l=Math.ceil((i+r.properties.gutter)/o.opts.cellHeight);o.batchUpdate(),o.resize(n,null,l),o.commit()}t.properties.$content.addClass("rSlideInTop").one(Rexbuilder_Util._animationEvent,function(){e(this).removeClass("rSlideInTop")})}},g.close={startClbk:function(t){t.properties.$content.addClass("rSlideOutTop").one(Rexbuilder_Util._animationEvent,function(){e(this).removeClass("rSlideOutTop")})},completeClbk:function(e){var t=e.$element.parents(".text-wrap")[0].offsetHeight,i=e.properties.$content.parents(".grid-stack-item")[0],n=e.properties.$content.parents(".grid-stack").data("plugin_perfectGridGalleryEditor");if(n){var r=n.properties.gridstackInstance,o=Math.ceil((t+n.properties.gutter)/r.opts.cellHeight);r.batchUpdate(),r.resize(i,null,o),r.commit()}}}),f.rexAccordion(g)},E=function(){function i(){Rexbuilder_Util.$window.resize()}Rexbuilder_Util.editorMode&&Rexbuilder_Util_Editor.load();var n=e(".text-fill-container-canvas");n.length>0&&(n.textFill({relative:!0,relativeWrap:".perfect-grid-item",fontFamily:_plugin_frontend_settings.textFill.font_family,fontWeight:_plugin_frontend_settings.textFill.font_weight}),n.on("textfill-render-complete",i)),RexSlider.startAutoPlay(),p&&t(p),Rexbuilder_Util.galleryPluginActive=!0};return{init:w,load:E}}(jQuery);!function(){"use strict";document.addEventListener("DOMContentLoaded",Rexbuilder_App.init),window.addEventListener("load",Rexbuilder_App.load)}();