!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.tippy=e()}(this,function(){"use strict";function T(t){return t&&"[object Function]"==={}.toString.call(t)}function d(t,e){return 1!==t.nodeType?[]:(t=getComputedStyle(t,null),e?t[e]:t)}function s(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function c(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=d(t),r=e.overflow,n=e.overflowX,e=e.overflowY;return/(auto|scroll|overlay)/.test(r+e+n)?t:c(s(t))}function f(t){return 11===t?lt:10!==t&&lt||ct}function u(t){if(!t)return document.documentElement;for(var e=f(10)?document.body:null,r=t.offsetParent;r===e&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var n=r&&r.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TD","TABLE"].indexOf(r.nodeName)&&"static"===d(r,"position")?u(r):r:(t?t.ownerDocument:document).documentElement}function i(t){return null===t.parentNode?t:i(t.parentNode)}function l(t,e){var r,n,o;return t&&t.nodeType&&e&&e.nodeType?(n=(o=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING)?t:e,o=o?e:t,(r=document.createRange()).setStart(n,0),r.setEnd(o,0),t!==(r=r.commonAncestorContainer)&&e!==r||n.contains(o)?"BODY"===(o=(n=r).nodeName)||"HTML"!==o&&u(n.firstElementChild)!==n?u(r):r:(o=i(t)).host?l(o.host,e):l(t,i(e).host)):document.documentElement}function m(t,e){var e="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",r=t.nodeName;return("BODY"===r||"HTML"===r?(r=t.ownerDocument.documentElement,t.ownerDocument.scrollingElement||r):t)[e]}function L(t,e){var e="x"===e?"Left":"Top",r="Left"==e?"Right":"Bottom";return parseFloat(t["border"+e+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function C(t,e,r,n){return k(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],f(10)?parseInt(r["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function A(t){var e=t.body,t=t.documentElement,r=f(10)&&getComputedStyle(t);return{height:C("Height",e,t,r),width:C("Width",e,t,r)}}function h(t){return O({},t,{right:t.left+t.width,bottom:t.top+t.height})}function b(t){var e={};try{f(10)?(e=t.getBoundingClientRect(),r=m(t,"top"),n=m(t,"left"),e.top+=r,e.left+=n,e.bottom+=r,e.right+=n):e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},n="HTML"===t.nodeName?A(t.ownerDocument):{},e=n.width||t.clientWidth||r.right-r.left,n=n.height||t.clientHeight||r.bottom-r.top,e=t.offsetWidth-e,n=t.offsetHeight-n;return(e||n)&&(e-=L(t=d(t),"x"),n-=L(t,"y"),r.width-=e,r.height-=n),h(r)}function y(t,e,r){var r=!!(2<arguments.length&&void 0!==r)&&r,n=f(10),o="HTML"===e.nodeName,i=b(t),a=b(e),t=c(t),p=d(e),s=parseFloat(p.borderTopWidth,10),l=parseFloat(p.borderLeftWidth,10),a=(r&&o&&(a.top=k(a.top,0),a.left=k(a.left,0)),h({top:i.top-a.top-s,left:i.left-a.left-l,width:i.width,height:i.height}));return a.marginTop=0,a.marginLeft=0,!n&&o&&(i=parseFloat(p.marginTop,10),o=parseFloat(p.marginLeft,10),a.top-=s-i,a.bottom-=s-i,a.left-=l-o,a.right-=l-o,a.marginTop=i,a.marginLeft=o),a=(n&&!r?e.contains(t):e===t&&"BODY"!==t.nodeName)?function(t,e,r){var r=!!(2<arguments.length&&void 0!==r)&&r,n=m(e,"top"),e=m(e,"left"),r=r?-1:1;return t.top+=n*r,t.bottom+=n*r,t.left+=e*r,t.right+=e*r,t}(a,e):a}function Y(t){if(!t||!t.parentElement||f())return document.documentElement;for(var e=t.parentElement;e&&"none"===d(e,"transform");)e=e.parentElement;return e||document.documentElement}function v(t,e,r,n,o){var i,o=!!(4<arguments.length&&void 0!==o)&&o,a={top:0,left:0},p=o?Y(t):l(t,e),p=("viewport"===n?a=function(t,e){var e=!!(1<arguments.length&&void 0!==e)&&e,r=t.ownerDocument.documentElement,t=y(t,r),n=k(r.clientWidth,window.innerWidth||0),o=k(r.clientHeight,window.innerHeight||0),i=e?0:m(r),e=e?0:m(r,"left");return h({top:i-t.top+t.marginTop,left:e-t.left+t.marginLeft,width:n,height:o})}(p,o):("scrollParent"===n?"BODY"===(i=c(s(e))).nodeName&&(i=t.ownerDocument.documentElement):i="window"===n?t.ownerDocument.documentElement:n,e=y(i,p,o),"HTML"!==i.nodeName||function t(e){var r=e.nodeName;return"BODY"!==r&&"HTML"!==r&&("fixed"===d(e,"position")||t(s(e)))}(p)?a=e:(o=(n=A(t.ownerDocument)).height,i=n.width,a.top+=e.top-e.marginTop,a.bottom=o+e.top,a.left+=e.left-e.marginLeft,a.right=i+e.left)),"number"==typeof(r=r||0));return a.left+=p?r:r.left||0,a.top+=p?r:r.top||0,a.right-=p?r:r.right||0,a.bottom-=p?r:r.bottom||0,a}function D(t,e,r,n,o,i){var a,i=5<arguments.length&&void 0!==i?i:0;return-1===t.indexOf("auto")?t:(n=v(r,n,i,o),a={top:{width:n.width,height:e.top-n.top},right:{width:n.right-e.right,height:n.height},bottom:{width:n.width,height:n.bottom-e.bottom},left:{width:e.left-n.left,height:n.height}},(0<(o=(i=Object.keys(a).map(function(t){return O({key:t},a[t],{area:(t=a[t]).width*t.height})}).sort(function(t,e){return e.area-t.area})).filter(function(t){var e=t.width,t=t.height;return e>=r.clientWidth&&t>=r.clientHeight})).length?o:i)[0].key+((e=t.split("-")[1])?"-"+e:""))}function X(t,e,r,n){n=3<arguments.length&&void 0!==n?n:null;return y(r,n?Y(e):l(e,r),n)}function P(t){var e=getComputedStyle(t),r=parseFloat(e.marginTop)+parseFloat(e.marginBottom),e=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+e,height:t.offsetHeight+r}}function g(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function N(t,e,r){r=r.split("-")[0];var t=P(t),n={width:t.width,height:t.height},o=-1!==["right","left"].indexOf(r),i=o?"top":"left",a=o?"left":"top",p=o?"height":"width",o=o?"width":"height";return n[i]=e[i]+e[p]/2-t[p]/2,n[a]=r===a?e[a]-t[o]:e[g(a)],n}function w(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function I(t,r,e){var n,o;return(void 0===e?t:t.slice(0,(t=t,n="name",o=e,Array.prototype.findIndex?t.findIndex(function(t){return t[n]===o}):(e=w(t,function(t){return t[n]===o}),t.indexOf(e))))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&T(e)&&(r.offsets.popper=h(r.offsets.popper),r.offsets.reference=h(r.offsets.reference),r=e(r,t))}),r}function S(t,r){return t.some(function(t){var e=t.name;return t.enabled&&e===r})}function H(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var o=e[n],o=o?""+o+r:t;if(void 0!==document.body.style[o])return o}return null}function F(t){t=t.ownerDocument;return t?t.defaultView:window}function R(t,e,r,n){r.updateBound=n,F(t).addEventListener("resize",r.updateBound,{passive:!0});n=c(t);return function t(e,r,n,o){var i="BODY"===e.nodeName,e=i?e.ownerDocument.defaultView:e;e.addEventListener(r,n,{passive:!0}),i||t(c(e.parentNode),r,n,o),o.push(e)}(n,"scroll",r.updateBound,r.scrollParents),r.scrollElement=n,r.eventsEnabled=!0,r}function B(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,F(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function M(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function z(r,n){Object.keys(n).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&M(n[t])&&(e="px"),r.style[t]=n[t]+e})}function $(t,e,r){var n,o=w(t,function(t){return t.name===e}),t=!!o&&t.some(function(t){return t.name===r&&t.enabled&&t.order<o.order});return t||(n="`"+e+"`",console.warn("`"+r+"` modifier is required by "+n+" modifier in order to work, be sure to include it before "+n+"!")),t}function tt(t,e){e=!!(1<arguments.length&&void 0!==e)&&e,t=ft.indexOf(t),t=ft.slice(t+1).concat(ft.slice(0,t));return e?t.reverse():t}function et(t,p,s,e){var o=[0,0],n=-1!==["right","left"].indexOf(e),e=t.split(/(\+|\-)/).map(function(t){return t.trim()}),t=e.indexOf(w(e,function(t){return-1!==t.search(/,|\s/)})),r=(e[t]&&-1===e[t].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),/\s*,\s*|\s+/);return(-1===t?[e]:[e.slice(0,t).concat([e[t].split(r)[0]]),[e[t].split(r)[1]].concat(e.slice(t+1))]).map(function(t,e){var a=(1===e?!n:n)?"height":"width",r=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,r=!0,t):r?(t[t.length-1]+=e,r=!1,t):t.concat(e)},[]).map(function(t){return e=a,r=p,n=s,o=+(i=(t=t).match(/((?:\-|\+)?\d*\.?\d*)(.*)/))[1],i=i[2],o?0===i.indexOf("%")?h("%p"===i?r:n)[e]/100*o:"vh"===i||"vw"===i?("vh"===i?k(document.documentElement.clientHeight,window.innerHeight||0):k(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o:t;var e,r,n,o,i})}).forEach(function(r,n){r.forEach(function(t,e){M(t)&&(o[n]+=t*("-"===r[e-1]?-1:1))})}),o}function rt(t,e){function r(){Wt(function(){A=!1})}function o(t){var e,r,n,t=k=t,o=t.clientX,i=t.clientY;S.popperInstance&&(e=S.reference.getBoundingClientRect(),t=S.props.followCursor,r="horizontal"===t,n="vertical"===t,S.popperInstance.reference={getBoundingClientRect:function(){return{width:0,height:0,top:r?e.top:i,bottom:r?e.bottom:i,left:n?e.left:o,right:n?e.right:o}},clientWidth:0,clientHeight:0},S.popperInstance.scheduleUpdate())}function i(t){if(y(),!S.state.isVisible)if(S.props.target)(n=J((e=t).target,S.props.target))&&!n._tippy&&(r=S.props.content)&&(rt(n,_({},S.props,{content:r,target:"",showOnInit:!0})),i(e));else{if(T=!0,S.props.wait)return S.props.wait(S,t);h()&&(I.arrow&&(I.arrow.style.margin="0"),document.addEventListener("mousemove",o));n=K(S.props.delay,0,j.delay);n?E=setTimeout(function(){v()},n):v()}var e,r,n}function a(){if(y(),!S.state.isVisible)return n();T=!1;var t=K(S.props.delay,1,j.delay);t?O=setTimeout(function(){S.state.isVisible&&g()},t):g()}function n(){document.removeEventListener("mousemove",o),k=null}function p(){document.body.removeEventListener("mouseleave",a),document.removeEventListener("mousemove",D)}function s(t){S.state.isEnabled&&!u(t)&&(S.state.isVisible||(x=t),"click"===t.type&&!1!==S.props.hideOnClick&&S.state.isVisible?a():i(t))}function l(t){var e=St(t.target,function(t){return t._tippy}),r=J(t.target,V.POPPER)===S.popper,e=e===S.reference;r||e||_t(Q(S.popper),S.popper.getBoundingClientRect(),t,S.props)&&(p(),a())}function c(t){return u(t)?void 0:S.props.interactive?(document.body.addEventListener("mouseleave",a),void document.addEventListener("mousemove",D)):void a()}function H(t){if(t.target===S.reference){if(S.props.interactive){if(!t.relatedTarget)return;if(J(t.relatedTarget,V.POPPER))return}a()}}function d(t){J(t.target,S.props.target)&&i(t)}function f(t){J(t.target,S.props.target)&&a()}function u(t){var t=-1<t.type.indexOf("touch"),e=Zt&&Z&&S.props.touchHold&&!t,t=Z&&!S.props.touchHold&&t;return e||t}function m(){var e=S.popperChildren.tooltip,t=S.props.popperOptions,r=V["round"===S.props.arrowType?"ROUND_ARROW":"ARROW"],n=e.querySelector(r),r=_({placement:S.props.placement},t||{},{modifiers:_({},t?t.modifiers:{},{arrow:_({element:r},t&&t.modifiers?t.modifiers.arrow:{}),flip:_({enabled:S.props.flip,padding:S.props.distance+5,behavior:S.props.flipBehavior},t&&t.modifiers?t.modifiers.flip:{}),offset:_({offset:S.props.offset},t&&t.modifiers?t.modifiers.offset:{})}),onCreate:function(){e.style[Q(S.popper)]=jt(S.props.distance,j.distance),n&&S.props.arrowTransform&&Bt(n,S.props.arrowTransform)},onUpdate:function(){var t=e.style;t.top="",t.bottom="",t.left="",t.right="",t[Q(S.popper)]=jt(S.props.distance,j.distance),n&&S.props.arrowTransform&&Bt(n,S.props.arrowTransform)}}),t=new MutationObserver(function(){S.popperInstance.update()});return t.observe(S.popper,{childList:!0,subtree:!0}),w&&w.disconnect(),w=t,Y||(Y=!0,S.popper.addEventListener("mouseenter",function(t){S.props.interactive&&S.state.isVisible&&"mouseenter"===x.type&&i(t)}),S.popper.addEventListener("mouseleave",function(t){S.props.interactive&&"mouseenter"===x.type&&0===S.props.interactiveDebounce&&_t(Q(S.popper),S.popper.getBoundingClientRect(),t,S.props)&&a()})),new U(S.reference,S.popper,r)}function h(){return S.props.followCursor&&!Z&&"focus"!==x.type}function F(t,e){if(0===t)return e();function r(t){t.target===n&&(Vt(n,"remove",r),e())}var n=S.popperChildren.tooltip;Vt(n,"remove",L),Vt(n,"add",r),L=r}function b(t,e,r){S.reference.addEventListener(t,e),r.push({eventType:t,handler:e})}function R(){C=S.props.trigger.trim().split(" ").reduce(function(t,e){return"manual"===e||(S.props.target?"mouseenter"===e?(b("mouseover",d,t),b("mouseout",f,t)):"focus"===e?(b("focusin",d,t),b("focusout",f,t)):"click"===e&&b(e,d,t):(b(e,s,t),S.props.touchHold&&(b("touchstart",s,t),b("touchend",c,t)),"mouseenter"===e?b("mouseleave",c,t):"focus"===e&&b(Jt?"focusout":"blur",H,t))),t},[])}function B(){C.forEach(function(t){var e=t.eventType,t=t.handler;S.reference.removeEventListener(e,t)})}function y(){clearTimeout(E),clearTimeout(O)}function M(e){Gt(e,j);var t=S.props,r=Ut(S.reference,_({},S.props,e,{performance:!0}));r.performance=e.performance||t.performance,S.props=r,("trigger"in e||"touchHold"in e)&&(B(),R()),"interactiveDebounce"in e&&(p(),D=qt(l,e.interactiveDebounce)),Nt(S.popper,t,r),S.popperChildren=Dt(S.popper),S.popperInstance&&ot.some(function(t){return t in e})&&(S.popperInstance.destroy(),S.popperInstance=m(),S.state.isVisible||S.popperInstance.disableEventListeners(),S.props.followCursor)&&k&&o(k)}function v(){var t,e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:K(S.props.duration,0,j.duration[0]);return S.state.isDestroyed||!S.state.isEnabled||Z&&!S.props.touch?void 0:S.reference.isVirtual||document.documentElement.contains(S.reference)?S.reference.hasAttribute("disabled")?void 0:A?void(A=!1):void(!1!==S.props.onShow(S)&&(S.popper.style.visibility="visible",S.state.isVisible=!0,G([S.popper,S.popperChildren.tooltip,S.popperChildren.backdrop],0),t=function(){S.state.isVisible&&(h()||S.popperInstance.update(),G([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],r),S.popperChildren.backdrop&&(S.popperChildren.content.style.transitionDelay=W(r/6)+"ms"),S.props.interactive&&S.reference.classList.add("tippy-active"),S.props.sticky&&(G([S.popper],Jt?0:S.props.updateDuration),function t(){S.popperInstance&&S.popperInstance.scheduleUpdate(),X?requestAnimationFrame(t):G([S.popper],0)}()),Mt([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],"visible"),F(r,function(){0===S.props.updateDuration&&S.popperChildren.tooltip.classList.add("tippy-notransition"),S.props.interactive&&-1<["focus","click"].indexOf(x.type)&&Ht(S.popper),S.reference.setAttribute("aria-describedby",S.popper.id),S.props.onShown(S)}))},S.popperInstance?(h()||S.popperInstance.scheduleUpdate(),S.props.livePlacement&&!h()&&S.popperInstance.enableEventListeners()):(S.popperInstance=m(),S.props.livePlacement||S.popperInstance.disableEventListeners()),S.popperInstance.reference=S.reference,h()&&(S.popperChildren.arrow&&(S.popperChildren.arrow.style.margin=""),e=K(S.props.delay,0,j.delay),x.type)&&o(e&&k?k:x),zt(S.popperInstance,t),S.props.appendTo.contains(S.popper)||(S.props.appendTo.appendChild(S.popper),X=!0))):z()}function g(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:K(S.props.duration,1,j.duration[1]);!S.state.isDestroyed&&S.state.isEnabled&&!1!==S.props.onHide(S)&&(0===S.props.updateDuration&&S.popperChildren.tooltip.classList.remove("tippy-notransition"),S.props.interactive&&S.reference.classList.remove("tippy-active"),S.popper.style.visibility="hidden",S.state.isVisible=!1,G([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],e),Mt([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],"hidden"),S.props.interactive&&!A&&-1<["focus","click"].indexOf(x.type)&&("focus"===x.type&&(A=!0),Ht(S.reference)),t=function(){T||n(),S.reference.removeAttribute("aria-describedby"),S.popperInstance.disableEventListeners(),S.props.appendTo.removeChild(S.popper),X=!1,S.props.onHidden(S)},F(e,function(){!S.state.isVisible&&S.props.appendTo.contains(S.popper)&&t()}))}function z(t){S.state.isDestroyed||(S.state.isVisible&&g(0),B(),S.reference.removeEventListener("click",r),delete S.reference._tippy,S.props.target&&t&&q(S.reference.querySelectorAll(S.props.target)).forEach(function(t){return t._tippy&&t._tippy.destroy()}),S.popperInstance&&S.popperInstance.destroy(),w&&w.disconnect(),S.state.isDestroyed=!0)}var w,x,k,E,O,T,L,C,A,Y,D,X,P,N,I,S,e=Ut(t,e);return!e.multiple&&t._tippy?null:(k=w=null,T=!(x={}),L=function(){},Y=A=!(C=[]),D=(O=E=0)<e.interactiveDebounce?qt(l,e.interactiveDebounce):l,X=!1,P=oe++,N=Pt(P,e),I=Dt(N),S={id:P,reference:t,popper:N,popperChildren:I,popperInstance:null,props:e,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1},clearDelayTimeouts:y,set:M,setContent:function(t){M({content:t})},show:v,hide:g,enable:function(){S.state.isEnabled=!0},disable:function(){S.state.isEnabled=!1},destroy:z},R(),t.addEventListener("click",r),e.lazy||(S.popperInstance=m(),S.popperInstance.disableEventListeners()),e.showOnInit&&setTimeout(i,20),!e.a11y||e.target||Yt(t)||t.setAttribute("tabindex","0"),t._tippy=S,N._tippy=S)}function r(t,e,r){Gt(e,j),ie||(p=ae,document.addEventListener("click",ee,p),document.addEventListener("touchstart",$t),window.addEventListener("blur",re),window.addEventListener("resize",ne),Zt||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints||document.addEventListener("pointerdown",$t),ie=!0);var n=_({},j,e);if(Xt(t)){var o=t,i,a={isVirtual:!0,attributes:o.attributes||{},setAttribute:function(t,e){o.attributes[t]=e},getAttribute:function(t){return o.attributes[t]},removeAttribute:function(t){delete o.attributes[t]},hasAttribute:function(t){return t in o.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){o.classList.classNames[t]=!0},remove:function(t){delete o.classList.classNames[t]},contains:function(t){return t in o.classList.classNames}}};for(i in a)o[i]=a[i]}var p=function(t){if(t instanceof Element||Xt(t))return[t];if(t instanceof NodeList)return q(t);if(Array.isArray(t))return t;try{return q(document.querySelectorAll(t))}catch(t){return[]}}(t),e=p[0],r=(r&&e?[e]:p).reduce(function(t,e){e=e&&rt(e,n);return e&&t.push(e),t},[]);return{targets:t,props:n,instances:r,destroyAll:function(){this.instances.forEach(function(t){t.destroy()}),this.instances=[]}}}for(var nt=Math.min,W=Math.round,x=Math.floor,k=Math.max,_=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},j={a11y:!0,content:"",placement:"top",livePlacement:!0,trigger:"mouseenter focus",hideOnClick:!0,animation:"shift-away",animateFill:!0,arrow:!1,delay:[0,20],duration:[325,275],interactive:!1,interactiveBorder:2,interactiveDebounce:0,theme:"dark",size:"regular",distance:10,offset:0,multiple:!1,followCursor:!1,inertia:!1,updateDuration:200,sticky:!1,appendTo:function(){return document.body},zIndex:9999,touchHold:!1,performance:!1,flip:!0,flipBehavior:"flip",arrowType:"sharp",arrowTransform:"",target:"",allowHTML:!0,showOnInit:!1,popperOptions:{},lazy:!0,touch:!0,wait:null,shouldPopperHideOnBlur:function(){return!0},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){}},ot=["placement","popperOptions","flip","flipBehavior","distance","offset"],t="undefined"!=typeof window&&"undefined"!=typeof document,it=["Edge","Trident","Firefox"],at=0,pt=0;pt<it.length;pt+=1)if(t&&0<=navigator.userAgent.indexOf(it[pt])){at=1;break}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},at))}},lt=t&&!(!window.MSInputMethodContext||!document.documentMode),ct=t&&/MSIE 10/.test(navigator.userAgent),dt=function(t,e,r){return e&&bt(t.prototype,e),r&&bt(t,r),t},O=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ft=e.slice(3),ut="flip",mt="clockwise",ht="counterclockwise",U=(dt(a,[{key:"update",value:function(){return function(){var t;this.state.isDestroyed||((t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}}).offsets.reference=X(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=D(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=N(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=I(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t)))}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[H("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=R(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),a);function a(t,e){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this,i=a;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=st(this.update.bind(this)),this.options=O({},a.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(O({},a.Defaults.modifiers,n.modifiers)).forEach(function(t){r.options.modifiers[t]=O({},a.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return O({name:t},r.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&T(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)}),this.update();o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}function bt(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}U.Utils=("undefined"==typeof window?global:window).PopperUtils,U.placements=e,U.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e,r,n,o=t.placement,i=o.split("-")[0],o=o.split("-")[1];return o&&(e=(r=t.offsets).reference,r=r.popper,n=(i=-1!==["bottom","top"].indexOf(i))?"width":"height",i={start:E({},i=i?"left":"top",e[i]),end:E({},i,e[i]+e[n]-r[n])},t.offsets.popper=O({},r,i[o])),t}},offset:{order:200,enabled:!0,fn:function(t,e){var e=e.offset,r=t.placement,n=(o=t.offsets).popper,o=o.reference,r=r.split("-")[0],e=M(+e)?[+e,0]:et(e,n,o,r);return"left"===r?(n.top+=e[0],n.left-=e[1]):"right"===r?(n.top+=e[0],n.left+=e[1]):"top"===r?(n.left+=e[0],n.top-=e[1]):"bottom"===r&&(n.left+=e[0],n.top+=e[1]),t.popper=n,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,n){var e=n.boundariesElement||u(t.instance.popper),r=(t.instance.reference===e&&(e=u(e)),H("transform")),o=t.instance.popper.style,i=o.top,a=o.left,p=o[r],s=(o.top="",o.left="",o[r]="",v(t.instance.popper,t.instance.reference,n.padding,e,t.positionFixed)),e=(o.top=i,o.left=a,o[r]=p,n.boundaries=s,n.priority),l=t.offsets.popper,c={primary:function(t){var e=l[t];return l[t]<s[t]&&!n.escapeWithReference&&(e=k(l[t],s[t])),E({},t,e)},secondary:function(t){var e="right"===t?"left":"top",r=l[e];return l[t]>s[t]&&!n.escapeWithReference&&(r=nt(l[e],s[t]-("right"===t?l.width:l.height))),E({},e,r)}};return e.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";l=O({},l,c[e](t))}),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,r=e.popper,e=e.reference,n=t.placement.split("-")[0],o=x,n=-1!==["top","bottom"].indexOf(n),i=n?"right":"bottom",a=n?"left":"top",n=n?"width":"height";return r[i]<o(e[a])&&(t.offsets.popper[a]=o(e[a])-r[n]),r[a]>o(e[i])&&(t.offsets.popper[a]=o(e[i])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if($(t.instance.modifiers,"arrow","keepTogether")){e=e.element;if("string"==typeof e){if(!(e=t.instance.popper.querySelector(e)))return t}else if(!t.instance.popper.contains(e))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],n=t.offsets,o=n.popper,n=n.reference,r=-1!==["left","right"].indexOf(r),i=r?"height":"width",a=r?"Top":"Left",p=a.toLowerCase(),s=r?"left":"top",r=r?"bottom":"right",l=P(e)[i],r=(n[r]-l<o[p]&&(t.offsets.popper[p]-=o[p]-(n[r]-l)),n[p]+l>o[r]&&(t.offsets.popper[p]+=n[p]+l-o[r]),t.offsets.popper=h(t.offsets.popper),n[p]+n[i]/2-l/2),n=d(t.instance.popper),c=parseFloat(n["margin"+a],10),n=parseFloat(n["border"+a+"Width"],10),a=r-t.offsets.popper[p]-c-n,a=k(nt(o[i]-l,a),0);t.arrowElement=e,t.offsets.arrow=(E(r={},p,W(a)),E(r,s,""),r)}return t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(s,l){if(!(S(s.instance.modifiers,"inner")||s.flipped&&s.placement===s.originalPlacement)){var c=v(s.instance.popper,s.instance.reference,l.padding,l.boundariesElement,s.positionFixed),d=s.placement.split("-")[0],f=g(d),u=s.placement.split("-")[1]||"",m=[];switch(l.behavior){case ut:m=[d,f];break;case mt:m=tt(d);break;case ht:m=tt(d,!0);break;default:m=l.behavior}m.forEach(function(t,e){if(d!==t||m.length===e+1)return s;d=s.placement.split("-")[0],f=g(d);var t=s.offsets.popper,r=s.offsets.reference,n=x,r="left"===d&&n(t.right)>n(r.left)||"right"===d&&n(t.left)<n(r.right)||"top"===d&&n(t.bottom)>n(r.top)||"bottom"===d&&n(t.top)<n(r.bottom),o=n(t.left)<n(c.left),i=n(t.right)>n(c.right),a=n(t.top)<n(c.top),t=n(t.bottom)>n(c.bottom),n="left"===d&&o||"right"===d&&i||"top"===d&&a||"bottom"===d&&t,p=-1!==["top","bottom"].indexOf(d),o=!!l.flipVariations&&(p&&"start"===u&&o||p&&"end"===u&&i||!p&&"start"===u&&a||!p&&"end"===u&&t);(r||n||o)&&(s.flipped=!0,(r||n)&&(d=m[e+1]),o&&(u="end"===(i=u)?"start":"start"===i?"end":i),s.placement=d+(u?"-"+u:""),s.offsets.popper=O({},s.offsets.popper,N(s.instance.popper,s.offsets.reference,s.placement)),s=I(s.instance.modifiers,s,"flip"))})}return s},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,r=e.split("-")[0],n=t.offsets,o=n.popper,n=n.reference,i=-1!==["left","right"].indexOf(r),a=-1===["top","left"].indexOf(r);return o[i?"left":"top"]=n[r]-(a?o[i?"width":"height"]:0),t.placement=g(e),t.offsets.popper=h(o),t}},hide:{order:800,enabled:!0,fn:function(t){if($(t.instance.modifiers,"hide","preventOverflow")){var e=t.offsets.reference,r=w(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var r=e.x,n=e.y,o=t.offsets.popper,i=w(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration,e=(void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!"),void 0===i?e.gpuAcceleration:i),i=u(t.instance.popper),a=b(i),p={position:o.position},o={left:x(o.left),top:W(o.top),bottom:W(o.bottom),right:x(o.right)},r="bottom"===r?"top":"bottom",n="right"===n?"left":"right",s=H("transform"),l="bottom"==r?"HTML"===i.nodeName?-i.clientHeight+o.bottom:-a.height+o.bottom:o.top,i="right"==n?"HTML"===i.nodeName?-i.clientWidth+o.right:-a.width+o.right:o.left,o=(e&&s?(p[s]="translate3d("+i+"px, "+l+"px, 0)",p[r]=0,p[n]=0,p.willChange="transform"):(a="right"==n?-1:1,p[r]=l*("bottom"==r?-1:1),p[n]=i*a,p.willChange=r+", "+n),{"x-placement":t.placement});return t.attributes=O({},o,t.attributes),t.styles=O({},p,t.styles),t.arrowStyles=O({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return z(t.instance.popper,t.styles),e=t.instance.popper,r=t.attributes,Object.keys(r).forEach(function(t){!1===r[t]?e.removeAttribute(t):e.setAttribute(t,r[t])}),t.arrowElement&&Object.keys(t.arrowStyles).length&&z(t.arrowElement,t.arrowStyles),t;var e,r},onLoad:function(t,e,r,n,o){o=X(o,e,t,r.positionFixed),o=D(r.placement,o,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",o),z(e,{position:r.positionFixed?"fixed":"absolute"}),r},gpuAcceleration:void 0}}};function yt(t,e){e.content instanceof Element?(vt(t,""),t.appendChild(e.content)):t[e.allowHTML?"innerHTML":"textContent"]=e.content}function o(){return document.createElement("div")}function vt(t,e){t[At.x&&"innerHTML"]=e instanceof Element?e[At.x&&"innerHTML"]:e}function gt(t){var e=o();return"round"===t?(e.className="tippy-roundarrow",vt(e,'<svg viewBox="0 0 24 8" xmlns="http://www.w3.org/2000/svg"><path d="M3 8s2.021-.015 5.253-4.218C9.584 2.051 10.797 1.007 12 1c1.203-.007 2.416 1.035 3.761 2.782C19.012 8.005 21 8 21 8H3z"/></svg>')):e.className="tippy-arrow",e}function wt(){var t=o();return t.className="tippy-backdrop",t.setAttribute("data-state","hidden"),t}function xt(t,e){t.setAttribute("tabindex","-1"),e.setAttribute("data-interactive","")}function n(r){q(document.querySelectorAll(V.POPPER)).forEach(function(t){var e=t._tippy;!e||!0!==e.props.hideOnClick||r&&t===r.popper||e.hide()})}function kt(o){return Object.keys(j).reduce(function(t,e){var r,n=(o.getAttribute("data-tippy-"+e)||"").trim();return n&&(t[e]="true"===n||"false"!==n&&(r=n,isNaN(r)||isNaN(parseFloat(r))?"target"!==e&&"["===n[0]?JSON.parse(n):n:+n)),t},{})}function Et(t,e){return(e?t:{X:"Y",Y:"X"}[t])||""}function Ot(t,e,r,n){var o=e[0],e=e[1];return o||e?{scale:e?r?o+", "+e:e+", "+o:""+o,translate:e?r?n?o+"px, "+-e+"px":o+"px, "+e+"px":n?-e+"px, "+o+"px":e+"px, "+o+"px":n?-o+"px":o+"px"}[t]:""}function Tt(t,e){return(t=t.match(new RegExp(e+"([XY])")))?t[1]:""}function Lt(t,e){return(t=t.match(e))?t[1].split(",").map(parseFloat):[]}function Ct(){var t=performance.now();t-te<20&&(Z=!1,document.removeEventListener("mousemove",Ct),!Qt)&&document.body.classList.remove("tippy-iOS"),te=t}var V={POPPER:".tippy-popper",TOOLTIP:".tippy-tooltip",CONTENT:".tippy-content",BACKDROP:".tippy-backdrop",ARROW:".tippy-arrow",ROUND_ARROW:".tippy-roundarrow"},At={x:!0},p="undefined"!=typeof window,dt=p&&"MutationObserver"in window,q=function(t){return[].slice.call(t)},Yt=function(t){return!(t instanceof Element)||It.call(t,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!t.hasAttribute("disabled")},G=function(t,e){t.filter(Boolean).forEach(function(t){t.style.transitionDuration=e+"ms"})},Dt=function(e){function t(t){return e.querySelector(t)}return{tooltip:t(V.TOOLTIP),backdrop:t(V.BACKDROP),content:t(V.CONTENT),arrow:t(V.ARROW)||t(V.ROUND_ARROW)}},Xt=function(t){return"[object Object]"==={}.toString.call(t)},K=function(t,e,r){return Array.isArray(t)?null==(e=t[e])?r:e:t},Pt=function(t,e){var r=o(),n=(r.className="tippy-popper",r.setAttribute("role","tooltip"),r.id="tippy-"+t,r.style.zIndex=e.zIndex,o()),t=(n.className="tippy-tooltip",n.setAttribute("data-size",e.size),n.setAttribute("data-animation",e.animation),n.setAttribute("data-state","hidden"),e.theme.split(" ").forEach(function(t){n.classList.add(t+"-theme")}),o());return t.className="tippy-content",t.setAttribute("data-state","hidden"),e.interactive&&xt(r,n),e.arrow&&n.appendChild(gt(e.arrowType)),e.animateFill&&(n.appendChild(wt()),n.setAttribute("data-animatefill","")),e.inertia&&n.setAttribute("data-inertia",""),yt(t,e),n.appendChild(t),r.appendChild(n),r.addEventListener("focusout",function(t){t.relatedTarget&&r._tippy&&!St(t.relatedTarget,function(t){return t===r})&&t.relatedTarget!==r._tippy.reference&&r._tippy.props.shouldPopperHideOnBlur(t)&&r._tippy.hide()}),r},Nt=function(t,e,r){var n=Dt(t),o=n.tooltip,i=n.content,a=n.backdrop,n=n.arrow;t.style.zIndex=r.zIndex,o.setAttribute("data-size",r.size),o.setAttribute("data-animation",r.animation),e.content!==r.content&&yt(i,r),!e.animateFill&&r.animateFill?(o.appendChild(wt()),o.setAttribute("data-animatefill","")):e.animateFill&&!r.animateFill&&(o.removeChild(a),o.removeAttribute("data-animatefill")),!e.arrow&&r.arrow?o.appendChild(gt(r.arrowType)):e.arrow&&!r.arrow&&o.removeChild(n),e.arrow&&r.arrow&&e.arrowType!==r.arrowType&&o.replaceChild(gt(r.arrowType),n),!e.interactive&&r.interactive?xt(t,o):e.interactive&&!r.interactive&&(i=o,t.removeAttribute("tabindex"),i.removeAttribute("data-interactive")),!e.inertia&&r.inertia?o.setAttribute("data-inertia",""):e.inertia&&!r.inertia&&o.removeAttribute("data-inertia"),e.theme!==r.theme&&(e.theme.split(" ").forEach(function(t){o.classList.remove(t+"-theme")}),r.theme.split(" ").forEach(function(t){o.classList.add(t+"-theme")}))},It=function(){var t;if(p)return(t=Element.prototype).matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector}(),J=function(t,e){return(Element.prototype.closest||function(t){for(var e=this;e;){if(It.call(e,t))return e;e=e.parentElement}}).call(t,e)},St=function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}},Ht=function(t){var e=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;t.focus(),scroll(e,r)},Ft=/translateX?Y?\(([^)]+)\)/,Rt=/scaleX?Y?\(([^)]+)\)/,Bt=function(t,e){var r=Q(J(t,V.POPPER)),n="top"===r||"bottom"===r,r="right"===r||"bottom"===r,o={translate:{axis:Tt(e,"translate"),numbers:Lt(e,Ft)},scale:{axis:Tt(e,"scale"),numbers:Lt(e,Rt)}},e=e.replace(Ft,"translate"+Et(o.translate.axis,n)+"("+Ot("translate",o.translate.numbers,n,r)+")").replace(Rt,"scale"+Et(o.scale.axis,n)+"("+Ot("scale",o.scale.numbers,n,r)+")");t.style[void 0===document.body.style.transform?"webkitTransform":"transform"]=e},Mt=function(t,e){t.filter(Boolean).forEach(function(t){t.setAttribute("data-state",e)})},zt=function(t,e){var r=t.popper,n=t.options,o=n.onCreate,i=n.onUpdate;n.onCreate=n.onUpdate=function(){r.offsetHeight,e(),i(),n.onCreate=o,n.onUpdate=i}},Wt=function(t){setTimeout(t,1)},_t=function(t,e,r,n){var o,i,a,p;return!t||(p=r.clientX,r=r.clientY,o=n.interactiveBorder,n=n.distance,i=e.top-r>("top"===t?o+n:o),r=r-e.bottom>("bottom"===t?o+n:o),a=e.left-p>("left"===t?o+n:o),p=p-e.right>("right"===t?o+n:o),i)||r||a||p},jt=function(t,e){return-(t-e)+"px"},Q=function(t){t=t.getAttribute("x-placement");return t?t.split("-")[0]:""},Ut=function(t,e){var r=_({},e,e.performance?{}:kt(t));return r.arrow&&(r.animateFill=!1),"function"==typeof r.appendTo&&(r.appendTo=e.appendTo(t)),"function"==typeof r.content&&(r.content=e.content(t)),r},Vt=function(t,e,r){t[e+"EventListener"]("transitionend",r)},qt=function(r,n){var o;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){return r.apply(t,e)},n)}},Gt=function(t,e){for(var r in t||{})if(!(r in e))throw Error("[tippy]: `"+r+"` is not a valid option")},e=p?navigator:{},Kt=p?window:{},Jt=/MSIE |Trident\//.test(e.userAgent),Qt=/iPhone|iPad|iPod/.test(e.platform)&&!Kt.MSStream,Zt="ontouchstart"in Kt,Z=!1,$t=function(){Z||(Z=!0,Qt&&document.body.classList.add("tippy-iOS"),window.performance&&document.addEventListener("mousemove",Ct))},te=0,ee=function(t){t=t.target;if(!(t instanceof Element))return n();var e=J(t,V.POPPER);if(!(e&&e._tippy&&e._tippy.props.interactive)){e=St(t,function(t){return t._tippy&&t._tippy.reference===t});if(e){t=e._tippy,e=-1<t.props.trigger.indexOf("click");if(Z||e)return n(t);if(!0!==t.props.hideOnClick||e)return;t.clearDelayTimeouts()}n()}},re=function(){var t=document.activeElement;t&&t.blur&&t._tippy&&t.blur()},ne=function(){q(document.querySelectorAll(V.POPPER)).forEach(function(t){t=t._tippy;t.props.livePlacement||t.popperInstance.scheduleUpdate()})},oe=1,ie=!1,ae=!1;return r.version="3.0.6",r.defaults=j,r.one=function(t,e){return r(t,e,!0).instances[0]},r.setDefaults=function(t){j=_({},j,t),r.defaults=j},r.disableAnimations=function(){r.setDefaults({duration:0,updateDuration:0,animateFill:!1})},r.hideAllPoppers=n,r.useCapture=function(){ae=!0},p&&setTimeout(function(){q(document.querySelectorAll("[data-tippy]")).forEach(function(t){var e=t.getAttribute("data-tippy");e&&r(t,{content:e})})}),dt&&((e=document.createElement("style")).type="text/css",e.textContent='.tippy-iOS{cursor:pointer!important}.tippy-notransition{transition:none!important}.tippy-popper{-webkit-perspective:700px;perspective:700px;z-index:9999;outline:0;transition-timing-function:cubic-bezier(.165,.84,.44,1);pointer-events:none;line-height:1.4}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-8px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 6px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%);opacity:1}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) rotateX(0);transform:translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(60deg);transform:translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-8px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 6px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%);opacity:1}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) rotateX(0);transform:translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(-60deg);transform:translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-16px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) rotateY(0);transform:translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(-60deg);transform:translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-16px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) rotateY(0);transform:translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(60deg);transform:translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:4px;font-size:.9rem;padding:.3rem .6rem;max-width:350px;text-align:center;will-change:transform;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#333}.tippy-tooltip[data-size=small]{padding:.2rem .4rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.4rem .8rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.53,2,.36,.85)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:24px;height:8px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;will-change:transform;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}@media (max-width:360px){.tippy-popper{max-width:96%;max-width:calc(100% - 20px)}}',document.head.insertBefore(e,document.head.firstChild)),r});
/**
 * Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}(function(){function c(e,t){var n=typeof e[t];return n==N||!(n!=v||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=v||!e[t])}function e(e,t){return typeof e[t]!=E}function n(o){return function(e,t){for(var n=t.length;n--;)if(!o(e,t[n]))return!1;return!0}}function d(e){return e&&w(e,k)&&O(e,M)}function f(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function u(e){typeof console!=E&&c(console,"log")&&console.log(e)}function o(e,t){(D&&t?alert:u)(e)}function l(e){x.initialized=!0,x.supported=!1,o("Rangy is not supported in this environment. Reason: "+e,x.config.alertOnFail)}function h(e){return e.message||e.description||String(e)}function r(){if(D&&!x.initialized){var e,t,n,o=!1,r=!1,i=(c(document,"createRange")&&(e=document.createRange(),w(e,y))&&O(e,S)&&(o=!0),f(document));if(i&&"body"==i.nodeName.toLowerCase())if(i&&c(i,"createTextRange")&&d(e=i.createTextRange())&&(r=!0),o||r){for(n in x.initialized=!0,x.features={implementsDomRange:o,implementsTextRange:r},_)(t=_[n])instanceof g&&t.init(t,x);for(var a=0,s=I.length;a<s;++a)try{I[a](x)}catch(e){u("Rangy init listener threw an exception. Continuing. Detail: "+h(e))}}else l("Neither Range nor TextRange are available");else l("No body element found")}}function i(e,t,n){n&&(e+=" in module "+n.name),x.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function a(e,t,n,o){e[t]=function(){return i(t,n,o),e[n].apply(e,A.toArray(arguments))}}function g(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function s(t,e,n){e=new g(t,e,function(e){if(!e.initialized){e.initialized=!0;try{n(x,e),e.supported=!0}catch(e){u("Module '"+t+"' failed to load: "+h(e)),e.stack&&u(e.stack)}}});return _[t]=e}function p(){}var m,R,C,v="object",N="function",E="undefined",S=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],y=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],M=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],k=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],w=n(c),T=n(t),O=n(e),_={},D=typeof window!=E&&typeof document!=E,A={isHostMethod:c,isHostObject:t,isHostProperty:e,areHostMethods:w,areHostObjects:T,areHostProperties:O,isTextRange:d,getBody:f,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,o=e.length;n<o;++n)t(e[n],n)}},x={version:"1.3.0",initialized:!1,isBrowser:D,supported:!0,util:A,features:{},modules:_,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==E||rangyAutoInitialize}};if(x.fail=l,x.warn=function(e){o("Rangy warning: "+e,x.config.alertOnWarn)},!{}.hasOwnProperty?l("hasOwnProperty not supported"):(A.extend=m=function(e,t,n){var o,r,i;for(i in t)t.hasOwnProperty(i)&&(o=e[i],r=t[i],n&&null!==o&&"object"==typeof o&&null!==r&&"object"==typeof r&&m(o,r,!0),e[i]=r);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},A.createOptions=function(e,t){var n={};return m(n,t),e&&m(n,e),n}),D||l("Rangy can only run in a browser"),D){var T=document.createElement("div"),P=(T.appendChild(document.createElement("span")),[].slice);try{1==P.call(T.childNodes,0)[0].nodeType&&(R=function(e){return P.call(e,0)})}catch(e){}}A.toArray=R=R||function(e){for(var t=[],n=0,o=e.length;n<o;++n)t[n]=e[n];return t},D&&(c(document,"addEventListener")?C=function(e,t,n){e.addEventListener(t,n,!1)}:c(document,"attachEvent")?C=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),A.addListener=C);function b(){H||(H=!0,!x.initialized&&x.config.autoInitialize&&r())}var I=[],B=(A.deprecationNotice=i,A.createAliasForDeprecatedMethod=a,x.init=r,x.addInitListener=function(e){x.initialized?e(x):I.push(e)},[]),H=(x.addShimListener=function(e){B.push(e)},D&&(x.shim=x.createMissingNativeApi=function(e){e=e||window,r();for(var t=0,n=B.length;t<n;++t)B[t](e)},a(x,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var e,t,n=this.dependencies||[],o=0,r=n.length;o<r;++o){if(t=n[o],!((e=_[t])&&e instanceof g))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){x.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){x.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},x.createModule=function(e){var t,n=2==arguments.length?(t=arguments[1],[]):(t=arguments[2],arguments[1]),n=s(e,n,t);x.initialized&&x.supported&&n.init()},x.createCoreModule=function(e,t,n){s(e,t,n)},x.RangePrototype=p,x.rangePrototype=new p,x.selectionPrototype=new function(){},x.createCoreModule("DomUtil",[],function(e,c){function d(e){for(var t=0;e=e.previousSibling;)++t;return t}function f(e,t){for(var n=[],o=e;o;o=o.parentNode)n.push(o);for(o=t;o;o=o.parentNode)if(R(n,o))return o;return null}function n(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function u(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function o(e){e=e.nodeType;return 3==e||4==e||8==e}function a(e,t){var n=t.nextSibling,t=t.parentNode;return n?t.insertBefore(e,n):t.appendChild(e),e}function r(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=E)return e.ownerDocument;if(typeof e.document!=E)return e.document;if(e.parentNode)return r(e.parentNode);throw c.createError("getDocument: no document found for node")}function i(e){e=r(e);if(typeof e.defaultView!=E)return e.defaultView;if(typeof e.parentWindow!=E)return e.parentWindow;throw c.createError("Cannot get a window object for node")}function s(e){if(typeof e.contentDocument!=E)return e.contentDocument;if(typeof e.contentWindow!=E)return e.contentWindow.document;throw c.createError("getIframeDocument: No Document object found for iframe element")}function l(e){return e&&S.isHostMethod(e,"setTimeout")&&S.isHostObject(e,"document")}function h(e){try{return e.parentNode,!1}catch(e){return!0}}function t(e){var t;return e?C&&h(e)?"[Broken node]":o(e)?'"'+e.data+'"':1==e.nodeType?(t=e.id?' id="'+e.id+'"':"","<"+e.nodeName+t+">[index:"+d(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"):e.nodeName:"[No node]"}function g(e){this.root=e,this._next=e}function p(e,t){this.node=e,this.offset=t}function m(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}function R(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}var C,v,N,E="undefined",S=e.util,y=S.getBody,w=(S.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||c.fail("document missing a Node creation method"),S.isHostMethod(document,"getElementsByTagName")||c.fail("document missing getElementsByTagName method"),document.createElement("div")),w=(S.areHostMethods(w,["insertBefore","appendChild","cloneNode"])||c.fail("Incomplete Element implementation"),S.isHostProperty(w,"innerHTML")||c.fail("Element is missing innerHTML property"),document.createTextNode("test"));S.areHostMethods(w,["splitText","deleteData","insertData","appendData","cloneNode"])||c.fail("Incomplete Text Node implementation");(w=document.createElement("b")).innerHTML="1",v=w.firstChild,w.innerHTML="<br />",C=h(v),e.features.crashyTextNodes=C,typeof window.getComputedStyle!=E?N=function(e,t){return i(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=E?N=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:c.fail("No means of obtaining computed style properties found"),g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},p.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+t(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},(m.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24}).toString=function(){return this.message},e.dom={arrayContains:R,isHtmlNamespace:function(e){return typeof e.namespaceURI==E||null===(e=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==e},parentElement:function(e){return 1==(e=e.parentNode).nodeType?e:null},getNodeIndex:d,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:f,isAncestorOf:n,isOrIsAncestorOf:function(e,t){return n(e,t,!0)},getClosestAncestorIn:u,isCharacterDataNode:o,isTextOrCommentNode:function(e){return!!e&&(3==(e=e.nodeType)||8==e)},insertAfter:a,splitDataNode:function(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),a(o,e),n)for(var r,i=0;r=n[i++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>d(e)&&++r.offset;return o},getDocument:r,getWindow:i,getIframeWindow:function(e){if(typeof e.contentWindow!=E)return e.contentWindow;if(typeof e.contentDocument!=E)return e.contentDocument.defaultView;throw c.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:s,getBody:y,isWindow:l,getContentDocument:function(e,t,n){var o;if(e?S.isHostProperty(e,"nodeType")?o=(1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?s:r)(e):l(e)&&(o=e.document):o=document,o)return o;throw t.createError(n+"(): Parameter must be a Window object or DOM node")},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,t,n,o){var r,i,a,s;if(e==n)return t===o?0:t<o?-1:1;if(r=u(n,e,!0))return t<=d(r)?-1:1;if(r=u(e,n,!0))return d(r)<o?-1:1;if(!(t=f(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((i=e===t?t:u(e,t,!0))===(a=n===t?t:u(n,t,!0)))throw c.createError("comparePoints got to case 4 and childA and childB are the same!");for(s=t.firstChild;s;){if(s===i)return-1;if(s===a)return 1;s=s.nextSibling}},isBrokenNode:h,inspectNode:t,getComputedStyleProperty:N,createTestElement:function(e,t,n){var o=y(e);return(e=e.createElement("div")).contentEditable=""+!!n,t&&(e.innerHTML=t),(n=o.firstChild)?o.insertBefore(e,n):o.appendChild(e),e},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,n=r(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n},createIterator:function(e){return new g(e)},DomPosition:p},e.DOMException=m}),x.createCoreModule("DomRange",["DomUtil"],function(i){function a(e,t){return 3!=e.nodeType&&(O(e,t.startContainer)||O(e,t.endContainer))}function s(e){return e.document||r(e.startContainer)}function c(e){return new G(e.parentNode,T(e))}function f(e){return new G(e.parentNode,T(e)+1)}function n(e,t,n){var o=11==e.nodeType?e.firstChild:e;return w(t)?n==t.length?E.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:D(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),o}function t(e,t,n){if(v(e),v(t),s(t)!=s(e))throw new y("WRONG_DOCUMENT_ERR");var o=_(e.startContainer,e.startOffset,t.endContainer,t.endOffset),e=_(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&0<=e:o<0&&0<e}function d(e,t,n){var o,r,i,a;for(n=n||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i))return n.stop=!0;if(d(a=e.getSubtreeIterator(),t,n),a.detach(),n.stop)return}else for(o=E.createIterator(i);r=o.next();)if(!1===t(r))return n.stop=!0}function u(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(u(t=e.getSubtreeIterator()),t.detach()):e.remove()}function l(e){for(var t,n,o=s(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(l(n)),n.detach()):e.remove(),10==t.nodeType)throw new y("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function M(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+E.inspectNode(e.startContainer)+":"+e.startOffset+", "+E.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function h(e,t){this.range=e,this.clonePartiallySelectedTextNodes=t,e.collapsed||(this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset,t=e.commonAncestorContainer,this.sc===this.ec&&w(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==t||w(this.sc)?A(this.sc,t,!0):this.sc.childNodes[this.so],this._last=this.ec!==t||w(this.ec)?A(this.ec,t,!0):this.ec.childNodes[this.eo-1]))}function e(r){return function(e,t){for(var n,o=t?e:e.parentNode;o;){if(n=o.nodeType,X(r,n))return o;o=o.parentNode}return null}}function g(e,t){if(oe(e,t))throw new y("INVALID_NODE_TYPE_ERR")}function p(e,t){if(!X(t,e.nodeType))throw new y("INVALID_NODE_TYPE_ERR")}function m(e,t){if(t<0||t>(w(e)?e:e.childNodes).length)throw new y("INDEX_SIZE_ERR")}function R(e,t){if(te(e,!0)!==te(t,!0))throw new y("WRONG_DOCUMENT_ERR")}function C(e){if(ne(e,!0))throw new y("NO_MODIFICATION_ALLOWED_ERR")}function k(e,t){if(!e)throw new y(t)}function L(e,t){return t<=(w(e)?e:e.childNodes).length}function W(e){return!!e.startContainer&&!!e.endContainer&&!(Z&&(E.isBrokenNode(e.startContainer)||E.isBrokenNode(e.endContainer)))&&P(e.startContainer)==P(e.endContainer)&&L(e.startContainer,e.startOffset)&&L(e.endContainer,e.endOffset)}function v(e){if(!W(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function F(e,t){v(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset,a=n===r;w(r)&&0<i&&i<r.length&&D(r,i,t),w(n)&&0<o&&o<n.length&&(n=D(n,o,t),a?(i-=o,r=n):r==n.parentNode&&i>=T(n)&&i++,o=0),e.setStartAndEnd(n,o,r,i)}function z(e){v(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function j(e){e.START_TO_START=B,e.START_TO_END=ie,e.END_TO_END=ae,e.END_TO_START=se,e.NODE_BEFORE=ce,e.NODE_AFTER=de,e.NODE_BEFORE_AND_AFTER=fe,e.NODE_INSIDE=H}function U(e){j(e),j(e.prototype)}function V(r,i){return function(){v(this);var e=this.startContainer,t=this.startOffset,n=this.commonAncestorContainer,o=new h(this,!0),n=(e!==n&&(e=(n=f(A(e,n,!0))).node,t=n.offset),d(o,C),o.reset(),r(o));return o.detach(),i(this,e,t,e,t),n}}function q(e,d){function t(t,n){return function(e){p(e,$),p(P(e),J);e=(t?c:f)(e);(n?o:r)(this,e.node,e.offset)}}function o(e,t,n){var o=e.endContainer,r=e.endOffset;t===e.startContainer&&n===e.startOffset||(P(t)==P(o)&&1!=_(t,n,o,r)||(o=t,r=n),d(e,t,n,o,r))}function r(e,t,n){var o=e.startContainer,r=e.startOffset;t===e.endContainer&&n===e.endOffset||(P(t)==P(o)&&-1!=_(t,n,o,r)||(o=t,r=n),d(e,o,r,t,n))}function n(){}n.prototype=i.rangePrototype,e.prototype=new n,S.extend(e.prototype,{setStart:function(e,t){g(e,!0),m(e,t),o(this,e,t)},setEnd:function(e,t){g(e,!0),m(e,t),r(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],o=t,r=n;switch(e.length){case 3:r=e[2];break;case 4:o=e[2],r=e[3]}d(this,t,n,o,r)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:t(!0,!0),setStartAfter:t(!1,!0),setEndBefore:t(!0,!1),setEndAfter:t(!1,!1),collapse:function(e){v(this),e?d(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):d(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){g(e,!0),d(this,e,0,e,x(e))},selectNode:function(e){g(e,!1),p(e,$);var t=c(e),e=f(e);d(this,t.node,t.offset,e.node,e.offset)},extractContents:V(l,d),deleteContents:V(u,d),canSurroundContents:function(){v(this),C(this.startContainer),C(this.endContainer);var e=new h(this,!0),t=e._first&&a(e._first,this)||e._last&&a(e._last,this);return e.detach(),!t},splitBoundaries:function(){F(this)},splitBoundariesPreservingPositions:function(e){F(this,e)},normalizeBoundaries:function(){v(this);function e(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(s=(a=e).length,e.appendData(t.data),b(t))}function t(e){var t,n=e.previousSibling;n&&n.nodeType==e.nodeType&&(t=(r=e).length,i=n.length,e.insertData(0,n.data),b(n),r==a?(s+=i,a=r):a==e.parentNode&&(n=T(e),s==n?(a=e,s=t):n<s&&s--))}var n,o,r=this.startContainer,i=this.startOffset,a=this.endContainer,s=this.endOffset,c=!0;w(a)?s==a.length?e(a):0==s&&(n=a.previousSibling)&&n.nodeType==a.nodeType&&(s=n.length,r==a&&(c=!1),n.appendData(a.data),b(a),a=n):(0<s&&(o=a.childNodes[s-1])&&w(o)&&e(o),c=!this.collapsed),c?w(r)?0==i?t(r):i==r.length&&(n=r.nextSibling)&&n.nodeType==r.nodeType&&(a==n&&(s+=(a=r).length),r.appendData(n.data),b(n)):i<r.childNodes.length&&(o=r.childNodes[i])&&w(o)&&t(o):(r=a,i=s),d(this,r,i,a,s)},collapseToPoint:function(e,t){g(e,!0),m(e,t),this.setStartAndEnd(e,t)}}),U(e)}function Y(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:E.getCommonAncestor(e.startContainer,e.endContainer)}function Q(e,t,n,o,r){e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=r,e.document=E.getDocument(t),Y(e)}function N(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,Y(this)}var E=i.dom,S=i.util,G=E.DomPosition,y=i.DOMException,w=E.isCharacterDataNode,T=E.getNodeIndex,O=E.isOrIsAncestorOf,r=E.getDocument,_=E.comparePoints,D=E.splitDataNode,A=E.getClosestAncestorIn,x=E.getNodeLength,X=E.arrayContains,P=E.getRootContainer,Z=i.features.crashyTextNodes,b=E.removeNode,$=(h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,w(e))&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc)&&(e=e.cloneNode(!0)).deleteData(0,this.so),e},remove:function(){var e,t,n=this._current;!w(n)||n!==this.sc&&n!==this.ec?n.parentNode&&b(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return a(this._current,this.range)},getSubtreeIterator:function(){var e,t,n,o,r,i;return this.isSingleCharacterDataNode?(e=this.range.cloneRange()).collapse(!1):(e=new N(s(this.range)),t=this._current,o=0,i=x(r=n=t),O(t,this.sc)&&(n=this.sc,o=this.so),O(t,this.ec)&&(r=this.ec,i=this.eo),Q(e,n,o,r,i)),new h(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},[1,3,4,5,7,8,10]),J=[2,9,11],K=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],te=e([9,11]),ne=e([5,6,10,12]),oe=e([6,10,12]),re=document.createElement("style"),o=!1;try{re.innerHTML="<b>x</b>",o=3==re.firstChild.nodeType}catch(e){}i.features.htmlParsingConforms=o;var I=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],B=0,ie=1,ae=2,se=3,ce=0,de=1,fe=2,H=3;S.extend(i.rangePrototype,{compareBoundaryPoints:function(e,t){v(this),R(this.startContainer,t.startContainer);var n=e==se||e==B?"start":"end",e=e==ie||e==B?"start":"end",o=this[n+"Container"],n=this[n+"Offset"],r=t[e+"Container"],t=t[e+"Offset"];return _(o,n,r,t)},insertNode:function(e){if(v(this),p(e,K),C(this.startContainer),O(e,this.startContainer))throw new y("HIERARCHY_REQUEST_ERR");e=n(e,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){var e,t;return v(this),this.collapsed?s(this).createDocumentFragment():this.startContainer===this.endContainer&&w(this.startContainer)?((t=this.startContainer.cloneNode(!0)).data=t.data.slice(this.startOffset,this.endOffset),(e=s(this).createDocumentFragment()).appendChild(t),e):(t=function e(t){for(var n,o,r=s(t.range).createDocumentFragment();n=t.next();){if(o=t.isPartiallySelectedSubtree(),n=n.cloneNode(!o),o&&(o=t.getSubtreeIterator(),n.appendChild(e(o)),o.detach()),10==n.nodeType)throw new y("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}(e=new h(this,!0)),e.detach(),t)},canSurroundContents:function(){v(this),C(this.startContainer),C(this.endContainer);var e=new h(this,!0),t=e._first&&a(e._first,this)||e._last&&a(e._last,this);return e.detach(),!t},surroundContents:function(e){if(p(e,ee),!this.canSurroundContents())throw new y("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);n(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){v(this);for(var e,t=new N(s(this)),n=I.length;n--;)t[e=I[n]]=this[e];return t},toString:function(){v(this);var t,e=this.startContainer;return e===this.endContainer&&w(e)?3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"":(t=[],d(e=new h(this,!0),function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),e.detach(),t.join(""))},compareNode:function(e){v(this);var t,n=e.parentNode,e=T(e);if(n)return t=this.comparePoint(n,e),n=this.comparePoint(n,e+1),t<0?0<n?fe:ce:0<n?de:H;throw new y("NOT_FOUND_ERR")},comparePoint:function(e,t){return v(this),k(e,"HIERARCHY_REQUEST_ERR"),R(e,this.startContainer),_(e,t,this.startContainer,this.startOffset)<0?-1:0<_(e,t,this.endContainer,this.endOffset)?1:0},createContextualFragment:o?function(e){var t,n=this.startContainer,o=r(n);if(n)return t=null,1==n.nodeType?t=n:w(n)&&(t=E.parentElement(n)),(t=null===t||"HTML"==t.nodeName&&E.isHtmlNamespace(r(t).documentElement)&&E.isHtmlNamespace(t)?o.createElement("body"):t.cloneNode(!1)).innerHTML=e,E.fragmentFromNodeChildren(t);throw new y("INVALID_STATE_ERR")}:function(e){var t=s(this).createElement("body");return t.innerHTML=e,E.fragmentFromNodeChildren(t)},toHtml:function(){return z(this)},intersectsNode:function(e,t){var n,o;return v(this),P(e)==P(this.startContainer)&&(o=e.parentNode,e=T(e),!o||(n=_(o,e,this.endContainer,this.endOffset),o=_(o,e+1,this.startContainer,this.startOffset),t?n<=0&&0<=o:n<0&&0<o))},isPointInRange:function(e,t){return v(this),k(e,"HIERARCHY_REQUEST_ERR"),R(e,this.startContainer),0<=_(e,t,this.startContainer,this.startOffset)&&_(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return t(this,e,!1)},intersectsOrTouchesRange:function(e){return t(this,e,!0)},intersection:function(e){var t,n,o;return this.intersectsRange(e)?(t=_(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=_(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange(),-1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o):null},union:function(e){var t;if(this.intersectsOrTouchesRange(e))return t=this.cloneRange(),-1==_(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==_(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t;throw new y("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==H},containsNodeContents:function(e){return 0<=this.comparePoint(e,0)&&this.comparePoint(e,x(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange(),n=(t.selectNode(e),t.getNodes([3]));return 0<n.length?(t.setStart(n[0],0),n=n.pop(),t.setEnd(n,n.length),this.containsRange(t)):this.containsNodeContents(e)},getNodes:function(e,t){return v(this),n=this,o=t,i=!(!(t=e)||!t.length),a=!!o,i&&(r=new RegExp("^("+t.join("|")+")$")),d(new h(n,!(s=[])),function(e){var t;i&&!r.test(e.nodeType)||a&&!o(e)||e==(t=n.startContainer)&&w(t)&&n.startOffset==t.length||e==(t=n.endContainer)&&w(t)&&0==n.endOffset||s.push(e)}),s;var n,o,r,i,a,s},getDocument:function(){return s(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(e){var t=s(this),n=i.createRange(t),t=(e=e||E.getBody(t),n.selectNodeContents(e),this.intersection(n)),o=0,r=0;return t&&(n.setEnd(t.startContainer,t.startOffset),r=(o=n.toString().length)+t.toString().length),{start:o,end:r,containerNode:e}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var o,r,i,a,s=[t],c=!1,d=!1;!d&&(o=s.pop());)if(3==o.nodeType)r=n+o.length,!c&&e.start>=n&&e.start<=r&&(this.setStart(o,e.start-n),c=!0),c&&e.end>=n&&e.end<=r&&(this.setEnd(o,e.end-n),d=!0),n=r;else for(i=(a=o.childNodes).length;i--;)s.push(a[i])},getName:function(){return"DomRange"},equals:function(e){return N.rangesEqual(this,e)},isValid:function(){return W(this)},inspect:function(){return M(this)},detach:function(){}}),q(N,Q),S.extend(N,{rangeProperties:I,RangeIterator:h,copyComparisonConstants:U,createPrototypeRange:q,inspect:M,toHtml:z,getRangeDocument:s,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),i.DomRange=N}),x.createCoreModule("WrappedRange",["DomRange"],function(n,t){var e,i,o,r,R=n.dom,a=n.util,C=R.DomPosition,s=n.DomRange,c=R.getBody,d=R.getContentDocument,v=R.isCharacterDataNode;if(n.features.implementsDomRange){function f(e){for(var t,n=l.length;n--;)e[t=l[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}var u,l=s.rangeProperties,h=(s.createPrototypeRange(e=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,f(this)},function(e,t,n,o,r){var i=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==o||e.endOffset!=r,s=!e.equals(e.nativeRange);(i||a||s)&&(e.setEnd(o,r),e.setStart(t,n))}),(u=e.prototype).selectNode=function(e){this.nativeRange.selectNode(e),f(this)},u.cloneContents=function(){return this.nativeRange.cloneContents()},u.surroundContents=function(e){this.nativeRange.surroundContents(e),f(this)},u.collapse=function(e){this.nativeRange.collapse(e),f(this)},u.cloneRange=function(){return new e(this.nativeRange.cloneRange())},u.refresh=function(){f(this)},u.toString=function(){return this.nativeRange.toString()},document.createTextNode("test")),g=(c(document).appendChild(h),document.createRange());g.setStart(h,0),g.setEnd(h,0);try{g.setStart(h,1),u.setStart=function(e,t){this.nativeRange.setStart(e,t),f(this)},u.setEnd=function(e,t){this.nativeRange.setEnd(e,t),f(this)},p=function(t){return function(e){this.nativeRange[t](e),f(this)}}}catch(e){u.setStart=function(t,n){try{this.nativeRange.setStart(t,n)}catch(e){this.nativeRange.setEnd(t,n),this.nativeRange.setStart(t,n)}f(this)},u.setEnd=function(t,n){try{this.nativeRange.setEnd(t,n)}catch(e){this.nativeRange.setStart(t,n),this.nativeRange.setEnd(t,n)}f(this)},p=function(n,o){return function(t){try{this.nativeRange[n](t)}catch(e){this.nativeRange[o](t),this.nativeRange[n](t)}f(this)}}}u.setStartBefore=p("setStartBefore","setEndBefore"),u.setStartAfter=p("setStartAfter","setEndAfter"),u.setEndBefore=p("setEndBefore","setStartBefore"),u.setEndAfter=p("setEndAfter","setStartAfter"),u.selectNodeContents=function(e){this.setStartAndEnd(e,0,R.getNodeLength(e))},g.selectNodeContents(h),g.setEnd(h,3);var p=document.createRange();p.selectNodeContents(h),p.setEnd(h,4),p.setStart(h,2),u.compareBoundaryPoints=-1==g.compareBoundaryPoints(g.START_TO_END,p)&&1==g.compareBoundaryPoints(g.END_TO_START,p)?function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};(p=document.createElement("div")).innerHTML="123";var m=p.firstChild,N=c(document);N.appendChild(p),g.setStart(m,1),g.setEnd(m,2),g.deleteContents(),"13"==m.data&&(u.deleteContents=function(){this.nativeRange.deleteContents(),f(this)},u.extractContents=function(){var e=this.nativeRange.extractContents();return f(this),e}),N.removeChild(p),N=null,a.isHostMethod(g,"createContextualFragment")&&(u.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(h),u.getName=function(){return"WrappedRange"},n.WrappedRange=e,n.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}n.features.implementsTextRange&&(i=function(e,t,n,o,r){var i=e.duplicate(),a=(i.collapse(n),i.parentElement());if(!(a=R.isOrIsAncestorOf(t,a)?a:t).canHaveHTML)return{boundaryPosition:t=new C(a.parentNode,R.getNodeIndex(a)),nodeInfo:{nodeIndex:t.offset,containerElement:t.node}};var s=R.getDocument(a).createElement("span");s.parentNode&&R.removeNode(s);for(var c,d,f=n?"StartToStart":"StartToEnd",u=r&&r.containerElement==a?r.nodeIndex:0,l=a.childNodes.length,h=l,g=h;g==l?a.appendChild(s):a.insertBefore(s,a.childNodes[g]),i.moveToElementText(s),0!=(c=i.compareEndPoints(f,e))&&u!=h;){if(-1==c){if(h==u+1)break;u=g}else h=h==u+1?u:g;g=Math.floor((u+h)/2),a.removeChild(s)}if(t=s.nextSibling,-1==c&&t&&v(t)){if(i.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(t.data))for(var p=i.duplicate(),r=p.text.replace(/\r\n/g,"\r").length,m=p.moveStart("character",r);-1==(c=p.compareEndPoints("StartToEnd",p));)m++,p.moveStart("character",1);else m=i.text.length;d=new C(t,m)}else r=(o||!n)&&s.previousSibling,d=(t=(o||n)&&s.nextSibling)&&v(t)?new C(t,0):r&&v(r)?new C(r,r.data.length):new C(a,R.getNodeIndex(s));return R.removeNode(s),{boundaryPosition:d,nodeInfo:{nodeIndex:g,containerElement:a}}},o=function(e,t){var n,o=e.offset,r=R.getDocument(e.node),i=c(r).createTextRange(),a=v(e.node),s=a?(n=e.node).parentNode:(n=o<(s=e.node.childNodes).length?s[o]:null,e.node),e=r.createElement("span");return e.innerHTML="&#feff;",n?s.insertBefore(e,n):s.appendChild(e),i.moveToElementText(e),i.collapse(!t),s.removeChild(e),a&&i[t?"moveStart":"moveEnd"]("character",o),i},((m=function(e){this.textRange=e,this.refresh()}).prototype=new s(document)).refresh=function(){n=this.textRange,t=n.parentElement(),(r=n.duplicate()).collapse(!0),o=r.parentElement(),(r=n.duplicate()).collapse(!1),n=r.parentElement();var e,t,n,o=(r=o==n?o:R.getCommonAncestor(o,n))==t?r:R.getCommonAncestor(t,r),r=0==(n=this.textRange).compareEndPoints("StartToEnd",n)?e=i(this.textRange,o,!0,!0).boundaryPosition:(e=(t=i(this.textRange,o,!0,!1)).boundaryPosition,i(this.textRange,o,!1,!1,t.nodeInfo).boundaryPosition);this.setStart(e.node,e.offset),this.setEnd(r.node,r.offset)},m.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(m),m.rangeToTextRange=r=function(e){var t,n;return e.collapsed?o(new C(e.startContainer,e.startOffset),!0):(t=o(new C(e.startContainer,e.startOffset),!0),n=o(new C(e.endContainer,e.endOffset),!1),(e=c(s.getRangeDocument(e)).createTextRange()).setEndPoint("StartToStart",t),e.setEndPoint("EndToEnd",n),e)},m.prototype.toTextRange=function(){return r(this)},n.WrappedTextRange=m,n.features.implementsDomRange&&!n.config.preferTextRange||(void 0===(p=Function("return this;")()).Range&&(p.Range=m),n.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),c(e).createTextRange()},n.WrappedRange=m)),n.createRange=function(e){return e=d(e,t,"createRange"),new n.WrappedRange(n.createNativeRange(e))},n.createRangyRange=function(e){return e=d(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(n,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(n,"createIframeRangyRange","createRangyRange"),n.addShimListener(function(e){var t=e.document;void 0===t.createRange&&(t.createRange=function(){return n.createRange(t)}),t=null})}),x.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(i,s){function o(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,t){return e?g.isWindow(e)?e:e instanceof u?e.win:(e=g.getContentDocument(e,s,t),g.getWindow(e)):window}function M(e){return r(e,"getDocSelection").document.selection}function k(e){var t=!1;return t=e.anchorNode?1==g.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset):t}function a(e,t,n){var o=n?"end":"start",n=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[n+"Container"],e.focusOffset=t[n+"Offset"]}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function d(e){var t;return e instanceof p?((t=i.createNativeRange(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof Z?t=e.nativeRange:m.implementsDomRange&&e instanceof g.getWindow(e.startContainer).Range&&(t=e),t}function L(e){var t=e.getNodes();if(function(e){if(e.length&&1==e[0].nodeType){for(var t=1,n=e.length;t<n;++t)if(!g.isAncestorOf(e[0],e[t]))return;return 1}}(t))return t[0];throw s.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element")}function W(e){return e&&void 0!==e.text}function F(e,t){t=new Z(t);e._ranges=[t],a(e,t,!1),e.rangeCount=1,e.isCollapsed=t.collapsed}function f(e){if(e._ranges.length=0,"None"==e.docSelection.type)c(e);else{var t=e.docSelection.createRange();if(W(t))F(e,t);else{e.rangeCount=t.length;for(var n,o=C(t.item(0)),r=0;r<e.rangeCount;++r)(n=i.createRange(o)).selectNode(t.item(r)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,a(e,e._ranges[e.rangeCount-1],!1)}}}function z(e,t){for(var n=e.docSelection.createRange(),t=L(t),o=C(n.item(0)),r=v(o).createControlRange(),i=0,a=n.length;i<a;++i)r.add(n.item(i));try{r.add(t)}catch(e){throw s.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),f(e)}function u(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function j(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function U(e,t){for(var n,o,r=B.length;r--;)if(o=(n=B[r]).selection,"deleteAll"==t)j(o);else if(n.win==e)return"delete"==t?(B.splice(r,1),!0):o;return"deleteAll"==t&&(B.length=0),null}function V(e,t){for(var n,o=C(t[0].startContainer),r=v(o).createControlRange(),i=0,a=t.length;i<a;++i){n=L(t[i]);try{r.add(n)}catch(e){throw s.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),f(e)}function q(e,t){if(e.win.document!=C(t))throw new n("WRONG_DOCUMENT_ERR")}function Y(o){return function(e,t){var n;this.rangeCount?(n=this.getRangeAt(0))["set"+(o?"Start":"End")](e,t):(n=i.createRange(this.win.document)).setStartAndEnd(e,t),this.setSingleRange(n,this.isBackward())}}function Q(e){var t=[],n=new $(e.anchorNode,e.anchorOffset),o=new $(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var i=0,a=e.rangeCount;i<a;++i)t[i]=p.inspect(e.getRangeAt(i));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}i.config.checkSelectionRanges=!0;var l,h,G="boolean",X="number",g=i.dom,e=i.util,t=e.isHostMethod,p=i.DomRange,Z=i.WrappedRange,n=i.DOMException,$=g.DomPosition,m=i.features,R="Control",C=g.getDocument,v=g.getBody,J=p.rangesEqual,N=t(window,"getSelection"),E=e.isHostObject(document,"selection"),S=(m.implementsWinGetSelection=N,(m.implementsDocSelection=E)&&(!N||i.config.preferTextRange));if(S)l=M,i.isSelectionValid=function(e){var e=r(e,"isSelectionValid").document,t=e.selection;return"None"!=t.type||C(t.createRange().parentElement())==e};else{if(!N)return s.fail("Neither document.selection or window.getSelection() detected."),!1;l=function(e){return r(e,"getWinSelection").getSelection()},i.isSelectionValid=function(){return!0}}N=(i.getNativeSelection=l)();if(!N)return s.fail("Native selection was null (possibly issue 138?)"),!1;var K=i.createNativeRange(document),ee=v(document),y=e.areHostProperties(N,["anchorNode","focusNode","anchorOffset","focusOffset"]),w=(m.selectionHasAnchorAndFocus=y,t(N,"extend")),te=(m.selectionHasExtend=w,typeof N.rangeCount==X),ne=(m.selectionHasRangeCount=te,!1),oe=!0,re=w?function(e,t){var n=p.getRangeDocument(t),n=i.createRange(n);n.collapseToPoint(t.endContainer,t.endOffset),e.addRange(d(n)),e.extend(t.startContainer,t.startOffset)}:null;if(e.areHostMethods(N,["addRange","getRangeAt","removeAllRanges"])&&typeof N.rangeCount==X&&m.implementsDomRange){var T=window.getSelection();if(T){for(var ie=T.rangeCount,O=1<ie,_=[],ae=k(T),D=0;D<ie;++D)_[D]=T.getRangeAt(D);var se=g.createTestElement(document,"",!1),A=se.appendChild(document.createTextNode("")),x=document.createRange();for(x.setStart(A,1),x.collapse(!0),T.removeAllRanges(),T.addRange(x),oe=1==T.rangeCount,T.removeAllRanges(),O||(O=window.navigator.appVersion.match(/Chrome\/(.*?) /),ne=!(O&&36<=parseInt(O[1]))&&(O=x.cloneRange(),x.setStart(A,0),O.setEnd(A,3),O.setStart(A,2),T.addRange(x),T.addRange(O),2==T.rangeCount)),g.removeNode(se),T.removeAllRanges(),D=0;D<ie;++D)0==D&&ae?re?re(T,_[D]):(i.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),T.addRange(_[D])):T.addRange(_[D])}}m.selectionSupportsMultipleRanges=ne,m.collapsedNonEditableSelectionsSupported=oe;function ce(e){var t,n,o;return e&&e instanceof u?(e.refresh(),e):(t=U(e=r(e,"getNativeSelection")),n=l(e),o=E?M(e):null,t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new u(n,o,e),B.push({win:e,selection:t})),t)}var P,b,I=!1,B=(ee&&t(ee,"createControlRange")&&(A=ee.createControlRange(),e.areHostProperties(A,["item","add"]))&&(I=!0),m.implementsControlRange=I,h=y?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},t(N,"getRangeAt")?P=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:y&&(P=function(e){var t=C(e.anchorNode),t=i.createRange(t);return t.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),t.collapsed!==this.isCollapsed&&t.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),t}),u.prototype=i.selectionPrototype,[]),x=(i.getSelection=ce,e.createAliasForDeprecatedMethod(i,"getIframeSelection","getSelection"),u.prototype);if(!S&&y&&e.areHostMethods(N,["removeAllRanges","addRange"])){x.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};function de(e,t){re(e.nativeSelection,t),e.refresh()}x.addRange=te?function(e,t){if(I&&E&&this.docSelection.type==R)z(this,e);else if(o(t)&&w)de(this,e);else{var t=ne?this.rangeCount:(this.removeAllRanges(),0),n=d(e).cloneRange();try{this.nativeSelection.addRange(n)}catch(e){}this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==t+1?(i.config.checkSelectionRanges&&(n=P(this.nativeSelection,this.rangeCount-1))&&!J(n,e)&&(e=new Z(n)),this._ranges[this.rangeCount-1]=e,a(this,e,H(this.nativeSelection)),this.isCollapsed=h(this)):this.refresh()}}:function(e,t){o(t)&&w?de(this,e):(this.nativeSelection.addRange(d(e)),this.refresh())},x.setRanges=function(e){if(I&&E&&1<e.length)V(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(t(N,"empty")&&t(K,"select")&&I&&S))return s.fail("No means of selecting a Range or TextRange was found"),!1;x.removeAllRanges=function(){try{var e,t;this.docSelection.empty(),"None"!=this.docSelection.type&&(this.anchorNode?e=C(this.anchorNode):this.docSelection.type==R&&(t=this.docSelection.createRange()).length&&(e=C(t.item(0))),e)&&(v(e).createTextRange().select(),this.docSelection.empty())}catch(e){}c(this)},x.addRange=function(e){this.docSelection.type==R?z(this,e):(i.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,a(this,e,!1))},x.setRanges=function(e){this.removeAllRanges();var t=e.length;1<t?V(this,e):t&&this.addRange(e[0])}}if(x.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new n("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},S)b=function(e){var t;i.isSelectionValid(e.win)?t=e.docSelection.createRange():(t=v(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==R?f(e):W(t)?F(e,t):c(e)};else if(t(N,"getRangeAt")&&typeof N.rangeCount==X)b=function(e){if(I&&E&&e.docSelection.type==R)f(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new i.WrappedRange(e.nativeSelection.getRangeAt(t));a(e,e._ranges[e.rangeCount-1],H(e.nativeSelection)),e.isCollapsed=h(e)}else c(e)};else{if(!y||typeof N.isCollapsed!=G||typeof K.collapsed!=G||!m.implementsDomRange)return s.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;b=function(e){var t,n=e.nativeSelection;n.anchorNode?(n=P(n,0),e._ranges=[n],e.rangeCount=1,t=(n=e).nativeSelection,n.anchorNode=t.anchorNode,n.anchorOffset=t.anchorOffset,n.focusNode=t.focusNode,n.focusOffset=t.focusOffset,e.isCollapsed=h(e)):c(e)}}x.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(b(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;r--;)if(!J(t[r],this._ranges[r]))return!0;return!1}};function fe(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)J(t,n[o])||e.addRange(n[o]);e.rangeCount||c(e)}var H;x.removeRange=I&&E?function(e){if(this.docSelection.type==R){for(var t=this.docSelection.createRange(),n=L(e),o=C(t.item(0)),r=v(o).createControlRange(),i=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||i?r.add(t.item(a)):i=!0;r.select(),f(this)}else fe(this,e)}:function(e){fe(this,e)},!S&&y&&m.implementsDomRange?(H=k,x.isBackward=function(){return H(this)}):H=x.isBackward=function(){return!1},x.isBackwards=x.isBackward,x.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},x.collapse=function(e,t){q(this,e);var n=i.createRange(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},x.collapseToStart=function(){if(!this.rangeCount)throw new n("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},x.collapseToEnd=function(){if(!this.rangeCount)throw new n("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},x.selectAllChildren=function(e){q(this,e);var t=i.createRange(e);t.selectNodeContents(e),this.setSingleRange(t)},x.deleteFromDocument=function(){if(I&&E&&this.docSelection.type==R){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),g.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var o=0,r=n.length;o<r;++o)n[o].deleteContents();this.addRange(n[r-1])}}},x.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},x.getAllRanges=function(){var t=[];return this.eachRange(function(e){t.push(e)}),t},x.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},x.callMethodOnEachRange=function(t,n){var o=[];return this.eachRange(function(e){o.push(e[t].apply(e,n||[]))}),o},x.setStart=Y(!0),x.setEnd=Y(!1),i.rangePrototype.select=function(e){ce(this.getDocument()).setSingleRange(this,e)},x.changeEachRange=function(t){var n=[],e=this.isBackward();this.eachRange(function(e){t(e),n.push(e)}),this.removeAllRanges(),e&&1==n.length?this.addRange(n[0],"backward"):this.setRanges(n)},x.containsNode=function(t,n){return this.eachRange(function(e){return e.containsNode(t,n)},!0)||!1},x.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},x.moveToBookmark=function(e){for(var t,n,o=[],r=0;t=e.rangeBookmarks[r++];)(n=i.createRange(this.win)).moveToBookmark(t),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},x.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},x.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},x.toHtml=function(){var t=[];return this.eachRange(function(e){t.push(p.toHtml(e))}),t.join("")},m.implementsTextRange&&(x.getNativeTextRange=function(){if(e=this.docSelection){var e=e.createRange();if(W(e))return e;throw s.createError("getNativeTextRange: selection is a control selection")}if(0<this.rangeCount)return i.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw s.createError("getNativeTextRange: selection contains no range")}),x.getName=function(){return"WrappedSelection"},x.inspect=function(){return Q(this)},x.detach=function(){U(this.win,"delete"),j(this)},u.detachAll=function(){U(null,"deleteAll")},u.inspect=Q,u.isDirectionBackward=o,i.Selection=u,i.selectionPrototype=x,i.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return ce(e)}),e=null})}),!1);return D&&("complete"==document.readyState?b():(c(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",b,!1),C(window,"load",b))),x},this);
/**
 * Class Applier module for Rangy.
 * Adds, removes and toggles classes on Ranges and Selections
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(n,c){function p(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function f(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function o(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function r(e,t){return"object"==typeof e.classList?e.classList.contains(t):o("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function d(e,t){var n,s;"object"==typeof e.classList?e.classList.add(t):((s=(n="string"==typeof e.className)?e.className:e.getAttribute("class"))?o(s,t)||(s+=" "+t):s=t,n?e.className=s:e.setAttribute("class",s))}function t(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function h(e){return e&&e.split(/\s+/).sort().join(" ")}function s(e){return h(t(e))}function a(e,t){return s(e)==s(t)}function l(e,t){for(var n=t.split(/\s+/),s=0,i=n.length;s<i;++s)if(!r(e,f(n[s])))return!1;return!0}function m(e,l,u,t){-1==u&&(u=l.childNodes.length);var c=e.parentNode,p=w.getNodeIndex(e);L(t,function(e){var t,n,s,i,o,r,a;t=p,n=l,s=u,i=(e=e).node,o=e.offset,a=o,(r=i)==n&&s<o&&++a,i!=c||o!=t&&o!=t+1||(r=n,a+=s-t),i==c&&t+1<o&&--a,e.node=r,e.offset=a}),l.childNodes.length==u?l.appendChild(e):l.insertBefore(e,l.childNodes[u])}function u(e,t){var n=e.parentNode,s=w.getNodeIndex(e);L(t,function(e){var t;t=s,(e=e).node==n&&e.offset>t&&--e.offset}),w.removeNode(e)}function g(e,t){for(var n,s=e,i=e.parentNode,o=w.getNodeIndex(e),e=!0,r=t,a=[];n=s.firstChild;)m(n,i,o++,r),a.push(n);return e&&u(s,r),a}function N(e,t){var n=e.cloneRange(),t=(n.selectNodeContents(t),n.intersection(e));return""!=(t?t.toString():"")}function y(e){for(var t,n=e.getNodes([3]),s=0;(t=n[s])&&!N(e,t);)++s;for(var i=n.length-1;(t=n[i])&&!N(e,t);)--i;return n.slice(s,i+1)}function v(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,s,i=0,o=e.attributes.length;i<o;++i)if("class"!=(s=(n=e.attributes[i]).name)){if(null===n!=(null===(s=t.attributes.getNamedItem(s))))return!1;if(n.specified!=s.specified)return!1;if(n.specified&&n.nodeValue!==s.nodeValue)return!1}return!0}function C(e,t){for(var n,s=0,i=e.attributes.length;s<i;++s)if(n=e.attributes[s].name,(!t||!I(t,n))&&e.attributes[s].specified&&"class"!=n)return!0;return!1}function T(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||j(e)&&!j(e.parentNode))}function E(e){return(j(e)||1!=e.nodeType&&j(e.parentNode))&&!T(e)}function b(e){return e&&1==e.nodeType&&!z.test(H(e,"display"))}function A(e){for(var t,n=[],s=0;t=e[s++];)n.push(new O(t.startContainer,t.startOffset),new O(t.endContainer,t.endOffset));return n}function S(e,t){for(var n,s,i,o=0,r=e.length;o<r;++o)n=e[o],s=t[2*o],i=t[2*o+1],n.setStartAndEnd(s.node,s.offset,i.node,i.offset)}function x(e,t,n,s){var i,o,r=0==n;if(w.isAncestorOf(t,e))return e;if(w.isCharacterDataNode(t)){var a=w.getNodeIndex(t);if(0==n)n=a;else{if(n!=t.length)throw c.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+n+" in "+t.data);n=a+1}t=t.parentNode}if(a=t,o=n,w.isCharacterDataNode(a)?0==o?a.previousSibling:o!=a.length||a.nextSibling:0<o&&o<a.childNodes.length){i=t.cloneNode(!1),o=t.parentNode,i.id&&i.removeAttribute("id");for(var l,u=0;l=t.childNodes[n];)m(l,i,u++,s);return m(i,o,w.getNodeIndex(t)+1,s),t==e?i:x(e,o,w.getNodeIndex(i),s)}return e!=t?(i=t.parentNode,o=w.getNodeIndex(t),r||o++,x(e,i,o,s)):e}function e(s){var i=s?"nextSibling":"previousSibling";return function(e,t){var n=e.parentNode,e=e[i];if(e){if(3==e.nodeType)return e}else if(t&&(e=n[i])&&1==e.nodeType&&(t=e,(n=n).namespaceURI==t.namespaceURI)&&n.tagName.toLowerCase()==t.tagName.toLowerCase()&&a(n,t)&&v(n,t)&&"inline"==H(n,"display")&&"inline"==H(t,"display")){n=e[s?"firstChild":"lastChild"];if(n&&3==n.nodeType)return n}return null}}function R(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];e=this.isElementMerge?e.lastChild:e;e&&(this.textNodes[0]=e)}function P(e,t,n){var s,i,o,r=this,a=(r.cssClass=r.className=e,null),l={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,a=t.elementProperties,l=t.elementAttributes,s=0;o=k[s++];)t.hasOwnProperty(o)&&(r[o]=t[o]);u=t.normalize}else u=t;r.normalize=void 0===u||u,r.attrExceptions=[];var u=document.createElement(r.elementTagName),a=(r.elementProperties=r.copyPropertiesToElement(a,u,!0),p(l,function(e,t){r.attrExceptions.push(e),l[e]=""+t}),r.elementAttributes=l,r.elementSortedClassName=r.elementProperties.hasOwnProperty("className")?h(r.elementProperties.className+" "+e):e,r.applyToAnyTagName=!1,typeof n);if("string"==a)"*"==n?r.applyToAnyTagName=!0:r.tagNames=f(n.toLowerCase()).split(/\s*,\s*/);else if("object"==a&&"number"==typeof n.length)for(r.tagNames=[],s=0,i=n.length;s<i;++s)"*"==n[s]?r.applyToAnyTagName=!0:r.tagNames.push(n[s].toLowerCase());else r.tagNames=[r.elementTagName]}var w=n.dom,O=w.DomPosition,I=w.arrayContains,W=n.util,L=W.forEach,$=W.isHostMethod(document,"createElementNS"),M=function(e,t){var n,s;"object"==typeof e.classList?e.classList.remove(t):(s=(s=(n="string"==typeof e.className)?e.className:e.getAttribute("class")).replace(new RegExp("(^|\\s)"+t+"(\\s|$)"),V),n?e.className=s:e.setAttribute("class",s))},H=w.getComputedStyleProperty,j="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||j(e.parentNode))},z=/^inline(-block|-table)?$/i,B=/[^\r\n\t\f \u200B]/,D=e(!1),U=e(!0);function V(e,t,n){return t&&n?" ":""}var k=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],q={};P.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!(R.prototype={doMerge:function(e){var s,i,o,r,t=this.textNodes,a=t[0];return 1<t.length&&(i=w.getNodeIndex(a),o=[],r=0,L(t,function(t,n){s=t.parentNode,0<n&&(s.removeChild(t),s.hasChildNodes()||w.removeNode(s),e)&&L(e,function(e){e.node==t&&(e.node=a,e.offset+=r),e.node==s&&e.offset>i&&(--e.offset,e.offset==i+1)&&len-1>n&&(e.node=a,e.offset=r)}),o[n]=t.data,r+=t.data.length}),a.data=o.join("")),a.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var n=[];return L(this.textNodes,function(e,t){n[t]="'"+e.data+"'"}),"[Merge("+n.join(",")+")]"}}),useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var s,i,o,r,a,l,u={};for(l in e)if(e.hasOwnProperty(l))if(r=e[l],a=t[l],"className"==l)d(t,r),d(t,this.className),t[l]=h(t[l]),n&&(u[l]=r);else if("style"==l){for(s in i=a,n&&(u[l]=o={}),e[l])e[l].hasOwnProperty(s)&&(i[s]=r[s],n)&&(o[s]=i[s]);this.attrExceptions.push(l)}else t[l]=r,n&&(u[l]=t[l],a=q.hasOwnProperty(l)?q[l]:l,this.attrExceptions.push(a));return n?u:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return I(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&r(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||E(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&function(e){if(0==e.data.length)return!0;if(B.test(e.data))return!1;switch(H(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return b(e.previousSibling)||b(e.nextSibling)}(e)},postApply:function(e,t,n,s){var o,r,a=e[0],l=e[e.length-1],u=[],c=a,p=l,f=0,d=l.length,e=(L(e,function(e){(r=D(e,!s))?(o||(o=new R(r),u.push(o)),o.textNodes.push(e),e===a&&(c=o.textNodes[0],f=c.length),e===l&&(p=o.textNodes[0],d=o.getLength())):o=null}),U(l,!s));if(e&&(o||(o=new R(l),u.push(o)),o.textNodes.push(e)),u.length){for(i=0,len=u.length;len>i;++i)u[i].doMerge(n);t.setStartAndEnd(c,f,p,d)}},createContainer:function(e){var t=w.getDocument(e),e=$&&!w.isHtmlNamespace(e)&&e.namespaceURI?t.createElementNS(e.namespaceURI,this.elementTagName):t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,e,!1),this.copyAttributesToElement(this.elementAttributes,e),d(e,this.className),this.onElementCreate&&this.onElementCreate(e,this),e},elementHasProperties:function(n,e){var s=this;return p(e,function(e,t){if("className"==e)return l(n,t);if("object"==typeof t){if(!s.elementHasProperties(n[e],t))return!1}else if(n[e]!==t)return!1})},elementHasAttributes:function(n,e){return p(e,function(e,t){return n.getAttribute(e)===t&&void 0})},applyToTextNode:function(e){var t,n;(n=(n=e).parentNode)&&1==n.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(n.nodeName)&&(1==(n=e.parentNode).childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes)?d(n,this.className):(n=e.parentNode,t=this.createContainer(n),n.insertBefore(t,e),t.appendChild(e)))},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&s(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!C(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),e=[e],s=A(e);L(n,function(e){u(e,s)}),S(e,s)},undoToTextNode:function(e,t,n,s){var i;t.containsNode(n)||((i=t.cloneRange()).selectNode(n),i.isPointInRange(t.endContainer,t.endOffset)&&(x(n,t.endContainer,t.endOffset,s),t.setEndAfter(n)),i.isPointInRange(t.startContainer,t.startOffset)&&(n=x(n,t.startContainer,t.startOffset,s))),this.isRemovable(n)?g(n,s):M(n,this.className)},splitAncestorWithClass:function(e,t,n){var s=this.getSelfOrAncestorWithClass(e);s&&x(s,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?g(e,t):M(e,this.className)},applyToRange:function(e,t){var n=this,s=A((t=t||[])||[]),i=(e.splitBoundariesPreservingPositions(s),n.removeEmptyElements&&n.removeEmptyContainers(e),y(e)),o=(i.length&&(L(i,function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,s)}),o=i[i.length-1],e.setStartAndEnd(i[0],0,o,o.length),n.normalize&&n.postApply(i,e,s,!1),S(t,s)),n.getEmptyElements(e));L(o,function(e){d(e,n.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(e){e=n.getSelection(e);e.setRanges(this.applyToRanges(e.getAllRanges()))},undoToRange:function(e,t){var n=this,s=A(t=t||[]);e.splitBoundariesPreservingPositions(s),n.removeEmptyElements&&n.removeEmptyContainers(e,s);var i,o,r=y(e),a=r[r.length-1];if(r.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,s),n.splitAncestorWithClass(e.startContainer,e.startOffset,s);for(var l=0,u=r.length;l<u;++l)i=r[l],(o=n.getSelfOrAncestorWithClass(i))&&n.isModifiable(i)&&n.undoToAncestor(o,s);e.setStartAndEnd(r[0],0,a,a.length),n.normalize&&n.postApply(r,e,s,!0),S(t,s)}a=n.getEmptyElements(e);L(a,function(e){M(e,n.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(e){var t=n.getSelection(e),e=n.getSelection(e).getAllRanges();this.undoToRanges(e),t.setRanges(e)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,s=0;n=t[s++];)if(!this.isIgnorableWhiteSpaceNode(n)&&N(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(e){e=n.getSelection(e);return this.isAppliedToRanges(e.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],function(e){e=n.getSelfOrAncestorWithClass(e);e&&!I(t,e)&&t.push(e)}),t},detach:function(){}},P.util={hasClass:r,addClass:d,removeClass:M,getClass:t,hasSameClasses:a,hasAllClasses:l,replaceWithOwnChildren:g,elementsHaveSameNonClassAttributes:v,elementHasNonClassAttributes:C,splitNodeAt:x,isEditableElement:j,isEditingHost:T,isEditable:E},n.CssClassApplier=n.ClassApplier=P,n.createClassApplier=function(e,t,n){return new P(e,t,n)},W.createAliasForDeprecatedMethod(n,"createCssClassApplier","createClassApplier",c)}),e},this);
/**
 * Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,n){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(n.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(i,s){function l(e,n){return(n||document).getElementById(e)}function a(e,n){var r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),t=o.getDocument(e.startContainer),e=e.cloneRange();return e.collapse(n),(n=t.createElement("span")).id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(t.createTextNode(k)),e.insertNode(n),n}function d(e,n,r,t){r=l(r,e);r?(n[t?"setStartBefore":"setEndBefore"](r),p(r)):s.warn("Marker element has been removed. Cannot restore selection.")}function c(e,n){return n.compareBoundaryPoints(e.START_TO_START,e)}function u(e,n){var r,t=i.DomRange.getRangeDocument(e),o=e.toString(),n=v(n);return e.collapsed?{document:t,markerId:(r=a(e,!1)).id,collapsed:!0}:(r=a(e,!1),{document:t,startMarkerId:a(e,!0).id,endMarkerId:r.id,collapsed:!1,backward:n,toString:function(){return"original text: '"+o+"', new text: '"+e.toString()+"'"}})}function t(e,n){var r,t,o=e.document,a=(void 0===n&&(n=!0),i.createRange(o));return e.collapsed?(r=l(e.markerId,o))?(r.style.display="inline",(t=r.previousSibling)&&3==t.nodeType?(p(r),a.collapseToPoint(t,t.length)):(a.collapseBefore(r),p(r))):s.warn("Marker element has been removed. Cannot restore selection."):(d(o,a,e.startMarkerId,!0),d(o,a,e.endMarkerId,!1)),n&&a.normalizeBoundaries(),a}function g(e,n){var r,t,o=[],a=v(n);(e=e.slice(0)).sort(c);for(var s=0,d=e.length;s<d;++s)o[s]=u(e[s],a);for(s=d-1;0<=s;--s)r=e[s],t=i.DomRange.getRangeDocument(r),r.collapsed?r.collapseAfter(l(o[s].markerId,t)):(r.setEndBefore(l(o[s].endMarkerId,t)),r.setStartAfter(l(o[s].startMarkerId,t)));return o}function f(e){for(var n=[],r=e.length-1;0<=r;r--)n[r]=t(e[r],!0);return n}function m(e,n){n=l(n,e);n&&p(n)}var o=i.dom,p=o.removeNode,v=i.Selection.isDirectionBackward,k="\ufeff";i.util.extend(i,{saveRange:u,restoreRange:t,saveRanges:g,restoreRanges:f,saveSelection:function(e){var n,r,t,o;return i.isSelectionValid(e)?(o=g(r=(n=i.getSelection(e)).getAllRanges(),t=1==r.length&&n.isBackward()),t?n.setSingleRange(r[0],t):n.setRanges(r),{win:e,rangeInfos:o,restored:!1}):(s.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null)},restoreSelection:function(e,n){var r,t,o;e.restored||(r=e.rangeInfos,t=i.getSelection(e.win),o=f(r),1==r.length&&n&&i.features.selectionHasExtend&&r[0].backward?(t.removeAllRanges(),t.addRange(o[0],!0)):t.setRanges(o),e.restored=!0)},removeMarkerElement:m,removeMarkers:function(e){for(var n,r=e.rangeInfos,t=0,o=r.length;t<o;++t)(n=r[t]).collapsed?m(e.doc,n.markerId):(m(e.doc,n.startMarkerId),m(e.doc,n.endMarkerId))}})}),e},this);
/**
 * Text range module for Rangy.
 * Text-based manipulation and searching of ranges and selections.
 *
 * Features
 *
 * - Ability to move range boundaries by character or word offsets
 * - Customizable word tokenizer
 * - Ignores text nodes inside <script> or <style> elements or those hidden by CSS display and visibility properties
 * - Range findText method to search for text or regex within the page or within a range. Flags for whole words and case
 *   sensitivity
 * - Selection and range save/restore as text offsets within a node
 * - Methods to return visible text within a range or selection
 * - innerText method for elements
 *
 * References
 *
 * https://www.w3.org/Bugs/Public/show_bug.cgi?id=13145
 * http://aryeh.name/spec/innertext/innertext.html
 * http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("TextRange",["WrappedSelection"],function(v,_){function l(e,t,n){for(var r,i=n(e,t),o=[],a=0;r=i[a++];)o.push(function(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,o=n.length;i<o;++i)n[i].token=r;return r}(e,r));return o}function u(e,t){var n,r,i,e=m(e,t);return t.hasOwnProperty("wordOptions")&&(e.wordOptions=(n=e.wordOptions)?(r=n.language||T,y(i={},E[r]||E[T]),y(i,n),i):E[T]),t.hasOwnProperty("characterOptions")&&(e.characterOptions=m(e.characterOptions,R)),e}function i(e,t){t=B(e,"display",t),e=e.tagName.toLowerCase();return"block"==t&&J&&re.hasOwnProperty(e)?re[e]:t}function n(e){for(var t=function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(e=e).concat([e]),n=0,r=t.length;n<r;++n)if(1==t[n].nodeType&&"none"==i(t[n]))return!0;return!1}function D(e,t){if(!t&&e.hasChildNodes())return e.firstChild;for(var n=e;n&&!n.nextSibling;)n=n.parentNode;return n?n.nextSibling:null}function F(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}t=e.parentNode;return t&&1==t.nodeType?t:null}function V(e){var t,n;return!(!e||3!=e.nodeType)&&(""===(t=e.data)||!(!(n=e.parentNode)||1!=n.nodeType)&&(n=B(e.parentNode,"whiteSpace"),/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(n)||/^[\t\r ]+$/.test(t)&&"pre-line"==n))}function r(e){return""===e.data||!(!V(e)||e.parentNode&&!n(e))}function h(e){var t=e.nodeType;return 7==t||8==t||n(e)||/^(script|style)$/i.test(e.nodeName)||3==(t=e).nodeType&&(t=t.parentNode)&&"hidden"==B(t,"visibility")||r(e)}function $(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==i(e,t)}function a(){this.store={}}function e(n,r,i){return function(e){var t=this.cache;if(t.hasOwnProperty(n))return t[n];0;e=r.call(this,i?this[i]:this,e);return t[n]=e}}function M(e,t){this.node=e,this.session=t,this.cache=new a,this.positions=new a}function q(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new a}function s(){return A||(o(),A=new le)}function o(){A&&A.detach(),A=null}function S(e,t,n,r){n&&(t?h(n.node)&&(n=e.previousVisible()):h(n.node)&&(n=n.nextVisible()));var i,o=e,a=!1,s=!1;return{next:function(){if(s)return s=!1,i;for(var e;e=null,t?(e=o,a||(o=o.previousVisible(),a=!o||n&&o.equals(n))):a||(e=o=o.nextVisible(),a=!o||n&&o.equals(n)),a&&(o=null),e=e;)if(e.getCharacter(r))return i=e;return null},rewind:function(){if(!i)throw _.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");s=!0},dispose:function(){e=n=null}}}function g(e,t,n){function r(e){for(var t,n,r=[],i=e?s:c,o=!1,a=!1;t=i.next();){if(n=t.character,H.test(n))a&&(o=!(a=!1));else{if(o){i.rewind();break}a=!0}r.push(t)}return r}var s=S(e,!1,null,t),c=S(e,!0,null,t),i=n.tokenizer,e=r(!0),t=r(!1).reverse(),o=l(t.concat(e),n,i),a=e.length?o.slice(he(o,e[0].token)):[],d=t.length?o.slice(0,he(o,t.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==a.length&&!(e=a[0]).isWord&&0<(t=r(!0)).length;)a=l(e.chars.concat(t),n,i);return a.shift()},previousStartToken:function(){for(var e,t;1==d.length&&!(e=d[0]).isWord&&0<(t=r(!1)).length;)d=l(t.reverse().concat(e.chars),n,i);return d.pop()},dispose:function(){s.dispose(),c.dispose(),a=d=null}}}function j(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),e=e.getRangeBoundaryPosition(t,!1);return S(r?e:i,!!r,r?i:e,n)}function U(e,t,n,r,i){function o(e,t){var n,r,e=f[e].previousVisible(),t=f[t-1];return{startPos:e,endPos:t,valid:!i.wholeWordsOnly||(e=e,t=t,n=i.wordOptions,(r=v.createRange(e.node)).setStartAndEnd(e.node,e.offset,t.node,t.offset),!r.expand("word",{wordOptions:n}))}}for(var a,s,c,d,l,u=P(i.direction),h=S(e,u,e.session.getRangeBoundaryPosition(r,u),i.characterOptions),p="",f=[],g=null;d=h.next();)if(a=d.character,n||i.caseSensitive||(a=a.toLowerCase()),u?(f.unshift(d),p=a+p):(f.push(d),p+=a),n){if(d=t.exec(p))if(c=(s=d.index)+d[0].length,l){if(!u&&c<p.length||u&&0<s){g=o(s,c);break}}else l=!0}else if(-1!=(s=p.indexOf(t))){g=o(s,s+t.length);break}return l&&(g=o(s,c)),h.dispose(),g}function t(n){return function(){var e=!!A,t=[s()].concat(f.toArray(arguments)),t=n.apply(this,t);return e||o(),t}}function c(o,a){return t(function(e,t,n,r){void 0===n&&(n=t,t=C),r=u(r,ee);var i=o,e=(a&&this.collapse(!(i=0<=n)),function(e,t,n,r,i){var o,a,s,c,d=0,l=e,u=Math.abs(n);if(0!==n){var h=n<0;switch(t){case C:for(a=S(e,h,null,r);(o=a.next())&&d<u;)++d,l=o;s=o,a.dispose();break;case N:for(var p=g(e,r,i),f=h?p.previousStartToken:p.nextEndToken;(c=f())&&d<u;)c.isWord&&(++d,l=h?c.chars[0]:c.chars[c.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}h?(l=l.previousVisible(),d=-d):l&&l.isLeadingSpace&&!l.isTrailingSpace&&(t==N&&(s=(a=S(e,!1,null,r)).next(),a.dispose()),s)&&(l=s.previousVisible())}return{position:l,unitsMoved:d}}(e.getRangeBoundaryPosition(this,i),t,n,r.characterOptions,r.wordOptions)),t=e.position;return this[i?"setStart":"setEnd"](t.node,t.offset),e.unitsMoved})}function G(o){return t(function(e,t){for(var n,r=j(e,this,t=m(t,R),!o),i=0;(n=r.next())&&H.test(n.character);)++i;r.dispose();e=0<i;return e&&this[o?"moveStart":"moveEnd"]("character",o?i:-i,{characterOptions:t}),e})}function d(r){return t(function(e,t){var n=!1;return this.changeEachRange(function(e){n=e[r](t)||n}),n})}var C="character",N="word",p=v.dom,f=v.util,y=f.extend,m=f.createOptions,x=p.getBody,K=/^[ \t\f\r\n]+$/,z=/^[ \t\f\r]+$/,H=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,Y=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,T="en",P=v.Selection.isDirectionBackward;b=p.createTestElement(document,"<p>1 </p><p></p>",!0),O=b.firstChild,(w=v.getSelection()).collapse(O.lastChild,2),w.setStart(O.firstChild,0),b.innerHTML="1 <br />",w.collapse(b,2),w.setStart(b.firstChild,0),O=1==(""+w).length,b.innerHTML="1 <p>1</p>",w.collapse(b,2),w.setStart(b.firstChild,0),I=1==(""+w).length,p.removeNode(b),w.removeAllRanges();var J,b,w,Q,R={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},X={includeBlockContentTrailingSpace:!1,includeSpaceBeforeBr:!O,includeSpaceBeforeBlock:!I,includePreLineTrailingSpace:!0},E={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:function(e,t){function n(e,t,n){s.push({start:e,end:t,isWord:n})}for(var r,i,o,a=e.join(""),s=[],c=0;r=t.wordRegex.exec(a);){if(o=(i=r.index)+r[0].length,c<i&&n(c,i,!1),t.includeTrailingSpace)for(;Y.test(e[o]);)++o;n(i,o,!0),c=o}return c<e.length&&n(c,e.length,!1),s}}},Z={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},ee={wordOptions:null,characterOptions:null},te={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},ne={wordOptions:null,characterOptions:null,direction:"forward"},B=p.getComputedStyleProperty,re=(b=document.createElement("table"),(w=x(document)).appendChild(b),J="block"==B(b,"display"),w.removeChild(b),{table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"}),O=(a.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}},{getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new q(this,e))},toString:function(){return"[NodeWrapper("+p.inspectNode(this.node)+")]"}}),k="NON_SPACE",ie="UNCOLLAPSIBLE_SPACE",L="COLLAPSIBLE_SPACE",oe="TRAILING_SPACE_BEFORE_BLOCK",ae="TRAILING_SPACE_IN_BLOCK",se="TRAILING_SPACE_BEFORE_BR",ce="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",de="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR",I=(y(M.prototype=O,{isCharacterDataNode:e("isCharacterDataNode",p.isCharacterDataNode,"node"),getNodeIndex:e("nodeIndex",p.getNodeIndex,"node"),getLength:e("nodeLength",p.getNodeLength,"node"),containsPositions:e("containsPositions",function(e){return p.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)},"node"),isWhitespace:e("isWhitespace",V,"node"),isCollapsedWhitespace:e("isCollapsedWhitespace",r,"node"),getComputedDisplay:e("computedDisplay",i,"node"),isCollapsed:e("collapsed",h,"node"),isIgnored:e("ignored",$,"node"),next:e("nextPos",D,"node"),previous:e("previous",F,"node"),getTextNodeInfo:e("textNodeInfo",function(e){var t=null,n=!1,r=B(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=z,n=!0):"normal"!=r&&"nowrap"!=r||(t=K,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:e("hasInnerText",function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),n=n.getPosition(e,0),i=t?r:n,o=t?n:r;i!==o;){if(i.prepopulateChar(),i.isDefinitelyNonEmpty())return!0;i=t?i.previousVisible():i.nextVisible()}return!1},"node"),isRenderedBlock:e("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!h(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:e("trailingSpace",function(e){if("br"!=e.tagName.toLowerCase())switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!$(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:e("leadingSpace",function(){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")}),{character:"",characterType:"EMPTY",isBr:!1,prepopulateChar:function(){var e,t,n,r,i,o,a,s,c,d=this;d.prepopulatedChar||(e=d.node,n="",i=!(r="EMPTY"),0<(t=d.offset)&&(3==e.nodeType?(a=(o=e.data).charAt(t-1),s=(c=d.nodeWrapper.getTextNodeInfo()).spaceRegex,c.collapseSpaces?s.test(a)?1<t&&s.test(o.charAt(t-2))||(r=c.preLine&&"\n"===o.charAt(t)?(n=" ",ce):(n=" ",L)):(n=a,r=k,i=!0):(n=a,r=ie,i=!0)):((s=e.childNodes[t-1])&&1==s.nodeType&&!h(s)&&("br"==s.tagName.toLowerCase()?(n="\n",d.isBr=!0,i=!(r=L)):d.checkForTrailingSpace=!0),n||(c=e.childNodes[t])&&1==c.nodeType&&!h(c)&&(d.checkForLeadingSpace=!0))),d.prepopulatedChar=!0,d.character=n,d.characterType=r,d.isCharInvariant=i)},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==k||e==ie},resolveLeadingAndTrailingSpaces:function(){var e;this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace&&((e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace())&&(this.isTrailingSpace=!0,this.character=e,this.characterType=L),this.checkForTrailingSpace=!1),this.checkForLeadingSpace&&((e=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace())&&(this.isLeadingSpace=!0,this.character=e,this.characterType=L),this.checkForLeadingSpace=!1)},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){function t(){return o||(n=a.getPrecedingUncollapsedPosition(e),o=!0),n}this.resolveLeadingAndTrailingSpaces();var n,r,i,o,a,s=this.character,c=((c="string"==typeof(c=(c=e.ignoreCharacters)||"")?c.split(""):c).sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),c.join("").replace(/(.)\1+/g,"$1")),d=""!==s&&-1<c.indexOf(s);return this.isCharInvariant?d?"":s:(d=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,c].join("_"),null!==(r=this.cache.get(d))?r:(r="",i=this.characterType==L,o=!1,a=this,i&&(this.type==de?r="\n":" "==s&&(!t()||n.isTrailingSpace||"\n"==n.character||" "==n.character&&n.characterType==L)||("\n"==s&&this.isLeadingSpace?t()&&"\n"!=n.character&&(r="\n"):(i=this.nextUncollapsed())&&(i.isBr?this.type=se:i.isTrailingSpace&&"\n"==i.character?this.type=ae:i.isLeadingSpace&&"\n"==i.character&&(this.type=oe),"\n"==i.character?this.type==se&&!e.includeSpaceBeforeBr||this.type==oe&&!e.includeSpaceBeforeBlock||this.type==ae&&i.isTrailingSpace&&!e.includeBlockContentTrailingSpace||this.type==ce&&i.type==k&&!e.includePreLineTrailingSpace||("\n"==s?i.isTrailingSpace?this.isTrailingSpace||this.isBr&&(i.type="TRAILING_LINE_BREAK_AFTER_BR",t()&&n.isLeadingSpace&&!n.isTrailingSpace&&"\n"==n.character?i.character="":i.type=de):r="\n":" "==s&&(r=" ")):r=s))),-1<c.indexOf(r)&&(r=""),this.cache.set(d,r),r))},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:function(){return"[Position("+p.inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.character}}),A=(y(q.prototype=I,{next:e("nextPos",function(e){var t,n=e.nodeWrapper,r=e.node,e=e.offset,i=n.session;return r&&(n=e==n.getLength()?(t=r.parentNode)?n.getNodeIndex()+1:0:!n.isCharacterDataNode()&&(n=r.childNodes[e],i.getNodeWrapper(n).containsPositions())?(t=n,0):(t=r,e+1),t)?i.getPosition(t,n):null}),previous:e("previous",function(e){var t,n=e.nodeWrapper,r=e.node,e=e.offset,i=n.session,n=0==e?(t=r.parentNode)?n.getNodeIndex():0:!n.isCharacterDataNode()&&(n=r.childNodes[e-1],i.getNodeWrapper(n).containsPositions())?p.getNodeLength(t=n):(t=r,e-1);return t?i.getPosition(t,n):null}),nextVisible:e("nextVisible",function(e){var t,n,e=e.next();return e?(t=e.nodeWrapper,n=e.node,e=e,t.isCollapsed()?t.session.getPosition(n.parentNode,t.getNodeIndex()+1):e):null}),nextUncollapsed:e("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:e("previousVisible",function(e){var t,n,e=e.previous();return e?(t=e.nodeWrapper,n=e.node,e=e,t.isCollapsed()?t.session.getPosition(n.parentNode,t.getNodeIndex()):e):null})}),null),le=(Q=f.isHostProperty(document.documentElement,"uniqueID"),ue.prototype={initCaches:function(){var t;this.elementCache=Q?(t=new a,{get:function(e){return t.get(e.uniqueID)},set:function(e){t.set(e.node.uniqueID,e)}}):W("tagName"),this.textNodeCache=W("data"),this.otherNodeCache=W("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new M(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){t=t?"start":"end";return this.getPosition(e[t+"Container"],e[t+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},ue);function W(i){var o=new a;return{get:function(e){var t=o.get(e[i]);if(t)for(var n,r=0;n=t[r++];)if(n.node===e)return n;return null},set:function(e){var t=e.node[i];(o.get(t)||o.set(t,[])).push(e)}}}function ue(){this.initCaches()}y(p,{nextNode:D,previousNode:F});var he=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};y(v.rangePrototype,{moveStart:c(!0,!1),moveEnd:c(!1,!1),move:c(!0,!0),trimStart:G(!0),trimEnd:G(!1),trim:t(function(e,t){var n=this.trimStart(t),t=this.trimEnd(t);return n||t}),expand:t(function(e,t,n){var r,i,o,a=!1,s=(n=u(n,te)).characterOptions;return(t=t||C)==N?(t=n.wordOptions,r=e.getRangeBoundaryPosition(this,!0),e=e.getRangeBoundaryPosition(this,!1),i=(o=g(r,s,t).nextEndToken()).chars[0].previousVisible(),t=(o=this.collapsed?o:g(e,s,t).previousStartToken()).chars[o.chars.length-1],i.equals(r)||(this.setStart(i.node,i.offset),a=!0),t&&!t.equals(e)&&(this.setEnd(t.node,t.offset),a=!0),n.trim&&(n.trimStart&&(a=this.trimStart(s)||a),n.trimEnd)&&this.trimEnd(s)||a):this.moveEnd(C,1,n)}),text:t(function(e,t){return this.collapsed?"":function(e,t,n){for(var r,i=[],o=j(e,t,n);r=o.next();)i.push(r);return o.dispose(),i}(e,this,m(t,R)).join("")}),selectCharacters:t(function(e,t,n,r,i){i={characterOptions:i};t=t||x(this.getDocument()),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,i),this.collapse(!0),this.moveEnd("character",r-n,i)}),toCharacterRange:t(function(e,t,n){var r=(t=t||x(this.getDocument())).parentNode,t=p.getNodeIndex(t),i=-1==p.comparePoints(this.startContainer,this.endContainer,r,t),o=this.cloneRange(),i=i?(o.setStartAndEnd(this.startContainer,this.startOffset,r,t),-o.text(n).length):(o.setStartAndEnd(r,t,this.startContainer,this.startOffset),o.text(n).length);return{start:i,end:i+this.text(n).length}}),findText:t(function(e,t,n){(n=u(n,Z)).wholeWordsOnly&&(n.wordOptions.includeTrailingSpace=!1);var r=P(n.direction),i=n.withinRange,o=(i||(i=v.createRange()).selectNodeContents(this.getDocument()),t),a=!1,s=("string"==typeof o?n.caseSensitive||(o=o.toLowerCase()):a=!0,e.getRangeBoundaryPosition(this,!r)),t=i.comparePoint(s.node,s.offset);-1===t?s=e.getRangeBoundaryPosition(i,!0):1===t&&(s=e.getRangeBoundaryPosition(i,!1));for(var c,d=s,l=!1;;)if(c=U(d,o,a,i,n)){if(c.valid)return this.setStartAndEnd(c.startPos.node,c.startPos.offset,c.endPos.node,c.endPos.offset),!0;d=r?c.startPos:c.endPos}else{if(!n.wrap||l)return!1;i=i.cloneRange(),d=e.getRangeBoundaryPosition(i,!r),i.setBoundary(s.node,s.offset,r),l=!0}}),pasteHtml:function(e){var t;this.deleteContents(),e&&(t=(e=this.createContextualFragment(e)).lastChild,this.insertNode(e),this.collapseAfter(t))}}),y(v.selectionPrototype,{expand:t(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:t(function(e,t,n,r){var i,o=0;return this.focusNode&&(this.collapse(this.focusNode,this.focusOffset),i=this.getRangeAt(0),(r=r||{}).characterOptions=m(r.characterOptions,X),o=i.move(t,n,r),this.setSingleRange(i)),o}),trimStart:d("trimStart"),trimEnd:d("trimEnd"),trim:d("trim"),selectCharacters:t(function(e,t,n,r,i,o){var a=v.createRange(t);a.selectCharacters(t,n,r,o),this.setSingleRange(a,i)}),saveCharacterRanges:t(function(e,t,n){for(var r=this.getAllRanges(),i=[],o=1==r.length&&this.isBackward(),a=0,s=r.length;a<s;++a)i[a]={characterRange:r[a].toCharacterRange(t,n),backward:o,characterOptions:n};return i}),restoreCharacterRanges:t(function(e,t,n){this.removeAllRanges();for(var r,i,o,a=0,s=n.length;a<s;++a)o=(i=n[a]).characterRange,(r=v.createRange(t)).selectCharacters(t,o.start,o.end,i.characterOptions),this.addRange(r,i.backward)}),text:t(function(e,t){for(var n=[],r=0,i=this.rangeCount;r<i;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")})}),v.innerText=function(e,t){var n=v.createRange(e);return n.selectNodeContents(e),n.text(t)},v.createWordIterator=function(e,t,n){var r=s();n=u(n,ne);var i=g(r.getPosition(e,t),n.characterOptions,n.wordOptions),o=P(n.direction);return{next:function(){return o?i.previousStartToken():i.nextEndToken()},dispose:function(){i.dispose(),this.next=function(){}}}},v.noMutation=function(e){e(s()),o()},v.noMutation.createEntryPointFunction=t,v.textRange={isBlockNode:function(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(i(e))||9==e.nodeType||11==e.nodeType)},isCollapsedWhitespaceNode:r,createPosition:t(function(e,t,n){return e.getPosition(t,n)})}}),e},this);
// Spectrum Colorpicker v1.8.0
// https://github.com/bgrins/spectrum
// Author: Brian Grinstead
// License: MIT
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):t(jQuery)}(function(Tt,Ot){"use strict";var qt={beforeShow:e,move:e,change:e,show:e,hide:e,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},Nt=[],jt=!!/msie/i.exec(window.navigator.userAgent),Et=((u=document.createElement("div").style).cssText="background-color:rgba(0,0,0,.5)",t(u.backgroundColor,"rgba")||t(u.backgroundColor,"hsla")),Lt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Kt=function(){var t="";if(jt)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function t(t,e){return!!~(""+t).indexOf(e)}function Dt(t,e,r,n){for(var a=[],o=0;o<t.length;o++){var i,s,l,c=t[o];c?(s=(i=tinycolor(c)).toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",s+=tinycolor.equals(e,c)?" sp-thumb-active":"",c=i.toString(n.preferredFormat||"rgb"),l=Et?"background-color:"+i.toRgbString():"filter:"+i.toFilter(),a.push('<span title="'+c+'" data-color="'+i.toRgbString()+'" class="'+s+'"><span class="sp-thumb-inner" style="'+l+';" /></span>')):a.push(Tt("<div />").append(Tt('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",n.noColorSelectedText)).html())}return"<div class='sp-cf "+r+"'>"+a.join("")+"</div>"}function P(t,e){e=e,a=t,(e=Tt.extend({},qt,e)).callbacks={move:It(e.move,a),change:It(e.change,a),show:It(e.show,a),hide:It(e.hide,a),beforeShow:It(e.beforeShow,a)};var j,E,D,I,r,l=e,c=l.flat,z=l.showSelectionPalette,n=l.localStorageKey,a=l.theme,o=l.callbacks,B=(j=N,function(){var t=this,e=arguments;D&&clearTimeout(I),!D&&I||(I=setTimeout(function(){I=null,j.apply(t,e)},E))}),f=!(E=10),L=!1,h=0,u=0,d=0,K=0,V=0,$=0,W=0,i=0,s=0,p=0,g=1,X=[],b=[],Y={},m=l.selectionPalette.slice(0),G=l.maxSelectionSize,Q="sp-dragging",v=null,y=t.ownerDocument,w=(y.body,Tt(t)),J=!1,_=Tt(Kt,y).addClass(a),U=_.find(".sp-picker-container"),Z=_.find(".sp-color"),tt=_.find(".sp-dragger"),et=_.find(".sp-hue"),rt=_.find(".sp-slider"),nt=_.find(".sp-alpha-inner"),at=_.find(".sp-alpha"),ot=_.find(".sp-alpha-handle"),x=_.find(".sp-input"),it=_.find(".sp-palette"),st=_.find(".sp-initial"),e=_.find(".sp-cancel"),t=_.find(".sp-clear"),lt=_.find(".sp-choose"),ct=_.find(".sp-palette-toggle"),ft=w.is("input"),ht=ft&&"color"===w.attr("type")&&Bt(),ut=ft&&!c,k=ut?Tt(Lt).addClass(a).addClass(l.className).addClass(l.replacerClassName):Tt([]),dt=ut?k:w,S=k.find(".sp-preview-inner"),a=l.color||ft&&w.val(),C=!1,P=l.preferredFormat,pt=!l.showButtons||l.clickoutFiresChange,A=!a,M=l.allowEmpty&&!ht;function gt(){if(l.showPaletteOnly&&(l.showPalette=!0),ct.text(l.showPaletteOnly?l.togglePaletteMoreText:l.togglePaletteLessText),l.palette){X=l.palette.slice(0),b=Tt.isArray(X[0])?X:[X],Y={};for(var t=0;t<b.length;t++)for(var e=0;e<b[t].length;e++){var r=tinycolor(b[t][e]).toRgbString();Y[r]=!0}}_.toggleClass("sp-flat",c),_.toggleClass("sp-input-disabled",!l.showInput),_.toggleClass("sp-alpha-enabled",l.showAlpha),_.toggleClass("sp-clear-enabled",M),_.toggleClass("sp-buttons-disabled",!l.showButtons),_.toggleClass("sp-palette-buttons-disabled",!l.togglePaletteOnly),_.toggleClass("sp-palette-disabled",!l.showPalette),_.toggleClass("sp-palette-only",l.showPaletteOnly),_.toggleClass("sp-initial-disabled",!l.showInitial),_.addClass(l.className).addClass(l.containerClassName),N()}function bt(){if(n&&window.localStorage){try{var t=window.localStorage[n].split(",#");1<t.length&&(delete window.localStorage[n],Tt.each(t,function(t,e){mt(e)}))}catch(t){}try{m=window.localStorage[n].split(";")}catch(t){}}}function mt(t){if(z){t=tinycolor(t).toRgbString();if(!Y[t]&&-1===Tt.inArray(t,m))for(m.push(t);m.length>G;)m.shift();if(n&&window.localStorage)try{window.localStorage[n]=m.join(";")}catch(t){}}}function vt(){var r=F(),t=Tt.map(b,function(t,e){return Dt(t,r,"sp-palette-row sp-palette-row-"+e,l)});bt(),m&&t.push(Dt(function(){var t=[];if(l.showPalette)for(var e=0;e<m.length;e++){var r=tinycolor(m[e]).toRgbString();Y[r]||t.push(m[e])}return t.reverse().slice(0,l.maxSelectionSize)}(),r,"sp-palette-row sp-palette-row-selection",l)),it.html(t.join(""))}function yt(){var t,e;l.showInitial&&(t=C,e=F(),st.html(Dt([t,e],e,"sp-palette-row-initial",l)))}function wt(){(u<=0||h<=0||K<=0)&&N(),L=!0,_.addClass(Q),v=null,w.trigger("dragstart.spectrum",[F()])}function _t(){L=!1,_.removeClass(Q),w.trigger("dragstop.spectrum",[F()])}function xt(){var t=x.val();null!==t&&""!==t||!M?(t=tinycolor(t)).isValid()?(H(t),T(),q()):x.addClass("sp-validation-error"):(H(null),T(),q())}function kt(){(f?R:St)()}function St(){var t=Tt.Event("beforeShow.spectrum");if(f)N();else if(w.trigger(t,[F()]),!1!==o.beforeShow(F())&&!t.isDefaultPrevented()){for(var e=0;e<Nt.length;e++)Nt[e]&&Nt[e].hide();f=!0,Tt(y).on("keydown.spectrum",Ct),Tt(y).on("click.spectrum",Pt),Tt(window).on("resize.spectrum",B),k.addClass("sp-active"),_.removeClass("sp-hidden"),N(),O(),C=F(),yt(),o.show(C),w.trigger("show.spectrum",[C])}}function Ct(t){27===t.keyCode&&R()}function Pt(t){2==t.button||L||(pt?q(!0):At(),R())}function R(){f&&!c&&(f=!1,Tt(y).off("keydown.spectrum",Ct),Tt(y).off("click.spectrum",Pt),Tt(window).off("resize.spectrum",B),k.removeClass("sp-active"),_.addClass("sp-hidden"),o.hide(F()),w.trigger("hide.spectrum",[F()]))}function At(){H(C,!0),q(!0)}function H(t,e){var r;tinycolor.equals(t,F())?O():(!t&&M?A=!0:(A=!1,t=(r=tinycolor(t)).toHsv(),i=t.h%360/360,s=t.s,p=t.v,g=t.a),O(),r&&r.isValid()&&!e&&(P=l.preferredFormat||r.getFormat()))}function F(t){return t=t||{},M&&A?null:tinycolor.fromRatio({h:i,s:s,v:p,a:Math.round(1e3*g)/1e3},{format:t.format||P})}function T(){O(),o.move(F()),w.trigger("move.spectrum",[F()])}function O(){x.removeClass("sp-validation-error"),Mt();var t,e,r,n=tinycolor.fromRatio({h:i,s:1,v:1}),n=(Z.css("background-color",n.toHexString()),P),a=F({format:n=!(g<1)||0===g&&"name"===P||"hex"!==P&&"hex3"!==P&&"hex6"!==P&&"name"!==P?P:"rgb"}),o="";S.removeClass("sp-clear-display"),S.css("background-color","transparent"),!a&&M?S.addClass("sp-clear-display"):(t=a.toHexString(),e=a.toRgbString(),Et||1===a.alpha?S.css("background-color",e):(S.css("background-color","transparent"),S.css("filter",a.toFilter())),l.showAlpha&&((e=a.toRgb()).a=0,r="linear-gradient(left, "+(e=tinycolor(e).toRgbString())+", "+t+")",jt?nt.css("filter",tinycolor(e).toFilter({gradientType:1},t)):(nt.css("background","-webkit-"+r),nt.css("background","-moz-"+r),nt.css("background","-ms-"+r),nt.css("background","linear-gradient(to right, "+e+", "+t+")"))),o=a.toString(n)),l.showInput&&x.val(o),l.showPalette&&vt(),yt()}function Mt(){var t=s,e=p;M&&A?(ot.hide(),rt.hide(),tt.hide()):(ot.show(),rt.show(),tt.show(),t=t*h,e=u-e*u,t=Math.max(-d,Math.min(h-d,t-d)),e=Math.max(-d,Math.min(u-d,e-d)),tt.css({top:e+"px",left:t+"px"}),e=g*V,ot.css({left:e-$/2+"px"}),t=i*K,rt.css({top:t-W+"px"}))}function q(t){var e=F(),r="",n=!tinycolor.equals(e,C);e&&(r=e.toString(P),mt(e)),ft&&w.val(r),t&&n&&(o.change(e),w.trigger("change",[e]))}function N(){var t,e,r,n,a,o,i,s;f&&(h=Z.width(),u=Z.height(),d=tt.height(),et.width(),K=et.height(),W=rt.height(),V=at.width(),$=ot.width(),c||(_.css("position","absolute"),l.offset?_.offset(l.offset):_.offset((e=dt,r=(t=_).outerWidth(),n=t.outerHeight(),a=e.outerHeight(),t=t[0].ownerDocument,o=t.documentElement,i=o.clientWidth+Tt(t).scrollLeft(),o=o.clientHeight+Tt(t).scrollTop(),e=(t=e.offset()).left,s=t.top,s+=a,e-=Math.min(e,i<e+r&&r<i?Math.abs(e+r-i):0),{top:s-=Math.min(s,o<s+n&&n<o?Math.abs(+(n+a)):0),bottom:t.bottom,left:e,right:t.right,width:t.width,height:t.height}))),Mt(),l.showPalette&&vt(),w.trigger("reflow.spectrum"))}function Rt(){R(),J=!0,w.attr("disabled",!0),dt.addClass("sp-disabled")}function Ht(t){return(t.data&&t.data.ignore?(H(Tt(t.target).closest(".sp-thumb-el").data("color")),T):(H(Tt(t.target).closest(".sp-thumb-el").data("color")),T(),l.hideAfterPaletteSelect?(q(!0),R):q))(),!1}jt&&_.find("*:not(input)").attr("unselectable","on"),gt(),ut&&w.after(k).hide(),M||t.hide(),c?w.after(_).hide():(r=1!==(r="parent"===l.appendTo?w.parent():Tt(l.appendTo)).length?Tt("body"):r).append(_),bt(),dt.on("click.spectrum touchstart.spectrum",function(t){J||kt(),t.stopPropagation(),Tt(t.target).is("input")||t.preventDefault()}),!w.is(":disabled")&&!0!==l.disabled||Rt(),_.click(Vt),x.change(xt),x.on("paste",function(){setTimeout(xt,1)}),x.keydown(function(t){13==t.keyCode&&xt()}),e.text(l.cancelText),e.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),At(),R()}),t.attr("title",l.clearText),t.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),A=!0,T(),c&&q(!0)}),lt.text(l.chooseText),lt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),jt&&x.is(":focus")&&x.trigger("change"),x.hasClass("sp-validation-error")||(q(!0),R())}),ct.text(l.showPaletteOnly?l.togglePaletteMoreText:l.togglePaletteLessText),ct.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),l.showPaletteOnly=!l.showPaletteOnly,l.showPaletteOnly||c||_.css("left","-="+(U.outerWidth(!0)+5)),gt()}),zt(at,function(t,e,r){g=t/V,A=!1,r.shiftKey&&(g=Math.round(10*g)/10),T()},wt,_t),zt(et,function(t,e){i=parseFloat(e/K),A=!1,l.showAlpha||(g=1),T()},wt,_t),zt(Z,function(t,e,r){r.shiftKey?v||(r=s*h,n=u-p*u,r=Math.abs(t-r)>Math.abs(e-n),v=r?"x":"y"):v=null;var n=!v||"x"===v,r=!v||"y"===v;n&&(s=parseFloat(t/h)),r&&(p=parseFloat((u-e)/u)),A=!1,l.showAlpha||(g=1),T()},wt,_t),a?(H(a),O(),P=l.preferredFormat||tinycolor(a).format,mt(a)):O(),c&&St(),r=jt?"mousedown.spectrum":"click.spectrum touchstart.spectrum",it.on(r,".sp-thumb-el",Ht),st.on(r,".sp-thumb-el:nth-child(1)",{ignore:!0},Ht);var Ft={show:St,hide:R,toggle:kt,reflow:N,option:function(t,e){return t===Ot?Tt.extend({},l):e===Ot?l[t]:(l[t]=e,"preferredFormat"===t&&(P=l.preferredFormat),void gt())},enable:function(){J=!1,w.attr("disabled",!1),dt.removeClass("sp-disabled")},disable:Rt,offset:function(t){l.offset=t,N()},set:function(t){H(t),q()},get:F,destroy:function(){w.show(),dt.off("click.spectrum touchstart.spectrum"),_.remove(),k.remove(),Nt[Ft.id]=null},container:_};return Ft.id=Nt.push(Ft)-1,Ft}function e(){}function Vt(t){t.stopPropagation()}function It(t,e){var r=Array.prototype.slice,n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}function zt(n,a,e,t){a=a||function(){},e=e||function(){},t=t||function(){};var o=document,i=!1,s={},l=0,c=0,f="ontouchstart"in window,r={};function h(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function u(t){if(i){if(jt&&o.documentMode<9&&!t.button)return d();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=e&&e.pageX||t.pageX,e=e&&e.pageY||t.pageY,r=Math.max(0,Math.min(r-s.left,c)),e=Math.max(0,Math.min(e-s.top,l));f&&h(t),a.apply(n,[r,e,t])}}function d(){i&&(Tt(o).off(r),Tt(o.body).removeClass("sp-dragging"),setTimeout(function(){t.apply(n,arguments)},0)),i=!1}r.selectstart=h,r.dragstart=h,r["touchmove mousemove"]=u,r["touchend mouseup"]=d,Tt(n).on("touchstart mousedown",function(t){(t.which?3==t.which:2==t.button)||i||!1!==e.apply(n,arguments)&&(i=!0,l=Tt(n).height(),c=Tt(n).width(),s=Tt(n).offset(),Tt(o).on(r),Tt(o.body).addClass("sp-dragging"),u(t),h(t))})}function Bt(){return Tt.fn.spectrum.inputTypeColorSupport()}var o,i,n,s,a,c,f,r,l,h,u,d,p,g="spectrum.id";function b(t,e){var r;return e=e||{},(t=t||"")instanceof b?t:this instanceof b?(r=function(t){var e={r:0,g:0,b:0},r=1,n=!1,a=!1;"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(i,"").toLowerCase();var e,r=!1;if(l[t])t=l[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=p.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=p.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=p.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=p.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=p.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=p.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=p.hex8.exec(t))return{a:function(t){return k(t)/255}(e[1]),r:k(e[2]),g:k(e[3]),b:k(e[4]),format:r?"name":"hex8"};if(e=p.hex6.exec(t))return{r:k(e[1]),g:k(e[2]),b:k(e[3]),format:r?"name":"hex"};if(e=p.hex3.exec(t))return{r:k(e[1]+""+e[1]),g:k(e[2]+""+e[2]),b:k(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=function(t,e,r){return{r:255*_(t,255),g:255*_(e,255),b:255*_(r,255)}}(t.r,t.g,t.b),n=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=C(t.s),t.v=C(t.v),e=function(t,e,r){t=6*_(t,360),e=_(e,100),r=_(r,100);var n=s.floor(t),t=t-n,a=r*(1-e),o=r*(1-t*e),t=r*(1-(1-t)*e),e=n%6;return{r:255*[r,o,a,a,t,r][e],g:255*[t,r,r,o,a,a][e],b:255*[a,a,t,r,r,o][e]}}(t.h,t.s,t.v),n=!0,a="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=C(t.s),t.l=C(t.l),e=function(t,e,r){var n,a,o;function i(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}t=_(t,360),e=_(e,100),r=_(r,100),0===e?n=a=o=r:(n=i(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),r,t+1/3),a=i(e,r,t),o=i(e,r,t-1/3));return{r:255*n,g:255*a,b:255*o}}(t.h,t.s,t.l),n=!0,a="hsl"),t.hasOwnProperty("a"))&&(r=t.a);return r=z(r),{ok:n,format:t.format||a,r:c(255,f(e.r,0)),g:c(255,f(e.g,0)),b:c(255,f(e.b,0)),a:r}}(t),this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=a(1e3*this._a)/1e3,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=r.ok,void(this._tc_id=n++)):new b(t,e)}function m(t,e,r){t=_(t,255),e=_(e,255),r=_(r,255);var n,a=f(t,e,r),o=c(t,e,r),i=(a+o)/2;if(a==o)n=l=0;else{var s=a-o,l=.5<i?s/(2-a-o):s/(a+o);switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:l,l:i}}function v(t,e,r){t=_(t,255),e=_(e,255),r=_(r,255);var n,a=f(t,e,r),o=c(t,e,r),i=a,s=a-o,l=0===a?0:s/a;if(a==o)n=0;else{switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:l,v:i}}function y(t,e,r,n){t=[S(a(t).toString(16)),S(a(e).toString(16)),S(a(r).toString(16))];return n&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function w(t,e,r,n){return[S(Math.round(255*parseFloat(n)).toString(16)),S(a(t).toString(16)),S(a(e).toString(16)),S(a(r).toString(16))].join("")}function A(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s-=e/100,t.s=x(t.s),b(t)}function M(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s+=e/100,t.s=x(t.s),b(t)}function R(t){return b(t).desaturate(100)}function H(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l+=e/100,t.l=x(t.l),b(t)}function F(t,e){e=0===e?0:e||10;t=b(t).toRgb();return t.r=f(0,c(255,t.r-a(-e/100*255))),t.g=f(0,c(255,t.g-a(-e/100*255))),t.b=f(0,c(255,t.b-a(-e/100*255))),b(t)}function T(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l-=e/100,t.l=x(t.l),b(t)}function O(t,e){t=b(t).toHsl(),e=(a(t.h)+e)%360;return t.h=e<0?360+e:e,b(t)}function q(t){t=b(t).toHsl();return t.h=(t.h+180)%360,b(t)}function N(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+120)%360,s:e.s,l:e.l}),b({h:(r+240)%360,s:e.s,l:e.l})]}function j(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+90)%360,s:e.s,l:e.l}),b({h:(r+180)%360,s:e.s,l:e.l}),b({h:(r+270)%360,s:e.s,l:e.l})]}function E(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+72)%360,s:e.s,l:e.l}),b({h:(r+216)%360,s:e.s,l:e.l})]}function D(t,e,r){e=e||6,r=r||30;var n=b(t).toHsl(),a=360/r,o=[b(t)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,o.push(b(n));return o}function I(t,e){e=e||6;for(var t=b(t).toHsv(),r=t.h,n=t.s,a=t.v,o=[],i=1/e;e--;)o.push(b({h:r,s:n,v:a})),a=(a+i)%1;return o}function z(t){return t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t}function _(t,e){"string"==typeof(r=t)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(t="100%");var r="string"==typeof(r=t)&&-1!=r.indexOf("%");return t=c(e,f(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),s.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function x(t){return c(1,f(0,t))}function k(t){return parseInt(t,16)}function S(t){return 1==t.length?"0"+t:""+t}function C(t){return t=t<=1?100*t+"%":t}Tt.fn.spectrum=function(r,t){var n,a;return"string"==typeof r?(n=this,a=Array.prototype.slice.call(arguments,1),this.each(function(){var t=Nt[Tt(this).data(g)];if(t){var e=t[r];if(!e)throw new Error("Spectrum: no such method: '"+r+"'");"get"==r?n=t.get():"container"==r?n=t.container:"option"==r?n=t.option.apply(t,a):"destroy"==r?(t.destroy(),Tt(this).removeData(g)):e.apply(t,a)}}),n):this.spectrum("destroy").each(function(){var t=P(this,Tt.extend({},Tt(this).data(),r));Tt(this).data(g,t.id)})},Tt.fn.spectrum.load=!0,Tt.fn.spectrum.loadOpts={},Tt.fn.spectrum.draggable=zt,Tt.fn.spectrum.defaults=qt,Tt.fn.spectrum.inputTypeColorSupport=function t(){var e;return void 0===t._cachedResult&&(e=Tt("<input type='color'/>")[0],t._cachedResult="color"===e.type&&""!==e.value),t._cachedResult},Tt.spectrum={},Tt.spectrum.localization={},Tt.spectrum.palettes={},Tt.fn.spectrum.processNativeColorInputs=function(){var t=Tt("input[type=color]");t.length&&!Bt()&&t.spectrum({preferredFormat:"hex6"})},
// Brian Grinstead, MIT License
o=/^[\s,#]+/,i=/\s+$/,n=0,s=Math,a=s.round,c=s.min,f=s.max,r=s.random,b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=z(t),this._roundA=a(1e3*this._a)/1e3,this},toHsv:function(){var t=v(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=v(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),t=a(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+t+"%)":"hsva("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=m(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=m(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),t=a(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+t+"%)":"hsla("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return y(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return w(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*_(this._r,255))+"%",g:a(100*_(this._g,255))+"%",b:a(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*_(this._r,255))+"%, "+a(100*_(this._g,255))+"%, "+a(100*_(this._b,255))+"%)":"rgba("+a(100*_(this._r,255))+"%, "+a(100*_(this._g,255))+"%, "+a(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&h[y(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+w(this._r,this._g,this._b,this._a),r=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(r=t?b(t).toHex8String():r)+")"},toString:function(t){var e=!!t,r=(t=t||this._format,!1),n=this._a<1&&0<=this._a;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),(r="hsv"===t?this.toHsvString():r)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){t=t.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(H,arguments)},brighten:function(){return this._applyModification(F,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(M,arguments)},greyscale:function(){return this._applyModification(R,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(q,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},b.fromRatio=function(t,e){if("object"==typeof t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:C(t[r]));t=n}return b(t,e)},b.equals=function(t,e){return!(!t||!e)&&b(t).toRgbString()==b(e).toRgbString()},b.random=function(){return b.fromRatio({r:r(),g:r(),b:r()})},b.mix=function(t,e,r){r=0===r?0:r||50;var t=b(t).toRgb(),e=b(e).toRgb(),r=r/100,n=2*r-1,a=e.a-t.a,n=n*a==-1?n:(n+a)/(1+n*a),a=1-(n=(n+1)/2),n={r:e.r*n+t.r*a,g:e.g*n+t.g*a,b:e.b*n+t.b*a,a:e.a*r+t.a*(1-r)};return b(n)},b.readability=function(t,e){var t=b(t),e=b(e),r=t.toRgb(),n=e.toRgb(),t=t.getBrightness(),e=e.getBrightness(),r=Math.max(r.r,n.r)-Math.min(r.r,n.r)+Math.max(r.g,n.g)-Math.min(r.g,n.g)+Math.max(r.b,n.b)-Math.min(r.b,n.b);return{brightness:Math.abs(t-e),color:r}},b.isReadable=function(t,e){t=b.readability(t,e);return 125<t.brightness&&500<t.color},b.mostReadable=function(t,e){for(var r=null,n=0,a=!1,o=0;o<e.length;o++){var i=b.readability(t,e[o]),s=125<i.brightness&&500<i.color,i=i.brightness/125*3+i.color/500;(s&&!a||s&&a&&n<i||!s&&!a&&n<i)&&(a=s,n=i,r=b(e[o]))}return r},l=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},h=b.hexNames=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[t[e]]=e);return r}(l),d="[\\s|\\(]+("+(u="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",u="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",p={rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+u),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+u),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+u),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},window.tinycolor=b,Tt(function(){Tt.fn.spectrum.load&&Tt.fn.spectrum.processNativeColorInputs()})});
/*global self, document, DOMException */
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||!function(t){"use strict";if("Element"in t){var n="classList",e="prototype",t=t.Element[e],i=Object,s=String[e].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[e].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},l=function(e){for(var t=s.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=l[e]=[],d=function(){return new l(this)};if(r[e]=Error[e],c.item=function(e){return this[e]||null},c.contains=function(e){return-1!==a(this,e+="")},c.add=function(){for(var e,t=arguments,n=0,i=t.length,o=!1;-1===a(this,e=t[n]+"")&&(this.push(e),o=!0),++n<i;);o&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,i=0,o=n.length,s=!1;do{for(t=a(this,e=n[i]+"");-1!==t;)this.splice(t,1),s=!0,t=a(this,e)}while(++i<o);s&&this._updateClassName()},c.toggle=function(e,t){var n=this.contains(e+=""),i=n?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!n},c.toString=function(){return this.join(" ")},i.defineProperty){c={get:d,enumerable:!0,configurable:!0};try{i.defineProperty(t,n,c)}catch(e){-2146823252===e.number&&(c.enumerable=!1,i.defineProperty(t,n,c))}}else i[e].__defineGetter__&&t.__defineGetter__(n,d)}}(self),
/* Blob.js
 * A Blob implementation.
 * 2014-07-24
 *
 * By Eli Grey, http://eligrey.com
 * By Devin Samarin, https://github.com/dsamarin
 * License: X11/MIT
 *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return new Blob}catch(e){}var s=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){function a(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}function t(){this.data=[]}function l(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n}function c(e){this.code=this[this.name=e]}var n=t.prototype,i=l.prototype,d=e.FileReaderSync,o="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),s=o.length,r=e.URL||e.webkitURL||e,u=r.createObjectURL,h=r.revokeObjectURL,m=r,f=e.btoa,p=e.atob,g=e.ArrayBuffer,b=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(l.fake=i.fake=!0;s--;)c.prototype[o[s]]=s+1;return(m=r.createObjectURL?m:e.URL=function(e){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");return t.href=e,"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(e=e.match(v),t.origin=e&&e[1])),t}).createObjectURL=function(e){var t=e.type;return null===t&&(t="application/octet-stream"),e instanceof l?(t="data:"+t,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):u?u.call(r,e):void 0},m.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(r,e)},n.append=function(e){var t=this.data;if(b&&(e instanceof g||e instanceof b)){for(var n="",i=new b(e),o=0,s=i.length;o<s;o++)n+=String.fromCharCode(i[o]);t.push(n)}else if("Blob"===a(e)||"File"===a(e)){if(!d)throw new c("NOT_READABLE_ERR");var r=new d;t.push(r.readAsBinaryString(e))}else e instanceof l?"base64"===e.encoding&&p?t.push(p(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data):("string"!=typeof e&&(e+=""),t.push(unescape(encodeURIComponent(e))))},n.getBlob=function(e){return arguments.length||(e=null),new l(this.data.join(""),e,"raw")},n.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,n){var i=arguments.length;return i<3&&(n=null),new l(this.data.slice(e,1<i?t:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},t}(e),t=(e.Blob=function(e,t){var t=t&&t.type||"",n=new s;if(e)for(var i=0,o=e.length;i<o;i++)Uint8Array&&e[i]instanceof Uint8Array?n.append(e[i].buffer):n.append(e[i]);t=n.getBlob(t);return!t.slice&&t.webkitSlice&&(t.slice=t.webkitSlice),t},Object.getPrototypeOf||function(e){return e.__proto__});e.Blob.prototype=t(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module&&"undefined"!=typeof process&&process&&process.versions&&process.versions.electron||"object"!=typeof module?"function"==typeof define&&define.amd?define(function(){return t}):e.MediumEditor=t:module.exports=t}(this,function(){"use strict";function b(e,t){return this.init(e,t)}b.extensions={};var e=window;function t(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var o=0;o<i.length;o++){var s=i[o];if(s)for(n in s)s.hasOwnProperty(n)&&void 0!==s[n]&&(e||!1===t.hasOwnProperty(n))&&(t[n]=s[n])}return t}var o=!1;try{var n=document.createElement("div"),i=document.createTextNode(" ");n.appendChild(i),o=n.contains(i)}catch(e){}var s,r,a,l,c,d,u,h,m,f,p={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:-1<navigator.userAgent.toLowerCase().indexOf("firefox"),isMac:0<=e.navigator.platform.toUpperCase().indexOf("MAC"),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return!!(p.isMac&&e.metaKey||!p.isMac&&e.ctrlKey)},isKey:function(e,t){e=p.getKeyCode(e);return!1===Array.isArray(t)?e===t:-1!==t.indexOf(e)},getKeyCode:function(e){var t=e.which;return t=null===t?null!==e.charCode?e.charCode:e.keyCode:t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return t.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return t.apply(this,e)},createLink:function(e,t,n,i){e=e.createElement("a");return p.moveTextRangeIntoElement(t[0],t[t.length-1],e),e.setAttribute("href",n),i&&("_blank"===i&&e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target",i)),e},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),o=[],s=0,r=!1,a=null,l=null;null!==(a=i.nextNode());)if(!(3<a.nodeType))if(3===a.nodeType){if(!r&&n.start<s+a.nodeValue.length&&(r=!0,l=p.splitStartNodeIfNeeded(a,n.start,s)),r&&p.splitEndNodeIfNeeded(a,l,n.end,s),r&&s===n.end)break;if(r&&s>n.end+1)throw new Error("PerformLinking overshot the target!");r&&o.push(l||a),s+=a.nodeValue.length,null!==l&&(s+=l.nodeValue.length,i.nextNode()),l=null}else"img"===a.tagName.toLowerCase()&&(r=!r&&n.start<=s||r)&&o.push(a);return o},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var o=i+e.nodeValue.length+(t?t.nodeValue.length:0)-1,s=n-i-(t?e.nodeValue.length:0);n<=o&&i!==o&&0!=s&&(t||e).splitText(s)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var t=[],n=b.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(n).length)return[e];for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];3===o.nodeType?t.push(o):1===o.nodeType&&(0===o.querySelectorAll(n).length?t.push(o):t=t.concat(b.util.splitByBlockElements(o)))}return t},findAdjacentTextNodeWithContent:function(e,t,n){for(var i=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1),s=o.nextNode();s;){if(s===t)i=!0;else if(i&&3===s.nodeType&&s.nodeValue&&0<s.nodeValue.trim().length)break;s=o.nextNode()}return s},findPreviousSibling:function(e){if(!e||p.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!p.isMediumEditorElement(e.parentNode);)t=(e=e.parentNode).previousSibling;return t},isDescendant:function(e,t,n){if(e&&t){if(e===t)return!!n;if(1===e.nodeType){if(o||3!==t.nodeType)return e.contains(t);for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}}}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(n,i){function o(){c=Date.now(),l=null,a=n.apply(s,r),l||(s=r=null)}var s,r,a,l=null,c=0;return i||0===i||(i=50),function(){var e=Date.now(),t=i-(e-c);return s=this,r=arguments,t<=0||i<t?(l&&(clearTimeout(l),l=null),c=e,a=n.apply(s,r),l||(s=r=null)):l=l||setTimeout(o,t),a}},traverseUp:function(e,t){if(e)do{if(1===e.nodeType){if(t(e))return e;if(p.isMediumEditorElement(e))return!1}}while(e=e.parentNode);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,t){var n,i,o,s,r,a,l=!1,c=["insertHTML",!1,t];if(!b.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,c)}catch(e){}if((n=e.getSelection()).rangeCount){if(a=(n=n.getRangeAt(0)).commonAncestorContainer,p.isMediumEditorElement(a)&&!a.firstChild)n.selectNode(a.appendChild(e.createTextNode("")));else if(3===a.nodeType&&0===n.startOffset&&n.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===n.toString()){for(;!p.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!p.isMediumEditorElement(a.parentNode);)a=a.parentNode;n.selectNode(a)}for(n.deleteContents(),(i=e.createElement("div")).innerHTML=t,o=e.createDocumentFragment();i.firstChild;)s=i.firstChild,r=o.appendChild(s);n.insertNode(o),r&&((n=n.cloneRange()).setStartAfter(r),n.collapse(!0),b.selection.selectRange(e,n)),l=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(c,l),l},execFormatBlock:function(e,t){var n=p.getTopBlockContainer(b.selection.getSelectionStart(e));if("blockquote"===t){if(n&&Array.prototype.slice.call(n.childNodes).some(function(e){return p.isBlockContainer(e)}))return e.execCommand("outdent",!1,null);if(p.isIE)return e.execCommand("indent",!1,t)}if(n&&t===n.nodeName.toLowerCase()&&(t="p"),p.isIE&&(t="<"+t+">"),n&&"blockquote"===n.nodeName.toLowerCase()){if(p.isIE&&"<p>"===t)return e.execCommand("outdent",!1,t);if((p.isFF||p.isEdge)&&"p"===t)return Array.prototype.slice.call(n.childNodes).some(function(e){return!p.isBlockContainer(e)})&&e.execCommand("formatBlock",!1,t),e.execCommand("outdent",!1,t)}return e.execCommand("formatBlock",!1,t)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank",e.rel="noopener noreferrer";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)!1!==i&&i!==e[n].attributes.href.value||(e[n].target="_blank",e[n].rel="noopener noreferrer")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target"),e.removeAttribute("rel");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&(e[n].removeAttribute("target"),e[n].removeAttribute("rel"))},addClassToAnchors:function(e,t){var n,i,o=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<o.length;i+=1)e.classList.add(o[i]);else{var s,t=e.getElementsByTagName("a");for(e=0===t.length?(s=p.getClosestTag(e,"a"))?[s]:[]:t,n=0;n<e.length;n+=1)for(i=0;i<o.length;i+=1)e[n].classList.add(o[i])}},isListItem:function(e){if(e){if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!p.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(!(t=t.parentNode))return!1;n=t.nodeName.toLowerCase()}}return!1},cleanListDOM:function(e,t){var n;"li"===t.nodeName.toLowerCase()&&"p"===(n=t.parentElement).parentElement.nodeName.toLowerCase()&&(p.unwrap(n.parentElement,e),b.selection.moveCursor(e,t.firstChild,t.firstChild.textContent.length))},splitOffDOMTree:function(e,t,n){for(var i=t,o=null,s=!n;i!==e;){var r,a=i.parentNode,l=a.cloneNode(!1),c=s?i:a.firstChild;for(o&&(s?l.appendChild(o):r=o),o=l;c;)var d=c.nextSibling,c=c===i?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),s?d:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),d);r&&o.appendChild(r),i=a}return o},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i,o=p.findCommonRoot(e,t);if(!o)return!1;if(t===e)i=e.parentNode,d=e.nextSibling,i.removeChild(e),n.appendChild(e),d?i.insertBefore(n,d):i.appendChild(n);else{for(var s,r,a,l=[],c=0;c<o.childNodes.length;c++)if(a=o.childNodes[c],s){if(p.isDescendant(a,t,!0)){r=a;break}l.push(a)}else p.isDescendant(a,e,!0)&&(s=a);var d=r.nextSibling,u=o.ownerDocument.createDocumentFragment();s===e?(s.parentNode.removeChild(s),u.appendChild(s)):u.appendChild(p.splitOffDOMTree(s,e)),l.forEach(function(e){e.parentNode.removeChild(e),u.appendChild(e)}),r===t?(r.parentNode.removeChild(r),u.appendChild(r)):u.appendChild(p.splitOffDOMTree(r,t,!0)),n.appendChild(u),r.parentNode===o?o.insertBefore(n,r):d?o.insertBefore(n,d):o.appendChild(n)}return n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=p.depthOfNode(e),i=p.depthOfNode(t),o=e,s=t;n!==i;)i<n?(o=o.parentNode,--n):(s=s.parentNode,--i);for(;o!==s;)o=o.parentNode,s=s.parentNode;return o},isElementAtBeginningOfBlock:function(e){for(var t;!p.isBlockContainer(e)&&!p.isMediumEditorElement(e);){for(t=e;t=t.previousSibling;)if(0<(3===t.nodeType?t.nodeValue:t.textContent).length)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return p.traverseUp(e,function(e){return p.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&-1!==p.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())},getClosestBlockContainer:function(e){return p.traverseUp(e,function(e){return p.isBlockContainer(e)||p.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!p.isBlockContainer(e)&&e;return p.traverseUp(e,function(e){return!((t=p.isBlockContainer(e)?e:t)||!p.isMediumEditorElement(e)||(t=e,0))}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;var t;return e="table"===(e=p.traverseUp(e,function(e){return-1===p.emptyElementNames.indexOf(e.nodeName.toLowerCase())})).nodeName.toLowerCase()&&(t=e.querySelector("th, td"))?t:e},getFirstTextNode:function(e){return p.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),p._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=p._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return-1===e.indexOf("://")?"http://"+e:e},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(e,t,n){e=e+" is deprecated, please use "+t+" instead.";n&&(e+=" Will be removed in "+n),p.warn(e)},deprecatedMethod:function(e,t,n,i){p.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(t,e){e.forEach(function(e){t.removeAttribute(e)})},cleanupTags:function(e,t){-1!==t.indexOf(e.nodeName.toLowerCase())&&e.parentNode.removeChild(e)},unwrapTags:function(e,t){-1!==t.indexOf(e.nodeName.toLowerCase())&&b.util.unwrap(e,document)},getClosestTag:function(e,t){return p.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),o=0;o<i.length;o++)n.appendChild(i[o]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};function g(e){b.util.extend(this,e)}function v(e){return b.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}function E(e,t){return e&&e.some(function(e){return"function"==typeof e.getInteractionElements&&!!(e=e.getInteractionElements())&&(e=Array.isArray(e)?e:[e]).some(function(e){return b.util.isDescendant(e,t,!0)})})}function C(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}}function y(e){e=b.util.getContainerEditorElement(e);Array.prototype.slice.call(e.parentElement.querySelectorAll("."+c)).forEach(function(e){e.classList.remove(c)})}function w(e){e.stopPropagation()}function x(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,o={};if(i&&(i.getData&&(e=i.getData("Text"))&&0<e.length&&(o["text/plain"]=e),i.types))for(var s=0;s<i.types.length;s++){var r=i.types[s];o[r]=i.getData(r)}return o}function T(e,t){(this.options.disableReturn||t.getAttribute("data-disable-return")||(this.options.disableDoubleReturn||t.getAttribute("data-disable-double-return"))&&((t=b.selection.getSelectionStart(this.options.ownerDocument))&&""===t.textContent.trim()&&"li"!==t.nodeName.toLowerCase()||t.previousElementSibling&&"br"!==t.previousElementSibling.nodeName.toLowerCase()&&""===t.previousElementSibling.textContent.trim()))&&e.preventDefault()}function k(e){var t,n=b.selection.getSelectionStart(this.options.ownerDocument),i=n.nodeName.toLowerCase(),o=/^(\s+|<br\/?>)?$/i,s=/h\d/i,r=S(n);if(b.util.isKey(e,[b.util.keyCode.BACKSPACE,b.util.keyCode.ENTER])&&n.previousElementSibling&&s.test(i)&&0===b.selection.getCaretOffsets(n).left)b.util.isKey(e,b.util.keyCode.BACKSPACE)&&o.test(n.previousElementSibling.innerHTML)?(n.previousElementSibling.parentNode.removeChild(n.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&b.util.isKey(e,b.util.keyCode.ENTER)&&((t=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.previousElementSibling.parentNode.insertBefore(t,n),e.preventDefault());else if(b.util.isKey(e,b.util.keyCode.DELETE)&&n.nextElementSibling&&n.previousElementSibling&&!s.test(i)&&o.test(n.innerHTML)&&s.test(n.nextElementSibling.nodeName.toLowerCase()))b.selection.moveCursor(this.options.ownerDocument,n.nextElementSibling),n.previousElementSibling.parentNode.removeChild(n),e.preventDefault();else if(b.util.isKey(e,b.util.keyCode.BACKSPACE)&&"li"===i&&o.test(n.innerHTML)&&!n.previousElementSibling&&!n.parentElement.previousElementSibling&&n.nextElementSibling&&"li"===n.nextElementSibling.nodeName.toLowerCase())(t=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.parentElement.parentElement.insertBefore(t,n.parentElement),b.selection.moveCursor(this.options.ownerDocument,t),n.parentElement.removeChild(n),e.preventDefault();else if(b.util.isKey(e,b.util.keyCode.BACKSPACE)&&!1!==b.util.getClosestTag(n,"blockquote")&&0===b.selection.getCaretOffsets(n).left)e.preventDefault(),b.util.execFormatBlock(this.options.ownerDocument,"p");else if(b.util.isKey(e,b.util.keyCode.ENTER)&&!1!==b.util.getClosestTag(n,"blockquote")&&0===b.selection.getCaretOffsets(n).right)(t=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.parentElement.insertBefore(t,n.nextSibling),b.selection.moveCursor(this.options.ownerDocument,t),e.preventDefault();else if(b.util.isKey(e,b.util.keyCode.BACKSPACE)&&b.util.isMediumEditorElement(n.parentElement)&&!n.previousElementSibling&&n.nextElementSibling&&o.test(n.innerHTML))e.preventDefault(),b.selection.moveCursor(this.options.ownerDocument,n.nextSibling),n.parentElement.removeChild(n);else if(b.util.isKey(e,b.util.keyCode.BACKSPACE)&&r&&r.previousElementSibling&&0===b.selection.getCaretOffsets(n).left){if(e.preventDefault(),0===r.previousElementSibling.innerText.trim().length){for(;r.previousElementSibling.firstChild;)r.previousElementSibling.removeChild(r.previousElementSibling.firstChild);b.selection.moveCursor(this.options.ownerDocument,r.previousElementSibling)}else{s=function(e){var t,n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);for(;t=i.nextNode();)n.push(t);return n}(r.previousElementSibling);i=s[s.length-1],t=void 0!==(t=s[s.length-1].length)?t:0,o=document.createRange(),n=window.getSelection(),o.setStart(i,t),o.collapse(!0),n.removeAllRanges(),n.addRange(o)}for(;0<r.childNodes.length;)r.previousElementSibling.appendChild(r.childNodes[0]);r.remove()}}function S(e){var t=e.nodeName.toLowerCase();return!b.util.isMediumEditorElement(e)&&(/h\d/i.test(t)?e:S(e.parentNode))}function A(e,t,n){var i=[];if("string"==typeof(e=e||[])&&(e=t.querySelectorAll(e)),b.util.isElement(e)&&(e=[e]),n)for(var o=0;o<e.length;o++){var s=e[o];!b.util.isElement(s)||s.getAttribute("data-medium-editor-element")||s.getAttribute("medium-editor-textarea-id")||i.push(s)}else i=Array.prototype.slice.apply(e);return i}function N(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function L(e,t,n){var i,o,n={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return i=e,o=n,Object.keys(o).forEach(function(e){void 0===i[e]&&(i[e]=o[e])}),"function"==typeof(e=i).init&&e.init(),e.name||(e.name=t),e}function D(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&!1!==this.options.toolbar}function P(e,t){var n;return e.getAttribute("data-medium-editor-element")||("textarea"===e.nodeName.toLowerCase()&&(e=function(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,o=e.attributes;this.options.ownerDocument.getElementById(i);)i="medium-editor-"+ ++n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var s=0,r=o.length;s<r;s++)t.hasAttribute(o[s].nodeName)||t.setAttribute(o[s].nodeName,o[s].value);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=function(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=T.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",function(e){var t=b.selection.getSelectionStart(this.options.ownerDocument);!t||b.util.isKey(e,b.util.keyCode.ENTER)&&void 0!==this.options.extensions["rexbutton-input"]&&this.options.extensions["rexbutton-input"].insideRexButton(t)||(b.util.isMediumEditorElement(t)&&0===t.children.length&&!b.util.isBlockContainer(t)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!b.util.isKey(e,b.util.keyCode.ENTER))||b.util.isListItem(t)||b.util.isBlockContainer(t)||("a"===t.nodeName.toLowerCase()?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||S(t)||this.options.ownerDocument.execCommand("formatBlock",!1,"p"))}.bind(this)),n=b.util.guid(),e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",t),e.setAttribute("medium-editor-index",n),f[n]=e.innerHTML,this.events.attachAllEventsToElement(e)),e}function B(){this.subscribe("editableKeydownTab",function(e){var t=b.selection.getSelectionStart(this.options.ownerDocument);"pre"===(t&&t.nodeName.toLowerCase())&&(e.preventDefault(),b.util.insertHTMLCommand(this.options.ownerDocument,"    ")),b.util.isListItem(t)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}.bind(this)),this.subscribe("editableKeydownDelete",k.bind(this)),this.subscribe("editableKeydownEnter",k.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",function(e){var t=(n=b.selection.getSelectionStart(this.options.ownerDocument)).textContent,n=b.selection.getCaretOffsets(n);(void 0===t[n.left-1]||""===t[n.left-1].trim()||void 0!==t[n.left]&&""===t[n.left].trim())&&e.preventDefault()}.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=T.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function F(){this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(L(this.options.extensions[e],e,this))},this),function(){return!this.options.extensions.imageDragging}.call(this)&&((n=this.options.fileDragging)||(n={},function(){return!1!==this.options.imageDragging}.call(this))||(n.allowedTypes=[]),this.addBuiltInExtension("fileDragging",n));var e,t={paste:!0,"anchor-preview":function(){return!!D.call(this)&&!1!==this.options.anchorPreview}.call(this),autoLink:function(){return!1!==this.options.autoLink}.call(this),keyboardCommands:function(){return!1!==this.options.keyboardCommands}.call(this),placeholder:function(){return!1!==this.options.placeholder}.call(this)},n=(Object.keys(t).forEach(function(e){t[e]&&this.addBuiltInExtension(e)},this),this.options.extensions.toolbar);!n&&D.call(this)&&(e=b.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection}),n=new b.extensions.toolbar(e)),n&&this.extensions.push(L(n,"toolbar",this))}function M(e,t){var n,i,o=/^append-(.+)$/gi.exec(e);return o?b.util.execFormatBlock(this.options.ownerDocument,o[1]):"fontSize"===e?(t.size&&b.util.deprecated(".size option for fontSize command",".value","6.0.0"),n=t.value||t.size,this.options.ownerDocument.execCommand("fontSize",!1,n)):"fontName"===e?(t.name&&b.util.deprecated(".name option for fontName command",".value","6.0.0"),n=t.value||t.name,this.options.ownerDocument.execCommand("fontName",!1,n)):"createLink"===e?this.createLink(t):"image"===e?(o=this.options.contentWindow.getSelection().toString().trim(),this.options.ownerDocument.execCommand("insertImage",!1,o)):"html"===e?(o=this.options.contentWindow.getSelection().toString().trim(),b.util.insertHTMLCommand(this.options.ownerDocument,o)):/justify([A-Za-z]*)$/g.exec(e)?(o=this.options.ownerDocument.execCommand(e,!1,null),(i=b.selection.getSelectedParentElement(b.selection.getSelectionRange(this.options.ownerDocument)))&&function(e){var n,t;e&&(t=Array.prototype.slice.call(e.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t})).length&&(this.saveSelection(),t.forEach(function(e){var t;e.style.textAlign===n&&(t=e.lastChild)&&(b.util.unwrap(e,this.options.ownerDocument),e=this.options.ownerDocument.createElement("BR"),t.parentNode.insertBefore(e,t.nextSibling))},this),e.style.textAlign=n,this.restoreSelection())}.call(this,b.util.getTopBlockContainer(i)),o):(n=t&&t.value,this.options.ownerDocument.execCommand(e,!1,n))}return b.util=p,g.extend=function(e){function t(){this.constructor=i}var n=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)};b.util.extend(i,n);return t.prototype=n.prototype,i.prototype=new t,e&&b.util.extend(i.prototype,e),i},g.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){g.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),b.Extension=g,b.selection={findMatchingSelectionParent:function(e,t){var t=t.getSelection();return 0!==t.rangeCount&&(t=t.getRangeAt(0).commonAncestorContainer,b.util.traverseUp(t,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return b.util.isMediumEditorElement(e)},e)},exportSelection:function(e,t){var n,i,o,s;return e?(n=null,0<(i=t.getSelection()).rangeCount&&((o=(i=i.getRangeAt(0)).cloneRange()).selectNodeContents(e),o.setEnd(i.startContainer,i.startOffset),n={start:o=o.toString().length,end:o+i.toString().length},this.doesRangeStartWithImages(i,t)&&(n.startsWithImage=!0),(s=this.getTrailingImageCount(e,n,i.endContainer,i.endOffset))&&(n.trailingImageCount=s),0!==o)&&-1!==(s=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,i.startContainer,i.startOffset))&&(n.emptyBlocksIndex=s),n):null},importSelection:function(e,t,n,i){if(e&&t){var o,s=n.createRange(),r=(s.setStart(t,0),s.collapse(!0),t),a=[],l=0,c=!1,d=!1,u=0,h=!1,m=!1,f=null;for((i||e.startsWithImage||void 0!==e.emptyBlocksIndex)&&(m=!0);!h&&r;)if(3<r.nodeType)r=a.pop();else{if(3!==r.nodeType||d){if(e.trailingImageCount&&d&&("img"===r.nodeName.toLowerCase()&&u++,u===e.trailingImageCount)){for(var p=0;r.parentNode.childNodes[p]!==r;)p++;s.setEnd(r.parentNode,p+1),h=!0}if(!h&&1===r.nodeType)for(var g=r.childNodes.length-1;0<=g;)a.push(r.childNodes[g]),--g}else o=l+r.length,!c&&e.start>=l&&e.start<=o&&(m||e.start<o?(s.setStart(r,e.start-l),c=!0):f=r),c&&e.end>=l&&e.end<=o&&(e.trailingImageCount?d=!0:(s.setEnd(r,e.end-l),h=!0)),l=o;h||(r=a.pop())}!c&&f&&(s.setStart(f,f.length),s.setEnd(f,f.length)),void 0!==e.emptyBlocksIndex&&(s=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,s)),i&&(s=this.importSelectionMoveCursorPastAnchor(e,s)),this.selectRange(n,s)}},importSelectionMoveCursorPastAnchor:function(e,t){if(e.start===e.end&&3===t.startContainer.nodeType&&t.startOffset===t.startContainer.nodeValue.length&&b.util.traverseUp(t.startContainer,function(e){return"a"===e.nodeName.toLowerCase()})){for(var n=t.startContainer,i=t.startContainer.parentNode;null!==i&&"a"!==i.nodeName.toLowerCase();)i=i.childNodes[i.childNodes.length-1]!==n?null:(n=i).parentNode;if(null!==i&&"a"===i.nodeName.toLowerCase()){for(var o=null,s=0;null===o&&s<i.parentNode.childNodes.length;s++)i.parentNode.childNodes[s]===i&&(o=s);t.setStart(i.parentNode,o+1),t.collapse(!0)}}return t},importSelectionMoveCursorPastBlocks:function(e,t,n,i){var o,s,r=e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,v,!1),e=i.startContainer,a=0;for(n=n||1,o=3===e.nodeType&&b.util.isBlockContainer(e.previousSibling)?e.previousSibling:b.util.getClosestBlockContainer(e);r.nextNode();)if(s){if(s=r.currentNode,++a===n)break;if(0<s.textContent.length)break}else o===r.currentNode&&(s=r.currentNode);return i.setStart(b.util.getFirstSelectableLeafNode(s=s||o),0),i},getIndexRelativeToAdjacentEmptyBlocks:function(e,t,n,i){if(0<n.textContent.length&&0<i)return-1;var o=n;if(o=3!==o.nodeType?n.childNodes[i]:o){if(!b.util.isElementAtBeginningOfBlock(o))return-1;i=b.util.findPreviousSibling(o);if(!i)return-1;if(i.nodeValue)return-1}for(var s=b.util.getClosestBlockContainer(n),r=e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,v,!1),a=0;r.nextNode();){var l=""===r.currentNode.textContent;if((l||0<a)&&(a+=1),r.currentNode===s)return a;l||(a=0)}return a},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"!==e.startContainer.nodeName.toLowerCase()){var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var o=i.currentNode;if(o===n)break;if(o.nodeValue)return!1}}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var o=n.childNodes[i-1];o.hasChildNodes();)o=o.lastChild;for(var s,r=e,a=[],l=0,c=!1,d=!1,u=!1,h=0;!u&&r;)if(3<r.nodeType)r=a.pop();else{if(3!==r.nodeType||d){if("img"===r.nodeName.toLowerCase()&&h++,r===o)u=!0;else if(1===r.nodeType)for(var m=r.childNodes.length-1;0<=m;)a.push(r.childNodes[m]),--m}else h=0,s=l+r.length,(c=!c&&t.start>=l&&t.start<=s?!0:c)&&t.end>=l&&t.end<=s&&(d=!0),l=s;u||(r=a.pop())}return h},selectionContainsContent:function(e){var e=e.getSelection();return!(!e||e.isCollapsed||!e.rangeCount||""===e.toString().trim()&&(!(e=this.getSelectedParentElement(e.getRangeAt(0)))||!("img"===e.nodeName.toLowerCase()||1===e.nodeType&&e.querySelector("img"))))},selectionInContentEditableFalse:function(e){var n,e=this.findMatchingSelectionParent(function(e){var t=e&&e.getAttribute("contenteditable");return"true"===t&&(n=!0),"#text"!==e.nodeName&&"false"===t},e);return!n&&e},getSelectionHtml:function(e){var t,n,i,o="",s=e.getSelection();if(s.rangeCount){for(i=e.createElement("div"),t=0,n=s.rangeCount;t<n;t+=1)i.appendChild(s.getRangeAt(t).cloneContents());o=i.innerHTML}return o},getCaretOffsets:function(e,t){var n=(t=t||window.getSelection().getRangeAt(0)).cloneRange(),i=t.cloneRange();return n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i=e.getSelection();if(!i.rangeCount||i.isCollapsed||!i.getRangeAt(0).commonAncestorContainer)return[];if(3!==(e=i.getRangeAt(0)).commonAncestorContainer.nodeType)return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof i.containsNode||i.containsNode(e,!0)});for(t=[],n=e.commonAncestorContainer;n.parentNode&&1===n.parentNode.childNodes.length;)t.push(n.parentNode),n=n.parentNode;return t},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,o){var s=e.createRange();return s.setStart(t,n),i?s.setEnd(i,o):s.collapse(!0),this.selectRange(e,s),s},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){e=e.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(e,t){e=e.getSelection();e.removeAllRanges(),e.addRange(t)},getSelectionStart:function(e){e=e.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e}},C.prototype={InputEventOnContenteditableSupported:!b.util.isIE&&!b.util.isEdge,attachDOMEvent:function(e,t,n,i){var o=this.base.options.contentWindow,s=this.base.options.ownerDocument;e=b.util.isElement(e)||-1<[o,s].indexOf(e)?[e]:e,Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n,i),this.events.push([e,t,n,i])}.bind(this))},detachDOMEvent:function(e,t,n,i){var o,s=this.base.options.contentWindow,r=this.base.options.ownerDocument;e&&(e=b.util.isElement(e)||-1<[s,r].indexOf(e)?[e]:e,Array.prototype.forEach.call(e,function(e){-1!==(o=this.indexOfListener(e,t,n,i))&&(o=this.events.splice(o,1)[0])[0].removeEventListener(o[1],o[2],o[3])}.bind(this)))},indexOfListener:function(e,t,n,i){for(var o,s=0,r=this.events.length;s<r;s+=1)if((o=this.events[s])[0]===e&&o[1]===t&&o[2]===n&&o[3]===i)return s;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")}),n=0,i=e.length;n<i;n++){var o=e[n];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(e){this.attachDOMEvent(t,e.name,e.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){t=this.indexOfCustomListener(e,t);-1!==t&&this.customEvents[e].splice(t,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){"editableInput"==e&&t.inputType,this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e,t=this.options.ownerDocument;this.execCommandListener&&t.execCommand.listeners&&(-1!==(e=t.execCommand.listeners.indexOf(this.execCommandListener))&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand())},wrapExecCommand:function(){var n,e,i=this.options.ownerDocument;i.execCommand.listeners||(n=function(t,n){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},(e=function(){var e,t=i.execCommand.orig.apply(this,arguments);return i.execCommand.listeners&&(e=Array.prototype.slice.call(arguments),n(e,t)),t}).orig=i.execCommand,e.listeners=[],e.callListeners=n,i.execCommand=e)},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(t,n){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(e){this.attachDOMEvent(e,t,n.bind(this))},this),this.eventsCache.push({name:t,handler:n})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache)&&delete this.contentCache[t]},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(t,e){var n,i=this.base.getFocusedElement(),o=((n=i&&"click"===e.type&&this.lastMousedownTarget&&(b.util.isDescendant(i,this.lastMousedownTarget,!0)||E(this.base.extensions,this.lastMousedownTarget))?i:n)||this.base.elements.some(function(e){return!!(n=!n&&b.util.isDescendant(e,t,!0)?e:n)},this),!b.util.isDescendant(i,t,!0)&&!E(this.base.extensions,t));n!==i&&(i&&o&&(i.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",e,i)),n)&&(n.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",e,n)),o&&this.triggerCustomEvent("externalInteraction",e)},updateInput:function(e,t){var n,i;this.contentCache&&(n=e.getAttribute("medium-editor-index"),(i=e.innerHTML)!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i)},handleDocumentSelectionChange:function(e){var t,n;e.currentTarget&&e.currentTarget.activeElement&&(t=e.currentTarget.activeElement,this.base.elements.some(function(e){return!!b.util.isDescendant(e,t,!0)&&(n=e,!0)},this),n)&&this.updateInput(n,{target:t,currentTarget:n})},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){var t;this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput&&(t={target:e.target,currentTarget:e.currentTarget},setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0))},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),b.util.isKey(e,b.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):b.util.isKey(e,b.util.keyCode.ENTER)||e.ctrlKey&&b.util.isKey(e,b.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):b.util.isKey(e,b.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):b.util.isKey(e,[b.util.keyCode.DELETE,b.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},b.Events=C,(s=b.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(e){s.isBuiltInButton(e)?b.Extension.call(this,this.defaults[e]):b.Extension.call(this,e)},init:function(){b.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(e){t.classList.add(e)}),t.setAttribute("data-action",this.getAction()),n&&(t.setAttribute("title",n),t.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(e){t.setAttribute(e,this.attrs[e])},this),"fontawesome"===i&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(e){e.preventDefault(),e.stopPropagation();e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return e=this.useQueryState?this.base.queryCommandState(this.getAction()):e},isAlreadyApplied:function(e){var t,n=!1,i=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(!(n=i&&0<i.length?-1!==i.indexOf(e.nodeName.toLowerCase()):n)&&this.style&&(i=this.style.value.split("|"),t=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),i.forEach(function(e){this.knownState||!(n=-1!==t.indexOf(e))&&"text-decoration"===this.style.prop||(this.knownState=n)},this)),n)}})).isBuiltInButton=function(e){return"string"==typeof e&&b.extensions.button.prototype.defaults.hasOwnProperty(e)},b.extensions.button=s,b.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}},n=b.extensions.button.extend({init:function(){b.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}}),b.extensions.form=n,i=b.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){b.extensions.form.prototype.init.apply(this,arguments),this.button.classList.add("hide-tool-rexbutton"),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();e=b.selection.getSelectionRange(this.document);return"a"===e.startContainer.nodeName.toLowerCase()||"a"===e.endContainer.nodeName.toLowerCase()||b.util.getClosestTag(b.selection.getSelectedParentElement(e),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){b.util.isKey(e,b.util.keyCode.K)&&b.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return b.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){b.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var t=this.getInput(),n=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox();"string"==typeof(e=e||{value:""})&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),b.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),t.value=e.value,t.focus(),n&&(n.checked="_blank"===e.target),i&&(t=e.buttonClass?e.buttonClass.split(" "):[],i.checked=-1!==t.indexOf(this.customClassOption))},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},ensureEncodedUri:function(e){return e===decodeURI(e)?encodeURI(e):e},ensureEncodedUriComponent:function(e){return e===decodeURIComponent(e)?encodeURIComponent(e):e},ensureEncodedParam:function(e){var e=e.split("="),t=e[0],e=e[1];return t+(void 0===e?"":"="+this.ensureEncodedUriComponent(e))},ensureEncodedQuery:function(e){return e.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i.test(e),n="",i=e.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),o=i[1],s=i[2],i=i[3];return/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(e)?"tel:"+e:(n=t||!(e=o.split("/")[0]).match(/.+(\.|:).+/)&&"localhost"!==e?n:"http://")+this.ensureEncodedUri(o)+(void 0===s?"":"?"+this.ensureEncodedQuery(s))+(void 0===i?"":"#"+i)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document.createElement("div");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),e.innerHTML=this.getTemplate(),this.attachFormEvents(e),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){e.keyCode===b.util.keyCode.ENTER?(e.preventDefault(),this.doFormSave()):e.keyCode===b.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel())},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}}),b.extensions.anchor=i,m=b.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n=this.window.innerWidth,i=this.anchorPreview.offsetHeight,o=e.getBoundingClientRect(),e=this.diffLeft,s=this.diffTop,r=this.getEditorOption("elementsContainer"),a=-1<["absolute","fixed"].indexOf(window.getComputedStyle(r).getPropertyValue("position")),l={},c=this.anchorPreview.offsetWidth/2,d=this.base.getExtensionByName("toolbar");d&&(e=d.diffLeft,s=d.diffTop),d=e-c,e=a?(t=r.getBoundingClientRect(),["top","left"].forEach(function(e){l[e]=o[e]-t[e]}),l.width=o.width,l.height=o.height,o=l,n=t.width,r.scrollTop):this.window.pageYOffset,a=o.left+o.width/2,e+=i+o.top+o.height-s-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(e)+"px",this.anchorPreview.style.right="initial",a<c?(this.anchorPreview.style.left=d+c+"px",this.anchorPreview.style.right="initial"):n-a<c?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=d+a+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){var e;n&&(e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")},t.showForm(e),n=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var t,e=b.util.getClosestTag(e.target,"a");if(!1!==e)return!((this.showOnEmptyLinks||/href=["']\S+["']/.test(e.outerHTML)&&!/href=["']#\S+["']/.test(e.outerHTML))&&(t=this.base.getExtensionByName("toolbar"),this.showWhenToolbarIsVisible||!t||!t.isDisplayed||!t.isDisplayed()))||(this.activeAnchor&&this.activeAnchor!==e&&this.detachPreviewHandlers(),this.anchorToPreview=e,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),void this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this)))},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor)&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}}),b.extensions.anchorPreview=m,r=[" ","\t","\n","\r","","","","","","\u2028","\u2029"],m="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",a=new RegExp("^("+m+")$","i"),l=new RegExp("(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.](com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw))","gi"),m=b.Extension.extend({init:function(){b.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||b.util.isKey(t,[b.util.keyCode.SPACE,b.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(e){window.console&&window.console.error("Failed to perform linking",e),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var t=b.util.splitByBlockElements(e),n=!1;0===t.length&&(t=[e]);for(var i=0;i<t.length;i++)n=this.removeObsoleteAutoLinkSpans(t[i])||n,n=this.performLinkingWithinElement(t[i])||n;return this.base.events.updateInput(e,{target:e,currentTarget:e}),n},removeObsoleteAutoLinkSpans:function(e){if(!e||3===e.nodeType)return!1;for(var t=e.querySelectorAll('span[data-auto-link="true"]'),n=!1,i=0;i<t.length;i++){var o,s=t[i].textContent;-1===s.indexOf("://")&&(s=b.util.ensureUrlHasProtocol(s)),t[i].getAttribute("data-href")===s||(o=t[i],b.util.getClosestTag(o,"a"))||(n=!0,o=s.replace(/\s+$/,""),t[i].getAttribute("data-href")===o?(s=s.length-o.length,o=b.util.splitOffDOMTree(t[i],this.splitTextBeforeEnd(t[i],s)),t[i].parentNode.insertBefore(o,t[i].nextSibling)):b.util.unwrap(t[i],this.document))}return n},splitTextBeforeEnd:function(e,t){for(var n,i,o,s=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),r=!0;r;)r=null!==s.lastChild();for(;0<t&&null!==o;)(i=(n=s.currentNode).nodeValue).length>t?(o=n.splitText(i.length-t),t=0):(o=s.previousNode(),t-=i.length);return o},performLinkingWithinElement:function(e){for(var t=this.findLinkableText(e),n=0;n<t.length;n++){var i=b.util.findOrCreateMatchingTextNodes(this.document,e,t[n]);this.shouldNotLink(i)||this.createAutoLink(i,t[n].href)}return!1},shouldNotLink:function(e){for(var t=!1,n=0;n<e.length&&!1===t;n++)t=!!b.util.traverseUp(e[n],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return t},findLinkableText:function(e){for(var t=e.textContent,n=null,i=[];null!==(n=l.exec(t));){var o=n.index+n[0].length;!(0!==n.index&&-1===r.indexOf(t[n.index-1])||o!==t.length&&-1===r.indexOf(t[o]))&&(-1!==n[0].indexOf("/")||a.test(n[0].split(".").pop().split("?").shift()))&&i.push({href:n[0],start:n.index,end:o})}return i},createAutoLink:function(e,t){t=b.util.ensureUrlHasProtocol(t);var n=b.util.createLink(this.document,e,t,this.getEditorOption("targetBlank")?"_blank":null),i=this.document.createElement("span");for(i.setAttribute("data-auto-link","true"),i.setAttribute("data-href",t),n.insertBefore(i,n.firstChild);1<n.childNodes.length;)i.appendChild(n.childNodes[1])}}),b.extensions.autoLink=m,c="medium-editor-dragover",m=b.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){b.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var t=e.target.classList?e.target:e.target.parentElement;y(t),"dragover"===e.type&&t.classList.add(c)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var t=this.base.exportSelection();t.start=t.end,this.base.importSelection(t),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),y(e.target)},isAllowedFile:function(t){return this.allowedTypes.some(function(e){return!!t.type.match(e)})},insertImageFile:function(e){var t;"function"==typeof FileReader&&((t=new FileReader).readAsDataURL(e),t.addEventListener("load",function(e){var t=this.document.createElement("img");t.src=e.target.result,b.util.insertHTMLCommand(this.document,t.outerHTML)}.bind(this)))}}),b.extensions.fileDragging=m,m=b.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){b.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n,i,o,e=b.util.getKeyCode(t);this.keys[e]&&(n=b.util.isMetaCtrlKey(t),i=!!t.shiftKey,o=!!t.altKey,this.keys[e].forEach(function(e){e.meta!==n||e.shift!==i||e.alt!==o&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this))}}),b.extensions.keyboardCommands=m,m=b.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){b.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){return e.preventDefault(),e.stopPropagation(),this.isDisplayed()||(e=this.document.queryCommandValue("fontName")+"",this.showForm(e)),!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),o=t.createElement("a"),s=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var r=0;r<this.fonts.length;r++)(e=t.createElement("option")).innerHTML=this.fonts[r],e.value=this.fonts[r],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){b.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}}),b.extensions.fontName=m,m=b.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){b.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){return e.preventDefault(),e.stopPropagation(),this.isDisplayed()||(e=this.document.queryCommandValue("fontSize")+"",this.showForm(e)),!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),e=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),e.setAttribute("href","#"),e.className="medium-editor-toobar-save",e.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(e),this.on(e,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){b.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}}),b.extensions.fontSize=m,d="%ME_PASTEBIN%",h=u=null,m=b.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){b.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(e){this.on(e,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(e,t){this.on(t,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){var n,i;!e.defaultPrevented&&(n=(i=x(e,this.window,this.document))["text/html"],i=i["text/plain"],(n=this.window.clipboardData&&void 0===e.clipboardData&&!n?i:n)||i)&&(e.preventDefault(),this.doPaste(n,i,t))},doPaste:function(e,t,n){var i,o,s="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(t){if(this.getEditorOption("disableReturn")||n&&n.getAttribute("data-disable-return"))s=b.util.htmlEntities(t);else if(1<(i=t.split(/[\r\n]+/g)).length)for(o=0;o<i.length;o+=1)""!==i[o]&&(s+="<p>"+b.util.htmlEntities(i[o])+"</p>");else s=b.util.htmlEntities(i[0]);b.util.insertHTMLCommand(this.document,s)}},handlePasteBinPaste:function(e){var t,n,i,o;e.defaultPrevented?this.removePasteBin():(t=x(e,this.window,this.document),n=t["text/html"],i=t["text/plain"],o=h,!this.cleanPastedHTML||n?(e.preventDefault(),this.removePasteBin(),this.doPaste(n,i,o),this.trigger("editablePaste",{currentTarget:o,target:o},o)):setTimeout(function(){this.cleanPastedHTML&&(n=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(n,i,o),this.trigger("editablePaste",{currentTarget:o,target:o},o)}.bind(this),0))},handleKeydown:function(e,t){b.util.isKey(e,b.util.keyCode.V)&&b.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(t))},createPasteBin:function(e){var t=b.selection.getSelectionRange(this.document),n=this.window.pageYOffset,e=(h=e,t&&((e=t.getClientRects()).length?n+=e[0].top:void 0!==t.startContainer.getBoundingClientRect?n+=t.startContainer.getBoundingClientRect().top:n+=t.getBoundingClientRect().top),u=t,this.document.createElement("div"));e.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),e.setAttribute("style","border: 1px red solid; position: absolute; top: "+n+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),e.setAttribute("contentEditable",!0),e.innerHTML=d,this.document.body.appendChild(e),this.on(e,"focus",w),this.on(e,"focusin",w),this.on(e,"focusout",w),e.focus(),b.selection.selectNode(e,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(e,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==u&&(b.selection.selectRange(this.document,u),u=null),null!==h&&(h=null);var e=this.getPasteBin();e&&(this.off(e,"focus",w),this.off(e,"focusin",w),this.off(e,"focusout",w),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e,t=this.getPasteBin();return!!t&&!(t.firstChild&&"mcepastebin"===t.firstChild.id||!(e=t.innerHTML)||e===d)&&e},cleanPaste:function(e){for(var t,n,i=/<p|<br|<div/.test(e),o=[].concat(this.preCleanReplacements||[],[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]],this.cleanReplacements||[]),s=0;s<o.length;s+=1)e=e.replace(o[s][0],o[s][1]);if(!i)return this.pasteHTML(e);for((i=this.document.createElement("div")).innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",t=i.querySelectorAll("a,p,div,br"),s=0;s<t.length;s+=1)switch((n=t[s]).innerHTML=n.innerHTML.replace(/\n/gi," "),n.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(n);break;case"br":this.filterLineBreak(n)}this.pasteHTML(i.innerHTML)},pasteHTML:function(e,t){t=b.util.defaults({},t,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var n,i,o,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),(s=s.querySelector("body")).innerHTML=e,this.cleanupSpans(s),n=s.querySelectorAll("*"),o=0;o<n.length;o+=1)"a"===(i=n[o]).nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&b.util.setTargetBlank(i),b.util.cleanupAttrs(i,t.cleanAttrs),b.util.cleanupTags(i,t.cleanTags),b.util.unwrapTags(i,t.unwrapTags);b.util.insertHTMLCommand(this.document,s.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){(this.isCommonBlock(e.previousElementSibling)||this.isCommonBlock(e.parentNode)&&(e.parentNode.firstChild===e||e.parentNode.lastChild===e)||e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent)&&this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(e){for(var t,n,i=e.querySelectorAll(".replace-with"),o=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")},s=0;s<i.length;s+=1)t=i[s],n=this.document.createElement(t.classList.contains("bold")?"b":"i"),t.classList.contains("bold")&&t.classList.contains("italic")?n.innerHTML="<i>"+t.innerHTML+"</i>":n.innerHTML=t.innerHTML,t.parentNode.replaceChild(n,t);for(i=e.querySelectorAll("span"),s=0;s<i.length;s+=1){if(t=i[s],b.util.traverseUp(t,o))return!1;b.util.unwrap(t,this.document)}}}),b.extensions.paste=m,m=b.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){b.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(b.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){if(e.querySelector("img, blockquote, ul, ol, table, form")||""!==e.textContent.replace(/^\s+|\s+$/g,""))return this.hidePlaceholder(e);t||this.showPlaceholder(e)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}}),b.extensions.placeholder=m,m=b.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){b.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),(this.relativeContainer||this.getEditorOption("elementsContainer")).appendChild(this.getToolbarElement())},forEachExtension:function(t,n){return this.base.extensions.forEach(function(e){if(e!==this)return t.apply(n||this,arguments)},this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension(function(e){e.hasForm&&t.appendChild(e.getForm())}),this.attachEventHandlers(),t},createToolbarButtons:function(){var t,e,n,i,o=this.document.createElement("ul");return o.id="medium-editor-toolbar-actions"+this.getEditorId(),o.className="medium-editor-toolbar-actions",o.style.display="block",this.buttons.forEach(function(e){i="string"==typeof e?(n=e,null):(n=e.name,e),(i=this.base.addBuiltInExtension(n,i))&&"function"==typeof i.getButton&&(i=i.getButton(this.base),t=this.document.createElement("li"),b.util.isElement(i)?t.appendChild(i):t.innerHTML=i,o.appendChild(t))},this),0<(e=o.querySelectorAll("button")).length&&(e[0].classList.add(this.firstButtonClass),e[e.length-1].classList.add(this.lastButtonClass)),o},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=b.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){if(e&&e.target&&b.util.isDescendant(this.getToolbarElement(),e.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var e=new RegExp("<("+b.util.blockContainerElementNames.join("|")+")[^>]*>","g"),e=b.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(e);return!!e&&1<e.length},modifySelection:function(){var e=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&e.startContainer.nodeValue&&e.startOffset===e.startContainer.nodeValue.length){var t=b.util.findAdjacentTextNodeWithContent(b.selection.getSelectionElement(this.window),e.startContainer,this.document);if(t){for(var n=0;0===t.nodeValue.substr(n,1).trim().length;)n+=1;b.selection.select(this.document,t,n,e.endContainer,e.endOffset)}}},checkState:function(){var e;if(!this.base.preventSelectionUpdates)return!this.base.getFocusedElement()||b.selection.selectionInContentEditableFalse(this.window)||!(e=b.selection.getSelectionElement(this.window))||-1===this.getEditorElements().indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!b.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){function e(e){"function"==typeof e.checkState?e.checkState(n):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(n)&&e.setActive()}var t,n,i=[],o=b.selection.getSelectionRange(this.document);if(o&&(this.forEachExtension(function(e){"function"==typeof e.queryCommandState&&null!==(t=e.queryCommandState())?t&&"function"==typeof e.setActive&&e.setActive():i.push(e)}),n=b.selection.getSelectedParentElement(o),this.getEditorElements().some(function(e){return b.util.isDescendant(e,n,!0)})))for(;n&&(i.forEach(e),!b.util.isMediumEditorElement(n));)n=n.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();if(!e)return this;!this.static&&t.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,o=this.getToolbarElement(),s=e.getBoundingClientRect(),r=s.top+n,a=s.left+s.width/2,l=o.offsetHeight,c=o.offsetWidth,d=c/2;switch(this.sticky?n>r+e.offsetHeight-l-this.stickyTopOffset?(o.style.top=r+e.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):n>r-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=r-l+"px"):o.style.top=r-l+"px",this.align){case"left":t=s.left;break;case"right":t=s.right-c;break;case"center":t=a-d}t<0?t=0:i<t+c&&(t=i-Math.ceil(c)-1),o.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t,e=e.getRangeAt(0),n=e.getBoundingClientRect(),e=(n&&(0!==n.height||0!==n.width||e.startContainer!==e.endContainer)||(n=(1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img"):e.startContainer).getBoundingClientRect()),this.window.innerWidth),i=this.getToolbarElement(),o=i.offsetHeight,s=i.offsetWidth/2,r=this.diffLeft-s,a=this.getEditorOption("elementsContainer"),l=-1<["absolute","fixed"].indexOf(window.getComputedStyle(a).getPropertyValue("position")),c={},d={};l?(t=a.getBoundingClientRect(),["top","left"].forEach(function(e){d[e]=n[e]-t[e]}),d.width=n.width,d.height=n.height,n=d,e=t.width,c.top=a.scrollTop):c.top=this.window.pageYOffset,l=n.left+n.width/2,c.top+=n.top-o,n.top<50?(i.classList.add("medium-toolbar-arrow-over"),i.classList.remove("medium-toolbar-arrow-under"),c.top+=50+n.height-this.diffTop):(i.classList.add("medium-toolbar-arrow-under"),i.classList.remove("medium-toolbar-arrow-over"),c.top+=this.diffTop),l<s?(c.left=r+s,c.right="initial"):e-l<s?(c.left="auto",c.right=0):(c.left=r+l,c.right="initial"),["top","left","right"].forEach(function(e){i.style[e]=c[e]+(isNaN(c[e])?"":"px")})}}),b.extensions.toolbar=m,m=b.Extension.extend({init:function(){b.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files,0).some(function(e){var t,n;e.type.match("image")&&((n=new FileReader).readAsDataURL(e),t="medium-img-"+ +new Date,b.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+t+'" />'),n.onload=function(){var e=this.document.getElementById(t);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this))}.bind(this)),e.target.classList.remove("medium-editor-dragover")}}),b.extensions.imageDragging=m,f={},b.prototype={init:function(e,t){return this.options=function(e,t){return t&&[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]].forEach(function(e){t.hasOwnProperty(e[0])&&void 0!==t[e[0]]&&b.util.deprecated(e[0],e[1],"v6.0.0")}),b.util.defaults({},t,e)}.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(!function(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}.call(this,this.options.contentWindow),this.events=new b.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,F.call(this),B.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.classList.remove("medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&N(e)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,function(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){for(var e={},t=this.elements.length,n=0;n<t;n+=1)e[""!==this.elements[n].id?this.elements[n].id:"element-"+n]={value:this.elements[n].innerHTML.trim()};return e},getExtensionByName:function(t){var n;return this.extensions&&this.extensions.length&&this.extensions.some(function(e){return e.name===t&&(n=e,!0)}),n},addBuiltInExtension:function(e,t){var n,i=this.getExtensionByName(e);if(!i){switch(e){case"anchor":n=b.util.extend({},this.options.anchor,t),i=new b.extensions.anchor(n);break;case"anchor-preview":i=new b.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":i=new b.extensions.autoLink;break;case"fileDragging":i=new b.extensions.fileDragging(t);break;case"fontname":i=new b.extensions.fontName(this.options.fontName);break;case"fontsize":i=new b.extensions.fontSize(t);break;case"keyboardCommands":i=new b.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":i=new b.extensions.paste(this.options.paste);break;case"placeholder":i=new b.extensions.placeholder(this.options.placeholder);break;default:b.extensions.button.isBuiltInButton(e)&&(i=t?(n=b.util.defaults({},t,b.extensions.button.prototype.defaults[e]),new b.extensions.button(n)):new b.extensions.button(e))}i&&this.extensions.push(L(i,e,this))}return i},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t=null,n=/^full-(.+)$/gi.exec(e);n&&(e=n[1]);try{t=this.options.ownerDocument.queryCommandState(e)}catch(e){t=null}return t},execAction:function(e,t){var n,i=/^full-(.+)$/gi.exec(e);return i?(this.saveSelection(),this.selectAllContents(),n=M.call(this,i[1],t),this.restoreSelection()):n=M.call(this,e,t),"insertunorderedlist"!==e&&"insertorderedlist"!==e||b.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),n},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),b.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=b.selection.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){b.selection.selectNode(e,this.options.ownerDocument);e=b.selection.getSelectionElement(this.options.contentWindow);e&&this.events.focusElement(e)},getFocusedElement:function(){var t;return this.elements.some(function(e){return!!(t=!t&&e.getAttribute("data-medium-focused")?e:t)},this),t},exportSelection:function(){var e=b.selection.getSelectionElement(this.options.contentWindow),t=this.elements.indexOf(e),n=null;return null!==(n=0<=t?b.selection.exportSelection(e,this.options.ownerDocument):n)&&0!==t&&(n.editableElementIndex=t),n},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,t){var n;e&&(n=this.elements[e.editableElementIndex||0],b.selection.importSelection(e,n,this.options.ownerDocument,t))},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var t,n,i,o,s,r,a,l,c,d,u,h,m=b.selection.getSelectionElement(this.options.contentWindow),f={};if(-1!==this.elements.indexOf(m)){try{if(this.events.disableCustomEvent("editableInput"),e.url&&b.util.deprecated(".url option for createLink",".value","6.0.0"),(t=e.url||e.value)&&0<t.trim().length&&(n=this.options.contentWindow.getSelection())&&(o=(i=n.getRangeAt(0)).commonAncestorContainer,3===i.endContainer.nodeType&&3!==i.startContainer.nodeType&&0===i.startOffset&&i.startContainer.firstChild===i.endContainer&&(o=i.endContainer),r=b.util.getClosestBlockContainer(i.startContainer),a=b.util.getClosestBlockContainer(i.endContainer),3!==o.nodeType&&0!==o.textContent.length&&r===a?(l=r||m,c=this.options.ownerDocument.createDocumentFragment(),this.execAction("unlink"),s=this.exportSelection(),c.appendChild(l.cloneNode(!0)),m===l?b.selection.select(this.options.ownerDocument,l.firstChild,0,l.lastChild,(3===l.lastChild.nodeType?l.lastChild.nodeValue:l.lastChild.childNodes).length):b.selection.select(this.options.ownerDocument,l,0,l,l.childNodes.length),d=this.exportSelection(),0===(u=b.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,c,{start:s.start-d.start,end:s.end-d.start,editableElementIndex:s.editableElementIndex})).length&&((c=this.options.ownerDocument.createDocumentFragment()).appendChild(o.cloneNode(!0)),u=[c.firstChild.firstChild,c.firstChild.lastChild]),b.util.createLink(this.options.ownerDocument,u,t.trim()),h=(c.firstChild.innerHTML.match(/^\s+/)||[""])[0].length,b.util.insertHTMLCommand(this.options.ownerDocument,c.firstChild.innerHTML.replace(/^\s+/,"")),s.start-=h,s.end-=h,this.importSelection(s)):this.options.ownerDocument.execCommand("createLink",!1,t),this.options.targetBlank||"_blank"===e.target?b.util.setTargetBlank(b.selection.getSelectionStart(this.options.ownerDocument),t):b.util.removeTargetBlank(b.selection.getSelectionStart(this.options.ownerDocument),t),e.buttonClass)&&b.util.addClassToAnchors(b.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass),this.options.targetBlank||"_blank"===e.target||e.buttonClass){(f=this.options.ownerDocument.createEvent("HTMLEvents")).initEvent("input",!0,!0,this.options.contentWindow);for(var p=0,g=this.elements.length;p<g;p+=1)this.elements[p].dispatchEvent(f)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",f,m)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){this.elements[t=t||0]&&((t=this.elements[t]).innerHTML=e,this.checkContentChanged(t))},getContent:function(e){return this.elements[e=e||0]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(e){e=e||b.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(e){var t;e?-1!==(t=this.elements.indexOf(e))&&this.setContent(f[e.getAttribute("medium-editor-index")],t):this.elements.forEach(function(e,t){this.setContent(f[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){e=A(e,this.options.ownerDocument,!0);if(0===e.length)return!1;e.forEach(function(e){e=P.call(this,e,this.id),this.elements.push(e),this.trigger("addElement",{target:e,currentTarget:e},e)},this)},removeElements:function(e){var t=A(e,this.options.ownerDocument).map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return-1===t.indexOf(e)||(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&N(e),this.trigger("removeElement",{target:e,currentTarget:e},e),!1)},this)}},b.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),e=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return e&&e._mediumEditors&&e._mediumEditors[t]?e._mediumEditors[t]:null},b.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0},b.version=(b.parseVersionString=function(e){var e=e.split("-"),t=e[0].split("."),n=1<e.length?e[1]:"";return{major:parseInt(t[0],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),preRelease:n,toString:function(){return[t[0],t[1],t[2]].join(".")+(n?"-"+n:"")}}}).call(this,"5.23.3"),b}());
var MediumEditorToolbarStates=MediumEditor.Extension.extend({name:"toolbar_states",attributeName:"data-toolbar-state",hideClass:"hide",states:{},hasNodeNames:!1,init:function(){var e=this;MediumEditor.Extension.prototype.init.apply(this,arguments),Object.keys(this.states).forEach(function(t){e.states[t].nodeNames&&(e.hasNodeNames=!0)}),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this))},destroy:function(){},selectedStateName:"default",pendingStateName:null,checkState:function(t){this.pendingStateName||(this.getStateNameForNode&&"function"==typeof this.getStateNameForNode?this.pendingStateName=this.getStateNameForNode(t)||null:this.hasNodeNames?this.pendingStateName=this.getStateNameFromNodeNames(t)||null:t.hasAttribute(this.attributeName)&&(this.pendingStateName=t.getAttribute(this.attributeName)||null)),MediumEditor.util.isMediumEditorElement(t)&&(this.selectedStateName=this.pendingStateName||"default",this.pendingStateName=null)},getStateNameFromNodeNames:function(a){var s,i=this;return Object.keys(this.states).forEach(function(t){var e=i.states[t];e.nodeNames&&0<=e.nodeNames.indexOf(a.nodeName)&&(s=t)}),s},handlePositionToolbar:function(t,e){var a={buttons:this.base.getExtensionByName("toolbar").buttons},a=this.getState&&"function"==typeof this.getState?this.getState(e)||a:this.states[this.selectedStateName]||a;this.updateToolbarState(a)},updateToolbarState:function(a){var s,i,o=this.base.getExtensionByName("toolbar"),n=this;o.forEachExtension(function(t){var e;"function"==typeof t.getButton&&(-1!=a.buttons.indexOf(t.name)?((e=t.getButton()).classList.remove(n.hideClass),s=s||e,i=e):(e=t.getButton()).classList.add(n.hideClass),e.classList.remove(o.firstButtonClass),e.classList.remove(o.lastButtonClass))}),s&&i&&(s.classList.add(o.firstButtonClass),i.classList.add(o.lastButtonClass))}});
/**
 * JS Object to manipulate and reorder a grid
 * @param {int} maxWidth max column width
 * @since 2.0.0
 */
function IndexedGrid(i){i=void 0!==i?i:12,this.grid=[],this.maxWidth=i}IndexedGrid.prototype.insertionSort=function(){for(var i=this.grid.length,r=1;r<i;r++){for(var t=this.grid[r],d=r-1;0<=d&&this.grid[d]>t;d--)this.grid[d+1]=this.grid[d];this.grid[d+1]=t}},IndexedGrid.prototype.setGrid=function(i,r,t,d){for(var h=0;h<d;h++)for(var o=0;o<t;o++)this.grid.push(i+o+(r+h)*this.maxWidth);this.insertionSort()},IndexedGrid.prototype.checkGrid=function(i){for(var r=0;this.grid[r]<i;){var t=this.grid[r];if(t+1!==this.grid[r+1])for(var d=t+1;d<this.grid[r+1];d++)this.grid.push(d);r++}this.insertionSort()},IndexedGrid.prototype.willFit=function(i,r){if(0==this.grid.length)return 0;for(var t=this.findHoles(),d=0,h=t.length;d<h;d++){var o=t[d],e=t[d]+1;if(void 0!==o&&void 0!==e)for(var s=this.grid[o]+1;s<this.grid[e];s++)if(this.searchFreeSpace(s,i,r))return s}for(var n=this.grid[this.grid.length-1]+1,f=Math.floor(n/this.maxWidth),a=Math.floor((n+(i-1))/this.maxWidth);f!==a;)n+=1,f=Math.floor(n/this.maxWidth),a=Math.floor((n+(i-1))/this.maxWidth);return n},IndexedGrid.prototype.findHoles=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)void 0!==this.grid[r+1]&&this.grid[r]+1===this.grid[r+1]||i.push(r);return i},IndexedGrid.prototype.searchFreeSpace=function(i,r,t){if(Math.floor(i/this.maxWidth)!==Math.floor((i+r-1)/this.maxWidth))return!1;for(var d=0;d<t;d++)for(var h=0;h<r;h++){var o=i+h+d*this.maxWidth;if(-1!==this.grid.indexOf(o))return!1}return!0},IndexedGrid.prototype.negativeGrid=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)if(this.grid[r]+1!==this.grid[r+1])for(var d=this.grid[r]+1;d<this.grid[r+1];d++)i.push(d);return i};
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.4
 */
var Rexbuilder_Live_Templates=function(l){"use strict";function i(t,o){switch(t){case"tmpl-tool-save":return'<div class="rex-modal__outside-footer"><div class="tool-button tool-button--inline tool-button--confirm tool-button--modal rex-modal-option tippy" data-tippy-content="Save" data-rex-option="save"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z016-Checked"></use></svg></i></span></div><div class="tool-button tool-button--inline tool-button--modal rex-modal-option tippy" data-rex-option="reset" data-tippy-content="Reset"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i></span></div></div>';case"tmpl-tool-close":return'<div class="tool-button tool-button--black tool-button--close rex-modal__close-button"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div>';case"tmpl-palette-item":return'<div class="palette-item"><div class="tool-button tool-button--deactivate palette-item__delete"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"tmpl-block-drag-handle":return'<div class="rexlive-block-drag-handle"></div>';case"tmpl-new-section":return'<section class="rexpansive_section empty-section'+((o=void 0!==o?o:{rexID:"",dimension:"full",dimensionClass:"center-disposition",layout:"fixed",sectionWidth:"100%",fullHeight:"false",blockDistance:20,rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20}).rowSeparatorTop<25?" ui-tools--near-top":"")+'" data-rexlive-section-id="'+o.rexID+'" data-rexlive-section-name=""> <div class="section-data" style="display: none;" data-section_name="" data-type="perfect-grid" data-color_bg_section="" data-color_bg_section_active="true"data-dimension="'+o.dimension+'" data-image_bg_section_active="true" data-image_bg_section="" data-id_image_bg_section=""data-video_bg_url_section="" data-video_bg_id_section="" data-video_bg_width_section="" data-video_bg_height_section="" data-video_bg_url_vimeo_section="" data-full_height="'+o.fullHeight+'"data-block_distance="'+o.blockDistance+'" data-layout="'+o.layout+'" data-responsive_background="" data-custom_classes=""data-section_width="'+o.sectionWidth+'" data-row_separator_top="'+o.rowSeparatorTop+'" data-row_separator_bottom="'+o.rowSeparatorBottom+'"data-row_separator_right="'+o.rowSeparatorRight+'" data-row_separator_left="'+o.rowSeparatorLeft+'" data-margin=""data-row_margin_top="" data-row_margin_bottom="" data-row_margin_right="" data-row_margin_left="" data-row_active_photoswipe=""data-row_overlay_color="" data-row_overlay_active="false" data-rexlive_section_id="'+o.rexID+'" data-row_edited_live="true"></div> <div class="responsive-overlay"> <div class="rex-row__dimension '+o.dimensionClass+'"> <div class="perfect-grid-gallery grid-stack grid-stack-row" data-separator="'+o.blockDistance+'" data-layout="'+o.layout+'"data-full-height="'+o.fullHeight+'" data-row-separator-top="'+o.rowSeparatorTop+'" data-row-separator-right="'+o.rowSeparatorRight+'"data-row-separator-bottom="'+o.rowSeparatorBottom+'" data-row-separator-left="'+o.rowSeparatorLeft+'"> <div class="perfect-grid-sizer"></div> </div> </div> </div> </section>';case"tmpl-toolbox-section":return'<div class="section-toolBox"><div class="tools"><div class="bl_d-flex bl_ai-c tools-area tool-area--side tool-area--left"><div class="switch-toggle switch-live switch-dimension"><input type="radio" class="edit-row-width" data-section_width="full" id="row-dimension-full-'+(o=void 0!==o?o:{rexID:"",dimension:"full",layout:"fixed"}).rexID+'" name="row-dimension-'+o.rexID+'" value="100%"'+("full"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.full+'" for="row-dimension-full-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B001-Full"></use></svg></i></span></label><input type="radio" class="edit-row-width" data-section_width="boxed" id="row-dimension-boxed-'+o.rexID+'" name="row-dimension-'+o.rexID+'" value="80%"'+("boxed"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.boxed+'" for="row-dimension-boxed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B002-Boxed"></use></svg></i></span></label></div><div class="switch-toggle switch-live" style="display:none;"><input type="radio" class="edit-row-layout" data-section_layout="fixed" id="row-layout-fixed-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="fixed"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid+'" for="row-layout-fixed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label><input type="radio" class="edit-row-layout" data-section_layout="masonry" id="row-layout-masonry-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="masonry"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.masonry+'" for="row-layout-masonry-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B010-Masonry"></use></svg></i></span></label></div><div class="bl_switch tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid_on_off+'"><label><input class="edit-row-layout-checkbox" type="checkbox"'+("fixed"==o.layout?" checked":"")+'><span class="lever"></span><span class="bl_switch__icon"><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label></div><div class="tool-button tool-button--flat tool-button--inline collapse-grid tippy" data-tippy-content="'+_plugin_frontend_settings.labels.collapse+'"><i class="l-svg-icons"><svg><use xlink:href="#B006-Collapse"></use></svg></i></div></div><div class="bl_d-flex bl_ai-c tools-area tools-area--right-small tool-area--center"><div class="tool-button tool-button--flat tool-button--inline tool-button__image--flat add-new-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_image+'"><i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i></div><div class="tool-button tool-button--flat tool-button__text--flat add-new-block-text tool-button--inline tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_text+'"><i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i></div> <div class="tool-button tool-button--flat tool-button--inline tool-button__video--flat add-new-block-video tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button-floating tool-button-floating--wide"> <div class="tool-button tool-button--flat active"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--section"> <div class="tool-button add-new-block-slider tool-button_list--item tool-button_list--section-item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tippy add-new-section tool-button_list--item tool-button_list--section-item" data-tippy-content="'+_plugin_frontend_settings.labels.insert_row+'" data-new-row-position="after"> <i class="l-svg-icons"><svg><use xlink:href="#B016-New-Adjacent-Row"></use></svg></i> </div> </div> </div> </div> <div class="bl_d-flex bl_ai-c bl_jc-fe tools-area tool-area--side"> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__fast-configuration"> <div class="tool-button tool-button--flat update-model-button tool-button--distance-fix--small locked tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <span class="unlocked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B015-UnClosed"></use></svg></i> </span> <span class="locked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-row-image-background tippy" data-tippy-content="" value=""> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--opacity-preview tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button__video-fast tool-button--hide tool-button--distance-fix tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline tool-button--flat edit-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--deactivate tool-button--double-icon deactivate-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__standard-configuration"> <div class="tool-button tool-button--flat tool-button--inline builder-copy-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button tool-button--flat tool-button--inline builder-move-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.move_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i> </div> <div class="tool-button-floating tool-button--model-hide"> <div class="tool-button tool-button--flat tool-button--flat--distance-fix" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button builder-section-config tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-background-section tippy tool-button--hide"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-row-image-background tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tool-button--opacity-preview tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button edit-row-video-background tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button open-model tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <i class="l-svg-icons"><svg><use xlink:href="#B005-RexModel"></use></svg></i> </div> <div class="tool-button synch-section-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--flat tool-button--inline builder-delete-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="section-toolBoox__highlight"></div> <div class="section-block-noediting-ui"> <div class="no-editing--indicator bl_d-flex bl_jc-c bl_ai-c"> <span class="call-update-model-button"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> </div>';case"tmpl-toolbox-block-wrap":return o=void 0!==o?o:{block_type:""},'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position'+("text"!==o.block_type?" tool-button--hide":"")+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("image"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image tippy"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("video"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--black builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools" data-block_type="'+o.block_type+'"> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+("video"!=o.block_type?" tool-button--hide":"")+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-toolbox-block-wrap-clean":return'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content'+(o.has_content?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.text+'"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position'+(o.has_content?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.content_position+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_image?"":" tool-button--hide")+'"> <div class="tool-button tool-button--inline edit-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item'+(o.not_has_overlay?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_video?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview'+(o.not_has_overlay?" tool-button--hide ":" tool-button--picker-preview ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"'+(o.not_has_overlay?"":' style="background-color:'+o.overlay+';"')+'></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+(o.not_has_video?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"><div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-rexbutton-tools-top":return'<div class="rex-button-tools-container"> <div class="tool-button rex-delete-button tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div>';case"tmpl-rexbutton-tools-bottom":return'<div class="rex-button-tools-container"> <div class="tool-button tool-button_list--item tippy rex-edit-button" data-tippy-content="'+_plugin_frontend_settings.labels.config+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> </div>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-inline-svg-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-svg-color medium-editor-button-first"> <span class="meditor-color-picker"><span class="meditor-color-picker__placeholder">P</span></span> <span class="meditor-color-picker--preview"></span> </button> </li> <li> <button class="medium-editor-action me-svg-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-svg-inline"> <i class="fa fa-info-circle"></i> </button> </li> <li> <button class="medium-editor-action me-svg-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-insert-media-button":return'<input type="text" class="me-insert-embed__value"> <div class="tool-button-floating"> <div class="tool-button"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--vertical_top"> <div class="tool-button tool-button_list--item me-insert-inline-svg"> <i class="l-svg-icons"><svg><use xlink:href="#C008-Star"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-embed"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> </div>';case"wpcf7-form-tools":return'<div class="rexwpcf7-form-tools" contenteditable="false"><div class="tool-button tool-button--flat tool-button--add-big wpcf7-form-button wpcf7-add-new-row tippy" data-tippy-content="Add Row" data-operation="addRow"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="wpcf7-select-columns wpcf7-select-columns--bottom"><ul class="wpcf7-select-columns__list"><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div></div>';case"wpcf7-row-tools":return'<div class="rexwpcf7-row-tools" contenteditable="false"><div class="tool-button tool-button--blue rex-wpcf7-row-drag tippy" data-tippy-content="'+_plugin_frontend_settings.labels.drag+'" ><i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-wpcf7-row-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-wpcf7-row-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-column-tools":return'<div contenteditable="false" class="rexwpcf7-column-tools">'+(o.name?'<div class="tool-button tool-button--pink rex-wpcf7-column-info tippy" data-tippy-content="'+o.name+'"><i class="l-svg-icons"><svg><use xlink:href="#Z015-Question-Mark-Sign"></use></svg></i></div>':"")+'<div class="tool-button tool-button--pink wpcf7-form-button rex-wpcf7-column-settings tippy" data-tippy-content="'+_plugin_frontend_settings.labels.settings+'" data-operation="columnSettings"><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button tool-button--pink wpcf7-form-button rex-wpcf7-column-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneColumn"><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--pink tool-button--black wpcf7-form-button rex-wpcf7-column-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-button-fix":return'<span class="wpcf7-form-control-wrap"></span>';case"rexelement-tools":return'<div contenteditable="false" class="rexelement-tools"><div class="wpcf7-select-columns wpcf7-select-columns--top"><ul class="wpcf7-select-columns__list"><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div><div class="tool-button tool-button--blue wpcf7-form-button rex-add-row tippy" data-tippy-content="Add Row" data-operation="addRowTop"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-edit-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels[o.settingsType]+'" data-operation="editElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-delete-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-plus-button-inside-row":return'<div class="tool-button tool-button--flat tool-button--add-big-pink wpcf7-form-button wpcf7-add-new-form-content" data-operation="addColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div>';case"tmpl-new-slider-element":return'<div class="rex-slider-element"></div>';case"slider-overlay":return'<div class="slider-overlay" style="background-color:'+o.overlayColor+'"></div>';case"slide-video":return'<div class="rex-slider-video-wrapper"></div>';case"slide-text":return'<div class="rex-slider-element-title"></div>';case"empty-paragraph":return"<p><br></p>";default:return""}}return{getTemplate:i,getParsedTemplate:function(t,o){return l.parseHTML(i(t,o))[0]}}}(jQuery,(window,document));
/**
 * Utilities functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Live_Utilities=function($){"use strict";var PLATFORM_IS_MAC=window.navigator.platform.match("Mac"),tippyCollection,_tooltips=function(){tippyCollection=tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},_addSpectrumCustomSaveButton=function(t){var e=$(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save"));t.spectrum("container").append(e),e.find(".rex-modal-option").on("click",function(e){switch(e.stopPropagation(),e.preventDefault(),this.getAttribute("data-rex-option")){case"save":t.spectrum("container").find(".sp-choose").trigger("click");break;case"reset":t.spectrum("set",t.attr("data-color-on-show")),t.spectrum("container").find(".sp-input").trigger("change")}})},_addSpectrumCustomCloseButton=function(t){var e=$(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close"));t.spectrum("container").append(e),e.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.attr("data-revert",!0),t.spectrum("container").find(".sp-cancel").trigger("click")})},_removeColorPicker=function(e){e.find(".tool-button--spectrum").remove()},_removeTextEditor=function(e){var t,i,o,e=e.find(".text-wrap");0!=e.length&&e.hasClass("medium-editor-element")&&(t=e.html(),i=$(document.createElement("div")),o=e.attr("style"),i.appendTo(e.parent()),i.addClass("text-wrap"),e.hasClass("rex-content-resizable")&&i.addClass("rex-content-resizable"),e.remove(),i.attr("style",o),i.html(t),i.find(".text-editor-span-fix").remove(),i.find(".medium-insert-buttons").remove()),i=t=e=void 0},_removeHandles=function(e){e.children(".ui-resizable-handle").each(function(e,t){$(t).remove()})},_hideAllTools=function(){Rexbuilder_Util_Editor.manageElement=!1,Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("focusedRow").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item").removeClass("focused"),Rexbuilder_Util.$rexContainer.find(".tool-button-floating--active").removeClass("tool-button-floating--active")},_getBackgroundUrlFromCss=function(e){return e.replace("url(","").replace(")","").replace(/\"/gi,"")},_generateElementNewIDs=function(e,t,i){var i="block_"+i+"_"+t,t=e.children(".rexbuilder-block-data"),o=Rexbuilder_Util.createBlockID();e.attr("data-rexbuilder-block-id",o),t.attr("data-rexbuilder_block_id",o),e.attr("id",i),t.attr("data-id",i),t.attr("id",i+"-builder-data")},_fixCopiedElementSlider=function(e){var t,i,o;e.hasClass("block-has-slider")&&(o=e.find(".text-wrap"),t=e.attr("data-rexbuilder-block-id"),i=o.children('.rex-slider-wrap[data-rex-slider-active="true"]'),o.children().remove(),e={sectionID:(o=e.parents(".rexpansive_section")).attr("data-rexlive-section-id"),modelNumber:void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",rexID:t},o=Rexbuilder_Live_Utilities.createSliderData(i),Rexbuilder_Live_Utilities.saveSliderOnDB(o,!0,t,e))},removeDeletedBlocks=function(e){e.children(".removing_block").each(function(){$(this).remove()})},_createSliderData=function($sliderWrapper){for(var auto_start="true"==$sliderWrapper.attr("data-rex-slider-animation").toString(),prev_next="1"==$sliderWrapper.attr("data-rex-slider-prev-next").toString(),dots="1"==$sliderWrapper.attr("data-rex-slider-dots").toString(),data={id:parseInt($sliderWrapper.attr("data-slider-id")),settings:{auto_start:auto_start,prev_next:prev_next,dots:dots},slides:[]},slides=$sliderWrapper.find(".rex-slider-element"),i=0;i<slides.length;i++){var $slide=$(slides[i]),slide={slide_image_id:"",slide_image_url:"",slide_url:"",slide_text:"",slide_video:"",slide_videoMp4Url:"",slide_video_audio:"",slide_video_type:""},backgroundImageUrl=(slide.slide_image_id=isNaN(parseInt($slide.attr("data-rex-slide-image-id")))?"":parseInt($slide.attr("data-rex-slide-image-id")),Rexbuilder_Live_Utilities.getBackgroundUrlFromCss($slide.css("background-image"))),$linkDiv=("none"!=backgroundImageUrl&&(slide.slide_image_url=backgroundImageUrl),$slide.children("a")),$textContent=(0!=$linkDiv.length&&(slide.slide_url=$linkDiv.attr("href")),$slide.find(".rex-slider-element-title")),$videoMp4Wrap=(0!=$textContent.length&&0!=$textContent.html().trim().length&&(slide.slide_text=$textContent.html()),$slide.find(".mp4-player")),$videoVimeoWrap=$slide.find(".vimeo-player"),$videoYoutubeWrap=$slide.find(".youtube-player"),$iframe,$ytpPlayer,elemData;0!=$videoMp4Wrap.length&&(slide.slide_video=parseInt($videoMp4Wrap.children(".rex-video-wrap").attr("data-rex-video-mp4-id")),slide.slide_videoMp4Url=$videoMp4Wrap.find("source").attr("src"),slide.slide_video_audio=0!=$videoMp4Wrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="mp4"),0!=$videoVimeoWrap.length&&($iframe=$videoVimeoWrap.find("iframe"),slide.slide_video=$iframe.attr("src").split("?")[0],slide.slide_video_audio=0!=$videoVimeoWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="vimeo"),0!=$videoYoutubeWrap.length&&($ytpPlayer=$videoYoutubeWrap.find(".rex-youtube-wrap"),elemData=jQuery.extend(!0,{},eval("("+$ytpPlayer.attr("data-property")+")")),slide.slide_video=elemData.videoURL,slide.slide_video_audio=0!=$videoYoutubeWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="youtube"),data.slides.push(slide)}return data},_saveSliderOnDB=function(e,t,i,o){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:uploadSliderFromLive",sliderInfo:{slider:e,newSlider:t,blockID:i,target:o}})},_getElementsPhotoswipe=function(e){var o=[];return e.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var t=$(t).children(".rexbuilder-block-data"),i={$data:t,photoswipe:!1};"true"==t.attr("data-photoswipe").toString()&&(i.photoswipe=!0),o.push(i)}),o},_fixToolsVisibility=function(e){"default"==e?(Rexbuilder_Util.$rexContainer.removeClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.parent().removeClass("rex-hide-responsive-tools")):(Rexbuilder_Util.$rexContainer.parent().addClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.addClass("rex-hide-responsive-tools"))},setEndOfContenteditable=function(e){var t,i;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(i=window.getSelection()).removeAllRanges(),i.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())},_updateModelSectionTools=function(e,t){var t=Rexbuilder_Util_Editor.rowAttrsObj(t[0]),i={idImage:void 0!==t.id_image_bg_section?t.id_image_bg_section:"",urlImage:void 0!==t.image_bg_section?t.image_bg_section:""},o=void 0!==t.color_bg_section?t.color_bg_section:"",r={active:void 0!==t.row_overlay_active?t.row_overlay_active:"",color:void 0!==t.row_overlay_color?t.row_overlay_color:""},d={typeVideo:""};void 0!==t.video_mp4_url&&""!=t.video_mp4_url?d.typeVideo="mp4":void 0!==t.video_bg_url_vimeo_section&&""!=t.video_bg_url_vimeo_section?d.typeVideo="vimeo":void 0!==t.video_bg_url_section&&""!=t.video_bg_url_section&&(d.typeVideo="youtube"),Rexbuilder_Section_Editor.updateSectionDimensionTool(e,t),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,t),""!==i.idImage?Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,i):Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e),-1===o.indexOf("gradient")?Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,o):Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,o),-1===r.color.indexOf("gradient")?(Rexbuilder_Dom_Util.updateSectionOverlay(e,r),Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,r)):(Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,r),Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,r)),Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,d),e.find(".perfect-grid-item").each(function(e,t){t=$(t);Rexbuilder_Live_Utilities.updateModelBlocksTools(t,t.find(".rexbuilder-block-data"))})},_updateModelBlocksTools=function(e,t){Rexbuilder_Util_Editor.blockAttrsObj(t[0]);e.removeClass("has-rs-animation")},addWindowListeners=function(){document.addEventListener("keydown",function(e){var t;(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&83==e.keyCode?(e.preventDefault(),t={eventName:"rexlive:savePageWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):"BODY"==e.target.nodeName&&(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode?(e.preventDefault(),t={eventName:"rexlive:undoWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):"BODY"==e.target.nodeName&&((PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&89==e.keyCode)?(e.preventDefault(),t={eventName:"rexlive:redoWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):27!==e.keyCode||Rexbuilder_Util_Editor.editingGallery||(t={eventName:"rexlive:esc_pressed"},Rexbuilder_Util_Editor.sendParentIframeMessage(t))}),Rexbuilder_Util.$window.on("mousedown",function(e){Rexbuilder_Util_Editor.mouseDown=!0,Rexbuilder_Util_Editor.mouseUp=!1}),Rexbuilder_Util.$window.on("mouseup",function(e){Rexbuilder_Util_Editor.mouseDown=!1,Rexbuilder_Util_Editor.mouseUp=!0}),Rexbuilder_Util.$window[0].addEventListener("message",function(e){{var t;e.data.rexliveEvent&&((t=jQuery.Event(e.data.eventName)).settings={},jQuery.extend(t.settings,e.data),Rexbuilder_Util.$document.trigger(t))}},!1)},addDocumentListeners=function(){Rexbuilder_Util.$document.on("rexlive:changeLayout",function(e){e=e.settings;Rexbuilder_Util_Editor.undoStackArray=[],Rexbuilder_Util_Editor.redoStackArray=[],Rexbuilder_Util.chosenLayoutData=jQuery.extend(!0,{},e.layoutData),Rexbuilder_Util_Editor.changedLayout=!0,Rexbuilder_Util_Editor.clickedLayoutID=e.selectedLayoutName,Rexbuilder_Live_Utilities.fixToolsVisibility(e.selectedLayoutName)}),Rexbuilder_Util.$document.on("rexlive:startChangeLayout",function(e){Rexbuilder_Util_Editor.startLoading()}),Rexbuilder_Util.$document.on("rexlive:updateLayoutsDimensions",function(e){e=e.settings.data_to_send;$("#layout-avaiable-dimensions").text(JSON.stringify(e.layouts)),e.updateHeights&&(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.updateGridsHeights(),Rexbuilder_Util.windowIsResizing=!1)}),Rexbuilder_Util.$document.on("rexlive:undo",function(e){var t;0<Rexbuilder_Util_Editor.undoStackArray.length&&(Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),t=Rexbuilder_Util_Editor.undoStackArray.pop(),Rexbuilder_Dom_Util.performAction(t,!1),Rexbuilder_Util_Editor.redoStackArray.push(t)),Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:redo",function(e){var t;0<Rexbuilder_Util_Editor.redoStackArray.length&&(t=Rexbuilder_Util_Editor.redoStackArray.pop(),Rexbuilder_Dom_Util.performAction(t,!0),Rexbuilder_Util_Editor.undoStackArray.push(t)),Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:updateSlider",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSliderStack(e.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:change_section_bg_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSectionBackgroundColorLive(e.data_to_send.sectionTarget,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_section_overlay_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSectionOverlayColorLive(e.data_to_send.sectionTarget,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_bg_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateBlockBackgroundColorLive(e.data_to_send.target,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_overlay_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateBlockOverlayColorLive(e.data_to_send.target,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:newSliderSavedOnDB",function(e){e=e.settings;Rexbuilder_CreateBlocks.createSlider(e.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:dropChanges",function(e){Rexbuilder_Util_Editor.startLoading();e=e.settings.data_to_send;Rexbuilder_Util_Editor.restorePageStartingState(e)}),Rexbuilder_Util.$document.on("rexlive:lockRows",function(e){Rexbuilder_Util_Editor.lockRows()}),Rexbuilder_Util.$document.on("rexlive:unlockRows",function(e){Rexbuilder_Util_Editor.releaseRows()}),Rexbuilder_Util.$document.on("rexlive:close_modal",function(e){Rexbuilder_Live_Utilities.hideAllTools();var t=Rexbuilder_Util.rexContainer.querySelector(".needs-refocus");t&&(Rexbuilder_Util.addClass(t,"focusedRow"),Rexbuilder_Util.removeClass(t,"needs-refocus"))}),Rexbuilder_Util.$document.on("rexlive:openCreateModelModal",function(e){e=e.settings.data_to_send;$(".rexpansive_section[data-rexlive-section-id="+e.sectionTarget.sectionID+"]").find(".open-model").trigger("click")}),Rexbuilder_Util.$document.on("rexlive:importButton",function(e){Rexbuilder_Rexbutton.fixImportedButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateButtonLive",function(e){Rexbuilder_Rexbutton.updateButtonLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_button",function(e){Rexbuilder_Rexbutton.removeSeparateButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_button",function(e){Rexbuilder_Rexbutton.separateRexButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_button",function(e){Rexbuilder_Rexbutton.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:importElement",function(e){Rexbuilder_Rexelement_Editor.fixImportedElement(e.settings.data)}),Rexbuilder_Util.$document.on("rexlive:completeImportElement",function(e){Rexbuilder_Rexelement_Editor.handleCompleteImportElement(e)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_element",function(e){Rexbuilder_Rexelement_Editor.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_element",function(e){Rexbuilder_Rexelement_Editor.separateRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:refresh_separated_rex_element",function(e){Rexbuilder_Rexelement_Editor.refreshSeparatedRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_form",function(e){Rexbuilder_Rexwpcf7_Editor.removeSeparatedForm(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_add_field",function(e){Rexbuilder_Rexwpcf7_Editor.addField(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_form_span_data",function(e){Rexbuilder_Rexwpcf7.createFormSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_column_content_span_data",function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateColumnContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateColumnContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:drag_drop_started",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!0}),Rexbuilder_Util.$document.on("rexlive:drag_drop_ended",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!1}),Rexbuilder_Util.$document.on("rexlive:set_container_margins",function(e){Rexbuilder_Util_Editor.updateContainerMargins(e.settings.data_to_send)})},addDnDEvents=function(){Rexbuilder_Util.$rexContainer.on("dragenter",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||e.stopPropagation()}),Rexbuilder_Util.$rexContainer.on("dragover",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.preventDefault(),e.stopPropagation())}),Rexbuilder_Util.$rexContainer.on("drop",function(e){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){e.preventDefault(),e.stopPropagation();var t,i,o=(e.isTrigger?triggerEvent:e).originalEvent.dataTransfer.getData("text/plain");try{o=JSON.parse(o)}catch(e){o=null}o&&(i=document.elementFromPoint(e.clientX,e.clientY),i=$(i),t=(o=(""!=o.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionID+'"][data-rexlive-model-number="'+o.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+o.rexID+'"]')).parents(".grid-stack-row"),0<(i=i.parents(".rexpansive_section").find(".grid-stack-row")).length)&&!i.is(t)&&(Rexbuilder_CreateBlocks.moveBlockToOtherSection(o,i),o.find(".builder-delete-block").first().trigger("click"))}})},addBuilderListeners=function(){addDocumentListeners(),addWindowListeners(),addDnDEvents()},load=function(){_tooltips()};return{launchTooltips:_tooltips,addSpectrumCustomSaveButton:_addSpectrumCustomSaveButton,addSpectrumCustomCloseButton:_addSpectrumCustomCloseButton,removeColorPicker:_removeColorPicker,removeTextEditor:_removeTextEditor,removeHandles:_removeHandles,hideAllTools:_hideAllTools,getBackgroundUrlFromCss:_getBackgroundUrlFromCss,generateElementNewIDs:_generateElementNewIDs,fixCopiedElementSlider:_fixCopiedElementSlider,removeDeletedBlocks:removeDeletedBlocks,createSliderData:_createSliderData,saveSliderOnDB:_saveSliderOnDB,getElementsPhotoswipe:_getElementsPhotoswipe,fixToolsVisibility:_fixToolsVisibility,setEndOfContenteditable:setEndOfContenteditable,updateModelSectionTools:_updateModelSectionTools,updateModelBlocksTools:_updateModelBlocksTools,addBuilderListeners:addBuilderListeners,load:load}}(jQuery);
!function(t,e){"use strict";t.RexEditedData=e()}("undefined"!=typeof window?window:this,function(){var l=["section_name","section_nav_label","color_bg_section","color_bg_section_active","image_bg_section_active","image_bg_section","image_width","image_height","id_image_bg_section","image_size","video_bg_id","video_mp4_url","video_bg_width_section","video_bg_height_section","video_bg_url_section","video_bg_url_vimeo_section","block_distance","row_separator_top","row_separator_bottom","row_separator_right","row_separator_left","margin","row_margin_top","row_margin_bottom","row_margin_right","row_margin_left","custom_classes","row_overlay_color","row_overlay_active","dimension","section_width"],c=["color_bg_block","color_bg_block_active","image_bg_url","image_width","image_height","id_image_bg","image_size","image_bg_elem_active","type_bg_image","video_bg_id","video_bg_width","video_bg_height","video_mp4_url","video_bg_url_youtube","video_bg_url_vimeo","video_has_audio","photoswipe","block_custom_class","block_padding","overlay_block_color","overlay_block_color_active","linkurl","block_flex_position","block_flex_img_position"];function t(){this.editedInfo=null,this.startData=null,arguments[0]&&(this.startData=arguments[0]),function(){if(!Array.isArray(this.startData)){var t,e=[];for(t in this.startData)e.push(this.startData[t]);this.startData=e}}.call(this),function(t){t=void 0!==t?t:this.startData;var e,i,o,r=[],a=t.length,s=0;for(e=0;e<a;e++){var n={};for(n.section_rex_id=t[e].section_rex_id,n.targets=[],s=t[e].targets.length,i=0;i<s;i++){var _={};if(_.name=t[e].targets[i].name,_.props={},"self"===_.name)for(o=0;o<l.length;o++)void 0===t[e].targets[i].props[l[o]]?_.props[l[o]]=!1:_.props[l[o]]=!0;else for(o=0;o<c.length;o++)void 0===t[e].targets[i].props[c[o]]?_.props[c[o]]=!1:_.props[c[o]]=!0;n.targets.push(_)}r.push(n)}this.editedInfo=r}.call(this)}function n(t){for(var e=this.editedInfo.length,i=0;i<e;i++)if(t===this.editedInfo[i].section_rex_id)return i;return!1}function _(t,e){for(var i=this.editedInfo[t].targets.length,o=0;o<i;o++)if(e===this.editedInfo[t].targets[o].name)return o;return!1}function i(t,e){e=_.call(this,t,e);return!1!==e&&this.editedInfo[t].targets[e].props}function r(t,e,i,o){o=void 0===o||o;t=n.call(this,t);!1!==t&&!1!==(e=_.call(this,t,e))&&(this.editedInfo[t].targets[e].props[i]=o)}function o(t,e,i){i=void 0===i||i;var o=n.call(this,t);if(!1!==o){var r,a,s=_.call(this,o,e);if(!1!==s)if("self"===e)for(a=l.length,r=0;r<a;r++)this.editedInfo[o].targets[s].props[l[r]]=i;else for(a=c.length,r=0;r<a;r++)this.editedInfo[o].targets[s].props[c[r]]=i}}return t.prototype.getSectionData=function(t){t=n.call(this,t);return!1!==t&&i.call(this,t,"self")},t.prototype.getBlockData=function(t,e){t=n.call(this,t);return!1!==t&&i.call(this,t,e)},t.prototype.addSectionData=function(t){var e=n.call(this,t);if(!1===e){var i={};for(z=0;z<l.length;z++)i[l[z]]=!1;this.editedInfo.push({section_rex_id:t,targets:[{name:"self",props:i}]})}},t.prototype.addBlockData=function(t,e){t=n.call(this,t);if(!1!==t){var i=_.call(this,t,e);if(!1===i){var o={};for(z=0;z<c.length;z++)o[c[z]]=!1;this.editedInfo[t].targets.push({name:e,props:o})}}},t.prototype.setSectionData=function(t,e,i){r.call(this,t,"self",e,i)},t.prototype.setBlockData=function(t,e,i,o){r.call(this,t,e,i,o)},t.prototype.setBulkSectionData=function(t,e){o.call(this,t,"self",e)},t.prototype.setBulkBlockData=function(t,e,i){o.call(this,t,e,i)},t.getTracePropsSection=function(){return l},t.getTracePropsBlock=function(){return c},t});
/**
 * Gradient palette color to append to Spectrum Picker.
 * With a button to open the gradient picker
 *
 * @since 2.0.0
 */
var Rexbuilder_Color_Palette=function(n){"use strict";var i,t=function(e,t){""!==e&&(i.$spicker.spectrum("set",e),t)&&i.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=n(".sp-rex-color-palette");(i={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,r;e.preventDefault(),null!==i.$spicker&&(e=i.$spicker.spectrum("get"),t=Rexbuilder_Util.createRandomID(4),e=e.toRgbString(),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:savePaletteColor",color_data:{color:e,ID:t}}),r=n(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-palette-item")),i.$add_color.before(r),r.css("background",e),r.attr("data-color-id",t),r.attr("data-color-value",e))}),i.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-color-value");e&&t(e,!0)}),i.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-color-id");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:deletePaletteColor",color_data:{ID:t}}),Rexbuilder_Color_Palette.deletePaletteItem(e)}),i.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),i.object){case"block":Rexbuilder_Block_Editor.openBlockBackgroundGradient(i.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openSectionBackgroundGradient(i.$spicker.parents(".rexpansive_section"));break;case"text":TextEditor.openTextGradientColor(i.$spicker)}i.$spicker.spectrum("hide")})},show:function(e){i.$spicker=e.$target,i.action=e.action,i.object=e.object,i.textSelection=void 0!==e.textSelection?e.textSelection:null;e=i.$spicker.spectrum("container").find(".sp-picker-container");i.$container.show().detach().appendTo(e)},hide:function(){i.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),i.$spicker=null,i.action=null,i.object=null,i.textSelection=null},deletePaletteItem:function(e){n(e).remove()}}}(jQuery);
/**
 * Gradient palette color to append to Spectrum Picker for an overlay.
 * With a button to open the gradient picker
 *
 * @since 2.0.0
 */
var Rexbuilder_Overlay_Palette=function(r){"use strict";var i,t=function(e,t){""!==e&&(i.$spicker.spectrum("set",e),t)&&i.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=r(".sp-rex-color-overlay-palette");(i={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,a;e.preventDefault(),null!==i.$spicker&&(e=i.$spicker.spectrum("get"),t=Rexbuilder_Util.createRandomID(4),e=e.toRgbString(),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:savePaletteOverlayColor",overlay_data:{overlay:e,ID:t}}),a=r(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-palette-item")),i.$add_color.before(a),a.css("background",e),a.attr("data-overlay-id",t),a.attr("data-overlay-value",e))}),i.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-overlay-value");e&&t(e,!0)}),i.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-overlay-id");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:deletePaletteOverlayColor",overlay_data:{ID:t}}),Rexbuilder_Overlay_Palette.deletePaletteItem(e)}),i.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),i.object){case"block":Rexbuilder_Block_Editor.openBlockOverlayGradient(i.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openRowOverlayGradient(i.$spicker.parents(".rexpansive_section"))}i.$spicker.spectrum("hide")})},show:function(e){i.$spicker=e.$target,i.action=e.action,i.object=e.object;e=i.$spicker.spectrum("container").find(".sp-picker-container");i.$container.show().detach().appendTo(e)},hide:function(){i.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),i.$spicker=null,i.action=null,i.object=null},deletePaletteItem:function(e){r(e).remove()}}}(jQuery);
/**
 * Object that handles the live text editor inside the blocks
 *
 * @since 2.0.0
 */
var TextEditor=function(l){var o,e,t,i,s,n,a,r,d,c,h;function u(){return l(o.getSelectedParentElement()).css("color")}function m(t){t=t||"rgba(0,0,0,0)",A({name:"rexlive:mediumeditor:removeGradient",data:{},editable:null}),e.base.importSelection(c),e.document.execCommand("styleWithCSS",!1,!0),e.document.execCommand("foreColor",!1,t)}function b(t,s){var n=l(t),a=n.find(".meditor-color-picker--preview");n.spectrum({preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",show:function(){this.setAttribute("data-revert",!1),Rexbuilder_Color_Palette.show({$target:n,action:"color",object:"text",textSelection:o.exportSelection()})},change:function(t){s.call(this,t.toRgbString()),a.css("background-color",t.toRgbString())},move:function(t){s.call(this,t.toRgbString())},hide:function(t){var e=n.attr("data-selection-gradient"),i=this.getAttribute("data-revert");"null"==e&&(e="true"==i?this.getAttribute("data-color-on-show"):t.toRgbString(),s.call(this,t.toRgbString()),a.css("background-color",e)),Rexbuilder_Color_Palette.hide(),o.getExtensionByName("insert-media").hideAllToolbars()}}),Rexbuilder_Live_Utilities.addSpectrumCustomSaveButton(n),Rexbuilder_Live_Utilities.addSpectrumCustomCloseButton(n),n.spectrum("container").draggable()}var p=function(t){l(o.getSelectedParentElement()).css("color",t)},g=MediumEditor.extensions.button.extend({name:"colorPicker",action:"applyForeColor",aria:"color picker",contentDefault:"<span class='editor-color-picker'>Text Color<span>",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action--color-picker"),this.button.innerHTML="<span class='meditor-color-picker'><span class='meditor-color-picker__placeholder'>P</span></span><span class='meditor-color-picker--preview'></span>",b(this.button,m),this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.handleShowToolbar.bind(this))},handleClick:function(t){var e=o.getExtensionByName("toolbar"),e=(e&&e.hideToolbar(),c=o.exportSelection(),u()),e=(l(this.button).spectrum("set",e),this.button.setAttribute("data-color-on-show",e),o.getSelectedParentElement().getAttribute("data-gradient")),i=o.getSelectedParentElement().getAttribute("style"),e=(this.button.setAttribute("data-selection-gradient",e),A({name:"rexlive:mediumeditor:traceTextGradient",data:{gradient:e,style:i},editable:null}),t.preventDefault(),t.stopPropagation(),this.getAction());e&&this.execAction(e)},handleShowToolbar:function(t){""!==l(o.getSelectedParentElement()).prop("style").color?l(this.button).find(".meditor-color-picker--preview").css("background-color",u()):l(this.button).find(".meditor-color-picker--preview").css("background-color","")}}),f=MediumEditor.Extension.extend({name:"textGradient",init:function(){this.gradientClassApplier=rangy.createClassApplier("text-gradient",{elementTagName:"span",normalize:!0,elementAttributes:{"data-gradient":"",style:""}}),this.subscribe("rexlive:mediumeditor:setTextGradient",this.handleGradient.bind(this)),this.subscribe("rexlive:mediumeditor:traceTextGradient",this.traceGradient.bind(this)),this.subscribe("rexlive:mediumeditor:removeGradient",this.removeGradient.bind(this))},handleGradient:function(t,e){this.gradientClassApplier.undoToSelection(),this.gradientClassApplier.elementAttributes["data-gradient"]=t.color,this.gradientClassApplier.elementAttributes.style=t.style,this.gradientClassApplier.applyToSelection()},traceGradient:function(t,e){this.gradientClassApplier.elementAttributes["data-gradient"]=t.gradient,this.gradientClassApplier.elementAttributes.style=t.style},removeGradient:function(t,e){this.gradientClassApplier.undoToSelection()}}),v=MediumEditor.extensions.button.extend({name:"headingTags",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.list_parent=this.document.createElement("div"),this.list_parent.classList.add("me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),this.list_active_action.classList.add("me__action-active"),this.list_active_action.innerHTML="h1",l(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),this.list_element.classList.add("me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='append-h1'>h1</div><div class='medium-editor-action' data-tag-action='append-h2'>h2</div><div class='medium-editor-action' data-tag-action='append-h3'>h3</div><div class='medium-editor-action' data-tag-action='append-h4'>h4</div><div class='medium-editor-action' data-tag-action='append-h5'>h5</div><div class='medium-editor-action' data-tag-action='append-h6'>h6</div><div class='medium-editor-action' data-tag-action='append-p'>p</div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),l(this.button).append(this.list_parent),l(this.button).append(this.list_element),this.action_active="",this.all_actions=["append-h1","append-h2","append-h3","append-h4","append-h5","append-h6"],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(t){switch(t.nodeName.toLowerCase()){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":return this.action_active="append-"+t.nodeName.toLowerCase(),this.setActionListState(),!0;default:return!1}},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="h1";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){""!=this.action_active&&(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.list_active_action.innerHTML=this.action_active.replace("append-",""))},resetEnv:function(){this.action_active=""},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),void 0!==e&&o.execAction(e)}}),x=MediumEditor.extensions.button.extend({name:"formattingTags",contentDefault:"TAGS",useQueryState:!1,aria:"Format text",init:function(){this.button=this.document.createElement("button"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexbutton"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexelement"),Rexbuilder_Util.addClass(this.button,"medium-editor-action"),Rexbuilder_Util.addClass(this.button,"medium-editor-action-list"),this.list_parent=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_parent,"me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),Rexbuilder_Util.addClass(this.list_active_action,"me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-bold'></i>",l(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_element,"me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='bold'><i class='fa fa-bold'></i></div><div class='medium-editor-action' data-tag-action='italic'><i class='fa fa-italic'></i></div><div class='medium-editor-action' data-tag-action='underline'><i class='fa fa-underline'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),l(this.button).append(this.list_parent),l(this.button).append(this.list_element),this.action_active=[],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.clearListButtons.bind(this))},checkState:function(t){switch(t.nodeName.toLowerCase()){case"b":case"strong":this.action_active.push("bold"),this.mark_active=!0;break;case"i":this.action_active.push("italic"),this.mark_active=!0;break;case"u":this.action_active.push("underline"),this.mark_active=!0;break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"li":case"ol":case"ul":this.mark_active&&(this.setActionListState(),this.action_active=[],delete this.mark_active)}},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),void 0!==e&&o.execAction(e)},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-bold'></i>";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){for(var t=0;t<this.action_active.length;t++)this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active[t]+'"]').classList.add("medium-editor-button-active"),0==t&&(this.list_active_action.innerHTML="<i class='fa fa-"+this.action_active[t]+"'></i>")}}),E=MediumEditor.extensions.button.extend({name:"listDropdown",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexbutton"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexelement"),Rexbuilder_Util.addClass(this.button,"medium-editor-action"),Rexbuilder_Util.addClass(this.button,"medium-editor-action-list"),this.list_parent=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_parent,"me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),Rexbuilder_Util.addClass(this.list_active_action,"me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>",l(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_element,"me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='insertorderedlist'><i class='fa fa-list-ol'></i></div><div class='medium-editor-action' data-tag-action='insertunorderedlist'><i class='fa fa-list-ul'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),l(this.button).append(this.list_parent),l(this.button).append(this.list_element),this.action_active="",this.all_actions=["insertorderedlist","insertunorderedlist"],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(t){for(var e=0;e<this.all_actions.length;e++)if(this.base.queryCommandState(this.all_actions[e]))return this.action_active=this.all_actions[e],!0;return!1},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>";for(var t=0;t<this.list_actions.length;t++)Rexbuilder_Util.removeClass(this.list_actions[t],"medium-editor-button-active")},activateListButtons:function(){if(""!=this.action_active)switch(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.action_active){case"insertorderedlist":this.list_active_action.innerHTML="<i class='fa fa-list-ol'></i>";break;case"insertunorderedlist":this.list_active_action.innerHTML="<i class='fa fa-list-ul'></i>";break;default:this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>"}},resetEnv:function(){this.action_active=""},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),void 0!==e&&o.execAction(e)}}),_=MediumEditor.extensions.button.extend({name:"contentBlockPosition",init:function(){this.button=this.document.createElement("button"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexbutton"),Rexbuilder_Util.addClass(this.button,"hide-tool-rexelement"),Rexbuilder_Util.addClass(this.button,"medium-editor-action"),this.button.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#C005-Layout'></use></svg></i>",this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.button.getBoundingClientRect();Rexbuilder_Util_Editor.mousePosition={client:{x:t.clientX,y:t.clientY},offset:{x:t.clientX-e.left,y:t.clientY-e.top}},Rexbuilder_Util_Editor.mouseClickObject={offset:{w:this.button.offsetWidth,h:this.button.offsetHeight}},l(this.base.getFocusedElement()).parents(".grid-stack-item").find(".edit-block-content-position").trigger("click")}}),C=MediumEditor.extensions.button.extend({name:"justifyDropdown",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),Rexbuilder_Util.addClass(this.button,"medium-editor-action"),Rexbuilder_Util.addClass(this.button,"medium-editor-action-list"),this.list_parent=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_parent,"me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),Rexbuilder_Util.addClass(this.list_active_action,"me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>",l(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),Rexbuilder_Util.addClass(this.list_element,"me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='justifyLeft'><i class='fa fa-align-left'></i></div><div class='medium-editor-action' data-tag-action='justifyCenter'><i class='fa fa-align-center'></i></div><div class='medium-editor-action' data-tag-action='justifyRight'><i class='fa fa-align-right'></i></div><div class='medium-editor-action hide-tool-rexbutton hide-tool-rexelement' data-tag-action='justifyFull'><i class='fa fa-align-justify'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),this.action_active="",this.all_actions=["justifyLeft","justifyCenter","justifyRight","justifyFull"],l(this.button).append(this.list_parent),l(this.button).append(this.list_element),this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(){for(var t=0;t<this.all_actions.length;t++)if(this.base.queryCommandState(this.all_actions[t]))return this.action_active=this.all_actions[t],!0;return!1},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){if(""!=this.action_active)switch(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.action_active){case"justifyLeft":this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>";break;case"justifyCenter":this.list_active_action.innerHTML="<i class='fa fa-align-center'></i>";break;case"justifyRight":this.list_active_action.innerHTML="<i class='fa fa-align-right'></i>";break;case"justifyFull":this.list_active_action.innerHTML="<i class='fa fa-align-justify'></i>";break;default:this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>"}},resetEnv:function(){this.action_active=""},handleClick:function(t){var e=void 0;if(t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),void 0!==e)if(h){this.action_active=e,this.clearListButtons(),this.activateListButtons();var i=o.getSelectedParentElement(),s=l(i).parents("p.rex-buttons-paragraph");switch(e){case"justifyRight":s.css("text-align","right");break;case"justifyCenter":s.css("text-align","center");break;case"justifyLeft":s.css("text-align","left")}var i=this.base.getExtensionByName("toolbar"),n=this.base.getExtensionByName("rexbutton-input");i&&i.setToolbarPosition(),n&&n.placeRexbuttonToolbox(),t.preventDefault()}else o.execAction(e)}}),y=MediumEditor.extensions.button.extend({name:"textEditorHtml",action:"changeText",aria:"text to html",contentDefault:"<span class='editor-text-html'>Text Html<span>",init:function(){this.button=this.document.createElement("button"),Rexbuilder_Util.addClass(this.button,"medium-editor-action"),Rexbuilder_Util.addClass(this.button,"text-html-editor-btn"),this.button.innerHTML="<i class='l-svg-icons'><svg><use xlink:href='#A008-Code'></use></svg></i>",this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("rexlive:mediumEditor:saveHTMLContent",this.handleHtmlEditorSave.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation(),this.traceEditor=this.base.getFocusedElement(),this.base.selectAllContents();var t=this.base.exportSelection().editableElementIndex,e=this.base.serialize();console.log(e);e=(e=e["element-"+t].value).replace('<span class="text-editor-span-fix" style="display: none;"></span>',"").trim();Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openHTMLEditor",htmlContent:e})},handleHtmlEditorSave:function(t){var e=this.base.exportSelection().editableElementIndex;this.base.setContent(t.customHTML,e)}}),T=MediumEditor.Extension.extend({name:"rexbutton-input",init:function(){h=!1,this.keyCode=MediumEditor.util.keyCode,this.arrowKeys=[37,38,39,40],this.traceBTN=null,this.traceEditor=null,this.subscribe("editableKeydown",this.handleEventKeyDown.bind(this)),this.subscribe("editableKeyup",this.handleEventKeyUp.bind(this)),this.subscribe("keyup",this.handleEventKeyUp.bind(this)),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this)),this.subscribe("hideToolbar",this.handleHideToolbar.bind(this)),this.rexbuttonToolsTop=document.createElement("div"),this.rexbuttonToolsTop.contentEditable=!1,this.rexbuttonToolsTop.classList.add("rexbutton-tools"),this.rexbuttonToolsTop.style.display="none",this.rexbuttonToolsTop.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-rexbutton-tools-top"),document.body.appendChild(this.rexbuttonToolsTop),this.rexbuttonToolsBottom=document.createElement("div"),this.rexbuttonToolsBottom.contentEditable=!1,this.rexbuttonToolsBottom.classList.add("rexbutton-tools"),this.rexbuttonToolsBottom.style.display="none",this.rexbuttonToolsBottom.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-rexbutton-tools-bottom"),document.body.appendChild(this.rexbuttonToolsBottom),this.deleteRexbuttonBtn=this.rexbuttonToolsTop.querySelector(".rex-delete-button"),this.editRexbuttonBtn=this.rexbuttonToolsBottom.querySelector(".rex-edit-button");var e=null,i=this;Rexbuilder_Util.$rexContainer.on("mouseenter",".rex-button-wrapper",function(t){i.hideAnchorPreview(),null!==e&&(clearTimeout(e),e=null)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rex-button-wrapper",function(t){e=setTimeout(i.showAnchorPreview,1e3)}),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("editableClick",this.traceInputRexButton.bind(this)),this.on(this.deleteRexbuttonBtn,"click",this.handleClickDeleteRexbutton.bind(this)),this.on(this.editRexbuttonBtn,"click",this.handleClickEditRexbutton.bind(this))},showAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="block"},hideAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="none"},handlePositionToolbar:function(t){var e=o.getSelectedParentElement(),i=this.base.getExtensionByName("toolbar"),i=l(i.toolbar);h=this.insideRexButton(e)?(i.addClass("medium-toolbar-hover-rexbutton"),i.find("button.medium-editor-action:not(.hide-tool-rexbutton)").first().addClass("medium-editor-button-first"),i.find("button.medium-editor-action:not(.hide-tool-rexbutton)").last().addClass("medium-editor-button-last"),!0):(this.restoreButtonClasses(i),!1)},handleHideToolbar:function(t){var e;h&&(e=this.base.getExtensionByName("toolbar"),e=l(e.toolbar),this.restoreButtonClasses(e),h=!1)},restoreButtonClasses:function(t){t.removeClass("medium-toolbar-hover-rexbutton"),t.find("button.medium-editor-action:not(.hide-tool-rexbutton)").first().removeClass("medium-editor-button-first"),t.find("button.medium-editor-action:not(.hide-tool-rexbutton)").last().removeClass("medium-editor-button-last"),t.find("button.medium-editor-action").first().addClass("medium-editor-button-first"),t.find("button.medium-editor-action").last().addClass("medium-editor-button-last")},viewRexbuttonToolbox:function(t){this.rexbuttonToolsTop.style.display="block",this.rexbuttonToolsBottom.style.display="block",this.placeRexbuttonToolbox()},hideRexbuttonToolbox:function(t){this.rexbuttonToolsTop.style.display="none",this.rexbuttonToolsBottom.style.display="none"},traceInputRexButton:function(t){var e;"click"==t.type&&(e=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument),l(t.target).hasClass("rex-button-text")?(this.traceBTN=l(t.target).parents(".rex-button-container")[0],this.viewRexbuttonToolbox()):0!=l(e).parents(".rex-button-container").length?(this.traceBTN=l(e).parents(".rex-button-container")[0],this.viewRexbuttonToolbox()):this.handleBlur(t))},handleBlur:function(t){0==l(t.target).parents(".rex-button-wrapper").length&&0==l(t.target).parents(".rexbutton-tools").length&&this.hideRexbuttonToolbox()},placeRexbuttonToolbox:function(){var t=this.traceBTN.getBoundingClientRect();this.rexbuttonToolsTop.style.width=t.width+"px",this.rexbuttonToolsTop.style.left=t.left+(t.width-this.rexbuttonToolsTop.offsetWidth)/2+"px",this.rexbuttonToolsTop.style.top=window.scrollY+t.top-this.rexbuttonToolsTop.offsetHeight+"px",this.rexbuttonToolsBottom.style.width=t.width+"px",this.rexbuttonToolsBottom.style.left=t.left+(t.width-this.rexbuttonToolsBottom.offsetWidth)/2+"px",this.rexbuttonToolsBottom.style.top=window.scrollY+t.top+t.height+"px"},handleClickDeleteRexbutton:function(t){this.hideRexbuttonToolbox();var e=l(this.traceBTN).parents(".rex-button-wrapper"),i=e.parents("p.rex-buttons-paragraph");e.remove(),0==i.find(".rex-button-wrapper").length&&i.remove()},handleClickEditRexbutton:function(t){this.hideRexbuttonToolbox();var e=l(this.traceBTN).parents(".rex-button-wrapper"),i={eventName:"rexlive:openRexButtonEditor",buttonData:Rexbuilder_Rexbutton.generateButtonData(e)};e.parents(".text-wrap").blur(),Rexbuilder_Util_Editor.sendParentIframeMessage(i)},handleEventKeyUp:function(t,e){var i,s,n=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument),a=l(n);MediumEditor.util.isKey(t,this.keyCode.ENTER)&&this.insideRexButton(n)&&(i=MediumEditor.selection.getCaretOffsets(n).right,n=MediumEditor.selection.getCaretOffsets(n).left,0===i&&a.parents(".rex-button-wrapper").eq(0).is(":last-child")?(s=l("<p><br></p>"),a.parents(".rex-buttons-paragraph").after(s),this.customMoveCursor(s[0],0)):0===n&&a.parents(".rex-button-wrapper").eq(0).is(":first-child")&&(s=l("<p><br></p>"),a.parents(".rex-buttons-paragraph").before(s),this.customMoveCursor(s[0],0)),t.preventDefault())},handleEventKeyDown:function(t,e){var i,s=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument),n=null;if(s&&(n=MediumEditor.selection.getCaretOffsets(s).left,i=MediumEditor.selection.getCaretOffsets(s).right),MediumEditor.util.isKey(t,this.keyCode.BACKSPACE)&&(0==window.getSelection().focusOffset||1==window.getSelection().focusOffset))if(0===n){var a=/^(\s+|<br\/?>)?$/i;if(this.isElementBefore(s,"rex-buttons-paragraph"))a.test(s.innerHTML)||t.preventDefault();else if(this.insideRexButton(s)){if(!(r=l(s)).parents(".rex-button-wrapper").eq(0).is(":first-child"))return void t.preventDefault();var o=r.parents(".rex-buttons-paragraph").eq(0).prev();if(!a.test(o[0].innerHTML))return void t.preventDefault()}}else this.isNodeBefore(s,n,"rex-button-wrapper")&&t.preventDefault();if(MediumEditor.util.isKey(t,this.keyCode.ENTER)&&this.insideRexButton(s))t.preventDefault();else{if(MediumEditor.util.isKey(t,this.keyCode.DELETE)&&0===i){var r,a=/^(\s+|<br\/?>)?$/i;if(this.insideRexButton(s)){if(!(r=l(s)).parents(".rex-button-wrapper").eq(0).is(":last-child"))return void t.preventDefault();o=r.parents(".rex-buttons-paragraph").eq(0).next();if(!a.test(o[0].innerHTML))return void t.preventDefault()}!a.test(s.innerHTML)&&this.isElementAfter(s,"rex-buttons-paragraph")&&t.preventDefault()}!this.isInsideRexbuttonParagraph(s)||this.insideRexButton(s)||MediumEditor.util.isKey(t,this.arrowKeys)||t.preventDefault()}},replaceClasses:function(t,e,i){t.find("."+e).removeClass(e).addClass(i)},customMoveCursor:function(t,e){e=void 0!==e?e:0;var i=document.createRange(),s=window.getSelection();i.setStart(t,e),i.collapse(!0),s.removeAllRanges(),s.addRange(i)},isSafeInsert:function(t){var e=l(t),i=MediumEditor.selection.getCaretOffsets(t).left,s=!0;return s=e.hasClass("rex-button-text")||e.prev().hasClass("rex-button-wrapper")&&!e.parent().hasClass("medium-editor-element")||this.isNodeBefore(t,i,"rex-button-wrapper")?!1:s},isNodeBefore:function(t,e,i){for(var s,n=0,a=t.childNodes;(s=parseInt(a[n].length),!(e<(s=isNaN(s)?l(a[n]).text().length:s)))&&(e-=s,(n+=1)!=a.length););if(0<n){t=parseInt(a[n-1].length);if(isNaN(t)&&l(a[n-1]).hasClass(i))return!0}return!1},isElementBefore:function(t,e){var i=l(t);if(i.prev().hasClass(e))return!0;for(;!i.is("body")&&!i.parent().hasClass("medium-editor-element");)i=i.parent();return i.prev().hasClass(e)},isElementAfter:function(t,e){var i=l(t);if(i.next().hasClass(e))return!0;for(;!i.is("body")&&!i.parent().hasClass("medium-editor-element");)i=i.parent();return i.next().hasClass(e)},isInsideRexbuttonParagraph:function(t){t=l(t);return!!t.hasClass("rex-buttons-paragraph")||0!=t.parents(".rex-buttons-paragraph").length},insideRexButton:function(t){t=l(t);return!!t.hasClass("rex-button-wrapper")||0!=t.parents(".rex-button-wrapper").length}}),w=MediumEditor.Extension.extend({name:"insert-media",init:function(){this.insertionPoint=null,this.traceImg=null,this.traceVideo=null,this.traceSVG=null,this.traceSelection=null,this.traceEditor=null,this.method=4,this.submethod=3,this.toolbarWrapClass="me-insert-media-button",this.mirrorResize=document.createElement("img"),this.mirrorResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorResize),this.mirrorVideoResize=document.createElement("span"),this.mirrorVideoResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorVideoResize),this.mirrorSVGResize=document.createElement("span"),this.mirrorSVGResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorSVGResize),this.resizeSizes=document.createElement("span"),this.resizeSizes.classList.add("me-resize-sizes"),this.imageEditToolbar=document.createElement("div"),this.imageEditToolbar.id="me-edit-inline-image-toolbar",this.imageEditToolbar.classList.add("medium-editor-toolbar"),this.imageEditToolbar.classList.add("medium-toolbar-arrow-under"),this.imageEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-image-edit"),document.body.appendChild(this.imageEditToolbar),this.inlineSVGEditToolbar=document.createElement("div"),this.inlineSVGEditToolbar.id="me-edit-inline-svg-toolbar",this.inlineSVGEditToolbar.classList.add("medium-editor-toolbar"),this.inlineSVGEditToolbar.classList.add("medium-toolbar-arrow-under"),this.inlineSVGEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-inline-svg-edit"),document.body.appendChild(this.inlineSVGEditToolbar),b(this.inlineSVGEditToolbar.querySelector(".me-svg-color"),this.applySVGColor),this.videoEditToolbar=document.createElement("div"),this.videoEditToolbar.id="me-edit-inline-image-toolbar",this.videoEditToolbar.classList.add("medium-editor-toolbar"),this.videoEditToolbar.classList.add("medium-toolbar-arrow-under"),this.videoEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-image-edit"),document.body.appendChild(this.videoEditToolbar),this.mediaBtn=document.createElement("div"),this.mediaBtn.contentEditable=!1,this.mediaBtn.classList.add(this.toolbarWrapClass),this.mediaBtn.style.display="none",this.mediaBtn.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-insert-media-button"),document.body.appendChild(this.mediaBtn),this.mediaLibraryBtn=this.mediaBtn.querySelector(".me-insert-image"),this.mediaEmbedBtn=this.mediaBtn.querySelector(".me-insert-embed"),this.mediaEmbedInput=this.mediaBtn.querySelector(".me-insert-embed__value"),this.inlineSVGBtn=this.mediaBtn.querySelector(".me-insert-inline-svg"),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.traceInput.bind(this)),this.subscribe("editableKeydown",this.traceInput.bind(this)),this.subscribe("rexlive:mediumEditor:inlineImageEdit",this.handleImageInsertReplace.bind(this)),this.subscribe("rexlive:mediumEditor:inlineVideoEditor:Transfer",this.getEmbedCode.bind(this)),this.subscribe("rexlive:mediumEditor:inlineSVG:transfer",this.handleInlineSVGInsertReplace.bind(this)),this.subscribe("editableKeydown",this.handleRemoveInlineElement.bind(this)),this.on(this.mediaLibraryBtn,"click",this.handleClickImage.bind(this)),this.on(this.imageEditToolbar,"click",this.handleImageEdit.bind(this)),this.on(this.mediaEmbedBtn,"click",this.handleClickEmbed.bind(this)),void 0!==this.mediaEmbedInput&&(this.on(this.mediaEmbedInput,"keydown",this.getEmbedCode.bind(this)),this.on(this.mediaEmbedInput,"blur",this.mediaEmbedInputBlur.bind(this))),this.on(this.inlineSVGBtn,"click",this.handleClickInlineSVG.bind(this)),this.on(this.inlineSVGEditToolbar,"click",this.handleInlineSVGEdit.bind(this))},handleBlur:function(t){0!=l(t.target).parents("#me-edit-inline-image-toolbar").length||0!=l(t.target).parents("#me-edit-inline-svg-toolbar").length||l(t.target).is(".me-insert-embed__value")||0!=l(t.target).parents(".me-insert-embed").length||(this.mediaBtn.style.display="none",this.mediaBtn.classList.remove("embed-value-visibile"),this.hideAllToolbars())},handleFocus:function(t,e){this.mediaBtn.style.display="block",4==this.method&&(this.traceEditor=this.base.getFocusedElement(),this.traceSelection=rangy.getSelection().saveCharacterRanges(this.traceEditor)),this.placeMediaBtn()},placeMediaBtnBottomTextEditor:function(){var t=this.base.getFocusedElement().getBoundingClientRect();this.mediaBtn.style.left=t.left+(t.width-this.mediaBtn.offsetWidth)/2+"px",this.mediaBtn.style.top=window.scrollY+t.top+t.height-this.mediaBtn.offsetHeight+"px"},placeMediaBtnTopCenterTextEditor:function(){var t=this.base.getFocusedElement(),t=l(t).parents(".grid-item-content-wrap")[0].getBoundingClientRect();this.mediaBtn.style.left=t.left+(t.width-this.mediaBtn.offsetWidth)/2+"px",this.mediaBtn.style.top=window.scrollY+t.top+15+"px"},placeMediaBtn:function(t){var e=this.base.getFocusedElement();e&&(e=(void 0===t?l(e).parents(".grid-item-content-wrap"):t)[0].getBoundingClientRect(),this.mediaBtn.style.left=window.scrollX+e.left+e.width-this.mediaBtn.offsetWidth-15+"px",this.mediaBtn.style.top=window.scrollY+e.top+e.height-this.mediaBtn.offsetHeight-15+"px")},traceInput:function(t){if(0===l(t.target).parents(".me-insert-media-button").length&&!MediumEditor.util.isKey(t,MediumEditor.util.keyCode.ESCAPE))switch(this.method){case 1:case 2:this.base.saveSelection();break;case 3:this.traceSelection&&rangy.removeMarkers(this.traceSelection),this.traceSelection=rangy.saveSelection();break;case 4:var e=this.base.getFocusedElement();this.traceSelection=rangy.getSelection().saveCharacterRanges(e)}"click"==t.type&&("IMG"==t.target.nodeName?(0!=l(this.mirrorResize).find(".ui-resizable-handle").length&&l(this.mirrorResize).resizable("destroy"),this.viewEditImgToolbar(t.target),this.imageResizableEnable(),this.hideEditVideoToolbar(),this.hideEditInlineSVGToolbar()):"SPAN"==t.target.nodeName&&"overlay-status-for-video-inline"==t.target.className?(0!=l(this.mirrorVideoResize).find(".ui-resizable-handle").length&&l(this.mirrorVideoResize).resizable("destroy"),this.viewEditVideoToolbar(t.target),this.videoResizableEnable(),this.hideEditImgToolbar(),this.hideEditInlineSVGToolbar()):"USE"==t.target.nodeName.toUpperCase()&&""!==t.target.getAttribute("xlink:href")||"SVG"===t.target.nodeName.toUpperCase()&&"I"===t.target.parentNode.nodeName.toUpperCase()?(t="SVG"===t.target.nodeName.toUpperCase()?t.target.children[0]:t.target,0!=l(this.mirrorSVGResize).find(".ui-resizable-handle").length&&l(this.mirrorSVGResize).resizable("destroy"),0!==l(t).parents(".wpcf7-form:not(.no-builder-form)").length?this.hideAllToolbars():(this.viewEditInlineSVGToolbar(t),this.inlineSVGResizableEnable()),this.hideEditVideoToolbar(),this.hideEditImgToolbar()):this.hideAllToolbars())},handleClickImage:function(t){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openMEImageUploader",img_data:{}})},handleImageInsertReplace:function(t){var e,i='<img class="wp-image-'+t.imgData.idImage+" "+t.imgData.align+'" data-image-id="'+t.imgData.idImage+'" src="'+t.imgData.urlImage+'" alt="" width="'+t.imgData.width+'" height="'+t.imgData.height+'">';switch(""!==t.displayData.linkUrl&&(i='<a href="'+t.displayData.linkUrl+'">'+i+"</a>"),this.method){case 1:case 2:this.base.restoreSelection();break;case 3:this.traceSelection&&(rangy.restoreSelection(this.traceSelection),e=this.getFirstRange());break;case 4:this.traceSelection&&(rangy.getSelection().restoreCharacterRanges(this.traceEditor,this.traceSelection),(e=this.getFirstRange()).refresh())}if(this.traceImg){switch(this.method){case 1:case 2:case 3:this.base.selectElement(this.traceImg);break;case 4:var s=rangy.createRange();t.displayData.previousLink?s.selectNode(this.traceImg.parentElement):s.selectNode(this.traceImg),e=s,this.submethod=1}rangy.dom.removeNode(this.traceImg)}switch(this.method){case 1:MediumEditor.util.insertHTMLCommand(document,i);break;case 2:this.base.pasteHTML(i,{cleanPastedHTML:!1,cleanAttrs:["dir"]});break;case 3:e&&(n=Rexbuilder_Dom_Util.htmlToElement(i),e.insertNode(n));break;case 4:if(e)switch(this.submethod){case 1:e.pasteHtml(i);break;case 2:var n=Rexbuilder_Dom_Util.htmlToElement(i);break;case 3:var a,o,r,n=Rexbuilder_Dom_Util.htmlToElement(i);e.insertNode(n),n.parentElement===this.traceEditor&&(a=n.previousElementSibling,r="",(o=n.nextElementSibling)?r=o.tagName.toLowerCase():a&&(r=a.tagName.toLowerCase()),this.emptyLine(o)&&rangy.dom.removeNode(o),this.emptyLine(a)&&rangy.dom.removeNode(a),"div"!==r&&"span"!==r&&""!==r||(r="p"),this.wrap(n,document.createElement(r)))}}this.hideAllToolbars(),this.mediaBtn.style.display="none"},getFirstRange:function(){var t=rangy.getSelection();return t.rangeCount?t.getRangeAt(0):null},wrap:function(t,e){t.parentNode.insertBefore(e,t),e.appendChild(t)},emptyLine:function(t){return!(!t||1!==t.childNodes.length||!(1===t.childNodes[0].nodeType&&"br"===t.childNodes[0].tagName.toLowerCase()||3===t.childNodes[0].nodeType&&0===t.childNodes[0].textContent.trim().length))},handleImageEdit:function(t){var e,i,t=l(t.target);(t=t.hasClass("medium-editor-action")?t:t.parents(".medium-editor-action")).hasClass("me-image-align-left")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignleft"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),t.hasClass("me-image-align-center")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("aligncenter"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),t.hasClass("me-image-align-right")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignright"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),t.hasClass("me-image-align-none")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignnone"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),t.hasClass("me-image-inline-photoswipe")&&(void 0===this.traceImg.getAttribute("inline-photoswipe")?this.traceImg.setAttribute("inline-photoswipe",!0):this.traceImg.setAttribute("inline-photoswipe","true"!=this.traceImg.getAttribute("inline-photoswipe")),this.viewEditImgToolbar(this.traceImg)),t.hasClass("me-image-replace")&&(i="",this.traceImg.classList.contains("alignleft")&&(i="alignleft"),this.traceImg.classList.contains("aligncenter")&&(i="aligncenter"),this.traceImg.classList.contains("alignright")&&(i="alignright"),this.traceImg.classList.contains("alignnone")&&(i="alignnone"),e=!1,"A"===this.traceImg.parentElement.tagName&&(e=!0),i={eventName:"rexlive:openMEImageUploader",img_data:{image_id:this.traceImg.getAttribute("data-image-id"),width:this.traceImg.width,height:this.traceImg.height,align:i,imgInsideLink:e}},Rexbuilder_Util_Editor.sendParentIframeMessage(i)),t.hasClass("me-image-delete")&&(l(this.traceImg).remove(),this.hideEditImgToolbar())},setActiveButtonsImgEditToolbar:function(t){l(this.imageEditToolbar).find("button").each(function(){l(this).hasClass("me-image-align-left")&&(l(t).hasClass("alignleft")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),l(this).hasClass("me-image-align-center")&&(l(t).hasClass("aligncenter")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),l(this).hasClass("me-image-align-right")&&(l(t).hasClass("alignright")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),l(this).hasClass("me-image-align-none")&&(l(t).hasClass("alignnone")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),l(this).hasClass("me-image-inline-photoswipe")&&(void 0!==t.getAttribute("inline-photoswipe")&&"true"==t.getAttribute("inline-photoswipe")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active"))})},applySVGColor:function(t){l(a.traceSVG).parent("svg").css("fill",t)},handleInlineSVGEdit:function(t){var e,t=l(t.target);(t=t.hasClass("medium-editor-action")?t:t.parents(".medium-editor-action")).hasClass("me-svg-replace")&&(e=this.traceSVG.getAttribute("xlink:href").replace("#",""),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:inlineSVG",inlineSVGData:{id:e}})),t.hasClass("me-svg-inline")&&(l(this.traceSVG).parents("i").toggleClass("inline-icon"),l(this.inlineSVGEditToolbar.querySelector(".me-svg-inline")).toggleClass("medium-editor-button-active")),t.hasClass("me-svg-delete")&&(l(this.traceSVG).parents("i").remove(),this.hideEditInlineSVGToolbar())},viewEditImgToolbar:function(t){this.traceImg=t,this.setActiveButtonsImgEditToolbar(this.traceImg),this.placeEditImgToolbar(),this.imageEditToolbar.classList.add("medium-editor-toolbar-active")},viewEditVideoToolbar:function(t){this.traceVideo=t},viewEditInlineSVGToolbar:function(t){this.traceSVG=t,this.placeEditInlineSVGToolbar(),this.checkToolbarTools(),this.inlineSVGEditToolbar.classList.add("medium-editor-toolbar-active")},checkToolbarTools:function(){var t=l(this.traceSVG).parents("i").hasClass("inline-icon"),e=this.inlineSVGEditToolbar.querySelector(".me-svg-inline");t?e.classList.add("medium-editor-button-active"):e.classList.remove("medium-editor-button-active")},imageResizableEnable:function(){var i=this,t=this.traceImg.getBoundingClientRect(),t=(this.mirrorResize.style.width=t.width+"px",this.mirrorResize.style.height=t.height+"px",this.mirrorResize.style.top=t.top+window.scrollY+"px",this.mirrorResize.style.left=t.left+window.scrollX+"px",this.mirrorResize.style.display="block",l(this.mirrorResize)),e=l(this.traceImg);t.resizable({aspectRatio:!0,handles:"e, s, se",alsoResize:e,create:function(t,e){t=l(t.target);t.addClass("me-ui-custom-wrapper"),t.append(i.resizeSizes),t.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),t.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),t.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,e){i.resizeSizes.style.display="block"},resize:function(t,e){i.placeMirrorImg(t.target),i.placeEditImgToolbar(),i.resizeSizes.textContent=e.size.width+" x "+e.size.height},stop:function(t,e){i.resizeSizes.style.display="none"}})},inlineSVGResizableEnable:function(){var i=this,t=this.traceSVG.getBoundingClientRect(),t=(this.mirrorSVGResize.style.width=t.width+"px",this.mirrorSVGResize.style.height=t.height+"px",this.mirrorSVGResize.style.top=t.top+window.scrollY+"px",this.mirrorSVGResize.style.left=t.left+window.scrollX+"px",this.mirrorSVGResize.style.display="block",l(this.mirrorSVGResize)),s=l(this.traceSVG).parents("i");t.resizable({aspectRatio:!0,handles:"e, s, se",create:function(t,e){t=l(t.target);t.addClass("me-ui-custom-wrapper"),t.append(i.resizeSizes),t.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),t.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),t.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,e){i.resizeSizes.style.display="block"},resize:function(t,e){i.placeMirrorSVG(t.target),i.placeEditInlineSVGToolbar(),s.css("fontSize",e.size.width+"px"),i.resizeSizes.textContent=e.size.width+" x "+e.size.height},stop:function(t,e){i.resizeSizes.style.display="none"}})},videoResizableEnable:function(){var i=this,t=this.traceVideo.getBoundingClientRect(),t=(this.mirrorVideoResize.style.width=t.width+"px",this.mirrorVideoResize.style.height=t.height+"px",this.mirrorVideoResize.style.top=t.top+window.scrollY+"px",this.mirrorVideoResize.style.left=t.left+window.scrollX+"px",this.mirrorVideoResize.style.display="block",l(this.mirrorVideoResize)),s=l(this.traceVideo);t.resizable({aspectRatio:!0,handles:"e, s, se",alsoResize:s,create:function(t,e){t=l(t.target);t.addClass("me-ui-custom-wrapper"),t.append(i.resizeSizes),t.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),t.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),t.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,e){i.resizeSizes.style.display="block"},resize:function(t,e){i.placeMirrorVideo(t.target),i.resizeSizes.textContent=e.size.width+" x "+e.size.height,s.find("iframe").height(e.size.height),s.find("iframe").width(e.size.width)},stop:function(t,e){i.resizeSizes.style.display="none"}})},handleRemoveInlineElement:function(t){this.hideAllToolbars()},placeMirrorImg:function(t){var e=this.traceImg.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeMirrorVideo:function(t){var e=this.traceVideo.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeMirrorSVG:function(t){var e=this.traceSVG.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeEditImgToolbar:function(){var t=this.traceImg.getBoundingClientRect();this.imageEditToolbar.style.left=t.left+(t.width-this.imageEditToolbar.offsetWidth)/2+"px",this.imageEditToolbar.style.top=window.scrollY+t.top-this.imageEditToolbar.offsetHeight-8+"px"},placeEditInlineSVGToolbar:function(){var t=this.traceSVG.getBoundingClientRect();this.inlineSVGEditToolbar.style.left=t.left+(t.width-this.inlineSVGEditToolbar.offsetWidth)/2+"px",this.inlineSVGEditToolbar.style.top=window.scrollY+t.top-this.inlineSVGEditToolbar.offsetHeight-8+"px"},hideEditImgToolbar:function(){this.traceImg&&(void 0!==l(this.mirrorResize).data("uiResizable")&&l(this.mirrorResize).resizable("destroy"),this.mirrorResize.style.display="",this.mirrorResize.style.margin="",this.mirrorResize.style.position="",this.mirrorResize.style.top="",this.mirrorResize.style.left=""),this.traceImg=null,this.imageEditToolbar.classList.remove("medium-editor-toolbar-active")},hideEditVideoToolbar:function(){this.traceVideo&&(void 0!==l(this.mirrorVideoResize).data("uiResizable")&&l(this.mirrorVideoResize).resizable("destroy"),this.mirrorVideoResize.style.display="",this.mirrorVideoResize.style.margin="",this.mirrorVideoResize.style.position="",this.mirrorVideoResize.style.top="",this.mirrorVideoResize.style.left=""),this.traceVideo=null},hideEditInlineSVGToolbar:function(){this.traceSVG&&(void 0!==l(this.mirrorSVGResize).data("uiResizable")&&l(this.mirrorSVGResize).resizable("destroy"),this.mirrorSVGResize.style.display="",this.mirrorSVGResize.style.margin="",this.mirrorSVGResize.style.position="",this.mirrorSVGResize.style.top="",this.mirrorSVGResize.style.left=""),this.traceSVG=null,this.inlineSVGEditToolbar.classList.remove("medium-editor-toolbar-active")},hideAllToolbars:function(){this.hideEditImgToolbar(),this.hideEditVideoToolbar(),this.hideEditInlineSVGToolbar()},pasteMediaHTML:function(t){this.base.restoreSelection(),this.base.pasteHTML(t='<div class="media-embed-wrap">'+t+"</div>",{cleanPastedHTML:!1,cleanAttrs:["dir"]}),this.hideAllToolbars(),this.mediaBtn.classList.remove("embed-value-visibile"),this.mediaBtn.style.display="none"},handleClickEmbed:function(t){var e={eventName:"rexlive:inlineVideoEditor",lastCursorPosition:this.traceSelection};Rexbuilder_Util_Editor.sendParentIframeMessage(e),this.clientLastCursorPosition=e.lastCursorPosition},getEmbedCode:function(t){var n=this,a=t.valueUrl;""!==a&&(this.mediaEmbedInput.classList.remove("embed-loading"),l.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_get_embed_code",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,url_to_embed:a},success:function(t,e){var i,s;a="",t.success&&""!==t.data.embed&&(n.traceSelection&&(rangy.getSelection().restoreCharacterRanges(n.traceEditor,n.clientLastCursorPosition),(i=n.getFirstRange()).refresh(),s="span"),t=Rexbuilder_Dom_Util.htmlToElement(t.data.embed),i.insertNode(t),(i=document.createElement(s)).className="overlay-status-for-video-inline",n.wrap(t,i),(s=l(n.traceEditor).parents(".grid-stack-item")).parent().data().plugin_perfectGridGalleryEditor.updateElementHeight(s[0]),t={eventName:"rexlive:edited",modelEdited:s.parents(".rexpansive_section").hasClass("rex-model-section")},Rexbuilder_Util_Editor.sendParentIframeMessage(t))},error:function(t){},complete:function(){n.mediaEmbedInput.classList.remove("embed-loading"),n.traceEditor.focus()}}))},mediaEmbedInputBlur:function(t){this.mediaBtn.classList.remove("embed-value-visibile")},handleClickInlineSVG:function(t){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:inlineSVG",inlineSVGData:{}})},handleInlineSVGInsertReplace:function(t){var e,i='<i class="'+t.svg_class+'"><svg><use xlink:href="#'+t.svg_ID+'"></use></svg></i>',s=(0<this.traceSelection.length&&(rangy.getSelection().restoreCharacterRanges(this.traceEditor,this.traceSelection),(e=this.getFirstRange()).refresh()),!1);this.traceSVG&&(this.traceSVG.setAttribute("xlink:href","#"+t.svg_ID),s=!0),e&&!s&&(t=Rexbuilder_Dom_Util.htmlToElement(i),e.insertNode(t),t.parentElement===this.traceEditor)&&(s=t.previousElementSibling,i="",(e=t.nextElementSibling)?i=e.tagName.toLowerCase():s&&(i=s.tagName.toLowerCase()),this.emptyLine(e)&&rangy.dom.removeNode(e),this.emptyLine(s)&&rangy.dom.removeNode(s),"div"!==i&&"span"!==i&&""!==i||(i="p"),this.wrap(t,document.createElement(i))),this.hideAllToolbars(),this.mediaBtn.style.display="none",Rexbuilder_Util_Editor.builderEdited(!1)}}),R=MediumEditor.Extension.extend({name:"openHTMLEditorExtension",init:function(){this.toolbarWrapClass="me-insert-media-button",this.editorIndex=-1,this.openHTMLEditorBtn=document.createElement("div"),this.openHTMLEditorBtn.contentEditable="false",this.openHTMLEditorBtn.classList.add(this.toolbarWrapClass),this.openHTMLEditorBtn.style.display="none",this.openHTMLEditorBtn.innerHTML='<div class="tool-button"> <i class="l-svg-icons"><svg><use xlink:href="#A008-Code"></use></svg></i> </div>',document.body.appendChild(this.openHTMLEditorBtn),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.on(this.openHTMLEditorBtn,"click",this.handleClickBtn.bind(this))},handleBlur:function(t){0==l(t.target).parents(".me-insert-media-button").length&&(this.openHTMLEditorBtn.style.display="none",this.openHTMLEditorBtn.classList.remove("embed-value-visibile"),this.editorIndex=-1,this.traceEditor=null)},handleFocus:function(t,e){this.openHTMLEditorBtn.style.display="block",this.traceEditor=this.base.getFocusedElement(),this.placeMediaBtn()},placeMediaBtn:function(t){var e=this.base.getFocusedElement();e&&(e=(void 0===t?l(e).parents(".grid-item-content-wrap"):t)[0].getBoundingClientRect(),this.openHTMLEditorBtn.style.left=window.scrollX+e.left+e.width-this.openHTMLEditorBtn.offsetWidth-15+"px",this.openHTMLEditorBtn.style.top=window.scrollY+e.top+15+"px")},handleClickBtn:function(){this.traceEditor.focus(),this.base.selectAllContents(),this.base.getExtensionByName("toolbar").toolbar.querySelector(".text-html-editor-btn").click()}}),S=MediumEditor.Extension.extend({name:"onlySVGFixExtension",init:function(){this.subscribe("editableClick",this.checkContent.bind(this))},checkContent:function(t){if("click"==t.type){var e=this.base.getFocusedElement();if(this.checkOnlyIcons(e)){for(var i=t.currentTarget;0!==i.childElementCount;)i=i.children[i.childElementCount-1];"SVG"===(i="USE"===i.tagName.toUpperCase()?i.parentNode:i).tagName.toUpperCase()&&(i=i.parentNode);var e=document.createElement("span"),t=(e.innerHTML="&nbsp;",i.parentNode.append(e),document.createRange()),s=window.getSelection();t.setStart(e,1),t.collapse(!0),s.removeAllRanges(),s.addRange(t)}}},checkOnlyIcons:function(t){return 0!==t.getElementsByTagName("svg").length&&""==t.innerText}}),L=MediumEditor.Extension.extend({name:"rexelement",init:function(){this.traceElement=null,this.traceElementId="",this.containsWpcf7,this.subscribe("editableMouseover",this.handleMouseOver.bind(this)),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this)),this.subscribe("hideToolbar",this.handleHideToolbar.bind(this))},handleMouseOver:function(t,e){var t=t.target,i=Rexbuilder_Util.hasClass(l(e).parents(".grid-stack-item").get(0),"item--me-focus"),e=l(e).parents(".rexpansive_section").get(0),e=Rexbuilder_Util.hasClass(e,"block-editing");i&&e&&(i=t.matches(".rex-element-wrapper")?t:l(t).parents(".rex-element-wrapper").get(0))&&(this.traceElement=i,this.traceElementId=i.dataset.rexElementId,this.containsWpcf7=!!this.traceElement.querySelector(".wpcf7"))},editRexelement:function(t){var e=l(this.traceElement),e=(this.containsWpcf7&&this.setOutline(this.traceElement.querySelector(".wpcf7-form"),"#00ACFF"),{eventName:"rexlive:openRexElementChoose",elementData:Rexbuilder_Rexelement.generateElementData(e)});Rexbuilder_Util_Editor.sendParentIframeMessage(e)},deleteRexelement:function(t){var e=l(this.traceElement),i=e.parents("p.rex-elements-paragraph");this.containsWpcf7&&Rexbuilder_Rexwpcf7_Editor.removeFormInPage(this.traceElementId),e.remove(),0==i.find(".rex-element-wrapper").length&&i.remove(),Rexbuilder_Util_Editor.builderEdited(!1)},setOutline:function(t,e){t.style.outline="2px solid "+e,t.style.outlineOffset="-1px"},handlePositionToolbar:function(t){var e=o.getSelectedParentElement(),i=this.base.getExtensionByName("toolbar");this.insideRexElement(e)&&(i.toolbar.style.display="none")},handleHideToolbar:function(t){this.base.getExtensionByName("toolbar").toolbar.style.display=""},insideRexElement:function(t){t=l(t);return!!t.hasClass("rex-element-wrapper")||0!=t.parents(".rex-element-wrapper").length},hideAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="none"}}),I=MediumEditor.Extension.extend({name:"rexwpcf7",init:function(){this.traceGsItem=null,this.traceForm=null,this.traceRow=null,this.traceColumn=null,this.traceColumnContent=null,Rexbuilder_Util.$rexContainer.on("click",".wpcf7-form-button",this.delegateClickContainer.bind(this)),this.subscribe("editableMouseover",this.handleMouseOver.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),Rexbuilder_Util.$document.on("rexlive:clearFormOutlines",this.clearOutlines.bind(this)),Rexbuilder_Rexwpcf7_Editor.setCf7EditorInstance(this)},delegateClickContainer:function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-operation"),i=""===e;if(!i)switch(e){case"addRow":Rexbuilder_Util.addClass(this.traceForm.querySelector(".wpcf7-select-columns--bottom"),"active");break;case"addRowTop":Rexbuilder_Util.addClass(this.traceForm.querySelector(".wpcf7-select-columns--top"),"active");break;case"addSelectedColumns":this.addSelectedColumns(t.currentTarget);break;case"cloneRow":this.cloneRow();break;case"deleteRow":this.deleteRow();break;case"columnSettings":this.openColumnSettings();break;case"cloneColumn":this.cloneColumn();break;case"deleteColumnContent":this.deleteColumnContent();break;case"addColumnContent":this.addColumnContent();break;case"editElement":d.editRexelement();break;case"deleteElement":d.deleteRexelement()}},handleMouseOver:function(t,e){this.traceTextWrap=e,this.$traceTextWrap=l(e),this.traceGsItem=l(this.traceTextWrap).parents(".grid-stack-item").get(0);var e=l(this.traceTextWrap).parents(".rexpansive_section").get(0),t=t.target;Rexbuilder_Util.hasClass(this.traceGsItem,"item--me-focus")&&Rexbuilder_Util.hasClass(e,"block-editing")&&((e=t.matches(".wpcf7-form:not(.no-builder-form)")?t:l(t).parents(".wpcf7-form:not(.no-builder-form)").get(0))?(this.traceForm=e,e=t.matches(".wpcf7-row")?t:l(t).parents(".wpcf7-row").get(0),this.updateHeight(!0),e&&(this.traceRow=e,Rexbuilder_Util.removeClass(this.traceForm.querySelector(".wpcf7-select-columns--top"),"active"),Rexbuilder_Util.removeClass(this.traceForm.querySelector(".wpcf7-select-columns--bottom"),"active"),e=t.matches(".wpcf7-column")?t:l(t).parents(".wpcf7-column").get(0))&&(this.traceColumn=e,Rexbuilder_Util.hasClass(e,"with-button")||(this.traceColumnContent=e.querySelector(".wpcf7-form-control-wrap")))):this.handleBlur())},addColumnContent:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t={eventName:"rexlive:openRexWpcf7AddContent",insertionPoint:{formID:d.traceElementId,row_number:this.traceRow.getAttribute("wpcf7-row-number"),column_number:this.traceColumn.getAttribute("wpcf7-column-number")}};Rexbuilder_Util_Editor.sendParentIframeMessage(t),V(this.$traceTextWrap)},addSelectedColumns:function(t){Rexbuilder_Util_Editor.builderEdited(!1);t=parseInt(t.className.match(/select-(\d)-columns?/)[1]);Rexbuilder_Rexwpcf7_Editor.addNewRow(d.traceElementId,t),this.updateHeight()},cloneRow:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=l(this.traceRow).clone(),e=parseInt(t.attr("wpcf7-row-number"));Rexbuilder_Rexwpcf7_Editor.addRow(d.traceElementId,t,e),Rexbuilder_Live_Utilities.launchTooltips(),this.updateHeight()},deleteRow:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=l(this.traceRow).attr("wpcf7-row-number");Rexbuilder_Rexwpcf7_Editor.deleteRow(d.traceElementId,t),this.updateHeight()},openColumnSettings:function(){this.setOutline(this.traceColumnContent,"#FF0055");var t=!!this.traceColumn.querySelector(".rex-wpcf7-column-content-data"),e=!!this.traceColumn.querySelector(".rex-wpcf7-file-caption"),t={eventName:"rexlive:openRexWpcf7EditContent",columnContentData:Rexbuilder_Rexwpcf7.generateColumnContentData(l(this.traceColumn),t),spanDataExists:t,fileCaptionExists:e};Rexbuilder_Util_Editor.sendParentIframeMessage(t)},cloneColumn:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=parseInt(this.traceColumn.getAttribute("wpcf7-column-number")),e=parseInt(this.traceRow.getAttribute("wpcf7-row-number"));Rexbuilder_Rexwpcf7_Editor.addClonedColumnRow(d.traceElementId,t,e),Rexbuilder_Live_Utilities.launchTooltips(),this.updateHeight()},deleteColumnContent:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=this.traceRow.getAttribute("wpcf7-row-number"),e=this.traceColumn.getAttribute("wpcf7-column-number");Rexbuilder_Rexwpcf7_Editor.deleteColumnContent(d.traceElementId,t,e),this.updateHeight()},handleBlur:function(){this.updateHeight()},setOutline:function(t,e){t.style.outline="2px solid "+e,t.style.outlineOffset="-1px"},clearOutlines:function(){this.traceForm&&(this.traceForm.style.outline="",this.traceForm.style.outlineOffset="",this.traceColumnContent.style.outline="",this.traceColumnContent.style.outlineOffset="")},updateHeight:function(t){var e;function i(t){0!==(e=l(t).parents(".text-wrap")).length&&Rexbuilder_Util_Editor.updateBlockContainerHeight(e,!1,!0)}(t=t||!1)?this.traceForm&&i(this.traceForm):0!==(t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+d.traceElementId+'"] .wpcf7-form'))).length&&t.forEach(i)}});var k=new MutationObserver(function(t){t.forEach(z)}),B={subtree:!0,childList:!0,characterData:!0};function z(t){Array.prototype.slice.call(t.removedNodes).forEach(function(t,e){e instanceof HTMLElement&&e.matches(".rex-button-data")&&(t=t.target,l(t).prepend(e))}.bind(null,t))}function M(){e=new g,t=new v,i=new x,s=new C,n=new E,a=new w,r=new R,d=new L,(o=new MediumEditor(".editable",{toolbar:{buttons:["colorPicker","formattingTags",{name:"anchor",contentDefault:'<i class="l-svg-icons"><svg><use xlink:href="#C001-Link"></use></svg></i>',formSaveLabel:'<span class="tool-button tool-button--inline"><i class="l-svg-icons"><svg><use xlink:href="#A006-Save"></use></svg></i></span>',formCloseLabel:'<span class="tool-button tool-button--inline tool-button--black"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></span>'},"headingTags","justifyDropdown","listDropdown","contentBlockPosition","textEditorHtml"]},imageDragging:!1,extensions:{imageDragging:{},colorPicker:e,textEditorHtml:new y,headingTags:t,formattingTags:i,justifyDropdown:s,listDropdown:n,contentBlockPosition:new _,"insert-media":a,"open-html-editor":r,textGradient:new f,"rexbutton-input":new T,rexelement:d,rexwpcf7:new I,onlySVGFixExtension:new S},paste:{forcePlainText:!0,cleanPastedHTML:!1},placeholder:{text:"Type here your text",hideOnClick:!1}})).subscribe("editableInput",G),o.subscribe("editableKeydown",N),o.subscribe("editablePaste",U),o.subscribe("focus",H),o.subscribe("blur",D),o.subscribe("addElement",function(t,e){k.observe(e,B)})}var A=function(t){o.trigger(t.name,t.data,t.editable)};function G(t,e){e=l(e).parents(".rexpansive_section").hasClass("rex-model-section");Rexbuilder_Util_Editor.builderEdited(e)}function N(t,e){MediumEditor.util.isKey(t,MediumEditor.util.keyCode.ESCAPE)&&((t=e).removeAttribute("data-medium-focused"),A({name:"blur",data:{},editable:t}))}function U(t,e){Rexbuilder_Util_Editor.updateBlockContainerHeight(l(e));var e=MediumEditor.selection.getSelectionStart(o.options.ownerDocument),i=l(e),s=e.tagName.toLowerCase();"span"===s||"p"===s?"h1"!==(s=e.parentNode.tagName.toLowerCase())&&"h2"!==s&&"h3"!==s&&"h4"!==s&&"h5"!==s&&"h6"!==s&&(e=i.prev().css("color"),p(e)):(s=i.children().last().css("color"),p(s))}function H(t,e){var i;l(i=e).parents(".grid-stack-item").addClass("item--me-focus"),l(i).parents(".rexpansive_section").addClass("block-editing"),Rexbuilder_Util_Editor.editingElement=!0,Rexbuilder_Util_Editor.editedTextWrap=l(e),Rexbuilder_Util_Editor.editedElement=l(e).parents(".grid-stack-item"),e&&(i=l(e).parents(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor)&&i.properties.gridstackInstance.enableMove(!1)}function D(t,e){if(t.srcElement&&"%ME_PASTEBIN%"===t.srcElement.innerText)t.stopImmediatePropagation(),t.preventDefault();else{if("click"==t.type&&void 0!==o.getExtensionByName("insert-media")&&0!==l(t.target).parents("."+o.getExtensionByName("insert-media").toolbarWrapClass).length)return!1;l(t=e).parents(".grid-stack-item").removeClass("item--me-focus"),l(t).parents(".rexpansive_section").removeClass("block-editing"),Rexbuilder_Block_Editor.updateTextTool(e);t=l(e).parents(".perfect-grid-gallery").data("plugin_perfectGridGalleryEditor");t&&(t.properties.gridstackInstance.enableMove(!0),Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}}function V(t){var e=t.get(0);t.parents(".grid-stack-row").data("plugin_perfectGridGalleryEditor").focusElement(),e.setAttribute("data-medium-focused","true"),A({name:"focus",data:{},editable:e}),e.focus()}return{init:function(){var t,e;h=!1,e="textEditorToolbar",0==Rexbuilder_Util.$rexContainer.children('.editable[id="'+e+'"]').length&&(t=document.createElement("div"),l(t).attr({id:e,class:"editable",style:"display: none"}),Rexbuilder_Util.$rexContainer.prepend(t)),M(),Rexbuilder_Util.$document.on("click",".rex-close-html-editor",function(t){var t=l(t.target).parents(".editing-html"),e=t.find("textarea"),e=l.parseHTML(e.val());t.children().remove(),t.append(e),t.children().eq(0).unwrap()})},load:function(){rangy.init()},launchTextEditors:function(t){for(var e,i,s=Array.prototype.slice.call(t.getElementsByClassName("rex-text-editable")),n=s.length,a=0,a=0;a<n;a++)i=s[a].getElementsByClassName("pswp-figure"),e=s[a].getElementsByClassName("rex-slider-wrap"),0===i.length&&0===e.length&&(i=s[a].querySelector(".text-wrap"),TextEditor.addElementToTextEditor(i))},addElementToTextEditor:function(t){o.addElements(t)},destroyMediumEditor:function(){o.destroy()},getEditorInstance:function(){return o},createEditor:M,triggerMEEvent:A,openTextGradientColor:function(t){var e=t.parents(".rexpansive_section"),i=t.attr("data-rexbuilder-block-id"),s=(t.children(".rexbuilder-block-data"),e.attr("data-rexlive-section-id")),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",t={blockData:{gradient:t.attr("data-selection-gradient"),target:{sectionID:s,modelNumber:e,rexID:i}}},s=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editTextGradient",activeBlockData:t});Rexbuilder_Util_Editor.sendParentIframeMessage(s)},removePlaceholder:function(t){o.getExtensionByName("placeholder").hidePlaceholder(t[0])},focusTextWrap:V,moveCursorToStart:function(t){Rexbuilder_Util_Editor.isJQuery(t)&&(t=t.get(0)),MediumEditor.selection.moveCursor(o.options.ownerDocument,t,0)},moveCursorToEnd:function(t){Rexbuilder_Util_Editor.isJQuery(t)&&(t=t.get(0)),MediumEditor.selection.moveCursor(o.options.ownerDocument,t,1)}}}(jQuery);
var Rexbuilder_Section=function(E){"use strict";var d=!1;function k(e){for(var t=Array.prototype.slice.call(e.getElementsByClassName("perfect-grid-item")),i=t.length,o=0;o<i;o++)Rexbuilder_Util.hasClass(t[o],"block-has-slider")||TextEditor.addElementToTextEditor(t[o].querySelector(".text-wrap"))}function t(t){var e=t.children(".section-data"),i=void 0!==t.attr("data-rex-collapse-grid")&&"true"==t.attr("data-rex-collapse-grid").toString(),o=Rexbuilder_Util.getGalleryInstance(t),r={layout:o.settings.galleryLayout,fullHeight:o.settings.fullHeight,singleHeight:o.properties.singleHeight},l={gridInstance:o,gridLayout:r,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:i};if(i){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0;for(var n,a,d,s=Rexbuilder_Util.getLayoutLiveSectionTargets(t),r=Rexbuilder_Util.getGridLayoutLive(t),u=("mobile"!==Rexbuilder_Util.activeLayout&&!Rexbuilder_Util.isMobile()||Rexbuilder_Util.applyDefaultBlocksDimentions(t,s,r),o.properties.gridstackInstance),i="true"==r.fullHeight.toString(),c="masonry"==r.layout?5:o.$element.outerWidth()/12,_={layout:r.layout,fullHeight:i,singleHeight:c},x=(o.element.setAttribute("data-layout",_.layout),o.element.setAttribute("data-full-height",_.fullHeight),e.attr("data-layout",_.layout),o.updateGridLayoutCollapse(_),o.batchGridstack(),Rexbuilder_Section_Editor.updateSectionLayoutTool(t),t[0]),m=1;m<s.length;m++)a=(n=x.querySelector('div[data-rexbuilder-block-id="'+s[m].name+'"]')).querySelector(".rexbuilder-block-data"),d={x:(d=s[m].props).gs_x,y:d.gs_y,w:d.gs_width,h:d.gs_height,startH:d.gs_start_h,gridstackInstance:u},Rexbuilder_Util.updateElementDimensions(n,a,d),o.updateSizeViewerText(n,d.w,d.h);o.commitGridstack(),o.removeCollapseElementsProperties(),"masonry"==_.layout?setTimeout(function(){o.updateBlocksHeight(),setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};o._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,l,t,o,_)},300,l,t,o,_):i?setTimeout(function(){o.properties.gridBlocksHeight=o._calculateGridHeight(),_.singleHeight=Rexbuilder_Util.globalViewport.height/o.properties.gridBlocksHeight,o.updateGridstackStyles(_.singleHeight),setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),o._fixImagesDimension(),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},100,l,t,o,_)},300,l,t,o,_):setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};o._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,l,t,o,_)}else{t.removeClass("rex-block-grid");r=t.children(".section-data").attr("data-custom_classes");t.children(".section-data").attr("data-custom_classes",r.replace(/\s*rex-block-grid/,"")),o.collapseElementsProperties(),o.collapseElements(l),Rexbuilder_Section_Editor.updateSectionLayoutTool(t)}Rexbuilder_Util.editedDataInfo.setSectionData(t.attr("data-rexlive-section-id"),"collapse_grid"),Rexbuilder_Util.editedDataInfo.setSectionData(t.attr("data-rexlive-section-id"),"layout"),c={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")},Rexbuilder_Util_Editor.sendParentIframeMessage(c),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t)}function s(e){var t,e=E(e.currentTarget).parents(".rexpansive_section"),i=null,o=-1,r=-1,l=e.attr("data-rexlive-section-id"),n=null,a=("default"==Rexbuilder_Util.activeLayout&&(n=Rexbuilder_Util.getDefaultLayoutState(),i=Rexbuilder_Util.getPageCustomizationsDom(),e.hasClass("rex-model-section"))&&(o=parseInt(e.attr("data-rexlive-model-number")),r=parseInt(e.attr("data-rexlive-model-id"))),"undefined"!=typeof Rexbuilder_Rexwpcf7_Editor&&e.find(".rex-element-wrapper").has(".wpcf7-form").each(function(e,t){var t=E(t);0!==t.find(".wpcf7-form").length&&(t=t.attr("data-rex-element-id"),Rexbuilder_Rexwpcf7_Editor.removeFormInPage(t))}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),{show:!0,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=n?jQuery.extend(!0,[],n):null});if(Rexbuilder_Dom_Util.updateSectionVisibility(e,!1),null!=i){for(Rexbuilder_Dom_Util.fixModelNumbers(),t=0;t<i.length;t++){for(s=0;s<i[t].sections.length;s++)if(i[t].sections[s].section_is_model){if(i[t].sections[s].section_model_id==r&&i[t].sections[s].section_model_number==o){i[t].sections.splice(s,1);break}}else if(l==i[t].sections[s].section_rex_id){i[t].sections.splice(s,1);break}if(-1!=r)for(var d=1,s=0;s<i[t].sections.length;s++)i[t].sections[s].section_model_id==r&&(i[t].sections[s].section_model_number=d,d+=1)}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(i),s=0;s<n.length;s++)if(n[s].section_is_model){if(n[s].section_model_id==r&&n[s].section_model_number==o){n.splice(s,1);break}}else if(l==n[s].section_rex_id){n.splice(s,1);break}if(-1!=r){d=1;for(s=0;s<n.length;s++)n[s].section_model_id==r&&(n[s].section_model_number=d,d+=1)}Rexbuilder_Util.updateDefaultLayoutState({pageData:n})}0===Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)").length&&Rexbuilder_Util_Editor.activeAddSection();var u={show:!1,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=n?jQuery.extend(!0,[],n):null};Rexbuilder_Util_Editor.pushAction(e,"updateSectionVisibility",u,a);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})}function u(e){Rexbuilder_Util_Editor.sectionCopying=!0;var i,o=E(e.currentTarget).parents(".rexpansive_section"),e=o.clone(!1),t=null,r=("default"==Rexbuilder_Util.activeLayout&&(t=Rexbuilder_Util.getPageCustomizationsDom()),o.attr("data-rexlive-section-id")),l=-1,n=-1,a=(o.hasClass("rex-model-section")&&(l=o.attr("data-rexlive-model-id"),n=o.attr("data-rexlive-model-number")),-1),d=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){t=E(t);return t.attr("data-rexlive-section-id")==r&&(!o.hasClass("rex-model-section")||t.attr("data-rexlive-model-id")==l&&t.attr("data-rexlive-model-number")==n)?(a=e+1,!1):void 0}),o.hasClass("rex-model-section")&&(Rexbuilder_Util_Editor.insertingModel=!0,i=e.attr("data-rexlive-model-id"),c=1,Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){E(t).attr("data-rexlive-model-id")==i&&(c+=1)}),e.attr("data-rexlive-model-number",c),d=e.find(".update-model-button"),Rexbuilder_Dom_Util.updateLockEditModel(d,!0)),Rexbuilder_Live_Utilities.removeColorPicker(e),Rexbuilder_Section.prepareSectionCopied(e),e.insertAfter(o),Rexbuilder_Section_Editor.listenNewRowDataChange(e.children(".section-data")[0]),e.find(".grid-stack-row")),d=(d.perfectGridGalleryEditor({editorMode:!0}),e.find(".rexwpcf7-column-tools").remove(),e.find(".rex-element-wrapper").each(function(e,t){t=t.getAttribute("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.addMissingTools(t)}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),Rexbuilder_Util.$rexContainer.sortable("refresh"),k(d[0]),Rexbuilder_Live_Utilities.launchTooltips(),{show:!1,layoutsOrder:null!=t?jQuery.extend(!0,[],t):null});if(Rexbuilder_Dom_Util.updateSectionVisibility(e,!0),null!=t){var s,u={section_rex_id:e.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0};for(e.hasClass("rex-model-section")&&(u.section_is_model=!0,u.section_model_id=e.attr("data-rexlive-model-id")),s=0;s<t.length;s++){if(u.section_is_model){for(var c=1,_=0;_<t[s].sections.length;_++)t[s].sections[_].section_model_id==u.section_model_id&&(c+=1);u.section_model_number=c}-1!=a?t[s].sections.splice(a,0,u):t[s].sections.push(u)}Rexbuilder_Util.updatePageCustomizationsDomOrder(t)}var x={show:!0,layoutsOrder:null!=t?jQuery.extend(!0,[],t):null};Rexbuilder_Util_Editor.pushAction(e,"updateSectionVisibility",x,d),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1;Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rexbuilder_Util.editedDataInfo.addSectionData(e.attr("data-rexlive-section-id")),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e,a)}function c(e){e=E(e.target).parents(".rexpansive_section");t(e)}function _(e){e=e.settings.data_to_send,e=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t(e)}function x(e){var t,i=e.settings.galleryEditorInstance,o=e.settings.reverseData,e=e.settings.$section;void 0!==o.collapse&&(t=i.createActionDataMoveBlocksGrid(),i={gridInstance:i,gridLayout:{layout:"masonry",fullHeight:!1,singleHeight:i.settings.cellHeightMasonry},blockDisposition:t,collapse:!0},Rexbuilder_Util_Editor.pushAction(e,"collapseSection",i,o))}function m(e){var t=Rexbuilder_Util.createSectionID(),i=E(this),o=i.attr("data-new-row-position"),r=null,l=("default"==Rexbuilder_Util.activeLayout&&(r=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section",{rexID:t,dimension:_plugin_frontend_settings.defaults.section.dimension,dimensionClass:_plugin_frontend_settings.defaults.section.dimensionClass,sectionWidth:_plugin_frontend_settings.defaults.section.sectionWidth,fullHeight:_plugin_frontend_settings.defaults.section.fullHeight,blockDistance:_plugin_frontend_settings.defaults.section.blockDistance,layout:_plugin_frontend_settings.defaults.section.layout,rowSeparatorTop:_plugin_frontend_settings.defaults.section.rowSeparatorTop,rowSeparatorBottom:_plugin_frontend_settings.defaults.section.rowSeparatorBottom,rowSeparatorRight:_plugin_frontend_settings.defaults.section.rowSeparatorRight,rowSeparatorLeft:_plugin_frontend_settings.defaults.section.rowSeparatorLeft}),n=E(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-section",l)),a=(n.children(".section-data").after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",l)),-1);switch(o){case"bottom":var d=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":d=i.parents(".rexpansive_section")}0!=d.length?(Rexbuilder_Util.$rexContainer.children("section:not(.removing_section)").each(function(e,t){E(t).is(d)&&(a=e+1)}),n.insertAfter(d)):n.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,n.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),n.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();l={show:!1,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(n,!0),null!=r){for(var s={section_rex_id:n.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0},u=0;u<r.length;u++)-1!==a?r[u].sections.splice(a,0,s):r[u].sections.push(s);Rexbuilder_Util.updatePageCustomizationsDomOrder(r)}o={show:!0,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};Rexbuilder_Util_Editor.pushAction(n,"updateSectionVisibility",o,l);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rexbuilder_Util.editedDataInfo.addSectionData(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}function b(e){var t=Rexbuilder_Util.createSectionID(),i=(e=e.settings.data_to_send).position,o=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),r=null,l=("default"==Rexbuilder_Util.activeLayout&&(r=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section",{rexID:t,dimension:_plugin_frontend_settings.defaults.section.dimension,dimensionClass:_plugin_frontend_settings.defaults.section.dimensionClass,sectionWidth:_plugin_frontend_settings.defaults.section.sectionWidth,fullHeight:_plugin_frontend_settings.defaults.section.fullHeight,blockDistance:_plugin_frontend_settings.defaults.section.blockDistance,layout:_plugin_frontend_settings.defaults.section.layout,rowSeparatorTop:_plugin_frontend_settings.defaults.section.rowSeparatorTop,rowSeparatorBottom:_plugin_frontend_settings.defaults.section.rowSeparatorBottom,rowSeparatorRight:_plugin_frontend_settings.defaults.section.rowSeparatorRight,rowSeparatorLeft:_plugin_frontend_settings.defaults.section.rowSeparatorLeft}),n=Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-section",l),a=n.children(".section-data");switch(a.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",l)),i){case"bottom":var d=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":d=o}0!=d.length?n.insertAfter(d):n.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Section_Editor.listenNewRowDataChange(a[0]),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,n.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),n.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();l={show:!1,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(n,!0),null!=r){for(var s={section_rex_id:n.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0},u=0;u<r.length;u++)r[u].sections.push(s);Rexbuilder_Util.updatePageCustomizationsDomOrder(r)}i={show:!0,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null},Rexbuilder_Util_Editor.pushAction(n,"updateSectionVisibility",i,l),e={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(e),Rexbuilder_Util.editedDataInfo.addSectionData(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}function p(e){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var t,e=(b=e.settings.data_to_send).model,e=E.parseHTML(e),i=b.sectionTarget.modelNumber,o=-1,r=b.sectionTarget.sectionID,l=null,n=null,a=("default"==Rexbuilder_Util.activeLayout&&(l=Rexbuilder_Util.getDefaultLayoutState(),n=Rexbuilder_Util.getPageCustomizationsDom()),""!=i?(t=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"][data-rexlive-model-number="'+i+'"]'),o=parseInt(t.attr("data-rexlive-model-id"))):t=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"]'),1),e=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==b.modelID&&(a+=1)}),t.after(e),E(e)),d=e.attr("data-rexlive-section-id"),s={id:b.modelID,modelName:b.modelName,sectionID:d,$section:e,modelNumber:a,isModel:!0},u={id:s.id,names:b.customizationsNames},u=(Rexbuilder_Util.updateDivModelCustomizationsNames(u),{id:s.id,name:s.modelName,customizations:b.customizationsData}),u=(Rexbuilder_Util.updateModelsCustomizationsData(u),Rexbuilder_Dom_Util.updateSectionBecameModel(s),Rexbuilder_Section.prepareSectionCopied(e),e.children(".section-data")),s=(u.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section")),e.find(".update-model-button")),c=(Rexbuilder_Dom_Util.updateLockEditModel(s,!0),e.find(".grid-stack-row")),s=(c.perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(e,u),setTimeout(function(){c.children(".grid-stack-item").each(function(e,t){t=E(t).find(".rex-slider-wrap");0!=t.length&&RexSlider.initSlider(t)})},500,c),Rexbuilder_Util.$rexContainer.sortable("refresh"),{$sectionToHide:e,$sectionToShow:t,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null,stateDefault:null!=l?jQuery.extend(!0,[],l):null});if(Rexbuilder_Dom_Util.updateSectionVisibility(t,!1),Rexbuilder_Dom_Util.updateSectionVisibility(e,!0),null!=n){for(var _,x={section_rex_id:d,targets:[],section_is_model:!0,section_model_id:b.modelID,section_model_number:a,section_hide:!1,section_created_live:!0},m=0;m<n.length;m++){for(_=0;_<n[m].sections.length;_++)if(n[m].sections[_].section_is_model){if(n[m].sections[_].section_model_id==o&&n[m].sections[_].section_model_number==i)break}else if(r==n[m].sections[_].section_rex_id)break;n[m].sections[_].section_created_live?n[m].sections.splice(_,1,jQuery.extend(!0,{},x)):(x.section_created_live=!1,n[m].sections.splice(_,1),n[m].sections.push(jQuery.extend(!0,{},x))),x.section_created_live=!0}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(n),_=0;_<l.length;_++)if(l[_].section_is_model){if(l[_].section_model_id==o&&l[_].section_model_number==i)break}else if(r==l[_].section_rex_id)break;l.splice(_,1,x),Rexbuilder_Util.updateDefaultLayoutState({pageData:l,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var u={$sectionToHide:t,$sectionToShow:e,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null,stateDefault:null!=l?jQuery.extend(!0,[],l):null},b=(Rexbuilder_Util_Editor.pushAction(e,"updateSectionModel",u,s),Rexbuilder_Util_Editor.sectionCopying=!1,{eventName:"rexlive:edited",modelEdited:Rexbuilder_Util_Editor.insertingModel=!1});Rexbuilder_Util_Editor.sendParentIframeMessage(b)}function g(e){var C;"default"==Rexbuilder_Util.activeLayout&&0!=(C=Rexbuilder_Util.$rexContainer.find(".import-model")).length&&(C.next().is("#textEditorToolbar")&&Rexbuilder_Util.$rexContainer.find(".rexpansive_section").eq(0).before(C.detach()),E.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_model_live",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:{ID:parseInt(C.attr("data-rex-model-id"))}},success:function(e){if(e.success){var i={model:e.data.model,modelName:e.data.name,modelID:e.data.id,customizationsData:e.data.customizations_data,customizationsNames:e.data.customizations_names},o=(Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0,1),t=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==i.modelID&&(o+=1)}),E.parseHTML(i.model)),r=(C.after(t),C.remove(),Rexbuilder_Util.getDefaultLayoutState()),l=Rexbuilder_Util.getPageCustomizationsDom(),t=E(t),n=t.attr("data-rexlive-section-id"),a=(t.attr("data-rexlive-model-number",o),{id:i.modelID,names:i.customizationsNames}),a=(Rexbuilder_Util.updateDivModelCustomizationsNames(a),{id:i.modelID,name:i.modelName,customizations:i.customizationsData}),a=(Rexbuilder_Util.updateModelsCustomizationsData(a),Rexbuilder_Section.prepareSectionCopied(t),t.children(".section-data")),d=(a.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section")),t.find(".update-model-button")),s=(Rexbuilder_Dom_Util.updateLockEditModel(d,!0),t.find(".grid-stack-row")),u=(s.perfectGridGalleryEditor({editorMode:!0}),d=e,U=(e=s).find(".rex-button-wrapper"),y="",D=d.data.rexButtonsHTML,S=D.length,U.each(function(e,t){var i=E(t);for(y=i.attr("data-rex-button-id"),h=0;h<S;h++)if(-1!==(R=D[h]).search(y)){i.replaceWith(R);break}}),(U=e.find(".rex-button-wrapper")).each(function(e,t){Rexbuilder_Rexbutton.endFixingButtonImported(E(t))}),s.find(".rex-element-wrapper").each(function(e,t){Rexbuilder_Rexelement_Editor.setupElement(E(t))}),Rexbuilder_Live_Utilities.updateModelSectionTools(t,a),setTimeout(function(){s.find(".grid-stack-item").each(function(e,t){t=E(t).find(".rex-slider-wrap");0!=t.length&&RexSlider.initSlider(t)})},500,s),k(s.get(0)),Rexbuilder_Live_Utilities.launchTooltips(),Array.prototype.slice.call(s.get(0).getElementsByClassName("perfect-grid-item"))),c=u.length;for(p=0;p<c;p++){var _=E(u[p]).find(".grid-item-content"),x=u[p].querySelector(".rexbuilder-block-data"),m=x.getAttribute("data-image_bg_elem_active"),b=x.getAttribute("data-image_bg_block"),m=("true"==m&&""!==b&&(v={active:m,urlImage:b},Rexbuilder_Util.addClass(u[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-image").parentElement,"tool-button--hide"),Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(_,v),Rexbuilder_Block_Editor.updateBlockImagePositionTool(_,v)),x.getAttribute("data-color_bg_block")),b=("true"==x.getAttribute("data-color_bg_block_active")&&""!==m&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(_,m),x.getAttribute("data-overlay_block_color")),m=("true"==x.getAttribute("data-overlay_block_color_active")&&""!==b&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(_,b),x.getAttribute("data-video_bg_id")),_=x.getAttribute("data-video_bg_url"),b=x.getAttribute("data-video_bg_url_vimeo");""===m&&""===_&&""===b||(Rexbuilder_Util.addClass(u[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-video-background").parentElement,"tool-button--hide"),Rexbuilder_Util.removeClass(u[p].querySelector(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parentElement,"tool-button--hide")),Rexbuilder_Block_Editor.updateTextTool(u[p].querySelector(".text-wrap"))}Rexbuilder_Util.$rexContainer.sortable("refresh");d={show:!1,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(t,!0),null!=l){var p,g=0,f=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){t=E(t);if(t.attr("data-rexlive-model-id")==i.modelID&&t.attr("data-rexlive-model-number")==o)return g=e,!1}),{section_rex_id:n,targets:[],section_is_model:!0,section_model_id:i.modelID,section_model_number:o,section_hide:!1,section_created_live:!0});for(p=0;p<l.length;p++)l[p].sections.splice(g,0,jQuery.extend(!0,{},f));r.splice(g,0,jQuery.extend(!0,{},f)),Rexbuilder_Util.updatePageCustomizationsDomOrder(l),Rexbuilder_Util.updateDefaultLayoutState({pageData:r,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var e={show:!0,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null},v=(Rexbuilder_Util_Editor.pushAction(t,"updateSectionVisibility",e,d),Rexbuilder_Util_Editor.sectionCopying=!1,{eventName:"rexlive:edited",modelEdited:Rexbuilder_Util_Editor.insertingModel=!1});Rexbuilder_Util_Editor.sendParentIframeMessage(v)}var R,h,U,y,D,S},error:function(e){},complete:function(e){}}))}function f(e){var t,i=null;if(null!==(i="default"==Rexbuilder_Util.activeLayout?Rexbuilder_Util.getPageCustomizationsDom():i)){for(var o=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),r=[],l=0;l<o.length;l++)r.push(o[l].getAttribute("data-rexlive-section-id"));for(var n=0;n<i.length;n++){var a=(a=r.map(function(t){return i[n].sections.find(function(e){return e.section_rex_id===t})})).filter(function(e){return void 0!==e});i[n].sections=a}Rexbuilder_Util.updatePageCustomizationsDomOrder(i)}switch(d=!1,e.settings.data.initiator){case"savingProcess":t={eventName:"rexlive:savePageWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t);break;case"changeLayout":t={eventName:"rexlive:openChangeLayoutModal",dataObj:e.settings.data.dataObj},Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}return{init:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t=E(t);t.hasClass("rex-model-section")&&(t.addClass("rexlive-block-grid-editing"),t.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),t.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')),void 0===t.attr("id")&&t.attr("id",""),void 0===t.attr("data-rexlive-section-name")&&t.attr("data-rexlive-section-name","")});var r=[],l=[];Rexbuilder_Util.$rexContainer.sortable({iframeFix:!0,start:function(e,t){d=!1,Rexbuilder_Dom_Util.fixModelNumbers(),r=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(e,t){var t=E(t),i={rexID:t.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};t.hasClass("rex-model-section")&&(i.modelID=t.attr("data-rexlive-model-id"),i.modelNumber=t.attr("data-rexlive-model-number")),r.push(i)})},handle:".builder-move-row",stop:function(e,t){var e=E(e.target).parents(".rexpansive_section"),i={rexID:e.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1},o=(e.hasClass("rex-model-section")&&(i.modelID=e.attr("data-rexlive-model-id"),i.modelNumber=e.attr("data-rexlive-model-number")),l=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(e,t){var t=E(t),i={rexID:t.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};t.hasClass("rex-model-section")&&(i.modelID=t.attr("data-rexlive-model-id"),i.modelNumber=t.attr("data-rexlive-model-number")),l.push(i)}),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(l),{sectionOrder:r,sectionMoved:i}),i=(Rexbuilder_Util.updateSectionOrderCustomLayouts(i,l),{sectionOrder:l,sectionMoved:i}),i=(Rexbuilder_Util_Editor.pushAction("document","updateSectionOrder",i,o),{eventName:"rexlive:sectionOrderStatus",isSectionOrderChanged:d=function(e,t){for(var i=0;i<e.length;i++)if(e[i].rexID!==t[i].rexID)return!0;return!1}(r,l)});Rexbuilder_Util_Editor.sendParentIframeMessage(i),d&&Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rex_Navigator.fixNavigatorItemOrder(e),Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t.style.zIndex=""})}});for(var e,t={rexID:"",dimension:"full",dimensionClass:"center-disposition",sectionWidth:"100%",fullHeight:"false",blockDistance:20,layout:"fixed",rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},i=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),o=i.length,n=0;n<o;n++){a=(e=i[n]).getAttribute("data-rexlive-section-id"),t.rexID=a;var a=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",t);E(e).find(".section-data").after(a)}Rexbuilder_Util.$rexContainer.on("click",".builder-delete-row",s),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-row",u),Rexbuilder_Util.$rexContainer.on("click",".collapse-grid",c),Rexbuilder_Util.$document.on("click",".add-new-section",m),Rexbuilder_Util.$document.on("rexlive:collapse_row",_),Rexbuilder_Util.$document.on("rexlive:collapsingElementsEnded",x),Rexbuilder_Util.$document.on("rexlive:add_new_section_after",b),Rexbuilder_Util.$document.on("rexlive:applyModelSection",p),Rexbuilder_Util.$document.on("rexlive:importModels",g),Rexbuilder_Util.$document.on("rexlive:syncSectionOrderThroughLayouts",f)},prepareSectionCopied:function(e){var o,r,t=parseInt(e.attr("data-rexlive-section-number")),i=(Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,e.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),e.find(".grid-stack-row")),l=(i.removeClass("grid-number-"+t),i.removeClass(function(e,t){return(t.match(/grid-stack-instance-\d+/g)||[]).join(" ")}),Rexbuilder_Live_Utilities.removeDeletedBlocks(i),Rexbuilder_Util_Editor.insertingModel||(o=Rexbuilder_Util.createSectionID(),e.attr("data-rexlive-section-id",o),e.attr("data-rexlive-section-name",""),e[0].querySelector(".section-data").setAttribute("data-rexlive_section_id",o),[].slice.call(e[0].getElementsByClassName("edit-row-width")).forEach(function(e,t){var i="row-dimension-"+e.getAttribute("data-section_width")+"-"+o;e.setAttribute("name","row-dimension-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)}),[].slice.call(e[0].getElementsByClassName("edit-row-layout")).forEach(function(e,t){var i="row-layout-"+e.getAttribute("data-section_layout")+"-"+o;e.setAttribute("name","row-layout-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)})),tmpl.arg="block",Rexbuilder_Live_Templates.getTemplate("tmpl-block-drag-handle"));i.find(".grid-stack-item").each(function(e,t){var i=E(t);Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.generateElementNewIDs(i,e,Rexbuilder_Util.lastSectionNumber),Rexbuilder_Live_Utilities.removeHandles(i),Rexbuilder_Live_Utilities.removeTextEditor(i),Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.fixCopiedElementSlider(i),0==i.find(".rexlive-block-toolbox").length&&(r=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",{block_type:""}),i.find(".grid-stack-item-content").after(r)),null===t.querySelector(".rexlive-block-drag-handle")&&t.querySelector(".grid-item-content").insertAdjacentHTML("beforebegin",l),Rexbuilder_CreateBlocks.sanitizeBlockContent(t)}),tmpl.arg="section"},showSectionToolBox:function(e){e.children(".section-toolBox").addClass("tool-box-active")},updateModelsHtmlLive:function(e){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var n=e.modelID,a=e.html,d=e.model_number,s=e.modelName;Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){var i,o,r,l=E(t);t.getAttribute("data-rexlive-model-id")==n&&t.getAttribute("data-rexlive-model-number")!=d&&(t=isNaN(parseInt(l.attr("data-rexlive-model-number")))?"":l.attr("data-rexlive-model-number"),i=1,Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==n&&(i+=1)}),o=E.parseHTML(a),l.after(o),(o=E(o)).attr("data-rexlive-model-number",t),t={modelID:n,modelName:s,modelNumber:i,sectionID:o.attr("data-rexlive-section-id"),isModel:!0,$section:o},Rexbuilder_Dom_Util.updateSectionBecameModel(t),Rexbuilder_Section.prepareSectionCopied(o),t=o.children(".section-data"),r=o.attr("data-rexlive-section-id"),t.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",{rexID:r})),r=o.find(".update-model-button"),Rexbuilder_Dom_Util.updateLockEditModel(r,!0),o.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(o,t),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Dom_Util.updateSectionVisibility(l,!1),Rexbuilder_Dom_Util.updateSectionVisibility(o,!0))}),Rexbuilder_Util.$rexContainer.children(".rexpansive_section.removing_section.rex-model-section").each(function(e,t){E(t).attr("data-rexlive-model-number","")}),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1},fixSectionToolbox:function(e,t){e=e.find(".section-toolBox")[0];"mobile"===Rexbuilder_Util.activeLayout?(e.style.marginLeft="-"+t.left+"px",e.style.marginRight="-"+t.right+"px"):(e.style.marginLeft="",e.style.marginRight="")},fixBlockToolsAccordingToSeparator:function(e,t){25<t.top?e.removeClass("ui-tools--near-top"):e.addClass("ui-tools--near-top")},toggleGridCollapse:t,getIsSectionOrderChanged:function(){return d}}}(jQuery);
/**
 * Object that handles all the live events triggered on a row
 * To edit a selected row
 * @since 2.0.0
 */
var Rexbuilder_Section_Editor=function(c){"use strict";function a(){Rexbuilder_Util.$document.on("change",".edit-row-width",function(e){var t=c(e.target).parents(".rexpansive_section"),o=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e=e.target.value.trim().split(/(\d+)/),o={data_to_send:{sectionTarget:{sectionID:o,modelNumber:t},sectionWidth:{width:e[1],type:e[2]}},forged:!0},t=jQuery.Event("rexlive:set_section_width");t.settings=o,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("change",".edit-row-layout",function(e){var t=c(e.target).parents(".rexpansive_section"),t={data_to_send:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},layout:e.target.value},forged:!0},e=jQuery.Event("rexlive:set_gallery_layout");e.settings=t,Rexbuilder_Util.$document.trigger(e)}),Rexbuilder_Util.$document.on("change",".edit-row-layout-checkbox",function(e){var t=c(e.target).parents(".rexpansive_section"),t={data_to_send:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},layout:e.target.checked?"fixed":"masonry"},forged:!0},e=jQuery.Event("rexlive:set_gallery_layout");e.settings=t,Rexbuilder_Util.$document.trigger(e)}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-image-background",function(e){var t=c(this).parents(".rexpansive_section"),t={eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},idImage:this.getAttribute("value"),returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-image-background",function(e){var e=c(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),o=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",a=e.children(".section-data"),r=a.attr("data-id_image_bg_section");""!==r&&(t={data_to_send:{sectionTarget:{sectionID:t,modelNumber:o},active:!1,idImage:r,urlImage:a.attr("data-image_bg_section"),width:e.attr("data-background_image_width"),height:e.attr("data-background_image_height")}},(o=jQuery.Event("rexlive:apply_background_image_section")).settings=t,Rexbuilder_Util.$document.trigger(o),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:{image_bg_section:"",image_bg_section_active:!1}}))}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-color-background",function(e){e.stopPropagation(),function(e){y({data_to_send:{color:"",active:!1,sectionTarget:{sectionID:e.sectionID,modelNumber:e.modelNumber}}}),k({color_bg_section:"",color_bg_section_active:!1})}(w(c(e.target).parents(".rexpansive_section")))}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-overlay-color",function(e){e.stopPropagation(),function(e){R({data_to_send:{color:"",active:!1,sectionTarget:{sectionID:e.sectionID,modelNumber:e.modelNumber}}}),k({row_overlay_color:"",row_overlay_active:!1})}(w(c(e.target).parents(".rexpansive_section")))}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-video-background",function(e){e.preventDefault();var t=c(e.target).parents(".rexpansive_section"),o=t.attr("data-rexlive-section-id"),a=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",r=t.children(".section-data"),i=void 0===r.attr("data-video_mp4_url")?"":r.attr("data-video_mp4_url"),n=void 0===r.attr("data-video_bg_url_section")?"":r.attr("data-video_bg_url_section"),d=void 0===r.attr("data-video_bg_id_section")?"":r.attr("data-video_bg_id_section"),r=void 0===r.attr("data-video_bg_url_vimeo_section")?"":r.attr("data-video_bg_url_vimeo_section"),l=null,e=(0<c(e.target).parents(".row-toolBox__fast-configuration").length&&(l=Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}})),t.addClass("activeRowTools"),{eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:o,modelNumber:a},youtubeVideo:n,vimeoUrl:r,mp4Video:i,mp4VideoID:d}},mousePosition:l});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-video-background",function(e){e.preventDefault();var e=c(e.target).parents(".rexpansive_section"),e={data_to_send:{sectionTarget:{sectionID:e.attr("data-rexlive-section-id"),modelNumber:void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):""},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:"",width:"",height:""}}},t=jQuery.Event("rexlive:update_section_background_video");t.settings=e,Rexbuilder_Util.$document.trigger(t);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:{video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}})}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-color-background",e),Rexbuilder_Util.$rexContainer.on("click",".edit-row-overlay-color",t),Rexbuilder_Util.$rexContainer.on("click",".synch-section-content",function(e){e.preventDefault();var e=c(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:t,modelNumber:e,rexID:"self"}}})})}var r,i,n,d,l,s,u,_,g,v=c(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close")),b=c(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save")),m=null;function p(e){var t;n=!0,_.data_to_send.color=e?e.toRgbString():"",e=_,(t=jQuery.Event("rexlive:change_section_bg_color")).settings=e,Rexbuilder_Util.$document.trigger(t)}function f(e){n&&e&&(e=e.toRgbString(),_.data_to_send.color=e,_.data_to_send.active=!0,y(_),k({color_bg_section:e,color_bg_section_active:!0})),Rexbuilder_Live_Utilities.hideAllTools(),i.spectrum("set",""),m=s=l=null,n=!1}function x(e){var t;d=!0,g.data_to_send.active=!0,g.data_to_send.color=e?e.toRgbString():"",e=g,(t=jQuery.Event("rexlive:change_section_overlay")).settings=e,Rexbuilder_Util.$document.trigger(t)}function h(e){d&&e&&(e=e.toRgbString(),g.data_to_send.color=e,g.data_to_send.active=!0,R(g),k({row_overlay_color:g.data_to_send.color,row_overlay_active:!0})),Rexbuilder_Live_Utilities.hideAllTools(),r.spectrum("set",""),u=s=l=null,d=!1}function e(e){return e.preventDefault(),l=c(e.currentTarget).parents(".rexpansive_section"),s=l.children(".section-data"),_.data_to_send.sectionTarget.sectionID=l.attr("data-rexlive-section-id"),_.data_to_send.sectionTarget.modelNumber=void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",void 0!==s.attr("data-color_bg_section_active")&&s.attr("data-color_bg_section_active"),m=s.attr("data-color_bg_section")||null,l.addClass("activeRowTools"),c(e.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),n=!1,r.spectrum("set",m),r.spectrum("show"),r.spectrum("container").css("top",e.pageY+"px"),r.spectrum("container").css("left",e.pageX+"px"),o(r,e.currentTarget),!1}function t(e){return e.preventDefault(),l=c(e.currentTarget).parents(".rexpansive_section"),s=l.children(".section-data"),g.data_to_send.sectionTarget.sectionID=l.attr("data-rexlive-section-id"),g.data_to_send.sectionTarget.modelNumber=void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",JSON.parse(void 0!==s.attr("data-row_overlay_active")&&s.attr("data-row_overlay_active")),u=s.attr("data-row_overlay_color"),l.addClass("activeRowTools"),c(e.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),d=!1,i.spectrum("set",u),i.spectrum("show"),i.spectrum("container").css("top",e.pageY+"px"),i.spectrum("container").css("left",e.pageX+"px"),o(i,e.currentTarget),!1}function o(e,t){var o=e.spectrum("container")[0],a=o.getBoundingClientRect(),r=a.top,t=(void 0!==t?t:e[0]).parentNode.getBoundingClientRect(),e=parseInt(o.style.left);r+a.height==t.top?o.style.top=parseInt(o.style.top)-10+"px":r==t.top+t.height&&(o.style.top=parseInt(o.style.top)+10+"px"),e+o.offsetWidth+15>=document.body.offsetWidth&&(e-o.offsetWidth<0?o.style.left="15px":o.style.left=e-o.offsetWidth+"px")}function w(e){return{sectionID:e.attr("data-rexlive-section-id"),modelNumber:void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):""}}function y(e){var t=jQuery.Event("rexlive:apply_background_color_section");t.settings=e,Rexbuilder_Util.$document.trigger(t)}function R(e){var t=jQuery.Event("rexlive:change_section_overlay");t.settings=e,Rexbuilder_Util.$document.trigger(t)}function k(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:e})}return{init:function(){this.dataObserver=null,this.dataNodes=null,this.config={attributes:!0,childList:!1,subtree:!1,attributeFilter:["data-load","data-color_bg_section_active","data-color_bg_section","data-image_bg_section_active","data-id_image_bg_section","data-row_overlay_active","data-row_overlay_color","data-video_bg_url_section","data-video_bg_id_section","data-video_bg_url_vimeo_section"]},a(),r=c(document.getElementById("global-spectrum-row-background")),i=c(document.getElementById("global-spectrum-row-overlay")),d=n=!1,g={data_to_send:{color:s=l=null,active:!(_={data_to_send:{color:null,sectionTarget:{sectionID:"",modelNumber:""}}}),sectionTarget:{sectionID:"",modelNumber:""}}},r.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:r,object:"section",action:"background"})},move:p,hide:f}),i.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:i,object:"section",action:"overlay"})},move:x,hide:h});var e=v.clone(),t=(r.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),r.spectrum("set",m||""),r.spectrum("container").find(".sp-input").trigger("change"),r.spectrum("hide")}),(e=b.clone()).find(".rex-modal-option")),e=(r.spectrum("container").append(e),t.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":r.spectrum("hide");break;case"reset":r.spectrum("set",m||""),r.spectrum("container").find(".sp-input").trigger("change")}}),v.clone());i.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==u&&(i.spectrum("set",u),i.spectrum("container").find(".sp-input").trigger("change")),i.spectrum("hide")}),e=(t=b.clone()).find(".rex-modal-option"),i.spectrum("container").append(t),e.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":i.spectrum("hide");break;case"reset":i.spectrum("set",u||""),i.spectrum("container").find(".sp-input").trigger("change")}}),r.spectrum("container").draggable(),i.spectrum("container").draggable(),Rexbuilder_Section_Editor.dataNodes=Array.prototype.slice.call(document.getElementsByClassName("section-data")),Rexbuilder_Section_Editor.dataObserver=new MutationObserver(function(e,t){"false"!=e[0].target.getAttribute("data-color_bg_section_active")&&""!=e[0].target.getAttribute("data-color_bg_section")||"false"!=e[0].target.getAttribute("data-image_bg_section_active")&&""!=e[0].target.getAttribute("data-id_image_bg_section")||"false"!=e[0].target.getAttribute("data-row_overlay_active")&&""!=e[0].target.getAttribute("data-row_overlay_color")||""!=e[0].target.getAttribute("data-video_bg_url_section")||""!=e[0].target.getAttribute("data-video_bg_id_section")||""!=e[0].target.getAttribute("data-video_bg_url_vimeo_section")?Rexbuilder_Util.removeClass(e[0].target.parentNode,"rowTools__hide-fast-data"):Rexbuilder_Util.addClass(e[0].target.parentNode,"rowTools__hide-fast-data")});for(var o=0;o<Rexbuilder_Section_Editor.dataNodes.length;o++)Rexbuilder_Section_Editor.dataObserver.observe(Rexbuilder_Section_Editor.dataNodes[o],Rexbuilder_Section_Editor.config)},updateSectionDimensionTool:function(e,t){null===(t=void 0!==t?t:null)&&((t={}).dimension=e.find(".section-data").attr("data-dimension")),e.find(".edit-row-width[data-section_width="+t.dimension+"]").prop("checked",!0)},updateSectionLayoutTool:function(e,t){switch(null===(t=void 0!==t?t:null)&&((t={}).layout=e.find(".section-data").attr("data-layout")),t.layout){case"masonry":e.find(".edit-row-layout-checkbox").prop("checked",!1);break;case"fixed":e.find(".edit-row-layout-checkbox").prop("checked",!0)}},updateRowBackgroundImageTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");o.addClass("tool-button--image-preview").attr("value",t.idImage).css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide"),e.addClass("tool-button--hide")},resetRowBackgroundImageTool:function(e){var t=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");t.removeClass("tool-button--image-preview").attr("value","").css("background-image","none").parent().addClass("tool-button--hide"),e.removeClass("tool-button--hide")},updateRowBackgroundColorTool:function(e,t){var o=""===t,a=e.find(".row-toolBox__fast-configuration .edit-row-color-background"),r=a.parent(),e=e.find(".row-toolBox__standard-configuration .edit-row-color-background").parent();(o?(e.removeClass("tool-button--hide"),r):(r.addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),e)).addClass("tool-button--hide")},updateRowBackgroundGradientTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-color-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-color-background");(""!=t?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t),e):(e.parent().removeClass("tool-button--hide"),o)).parent().addClass("tool-button--hide")},updateRowOverlayColorTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration .edit-row-overlay-color"),a=o.parent(),e=e.find(".row-toolBox__standard-configuration .edit-row-overlay-color").parent(),r="true"===t.active.toString();(""===t.color||!r?(e.removeClass("tool-button--hide"),a):(a.addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background-color",t.color),e)).addClass("tool-button--hide")},updateRowOverlayColorToolLive:function(e,t){e=e.find(".edit-row-overlay-color");e.parent().addClass("tool-button--picker-preview"),e.siblings(".tool-button--color-preview").css("background-color",t)},updateRowOverlayGradientTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-overlay-color"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-overlay-color");("true"==t.active.toString()?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t.color),e):(e.parent().removeClass("tool-button--hide"),o)).parent().addClass("tool-button--hide")},updateRowBackgroundVideo:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-video-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-video-background");""==t.typeVideo?(o.parent().addClass("tool-button--hide"),e.removeClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),e.addClass("tool-button--hide"))},triggerRowDataChange:function(){for(var e=0;e<Rexbuilder_Section_Editor.dataNodes.length;e++)Rexbuilder_Section_Editor.dataNodes[e].setAttribute("data-load","true")},listenNewRowDataChange:function(e){Rexbuilder_Section_Editor.dataObserver.observe(e,Rexbuilder_Section_Editor.config),e.setAttribute("data-load","true")},openSectionBackgroundGradient:function(e){var t=(e=0===e.length?l:e).attr("data-rexlive-section-id"),o=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",e=e.children(".section-data").attr("data-color_bg_section");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editSectionBackgroundGradient",activeRowData:{gradient:e,sectionTarget:{sectionID:t,modelNumber:o}}})},openRowOverlayGradient:function(e){var t=(e=0===e.length?l:e).children(".section-data"),o=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",t={eventName:"rexlive:editRowOverlayGradient",activeRowData:{gradient:t.attr("data-row_overlay_color"),sectionTarget:{sectionID:o,modelNumber:e}}};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}}(jQuery);
var Rexbuilder_Block=function(i){"use strict";function r(e){e.preventDefault(),e.stopPropagation(),Rexbuilder_Util_Editor.removingBlocks=!0;var e=i(e.target).parents(".grid-stack-item"),t=e.parent().data().plugin_perfectGridGalleryEditor,r=t.$section,t=(t.deleteBlock(e),e.attr("data-rexlive-element-edited",!0),Rexbuilder_Util_Editor.removingBlocks=!1,0!==e.find(".wpcf7-form:not(.no-builder-form)").length&&(t=e.find(".rex-element-wrapper").attr("data-rex-element-id"),Rexbuilder_Rexwpcf7_Editor.removeFormInPage(t)),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),0===r.find(".perfect-grid-item").not(".rex-hide-element").length?r.addClass("empty-section"):r.removeClass("empty-section"),e.attr("data-rexbuilder-block-id")),e=(Rexbuilder_Util.$document.trigger("rexlive:deletedBlock",t),{eventName:"rexlive:edited",modelEdited:r.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function l(e){e.preventDefault(),e.stopPropagation();var e=i(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),r=e.attr("data-rexbuilder-block-id"),t={sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",rexID:r,sliderNumber:0},r=e.find('.rex-slider-wrap[data-rex-slider-active="true"]');0<r.length&&(t.sliderNumber=r.attr("data-rex-slider-number"),r=r.attr("data-slider-id"),e=e.attr("id"),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editSlider",sliderID:r,blockID:e,shortCodeSlider:'[RexSlider slider_id="'+r+'"]',target:t}))}function a(e){e.preventDefault(),e.stopPropagation(),Rexbuilder_Util_Editor.blockCopying=!0;e=i(e.currentTarget).parents(".grid-stack-item");Rexbuilder_CreateBlocks.createCopyBlock(e),Rexbuilder_Util_Editor.blockCopying=!1}function o(e){var t;e.querySelector(".ui-focused-element-highlight")||(t=function(e){var t,r={not_has_image:!1,not_has_overlay:!1,not_has_video:!1,has_content:!1,overlay:""};t=e.querySelector(".rexbuilder-block-data"),r.not_has_image=null===t.getAttribute("data-image_bg_elem_active")||"true"!=t.getAttribute("data-image_bg_elem_active")||""==t.getAttribute("data-id_image_bg_block"),r.not_has_overlay="true"!=t.getAttribute("data-overlay_block_color_active")||""==t.getAttribute("data-overlay_block_color"),r.not_has_video=!t.getAttribute("data-video_bg_id")&&!t.getAttribute("data-video_bg_url")&&!t.getAttribute("data-video_bg_url_vimeo"),0==(e=e.querySelector(".text-wrap")).childElementCount||1==e.childElementCount&&Rexbuilder_Util.hasClass(e.children[0],"text-editor-span-fix")?r.has_content=!1:r.has_content=!0;return r.overlay=null!==t.getAttribute("data-overlay_block_color")?t.getAttribute("data-overlay_block_color"):"",r}(e),t=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap-clean",t),e.querySelector(".rexbuilder-block-data").nextElementSibling.insertAdjacentHTML("afterend",t))}return{init:function(){for(var e=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".perfect-grid-item")),t=0;t<e.length;t++)o(e[t]);Rexbuilder_Util.$rexContainer.on("click",".builder-delete-block",r),Rexbuilder_Util.$rexContainer.on("click",".builder-edit-slider",l),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-block",a)},addToolboxClean:o,addToolboxDirt:function(e){var t;e.querySelector(".ui-focused-element-highlight")||(t=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap"),e.querySelector(".rexbuilder-block-data").nextElementSibling.insertAdjacentHTML("afterend",t))}}}(jQuery);
/**
 * Object that handles all the live events triggered on a block
 * To edit a selected block
 * @since 2.0.0
 */
var Rexbuilder_Block_Editor=function(v){"use strict";var o=v(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close")),a=v(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save")),i=function(e){var t=(e=0===e.length?c:e).parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),e=e.children(".rexbuilder-block-data"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e={blockData:{gradient:e.attr("data-color_bg_block"),target:{sectionID:a,modelNumber:t,rexID:o}}},a=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockGradient",activeBlockData:e});Rexbuilder_Util_Editor.sendParentIframeMessage(a)};function u(e){return 0===e.childElementCount||!(""!==e.textContent.trim()||1!==e.childElementCount||!e.querySelector(".text-editor-span-fix"))||0===Array.prototype.slice.call(e.getElementsByTagName("img")).length+Array.prototype.slice.call(e.getElementsByTagName("svg")).length+Array.prototype.slice.call(e.getElementsByTagName("iframe")).length&&""===e.textContent.trim()}var r,l,d,n,c,s,t,b,m,g,p,x,_,k;function h(e){d=!0,_.data_to_send.active=!0,_.data_to_send.color=_.data_to_send.active&&e?e.toRgbString():"";e=jQuery.Event("rexlive:change_block_bg_color");e.settings=_,Rexbuilder_Util.$document.trigger(e)}function f(e){d&&e&&(m.hasClass("top-tools")&&(b.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),b.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),_.data_to_send.color=e.toRgbString(),(e=jQuery.Event("rexlive:apply_background_color_block")).settings=_,Rexbuilder_Util.$document.trigger(e)),Rexbuilder_Live_Utilities.hideAllTools(),r.spectrum("set",""),g=m=b=t=s=c=null,d=!1}function y(e){n=!0,k.data_to_send.active=!0,k.data_to_send.color=e?e.toRgbString():"",(e=p?jQuery.Event("rexlive:change_block_overlay_color"):jQuery.Event("rexlive:change_block_overlay")).settings=k,Rexbuilder_Util.$document.trigger(e)}function C(e){n&&e&&(k.data_to_send.active=!0,k.data_to_send.color=e.toRgbString(),m.hasClass("top-tools")&&(b.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),b.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),(e=jQuery.Event("rexlive:change_block_overlay")).settings=k,Rexbuilder_Util.$document.trigger(e)),Rexbuilder_Live_Utilities.hideAllTools(),l.spectrum("set",""),x=m=b=t=s=c=null,n=p=!1}function I(e){return e.preventDefault(),b=v(e.currentTarget),c=b.parents(".grid-stack-item"),s=c.children(".rexbuilder-block-data"),t=c.parents(".rexpansive_section"),m=b.parents(".rexlive-block-toolbox"),_.data_to_send.target.rexID=c.attr("data-rexbuilder-block-id"),_.data_to_send.target.sectionID=t.attr("data-rexlive-section-id"),_.data_to_send.target.modelNumber=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",s.attr("data-color_bg_block_active"),g=s.attr("data-color_bg_block"),Rexbuilder_Util_Editor.manageElement=!0,b.parents(".tool-button-floating").addClass("tool-button-floating--active"),d=!1,r.spectrum("set",g),r.spectrum("show"),r.spectrum("container").css("top",e.pageY+"px"),r.spectrum("container").css("left",e.pageX+"px"),E(r,e.currentTarget),!1}function w(e){return e.preventDefault(),b=v(e.currentTarget),c=b.parents(".grid-stack-item"),s=c.children(".rexbuilder-block-data"),t=c.parents(".rexpansive_section"),m=b.parents(".rexlive-block-toolbox"),k.data_to_send.target.rexID=c.attr("data-rexbuilder-block-id"),k.data_to_send.target.sectionID=t.attr("data-rexlive-section-id"),k.data_to_send.target.modelNumber=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",(p=!(c.hasClass("active-large-block-overlay")||c.hasClass("active-medium-block-overlay")||c.hasClass("active-small-block-overlay"))&&void 0!==s.attr("data-overlay_block_color_active")&&""!==s.attr("data-overlay_block_color_active")&&JSON.parse(s.attr("data-overlay_block_color_active")))||("default"==Rexbuilder_Util.activeLayout&&c.hasClass("active-large-block-overlay")&&(p=!0),"tablet"==Rexbuilder_Util.activeLayout&&c.hasClass("active-medium-block-overlay")&&(p=!0),"mobile"==Rexbuilder_Util.activeLayout&&c.hasClass("active-small-block-overlay")&&(p=!0)),x=s.attr("data-overlay_block_color"),Rexbuilder_Util_Editor.manageElement=!0,b.parents(".tool-button-floating").addClass("tool-button-floating--active"),n=!1,l.spectrum("set",x),l.spectrum("show"),l.spectrum("container").css("top",e.pageY+"px"),l.spectrum("container").css("left",e.pageX+"px"),E(l,e.currentTarget),!1}var E=function(e,t){var o=e.spectrum("container")[0],a=o.getBoundingClientRect(),i=a.top,t=(void 0!==t?t:e[0]).parentNode.getBoundingClientRect(),e=parseInt(o.style.left);i+a.height==t.top?o.style.top=parseInt(o.style.top)-10+"px":i==t.top+t.height&&(o.style.top=parseInt(o.style.top)+10+"px"),e+o.offsetWidth+15>=document.body.offsetWidth&&(e-o.offsetWidth<0?o.style.left="15px":o.style.left=e-o.offsetWidth+"px")};return{init:function(){Rexbuilder_Util.$document.on("click",".edit-block-image",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",r=t.children(".rexbuilder-block-data"),l=t.find(".grid-item-content"),d=u(t.find(".text-wrap").get(0)),n="",e=e.parents(".rexlive-block-toolbox"),e=(e.hasClass("bottom-tools")?n="bottom":e.hasClass("top-tools")&&(n="top"),void 0===r.attr("data-id_image_bg_block")?"":r.attr("data-id_image_bg_block")),c=void 0===r.attr("data-image_bg_block")?"":r.attr("data-image_bg_block"),s=void 0===l.attr("data-background_image_width")?"":l.attr("data-background_image_width"),l=void 0===l.attr("data-background_image_height")?"":l.attr("data-background_image_height"),t=(void 0!==r.attr("data-image_bg_elem_active")&&r.attr("data-image_bg_elem_active"),"fixed"==t.parents(".grid-stack-row").attr("data-layout")?"full":"natural"),t=(d||(t="full"),void 0===r.attr("data-type_bg_block")||""==r.attr("data-type_bg_block")?t:r.attr("data-type_bg_block")),b=void 0===r.attr("data-photoswipe")?"":r.attr("data-photoswipe"),r=void 0===r.attr("data-image_size")?"":r.attr("data-image_size");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openLiveImageUploader",live_uploader_data:{idImage:e,urlImage:c,width:s,height:l,typeBGimage:t,photoswipe:b,imageSize:r,active:!0,sectionTarget:{sectionID:i,modelNumber:o,rexID:a},returnEventName:"rexlive:apply_background_image_block",data_to_send:{idImage:e,urlImage:c,width:s,height:l,typeBGimage:t,photoswipe:b,imageSize:r,active:!0,updateBlockHeight:!!d,tools:n,sectionTarget:{sectionID:i,modelNumber:o,rexID:a}}}})}),Rexbuilder_Util.$document.on("click",".edit-block-video-background",function(e){var t=v(e.target),o=t.parents(".grid-stack-item"),a=o.parents(".rexpansive_section"),i=o.attr("data-rexbuilder-block-id"),r=a.attr("data-rexlive-section-id"),a=void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",l=o.children(".rexbuilder-block-data"),o=o.find(".grid-item-content"),d="",n=t.parents(".rexlive-block-toolbox"),n=(n.hasClass("bottom-tools")?d="bottom":n.hasClass("top-tools")&&(d="top"),void 0===l.attr("data-video_mp4_url")?"":l.attr("data-video_mp4_url")),c=void 0===l.attr("data-video_bg_id")?"":l.attr("data-video_bg_id"),s=void 0===l.attr("data-video_bg_url")?"":l.attr("data-video_bg_url"),l=void 0===l.attr("data-video_bg_url_vimeo")?"":l.attr("data-video_bg_url_vimeo"),b=o.children(".rex-video-wrap"),u="",m="",b=(0!=b.length&&(u=parseInt(b.attr("data-rex-video-width")),m=parseInt(b.attr("data-rex-video-height"))),""),o=0!=o.children(".rex-video-toggle-audio").length,t=(""!=c?b="mp4":""!=s?b="youtube":""!=l&&(b="vimeo"),Rexbuilder_Util_Editor.manageElement=!0,t.parents(".block-toolBox__fast-configuration").length),g=null,b={eventName:"rexlive:editBlockVideoBackground",activeBlockData:{bgVideo:{type:b,mp4Data:{idMp4:c,linkMp4:n,width:u,height:m},vimeoUrl:l,youtubeUrl:s,audio:o,target:{sectionID:r,modelNumber:a,rexID:i},tools:d}},mousePosition:g=0<t?Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}):g};Rexbuilder_Util_Editor.sendParentIframeMessage(b)}),Rexbuilder_Util.$document.on("click",".deactivate-block-image-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",r=e.parents(".rexlive-block-toolbox"),e=(r.hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),r.find(".edit-block-image-position").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-image").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{target:{sectionID:i,modelNumber:o,rexID:a},idImage:"",urlImage:"",width:"",height:"",typeBGimage:"",photoswipe:"",active:!1}}),r=jQuery.Event("rexlive:apply_background_image_block");r.settings=e,Rexbuilder_Util.$document.trigger(r)}),Rexbuilder_Util.$document.on("click",".deactivate-block-color-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{color:"",active:!1,target:{sectionID:i,modelNumber:o,rexID:a}}}),t=jQuery.Event("rexlive:apply_background_color_block");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".deactivate-block-overlay-color",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{color:"",active:!1,target:{sectionID:i,modelNumber:o,rexID:a}}}),t=jQuery.Event("rexlive:change_block_overlay");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".deactivate-block-video-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-video-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{target:{sectionID:i,modelNumber:o,rexID:a},urlYoutube:"",urlVimeo:"",videoMp4:{idMp4:"",linkMp4:"",width:"",height:""},audio:"",typeVideo:""}}),t=jQuery.Event("rexlive:update_block_background_video");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".edit-block-content",function(e){var e=v(e.target).parents(".grid-stack-item"),t=jQuery.Event("dblclick");t.target=e.get(0),t.offsetY=0,e.parents(".perfect-grid-gallery").trigger(t)}),Rexbuilder_Util.$document.on("click",".edit-block-content-position",function(e){var t=v(e.target).parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),t=t.children(".rexbuilder-block-data"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",t=(void 0===t.attr("data-block_flex_position")?"":t.attr("data-block_flex_position")).split(" "),i={flexPosition:{target:{sectionID:i,modelNumber:o,rexID:a},position:t[1]+"-"+t[0]}},o=(Rexbuilder_Util_Editor.manageElement=!0,Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}));Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockContentPosition",activeBlockData:i,mousePosition:o})}),Rexbuilder_Util.$document.on("click",".edit-block-accordion",function(e){var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=(e.children(".rexbuilder-block-data"),t.attr("data-rexlive-section-id")),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e=e.find(".rex-accordion"),i="",r="",l=e.hasClass("open")?"open":"close",d=e.hasClass("no-toggle")?"hide":"visible",n="",c=!1,s=e.find(".rex-accordion--toggle").clone(),s=(s.find(".rex-accordion--toggle-icon").remove(),0<e.length&&(i=s.html().trim(),r=e.find(".rex-accordion--content").html().trim(),n=e.find(".rex-accordion--toggle-icon").html().trim(),e.find(".rex-accordion--content").hasClass("rex-accordion--gallery"))&&(c=!0),{blockData:{target:{sectionID:a,modelNumber:t,rexID:o},accordion:{header:i,icon:n,content:r,state:l,toggle_state:d,is_gallery:c}}}),e=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockAccordion",activeBlockData:s});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}),Rexbuilder_Util.$document.on("click",".edit-block-slideshow",function(e){var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=(e.children(".rexbuilder-block-data"),t.attr("data-rexlive-section-id")),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",i=[],e=e.find(".rex-slideshow");0<e.length&&e.find(".rex-slideshow__slide").each(function(e,t){i.push(t.innerHTML)}),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockSlideshow",activeBlockData:{blockData:{target:{sectionID:a,modelNumber:t,rexID:o},slideshow:{slides:i}}}})}),Rexbuilder_Util.$document.on("rexlive:updateSlideshow",function(e){var e=e.settings.data_to_send,t=e.target,t=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]');t.find(".text-wrap.medium-editor-element").html(e.slideshow.slides)}),Rexbuilder_Util.$document.on("click",".edit-block-gradient",function(e){e=v(e.target).parents(".grid-stack-item");i(e)}),Rexbuilder_Util.$document.on("rexlive:updateAccordion",function(e){var e=e.settings.data_to_send,t=e.target,t=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),o=t.find(".text-wrap.medium-editor-element").find(".rex-accordion");0<o.length?o.replaceWith(e.accordion.complete):t.find(".text-wrap.medium-editor-element").html(e.accordion.complete),Rexbuilder_Util_Editor.builderEdited(!1)}),Rexbuilder_Util.$document.on("click",".edit-block-image-position",function(e){var t=v(e.target).parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=t.children(".rexbuilder-block-data"),r=o.attr("data-rexlive-section-id"),l=t.find(".grid-item-content"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",d=void 0===i.attr("data-id_image_bg_block")?"":i.attr("data-id_image_bg_block"),n=void 0===i.attr("data-image_bg_block")?"":i.attr("data-image_bg_block"),c=void 0===l.attr("data-background_image_width")?"":l.attr("data-background_image_width"),l=void 0===l.attr("data-background_image_height")?"":l.attr("data-background_image_height"),s=void 0===i.attr("data-image_bg_elem_active")||i.attr("data-image_bg_elem_active"),b="fixed"==t.parents(".grid-stack-row").attr("data-layout")?"full":"natural",d={idImage:d,imageUrl:n,width:c,height:l,typeBGimage:void 0===i.attr("data-type_bg_block")?b:i.attr("data-type_bg_block"),active:s,defaultTypeImage:b,photoswipe:void 0===i.attr("data-photoswipe")?"":i.attr("data-photoswipe"),target:{sectionID:r,modelNumber:o,rexID:a}},n=void 0===i.attr("data-block_flex_img_position")?"":i.attr("data-block_flex_img_position"),c=(n=""===n?"center middle":n).split(" "),l={imageBG:d,flexImgPosition:{target:{sectionID:r,modelNumber:o,rexID:a},position:c[1]+"-"+c[0]},sectionTarget:{sectionID:r,modelNumber:o},blockState:{rexID:a,x:parseInt(t.attr("data-gs-x")),y:parseInt(t.attr("data-gs-y")),w:parseInt(t.attr("data-gs-width")),h:parseInt(t.attr("data-gs-height"))}},s=(Rexbuilder_Util_Editor.manageElement=!0,Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}));Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockImageSettings",activeBlockData:l,mousePosition:s})}),Rexbuilder_Util.$document.on("rexlive:SetcustomHTML",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:saveHTMLContent",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:inlineImageEdit",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineImageEdit",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineVideoEditor",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineVideoEditor:Transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineSVG",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineSVG:transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$rexContainer.on("click",".edit-block-color-background",I),Rexbuilder_Util.$rexContainer.on("click",".edit-block-overlay-color",w),Rexbuilder_Util.$rexContainer.on("click",".synch-block-content",function(e){e.preventDefault();var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),e=e.attr("data-rexbuilder-block-id"),o=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:o,modelNumber:t,rexID:e}}})}),r=v(document.getElementById("global-spectrum-block-background")),l=v(document.getElementById("global-spectrum-block-overlay")),s=c=null,k={data_to_send:{color:"",active:!(_={data_to_send:{color:"",active:n=d=!1,target:{sectionID:"",modelNumber:"",rexID:""}}}),target:{sectionID:"",modelNumber:"",rexID:""}}},r.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:r,action:"background",object:"block"})},move:h,hide:f}),l.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:l,action:"overlay",object:"block"})},move:y,hide:C});var e=o.clone(),t=(r.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==g&&(r.spectrum("set",g),r.spectrum("container").find(".sp-input").trigger("change")),r.spectrum("hide")}),(e=a.clone()).find(".rex-modal-option")),e=(r.spectrum("container").append(e),t.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":r.spectrum("hide");break;case"reset":null!==g&&(r.spectrum("set",g),r.spectrum("container").find(".sp-input").trigger("change"))}}),o.clone());l.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==x&&(l.spectrum("set",x),l.spectrum("container").find(".sp-input").trigger("change")),l.spectrum("hide")}),e=(t=a.clone()).find(".rex-modal-option"),l.spectrum("container").append(t),e.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":l.spectrum("hide");break;case"reset":null!==x&&(l.spectrum("set",x),l.spectrum("container").find(".sp-input").trigger("change"))}}),r.spectrum("container").draggable(),l.spectrum("container").draggable()},updateBlockBackgroundImageTool:function(e,t){e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image").addClass("tool-button--image-preview").css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide")},updateBlockImagePositionTool:function(e,t){e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image-position").removeClass("tool-button--hide")},updateBlockBackgroundColorToolLive:function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockBackgroundColorTool:function(e,t,o){var a=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t&&o?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),a):(a.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockBackgroundGradientTool:function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayColorToolLive:function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayColorTool:function(e,t,o){var a=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t&&o?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),a):(a.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayGradientTool:function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},openBlockBackgroundGradient:i,openBlockOverlayGradient:function(e){var t=(e=0===e.length?c:e).parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),e=e.children(".rexbuilder-block-data"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e={blockData:{gradient:e.attr("data-overlay_block_color"),target:{sectionID:a,modelNumber:t,rexID:o}}},a=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockOverlayGradient",activeBlockData:e});Rexbuilder_Util_Editor.sendParentIframeMessage(a)},updateTextTool:function(e){var t=(o=v(e).parents(".grid-stack-item").find(".block-toolBox__editor-tools")).find(".edit-block-content"),o=o.find(".edit-block-content-position");u(e)?(t.removeClass("tool-button--hide"),o.addClass("tool-button--hide")):(t.addClass("tool-button--hide"),o.removeClass("tool-button--hide"))}}}(jQuery);
!function(g){"use strict";g(function(){var l=g(document);l.on("rexlive:set_row_fullHeight",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),i={fullHeight:i.attr("data-full-height"),galleryInstance:a},e=(a.updateFullHeight("true"==e.fullHeight.toString()),{fullHeight:e.fullHeight.toString(),galleryInstance:a});Rexbuilder_Util_Editor.pushAction(t,"updateSectionFullHeight",e,i),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:set_gallery_layout",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),o={collapse_grid:t.attr("data-rex-collapse-grid"),gridLayout:a.settings.galleryLayout,galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},a.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!0,t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionLayoutTool(t,e),Rexbuilder_Dom_Util.updateGridLayoutDomProperties(i,e.layout),a.updateGridLayout(e.layout,o)}),l.on("rexlive:galleryLayoutChanged",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={gridLayout:e.settings.layout,galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!1,Rexbuilder_Util_Editor.pushAction(a,"updateSectionLayout",e,i)}),l.on("rexlive:set_row_separatos",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),o=a.createActionDataMoveBlocksGrid(),o={rowDistances:{gutter:parseInt(i.attr("data-separator")),top:parseInt(i.attr("data-row-separator-top")),bottom:parseInt(i.attr("data-row-separator-bottom")),right:parseInt(i.attr("data-row-separator-right")),left:parseInt(i.attr("data-row-separator-left"))},galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},o)};Rexbuilder_Util_Editor.updatingRowDistances=!0,Rexbuilder_Dom_Util.updateRowDistancesData(i,e.distances),a.updateRowDistances(e.distances,o),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"block_distance"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_top"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_right"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_left"),Rexbuilder_Section.fixBlockToolsAccordingToSeparator(t,e.distances),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:rowDistancesApplied",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={rowDistances:jQuery.extend({},!0,e.settings.newDistances),galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingRowDistances=!1,Rexbuilder_Util_Editor.pushAction(a,"updateGridDistances",e,i)}),l.on("rexlive:set_section_margins",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=Rexbuilder_Util.getGalleryInstance(t),a=i.createActionDataMoveBlocksGrid(),o=parseInt(t.css("margin-top").split("px")[0]),d=parseInt(t.css("margin-right").split("px")[0]),r=parseInt(t.css("margin-bottom").split("px")[0]),l=parseInt(t.css("margin-left").split("px")[0]),o={marginsSection:{top:isNaN(o)?0:o,right:isNaN(d)?0:d,bottom:isNaN(r)?0:r,left:isNaN(l)?0:l},galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:g.extend(!0,{},a)};Rexbuilder_Util_Editor.updatingSectionMargins=!0,Rexbuilder_Dom_Util.updateSectionMarginsData(t,e.margins),i.updateRowSectionMargins(e.margins,o),Rexbuilder_Section.fixSectionToolbox(t,e.margins),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"margin"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_top"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_right"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_left"),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:sectionMarginsApplied",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={marginsSection:jQuery.extend({},!0,e.settings.newMargins),galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionMargins=!1,Rexbuilder_Util_Editor.pushAction(a,"updateSectionMargins",e,i)}),l.on("rexlive:set_section_width",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),e=""+e.sectionWidth.width+e.sectionWidth.type,o=(Rexbuilder_Util_Editor.updatingSectionWidth=!0,"none"==i.parent().css("max-width")?"100%":i.parent().css("max-width")),i=i.parent().hasClass("full-disposition")?"full":"boxed",d=a.createActionDataMoveBlocksGrid(),o={section_width:o,dimension:i,galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},d)};Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionDimensionTool(t,{dimension:"100%"==e?"full":"boxed"}),a.updateSectionWidthWrap(e,o),Rexbuilder_Dom_Util.updateSectionWidthData(t,{sectionWidth:e,widthType:"100%"==e?"full":"boxed"}),t.attr("data-rexlive-section-edited",!0)}),l.on("rexlive:sectionWidthApplyed",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,e=e.settings.$section,a="none"==t.$element.parent().css("max-width")?"100%":t.$element.parent().css("max-width"),o=t.$element.parent().hasClass("full-disposition")?"full":"boxed",a=(Rexbuilder_Util.editedDataInfo.setSectionData(e.attr("data-rexlive-section-id"),"dimension"),Rexbuilder_Util.editedDataInfo.setSectionData(e.attr("data-rexlive-section-id"),"section_width"),{section_width:a,dimension:o,galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())});Rexbuilder_Util_Editor.updatingSectionWidth=!1,Rexbuilder_Util_Editor.pushAction(e,"updateSectionWidth",a,i)}),l.on("rexlive:set_row_photoswipe",function(e){for(var t=e.settings.data_to_send,e=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]'),i=e.find(".grid-stack-row"),a={elements:Rexbuilder_Live_Utilities.getElementsPhotoswipe(i)},o=("true"==t.photoswipe.toString()?Rexbuilder_Dom_Util.enablePhotoswipeAllBlocksSection(e):"false"==t.photoswipe.toString()&&Rexbuilder_Dom_Util.removePhotoswipeAllBlocksSection(e),Array.prototype.slice.call(e.get(0).getElementsByClassName("perfect-grid-item"))),d=o.length,r=0;r<d;r++)Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionTarget.sectionID,o[r].getAttribute("data-rexbuilder-block-id"),"photoswipe");i=Rexbuilder_Live_Utilities.getElementsPhotoswipe(i);Rexbuilder_Util_Editor.pushAction(e,"updateSectionPhotoswipe",{elements:i},a),e.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(e.hasClass("rex-model-section"))}),l.on("rexlive:set_row_hold_grid",function(e){var t=e.settings.data_to_send,t=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]');t.attr("data-rex-collapse-grid")===e.settings.data_to_send.holdGrid&&t.find(".collapse-grid").trigger("click")}),l.on("rexlive:change_section_name",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i={sectionName:t.attr("data-rexlive-section-name")},a=(Rexbuilder_Dom_Util.updateSectionName(t,e.sectionName),{sectionName:e.sectionName});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"section_name"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionName",a,i)}),l.on("rexlive:change_section_nav_label",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i={sectionNavLabel:t.children(".section-data").attr("data-section_nav_label")},a=(Rexbuilder_Dom_Util.updateSectionNavLabel(t,e.sectionNavLabel),{sectionNavLabel:e.sectionNavLabel});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"section_nav_label"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionNavLabel",a,i)}),l.on("rexlive:apply_section_custom_classes",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data").attr("data-custom_classes"),i={$target:t,classes:(i=i.trim()).split(/\s+/)},a=(Rexbuilder_Dom_Util.updateCustomClasses(t,e.customClasses),{$target:t,classes:e.customClasses});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"custom_classes"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateCustomClasses",a,i)}),l.on("rexlive:update_blocks_sizes",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor.updateBlocksSizes(e.blocksState)}),l.on("rexlive:update_block_size",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor.updateBlockSize(e.blockState)}),l.on("rexlive:SetCustomCSS",function(e){var e=e.settings.data_to_send,t={css:Rexbuilder_Util_Editor.$styleElement.text()},e=(Rexbuilder_Dom_Util.updateCustomCSS(e.customCSS),{css:e.customCSS});Rexbuilder_Util_Editor.pushAction("document","updateCustomCSS",e,t),Rexbuilder_Util_Editor.builderEdited(!1)}),l.on("rexlive:apply_background_color_section",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-color_bg_section"),active:i.attr("data-color_bg_section_active")},e=(Rexbuilder_Dom_Util.updateSectionBackgroundColor(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundColor",e,i)}),l.on("rexlive:updateSectionBackgroundGradient",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-color_bg_section"),active:i.attr("data-color_bg_section_active")},e=(Rexbuilder_Dom_Util.updateSectionBackgroundGradient(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundGradient",e,i)}),l.on("rexlive:updateSectionOverlayGradient",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-row_overlay_color"),active:i.attr("data-row_overlay_active")},a=(Rexbuilder_Dom_Util.updateSectionOverlayGradient(t,e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_active"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlayGradient",a,i)}),l.on("rexlive:change_section_overlay",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-row_overlay_color"),active:i.attr("data-row_overlay_active")},e=(Rexbuilder_Dom_Util.updateSectionOverlay(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_active"),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlay",e,i)}),l.on("rexlive:apply_background_image_section",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),a=void 0===i.attr("data-id_image_bg_section")?"":i.attr("data-id_image_bg_section"),o=void 0===i.attr("data-image_size")?"":i.attr("data-image_size"),d=void 0===i.attr("data-image_bg_section")?"":i.attr("data-image_bg_section"),r=void 0===t.attr("data-background_image_width")?"":t.attr("data-background_image_width"),l=void 0===t.attr("data-background_image_height")?"":t.attr("data-background_image_height"),i={active:void 0===i.attr("data-image_bg_section_active")||i.attr("data-image_bg_section_active"),idImage:a,image_size:o,urlImage:d,width:r,height:l},a=(Rexbuilder_Dom_Util.updateImageBG(t,e),{active:e.active,idImage:e.idImage,urlImage:e.urlImage,image_size:e.image_size,width:e.width,height:e.height});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_bg_section_active"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_width"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_height"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"id_image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_size"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionImageBG",a,i)}),l.on("rexlive:update_section_background_video",function(e){var t=e.settings.data_to_send,e=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]'),i=e.children(".section-data"),a=void 0===i.attr("data-video_mp4_url")?"":i.attr("data-video_mp4_url"),o=void 0===i.attr("data-video_bg_url_section")?"":i.attr("data-video_bg_url_section"),d=void 0===i.attr("data-video_bg_id_section")?"":i.attr("data-video_bg_id_section"),r=void 0===i.attr("data-video_bg_width_section")?"":i.attr("data-video_bg_width_section"),l=void 0===i.attr("data-video_bg_height_section")?"":i.attr("data-video_bg_height_section"),i=void 0===i.attr("data-video_bg_url_vimeo_section")?"":i.attr("data-video_bg_url_vimeo_section"),n="",d=(""!=d?n="mp4":""!=i?n="vimeo":""!=o&&(n="youtube"),{mp4Data:{idMp4:d,linkMp4:a,width:r,height:l},vimeoUrl:i,youtubeUrl:o,audio:!1,typeVideo:n}),a={mp4Data:{idMp4:t.videoMp4.idMp4,linkMp4:t.videoMp4.linkMp4,width:t.videoMp4.width,height:t.videoMp4.height},vimeoUrl:t.urlVimeo,youtubeUrl:t.urlYoutube,audio:!1,typeVideo:t.typeVideo},r=(Rexbuilder_Dom_Util.updateVideos(e,a),{mp4Data:{idMp4:t.videoMp4.idMp4,linkMp4:t.videoMp4.linkMp4,width:t.videoMp4.width,height:t.videoMp4.height},vimeoUrl:t.urlVimeo,youtubeUrl:t.urlYoutube,audio:!1,typeVideo:t.typeVideo});switch(r.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_id_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_mp4_url"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_width_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_height_section");break;case"youtube":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_section");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_vimeo_section");break;default:switch(n){case"mp4":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_id_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_mp4_url"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_width_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_height_section");break;case"youtube":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_section");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_vimeo_section")}}e.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e),Rexbuilder_Util_Editor.builderEdited(e.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(e,"updateSectionVideoBG",r,d)}),l.on("rexlive:apply_background_color_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-color_bg_block"),active:void 0===a.attr("data-color_bg_elem_active")||a.attr("data-color_bg_elem_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockBackgroundColor(e),i.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockBackgroundColor",e,a)}),l.on("rexlive:updateBlockBackgroundGradient",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-color_bg_block"),active:void 0===a.attr("data-color_bg_elem_active")||a.attr("data-color_bg_elem_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockBackgroundGradient(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockBackgroundGradient",e,a)}),l.on("rexlive:updateBlockOverlayGradient",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-overlay_block_color"),active:void 0===a.attr("data-overlay_block_color_active")||a.attr("data-overlay_block_color_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockOverlayGradient(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockOverlayGradient",e,a)}),l.on("rexlive:change_block_overlay",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:void 0!==a.attr("data-overlay_block_color")?a.attr("data-overlay_block_color"):"",active:void 0!==a.attr("data-overlay_block_color_active")&&a.attr("data-overlay_block_color_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockOverlay(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockOverlay",e,a)}),l.on("rexlive:apply_background_image_block",function(e){var e=e.settings.data_to_send,t=(Rexbuilder_Util_Editor.updatingImageBg=!0,e.target),i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.get(0),o=i.find(".grid-item-content"),d=i.children(".rexbuilder-block-data"),r=i.parents(".rexpansive_section"),l=Rexbuilder_Util.getGalleryInstance(r),n=("top"===e.tools&&(i.find(".rexlive-block-toolbox.top-tools .edit-block-image").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),i.find(".rexlive-block-toolbox.bottom-tools .edit-block-image").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),void 0===d.attr("data-id_image_bg_block")?"":d.attr("data-id_image_bg_block")),s=void 0===d.attr("data-image_bg_block")?"":d.attr("data-image_bg_block"),c=void 0===o.attr("data-background_image_width")?"":o.attr("data-background_image_width"),u=void 0===o.attr("data-background_image_height")?"":o.attr("data-background_image_height"),_=void 0===d.attr("data-image_bg_elem_active")||d.attr("data-image_bg_elem_active"),b="true"==_.toString()?"fixed"==i.parents(".grid-stack-row").attr("data-layout")?"full":"natural":"",_={$itemContent:o,imageOpt:{active:_,idImage:n,urlImage:s,width:c,height:u,typeBGimage:void 0===d.attr("data-type_bg_block")?b:d.attr("data-type_bg_block"),photoswipe:void 0===d.attr("data-photoswipe")?"":d.attr("data-photoswipe")}},n={active:e.active,idImage:e.idImage,urlImage:e.urlImage,width:e.width,height:e.height,typeBGimage:e.typeBGimage,photoswipe:e.photoswipe},s=(Rexbuilder_Dom_Util.updateImageBG(o,n),"masonry"===l.settings.galleryLayout&&l.updateElementHeight(a),{$itemContent:o,imageOpt:n});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_bg_url"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"id_image_bg"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_size"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_bg_elem_active"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"type_bg_image"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockImageBG",s,_),Rexbuilder_Util_Editor.updatingImageBg=!1}),l.on("rexlive:apply_photoswipe_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,photoswipe:void 0===a.attr("data-photoswipe")?"":a.attr("data-photoswipe")},e={$elem:i,photoswipe:e.photoswipe};Rexbuilder_Dom_Util.updateBlockPhotoswipe(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"photoswipe"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockPhotoswipe",e,a)}),l.on("rexlive:update_block_background_video",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.find(".grid-item-content"),o=i.children(".rexbuilder-block-data"),d=i.parents(".rexpansive_section"),r=(Rexbuilder_Util.getGalleryInstance(d),("youtube"==e.typeVideo&&""!==e.urlYoutube||"vimeo"==e.typeVideo&&""!==e.urlVimeo||"mp4"==e.typeVideo&&""!==e.videoMp4.idMp4)&&"top"===e.tools&&(i.find(".rexlive-block-toolbox.top-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),i.find(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url")),l=void 0===o.attr("data-video_bg_id")?"":o.attr("data-video_bg_id"),n=void 0===o.attr("data-video_bg_url")?"":o.attr("data-video_bg_url"),o=void 0===o.attr("data-video_bg_url_vimeo")?"":o.attr("data-video_bg_url_vimeo"),s=a.children(".rex-video-wrap"),c="",u="",s=(0!=s.length&&(c=parseInt(s.attr("data-rex-video-width")),u=parseInt(s.attr("data-rex-video-height"))),0!=a.children(".rex-video-toggle-audio").length),_="",l=(""!=l?_="mp4":""!=n?_="youtube":""!=o&&(_="vimeo"),{$itemContent:a,videoOpt:{mp4Data:{idMp4:l,linkMp4:r,width:c,height:u},vimeoUrl:o,youtubeUrl:n,audio:s,typeVideo:_}}),r={mp4Data:{idMp4:e.videoMp4.idMp4,linkMp4:e.videoMp4.linkMp4,width:e.videoMp4.width,height:e.videoMp4.height},vimeoUrl:e.urlVimeo,youtubeUrl:e.urlYoutube,audio:"true"==e.audio.toString(),typeVideo:e.typeVideo},c=(Rexbuilder_Dom_Util.updateVideos(a,r),{$itemContent:a,videoOpt:r});switch(i.attr("data-rexlive-element-edited",!0),s!==r.audio&&Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_has_audio"),e.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_id"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_mp4_url");break;case"youtube":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_youtube");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_vimeo");break;default:switch(_){case"mp4":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_id"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_mp4_url");break;case"youtube":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_youtube");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_vimeo")}}"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(d),Rexbuilder_Util_Editor.builderEdited(d.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(d,"updateBlockVideoBG",c,l)}),l.on("rexlive:apply_paddings_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),d=Rexbuilder_Util.getGalleryInstance(o),a=void 0===a.attr("data-block_padding")?"":a.attr("data-block_padding"),a={$elem:i,dataPadding:Rexbuilder_Util.getPaddingsDataString(a)},d=(Rexbuilder_Util_Editor.updatingPaddingBlock=!0,Rexbuilder_Dom_Util.updateBlockPaddings(i,e.paddings),"masonry"==d.settings.galleryLayout&&(d.updateElementHeight(i[0],!0),d.updateSizeViewerSizes(i[0])),Rexbuilder_Util_Editor.updatingPaddingBlock=!1,{$elem:i,dataPadding:e.paddings});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_padding"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockPadding",d,a)}),l.on("rexlive:apply_flex_position_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a=void 0===a.attr("data-block_flex_position")?"":a.attr("data-block_flex_position"),d={x:"",y:""},a=(""!=a&&(a=a.split(" "),d.x=a[0],d.y=a[1]),{$elem:i,dataPosition:d}),d=(Rexbuilder_Dom_Util.updateFlexPostition(i,e.position),{$elem:i,dataPosition:e.position});i.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_flex_position"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockFlexPosition",d,a)}),l.on("rexlive:apply_flex_image_position_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a=void 0===a.attr("data-block_flex_img_position")?"":a.attr("data-block_flex_img_position"),d={x:"",y:""},a=(""!=a&&(a=a.split(" "),d.x=a[0],d.y=a[1]),{$elem:i,dataPosition:d}),d=(Rexbuilder_Dom_Util.updateImageFlexPostition(i,e.position),{$elem:i,dataPosition:e.position});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_flex_img_position"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockImageFlexPosition",d,a)}),l.on("rexlive:apply_block_custom_classes",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$target:i,classes:(void 0===a.attr("data-block_custom_class")?"":a.attr("data-block_custom_class")).trim().split(/\s+/)},e=(Rexbuilder_Dom_Util.updateCustomClasses(i,e.customClasses),{$target:i,classes:e.customClasses});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_custom_class"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateCustomClasses",e,a)}),l.on("rexlive:apply_block_link_url",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,url:void 0===a.attr("data-linkurl")?"":a.attr("data-linkurl")},e=(Rexbuilder_Dom_Util.updateBlockUrl(i,e.url),{$elem:i,url:e.url});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"linkurl"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockUrl",e,a)}),l.on("rexlive:setTextGradient",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumeditor:setTextGradient",data:e.settings.data_to_send,editable:null})}),l.on("rexlive:editModel",function(e){var e=e.settings.data_to_send,e=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),e=e.find(".update-model-button"),t={$button:e,lock:!0},i={$button:e,lock:!1};Rexbuilder_Dom_Util.updateLockEditModel(e,!1),Rexbuilder_Util.$rexContainer.addClass("editing-model"),Rexbuilder_Util_Editor.pushAction("document","updateLockButton",i,t)}),l.on("rexlive:modelBecameSection",function(e){var e=e.settings.data_to_send,t=null,i=null,a=("default"==Rexbuilder_Util.activeLayout&&(t=Rexbuilder_Util.getDefaultLayoutState(),i=Rexbuilder_Util.getPageCustomizationsDom()),e.sectionTarget.sectionID),o=e.modelID,d=e.sectionTarget.modelNumber,r=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a+'"][data-rexlive-model-number="'+d+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a+'"]'),l={modelID:o,modelName:e.modelName,modelNumber:d,sectionID:r.attr("data-rexlive-section-id"),isModel:!0,$section:r,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=t?jQuery.extend(!0,[],t):null},a=e.sectionTarget.sectionID,o=e.modelID,d=e.sectionTarget.modelNumber,e=Rexbuilder_Util.createSectionID();if(null!=i){for(var n,s={section_rex_id:e,targets:[],section_is_model:!1,section_model_id:-1,section_model_number:-1,section_hide:!1,section_created_live:!0},c=0;c<i.length;c++){for(n=0;n<i[c].sections.length;n++)if(i[c].sections[n].section_is_model){if(i[c].sections[n].section_model_id==o&&i[c].sections[n].section_model_number==d)break}else if(a==i[c].sections[n].section_rex_id)break;i[c].sections.splice(n,1,jQuery.extend(!0,{},s))}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(i),n=0;n<t.length;n++)if(t[n].section_is_model){if(t[n].section_model_id==o&&t[n].section_model_number==d)break}else if(a==t[n].section_rex_id)break;s.targets=Rex_Save_Listeners.createTargets(r,"default"),t.splice(n,1,s),Rexbuilder_Util.updateDefaultLayoutState({pageData:t})}Rexbuilder_Dom_Util.updateSectionBecameModel({modelID:"",modelName:"",modelNumber:"",sectionID:e,isModel:!1,$section:r});e={modelID:"",modelName:"",modelNumber:"",sectionID:e,isModel:!1,$section:r,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=t?jQuery.extend(!0,[],t):null};Rexbuilder_Util_Editor.pushAction(r,"sectionBecameModel",e,l)}),l.on("Buttons: rexlive:update_button_page",function(e){var e=e.settings.data_to_send,t={buttonProperties:jQuery.extend(!0,{},e.reverseButtonData)},i={buttonProperties:jQuery.extend(!0,{},e.actionButtonData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexbutton.updateButton(i),Rexbuilder_Util_Editor.pushAction("document","updateRexButton",i,t)}),l.on("rexlive:update_wcpf7_column_content_page",function(e){var e=e.settings.data_to_send,t={columnContentData:jQuery.extend(!0,{},e.reverseColumnContentData)},i={columnContentData:jQuery.extend(!0,{},e.actionColumnContentData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateColumnContent(i),Rexbuilder_Rexwpcf7_Editor.updateColumnContentShortcode(i),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7ColumnContent",i,t)}),l.on("rexlive:update_wcpf7_page",function(e){var e=e.settings.data_to_send,t={elementData:jQuery.extend(!0,{},e.reverseFormData)},i={elementData:jQuery.extend(!0,{},e.actionFormData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateForm(i),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7",i,t)}),l.on("rexlive:getCustomCss",function(){var e=g("#rexpansive-builder-style-inline-css").text().replace(/^\s+|\s+$/g,"");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openCssEditor",currentStyle:e})}),l.on("rexlive:apply_reSynchContent",function(e){if("default"!=Rexbuilder_Util.activeLayout){var i=e.settings.data.targetInfo,e=document.getElementById("rexbuilder-layout-data").querySelector('.customization-wrap[data-customization-name="default"]').querySelector('.section-targets[data-section-rex-id="'+i.sectionID+'"]').textContent,a=""!==e?JSON.parse(e):{};if("self"===i.rexID){Rexbuilder_Dom_Util.updateBulkSection(i,Rexbuilder_Util.editedDataInfo.getSectionData(i.sectionID),a),Rexbuilder_Util.editedDataInfo.setBulkSectionData(i.sectionID,!1);for(var t,e=(s=""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]')).find(".perfect-grid-gallery"),o=a.length,d=0;d<o;d++)if("self"===a[d].name){t=a[d].props;break}var r=e.data().plugin_perfectGridGalleryEditor,l=Rexbuilder_Util.isMobile()?"masonry":t.layout,n={layout:l,sectionTarget:{modelNumber:i.modelNumber,sectionID:i.sectionID}};Rexbuilder_Section_Editor.updateSectionLayoutTool(s,n),Rexbuilder_Dom_Util.updateGridLayoutDomProperties(e,n.layout),r.updateGridLayout(n.layout),a.forEach(function(e){var t;"self"!==e.name&&(e={sectionID:i.sectionID,modelNumber:i.modelNumber,rexID:e.name},0!==(t=s.find('.rex-hide-element[data-rexbuilder-block-id="'+e.rexID+'"]')).length&&Rexbuilder_Dom_Util.updateRemovingBlock(t,!1,r),Rexbuilder_Dom_Util.updateBulkBlock(e,Rexbuilder_Util.editedDataInfo.getBlockData(e.sectionID,e.rexID),a),Rexbuilder_Util.editedDataInfo.setBulkBlockData(e.sectionID,e.rexID,!1))}),s.children(".section-data").attr("data-dimension")!==t.dimension&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(s,{dimension:"100%"===t.section_width?"full":"boxed"}),r.updateSectionWidthWrap(t.section_width),r.updateGridstackWidth(),Rexbuilder_Dom_Util.updateSectionWidthData(s,{sectionWidth:t.section_width,widthType:"100%"===t.section_width?"full":"boxed"})),"masonry"!=l||t.collapse_grid||r.updateBlocksHeight(),(Rexbuilder_Util.isMobile()||t.collapse_grid)&&(r.collapseElementsProperties(),r.collapseElements()),Rexbuilder_Dom_Util.updateSectionFullHeight({galleryInstance:r,fullHeight:t.full_height}),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:highlightRowSetData",editedData:t}),r._updateElementsSizeViewers()}else{Rexbuilder_Dom_Util.updateBulkBlock(i,Rexbuilder_Util.editedDataInfo.getBlockData(i.sectionID,i.rexID),a),Rexbuilder_Util.editedDataInfo.setBulkBlockData(i.sectionID,i.rexID,!1);var s,n=(s=(e=(""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+i.rexID+'"]')).parents(".rexpansive_section")).children(".section-data"),r=s.find(".grid-stack-row").data("plugin_perfectGridGalleryEditor"),l=e.get(0);"masonry"===n.attr("data-layout")&&"false"==s.attr("data-rex-collapse-grid")?r.updateElementHeight(l):!Rexbuilder_Util.isMobile()&&"true"!==s.attr("data-rex-collapse-grid")||(l.setAttribute("data-gs-width",12),l.setAttribute("data-gs-x",0),e=r.getBlockSizeOnCollapse(l),r.properties.gridstackInstance.update(l,parseInt(l.getAttribute("data-gs-x")),parseInt(l.getAttribute("data-gs-y")),e.width,e.height)),r.updateSizeViewerText(l)}Rexbuilder_Util_Editor.builderEdited(""!==i.modelNumber)}}),l.on("click",".builder-section-config",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.children(".section-data"),i=e.attr("data-rexlive-section-id"),a=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",o=e.find(".grid-stack-row"),d=o.data().plugin_perfectGridGalleryEditor.createActionDataMoveBlocksGrid().blocks.map(function(e){return{rexID:e.rexID,x:e.x,y:e.y,w:e.w,h:e.h}}),r=o.attr("data-layout"),l=o.attr("data-full-height"),n=o.parent().css("max-width"),s="100%"===n||"none"==n?"full":"boxed",c={gutter:parseInt(o.attr("data-separator")),top:parseInt(o.attr("data-row-separator-top")),bottom:parseInt(o.attr("data-row-separator-bottom")),right:parseInt(o.attr("data-row-separator-right")),left:parseInt(o.attr("data-row-separator-left"))},u={top:parseInt(e.css("margin-top").split("px")[0]),right:parseInt(e.css("margin-right").split("px")[0]),bottom:parseInt(e.css("margin-bottom").split("px")[0]),left:parseInt(e.css("margin-left").split("px")[0])},_=!0,b=[];if(o.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var t=g(t),i=t.children(".rexbuilder-block-data"),t=Rexbuilder_Util_Editor.getTextWrapLength(t);""!=i.attr("data-image_bg_block")&&""!=i.attr("data-image_bg_block")&&0==t&&b.push(i)}),0<b.length)for(var x=0;x<b.length;x++)"true"!=b[x].attr("data-photoswipe").toString()&&(_=!1);else _=!1;o=e.attr("data-rexlive-section-name"),e=t.attr("data-custom_classes"),t=t.attr("data-section_nav_label");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:i,modelNumber:a},blocksState:d,activeLayout:r,fullHeight:l,section_width:n,dimension:s,rowDistances:c,marginsSection:u,photoswipe:_,sectionName:o,sectionNavLabel:void 0!==t?t:"",customClasses:e}})}),l.on("click",".add-new-block-image",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({sectionTarget:{sectionID:t,modelNumber:e},returnEventName:"rexlive:insert_image",eventName:"rexlive:openMediaUploader"})}),l.on("click",".add-new-block-video",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:t,modelNumber:e}})}),l.on("click",".add-new-block-slider",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:addNewSlider",target:{sectionID:t,modelNumber:e}})}),l.on("click",".edit-background-section",function(e){e.preventDefault();var t,e=g(e.target).parents(".rexpansive_section"),i=e.attr("data-rexlive-section-id"),a=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",o=e.children(".section-data"),d=void 0!==o.attr("data-color_bg_section")?o.attr("data-color_bg_section"):"",r=(""==d&&(d="rgba(0,0,0,0)"),void 0===o.attr("data-color_bg_section_active")||o.attr("data-color_bg_section_active")),l=void 0!==o.attr("data-row_overlay_color")?o.attr("data-row_overlay_color"):"",n=(""==l&&""==(l=void 0===o.attr("data-responsive_background")?"":o.attr("data-responsive_background"))&&(l="rgba(0,0,0,0)"),t=!(e.hasClass("active-large-overlay")||e.hasClass("active-medium-overlay")||e.hasClass("active-small-overlay"))&&void 0!==o.attr("data-row_overlay_active")&&o.attr("data-row_overlay_active"),e.find(".responsive-overlay")),n=(t||("default"==Rexbuilder_Util.activeLayout&&e.hasClass("active-large-overlay")&&(t=!0,e.removeClass("active-large-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-overlay",o),n.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&e.hasClass("active-medium-overlay")&&(t=!0,e.removeClass("active-medium-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-overlay",o),n.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&e.hasClass("active-small-overlay")&&(t=!0,e.removeClass("active-small-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-overlay",o),n.addClass("rex-active-overlay"))),void 0===o.attr("data-id_image_bg_section")?"":o.attr("data-id_image_bg_section")),s=void 0===o.attr("data-image_bg_section")?"":o.attr("data-image_bg_section"),c=void 0===e.attr("data-background_image_width")?"":e.attr("data-background_image_width"),e=void 0===e.attr("data-background_image_height")?"":e.attr("data-background_image_height"),u=void 0===o.attr("data-image_bg_section_active")||o.attr("data-image_bg_section_active"),_=void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url"),b=void 0===o.attr("data-video_bg_url_section")?"":o.attr("data-video_bg_url_section"),x=void 0===o.attr("data-video_bg_id_section")?"":o.attr("data-video_bg_id_section"),o=void 0===o.attr("data-video_bg_url_vimeo_section")?"":o.attr("data-video_bg_url_vimeo_section");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBackgroundSection",activeBG:{bgColor:{sectionTarget:{sectionID:i,modelNumber:a},color:d,active:r},imageBG:{sectionTarget:{sectionID:i,modelNumber:a},idImage:n,imageUrl:s,width:c,height:e,active:u},bgVideo:{sectionTarget:{sectionID:i,modelNumber:a},youtubeVideo:b,vimeoUrl:o,mp4Video:_,mp4VideoID:x},overlay:{sectionTarget:{sectionID:i,modelNumber:a},color:l,active:t}}})}),l.on("click",".builder-edit-block",function(e){e.preventDefault();var e=g(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),i=e.attr("data-rexbuilder-block-id"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",o=e.children(".rexbuilder-block-data"),d=e.find(".grid-item-content"),r=e.find(".text-wrap"),l=o.attr("data-color_bg_block"),l={color:l=""==l?"rgba(0,0,0,0)":l,active:void 0!==o.attr("data-color_bg_elem_active")&&o.attr("data-color_bg_elem_active"),target:{sectionID:a,modelNumber:t,rexID:i}},n=void 0!==o.attr("data-overlay_block_color")?o.attr("data-overlay_block_color"):"",s=!(e.hasClass("active-large-block-overlay")||e.hasClass("active-medium-block-overlay")||e.hasClass("active-small-block-overlay"))&&void 0!==o.attr("data-overlay_block_color_active")&&o.attr("data-overlay_block_color_active"),c=e.find(".responsive-block-overlay"),c=(s||("default"==Rexbuilder_Util.activeLayout&&e.hasClass("active-large-block-overlay")&&(s=!0,e.removeClass("active-large-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-block-overlay",o),c.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&e.hasClass("active-medium-block-overlay")&&(s=!0,e.removeClass("active-medium-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-block-overlay",o),c.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&e.hasClass("active-small-block-overlay")&&(s=!0,e.removeClass("active-small-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-block-overlay",o),c.addClass("rex-active-overlay"))),{color:n,active:s,target:{sectionID:a,modelNumber:t,rexID:i}}),n=void 0===o.attr("data-id_image_bg_block")?"":o.attr("data-id_image_bg_block"),s=void 0===o.attr("data-image_bg_block")?"":o.attr("data-image_bg_block"),u=void 0===d.attr("data-background_image_width")?"":d.attr("data-background_image_width"),_=void 0===d.attr("data-background_image_height")?"":d.attr("data-background_image_height"),b=void 0===o.attr("data-image_bg_elem_active")||o.attr("data-image_bg_elem_active"),x="fixed"==e.parents(".grid-stack-row").attr("data-layout")?"full":"natural";""!==r.text().trim()&&(x="full");var r={idImage:n,imageUrl:s,width:u,height:_,typeBGimage:void 0===o.attr("data-type_bg_block")?x:o.attr("data-type_bg_block"),active:b,defaultTypeImage:x,photoswipe:void 0===o.attr("data-photoswipe")?"":o.attr("data-photoswipe"),target:{sectionID:a,modelNumber:t,rexID:i}},n=void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url"),s=void 0===o.attr("data-video_bg_id")?"":o.attr("data-video_bg_id"),u=void 0===o.attr("data-video_bg_url")?"":o.attr("data-video_bg_url"),_=void 0===o.attr("data-video_bg_url_vimeo")?"":o.attr("data-video_bg_url_vimeo"),b=d.children(".rex-video-wrap"),x="",m="",b=(0!=b.length&&(x=parseInt(b.attr("data-rex-video-width")),m=parseInt(b.attr("data-rex-video-height"))),""),b=(""!=s?b="mp4":""!=u?b="youtube":""!=_&&(b="vimeo"),{type:b,mp4Data:{idMp4:s,linkMp4:n,width:x,height:m},vimeoUrl:_,youtubeUrl:u,audio:0!=d.children(".rex-video-toggle-audio").length,target:{sectionID:a,modelNumber:t,rexID:i}}),s=void 0===o.attr("data-block_padding")?"":o.attr("data-block_padding"),n={target:{sectionID:a,modelNumber:t,rexID:i},paddings:Rexbuilder_Util.getPaddingsDataString(s)},x=void 0===o.attr("data-block_flex_position")?"":o.attr("data-block_flex_position"),m=(x=""===x?"left top":x).split(" "),_={target:{sectionID:a,modelNumber:t,rexID:i},position:m[1]+"-"+m[0]},u=void 0===o.attr("data-block_flex_img_position")?"":o.attr("data-block_flex_img_position"),d=(u=""===u?"center middle":u).split(" "),s={target:{sectionID:a,modelNumber:t,rexID:i},position:d[1]+"-"+d[0]},x=void 0===o.attr("data-block_custom_class")?"":o.attr("data-block_custom_class"),m=void 0===o.attr("data-linkurl")?"":o.attr("data-linkurl"),u={rexID:i,x:parseInt(e.attr("data-gs-x")),y:parseInt(e.attr("data-gs-y")),w:parseInt(e.attr("data-gs-width")),h:parseInt(e.attr("data-gs-height"))};Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockOptions",activeBlockData:{bgColor:l,imageBG:r,bgVideo:b,overlay:c,paddings:n,flexPosition:_,flexImgPosition:s,customClasses:{classes:x,target:{sectionID:a,modelNumber:t,rexID:i}},linkBlock:{link:m,target:{sectionID:a,modelNumber:t,rexID:i}},sectionTarget:{sectionID:a,modelNumber:t},blockState:u}})}),l.on("click",".open-model",function(e){Rexbuilder_Util_Editor.openingModel=!0;var t,i=g(e.target).parents(".rexpansive_section"),e=i.attr("data-rexlive-section-id"),a=void 0!==i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",o=Rexbuilder_Util.createSectionID(),o=Rex_Save_Listeners.createSectionProperties(i,"shortcode",o),d=Rexbuilder_Util.getSectionCustomLayouts(e),r=[];if(0!=d.length)for(t=0;t<d.length;t++)r.push(d[t].name),"default"==d[t].name&&(d[t].targets=Rex_Save_Listeners.createTargets(i,"default"));else r.push("default"),d.push({name:"default",targets:Rex_Save_Listeners.createTargets(i,"default")});var l,n=void 0!==i.attr("data-rexlive-model-id")?i.attr("data-rexlive-model-id"):"",s=[],c=!1,n=(Rexbuilder_Util.$rexContainer.find(".rexpansive_section.rex-model-section").each(function(e,t){var t=g(t),i=parseInt(t.attr("data-rexlive-model-id")),a=parseInt(t.attr("data-rexlive-model-number"));for(c=!1,l=0;l<s.length;l++)i==s[l].modelID&&a>s[l].number&&(s[l].number=a,c=!0);c||s.push({modelID:i,number:a})}),{eventName:"rexlive:openModalMenu",modelData:{modelID:n,sectionTarget:{sectionID:e,modelNumber:a},shortCode:o,layouts:d,layoutsNames:r,modelsNumbers:s}});Rexbuilder_Util_Editor.sendParentIframeMessage(n),Rexbuilder_Util_Editor.openingModel=!1}),l.on("click",".call-update-model-button",function(e){g(this).parents(".rexpansive_section").find(".update-model-button").trigger("click")}),l.on("click",".update-model-button",function(e){var t,i=g(this),a=i.parents(".rexpansive_section"),o=a.attr("data-rexlive-section-id"),d=void 0!==a.attr("data-rexlive-model-id")?a.attr("data-rexlive-model-id"):"",r=void 0!==a.attr("data-rexlive-model-name")?a.attr("data-rexlive-model-name"):"",a=void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"";i.hasClass("locked")?(t={eventName:"rexlive:editRemoveModal",modelData:{modelName:r,modelNumber:a,modelID:d,sectionTarget:{sectionID:o,modelNumber:a},layoutActive:Rexbuilder_Util.activeLayout}},Rexbuilder_Util_Editor.sendParentIframeMessage(t),Rexbuilder_Util_Editor.openingModel=!1):(t={eventName:"rexlive:saveAndCloseModel",modelData:{modelName:r,modelNumber:a,modelID:d,sectionTarget:{sectionID:o,modelNumber:a},layoutActive:Rexbuilder_Util.activeLayout}},Rexbuilder_Util_Editor.sendParentIframeMessage(t),i=jQuery.Event("rexlive:saveModel"),l.trigger(i))})})}(jQuery);
!function(){var m,b;function v(e,t){for(var a=Array.prototype.slice.call(arguments,2),i=e.split("."),d=i.pop(),l=0;l<i.length;l++)t=t[i[l]];return t[d].apply(t,a)}String.prototype.hashCode=function(){var e,t=0;if(0!==this.length)for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t};function i(e){e.preventDefault();var e=e.currentTarget.getAttribute("data-action"),t=this.querySelector(".builderlive-editable-field");switch(e){case"remove":t&&(t.setAttribute("data-editable-value",""),t.style.visibility="hidden");break;case"add":t&&g();case"edit":t&&g(t)}}var f=function(e,t){var a=document.createElement("span"),t=(a.setAttribute("class","builderlive-editable-media__wrapper"),a.innerHTML=tmpl("tmpl-editable-media-toolbar",{type:t}),a.querySelector('[data-action="remove"]')),t=(t&&t.addEventListener("click",i.bind(a)),a.querySelector('[data-action="add"]')),t=(t&&t.addEventListener("click",i.bind(a)),a.querySelector('[data-action="edit"]'));return t&&t.addEventListener("click",i.bind(a)),e.parentNode.insertBefore(a,e.parentNode.firstChild),a.appendChild(e)},p=function(){m=[].slice.call(document.getElementsByClassName("builderlive-editable-field"))},_=function(e){e.preventDefault(),g(e.currentTarget)},g=function(e,t){t=void 0!==t&&t;var a="",i="",d="";(e=void 0!==e?e:null)?(a="edit",i=e.getAttribute("data-editable-value"),d=e.getAttribute("data-editable-id")):a="add",Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openPostEditMediaUploader",mediaData:{action:a,mediaId:i,fieldId:d,fromMediaListModal:t}})},d=function(e){e.stopPropagation()},h=function(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})};document.addEventListener("DOMContentLoaded",function(){p(),b=parseInt(document.getElementById("id-post").getAttribute("data-post-id"))}),window.addEventListener("message",function(e){var t,a,i,d,l,r,n,s,o,u,c;e.data.rexliveEvent&&("rexlive:savePage"===e.data.eventName&&(c=[],p(),m.forEach(function(e){var t,a=null===(a=e.getAttribute("data-editable-type"))?"text":a,i=e.getAttribute("data-editable-hash");switch(a){case"html":case"float":case"text":t=e.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":t=e.getAttribute("data-editable-value").hashCode()}if(t!=i){var i=e.getAttribute("data-editable-info"),d=e.getAttribute("data-editable-format"),l={prev_value:null,value:null,info:""!==i?JSON.parse(i):[],type:a};switch(a){case"media":l.value=e.getAttribute("data-editable-value");break;case"media_list":case"media_list_aggregate":l.prev_value=e.getAttribute("data-editable-prev-value"),l.value=e.getAttribute("data-editable-value");break;case"html":l.value=e.innerHTML.trim();break;case"float":var r,n=e.innerText.trim();null!==d&&(r=d.split("x"),n=(n=n.replace(r[1],"")).replace(r[2],".")),l.value=parseFloat(n);break;default:l.value=e.innerText.trim()}c.push(l)}}),0<(o=c).length)&&(o=function(e){var t,a=[];for(t in e)a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&").replace(/%20/g,"+")}({action:"rexlive_save_editable_fields",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,postID:b,fieldData:JSON.stringify(o)}),(t=new XMLHttpRequest).open("POST",_plugin_frontend_settings.rexajax.ajaxurl,!0),t.onload=function(){200<=t.status&&t.status<400&&JSON.parse(t.responseText).success&&m.forEach(function(e,t){var a=e.getAttribute("data-editable-type"),i=null;switch(null===a?"text":a){case"html":case"float":case"text":i=e.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":i=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",i),e.setAttribute("data-editable-prev-value",e.getAttribute("data-editable-value"))})},t.onerror=function(){},t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(o)),"rexlive:liveMediaEdit"===e.data.eventName&&(o=e.data.data_to_send,(u=document.querySelector('.builderlive-editable-field[data-editable-id="'+o.media_data.fieldId+'"]')).setAttribute("data-editable-value",o.imgData[0].media_info.id),"img"===u.tagName.toLowerCase()?(u.setAttribute("src",o.imgData[0].display_info.src),u.removeAttribute("srcset")):u.style.backgroundImage="url("+o.imgData[0].display_info.src+")","undefined"!==o.media_data.fromMediaListModal&&o.media_data.fromMediaListModal&&(u={eventName:"rexlive:liveMediaEditFromListComplete",mediaData:{src:o.imgData[0].display_info.src,fieldId:o.media_data.fieldId}},Rexbuilder_Util_Editor.sendParentIframeMessage(u)),h()),"rexlive:liveMediaAdd"===e.data.eventName&&(u=e.data.data_to_send,s=document.querySelector(u.media_data.destinationSelector),a=v(u.media_data.tmplDataGeneration,window,u),i=tmpl(u.media_data.addTmplId,a),(n=document.createElement("DIV")).innerHTML=i,d=(n=-1!==(i=n.children[0]).className.indexOf("builderlive-editable-field")?i:i.querySelector(".builderlive-editable-field")).getAttribute("data-editable-type"),l="bl_"+d+"_"+document.getElementsByClassName("builderlive-editable-field").length,n.setAttribute("data-editable-id",l),f(n,d),n.addEventListener("click",_),s.appendChild(i),v(u.media_data.completeAddCallback,window,i,a),"undefined"!==u.media_data.fromMediaListModal&&u.media_data.fromMediaListModal&&(d={eventName:"rexlive:liveMediaAddFromListComplete",mediaData:{src:u.imgData[0].display_info.src,fieldId:l}},Rexbuilder_Util_Editor.sendParentIframeMessage(d)),h()),"rexlive:liveMediaOpenEdit"===e.data.eventName&&(r=document.querySelector('.builderlive-editable-field[data-editable-id="'+e.data.data_to_send.elId+'"]'))&&g(r,e.data.data_to_send.fromMediaListModal),"rexlive:liveMediaReorder"===e.data.eventName&&e.data.data_to_send&&(v(e.data.data_to_send.completeReorderCallback,window,e.data.data_to_send),h()),"rexlive:liveMediaDelete"===e.data.eventName)&&(r=document.querySelector('.builderlive-editable-field[data-editable-id="'+e.data.data_to_send.elId+'"]'))&&(n=r.getAttribute("data-editable-value"),r.setAttribute("data-editable-value",""),r.style.visibility="hidden",s={mediaListAggregateSelector:e.data.data_to_send.mediaListAggregateSelector,value:n},v(e.data.data_to_send.completeRemoveCallback,window,s),h())},!1),window.addEventListener("load",function(){m.forEach(function(e,t){var a=e.getAttribute("data-editable-type"),i=(e.setAttribute("data-editable-id","bl_"+(a=null===a?"text":a)+"_"+t),null);switch(a){case"html":case"float":case"text":i=e.innerText.trim().hashCode(),e.setAttribute("contenteditable",!0),e.addEventListener("click",d),e.addEventListener("input",h);break;case"media":case"media_list":f(e,a),i=e.getAttribute("data-editable-value").hashCode(),e.addEventListener("click",_);break;case"media_list_aggregate":i=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",i)})})}();
!function(e){"use strict";function r(e,n){var t=/[^\w\-.:]/.test(e)?new Function(r.arg+",tmpl","var _e=tmpl.encode"+r.helper+",_s='"+e.replace(r.regexp,r.func)+"';return _s;"):r.cache[e]=r.cache[e]||r(r.load(e));return n?t(n,r):function(e){return t(e,r)}}r.cache={},r.load=function(e){return document.getElementById(e).innerHTML},r.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,r.func=function(e,n,t,r,c,u){return n?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[n]||"\\"+n:t?"="===t?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":c?"';":u?"_s+='":void 0},r.encReg=/[<>&"'\x00]/g,r.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},r.encode=function(e){return(null==e?"":""+e).replace(r.encReg,function(e){return r.encMap[e]||""})},r.arg="o",r.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof module&&module.exports?module.exports=r:e.tmpl=r}(this);
/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(m,z,t,_){var p={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){p.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(p.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(p.features)return p.features;var e,t,n=p.createEl().style,i="",o={};o.oldIE=document.all&&!document.addEventListener,o.touch="ontouchstart"in window,window.requestAnimationFrame&&(o.raf=window.requestAnimationFrame,o.caf=window.cancelAnimationFrame),o.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,o.pointerEvent||(e=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(o.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(o.isOldAndroid=!0),o.androidVersion=t),o.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var a,r,l,s=["transform","perspective","animationName"],c=["","webkit","Moz","ms","O"],u=0;u<4;u++){for(var i=c[u],d=0;d<3;d++)a=s[d],r=i+(i?a.charAt(0).toUpperCase()+a.slice(1):a),!o[a]&&r in n&&(o[a]=r);i&&!o.raf&&(i=i.toLowerCase(),o.raf=window[i+"RequestAnimationFrame"],o.raf)&&(o.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"])}return o.raf||(l=0,o.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),i=window.setTimeout(function(){e(t+n)},n);return l=t+n,i},o.caf=function(e){clearTimeout(e)}),o.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,p.features=o}},f=(p.detectFeatures(),p.features.oldIE&&(p.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)}),this),N=25,h={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};p.extend(h,_);function e(){return{x:0,y:0}}function U(e,t){p.extend(f,t.publicMethods),Ge.push(e)}function H(e){var t=P();return t-1<e?e-t:e<0?t+e:e}function a(e,t){return Ke[e]||(Ke[e]=[]),Ke[e].push(t)}function Y(e,t,n,i){i===f.currItem.initialZoomLevel?n[e]=f.currItem.initialPosition[e]:(n[e]=Qe(e,i),n[e]>t.min[e]?n[e]=t.min[e]:n[e]<t.max[e]&&(n[e]=t.max[e]))}function W(e){var t="";h.escKey&&27===e.keyCode?t="close":h.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,f[t]())}function B(e){e&&(Ee||Ae||g||Te)&&(e.preventDefault(),e.stopPropagation())}function G(){f.setScrollOffset(0,p.getScrollY())}function X(e){var t;"mousedown"===e.type&&0<e.button||(Qt?e.preventDefault():Me&&"mousedown"===e.type||(kt(e,!0)&&e.preventDefault(),C("pointerDown"),pe&&((t=p.arraySearch(ht,e.pointerId,"id"))<0&&(t=ht.length),ht[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=Nt(e)).length,c=null,ct(),s&&1!==e||(s=Fe=!0,p.bind(window,ee,f),De=_e=Le=Te=ke=Ee=Se=Ae=!1,Ze=null,C("firstTouchStart",t),S(He,v),Ue.x=Ue.y=0,S(k,t[0]),S(ft,k),yt.x=b.x*Ye,xt=[{x:k.x,y:k.y}],Ie=be=D(),it(x,!0),Mt(),St()),!u&&1<e&&!g&&!ke&&(ne=x,u=Se=!(Ae=!1),Ue.y=Ue.x=0,S(He,v),S(E,t[0]),S(pt,t[1]),Pt(E,pt,Ct),It.x=Math.abs(Ct.x)-v.x,It.y=Math.abs(Ct.y)-v.y,Re=Tt(E,pt))))}function V(e){var t;e.preventDefault(),pe&&-1<(t=p.arraySearch(ht,e.pointerId,"id"))&&((t=ht[t]).x=e.pageX,t.y=e.pageY),s&&(t=Nt(e),Ze||Ee||u?c=t:R.x!==b.x*Ye?Ze="h":(e=Math.abs(t[0].x-k.x)-Math.abs(t[0].y-k.y),Math.abs(e)>=mt&&(Ze=0<e?"h":"v",c=t)))}function K(e){if(l.isOldAndroid){if(Me&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(Me),Me=setTimeout(function(){Me=0},600))}var t;C("pointerUp"),kt(e,!1)&&e.preventDefault(),pe&&-1<(a=p.arraySearch(ht,e.pointerId,"id"))&&(t=ht.splice(a,1)[0],navigator.msPointerEnabled&&(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type)||(t.type=e.pointerType||"mouse"));var n=(a=Nt(e)).length;if(2===(n="mouseup"===e.type?0:n))return!(c=null);1===n&&S(ft,a[0]),0!==n||Ze||g||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),C("touchRelease",e,t));var i,o,a=-1;if(0===n&&(s=!1,p.unbind(window,ee,f),Mt(),u?a=0:-1!==bt&&(a=D()-bt)),bt=1===n?D():-1,e=-1!==a&&a<150?"zoom":"swipe",u&&n<2&&(u=!1,1===n&&(e="zoomPointerUp"),C("zoomGestureEnded")),c=null,Ee||Ae||g||Te)if(ct(),(Ce=Ce||Yt()).calculateSwipeSpeed("x"),Te)Ft()<h.verticalDragRange?f.close():(i=v.y,o=ze,ut("verticalDrag",0,1,300,p.easing.cubic.out,function(e){v.y=(f.currItem.initialPosition.y-i)*e+i,T((1-o)*e+o),M()}),C("onVerticalDrag",1));else{if((ke||g)&&0===n){if(Bt(e,Ce))return;e="zoomPointerUp"}if(!g)return"swipe"!==e?void Xt():void(!ke&&x>f.currItem.fitRatio&&Wt(Ce))}}var q,$,j,y,J,Q,ee,te,i,x,ne,ie,oe,ae,re,r,le,se,ce,ue,de,me,pe,o,fe,he,ye,xe,ge,ve,l,we,be,Ie,Ce,De,Te,Me,s,Se,Ae,Ee,Oe,ke,c,u,Re,d,Pe,g,Ze,Fe,Le,ze,_e,Ne,Ue=e(),He=e(),v=e(),w={},Ye=0,We={},b=e(),I=0,Be=!0,Ge=[],Xe={},Ve=!1,Ke={},C=function(e){var t=Ke[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(f,n)}},D=function(){return(new Date).getTime()},T=function(e){ze=e,f.bg.style.opacity=e*h.bgOpacity},qe=function(e,t,n,i,o){(!Ve||o&&o!==f.currItem)&&(i/=(o||f.currItem).fitRatio),e[me]=ie+t+"px, "+n+"px"+oe+" scale("+i+")"},M=function(e){Pe&&(e&&(x>f.currItem.fitRatio?Ve||(cn(f.currItem,!1,!0),Ve=!0):Ve&&(cn(f.currItem),Ve=!1)),qe(Pe,v.x,v.y,x))},$e=function(e){e.container&&qe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},je=function(e,t){t[me]=ie+e+"px, 0px"+oe},Je=function(e,t){var n;!h.loop&&t&&(t=y+(b.x*Ye-e)/b.x,n=Math.round(e-R.x),t<0&&0<n||t>=P()-1&&n<0)&&(e=R.x+n*h.mainScrollEndFriction),R.x=e,je(e,J)},Qe=function(e,t){var n=It[e]-We[e];return He[e]+Ue[e]+n-t/ne*n},S=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},et=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},tt=null,nt=function(){tt&&(p.unbind(document,"mousemove",nt),p.addClass(m,"pswp--has_mouse"),h.mouseUsed=!0,C("mouseUsed")),tt=setTimeout(function(){tt=null},100)},it=function(e,t){e=ln(f.currItem,w,e);return t&&(d=e),e},ot=function(e){return(e=e||f.currItem).initialZoomLevel},at=function(e){return 0<(e=e||f.currItem).w?h.maxSpreadZoom:1},A={},rt=0,lt=function(e){A[e]&&(A[e].raf&&he(A[e].raf),rt--,delete A[e])},st=function(e){A[e]&&lt(e),A[e]||(rt++,A[e]={})},ct=function(){for(var e in A)A.hasOwnProperty(e)&&lt(e)},ut=function(e,t,n,i,o,a,r){function l(){A[e]&&(s=D()-c,i<=s?(lt(e),a(n),r&&r()):(a((n-t)*o(s/i)+t),A[e].raf=fe(l)))}var s,c=D();st(e);l()},_={shout:C,listen:a,viewportSize:w,options:h,isMainScrollAnimating:function(){return g},getZoomLevel:function(){return x},getCurrentIndex:function(){return y},isDragging:function(){return s},isZooming:function(){return u},setScrollOffset:function(e,t){We.x=e,ve=We.y=t,C("updateScrollOffset",We)},applyZoomPan:function(e,t,n,i){v.x=t,v.y=n,x=e,M(i)},init:function(){if(!q&&!$){f.framework=p,f.template=m,f.bg=p.getChildByClass(m,"pswp__bg"),ye=m.className,q=!0,l=p.detectFeatures(),fe=l.raf,he=l.caf,me=l.transform,ge=l.oldIE,f.scrollWrap=p.getChildByClass(m,"pswp__scroll-wrap"),f.container=p.getChildByClass(f.scrollWrap,"pswp__container"),J=f.container.style,f.itemHolders=r=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],r[0].el.style.display=r[2].el.style.display="none",me?(t=l.perspective&&!o,ie="translate"+(t?"3d(":"("),oe=l.perspective?", 0px)":")"):(me="left",p.addClass(m,"pswp--ie"),je=function(e,t){t.left=e+"px"},$e=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,t=t*e.h;n.width=i+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},M=function(){var e,t,n,i;Pe&&(e=Pe,n=(i=1<(t=f.currItem).fitRatio?1:t.fitRatio)*t.w,i=i*t.h,e.width=n+"px",e.height=i+"px",e.left=v.x+"px",e.top=v.y+"px")}),i={resize:f.updateSize,orientationchange:function(){clearTimeout(we),we=setTimeout(function(){w.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:G,keydown:W,click:B};var e,t=l.isOldIOSPhone||l.isOldAndroid||l.isMobileOpera;for(l.animationName&&l.transform&&!t||(h.showAnimationDuration=h.hideAnimationDuration=0),e=0;e<Ge.length;e++)f["init"+Ge[e]]();z&&(f.ui=new z(f,p)).init(),C("firstUpdate"),y=y||h.index||0,(isNaN(y)||y<0||y>=P())&&(y=0),f.currItem=en(y),(l.isOldIOSPhone||l.isOldAndroid)&&(Be=!1),m.setAttribute("aria-hidden","false"),h.modal&&(Be?m.style.position="fixed":(m.style.position="absolute",m.style.top=p.getScrollY()+"px")),void 0===ve&&(C("initialLayout"),ve=xe=p.getScrollY());var n="pswp--open ";for(h.mainClass&&(n+=h.mainClass+" "),h.showHideOpacity&&(n+="pswp--animate_opacity "),n=(n=(n+=o?"pswp--touch":"pswp--notouch")+(l.animationName?" pswp--css_animation":""))+(l.svg?" pswp--svg":""),p.addClass(m,n),f.updateSize(),Q=-1,I=null,e=0;e<3;e++)je((e+Q)*b.x,r[e].el.style);ge||p.bind(f.scrollWrap,te,f),a("initialZoomInEnd",function(){f.setContent(r[0],y-1),f.setContent(r[2],y+1),r[0].el.style.display=r[2].el.style.display="block",h.focus&&m.focus(),p.bind(document,"keydown",f),l.transform&&p.bind(f.scrollWrap,"click",f),h.mouseUsed||p.bind(document,"mousemove",nt),p.bind(window,"resize scroll orientationchange",f),C("bindEvents")}),f.setContent(r[1],y),f.updateCurrItem(),C("afterInit"),Be||(ae=setInterval(function(){rt||s||u||x!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),p.addClass(m,"pswp--visible")}var t},close:function(){q&&($=!(q=!1),C("close"),p.unbind(window,"resize scroll orientationchange",f),p.unbind(window,"scroll",i.scroll),p.unbind(document,"keydown",f),p.unbind(document,"mousemove",nt),l.transform&&p.unbind(f.scrollWrap,"click",f),s&&p.unbind(window,ee,f),clearTimeout(we),C("unbindEvents"),tn(f.currItem,null,!0,f.destroy))},destroy:function(){C("destroy"),$t&&clearTimeout($t),m.setAttribute("aria-hidden","true"),m.className=ye,ae&&clearInterval(ae),p.unbind(f.scrollWrap,te,f),p.unbind(window,"scroll",f),Mt(),ct(),Ke=null},panTo:function(e,t,n){n||(e>d.min.x?e=d.min.x:e<d.max.x&&(e=d.max.x),t>d.min.y?t=d.min.y:t<d.max.y&&(t=d.max.y)),v.x=e,v.y=t,M()},handleEvent:function(e){e=e||window.event,i[e.type]&&i[e.type](e)},goTo:function(e){var t=(e=H(e))-y;I=t,y=e,f.currItem=en(y),Ye-=t,Je(b.x*Ye),ct(),g=!1,f.updateCurrItem()},next:function(){f.goTo(y+1)},prev:function(){f.goTo(y-1)},updateCurrZoomItem:function(e){var t;e&&C("beforeChange",0),Pe=r[1].el.children.length&&(t=r[1].el.children[0],p.hasClass(t,"pswp__zoom-wrap"))?t.style:null,d=f.currItem.bounds,ne=x=f.currItem.initialZoomLevel,v.x=d.center.x,v.y=d.center.y,e&&C("afterChange")},invalidateCurrItems:function(){re=!0;for(var e=0;e<3;e++)r[e].item&&(r[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==I){var t,n=Math.abs(I);if(!(e&&n<2)){f.currItem=en(y),Ve=!1,C("beforeChange",I),3<=n&&(Q+=I+(0<I?-3:3),n=3);for(var i=0;i<n;i++)0<I?(t=r.shift(),r[2]=t,je((++Q+2)*b.x,t.el.style),f.setContent(t,y-n+i+1+1)):(t=r.pop(),r.unshift(t),je(--Q*b.x,t.el.style),f.setContent(t,y+n-i-1-1));Pe&&1===Math.abs(I)&&(e=en(le)).initialZoomLevel!==x&&(ln(e,w),cn(e),$e(e)),I=0,f.updateCurrZoomItem(),le=y,C("afterChange")}}},updateSize:function(e){if(!Be&&h.modal){var t=p.getScrollY();if(ve!==t&&(m.style.top=t+"px",ve=t),!e&&Xe.x===window.innerWidth&&Xe.y===window.innerHeight)return;Xe.x=window.innerWidth,Xe.y=window.innerHeight,m.style.height=Xe.y+"px"}if(w.x=f.scrollWrap.clientWidth,w.y=f.scrollWrap.clientHeight,G(),b.x=w.x+Math.round(w.x*h.spacing),b.y=w.y,Je(b.x*Ye),C("beforeResize"),void 0!==Q){for(var n,i,o,a=0;a<3;a++)n=r[a],je((a+Q)*b.x,n.el.style),o=y+a-1,h.loop&&2<P()&&(o=H(o)),(i=en(o))&&(re||i.needsUpdate||!i.bounds)?(f.cleanSlide(i),f.setContent(n,o),1===a&&(f.currItem=i,f.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&f.setContent(n,o),i&&i.container&&(ln(i,w),cn(i),$e(i));re=!1}ne=x=f.currItem.initialZoomLevel,(d=f.currItem.bounds)&&(v.x=d.center.x,v.y=d.center.y,M(!0)),C("resize")},zoomTo:function(t,e,n,i,o){e&&(ne=x,It.x=Math.abs(e.x)-v.x,It.y=Math.abs(e.y)-v.y,S(He,v));function a(e){1===e?(x=t,v.x=r.x,v.y=r.y):(x=(t-l)*e+l,v.x=(r.x-s.x)*e+s.x,v.y=(r.y-s.y)*e+s.y),o&&o(e),M(1===e)}var e=it(t,!1),r={},l=(Y("x",e,r,t),Y("y",e,r,t),x),s={x:v.x,y:v.y};et(r);n?ut("customZoomTo",0,1,n,i||p.easing.sine.inOut,a):a(1)}},dt=30,mt=10,E={},pt={},O={},k={},ft={},ht=[],yt={},xt=[],gt={},vt=0,wt=e(),bt=0,R=e(),It=e(),Ct=e(),Dt=function(e,t){return e.x===t.x&&e.y===t.y},Tt=function(e,t){return gt.x=Math.abs(e.x-t.x),gt.y=Math.abs(e.y-t.y),Math.sqrt(gt.x*gt.x+gt.y*gt.y)},Mt=function(){Oe&&(he(Oe),Oe=null)},St=function(){s&&(Oe=fe(St),Ht())},At=function(){return!("fit"===h.scaleMode&&x===f.currItem.initialZoomLevel)},Et=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:Et(e.parentNode,t))},Ot={},kt=function(e,t){return Ot.prevent=!Et(e.target,h.isClickableElement),C("preventDragEvent",e,t,Ot),Ot.prevent},Rt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Pt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Zt=function(e,t,n){var i;50<e-Ie&&((i=2<xt.length?xt.shift():{}).x=t,i.y=n,xt.push(i),Ie=e)},Ft=function(){var e=v.y-f.currItem.initialPosition.y;return 1-Math.abs(e/(w.y/2))},Lt={},zt={},_t=[],Nt=function(e){for(;0<_t.length;)_t.pop();return pe?(Ne=0,ht.forEach(function(e){0===Ne?_t[0]=e:1===Ne&&(_t[1]=e),Ne++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(_t[0]=Rt(e.touches[0],Lt),1<e.touches.length)&&(_t[1]=Rt(e.touches[1],zt)):(Lt.x=e.pageX,Lt.y=e.pageY,Lt.id="",_t[0]=Lt),_t},Ut=function(e,t){var n,i,o,a=v[e]+t[e],r=0<t[e],l=R.x+t.x,s=R.x-yt.x,c=a>d.min[e]||a<d.max[e]?h.panEndFriction:1,a=v[e]+t[e]*c;return!h.allowPanToNext&&x!==f.currItem.initialZoomLevel||(Pe?"h"!==Ze||"x"!==e||Ae||(r?(a>d.min[e]&&(c=h.panEndFriction,d.min[e],n=d.min[e]-He[e]),(n<=0||s<0)&&1<P()?(o=l,s<0&&l>yt.x&&(o=yt.x)):d.min.x!==d.max.x&&(i=a)):(a<d.max[e]&&(c=h.panEndFriction,d.max[e],n=He[e]-d.max[e]),(n<=0||0<s)&&1<P()?(o=l,0<s&&l<yt.x&&(o=yt.x)):d.min.x!==d.max.x&&(i=a))):o=l,"x"!==e)?void(g||ke||x>f.currItem.fitRatio&&(v[e]+=t[e]*c)):(void 0!==o&&(Je(o,!0),ke=o!==yt.x),d.min.x!==d.max.x&&(void 0!==i?v.x=i:ke||(v.x+=t.x*c)),void 0!==o)},Ht=function(){var e,t,n,i,o,a;c&&0!==(e=c.length)&&(S(E,c[0]),O.x=E.x-k.x,O.y=E.y-k.y,u&&1<e?(k.x=E.x,k.y=E.y,!O.x&&!O.y&&Dt(c[1],pt)||(S(pt,c[1]),Ae||(Ae=!0,C("zoomGestureStarted")),e=Tt(E,pt),(t=Gt(e))>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(_e=!0),n=1,i=ot(),o=at(),t<i?h.pinchToClose&&!_e&&ne<=f.currItem.initialZoomLevel?(T(a=1-(i-t)/(i/1.2)),C("onPinchClose",a),Le=!0):t=i-(n=1<(n=(i-t)/i)?1:n)*(i/3):o<t&&(t=o+(n=1<(n=(t-o)/(6*i))?1:n)*i),n<0&&(n=0),Pt(E,pt,wt),Ue.x+=wt.x-Ct.x,Ue.y+=wt.y-Ct.y,S(Ct,wt),v.x=Qe("x",t),v.y=Qe("y",t),De=x<t,x=t,M())):Ze&&(Fe&&(Fe=!1,Math.abs(O.x)>=mt&&(O.x-=c[0].x-ft.x),Math.abs(O.y)>=mt)&&(O.y-=c[0].y-ft.y),k.x=E.x,k.y=E.y,0===O.x&&0===O.y||("v"===Ze&&h.closeOnVerticalDrag&&!At()?(Ue.y+=O.y,v.y+=O.y,a=Ft(),Te=!0,C("onVerticalDrag",a),T(a),M()):(Zt(D(),E.x,E.y),Ee=!0,d=f.currItem.bounds,Ut("x",O)||(Ut("y",O),et(v),M())))))},Yt=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=(1<xt.length?(t=D()-Ie+50,xt[xt.length-2]):(t=D()-be,ft))[e],i.lastFlickOffset[e]=k[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),20<i.lastFlickDist[e]?i.lastFlickSpeed[e]=i.lastFlickOffset[e]/t:i.lastFlickSpeed[e]=0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(v[t]>d.min[t]?i.backAnimDestination[t]=d.min[t]:v[t]<d.max[t]&&(i.backAnimDestination[t]=d.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05)&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,ut("bounceZoomPan"+t,v[t],i.backAnimDestination[t],e||300,p.easing.sine.out,function(e){v[t]=e,M()})))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,v[e]+=i.distanceOffset[e])},panAnimLoop:function(){A.zoomPan&&(A.zoomPan.raf=fe(i.panAnimLoop),i.now=D(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),M(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05)&&i.speedDecelerationRatioAbs.y<.05&&(v.x=Math.round(v.x),v.y=Math.round(v.y),M(),lt("zoomPan"))}};return i},Wt=function(e){return e.calculateSwipeSpeed("y"),d=f.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(st("zoomPan"),e.lastNow=D(),void e.panAnimLoop())},Bt=function(e,t){var n,i,o;g||(vt=y),"swipe"===e&&(e=k.x-ft.x,a=t.lastFlickDist.x<10,dt<e&&(a||20<t.lastFlickOffset.x)?i=-1:e<-dt&&(a||t.lastFlickOffset.x<-20)&&(i=1)),i&&((y+=i)<0?(y=h.loop?P()-1:0,o=!0):y>=P()&&(y=h.loop?0:P()-1,o=!0),o&&!h.loop||(I+=i,Ye-=i,n=!0));var e=b.x*Ye,a=Math.abs(e-R.x),r=n||e>R.x==0<t.lastFlickSpeed.x?(r=0<Math.abs(t.lastFlickSpeed.x)?a/Math.abs(t.lastFlickSpeed.x):333,r=Math.min(r,400),Math.max(r,250)):333;return vt===y&&(n=!1),g=!0,C("mainScrollAnimStart"),ut("mainScroll",R.x,e,r,p.easing.cubic.out,Je,function(){ct(),g=!1,vt=-1,!n&&vt===y||f.updateCurrItem(),C("mainScrollAnimComplete")}),n&&f.updateCurrItem(!0),n},Gt=function(e){return 1/Re*e*ne},Xt=function(){var e=x,t=ot(),n=at();x<t?e=t:n<x&&(e=n);var i,o=ze;return Le&&!De&&!_e&&x<t?f.close():(Le&&(i=function(e){T((1-o)*e+o)}),f.zoomTo(e,0,200,p.easing.cubic.out,i)),!0};U("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,o){se=e+t,ce=e+n,ue=e+i,de=o?e+o:""}(pe=l.pointerEvent)&&l.touch&&(l.touch=!1),pe?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):l.touch?(e("touch","start","move","end","cancel"),o=!0):e("mouse","down","move","up"),ee=ce+" "+ue+" "+de,te=se,pe&&!o&&(o=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),f.likelyTouchDevice=o,i[se]=X,i[ce]=V,i[ue]=K,de&&(i[de]=i[ue]),l.touch&&(te+=" mousedown",ee+=" mousemove mouseup",i.mousedown=i[se],i.mousemove=i[ce],i.mouseup=i[ue]),o||(h.allowPanToNext=!1)}}});function Vt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=p.createEl("pswp__img","img");n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src}function Kt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=h.errorMsg.replace("%url%",e.src),1)}function qt(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&sn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}}var $t,jt,Jt,Qt,en,P,tn=function(a,e,r,t){function l(){lt("initialZoom"),r?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(T(1),e&&(e.style.display="block"),p.addClass(m,"pswp--animated-in"),C("initialZoom"+(r?"OutEnd":"InEnd"))),t&&t(),Qt=!1}$t&&clearTimeout($t),Jt=Qt=!0,a.initialLayout?(s=a.initialLayout,a.initialLayout=null):s=h.getThumbBoundsFn&&h.getThumbBoundsFn(y);var s,c,u,d=r?h.hideAnimationDuration:h.showAnimationDuration;d&&s&&void 0!==s.x?(c=j,u=!f.currItem.src||f.currItem.loadError||h.showHideOpacity,a.miniImg&&(a.miniImg.style.webkitBackfaceVisibility="hidden"),r||(x=s.w/a.w,v.x=s.x,v.y=s.y-xe,f[u?"template":"bg"].style.opacity=.001,M()),st("initialZoom"),r&&!c&&p.removeClass(m,"pswp--animated-in"),u&&(r?p[(c?"remove":"add")+"Class"](m,"pswp--animate_opacity"):setTimeout(function(){p.addClass(m,"pswp--animate_opacity")},30)),$t=setTimeout(function(){var t,n,i,o,e;C("initialZoom"+(r?"Out":"In")),r?(t=s.w/a.w,n={x:v.x,y:v.y},i=x,o=ze,e=function(e){1===e?(x=t,v.x=s.x,v.y=s.y-ve):(x=(t-i)*e+i,v.x=(s.x-n.x)*e+n.x,v.y=(s.y-ve-n.y)*e+n.y),M(),u?m.style.opacity=1-e:T(o-e*o)},c?ut("initialZoom",0,1,d,p.easing.cubic.out,e,l):(e(1),$t=setTimeout(l,d+20))):(x=a.initialZoomLevel,S(v,a.initialPosition),M(),T(1),u?m.style.opacity=1:T(1),$t=setTimeout(l,d+20))},r?25:90)):(C("initialZoom"+(r?"Out":"In")),x=a.initialZoomLevel,S(v,a.initialPosition),M(),m.style.opacity=r?0:1,T(1),d?setTimeout(function(){l()},d):l())},Z={},nn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return jt.length}},an=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},rn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((Z.x-t)/2),i.center.y=Math.round((Z.y-n)/2)+e.vGap.top,i.max.x=t>Z.x?Math.round(Z.x-t):i.center.x,i.max.y=n>Z.y?Math.round(Z.y-n)+e.vGap.top:i.center.y,i.min.x=t>Z.x?0:i.center.x,i.min.y=n>Z.y?e.vGap.top:i.center.y},ln=function(e,t,n){var i,o;return e.src&&!e.loadError?((i=!n)&&(e.vGap||(e.vGap={top:0,bottom:0}),C("parseVerticalMargin",e)),Z.x=t.x,Z.y=t.y-e.vGap.top-e.vGap.bottom,i&&(t=Z.x/e.w,o=Z.y/e.h,e.fitRatio=t<o?t:o,"orig"===(t=h.scaleMode)?n=1:"fit"===t&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds=an())),n?(rn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0):(e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=an(),e.initialPosition=e.bounds.center,e.bounds)},sn=function(e,t,n,i,o,a){t.loadError||i&&(t.imageAppended=!0,cn(t,i,t===f.currItem&&Ve),n.appendChild(i),a)&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},cn=function(e,t,n){var i;e.src&&(t=t||e.container.lastChild,i=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=n+"px"),t.style.width=i+"px",t.style.height=n+"px")};U("Controller",{publicMethods:{lazyLoadItem:function(e){e=H(e);var t=en(e);t&&(!t.loaded&&!t.loading||re)&&(C("gettingData",e,t),t.src)&&Vt(t)},initController:function(){p.extend(h,on,!0),f.items=jt=t,en=f.getItemAt,P=h.getNumItemsFn,h.loop,P()<3&&(h.loop=!1),a("beforeChange",function(e){for(var t=h.preload,n=null===e||0<=e,i=Math.min(t[0],P()),o=Math.min(t[1],P()),a=1;a<=(n?o:i);a++)f.lazyLoadItem(y+a);for(a=1;a<=(n?i:o);a++)f.lazyLoadItem(y-a)}),a("initialLayout",function(){f.currItem.initialLayout=h.getThumbBoundsFn&&h.getThumbBoundsFn(y)}),a("mainScrollAnimComplete",qt),a("initialZoomInEnd",qt),a("destroy",function(){for(var e,t=0;t<jt.length;t++)(e=jt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null})},getItemAt:function(e){return 0<=e&&void 0!==jt[e]&&jt[e]},allowProgressiveImg:function(){return h.forceProgressiveLoading||!o||h.mouseUsed||1200<screen.width},setContent:function(t,n){h.loop&&(n=H(n));var e=f.getItemAt(t.index);e&&(e.container=null);var i,o,a,e=f.getItemAt(n);e?(C("gettingData",n,e),t.index=n,o=(t.item=e).container=p.createEl("pswp__zoom-wrap"),!e.src&&e.html&&(e.html.tagName?o.appendChild(e.html):o.innerHTML=e.html),Kt(e),ln(e,w),!e.src||e.loadError||e.loaded?e.src&&!e.loadError&&((i=p.createEl("pswp__img","img")).style.opacity=1,i.src=e.src,cn(e,i),sn(n,e,o,i,!0)):(e.loadComplete=function(e){if(q){if(t&&t.index===n){if(Kt(e,!0))return e.loadComplete=e.img=null,ln(e,w),$e(e),void(t.index===y&&f.updateCurrZoomItem());e.imageAppended?!Qt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):l.transform&&(g||Qt)?nn.push({item:e,baseDiv:o,img:e.img,index:n,holder:t,clearPlaceholder:!0}):sn(n,e,o,e.img,g||Qt,!0)}e.loadComplete=null,e.img=null,C("imageLoadComplete",n,e)}},p.features.transform&&(a="pswp__img pswp__img--placeholder",a+=e.msrc?"":" pswp__img--placeholder--blank",a=p.createEl(a,e.msrc?"img":""),e.msrc&&(a.src=e.msrc),cn(e,a),o.appendChild(a),e.placeholder=a),e.loading||Vt(e),f.allowProgressiveImg()&&(!Jt&&l.transform?nn.push({item:e,baseDiv:o,img:e.img,index:n,holder:t}):sn(n,e,o,e.img,!0,!0))),Jt||n!==y?$e(e):(Pe=o.style,tn(e,i||e.img)),t.el.innerHTML="",t.el.appendChild(o)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function un(e,t,n){var i=document.createEvent("CustomEvent"),t={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,t),e.target.dispatchEvent(i)}var dn,F,mn={};U("Tap",{publicMethods:{initTap:function(){a("firstTouchStart",f.onTapStart),a("touchRelease",f.onTapRelease),a("destroy",function(){mn={},dn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(dn),dn=null)},onTapRelease:function(e,t){var n,i,o;!t||Ee||Se||rt||(n=t,dn&&(clearTimeout(dn),dn=null,i=n,o=mn,Math.abs(i.x-o.x)<N)&&Math.abs(i.y-o.y)<N?C("doubleTap",n):"mouse"===t.type?un(e,t,"mouse"):"BUTTON"===e.target.tagName.toUpperCase()||p.hasClass(e.target,"pswp__single-tap")?un(e,t):(S(mn,n),dn=setTimeout(function(){un(e,t),dn=null},300)))}}}),U("DesktopZoom",{publicMethods:{initDesktopZoom:function(){ge||(o?a("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(e){F={};var t="wheel mousewheel DOMMouseScroll";a("bindEvents",function(){p.bind(m,t,f.handleMouseWheel)}),a("unbindEvents",function(){F&&p.unbind(m,t,f.handleMouseWheel)}),f.mouseZoomedIn=!1;function n(){f.mouseZoomedIn&&(p.removeClass(m,"pswp--zoomed-in"),f.mouseZoomedIn=!1),x<1?p.addClass(m,"pswp--zoom-allowed"):p.removeClass(m,"pswp--zoom-allowed"),o()}var i,o=function(){i&&(p.removeClass(m,"pswp--dragging"),i=!1)};a("resize",n),a("afterChange",n),a("pointerDown",function(){f.mouseZoomedIn&&(i=!0,p.addClass(m,"pswp--dragging"))}),a("pointerUp",o),e||n()},handleMouseWheel:function(e){if(x<=f.currItem.fitRatio)return h.modal&&(!h.closeOnScroll||rt||s?e.preventDefault():me&&2<Math.abs(e.deltaY)&&(j=!0,f.close())),!0;if(e.stopPropagation(),F.x=0,"deltaX"in e)1===e.deltaMode?(F.x=18*e.deltaX,F.y=18*e.deltaY):(F.x=e.deltaX,F.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(F.x=-.16*e.wheelDeltaX),e.wheelDeltaY?F.y=-.16*e.wheelDeltaY:F.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;F.y=e.detail}it(x,!0);var t=v.x-F.x,n=v.y-F.y;(h.modal||t<=d.min.x&&t>=d.max.x&&n<=d.min.y&&n>=d.max.y)&&e.preventDefault(),f.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:w.x/2+We.x,y:w.y/2+We.y};var t=h.getDoubleTapZoom(!0,f.currItem),n=x===t;f.mouseZoomedIn=!n,f.zoomTo(n?f.currItem.initialZoomLevel:t,e,333),p[(n?"remove":"add")+"Class"](m,"pswp--zoomed-in")}}});function pn(){hn&&clearTimeout(hn),xn&&clearTimeout(xn)}function fn(){var e=Mn(),t={};if(!(e.length<5)){var n,i=e.split("&");for(a=0;a<i.length;a++)!i[a]||(n=i[a].split("=")).length<2||(t[n[0]]=n[1]);if(h.galleryPIDs){for(var o=t.pid,a=t.pid=0;a<jt.length;a++)if(jt[a].pid===o){t.pid=a;break}}else t.pid=parseInt(t.pid,10)-1;t.pid<0&&(t.pid=0)}return t}var hn,yn,xn,gn,vn,wn,n,bn,In,Cn,L,Dn,Tn={history:!0,galleryUID:1},Mn=function(){return L.hash.substring(1)},Sn=function(){var e,t;xn&&clearTimeout(xn),rt||s?xn=setTimeout(Sn,500):(gn?clearTimeout(yn):gn=!0,t=y+1,(e=en(y)).hasOwnProperty("pid")&&(t=e.pid),e=n+"&gid="+h.galleryUID+"&pid="+t,bn||-1===L.hash.indexOf(e)&&(Cn=!0),t=L.href.split("#")[0]+"#"+e,Dn?"#"+e!==window.location.hash&&history[bn?"replaceState":"pushState"]("",document.title,t):bn?L.replace(t):L.hash=e,bn=!0,yn=setTimeout(function(){gn=!1},60))};U("History",{publicMethods:{initHistory:function(){var e,t;p.extend(h,Tn,!0),h.history&&(L=window.location,bn=In=Cn=!1,n=Mn(),Dn="pushState"in history,-1<n.indexOf("gid=")&&(n=(n=n.split("&gid=")[0]).split("?gid=")[0]),a("afterChange",f.updateURL),a("unbindEvents",function(){p.unbind(window,"hashchange",f.onHashChange)}),e=function(){wn=!0,In||(Cn?history.back():n?L.hash=n:Dn?history.pushState("",document.title,L.pathname+L.search):L.hash=""),pn()},a("unbindEvents",function(){j&&e()}),a("destroy",function(){wn||e()}),a("firstUpdate",function(){y=fn().pid}),-1<(t=n.indexOf("pid="))&&"&"===(n=n.substring(0,t)).slice(-1)&&(n=n.slice(0,-1)),setTimeout(function(){q&&p.bind(window,"hashchange",f.onHashChange)},40))},onHashChange:function(){return Mn()===n?(In=!0,void f.close()):void(gn||(vn=!0,f.goTo(fn().pid),vn=!1))},updateURL:function(){pn(),vn||(bn?hn=setTimeout(Sn,800):Sn())}}}),p.extend(f,_)}});
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(o,s){function e(e){if(x)return!0;e=e||window.event,F.timeToIdle&&F.mouseUsed&&!v&&a();for(var t,n,o=(e.target||e.srcElement).getAttribute("class")||"",l=0;l<M.length;l++)(t=M[l]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),x=!0,e=s.features.isOldAndroid?600:30,setTimeout(function(){x=!1},e))}function n(){var e=1===F.getNumItemsFn();e!==E&&(y(m,"ui--one-slide",e),E=e)}function i(){y(g,"share-modal--hidden",R)}function l(){if((R=!R)?(s.removeClass(g,"pswp__share-modal--fade-in"),setTimeout(function(){R&&i()},300)):(i(),setTimeout(function(){R||s.addClass(g,"pswp__share-modal--fade-in")},30)),!R){for(var e,t,n,o,l="",r=0;r<F.shareButtons.length;r++)e=F.shareButtons[r],t=F.getImageURLForShare(e),n=F.getPageURLForShare(e),o=F.getTextForShare(e),l+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",F.parseShareButtonOut&&(l=F.parseShareButtonOut(e,l));g.children[0].innerHTML=l,g.children[0].onclick=P}}function r(e){for(var t=0;t<F.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+F.closeElClasses[t]))return!0}function a(){clearTimeout(k),z=0,v&&K.setIdle(!1)}function u(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(k),k=setTimeout(function(){K.setIdle(!0)},F.timeToIdleOutside))}function c(e){T!==e&&(y(C,"preloader--active",!e),T=e)}function p(e){var t,n=e.vGap;!o.likelyTouchDevice||F.mouseUsed||screen.width>F.fitControlsWidth?(t=F.barsSize,F.captionEl&&"auto"===t.bottom?(h||((h=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),m.insertBefore(h,f),s.addClass(m,"pswp__ui--fit")),F.addCaptionHTMLFn(e,h,!0)?(e=h.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function D(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){l=e[n],r=l.className;for(var o=0;o<M.length;o++)i=M[o],-1<r.indexOf("pswp__"+i.name)&&(F[i.option]?(s.removeClass(l,"pswp__element--disabled"),i.onInit&&i.onInit(l)):s.addClass(l,"pswp__element--disabled"))}}e(m.children);var l,r,i,t=s.getChildByClass(m,"pswp__top-bar");t&&e(t.children)}var d,m,f,h,t,w,g,b,v,_,C,T,I,E,F,x,S,k,K=this,L=!1,O=!0,R=!0,A={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=function(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)},P=function(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),R||l(),1))},z=0,M=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){g=e},onTap:function(){l()}},{name:"button--share",option:"shareEl",onInit:function(e){w=e},onTap:function(){l()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){t=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){d.isFullscreen()?d.exit():d.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){C=e}}];K.init=function(){var t;s.extend(o.options,A,!0),F=o.options,m=s.getChildByClass(o.scrollWrap,"pswp__ui"),(_=o.listen)("onVerticalDrag",function(e){O&&e<.95?K.hideControls():!O&&.95<=e&&K.showControls()}),_("onPinchClose",function(e){O&&e<.9?(K.hideControls(),t=!0):t&&!O&&.9<e&&K.showControls()}),_("zoomGestureEnded",function(){(t=!1)&&!O&&K.showControls()}),_("beforeChange",K.update),_("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(F.getDoubleTapZoom(!1,o.currItem),e,333)}),_("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),_("bindEvents",function(){s.bind(m,"pswpTap click",e),s.bind(o.scrollWrap,"pswpTap",K.onGlobalTap),o.likelyTouchDevice||s.bind(o.scrollWrap,"mouseover",K.onMouseOver)}),_("unbindEvents",function(){R||l(),S&&clearInterval(S),s.unbind(document,"mouseout",u),s.unbind(document,"mousemove",a),s.unbind(m,"pswpTap click",e),s.unbind(o.scrollWrap,"pswpTap",K.onGlobalTap),s.unbind(o.scrollWrap,"mouseover",K.onMouseOver),d&&(s.unbind(document,d.eventK,K.updateFullscreen),d.isFullscreen()&&(F.hideAnimationDuration=0,d.exit()),d=null)}),_("destroy",function(){F.captionEl&&(h&&m.removeChild(h),s.removeClass(f,"pswp__caption--empty")),g&&(g.children[0].onclick=null),s.removeClass(m,"pswp__ui--over-close"),s.addClass(m,"pswp__ui--hidden"),K.setIdle(!1)}),F.showAnimationDuration||s.removeClass(m,"pswp__ui--hidden"),_("initialZoomIn",function(){F.showAnimationDuration&&s.removeClass(m,"pswp__ui--hidden")}),_("initialZoomOut",function(){s.addClass(m,"pswp__ui--hidden")}),_("parseVerticalMargin",p),D(),F.shareEl&&w&&g&&(R=!0),n(),F.timeToIdle&&_("mouseUsed",function(){s.bind(document,"mousemove",a),s.bind(document,"mouseout",u),S=setInterval(function(){2===++z&&K.setIdle(!0)},F.timeToIdle/2)}),F.fullscreenEl&&!s.features.isOldAndroid&&((d=d||K.getFullscreenAPI())?(s.bind(document,d.eventK,K.updateFullscreen),K.updateFullscreen(),s.addClass(o.template,"pswp--supports-fs")):s.removeClass(o.template,"pswp--supports-fs")),F.preloaderEl&&(c(!0),_("beforeChange",function(){clearTimeout(I),I=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||c(!1):c(!0)},F.loadingIndicatorDelay)}),_("imageLoadComplete",function(e,t){o.currItem===t&&c(!0)}))},K.setIdle=function(e){y(m,"ui--idle",v=e)},K.update=function(){L=!(!O||!o.currItem||(K.updateIndexIndicator(),F.captionEl&&(F.addCaptionHTMLFn(o.currItem,f),y(f,"caption--empty",!o.currItem.title)),0)),R||l(),n()},K.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,s.getScrollY())},50),s[(d.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},K.updateIndexIndicator=function(){F.counterEl&&(t.innerHTML=o.getCurrentIndex()+1+F.indexIndicatorSep+F.getNumItemsFn())},K.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!x)if(e.detail&&"mouse"===e.detail.pointerType)r(t)?o.close():s.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?F.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint));else if(F.tapToToggleControls&&(O?K.hideControls():K.showControls()),F.tapToClose&&(s.hasClass(t,"pswp__img")||r(t)))return void o.close()},K.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;y(m,"ui--over-close",r(e))},K.hideControls=function(){s.addClass(m,"pswp__ui--hidden"),O=!1},K.showControls=function(){O=!0,L||K.update(),s.removeClass(m,"pswp__ui--hidden")},K.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},K.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return b=F.closeOnScroll,F.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?o.template[this.enterK]():void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return F.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});
/*jquery.mb.YTPlayer 02-02-2017
 _ jquery.mb.components 
 _ email: matteo@open-lab.com 
 _ Copyright (c) 2001-2017. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */
function onYouTubeIframeAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+r:e}function setFilter(e,r,t){var a=uncamel(r),o=jQuery.browser.mozilla?"":jQuery.CSS.sfx;e[o+"filter"]=e[o+"filter"]||"",t=setUnit(t>jQuery.CSS.filters[r].max?jQuery.CSS.filters[r].max:t,jQuery.CSS.filters[r].unit),e[o+"filter"]+=a+"("+t+") ",delete e[r]}var ytp=ytp||{},getYTPVideoID=function(e){var r,t;return 0<e.indexOf("youtu.be")?r=(t=0<(r=e.substr(e.lastIndexOf("/")+1,e.length)).indexOf("?list=")?r.substr(r.lastIndexOf("="),r.length):null)?r.substr(0,r.lastIndexOf("?")):r:t=-1<e.indexOf("http")?(r=e.match(/[\\?&]v=([^&#]*)/)[1],0<e.indexOf("list=")?e.match(/[\\?&]list=([^&#]*)/)[1]:null):(r=15<e.length?null:e)?null:e,{videoID:r,playlistID:t}},nAgt=(!function(jQuery,ytp){jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"3.0.11",build:"6092",author:"Matteo Bicocchi (pupunzi)",apiKey:"",defaults:{containment:"body",ratio:"auto",videoURL:null,playlistURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:50,addRaster:!1,mask:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnBlur:!0,realfullscreen:!0,mobileFallbackImage:null,gaTrack:!0,optimizeDisplay:!0,anchor:"center,center",onReady:function(e){},onError:function(e,r){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},controlBar:null,loading:null,locationProtocol:"https:",filters:{grayscale:{value:0,unit:"%"},hue_rotate:{value:0,unit:"deg"},invert:{value:0,unit:"%"},opacity:{value:0,unit:"%"},saturate:{value:0,unit:"%"},sepia:{value:0,unit:"%"},brightness:{value:0,unit:"%"},contrast:{value:0,unit:"%"},blur:{value:0,unit:"px"}},buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer),property=(YTPlayer.loop=0,YTPlayer.opt={},YTPlayer.state={},YTPlayer.filters=jQuery.mbYTPlayer.filters,YTPlayer.filtersEnabled=!0,YTPlayer.id=YTPlayer.id||"YTP_"+(new Date).getTime(),$YTPlayer.addClass("mb_YTPlayer"),$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property")),isIframe=(void 0!==property&&void 0!==property.vol&&(property.vol=0===property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),YTPlayer.hasChanged||(YTPlayer.defaultOpt={},jQuery.extend(YTPlayer.defaultOpt,jQuery.mbYTPlayer.defaults,options)),"true"==YTPlayer.opt.loop&&(YTPlayer.opt.loop=9999),YTPlayer.isRetina=window.retina||1<window.devicePixelRatio,function(){var r=!1;try{self.location.href!=top.location.href&&(r=!0)}catch(e){r=!0}return r}),playerID=(YTPlayer.canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe()),YTPlayer.canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","ytp_"+(new Date).getTime()),"mbYTP_"+YTPlayer.id),playerVars=(YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0,YTPlayer.videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).videoID,YTPlayer.playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3",{modestbranding:1,autoplay:0,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations}),isPlayer,overlay,wrapper,playerBox,tag;document.createElement("video").canPlayType&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1),YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.defaultOpt.containment=YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground=YTPlayer.opt.containment.is("body"),YTPlayer.isBackground&&ytp.backgroundIsInited||(isPlayer=YTPlayer.opt.containment.is(jQuery(this)),YTPlayer.canPlayOnMobile=isPlayer&&0===jQuery(this).children().length,YTPlayer.isPlayer=!1,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide(),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay"),YTPlayer.isPlayer&&overlay.on("click",function(){$YTPlayer.YTPTogglePlay()}),wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID),wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({position:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.addClass("visible")}).on("mouseleave",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.removeClass("visible")}),ytp.YTAPIReady?setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100):(jQuery("#YTAPI").remove(),tag=jQuery("<script><\/script>").attr({src:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/iframe_api?v="+jQuery.mbYTPlayer.version,id:"YTAPI"}),jQuery("head").prepend(tag)),jQuery.browser.mobile&&!YTPlayer.canPlayOnMobile?(YTPlayer.opt.mobileFallbackImage&&wrapper.css({backgroundImage:"url("+YTPlayer.opt.mobileFallbackImage+")",backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",opacity:1}),$YTPlayer.remove(),jQuery(document).trigger("YTPUnavailable")):(jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay=void 0===YTPlayer.opt.autoPlay?!!YTPlayer.isBackground:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol||100,jQuery.mbYTPlayer.getDataFromAPI(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){var h;YTPlayer.isInit||(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile?(YTPlayer.opt.containment.outerWidth()>jQuery(window).width()&&(YTPlayer.opt.containment.css({maxWidth:"100%"}),h=.563*YTPlayer.opt.containment.outerWidth(),YTPlayer.opt.containment.css({maxHeight:h})),new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),width:"100%",height:h,playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1})}}})):new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,YTPlayer.isReady||(YTPlayer.isReady=!(YTPlayer.isPlayer&&!YTPlayer.opt.autoPlay),YTPlayer.playerEl=YTPlayer.player.getIframe(),jQuery(YTPlayer.playerEl).unselectable(),$YTPlayer.optimizeDisplay(),jQuery(window).off("resize.YTP_"+YTPlayer.id).on("resize.YTP_"+YTPlayer.id,function(){$YTPlayer.optimizeDisplay()}),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState(),eventType;if(YTPlayer.preventTrigger)YTPlayer.preventTrigger=!1;else{switch(YTPlayer.state=state,state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPPlay",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 5:eventType="YTPCued"}var YTPEvent=jQuery.Event(eventType);YTPEvent.time=YTPlayer.currentTime,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPEvent)}}},onPlaybackQualityChange:function(e){var e=e.target.getPlaybackQuality(),r=jQuery.Event("YTPQualityChange");r.quality=e,jQuery(YTPlayer).trigger(r)},onError:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList)&&jQuery(YTPlayer).playNext(),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}}))}))}),$YTPlayer.off("YTPTime.mask"),jQuery.mbYTPlayer.applyMask(YTPlayer)))})},getDataFromAPI:function(a){var e;a.videoData=jQuery.mbStorage.get("YTPlayer_data_"+a.videoID),jQuery(a).off("YTPData.YTPlayer").on("YTPData.YTPlayer",function(){var e;a.hasData&&a.isPlayer&&!a.opt.autoPlay&&(e=a.videoData.thumb_max||a.videoData.thumb_high||a.videoData.thumb_medium,a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+e+") center center",backgroundSize:"cover"}),a.opt.backgroundUrl=e)}),a.videoData?(setTimeout(function(){a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio,a.dataReceived=!0,jQuery(a).trigger("YTPChanged");var e,r=jQuery.Event("YTPData");for(e in r.prop={},a.videoData)r.prop[e]=a.videoData[e];jQuery(a).trigger(r)},500),a.hasData=!0):jQuery.mbYTPlayer.apiKey?jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//www.googleapis.com/youtube/v3/videos?id="+a.videoID+"&key="+jQuery.mbYTPlayer.apiKey+"&part=snippet",function(e){a.dataReceived=!0,jQuery(a).trigger("YTPChanged"),e=e.items[0].snippet,a.videoData={},a.videoData.id=a.videoID,a.videoData.channelTitle=e.channelTitle,a.videoData.title=e.title,a.videoData.description=e.description.length<400?e.description:e.description.substring(0,400)+" ...",a.videoData.aspectratio="auto"==a.opt.ratio?"16/9":a.opt.ratio,a.opt.ratio=a.videoData.aspectratio,a.videoData.thumb_max=e.thumbnails.maxres?e.thumbnails.maxres.url:null,a.videoData.thumb_high=e.thumbnails.high?e.thumbnails.high.url:null,a.videoData.thumb_medium=e.thumbnails.medium?e.thumbnails.medium.url:null,jQuery.mbStorage.set("YTPlayer_data_"+a.videoID,a.videoData),a.hasData=!0;var r,t=jQuery.Event("YTPData");for(r in t.prop={},a.videoData)t.prop[r]=a.videoData[r];jQuery(a).trigger(t)}):(setTimeout(function(){jQuery(a).trigger("YTPChanged")},50),a.isPlayer&&!a.opt.autoPlay&&(e=jQuery.mbYTPlayer.locationProtocol+"//i.ytimg.com/vi/"+a.videoID+"/hqdefault.jpg",a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+e+") center center",backgroundSize:"cover"}),a.opt.backgroundUrl=e),a.videoData=null,a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio),!a.isPlayer||a.opt.autoPlay||jQuery.browser.mobile||(a.loading=jQuery("<div/>").addClass("loading").html("Loading").hide(),jQuery(a).append(a.loading),a.loading.fadeIn())},removeStoredData:function(){jQuery.mbStorage.remove()},getVideoData:function(){return this.get(0).videoData},getVideoID:function(){return this.get(0).videoID||!1},setVideoQuality:function(e){this.get(0).player.setPlaybackQuality(e)},playlist:function(e,r,t,a){var o=this.get(0);return o.isPlayList=!0,r&&(e=jQuery.shuffle(e)),o.videoID||(o.videos=e,o.videoCounter=0,o.videoLength=e.length,jQuery(o).data("property",e[0]),jQuery(o).mb_YTPlayer()),"function"==typeof t&&jQuery(o).one("YTPChanged",function(){t(o)}),jQuery(o).on("YTPEnd",function(){a=void 0===a||a,jQuery(o).playNext(a)}),this},playNext:function(e){var r=this.get(0);return r.checkForStartAt&&(clearTimeout(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter++,r.videoCounter>=r.videoLength&&e&&(r.videoCounter=0),r.videoCounter<r.videoLength?jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]):r.videoCounter--,this},playPrev:function(){var e=this.get(0);return e.checkForStartAt&&(clearInterval(e.checkForStartAt),clearInterval(e.getState)),e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e).YTPChangeMovie(e.videos[e.videoCounter]),this},playIndex:function(e){var r=this.get(0);return--e,r.checkForStartAt&&(clearInterval(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter=e,r.videoCounter>=r.videoLength-1&&(r.videoCounter=r.videoLength-1),jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]),this},changeMovie:function(e){var r=this.get(0);r.opt.startAt=0,r.opt.stopAt=0,r.opt.mask=!1,r.opt.mute=!0,r.hasData=!1,r.hasChanged=!0,r.player.loopTime=void 0,e&&jQuery.extend(r.opt,e),r.videoID=getYTPVideoID(r.opt.videoURL).videoID,"true"==r.opt.loop&&(r.opt.loop=9999),jQuery(r.playerEl).CSSAnimate({opacity:0},200,function(){var e=jQuery.Event("YTPChangeMovie");e.time=r.currentTime,e.videoId=r.videoID,jQuery(r).trigger(e),jQuery(r).YTPGetPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+r.videoID),1,r.opt.quality),jQuery(r).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(r),jQuery.mbYTPlayer.getDataFromAPI(r)}),jQuery.mbYTPlayer.applyMask(r)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);return ytp.YTAPIReady=!0,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null,e.isReady=!1,e.wrapper.remove(),jQuery("#controlBar_"+e.id).remove(),clearInterval(e.checkForStartAt),clearInterval(e.getState),this},fullscreen:function(real){function hideMouse(){YTPlayer.overlay.css({cursor:"none"})}function RunPrefixMethod(e,r){for(var t,a,o=["webkit","moz","ms","o",""],i=0;i<o.length&&!e[t];){if(t=r,""==o[i]&&(t=t.substr(0,1).toLowerCase()+t.substr(1)),"undefined"!=(a=typeof e[t=o[i]+t]))return o=[o[i]],"function"==a?e[t]():e[t];i++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0),controls=(void 0===real&&(real=YTPlayer.opt.realfullscreen),real=eval(real),jQuery("#controlBar_"+YTPlayer.id)),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper,fullscreenchange;return real&&(fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange",jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen")?(jQuery(YTPlayer).YTPSetVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).YTPSetVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("YTPFullscreen"),videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})),YTPlayer.isAlone?(jQuery(document).off("mousemove.YTPlayer"),clearTimeout(YTPlayer.hideCursor),YTPlayer.overlay.css({cursor:"auto"}),real?cancelFullscreen():(videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(jQuery(document).on("mousemove.YTPlayer",function(e){YTPlayer.overlay.css({cursor:"auto"}),clearTimeout(YTPlayer.hideCursor),jQuery(e.target).parents().is(".mb_YTPBar")||(YTPlayer.hideCursor=setTimeout(hideMouse,3e3))}),hideMouse(),real?(videoWrapper.css({opacity:0}),videoWrapper.addClass("YTPFullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({opacity:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0),this},toggleLoops:function(){var e=this.get(0),r=e.opt;return 1==r.loop?r.loop=0:(r.startAt?e.player.seekTo(r.startAt):e.player.playVideo(),r.loop=1),this},play:function(){var e=this.get(0);return e.isReady&&(e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},2e3),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3),jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),e.state=1,jQuery(e).css("background-image","none")),this},togglePlay:function(e){var r=this.get(0);return 1==r.state?this.YTPPause():this.YTPPlay(),"function"==typeof e&&e(r.state),this},stop:function(){var e=this.get(0);return jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo(),this},pause:function(){var e=this.get(0);return e.player.pauseVideo(),e.state=2,this},seekTo:function(e){return this.get(0).player.seekTo(e,!0),this},setVolume:function(e){var r=this.get(0);return e||r.opt.vol||0!=r.player.getVolume()?!e&&0<r.player.getVolume()||e&&r.opt.vol==e?r.isMute?jQuery(r).YTPUnmute():jQuery(r).YTPMute():(r.opt.vol=e,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(e)):jQuery(r).YTPUnmute(),this},toggleVolume:function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).YTPUnmute(),!0):(jQuery(e).YTPMute(),!1)},mute:function(){var e,r=this.get(0);if(!r.isMute)return r.player.mute(),r.isMute=!0,r.player.setVolume(0),r.volumeBar&&r.volumeBar.length&&10<r.volumeBar.width()&&r.volumeBar.updateSliderVal(0),jQuery("#controlBar_"+r.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.unmute),jQuery(r).addClass("isMuted"),r.volumeBar&&r.volumeBar.length&&r.volumeBar.addClass("muted"),(e=jQuery.Event("YTPMuted")).time=r.currentTime,r.canTrigger&&jQuery(r).trigger(e),this},unmute:function(){var e,r=this.get(0);if(r.isMute)return r.player.unMute(),r.isMute=!1,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(10<r.opt.vol?r.opt.vol:10),jQuery("#controlBar_"+r.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.mute),jQuery(r).removeClass("isMuted"),r.volumeBar&&r.volumeBar.length&&r.volumeBar.removeClass("muted"),(e=jQuery.Event("YTPUnmuted")).time=r.currentTime,r.canTrigger&&jQuery(r).trigger(e),this},applyFilter:function(e,r){return this.each(function(){this.filters[e].value=r,this.filtersEnabled&&jQuery(this).YTPEnableFilters()})},applyFilters:function(t){return this.each(function(){var e=this;if(e.isReady){for(var r in t)jQuery(e).YTPApplyFilter(r,t[r]);jQuery(e).trigger("YTPFiltersApplied")}else jQuery(e).on("YTPReady",function(){jQuery(e).YTPApplyFilters(t)})})},toggleFilter:function(e,r){return this.each(function(){this.filters[e].value?this.filters[e].value=0:this.filters[e].value=r,this.filtersEnabled&&jQuery(this).YTPEnableFilters()})},toggleFilters:function(r){return this.each(function(){var e=this;e.filtersEnabled?(jQuery(e).trigger("YTPDisableFilters"),jQuery(e).YTPDisableFilters()):(jQuery(e).YTPEnableFilters(),jQuery(e).trigger("YTPEnableFilters")),"function"==typeof r&&r(e.filtersEnabled)})},disableFilters:function(){return this.each(function(){var e=jQuery(this.playerEl);e.css("-webkit-filter",""),e.css("filter",""),this.filtersEnabled=!1})},enableFilters:function(){return this.each(function(){var e,r=this,t=jQuery(r.playerEl),a="";for(e in r.filters)r.filters[e].value&&(a+=e.replace("_","-")+"("+r.filters[e].value+r.filters[e].unit+") ");t.css("-webkit-filter",a),t.css("filter",a),r.filtersEnabled=!0})},removeFilter:function(r,t){return this.each(function(){if("function"==typeof r&&(t=r,r=null),r)jQuery(this).YTPApplyFilter(r,0),"function"==typeof t&&t(r);else for(var e in this.filters)jQuery(this).YTPApplyFilter(e,0),"function"==typeof t&&t(e)})},getFilters:function(){return this.get(0).filters},addMask:function(e){var r=this.get(0),t=r.overlay,a=(e=e||r.actualMask,jQuery("<img/>").attr("src",e).on("load",function(){t.CSSAnimate({opacity:0},500,function(){r.hasMask=!0,a.remove(),t.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"}),t.CSSAnimate({opacity:1},500)})}));return this},removeMask:function(){var e=this.get(0),r=e.overlay;return r.CSSAnimate({opacity:0},500,function(){e.hasMask=!1,r.css({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""}),r.CSSAnimate({opacity:1},500)}),this},applyMask:function(t){var a=jQuery(t);if(a.off("YTPTime.mask"),t.opt.mask)if("string"==typeof t.opt.mask)a.YTPAddMask(t.opt.mask),t.actualMask=t.opt.mask;else if("object"==typeof t.opt.mask){for(var e in t.opt.mask)t.opt.mask[e]&&jQuery("<img/>").attr("src",t.opt.mask[e]);t.opt.mask[0]&&a.YTPAddMask(t.opt.mask[0]),a.on("YTPTime.mask",function(e){for(var r in t.opt.mask)e.time==r&&(t.opt.mask[r]?(a.YTPAddMask(t.opt.mask[r]),t.actualMask=t.opt.mask[r]):a.YTPRemoveMask())})}},toggleMask:function(){var e=this.get(0),r=$(e);return e.hasMask?r.YTPRemoveMask():r.YTPAddMask(),this},manageProgress:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPProgress"),a=r.find(".mb_YTPLoaded"),r=r.find(".mb_YTPseekbar"),t=t.outerWidth(),o=Math.floor(e.player.getCurrentTime()),i=Math.floor(e.player.getDuration()),t=o*t/i,e=100*e.player.getVideoLoadedFraction();return a.css({left:0,width:e+"%"}),r.css({left:0,width:t}),{totalTime:i,currentTime:o}},buildControls:function(YTPlayer){var data=YTPlayer.opt,buttonBar,playpause,MuteUnmute,volumeBar,idx,vURL,movieUrl,onlyVideo,progressBar,loadedBar,timeBar;data.showYTLogo=data.showYTLogo||data.printUrl,jQuery("#controlBar_"+YTPlayer.id).length||(YTPlayer.controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({whiteSpace:"noWrap",position:YTPlayer.isBackground?"fixed":"absolute",zIndex:YTPlayer.isBackground?1e4:1e3}).hide(),buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).YTPPause():jQuery(YTPlayer).YTPPlay()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).YTPUnmute():jQuery(YTPlayer).YTPMute()}),volumeBar=jQuery("<div/>").addClass("mb_YTPVolumeBar").css({display:"inline-block"}),YTPlayer.volumeBar=volumeBar,idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL||"",vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL),movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).YTPFullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({width:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0});e=Math.floor(YTPlayer.player.getDuration());YTPlayer.goto=timeBar.outerWidth()*e/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer.goto),!0),YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute"),progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(volumeBar).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),YTPlayer.controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(YTPlayer.controlBar):(YTPlayer.controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(YTPlayer.controlBar)),volumeBar.simpleSlider({initialval:YTPlayer.opt.vol,scale:100,orientation:"h",callback:function(e){0==e.value?jQuery(YTPlayer).YTPMute():jQuery(YTPlayer).YTPUnmute(),YTPlayer.player.setVolume(e.value),YTPlayer.isMute||(YTPlayer.opt.vol=e.value)}}))},checkForState:function(YTPlayer){var interval=YTPlayer.opt.showControls?100:400;return clearInterval(YTPlayer.getState),jQuery.contains(document,YTPlayer)?(jQuery.mbYTPlayer.checkForStart(YTPlayer),void(YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).YTPManageProgress(),$YTPlayer=jQuery(YTPlayer),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt||1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0,YTPEvent,stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPEnd;if(YTPlayer.currentTime!=prog.currentTime&&(YTPEvent=jQuery.Event("YTPTime"),YTPEvent.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(YTPEvent)),YTPlayer.currentTime=prog.currentTime,YTPlayer.totalTime=YTPlayer.player.getDuration(),0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),YTPlayer.opt.showControls&&(prog.totalTime?YTPlayer.controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):YTPlayer.controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.YTPPlay()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.YTPPause())),YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()<=400&&!YTPlayer.isCompact?(YTPlayer.controlBar.addClass("compact"),YTPlayer.isCompact=!0,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)):YTPlayer.controlBar.length&&400<YTPlayer.controlBar.outerWidth()&&YTPlayer.isCompact&&(YTPlayer.controlBar.removeClass("compact"),YTPlayer.isCompact=!1,!YTPlayer.isMute)&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-1.5)<YTPlayer.player.getCurrentTime()||0<stopAt&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)&&!YTPlayer.isEnded){if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},1e3),YTPlayer.isPlayList){if(!data.loop||0<data.loop&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,clearInterval(YTPlayer.getState),YTPEnd=jQuery.Event("YTPEnd"),YTPEnd.time=YTPlayer.currentTime,void jQuery(YTPlayer).trigger(YTPEnd)}else if(!data.loop||0<data.loop&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),void YTPlayer.wrapper.CSSAnimate({opacity:0},500,function(){YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);var e=jQuery.Event("YTPEnd");e.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),YTPlayer.isBackground||YTPlayer.opt.containment.css({background:"rgba(0,0,0,0.5) url("+YTPlayer.opt.backgroundUrl+") center center",backgroundSize:"cover"})});YTPlayer.player.loopTime=YTPlayer.player.loopTime?++YTPlayer.player.loopTime:1,startAt=startAt||1,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),YTPlayer.player.seekTo(startAt,!0),$YTPlayer.YTPPlay()}},interval))):(jQuery(YTPlayer).YTPPlayerDestroy(),clearInterval(YTPlayer.getState),void clearInterval(YTPlayer.checkForStartAt))},getTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.currentTime)},getTotalTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.totalTime)},checkForStart:function(r){var e,t,a=jQuery(r);jQuery.contains(document,r)?(r.preventTrigger=!0,r.state=2,jQuery(r).YTPPause(),jQuery(r).muteYTPVolume(),jQuery("#controlBar_"+r.id).remove(),r.controlBar=!1,r.opt.showControls&&jQuery.mbYTPlayer.buildControls(r),r.opt.addRaster?(e="dot"==r.opt.addRaster?"raster-dot":"raster",r.overlay.addClass(r.isRetina?e+" retina":e)):r.overlay.removeClass(function(e,r){var r=r.split(" "),t=[];return jQuery.each(r,function(e,r){/raster.*/.test(r)&&t.push(r)}),t.push("retina"),t.join(" ")}),t=r.opt.startAt||1,r.player.playVideo(),r.player.seekTo(t,!0),r.checkForStartAt=setInterval(function(){jQuery(r).YTPMute();var e=r.player.getVideoLoadedFraction()>=t/r.player.getDuration();0<r.player.getDuration()&&r.player.getCurrentTime()>=t&&e?(clearInterval(r.checkForStartAt),"function"==typeof r.opt.onReady&&r.opt.onReady(r),r.isReady=!0,(e=jQuery.Event("YTPReady")).time=r.currentTime,jQuery(r).trigger(e),r.preventTrigger=!0,r.state=2,jQuery(r).YTPPause(),r.opt.mute||jQuery(r).YTPUnmute(),r.canTrigger=!0,r.opt.autoPlay?((e=jQuery.Event("YTPStart")).time=r.currentTime,jQuery(r).trigger(e),a.css("background-image","none"),jQuery(r.playerEl).CSSAnimate({opacity:1},1e3),a.YTPPlay(),r.wrapper.CSSAnimate({opacity:r.isAlone?1:r.opt.opacity},1e3),jQuery.browser.safari&&(r.safariPlay=setInterval(function(){1!=r.state?a.YTPPlay():clearInterval(r.safariPlay)},10)),a.on("YTPReady",function(){a.YTPPlay()})):(r.player.pauseVideo(),r.isPlayer||(jQuery(r.playerEl).CSSAnimate({opacity:1},500),r.wrapper.CSSAnimate({opacity:r.isAlone?1:r.opt.opacity},500)),r.controlBar.length&&r.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play)),r.isPlayer&&!r.opt.autoPlay&&r.loading&&r.loading.length&&(r.loading.html("Ready"),setTimeout(function(){r.loading.fadeOut()},100)),r.controlBar&&r.controlBar.length&&r.controlBar.slideDown(1e3)):jQuery.browser.safari&&(r.player.playVideo(),0<=t)&&r.player.seekTo(t,!0)},1)):jQuery(r).YTPPlayerDestroy()},setAnchor:function(e){this.optimizeDisplay(e)},getAnchor:function(){return this.get(0).opt.anchor},formatTime:function(e){var r=Math.floor(e/60),e=Math.floor(e-60*r);return(r<=9?"0"+r:r)+" : "+(e<=9?"0"+e:e)}},jQuery.fn.optimizeDisplay=function(e){var r=this.get(0),t=jQuery(r.playerEl),a={},o=(r.opt.anchor=e||r.opt.anchor,r.opt.anchor="undefined "!=typeof r.opt.anchor?r.opt.anchor:"center,center",r.opt.anchor.split(","));if(r.opt.optimizeDisplay){var i,e=r.isPlayer?0:80,n={},l=r.wrapper,s=(n.width=l.outerWidth(),n.height=l.outerHeight()+e,a.width=n.width,a.height="16/9"==r.opt.ratio?Math.ceil(a.width*(9/16)):Math.ceil(.75*a.width),a.marginTop=-(a.height-n.height)/2,a.marginLeft=0,a.height<n.height);for(i in s&&(a.height=n.height,a.width="16/9"==r.opt.ratio?Math.floor(a.height*(16/9)):Math.floor(a.height*(4/3)),a.marginTop=0,a.marginLeft=-(a.width-n.width)/2),o)if(o.hasOwnProperty(i))switch(o[i].replace(/ /g,"")){case"top":a.marginTop=s?-(a.height-n.height)/2:0;break;case"bottom":a.marginTop=s?0:-(a.height-n.height);break;case"left":a.marginLeft=0;break;case"right":a.marginLeft=s?-(a.width-n.width):0;break;default:n.width<a.width&&(a.marginLeft=-(a.width-n.width)/2)}}else a.width="100%",a.height="100%",a.marginTop=0,a.marginLeft=0;t.css({width:a.width,height:a.height,marginTop:a.marginTop,marginLeft:a.marginLeft,maxWidth:"initial"})},jQuery.shuffle=function(e){for(var r=e.slice(),t=r.length,a=t;a--;){var o=parseInt(Math.random()*t),i=r[a];r[a]=r[o],r[o]=i}return r},jQuery.fn.unselectable=function(){return this.each(function(){jQuery(this).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).attr("unselectable","on")})},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPGetPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.YTPGetVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.YTPChangeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.YTPPlayerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.YTPPlay=jQuery.mbYTPlayer.play,jQuery.fn.YTPTogglePlay=jQuery.mbYTPlayer.togglePlay,jQuery.fn.YTPStop=jQuery.mbYTPlayer.stop,jQuery.fn.YTPPause=jQuery.mbYTPlayer.pause,jQuery.fn.YTPSeekTo=jQuery.mbYTPlayer.seekTo,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.playlist,jQuery.fn.YTPPlayNext=jQuery.mbYTPlayer.playNext,jQuery.fn.YTPPlayPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.YTPPlayIndex=jQuery.mbYTPlayer.playIndex,jQuery.fn.YTPMute=jQuery.mbYTPlayer.mute,jQuery.fn.YTPUnmute=jQuery.mbYTPlayer.unmute,jQuery.fn.YTPToggleVolume=jQuery.mbYTPlayer.toggleVolume,jQuery.fn.YTPSetVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.YTPGetVideoData=jQuery.mbYTPlayer.getVideoData,jQuery.fn.YTPFullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.YTPToggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.YTPSetVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.YTPManageProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPApplyFilter=jQuery.mbYTPlayer.applyFilter,jQuery.fn.YTPApplyFilters=jQuery.mbYTPlayer.applyFilters,jQuery.fn.YTPToggleFilter=jQuery.mbYTPlayer.toggleFilter,jQuery.fn.YTPToggleFilters=jQuery.mbYTPlayer.toggleFilters,jQuery.fn.YTPRemoveFilter=jQuery.mbYTPlayer.removeFilter,jQuery.fn.YTPDisableFilters=jQuery.mbYTPlayer.disableFilters,jQuery.fn.YTPEnableFilters=jQuery.mbYTPlayer.enableFilters,jQuery.fn.YTPGetFilters=jQuery.mbYTPlayer.getFilters,jQuery.fn.YTPGetTime=jQuery.mbYTPlayer.getTime,jQuery.fn.YTPGetTotalTime=jQuery.mbYTPlayer.getTotalTime,jQuery.fn.YTPAddMask=jQuery.mbYTPlayer.addMask,jQuery.fn.YTPRemoveMask=jQuery.mbYTPlayer.removeMask,jQuery.fn.YTPToggleMask=jQuery.mbYTPlayer.toggleMask,jQuery.fn.YTPSetAnchor=jQuery.mbYTPlayer.setAnchor,jQuery.fn.YTPGetAnchor=jQuery.mbYTPlayer.getAnchor,jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.play,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stop,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pause,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekTo,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.mute,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmute,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPGetDataFromFeed=jQuery.mbYTPlayer.getVideoData}(jQuery,ytp),jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var r,t=jQuery.extend(!0,{},e);for(r in jQuery.browser.webkit||jQuery.browser.opera?jQuery.CSS.sfx="-webkit-":jQuery.browser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.browser.msie&&(jQuery.CSS.sfx="-ms-"),t){"transform"===r&&(t[jQuery.CSS.sfx+"transform"]=t[r],delete t[r]),"transform-origin"===r&&(t[jQuery.CSS.sfx+"transform-origin"]=e[r],delete t[r]),"filter"!==r||jQuery.browser.mozilla||(t[jQuery.CSS.sfx+"filter"]=e[r],delete t[r]),"blur"===r&&setFilter(t,"blur",e[r]),"brightness"===r&&setFilter(t,"brightness",e[r]),"contrast"===r&&setFilter(t,"contrast",e[r]),"grayscale"===r&&setFilter(t,"grayscale",e[r]),"hueRotate"===r&&setFilter(t,"hueRotate",e[r]),"invert"===r&&setFilter(t,"invert",e[r]),"saturate"===r&&setFilter(t,"saturate",e[r]),"sepia"===r&&setFilter(t,"sepia",e[r]);var a="";"x"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateX("+setUnit(e[r],"px")+")",delete t[r]),"y"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateY("+setUnit(e[r],"px")+")",delete t[r]),"z"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateZ("+setUnit(e[r],"px")+")",delete t[r]),"rotate"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotate("+setUnit(e[r],"deg")+")",delete t[r]),"rotateX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateX("+setUnit(e[r],"deg")+")",delete t[r]),"rotateY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateY("+setUnit(e[r],"deg")+")",delete t[r]),"rotateZ"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateZ("+setUnit(e[r],"deg")+")",delete t[r]),"scale"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scale("+setUnit(e[r],"")+")",delete t[r]),"scaleX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleX("+setUnit(e[r],"")+")",delete t[r]),"scaleY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleY("+setUnit(e[r],"")+")",delete t[r]),"scaleZ"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleZ("+setUnit(e[r],"")+")",delete t[r]),"skew"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skew("+setUnit(e[r],"deg")+")",delete t[r]),"skewX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skewX("+setUnit(e[r],"deg")+")",delete t[r]),"skewY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skewY("+setUnit(e[r],"deg")+")",delete t[r]),"perspective"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" perspective("+setUnit(e[r],"px")+")",delete t[r])}return t},getProp:function(e){var r,t=[];for(r in e)t.indexOf(r)<0&&t.push(uncamel(r));return t.join(",")},animate:function(s,u,y,c,p){return this.each(function(){function e(){t.called=!0,t.CSSAIsRunning=!1,a.off(jQuery.CSS.transitionEnd+"."+t.id),clearTimeout(t.timeout),a.css(jQuery.CSS.sfx+"transition",""),"function"==typeof p&&p.apply(t),"function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null)}var r,t=this,a=jQuery(this),o=(t.id=t.id||"CSSA_"+(new Date).getTime(),{type:"noEvent"});if(t.CSSAIsRunning&&t.eventType==o.type&&!jQuery.browser.msie&&jQuery.browser.version<=9)t.CSSqueue=function(){a.CSSAnimate(s,u,y,c,p)};else if(t.CSSqueue=null,t.eventType=o.type,0!==a.length&&s){if(s=jQuery.normalizeCss(s),t.CSSAIsRunning=!0,"function"==typeof u&&(p=u,u=jQuery.fx.speeds._default),"function"==typeof y&&(c=y,y=0),"string"==typeof y&&(p=y,y=0),"function"==typeof c&&(p=c,c="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof u)for(var i in jQuery.fx.speeds){if(u==i){u=jQuery.fx.speeds[i];break}u=jQuery.fx.speeds._default}if(u=u||jQuery.fx.speeds._default,"string"==typeof p&&(c=p,p=null),jQuery.support.CSStransition){var o={default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},o=(o[c]&&(c=o[c]),a.off(jQuery.CSS.transitionEnd+"."+t.id),jQuery.CSS.getProp(s)),n={};jQuery.extend(n,s),n[jQuery.CSS.sfx+"transition-property"]=o,n[jQuery.CSS.sfx+"transition-duration"]=u+"ms",n[jQuery.CSS.sfx+"transition-delay"]=y+"ms",n[jQuery.CSS.sfx+"transition-timing-function"]=c,setTimeout(function(){a.one(jQuery.CSS.transitionEnd+"."+t.id,e),a.css(n)},1),t.timeout=setTimeout(function(){return t.called||!p?(t.called=!1,void(t.CSSAIsRunning=!1)):(a.css(jQuery.CSS.sfx+"transition",""),p.apply(t),t.CSSAIsRunning=!1,void("function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null)))},u+y+10)}else{for(var l in s)"transform"===l&&delete s[l],"filter"===l&&delete s[l],"transform-origin"===l&&delete s[l],"auto"===s[l]&&delete s[l],"x"===l&&(r=s[l],s["left"]=r,delete s[l]),"y"===l&&(r=s[l],s["top"]=r,delete s[l]),"-ms-transform"!==l&&"-ms-filter"!==l||delete s[l];a.delay(y).animate(s,u,p)}}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(t){return this.each(function(){var e=jQuery(this),r=jQuery.normalizeCss(t);e.css(r)})},navigator.userAgent),nameOffset,verOffset,ix,start,end,nAgt=(jQuery.browser||(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,end=start+4,jQuery.browser.fullVersion=nAgt.substring(start,end)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase())&&(jQuery.browser.name=navigator.appName),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion),jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),navigator.userAgent),nameOffset,verOffset,ix,start,end;jQuery.browser||(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,end=start+4,jQuery.browser.fullVersion=nAgt.substring(start,end)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase())&&(jQuery.browser.name=navigator.appName),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion),jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),function(o){o.simpleSlider={defaults:{initialval:0,scale:100,orientation:"h",readonly:!1,callback:!1},events:{start:o.browser.mobile?"touchstart":"mousedown",end:o.browser.mobile?"touchend":"mouseup",move:o.browser.mobile?"touchmove":"mousemove"},init:function(a){return this.each(function(){var r=this,t=o(r),e=(t.addClass("simpleSlider"),r.opt={},o.extend(r.opt,o.simpleSlider.defaults,a),o.extend(r.opt,t.data()),"h"==r.opt.orientation?"horizontal":"vertical"),e=o("<div/>").addClass("level").addClass(e);t.prepend(e),r.level=e,t.css({cursor:"default"}),"auto"==r.opt.scale&&(r.opt.scale=o(r).outerWidth()),t.updateSliderVal(),r.opt.readonly||(t.on(o.simpleSlider.events.start,function(e){o.browser.mobile&&(e=e.changedTouches[0]),r.canSlide=!0,t.updateSliderVal(e),"h"==r.opt.orientation?t.css({cursor:"col-resize"}):t.css({cursor:"row-resize"}),e.preventDefault(),e.stopPropagation()}),o(document).on(o.simpleSlider.events.move,function(e){o.browser.mobile&&(e=e.changedTouches[0]),r.canSlide&&(o(document).css({cursor:"default"}),t.updateSliderVal(e),e.preventDefault(),e.stopPropagation())}).on(o.simpleSlider.events.end,function(){o(document).css({cursor:"auto"}),r.canSlide=!1,t.css({cursor:"auto"})}))})},updateSliderVal:function(e){var r,t,a=this.get(0);a.opt&&(a.opt.initialval="number"==typeof a.opt.initialval?a.opt.initialval:a.opt.initialval(a),r=o(a).outerWidth(),t=o(a).outerHeight(),a.x="object"==typeof e?e.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof e?e*r/a.opt.scale:a.opt.initialval*r/a.opt.scale,a.y="object"==typeof e?e.clientY+document.body.scrollTop-this.offset().top:"number"==typeof e?(a.opt.scale-a.opt.initialval-e)*t/a.opt.scale:a.opt.initialval*t/a.opt.scale,a.y=this.outerHeight()-a.y,a.scaleX=a.x*a.opt.scale/r,a.scaleY=a.y*a.opt.scale/t,a.outOfRangeX=a.scaleX>a.opt.scale?a.scaleX-a.opt.scale:a.scaleX<0?a.scaleX:0,a.outOfRangeY=a.scaleY>a.opt.scale?a.scaleY-a.opt.scale:a.scaleY<0?a.scaleY:0,a.outOfRange="h"==a.opt.orientation?a.outOfRangeX:a.outOfRangeY,a.value=void 0!==e?"h"==a.opt.orientation?a.x>=this.outerWidth()?a.opt.scale:a.x<=0?0:a.scaleX:a.y>=this.outerHeight()?a.opt.scale:a.y<=0?0:a.scaleY:"h"==a.opt.orientation?a.scaleX:a.scaleY,"h"==a.opt.orientation?a.level.width(Math.floor(100*a.x/r)+"%"):a.level.height(Math.floor(100*a.y/t)),"function"==typeof a.opt.callback)&&a.opt.callback(a)}},o.fn.simpleSlider=o.simpleSlider.init,o.fn.updateSliderVal=o.simpleSlider.updateSliderVal}(jQuery),function(r){r.mbCookie={set:function(e,r,t,a){r=JSON.stringify(r),t=t||7,a=a?"; domain="+a:"";var o=new Date;o.setTime(o.getTime()+864e5*t),t="; expires="+o.toGMTString(),document.cookie=e+"="+r+t+"; path=/"+a},get:function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(r))return JSON.parse(o.substring(r.length,o.length))}return null},remove:function(e){r.mbCookie.set(e,"",-1)}},r.mbStorage={set:function(e,r){r=JSON.stringify(r),localStorage.setItem(e,r)},get:function(e){return localStorage[e]?JSON.parse(localStorage[e]):null},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);
/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).store=e()}(function(){var define,module,exports;return function r(o,i,u){function a(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return a(t||e)},t,t.exports,r,o,i,u)}return i[n].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=e("../storages/all"),e=[e("../plugins/json2")];t.exports=r.createStore(o,e)},{"../plugins/json2":2,"../src/store-engine":4,"../storages/all":6}],2:[function(e,t,n){"use strict";t.exports=function(){return e("./lib/json2"),{}}},{"./lib/json2":3}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,u,a=gap,c=t[e];switch(c&&"object"===(void 0===c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),void 0===(c="function"==typeof rep?rep.call(t,e,c):c)?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)u[n]=str(n,c)||"null";o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+a+"]":"["+u.join(",")+"]"}else{if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(o=str(r=rep[n],c))&&u.push(quote(r)+(gap?": ":":")+o);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o)&&u.push(quote(r)+(gap?": ":":")+o);o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+a+"}":"{"+u.join(",")+"}"}return gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=t)||"function"==typeof t||"object"===(void 0===t?"undefined":_typeof(t))&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"===(void 0===o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],4:[function(e,t,n){"use strict";function r(e,t,n){n=n||"",e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var r,o=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+o):null;if(/^[a-zA-Z0-9_\-]*$/.test(n))return(r=f({_namespacePrefix:o,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__",n=(e.write(t,t),e.read(t)===t);return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(r,e){var o=this[e];this[e]=function(){var n=u(arguments,0),e=this,t=[function(){if(o)return c(arguments,function(e,t){n[t]=e}),o.apply(e,n)}].concat(n);return r.apply(e,t)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(n){var r=this;if(l(n))c(n,function(e){r._addPlugin(e)});else if(!a(this.plugins,function(e){return n===e})){if(this.plugins.push(n),!p(n))throw new Error("Plugins must be function values that return objects");var e=n.call(this);if(!g(e))throw new Error("Plugins must return an object of function properties");c(e,function(e,t){if(!p(e))throw new Error("Bad plugin property: "+t+" from plugin "+n.name+". Plugins should only return functions.");r._assignPluginFnProp(e,t)})}},addStorage:function(e){(function(){var e="undefined"==typeof console?null:console;e&&(e.warn||e.log).apply(e,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},d,{plugins:[]})).raw={},c(r,function(e,t){p(e)&&(r.raw[t]=s(r,e))}),c(e,function(e){r._addStorage(e)}),c(t,function(e){r._addPlugin(e)}),r;throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes")}var e=e("./util"),u=e.slice,a=e.pluck,c=e.each,s=e.bind,f=e.create,l=e.isList,p=e.isFunction,g=e.isObject,d={version:"2.0.12",enabled:!(t.exports={createStore:r}),get:function(e,t){e=this.storage.read(this._namespacePrefix+e);return this._deserialize(e,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(n){var r=this;this.storage.each(function(e,t){n.call(r,r._deserialize(e),(t||"").replace(r._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return r.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return r(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,s,t){!function(e){"use strict";function i(e,t){return Array.prototype.slice.call(e,t||0)}function u(e,n){t(e,function(e,t){return n(e,t),0})}function t(e,t){if(o(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function o(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var a,c=Object.assign||function(n,e,t,r){for(var o=1;o<arguments.length;o++)u(Object(arguments[o]),function(e,t){n[t]=e});return n},n=Object.create?function(e,t,n,r){var o=i(arguments,1);return c.apply(this,[Object.create(e)].concat(o))}:(a=function(){},function(e,t,n,r){var o=i(arguments,1);return a.prototype=e,c.apply(this,[new a].concat(o))}),r=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e="undefined"!=typeof window?window:e;s.exports={assign:c,create:n,trim:r,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:i,each:u,map:function(e,n){var r=o(e)?[]:{};return t(e,function(e,t){return r[t]=n(e,t),0}),r},pluck:t,isList:o,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:e}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]},{"./cookieStorage":7,"./localStorage":8,"./memoryStorage":9,"./oldFF-globalStorage":10,"./oldIE-userDataStorage":11,"./sessionStorage":12}],7:[function(e,t,n){"use strict";function r(e){for(var t,n,r=c.cookie.split(/; ?/g),o=r.length-1;0<=o;o--)a(r[o])&&(t=r[o].split("="),n=unescape(t[0]),e(unescape(t[1]),n))}function o(e){e&&i(e)&&(c.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function i(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(c.cookie)}var e=e("../src/util"),u=e.Global,a=e.trim,c=(t.exports={name:"cookieStorage",read:function(e){return e&&i(e)?(e="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*",unescape(c.cookie.replace(new RegExp(e),"$1"))):null},write:function(e,t){e&&(c.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:r,remove:o,clearAll:function(){r(function(e,t){o(t)})}},u.document)},{"../src/util":5}],8:[function(e,t,n){"use strict";function r(){return i.localStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"localStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;0<=t;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}],9:[function(e,t,n){"use strict";t.exports={name:"memoryStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:function(e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},remove:function(e){delete r[e]},clearAll:function(e){r={}}};var r={}},{}],10:[function(e,t,n){"use strict";function r(e){for(var t=o.length-1;0<=t;t--){var n=o.key(t);e(o[n],n)}}var e=e("../src/util").Global,o=(t.exports={name:"oldFF-globalStorage",read:function(e){return o[e]},write:function(e,t){o[e]=t},each:r,remove:function(e){return o.removeItem(e)},clearAll:function(){r(function(e,t){delete o[e]})}},e.globalStorage)},{"../src/util":5}],11:[function(e,t,n){"use strict";function r(e){return e.replace(/^\d/,"___$&").replace(c,"___")}var e=e("../src/util").Global,o=(t.exports={name:"oldIE-userDataStorage",write:function(e,t){var n;a||(n=r(e),u(function(e){e.setAttribute(n,t),e.save(o)}))},read:function(e){var t,n;if(!a)return t=r(e),n=null,u(function(e){n=e.getAttribute(t)}),n},each:function(o){u(function(e){for(var t=e.XMLDocument.documentElement.attributes,n=t.length-1;0<=n;n--){var r=t[n];o(e.getAttribute(r.name),r.name)}})},remove:function(e){var t=r(e);u(function(e){e.removeAttribute(t),e.save(o)})},clearAll:function(){u(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var n=t.length-1;0<=n;n--)e.removeAttribute(t[n].name);e.save(o)})}},"storejs"),i=e.document,u=function(){if(!i||!i.documentElement||!i.documentElement.addBehavior)return null;var n,e,r;try{(e=new ActiveXObject("htmlfile")).open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),e.close(),n=e.w.frames[0].document,r=n.createElement("div")}catch(e){r=i.createElement("div"),n=i.body}return function(e){var t=[].slice.call(arguments,0);t.unshift(r),n.appendChild(r),r.addBehavior("#default#userData"),r.load(o),e.apply(this,t),n.removeChild(r)}}(),a=(e.navigator?e.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],12:[function(e,t,n){"use strict";function r(){return i.sessionStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"sessionStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;0<=t;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}]},{},[1])(1)});
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.5
 */
var Rexbuilder_Public_Templates=function(){"use strict";function a(e,t){if("label-text-paragraph"===e)return'<div class="wpcf7-label-text__paragraph" contenteditable="false"></div>'}return{getTemplate:a,getParsedTemplate:function(e,t){return $.parseHTML(a(e))}}}();
var Rexbuilder_Util=function($){"use strict";var hasClass,addClass,removeClass,toggleClass;function rtimeOut(e,t){function i(){o()-s<t?a||r(i):e()}var a,o=Date.now,r=window.requestAnimationFrame,s=o();return r(i),{clear:function(){a=1}}}function rInterval(e,t){function i(){o()-s<t||(s+=t,e()),a||r(i)}var a,o=Date.now,r=window.requestAnimationFrame,s=o();return r(i),{clear:function(){a=1}}}var removeClass="classList"in document.documentElement?(hasClass=function(e,t){return e.classList.contains(t)},addClass=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(hasClass=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),toggleClass=function(e,t){(hasClass(e,t)?removeClass:addClass)(e,t)},editorMode=!1,windowIsResizing=!1,responsiveLayouts,defaultLayoutSections,$modelsCustomizationsDataDiv,$pageCustomizationsDataDiv,$liveDataContainer,$layoutsDomOrder,$defaultLayoutState,frontAvailableLayouts,startFrontLayout,changedFrontLayout,layoutSavedInfo,$usedIDSContainer,sectionIDSused,$usedBlocksIDsContainer,blocksIDsUsed,$rexbuilderLayoutData,$rexbuilderModelData,$availableLayoutNames,edlTimeouts=[],$bodyHtml;function handlingRowReadyEnd(e){edlTimeouts[e]=null,""===edlTimeouts.join("")&&(Rexbuilder_Util.playAllVideos(),e=jQuery.Event("rexlive:editDomLayoutEnd"),Rexbuilder_Util.$document.trigger(e),edlTimeouts=[])}var createRandomID=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},_createRandomNumericID=function(e){for(var t="",i="0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return parseInt(t)},_storeNamesUsed=function(){sectionIDSused=0<$usedIDSContainer.length?JSON.parse($usedIDSContainer.text()):[]},_saveSectionNamesUsed=function(){$usedIDSContainer.text(JSON.stringify(sectionIDSused))},_getSectionNamesUsed=function(){return sectionIDSused},_addSectionID=function(e){for(var t=sectionIDSused.length-1;0<=t&&e!=sectionIDSused[t];t--);-1==t&&sectionIDSused.push(e)},_removeSectionID=function(e){for(var t=0,t=sectionIDSused.length-1;0<=t&&e!=sectionIDSused[t];t--);-1<t&&(sectionIDSused.splice(t,1),_saveSectionNamesUsed())},_createSectionID=function(){var e,t,i;do{if(t=!0,"self"==(e=createRandomID(4)))t=!1;else for(i=0;i<sectionIDSused.length;i++)if(e==sectionIDSused[i]){t=!1;break}}while(!t);return _addSectionID(e),e},_updateSectionsIDs=function(){if(Rexbuilder_Util.rexContainer)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=e[i].getAttribute("data-rexlive-section-id");null!==a&&""!==a||(a=_createSectionID(),e[i].setAttribute("data-rexlive-section-id",a),_fix_tools_ids(e[i],a))}},_fix_tools_ids=function(e,t){if(e)for(var i,a,o,r,s,n=[].slice.call(e.getElementsByClassName("tool-area--side tool-area--left")),l=n.length,d=0;d<l;d++){for(o=(a=[].slice.call(n[d].getElementsByClassName("edit-row-width"))).length,i=0;i<o;i++)a[i].setAttribute("id",a[i].getAttribute("id")+t),a[i].setAttribute("name",a[i].getAttribute("name")+t),a[i].nextElementSibling.setAttribute("for",a[i].nextElementSibling.getAttribute("for")+t);for(s=(r=[].slice.call(n[d].getElementsByClassName("edit-row-layout"))).length,i=0;i<s;i++)r[i].setAttribute("id",r[i].getAttribute("id")+t),r[i].setAttribute("name",r[i].getAttribute("name")+t),r[i].nextElementSibling.setAttribute("for",r[i].nextElementSibling.getAttribute("for")+t)}},_updateSectionsNumber=function(){var e=-1;if(Rexbuilder_Util.rexContainer){for(var t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length,a=0;a<i;a++)t[a].setAttribute("data-rexlive-section-number",a),e=a;Rexbuilder_Util.lastSectionNumber=e}};function _storeBlocksIDsUsed(){blocksIDsUsed=0<$usedBlocksIDsContainer.length?JSON.parse($usedBlocksIDsContainer.text()):[]}function saveBlocksIDsUsed(){$usedBlocksIDsContainer.text(JSON.stringify(blocksIDsUsed))}function updateBlocksIDsUsed(e){blocksIDsUsed=e,saveBlocksIDsUsed()}function getBlocksIDsUsed(){return blocksIDsUsed}function addBlockID(e){blocksIDsUsed.push(e),blocksIDsUsed=Rexbuilder_Util.removeArrayDuplicates(blocksIDsUsed)}function removeBlockID(e){for(var t=blocksIDsUsed.length-1;0<=t&&e!=blocksIDsUsed[t];t--);-1<t&&(blocksIDsUsed.splice(t,1),saveBlocksIDsUsed())}function createBlockID(){for(var e;!("self"!==(e=createRandomID(4))&&-1===blocksIDsUsed.indexOf(e)););return addBlockID(e),e}function _updateBlocksIDs(){if(Rexbuilder_Util.rexContainer)for(var e,t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-item")),i=0;i<t.length;i++)null!==(e=t[i].getAttribute("data-rexbuilder-block-id"))&&""!==e||(e=createBlockID(),t[i].setAttribute("data-rexbuilder-block-id",e))}var _findLayoutType=function(e){return"default"==e||"tablet"==e||"mobile"==e?"standard":"custom"},_findFrontLayout=function(){for(var e=Rexbuilder_Util.globalViewport.width,t=frontAvailableLayouts.length-1;0<=t;t--)if(e>=parseInt(frontAvailableLayouts[t].min)&&(""==frontAvailableLayouts[t].max||e<=parseInt(frontAvailableLayouts[t].max)))return frontAvailableLayouts[t].id},_getModelsCustomizations=function(){var o=[];return $modelsCustomizationsDataDiv.children(".model-customizations-container").each(function(e,t){var t=$(t),i=parseInt(t.attr("data-model-id")),a=[];t.children(".model-customization-data").each(function(e,t){var t=$(t),i=t.attr("data-model-layout-name"),t=JSON.parse(t.text());a.push({name:i,targets:t})}),o.push({id:i,customizations:a})}),o},_updateModelsCustomizationsData=function(e){var t,i,a=e.id,o=$modelsCustomizationsDataDiv.children('.model-customizations-container[data-model-id="'+a+'"]');for(0!=o.length?o.children(".model-customization-data").remove():((o=$(document.createElement("script"))).addClass("model-customizations-container"),o.attr("data-model-id",a),o.appendTo($modelsCustomizationsDataDiv[0])),t=0,i=e.customizations.length;t<i;t++){var r=$(document.createElement("script"));r.addClass("model-customization-data"),r.attr("data-model-layout-name",e.customizations[t].name),r.text(JSON.stringify(e.customizations[t].targets)),r.appendTo(o[0])}$modelsCustomizationsDataDiv.attr("data-empty-models-customizations",!1)},_updateDivModelCustomizationsNames=function(e){for(var t=$rexbuilderModelData.find(".available-models-customizations-names"),i=JSON.parse(t.text()),a=[],o=0,r=i.length;o<r;o++){var s=i[o];s.id!=e.id&&a.push(s)}a.push(e),t.text(JSON.stringify(a))},_getPageCustomizations=function(){var i=[],s={name:"default",sections:[]};return $pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="default"]').children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),t=""!=t.text()?JSON.parse(t.text()):[];s.sections.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,targets:t})}),i.push(s),$pageCustomizationsDataDiv.children('.customization-wrap:not([data-customization-name="default"])').each(function(e,t){var t=$(t),n={name:t.attr("data-customization-name"),sections:[]};t.children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),s=""!=t.text()?JSON.parse(t.text()):[],t=void 0!==t.attr("data-section-created-live")&&"1"==t.attr("data-section-created-live").toString();n.sections.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,section_created_live:t,targets:s})}),i.push(n)}),i},_createPageCustomizationsDataLive=function(e){var t,i;for($liveDataContainer.children().remove(),t=0,i=e.length;t<i;t++){var a=$(document.createElement("script"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($liveDataContainer[0])}},_updatePageCustomizationsData=function(e){var t,i,a=e.name,o=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="'+a+'"]');for(0!=o.length?o.children(".section-targets").remove():((o=$(document.createElement("script"))).addClass("customization-wrap"),o.attr("data-customization-name",a),o.appendTo($pageCustomizationsDataDiv[0])),t=0,i=e.sections.length;t<i;t++){var r=$(document.createElement("script"));r.addClass("section-targets"),r.attr("data-section-rex-id",e.sections[t].section_rex_id),r.attr("data-model-id",e.sections[t].section_model_id),r.attr("data-model-number",e.sections[t].section_model_number),r.attr("data-section-hide",e.sections[t].section_hide),r.attr("data-section-created-live","true"==e.sections[t].section_created_live.toString()&&"1"),""==e.sections[t].section_model_id&&r.text(JSON.stringify(e.sections[t].targets)),r.appendTo(o[0])}$pageCustomizationsDataDiv.removeAttr("data-empty-customizations")},_updatePageAvaiableLayoutsNames=function(e){$availableLayoutNames.text(JSON.stringify(e))},_getSectionCustomLayouts=function(e){for(var t,i,a=[],o=Rexbuilder_Util.getPageCustomizations(),r=0,s=o.length;r<s;r++){var n,l=o[r].name;if(null!=o[r].sections)for(t=0,i=o[r].sections.length;t<i;t++)o[r].sections[t].section_rex_id==e&&(n=jQuery.extend(!0,[],o[r].sections[t].targets),a.push({name:l,targets:n}))}return a},chooseLayout=function(){var e=$rexbuilderLayoutData,t=$rexbuilderModelData;if(Rexbuilder_Util.chosenLayoutData={min:0,max:"",id:"default",label:"My Desktop",type:"standard"},"true"==e.children(".layouts-data").attr("data-empty-customizations")||Rexbuilder_Util.editorMode&&Rexbuilder_Util.firstStart)return"default";for(var i,a,o,r,s,n,l,d,u,c=Rexbuilder_Util.globalViewport.width,_=document.getElementById("layout-avaiable-dimensions"),g=_?JSON.parse(_.textContent):[],_=t.children(".available-models-customizations-names"),m=0<_.length?JSON.parse(_.text()):[],t=e.children("#available-layouts-names"),p=0<t.length?JSON.parse(t.text()):[],b=[],f=0,h=g.length;f<h;f++){for(d=!1,i=0,o=m.length;i<o;i++)for(a=0,r=m[i].names.length;a<r;a++)g[f].id==m[i].names[a]&&(d=(u=g[f]).model=!0,b.push(u));if(!d)for(a=0,s=p.length;a<s;a++)g[f].id==p[a]&&(d=!((u=g[f]).model=!1),b.push(u))}for(f=0,n=b.length;f<n;f++)""==b[f].min&&(b[f].min=0);var v,x="",y=b.concat();for(y.sort((v="min",function(e,t){return e[v]>t[v]?1:t[v]>e[v]?-1:0})),f=0,l=y.length;f<l;f++)c>=y[f].min&&(""==y[f].max||c<=y[f].max)&&(x=y[f].id,Rexbuilder_Util.chosenLayoutData=y[f]);return x=""===x?"default":x},predictLayout=function(){var e=Rexbuilder_Util.globalViewport.width;return e<=767?"mobile":e<=1024?"tablet":"default"},_createEmptyTargets=function(e){for(var t=[],i=0,a=e.length;i<a;i++){var o={name:e[i].name,props:{}};"self"==e[i].name&&_isMobile()&&(o.props.collapse_grid=!0),t.push(o)}return t},_getDefaultPageLayout=function(e,t){for(var i,a,o,r,s,n,l,d=[],u=0,c=e.length;u<c;u++)if("default"==e[u].name){for(i=0,r=e[u].sections.length;i<r;i++)d.push(jQuery.extend(!0,{},e[u].sections[i]));break}for(u=0,s=d.length;u<s;u++)if("true"==d[u].section_is_model.toString())for(a=0,n=t.length;a<n;a++)if(t[a].id==d[u].section_model_id){for(o=0,l=t[a].customizations.length;o<l;o++)if("default"==t[a].customizations[o].name){d[u].targets=jQuery.extend(!0,[],t[a].customizations[o].targets);break}break}return d},_getDefaultModelsLayout=function(e){for(var t,i,a=[],o=0,r=e.length;o<r;o++)for(t=0,i=e[o].customizations.length;t<i;t++)if("default"==e[o].customizations[t].name){a.push({id:e[o].id,targets:e[o].customizations[t].targets});break}return a};function guessLayout(t){var e=document.getElementById("layout-avaiable-dimensions").textContent,i=(e=""!==e?JSON.parse(e):[]).filter(function(e){return e.id===t});if(!i)return"default";if("standard"===(i=i[0]).type)return"default";var a,o=$availableLayoutNames.text(),r=e.filter(function(e){return-1!==o.indexOf(e.id)}),s=r.length,n="";if(parseInt(i.min)<_plugin_frontend_settings.defaultSettings.collapseWidth){for(a=0;a<s;a++)if(parseInt(r[a].min)<_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){n=r[a].id;break}}else for(a=0;a<s;a++)if(parseInt(r[a].min)>=_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){n=r[a].id;break}return n=""===n?"default":n}var _getCustomLayoutSections=function(e,t,i,a){if("default"==a)return i;for(var o,r,s,n,l,d,u,c,_,g,m=[],p=!1,b=_getDefaultModelsLayout(t),f=0,h=e.length;f<h;f++)if(e[f].name==a){for(p=!0,o=0,n=e[f].sections.length;o<n;o++)m.push(jQuery.extend(!0,{},e[f].sections[o]));break}if(!p)for(f=0,l=i.length;f<l;f++){var v=jQuery.extend(!0,{},i[f]);v.targets=_createEmptyTargets(i[f].targets),v.sectionCleared=!0,m.push(v)}for(f=0,d=m.length;f<d;f++)if("true"==m[f].section_is_model.toString()){for(r=0,u=t.length;r<u;r++)if(t[r].id==m[f].section_model_id){for(g=!1,s=0,c=t[r].customizations.length;s<c;s++)if(t[r].customizations[s].name==a){g=!0,m[f].targets=jQuery.extend(!0,[],t[r].customizations[s].targets),m[f].defaultSection=!1,m[f].sectionCleared=!1;break}if(!g)for(s=0,_=b.length;s<_;s++)if(m[f].section_model_id==b[s].id){m[f].targets=_createEmptyTargets(b[s].targets),m[f].sectionCleared=!0;break}break}}else if(0==m[f].targets.length)for(o=0,l=i.length;o<l;o++)if(m[f].section_rex_id==i[o].section_rex_id){m[f].targets=_createEmptyTargets(i[o].targets),m[f].sectionCleared=!0;break}return m},_mergeSections=function(e,t){var i,a,o,r,s,n,l,d,u;if("default"!=Rexbuilder_Util.activeLayout){for(i=0,s=e.length;i<s;i++)for(e[i].sectionFounded=!1,e[i].defaultSection=!1,a=0,n=t.length;a<n;a++)if(e[i].section_rex_id==t[a].section_rex_id){e[i].sectionFounded=!0;var c,_,g,m=e[i],p=t[a];for((void 0===m.targets[0]||jQuery.isEmptyObject(m.targets[0].props)||void 0!==m.sectionCleared&&m.sectionCleared)&&(m.defaultSection=!0,m.targets=jQuery.extend(!0,[],p.targets)),o=0,l=m.targets.length;o<l;o++){for(u=!1,r=0,d=p.targets.length;r<d;r++)if(m.targets[o].name==p.targets[r].name){m.targets[o].notDisplay=!1,p.targets[r].oldElement=u=!0,1<=o&&jQuery.isEmptyObject(m.targets[o].props)&&"default"!=Rexbuilder_Util.activeLayout&&p.targets[0].props.layout!=m.targets[0].props.layout&&(_=parseFloat(p.targets[0].props.grid_cell_width),g=5,"masonry"==p.targets[0].props.layout?(m.targets[o].props.gs_y=Math.round(p.targets[r].props.gs_y*g/_),m.targets[o].props.gs_height=Math.round(p.targets[r].props.gs_height*g/_),m.targets[o].props.gs_start_h=Math.round(p.targets[r].props.gs_start_h*g/_)):(m.targets[o].props.gs_y=Math.round(p.targets[r].props.gs_y*_/g),m.targets[o].props.gs_height=Math.round(p.targets[r].props.gs_height*_/g),m.targets[o].props.gs_start_h=Math.round(p.targets[r].props.gs_start_h*_/g))),m.targets[o].props=Rexbuilder_Util.merge(p.targets[r].props,m.targets[o].props);break}u||(m.targets[o].notDisplay=!0)}for(r=0,d=p.targets.length;r<d;r++)void 0===p.targets[r].oldElement&&(c=jQuery.extend(!0,{},p.targets[r]),"default"!=Rexbuilder_Util.activeLayout&&p.targets[0].props.layout!=m.targets[0].props.layout&&(_=parseFloat(p.targets[0].props.grid_cell_width),g=5,"masonry"==p.targets[0].props.layout?(c.props.gs_y=Math.round(c.props.gs_y*g/_),c.props.gs_height=Math.round(c.props.gs_height*g/_),c.props.gs_start_h=Math.round(c.props.gs_start_h*g/_)):(c.props.gs_y=Math.round(c.props.gs_y*_/g),c.props.gs_height=Math.round(c.props.gs_height*_/g),c.props.gs_start_h=Math.round(c.props.gs_start_h*_/g))),m.targets.splice(1,0,c));break}if(0==e.length)for(i=0,s=(e=t).length;i<s;i++)e[i].defaultSection=!0}for(_createPageCustomizationsDataLive(e),i=0,s=e.length;i<s;i++)(e[i].sectionFounded||"default"==Rexbuilder_Util.activeLayout)&&("default"!=Rexbuilder_Util.activeLayout&&e[i].defaultSection||"default"==Rexbuilder_Util.activeLayout)&&_isMobile()&&(e[i].targets[0].props.collapse_grid=!0,e[i].targets[0].props.noMobileLayoutSaved=!0,e[i].targets[0].props.layout="masonry",e[i].targets[0].props.fullHeight=!1);return jQuery.extend(!0,{},e)};function _isMobile(){return Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth}var _cssPropertyValueSupported=function(e,t){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t};function clearSectionsEdited(){for(var e=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){e[i].setAttribute("data-rexlive-section-edited",!1),e[i].querySelector(".grid-stack-row").setAttribute("data-rexlive-layout-changed",!1);for(var a=Array.prototype.slice.call(e[i].getElementsByClassName("grid-stack-item")),o=a.length,r=0;r<o;r++)a[r].setAttribute("data-rexlive-element-edited",!1)}}var launchEditDomLayout=function(){var e=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.edit_dom_layout(e)},edit_dom_layout=function(e){var t={collapse_needed:!1};if(e==Rexbuilder_Util.activeLayout&&"default"==e)_isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids();else if(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,"true"==$rexbuilderLayoutData.children(".layouts-customizations").attr("data-empty-customizations")&&"true"==$rexbuilderModelData.children(".models-customizations").attr("data-empty-models-customizations")){_isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids();var i=document.querySelector(".rexpansive_section.empty-section");if(i){i=[{section_rex_id:i.getAttribute("data-rexlive-section-id"),targets:[{name:"self",props:{}}]}];Rexbuilder_Util.editedDataInfo=new RexEditedData(i)}else{for(var a=Array.prototype.slice.call(document.getElementsByClassName("rexpansive_section")),o=a.length,r=[],s=0;s<o;s++){for(var n={},l=a[s].querySelector(".section-data"),d=(n.section_rex_id=a[s].getAttribute("data-rexlive-section-id"),n.targets=[],{name:"",props:{}}),u=(d.name="self",d.props.section_name=l.getAttribute("data-section_name"),d.props.section_nav_label=l.getAttribute("data-section_nav_label"),d.props.color_bg_section=l.getAttribute("data-color_bg_section"),d.props.color_bg_section_active=""!==d.props.color_bg_section,d.props.image_bg_section_active=l.getAttribute("data-image_bg_section_active"),d.props.image_bg_section=l.getAttribute("data-image_bg_section"),d.props.image_width=l.getAttribute("data-image_width"),d.props.image_height=l.getAttribute("data-image_height"),d.props.id_image_bg_section=l.getAttribute("data-id_image_bg_section"),d.props.image_size=l.getAttribute("data-image_size"),d.props.video_bg_id=l.getAttribute("data-video_bg_id_section"),d.props.video_mp4_url=l.getAttribute("data-video_mp4_url"),d.props.video_bg_width_section=l.getAttribute("data-video_bg_width_section"),d.props.video_bg_height_section=l.getAttribute("data-video_bg_height_section"),d.props.video_bg_url_section=l.getAttribute("data-video_bg_url_section"),d.props.video_bg_url_vimeo_section=l.getAttribute("data-video_bg_url_vimeo_section"),d.props.block_distance=l.getAttribute("data-block_distance"),d.props.row_separator_top=l.getAttribute("data-row_separator_top"),d.props.row_separator_bottom=l.getAttribute("data-row_separator_bottom"),d.props.row_separator_right=l.getAttribute("data-row_separator_right"),d.props.row_separator_left=l.getAttribute("data-row_separator_left"),d.props.margin=l.getAttribute("data-margin"),d.props.row_margin_top=l.getAttribute("data-row_margin_top"),d.props.row_margin_bottom=l.getAttribute("data-row_margin_bottom"),d.props.row_margin_right=l.getAttribute("data-row_margin_right"),d.props.row_margin_left=l.getAttribute("data-row_margin_left"),d.props.custom_classes=l.getAttribute("data-custom_classes"),d.props.row_overlay_color=l.getAttribute("data-row_overlay_color"),d.props.row_overlay_active=l.getAttribute("data-row_overlay_active"),n.targets.push(d),Array.prototype.slice.call(a[s].getElementsByClassName("rexbuilder-block-data"))),c=u.length,g=0;g<c;g++){var m={name:u[g].getAttribute("data-rexbuilder_block_id"),props:{color_bg_block:u[g].getAttribute("data-color_bg_block"),color_bg_block_active:u[g].getAttribute("data-color_bg_block_active"),image_bg_url:u[g].getAttribute("data-image_bg_url"),image_width:u[g].getAttribute("data-image_width"),image_height:u[g].getAttribute("data-image_height"),id_image_bg:u[g].getAttribute("data-id_image_bg"),image_size:u[g].getAttribute("data-image_size"),image_bg_elem_active:u[g].getAttribute("data-image_bg_elem_active"),type_bg_image:u[g].getAttribute("data-type_bg_image"),video_bg_id:u[g].getAttribute("data-video_bg_id"),video_bg_width:u[g].getAttribute("data-video_bg_width"),video_bg_height:u[g].getAttribute("data-video_bg_height"),video_mp4_url:u[g].getAttribute("data-video_mp4_url"),video_bg_url_youtube:u[g].getAttribute("data-video_bg_url_youtube"),video_bg_url_vimeo:u[g].getAttribute("data-video_bg_url_vimeo"),photoswipe:u[g].getAttribute("data-photoswipe"),block_custom_class:u[g].getAttribute("data-block_custom_class"),block_padding:u[g].getAttribute("data-block_padding"),overlay_block_color:u[g].getAttribute("data-overlay_block_color"),overlay_block_color_active:u[g].getAttribute("data-overlay_block_color_active"),linkurl:u[g].getAttribute("data-linkurl"),block_flex_position:u[g].getAttribute("data-block_flex_position"),block_flex_img_position:u[g].getAttribute("data-block_flex_img_position")}};n.targets.push(m)}r.push(n)}Rexbuilder_Util.editedDataInfo=new RexEditedData(r)}}else{for(var p,b,f=[],h=[],v=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),B=v.length,x=0;x<B;x++)Rexbuilder_Util.hasClass(v[x],"rex-model-section")&&f.push(parseInt(v[x].getAttribute("data-rexlive-model-id"))),p={rexID:v[x].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(v[x].getAttribute("data-rexlive-model-id")))?"":parseInt(v[x].getAttribute("data-rexlive-model-id"))},h.push(p);for(var y,D,i=_getPageCustomizations(),S=("default"==Rexbuilder_Util.activeLayout&&_saveCustomizationDomOrder(jQuery.extend(!0,[],i)),_getModelsCustomizations()),C=("true"==$defaultLayoutState.attr("data-empty-default-customization")?(y=Rexbuilder_Util.getDefaultPageLayout(i,S),_createDefaultLayoutState(y)):(_updateDefaultLayoutState({modelsData:S}),y=_getDefaultLayoutState()),Rexbuilder_Util.getCustomLayoutSections(i,S,y,e)),U=[],k=0;k<C;k++)if("true"==C[k].section_is_model.toString()){for(D=!1,b=0;b<U.length;b++)if(U[b].id==C[k].section_model_id){U[b].number=U[b].number+1,C[k].section_model_number=U[b].number,D=!0;break}D||(C[k].section_model_number=1,U.push({id:C[k].section_model_id,number:1}))}Rexbuilder_Util.clearSectionsEdited();var I,R,w,S=!1,i=("default"!==e&&"tablet"!==e&&"mobile"!==e&&null===document.querySelector('.customization-wrap[data-customization-name="'+e+'"]')&&(e!==(I=guessLayout(e))?(R=(R=i.filter(function(e){return I===e.name}))[0].sections,S=!0):R=C),null),A=(S&&(i=C.map(function(e){var t=e.targets.map(function(e){return{name:e.name,props:{}}});return _.merge(_.omit(e,"targets"),{targets:t})})),Rexbuilder_Util.editedDataInfo=new RexEditedData(i||C),_mergeSections(void 0===I?C:R,y)),L=(Rexbuilder_Util.removeCollapsedGrids(),Rexbuilder_Util.domUpdating=!0,[]);for(w in A){var N,z,E,P=A[w],V=P.section_rex_id;P.notInSection&&"default"!=e||(N={rexID:V,modelID:-1,modelNumber:-1},(z="true"==P.section_is_model.toString()?(z=P.section_model_id,E=P.section_model_number,N.modelID=z,N.modelNumber=E,Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+V+'"][data-rexlive-model-number="'+N.modelNumber+'"]')):Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+V+'"]'))&&!Rexbuilder_Util.hasClass(z,"removing_section")&&(void 0!==P.section_hide&&"true"==P.section_hide.toString()?Rexbuilder_Util.addClass(z,"rex-hide-section"):(Rexbuilder_Util.removeClass(z,"rex-hide-section"),E=$(z),V=_updateDOMelements(E,P.targets,!1,w),t.collapse_needed+=V),L.push(N)))}Rexbuilder_Dom_Util.fixSectionDomOrder(L,!0),Rexbuilder_Util.domUpdating=!1}return t},_updateDOMelements=function(e,t,i,a){var o=e.find(".grid-stack-row"),r=o.get(0),s=o.data(),n=s.plugin_perfectGridGalleryEditor,l=(t[0].props.gridEdited&&r.setAttribute("data-rexlive-layout-changed",!0),e.removeClass("empty-section"),!0);if(void 0!==s&&void 0!==n){for(var d,u=1,c=t.length;u<c;u++)null!==(p=r.querySelector('div[data-rexbuilder-block-id="'+t[u].name+'"]'))&&(l*=d=void 0!==t[u].props.hide&&"true"==t[u].props.hide.toString(),d?Rexbuilder_Util.hasClass(p,"rex-hide-element")||(Rexbuilder_Util.addClass(p,"rex-hide-element"),n.removeBlock(p)):Rexbuilder_Util.hasClass(p,"rex-hide-element")&&(Rexbuilder_Util.removeClass(p,"rex-hide-element"),n.reAddBlock($(p))));n.properties.gridstackInstance.batchUpdate()}l&&e.addClass("empty-section");var _,g,m,p,b,f,h=t.length;for(u=1;u<h;u++)if((!t[u].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(x=t[u].name,_=t[u].props,p=(x=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+x+'"]'))[0],g=x.children(".rexbuilder-block-data"),m=x.find(".grid-item-content"),0<x.length)){if(f=(b=[].slice.call(p.getElementsByTagName("img"))).length,!Rexbuilder_Util.editorMode&&0!==f)for(var v=0;v<f;v++)"true"===b[v].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(b[v]));var x={$elem:x,targetProps:_,$itemData:g,$itemContent:m,gridstackInstance:Rexbuilder_Util.editorMode?n.properties.gridstackInstance:null,positionAndSize:!0};Rexbuilder_Util.updateDOMSingleElement(x)}updateSection(e,o,t[0].props,i),Rexbuilder_Util.editorMode&&updateSectionTools(e,o,t[0].props,i);e=void 0!==t[0].props.collapse_grid&&("true"==t[0].props.collapse_grid.toString()||i);return void 0!==s&&void 0!==n&&void 0!==n.properties.gridstackInstance&&n.properties.gridstackInstance&&(Rexbuilder_Util.domUpdating=!0,n.properties.gridstackInstance.commit(),handlingGridstackCommitEnd(n,e,t,a)),e};function handlingGridstackCommitEnd(e,t,i,a){Rexbuilder_Util.domUpdating=!0,e.properties.gridstackInstance&&e.properties.gridstackInstance.batchUpdate(),e.fixBlockDomOrder(),e.saveStateGrid(),"masonry"!=e.settings.galleryLayout||t?"fixed"==e.settings.galleryLayout&&"true"==e.settings.fullHeight.toString()&&e.updateFullHeight():e.updateBlocksHeight(),i[0].props.collapse_grid&&(e.collapseElements(),e.collapseElementsProperties()),e.properties.gridstackInstance&&e.properties.gridstackInstance.commit();t=setTimeout(handlingRowReady.bind(null,e,a,i[0].props.collapse_grid),200);edlTimeouts.push(t)}function handlingRowReady(e,t,i){Rexbuilder_Util.domUpdating=!1,e.properties.dispositionBeforeCollapsing=e.createActionDataMoveBlocksGrid(),e._createFirstReverseStack(),e._fixImagesDimension(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers(),handlingRowReadyEnd(t),i||setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e.section),1500)}function updateDOMSingleElement(e){var t=e.$elem,i=t.get(0),a=e.targetProps,o=e.$itemData,r=o.get(0),s=e.$itemContent,n=e.gridstackInstance,l=e.positionAndSize||!1,e=e.collapseGrid||!1,i=(l&&(e&&(i.setAttribute("data-gs-width",12),i.setAttribute("data-width",12),r.setAttribute("data-gs_width",12),r.setAttribute("data-size_x",12),a.gs_width="12",a.size_x="12",i.setAttribute("data-gs-x",0),i.setAttribute("data-row",1),r.setAttribute("data-gs_x",0),r.setAttribute("data-row",1),a.gs_x="0",a.row="1"),l={x:i.getAttribute("data-gs-x"),y:i.getAttribute("data-gs-y"),w:i.getAttribute("data-gs-width"),h:i.getAttribute("data-gs-height"),startH:r.getAttribute("data-gs_start_h"),realFluid:r.getAttribute("data-element_real_fluid")},e={x:void 0===a.gs_x?l.x:a.gs_x,y:void 0===a.gs_y?l.y:a.gs_y,w:void 0===a.gs_width?l.w:a.gs_width,h:void 0===a.gs_height?l.h:a.gs_height,startH:void 0===a.gs_start_h?l.startH:a.gs_start_h,realFluid:void 0===a.element_real_fluid?l.realFluid:a.element_real_fluid,gridstackInstance:n},updateElementDimensions(t[0],o[0],e)),isNaN(parseInt(a.video_bg_id))?"":parseInt(a.video_bg_id)),r=void 0===a.video_bg_url_youtube?"":a.video_bg_url_youtube,l=void 0===a.video_bg_url_vimeo?"":a.video_bg_url_vimeo,n="",e=(""!=i?n="mp4":""!=l?n="vimeo":""!=r&&(n="youtube"),{mp4Data:{idMp4:i,linkMp4:void 0===a.video_mp4_url?"":a.video_mp4_url,width:isNaN(parseInt(a.video_bg_width))?"":parseInt(a.video_bg_width),height:isNaN(parseInt(a.video_bg_height))?"":parseInt(a.video_bg_height)},vimeoUrl:l,youtubeUrl:r,audio:void 0===a.video_has_audio?"":"1"==a.video_has_audio||"true"==a.video_has_audio.toString(),typeVideo:n}),i=(Rexbuilder_Dom_Util.updateVideos(s,e),void 0===a.image_bg_elem_active||"true"==a.image_bg_elem_active.toString()),l={active:i,idImage:!i||isNaN(parseInt(a.id_image_bg))?"":parseInt(a.id_image_bg),urlImage:i?a.image_bg_url:"",width:!i||isNaN(parseInt(a.image_width))?"":parseInt(a.image_width),height:!i||isNaN(parseInt(a.image_height))?"":parseInt(a.image_height),typeBGimage:i?a.type_bg_image:"",photoswipe:i?a.photoswipe:""},r=(Rexbuilder_Dom_Util.updateImageBG(s,l),{$elem:t,color:void 0!==a.color_bg_block?a.color_bg_block:"",active:void 0===a.color_bg_block_active||a.color_bg_block_active.toString()}),n=(-1===r.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockBackgroundColor(r):Rexbuilder_Dom_Util.updateBlockBackgroundGradient(r),{$elem:t,color:void 0!==a.overlay_block_color?a.overlay_block_color:"",active:void 0!==a.overlay_block_color_active&&a.overlay_block_color_active.toString()}),e=(-1===n.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockOverlay(n):Rexbuilder_Dom_Util.updateBlockOverlayGradient(n),Rexbuilder_Dom_Util.updateBlockPaddings(t,_getPaddingsDataString(void 0!==a.block_padding?a.block_padding:"")),void 0===a.block_custom_class?"":a.block_custom_class),i=[],l=(""!=e&&(i=(e=e.trim()).split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(t,i),void 0!==a.block_flex_position?a.block_flex_position.split(" "):""),r={x:l[0],y:l[1]};Rexbuilder_Dom_Util.updateFlexPostition(t,r);n={x:(l=void 0!==a.block_flex_img_position?a.block_flex_img_position.split(" "):"")[0],y:l[1]},Rexbuilder_Dom_Util.updateImageFlexPostition(t,n),e=void 0===a.slider_dimension_ratio?"":a.slider_dimension_ratio,o.attr("data-slider_ratio",e),i=void 0===a.block_ratio?"":a.block_ratio,o.attr("data-block_ratio",i),r=void 0===a.block_dimensions_live_edited?"":a.block_dimensions_live_edited;o.attr("data-block_dimensions_live_edited",r);void 0!==a.hide&&"true"==a.hide.toString()?(t.hasClass("rex-hide-element")||t.addClass("rex-hide-element"),Rexbuilder_Util.stopBlockVideos(t)):(t.hasClass("rex-hide-element")&&t.removeClass("rex-hide-element"),Rexbuilder_Util.playBlockVideos(t));var d,u,c,l=void 0!==a.element_edited&&"true"==a.element_edited.toString();for(d in t.attr("data-rexlive-element-edited",l),a)switch(d){case"type":o.attr("data-type",a.type);break;case"size_x":t.attr("data-width",a.size_x);break;case"size_y":t.attr("data-height",a.size_y);break;case"row":t.attr("data-row",a.row);break;case"col":t.attr("data-col",a.col);break;case"photoswipe":Rexbuilder_Util.editorMode||(""===a.linkurl&&"true"==a.photoswipe?(Rexbuilder_Photoswipe.addElement(s,a.image_bg_url,parseInt(a.image_width),parseInt(a.image_height),a.image_size),t.parents(".rexpansive_section").addClass("photoswipe-gallery")):Rexbuilder_Photoswipe.removeElement(s)),o.attr("data-photoswipe",a.photoswipe);break;case"linkurl":Rexbuilder_Util.editorMode||(u=s.parents(".element-link"),""!=a.linkurl?0!=u.length?(u.attr("href",a.linkurl),u.attr("title",a.linkurl)):(c=s.parent(),tmpl.arg="link",c.append('<a class="element-link hovered" href="'+a.linkurl+'" title="'+a.linkurl+'"></a>'),c=c.children(".element-link"),s.detach().appendTo(c)):0!=u.length&&u.children().unwrap()),Rexbuilder_Dom_Util.updateBlockUrl(t,a.linkurl)}}var _getDefaultBlockMeasure=function(n){var l={defDefaultWidth:3,defDefaultHeight:4,defMobileWidth:12,defMobileHeight:null};return""!==(n=void 0!==n?n:"")&&$pageCustomizationsDataDiv.find(".customization-wrap").each(function(e,t){for(var i=$(t),a=t.getAttribute("data-customization-name"),o=JSON.parse(i.find(".section-targets[data-section-rex-id="+n+"]").text()),r=0,s=o.length;r<s;r++)if("self"===o[r].name){switch(o[r].props.layout){case"masonry":"mobile"==a?l.defMobileHeight=52:l.defDefaultHeight=Math.ceil(4*o[r].props.grid_cell_width/5);break;case"fixed":"mobile"==a?l.defMobileHeight=4:l.defDefaultHeight=4}break}}),l.defMobileHeight||(l.defMobileHeight=52),l},_updateModelsLive=function(e,t,i){Rexbuilder_Util.domUpdating=!0;for(var a,o=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),r=o.length,s=0;s<r;s++)o[s].getAttribute("data-rexlive-model-id")==e&&o[s].getAttribute("data-rexlive-model-number")!=i&&(a=$(o[s]),_updateDOMelements(a,t,!1));Rexbuilder_Util.domUpdating=!1},_saveCustomizationDomOrder=function(e){$layoutsDomOrder.children().remove();for(var t,i,a=[],o=0,r=e.length;o<r;o++){var s=document.createElement("script");for(Rexbuilder_Util.addClass(s,"layout-sections"),s.setAttribute("data-rex-layout-name",e[o].name),a=[],t=0,i=e[o].sections.length;t<i;t++)a.push(e[o].sections[t]);s.textContent=JSON.stringify(a),$(s).appendTo($layoutsDomOrder[0])}},_getPageDefaultDom=function(){var e=$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="default"]');return{name:"default",sections:JSON.parse(e.text())}},_getPageCustomizationsDom=function(){var i=[];return $layoutsDomOrder.children('.layout-sections:not([data-rex-layout-name="default"])').each(function(e,t){t=$(t);i.push({name:t.attr("data-rex-layout-name"),sections:JSON.parse(t.text())})}),i},_updatePageCustomizationsDomOrder=function(e){for(var t=0,i=e.length;t<i;t++)$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="'+e[t].name+'"]').text(JSON.stringify(e[t].sections))},_getPageAvaiableLayoutsNames=function(){return JSON.parse($availableLayoutNames.text())},_getLayoutLiveSectionTargets=function(e){var i,a,o=[];return e.hasClass("rex-model-section")?(i=e.attr("data-rexlive-model-id"),$liveDataContainer.children().each(function(e,t){t=$(t);if(i==t.attr("data-model-id"))return o=JSON.parse(t.text()),!1})):(a=e.attr("data-rexlive-section-id"),$liveDataContainer.children().each(function(e,t){t=$(t);if(a==t.attr("data-section-rex-id"))return o=JSON.parse(t.text()),!1})),o},_applyDefaultBlocksDimentions=function(e,t,i){for(var a=_getDefaultLayoutState(),o=e.attr("data-rexlive-section-id"),r=0,s=a.length;r<s;r++)if(o==a[r].section_rex_id){var n=a[r].targets;i.layout=n[0].props.layout,i.fullHeight=n[0].props.full_height,i.collapsed=void 0!==n[0].props.collapsed&&n[0].props.collapsed;for(var l=1,d=t.length;l<d;l++)for(var u=0,c=n.length;u<c;u++){var _=t[l];_.name==n[u].name&&(_.props.gs_x=n[u].props.gs_x,_.props.gs_y=n[u].props.gs_y,_.props.gs_width=n[u].props.gs_width,_.props.gs_height=n[u].props.gs_height,_.props.gs_start_h=n[u].props.gs_start_h)}break}},_createDefaultLayoutState=function(e){var t,i;for($defaultLayoutState.children().remove(),t=0,i=e.length;t<i;t++){var a=$(document.createElement("script"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($defaultLayoutState[0])}$defaultLayoutState.removeAttr("data-empty-default-customization")},_updateDefaultLayoutState=function(e){var t,o,r,s,i,a,n=void 0===e.pageData?[]:e.pageData,l=void 0===e.modelsData?[]:e.modelsData;if(0==n.length)$defaultLayoutState.children(".section-targets").each(function(e,t){var i=$(t),a=isNaN(parseInt(i.attr("data-model-id")))?-1:parseInt(i.attr("data-model-id"));if(-1!=a)for(o=0;o<l.length;o++)if(a==l[o].id){for(r=0,s=l[o].customizations.length;r<s;r++)if("default"==l[o].customizations[r].name){i.text(JSON.stringify(l[o].customizations[r].targets));break}break}});else for($defaultLayoutState.children(".section-targets").remove(),t=0,i=n.length;t<i;t++){var d=$(document.createElement("script"));if(d.addClass("section-targets"),d.attr("data-section-rex-id",n[t].section_rex_id),d.attr("data-model-id",n[t].section_model_id),d.attr("data-model-number",n[t].section_model_number),d.attr("data-section-hide",n[t].section_hide),""==n[t].section_model_id||-1==n[t].section_model_id)d.text(JSON.stringify(n[t].targets));else if(-1!=n[t].section_model_id)for(o=0,a=l.length;o<a;o++)if(n[t].section_model_id==l[o].id){for(r=0,s=l[o].customizations.length;r<s;r++)if("default"==l[o].customizations[r].name){d.text(JSON.stringify(l[o].customizations[r].targets));break}break}d.appendTo($defaultLayoutState[0])}},_updateDefaultLayoutStateDOMOrder=function(e){for(var t,i,a,o,r=_getDefaultLayoutState(),s=[],n=0,l=(e=jQuery.extend(!0,[],e)).length;n<l;n++)if(-1!=e[n].modelID){for(o=!1,t=0,i=s.length;t<i;t++)if(s[t].id==e[n].modelID){s[t].number=s[t].number+1,e[n].modelNumber=s[t].number,o=!0;break}o||(s.push({id:e[n].modelID,number:1}),e[n].modelNumber=1)}var d,u=[];for(n=0,l=e.length;n<e;n++){for(t=0,a=r.length;t<a;t++)-1!=e[n].modelID?e[n].modelID==r[t].section_model_id&&e[n].modelNumber==r[t].section_model_number&&(d=r.splice(t,1)):e[n].rexID==r[t].section_rex_id&&(d=r.splice(t,1));u.push(d[0])}_updateDefaultLayoutState({pageData:u})},_updateDefaultLayoutStateSection=function(e,i){var a,t=e[0],o=(i=void 0===i?-1:i,Rexbuilder_Dom_Util.fixModelNumbers(),Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout)),r=!1;if(hasClass(t,"rex-model-section")){var s=t.getAttribute("data-rexlive-model-id"),n=t.getAttribute("data-rexlive-section-number"),l=(d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets"))).length;for(u=0;u<l;u++)s==d[u].getAttribute("data-model-id")&&(d[u].textContent=JSON.stringify(o),n==d[u].getAttribute("data-model-number"))&&(r=!0)}else{var d,u,c=t.getAttribute("data-rexlive-section-id"),l=(d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets"))).length;for(u=0;u<l;u++)c==d[u].getAttribute("data-section-rex-id")&&(d[u].textContent=JSON.stringify(o),r=!0)}r||((e={section_rex_id:t.getAttribute("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1}).section_hide=hasClass(t,"rex-hide-section"),hasClass(t,"rex-model-section")&&(e.section_is_model=!0,e.section_model_id=t.getAttribute("data-rexlive-model-id"),e.section_model_number=t.getAttribute("data-rexlive-model-number")),t=document.createElement("script"),addClass(t,"section-targets"),t.setAttribute("data-section-rex-id",e.section_rex_id),t.setAttribute("data-model-id",e.section_model_id),t.setAttribute("data-model-number",e.section_model_number),t.setAttribute("data-section-hide",e.section_hide),t.textContent=JSON.stringify(o),e=$(t),-1==i?e.appendTo($defaultLayoutState[0]):(i-=1,$defaultLayoutState.children(".section-targets").each(function(e,t){if(e==i)return a=$(t),!1}),a.after(e[0])))},_getDefaultLayoutState=function(){var s=[];return $defaultLayoutState.children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),t=""!=t.text()?JSON.parse(t.text()):[];s.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,targets:t})}),s},_updateSectionOrderCustomLayouts=function(e,t){for(var i,a,o,r,s,n,l=Rexbuilder_Util.getPageCustomizationsDom(),d=0,u=t.length;d<u;d++)if(t[d].rexID==e.rexID&&t[d].modelNumber==e.modelNumber&&t[d].modelID==e.modelID){a=d;break}for(d=0,r=l.length;d<r;d++){for(i=!1,o=0,s=l[d].sections.length;o<s;o++)if(l[d].sections[o].section_is_model){if(l[d].sections[o].section_model_id==e.modelID&&l[d].sections[o].section_model_number==e.modelNumber){void 0!==l[d].sections[o].section_created_live&&"true"==l[d].sections[o].section_created_live.toString()&&(i=!0);break}}else if(e.rexID==l[d].sections[o].section_rex_id){void 0!==l[d].sections[o].section_created_live&&"true"==l[d].sections[o].section_created_live.toString()&&(i=!0);break}i&&(n=l[d].sections.splice(o,1)[0],l[d].sections.splice(a,0,n))}Rexbuilder_Util.updatePageCustomizationsDomOrder(l)},_updateSectionStateLive=function(e){Rexbuilder_Dom_Util.fixModelNumbers();var i,a,t,o=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),r=!1;e.hasClass("rex-model-section")?(i=e.attr("data-rexlive-model-id"),$liveDataContainer.children().each(function(e,t){t=$(t);i==t.attr("data-model-id")&&(t.text(JSON.stringify(o)),r=!0)})):(a=e.attr("data-rexlive-section-id"),$liveDataContainer.children().each(function(e,t){t=$(t);a==t.attr("data-section-rex-id")&&(t.text(JSON.stringify(o)),r=!0)})),r||((t={section_rex_id:e.attr("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1}).section_hide=e.hasClass("rex-hide-section"),e.hasClass("rex-model-section")&&(t.section_is_model=!0,t.section_model_id=e.attr("data-rexlive-model-id"),t.section_model_number=e.attr("data-rexlive-model-number")),(e=$(document.createElement("script"))).addClass("section-targets"),e.attr("data-section-rex-id",t.section_rex_id),e.attr("data-model-id",t.section_model_id),e.attr("data-model-number",t.section_model_number),e.attr("data-section-hide",t.section_hide),e.text(JSON.stringify(o)),e.appendTo($liveDataContainer[0]))},_getGridLayoutLive=function(e){var i,a,o,t={layout:"fixed",fullHeight:!1,collapsed:!1};return e.hasClass("rex-model-section")?(a=e.attr("data-rexlive-model-id"),$liveDataContainer.children(".section-targets").each(function(e,t){t=$(t);a==t.attr("data-model-id")&&(i=JSON.parse(t.text()))})):(o=e.attr("data-rexlive-section-id"),$liveDataContainer.children(".section-targets").each(function(e,t){t=$(t);o==t.attr("data-section-rex-id")&&(i=JSON.parse(t.text()))})),t.layout=i[0].props.layout,t.fullHeight=i[0].props.full_height,t.collapsed=i[0].props.collapse_grid,t},_getLayoutSectionTargets=function(e,t){t=void 0===t?"default":t;var i,a,o,r,s=[];if(e.hasClass("rex-model-section")){for(var n=e.attr("data-rexlive-model-id"),l=_getModelsCustomizations(),d=0,u=l.length;d<u;d++)if(l[d].id==n){for(i=0,a=l[d].customizations.length;i<a;i++)if(l[d].customizations[i].name==t){s=jQuery.extend(!0,[],l[d].customizations[i].targets);break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(d=0,o=_.length;d<o;d++)if(_[d].name==t&&void 0!==_[d].sections){for(i=0,r=_[d].sections.length;i<r;i++)if(_[d].sections[i].section_rex_id==c){s=jQuery.extend(!0,[],_[d].sections[i].targets);break}break}}return s},_getDefaultBlockProps=function(e,t){for(var i=_getLayoutSectionTargets(e,"default"),a={},o=1,r=i.length;o<r;o++)if(i[o].name==t){a=jQuery.extend(!0,{},i[o].props);break}return a},_getGridLayout=function(e,t){t=void 0===t?"default":t;var i,a,o,r,s={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){for(var n=e.attr("data-rexlive-model-id"),l=_getModelsCustomizations(),d=0,u=l.length;d<u;d++)if(l[d].id==n){for(i=0,a=l[d].customizations.length;i<a;i++)if(l[d].customizations[i].name==t){s.layout=l[d].customizations[i].targets[0].props.layout,s.fullHeight=l[d].customizations[i].targets[0].props.full_height,s.collapsed=l[d].customizations[i].targets[0].props.collapse_grid;break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(d=0,o=_.length;d<o;d++)if(_[d].name==t&&void 0!==_[d].sections&&null!==typeof _[d].sections){for(i=0,r=_[d].sections.length;i<r;i++)if(_[d].sections[i].section_rex_id==c){0!=_[d].sections[i].targets.length&&(s.layout=_[d].sections[i].targets[0].props.layout,s.fullHeight=_[d].sections[i].targets[0].props.full_height,s.collapsed=_[d].sections[i].targets[0].props.collapse_grid);break}break}}return s},_customizationExists=function(e){for(var t=!1,i=[],a=0,o=(i=""!=$availableLayoutNames.text()?JSON.parse($availableLayoutNames.text()):i).length;a<o;a++)if(i[a]==e){t=!0;break}return t},updateSection=function(e,t,i,a){var o=e.children(".section-data"),r=isNaN(parseInt(i.video_bg_id))?"":parseInt(i.video_bg_id),s=void 0===i.video_bg_url_section?"":i.video_bg_url_section,n=void 0===i.video_bg_url_vimeo_section?"":i.video_bg_url_vimeo_section,l="",d=(""!=r?l="mp4":""!=n?l="vimeo":""!=s&&(l="youtube"),"undefined"!==i.custom_classes&&-1!==i.custom_classes.indexOf("rex-video--with-audio")),r={mp4Data:{idMp4:r,linkMp4:void 0===i.video_mp4_url?"":i.video_mp4_url,width:void 0===i.video_bg_width_section?"":i.video_bg_width_section,height:void 0===i.video_bg_height_section?"":i.video_bg_height_section},vimeoUrl:n,youtubeUrl:s,audio:d,typeVideo:l},n=(Rexbuilder_Dom_Util.updateSectionVideoBackground(e,r),{active:void 0===i.image_bg_section_active||i.image_bg_section_active.toString(),idImage:isNaN(parseInt(i.id_image_bg_section))?"":parseInt(i.id_image_bg_section),urlImage:i.image_bg_section,width:parseInt(i.image_width),height:parseInt(i.image_height)}),s={color:i.row_overlay_color,active:void 0!==i.row_overlay_active&&i.row_overlay_active.toString()},d=(Rexbuilder_Dom_Util.updateImageBG(e,n),{color:void 0!==i.color_bg_section?i.color_bg_section:"",active:void 0===i.color_bg_section_active||i.color_bg_section_active.toString()}),l=(-1===d.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionBackgroundColor(e,d):Rexbuilder_Dom_Util.updateSectionBackgroundGradient(e,d),-1===s.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionOverlay(e,s):Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,s),{top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)}),r=(Rexbuilder_Dom_Util.updateSectionMarginsData(e,l),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1,i.layout=o.attr("data-layout")),{gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:void 0!==i.collapse_grid&&("true"==i.collapse_grid.toString()||a),noMobileLayoutSaved:!!i.noMobileLayoutSaved}),n=(Rexbuilder_Dom_Util.updateRow(e,o,t,r),void 0===i.section_name?"":i.section_name),d=(Rexbuilder_Dom_Util.updateSectionName(e,n),e.attr("data-type",i.type),void 0===i.custom_classes?"":i.custom_classes),s=[],l=(""!=d&&(s=(d=d.trim()).split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(e,s),void 0!==i.section_edited&&"true"==i.section_edited.toString());e.attr("data-rexlive-section-edited",l)},updateSectionTools=function(e,t,i,a){var o={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)},o=(Rexbuilder_Section.fixSectionToolbox(e,o),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1),{gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:void 0!==i.collapse_grid&&("true"==i.collapse_grid.toString()||a)});Rexbuilder_Section.fixBlockToolsAccordingToSeparator(e,o)},updateElementDimensions=function(e,t,i){var a=parseInt(i.x),o=parseInt(i.y),r=parseInt(i.w),s=parseInt(i.h),n=parseInt(i.startH),l=(parseInt(i.increaseHeight),parseInt(i.realFluid));void 0!==i.gridstackInstance&&i.gridstackInstance?i.gridstackInstance.update(e,a,o,r,s):(e.setAttribute("data-gs-height",s),e.setAttribute("data-gs-width",r),e.setAttribute("data-gs-y",o),e.setAttribute("data-gs-x",a)),t.setAttribute("data-gs_start_h",n),t.setAttribute("data-gs_width",r),t.setAttribute("data-gs_height",s),t.setAttribute("data-gs_y",o),t.setAttribute("data-gs_x",a),t.setAttribute("data-element_real_fluid",l)},_detect_mobile=function(){"ontouchstart"in document.documentElement?Rexbuilder_Util.addClass(document.body,"touch"):Rexbuilder_Util.addClass(document.body,"no-touch")},_viewport=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},_merge=function(e,t){function i(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?a[t]=merge(a[t],e[t]):a[t]=e[t])}var a={};return i(e),i(t),a},getYoutubeID=function(e){e=0<e.indexOf("youtu.be")?e.substr(e.lastIndexOf("/")+1,e.length):-1<e.indexOf("http")?e.match(/[\\?&]v=([^&#]*)/)[1]:15<e.length?null:e;return e},_checkPresentationPage=function(){return 0!==$(".rexpansive_portfolio_presentation").length},_checkStaticPresentationPage=function(){return 0!==$(".rexpansive-static-portfolio").length},_checkPost=function(){return 0!==$("#rex-article").length},_whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},_whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},doneResizing=function(){if(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.editorMode){if(!Rexbuilder_Util_Editor.changedLayout)return"default"===Rexbuilder_Util.chosenLayoutData.id&&_updateGridsHeights(),void(Rexbuilder_Util.windowIsResizing=!1);Rexbuilder_Util_Editor.changedLayout=!1,0===edit_dom_layout(Rexbuilder_Util_Editor.clickedLayoutID).collapse_needed?Rexbuilder_Util_Editor.endLoading():Rexbuilder_Util.$document.one("rexlive:collapsingElementsEnded",function(e){Rexbuilder_Util_Editor.endLoading()})}Rexbuilder_Util.windowIsResizing=!1,Rexbuilder_Util.loadWidth=Rexbuilder_Util.globalViewport.width},_set_initial_grids_state=function(e){if(e=void 0!==e?e:"default",Rexbuilder_Util.rexContainer)for(var t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length,a=0;a<i;a++){for(var o=$(t[a]),r=o.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor,s=Rexbuilder_Util.getSectionCustomLayouts(t[a].getAttribute("data-rexlive-section-id")),n=null,l=null,d=0;d<s.length;d++){if("default"===s[d].name&&(l=d),s[d].name===e){n=d;break}d==s.length-1&&(n=l)}for(var u,c=[],d=0,_=s[n].targets.length;d<_;d++)"self"!==s[n].targets[d].name&&((u={}).el=o.find(".perfect-grid-item[data-rexbuilder-block-id="+s[n].targets[d].name+"]"),u.x=parseInt(s[n].targets[d].props.gs_x),u.y=parseInt(s[n].targets[d].props.gs_y),u.width=parseInt(s[n].targets[d].props.gs_width),u.height=parseInt(s[n].targets[d].props.gs_height),c.push(u));r.set_grid_initial_state(c)}},_updateGridsHeights=function(){if(Rexbuilder_Util.rexContainer)for(var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-row")),i=t.length,a=0;a<i;a++){void 0!==(o=(e=$(t[a])).data().plugin_perfectGridGalleryEditor)&&(o.batchGridstack(),o._defineDynamicPrivateProperties(),o.updateGridstackStyles(),o.setFullWidthNaturalBackground(),o.setNaturalBackground(),o.updateBlocksHeight(),o.commitGridstack());var o=jQuery.Event("rexlive:updateGridsHeights");o.settings={$row:e},Rexbuilder_Util.$document.trigger(o)}},_stopBlockVideos=function(e){_stopVideo(e.find(".grid-item-content"))},_playBlockVideos=function(e){_playVideoFromBegin(e.find(".grid-item-content"))},_stopPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),e=e.find(".youtube-player");$.each(t,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(i,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(e,function(e,t){Rexbuilder_Util.stopVideo($(t))})},_playPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),e=e.find(".youtube-player");Rexbuilder_Util.editorMode&&$.each(t,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(i,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(e,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))})},_stopVideo=function(e){var t;e.hasClass("mp4-player")?((t=e.children(".rex-video-wrap").find("video")[0]).currentTime=0,t.pause()):e.hasClass("vimeo-player")?(t=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]))&&t.unload():e.hasClass("youtube-player")&&void 0!==e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPStop()},_fixVideosAudioSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");Rexbuilder_Util.fixVideoAudio(e),$.each(t,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(i,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(a,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))})},_fixYoutube=function(e){for(var t=[].slice.call(e.getElementsByClassName("rex-youtube-wrap")),i=t.length,a=0;a<i;a++){var o=$(t[a]),r=o.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),s=o.YTPGetPlayer();void 0!==s&&(o.optimizeDisplay(),o.YTPPlay(),0==r.length||r.hasClass("user-has-muted")?(s.mute(),s.isMute=!0,s.setVolume(0)):o.YTPUnmute())}},_fixVideoAudio=function(e){var t,i=e.children("rex-video-toggle-audio");e.hasClass("mp4-player")?(t=e.children(".rex-video-wrap").find("video")[0],0==i.length||i.hasClass("user-has-muted")?$(t).prop("muted",!0):$(t).prop("muted",!1)):e.hasClass("vimeo-player")?(t=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]),0==i.length||i.hasClass("user-has-muted")?t&&t.setVolume(0):t.setVolume(1)):e.hasClass("youtube-player")&&void 0!==(e=(t=e.children(".rex-youtube-wrap")).YTPGetPlayer())&&(0==i.length||i.hasClass("user-has-muted")?(e.mute(),e.isMute=!0,e.setVolume(0)):t.YTPUnmute())},_playVideoFromBegin=function(e){var t=!1;if(e.hasClass("mp4-player")){var i=e.children(".rex-video-wrap").find("video")[0];i.currentTime=0,i.play(),t=!0}else if(e.hasClass("vimeo-player")){i=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);null!==i&&i.play(),t=!0}else if(e.hasClass("youtube-player")){i=e.children(".rex-youtube-wrap");if(0==i.length)return;if(void 0===i.YTPGetPlayer())return;i.YTPPlay(),t=!0}t&&setTimeout(Rexbuilder_Util.fixVideoAudio.bind(null,e),500)},setContainer=function(e){this.$rexContainer=e},_parents=function(e,t){for(;e.parentNode;){if(_matches(e,t))return e;e=e.parentNode}return null},_matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},_transitionEvent="",_animationEvent="";function _smoothScroll(e){$bodyHtml.animate({scrollTop:e.offset().top+_plugin_frontend_settings.scroll_animation_offset},600)}function getGalleryInstance(e){e=(e=e.is(".rexpansive_section")?e:e.parents(".rexpansive_section")).find(".grid-stack-row");return 0==e.length?null:e.data("plugin_perfectGridGalleryEditor")}var removeCollapsedGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=getGalleryInstance($(e[i]));Rexbuilder_Dom_Util.collapseGrid(a,!1,a.properties.dispositionBeforeCollapsing,a.properties.layoutBeforeCollapsing)}},collapseAllGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=getGalleryInstance($(e[i]));a._defineDynamicPrivateProperties(),a.collapseElements()}};function startVideoPlugin(e){var t,i;e.hasClass("mp4-player")?(t=(i=e.find(".rex-video-wrap")).children(".rex-video-container").get(0),i.removeClass("removing-video-mp4"),t.play().catch(function(e){Rexbuilder_Util.displayError("An error occurred while trying to play the video."),console.error(e)})):e.hasClass("vimeo-player")?(i=e.children(".rex-video-vimeo-wrap").find("iframe")[0],VimeoVideo.addPlayer("1",i,{autoplay:!0,background:!0,loop:!0})):e.hasClass("youtube-player")&&void 0===e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPlayer()}var _destroyVideo=function(e,t){var i="";return e.hasClass("mp4-player")?(i="mp4",Rexbuilder_Dom_Util.removeMp4Video(e,t)):e.hasClass("vimeo-player")?(i="vimeo",Rexbuilder_Dom_Util.removeVimeoVideo(e,t)):e.hasClass("youtube-player")&&(i="youtube",Rexbuilder_Dom_Util.removeYoutubeVideo(e,t)),i},_pauseVideo=function(e){e.hasClass("mp4-player")?e.children(".rex-video-wrap").find("video")[0].pause():e.hasClass("vimeo-player")?VimeoVideo.findVideo(e.find(".rex-video-vimeo-wrap").find("iframe")[0]).pause():e.hasClass("youtube-player")&&void 0!==e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPPause()},_launchVideoPlugins=function(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){var ytVideos=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rex-youtube-wrap")),i,tot_ytVideos=ytVideos.length,$ytVideo,data_yt,url,id;if(jQuery.browser.mobile)for(i=0;i<tot_ytVideos;i++)data_yt=eval("("+ytVideos[i].getAttribute("data-property")+")"),url=data_yt.videoURL,id=getYoutubeID(url),ytVideos[i].style.backgroundImage="url(https://img.youtube.com/vi/"+id+"/0.jpg)",ytVideos[i].addEventListener("click",handleYtbVideoMobileClick);else for(i=0;i<tot_ytVideos;i++){if($ytVideo=$(ytVideos[i]),void 0===$ytVideo.YTPGetPlayer()&&!Rexbuilder_Util.hasClass(ytVideos[i],"youtube-player-launching"))return void $ytVideo.YTPlayer();Rexbuilder_Util.removeClass(ytVideos[i],"youtube-player-launching")}VimeoVideo.init()}};function handleYtbVideoMobileClick(ev){ev.preventDefault();var data_yt=eval("("+this.getAttribute("data-property")+")"),url=data_yt.videoURL;window.location.href=url}var _playAllVideos=function(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("mp4-player")),i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("vimeo-player")),a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("youtube-player")),o=t.length,r=i.length,s=a.length;if(Rexbuilder_Util.editorMode)for(e=0;e<o;e++)Rexbuilder_Util.playVideo($(t[e]));for(e=0;e<r;e++)Rexbuilder_Util.playVideo($(i[e]));for(e=0;e<s;e++)Rexbuilder_Util.playVideo($(a[e]))}},_playVideo=function(e){var t,e=e[0];void 0!==e&&(Rexbuilder_Util.hasClass(e,"mp4-player")?(t=e.querySelector("video"))&&t.play():Rexbuilder_Util.hasClass(e,"vimeo-player")?(t=VimeoVideo.findVideo(e.querySelector("iframe")))&&t.play():Rexbuilder_Util.hasClass(e,"youtube-player")&&(t=e.querySelector(".rex-youtube-wrap"))&&void 0!==(e=$(t)).YTPGetPlayer()&&e.YTPPlay())},_getPaddingsDataString=function(e){var t,i={top:"5",right:"5",bottom:"5",left:"5",type:"px"};return""!=e&&(e=e.split(/;/gm),i.top=parseInt(e[0].split(/\D+/gm)[0]),i.right=parseInt(e[1].split(/\D+/gm)[0]),i.bottom=parseInt(e[2].split(/\D+/gm)[0]),i.left=parseInt(e[3].split(/\D+/gm)[0]),t="",t=-1!=e[0].indexOf("%")?"%":"px",i.type=t),i},_paddingsToString=function(e){var t="";return(t+=""+e.top+e.type+";")+(""+e.right+e.type+";")+(""+e.bottom+e.type+";")+(""+e.left+e.type+";")},getCoord=function(e,t){return{x:e%(t=void 0!==t?t:12),y:Math.floor(e/t)}},_diffStrings=function(e,t){t=void 0!==t?t:" ";for(var i,a=e.join(" ").split(t),o={},r=[],s=0,n=a.length;s<n;s++)o[a[s]]=void 0!==o[a[s]]?o[a[s]]+1:1;for(i in o)1===o[i]&&r.push(i);return r};function handleLayoutChange(e){for(var t,i,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),o=a.length,r=(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,[]),s=[],n=0;n<o;n++)Rexbuilder_Util.hasClass(a[n],"rex-model-section")&&r.push(parseInt(a[n].getAttribute("data-rexlive-model-id"))),t={rexID:a[n].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(a[n].getAttribute("data-rexlive-model-id")))?"":parseInt(a[n].getAttribute("data-rexlive-model-id"))},s.push(t);for(var l,d,u=Rexbuilder_Util.getPageCustomizations(),c=("default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.saveCustomizationDomOrder(jQuery.extend(!0,[],u)),Rexbuilder_Util.getModelsCustomizations()),_=("true"==$defaultLayoutState.attr("data-empty-default-customization")?(l=Rexbuilder_Util.getDefaultPageLayout(u,c),_createDefaultLayoutState(l)):(Rexbuilder_Util.updateDefaultLayoutState({modelsData:c}),l=Rexbuilder_Util.getDefaultLayoutState()),Rexbuilder_Util.getCustomLayoutSections(u,c,l,e)),g=[],m=0;m<_;m++)if("true"==_[m].section_is_model.toString()){for(d=!1,i=0;i<g.length;i++)if(g[i].id==_[m].section_model_id){g[i].number=g[i].number+1,_[m].section_model_number=g[i].number,d=!0;break}d||(_[m].section_model_number=1,g.push({id:_[m].section_model_id,number:1}))}Rexbuilder_Util.clearSectionsEdited();var p,b,f,h=_mergeSections(_,l),v=(Rexbuilder_Util.domUpdating=!0,[]);for(p in h)h[p].notInSection&&"default"!=e||(b={rexID:h[p].section_rex_id,modelID:-1,modelNumber:-1},(f="true"==h[p].section_is_model.toString()?(b.modelID=h[p].section_model_id,b.modelNumber=h[p].section_model_number,Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+h[p].section_rex_id+'"][data-rexlive-model-number="'+b.modelNumber+'"]')):Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+h[p].section_rex_id+'"]'))&&!Rexbuilder_Util.hasClass(f,"removing_section")&&(void 0!==h[p].section_hide&&"true"==h[p].section_hide.toString()?Rexbuilder_Util.addClass(f,"rex-hide-section"):(Rexbuilder_Util.removeClass(f,"rex-hide-section"),updateRexGrid(f,h[p].targets,!1,p)),v.push(b)));Rexbuilder_Dom_Util.fixSectionDomOrder(v,!0),Rexbuilder_Util.domUpdating=!1}function updateRexGrid(e,t,i){var a=$(e),o=a.find(".grid-stack-row"),r=t[0].props.collapse_grid;-1!==t[0].props.custom_classes.indexOf("rex-block-grid")&&(r=!1),e.querySelector(".section-data").setAttribute("data-collapse-grid",r),t[0].props.gridEdited&&o.attr("data-rexlive-layout-changed",!0);for(var s,n,l,d,u,c,_=t.length,g=1;g<_;g++){var m=o.children('div[data-rexbuilder-block-id="'+t[g].name+'"]');void 0!==t[g].props.hide&&"true"==t[g].props.hide.toString()?m.hasClass("rex-hide-element")||m.addClass("rex-hide-element"):m.hasClass("rex-hide-element")&&m.removeClass("rex-hide-element")}for(g=1;g<_;g++)if((!t[g].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(d=t[g].name,s=t[g].props,d=(m=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+d+'"]'))[0],n=m.children(".rexbuilder-block-data"),l=m.find(".grid-item-content"),0<m.length)){if(c=(u=[].slice.call(d.getElementsByTagName("img"))).length,!Rexbuilder_Util.editorMode&&0!==c)for(var p=0;p<c;p++)"true"===u[p].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(u[p]));Rexbuilder_Util.updateDOMSingleElement({$elem:m,targetProps:s,$itemData:n,$itemContent:l,gridstackInstance:null,positionAndSize:!0,collapseGrid:r})}updateSection(a,o,t[0].props,i)}function removeArrayDuplicates(e){return e.filter(function(e,t,i){return i.indexOf(e)===t})}function isOrIsChild(e,t){return!!e.matches(t)||0!==$(e).parents(t).length}function displayError(e,t){"string"!=typeof e&&(e=e.toString()),/^\[Rexpansive\]/.test(e)||(e="[Rexpansive] "+e),console.error(e),t&&"string"==typeof t&&alert(t)}function displayAjaxError(e,t,i){"string"!=typeof t&&(t=t.toString()),/^\[Rexpansive\]/.test(t)||(t="[Rexpansive] "+t),console.error(t,{status:e.response.status,message:e.textStatus,errorThrown:e.errorThrown}),i&&"string"==typeof i&&alert(i)}var init=function(){this.globalViewport=Rexbuilder_Util.viewport(),this.firstStart=!0,this.isIframe=window.location!==window.parent.location,_plugin_frontend_settings.scroll_animation_offset=0,Rexbuilder_Util.changedFrontLayout=!1,_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing?this.editorMode=!0:this.editorMode=!1,this._transitionEvent=_whichTransitionEvent(),this._animationEvent=_whichAnimationEvent(),this.$window=$(window),this.$document=$(document),this.$body=$("body"),$bodyHtml=$("body, html"),this.galleryPluginActive=!1,_detect_mobile(),$rexbuilderLayoutData=$(document.getElementById("rexbuilder-layout-data")),$rexbuilderModelData=$(document.getElementById("rexbuilder-model-data")),$availableLayoutNames=$(document.getElementById("available-layouts-names"));var e=$(document.getElementById("layout-avaiable-dimensions")),t=(frontAvailableLayouts=0<e.length?JSON.parse(e.text()):[],$availableLayoutNames.text()),e=(layoutSavedInfo=frontAvailableLayouts.filter(function(e){return-1!==t.indexOf(e.id)}),this.editorMode||(Rexbuilder_Util.startFrontLayout=_findFrontLayout()),$modelsCustomizationsDataDiv=$("#rexbuilder-model-data").children(".models-customizations").eq(0),$pageCustomizationsDataDiv=$rexbuilderLayoutData.children(".layouts-customizations").eq(0),$liveDataContainer=$("#rexbuilder-layout-data-live"),$layoutsDomOrder=$("#rexbuilder-layouts-sections-order"),$defaultLayoutState=$("#rexbuilder-default-layout-state"),$usedIDSContainer=$("#sections-ids-used"),_storeNamesUsed(),$usedBlocksIDsContainer=$("#blocks-ids-used"),_storeBlocksIDsUsed(),this.$rexContainer=$(".rex-container"),this.rexContainer=this.$rexContainer[0],0===this.$rexContainer.length&&console.warn("[Rexpansive] No rexContainer detected! This may cause problems."),this.backendEdited=!1,0<Rexbuilder_Util.$rexContainer.length&&"true"==Rexbuilder_Util.$rexContainer.attr("data-backend-edited").toString()&&(Rexbuilder_Util.$rexContainer.addClass("backend-edited"),this.backendEdited=!0),this.lastSectionNumber=-1,this.activeLayout="",this.domUpdating=!1,this.$rexContainer.children(".rexpansive_section").eq(0).attr("data-rex-collapse-grid"));this.blockGridUnder768=void 0!==e&&"false"==e.toString(),this.chosenLayoutData=null,this.loadWidth=Rexbuilder_Util.globalViewport.width,_updateSectionsIDs(),_updateBlocksIDs(),Rexbuilder_Dom_Util.fixModelNumbers(),_updateSectionsNumber(),this.firstStart=!1};return{init:init,viewport:_viewport,getYoutubeID:getYoutubeID,transitionEvent:_transitionEvent,animationEvent:_animationEvent,checkPresentationPage:_checkPresentationPage,checkStaticPresentationPage:_checkStaticPresentationPage,editorMode:editorMode,windowIsResizing:windowIsResizing,launchVideoPlugins:_launchVideoPlugins,stopPluginsSection:_stopPluginsSection,playPluginsSection:_playPluginsSection,stopBlockVideos:_stopBlockVideos,playBlockVideos:_playBlockVideos,chooseLayout:chooseLayout,predictLayout:predictLayout,setContainer:setContainer,createRandomID:createRandomID,createRandomNumericID:_createRandomNumericID,responsiveLayouts:responsiveLayouts,defaultLayoutSections:defaultLayoutSections,launchEditDomLayout:launchEditDomLayout,edit_dom_layout:edit_dom_layout,smoothScroll:_smoothScroll,getGalleryInstance:getGalleryInstance,removeCollapsedGrids:removeCollapsedGrids,collapseAllGrids:collapseAllGrids,stopVideo:_stopVideo,playVideoFromBegin:_playVideoFromBegin,pauseVideo:_pauseVideo,playVideo:_playVideo,destroyVideo:_destroyVideo,startVideoPlugin:startVideoPlugin,getPaddingsDataString:_getPaddingsDataString,paddingsToString:_paddingsToString,playAllVideos:_playAllVideos,findLayoutType:_findLayoutType,updateModelsLive:_updateModelsLive,getLayoutSectionTargets:_getLayoutSectionTargets,updateElementDimensions:updateElementDimensions,getGridLayout:_getGridLayout,customizationExists:_customizationExists,getDefaultBlockProps:_getDefaultBlockProps,fixVideosAudioSection:_fixVideosAudioSection,fixVideoAudio:_fixVideoAudio,fixYoutube:_fixYoutube,saveCustomizationDomOrder:_saveCustomizationDomOrder,getDefaultPageLayout:_getDefaultPageLayout,getModelsCustomizations:_getModelsCustomizations,updateModelsCustomizationsData:_updateModelsCustomizationsData,getPageCustomizations:_getPageCustomizations,updatePageCustomizationsData:_updatePageCustomizationsData,updatePageAvaiableLayoutsNames:_updatePageAvaiableLayoutsNames,getPageAvaiableLayoutsNames:_getPageAvaiableLayoutsNames,updateDivModelCustomizationsNames:_updateDivModelCustomizationsNames,getSectionCustomLayouts:_getSectionCustomLayouts,getLayoutLiveSectionTargets:_getLayoutLiveSectionTargets,getGridLayoutLive:_getGridLayoutLive,getCustomLayoutSections:_getCustomLayoutSections,updateSectionStateLive:_updateSectionStateLive,updatePageCustomizationsDomOrder:_updatePageCustomizationsDomOrder,getPageDefaultDom:_getPageDefaultDom,getPageCustomizationsDom:_getPageCustomizationsDom,updateDefaultLayoutState:_updateDefaultLayoutState,updateDefaultLayoutStateSection:_updateDefaultLayoutStateSection,updateDefaultLayoutStateDOMOrder:_updateDefaultLayoutStateDOMOrder,getDefaultLayoutState:_getDefaultLayoutState,updateSectionOrderCustomLayouts:_updateSectionOrderCustomLayouts,updateGridsHeights:_updateGridsHeights,updateDOMSingleElement:updateDOMSingleElement,getDefaultBlockMeasure:_getDefaultBlockMeasure,doneResizing:doneResizing,getCoord:getCoord,diffStrings:_diffStrings,applyDefaultBlocksDimentions:_applyDefaultBlocksDimentions,isMobile:_isMobile,cssPropertyValueSupported:_cssPropertyValueSupported,changedFrontLayout:changedFrontLayout,startFrontLayout:startFrontLayout,findFrontLayout:_findFrontLayout,parents:_parents,rtimeOut:rtimeOut,rInterval:rInterval,merge:_merge,handleLayoutChange:handleLayoutChange,removeArrayDuplicates:removeArrayDuplicates,isOrIsChild:isOrIsChild,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,createSectionID:_createSectionID,addSectionID:_addSectionID,removeSectionID:_removeSectionID,saveSectionNamesUsed:_saveSectionNamesUsed,getSectionNamesUsed:_getSectionNamesUsed,createBlockID:createBlockID,addBlockID:addBlockID,removeBlockID:removeBlockID,saveBlocksIDsUsed:saveBlocksIDsUsed,updateBlocksIDsUsed:updateBlocksIDsUsed,getBlocksIDsUsed:getBlocksIDsUsed,clearSectionsEdited:clearSectionsEdited,displayError:displayError,displayAjaxError:displayAjaxError}}(jQuery);
var Rexbuilder_Photoswipe=function(u){"use strict";function c(e){if(e=e||window.event,!(0<u(e.target).parents(".perfect-grid-item").find(".element-link").length||"a"===e.target.tagName.toUpperCase())){var t=e.target,r=p(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var i,t=u(r).parents(g)[0],n=Array.prototype.slice.call(t.getElementsByClassName("pswp-figure")),l=n.length,a=0,s=0;s<l;s++)if(1===n[s].nodeType){if(n[s]===r){i=a;break}a++}return 0<=i&&w(i,t),!1}}}var g="",f=function(e){for(var t,r,i,n=u(e).find(".pswp-figure").get(),l=n.length,a=[],s=0;s<l;s++)1===(t=n[s]).nodeType&&(i=(r=t.children[0]).getAttribute("data-size").replace("px","").split("x"),i={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},1<t.children.length&&(i.title=t.children[1].innerHTML),0<r.children.length&&(i.msrc=r.children[0].getAttribute("data-thumburl")),i.pid=s,i.el=t,a.push(i));return a},p=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))},h=function(){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"popUpContent:pswpOpened"})},m=function(){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"popUpContent:pswpClosed"})},w=function(e,t,r,i){var n,l,a=document.querySelectorAll(".pswp")[0],s=f(t),p={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=s[e].el.getElementsByClassName("pswp-item-thumb")[0],e=s[e].el.getElementsByClassName("rex-custom-scrollbar")[0],r=window.pageYOffset||document.documentElement.scrollTop,e=e.getBoundingClientRect();return"natural"==t.getAttribute("data-thumb-image-type")?{x:e.left,y:e.top+r,w:e.width}:null},galleryPIDs:!0,closeOnScroll:!1,showHideOpacity:!0};if(i)if(p.galleryPIDs){for(var o=0,d=s.length;o<d;o++)if(s[o].pid==e){p.index=o;break}}else p.index=parseInt(e,10)-1;else p.index=parseInt(e,10);Rexbuilder_Util.hasClass(t,"split-scrollable")?(n=u(t).find(".pswp-figure").eq(e).parents(".opacity-block").find(".pswp-figure").get(),i=u(t).find(".pswp-figure").eq(e).get(0),p.index=n.indexOf(i),s=s.filter(function(e){for(var t=0;t<n.length;t++)if(e.el===n[t])return!0;return!1})):0!==Array.prototype.slice.call(t.getElementsByClassName("block-has-slider")).length&&(i=Rexbuilder_Util.parents(s[e].el,".perfect-grid-item"),l=!1,i&&Rexbuilder_Util.hasClass(i,"block-has-slider")&&(l=!0),s=s.filter(function(e){e=Rexbuilder_Util.parents(e.el,".perfect-grid-item");return!e||(Rexbuilder_Util.hasClass(e,"block-has-slider")?!!l:!l)})),isNaN(p.index)||(r&&(p.showAnimationDuration=0),(t=new PhotoSwipe(a,PhotoSwipeUI_Default,s,p)).init(),Rexbuilder_Util.isIframe&&(h(),t.listen("close",m)))};return{init:function(e){g=e;for(var t=document.querySelectorAll(e),r=t.length,i=0;i<r;i++)t[i].setAttribute("data-pswp-uid",i+1),t[i].onclick=c;for(var n,l,a,s,p=t,o=p.length,d=0,u=0;d<o;d++)for(l=(n=Array.prototype.slice.call(p[d].querySelectorAll(".rex-slider-element"))).length,u=0;u<l;u++)a=n[u].querySelector(".pswp-item"),s=n[u].querySelector(".slider-overlay"),a&&s&&a.appendChild(s);e=function(){var e=window.location.hash.substring(1),t={};if(!(e.length<5)){for(var r,i=e.split("&"),n=0;n<i.length;n++)i[n]&&((r=i[n].split("=")).length<2||(t[r[0]]=r[1]));t.gid&&(t.gid=parseInt(t.gid,10))}return t}();e.pid&&e.gid&&w(e.pid,t[e.gid-1],!0,!0)},addElement:function(e,t,r,i,n){var l;e.parents(".grid-stack-item").hasClass("block-has-slider")||(tmpl.arg="image",l=e.parents(".grid-stack-item-content"),0==e.parents(".pswp-figure").length&&(e.parent().prepend(tmpl("tmpl-photoswipe-block",{link:t,width:r,height:i,type:n})),t=l.find(".pswp-item"),e.detach().appendTo(t)))},addElementFromInline:function(e){var t="alignone";void 0!==e.attr("class")&&(t=e.attr("class").split(" ")[1]),tmpl.arg="image",e.before(tmpl("tmpl-photoswipe-block-inline",{link:e.attr("src"),width:e.css("width"),height:e.css("height"),type:"natural",align:t}));t=e.parents(".text-wrap").find(".pswp-item").filter(function(e){return 3==u(this).children().length});e.detach().appendTo(t)},removeElement:function(e){var t,r=e.parents(".pswp-figure");0!=r.length&&(t=r.parent(),e.detach().appendTo(t),r.remove())},init_inline_pswp:function(e){var t,e=e.target,r=e.getAttribute("data-inline-pswp-info");void 0!==r&&""!==r&&(t=document.querySelectorAll(".pswp")[0],r=JSON.parse(r),e={galleryUID:e.getAttribute("data-pswp-uid"),closeOnScroll:!1,showHideOpacity:!0},new PhotoSwipe(t,PhotoSwipeUI_Default,r,e).init())}}}(jQuery);
/**
 * Util functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Util_Editor=function(d){var n=null;function o(){var e={eventName:"rexlive:undoRedoStackChange",stacks:{undo:Rexbuilder_Util_Editor.undoStackArray.length,redo:Rexbuilder_Util_Editor.redoStackArray.length}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function l(e){var t={sectionID:"",targetID:"",modelNumber:""},i=e.is("section")?e:e.parents(".rexpansive_section"),e=e.parents(".grid-stack-item");return t.sectionID=i.attr("data-rexlive-section-id"),i.hasClass("rex-model-section")&&(t.modelNumber=i.attr("data-rexlive-model-number")),0!=e.length?t.targetID=e.attr("data-rexbuilder-block-id"):t.targetID="self",t}function r(e,t){var i;""!=e&&(i="",i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),e=a(e),e=new RegExp("(\\s"+e+"\\s|^"+e+"\\s|\\s"+e+"$|^"+e+"$)","g"),i=(i=i.replace(e," ")).trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i))}var a=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};function s(e){for(var t,i=document.createElement("div").style,r=Rexbuilder_Util_Editor.getPrefixedValues(e),n=0;n<r.length&&(t=r[n],i.backgroundImage=t,i.backgroundImage!=t);n++);return i.backgroundImage}var u=function(e){var t={};if(void 0!==e)for(var i=e.attributes,r=0;r<i.length;r++)"class"!==i[r].name&&"style"!==i[r].name&&(t[i[r].name.replace("data-","")]=i[r].value);return t},c=function(e){var t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("highLightRow").filter(".focusedRow"),i=d(e);0!=t.length&&!i.is(t)||(i.addClass("highLightRow"),Rexbuilder_Util_Editor.visibleRow=e,Rexbuilder_Util_Editor.visibleRowInfo={sectionID:e.getAttribute("data-rexlive-section-id"),modelNumber:void 0!==e.getAttribute("data-rexlive-model-number")?e.getAttribute("data-rexlive-model-number"):"",modelEditing:void 0!==e.getAttribute("data-rexlive-model-editing")?e.getAttribute("data-rexlive-model-editing"):""},t={},i=i.find(".section-data")[0],(t=u(i)).collapse=e.getAttribute("data-rex-collapse-grid"),i={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:t},Rexbuilder_Util_Editor.sendParentIframeMessage(i))},x=function(e,t,i){i=t=0;var r=e.offset().top,e=e.height(),n=d(window).scrollTop();return!(r+t<n&&n<r+e+i)};function m(){var e=d(window).height(),o=.8*e,l=.3*e,a=null;return Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(e,t){var i=d(t),r=i.offset().top,i=i.height(),n=d(window).scrollTop();if(r-o<n&&n<r+i-l)return a=t,!1}),a}function _(){var e,t,i,r=m();null!==(r=n?n:r)&&Rexbuilder_Util_Editor.visibleRow!==r&&c(r),r=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.focusedRow"),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first(),0<r.length?x(r)?r.is(i)?e={eventName:"rexlive:hideTopFastTools"}:0<t.length?r.is(t)&&(e={eventName:"rexlive:hideTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:0<t.length&&!r.is(t)||(e={eventName:"rexlive:viewTopFastTools"}):e={eventName:"rexlive:hideTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(e)}return{init:function(){this.elementIsResizing=!1,this.elementIsDragging=!1,this.sectionCopying=!1,this.blockCopying=!1,this.editingGallery=!1,this.editingElement=!1,this.editedElement=null,this.manageElement=!1,this.editedGallery=null,this.editedTextWrap=null,this.activateElementFocus=!1,this.mouseDownEvent=null,this.mouseUpEvent=null,this.mouseDown=!1,this.mouseUp=!1,this.mousePosition=null,this.mouseClickObject=null,this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexbuilder_Util.globalViewport,this.elementDraggingTriggered=!1,this.focusedElement=null,this.hasResized=!1,this.changedLayout=!1,this.clickedLayoutID="",this.undoActive=!1,this.redoActive=!1,this.updatingGridstack=!1,this.addingNewBlocks=!1,this.removingBlocks=!1,this.updatingImageBg=!1,this.updatingPaddingBlock=!1,this.updatingCollapsedGrid=!1,this.updatingSectionWidth=!1,this.updatingSectionLayout=!1,this.savingPage=!1,this.savingModel=!1,this.openingModel=!1,this.insertingModel=!1,this.visibleRow=null,this.visibleRowInfo={},this.scrollbarsActive=!1,this.dragAndDropFromParent=!1,this.undoStackArray=[],this.redoStackArray=[],this.needToSave=!0,this.$styleElement=d("#rexpansive-builder-style-inline-css")},load:function(){var e,t,i;Rexbuilder_Util_Editor.visibleRow=m(),e=null!==Rexbuilder_Util_Editor.visibleRow,t={},e&&(i=d(Rexbuilder_Util_Editor.visibleRow).find(".section-data")[0],(t=u(i)).collapse=Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rex-collapse-grid")),Rexbuilder_Util_Editor.visibleRowInfo={sectionID:e?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-section-id"):null,modelNumber:e?void 0!==Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number"):"":null,modelEditing:e?void 0!==Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing"):"":null},i={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:t},Rexbuilder_Util_Editor.sendParentIframeMessage(i),d(Rexbuilder_Util_Editor.visibleRow).addClass("highLightRow"),Rexbuilder_Util.$rexContainer.on("mouseenter",".rexpansive_section",function(e){var t=d(n=this);t.hasClass("highLightRow")||c(this),t=x(t)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rexpansive_section",function(e){var t=m(),t=(null!==t&&Rexbuilder_Util_Editor.visibleRow!==t&&c(t),d(t)),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();n=null,t.is(i)||Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:viewTopFastTools"})}),Rexbuilder_Util.$window.on("scroll",_),"1"==(e=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(removing_section)")).length&&e.hasClass("empty-section")?(Rexbuilder_Util.$rexContainer.parent().addClass("add-new-section--hide"),e.addClass("activeRowTools")):Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),0==Rexbuilder_Util_Editor.$styleElement.length&&(t=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css",i.id="rexpansive-builder-style-inline-css",i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),t.appendChild(i))},activeAddSection:function(e){e=void 0!==e?e:null,Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),e&&e.removeClass("activeRowTools")},endEditingElement:function(){var e=Rexbuilder_Util_Editor.editedGallery;e&&clearTimeout(e.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.editedTextWrap&&Rexbuilder_Util_Editor.editedTextWrap.blur(),e&&e.focusElementEditing(Rexbuilder_Util_Editor.editedElement),Rexbuilder_Util_Editor.editingGallery=!1,Rexbuilder_Util_Editor.editedGallery=null,Rexbuilder_Util_Editor.editingElement=!1,Rexbuilder_Util_Editor.editedElement=null,Rexbuilder_Util_Editor.editedTextWrap=null},startEditingElement:function(){var e,t;Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editingGallery&&(e=Rexbuilder_Util_Editor.editedGallery,t=Rexbuilder_Util_Editor.editedElement,e.unFocusElementEditing(t),e.properties.elementStartingH=parseInt(t.attr("data-gs-height")))},sendParentIframeMessage:function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),window.parent.postMessage(t,"*")},addCustomClass:function(e,t){var i;""!=e&&(r(e,t),i="",i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),i=(i+=" "+e).trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i))},removeCustomClass:r,escapeRegExp:a,pushAction:function(e,t,i,r){e={sectionID:(e="document"!==e?l(e):{sectionID:"",targetID:"",modelNumber:-1}).sectionID,targetID:e.targetID,modelNumber:e.modelNumber,actionName:t,performActionData:i,reverseActionData:r};Rexbuilder_Util_Editor.undoStackArray.push(e),Rexbuilder_Util_Editor.redoStackArray=[],o()},getIDs:l,getStacks:function(){return{undo:Rexbuilder_Util_Editor.undoStackArray,redo:Rexbuilder_Util_Editor.redoStackArray}},getTextWrapLength:function(e){var t,e=e.find(".text-wrap"),i=0,r=0;return e.hasClass("medium-editor-element")?((t=e.clone(!1)).children(".medium-insert-buttons").remove(),0!=(i=t.text().trim().length)&&(e.hasClass("medium-editor-element")&&!e.hasClass("medium-editor-placeholder")||0!=e.parents(".pswp-item").length)&&(r=e.innerHeight())):0!=(i=e.text().trim().length)&&(r=e.innerHeight()),0==r?0:i},rowAttrsObj:u,blockAttrsObj:u,startLoading:function(e){(e=void 0===e||e)&&(Rexbuilder_Util.$rexContainer.parent().addClass("rexbuilder-live-content--loading"),Rexbuilder_Util.$rexContainer.addClass("fade-out").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","0").removeClass("fade-out");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:animateContentsFadeOutEnd"})}))},endLoading:function(e){(e=void 0===e||e)&&Rexbuilder_Util.$rexContainer.addClass("fade-in").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","").removeClass("fade-in"),Rexbuilder_Util.$rexContainer.parent().removeClass("rexbuilder-live-content--loading");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:animateContentsEnd"})})},builderEdited:function(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:e=void 0!==e&&e})},getMousePosition:function(e,t){var i={};return void 0!==e.clientX&&void 0!==e.clientY&&void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==t?i={x:(e=e.target.getBoundingClientRect()).left+t.offset.w/2,y:e.top+Rexbuilder_Util_Editor.mousePositionFrameYOffset}:null!==Rexbuilder_Util_Editor.mousePosition&&null!==Rexbuilder_Util_Editor.mouseClickObject?(i={x:Rexbuilder_Util_Editor.mousePosition.client.x-Rexbuilder_Util_Editor.mousePosition.offset.x+Rexbuilder_Util_Editor.mouseClickObject.offset.w/2,y:Rexbuilder_Util_Editor.mousePosition.client.y-Rexbuilder_Util_Editor.mousePosition.offset.y+Rexbuilder_Util_Editor.mousePositionFrameYOffset},Rexbuilder_Util_Editor.mousePosition=null,Rexbuilder_Util_Editor.mouseClickObject=null):i={x:Rexbuilder_Util_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Editor.viewportMeasurement.height/2},i},lockRows:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t=d(t);t.wrap("<div></div>"),t.parent().attr("style","position:relative;"),t.parent().append('<div class="rexpansive-lock-section"></div>')})},lockRowsLight:function(e){var t=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");null!==e&&t.not(e),t.addClass("rexpansive-lock-section--light")},releaseRows:function(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(e,t){t=d(t);t.siblings().each(function(e,t){t=d(t);t.hasClass("rexpansive-lock-section")&&t.remove()}),t.unwrap()})},releaseRowsLight:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").removeClass("rexpansive-lock-section--light").removeClass("rexpansive-lock-section--overlay"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item--drag-to-row").removeClass("grid-stack-item--drag-to-row"),Rexbuilder_Util.$rexContainer.find(".drag-to-section-simulator").remove()},getGradientSafeValue:s,getPrefixedValues:function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],i=[],r=0;r<t.length;r++)i.push(t[r]+e);return i},synchGradient:function(){d(".text-gradient").each(function(e,t){var i=t.getAttribute("data-gradient"),i=s(i),t=d(t);t.css("background",i),t.css("-webkit-background-clip","text"),t.css("-webkit-text-fill-color","transparent")})},updateBlockContainerHeight:function(e,t,i){var r=Rexbuilder_Util.getGalleryInstance(e),n=e.parents(".grid-stack-item").get(0),o=TextEditor.getEditorInstance().getExtensionByName("insert-media"),e=e.parents(".grid-item-content-wrap");this.needToSave=t=t||!0,r.updateElementHeight(n,void 0,i),o&&o.placeMediaBtn(e),this.needToSave=!0},updateContainerMargins:function(e){var t=Rexbuilder_Util.$rexContainer.parents(".rexbuilder-live-content").eq(0);0<e.distances.vals.top?t.addClass("fix-tools-first-row"):t.removeClass("fix-tools-first-row"),t.css("margin-top",e.distances.vals.top)},sendUndoRedoInformation:o,restorePageStartingState:function(e){var t,i,r="default"===e.selected;if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")&&(t=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0),Rexbuilder_Dom_Util.updateLockEditModel(t,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model")),r){for(var n=Rexbuilder_Util_Editor.undoStackArray.length,o=0;o<n;o++)Rexbuilder_Util.$document.trigger("rexlive:undo");t="default",r=d("#rexbuilder-layout-data"),i=d("#rexbuilder-default-layout-state"),r.find('.customization-wrap[data-customization-name="'+t+'"] .section-targets').get().map(function(e){return{sectionID:e.getAttribute("data-section-rex-id"),data:e.innerText}}).forEach(function(e){i.find('[data-section-rex-id="'+e.sectionID+'"]').text(e.data)})}r={eventName:"rexlive:restoreStateEnded",buttonData:e.buttonData},Rexbuilder_Util_Editor.sendParentIframeMessage(r)},isJQuery:function(e){return e instanceof jQuery}}}(jQuery);
/**
 * Attaching handlers on events that creates blocks
 * of text, image, video ...
 * Contains utility function to handle the moving of blocks
 * between rows
 * @since 2.0.0
 */
var Rexbuilder_CreateBlocks=function(w,B){"use strict";function e(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();for(var e=w(e.target).parents(".rexpansive_section"),t=Rexbuilder_Util.getGalleryInstance(e),i=new IndexedGrid(12),r=t.getGridstackNodes(),a=0;a<r.length;a++)i.setGrid(r[a].x,r[a].y,r[a].width,r[a].height);var d,l=i.findHoles(),o=i.negativeGrid(),l=s(l,o);2<l.w&&2<l.h&&(n=l.w,d=l.h);var o=t.createNewBlock(t.settings.galleryLayout,n,d,"text")[0],l=(TextEditor.addElementToTextEditor(o.querySelector(".text-wrap")),Rexbuilder_Live_Utilities.launchTooltips(),jQuery.Event("dblclick")),n=(l.target=o,l.offsetY=0,t.$element.trigger(l),Rexbuilder_Util.editedDataInfo.addBlockData(e.attr("data-rexlive-section-id"),o.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e),{eventName:"rexlive:edited",modelEdited:e.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(n)}function t(e){var t,i=!1,r=!1,a=void 0!==(e=e.settings.data_to_send).addBlockButton&&"true"==e.addBlockButton.toString()?(i=!0,e.$section):void 0!==e.addBlockElement&&"true"==e.addBlockElement.toString()?(r=!0,e.$section):""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),d=Rexbuilder_Util.getGalleryInstance(a),l=(i?(t=4,s=100,s=Math.ceil(s/d.properties.singleHeight)):r&&(t=(l=a.width()/Rexbuilder_Util.globalViewport.width*100)<=50?12:l<=75?6:4,s=Math.ceil(100/d.properties.singleHeight)),d.createNewBlock(d.settings.galleryLayout,t,s,"text")),o=l[0],n=(TextEditor.addElementToTextEditor(o.querySelector(".text-wrap")),Rexbuilder_Live_Utilities.launchTooltips(),jQuery.Event("dblclick")),s=(n.target=o,n.offsetY=0,d.$element.trigger(n),Rexbuilder_Util.editedDataInfo.addBlockData(e.sectionTarget.sectionID,o.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(a),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(a),void 0!==e.mousePosition&&(d=(n=d.properties.gridstackInstance).getCellFromPixel({left:e.mousePosition.x,top:e.mousePosition.y},!0),t=Math.max(0,d.x-Math.round(t/2)),d=Math.max(0,d.y-Math.round(s/2)),n.move(o,t=1/0!==t?t:0,d=1/0!==d?d:0)),null),e=(i?(s=jQuery.Event("rexlive:completeImportButton")).settings={$buttonWrapper:e.$buttonWrapper,$blockAdded:l}:r&&((s=jQuery.Event("rexlive:completeImportElement")).settings={$elementWrapper:e.$elementWrapper,$elementAdded:l,formFieldsString:e.formFieldsString}),s&&Rexbuilder_Util.$document.trigger(s),{eventName:"rexlive:edited",modelEdited:a.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function i(e){for(var e=""!=(b=e.settings.data_to_send).sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+b.sectionTarget.sectionID+'"][data-rexlive-model-number="'+b.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+b.sectionTarget.sectionID+'"]'),t=Rexbuilder_Util.getGalleryInstance(e),i=b.media,r=t.properties.wrapWidth,a=t.properties.singleWidth,d=t.settings.cellHeightMasonry,l=0;l<i.length;l++){var o,n=i[l].media_info.id,s=i[l].display_info.src,u=i[l].display_info.size,c=i[l].display_info.width,p=i[l].display_info.height,x=1,m=1,x=r<c?6:Math.max(Math.round(6*c/r),1);m=Math.max(Math.round(p*x/c),1);s={idImage:n,urlImage:s,sizeImage:u,width:c,height:p,typeBGimage:"fixed"==t.settings.galleryLayout?(o=t.createNewBlock("fixed",x,m,"image"),"full"):(n=t.properties.gutter,m=x*a<c?p*x*a/c:p+n,m=Math.max(Math.round(m/d),1),o=t.createNewBlock("masonry",x,m,"image"),"natural"),active:"true"},u=(Rexbuilder_Dom_Util.updateImageBG(o.find(".grid-item-content"),s),o[0]);TextEditor.addElementToTextEditor(u.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(b.sectionTarget.sectionID,u.getAttribute("data-rexbuilder-block-id"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e);var b={eventName:"rexlive:edited",modelEdited:e.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(b)}function r(e){if(void 0!==(x=e.settings.data_to_send).typeVideo){var t=""!=x.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+x.sectionTarget.sectionID+'"][data-rexlive-model-number="'+x.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+x.sectionTarget.sectionID+'"]'),i=Rexbuilder_Util.getGalleryInstance(t),r=void 0===x.hasAudio?"":x.hasAudio,e=void 0===x.urlYoutube?"":x.urlYoutube,a=void 0===x.urlVimeo?"":x.urlVimeo,d=void 0===x.videoMp4?"":x.videoMp4,l="";if(0!=d.length?l="mp4":""!=a?l="vimeo":""!=e&&(l="youtube"),0==d.length){var o=(c=L(i,3,3,"video")).find(".grid-item-content"),n={mp4Data:{idMp4:"",linkMp4:"",width:"",height:""},vimeoUrl:a,youtubeUrl:e,audio:r,typeVideo:l},s=(Rexbuilder_Dom_Util.updateVideos(o,n),c[0]);TextEditor.addElementToTextEditor(s.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(x.sectionTarget.sectionID,s.getAttribute("data-rexbuilder-block-id"))}else for(var u=0;u<d.length;u++){var c,o=(c=L(i,3,3,"video")).find(".grid-item-content"),p=d[u].videoUrl,n={mp4Data:{idMp4:d[u].videoID,linkMp4:p,width:d[u].width,height:d[u].height},vimeoUrl:"",youtubeUrl:"",audio:r,typeVideo:l},s=(Rexbuilder_Dom_Util.updateVideos(o,n),c[0]);TextEditor.addElementToTextEditor(s.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(x.sectionTarget.sectionID,s.getAttribute("data-rexbuilder-block-id"))}}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var x={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(x)}function a(e){var t=d(e.settings.data_to_send),i=""!=e.settings.data_to_send.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"][data-rexlive-model-number="'+e.settings.data_to_send.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"]'),e=(Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.editedDataInfo.addBlockData(e.settings.data_to_send.target.sectionID,t.attr("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(i),{eventName:"rexlive:edited",modelEdited:i.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function s(e,t){for(var i=0,r=0,a=0;a<e.length;a++){for(var d=t.indexOf(e[a]+1),l=d;l<t.length&&t[++l]+1==t[l+1];);if(!((i=t[l]-t[d]+1)<=2)){for(r=0;;)if(r++,-1===t.indexOf(t[d]+12*r)||-1===t.indexOf(t[l]+12*r))break;if(!(r<=2))break}}return{w:i,h:r}}function d(e,t,i){for(var r,a,d,l,o,n,s,i=void 0===i?(Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1,Rexbuilder_Dom_Util.lastSliderNumber):i,u=e.slides,c={id:e.id,settings:e.settings,numberSlides:u.length},t=(void 0===t?(a=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]'),r=Rexbuilder_Util.getGalleryInstance(a),(a=(r=void 0===e.target.rexID?L(r,12,4,"rexslider"):a.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]')).find(".text-wrap")).children().remove()):a=(r=t).find(".text-wrap"),r.children(".rexbuilder-block-data")),p=(r.addClass("block-has-slider"),r.find(".block-toolBox__editor-tools").find(".edit-block-content").addClass("tool-button--hide"),t.attr("data-type","rexslider"),d=a,c=c,tmpl.arg="slider",c=w(tmpl("tmpl-new-slider-wrap",{id:c.id,animation:!!c.settings.auto_start||0,dots:c.settings.dots?1:0,prevnext:c.settings.prev_next?1:0,numberSlides:c.numberSlides})),d.append(c[0]),c),x="true"==t.attr("data-overlay_block_color_active"),m="",b=(x&&(m=a.parents(".responsive-block-overlay").css("background-color")),e.settings.natural_blur),_=w(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-slider-element")),v=w(Rexbuilder_Live_Templates.getParsedTemplate("slide-video")),g=w(Rexbuilder_Live_Templates.getParsedTemplate("slide-text")),f=0;f<u.length;f++){var h,R,y,k,U=_.clone(),D=u[f],I="none"!==D.slide_image_url,E=0!==D.slide_text.trim().length,T=""!==D.slide_video_type;if(x&&(R=h=void 0,h=U,R=m,R=w(Rexbuilder_Live_Templates.getParsedTemplate("slider-overlay",{overlayColor:R})),h.append(R.clone())),I&&(b?(h=U,R=void 0,I=(I=D).slide_image_url,R=function(e){var t=B.createElement("div");return t.className="natural-blur-effect blur-slide",t.style.backgroundImage="url("+e+")",t}(I),I=function(e){var t=B.createElement("img");return t.className="natural-slide",t.src=e,t}(I),h.addClass("natural-slide__wrap"),h.append(R),h.append(I)):(I=U,y=void 0,y=(k=D).slide_image_url,k=D.slide_image_id,I.css("background-image","url("+y+")"),I.attr("data-rex-slide-image-id",k))),E&&(I=y=void 0,y=U,I=(I=D).slide_text,y.append(g.clone()),y.find(".rex-slider-element-title").html(I)),U.appendTo(p[0]),""!=D.slide_url&&(tmpl.arg="link",k=w(tmpl("tmpl-new-slider-element-link",{url:D.slide_url})),U.children(".rex-slider-element-title").detach().appendTo(k[0]),U.append(k[0])),T){U.append(v.clone());var S=U.find(".rex-slider-video-wrapper"),E=D.slide_video_type,I="true"==D.slide_video_audio.toString();switch(E){case"mp4":n=S,s=D,tmpl.arg="video",n.prepend(tmpl("tmpl-video-mp4",{url:s.slide_videoMp4Url})),n.addClass("mp4-player"),n.children(".rex-video-wrap").attr("data-rex-video-mp4-id",s.slide_video);break;case"vimeo":n=S,s=D,tmpl.arg="video",n.prepend(tmpl("tmpl-video-vimeo",{url:s.slide_video})),n.addClass("vimeo-player");break;case"youtube":l=S,o=D,tmpl.arg="video",l.prepend(tmpl("tmpl-video-youtube",{url:o.slide_video,audio:!1})),l.addClass("youtube-player")}I&&S.append(tmpl("tmpl-video-toggle-audio"))}}return p.attr("data-rex-slider-number",i),RexSlider.initSlider(p),r}function L(e,t,i,r){r=void 0!==r?r:"";var a=e.properties.singleWidth;return a="fixed"==e.settings.galleryLayout?e.createNewBlock("fixed",t,i,r):(i=Math.max(Math.round(i*a/e.settings.cellHeightMasonry),1),e.createNewBlock("masonry",t,i,r))}function m(e){e=e.querySelector(".text-wrap"),l(e)}var l=function(e){if(e)for(var t,i=[].slice.call(e.getElementsByClassName("rex-button-wrapper")),r=i.length,a=0;a<r;a++)Rexbuilder_Util.hasClass(i[a],"rex-separate-button")?(i[a].setAttribute("data-rex-button-id",Rexbuilder_Util.createBlockID()),i[a].setAttribute("data-rex-button-number","1")):(t=i[a].getAttribute("data-rex-button-id"),t=[].slice.call(B.querySelectorAll('.rex-button-wrapper[data-rex-button-id="'+t+'"]')),i[a].setAttribute("data-rex-button-number",t.length+1),(t=i[a].querySelector(".rex-button-data"))&&t.removeAttribute("data-synchronize"))};return{init:function(){Rexbuilder_Util.$document.on("click",".add-new-block-text",e),Rexbuilder_Util.$document.on("rexlive:insert_new_text_block",t),Rexbuilder_Util.$document.on("rexlive:insert_image",i),Rexbuilder_Util.$document.on("rexlive:insert_video",r),Rexbuilder_Util.$document.on("rexlive:insert_new_slider",a)},createSlider:d,createCopyBlock:function(e){var t=e.parents(".grid-stack-row"),i=t.data().plugin_perfectGridGalleryEditor,t=t.data("gridstack"),r=e.parents(".rexpansive_section"),a=e.clone(!1),d=a.children(".rexbuilder-block-data"),l=(i._removeHandles(a),Rexbuilder_Util.createBlockID()),o=(i.properties.lastIDBlock=i.properties.lastIDBlock+1,"block_"+i.properties.sectionNumber+"_"+i.properties.lastIDBlock),d=(a.attr("data-rexbuilder-block-id",l),d.attr("data-rexbuilder_block_id",l),a.attr("id",o),d.attr("data-id",o),d.attr("id",o+"-builder-data"),m(a[0]),parseInt(a.attr("data-gs-width"))),n=parseInt(a.attr("data-gs-height")),s=a.find(".grid-item-content"),u=Rexbuilder_Util.destroyVideo(s,!1),c=(Rexbuilder_Live_Utilities.removeTextEditor(a),Rexbuilder_Live_Utilities.removeColorPicker(a),i._prepareElement(a[0]),i.unFocusElementEditing(a),{targetElement:a,hasToBeRemoved:!0,galleryInstance:i,blocksDisposition:w.extend(!0,{},i.properties.reverseDataGridDisposition)}),p=(t.addWidget(a[0],0,0,d,n,!0,1,500,1),parseInt(a.attr("data-gs-x"))),x=parseInt(a.attr("data-gs-y")),p=(t.batchUpdate(),t.update(a[0],p,x,d,n),t.commit(),a.find(".rexwpcf7-column-tools").remove(),a.find(".rex-element-wrapper").each(function(e,t){t=t.getAttribute("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.addMissingTools(t)}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),i._createFirstReverseStack(),i.properties.numberBlocksVisibileOnGrid=i.properties.numberBlocksVisibileOnGrid+1,{targetElement:a,hasToBeRemoved:!1,galleryInstance:i,blocksDisposition:w.extend(!0,{},i.properties.reverseDataGridDisposition)}),x=(Rexbuilder_Util_Editor.pushAction(i.$element,"updateBlockVisibility",p,c),a.removeAttr("data-gs-auto-position"),""!=u&&s.addClass(u+"-player"),Rexbuilder_Util.startVideoPlugin(s),a.find(".text-wrap"));e.hasClass("block-has-slider")?(d=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),x.children().remove(),n={sectionID:r.attr("data-rexlive-section-id"),modelNumber:void 0!==r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",rexID:l},t=Rexbuilder_Live_Utilities.createSliderData(d),Rexbuilder_Live_Utilities.saveSliderOnDB(t,!0,o,n)):(i=a[0],TextEditor.addElementToTextEditor(i.querySelector(".text-wrap"))),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(r),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})},insertHTMLBlock:function(e,t,i,r){var a,d,l,o,n,s,u,c,p,x,m,b;i=void 0===i||i,r=void 0===r||r,t.length<=0||(a=t.data().plugin_perfectGridGalleryEditor,d=t.data("gridstack"),l=t.parents(".rexpansive_section"),x=(o=e).children(".rexbuilder-block-data"),a._removeHandles(o),a.properties.lastIDBlock=a.properties.lastIDBlock+1,n="block_"+a.properties.sectionNumber+"_"+a.properties.lastIDBlock,""===(s=o.attr("data-rexbuilder-block-id"))&&(s=Rexbuilder_Util.createBlockID(),o.attr("data-rexbuilder-block-id",s),x.attr("data-rexbuilder_block_id",s)),""===o.attr("id")&&(o.attr("id",n),x.attr("data-id",n),x.attr("id",n+"-builder-data")),o.appendTo(t.eq(0)),Rexbuilder_Block.addToolboxClean(o.get(0)),x=parseInt(o.attr("data-gs-x")),t=parseInt(o.attr("data-gs-y")),m=parseInt(o.attr("data-gs-width")),b=parseInt(o.attr("data-gs-height")),u=o.find(".grid-item-content"),c=Rexbuilder_Util.destroyVideo(u,!1),Rexbuilder_Live_Utilities.removeTextEditor(o),Rexbuilder_Live_Utilities.removeColorPicker(o),a._prepareElement(o[0]),a.unFocusElementEditing(o),p={targetElement:o,hasToBeRemoved:!0,galleryInstance:a,blocksDisposition:w.extend(!0,{},a.properties.reverseDataGridDisposition)},r&&"masonry"===a.settings.galleryLayout&&(b=Math.floor(b*a.properties.singleWidth/a.properties.singleHeight)),d.addWidget(o[0],0,0,m,b,!0,1,500,1),i&&(d.batchUpdate(),d.update(o[0],x,t,m,b),d.commit()),a._updateElementsSizeViewers(),a._createFirstReverseStack(),a.properties.numberBlocksVisibileOnGrid=a.properties.numberBlocksVisibileOnGrid+1,r={targetElement:o,hasToBeRemoved:!1,galleryInstance:a,blocksDisposition:w.extend(!0,{},a.properties.reverseDataGridDisposition)},Rexbuilder_Util_Editor.pushAction(a.$element,"updateBlockVisibility",r,p),o.removeAttr("data-gs-auto-position"),""!=c&&u.addClass(c+"-player"),Rexbuilder_Util.startVideoPlugin(u),i=o.find(".text-wrap"),e.hasClass("block-has-slider")?(x=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),i.children().remove(),t={sectionID:l.attr("data-rexlive-section-id"),modelNumber:void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",rexID:s},m=Rexbuilder_Live_Utilities.createSliderData(x),Rexbuilder_Live_Utilities.saveSliderOnDB(m,!0,n,t)):(b=o[0],TextEditor.addElementToTextEditor(b.querySelector(".text-wrap"))),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(l),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(l))},moveBlockToOtherSection:function(e,t){var i=t.data().plugin_perfectGridGalleryEditor,r=t.data("gridstack"),a=e.parents(".rexpansive_section"),d=a.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor,l=d.settings.galleryLayout,o=i.settings.galleryLayout,n=e.clone(!1),s=n.children(".rexbuilder-block-data"),u=(i._removeHandles(n),Rexbuilder_Util.createBlockID()),c=(i.properties.lastIDBlock=i.properties.lastIDBlock+1,"block_"+i.properties.sectionNumber+"_"+i.properties.lastIDBlock),s=(n.attr("data-rexbuilder-block-id",u),s.attr("data-rexbuilder_block_id",u),n.attr("id",c),s.attr("data-id",c),s.attr("id",c+"-builder-data"),n.appendTo(t.eq(0)),parseInt(n.attr("data-gs-width"))),p=parseInt(n.attr("data-gs-height"));if(l!==o)switch(o){case"fixed":p=Math.floor(5*p/i.properties.singleHeight);break;case"masonry":p=Math.floor(p*d.properties.singleHeight/5)}var t=n.find(".grid-item-content"),l=Rexbuilder_Util.destroyVideo(t,!1),o=(Rexbuilder_Live_Utilities.removeTextEditor(n),Rexbuilder_Live_Utilities.removeColorPicker(n),i._prepareElement(n[0]),i.unFocusElementEditing(n),{targetElement:n,hasToBeRemoved:!0,galleryInstance:i,blocksDisposition:w.extend(!0,{},i.properties.reverseDataGridDisposition)}),x=(r.addWidget(n[0],0,0,s,p,!0,1,500,1),i._updateElementsSizeViewers(),parseInt(n.attr("data-gs-x"))),m=parseInt(n.attr("data-gs-y")),x=(r.batchUpdate(),r.update(n[0],x,m,s,p),r.commit(),i._createFirstReverseStack(),i.properties.numberBlocksVisibileOnGrid=i.properties.numberBlocksVisibileOnGrid+1,{targetElement:n,hasToBeRemoved:!1,galleryInstance:i,blocksDisposition:w.extend(!0,{},i.properties.reverseDataGridDisposition)}),m=(Rexbuilder_Util_Editor.pushAction(i.$element,"updateBlockVisibility",x,o),n.removeAttr("data-gs-auto-position"),""!=l&&t.addClass(l+"-player"),Rexbuilder_Util.startVideoPlugin(t),n.find(".text-wrap"));e.hasClass("block-has-slider")?(s=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),m.children().remove(),r={sectionID:a.attr("data-rexlive-section-id"),modelNumber:void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",rexID:u},x=Rexbuilder_Live_Utilities.createSliderData(s),Rexbuilder_Live_Utilities.saveSliderOnDB(x,!0,c,r)):(o=n[0],TextEditor.addElementToTextEditor(o.querySelector(".text-wrap"))),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(a),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(a)},sanitizeBlockContent:m}}(jQuery,(window,document));
var Rexbuilder_Dom_Util=function($){"use strict";var _updateSlider=function(e){var t=e.textWrap,i=e.sliderNumberToActive,a=(t.children('.rex-slider-wrap:not([data-rex-slider-number="'+e.sliderNumberToActive+'"])').each(function(e,t){var i=$(t);t.style.display="none",t.setAttribute("data-rex-slider-active",!1),RexSlider.destroySliderPlugins(i)}),t.children('.rex-slider-wrap[data-rex-slider-number="'+i+'"]'));0==a.length?void 0!==e.newSliderData&&(t=t.parents(".grid-stack-item"),Rexbuilder_CreateBlocks.createSlider(e.newSliderData,t,i)):(a[0].style.display="",RexSlider.initSlider(a))},_updateSliderStack=function(e){var t=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]'),i=t.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]').find(".text-wrap"),a=i.find('.rex-slider-wrap[data-rex-slider-number="'+e.target.sliderNumber+'"]'),a={textWrap:i,sliderNumberToActive:parseInt(a.attr("data-rex-slider-number"))},i=(Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1,{textWrap:i,sliderNumberToActive:Rexbuilder_Dom_Util.lastSliderNumber,newSliderData:e});_updateSlider(i),Rexbuilder_Util_Editor.pushAction(t,"updateSlider",i,a)},_updateRow=function(e,t,i,a){var o=parseInt(a.gutter),r=parseInt(a.top),d=parseInt(a.right),l=parseInt(a.bottom),n=parseInt(a.left),o={gutter:isNaN(o)?20:o,top:isNaN(r)?20:r,right:isNaN(d)?20:d,bottom:isNaN(l)?20:l,left:isNaN(n)?20:n},r=o.gutter,d=o.top,l=o.right,n=o.bottom,o=o.left,s=void 0===a.layout?"fixed":a.layout,c=void 0!==a.full_height&&"masonry"!=s&&a.full_height,u=void 0===a.section_width?"100%":""+a.section_width,p=void 0===a.dimension?"full":a.dimension,_=!Rexbuilder_Util.editorMode&&a.collapse_grid,g=i.parent(),m=g[0],g=("full"==p?(g.removeClass("center-disposition"),g.addClass("full-disposition"),m.style.maxWidth="100%"):(g.removeClass("full-disposition"),g.addClass("center-disposition"),m.style.maxWidth=u),i.attr("data-separator",r),i.attr("data-row-separator-top",d),i.attr("data-row-separator-right",l),i.attr("data-row-separator-bottom",n),i.attr("data-row-separator-left",o),i.attr("data-layout",s),i.attr("data-full-height",c),t.attr("data-section_width",u),t.attr("data-dimension",p),t.attr("data-no-mobile-layout",a.noMobileLayoutSaved),t.attr("data-responsive_collapse",_),t.attr("data-layout",s),e.attr("data-rex-collapse-grid",_),i.data());void 0!==g&&void 0!==(m=g.plugin_perfectGridGalleryEditor)&&m.updateGridSettingsChangeLayout(a),Rexbuilder_Util.editorMode&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(e,a),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,a))},_updateImageBG=function(e,t){var i,a;e.hasClass("rexpansive_section")?(i=e.children(".section-data"),""==t.idImage||"true"!=t.active.toString()?(_resetImageSection(e,i),Rexbuilder_Util.editorMode||e.removeClass("section-w-image")):(_updateImageSection(e,i,t),Rexbuilder_Util.editorMode||e.addClass("section-w-image"))):e.hasClass("grid-item-content")&&(a=(i=e.parents(".grid-stack-item")).children(".rexbuilder-block-data"),""==t.idImage||"true"!=t.active.toString()?(_resetImageBlock(e,a,t),Rexbuilder_Util.editorMode||i.removeClass("block-w-image")):(Rexbuilder_Util.editorMode||i.addClass("block-w-image"),_updateImageBlock(e,a,t)))},_updateImageSection=function(e,t,i){"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,i),i.idImage!=parseInt(t.attr("data-id_image_bg_section"))&&(e=e[0],Rexbuilder_Util.editorMode?e.style.backgroundImage="url("+i.urlImage+")":e.setAttribute("data-src",i.urlImage),e.setAttribute("data-background_image_width",i.width),e.setAttribute("data-background_image_height",i.height),t.attr("data-image_size",i.image_size),t.attr("data-id_image_bg_section",i.idImage),t.attr("data-image_bg_section",i.urlImage),t.attr("data-image_bg_section_active",i.active))},_updateBlockPhotoswipe=function(e){e.$elem.children(".rexbuilder-block-data").attr("data-photoswipe",e.photoswipe)},_updateImageBlock=function(e,t,i){t.attr("data-id_image_bg_block",i.idImage),t.attr("data-type_bg_block",i.typeBGimage),t.attr("data-image_bg_block",i.urlImage),t.attr("data-image_size",i.sizeImage),t.attr("data-image_bg_elem_active",i.active),"full"==i.typeBGimage?_addImageFullBgBlock(e,i):"natural"==i.typeBGimage&&_addImageNaturalBgBlock(e,i),/(youtube|vimeo|mp4)-player/.test(e.get(0).className)&&_moveImageBeforeVideo(e),e.attr("data-background_image_width",i.width),e.attr("data-background_image_height",i.height),"undefined"!=typeof Rexbuilder_Block_Editor&&(Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(e,i),Rexbuilder_Block_Editor.updateBlockImagePositionTool(e,i))},_addImageNaturalBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".responsive-block-overlay"),o=(0==i.length?(o=document.createElement("div"),(i=$(o)).addClass("rex-image-wrapper"),i.insertBefore(a[0])):i.hasClass("full-image-background")&&(i.detach().insertBefore(a[0]),i.removeClass("full-image-background")),i[0]);i.addClass("natural-image-background"),Rexbuilder_Util.editorMode?o.style.backgroundImage="url("+t.urlImage+")":o.setAttribute("data-src",t.urlImage);a=e.parents(".grid-stack-item")[0];a&&(a.offsetWidth<t.width?i.addClass("small-width"):i.removeClass("small-width"))},_removeImageBlock=function(e){e=e.find(".rex-image-wrapper");0!=e.length&&e.remove()},_addImageFullBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),e=e.find(".responsive-block-overlay"),a=(0==i.length?(a=document.createElement("div"),(i=$(a)).addClass("rex-image-wrapper"),i.insertBefore(e[0])):i.hasClass("natural-image-background")&&(i.detach().insertBefore(e[0]),i.removeClass("natural-image-background"),i.removeClass("small-width")),i[0]);i.addClass("full-image-background"),Rexbuilder_Util.editorMode?a.style.backgroundImage="url("+t.urlImage+")":a.setAttribute("data-src",t.urlImage)},_resetImageSection=function(e,t){var i=e[0];t.attr("data-image_bg_section",""),t.attr("data-id_image_bg_section",""),t.data("data-image_size",""),i.setAttribute("data-background_image_width",""),i.setAttribute("data-background_image_height",""),i.style.backgroundImage="","undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e)};function _resetImageBlock(e,t,i){t.attr("data-id_image_bg_block",""),t.attr("data-type_bg_block",""),t.attr("data-image_bg_block",""),t.attr("data-image_size",""),e.parents(".grid-stack-item").hasClass("block-has-slider")?t.attr("data-photoswipe",i.photoswipe):t.attr("data-photoswipe",""),t.attr("data-image_bg_elem_active",""),_removeImageBlock(e),e.attr("data-background_image_width",""),e.attr("data-background_image_height","");i=e.parents(".grid-stack-item").get(0);i&&Rexbuilder_Util.editorMode&&(t=i.querySelector(".deactivate-block-image-background"),$(t).parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),Rexbuilder_Util.addClass(i.querySelector(".rexlive-block-toolbox.bottom-tools .edit-block-image-position"),"tool-button--hide"),$(i).find(".rexlive-block-toolbox.top-tools .edit-block-image").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"))}var _removeYoutubeVideo=function($target,removeFromDom){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio"),videoID,elemData,videoID,wasSlide,hadAudio,youTubeTemplate,$toggle;0!=$ytpWrapper.length&&(removeFromDom=void 0===removeFromDom||removeFromDom,$target.removeClass("youtube-player"),removeFromDom?(void 0!==$ytpWrapper.YTPGetPlayer()&&$ytpWrapper.YTPPlayerDestroy(),$ytpWrapper.remove(),0!=$toggleAudio.length&&$toggleAudio.remove()):(void 0!==$ytpWrapper.YTPGetPlayer()?(videoID=$ytpWrapper.YTPGetVideoID(),$ytpWrapper.YTPPlayerDestroy()):(elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),videoID=elemData.videoURL),wasSlide=0!=$ytpWrapper.parents(".rex-slider-element").length,hadAudio=0!=$toggleAudio.length,wasSlide&&(hadAudio=0!=$ytpWrapper.children(".rex-video-toggle-audio").length),$ytpWrapper.remove(),tmpl.arg="video",youTubeTemplate='<div class="rex-youtube-wrap" data-property="{videoURL:\''+videoID+"',containment:'self',startAt:0,mute:"+!1+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>',_insertBlockVideoToDOM($target,youTubeTemplate),hadAudio&&wasSlide&&($toggle=$('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'),$toggle.addClass("removing-toggle-audio"),$toggle.appendTo($target.children(".rex-youtube-wrap")[0]))))},_removeVimeoVideo=function(e,t){var i,a=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");0!=a.length&&(i=a.children("iframe")[0],t=void 0===t||t,e.removeClass("vimeo-player"),t?(VimeoVideo.removePlayer(i),a.remove(),0!=o.length&&o.remove()):((e=VimeoVideo.findVideo(i))&&e.unload(),0!=o.length&&o.addClass("removing-toggle-audio")))},_removeMp4Video=function(e,t){var i,a=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio");0!=a.length&&(t=void 0===t||t,(i=a.find("video")[0]).pause(),i.currentTime=0,e.removeClass("mp4-player"),t?(a.remove(),0!=o.length&&o.remove()):(a.addClass("removing-video-mp4"),0!=o.length&&o.addClass("removing-toggle-audio")))},_addMp4Video=function(e,t,i){var a=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio"),r=a.find("source"),r=Rexbuilder_Util.editorMode?r.attr("src"):r.attr("data-src");0!=a.length&&r!=t.linkMp4||0==a.length?(_removeMp4Video(e,!0),e.addClass("mp4-player"),tmpl.arg="video",r='<div class="rex-video-wrap intrinsic-ignore" data-rex-video-width="'+t.width+'" data-rex-video-height="'+t.height+'"><video width="'+t.width+'" height="'+t.height+'" class="rex-video-container" preload autoplay loop muted><source type="video/mp4" src="'+t.linkMp4+'"></video></div>',e.is("section")?(t="",t=Rexbuilder_Util.editorMode?".section-toolBox":".section-data",e.children(t).after(r)):_insertBlockVideoToDOM(e,r)):0!=a.length&&(a.removeClass("removing-video-mp4"),Rexbuilder_Util.editorMode)&&a.find("video")[0].play(),0==o.length?i&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):i?o.removeClass("removing-toggle-audio"):o.remove()},_addYoutubeVideo=function($target,urlYoutube,hasAudio){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio"),elemData,activeUrl,videoID,urlID,youTubeTemplate;0!=$ytpWrapper.length?(elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),activeUrl=elemData.videoURL,videoID=Rexbuilder_Util.getYoutubeID(activeUrl),urlID=Rexbuilder_Util.getYoutubeID(urlYoutube),videoID!=urlID?void 0===$ytpWrapper.YTPGetPlayer()?($ytpWrapper.attr("data-property","{videoURL:'"+urlYoutube+"',containment:'self',startAt:0,mute:'"+!hasAudio+"',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"),$ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer()):(_removeYoutubeVideo($target,!0),setTimeout(function(){tmpl.arg="video";_insertBlockVideoToDOM($target,'<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>'),$target.children(".rex-youtube-wrap").YTPlayer();var e=$target.children(".rex-video-toggle-audio");0==e.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?e.removeClass("removing-toggle-audio"):e.remove()},1e3,$target,urlYoutube,hasAudio)):void 0===$ytpWrapper.YTPGetPlayer()&&($ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer())):(tmpl.arg="video",youTubeTemplate='<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>',_insertBlockVideoToDOM($target,youTubeTemplate),$target.children(".rex-youtube-wrap").YTPlayer()),$target.addClass("youtube-player"),0==$toggleAudio.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?$toggleAudio.removeClass("removing-toggle-audio"):$toggleAudio.remove()},_addVimeoVideo=function(e,t,i){var a=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");e.addClass("vimeo-player"),""==t?_removeVimeoVideo(e,!0):0!=a.length&&a.children("iframe").attr("src").split("?")[0]!=t||0==a.length?(_removeVimeoVideo(e,!0),tmpl.arg="video",_insertBlockVideoToDOM(e,'<div class="rex-video-vimeo-wrap rex-video-vimeo-wrap--block"><iframe src="'+(t+="?autoplay=1&loop=1&title=0&byline=0&portrait=0&autopause=0&muted="+("true"==i.toString()?"0":"1")+"&background=1")+'" width="640" height="360" frameborder="0" allow="autoplay"  webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'),t=e.children(".rex-video-vimeo-wrap").find("iframe")[0],VimeoVideo.addPlayer("1",t)):0!=a.length&&null!=(t=VimeoVideo.findVideo(a.find("iframe")[0]))&&t.play(),0==o.length?i&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):i?o.removeClass("removing-toggle-audio"):o.remove()},_updateBlockVideoTools=function(e,t){var i=e.find(".rexlive-block-toolbox.top-tools .edit-block-video-background"),e=e.find(".rexlive-block-toolbox.bottom-tools .edit-block-video-background");t?(i.parent().removeClass("tool-button--hide"),e.parent().addClass("tool-button--hide")):(i.parent().addClass("tool-button--hide"),e.parent().removeClass("tool-button--hide"))},_updateVideos=function(e,t){var i,a,o,r="";if(e.hasClass("rexpansive_section"))i=e.children(".section-data"),r="section";else if(e.hasClass("grid-item-content"))a=(o=e.parents(".grid-stack-item")).children(".rexbuilder-block-data"),r="block";else{if(!e.hasClass("rex-slider-video-wrapper"))return;r="slide"}var d=t.typeVideo;""==d?(_removeMp4Video(e,!0),_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0)):"mp4"==d?(_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0),_addMp4Video(e,t.mp4Data,t.audio)):"vimeo"==d?(_removeYoutubeVideo(e,!0),_removeMp4Video(e,!0),_addVimeoVideo(e,t.vimeoUrl,t.audio)):"youtube"==d&&(_removeVimeoVideo(e,!0),_removeMp4Video(e,!0),_addYoutubeVideo(e,t.youtubeUrl,t.audio)),"section"==r?(i.attr("data-video_mp4_url",t.mp4Data.linkMp4),i.attr("data-video_bg_id_section",t.mp4Data.idMp4),i.attr("data-video_bg_width_section",t.mp4Data.width),i.attr("data-video_bg_height_section",t.mp4Data.height),i.attr("data-video_bg_url_section",t.youtubeUrl),i.attr("data-video_bg_url_vimeo_section",t.vimeoUrl),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,t),"mp4"==d?e.addClass("section-w-html-video"):e.removeClass("section-w-html-video")):"block"==r&&(a.attr("data-video_mp4_url",t.mp4Data.linkMp4),a.attr("data-video_bg_id",t.mp4Data.idMp4),a.attr("data-video_bg_width",t.mp4Data.width),a.attr("data-video_bg_height",t.mp4Data.height),a.attr("data-video_bg_url",t.youtubeUrl),a.attr("data-video_bg_url_vimeo",t.vimeoUrl),a.attr("data-video_has_audio",t.audio),"mp4"==d?o.addClass("block-w-html-video"):o.removeClass("block-w-html-video"),Rexbuilder_Util.editorMode)&&_updateBlockVideoTools(o,""===d)},_updateBlockPaddings=function(e,t){e.children(".rexbuilder-block-data").attr("data-block_padding",Rexbuilder_Util.paddingsToString(t));var e=e.find(".text-wrap");0!=e.length&&((e=e[0]).style.paddingTop=""+t.top+t.type,e.style.paddingRight=""+t.right+t.type,e.style.paddingBottom=""+t.bottom+t.type,e.style.paddingLeft=""+t.left+t.type)},_updateBlocksLayout=function(e){var t,i,a,o,r,d,l=e.blocks,n=e.gridstackInstance;if(!(l.length<=0)){e=$(e.blocks[0].elem).parents(".rexpansive_section");for(Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.batchUpdate(),t=0;t<l.length;t++)i=l[t].x,a=l[t].y,o=l[t].w,r=l[t].h,d=l[t].elem,n.update(d,i,a,o,r);Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.commit(),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e[0]),1500)}},_collapseGrid=function(e,t,i,a){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0,t?e.collapseElementsProperties():e.removeCollapseElementsProperties(),e.updateGridLayoutCollapse(a),_updateBlocksLayout(i),setTimeout(function(){Rexbuilder_Util_Editor.updatingCollapsedGrid=!1,e._fixImagesDimension(),e._createFirstReverseStack(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers()},200)},updateRemovingBlock=function(e,t,i){t?(i.removeBlock(e.get(0)),Rexbuilder_Util.stopBlockVideos(e)):(i.reAddBlock(e),Rexbuilder_Util.playBlockVideos(e)),0==i.properties.numberBlocksVisibileOnGrid?e.parents(".rexpansive_section").addClass("empty-section"):e.parents(".rexpansive_section").removeClass("empty-section")},_updateSectionName=function(e,t){var i;null!==t&&(e.attr("data-rexlive-section-name",t),""!==t)&&void 0!==t&&(i=t.replace(/\s/gm,""),Rex_Navigator.updateNavigatorItem(e,i,t))},_updateSectionNavLabel=function(e,t){e.children(".section-data").attr("data-section_nav_label",t)},_fixSectionDomOrder=function(e,t,i){for(var a,o,r,d=[],l=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),n=l.length,s=0;s<n;s++){var c=$(l[s]),c={rexID:l[s].getAttribute("data-rexlive-section-id"),section_is_model:Rexbuilder_Util.hasClass(l[s],"rex-model-section"),section_model_id:l[s].getAttribute("data-rexlive-model-id"),section_model_number:l[s].getAttribute("data-rexlive-model-number"),$section:c.detach()};d.push(c)}for(o=0;o<e.length;o++){for(r=0;r<d.length;r++)if(d[r].rexID==e[o].rexID){if(!d[r].section_is_model){a=d[r].$section;break}if(d[r].section_model_number==e[o].modelNumber){a=d[r].$section;break}}Rexbuilder_Util.$rexContainer.append(a),d.splice(r,1)}for(r=0;r<d.length;r++)Rexbuilder_Util.$rexContainer.append(d[r].$section);"default"==Rexbuilder_Util.activeLayout&&(Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(e),void 0!==i)&&Rexbuilder_Util.updateSectionOrderCustomLayouts(i,e)};function _enablePhotoswipeAllBlocksSection(e){for(var t,i,a,o,r,d=e.get(0).querySelectorAll(".grid-stack-item:not(.removing_block)"),l=d.length,n=0;n<l;n++)i=(t=d[n]).querySelector(".rexbuilder-block-data"),a=Rexbuilder_Util.hasClass(t,"block-has-slider"),o=0!==Rexbuilder_Util_Editor.getTextWrapLength($(t)),r=""!==i.getAttribute("data-image_bg_block"),t.setAttribute("data-rexlive-element-edited",!0),(r&&!o||a)&&i.setAttribute("data-photoswipe",!0)}function _removePhotoswipeAllBlocksSection(e){for(var t,i=e.get(0).querySelectorAll(".grid-stack-item:not(.removing_block)"),a=i.length,o=0;o<a;o++)t=i[o].querySelector(".rexbuilder-block-data"),i[o].setAttribute("data-rexlive-element-edited",!0),t.setAttribute("data-photoswipe",!1)}var _updateSectionPhotoswipe=function(e){for(var t=0;t<e.length;t++)e[t].$data.attr("data-photoswipe",e[t].photoswipe)},_updateCustomClasses=function(e,t){for(var i,a="",o=(a=(a=void 0===(a=e.is("section")?(i=e.children(".section-data")).attr("data-custom_classes"):(i=e.children(".rexbuilder-block-data")).attr("data-block_custom_class"))?"":a).trim()).split(/\s+/),r=0;r<o.length;r++)Rexbuilder_Util_Editor.removeCustomClass(o[r],i),e.removeClass(o[r]);for(r=0;r<t.length;r++)Rexbuilder_Util_Editor.addCustomClass(t[r],i),e.addClass(t[r])},_updateBlockUrl=function(e,t){e.children(".rexbuilder-block-data").attr("data-linkurl",t)},_updateFlexPostition=function(e,t){var i;e.hasClass("block-has-slider")||(e.removeClass("rex-flex-top rex-flex-middle rex-flex-bottom rex-flex-left rex-flex-center rex-flex-right"),(i=e.children(".rexbuilder-block-data")).attr("data-block_flex_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-"+t.x),e.addClass("rex-flex-"+t.y),i.attr("data-block_flex_position",t.x+" "+t.y)))},_updateImageFlexPostition=function(e,t){var i;e.hasClass("block-has-slider")||(e.removeClass("rex-flex-img-top rex-flex-img-middle rex-flex-img-bottom rex-flex-img-left rex-flex-img-center rex-flex-img-right"),(i=e.children(".rexbuilder-block-data")).attr("data-block_flex_img_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-img-"+t.x),e.addClass("rex-flex-img-"+t.y),i.attr("data-block_flex_img_position",t.x+" "+t.y)))},_updateCustomCSS=function(e){var t=document.getElementById("rexpansive-builder-style-inline-css");t&&(t.textContent=e)},_updateSectionVideoBackground=function(e,t){_updateVideos(e,t)};function _updateSectionBackgroundColorLive(e,t){var i=""!=e.modelNumber,a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]');_setBackgroundColor(a=i?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):a,t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(a,t)}function updateSectionBackgroundColor(e,t){var i=e.children(".section-data"),a=t.color,t=t.active;_setBackgroundColor(e,a),i.attr("data-color_bg_section",a),i.attr("data-color_bg_section_active",t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,a)}var _updateSectionBackgroundGradient=function(e,t){var i=e.children(".section-data"),a=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);e[0].style.background=a,i.attr("data-color_bg_section",t.color),i.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,a)},_updateBlockBackgroundColorLive=function(e,t){var i,a;a=(i=""!=e.modelNumber?(i='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',a='div[data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content',Rexbuilder_Util.$rexContainer.find(i).find(a)):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content'))[0],-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t,"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(i,t)},_updateBlockBackgroundColor=function(e){var t=e.$elem,i=t.find(".grid-item-content")[0],a=t.children(".rexbuilder-block-data");-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=e.color,a.attr("data-color_bg_block",e.color),a.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorTool(t,e.color,e.active)},_updateBlockBackgroundGradient=function(e){var t=e.$elem,i=t.find(".grid-item-content")[0],a=t.children(".rexbuilder-block-data"),o=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);i.style.background=o,a.attr("data-color_bg_block",e.color),a.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundGradientTool(t,o)};function updateSectionOverlayColorLive(e,t){e=""!==e.modelNumber?Rexbuilder_Util.$rexContainer.find('.rexpansive_section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('.rexpansive_section[data-rexlive-section-id="'+e.sectionID+'"]');_setBackgroundColor(e.children(".responsive-overlay"),t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorToolLive(e,t)}var updateSectionOverlay=function(e,t){var i=e.children(".responsive-overlay"),a=e.children(".section-data");_setBackgroundColor(i,t.color),a.attr("data-row_overlay_color",t.color),a.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?i.addClass("rex-active-overlay"):i.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,t)},_updateSectionOverlayGradient=function(e,t){var i=e.children(".section-data"),a=e.children(".responsive-overlay"),o=a[0],r=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);o.style.background=r,i.attr("data-row_overlay_color",t.color),i.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?a.addClass("rex-active-overlay"):a.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,{active:t.active,color:r})},_updateBlockOverlayColorLive=function(e,t){var i,a;""!=e.modelNumber?(i='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',a='div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay',-1!==(i=Rexbuilder_Util.$rexContainer.find(i).find(a)).css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t)):(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay'),a=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .slider-overlay'),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t),0===a.length?(e=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .rex-slider-element'),""!==t&&e.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')):a.css("background-color",t)),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(i,t)},_updateBlockOverlay=function(e){var t=e.color,i=e.active,e=e.$elem,a=e.children(".rexbuilder-block-data"),o=e.find(".responsive-block-overlay"),r=o[0],d=o.find(".slider-overlay");-1!==getComputedStyle(r).background.indexOf("linear-gradient")&&(r.style.background=""),r.style.backgroundColor=t,0===d.length?(r=e.find(".rex-slider-element"),""!==t&&r.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')):d.css("background-color",t),a.attr("data-overlay_block_color",t),a.attr("data-overlay_block_color_active",i),"true"==i.toString()?o.addClass("rex-active-overlay"):o.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorTool(e,t,i)},_updateBlockOverlayGradient=function(e){var t=e.color,i=e.active,a=e.$elem,o=a.children(".rexbuilder-block-data"),r=a.find(".responsive-block-overlay"),e=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);r[0].style.background=e,o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",i),"true"==i.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayGradientTool(a,e)},_updateSectionBackgroundImage=function(e,t){_updateImageBG(e,t)},_updateSectionVisibility=function(e,t,i,a){t?("default"==Rexbuilder_Util.activeLayout&&(e.removeClass("removing_section"),Rexbuilder_Util.addSectionID(e.attr("data-rexlive-section-id"))),e.removeClass("rex-hide-section"),Rexbuilder_Util.playPluginsSection(e)):(Rexbuilder_Util.stopPluginsSection(e),"default"==Rexbuilder_Util.activeLayout&&(e.addClass("removing_section"),Rexbuilder_Util.removeSectionID(e.attr("data-rexlive-section-id"))),e.addClass("rex-hide-section")),void 0!==i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),void 0!==a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},_updateModelVisibility=function(e){var t=e.$sectionToHide,i=e.$sectionToShow,a=e.layoutsOrder,e=e.defaultStateSections;_updateSectionVisibility(t,!1),_updateSectionVisibility(i,!0),void 0!==a&&null!=a&&Rexbuilder_Util.updatePageCustomizationsDomOrder(a),void 0!==e&&null!=e&&Rexbuilder_Util.updateDefaultLayoutState({pageData:e})},_updateSectionBecameModel=function(e){var t=e.$section,i=e.layoutsOrder,a=e.defaultStateSections;e.isModel?(t.addClass("rex-model-section"),t.addClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),0==t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&t.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==t.find(".rexpansive-block-section-toolbox").length&&t.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')):(t.removeClass("rex-model-section"),t.removeClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),t.find(".rexpansive-block-section-toolbox").remove()),t.attr("data-rexlive-model-id",e.modelID),t.attr("data-rexlive-model-name",e.modelName),t.attr("data-rexlive-model-number",e.modelNumber),t.attr("data-rexlive-section-id",e.sectionID),void 0!==i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),void 0!==a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},updateLockEditModel=function(e,t){var i=e.parents(".rexpansive_section");t?(i.addClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","false"),0==i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&i.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==i.find(".rexpansive-block-section-toolbox").length&&i.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>'),e.removeClass("unlocked"),e.addClass("locked")):(e.addClass("unlocked"),e.removeClass("locked"),i.removeClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","true"),i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),i.find(".rexpansive-block-section-toolbox").remove())},_fixModelNumbers=function(){var e=[];if(Rexbuilder_Util.rexContainer)for(var t=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),i=t.length,a=0;a<i;a++)if(Rexbuilder_Util.hasClass(t[a],"rex-model-section")){for(var o,r=t[a].getAttribute("data-rexlive-model-id"),d=!1,l=0;l<e.length;l++)e[l].id==r&&(e[l].number=e[l].number+1,t[a].setAttribute("data-rexlive-model-number",e[l].number),d=!0);d||(e.push(o={id:r,number:1}),t[a].setAttribute("data-rexlive-model-number",o.number))}},_updateSectionWidthData=function(e,t){e=e.children(".section-data");e.attr("data-section_width",t.sectionWidth),e.attr("data-dimension",t.widthType)},_updateSectionWidth=function(e,t){var i=t.section_width,a=t.dimension,o=t.galleryInstance;_updateSectionWidthData(e,{sectionWidth:i,widthType:a}),o.updateSectionWidthWrap(i),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateRowDistancesData=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-separator",t.gutter),e.attr("data-row-separator-top",t.top),e.attr("data-row-separator-right",t.right),e.attr("data-row-separator-bottom",t.bottom),e.attr("data-row-separator-left",t.left),i.attr("data-block_distance",t.gutter),i.attr("data-row_separator_top",t.top),i.attr("data-row_separator_right",t.right),i.attr("data-row_separator_bottom",t.bottom),i.attr("data-row_separator_left",t.left)},_updateRowDistances=function(e,t){var i=t.rowDistances,e=e.find(".grid-stack-row"),a=t.galleryInstance;_updateRowDistancesData(e,i),a.updateRowDistances(i),Rexbuilder_Util_Editor.updatingGridstack=!0,a.batchGridstack(),a.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),a.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionMarginsData=function(e,t){e=e[0];e.style.marginTop=t.top+"px",e.style.marginRight=t.right+"px",e.style.marginBottom=t.bottom+"px",e.style.marginLeft=t.left+"px"},_updateSectionMargins=function(e,t){_updateSectionMarginsData(e,t.marginsSection);e=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,e.batchGridstack(),e.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),e.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateGridLayoutDomProperties=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-layout",t),e.attr("data-full-height",!1),i.attr("data-layout",t),i.attr("data-full_height",!1)},_updateSectionLayout=function(e,t){_updateGridLayoutDomProperties(e,t.gridLayout);e=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,e.settings.galleryLayout=t.gridLayout,e.batchGridstack(),e.updateFloatingElementsGridstack(),e.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),e.commitGridstack(),e._updateElementsSizeViewers(),Rexbuilder_Section_Editor.updateSectionLayoutTool(e.$section,{layout:t.gridLayout}),Rexbuilder_Util_Editor.updatingGridstack=!1};function updateSectionFullHeight(e){e.galleryInstance.updateFullHeight("true"==e.fullHeight.toString())}function _updateBulkSection(e,t,i){for(var a,o=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),r=i.length,d=0;d<r;d++)if("self"===i[d].name){a=i[d].props;break}var l,n=!1,s=!1,c=!1,u=!1,p=!1,_=!1,g=!1,m=o.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;for(l in t)if(t[l])switch(l){case"section_name":_updateSectionName(o,a.section_name);break;case"section_nav_label":_updateSectionNavLabel(o,a.section_nav_label);break;case"color_bg_section":case"color_bg_section_active":n||(updateSectionBackgroundColor(o,{color:a.color_bg_section,active:a.color_bg_section_active}),n=!0);break;case"image_bg_section_active":case"image_bg_section":case"image_width":case"image_height":case"id_image_bg_section":case"image_size":s||(_updateSectionBackgroundImage(o,{width:a.image_width,height:a.image_height,image_size:a.image_size,idImage:a.id_image_bg_section,urlImage:a.image_bg_section,active:a.image_bg_section_active}),s=!0);break;case"video_bg_id_section":case"video_mp4_url":case"video_bg_width_section":case"video_bg_height_section":c||(_updateSectionVideoBackground(o,{typeVideo:"mp4",mp4Data:{linkMp4:a.video_mp4_url,idMp4:a.video_bg_id_section,width:a.video_bg_width_section,height:a.video_bg_height_section},youtubeUrl:"",vimeoUrl:""}),c=!0);break;case"video_bg_url_section":_updateSectionVideoBackground(o,{typeVideo:"youtube",mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:a.video_bg_url_section,vimeoUrl:""});break;case"video_bg_url_vimeo_section":_updateSectionVideoBackground(o,{typeVideo:"vimeo",mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:"",vimeoUrl:a.video_bg_url_vimeo_section});break;case"block_distance":case"row_separator_top":case"row_separator_bottom":case"row_separator_right":case"row_separator_left":u||(_updateRowDistances(o,{rowDistances:{gutter:a.block_distance,top:a.row_separator_top,right:a.row_separator_right,bottom:a.row_separator_bottom,left:a.row_separator_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),u=!0);break;case"margin":case"row_margin_top":case"row_margin_bottom":case"row_margin_right":case"row_margin_left":p||(_updateSectionMargins(o,{marginsSection:{top:a.row_margin_top,bottom:a.row_margin_bottom,right:a.row_margin_right,left:a.row_margin_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),p=!0);break;case"custom_classes":var b=a.custom_classes.trim().split(/\s+/);_updateCustomClasses(o,b),g=!0;break;case"row_overlay_color":case"row_overlay_active":_||(updateSectionOverlay(o,{color:a.row_overlay_color,active:a.row_overlay_active}),_=!0)}g&&"default"!==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<768&&-1!==a.custom_classes.indexOf("rex-block-grid")&&o.find(".collapse-grid").trigger("click")}function updateBulkBlock(e,t,i){for(var a,o,r=(""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+e.rexID+'"]'),d=r.get(0),l=d.querySelector(".rexbuilder-block-data"),n=r.parents(".rexpansive_section"),s=n.children(".section-data"),c=n.find(".grid-stack-row").data("plugin_perfectGridGalleryEditor"),u=i.length,p=0;p<u;p++)if(e.rexID===i[p].name){a=i[p].props;break}for(p=0;p<u;p++)if("self"===i[p].name){o=i[p].props;break}var n=parseInt(a.gs_width),g=parseInt(a.gs_height),m=parseInt(a.gs_x),b=parseInt(a.gs_y);if(Rexbuilder_Util.isMobile()&&"fixed"===o.layout)g=Math.floor(a.gs_height*c.properties.singleWidth/5),b=Math.floor(a.gs_y*c.properties.singleWidth/5);else if(o.layout!==s.attr("data-layout"))switch(s.attr("data-layout")){case"fixed":g=Math.floor(5*a.gs_height/c.properties.singleWidth),b=Math.floor(5*a.gs_y/c.properties.singleWidth);break;case"masonry":g=Math.floor(a.gs_height*c.properties.singleWidth/5),b=Math.floor(a.gs_y*c.properties.singleWidth/5)}l.setAttribute("data-gs_width",n),l.setAttribute("data-gs_height",g),l.setAttribute("data-gs_start_h",g),l.setAttribute("data-gs_x",m),l.setAttribute("data-gs_y",b),l.setAttribute("data-element_real_fluid",a.element_real_fluid),c.properties.gridstackInstance.update(d,m,b,n,g);var v,k=!1,x=!1,h=!1,f=!1;for(v in t)if(t[v])switch(v){case"color_bg_block":case"color_bg_block_active":k||(_updateBlockBackgroundColor({$elem:r,color:a.color_bg_block,active:a.color_bg_block_active}),k=!0);break;case"image_bg_url":case"image_width":case"image_height":case"id_image_bg":case"image_size":case"image_bg_elem_active":case"type_bg_image":x||(_updateImageBG(r.find(".grid-item-content"),{width:a.image_width,height:a.image_height,sizeImage:a.image_size,idImage:a.id_image_bg,urlImage:a.image_bg_url,active:a.image_bg_elem_active,typeBGimage:a.type_bg_image}),x=!0);break;case"video_bg_id":case"video_bg_width":case"video_bg_height":case"video_mp4_url":case"video_bg_url_youtube":case"video_bg_url_vimeo":case"video_has_audio":if(!f){var y=null;if(""!==a.video_mp4_url?y="mp4":""!==a.video_bg_url_youtube?y="youtube":""!==a.video_bg_url_vimeo&&(y="vimeo"),y){var B={typeVideo:y,mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:"",vimeoUrl:"",audio:"true"===a.video_has_audio};switch(y){case"mp4":B=_.assign(B,{mp4Data:{linkMp4:a.video_mp4_url,idMp4:a.video_bg_id,width:a.video_bg_width,height:a.video_bg_height}});break;case"youtube":B=_.assign(B,{youtubeUrl:a.video_bg_url_youtube});break;case"vimeo":B=_.assign(B,{vimeoUrl:a.video_bg_url_vimeo})}_updateVideos(r.find(".grid-item-content"),B),f=!0}}break;case"photoswipe":_updateBlockPhotoswipe({$elem:r,photoswipe:a.photoswipe});break;case"block_custom_class":y=a.block_custom_class.trim().split(/\s+/);_updateCustomClasses(r,y);break;case"block_padding":var S=-1!==a.block_padding.indexOf("px")?"px":-1!==a.block_padding.indexOf("%")?"%":"",w=a.block_padding.replace(/px|%/g,"").split(";");_updateBlockPaddings(r,{top:w[0],right:w[1],bottom:w[2],left:w[3],type:S});break;case"overlay_block_color":case"overlay_block_color_active":h||(_updateBlockOverlay({$elem:r,color:a.overlay_block_color,active:a.overlay_block_color_active}),h=!0);break;case"linkurl":_updateBlockUrl(r,a.linkurl);break;case"block_flex_position":var C=a.block_flex_position.split(" ");_updateFlexPostition(r,{x:C[0],y:C[1]});break;case"block_flex_img_position":C=a.block_flex_img_position.split(" ");_updateImageFlexPostition(r,{x:C[0],y:C[1]})}}function htmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}var _updateRexButton=function(e){Rexbuilder_Rexbutton.updateButton(e)},_performAction=function(e,t){t?(i=e.performActionData,Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!0):(i=e.reverseActionData,Rexbuilder_Util_Editor.redoActive=!1,Rexbuilder_Util_Editor.undoActive=!0);var i,a,o,r=(a=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]')).find(".grid-stack-row");switch(void 0!==r.data()&&(o=r.data().plugin_perfectGridGalleryEditor),e.actionName){case"updateSectionLayout":_updateSectionLayout(r,i);break;case"updateSectionFullHeight":updateSectionFullHeight(i);break;case"updateSectionBlocksDisposition":void 0!==o&&(_updateBlocksLayout(i),setTimeout(o._updateElementsSizeViewers(),200));break;case"updateBlockVisibility":void 0!==o&&updateRemovingBlock(i.targetElement,i.hasToBeRemoved,i.galleryInstance);break;case"updateSlider":_updateSlider(i);break;case"updateSectionName":_updateSectionName(a,i.sectionName);break;case"updateSectionPhotoswipe":_updateSectionPhotoswipe(i.elements);break;case"collapseSection":_collapseGrid(i.gridInstance,i.collapse,i.blockDisposition,i.gridLayout);break;case"updateCustomClasses":_updateCustomClasses(i.$target,i.classes);break;case"updateCustomCSS":_updateCustomCSS(i.css);break;case"updateSectionBackgroundColor":updateSectionBackgroundColor(a,i);break;case"updateSectionOverlay":updateSectionOverlay(a,i);break;case"updateSectionImageBG":_updateImageBG(a,i);break;case"updateSectionVideoBG":Rexbuilder_Dom_Util.updateVideos(a,i);break;case"updateBlockBackgroundColor":_updateBlockBackgroundColor(i);break;case"updateBlockBackgroundGradient":_updateBlockBackgroundGradient(i);break;case"updateBlockOverlayGradient":_updateBlockOverlayGradient(i);break;case"updateBlockOverlay":_updateBlockOverlay(i);break;case"updateBlockImageBG":Rexbuilder_Util_Editor.updatingImageBg=!0,_updateImageBG(i.$itemContent,i.imageOpt),void 0!==o&&"masonry"==o.settings.galleryLayout&&o.updateElementHeight(i.$itemContent.parents(".grid-stack-item").get(0)),Rexbuilder_Util_Editor.updatingImageBg=!1;break;case"updateBlockPhotoswipe":_updateBlockPhotoswipe(i);break;case"updateBlockPadding":Rexbuilder_Util_Editor.updatingPaddingBlock=!0,_updateBlockPaddings(i.$elem,i.dataPadding),void 0!==o&&"masonry"==o.settings.galleryLayout&&o.updateElementHeight(i.$elem[0],!0),Rexbuilder_Util_Editor.updatingPaddingBlock=!1;break;case"updateBlockVideoBG":Rexbuilder_Dom_Util.updateVideos(i.$itemContent,i.videoOpt);break;case"updateBlockFlexPosition":_updateFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockImageFlexPosition":_updateImageFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockUrl":_updateBlockUrl(i.$elem,i.url);break;case"updateSectionVisibility":_updateSectionVisibility(a,i.show,i.layoutsOrder,i.stateDefault);break;case"updateSectionModel":_updateModelVisibility(i);break;case"sectionBecameModel":_updateSectionBecameModel(i);break;case"updateSectionOrder":_fixSectionDomOrder(i.sectionOrder,!1,i.sectionMoved);break;case"updateLockButton":updateLockEditModel(i.$button,i.lock);break;case"updateSectionWidth":_updateSectionWidth(a,i);break;case"updateGridDistances":_updateRowDistances(a,i);break;case"updateSectionMargins":_updateSectionMargins(a,i);break;case"updateRexButton":_updateRexButton(i)}Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!1};function _setBackgroundColor(e,t){-1!==e.css("background").indexOf("linear-gradient")&&e.css("background",""),e.css("background-color",t)}function _insertBlockVideoToDOM(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".rexlive-block-drag-handle"),o=0!==i.length,r=0!==a.length;o?i.after(t):r?a.after(t):e.prepend(t)}function _moveImageBeforeVideo(e){var t=e.find(".rex-image-wrapper"),e=e.find(".rex-youtube-wrap, .rex-video-vimeo-wrap, .rex-video-wrap");t.insertBefore(e)}var init=function(){this.lastSliderNumber=0};return{init:init,updateRow:_updateRow,updateSectionMargins:_updateSectionMargins,updateSectionMarginsData:_updateSectionMarginsData,updateImageBG:_updateImageBG,updateBlockPhotoswipe:_updateBlockPhotoswipe,performAction:_performAction,addYoutubeVideo:_addYoutubeVideo,removeYoutubeVideo:_removeYoutubeVideo,addVimeoVideo:_addVimeoVideo,removeVimeoVideo:_removeVimeoVideo,addMp4Video:_addMp4Video,removeMp4Video:_removeMp4Video,updateSlider:_updateSlider,updateSliderStack:_updateSliderStack,updateSectionName:_updateSectionName,updateSectionNavLabel:_updateSectionNavLabel,enablePhotoswipeAllBlocksSection:_enablePhotoswipeAllBlocksSection,removePhotoswipeAllBlocksSection:_removePhotoswipeAllBlocksSection,updateCustomClasses:_updateCustomClasses,collapseGrid:_collapseGrid,updateCustomCSS:_updateCustomCSS,updateSectionVideoBackground:_updateSectionVideoBackground,updateSectionBackgroundImage:_updateSectionBackgroundImage,updateSectionBackgroundColor:updateSectionBackgroundColor,updateSectionBackgroundColorLive:_updateSectionBackgroundColorLive,updateSectionBackgroundGradient:_updateSectionBackgroundGradient,updateSectionOverlay:updateSectionOverlay,updateSectionOverlayColorLive:updateSectionOverlayColorLive,updateSectionOverlayGradient:_updateSectionOverlayGradient,updateBlockBackgroundColor:_updateBlockBackgroundColor,updateBlockBackgroundColorLive:_updateBlockBackgroundColorLive,updateBlockBackgroundGradient:_updateBlockBackgroundGradient,updateBlockOverlayColorLive:_updateBlockOverlayColorLive,updateBlockOverlay:_updateBlockOverlay,updateBlockOverlayGradient:_updateBlockOverlayGradient,updateVideos:_updateVideos,updateBlockPaddings:_updateBlockPaddings,updateFlexPostition:_updateFlexPostition,updateImageFlexPostition:_updateImageFlexPostition,updateBlockUrl:_updateBlockUrl,updateSectionVisibility:_updateSectionVisibility,fixSectionDomOrder:_fixSectionDomOrder,updateSectionBecameModel:_updateSectionBecameModel,updateLockEditModel:updateLockEditModel,fixModelNumbers:_fixModelNumbers,updateSectionWidthData:_updateSectionWidthData,updateSectionWidth:_updateSectionWidth,updateRowDistancesData:_updateRowDistancesData,updateGridLayoutDomProperties:_updateGridLayoutDomProperties,htmlToElement:htmlToElement,updateBulkSection:_updateBulkSection,updateBulkBlock:updateBulkBlock,updateRemovingBlock:updateRemovingBlock,updateSectionFullHeight:updateSectionFullHeight}}(jQuery);
/**
 Values to insert on "wp_options" to work with rexbuttons
 Data are in form
 "option_name"
 "option_value"


_rex_buttons_ids

[\"9UEc\"]


_rex_buttons_styles

[{\"rexID\":\"9UEc\",\"buttonName\":\"Rex Funny v23\",\"rules\":{\"element\":{\"text_color\":\"rgb(111, 115, 181)\",\"font_size\":\"px\",\"background_color\":\"rgb(0, 238, 255)\",\"button_height\":\"px\",\"button_width\":\"\",\"border_color\":\"rgb(165, 0, 255)\",\"border_width\":\"px\",\"border_radius\":\"px\",\"margin_top\":\"px\",\"margin_bottom\":\"px\",\"margin_right\":\"px\",\"margin_left\":\"px\",\"padding_top\":\"px\",\"padding_bottom\":\"px\",\"padding_right\":\"px\",\"padding_left\":\"px\"},\"hover\":{\"background_color\":\"rgb(165, 0, 146)\",\"text_color\":\"rgb(0, 60, 255)\",\"border_color\":\"rgb(0, 255, 15)\"}}}]


_rex_button_9UEc_css

.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container{font-size: 12px;color: rgb(111, 115, 181);min-height: 70px;min-width: 100px;margin-top: 20px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-text{padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background{background-color: rgb(0, 238, 255);border-color: rgb(165, 0, 255);border-width: 5px;border-radius: 10px;border-style: solid;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background:hover{background-color: rgb(165, 0, 146);border-color: rgb(0, 255, 15);}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container:hover{color: rgb(0, 60, 255);}

_rex_button_9UEc_html

<span class=\"rex-button-wrapper\" data-rex-button-id=\"9UEc\"><span class=\"rex-button-data\" style=\"display:none;\" data-text-color=\"rgb(111, 115, 181)\" data-text-size=\"px\" data-background-color=\"rgb(0, 238, 255)\" data-background-color-hover=\"rgb(165, 0, 146)\" data-border-color-hover=\"rgb(0, 255, 15)\" data-text-color-hover=\"rgb(0, 60, 255)\" data-border-width=\"px\" data-border-color=\"rgb(165, 0, 255)\" data-border-radius=\"px\" data-button-height=\"px\" data-button-width=\"\" data-margin-top=\"px\" data-margin-bottom=\"px\" data-margin-left=\"px\" data-margin-right=\"px\" data-padding-left=\"px\" data-padding-right=\"px\" data-padding-top=\"px\" data-padding-bottom=\"px\" data-link-target=\"#\" data-link-type=\"_blank\" data-button-name=\"Rex Funny v23\"></span><a href=\"#\" class=\"rex-button-container\" target=\"_blank\"><span class=\"rex-button-background\"><span class=\"rex-button-text\">Learn More</span></span></a></span>


 */
var Rexbuilder_Rexbutton=function(b){var n,i,s;function o(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container"){switch(e){case"font-size":n.cssRules[o].style.fontSize=r;break;case"color":n.cssRules[o].style.color=r;break;case"min-height":n.cssRules[o].style.minHeight=r;break;case"min-width":n.cssRules[o].style.minWidth=r;break;case"margin-top":n.cssRules[o].style.marginTop=r;break;case"margin-bottom":n.cssRules[o].style.marginBottom=r;break;case"margin-left":n.cssRules[o].style.marginLeft=r;break;case"margin-right":n.cssRules[o].style.marginRight=r}break}}function a(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background"){switch(e){case"border-width":n.cssRules[o].style.borderWidth=r,n.cssRules[o].style.borderTopWidth=r,n.cssRules[o].style.borderLeftWidth=r,n.cssRules[o].style.borderRightWidth=r,n.cssRules[o].style.borderBottomWidth=r,n.cssRules[o].style.borderTop=r+" "+n.cssRules[o].style.borderTopStyle+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=r+" "+n.cssRules[o].style.borderLeftStyle+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=r+" "+n.cssRules[o].style.borderRightStyle+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=r+" "+n.cssRules[o].style.borderBottomStyle+" "+n.cssRules[o].style.borderBottomColor;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor;break;case"border-radius":n.cssRules[o].style.borderRadius=r,n.cssRules[o].style.borderTopLeftRadius=r,n.cssRules[o].style.borderTopRightRadius=r,n.cssRules[o].style.borderBottomLeftRadius=r,n.cssRules[o].style.borderBottomRightRadius=r,n.cssRules[o].style.webkitBorderRadius=r,n.cssRules[o].style.webkitBorderTopLeftRadius=r,n.cssRules[o].style.webkitBorderTopRightRadius=r,n.cssRules[o].style.webkitBorderBottomLeftRadius=r,n.cssRules[o].style.webkitBorderBottomRightRadius=r;break;case"background-color":n.cssRules[o].style.backgroundColor=r}break}}function d(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-text")switch(e){case"padding-left":n.cssRules[o].style.paddingLeft=r;break;case"padding-right":n.cssRules[o].style.paddingRight=r;break;case"padding-top":n.cssRules[o].style.paddingTop=r;break;case"padding-bottom":n.cssRules[o].style.paddingBottom=r}}function l(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container:hover"){"color"===e&&(n.cssRules[o].style.color=r);break}}function u(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background:hover"){switch(e){case"background-color":n.cssRules[o].style.backgroundColor=r;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor}break}}function p(t,e){(t=t.find(".rex-button-data").eq(0)).attr("data-text-color",e.text_color),t.attr("data-text-size",e.font_size),t.attr("data-background-color",e.background_color),t.attr("data-background-color-hover",e.hover_color),t.attr("data-border-color-hover",e.hover_border),t.attr("data-text-color-hover",e.hover_text),t.attr("data-border-width",e.border_width),t.attr("data-border-color",e.border_color),t.attr("data-border-radius",e.border_radius),t.attr("data-button-height",e.button_height),t.attr("data-button-width",e.button_width),t.attr("data-margin-top",e.margin_top),t.attr("data-margin-bottom",e.margin_bottom),t.attr("data-margin-right",e.margin_right),t.attr("data-margin-left",e.margin_left),t.attr("data-padding-top",e.padding_top),t.attr("data-padding-bottom",e.padding_bottom),t.attr("data-padding-right",e.padding_right),t.attr("data-padding-left",e.padding_left),t.attr("data-button-name",e.buttonTarget.button_name)}var c=function(t){for(var e=t.attr("data-rex-button-id"),r=!1,o=0;o<i.length;o++)if(i[o].id==e){r=!0;break}r||g(t),_(),R(),x(t);t=t.parents(".text-wrap");0!=t.length&&TextEditor.removePlaceholder(t.eq(0)),Rexbuilder_Util_Editor.updateBlockContainerHeight(t),Rexbuilder_Util_Editor.builderEdited(!1),TextEditor.focusTextWrap(t)},g=function(t){var e;0!=t.find(".rex-button-data").eq(0).length&&(e=(t=h(t,!0)).buttonInfo.buttonTarget.button_id,r(e,t.buttonInfo))},r=function(t,e){var r,o,a="",a=(a=(a=(a=(a=(a=(a=(a+="color: "+e.text_color+";")+("font-size: "+(isNaN(parseInt(e.font_size.replace("px","")))?s:e).font_size+";"))+("min-height: "+(isNaN(parseInt(e.button_height.replace("px","")))?s.dimensions.height:e.button_height)+";"))+("min-width: "+(isNaN(parseInt(e.button_width.replace("px","")))?s.dimensions.width:e.button_width)+";"))+("margin-top: "+(isNaN(parseInt(e.margin_top.replace("px","")))?s.margins.top:e.margin_top)+";"))+("margin-right: "+(isNaN(parseInt(e.margin_right.replace("px","")))?s.margins.right:e.margin_right)+";"))+("margin-bottom: "+(isNaN(parseInt(e.margin_bottom.replace("px","")))?s.margins.bottom:e.margin_bottom)+";"),r=isNaN(parseInt(e.margin_left.replace("px","")))?s.margins.left:e.margin_left,o=t,r=a+="margin-left: "+r+";","insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-container{'+r+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-container{'+r+"}",n.cssRules.length),""),a=(a=(a=(a=a+("border-color: "+e.border_color+";")+"border-style: solid;")+("border-width: "+(isNaN(parseInt(e.border_width.replace("px","")))?s.border.width:e.border_width)+";"))+("border-radius: "+(isNaN(parseInt(e.border_radius.replace("px","")))?s.border.radius:e.border_radius)+";")+("background-color: "+e.background_color+";"),o=t,r=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-background{'+r+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-background{'+r+"}",n.cssRules.length),""),a=(a=(a+="padding-top: "+(isNaN(parseInt(e.padding_top.replace("px","")))?s.paddings.top:e.padding_top)+";")+("padding-right: "+(isNaN(parseInt(e.padding_right.replace("px","")))?s.paddings.right:e.padding_right)+";"))+("padding-bottom: "+(isNaN(parseInt(e.padding_bottom.replace("px","")))?s.paddings.bottom:e.padding_bottom)+";"),a=(o=isNaN(parseInt(e.padding_left.replace("px","")))?s.paddings.left:e.padding_left,r=t,o=a+="padding-left: "+o+";","insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-text{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-text{'+o+"}",n.cssRules.length),""),a=(a=(a+="background-color: "+e.hover_color+";")+("border-color: "+e.hover_border+";"),r=t,o=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-background:hover{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-background:hover{'+o+"}",n.cssRules.length),"");a+="color: "+e.hover_text+";",r=t,o=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-container:hover{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-container:hover{'+o+"}",n.cssRules.length)},x=function(t){t=t.find(".rex-button-data").eq(0);t.removeAttr("data-text-color"),t.removeAttr("data-text-size"),t.removeAttr("data-background-color"),t.removeAttr("data-background-color-hover"),t.removeAttr("data-border-color-hover"),t.removeAttr("data-text-color-hover"),t.removeAttr("data-border-width"),t.removeAttr("data-border-color"),t.removeAttr("data-border-radius"),t.removeAttr("data-button-height"),t.removeAttr("data-button-width"),t.removeAttr("data-margin-top"),t.removeAttr("data-margin-bottom"),t.removeAttr("data-margin-left"),t.removeAttr("data-margin-right"),t.removeAttr("data-padding-top"),t.removeAttr("data-padding-bottom"),t.removeAttr("data-padding-left"),t.removeAttr("data-padding-right"),t.removeAttr("data-button-name")},h=function(t,e){e=void 0!==e&&"true"==e.toString();var r={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_border:"",hover_text:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:""}},o=t.find(".rex-button-data").eq(0),a=(r.buttonTarget.button_id=t.attr("data-rex-button-id"),r.buttonTarget.button_number=parseInt(t.attr("data-rex-button-number")),o[0]),n=!1;return t.hasClass("rex-separate-button")||e?(r.font_size=a.getAttribute("data-text-size")?a.getAttribute("data-text-size").toString():"",r.text_color=a.getAttribute("data-text-color")?a.getAttribute("data-text-color").toString():"",r.button_height=a.getAttribute("data-button-height")?a.getAttribute("data-button-height").toString():"",r.button_width=a.getAttribute("data-button-width")?a.getAttribute("data-button-width").toString():"",r.margin_top=a.getAttribute("data-margin-top")?a.getAttribute("data-margin-top").toString():"",r.margin_bottom=a.getAttribute("data-margin-bottom")?a.getAttribute("data-margin-bottom").toString():"",r.margin_right=a.getAttribute("data-margin-right")?a.getAttribute("data-margin-right").toString():"",r.margin_left=a.getAttribute("data-margin-left")?a.getAttribute("data-margin-left").toString():"",r.border_color=a.getAttribute("data-border-color")?a.getAttribute("data-border-color").toString():"",r.border_width=a.getAttribute("data-border-width")?a.getAttribute("data-border-width").toString():"",r.border_radius=a.getAttribute("data-border-radius")?a.getAttribute("data-border-radius").toString():"",r.background_color=a.getAttribute("data-background-color")?a.getAttribute("data-background-color").toString():"",r.padding_top=a.getAttribute("data-padding-top")?a.getAttribute("data-padding-top").toString():"",r.padding_bottom=a.getAttribute("data-padding-bottom")?a.getAttribute("data-padding-bottom").toString():"",r.padding_right=a.getAttribute("data-padding-right")?a.getAttribute("data-padding-right").toString():"",r.padding_left=a.getAttribute("data-padding-left")?a.getAttribute("data-padding-left").toString():"",r.hover_color=a.getAttribute("data-background-color-hover")?a.getAttribute("data-background-color-hover").toString():"",r.hover_border=a.getAttribute("data-border-color-hover")?a.getAttribute("data-border-color-hover").toString():"",r.hover_text=a.getAttribute("data-text-color-hover")?a.getAttribute("data-text-color-hover").toString():"",r.buttonTarget.button_name=a.getAttribute("data-button-name")?a.getAttribute("data-button-name").toString():"",n=!0):r.synchronize=void 0!==o.attr("data-synchronize")&&o.attr("data-synchronize").toString(),r.text=t.find(".rex-button-text").eq(0).text(),r.link_target=o.attr("data-link-target"),r.link_type=o.attr("data-link-type"),r.classes=t.find("a.rex-button-container").eq(0).attr("class").replace("rex-button-container","").replace(/\s/,""),{separateButton:n,buttonInfo:r}};function m(t){t=t||!1;var e=[];if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){for(var r,o,a,n,i,s,d,l=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),u=l.length,b=0,p=0,c=0;b<u;b++)if(r=l[b],t||!Rexbuilder_Util.hasClass(r,"removing_section"))for(n=(o=Array.prototype.slice.call(r.querySelectorAll(".perfect-grid-item"))).length,p=0;p<n;p++)if(a=o[p],t||!Rexbuilder_Util.hasClass(a,"removing_block"))for(d=(i=Array.prototype.slice.call(a.querySelectorAll(".rex-button-wrapper"))).length,c=0;c<d;c++)s=i[c],e.push(s.getAttribute("data-rex-button-id"));e=Rexbuilder_Util.removeArrayDuplicates(e)}return e}function _(){var t=m(!0),e={};if(t.forEach(function(t){e[t]={occurrencies:0}}),Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer)for(var r,o,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),n=a.length,i=0;i<n;i++)o=(r=a[i]).getAttribute("data-rex-button-id"),e[o].occurrencies++,r.setAttribute("data-rex-button-number",e[o].occurrencies)}function R(){if(i=[],Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer)for(var t,e,r,o=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),a=0;a<o.length;a++)e=(t=o[a]).getAttribute("data-rex-button-id"),r=parseInt(t.getAttribute("data-rex-button-number")),i.push({id:e,number:r}),Rexbuilder_Util.hasClass(t,"rex-separate-button")&&!function(t){for(var e=0;e<n.cssRules.length;e++)if(-1!==n.cssRules[e].selectorText.indexOf(t))return 1}(e)&&g(b(t)),i[a].number<r&&(i[a].number=r)}return{init:function(){var t,e;n=null,i=[],s={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},this.$buttonsStyle=b("#rexpansive-builder-rexbutton-style-inline-css"),0==Rexbuilder_Rexbutton.$buttonsStyle.length&&(t=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css",e.id="rexpansive-builder-rexbutton-style-inline-css",e.dataset.rexName="buttons-style",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e));for(var r=0;r<document.styleSheets.length;r++)"rexpansive-builder-rexbutton-style-inline-css"==document.styleSheets[r].ownerNode.id&&(n=document.styleSheets[r]);_(),R(),Rexbuilder_Util.$document.on("rexlive:completeImportButton",function(t){var t=t.settings,e=t.$blockAdded,t=t.$buttonWrapper;t.detach().prependTo(e.find(".text-wrap").eq(0)),t.wrap('<p class="rex-buttons-paragraph"></p>'),c(t)})},getActiveStyleSheet:function(){return n},fixImportedButton:function(t){var e=Rexbuilder_Util.$rexContainer.find(".rex-loading-button .rex-button-wrapper"),r=(e.unwrap(),e.parents(".rex-buttons-paragraph").eq(0)),o=e.parents(".text-wrap").eq(0),a=e.parents(".grid-stack-row").eq(0),n=e.parents(".rexpansive_section").eq(0),i=jQuery.extend(!0,{},t.buttonDimensions),s=(a.find(".button-list__element__tools").remove(),e.find(".rex-button-data").eq(0)),d={top:parseInt(s.attr("data-margin-top").replace("px","")),bottom:parseInt(s.attr("data-margin-bottom").replace("px","")),left:parseInt(s.attr("data-margin-left").replace("px","")),right:parseInt(s.attr("data-margin-right").replace("px",""))},s=(d.top=isNaN(d.top)?0:d.top,d.bottom=isNaN(d.bottom)?0:d.bottom,d.left=isNaN(d.left)?0:d.left,d.right=isNaN(d.right)?0:d.right,{top:parseInt(s.attr("data-padding-top").replace("px","")),bottom:parseInt(s.attr("data-padding-bottom").replace("px","")),left:parseInt(s.attr("data-padding-left").replace("px","")),right:parseInt(s.attr("data-padding-right").replace("px",""))});switch(s.top=isNaN(s.top)?0:s.top,s.bottom=isNaN(s.bottom)?0:s.bottom,s.left=isNaN(s.left)?0:s.left,s.right=isNaN(s.right)?0:s.right,i.height=i.height+d.top+d.bottom+s.top+s.bottom,i.width=i.width+d.left+d.right+s.left+s.right,0==o.length?0!=a.length?"inside-row":"inside-new-row":0!=r.length?"inside-paragraph":"inside-block"){case"inside-block":e.wrap('<p class="rex-buttons-paragraph"></p>'),c(e);break;case"inside-paragraph":c(e);(function(t){Rexbuilder_Util_Editor.isJQuery(t)||(t=b(t));return 0!==t.next("p").length})(r)||(l=r,Rexbuilder_Util_Editor.isJQuery(l)&&(l=l.get(0)),u=Rexbuilder_Live_Templates.getTemplate("empty-paragraph"),l.insertAdjacentHTML("afterend",u));var l=r.next("p");TextEditor.moveCursorToStart(l);break;case"inside-row":var u=jQuery.Event("rexlive:insert_new_text_block");u.settings={data_to_send:{$buttonWrapper:e,$section:n,addBlockButton:!0,mousePosition:t.mousePosition,blockDimensions:{w:i.width,h:i.height},sectionTarget:{sectionID:n.attr("data-rexlive-section-id"),modelNumber:void 0!==n.attr("data-rexlive-model-number")?n.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(u)}},getButtonsInPage:function(){return i},updateButtonLive:function(t){switch(t.propertyType){case"text":d(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"container":o(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"background":a(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"backgroundHover":case"borderHover":u(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"textHover":l(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"button":var e=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t.buttonTarget.button_id+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');switch(t.propertyName){case"link_target":e.find("a.rex-button-container").eq(0).attr("href",t.newValue);break;case"link_type":e.find("a.rex-button-container").eq(0).attr("target",t.newValue);break;case"button_label":e.find(".rex-button-text").eq(0).text(t.newValue);break;case"button_class":e.find("a.rex-button-container").eq(0).attr("class","").addClass("rex-button-container").addClass(t.newValue);break;case"button_name":e.find(".rex-button-data").eq(0).attr("data-button-name",t.newValue)}}},lockSynchronize:function(t){var e=t.buttonTarget.button_id;Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]').find(".rex-button-data").attr("data-synchronize",!0)},updateButton:function(t){var t=t.buttonProperties,e=t.buttonTarget.button_id,r=(isNaN(parseInt(t.font_size.replace("px","")))?s:t).font_size,r=(o(e,"font-size",r),o(e,"color",t.text_color),r=isNaN(parseInt(t.button_height.replace("px","")))?s.dimensions.height:t.button_height,o(e,"min-height",r),r=isNaN(parseInt(t.button_width.replace("px","")))?s.dimensions.width:t.button_width,o(e,"min-width",r),r=isNaN(parseInt(t.margin_top.replace("px","")))?s.margins.top:t.margin_top,o(e,"margin-top",r),r=isNaN(parseInt(t.margin_right.replace("px","")))?s.margins.right:t.margin_right,o(e,"margin-right",r),r=isNaN(parseInt(t.margin_bottom.replace("px","")))?s.margins.bottom:t.margin_bottom,o(e,"margin-bottom",r),r=isNaN(parseInt(t.margin_left.replace("px","")))?s.margins.left:t.margin_left,o(e,"margin-left",r),a(e,"border-color",t.border_color),r=isNaN(parseInt(t.border_width.replace("px","")))?s.border.width:t.border_width,a(e,"border-width",r),r=isNaN(parseInt(t.border_radius.replace("px","")))?s.border.radius:t.border_radius,a(e,"border-radius",r),a(e,"background-color",t.background_color),r=isNaN(parseInt(t.padding_top.replace("px","")))?s.paddings.top:t.padding_top,d(e,"padding-top",r),r=isNaN(parseInt(t.padding_right.replace("px","")))?s.paddings.right:t.padding_right,d(e,"padding-right",r),r=isNaN(parseInt(t.padding_bottom.replace("px","")))?s.paddings.bottom:t.padding_bottom,d(e,"padding-bottom",r),r=isNaN(parseInt(t.padding_left.replace("px","")))?s.paddings.left:t.padding_left,d(e,"padding-left",r),u(e,"background-color",t.hover_color),u(e,"border-color",t.hover_border),l(e,"color",t.hover_text),Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]')),e=r.find(".rex-button-data").eq(0);r.find(".rex-button-text").eq(0).text(t.text),r.find("a.rex-button-container").eq(0).attr("href",t.link_target),r.find("a.rex-button-container").eq(0).attr("target",t.link_type),e.attr("data-link-target",t.link_target),e.attr("data-link-type",t.link_type),r.hasClass("rex-separate-button")?p(r,t):x(r)},removeSeparateButton:function(t){t=t.buttonTarget.button_id,t=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t+'"]');t.removeClass("rex-separate-button"),x(t)},separateRexButton:function(t){var e=t.buttonData,t=t.newID,r=e.buttonTarget.button_id,o=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]');if(o.addClass("rex-separate-button"),o.attr("data-rex-button-id",t),o.attr("data-rex-button-number",1),i.push({id:t,number:1}),0==Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"]').length){for(var a=0;a<i.length&&i[a].id!=r;a++);a!=i.length&&i.splice(a,1)}p(o,e),g(o)},generateButtonData:h,endFixingButtonImported:c,updateButtonListInPage:R,findIDsInPage:m,refreshNumbers:_,updateButtonContainerRule:o,updateButtonBackgroundRule:a,updateButtonBackgroundHoverRule:u,updateContainerHoverRule:l}}(jQuery);
var Rexbuilder_Rexelement=function(n){"use strict";var i=[],_={background_color:"rgb(0, 0, 0, 0)",border_color:"rgb(0, 0, 0, 1)",border_width:"2px",margin_top:"5px",margin_left:"5px",margin_right:"5px",margin_bottom:"5px",error_message_color:"rgb(0, 0, 0, 1)",error_message_font_size:"15px",send_message_color:"rgb(0, 0, 0, 1)",send_message_font_size:"15px",columns:{padding_top:"15px",padding_left:"15px",padding_right:"15px",padding_bottom:"15px"},content:{background_color:"rgb(255, 255, 255, 1)",background_color_hover:"rgb(255, 255, 255, 1)",text_color:"rgb(0, 0, 0, 1)",text_color_hover:"rgb(0, 0, 0, 1)",border_color:"rgb(0, 0, 0, 1)",border_color_hover:"rgb(0, 0, 0, 1)",width:"200px",height:"50px",font_size:"15px",border_width:"1px",border_radius:"0px"},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}};function r(e){0!==e.find(".wpcf7-form").length&&(Rexbuilder_Rexwpcf7.refreshFormStyle(e.find(".wpcf7-form"),!0),e.find(".wpcf7-column").each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(n(t))}))}return{init:function(){var o;Rexbuilder_Util.$document.find("form").get().filter(function(e){return 0===n(e).parents(".rex-element-wrapper").length}).forEach(function(e){Rexbuilder_Util.addClass(e,"no-builder-form")}),Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){var t=n(t),r=t.attr("data-rex-element-id"),t=parseInt(t.attr("data-rex-element-number"));for(o=0;o<i.length;o++)if(i[o].id==r){0;break}!1||i.push({id:parseInt(r),number:t}),i[o].number<t&&(i[o].number=t)})},addStyles:function(){Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){t=n(t);!t.hasClass("rex-separate-element")&&0!==e&&i[e].id==i[e-1].id||r(t)})},addElementStyle:r,generateElementData:function(e){var t,r,o,n,i=e.get(0),c={},d=i.querySelector(".rex-element-data").dataset,i={element_id:e.attr("data-rex-element-id"),element_number:parseInt(e.attr("data-rex-element-number")),is_separated:Rexbuilder_Util.hasClass(i,"rex-separate-form"),form_title:i.querySelector(".string-shortcode").getAttribute("shortcode").match(/title\=\"(.*)\"/)[1]},e=e.find(".wpcf7-form"),e={background_color:d.wpcf7BackgroundColor||e.css("background-color"),border_color:d.wpcf7BorderColor||e.css("border-color"),border_width:d.wpcf7BorderWidth||e.css("border-width"),margin_top:d.wpcf7MarginTop||e.css("margin-top"),margin_left:d.wpcf7MarginLeft||e.css("margin-left"),margin_right:d.wpcf7MarginRight||e.css("margin-right"),margin_bottom:d.wpcf7MarginBottom||e.css("margin-bottom"),error_message_color:d.wpcf7ErrorMessageColor||_.error_message_color,error_message_font_size:d.wpcf7ErrorMessageFontSize||_.error_message_font_size,send_message_color:d.wpcf7SendMessageColor||_.send_message_color,send_message_font_size:d.wpcf7SendMessageFontSize||_.send_message_font_size},a={width:d.wpcf7ContentWidth||_.content.width,height:d.wpcf7ContentHeight||_.content.height,font_size:d.wpcf7ContentFontSize||_.content.font_size,border_width:d.wpcf7ContentBorderWidth||_.content.border_width,border_radius:d.wpcf7ContentBorderRadius||_.content.border_radius,text_color:d.wpcf7ContentTextColor||_.content.text_color,background_color:d.wpcf7ContentBackgroundColor||_.content.background_color,border_color:d.wpcf7ContentBorderColor||_.content.border_color,text_color_hover:d.wpcf7ContentTextColorHover||_.content.text_color_hover,background_color_hover:d.wpcf7ContentBackgroundColorHover||_.content.background_color_hover,border_color_hover:d.wpcf7ContentBorderColorHover||_.content.border_color_hover},l={padding_top:d.wpcf7ColumnsPaddingTop||_.columns.padding_top,padding_left:d.wpcf7ColumnsPaddingLeft||_.columns.padding_left,padding_right:d.wpcf7ColumnsPaddingRight||_.columns.padding_right,padding_bottom:d.wpcf7ColumnsPaddingBottom||_.columns.padding_bottom};function s(e,t,r){return e===r[0]}return e.content=a,e.columns=l,e.options_different=(a=i.element_id,a=Rexbuilder_Util.rexContainer.querySelector('.rex-element-wrapper[data-rex-element-id="'+a+'"]'),l=a.querySelector(".rex-element-data"),a=Array.prototype.slice.call(a.querySelectorAll(".rex-wpcf7-column-content-data")),t=new Array(l.getAttribute("data-wpcf7-content-width")),r=new Array(l.getAttribute("data-wpcf7-content-height")),o=new Array(l.getAttribute("data-wpcf7-content-text-color")),n=new Array(l.getAttribute("data-wpcf7-content-font-size")),a.forEach(function(e){t.push(e.getAttribute("data-wpcf7-input-width")),r.push(e.getAttribute("data-wpcf7-input-height")),o.push(e.getAttribute("data-text-color")),n.push(e.getAttribute("data-wpcf7-font-size"))}),(l={}).width=!t.every(s),l.height=!r.every(s),l.text_color=!o.every(s),l.font_size=!n.every(s),l),c.synchronize=d.synchronize||!1,c.synchronize=d.synchronize||!1,c.element_target=i,c.wpcf7_data=e,c}}}(jQuery);
var Rexbuilder_Rexelement_Editor=function(C){"use strict";var d=[];function l(e){var t=e.element_target.element_id;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"][data-rex-element-number="'+e.element_target.element_number+'"]').find(".rex-element-data").attr("data-synchronize",!0)}function s(e,_){e.get(0);var t=0!==e.find(".wpcf7").length,r=e.attr("data-rex-element-id"),n=!1;e.attr("data-rex-element-number",1);for(var a=0;a<d.length;a++)if(d[a].id==r){d[a].number+=1,e.attr("data-rex-element-number",d[a].number),n=!0;break}n||d.push({id:r,number:1});var l,b,i,h,g,v,o=e.parents(".text-wrap");0!=o.length&&TextEditor.removePlaceholder(o.eq(0)),t&&(t=0===e.find(".wpcf7-rows").length,l=r,t?((t=e.find(".wpcf7-form")).children().not(".wpcf7-response-output").not(t.children().first()).wrapAll('<div class="wpcf7-rows ui-sortable"></div>'),b=t.find(".wpcf7-rows"),t.find("[type=url]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=tel]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=date]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=range]").parents(".wpcf7-form-control-wrap").remove(),t.find(".wpcf7-checkbox").parents(".wpcf7-form-control-wrap").remove(),t.find(".wpcf7-quiz-label").parents(".wpcf7-form-control-wrap").remove(),_=_.replace(/\[(url|tel|date|checkbox|quiz|range)\*?[^\]]+\]/g,""),t=b.children().filter(function(e,t){t=C(t);return 0!=t.find(".wpcf7-form-control-wrap").length||0!=t.find(".wpcf7-form-control").length||t.is(".wpcf7-form-control-wrap")||t.is(".wpcf7-form-control")}),i=C(),t.each(function(e,t){var r,n,t=C(t);0!==t.find(".wpcf7-form-control-wrap").length?0!==(t=t.find(".wpcf7-form-control-wrap")).parent("label").length&&(r=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),(n=t.parent("label")).contents().wrapAll(r),n.append(t),t=n.addClass("wpcf7-label-text")):0!==t.find(".wpcf7-form-control").length&&(t=t.find(".wpcf7-form-control")),i=i.add(t)}),b.empty(),h=[],g=[],v=C(document.createElement("div")).addClass("wpcf7-rows ui-sortable"),i.each(function(e,t){var r,n,a,l,i=C(t),o=C(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",e+1),d=C(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),c=C(document.createElement("span")).addClass("wpcf7-column-content").append(t),d=(d.append(c),o.append(d),v.append(o),C(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",e+1)),o=C(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),t=C(document.createElement("span")).addClass("wpcf7-column-content").append(t),t=(o.append(t),d.append(o),b.append(d),c.append(i[0].outerHTML),0!=(i=i.is("label")?void 0===i.find(".wpcf7-form-control-wrap")?i.find(".wpcf7-form-control"):i.find(".wpcf7-form-control-wrap"):i).find("[type=text]").length),o=0!=i.find(".wpcf7-email").length,d=0!=i.find(".wpcf7-number").length,p=0!=i.find(".wpcf7-textarea").length,s=0!=i.find(".wpcf7-select").length,f=0!=i.find(".wpcf7-radio").length,m=0!=i.find(".wpcf7-acceptance").length,u=0!=i.find(".wpcf7-file").length,x=i.is(".wpcf7-submit"),w=Rexbuilder_Util.createRandomNumericID(3);h[e]=w,g[e]=/\[[\w]+[^\]]+\]/.exec(_)[0],t?(a="text-"+h[e],(r=i.find(".wpcf7-text")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[text\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):o?(a="email-"+h[e],(r=i.find(".wpcf7-email")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[email\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):d?(a="number-"+h[e],(r=i.find(".wpcf7-number")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[number\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):p?(a="textarea-"+h[e],(r=i.find(".wpcf7-textarea")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[textarea\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):s?(a="menu-"+h[e],(r=i.find(".wpcf7-select")).addClass(a),i.addClass(a),r.prepend('<option value="" disabled selected>Select something</option>'),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[select\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):f?(a="radio-"+h[e],n=i.find("[type=radio]").attr("name"),i.addClass(a),i.removeClass(n),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[radio\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):m?(a="acceptance-"+h[e],n=i.find("[type=checkbox]").attr("name"),i.addClass(a),i.removeClass(n),g[e]=/\[acceptance\*?[^(\])]+\][^(\])]+\]/.exec(_)[0],_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[acceptance\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):u?(a="file-"+h[e],n=i.find("[type=file]").attr("name"),i.append('<div class="wpcf7-file-caption">Your text here</div>'),i.addClass(a),i.removeClass(n),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[file\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),g[e]=g[e].replace("]",']<div class="wpcf7-file-caption">Your text here</div>'),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):x&&(i.addClass(a="submit-"+w),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[submit/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control").replaceWith(g[e])),/\]/.test(g[e])||(g[e]+="]")}),Rexbuilder_Rexwpcf7_Editor.addFormInPage(l,v),v.find(".wpcf7-column").each(function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData({editPoint:{element_id:l,row_number:e+1,column_number:1}})}),e=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+l+'"]').eq(0),Rexbuilder_Rexelement.addElementStyle(e),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Util_Editor.updateBlockContainerHeight(o),e.removeClass("importing-element")):Rexbuilder_Rexwpcf7_Editor.updateDBFormsInPage(r,!0),Rexbuilder_Rexwpcf7_Editor.wrapButtons(),Rexbuilder_Rexwpcf7_Editor.setRowsSortable(),Rexbuilder_Rexwpcf7_Editor.addMissingTools(l),c(),TextEditor.focusTextWrap(o)),Rexbuilder_Live_Utilities.launchTooltips()}function c(){for(var e=Rexbuilder_Live_Templates.getTemplate("rexelement-tools",{settingsType:"form_settings"}),t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),r=0;r<t.length;r++)t[r].querySelector(".rexelement-tools")||t[r].insertAdjacentHTML("afterbegin",e)}return{init:function(){var n;c(),Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){var t=C(t),r=t.attr("data-rex-element-id"),t=parseInt(t.attr("data-rex-element-number"));for(n=0;n<d.length;n++)if(d[n].id==r){0;break}!1||d.push({id:parseInt(r),number:t}),d[n].number<t&&(d[n].number=t)})},fixImportedElement:function(l){var i=Rexbuilder_Util.$rexContainer.find(".rex-loading-element .rex-element-wrapper"),e=i.attr("data-rex-element-id"),o=i.parents(".text-wrap").eq(0),d=i.parents(".grid-stack-row").eq(0),c=i.parents(".rexpansive_section").eq(0),p="inside-block",t="inside-block"===p,r=(0==o.length&&0!==d.length&&(p="inside-row"),i.addClass("importing-element"),i.detach(),d.find(".element-list-preview"));t?r.replaceWith('<div class="form-replacer"></div>'):r.remove(),C.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:e},success:function(e){if(e.success){var t=C.parseHTML(e.data.shortcode_transformed),r=e.data.form_content.toString().trim(),n=C('<div class="rex-element-container"></div>'),t=(n.append(t),i.append(n),e.data.shortcode),n=C('<span class="string-shortcode"></span>').get(0),t=(n.setAttribute("shortcode",t),i.prepend(n),i.find(".rex-element-data")),n=C.parseHTML(e.data.element_data_html[0]);switch(t.attr("data-synchronize",!1),null!==n&&(t.remove(),e=C(n),i.prepend(e),e.attr("data-synchronize",!1)),p){case"inside-block":i.wrap('<span class="rex-elements-paragraph"></span>'),d.find(".form-replacer").replaceWith(i),s(i,r),Rexbuilder_Util_Editor.updateBlockContainerHeight(o);break;case"inside-row":var a=jQuery.Event("rexlive:insert_new_text_block");a.settings={data_to_send:{$elementWrapper:i,$section:c,addBlockElement:!0,mousePosition:l.mousePosition,formFieldsString:r,sectionTarget:{sectionID:c.attr("data-rexlive-section-id"),modelNumber:void 0!==c.attr("data-rexlive-model-number")?c.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(a)}}},error:function(e){}})},setupElement:s,handleCompleteImportElement:function(e){var t=(e=e.settings).$elementAdded,r=e.$elementWrapper,e=e.formFieldsString;r.detach().prependTo(t.find(".text-wrap").eq(0)),r.wrap('<span class="rex-elements-paragraph"></span>'),s(r,e)},lockSynchronize:l,separateRexElement:function(e){var t=e.elementData,e=e.newID,r=t.element_target.element_id;if((t=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"][data-rex-element-number="'+t.element_target.element_number+'"]')).addClass("rex-separate-form"),t.attr("data-rex-element-id",e),t.attr("data-rex-element-number",1),d.push({id:e,number:1}),0===Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]').length){for(var n=0;n<d.length&&d[n].id!=r;n++);n!=d.length&&d.splice(n,1)}Rexbuilder_Rexwpcf7_Editor.removeFormInPage(r)},refreshSeparatedRexElement:function(e){var t=e.elementID.toString(),r=e.oldElementID.toString(),n=e.elementData,a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]'),r=(e=a.find(".string-shortcode")).attr("shortcode").toString().replace(r,t);e.attr("shortcode",r),C.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:t},success:function(e){var t,r;e.success&&(t=e.data.form_content.toString().trim(),(r=a.find(".rex-element-container")).empty(),e=C.parseHTML(e.data.shortcode_transformed),r.append(e),l(n),s(a,t),Rexbuilder_Util_Editor.builderEdited(!1))},error:function(e){}})}}}(jQuery);
var Rexbuilder_Rexwpcf7=function(f){"use strict";var n=null,i={wpcf7_required_field:!1,wpcf7_email:!1,wpcf7_only_numbers:!1,wpcf7_default_check:!1,wpcf7_placeholder:"Placeholder",wpcf7_file_max_dimensions:"25mb",wpcf7_button:{text_color_hover:"rgba(255,255,255,1)",background_color_hover:"rgba(86,86,86,1)",border_color_hover:"rgba(255,255,255,1)"},placeholder_color:"rgba(0,0,0,1)",placeholder_hover_color:"rgba(0,0,0,1)",text_color_focus:"rgba(0,0,0,1)"},s=["wpcf7-validation-errors","wpcf7-aborted","wpcf7-acceptance-missing","wpcf7-spam-blocked","wpcf7-mail-sent-ng"],d=["wpcf7-mail-sent-ok"];function u(t){for(var e=0;e<n.cssRules.length;e++)if(n.cssRules[e].selectorText==t)return 1}function b(t){var e={};return t.split(";").forEach(function(t){t=t.split(":");2===t.length&&(e[t[0]]=t[1].trim())}),e}function p(t,e){var o='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',r=o+"{"+e+"}";if(u(o)){var c,l=b(e);for(c in l)l.hasOwnProperty(c)&&a(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function _(t,e,o){var e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,r=e+"{"+o+"}";if(u(e)){var c,l=b(o);for(c in l)l.hasOwnProperty(c)&&R(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function g(t,e){var o='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',r=o+"{"+e+"}";if(u(o)){var c,l=b(e);for(c in l)l.hasOwnProperty(c)&&y(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function w(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r,o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&F(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function m(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&E(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function h(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&O(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function x(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover::placeholder",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&P(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function a(t,e,o){for(var r=0;r<n.cssRules.length;r++)if(n.cssRules[r].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form'||n.cssRules[r].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form'){switch(e){case"margin-top":n.cssRules[r].style.marginTop=o;break;case"margin-bottom":n.cssRules[r].style.marginBottom=o;break;case"margin-left":n.cssRules[r].style.marginLeft=o;break;case"margin-right":n.cssRules[r].style.marginRight=o;break;case"border-width":n.cssRules[r].style.borderWidth=o,n.cssRules[r].style.borderTopWidth=o,n.cssRules[r].style.borderLeftWidth=o,n.cssRules[r].style.borderRightWidth=o,n.cssRules[r].style.borderBottomWidth=o,n.cssRules[r].style.borderTop=o+" "+n.cssRules[r].style.borderTopStyle+" "+n.cssRules[r].style.borderTopColor,n.cssRules[r].style.borderLeft=o+" "+n.cssRules[r].style.borderLeftStyle+" "+n.cssRules[r].style.borderLeftColor,n.cssRules[r].style.borderRight=o+" "+n.cssRules[r].style.borderRightStyle+" "+n.cssRules[r].style.borderRightColor,n.cssRules[r].style.borderBottom=o+" "+n.cssRules[r].style.borderBottomStyle+" "+n.cssRules[r].style.borderBottomColor;break;case"border-color":n.cssRules[r].style.borderColor=o,n.cssRules[r].style.borderTopColor=o,n.cssRules[r].style.borderLeftColor=o,n.cssRules[r].style.borderRightColor=o,n.cssRules[r].style.borderBottomColor=o;break;case"border-style":n.cssRules[r].style.borderStyle=o,n.cssRules[r].style.borderTopStyle=o,n.cssRules[r].style.borderLeftStyle=o,n.cssRules[r].style.borderRightStyle=o,n.cssRules[r].style.borderBottomStyle=o,n.cssRules[r].style.borderTop=n.cssRules[r].style.borderTopWidth+" "+o+" "+n.cssRules[r].style.borderTopColor,n.cssRules[r].style.borderLeft=n.cssRules[r].style.borderLeftWidth+" "+o+" "+n.cssRules[r].style.borderLeftColor,n.cssRules[r].style.borderRight=n.cssRules[r].style.borderRightWidth+" "+o+" "+n.cssRules[r].style.borderRightColor,n.cssRules[r].style.borderBottom=n.cssRules[r].style.borderBottomWidth+" "+o+" "+n.cssRules[r].style.borderBottomColor;break;case"border-radius":n.cssRules[r].style.borderRadius=o,n.cssRules[r].style.borderTopLeftRadius=o,n.cssRules[r].style.borderTopRightRadius=o,n.cssRules[r].style.borderBottomLeftRadius=o,n.cssRules[r].style.borderBottomRightRadius=o,n.cssRules[r].style.webkitBorderRadius=o,n.cssRules[r].style.webkitBorderTopLeftRadius=o,n.cssRules[r].style.webkitBorderTopRightRadius=o,n.cssRules[r].style.webkitBorderBottomLeftRadius=o,n.cssRules[r].style.webkitBorderBottomRightRadius=o;break;case"background-color":n.cssRules[r].style.backgroundColor=o}break}}function R(t,e,o,r){for(var c='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,l='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form',a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText==c||n.cssRules[a].selectorText==l){switch(o){case"text-color":n.cssRules[a].style.color=r;break;case"border-color":n.cssRules[a].style.borderColor=r;break;case"font-size":n.cssRules[a].style.fontSize=r}break}}function y(t,e,o){for(var r='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',c='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form .wpcf7-column',l=0;l<n.cssRules.length;l++)if(n.cssRules[l].selectorText==r||n.cssRules[l].selectorText==c){switch(e){case"padding-top":n.cssRules[l].style.paddingTop=o;break;case"padding-left":n.cssRules[l].style.paddingLeft=o;break;case"padding-right":n.cssRules[l].style.paddingRight=o;break;case"padding-bottom":n.cssRules[l].style.paddingBottom=o}break}}function F(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r||n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r){switch(c){case"float":n.cssRules[a].style.float=l;break;case"width":n.cssRules[a].style.width=l;break;case"height":n.cssRules[a].style.height=l;break;case"text-color":n.cssRules[a].style.color=l;break;case"font-size":n.cssRules[a].style.fontSize=l;break;case"margin-top":n.cssRules[a].style.marginTop=l;break;case"margin-bottom":n.cssRules[a].style.marginBottom=l;break;case"margin-left":n.cssRules[a].style.marginLeft=l;break;case"margin-right":n.cssRules[a].style.marginRight=l;break;case"padding-top":n.cssRules[a].style.paddingTop=l;break;case"padding-bottom":n.cssRules[a].style.paddingBottom=l;break;case"padding-left":n.cssRules[a].style.paddingLeft=l;break;case"padding-right":n.cssRules[a].style.paddingRight=l;break;case"border-width":n.cssRules[a].style.borderWidth=l,n.cssRules[a].style.borderTopWidth=l,n.cssRules[a].style.borderLeftWidth=l,n.cssRules[a].style.borderRightWidth=l,n.cssRules[a].style.borderBottomWidth=l,n.cssRules[a].style.borderTop=l+" "+n.cssRules[a].style.borderTopStyle+" "+n.cssRules[a].style.borderTopColor,n.cssRules[a].style.borderLeft=l+" "+n.cssRules[a].style.borderLeftStyle+" "+n.cssRules[a].style.borderLeftColor,n.cssRules[a].style.borderRight=l+" "+n.cssRules[a].style.borderRightStyle+" "+n.cssRules[a].style.borderRightColor,n.cssRules[a].style.borderBottom=l+" "+n.cssRules[a].style.borderBottomStyle+" "+n.cssRules[a].style.borderBottomColor;break;case"border-color":n.cssRules[a].style.borderColor=l,n.cssRules[a].style.borderTopColor=l,n.cssRules[a].style.borderLeftColor=l,n.cssRules[a].style.borderRightColor=l,n.cssRules[a].style.borderBottomColor=l;break;case"border-top-color":n.cssRules[a].style.borderTopColor=l;break;case"border-right-color":n.cssRules[a].style.borderRightColor=l;break;case"border-bottom-color":n.cssRules[a].style.borderBottomColor=l;break;case"border-left-color":n.cssRules[a].style.borderLeftColor=l;break;case"border-style":n.cssRules[a].style.borderStyle=l,n.cssRules[a].style.borderTopStyle=l,n.cssRules[a].style.borderLeftStyle=l,n.cssRules[a].style.borderRightStyle=l,n.cssRules[a].style.borderBottomStyle=l,n.cssRules[a].style.borderTop=n.cssRules[a].style.borderTopWidth+" "+l+" "+n.cssRules[a].style.borderTopColor,n.cssRules[a].style.borderLeft=n.cssRules[a].style.borderLeftWidth+" "+l+" "+n.cssRules[a].style.borderLeftColor,n.cssRules[a].style.borderRight=n.cssRules[a].style.borderRightWidth+" "+l+" "+n.cssRules[a].style.borderRightColor,n.cssRules[a].style.borderBottom=n.cssRules[a].style.borderBottomWidth+" "+l+" "+n.cssRules[a].style.borderBottomColor;break;case"border-radius":n.cssRules[a].style.borderRadius=l,n.cssRules[a].style.borderTopLeftRadius=l,n.cssRules[a].style.borderTopRightRadius=l,n.cssRules[a].style.borderBottomLeftRadius=l,n.cssRules[a].style.borderBottomRightRadius=l,n.cssRules[a].style.webkitBorderRadius=l,n.cssRules[a].style.webkitBorderTopLeftRadius=l,n.cssRules[a].style.webkitBorderTopRightRadius=l,n.cssRules[a].style.webkitBorderBottomLeftRadius=l,n.cssRules[a].style.webkitBorderBottomRightRadius=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l}break}}function E(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":focus"){"text-color"===c&&(n.cssRules[a].style.color=l);break}}function O(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":hover"){switch(c){case"text-color":n.cssRules[a].style.color=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l;break;case"border-color":n.cssRules[a].style.borderColor=l}break}}function P(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover::placeholder"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":hover::placeholder"){switch(c){case"text-color":n.cssRules[a].style.color=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l;break;case"border-color":n.cssRules[a].style.borderColor=l}break}}function k(t,e,o,r){for(var c='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r,l=0;l<n.cssRules.length;l++)if(n.cssRules[l].selectorText==c){n.deleteRule(l);break}}function v(t,e,o,r){for(var c=0;c<n.cssRules.length;c++)if(n.cssRules[c].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover"){n.deleteRule(c);break}}function C(t,e,o,r){for(var c=0;c<n.cssRules.length;c++)if(n.cssRules[c].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus"){n.deleteRule(c);break}}function A(t){var e,o=t.elementData.wpcf7_data,r=t.elementData.element_target.element_id,t=(a(r,"background-color",o.background_color),a(r,"border-color",o.border_color),a(r,"border-width",o.border_width),a(r,"margin-top",o.margin_top),a(r,"margin-left",o.margin_left),a(r,"margin-right",o.margin_right),a(r,"margin-bottom",o.margin_bottom),s.forEach(function(t){R(r,t,"text-color",o.error_message_color),R(r,t,"border-color",o.error_message_color),R(r,t,"font-size",o.error_message_font_size)}),d.forEach(function(t){R(r,t,"text-color",o.send_message_color),R(r,t,"border-color",o.send_message_color),R(r,t,"font-size",o.send_message_font_size)}),y(r,"padding-top",o.columns.padding_top),y(r,"padding-left",o.columns.padding_left),y(r,"padding-right",o.columns.padding_right),y(r,"padding-bottom",o.columns.padding_bottom),c(t.elementData),Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]'));e=o,t.each(function(){var t=f(this).find(".rex-element-data").eq(0);t.attr("data-wpcf7-background-color",e.background_color),t.attr("data-wpcf7-border-color",e.border_color),t.attr("data-wpcf7-border-width",e.border_width),t.attr("data-wpcf7-margin-top",e.margin_top),t.attr("data-wpcf7-margin-left",e.margin_left),t.attr("data-wpcf7-margin-right",e.margin_right),t.attr("data-wpcf7-margin-bottom",e.margin_bottom),t.attr("data-wpcf7-error-message-color",e.error_message_color),t.attr("data-wpcf7-error-message-font-size",e.error_message_font_size),t.attr("data-wpcf7-send-message-color",e.send_message_color),t.attr("data-wpcf7-send-message-font-size",e.send_message_font_size),t.attr("data-wpcf7-columns-padding-top",e.columns.padding_top),t.attr("data-wpcf7-columns-padding-left",e.columns.padding_left),t.attr("data-wpcf7-columns-padding-right",e.columns.padding_right),t.attr("data-wpcf7-columns-padding-bottom",e.columns.padding_bottom),t.attr("data-wpcf7-content-width",e.content.width),t.attr("data-wpcf7-content-height",e.content.height),t.attr("data-wpcf7-content-font-size",e.content.font_size),t.attr("data-wpcf7-content-border-width",e.content.border_width),t.attr("data-wpcf7-content-border-radius",e.content.border_radius),t.attr("data-wpcf7-content-text-color",e.content.text_color),t.attr("data-wpcf7-content-text-color-hover",e.content.text_color_hover),t.attr("data-wpcf7-content-background-color",e.content.background_color),t.attr("data-wpcf7-content-background-color-hover",e.content.background_color_hover),t.attr("data-wpcf7-content-border-color",e.content.border_color),t.attr("data-wpcf7-content-border-color-hover",e.content.border_color_hover)})}function c(t){var r=t,t=r.element_target.element_id,c=r.wpcf7_data.options_different;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-column').not(".with-button").each(function(t,e){var e=f(e),o=0!==e.find(".rex-wpcf7-column-content-data").length,e=z(e,o),o=e.input_type;"file"!=o&&"radio"!=o&&"acceptance"!=o&&(e.background_color=r.wpcf7_data.content.background_color,e.background_color_hover=r.wpcf7_data.content.background_color_hover,e.border_color=r.wpcf7_data.content.border_color,e.border_color_hover=r.wpcf7_data.content.border_color_hover,e.border_width=r.wpcf7_data.content.border_width,e.border_radius=r.wpcf7_data.content.border_radius),c.width||(e.input_width=r.wpcf7_data.content.width),c.height||(e.input_height=r.wpcf7_data.content.height),c.font_size||(e.font_size=r.wpcf7_data.content.font_size),c.text_color||(e.text_color=r.wpcf7_data.content.text_color),e.text_color_hover=r.wpcf7_data.content.text_color_hover,S({columnContentData:e})})}function o(t,e){e=void 0!==e&&e;var o,r,c,l,a,t=t.parents(".rex-element-wrapper");0!==t.find(".rex-element-data").length&&(c=(t=Rexbuilder_Rexelement.generateElementData(t)).element_target.element_id,r=t.wpcf7_data,o=c,c="",c=(c=(c=(c=(c=(c=(c="background-color: "+(r=r).background_color+";border-style: solid;")+"border-color: "+r.border_color+";")+"border-width: "+r.border_width+";")+"margin-top: "+r.margin_top+";")+"margin-left: "+r.margin_left+";")+"margin-right: "+r.margin_right+";")+"margin-bottom: "+r.margin_bottom+";",p(o,c),l="",l=(l+="color:"+r.error_message_color+";")+"font-size:"+r.error_message_font_size+";",s.forEach(function(t){_(o,t,l)}),a="",a=(a+="color:"+r.send_message_color+";")+"font-size:"+r.send_message_font_size+";",d.forEach(function(t){_(o,t,a)}),c="",c=(c=(c=(c+="padding-top: "+r.columns.padding_top+";")+"padding-left: "+r.columns.padding_left+";")+"padding-right: "+r.columns.padding_right+";")+"padding-bottom: "+r.columns.padding_bottom+";",g(o,c),e)&&A({elementData:{element_target:t.element_target,synchronize:t.synchronize,wpcf7_data:t.wpcf7_data}})}function l(t){q(t),e(t)}function e(t){if(t.get(0).querySelector(".rex-wpcf7-column-content-data")){var e,o,r,t=z(t,!0),c=t.target.element_id,l=t.target.row_number,a=t.target.column_number,n=t.field_class,s=t.input_type;switch(s){case"text":case"email":case"number":case"textarea":case"select":r="wpcf7-"+s;break;case"acceptance":r="wpcf7-form-control-wrap";break;case"file":case"submit":r=n;break;case"radio":r="wpcf7-form-control-wrap."+n}var i="";-1===["select","submit"].indexOf(s)&&(i+="color: "+t.text_color_focus+";",m(c,l,a,r,i)),"file"==s&&(i="",i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i+="font-size: "+t.wpcf7_button.font_size+";")+"height: "+t.wpcf7_button.height+";")+"width: "+t.wpcf7_button.width+";")+"border-width: "+t.wpcf7_button.border_width+";")+"border-radius: "+t.wpcf7_button.border_radius+";border-style: solid;")+"margin-top: "+t.wpcf7_button.margin_top+";")+"margin-right: "+t.wpcf7_button.margin_right+";")+"margin-bottom: "+t.wpcf7_button.margin_bottom+";")+"margin-left: "+t.wpcf7_button.margin_left+";")+"padding-top: "+t.wpcf7_button.padding_top+";")+"padding-right: "+t.wpcf7_button.padding_right+";")+"padding-bottom: "+t.wpcf7_button.padding_bottom+";")+"padding-left: "+t.wpcf7_button.padding_left+";")+"color: "+t.wpcf7_button.text_color+";")+"background-color: "+t.wpcf7_button.background_color+";")+"border-color: "+t.wpcf7_button.border_color+";",e="",e=(e=(e+="color: "+t.wpcf7_button.text_color_hover+";")+"background-color: "+t.wpcf7_button.background_color_hover+";")+"border-color: "+t.wpcf7_button.border_color_hover+";",w(c,l,a,r+" label",i),h(c,l,a,r+" label",e)),"submit"==s?(i="",i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i+="font-size: "+t.wpcf7_button.font_size+";")+"height: "+t.wpcf7_button.height+";")+"width: "+t.wpcf7_button.width+";")+"border-width: "+t.wpcf7_button.border_width+";")+"border-radius: "+t.wpcf7_button.border_radius+";border-style: solid;")+"margin-top: "+t.wpcf7_button.margin_top+";")+"margin-right: "+t.wpcf7_button.margin_right+";")+"margin-bottom: "+t.wpcf7_button.margin_bottom+";")+"margin-left: "+t.wpcf7_button.margin_left+";")+"padding-top: "+t.wpcf7_button.padding_top+";")+"padding-right: "+t.wpcf7_button.padding_right+";")+"padding-bottom: "+t.wpcf7_button.padding_bottom+";")+"padding-left: "+t.wpcf7_button.padding_left+";")+"color: "+t.wpcf7_button.text_color+";")+"background-color: "+t.wpcf7_button.background_color+";")+"border-color: "+t.wpcf7_button.border_color+";",e="",e=(e=(e+="color: "+t.wpcf7_button.text_color_hover+";")+"background-color: "+t.wpcf7_button.background_color_hover+";")+"border-color: "+t.wpcf7_button.border_color_hover+";",w(c,l,a,r,i),h(c,l,a,r,e)):(e=i="","file"===s?i+="display: block;":(i=(i=(i=(i+="background-color: "+t.background_color+";")+"border-color: "+t.border_color+";")+"border-width: "+t.border_width+";")+"border-radius: "+t.border_radius+";",e=(e+="background-color: "+t.background_color_hover+";")+"border-color: "+t.border_color_hover+";",-1===["radio","acceptance"].indexOf(s)&&(i+="border-style: solid;")),o="","radio"===s&&(o+="font-size: "+t.font_size+";",w(c,l,a,r+" .wpcf7-radio-label",o+="cursor:pointer;")),"acceptance"===s&&(o+="font-size: "+t.font_size+";",w(c,l,a,r+" .wpcf7-list-item-label",o+="cursor:pointer;"),w(c,l,a,r+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color:"+t.text_color+";"),o="border-bottom-color:"+t.text_color+";",o+="border-right-color:"+t.text_color+";",w(c,l,a,r+" :checked ~ .wpcf7-list-item-label::before",o)),i=(i+="color: "+t.text_color+";")+"width: "+D(s,c,l,a,t.input_width)+";","acceptance"!==s&&(i+="height: "+t.input_height+";"),i+="font-size: "+t.font_size+";",w(c,l,a,r,i),e+="color: "+t.text_color_hover+";",h(c,l,a,r,e),"text"!=s&&"email"!=s&&"number"!=s&&"textarea"!=s||(o="",o+="color:"+t.placeholder_color+";",w(c,l,a,r+"::placeholder",o),i="",i+="color:"+t.placeholder_hover_color+";",x(c,l,a,r,i)))}}function S(t){var e,t=t.columnContentData,o=t.target.element_id,r=t.target.row_number,c=t.target.column_number,l=t.input_type,a=t.field_class,n=t.wpcf7_button.height,s=t.wpcf7_button.width,i=t.wpcf7_button.border_width,d=t.wpcf7_button.border_radius,f=t.wpcf7_button.margin_top,u=t.wpcf7_button.margin_right,b=t.wpcf7_button.margin_bottom,p=t.wpcf7_button.margin_left,_=t.wpcf7_button.padding_top,g=t.wpcf7_button.padding_right,w=t.wpcf7_button.padding_bottom,m=t.wpcf7_button.padding_left,h=t.wpcf7_button.font_size,x=t.background_color,R=t.background_color_hover,y=t.text_color,k=t.text_color_hover,v=t.text_color_focus,C=t.palceholder_color,A=t.palceholder_color_hover,S=t.border_color,z=t.border_color_hover,T=t.wpcf7_button.text_color,q=t.wpcf7_button.text_color_hover,B=t.wpcf7_button.background_color,L=t.wpcf7_button.background_color_hover,U=t.wpcf7_button.border_color,W=t.wpcf7_button.border_color_hover;switch(l){case"text":case"email":case"number":case"textarea":case"select":e="wpcf7-"+l;break;case"acceptance":e="wpcf7-form-control-wrap";break;case"submit":case"file":e=a;break;case"radio":e="wpcf7-form-control-wrap."+a}"radio"===l&&F(o,r,c,e+" .wpcf7-radio-label","font-size",t.font_size),"acceptance"===l&&(F(o,r,c,e+" .wpcf7-list-item-label","font-size",t.font_size),F(o,r,c,e+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color",t.text_color),F(o,r,c,e+" :checked ~ .wpcf7-list-item-label::before","border-bottom-color",t.text_color),F(o,r,c,e+" :checked ~ .wpcf7-list-item-label::before","border-right-color",t.text_color)),"text"!=l&&"email"!=l&&"number"!=l&&"textarea"!=l||(F(o,r,c,e+"::placeholder","text-color",C),P(o,r,c,e,"text-color",A)),"submit"!=l?(E(o,r,c,e,"text-color",v),O(o,r,c,e,"color",k),O(o,r,c,e,"background-color",R),O(o,r,c,e,"border-color",z),F(o,r,c,e,"width",D(l,o,r,c,t.input_width)),"acceptance"!==l&&F(o,r,c,e,"height",t.input_height),F(o,r,c,e,"font-size",t.font_size),F(o,r,c,e,"border-width",t.border_width),F(o,r,c,e,"border-radius",t.border_radius),F(o,r,c,e,"text-color",y),F(o,r,c,e,"background-color",x),F(o,r,c,e,"border-color",S),"file"==l&&(F(o,r,c,e+" label","height",n),F(o,r,c,e+" label","width",s),F(o,r,c,e+" label","border-width",i),F(o,r,c,e+" label","border-radius",d),F(o,r,c,e+" label","margin-top",f),F(o,r,c,e+" label","margin-right",u),F(o,r,c,e+" label","margin-bottom",b),F(o,r,c,e+" label","margin-left",p),F(o,r,c,e+" label","padding-top",_),F(o,r,c,e+" label","padding-right",g),F(o,r,c,e+" label","padding-bottom",w),F(o,r,c,e+" label","padding-left",m),F(o,r,c,e+" label","font-size",h),F(o,r,c,e+" label","text-color",T),F(o,r,c,e+" label","background-color",B),F(o,r,c,e+" label","border-color",U),O(o,r,c,e+" label","text-color",q),O(o,r,c,e+" label","background-color",L),O(o,r,c,e+" label","border-color",W))):(F(o,r,c,e,"height",n),F(o,r,c,e,"width",s),F(o,r,c,e,"border-width",i),F(o,r,c,e,"border-radius",d),F(o,r,c,e,"margin-top",f),F(o,r,c,e,"margin-right",u),F(o,r,c,e,"margin-bottom",b),F(o,r,c,e,"margin-left",p),F(o,r,c,e,"padding-top",_),F(o,r,c,e,"padding-right",g),F(o,r,c,e,"padding-bottom",w),F(o,r,c,e,"padding-left",m),F(o,r,c,e,"font-size",h),F(o,r,c,e,"text-color",T),F(o,r,c,e,"background-color",B),F(o,r,c,e,"border-color",U),O(o,r,c,e,"text-color",q),O(o,r,c,e,"background-color",L),O(o,r,c,e,"border-color",W)),N(o,t)}function z(t,e){var o,r={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",label_text:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}},c=(r.target.element_id=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),r.target.row_number=t.parents(".wpcf7-row").attr("wpcf7-row-number"),r.target.column_number=t.attr("wpcf7-column-number"),/([a-z]+\-[\d]+)(-rexclone-([\d]+))?/),l=t.find(".wpcf7-form-control"),a=(r.field_class=null,0!==l.length&&(l=(l=(l=l.get(0).className.match(c))||t.find(".wpcf7-form-control-wrap").get(0).className.match(c))||t.find("[type=checkbox]").get(0).className.match(c),r.field_class=l[0]),r.input_type=/[a-z]+/.exec(r.field_class)[0],r.input_type="menu"==r.input_type?"select":r.input_type,r.input_type);switch(a){case"text":case"email":case"number":case"textarea":case"select":o="wpcf7-"+a;break;case"acceptance":o="wpcf7-form-control-wrap";break;case"submit":case"file":o=r.field_class;break;case"radio":o="wpcf7-form-control-wrap."+r.field_class}-1!==["text","email","number","textarea"].indexOf(a)&&(r.label_text=t.find(".wpcf7-label-text__paragraph").html()),"acceptance"==a&&(r.text=t.find(".wpcf7-list-item-label").html()),"file"==a&&(r.text=t.find(".wpcf7-file-caption").html());c=t.find(".wpcf7-select").eq(0).find("option");if(0!=c.length&&c.each(function(t,e){""===e.value||e.getAttribute("disabled")||r.wpcf7_list_fields.push(e.textContent)}),0!==t.find(".wpcf7-radio").length&&(l=0===(l=t.find(".wpcf7-radio").eq(0).find(".wpcf7-radio-label")).length?t.find(".wpcf7-radio").eq(0).find(".wpcf7-list-item-label"):l).each(function(t,e){r.wpcf7_list_fields.push(e.textContent)}),e){c=t.find(".rex-wpcf7-column-content-data").eq(0)[0],l=0!==t.find(".wpcf7-validates-as-required").length,e=(l||0!==t.find(".wpcf7-acceptance").length&&(l=0===t.find(".wpcf7-acceptance.optional")),r.wpcf7_required_field=c.getAttribute("data-wpcf7-required-field")?"true"===c.getAttribute("data-wpcf7-required-field"):l,0!==t.find(".wpcf7-validates-as-email").length),l=(r.wpcf7_email=c.getAttribute("data-wpcf7-email")?"true"===c.getAttribute("data-wpcf7-email").toString():e,0!==t.find(".wpcf7-validates-as-number").length),e=(r.wpcf7_only_numbers=c.getAttribute("data-wpcf7-only-numbers")?"true"===c.getAttribute("data-wpcf7-only-numbers").toString():l,void 0!==t.find(".wpcf7-acceptance [type=checkbox]").prop("checked"));if(r.wpcf7_default_check=c.getAttribute("data-wpcf7-default-check")?"true"===c.getAttribute("data-wpcf7-default-check").toString():e,-1!==["text","email","number","textarea"].indexOf(a)?c.hasAttribute("data-wpcf7-placeholder")&&c.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=c.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control").attr("placeholder")||"":-1!==["select"].indexOf(a)&&(c.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=c.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control [disabled]").text()||""),r.wpcf7_file_max_dimensions=c.getAttribute("data-wpcf7-file-max-dimensions")?c.getAttribute("data-wpcf7-file-max-dimensions").toString():i.wpcf7_file_max_dimensions,"file"===a)if(c.getAttribute("data-wpcf7-file-types"))r.wpcf7_list_fields=c.getAttribute("data-wpcf7-file-types").toString().split(",");else{for(var n=t.find("[type=file]").attr("accept").toString().split(","),s=0;s<n.length;s++)n[s]=n[s].replace(".","");r.wpcf7_list_fields=n}r.input_width=c.getAttribute("data-wpcf7-input-width")?c.getAttribute("data-wpcf7-input-width").toString():t.find("."+o).css("width"),r.input_height=c.getAttribute("data-wpcf7-input-height")?c.getAttribute("data-wpcf7-input-height").toString():t.find("."+o).css("height"),r.font_size=c.getAttribute("data-wpcf7-font-size")?c.getAttribute("data-wpcf7-font-size").toString():t.find("."+o).css("font-size"),r.background_color=c.getAttribute("data-background-color")?c.getAttribute("data-background-color").toString():t.find("."+o).css("background-color"),r.text_color=c.getAttribute("data-text-color")?c.getAttribute("data-text-color").toString():t.find("."+o).css("color"),r.text_color_focus=c.getAttribute("data-text-color-focus")?c.getAttribute("data-text-color-focus").toString():i.text_color_focus,r.select_color_after_selection=c.getAttribute("data-select-color-after-selection")?c.getAttribute("data-select-color-after-selection").toString():"",r.placeholder_color=c.getAttribute("data-placeholder-color")?c.getAttribute("data-placeholder-color").toString():i.placeholder_color,r.placeholder_hover_color=c.getAttribute("data-placeholder-hover-color")?c.getAttribute("data-placeholder-hover-color").toString():i.placeholder_hover_color,r.border_width=c.getAttribute("data-wpcf7-border-width")?c.getAttribute("data-wpcf7-border-width").toString():t.find("."+o).css("border-width"),r.border_radius=c.getAttribute("data-wpcf7-border-radius")?c.getAttribute("data-wpcf7-border-radius").toString():t.find("."+o).css("border-radius"),r.background_color_hover=c.getAttribute("data-background-color-hover")?c.getAttribute("data-background-color-hover").toString():"",r.text_color_hover=c.getAttribute("data-text-color-hover")?c.getAttribute("data-text-color-hover").toString():"",r.border_color=c.getAttribute("data-border-color")?c.getAttribute("data-border-color").toString():t.find("."+o).css("border-color"),r.border_color_hover=c.getAttribute("data-border-color-hover")?c.getAttribute("data-border-color-hover").toString():"",c.getAttribute("data-button-text")?r.wpcf7_button.text=c.getAttribute("data-button-text").toString():"file"==a?r.wpcf7_button.text="Choose a file":"submit"==a&&(r.wpcf7_button.text=t.find("[type=submit]").val()),c.getAttribute("data-button-text-font-size")?r.wpcf7_button.font_size=c.getAttribute("data-button-text-font-size").toString():"file"==a?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==a&&(r.wpcf7_button.font_size=t.find("."+o).css("font-size")),/\d+\.\d+/.test(r.wpcf7_button.font_size)&&(r.wpcf7_button.font_size=/\d+/.exec(r.wpcf7_button.font_size)[0]+"px"),c.getAttribute("data-button-height")?r.wpcf7_button.height=c.getAttribute("data-button-height").toString():"file"==a?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==a&&(r.wpcf7_button.height=t.find("."+o).css("height")),c.getAttribute("data-button-width")?r.wpcf7_button.width=c.getAttribute("data-button-width").toString():"file"==a?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==a&&(r.wpcf7_button.width=t.find("."+o).css("width")),c.getAttribute("data-button-border-width")?r.wpcf7_button.border_width=c.getAttribute("data-button-border-width").toString():"file"==a?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==a&&(r.wpcf7_button.border_width=t.find("."+o).css("border-width")),c.getAttribute("data-button-border-radius")?r.wpcf7_button.border_radius=c.getAttribute("data-button-border-radius").toString():"file"==a?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==a&&(r.wpcf7_button.border_radius=t.find("."+o).css("border-radius")),c.getAttribute("data-button-margin-top")?r.wpcf7_button.margin_top=c.getAttribute("data-button-margin-top").toString():"file"==a?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==a&&(r.wpcf7_button.margin_top=t.find("."+o).css("margin-top")),c.getAttribute("data-button-margin-right")?r.wpcf7_button.margin_right=c.getAttribute("data-button-margin-right").toString():"file"==a?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==a&&(r.wpcf7_button.margin_right=t.find("."+o).css("margin-right")),c.getAttribute("data-button-margin-bottom")?r.wpcf7_button.margin_bottom=c.getAttribute("data-button-margin-bottom").toString():"file"==a?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==a&&(r.wpcf7_button.margin_bottom=t.find("."+o).css("margin-bottom")),c.getAttribute("data-button-margin-left")?r.wpcf7_button.margin_left=c.getAttribute("data-button-margin-left").toString():"file"==a?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==a&&(r.wpcf7_button.margin_left=t.find("."+o).css("margin-left")),c.getAttribute("data-button-padding-top")?r.wpcf7_button.padding_top=c.getAttribute("data-button-padding-top").toString():"file"==a?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==a&&(r.wpcf7_button.padding_top=t.find("."+o).css("padding-top")),c.getAttribute("data-button-padding-right")?r.wpcf7_button.padding_right=c.getAttribute("data-button-padding-right").toString():"file"==a?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==a&&(r.wpcf7_button.padding_right=t.find("."+o).css("padding-right")),c.getAttribute("data-button-padding-bottom")?r.wpcf7_button.padding_bottom=c.getAttribute("data-button-padding-bottom").toString():"file"==a?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==a&&(r.wpcf7_button.padding_bottom=t.find("."+o).css("padding-bottom")),c.getAttribute("data-button-padding-left")?r.wpcf7_button.padding_left=c.getAttribute("data-button-padding-left").toString():"file"==a?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==a&&(r.wpcf7_button.padding_left=t.find("."+o).css("padding-left")),c.getAttribute("data-button-text-color")?r.wpcf7_button.text_color=c.getAttribute("data-button-text-color").toString():"file"==a?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==a&&(r.wpcf7_button.text_color=t.find("."+o).css("color")),r.wpcf7_button.text_color_hover=c.getAttribute("data-button-text-color-hover")?c.getAttribute("data-button-text-color-hover").toString():i.wpcf7_button.text_color_hover,c.getAttribute("data-button-background-color")?r.wpcf7_button.background_color=c.getAttribute("data-button-background-color").toString():"file"==a?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==a&&(r.wpcf7_button.background_color=t.find("."+o).css("background-color")),r.wpcf7_button.background_color_hover=c.getAttribute("data-button-background-color-hover")?c.getAttribute("data-button-background-color-hover").toString():i.wpcf7_button.background_color_hover,c.getAttribute("data-button-border-color")?r.wpcf7_button.border_color=c.getAttribute("data-button-border-color").toString():"file"==a?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==a&&(r.wpcf7_button.border_color=t.find("."+o).css("border-color")),r.wpcf7_button.border_color_hover=c.getAttribute("data-button-border-color-hover")?c.getAttribute("data-button-border-color-hover").toString():i.wpcf7_button.border_color_hover}else r.wpcf7_required_field=i.wpcf7_required_field,r.wpcf7_only_numbers=i.wpcf7_only_numbers,r.wpcf7_default_check=i.wpcf7_default_check,r.wpcf7_placeholder=i.wpcf7_placeholder,r.wpcf7_file_max_dimensions=i.wpcf7_file_max_dimensions,"file"==a&&(r.wpcf7_list_fields=["png","jpg","jpeg","pdf"]),r.input_width=t.find("."+o).css("width"),r.input_height=t.find("."+o).css("height"),r.font_size=i.font_size,r.background_color=t.find("."+o).css("background-color"),r.text_color=t.find("."+o).css("color"),r.text_color_focus=i.text_color_focus,"file"==a?r.wpcf7_button.text="Choose a file":"submit"==a&&(r.wpcf7_button.text="Send"),"file"==a?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==a&&(r.wpcf7_button.font_size=t.find("."+o).css("font-size")),"file"==a?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==a&&(r.wpcf7_button.height=t.find("."+o).css("height")),"file"==a?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==a&&(r.wpcf7_button.width=t.find("."+o).css("width")),"file"==a?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==a&&(r.wpcf7_button.border_width=t.find("."+o).css("border-width")),"file"==a?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==a&&(r.wpcf7_button.border_radius=t.find("."+o).css("border-radius")),"file"==a?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==a&&(r.wpcf7_button.margin_top=t.find("."+o).css("margin-top")),"file"==a?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==a&&(r.wpcf7_button.margin_right=t.find("."+o).css("margin-right")),"file"==a?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==a&&(r.wpcf7_button.margin_bottom=t.find("."+o).css("margin-bottom")),"file"==a?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==a&&(r.wpcf7_button.margin_left=t.find("."+o).css("margin-left")),"file"==a?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==a&&(r.wpcf7_button.padding_top=t.find("."+o).css("padding-top")),"file"==a?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==a&&(r.wpcf7_button.padding_right=t.find("."+o).css("padding-right")),"file"==a?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==a&&(r.wpcf7_button.padding_bottom=t.find("."+o).css("padding-bottom")),"file"==a?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==a&&(r.wpcf7_button.padding_left=t.find("."+o).css("padding-left")),"file"==a?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==a&&(r.wpcf7_button.text_color=t.find("."+o).css("color")),r.wpcf7_button.text_color_hover=i.wpcf7_button.text_color_hover,"file"==a?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==a&&(r.wpcf7_button.background_color=t.find("."+o).css("background-color")),r.wpcf7_button.background_color_hover=i.wpcf7_button.background_color_hover,"file"==a?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==a&&(r.wpcf7_button.border_color=t.find("."+o).css("border-color")),r.wpcf7_button.border_color_hover=i.wpcf7_button.border_color_hover;return r}function r(){Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-column").each(function(t,e){var o,r=f(e),c={text:0!=r.find("[type=text]").length,email:0!=r.find(".wpcf7-email").length,number:0!=r.find(".wpcf7-number").length,textarea:0!=r.find(".wpcf7-textarea").length,select:0!=r.find(".wpcf7-select").length,radio:0!=r.find(".wpcf7-radio").length,acceptance:0!=r.find(".wpcf7-acceptance").length,file:0!=r.find(".wpcf7-file").length,submit:0!=r.find(".wpcf7-submit").length},l="";for(o in c)if(1==c[o]){l=o;break}var a=null;switch(l){case"text":case"email":case"number":case"textarea":(a=r.find(".wpcf7-"+l)).attr("size","");var n,s=a,i=s.parents(".wpcf7-column-content").children("label");0!==i.length?1===i.length&&i.addClass("wpcf7-label-text"):(i=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),d=s.parents(".wpcf7-form-control-wrap").get(0),n=document.createElement("label"),Rexbuilder_Util.addClass(n,"wpcf7-label-text"),n.insertAdjacentHTML("afterbegin",i),d.parentNode.insertBefore(n,d),n.appendChild(d),Rexbuilder_Util.editorMode&&(i=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),n=s.parents(".rex-element-wrapper").attr("data-rex-element-id"),d=s.parents(".wpcf7-row").attr("wpcf7-row-number"),s=s.parents(".wpcf7-column").attr("wpcf7-column-number"),(n=Rexbuilder_Rexwpcf7_Editor.retrieveFormsInPage()[n].find('[wpcf7-row-number="'+d+'"] [wpcf7-column-number="'+s+'"] .wpcf7-column-content').get(0)).innerHTML='<label class="wpcf7-label-text">'+i+n.textContent+"</label>"));break;case"select":var d="";""==(a=r.find(".wpcf7-select")).find("option").eq(0).val()?((s=a.find("option").eq(0)).attr("disabled",""),s.attr("selected",""),d=s.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),s.text(d),""===s.text()&&(s.text("Select something"),a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))):(i=f("<option value disabled selected></option>"),a.prepend(i),d=a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),i.text(d),""===i.text()&&(i.text("Select something"),a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))),a.on("change",function(){var t=a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-select-color-after-selection");a.css("color",t)})}}),t(),T()}function t(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){for(var t,e,o,r=Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-radio"),c=r.length,l=0;l<c;l++)(o=(e=r[l]).className.match(/radio-\d+/))&&(o=o[0],Rexbuilder_Util.removeClass(e,o),t=e.querySelector("[type=radio]").name,e=e.parentNode,Rexbuilder_Util.addClass(e,o),Rexbuilder_Util.removeClass(e,t));Rexbuilder_Util.$rexContainer.find('.wpcf7 input[type="radio"]').each(function(t,e){var o,r,e=f(e),c=(e.addClass("with-gap"),e.attr("id","wpcf7-radio-"+(t+1)),e.siblings(".wpcf7-list-item-label"));0!==c.length?(o=c.text(),c.empty(),(r=f(document.createElement("label"))).addClass("wpcf7-radio-label"),r.attr("for",e.attr("id")),r.text(o),r.insertAfter(c),c.removeClass("wpcf7-list-item-label")):e.siblings(".wpcf7-radio-label").attr("for","wpcf7-radio-"+(t+1))})}}function T(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .wpcf7 .wpcf7-form-control-wrap").has(".wpcf7-file").each(function(t,e){var e=f(e),o=(0===e.find(".wpcf7-file-caption").length&&e.siblings(".wpcf7-file-caption").detach().appendTo(e),e.find("[type=file]")),r=o.get(0).className,r=/file-\w+/gm.exec(r),r=(r&&(r=r[0],o.removeClass(r),o.parents(".wpcf7-form-control-wrap").addClass(r)),o.attr("id","wpcf7-file-"+(t+1)),o.siblings("label").remove(),f('<label for="'+o.attr("id")+'"></label>')),t=(r.insertAfter(o),void 0!==e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text")?(t=e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text"),r.text(t)):(r.text("Choose a file"),e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text","Choose a file")),o.parents(".wpcf7-column")),r=z(t,!0);N(r.target.element_id,r),l(t)})}function q(t){var e=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),o=t.parents(".wpcf7-row").attr("wpcf7-row-number"),r=t.attr("wpcf7-column-number");if(0===t.find(".wpcf7-add-new-form-content").length&&0==t.parents("#rex-wpcf7-tools").length){var c,l=(null===(l=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control").get(0).classList))&&null===(l=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control-wrap").get(0).classList))?/[a-z]+\-[0-9]+/.exec(t.find("[type=checkbox]").get(0).classList):l)[0],a=/[a-z]+/.exec(l)[0];switch(a="menu"==a?"select":a){case"text":case"email":case"number":case"textarea":case"select":c="wpcf7-"+a;break;case"acceptance":c="wpcf7-form-control-wrap";break;case"submit":c=l;break;case"file":k(e,o,r,(c=l)+" label"),v(e,o,r,c+" label");break;case"radio":c="wpcf7-form-control-wrap."+l}k(e,o,r,c),v(e,o,r,c),C(e,o,r,c)}}function N(t,e){var o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-form"),r=e.target.row_number,c=e.target.column_number,l=e.input_type;o.each(function(){var t=f(this).find('.wpcf7-row[wpcf7-row-number="'+r+'"]').find('.wpcf7-column[wpcf7-column-number="'+c+'"]').find(".rex-wpcf7-column-content-data");"submit"!==l&&"radio"!==l&&t.attr("data-wpcf7-required-field",e.wpcf7_required_field),"text"!==l&&"email"!==l&&"number"!==l||(t.attr("data-wpcf7-email",e.wpcf7_email),t.attr("data-wpcf7-only-numbers",e.wpcf7_only_numbers)),"acceptance"===l&&t.attr("data-wpcf7-default-check",e.wpcf7_default_check),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l&&"select"!==l||t.attr("data-wpcf7-placeholder",e.wpcf7_placeholder),"file"===l&&(t.attr("data-wpcf7-file-max-dimensions",e.wpcf7_file_max_dimensions),t.attr("data-wpcf7-file-types",e.wpcf7_list_fields)),"file"!=l&&"radio"!=l&&"acceptance"!=l&&(t.attr("data-wpcf7-border-width",e.border_width),t.attr("data-wpcf7-border-radius",e.border_radius),t.attr("data-background-color",e.background_color),t.attr("data-background-color-hover",e.background_color_hover),t.attr("data-border-color",e.border_color),t.attr("data-border-color-hover",e.border_color_hover)),t.attr("data-wpcf7-input-width",e.input_width),t.attr("data-wpcf7-input-height",e.input_height),t.attr("data-wpcf7-font-size",e.font_size),t.attr("data-text-color",e.text_color),t.attr("data-text-color-hover",e.text_color_hover),t.attr("data-text-color-focus",e.text_color_focus),"select"===l&&t.attr("data-select-color-after-selection",e.select_color_after_selection),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l||(t.attr("data-placeholder-color",e.placeholder_color),t.attr("data-placeholder-hover-color",e.placeholder_hover_color)),"file"!==l&&"submit"!==l||(t.attr("data-button-text",e.wpcf7_button.text),t.attr("data-button-text-font-size",e.wpcf7_button.font_size),t.attr("data-button-height",e.wpcf7_button.height),t.attr("data-button-width",e.wpcf7_button.width),t.attr("data-button-border-width",e.wpcf7_button.border_width),t.attr("data-button-border-radius",e.wpcf7_button.border_radius),t.attr("data-button-margin-top",e.wpcf7_button.margin_top),t.attr("data-button-margin-right",e.wpcf7_button.margin_right),t.attr("data-button-margin-bottom",e.wpcf7_button.margin_bottom),t.attr("data-button-margin-left",e.wpcf7_button.margin_left),t.attr("data-button-padding-top",e.wpcf7_button.padding_top),t.attr("data-button-padding-right",e.wpcf7_button.padding_right),t.attr("data-button-padding-bottom",e.wpcf7_button.padding_bottom),t.attr("data-button-padding-left",e.wpcf7_button.padding_left),t.attr("data-button-text-color",e.wpcf7_button.text_color),t.attr("data-button-text-color-hover",e.wpcf7_button.text_color_hover),t.attr("data-button-background-color",e.wpcf7_button.background_color),t.attr("data-button-background-color-hover",e.wpcf7_button.background_color_hover),t.attr("data-button-border-color",e.wpcf7_button.border_color),t.attr("data-button-border-color-hover",e.wpcf7_button.border_color_hover))}),Rexbuilder_Util.editorMode&&Rexbuilder_Rexwpcf7_Editor.updateSpanDataInDB(t,e)}function D(t,e,o,r,c){var l=-1!==["text","email","number","textarea","select"].indexOf(t)&&/\%/.test(c);return Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-row[wpcf7-row-number="'+o+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .wpcf7-form-control-wrap')).forEach(function(t){t.style.width=l?c:""}),l?"100%":c}return{init:function(){var t,e;this.$rexFormsStyle=f("#rexpansive-builder-rexwpcf7-style-inline-css"),0===Rexbuilder_Rexwpcf7.$rexFormsStyle.length&&(t=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css",e.id="rexpansive-builder-rexwpcf7-style-inline-css",e.dataset.rexName="rexwpcf7-style",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e));for(var o=0;o<document.styleSheets.length;o++)"rexpansive-builder-rexwpcf7-style-inline-css"==document.styleSheets[o].ownerNode.id&&(n=document.styleSheets[o]);Rexbuilder_Util.editorMode||r(),Rexbuilder_Rexelement.addStyles(),Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-radio").each(function(t,o){f(o).find(".wpcf7-list-item").click(function(t){t.preventDefault();t=f(t.target).parents(".wpcf7-list-item");t.hasClass("selected")||(f(o).find(".wpcf7-list-item").each(function(t,e){f(e).removeClass("selected"),f(o).find("input").prop("checked",!1)}),t.addClass("selected"),t.find("input").prop("checked",!0))})}),Rexbuilder_Util.editorMode||document.addEventListener("wpcf7submit",function(t){var e,t=t.target,t=f(t).parents(".perfect-grid-gallery");0!==t.length&&(e=RexGrid.data(t.get(0)),setTimeout(function(){e.endResize()},200))}),Rexbuilder_Util.editorMode||f(".wpcf7-column.with-button").each(function(t,e){Rexbuilder_Util.removeClass(e,"with-button"),Rexbuilder_Util.addClass(e,"column-empty"),e.innerHTML=""})},guessWidthToSet:D,addFormStyle:o,refreshFormStyle:function(t,e){o(t,e)},addColumnContentStyle:e,removeColumnContentStyle:q,refreshColumnContentStyle:l,fixInputs:r,fixWpcf7RadioButtons:t,fixWpcf7Files:T,generateColumnContentData:z,updateForm:A,updateFormContent:c,updateColumnContent:S,addFormRule:p,addFormMessageRule:_,addFormColumnsRule:g,addColumnContentRule:w,addColumnContentFocusRule:m,addColumnContentHoverRule:h,addColumnContentPlaceholderHoverRule:x,updateFormRule:a,updateFormMessageRule:R,updateFormColumnsRule:y,updateColumnContentRule:F,updateColumnContentFocusRule:E,updateColumnContentHoverRule:O,updateColumnContentPlaceholderHoverRule:P,removeFormRule:function(t){for(var e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText==e){n.deleteRule(o);break}},removeColumnContentRule:k,removeColumnContentHoverRule:v,removeColumnContentFocusRule:C}}(jQuery);
var Rexbuilder_Rexwpcf7_Editor=function(F){"use strict";var k,M,w=[],m={};function i(e,t,a,r){var n,c,e=function(e){var t=/(-rexclone-)(\d+)$/,a=e.querySelector(".wpcf7-form-control:not(.wpcf7-acceptance):not(.wpcf7-radio)"),r=null;if(a){if(a.matches(".wpcf7-submit"))return null}else(r=e.querySelector(".wpcf7-form-control").className.match(/wpcf7-(radio|acceptance)/))&&(r=r[1],a=e.querySelector('[type="'+("acceptance"===r?"checkbox":"radio")+'"]'));e=a.getAttribute("name");var n,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('[name^="'+e.replace(t,"")+'"]')),c=1;a.forEach(function(e){(n=e.getAttribute("name").match(t))&&(c=parseInt(n[2])>c?parseInt(n[2]):c)}),c++,a=t.test(e)?e.replace(t,"-rexclone-"+c):e+"-rexclone-"+c;return{inputType:r,oldName:e,newName:a}}(e);e&&((c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7 .wpcf7-row[wpcf7-row-number="'+a+'"] .wpcf7-column[wpcf7-column-number="'+r+'"]')).find(".rex-wpcf7-column-info").attr("data-tippy-content",e.newName),"radio"!==e.inputType&&((n=c.find(".wpcf7-form-control-wrap").get(0)).className=n.className.replace(e.oldName,e.newName)),(e.inputType?c.find('[type="'+("acceptance"===e.inputType?"checkbox":"radio")+'"]'):c.find(".wpcf7-form-control")).attr("name",e.newName),n=t,c={newRowNumber:a,newColumnNumber:r,oldName:e.oldName,newName:e.newName},t=c.newRowNumber,a=c.newColumnNumber,r=c.oldName,c=c.newName,n=k[n].find('.wpcf7-row[wpcf7-row-number="'+t+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .wpcf7-column-content').get(0),-1!==(t=n.innerHTML).indexOf(r)?n.innerHTML=t.replace(r,c):console.error("Something went wrong when cloning fields!"))}function $(e){var t,a,r,n,c=e.target.element_id,o=e.target.row_number,l=e.target.column_number,i=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+"\"] .wpcf7-row[wpcf7-row-number='"+o+"'] .wpcf7-column[wpcf7-column-number='"+l+"']"),p=e.content.field_class,f=e.content.input_type,d=e.propertyName,s=e.propertyType,u=e.newValue,w=e.content.wpcf7_required_field,m=e.content.wpcf7_only_numbers,b=e.content.wpcf7_email;switch(f="text"===f?m?"number":b?"email":"text":f){case"text":case"email":case"number":case"textarea":case"select":t="wpcf7-"+f;break;case"acceptance":t="wpcf7-form-control-wrap";break;case"submit":case"file":t=p;break;case"radio":t="wpcf7-form-control-wrap."+p}switch(s){case"background-color":case"border-width":case"border-radius":case"border-color":"file"!=f&&"radio"!=f&&"acceptance"!=f&&Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u);break;case"font-size":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u),Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" .wpcf7-radio-label",d,u),Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" .wpcf7-list-item-label",d,u);break;case"width":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,Rexbuilder_Rexwpcf7.guessWidthToSet(f,c,o,l,u));break;case"height":case"text-color":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u),"acceptance"===f&&[{property:"border-color",selector:t+" :not(:checked) ~ .wpcf7-list-item-label::before"},{property:"border-bottom-color",selector:t+" :checked ~ .wpcf7-list-item-label::before"},{property:"border-right-color",selector:t+" :checked ~ .wpcf7-list-item-label::before"}].forEach(function(e){Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,e.selector,e.property,u)});break;case"placeholder-color":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+"::placeholder",d,u);break;case"select-color":/color\:/.test(i.find(".wpcf7-select").attr("style"))&&i.find(".wpcf7-select").css("color",u);break;case"button-text":"file"===f?i.find("label").text(u):"submit"===f&&i.find("[type=submit]").val(u);break;case"button-width":case"button-height":case"button-border-width":case"button-border-radius":case"button-margin-top":case"button-margin-right":case"button-margin-bottom":case"button-margin-left":case"button-padding-top":case"button-padding-right":case"button-padding-bottom":case"button-padding-left":case"button-font-size":case"button-text-color":case"button-background-color":case"button-border-color":"file"==f?Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" label",d,u):Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u);break;case"background-color-hover":case"border-color-hover":"file"!=f&&"radio"!=f&&"acceptance"!=f&&Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"text-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"placeholder-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentPlaceholderHoverRule(c,o,l,t,d,u);break;case"text-focus":Rexbuilder_Rexwpcf7.updateColumnContentFocusRule(c,o,l,t,d,u);break;case"button-text-color-hover":case"button-background-color-hover":case"button-border-color-hover":"file"==f?Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t+" label",d,u):Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"wpcf7-required":if(w)switch(f){case"text":case"email":case"number":case"select":case"file":case"textarea":i.find(".wpcf7-"+f).addClass("wpcf7-validates-as-required"),i.find(".wpcf7-"+f).attr("aria-required","true");break;case"acceptance":i.find(".wpcf7-acceptance").removeClass("optional")}else switch(f){case"text":case"email":case"number":case"select":case"file":case"textarea":i.find(".wpcf7-"+f).removeClass("wpcf7-validates-as-required"),i.find(".wpcf7-"+f).removeAttr("aria-required");break;case"acceptance":i.find(".wpcf7-acceptance").addClass("optional")}break;case"wpcf7-email":b?(a=(r=i.find(".wpcf7-form-control")).attr("type"),H=new RegExp(a+"-[\\d]+").exec(r[0].classList)[0],n="email-"+/[0-9]+/.exec(H)[0],r.attr("type","email"),r.removeClass(H).removeClass("wpcf7-"+a).removeClass("wpcf7-validates-as-number"),r.addClass(n).addClass("wpcf7-email").addClass("wpcf7-validates-as-email"),f="email"):(f=m?"number":"text",r=i.find(".wpcf7-email"),H=/email-[\d]+/.exec(r[0].classList)[0],n=f+"-"+/[0-9]+/.exec(H)[0],r.attr("type",f),r.removeClass(H).removeClass("wpcf7-email").removeClass("wpcf7-validates-as-email"),r.addClass(n).addClass("wpcf7-"+f),"number"===f&&r.addClass("wpcf7-validates-as-number")),i.each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(F(t))});break;case"wpcf7-only-numbers":m?(a=(r=i.find(".wpcf7-form-control")).attr("type"),H=new RegExp(a+"-[\\d]+").exec(r[0].classList)[0],n="number-"+/[0-9]+/.exec(H)[0],r.attr("type","number"),r.removeClass(H).removeClass("wpcf7-"+a).removeClass("wpcf7-validates-as-email"),r.addClass(n).addClass("wpcf7-number").addClass("wpcf7-validates-as-number"),f="number"):(f=b?"email":"text",r=i.find(".wpcf7-number"),H=/number-[\d]+/.exec(r[0].classList)[0],n=f+"-"+/[0-9]+/.exec(H)[0],r.attr("type",f),r.removeClass(H).removeClass("wpcf7-number").removeClass("wpcf7-validates-as-number"),r.addClass(n).addClass("wpcf7-"+f),"email"===f&&r.addClass("wpcf7-validates-as-email")),i.each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(F(t))});break;case"wpcf7-placeholder":switch(f){case"text":case"email":case"number":case"textarea":i.find(".wpcf7-"+f).attr("placeholder",u);break;case"select":i.find(".wpcf7-"+f+" option[disabled]").text(u)}break;case"wpcf7-default-check":i.find(".wpcf7-acceptance input[type='checkbox']").prop("checked",u);break;case"wpcf7-label-text-editor":u=u.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),i.find(".wpcf7-label-text__paragraph").html(u);break;case"wpcf7-text-editor":switch(u=u.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),f){case"acceptance":i.find(".wpcf7-list-item-label").html(u);break;case"file":i.find(".wpcf7-file-caption").html(u)}break;case"wpcf7-file-dimensions":break;case"wpcf7-list":var x,c=i.parents(".rex-element-wrapper").eq(0).attr("data-rex-element-id"),_=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+'"]').length;switch(f){case"select":i.get().forEach(function(a){u.fields.forEach(function(e,t){(x=a.querySelectorAll(".wpcf7-select option:not([disabled])")[t]).setAttribute("value",e),x.innerText=e})});break;case"radio":var h=u.fields,g=u.type,v=h.length;switch(g){case"resetting":var C=i[0].querySelectorAll(".wpcf7-list-item").length;if(C<v)for(var R=0;R<v-C;R++)$({target:e.target,content:e.content,propertyType:"wpcf7-list-add",propertyName:void 0,newValue:void 0});else if(v<C)for(R=0;R<C-v;R++)$({target:e.target,content:e.content,propertyType:"wpcf7-list-remove",propertyName:void 0,newValue:C-1-R});case"sorting":for(R=0;R<_;R++){var y=i.eq(R).find(".wpcf7-radio .wpcf7-list-item");y.removeClass("first").removeClass("last"),y.first().addClass("first"),y.last().addClass("last")}case"writing":for(R=0;R<_;R++)for(R=0;R<v;R++)i.eq(R).find(".wpcf7-radio .wpcf7-list-item").eq(R).find("input").val(h[R]).end().find(".wpcf7-radio-label").text(h[R])}for(R=0;R<_;R++)for(R=0;R<v;R++)i.find(".wpcf7-radio .wpcf7-list-item").removeClass("first").removeClass("last"),i.find(".wpcf7-radio .wpcf7-list-item").eq(R).find("input").val(h[R]),i.find(".wpcf7-radio .wpcf7-list-item").eq(R).find(".wpcf7-radio-label").text(h[R]);i.find(".wpcf7-radio .wpcf7-list-item").eq(0).addClass("first"),i.find(".wpcf7-radio .wpcf7-list-item").eq(v-1).addClass("last");break;case"file":u.fields=u.fields.map(function(e){return"."+e}),i.find(".wpcf7-file").attr("accept",u.fields)}break;case"wpcf7-list-add":switch(f){case"select":var k=F(document.createElement("option"));k.attr("value",""),i.find(".wpcf7-select").append(k);break;case"radio":var k=0==i.find(".wpcf7-radio .wpcf7-list-item").length,T=i.find(".wpcf7-radio");k?(k=tmpl("tmpl-rexwpcf7-new-radio-field",{}),T.append(k)):(k=i.find(".wpcf7-radio .wpcf7-list-item.last").eq(0).clone(),i.find(".wpcf7-radio .wpcf7-list-item.last").removeClass("last"),k.find(".wpcf7-radio-label").text(""),k.find("[type='radio']").val(""),k.addClass("last"),k.removeClass("first"),T.append(k)),Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":i.find(".wpcf7-file").attr("accept",i.find(".wpcf7-file").attr("accept")+",")}break;case"wpcf7-list-remove":var S=parseInt(u);switch(f){case"select":for(var A=i.find(".wpcf7-select").length,R=0;R<A;R++)i.find(".wpcf7-select").eq(R).find("option").eq(S).remove();break;case"radio":for(var I=i.length,R=0;R<I;R++)for(var q=F(i[R].querySelectorAll(".wpcf7-radio")),L=F(q[0].querySelectorAll(".wpcf7-list-item")[S-1]),U=L.hasClass("first"),N=L.hasClass("last"),E=(L.remove(),U&&N||(U&&(L=q.find(".wpcf7-list-item").first().addClass("first")),N&&(L=q.find(".wpcf7-list-item").last().addClass("last"))),q.find(".wpcf7-list-item")),R=0;R<E.length;R++){var H=/wpcf7-radio\-[0-9]+/.exec(E.find("[type='radio']")[R].id)[0];F(E.find("[type='radio']")[R]).removeClass(H)}Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":var j=i.find(".wpcf7-file").attr("accept").split(",");j.splice(u-1,1),i.find(".wpcf7-file").attr("accept",j)}}M.updateHeight()}function u(e){var e=e.editPoint,t=e.element_id,a=e.row_number,e=e.column_number,r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-row[wpcf7-row-number='"+a+"']").find(".wpcf7-column[wpcf7-column-number='"+e+"']"),t=k[t].find(".wpcf7-row[wpcf7-row-number='"+a+"']").find(".wpcf7-column[wpcf7-column-number='"+e+"']"),a=F(document.createElement("span")),e=(a.addClass("rex-wpcf7-column-content-data"),0!=r.find(".wpcf7-radio").length),n=0!=r.find(".wpcf7-acceptance").length,c=0!=r.find(".wpcf7-file").length,o=0!=r.find(".wpcf7-submit").length,l=r.parents(".rex-element-wrapper").find(".rex-element-data"),e=(e||n||c||o||(a.attr("data-background-color",l.attr("data-wpcf7-content-background-color")),a.attr("data-border-color",l.attr("data-wpcf7-content-border-color")),a.attr("data-wpcf7-border-width",l.attr("data-wpcf7-content-border-width")),a.attr("data-background-color-hover",l.attr("data-wpcf7-content-background-color-hover")),a.attr("data-border-color-hover",l.attr("data-wpcf7-content-border-color-hover"))),o||(a.attr("data-wpcf7-input-width",l.attr("data-wpcf7-content-width")),a.attr("data-wpcf7-input-height",l.attr("data-wpcf7-content-height")),a.attr("data-text-color",l.attr("data-wpcf7-content-text-color")),a.attr("data-wpcf7-font-size",l.attr("data-wpcf7-content-font-size")),a.attr("data-text-color-hover",l.attr("data-wpcf7-content-text-color-hover"))),a.clone());r.prepend(a),0===t.find(".wpcf7-column-content").length&&(n=t.html(),c=F('<span class="wpcf7-column-content">'+n+"</div>"),t.empty().append(c)),t.prepend(e)}function T(e,t){var a,r;k&&(e=k[e],r=t.target.row_number,a=t.target.column_number,e=e.find('.wpcf7-row[wpcf7-row-number="'+r+'"]').find('.wpcf7-column[wpcf7-column-number="'+a+'"]').find(".rex-wpcf7-column-content-data"),"submit"!==(r=t.input_type)&&"radio"!==r&&e.attr("data-wpcf7-required-field",t.wpcf7_required_field),"text"!==r&&"email"!==r&&"number"!==r||(e.attr("data-wpcf7-email",t.wpcf7_email),e.attr("data-wpcf7-only-numbers",t.wpcf7_only_numbers)),"acceptance"===r&&e.attr("data-wpcf7-default-check",t.wpcf7_default_check),"text"!==r&&"email"!==r&&"number"!==r&&"textarea"!==r&&"select"!==r||e.attr("data-wpcf7-placeholder",t.wpcf7_placeholder),"file"===r&&(e.attr("data-wpcf7-file-max-dimensions",t.wpcf7_file_max_dimensions),e.attr("data-wpcf7-file-types",t.wpcf7_list_fields)),"file"!=r&&"radio"!=r&&"acceptance"!=r&&(e.attr("data-wpcf7-border-width",t.border_width),e.attr("data-wpcf7-border-radius",t.border_radius),e.attr("data-background-color",t.background_color),e.attr("data-background-color-hover",t.background_color_hover),e.attr("data-border-color",t.border_color),e.attr("data-border-color-hover",t.border_color_hover)),e.attr("data-wpcf7-input-width",t.input_width),e.attr("data-wpcf7-input-height",t.input_height),e.attr("data-wpcf7-font-size",t.font_size),e.attr("data-text-color",t.text_color),e.attr("data-text-color-hover",t.text_color_hover),e.attr("data-text-color-focus",t.text_color_focus),"select"===r&&e.attr("data-select-color-after-selection",t.select_color_after_selection),"text"!==r&&"email"!==r&&"number"!==r&&"textarea"!==r||(e.attr("data-placeholder-color",t.placeholder_color),e.attr("data-placeholder-hover-color",t.placeholder_hover_color)),"file"!==r&&"submit"!==r||(e.attr("data-button-text",t.wpcf7_button.text),e.attr("data-button-text-font-size",t.wpcf7_button.font_size),e.attr("data-button-height",t.wpcf7_button.height),e.attr("data-button-width",t.wpcf7_button.width),e.attr("data-button-border-width",t.wpcf7_button.border_width),e.attr("data-button-border-radius",t.wpcf7_button.border_radius),e.attr("data-button-margin-top",t.wpcf7_button.margin_top),e.attr("data-button-margin-right",t.wpcf7_button.margin_right),e.attr("data-button-margin-bottom",t.wpcf7_button.margin_bottom),e.attr("data-button-margin-left",t.wpcf7_button.margin_left),e.attr("data-button-padding-top",t.wpcf7_button.padding_top),e.attr("data-button-padding-right",t.wpcf7_button.padding_right),e.attr("data-button-padding-bottom",t.wpcf7_button.padding_bottom),e.attr("data-button-padding-left",t.wpcf7_button.padding_left),e.attr("data-button-text-color",t.wpcf7_button.text_color),e.attr("data-button-text-color-hover",t.wpcf7_button.text_color_hover),e.attr("data-button-background-color",t.wpcf7_button.background_color),e.attr("data-button-background-color-hover",t.wpcf7_button.background_color_hover),e.attr("data-button-border-color",t.wpcf7_button.border_color),e.attr("data-button-border-color-hover",t.wpcf7_button.border_color_hover)))}function p(e){e.each(function(e,t){F(t).find(".wpcf7-row").each(function(e,t){F(t).attr("wpcf7-row-number",e+1)})})}function f(e){e.each(function(e,t){F(t).find(".wpcf7-row").each(function(e,t){F(t).attr("wpcf7-row-number",e+1)})}),e.find(".wpcf7-row").each(function(e){F(this).find(".wpcf7-column").each(function(){var e=F(this);Rexbuilder_Rexwpcf7.refreshColumnContentStyle(e)})})}function b(){var o=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper");o.find(".wpcf7-rows").addClass("ui-sortable").sortable({direction:"vertical",handle:".rex-wpcf7-row-drag",cursor:"pointer",update:function(e,t){var a=t.item.parents(".rex-element-wrapper").attr("data-rex-element-id"),r=parseInt(t.item.attr("wpcf7-row-number")),t=(f(o.find(".wpcf7-form")),parseInt(t.item.attr("wpcf7-row-number"))),n=k[a].find(".wpcf7-row[wpcf7-row-number='"+r+"']"),c=k[a].find(".wpcf7-row[wpcf7-row-number='"+t+"']");r<t?n.insertAfter(c):n.insertBefore(c),p(k[a]),Rexbuilder_Util_Editor.builderEdited(!1)}})}function x(){F(".wpcf7-form:not(.no-builder-form) .wpcf7-submit:not(.wrapped)").each(function(e,t){Rexbuilder_Util.addClass(t,"wrapped"),F(t).wrap(Rexbuilder_Live_Templates.getTemplate("wpcf7-button-fix"))})}function _(e){for(var t,a,r,n,c=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),o=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),l=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-form:not(.no-builder-form)')),i=0,p=0,f=0;f<l.length;f++)for(l[f].querySelector(".rexwpcf7-form-tools")||l[f].querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",c),t=Array.prototype.slice.call(l[f].getElementsByClassName("wpcf7-row")),i=0;i<t.length;i++)for((a=t[i]).querySelector(".rexwpcf7-row-tools")||a.insertAdjacentHTML("afterbegin",o),r=Array.prototype.slice.call(a.getElementsByClassName("wpcf7-form-control")),p=0;p<r.length;p++)0===F(r[p]).siblings(".rexwpcf7-column-tools").length&&(n=h(r[p]),n=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:n}),r[p].insertAdjacentHTML("afterend",n))}function h(e){var t=e.className.match(/wpcf7-email/);if(t)return e.getAttribute("name");if(t=e.className.match(/wpcf7-(text|number|textarea|select|submit|acceptance|radio|file)/))switch(t=t[1]){case"text":case"number":case"textarea":case"select":case"file":return e.getAttribute("name");case"acceptance":t="checkbox";case"radio":return e.querySelector('[type="'+t+'"]').getAttribute("name");default:return null}}return{init:function(){var t;k={},x(),t=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")).forEach(function(e){e.querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",t)});for(var e,a=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),r=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),n=0,c=0;n<r.length;n++)for(e=Array.prototype.slice.call(r[n].querySelectorAll(".wpcf7-row")),c=0;c<e.length;c++)e[c].insertAdjacentHTML("afterbegin",a);for(var o,l,i=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),p=0,f=0;f<i.length;f++)for(o=Array.prototype.slice.call(i[f].querySelectorAll(".wpcf7-form-control")),p=0;p<o.length;p++)l=h(o[p]),l=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:l}),o[p].insertAdjacentHTML("afterend",l);var d=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").has(".wpcf7-form:not(.no-builder-form)");if(0!==d.length){w=[],d.each(function(){w.push(F(this).attr("data-rex-element-id"))}),m={};for(var s=0;s<w.length;s++){var u=w[s];m[u]=m[u]?m[u]+1:1}w=Rexbuilder_Util.removeArrayDuplicates(w),F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:w},success:function(e){if(e.success){for(var t=0;t<w.length;t++)k[w[t]]=F(F.parseHTML(e.data.html_forms[t][0]));b(),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Rexelement.addStyles()}}})}},retrieveFormsInPage:function(){return k},setCf7EditorInstance:function(e){M=e},addMissingTools:_,wrapButtons:x,updateFormInDB:function(e){var t,a;void 0!==k[e]&&(t=k[e][0].outerHTML,a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').eq(0).find(".rex-element-data")[0].outerHTML,F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_save_changes",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:e,new_form_string:t,element_data_string:a},success:function(e){e.success},error:function(e){}}))},updateSpanDataInDB:T,setRowsSortable:b,removeSeparatedForm:function(e){var t=e.formTarget,e=e.newName,t=Rexbuilder_Util.rexContainer.querySelector('.rex-element-wrapper[data-rex-element-id="'+t.element_id+'"]'),a=(Rexbuilder_Util.removeClass(t,"rex-separate-form"),(a=t.querySelector(".string-shortcode").getAttribute("shortcode")).replace(/title\=\".*\"/,'title="'+e+'"'));t.querySelector(".string-shortcode").setAttribute("shortcode",a)},addField:function(e){var t,a,r,n=e.insertionPoint,c=n.formID,e=e.fieldType,o=Rexbuilder_Util.createRandomNumericID(3),l=n.row_number,i=n.column_number,p=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+'"] .wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]'),f=k[c].find('.wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]'),f=(p.empty().removeClass("with-button"),f.empty().removeClass("with-button"),F(document.createElement("span")).addClass("wpcf7-column-content")),d=(p.append(f),p.find(".wpcf7-column-content")),s=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph");switch(e){case"text":t='<label class="wpcf7-label-text">'+s+"[text text-"+o+" class:text-"+o+"]</label>",d.prepend('<label class="wpcf7-label-text">'+s+'<span class="wpcf7-form-control-wrap text-'+o+'"><input type="text" name="text-'+o+'" value="" class="wpcf7-form-control wpcf7-text text-'+o+'" aria-invalid="false"></span></label>');break;case"textarea":t='<label class="wpcf7-label-text">'+s+"[textarea textarea-"+o+" class:textarea-"+o+"]</label>",d.prepend('<label class="wpcf7-label-text">'+s+'<span class="wpcf7-form-control-wrap textarea-'+o+'"><textarea name="textarea-'+o+'" class="wpcf7-form-control wpcf7-textarea textarea-'+o+'" aria-invalid="false"></textarea></span></label>');break;case"menu":t="[select menu-"+o+" class:menu-"+o+' "Field 1" "Field 2"]',d.prepend('<span class="wpcf7-form-control-wrap menu-'+o+'"><select name="menu-'+o+'" class="wpcf7-form-control wpcf7-select menu-'+o+'" aria-invalid="false"><option value="" disabled selected>Select something</option><option value="Field 1">Field 1</option><option value="Field 2">Field 2</option></select></span>');break;case"radiobuttons":t="[radio radio-"+o+' default:1  "Option 1" "Option 2" ]',d.prepend('<span class="wpcf7-form-control-wrap radio-'+o+'"><span class="wpcf7-form-control wpcf7-radio"><span class="wpcf7-list-item first"><input type="radio" name="radio-'+o+'" value="Option 1" checked="checked" class="with-gap" id="wpcf7-radio-1"><span class="wpcf7-list-item-label">Option 1</span></span><span class="wpcf7-list-item last"><input type="radio" name="radio-'+o+'" value="Option 2" class="with-gap" id="wpcf7-radio-2"><span class="wpcf7-list-item-label">Option 2</span></span></span></span>');break;case"acceptance":t="[acceptance acceptance-"+o+" optional]<p>Your text</p>[/acceptance]",d.prepend('<span class="wpcf7-form-control-wrap acceptance-'+o+'"><span class="wpcf7-form-control wpcf7-acceptance optional"><span class="wpcf7-list-item"><label><input type="checkbox" name="acceptance-'+o+'" value="1" aria-invalid="false"><span class="wpcf7-list-item-label"><p>Your text</p></span></label></span></span></span>');break;case"file":t="[file file-"+o+" filetypes: limit:]<div class='wpcf7-file-caption'>Your text here</div>",d.prepend('<span class="wpcf7-form-control-wrap file-'+o+'"><input type="file" name="file-'+o+'" class="wpcf7-form-control wpcf7-file" accept=".jpg,.jpeg,.png,.gif" aria-invalid="false" id="wpcf7-file-2"><label for="wpcf7-file-2">Choose file</label><div class="wpcf7-file-caption">Your text here</div></span>');break;case"submit":t="[submit class:submit-"+o+' "Send"]',d.prepend('<span class="wpcf7-form-control-wrap"><input type="submit" value="Send" class="wpcf7-form-control wpcf7-submit submit-'+o+' wrapped"></span>')}f=t,a=(e=n).formID,r=n.row_number,e=n.column_number,k[a].find('.wpcf7-row[wpcf7-row-number="'+r+'"] .wpcf7-column[wpcf7-column-number="'+e+'"]').removeClass("with-button").append(f),u({editPoint:{element_id:c,row_number:l,column_number:i}}),_(c),Rexbuilder_Rexwpcf7.fixWpcf7Files(),Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons(),Rexbuilder_Rexwpcf7.addColumnContentStyle(p),Rexbuilder_Live_Utilities.launchTooltips(),M.updateHeight()},addNewRow:function(e,t){var a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),r=F(document.createElement("div")),n=parseInt(a.find(".wpcf7-row").last().attr("wpcf7-row-number"))+1;switch(t){case 1:r.addClass("wpcf7-row wpcf7-row__1-column");break;case 2:r.addClass("wpcf7-row wpcf7-row__2-columns");break;case 3:r.addClass("wpcf7-row wpcf7-row__3-columns");break;case 4:r.addClass("wpcf7-row wpcf7-row__4-columns")}r.attr("wpcf7-row-number",n);for(var c=[],o=0;o<t;o++){c[o]=F(document.createElement("div")),c[o].addClass("wpcf7-column with-button"),c[o].attr("wpcf7-column-number",o+1);var l=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");c[o].append(l),r.append(c[o])}a.each(function(){var e=r.clone();F(this).find(".wpcf7-rows").append(e)}),_(e),a=r,n=k[n=e].find(".wpcf7-row").last(),a.insertAfter(n)},addRow:function(a,e,t){var r=(n=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"]').find(".wpcf7-form")).find('.wpcf7-row[wpcf7-row-number="'+t+'"]'),r=(e.insertAfter(r),f(n),a),n=t,n=(r=k[r],(n=r.find('.wpcf7-row[wpcf7-row-number="'+n+'"]')).clone().insertAfter(n),p(r),x(),Array.prototype.slice.call(e.get(0).getElementsByClassName("wpcf7-column"))),c=t+1;n.forEach(function(e,t){Rexbuilder_Util.hasClass(e,"with-button")||(i(e,a,c,t+1),Rexbuilder_Rexwpcf7.addColumnContentStyle(F(e)))})},addClonedColumnRow:function(e,a,t){var r,n,c,o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),l=o.find('.wpcf7-row[wpcf7-row-number="'+t+'"]'),l=(F(l[0]).clone(!1).insertAfter(l),f(o),t+1);o.find('.wpcf7-row[wpcf7-row-number="'+l+'"]').each(function(e,t){F(t).find(".wpcf7-column").each(function(e,t){e+1!==a?(F(t).empty(),e=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),F(t).append(e).addClass("with-button")):r=t})}),n=a,o=t,t=k[t=e],(c=t.find('.wpcf7-row[wpcf7-row-number="'+o+'"]')).clone().insertAfter(c),p(t),c=o+1,t.find('.wpcf7-row[wpcf7-row-number="'+c+'"]').find(".wpcf7-column").each(function(e,t){e+1!=n&&(F(t).empty(),e=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),F(t).append(e).addClass("with-button"))}),x(),i(r,e,l,a)},deleteRow:function(e,t){(a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form")).find('.wpcf7-row[wpcf7-row-number="'+t+'"]').remove(),f(a);var a=e,e=t;(a=k[a]).find('.wpcf7-row[wpcf7-row-number="'+e+'"]').remove(),p(a)},deleteColumnContent:function(e,t,a){var r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form").find('.wpcf7-row[wpcf7-row-number="'+t+'"] .wpcf7-column[wpcf7-column-number="'+a+'"]'),n=(Rexbuilder_Rexwpcf7.removeColumnContentStyle(r),r.empty(),Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row")),r=(r.append(n).addClass("with-button"),e),n=t,e=a;(r=k[r].find('.wpcf7-row[wpcf7-row-number="'+n+'"]').find('.wpcf7-column[wpcf7-column-number="'+e+'"]')).empty(),n=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),r.append(n).addClass("with-button")},updateFormLive:function(e){var t=e.element_target.element_id,a=e.propertyType,r=e.propertyName,n=e.newValue,c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').parents(".text-wrap");switch(a){case"background":case"border":case"border-width":case"margin":Rexbuilder_Rexwpcf7.updateFormRule(t,r,n),c.each(function(e,t){Rexbuilder_Util_Editor.updateBlockContainerHeight(F(t))});break;case"validation-error":Rexbuilder_Rexwpcf7.updateFormMessageRule(t,"wpcf7-validation-errors",r,n);break;case"send-message":Rexbuilder_Rexwpcf7.updateFormMessageRule(t,"wpcf7-mail-sent-ok",r,n);break;case"columns-padding":Rexbuilder_Rexwpcf7.updateFormColumnsRule(t,r,n),c.each(function(e,t){Rexbuilder_Util_Editor.updateBlockContainerHeight(F(t))})}M.updateHeight()},updateFormContentLive:function(r){var e=r.element_target.element_id;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-column').not(".with-button").each(function(e,t){var t=F(t),a=0!=t.find(".rex-wpcf7-column-content-data").length,t=Rexbuilder_Rexwpcf7.generateColumnContentData(t,a);"submit"!=t.input_type&&$({target:t.target,content:t,propertyType:r.propertyType,propertyName:r.propertyName,newValue:r.newValue})}),M.updateHeight()},updateColumnContentLive:$,updateColumnContentShortcode:function(e){var t,a,r=(e=e.columnContentData).target.element_id,n=e.target.row_number,c=e.target.column_number,o=e.input_type,n=k[r].find('.wpcf7-row[wpcf7-row-number="'+n+'"] .wpcf7-column[wpcf7-column-number="'+c+'"]'),c=(void 0===(g=n.find(".wpcf7-column-content").html())&&(g=n.html()),"true"==String(e.wpcf7_required_field)),l="true"==String(e.wpcf7_email),i="true"==String(e.wpcf7_only_numbers),p="true"==String(e.wpcf7_default_check),f=e.wpcf7_placeholder,d=e.label_text,s=e.text,u=e.wpcf7_list_fields,w=e.wpcf7_file_max_dimensions,m=e.wpcf7_button.text;if(-1!==["text","email","number","select","file","textarea","acceptance"].indexOf(o)&&((b=g.match(/\[(textarea|email|number|select|file|text)\*?|(optional)/))?(t=b[0],a=b[1],(b=b[2])?c&&(g=g.replace(" "+b,"")):g=g.replace(t,"["+a+(c?"*":""))):c||(g=g.replace(/\]/," optional]"))),-1!==["text","email","number"].indexOf(o)){var b=l?"email":i?"number":"text";if(b!==o)try{var x=g.match(/\[(text|email|number)/),_=/(text|email|number)(-\d+)/,h=g.match(_),g=g.replace(x[0],"["+b).replace(new RegExp(_,"g"),b+h[2])}catch(e){console.error("Error while changing the field type to "+b+". Error:",e)}}if(-1!==["text","email","number","textarea"].indexOf(o))try{var v=F(F.parseHTML(g));v.contents().get(0).innerHTML=d,g=v.get(0).outerHTML}catch(e){console.error("Error while changing the label text. Error:",e)}if("acceptance"==o&&(/default\:on/.test(g)?p||(g=g.replace("default:on","")):p&&(g=g.replace(/\[[a-z]+ [a-z]+\-[0-9]+ /,/\[[a-z]+ [a-z]+\-[0-9]+ /.exec(g)+"default:on "))),-1!==["text","email","number","textarea"].indexOf(o)&&(t=/placeholder/.test(g),""===f?t&&(g=g.replace(/\splaceholder \".+\"/,"")):(a=g.match(/\[.+(\"|\')(.+)(\"|\')\]/),c='placeholder "'+f+'"',t||a?t?g=g.replace(/placeholder \".+\"/,c):a&&(g=(g=g.replace(a[1]+a[2]+a[3],"")).replace("]"," "+c+"]")):g=g.replace("]"," "+c+"]"))),"acceptance"==o&&(g=(g=g.replace(/\][\s\S]+\[/,"]"+s+"[")).replace(/<p>\s<\/p>/g,"")),"select"==o||"radio"==o)for(var C in g=g.replace(/\s[\"\'][\s\S]+[\"\']/,""),u)g=g.replace("]"," '"+u[C]+"']");if("file"==o&&(g=g.replace(/limit\:[\w]*/,"limit:"+w)),"file"===o){for(var R="filetypes:",y=0;y<u.length;y++)u[y]=u[y].toLowerCase(),R+=u[y],y!=u.length-1&&(R+="|");g=g.replace(/filetypes\:[\w\|]*/,R)}"file"==o&&((l=F(F.parseHTML(g)[1])).empty(),l.append(s),g=g.replace(/\][\s\S]*/,"]"+l[0].outerHTML)),"submit"==o&&(g=g.replace(/[\"\'][\s\S]*[\"\']/,'"'+m+'"')),(i=n.find(".wpcf7-column-content")).empty(),i.append(g),T(r,e)},addFormInPage:function(e,t){k[e]=t,m[e]=m[e]?m[e]+1:1,w.push(e),w=Rexbuilder_Util.removeArrayDuplicates(w)},removeFormInPage:function(e){1===m[e]?(delete k[e],delete m[e],w.splice(w.indexOf(e),1)):--m[e]},updateDBFormsInPage:function(r,n){var c=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .rex-element-wrapper").has(".wpcf7-form");if(0!==c.length){w=[],c.each(function(e,t){w.push(t.getAttribute("data-rex-element-id"))}),m={};for(var e=0;e<w.length;e++){var t=w[e];m[t]=m[t]?m[t]+1:1}w=Rexbuilder_Util.removeArrayDuplicates(w),F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:w},success:function(e){if(e.success){for(var t=0;t<w.length;t++)k[w[t]]=F(F.parseHTML(e.data.html_forms[t][0])),n&&w[t]==r&&Rexbuilder_Rexelement.addElementStyle(c.filter('[data-rex-element-id="'+r+'"]'));Rexbuilder_Rexwpcf7.fixInputs();var a=Rexbuilder_Util.$rexContainer.find(".importing-element");0!==a.length&&(Rexbuilder_Util_Editor.updateBlockContainerHeight(a.parents(".text-wrap")),a.removeClass("importing-element"))}}})}},getIDsInPage:function(){return w},fixBlocksHeight:function(){var e,t=document.getElementById("rex-wpcf7-tools");null!==t&&(e=parseInt(F(t).parents(".grid-stack-item").attr("data-gs-height")),e--,F(t).parents(".grid-stack-item").attr("data-gs-height",e))},createColumnContentSpanData:u}}(jQuery);
var Rex_Save_Listeners=function(ie){"use strict";function k(e){var t={name:e,sections:[]};return t.sections=i(e),t}function x(e,t,i,a){for(var o,r,l,u,d=[],_=0;_<e.customizations.length;_++)e.customizations[_].name!=i&&(u=e.customizations[_],d.push(u));var n,s={name:i,targets:a=void 0!==a?a:m(t,i)};if("default"==i)for(_=0;_<d.length;_++)for(void 0!==d[_].targets&&null!=d[_].targets&&0!=d[_].targets.length||(d[_].targets=[],d[_].targets.push({name:"self",props:{}})),o=1;o<s.targets.length;o++){for(l=!1,r=1;r<d[_].targets.length;r++)if(s.targets[o].name==d[_].targets[r].name){l=!0;break}l||(n={name:s.targets[o].name,props:{}},d[_].targets.splice(1,0,n))}return d.push(s),e.customizations=d,e}function L(){var t,i,a,o,r,l,u,d,_,n,e=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),s=document.getElementById("rexbuilder-layout-data"),c=[{condition:"rex-effect",active:!1},{condition:"rex-num-spin",active:!1},{condition:"rex-slideshow",active:!1},{condition:"sticky-section",active:!1},{condition:"reveal-opacity-on-scroll",active:!1},{condition:"distance-accordion-toggle",active:!1},{condition:"rex-indicator__",active:!1},{condition:"RexIndicator",active:!1},{condition:"popup-content-button",active:!1},{condition:"popup-video-button",active:!1},{condition:"split-scrollable",active:!1},{condition:"particle-swarm",active:!1}];return e.forEach(function(e){if((r=e.getAttribute("data-rexlive-section-id"))&&[].slice.call(s.querySelectorAll('[data-section-rex-id="'+r+'"]')).forEach(function(e){if(""!==e.innerText)for(l=JSON.parse(e.innerText),u=0,d=l.length;u<d;u++)for(_=0,n=c.length;_<n;_++)void 0!==l[u].props.custom_classes&&-1!==l[u].props.custom_classes.indexOf(c[_].condition)&&(c[_].active=!0),void 0!==l[u].props.block_custom_class&&-1!==l[u].props.block_custom_class.indexOf(c[_].condition)&&(c[_].active=!0)}),(r=e.querySelector(".section-data"))&&(o=r.getAttribute("data-custom_classes")))for(_=0,n=c.length;_<n;_++)-1!==o.indexOf(c[_].condition)&&(c[_].active=!0);[].slice.call(e.querySelectorAll(".grid-stack-item:not(.removing_block)")).forEach(function(e){if((i=e.querySelector(".rexbuilder-block-data"))&&(a=i.getAttribute("data-block_custom_class")))for(_=0,n=c.length;_<n;_++)-1!==a.indexOf(c[_].condition)&&(c[_].active=!0);if(t=e.querySelector(".text-wrap"))for(_=0,n=c.length;_<n;_++)-1!==t.innerHTML.indexOf(c[_].condition)&&(c[_].active=!0)})}),c}var i=function(a){var o=[];return Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){var t=ie(t),i={section_rex_id:t.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!1};i.section_hide=t.hasClass("rex-hide-section"),t.hasClass("rex-model-section")?(i.section_is_model=!0,i.section_model_id=t.attr("data-rexlive-model-id"),i.section_model_number=t.attr("data-rexlive-model-number")):i.targets=m(t,a),o.push(i)}),o},g=function(e){return"true"==e.getAttribute("data-rexlive-section-edited")},b=function(e){return"true"==e.getAttribute("data-rexlive-layout-changed")},v=function(e){return"true"==e.getAttribute("data-rexlive-element-edited")},m=function(e,t){var i,a,o,r=e[0],l=[],u={name:"self",props:{}},d=r.querySelector(".grid-stack-row"),_=ie(d),n=b(d),e=("default"!=t&&!g(r)||(u.props=w(e,"customLayout",null)),"true"==r.getAttribute("data-rex-collapse-grid")&&(u.props.collapse_grid=!0,!n&&Rexbuilder_Util.isMobile()?n=!(u.props.pickDefaultSizeCollapse=!0):u.props.pickDefaultSizeCollapse=!1),n?(u.props.gridEdited=!0,u.props.full_height=d.getAttribute("data-full-height"),u.props.layout=d.getAttribute("data-layout")):u.props.gridEdited=!1,l.push(u),_.data().plugin_perfectGridGalleryEditor),s=e.getElementsTopBottom(),c=s.length;for(e.updateAllElementsProperties(),i=0;i<c;i++)Rexbuilder_Util.hasClass(s[i],"removing_block")||(a={name:s[i].getAttribute("data-rexbuilder-block-id"),props:{}},o=v(s[i]),("default"==t||n||o)&&(a.props=G(s[i],"customLayout",d)),"default"!=t&&n&&!o&&p(a.props),l.push(a));return l},p=function(e){for(var t in e)switch(t){case"rex_id":case"size_x":case"size_y":case"row":case"col":case"gs_start_h":case"gs_width":case"gs_height":case"gs_y":case"gs_x":case"block_dimensions_live_edited":case"element_real_fluid":case"hide":case"photoswipe":break;case"element_edited":e.element_edited=!1;break;default:e[t]=void 0}},G=function(e,t,i){i=void 0!==i?i:e.parentNode();var a,o,r,l,u,d,_,n,s,c,g,b,x,v,m,p,f,y,h,R,A,U="",k="",L="0",w=1,D=!1,j="",z=e.querySelector(".grid-item-content"),S=e.querySelector(".rexbuilder-block-data"),N=e.querySelector(".rex-video-wrap"),P=e.id,E=e.getAttribute("data-rexbuilder-block-id"),I=""==S.getAttribute("data-type")?"text":S.getAttribute("data-type"),T=e.getAttribute("data-width"),O=e.getAttribute("data-height"),B=e.getAttribute("data-row"),q=e.getAttribute("data-col"),M=e.getAttribute("data-gs-height"),J=e.getAttribute("data-gs-width"),$=e.getAttribute("data-gs-height"),H=e.getAttribute("data-gs-y"),G=e.getAttribute("data-gs-x"),F=null==S.getAttribute("data-color_bg_block")?"":S.getAttribute("data-color_bg_block"),W=null==S.getAttribute("data-color_bg_elem_active")||S.getAttribute("data-color_bg_elem_active"),Q=null===S.getAttribute("data-id_image_bg_block")?"":S.getAttribute("data-id_image_bg_block"),K=null===S.getAttribute("data-image_bg_block")?"":S.getAttribute("data-image_bg_block"),V=isNaN(parseInt(z.getAttribute("data-background_image_width")))?"":parseInt(z.getAttribute("data-background_image_width")),X=isNaN(parseInt(z.getAttribute("data-background_image_height")))?"":parseInt(z.getAttribute("data-background_image_height")),C="fixed"==i.getAttribute("data-layout")?"full":"natural",C=null==S.getAttribute("data-type_bg_block")?C:S.getAttribute("data-type_bg_block"),Y=null==S.getAttribute("data-image_size")?"full":S.getAttribute("data-image_size"),Z=null===S.getAttribute("data-photoswipe")?"":S.getAttribute("data-photoswipe"),ee=null==S.getAttribute("data-image_bg_elem_active")||S.getAttribute("data-image_bg_elem_active"),te=null===S.getAttribute("data-video_bg_id")?"":S.getAttribute("data-video_bg_id"),D=(N&&(U=""==S.getAttribute("data-video_bg_width")||null===S.getAttribute("data-video_bg_width")?N.getAttribute("data-rex-video-width"):S.getAttribute("data-video_bg_width"),k=""==S.getAttribute("data-video_bg_height")||null===S.getAttribute("data-video_bg_height")?N.getAttribute("data-rex-video-height"):S.getAttribute("data-video_bg_height")),N=null===S.getAttribute("data-video_mp4_url")?"":S.getAttribute("data-video_mp4_url"),a=null===S.getAttribute("data-video_bg_url")?"":S.getAttribute("data-video_bg_url"),o=null===S.getAttribute("data-video_bg_url_vimeo")?"":S.getAttribute("data-video_bg_url_vimeo"),L=null!==S.getAttribute("data-video_has_audio")&&S.getAttribute("data-video_has_audio"),r=null===S.getAttribute("data-linkurl")?"":S.getAttribute("data-linkurl"),l=null===S.getAttribute("data-block_custom_class")?"":S.getAttribute("data-block_custom_class"),u=null===S.getAttribute("data-block_padding")?"":S.getAttribute("data-block_padding"),d=null==S.getAttribute("data-overlay_block_color")?"":S.getAttribute("data-overlay_block_color"),_=null!=S.getAttribute("data-overlay_block_color_active")&&S.getAttribute("data-overlay_block_color_active"),n=null===S.getAttribute("data-zak_background")?"":S.getAttribute("data-zak_background"),s=null===S.getAttribute("data-zak_side")?"":S.getAttribute("data-zak_side"),c=null===S.getAttribute("data-zak_title")?"":S.getAttribute("data-zak_title"),g=null===S.getAttribute("data-zak_icon")?"":S.getAttribute("data-zak_icon"),b=null===S.getAttribute("data-zak_foreground")?"":S.getAttribute("data-zak_foreground"),x=null===S.getAttribute("data-block_animation")?"fadeInUpBig":S.getAttribute("data-block_animation"),v=null===S.getAttribute("data-block_has_scrollbar")?"false":S.getAttribute("data-block_has_scrollbar"),"masonry"!=i.getAttribute("data-layout")||null===S.getAttribute("data-block_dimensions_live_edited")?"":S.getAttribute("data-block_dimensions_live_edited"),m=null==S.getAttribute("data-block_flex_position")?"":S.getAttribute("data-block_flex_position"),p=null==S.getAttribute("data-block_flex_img_position")?"":S.getAttribute("data-block_flex_img_position"),f=(e.offsetHeight/e.offsetWidth).toFixed(3),w=Rexbuilder_Util.hasClass(e,"block-has-slider")?f:"",S.setAttribute("data-slider_ratio",w),Rexbuilder_Util.hasClass(e,"rex-hide-element")),S=parseInt(S.getAttribute("data-element_real_fluid")),S=isNaN(S)?0:S;return"shortcode"==t?(z=z.querySelector(".text-wrap"),Rexbuilder_Util.hasClass(e,"block-has-slider")?j='[RexSlider slider_id="'+(R=(e=z.querySelector('.rex-slider-wrap[data-rex-slider-active="true"]'))?parseInt(e.getAttribute("data-slider-id")):R)+'"]':(R=(e=z.cloneNode(!0)).querySelector(".medium-insert-buttons"),z=e.querySelector(".text-editor-span-fix"),y=e.querySelector(".ui-sortable"),A=e.querySelector(".ui-sortable-handle"),h=e.querySelector("figure"),R&&R.parentNode.removeChild(R),z&&z.parentNode.removeChild(z),y&&Rexbuilder_Util.removeClass(y,"ui-sortable"),A&&Rexbuilder_Util.removeClass(y,"ui-sortable-handle"),h&&(h.removeAttribute("style"),h.removeAttribute("class")),Array.prototype.slice.call(e.getElementsByClassName("rex-elements-paragraph")).forEach(function(e){var t=e.querySelector(".rex-element-wrapper").getAttribute("data-rex-element-id"),i=e.querySelector(".string-shortcode").getAttribute("shortcode");e.outerHTML='[RexFormWrapper id="'+t+'"]'+i+"[/RexFormWrapper]"}),""==e.textContent.trim()?j=0<e.getElementsByTagName("iframe").length||0<e.getElementsByTagName("img").length||0<e.getElementsByTagName("i").length||0<e.getElementsByTagName("form").length||0<e.getElementsByTagName("hr").length?e.innerHTML.trim():"":(j=e.innerHTML.trim(),Array.prototype.slice.call(e.getElementsByClassName("rex-button-data")).forEach(function(e){e.removeAttribute("data-synchronize")}))),'[RexpansiveBlock id="'+P+'" rexbuilder_block_id="'+E+'" type="'+I+'" size_x="'+T+'" size_y="'+O+'" row="'+B+'" col="'+q+'" gs_start_h="'+M+'" gs_width="'+J+'" gs_height="'+$+'" gs_y="'+H+'" gs_x="'+G+'" element_real_fluid="'+S+'" color_bg_block="'+F+'" color_bg_block_active="'+W+'" image_bg_block="'+K+'" id_image_bg_block="'+Q+'" image_bg_elem_active="'+ee+'" video_bg_id="'+te+'" video_bg_width="'+U+'" video_bg_height="'+k+'" video_mp4_url="'+N+'" video_bg_url="'+a+'" video_bg_url_vimeo="'+o+'" type_bg_block="'+C+'" image_size="'+Y+'" photoswipe="'+Z+'" linkurl="'+r+'" block_custom_class="'+l+'" block_padding="'+u+'" overlay_block_color="'+d+'" overlay_block_color_active="'+_+'"'+(""!==n?' zak_background="'+n+'"':"")+(""!==s?' zak_side="'+s+'"':"")+(""!==c?' zak_title="'+c+'"':"")+(""!==g?' zak_icon="'+g+'"':"")+(""!==b?' zak_foreground="'+b+'"':"")+' block_animation="'+x+'" video_has_audio="'+("true"==L.toString()?"1":"0")+'" block_has_scrollbar="'+v+'" block_flex_position="'+m+'" block_flex_img_position="'+p+'"]'+j+"[/RexpansiveBlock]"):"customLayout"==t?(R=ie(i).parents(".rexpansive_section").attr("data-rexlive-section-id"),z=Rexbuilder_Util.editedDataInfo.getBlockData(R,E),(A={}).hide=D,"default"==Rexbuilder_Util.activeLayout?A.element_edited=!1:A.element_edited=!0,A.rexbuilder_block_id=E,A.type=I,A.size_x=T,A.size_y=O,A.row=B,A.col=q,A.gs_start_h=M,A.gs_width=J,A.gs_height=$,A.gs_y=H,A.gs_x=G,A.element_real_fluid=S,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.color_bg_block)&&(A.color_bg_block=F),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.color_bg_block_active)&&(A.color_bg_block_active=W),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_bg_url)&&(A.image_bg_url=K),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_width)&&(A.image_width=V),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_height)&&(A.image_height=X),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.id_image_bg)&&(A.id_image_bg=Q),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_size)&&(A.image_size=Y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_bg_elem_active)&&(A.image_bg_elem_active=ee),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.type_bg_image)&&(A.type_bg_image=C),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_id)&&(A.video_bg_id=te),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_width)&&(A.video_bg_width=U),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_height)&&(A.video_bg_height=k),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_mp4_url)&&(A.video_mp4_url=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_url_youtube)&&(A.video_bg_url_youtube=a),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_url_vimeo)&&(A.video_bg_url_vimeo=o),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.photoswipe)&&(A.photoswipe=Z),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_custom_class)&&(A.block_custom_class=l),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_padding)&&(A.block_padding=u),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.overlay_block_color)&&(A.overlay_block_color=d),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.overlay_block_color_active)&&(A.overlay_block_color_active=_),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.linkurl)&&(A.linkurl=r),""!==n&&(A.zak_background=n),""!==s&&(A.zak_side=s),""!==c&&(A.zak_title=c),""!==g&&(A.zak_icon=g),""!==b&&(A.zak_foreground=b),A.block_animation=x,A.video_has_audio=L,A.block_has_scrollbar=v,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_flex_position)&&(A.block_flex_position=m),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_flex_img_position)&&(A.block_flex_img_position=p),A.slider_dimension_ratio=w,A.block_ratio=f,A):void 0},w=function(e,t,i){var a,o="",r="",l="",u="",d="",_="",n=e[0],s=e.find(".grid-stack-row"),c=s[0],g=n.querySelector(".section-data"),b=n.querySelector(".rex-video-wrap"),x=s.data().plugin_perfectGridGalleryEditor,v=n.getAttribute("data-rexlive-section-name"),m=null===g.getAttribute("data-section_nav_label")?"":g.getAttribute("data-section_nav_label"),p=null===g.getAttribute("data-type")?"perfect-grid":g.getAttribute("data-type"),f=null==g.getAttribute("data-color_bg_section")?"":g.getAttribute("data-color_bg_section"),y=null==g.getAttribute("data-color_bg_section_active")||g.getAttribute("data-color_bg_section_active"),h=null===g.getAttribute("data-margin")?"":g.getAttribute("data-margin"),R=null===g.getAttribute("data-image_bg_section")?"":g.getAttribute("data-image_bg_section"),D=null===n.getAttribute("data-background_image_width")||isNaN(parseInt(n.getAttribute("data-background_image_width")))?"":parseInt(n.getAttribute("data-background_image_width")),P=null===n.getAttribute("data-background_image_height")||isNaN(parseInt(n.getAttribute("data-background_image_height")))?"":parseInt(n.getAttribute("data-background_image_height")),A=null==g.getAttribute("data-image_size")?"full":g.getAttribute("data-image_size"),U=null===g.getAttribute("data-id_image_bg_section")?"":g.getAttribute("data-id_image_bg_section"),O=null==g.getAttribute("data-image_bg_section_active")||g.getAttribute("data-image_bg_section_active"),B=null===g.getAttribute("data-video_mp4_url")?"":g.getAttribute("data-video_mp4_url"),q=null===g.getAttribute("data-video_bg_url_section")?"":g.getAttribute("data-video_bg_url_section"),M=null===g.getAttribute("data-video_bg_id_section")?"":g.getAttribute("data-video_bg_id_section"),l=(b&&(o=""==g.getAttribute("data-video_bg_width_section")||null===g.getAttribute("data-video_bg_width_section")?b.getAttribute("data-rex-video-width"):g.getAttribute("data-video_bg_width_section"),r=""==g.getAttribute("data-video_bg_height_section")||null===g.getAttribute("data-video_bg_height_section")?b.getAttribute("data-rex-video-height"):g.getAttribute("data-video_bg_height_section")),null===g.getAttribute("data-video_bg_url_vimeo_section")?"":g.getAttribute("data-video_bg_url_vimeo_section")),b=null===c.getAttribute("data-full-height")?"":c.getAttribute("data-full-height"),J=null===c.getAttribute("data-layout")?"":c.getAttribute("data-layout"),$=null===g.getAttribute("data-custom_classes")?"":g.getAttribute("data-custom_classes"),H="100%"===(s=s.parent().css("max-width"))||"none"==s?"full":"boxed",k=parseInt(c.getAttribute("data-separator")),L=parseInt(c.getAttribute("data-row-separator-top")),w=parseInt(c.getAttribute("data-row-separator-right")),j=parseInt(c.getAttribute("data-row-separator-bottom")),z=parseInt(c.getAttribute("data-row-separator-left")),k={gutter:isNaN(k)?"":k,top:isNaN(L)?"":L,right:isNaN(w)?"":w,bottom:isNaN(j)?"":j,left:isNaN(z)?"":z},L=k.gutter,w=k.top,j=k.right,z=k.bottom,k=k.left,S=getComputedStyle(n),N=parseInt(S["margin-top"].replace("px","")),E=parseInt(S["margin-right"].replace("px","")),I=parseInt(S["margin-bottom"].replace("px","")),S=parseInt(S["margin-left"].replace("px","")),N={top:isNaN(N)?"":N,right:isNaN(E)?"":E,bottom:isNaN(I)?"":I,left:isNaN(S)?"":S},E=N.top,I=N.right,S=N.bottom,N=N.left,T=null==g.getAttribute("data-row_active_photoswipe")?"0":g.getAttribute("data-row_active_photoswipe"),C=null===g.getAttribute("data-responsive_background")?"":g.getAttribute("data-responsive_background");return""==(u=null==g.getAttribute("data-row_overlay_color")?"":g.getAttribute("data-row_overlay_color"))&&(u=C),g=null!=g.getAttribute("data-row_overlay_active")&&g.getAttribute("data-row_overlay_active"),d=null==i?null==n.getAttribute("data-rexlive-section-id")?"":n.getAttribute("data-rexlive-section-id"):i,i=null!=n.getAttribute("data-rex-collapse-grid")&&"true"==n.getAttribute("data-rex-collapse-grid").toString(),a=null==n.getAttribute("data-rexlive-model-id")?"":n.getAttribute("data-rexlive-model-id"),n=null==n.getAttribute("data-rexlive-model-name")?"":n.getAttribute("data-rexlive-model-name"),e=Rexbuilder_Util.getGalleryInstance(e).properties.singleWidth,"shortcode"==t?(_='[RexpansiveSection section_name="'+v+'" section_nav_label="'+m+'" type="'+p+'" color_bg_section="'+f+'" color_bg_section_active="'+y+'" dimension="'+H+'" image_bg_section_active="'+O+'" image_bg_section="'+R+'" id_image_bg_section="'+U+'" image_size="'+A+'" video_bg_url_section="'+q+'" video_bg_id_section="'+M+'" video_bg_width_section="'+o+'" video_bg_height_section="'+r+'" video_bg_url_vimeo_section="'+l+'" full_height="'+b+'" block_distance="'+L+'" layout="'+J+'" responsive_background="'+C+'" custom_classes="'+$+'" section_width="'+s+'" row_separator_top="'+w+'" row_separator_bottom="'+z+'" row_separator_right="'+j+'" row_separator_left="'+k+'" margin="'+h+'" row_margin_top="'+E+'" row_margin_bottom="'+S+'" row_margin_right="'+I+'" row_margin_left="'+N+'" row_active_photoswipe="'+T+'" row_overlay_color="'+u+'" row_overlay_active="'+g+'" rexlive_section_id="'+d+'" rexlive_model_id="'+a+'" rexlive_model_name="'+n+'" row_edited_live="true"]',x.updateAllElementsProperties(),x.getElementsTopBottom().forEach(function(e){Rexbuilder_Util.hasClass(e,"removing_block")||(_+=G(e,"shortcode",c))}),_=_+F(x)+"[/RexpansiveSection]"):"customLayout"==t?(C=Rexbuilder_Util.editedDataInfo.getSectionData(d),(T={}).collapse_grid=i,T.grid_cell_width=e,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.section_name)&&(T.section_name=v),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.section_nav_label)&&(T.section_nav_label=m),T.type=p,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.color_bg_section)&&(T.color_bg_section=f),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.color_bg_section_active)&&(T.color_bg_section_active=y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.dimension)&&(T.dimension=H),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.margin)&&(T.margin=h),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.image_bg_section_active)&&(T.image_bg_section_active=O),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.image_bg_section)&&(T.image_bg_section=R),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.image_width)&&(T.image_width=D),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.image_height)&&(T.image_height=P),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.id_image_bg_section)&&(T.id_image_bg_section=U),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.image_size)&&(T.image_size=A),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_bg_id)&&(T.video_bg_id=M),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_bg_width_section)&&(T.video_bg_width_section=o),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_bg_height_section)&&(T.video_bg_height_section=r),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_mp4_url)&&(T.video_mp4_url=B),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_bg_url_section)&&(T.video_bg_url_section=q),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.video_bg_url_vimeo_section)&&(T.video_bg_url_vimeo_section=l),T.full_height=b,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.block_distance)&&(T.block_distance=L),T.layout=J,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.custom_classes)&&(T.custom_classes=$),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.section_width)&&(T.section_width=s),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_separator_top)&&(T.row_separator_top=w),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_separator_bottom)&&(T.row_separator_bottom=z),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_separator_right)&&(T.row_separator_right=j),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_separator_left)&&(T.row_separator_left=k),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_margin_top)&&(T.row_margin_top=E),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_margin_bottom)&&(T.row_margin_bottom=S),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_margin_right)&&(T.row_margin_right=I),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_margin_left)&&(T.row_margin_left=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_overlay_color)&&(T.row_overlay_color=u),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&C&&C.row_overlay_active)&&(T.row_overlay_active=g),T.rexlive_model_id=a,T.rexlive_model_name=n,T.section_edited=!0,T):void 0},F=function(e){for(var t,i,a="",o=e.getLastID(),r=e.getRowNumber(),l=e.fillEmptySpaces(),u=0;u<l.length;u++)a+=(t=o+=1,i=l[u],'[RexpansiveBlock id="block_'+r+"_"+t+'" type="empty" col="'+(i.x+1)+'" row="'+(i.y+1)+'" size_x="'+i.w+'" size_y="'+i.h+'" color_bg_block="" image_bg_block="" id_image_bg_block="" type_bg_block="" photoswipe="" linkurl="" empty_block_backend_fix="'+!0+'"][/RexpansiveBlock]');return a};return{init:function(){Rexbuilder_Util.$document.on("rexlive:savePage",function(e){var t,i,a,o,r,l=e.settings.data_to_send,u=(Rexbuilder_Util_Editor.savingPage=!0,parseInt(ie("#id-post").attr("data-post-id"))),e=Rexbuilder_Util.activeLayout,d=("undefined"!=typeof Rexbuilder_Rexwpcf7&&((d=Rexbuilder_Rexwpcf7_Editor.getIDsInPage()).forEach(function(e){Rexbuilder_Rexwpcf7_Editor.updateFormInDB(e)}),0!==d.length)&&Rexbuilder_Rexwpcf7_Editor.fixBlocksHeight(),ie("#rexpansive-builder-style-inline-css").text().trim()),_=L(),n=(Rexbuilder_Dom_Util.fixModelNumbers(),k(e)),s=Rexbuilder_Util.getPageAvaiableLayoutsNames(),c=!1;for(U=0,r=s.length;U<r;U++)if(s[U]==n.name){c=!0;break}c||s.push(n.name),Rexbuilder_Util.updatePageAvaiableLayoutsNames(s),Rexbuilder_Util.updatePageCustomizationsData(n);var g=Rexbuilder_Rexbutton.findIDsInPage(!1),b=[];if(b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_buttons_in_page",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,ids:JSON.stringify(g)},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_layouts",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,names:s},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_css",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,custom_css:d},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_effects",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,custom_effects:_},success:function(e){e.success},error:function(e){}})),"default"==e){var x,v,m,p="",f=(Rexbuilder_Util.updateDefaultLayoutState({pageData:n.sections,modelsData:Rexbuilder_Util.getModelsCustomizations()}),Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(){var e=ie(this);e.hasClass("removing_section")||(e.hasClass("rex-model-section")?p+="[RexModel id="+e.attr("data-rexlive-model-id")+"][/RexModel]":p+=w(e,"shortcode",null))}),[]);for(U=0,v=(f=Rexbuilder_Util.getPageCustomizationsDom()).length;U<v;U++)for(var y,h=function(e){for(var t=[],i,a,o,r,i=0,o=e.length;i<o;i++)if(e[i].section_is_model.toString()=="true"){var l=e[i].section_model_id;for(a=0,r=t.length;a<r;a++)if(t[a].id==l){t[a].number=t[a].number+1;break}if(a==r){var u={id:l,number:1};t.push(u)}}return t}(f[U].sections),R=0,A=n.sections.length;R<A;R++)for(t=0,m=f[U].sections.length;t<m;t++)if(n.sections[R].section_rex_id==f[U].sections[t].section_rex_id){if("true"==f[U].sections[t].section_is_model.toString())for(i=0;i<h.length;i++)h[i].id==f[U].sections[t].section_model_id&&(parseInt(n.sections[R].section_model_number),h[i].number);if("true"!=f[U].sections[t].section_is_model.toString())for(void 0!==f[U].sections[t].targets&&0!=f[U].sections[t].targets.length||(f[U].sections[t].targets=[],f[U].sections[t].targets.push({name:"self",props:{}})),a=1;a<n.sections[R].targets.length;a++){for(x=!1,o=1;o<f[U].sections[t].targets.length;o++)n.sections[R].targets[a].name==f[U].sections[t].targets[o].name&&(x=!0);x||(y={name:n.sections[R].targets[a].name,props:{}},f[U].sections[t].targets.splice(1,0,y))}}f.push(n);for(var U=0;U<f.length;U++)Rexbuilder_Util.updatePageCustomizationsData(f[U]),Rexbuilder_Util.updatePageCustomizationsDomOrder(f[U]),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,sections:JSON.stringify(f[U].sections),layout_name:f[U].name},success:function(e){e.success},error:function(e){}}));b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,clean_post:"",rex_shortcode:p},success:function(e){e.success&&(Rexbuilder_Util.$rexContainer.removeClass("backend-edited"),Rexbuilder_Util.backendEdited=!1)},error:function(e){}}));g=Rexbuilder_Util.getSectionNamesUsed();Rexbuilder_Util.saveSectionNamesUsed(),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_sections_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,ids_used:JSON.stringify(g)},success:function(e){e.success},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while saving sections IDs")}})),b.push(ie.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_get_blocks_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce},success:function(e){e.success?(Rexbuilder_Util.updateBlocksIDsUsed(JSON.parse(e.data.currentIDsUsed)),Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")).forEach(function(i){Array.prototype.slice.call(i.getElementsByClassName("grid-stack-item")).forEach(function(e){var t;Rexbuilder_Util.hasClass(i,"removing_section")?Rexbuilder_Util.removeBlockID(e.getAttribute("data-rexbuilder-block-id")):(t=Rexbuilder_Util.hasClass(e,"removing_block"),Rexbuilder_Util[t?"removeBlockID":"addBlockID"](e.getAttribute("data-rexbuilder-block-id")))})}),Rexbuilder_Util.saveBlocksIDsUsed(),ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_blocks_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,ids_used:JSON.stringify(Rexbuilder_Util.getBlocksIDsUsed())},success:function(e){e.success||this.error(e,e.data[0].message,e.data[0].code)},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while saving blocks IDs")}})):this.error(e,e.data[0].message,e.data[0].code)},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while getting blocks IDs")}}))}else b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,sections:JSON.stringify(n.sections),layout_name:n.name},success:function(e){e.success},error:function(e){}}));ie.when.apply(ie,b).then(function(){Rexbuilder_Util_Editor.savingPage=!1;var e={eventName:"rexlive:savePageEnded",buttonData:l.buttonData,dataSaved:"page"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}).fail(function(){}).always(function(){})}),Rexbuilder_Util.$document.on("rexlive:saveModel",function(t){if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")){for(var e=[],i=(Rexbuilder_Util_Editor.savingModel=!0,Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0).parents(".rexpansive_section")),a=Rexbuilder_Util.activeLayout,o=void 0!==i.attr("data-rexlive-model-id")?i.attr("data-rexlive-model-id"):"",r=void 0!==i.attr("data-rexlive-model-name")?i.attr("data-rexlive-model-name"):"",l=void 0!==i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",u=Rexbuilder_Util.getModelsCustomizations(),d={},_=0;_<u.length;_++){var n=u[_];n.id==o&&(d=n)}jQuery.isEmptyObject(d)&&(d.id=o,d.name=r,d.customizations=[]);var s=x(d,i,a),c=(Rexbuilder_Util.updateModelsCustomizationsData(s),[]);for(_=0;_<s.customizations.length;_++)c.push(s.customizations[_].name);if(Rexbuilder_Util.updateDivModelCustomizationsNames({modelID:o,names:c}),e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_model_layouts_names",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:o,names:c},success:function(e){e.success},error:function(e){}})),"default"!=a){for(_=0;_<s.customizations.length;_++)if(s.customizations[_].name==a){Rexbuilder_Util.updateModelsLive(o,m(i,"default"),l),e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:s.id,model_name:s.customizations.name,targets:JSON.stringify(s.customizations[_].targets),layout_name:s.customizations[_].name},success:function(e){e.success},error:function(e){}}));break}}else{var g={model_id:o,post_title:r,post_content:w(i,"shortcode")},b={modelName:r,model_number:i.attr("data-rexlive-model-number"),html:"",modelID:o};for(e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_edit_model_shortcode_builder",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:g},success:function(e){e.success&&(b.html=e.data.model_html,Rexbuilder_Section.updateModelsHtmlLive(b))},error:function(e){},complete:function(e){}})),_=0;_<s.customizations.length;_++)e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:s.id,model_name:s.customizations.name,targets:JSON.stringify(s.customizations[_].targets),layout_name:s.customizations[_].name},success:function(e){e.success},error:function(e){}}))}ie.when.apply(ie,e).then(function(){var e=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0),e=(Rexbuilder_Dom_Util.updateLockEditModel(e,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model"),Rexbuilder_Util_Editor.savingModel=!1,{eventName:"rexlive:savePageEnded",dataSaved:"model",buttonData:void 0!==t.settings?t.settings.data_to_send.buttonData:""});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}).fail(function(){}).always(function(){})}})},createSectionProperties:w,createTargets:m,createBlockProperties:G,createCustomization:k,updateModel:x,_checkSpecialEffects:L}}(jQuery);
/*! jQuery UI - v1.12.1 - 2017-10-08
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(k){function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},k.extend(this._defaults,this.regional[""]),this.regional.en=k.extend(!0,{},this.regional[""]),this.regional["en-US"]=k.extend(!0,{},this.regional.en),this.dpDiv=i(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){k(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,o)}function o(){k.datepicker._isDisabledDatepicker((p.inline?p.dpDiv.parent():p.input)[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))}function h(t,e){for(var i in k.extend(t,e),e)null==e[i]&&(t[i]=e[i])}function e(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}k.ui=k.ui||{},k.ui.version="1.12.1";var W,E,F,s,x,C,n,a,r,l,c,R,L,B=0,Y=Array.prototype.slice;function j(t,e,i){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?i/100:1)]}function D(t,e){return parseInt(k.css(t,e),10)||0}k.cleanData=(L=k.cleanData,function(t){for(var e,i,s=0;null!=(i=t[s]);s++)try{(e=k._data(i,"events"))&&e.remove&&k(i).triggerHandler("remove")}catch(t){}L(t)}),k.widget=function(t,i,e){var s,n,o,a={},r=t.split(".")[0],h=r+"-"+(t=t.split(".")[1]);return e||(e=i,i=k.Widget),k.isArray(e)&&(e=k.extend.apply(null,[{}].concat(e))),k.expr[":"][h.toLowerCase()]=function(t){return!!k.data(t,h)},k[r]=k[r]||{},s=k[r][t],n=k[r][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new n(t,e)},k.extend(n,s,{version:e.version,_proto:k.extend({},e),_childConstructors:[]}),(o=new i).options=k.widget.extend({},o.options),k.each(e,function(e,s){return k.isFunction(s)?void(a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=s.apply(this,arguments),this._super=e,this._superApply=i,t}):void(a[e]=s);function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}}),n.prototype=k.widget.extend(o,{widgetEventPrefix:s&&o.widgetEventPrefix||t},a,{constructor:n,namespace:r,widgetName:t,widgetFullName:h}),s?(k.each(s._childConstructors,function(t,e){var i=e.prototype;k.widget(i.namespace+"."+i.widgetName,n,e._proto)}),delete s._childConstructors):i._childConstructors.push(n),k.widget.bridge(t,n),n},k.widget.extend=function(t){for(var e,i,s=Y.call(arguments,1),n=0,o=s.length;n<o;n++)for(e in s[n])i=s[n][e],s[n].hasOwnProperty(e)&&void 0!==i&&(t[e]=k.isPlainObject(i)?k.isPlainObject(t[e])?k.widget.extend({},t[e],i):k.widget.extend({},i):i);return t},k.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;k.fn[o]=function(i){var t="string"==typeof i,s=Y.call(arguments,1),n=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=k.data(this,a);return"instance"===i?(n=e,!1):e?k.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,s))!==e&&void 0!==t?(n=t&&t.jquery?n.pushStack(t.get()):t,!1):void 0:k.error("no such method '"+i+"' for "+o+" widget instance"):k.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(s.length&&(i=k.widget.extend.apply(null,[i].concat(s))),this.each(function(){var t=k.data(this,a);t?(t.option(i||{}),t._init&&t._init()):k.data(this,a,new e(i,this))})),n}},k.Widget=function(){},k.Widget._childConstructors=[],k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=k(e||this.defaultElement||this)[0],this.element=k(e),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=k(),this.hoverable=k(),this.focusable=k(),this.classesElementLookup={},e!==this&&(k.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=k(e.style?e.ownerDocument:e.document||e),this.window=k(this.document[0].defaultView||this.document[0].parentWindow)),this.options=k.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:k.noop,_create:k.noop,_init:k.noop,destroy:function(){var i=this;this._destroy(),k.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:k.noop,widget:function(){return this.element},option:function(t,e){var i,s,n,o=t;if(0===arguments.length)return k.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(s=o[t]=k.widget.extend({},this.options[t]),n=0;i.length-1>n;n++)s[i[n]]=s[i[n]]||{},s=s[i[n]];if(t=i.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,s;for(e in t)s=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&s&&s.length&&(i=k(s.get()),this._removeClass(s,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(n){function t(t,e){for(var i,s=0;t.length>s;s++)i=a.classesElementLookup[t[s]]||k(),i=n.add?k(k.unique(i.get().concat(n.element.get()))):k(i.not(n.element).get()),a.classesElementLookup[t[s]]=i,o.push(t[s]),e&&n.classes[t[s]]&&o.push(n.classes[t[s]])}var o=[],a=this;return n=k.extend({element:this.element,classes:this.options.classes||{}},n),this._on(n.element,{remove:"_untrackClassesElement"}),n.keys&&t(n.keys.match(/\S+/g)||[],!0),n.extra&&t(n.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var s=this;k.each(s.classesElementLookup,function(t,e){-1!==k.inArray(i.target,e)&&(s.classesElementLookup[t]=k(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){var n="string"==typeof t||null===t,e={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s="boolean"==typeof s?s:i};return e.element.toggleClass(this._classes(e),s),this},_on:function(n,o,t){var a,r=this;"boolean"!=typeof n&&(t=o,o=n,n=!1),t?(o=a=k(o),this.bindings=this.bindings.add(o)):(t=o,o=this.element,a=this.widget()),k.each(t,function(t,e){function i(){return n||!0!==r.options.disabled&&!k(this).hasClass("ui-state-disabled")?("string"==typeof e?r[e]:e).apply(r,arguments):void 0}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||k.guid++);var t=t.match(/^([\w:-]*)\s*(.*)$/),s=t[1]+r.eventNamespace,t=t[2];t?a.on(s,t,i):o.on(s,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=k(this.bindings.not(t).get()),this.focusable=k(this.focusable.not(t).get()),this.hoverable=k(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(k(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(k(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var s,n,o=this.options[t];if(i=i||{},(e=k.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],n=e.originalEvent)for(s in n)s in e||(e[s]=n[s]);return this.element.trigger(e,i),!(k.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},k.each({show:"fadeIn",hide:"fadeOut"},function(o,a){k.Widget.prototype["_"+o]=function(e,t,i){var s=(t="string"==typeof t?{effect:t}:t)?!0!==t&&"number"!=typeof t&&t.effect||a:o,n=!k.isEmptyObject(t="number"==typeof(t=t||{})?{duration:t}:t);t.complete=i,t.delay&&e.delay(t.delay),n&&k.effects&&k.effects.effect[s]?e[o](t):s!==o&&e[s]?e[s](t.duration,t.easing,i):e.queue(function(t){k(this)[o](),i&&i.call(e[0]),t()})}}),k.widget,x=Math.max,C=Math.abs,n=/left|center|right/,a=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,R=k.fn.position,k.position={scrollbarWidth:function(){var t,e,i;return void 0!==s?s:(i=(e=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>")).children()[0],k("body").append(e),t=i.offsetWidth,e.css("overflow","scroll"),t===(i=i.offsetWidth)&&(i=e[0].clientWidth),e.remove(),s=t-i)},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),e="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:e?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),i=k.isWindow(e[0]),s=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:s,offset:!i&&!s?k(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(u){if(!u||!u.of)return R.apply(this,arguments);u=k.extend({},u);var d,p,f,g,m,t,_=k(u.of),v=k.position.getWithinInfo(u.within),b=k.position.getScrollInfo(v),y=(u.collision||"flip").split(" "),w={},e=9===(e=(t=_)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};return _[0].preventDefault&&(u.at="left top"),p=e.width,f=e.height,m=k.extend({},g=e.offset),k.each(["my","at"],function(){var t,e,i=(u[this]||"").split(" ");(i=1===i.length?n.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=n.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",t=r.exec(i[0]),e=r.exec(i[1]),w[this]=[t?t[0]:0,e?e[0]:0],u[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===u.at[0]?m.left+=p:"center"===u.at[0]&&(m.left+=p/2),"bottom"===u.at[1]?m.top+=f:"center"===u.at[1]&&(m.top+=f/2),d=j(w.at,p,f),m.left+=d[0],m.top+=d[1],this.each(function(){var i,t,a=k(this),r=a.outerWidth(),h=a.outerHeight(),e=D(this,"marginLeft"),s=D(this,"marginTop"),n=r+e+D(this,"marginRight")+b.width,o=h+s+D(this,"marginBottom")+b.height,l=k.extend({},m),c=j(w.my,a.outerWidth(),a.outerHeight());"right"===u.my[0]?l.left-=r:"center"===u.my[0]&&(l.left-=r/2),"bottom"===u.my[1]?l.top-=h:"center"===u.my[1]&&(l.top-=h/2),l.left+=c[0],l.top+=c[1],i={marginLeft:e,marginTop:s},k.each(["left","top"],function(t,e){k.ui.position[y[t]]&&k.ui.position[y[t]][e](l,{targetWidth:p,targetHeight:f,elemWidth:r,elemHeight:h,collisionPosition:i,collisionWidth:n,collisionHeight:o,offset:[d[0]+c[0],d[1]+c[1]],my:u.my,at:u.at,within:v,elem:a})}),u.using&&(t=function(t){var e=g.left-l.left,i=e+p-r,s=g.top-l.top,n=s+f-h,o={target:{element:_,left:g.left,top:g.top,width:p,height:f},element:{element:a,left:l.left,top:l.top,width:r,height:h},horizontal:i<0?"left":0<e?"right":"center",vertical:n<0?"top":0<s?"bottom":"middle"};p<r&&p>C(e+i)&&(o.horizontal="center"),f<h&&f>C(s+n)&&(o.vertical="middle"),o.important=x(C(e),C(i))>x(C(s),C(n))?"horizontal":"vertical",u.using.call(this,t,o)}),a.offset(k.extend(l,{using:t}))})},k.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,s=s.width,o=t.left-e.collisionPosition.marginLeft,a=n-o,r=o+e.collisionWidth-s-n;e.collisionWidth>s?0<a&&r<=0?(i=t.left+a+e.collisionWidth-s-n,t.left+=a-i):t.left=!(0<r&&a<=0)&&r<a?n+s-e.collisionWidth:n:0<a?t.left+=a:0<r?t.left-=r:t.left=x(t.left-o,t.left)},top:function(t,e){var i,s=e.within,s=s.isWindow?s.scrollTop:s.offset.top,n=e.within.height,o=t.top-e.collisionPosition.marginTop,a=s-o,r=o+e.collisionHeight-n-s;e.collisionHeight>n?0<a&&r<=0?(i=t.top+a+e.collisionHeight-n-s,t.top+=a-i):t.top=!(0<r&&a<=0)&&r<a?s+n-e.collisionHeight:s:0<a?t.top+=a:0<r?t.top-=r:t.top=x(t.top-o,t.top)}},flip:{left:function(t,e){var i=e.within,s=i.offset.left+i.scrollLeft,n=i.width,i=i.isWindow?i.scrollLeft:i.offset.left,o=t.left-e.collisionPosition.marginLeft,a=o-i,o=o+e.collisionWidth-n-i,r="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,l=-2*e.offset[0];a<0?((n=t.left+r+h+l+e.collisionWidth-n-s)<0||C(a)>n)&&(t.left+=r+h+l):0<o&&(0<(s=t.left-e.collisionPosition.marginLeft+r+h+l-i)||o>C(s))&&(t.left+=r+h+l)},top:function(t,e){var i=e.within,s=i.offset.top+i.scrollTop,n=i.height,i=i.isWindow?i.scrollTop:i.offset.top,o=t.top-e.collisionPosition.marginTop,a=o-i,o=o+e.collisionHeight-n-i,r="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,l=-2*e.offset[1];a<0?((n=t.top+r+h+l+e.collisionHeight-n-s)<0||C(a)>n)&&(t.top+=r+h+l):0<o&&(0<(s=t.top-e.collisionPosition.marginTop+r+h+l-i)||o>C(s))&&(t.top+=r+h+l)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}},k.ui.position,k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(e){return function(t){return!!k.data(t,e)}}):function(t,e,i){return!!k.data(t,i[3])}}),k.fn.extend({disableSelection:(F="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(F+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),k.ui.focusable=function(t,e){var i,s,n,o=t.nodeName.toLowerCase();return"area"===o?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&0<(i=k("img[usemap='#"+n+"']")).length&&i.is(":visible")):(/^(input|select|textarea|button|object)$/.test(o)?(s=!t.disabled)&&(n=k(t).closest("fieldset")[0])&&(s=!n.disabled):s="a"===o&&t.href||e,s&&k(t).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(k(t)))},k.extend(k.expr[":"],{focusable:function(t){return k.ui.focusable(t,null!=k.attr(t,"tabindex"))}}),k.ui.focusable,k.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):k(this[0].form)},k.ui.formResetMixin={_formResetHandler:function(){var e=k(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");k.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){var t;this.form=this.element.form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var t;this.form.length&&((t=this.form.data("ui-form-reset-instances")).splice(k.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},"1.7"===k.fn.jquery.substring(0,3)&&(k.each(["Width","Height"],function(t,i){function s(t,e,i,s){return k.each(n,function(){e-=parseFloat(k.css(t,"padding"+this))||0,i&&(e-=parseFloat(k.css(t,"border"+this+"Width"))||0),s&&(e-=parseFloat(k.css(t,"margin"+this))||0)}),e}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};k.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){k(this).css(o,s(this,t)+"px")})},k.fn["outer"+i]=function(t,e){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){k(this).css(o,s(this,t,!0,e)+"px")})}}),k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},k.ui.escapeSelector=(E=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(E,"\\$1")}),k.fn.labels=function(){var t,e,i;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),(t=this.attr("id"))&&(i=(i=this.eq(0).parents().last()).add((i.length?i:this).siblings()),t="label[for='"+k.ui.escapeSelector(t)+"']",e=e.add(i.find(t).addBack(t))),this.pushStack(e))},k.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var t=k(this);return(!i||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&t.length?t:k(this[0].ownerDocument||document)},k.extend(k.expr[":"],{tabbable:function(t){var e=k.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&k.ui.focusable(t,i)}}),k.fn.extend({uniqueId:(W=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++W)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&k(this).removeAttr("id")})}}),k.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var u=!1,d=(k(document).on("mouseup",function(){u=!1}),k.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){return!0===k.data(t.target,e.widgetName+".preventClickEvent")?(k.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){var e,i,s;if(!u)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),i=1===(this._mouseDownEvent=t).which,s=!("string"!=typeof(e=this).options.cancel||!t.target.nodeName)&&k(t.target).closest(this.options.cancel).length,i&&!s&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===k.data(t.target,this.widgetName+".preventClickEvent")&&k.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0)),!0},_mouseMove:function(t){if(this._mouseMoved){if(k.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&k.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),k.ui.plugin={add:function(t,e,i){var s,n=k.ui[t].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([e,i[s]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},k.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i=(i=i||e.body).nodeName?i:e.body},k.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&k(t).trigger("blur")},k.widget("ui.draggable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<k(t.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(t),!this.handle)||(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=k(this);return k("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=k.ui.safeActiveElement(this.document[0]);k(t.target).closest(e).length||k.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),k.ui.ddmanager&&(k.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===k(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),k.ui.ddmanager&&!e.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),k.ui.ddmanager&&k.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){e=this._uiHash();if(!1===this._trigger("drag",t,e))return this._mouseUp(new k.Event("mouseup",t)),!1;this.position=e.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,i=!1;return k.ui.ddmanager&&!this.options.dropBehaviour&&(i=k.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||k.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?k(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),k.ui.ddmanager&&k.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),k.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new k.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!k(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=k.isFunction(e.helper),t=i?k(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return t.parents("body").length||t.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),i&&t[0]===this.element[0]&&this._setPositionRelative(),t[0]===this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=k.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t,e;return"relative"!==this.cssPosition?{top:0,left:0}:(t=this.element.position(),e=this._isRootNode(this.scrollParent[0]),{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())})},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e=this.options,i=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[k(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,k(window).scrollLeft()+k(window).width()-this.helperProportions.width-this.margins.left,k(window).scrollTop()+(k(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,k(i).width()-this.helperProportions.width-this.margins.left,(k(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),void((e=(i=k(e.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*t,left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*t}},_generatePosition:function(t,e){var i,s=this.options,n=this._isRootNode(this.scrollParent[0]),o=t.pageX,a=t.pageY;return n&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),{top:(a=e&&(this.containment&&(i=this.relativeContainer?(e=this.relativeContainer.offset(),[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(o=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(a=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(o=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3])&&(a=i[3]+this.offset.click.top),s.grid&&(e=s.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,a=!i||e-this.offset.click.top>=i[1]||e-this.offset.click.top>i[3]?e:e-this.offset.click.top>=i[1]?e-s.grid[1]:e+s.grid[1],t=s.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,o=!i||t-this.offset.click.left>=i[0]||t-this.offset.click.left>i[2]?t:t-this.offset.click.left>=i[0]?t-s.grid[0]:t+s.grid[0]),"y"===s.axis&&(o=this.originalPageX),"x"===s.axis)?this.originalPageY:a)-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),k.ui.plugin.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),k.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),k.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var s=k.extend({},t,{item:i.element});i.sortables=[],k(i.options.connectToSortable).each(function(){var t=k(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,s))})},stop:function(e,t,i){var s=k.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,k.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(i,s,n){k.each(n.sortables,function(){var t=!1,e=this;e.positionAbs=n.positionAbs,e.helperProportions=n.helperProportions,e.offset.click=n.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,k.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,t=this!==e&&this._intersectsWith(this.containerCache)&&k.contains(e.element[0],this.element[0])?!1:t})),t?(e.isOver||(e.isOver=1,n._parent=s.helper.parent(),e.currentItem=s.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return s.helper[0]},i.target=e.currentItem[0],e._mouseCapture(i,!0),e._mouseStart(i,!0,!0),e.offset.click.top=n.offset.click.top,e.offset.click.left=n.offset.click.left,e.offset.parent.left-=n.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=n.offset.parent.top-e.offset.parent.top,n._trigger("toSortable",i),n.dropped=e.element,k.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,e.fromOutside=n),e.currentItem&&(e._mouseDrag(i),s.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",i,e._uiHash(e)),e._mouseStop(i,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),s.helper.appendTo(n._parent),n._refreshOffsets(i),s.position=n._generatePosition(i,!0),n._trigger("fromSortable",i),n.dropped=!1,k.each(n.sortables,function(){this.refreshPositions()}))})}}),k.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var s=k("body"),i=i.options;s.css("cursor")&&(i._cursor=s.css("cursor")),s.css("cursor",i.cursor)},stop:function(t,e,i){i=i.options;i._cursor&&k("body").css("cursor",i._cursor)}}),k.ui.plugin.add("draggable","opacity",{start:function(t,e,i){e=k(e.helper),i=i.options;e.css("opacity")&&(i._opacity=e.css("opacity")),e.css("opacity",i.opacity)},stop:function(t,e,i){i=i.options;i._opacity&&k(e.helper).css("opacity",i._opacity)}}),k.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var s=i.options,n=!1,o=i.scrollParentNotHidden[0],a=i.document[0];o!==a&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<s.scrollSensitivity?o.scrollTop=n=o.scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=n=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<s.scrollSensitivity?o.scrollLeft=n=o.scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=n=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-k(a).scrollTop()<s.scrollSensitivity?n=k(a).scrollTop(k(a).scrollTop()-s.scrollSpeed):k(window).height()-(t.pageY-k(a).scrollTop())<s.scrollSensitivity&&(n=k(a).scrollTop(k(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-k(a).scrollLeft()<s.scrollSensitivity?n=k(a).scrollLeft(k(a).scrollLeft()-s.scrollSpeed):k(window).width()-(t.pageX-k(a).scrollLeft())<s.scrollSensitivity&&(n=k(a).scrollLeft(k(a).scrollLeft()+s.scrollSpeed)))),!1!==n&&k.ui.ddmanager&&!s.dropBehaviour&&k.ui.ddmanager.prepareOffsets(i,t)}}),k.ui.plugin.add("draggable","snap",{start:function(t,e,i){var s=i.options;i.snapElements=[],k(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var t=k(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,i){for(var s,n,o,a,r,h,l,c,u,d=i.options,p=d.snapTolerance,f=e.offset.left,g=f+i.helperProportions.width,m=e.offset.top,_=m+i.helperProportions.height,v=i.snapElements.length-1;0<=v;v--)h=(r=i.snapElements[v].left-i.margins.left)+i.snapElements[v].width,c=(l=i.snapElements[v].top-i.margins.top)+i.snapElements[v].height,g<r-p||h+p<f||_<l-p||c+p<m||!k.contains(i.snapElements[v].item.ownerDocument,i.snapElements[v].item)?(i.snapElements[v].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,k.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=!1):("inner"!==d.snapMode&&(s=p>=Math.abs(l-_),n=p>=Math.abs(c-m),o=p>=Math.abs(r-g),a=p>=Math.abs(h-f),s&&(e.position.top=i._convertPositionTo("relative",{top:l-i.helperProportions.height,left:0}).top),n&&(e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.left=i._convertPositionTo("relative",{top:0,left:r-i.helperProportions.width}).left),a)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:h}).left),u=s||n||o||a,"outer"!==d.snapMode&&(s=p>=Math.abs(l-m),n=p>=Math.abs(c-_),o=p>=Math.abs(r-f),a=p>=Math.abs(h-g),s&&(e.position.top=i._convertPositionTo("relative",{top:l,left:0}).top),n&&(e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(e.position.left=i._convertPositionTo("relative",{top:0,left:r}).left),a)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left),!i.snapElements[v].snapping&&(s||n||o||a||u)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,k.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=s||n||o||a||u)}}),k.ui.plugin.add("draggable","stack",{start:function(t,e,i){var s,i=i.options,i=k.makeArray(k(i.stack)).sort(function(t,e){return(parseInt(k(t).css("zIndex"),10)||0)-(parseInt(k(e).css("zIndex"),10)||0)});i.length&&(s=parseInt(k(i[0]).css("zIndex"),10)||0,k(i).each(function(t){k(this).css("zIndex",s+t)}),this.css("zIndex",s+i.length))}}),k.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){e=k(e.helper),i=i.options;e.css("zIndex")&&(i._zIndex=e.css("zIndex")),e.css("zIndex",i.zIndex)},stop:function(t,e,i){i=i.options;i._zIndex&&k(e.helper).css("zIndex",i._zIndex)}}),k.ui.draggable,k.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=k.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t=t||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){k.ui.ddmanager.droppables[t]=k.ui.ddmanager.droppables[t]||[],k.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=k.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){var i;"accept"===t?this.accept=k.isFunction(e)?e:function(t){return t.is(e)}:"scope"===t&&(i=k.ui.ddmanager.droppables[this.options.scope],this._splice(i),this._addToManager(e)),this._super(t,e)},_activate:function(t){var e=k.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=k.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var i=t||k.ui.ddmanager.current,s=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=k(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&d(i,k.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(s=!0):void 0}),s)||!this.accept.call(this.element[0],i.currentItem||i.element))&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),k.ui.intersect=function(t,e,i,s){if(!e.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,a=n+t.helperProportions.width,r=o+t.helperProportions.height,h=e.offset.left,l=e.offset.top,c=h+e.proportions().width,u=l+e.proportions().height;switch(i){case"fit":return h<=n&&a<=c&&l<=o&&r<=u;case"intersect":return n+t.helperProportions.width/2>h&&c>a-t.helperProportions.width/2&&o+t.helperProportions.height/2>l&&u>r-t.helperProportions.height/2;case"pointer":return q(s.pageY,l,e.proportions().height)&&q(s.pageX,h,e.proportions().width);case"touch":return(l<=o&&o<=u||l<=r&&r<=u||o<l&&u<r)&&(h<=n&&n<=c||h<=a&&a<=c||n<h&&c<a);default:return!1}});function q(t,e,i){return e<=t&&t<e+i}!(k.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,s,n=k.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;n.length>i;i++)if(!(n[i].options.disabled||t&&!n[i].accept.call(n[i].element[0],t.currentItem||t.element))){for(s=0;a.length>s;s++)if(a[s]===n[i].element[0]){n[i].proportions().height=0;continue t}n[i].visible="none"!==n[i].element.css("display"),n[i].visible&&("mousedown"===o&&n[i]._activate.call(n[i],e),n[i].offset=n[i].element.offset(),n[i].proportions({width:n[i].element[0].offsetWidth,height:n[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return k.each((k.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled)&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e))}),i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)})},drag:function(n,o){n.options.refreshPositions&&k.ui.ddmanager.prepareOffsets(n,o),k.each(k.ui.ddmanager.droppables[n.options.scope]||[],function(){var t,e,i,s;this.options.disabled||this.greedyChild||!this.visible||(s=!(s=d(n,this,this.options.tolerance,o))&&this.isover?"isout":s&&!this.isover?"isover":null)&&(this.options.greedy&&(e=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return k(this).droppable("instance").options.scope===e})).length)&&((t=k(i[0]).droppable("instance")).greedyChild="isover"===s),t&&"isover"===s&&(t.isover=!1,t.isout=!0,t._out.call(t,o)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,o),t)&&"isout"===s&&(t.isout=!1,t.isover=!0,t._over.call(t,o))})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)}})!==k.uiBackCompat&&k.widget("ui.droppable",k.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),k.ui.droppable,k.widget("ui.resizable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){var i;return"hidden"!==k(t).css("overflow")&&(i=!1,0<t[e=e&&"left"===e?"scrollLeft":"scrollTop"]||(t[e]=1,i=0<t[e],t[e]=0,i))},_create:function(){var t,e=this.options,i=this;this._addClass("ui-resizable"),k.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(k("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&k(this.element).on("mouseenter",function(){e.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){e.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){k(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(t,e){"handles"===(this._super(t,e),t)&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var t,e,i,s,n,o=this.options,a=this;if(this.handles=o.handles||(k(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=k(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},e=0;i.length>e;e++)s="ui-resizable-"+(t=k.trim(i[e])),n=k("<div>"),this._addClass(n,"ui-resizable-handle "+s),n.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(n);this._renderAxis=function(t){var e,i,s;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=k(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=k(this.handles[e],this.element),s=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,i,s=!1;for(e in this.handles)i=k(this.handles[e])[0],i!==t.target&&!k.contains(i,t.target)||(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var e,i,s=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(e+=k(s.containment).scrollLeft()||0,i+=k(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=k(".ui-resizable-"+this.axis).css("cursor"),k("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e=this.originalMousePosition,i=this.axis,s=t.pageX-e.left||0,e=t.pageY-e.top||0,i=this._change[i];return this._updatePrevProperties(),i&&(i=i.apply(this,[t,s,e]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),k.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,s,n=this.options,o=this;return this._helper&&(i=(e=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:o.sizeDiff.height,e=e?0:o.sizeDiff.width,e={width:o.helper.width()-e,height:o.helper.height()-i},i=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,s=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(k.extend(e,{top:s,left:i})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper)&&!n.animate&&this._proportionallyResize(),k("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n=this.options,n={minWidth:this._isNumber(n.minWidth)?n.minWidth:0,maxWidth:this._isNumber(n.maxWidth)?n.maxWidth:1/0,minHeight:this._isNumber(n.minHeight)?n.minHeight:0,maxHeight:this._isNumber(n.maxHeight)?n.maxHeight:1/0};(this._aspectRatio||t)&&(t=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,s=n.maxWidth/this.aspectRatio,n.minWidth<t&&(n.minWidth=t),n.minHeight<i&&(n.minHeight=i),e<n.maxWidth&&(n.maxWidth=e),s<n.maxHeight)&&(n.maxHeight=s),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),i=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&i&&(t.top=h-e.minHeight),n&&i&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||k("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return k.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return k.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return k.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return k.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){k.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),k.ui.plugin.add("resizable","animate",{stop:function(e){var i=k(this).resizable("instance"),t=i.options,s=i._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),o=n&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,n=n?0:i.sizeDiff.width,n={width:i.size.width-n,height:i.size.height-o},o=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,a=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(k.extend(n,a&&o?{top:a,left:o}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&k(s[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),k.ui.plugin.add("resizable","containment",{start:function(){var i,s,t,e,n=k(this).resizable("instance"),o=n.options,a=n.element,o=o.containment,a=o instanceof k?o.get(0):/parent/.test(o)?a.parent().get(0):o;a&&(n.containerElement=k(a),/document/.test(o)||o===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:k(document),left:0,top:0,width:k(document).width(),height:k(document).height()||document.body.parentNode.scrollHeight}):(i=k(a),s=[],k(["Top","Right","Left","Bottom"]).each(function(t,e){s[t]=n._num(i.css("padding"+e))}),n.containerOffset=i.offset(),n.containerPosition=i.position(),n.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},o=n.containerOffset,e=n.containerSize.height,t=n.containerSize.width,t=n._hasScroll(a,"left")?a.scrollWidth:t,e=n._hasScroll(a)?a.scrollHeight:e,n.parentData={element:a,left:o.left,top:o.top,width:t,height:e}))},resize:function(t){var e=k(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.position,t=e._aspectRatio||t.shiftKey,o={top:0,left:0},a=e.containerElement,r=!0;a[0]!==document&&/static/.test(a.css("position"))&&(o=s),n.left<(e._helper?s.left:0)&&(e.size.width=e.size.width+(e._helper?e.position.left-s.left:e.position.left-o.left),t&&(e.size.height=e.size.width/e.aspectRatio,r=!1),e.position.left=i.helper?s.left:0),n.top<(e._helper?s.top:0)&&(e.size.height=e.size.height+(e._helper?e.position.top-s.top:e.position.top),t&&(e.size.width=e.size.height*e.aspectRatio,r=!1),e.position.top=e._helper?s.top:0),a=e.containerElement.get(0)===e.element.parent().get(0),i=/relative|absolute/.test(e.containerElement.css("position")),a&&i?(e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top):(e.offset.left=e.element.offset().left,e.offset.top=e.element.offset().top),n=Math.abs(e.sizeDiff.width+(e._helper?e.offset.left-o.left:e.offset.left-s.left)),a=Math.abs(e.sizeDiff.height+(e._helper?e.offset.top-o.top:e.offset.top-s.top)),n+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-n,t)&&(e.size.height=e.size.width/e.aspectRatio,r=!1),a+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-a,t)&&(e.size.width=e.size.height*e.aspectRatio,r=!1),r||(e.position.left=e.prevPosition.left,e.position.top=e.prevPosition.top,e.size.width=e.prevSize.width,e.size.height=e.prevSize.height)},stop:function(){var t=k(this).resizable("instance"),e=t.options,i=t.containerOffset,s=t.containerPosition,n=t.containerElement,o=k(t.helper),a=o.offset(),r=o.outerWidth()-t.sizeDiff.width,o=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(n.css("position"))&&k(this).css({left:a.left-s.left-i.left,width:r,height:o}),t._helper&&!e.animate&&/static/.test(n.css("position"))&&k(this).css({left:a.left-s.left-i.left,width:r,height:o})}}),k.ui.plugin.add("resizable","alsoResize",{start:function(){var t=k(this).resizable("instance").options;k(t.alsoResize).each(function(){var t=k(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var e=k(this).resizable("instance"),s=e.options,n=e.originalSize,o=e.originalPosition,a={height:e.size.height-n.height||0,width:e.size.width-n.width||0,top:e.position.top-o.top||0,left:e.position.left-o.left||0};k(s.alsoResize).each(function(){var t=k(this),s=k(this).data("ui-resizable-alsoresize"),n={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];k.each(e,function(t,e){var i=(s[e]||0)+(a[e]||0);i&&0<=i&&(n[e]=i||null)}),t.css(n)})},stop:function(){k(this).removeData("ui-resizable-alsoresize")}}),k.ui.plugin.add("resizable","ghost",{start:function(){var t=k(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==k.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=k(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=k(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),k.ui.plugin.add("resizable","grid",{resize:function(){var t,e=k(this).resizable("instance"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,s=Math.round((s.height-n.height)/l)*l,u=n.width+c,d=n.height+s,p=i.maxWidth&&u>i.maxWidth,f=i.maxHeight&&d>i.maxHeight,g=i.minWidth&&i.minWidth>u,m=i.minHeight&&i.minHeight>d;i.grid=r,g&&(u+=h),m&&(d+=l),p&&(u-=h),f&&(d-=l),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=d):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=d,e.position.top=o.top-s):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=d,e.position.left=o.left-c):((d-l<=0||u-h<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<d-l?(e.size.height=d,e.position.top=o.top-s):(d=l-t.height,e.size.height=d,e.position.top=o.top+n.height-d),0<u-h?(e.size.width=u,e.position.left=o.left-c):(u=h-t.width,e.size.width=u,e.position.left=o.left+n.width-u))}}),k.ui.resizable,k.widget("ui.selectable",k.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=k(i.element[0]).offset(),i.selectees=k(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var t=k(this),e=t.offset(),e={left:e.left-i.elementPos.left,top:e.top-i.elementPos.top};k.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=k("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var s=this,t=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=k(this.element[0]).offset(),this.options.disabled||(this.selectees=k(t.filter,this.element[0]),this._trigger("start",i),k(t.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=k.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(s._removeClass(t.$element,"ui-selected"),t.selected=!1,s._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,s._trigger("unselecting",i,{unselecting:t.element}))}),k(i.target).parents().addBack().each(function(){var t,e=k.data(this,"selectable-item");return e?(t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),s._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?s._trigger("selecting",i,{selecting:e.element}):s._trigger("unselecting",i,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(s){var t,n,o,a,r,h,l;if(this.dragged=!0,!this.options.disabled)return o=(n=this).options,a=this.opos[0],r=this.opos[1],h=s.pageX,l=s.pageY,h<a&&(t=h,h=a,a=t),l<r&&(t=l,l=r,r=t),this.helper.css({left:a,top:r,width:h-a,height:l-r}),this.selectees.each(function(){var t=k.data(this,"selectable-item"),e=!1,i={};t&&t.element!==n.element[0]&&(i.left=t.left+n.elementPos.left,i.right=t.right+n.elementPos.left,i.top=t.top+n.elementPos.top,i.bottom=t.bottom+n.elementPos.top,"touch"===o.tolerance?e=!(h<i.left||i.right<a||l<i.top||i.bottom<r):"fit"===o.tolerance&&(e=a<i.left&&i.right<h&&r<i.top&&i.bottom<l),e?(t.selected&&(n._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(n._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(n._addClass(t.$element,"ui-selecting"),t.selecting=!0,n._trigger("selecting",s,{selecting:t.element}))):(t.selecting&&((s.metaKey||s.ctrlKey)&&t.startselected?(n._removeClass(t.$element,"ui-selecting"),t.selecting=!1,n._addClass(t.$element,"ui-selected"),t.selected=!0):(n._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),n._trigger("unselecting",s,{unselecting:t.element}))),!t.selected||s.metaKey||s.ctrlKey||t.startselected||(n._removeClass(t.$element,"ui-selected"),t.selected=!1,n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",s,{unselecting:t.element}))))}),!1},_mouseStop:function(e){var i=this;return this.dragged=!1,k(".ui-unselecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");i._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),k(".ui-selecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");i._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),k.widget("ui.sortable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),k.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,s=!1,n=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),k(t.target).parents().each(function(){return k.data(this,n.widgetName+"-item")===n?(i=k(this),!1):void 0}),!(i=k.data(t.target,n.widgetName+"-item")===n?k(t.target):i))||(this.options.handle&&!e&&(k(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(s=!0)}),!s)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,e,i){var s,n,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},k.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",o.cursor),this.storedStylesheet=k("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(n)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return k.ui.ddmanager&&(k.ui.ddmanager.current=this),k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,s,n,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a)&&k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(s=(i=this.items[e]).item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==s&&!k.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!k.contains(this.element[0],s))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){var i,s,n,o;if(t)return k.ui.ddmanager&&!this.options.dropBehaviour&&k.ui.ddmanager.drop(this,t),this.options.revert?(s=(i=this).placeholder.offset(),o={},(n=this.options.axis)&&"x"!==n||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,k(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})):this._clear(t,e),!1},cancel:function(){if(this.dragging){this._mouseUp(new k.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),k.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?k(this.domPosition.prev).after(this.currentItem):k(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},k(t).each(function(){var t=(k(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(k(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,l="x"===this.options.axis||r<s+l&&s+l<h,c="y"===this.options.axis||o<e+c&&e+c<a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?l&&c:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),t="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(e&&t)&&(e=this._getDragVerticalDirection(),t=this._getDragHorizontalDirection(),this.floating?"right"===t||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),t=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&t||"left"===s&&!t:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){a.push(this)}var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&t)for(i=h.length-1;0<=i;i--)for(s=(n=k(h[i],this.document[0])).length-1;0<=s;s--)(o=k.data(n[s],this.widgetFullName))&&o!==this&&!o.options.disabled&&r.push([k.isFunction(o.options.items)?o.options.items.call(o.element):k(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([k.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):k(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;0<=i;i--)r[i][0].each(e);return k(a)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=k.grep(this.items,function(t){for(var e=0;i.length>e;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,s,n,o,a,r,h,l=this.items,c=[[k.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):k(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(e=u.length-1;0<=e;e--)for(i=(s=k(u[e],this.document[0])).length-1;0<=i;i--)(n=k.data(s[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&(c.push([k.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):k(n.options.items,n.element),n]),this.containers.push(n));for(e=c.length-1;0<=e;e--)for(o=c[e][1],h=(a=c[e][i=0]).length;i<h;i++)(r=k(a[i])).data(this.widgetName+"-item",o),l.push({item:r,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,s,n;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?k(this.options.toleranceElement,i.item):i.item,t||(i.width=s.outerWidth(),i.height=s.outerHeight()),n=s.offset(),i.left=n.left,i.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)n=this.containers[e].element.offset(),this.containers[e].containerCache.left=n.left,this.containers[e].containerCache.top=n.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var s,n=(i=i||this).options;n.placeholder&&n.placeholder.constructor!==String||(s=n.placeholder,n.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=k("<"+t+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",s||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),k("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),s||e.css("visibility","hidden"),e},update:function(t,e){s&&!n.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width())||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10))}}),i.placeholder=k(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){k("<td>&#160;</td>",i.document[0]).attr("colspan",k(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){for(var e,i,s,n,o,a,r,h,l,c=null,u=null,d=this.containers.length-1;0<=d;d--)if(!k.contains(this.currentItem[0],this.containers[d].element[0]))if(this._intersectsWith(this.containers[d].containerCache)){if(c&&k.contains(this.containers[d].element[0],c.element[0]))continue;c=this.containers[d],u=d}else this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",t,this._uiHash(this)),this.containers[d].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(i=1e4,s=null,n=(h=c.floating||this._isFloating(this.currentItem))?"left":"top",o=h?"width":"height",l=h?"pageX":"pageY",e=this.items.length-1;0<=e;e--)k.contains(this.containers[u].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(a=this.items[e].item.offset()[n],r=!1,t[l]-a>this.items[e][o]/2&&(r=!0),i>Math.abs(t[l]-a))&&(i=Math.abs(t[l]-a),s=this.items[e],this.direction=r?"up":"down");(s||this.options.dropOnEmpty)&&(this.currentContainer===this.containers[u]?this.currentContainer.containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1):(s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[u].element,!0),this._trigger("change",t,this._uiHash()),this.containers[u]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1))}},_createHelper:function(t){var e=this.options,t=k.isFunction(e.helper)?k(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return t.parents("body").length||k("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),t[0].style.width&&!e.forceHelperSize||t.width(this.currentItem.width()),t[0].style.height&&!e.forceHelperSize||t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=k.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t;return"relative"===this.cssPosition?{top:(t=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=k(i.containment)[0],i=k(i.containment).offset(),e="hidden"!==k(t).css("overflow"),this.containment=[i.left+(parseInt(k(t).css("borderLeftWidth"),10)||0)+(parseInt(k(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(k(t).css("borderTopWidth"),10)||0)+(parseInt(k(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(k(t).css("borderLeftWidth"),10)||0)-(parseInt(k(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(k(t).css("borderTopWidth"),10)||0)-(parseInt(k(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*t,left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*t}},_generatePosition:function(t){var e=this.options,i=t.pageX,s=t.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3])&&(s=this.containment[3]+this.offset.click.top),e.grid)&&(t=this.originalPageY+Math.round((s-this.originalPageY)/e.grid[1])*e.grid[1],s=!this.containment||t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-e.grid[1]:t+e.grid[1],t=this.originalPageX+Math.round((i-this.originalPageX)/e.grid[0])*e.grid[0],i=!this.containment||t-this.offset.click.left>=this.containment[0]&&t-this.offset.click.left<=this.containment[2]?t:t-this.offset.click.left>=this.containment[0]?t-e.grid[0]:t+e.grid[0]),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(e,i,s){return function(t){s._trigger(e,t,i._uiHash(i))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this===this.currentContainer||e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))),s=this.containers.length-1;0<=s;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===k.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||k([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),k.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=k(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():k()}},_createIcons:function(){var t,e=this.options.icons;e&&(t=k("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+e.header),t.prependTo(this.headers),t=this.active.children(".ui-accordion-header-icon"),this._removeClass(t,e.header)._addClass(t,null,e.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),void("icons"===t&&(this._destroyIcons(),e)&&this._createIcons()))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=k.ui.keyCode,i=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:n=this.headers[(s+1)%i];break;case e.LEFT:case e.UP:n=this.headers[(s-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:n=this.headers[0];break;case e.END:n=this.headers[i-1]}n&&(k(t.target).attr("tabIndex",-1),k(n).attr("tabIndex",0),k(n).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===k.ui.keyCode.UP&&t.ctrlKey&&k(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=k()):!1===t.active?this._activate(0):this.active.length&&!k.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=k()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,s=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=k(this),e=t.uniqueId().attr("id"),i=t.next(),s=i.uniqueId().attr("id");t.attr("aria-controls",s),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=s.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=k(this).outerHeight(!0)}),this.headers.next().each(function(){k(this).height(Math.max(0,i-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){var t=k(this).is(":visible");t||k(this).show(),i=Math.max(i,k(this).css("height","").height()),t||k(this).hide()}).height(i))},_activate:function(t){t=this._findActive(t)[0];t!==this.active[0]&&(t=t||this.active[0],this._eventHandler({target:t,currentTarget:t,preventDefault:k.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):k()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&k.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,i=this.active,s=k(t.currentTarget),n=s[0]===i[0],o=n&&e.collapsible,a=o?k():s.next(),r=i.next(),r={oldHeader:i,oldPanel:r,newHeader:o?k():s,newPanel:a};t.preventDefault(),n&&!e.collapsible||!1===this._trigger("beforeActivate",t,r)||(e.active=!o&&this.headers.index(s),this.active=n?k():s,this._toggle(r),this._removeClass(i,"ui-accordion-header-active","ui-state-active"),e.icons&&(a=i.children(".ui-accordion-header-icon"),this._removeClass(a,null,e.icons.activeHeader)._addClass(a,null,e.icons.header)),n)||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),e.icons&&(t=s.children(".ui-accordion-header-icon"),this._removeClass(t,null,e.icons.header)._addClass(t,null,e.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active"))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(k(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){function s(){o._toggleComplete(e)}var n,o=this,a=0,r=t.css("box-sizing"),h=t.length&&(!i.length||t.index()<i.index()),l=this.options.animate||{},h=h&&l.down||l,c=(c="string"==typeof h?h:c)||h.easing||l.easing,u=(u="number"==typeof h?h:u)||h.duration||l.duration;return i.length?t.length?(n=t.show().outerHeight(),i.animate(this.hideProps,{duration:u,easing:c,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:u,easing:c,complete:s,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===r&&(a+=e.now):"content"!==o.options.heightStyle&&(e.now=Math.round(n-i.outerHeight()-a),a=0)}})):i.animate(this.hideProps,u,c,s):t.animate(this.showProps,u,c,s)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),k.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=k(t.target),i=k(k.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active)&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer))},"mouseenter .ui-menu-item":function(t){var e,i;this.previousFilter||(e=k(t.target).closest(".ui-menu-item"),i=k(t.currentTarget),e[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i)))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){k.contains(this.element[0],k.ui.safeActiveElement(this.document[0]))||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=k(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,i,s,n=!0;switch(t.keyCode){case k.ui.keyCode.PAGE_UP:this.previousPage(t);break;case k.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case k.ui.keyCode.HOME:this._move("first","first",t);break;case k.ui.keyCode.END:this._move("last","last",t);break;case k.ui.keyCode.UP:this.previous(t);break;case k.ui.keyCode.DOWN:this.next(t);break;case k.ui.keyCode.LEFT:this.collapse(t);break;case k.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case k.ui.keyCode.ENTER:case k.ui.keyCode.SPACE:this._activate(t);break;case k.ui.keyCode.ESCAPE:this.collapse(t);break;default:e=this.previousFilter||"",s=n=!1,i=96<=t.keyCode&&t.keyCode<=105?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===e?s=!0:i=e+i,e=this._filterMenuItems(i),(e=s&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}n&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,s=this,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),t=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=k(this),e=t.prev(),i=k("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+n),e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(t,"ui-menu","ui-widget ui-widget-content ui-front"),(t=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=k(this);s._isDivider(t)&&s._addClass(t,"ui-menu-divider","ui-widget-content")}),e=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(e,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!k.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){var i;"icons"===t&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,s;this._hasScroll()&&(e=parseFloat(k.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(k.css(this.activeMenu[0],"paddingTop"))||0,e=t.offset().top-this.activeMenu.offset().top-e-i,i=this.activeMenu.scrollTop(),s=this.activeMenu.height(),t=t.outerHeight(),e<0?this.activeMenu.scrollTop(i+e):s<e+t&&this.activeMenu.scrollTop(i+e-s+t))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=k.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:k(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!k(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;(s=this.active?"first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0):s)&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(t){var e,i,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=k(this)).offset().top-i-s<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var e,i,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=k(this)).offset().top-i+s}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||k(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),e=RegExp("^"+t,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return e.test(k.trim(k(this).children(".ui-menu-item-wrapper").text()))})}}),k.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,s,n,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,t="input"===t;this.isMultiLine=e||!t&&this._isContentEditable(this.element),this.valueMethod=this.element[e||t?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))s=n=i=!0;else{s=n=i=!1;var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:s=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)i=!1,this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault();else if(!s){var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=k("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==k.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent)&&/^mouse/.test(t.originalEvent.type)?(this.menu.blur(),void this.document.one("mousemove",function(){k(t.target).trigger(t.originalEvent)})):(i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),void((e=e.item.attr("aria-label")||i.value)&&k.trim(e).length&&(this.liveRegion.children().hide(),k("<div>").text(e).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==k.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=k("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||k.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t=(t=(t=t&&(t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)))&&t[0]?t:this.element.closest(".ui-front, dialog")).length?t:this.document[0].body},_initSource:function(){var i,s,n=this;k.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(k.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(t,e){n.xhr&&n.xhr.abort(),n.xhr=k.ajax({url:s,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(s){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;t&&(e||i)||(this.selectedItem=null,this.search(null,s))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return k.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:k.map(t,function(t){return"string"==typeof t?{label:t,value:t}:k.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(k.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var s=this;k.each(t,function(t,e){s._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return k("<li>").append(k("<div>").text(e.label)).appendTo(t)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){var e;return!!t.length&&("inherit"===(e=t.prop("contentEditable"))?this._isContentEditable(t.parent()):"true"===e)}}),k.extend(k.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=RegExp(k.ui.autocomplete.escapeRegex(e),"i");return k.grep(t,function(t){return i.test(t.label||t.value||t)})}}),k.widget("ui.autocomplete",k.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),k("<div>").text(e).appendTo(this.liveRegion))}}),k.ui.autocomplete;var K,p,f,g,U,V,$,X,G,Q,J,Z,tt,m,_,v,et,it,b,y,w,I,T,P,st=/ui-corner-([a-z]){2,6}/g,M=(k.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,a=[];k.each(this.options.items,function(s,t){var e,n;return t?"controlgroupLabel"===s?((e=o.element.find(t)).each(function(){var t=k(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(k.fn[s]&&(n=o["_"+s+"Options"]?o["_"+s+"Options"]("middle"):{classes:{}},o.element.find(t).each(function(){var t=k(this),e=t[s]("instance"),i=k.widget.extend({},n);"button"===s&&t.parent(".ui-spinner").length||((e=e||t[s]()[s]("instance"))&&(i.classes=o._resolveClassesValues(i.classes,e)),t[s](i),i=t[s]("widget"),k.data(i[0],"ui-controlgroup-data",e||t[s]("instance")),a.push(i[0]))}))):void 0}),this.childWidgets=k(k.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=k(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){t=this._buildSimpleOptions(t,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,s){var n={};return k.each(i,function(t){var e=s.options.classes[t]||"",e=k.trim(e.replace(st,""));n[t]=(e+" "+i[t]).replace(/\s+/g," ")}),n},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var n,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),n=this.childWidgets,(n=this.options.onlyVisible?n.filter(":visible"):n).length&&(k.each(["first","last"],function(t,e){var i,s=n[e]().data("ui-controlgroup-data");s&&o["_"+s.widgetName+"Options"]?((i=o["_"+s.widgetName+"Options"](1===n.length?"only":e)).classes=o._resolveClassesValues(i.classes,s),s.element[s.widgetName](i)):o._updateCornerClass(n[e](),e)}),this._callChildMethod("refresh"))}}),k.widget("ui.checkboxradio",[k.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e=this,i=this._super()||{};return this._readType(),t=this.element.labels(),this.label=k(t[t.length-1]),this.label.length||k.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){e.originalLabel+=3===this.nodeType?k(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon)&&this._addClass(this.icon,null,"ui-state-hover"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||k.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+k.ui.escapeSelector(t)+"']";return t?(this.form.length?k(this.form[0].elements).filter(e):k(e).filter(function(){return 0===k(this).form().length})).not(this.element):k([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=k(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=k("<span>"),this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),(t=this.iconSpace?t.not(this.iconSpace[0]):t).remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),k.ui.checkboxradio,k.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===k.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var t="iconPosition"!==t,i=t?this.options.iconPosition:e,s="top"===i||"bottom"===i;this.icon?t&&this._removeClass(this.icon,null,this.options.icon):(this.icon=k("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),t&&this._addClass(this.icon,null,e),this._attachIcon(i),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=(void 0===t.showLabel?this.options:t).showLabel,i=(void 0===t.icon?this.options:t).icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace)&&this.iconSpace.remove()),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e)&&this.element.blur()},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==k.uiBackCompat&&(k.widget("ui.button",k.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),k.fn.button=(K=k.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?K.apply(this,arguments):(k.ui.checkboxradio||k.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),k.fn.buttonset=function(){return k.ui.controlgroup||k.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),k.ui.button,k.extend(k.ui,{datepicker:{version:"1.12.1"}}),k.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return h(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var i,s=t.nodeName.toLowerCase(),n="div"===s||"span"===s;t.id||(this.uuid+=1,t.id="dp"+this.uuid),(i=this._newInst(k(t),n)).settings=k.extend({},e||{}),"input"===s?this._connectDatepicker(t,i):n&&this._inlineDatepicker(t,i)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?i(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var i=k(t);e.append=k([]),e.trigger=k([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),k.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,s=this._get(e,"appendText"),n=this._get(e,"isRTL");e.append&&e.append.remove(),s&&(e.append=k("<span class='"+this._appendClass+"'>"+s+"</span>"),t[n?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(s=this._get(e,"showOn"))&&"both"!==s||t.on("focus",this._showDatepicker),"button"!==s&&"both"!==s||(s=this._get(e,"buttonText"),i=this._get(e,"buttonImage"),e.trigger=k(this._get(e,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:i,alt:s,title:s}):k("<button type='button'></button>").addClass(this._triggerClass).html(i?k("<img/>").attr({src:i,alt:s,title:s}):s)),t[n?"before":"after"](e.trigger),e.trigger.on("click",function(){return k.datepicker._datepickerShowing&&k.datepicker._lastInput===t[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==t[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){var e,i,s,n,o,a;this._get(t,"autoSize")&&!t.inline&&(o=new Date(2009,11,20),(a=this._get(t,"dateFormat")).match(/[DM]/)&&(o.setMonth((e=function(t){for(n=s=i=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s})(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length))},_inlineDatepicker:function(t,e){var i=k(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv),k.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var o,a=this._dialogInst;return a||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),k("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},k.data(this._dialogInput[0],"datepicker",a)),h(a.settings,s||{}),e=e&&e.constructor===Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,s=document.documentElement.clientHeight,e=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+e,s/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),k.blockUI&&k.blockUI(this.dpDiv),k.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(t){var e,i=k(t),s=k.data(t,"datepicker");i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),k.removeData(t,"datepicker"),"input"===e?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||i.removeClass(this.markerClassName).empty(),p===s)&&(p=null)},_enableDatepicker:function(e){var t,i=k(e),s=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((s=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,i=k(e),s=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((s=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(t)for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return k.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s,n,o,a,r=this._getInst(t);return 2===arguments.length&&"string"==typeof e?"defaults"===e?k.extend({},k.datepicker._defaults):r?"all"===e?k.extend({},r.settings):this._get(r,e):null:(s=e||{},"string"==typeof e&&((s={})[e]=i),void(r&&(this._curInst===r&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(r,"min"),a=this._getMinMaxDate(r,"max"),h(r.settings,s),null!==o&&void 0!==s.dateFormat&&void 0===s.minDate&&(r.settings.minDate=this._formatDate(r,o)),null!==a&&void 0!==s.dateFormat&&void 0===s.maxDate&&(r.settings.maxDate=this._formatDate(r,a)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(k(t),r),this._autoSize(r),this._setDate(r,n),this._updateAlternate(r),this._updateDatepicker(r))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){t=this._getInst(t);t&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){t=this._getInst(t);t&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){t=this._getInst(t);return t&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(t){var e,i,s=k.datepicker._getInst(t.target),n=!0,o=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,k.datepicker._datepickerShowing)switch(t.keyCode){case 9:k.datepicker._hideDatepicker(),n=!1;break;case 13:return(i=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",s.dpDiv))[0]&&k.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),(i=k.datepicker._get(s,"onSelect"))?(e=k.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[e,s])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(s,"stepBigMonths"):-k.datepicker._get(s,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(s,"stepBigMonths"):+k.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&k.datepicker._clearDate(t.target),n=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&k.datepicker._gotoToday(t.target),n=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?1:-1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(s,"stepBigMonths"):-k.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,-7,"D"),n=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?-1:1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(s,"stepBigMonths"):+k.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,7,"D"),n=t.ctrlKey||t.metaKey;break;default:n=!1}else 36===t.keyCode&&t.ctrlKey?k.datepicker._showDatepicker(this):n=!1;n&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i=k.datepicker._getInst(t.target);return k.datepicker._get(i,"constrainInput")?(i=k.datepicker._possibleChars(k.datepicker._get(i,"dateFormat")),e=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||e<" "||!i||-1<i.indexOf(e)):void 0},_doKeyUp:function(t){t=k.datepicker._getInst(t.target);if(t.input.val()!==t.lastVal)try{k.datepicker.parseDate(k.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,k.datepicker._getFormatConfig(t))&&(k.datepicker._setDateFromField(t),k.datepicker._updateAlternate(t),k.datepicker._updateDatepicker(t))}catch(t){}return!0},_showDatepicker:function(t){var e,i,s,n;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=k("input",t.parentNode)[0]),k.datepicker._isDisabledDatepicker(t)||k.datepicker._lastInput===t||(n=k.datepicker._getInst(t),k.datepicker._curInst&&k.datepicker._curInst!==n&&(k.datepicker._curInst.dpDiv.stop(!0,!0),n)&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0]),!1!==(i=(i=k.datepicker._get(n,"beforeShow"))?i.apply(t,[t,n]):{})&&(h(n.settings,i),n.lastVal=null,k.datepicker._lastInput=t,k.datepicker._setDateFromField(n),k.datepicker._inDialog&&(t.value=""),k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(t),k.datepicker._pos[1]+=t.offsetHeight),e=!1,k(t).parents().each(function(){return!(e|="fixed"===k(this).css("position"))}),i={left:k.datepicker._pos[0],top:k.datepicker._pos[1]},k.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),k.datepicker._updateDatepicker(n),i=k.datepicker._checkOffset(n,i,e),n.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":e?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),n.inline||(i=k.datepicker._get(n,"showAnim"),s=k.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(e=parseInt(t.css("zIndex"),10),!isNaN(e))&&0!==e)return e;t=t.parent()}return 0}(k(t))+1),k.datepicker._datepickerShowing=!0,k.effects&&k.effects.effect[i]?n.dpDiv.show(i,k.datepicker._get(n,"showOptions"),s):n.dpDiv[i||"show"](i?s:null),k.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),k.datepicker._curInst=n)))},_updateDatepicker:function(t){this.maxRows=4,(p=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,i=this._getNumberOfMonths(t),s=i[1],n=t.dpDiv.find("."+this._dayOverClass+" a");0<n.length&&o.apply(n.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<s&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===k.datepicker._curInst&&k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:k(document).scrollLeft()),h=document.documentElement.clientHeight+(i?0:k(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-o:0,e.left-=i&&e.left===t.input.offset().left?k(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+a?k(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&s<r?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>h&&n<h?Math.abs(n+a):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||k.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=k(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,i,s=this._curInst;!s||t&&s!==k.data(t,"datepicker")||this._datepickerShowing&&(t=this._get(s,"showAnim"),i=this._get(s,"duration"),e=function(){k.datepicker._tidyDialog(s)},k.effects&&(k.effects.effect[t]||k.effects[t])?s.dpDiv.hide(t,k.datepicker._get(s,"showOptions"),i,e):s.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,e),t||e(),this._datepickerShowing=!1,(i=this._get(s,"onClose"))&&i.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI)&&(k.unblockUI(),k("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){var e;k.datepicker._curInst&&(t=k(t.target),e=k.datepicker._getInst(t[0]),!(t[0].id===k.datepicker._mainDivId||0!==t.parents("#"+k.datepicker._mainDivId).length||t.hasClass(k.datepicker.markerClassName)||t.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)||t.hasClass(k.datepicker.markerClassName)&&k.datepicker._curInst!==e)&&k.datepicker._hideDatepicker()},_adjustDate:function(t,e,i){var t=k(t),s=this._getInst(t[0]);this._isDisabledDatepicker(t[0])||(this._adjustInstDate(s,e+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(t){var e,t=k(t),i=this._getInst(t[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(t,e,i){var t=k(t),s=this._getInst(t[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(t)},_selectDay:function(t,e,i,s){var n=k(t);k(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=k("a",s).html(),n.selectedMonth=n.currentMonth=e,n.selectedYear=n.currentYear=i,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){t=k(t);this._selectDate(t,"")},_selectDate:function(t,e){var i,t=k(t),t=this._getInst(t[0]);e=null!=e?e:this._formatDate(t),t.input&&t.input.val(e),this._updateAlternate(t),(i=this._get(t,"onSelect"))?i.apply(t.input?t.input[0]:null,[e,t]):t.input&&t.input.trigger("change"),t.inline?this._updateDatepicker(t):(this._hideDatepicker(),this._lastInput=t.input[0],"object"!=typeof t.input[0]&&t.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,i,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),e=this._getDate(t),i=this.formatDate(i,e,this._getFormatConfig(t)),k(s).val(i))},noWeekends:function(t){t=t.getDay();return[0<t&&t<6,""]},iso8601Week:function(t){var e,t=new Date(t.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},parseDate:function(e,n,t){if(null==e||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?""+n:n+""))return null;function i(t){var e=b(t),e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,t=RegExp("^\\d{"+("y"===t?e:1)+","+e+"}");if(e=n.substring(h).match(t))return h+=e[0].length,parseInt(e[0],10);throw"Missing number at position "+h}function s(t,e,i){var s=-1,t=k.map(b(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(k.each(t,function(t,e){var i=e[1];return n.substr(h,i.length).toLowerCase()===i.toLowerCase()?(s=e[0],h+=i.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+h}function o(){if(n.charAt(h)!==e.charAt(y))throw"Unexpected literal at position "+h;h++}for(var a,r,h=0,l=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,u=(t?t.dayNames:null)||this._defaults.dayNames,d=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,p=(t?t.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,_=-1,v=!1,b=function(t){t=e.length>y+1&&e.charAt(y+1)===t;return t&&y++,t},y=0;e.length>y;y++)if(v)"'"!==e.charAt(y)||b("'")?o():v=!1;else switch(e.charAt(y)){case"d":m=i("d");break;case"D":s("D",c,u);break;case"o":_=i("o");break;case"m":g=i("m");break;case"M":g=s("M",d,p);break;case"y":f=i("y");break;case"@":f=(r=new Date(i("@"))).getFullYear(),g=r.getMonth()+1,m=r.getDate();break;case"!":f=(r=new Date((i("!")-this._ticksTo1970)/1e4)).getFullYear(),g=r.getMonth()+1,m=r.getDate();break;case"'":b("'")?o():v=!0;break;default:o()}if(n.length>h&&(t=n.substr(h),!/^\s+/.test(t)))throw"Extra/unparsed characters found in date: "+t;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=l?0:-100)),-1<_)for(g=1,m=_;!(m<=(a=this._getDaysInMonth(f,g-1)));)g++,m-=a;if((r=this._daylightSavingAdjust(new Date(f,g-1,m))).getFullYear()!==f||r.getMonth()+1!==g||r.getDate()!==m)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";function s(t,e,i){var s=""+e;if(c(t))for(;i>s.length;)s="0"+s;return s}function n(t,e,i,s){return(c(t)?s:i)[e]}var o,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,l=(i?i.monthNames:null)||this._defaults.monthNames,c=function(t){t=e.length>o+1&&e.charAt(o+1)===t;return t&&o++,t},u="",d=!1;if(t)for(o=0;e.length>o;o++)if(d)"'"!==e.charAt(o)||c("'")?u+=e.charAt(o):d=!1;else switch(e.charAt(o)){case"d":u+=s("d",t.getDate(),2);break;case"D":u+=n("D",t.getDay(),a,r);break;case"o":u+=s("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=s("m",t.getMonth()+1,2);break;case"M":u+=n("M",t.getMonth(),h,l);break;case"y":u+=c("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":c("'")?u+="'":d=!0;break;default:u+=e.charAt(o)}return u},_possibleChars:function(e){function t(t){return(t=e.length>n+1&&e.charAt(n+1)===t)&&n++,t}for(var i="",s=!1,n=0;e.length>n;n++)if(s)"'"!==e.charAt(n)||t("'")?i+=e.charAt(n):s=!1;else switch(e.charAt(n)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":t("'")?i+="'":s=!0;break;default:i+=e.charAt(n)}return i},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(t){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(r,t,e){var i,s=null==t||""===t?e:"string"==typeof t?function(t){try{return k.datepicker.parseDate(k.datepicker._get(r,"dateFormat"),t,k.datepicker._getFormatConfig(r))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?k.datepicker._getDate(r):null)||new Date,i=e.getFullYear(),s=e.getMonth(),n=e.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(t);a;){switch(a[2]||"d"){case"d":case"D":n+=parseInt(a[1],10);break;case"w":case"W":n+=7*parseInt(a[1],10);break;case"m":case"M":s+=parseInt(a[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(i,s))}a=o.exec(t)}return new Date(i,s,n)}(t):"number"==typeof t?isNaN(t)?e:(s=t,(i=new Date).setDate(i.getDate()+s),i):new Date(t.getTime());return(s=s&&"Invalid Date"==""+s?e:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){k.datepicker._adjustDate(i,-e,"M")},next:function(){k.datepicker._adjustDate(i,+e,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(i)},selectDay:function(){return k.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return k.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return k.datepicker._selectMonthYear(i,this,"Y"),!1}};k(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,W,E,F,R,a,r,L,h,l,c,u,d,p,f,g,m,_,B,v,b,y,w,Y,j,k,x,C,D=new Date,q=this._daylightSavingAdjust(new Date(D.getFullYear(),D.getMonth(),D.getDate())),I=this._get(t,"isRTL"),D=this._get(t,"showButtonPanel"),T=this._get(t,"hideIfNoPrevNext"),P=this._get(t,"navigationAsDateFormat"),M=this._getNumberOfMonths(t),S=this._get(t,"showCurrentAtPos"),H=this._get(t,"stepMonths"),K=1!==M[0]||1!==M[1],U=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),z=this._getMinMaxDate(t,"min"),O=this._getMinMaxDate(t,"max"),A=t.drawMonth-S,N=t.drawYear;if(A<0&&(A+=12,N--),O)for(e=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth()-M[0]*M[1]+1,O.getDate())),e=z&&e<z?z:e;this._daylightSavingAdjust(new Date(N,A,1))>e;)--A<0&&(A=11,N--);for(t.drawMonth=A,t.drawYear=N,S=this._get(t,"prevText"),S=P?this.formatDate(S,this._daylightSavingAdjust(new Date(N,A-H,1)),this._getFormatConfig(t)):S,i=this._canAdjustMonth(t,-1,N,A)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"e":"w")+"'>"+S+"</span></a>":T?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"e":"w")+"'>"+S+"</span></a>",S=this._get(t,"nextText"),S=P?this.formatDate(S,this._daylightSavingAdjust(new Date(N,A+H,1)),this._getFormatConfig(t)):S,s=this._canAdjustMonth(t,1,N,A)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"w":"e")+"'>"+S+"</span></a>":T?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"w":"e")+"'>"+S+"</span></a>",H=this._get(t,"currentText"),T=this._get(t,"gotoCurrent")&&t.currentDay?U:q,H=P?this.formatDate(H,T,this._getFormatConfig(t)):H,S=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",P=D?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(I?S:"")+(this._isInRange(t,T)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+H+"</button>":"")+(I?"":S)+"</div>":"",n=parseInt(this._get(t,"firstDay"),10),n=isNaN(n)?0:n,o=this._get(t,"showWeek"),W=this._get(t,"dayNames"),E=this._get(t,"dayNamesMin"),F=this._get(t,"monthNames"),R=this._get(t,"monthNamesShort"),a=this._get(t,"beforeShowDay"),r=this._get(t,"showOtherMonths"),L=this._get(t,"selectOtherMonths"),h=this._getDefaultDate(t),l="",u=0;M[0]>u;u++){for(d="",this.maxRows=4,p=0;M[1]>p;p++){if(f=this._daylightSavingAdjust(new Date(N,A,t.selectedDay)),g=" ui-corner-all",m="",K){if(m+="<div class='ui-datepicker-group",1<M[1])switch(p){case 0:m+=" ui-datepicker-group-first",g=" ui-corner-"+(I?"right":"left");break;case M[1]-1:m+=" ui-datepicker-group-last",g=" ui-corner-"+(I?"left":"right");break;default:m+=" ui-datepicker-group-middle",g=""}m+="'>"}for(m+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+g+"'>"+(/all|left/.test(g)&&0===u?I?s:i:"")+(/all|right/.test(g)&&0===u?I?i:s:"")+this._generateMonthYearHeader(t,A,N,z,O,0<u||0<p,F,R)+"</div><table class='ui-datepicker-calendar'><thead><tr>",_=o?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",c=0;c<7;c++)_+="<th scope='col'"+(5<=(c+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+W[B=(c+n)%7]+"'>"+E[B]+"</span></th>";for(m+=_+"</tr></thead><tbody>",b=this._getDaysInMonth(N,A),N===t.selectedYear&&A===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,b)),v=(this._getFirstDayOfMonth(N,A)-n+7)%7,b=Math.ceil((v+b)/7),y=K&&this.maxRows>b?this.maxRows:b,this.maxRows=y,w=this._daylightSavingAdjust(new Date(N,A,1-v)),Y=0;Y<y;Y++){for(m+="<tr>",j=o?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(w)+"</td>":"",c=0;c<7;c++)k=a?a.apply(t.input?t.input[0]:null,[w]):[!0,""],C=(x=w.getMonth()!==A)&&!L||!k[0]||z&&w<z||O&&O<w,j+="<td class='"+(5<=(c+n+6)%7?" ui-datepicker-week-end":"")+(x?" ui-datepicker-other-month":"")+(w.getTime()===f.getTime()&&A===t.selectedMonth&&t._keyEvent||h.getTime()===w.getTime()&&h.getTime()===f.getTime()?" "+this._dayOverClass:"")+(C?" "+this._unselectableClass+" ui-state-disabled":"")+(x&&!r?"":" "+k[1]+(w.getTime()===U.getTime()?" "+this._currentClass:"")+(w.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(x&&!r||!k[2]?"":" title='"+k[2].replace(/'/g,"&#39;")+"'")+(C?"":" data-handler='selectDay' data-event='click' data-month='"+w.getMonth()+"' data-year='"+w.getFullYear()+"'")+">"+(x&&!r?"&#xa0;":C?"<span class='ui-state-default'>"+w.getDate()+"</span>":"<a class='ui-state-default"+(w.getTime()===q.getTime()?" ui-state-highlight":"")+(w.getTime()===U.getTime()?" ui-state-active":"")+(x?" ui-priority-secondary":"")+"' href='#'>"+w.getDate()+"</a>")+"</td>",w.setDate(w.getDate()+1),w=this._daylightSavingAdjust(w);m+=j+"</tr>"}11<++A&&(A=0,N++),d+=m+="</tbody></table>"+(K?"</div>"+(0<M[0]&&p===M[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}l+=d}return l+=P,t._keyEvent=!1,l},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(_||(v+=b+(!o&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!m)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(a=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=(d=function(t){t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(t)?u:t})(a[0]),f=Math.max(p,d(a[1]||"")),p=s?Math.max(p,s.getFullYear()):p,f=n?Math.min(f,n.getFullYear()):f,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),_&&(v+=(!o&&g&&m?"":"&#xa0;")+b),v+"</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),e=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,e)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),t=this._getMinMaxDate(t,"max"),i=i&&e<i?i:e;return t&&t<i?t:i},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){t=this._get(t,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),i=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(t,i)},_isInRange:function(t,e){var i,s=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=null,a=null,t=this._get(t,"yearRange");return t&&(t=t.split(":"),i=(new Date).getFullYear(),o=parseInt(t[0],10),a=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(o+=i),t[1].match(/[+\-].*/))&&(a+=i),(!s||e.getTime()>=s.getTime())&&(!n||e.getTime()<=n.getTime())&&(!o||e.getFullYear()>=o)&&(!a||a>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),k.fn.datepicker=function(t){if(!this.length)return this;k.datepicker.initialized||(k(document).on("mousedown",k.datepicker._checkExternalClick),k.datepicker.initialized=!0),0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&("isDisabled"===t||"getDate"===t||"widget"===t)||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this].concat(e)):k.datepicker._attachDatepicker(this,t)})},k.datepicker=new t,k.datepicker.initialized=!1,k.datepicker.uuid=(new Date).getTime(),k.datepicker.version="1.12.1",k.datepicker,k.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=k(this).css(t).offset().top;e<0&&k(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&k.fn.draggable&&this._makeDraggable(),this.options.resizable&&k.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?k(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:k.noop,enable:k.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||k.ui.safeBlur(k.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+k(this).css("z-index")}).get(),s=Math.max.apply(null,s);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=k(k.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=(t=(t=(t=(t=t||this.element.find("[autofocus]")).length?t:this.element.find(":tabbable")).length?t:this.uiDialogButtonPane.find(":tabbable")).length?t:this.uiDialogTitlebarClose.filter(":tabbable")).length?t:this.uiDialog).eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=k.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||k.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=k("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){var e,i,s;this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===k.ui.keyCode.ESCAPE?(t.preventDefault(),this.close(t)):t.keyCode!==k.ui.keyCode.TAB||t.isDefaultPrevented()||(e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),s=e.filter(":last"),t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){s.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault()))},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=k("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){k(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=k("<button type='button'></button>").button({label:k("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=k("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=k("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=k("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var s=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),k.isEmptyObject(t)||k.isArray(t)&&!t.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(k.each(t,function(t,e){var i;e=k.isFunction(e)?{click:e,text:t}:e,e=k.extend({type:"button"},e),i=e.click,t={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,k("<button></button>",e).button(t).appendTo(s.uiButtonSet).on("click",function(){i.apply(s.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function n(t){return{position:t.position,offset:t.offset}}var o=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){o._addClass(k(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,n(e))},drag:function(t,e){o._trigger("drag",t,n(e))},stop:function(t,e){var i=e.offset.left-o.document.scrollLeft(),s=e.offset.top-o.document.scrollTop();a.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=s?"+":"")+s,of:o.window},o._removeClass(k(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,n(e))}})},_makeResizable:function(){function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var o=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:t,start:function(t,e){o._addClass(k(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",t,n(e))},resize:function(t,e){o._trigger("resize",t,n(e))},stop:function(t,e){var i=o.uiDialog.offset(),s=i.left-o.document.scrollLeft(),i=i.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=s?"+":"")+s+" top"+(0<=i?"+":"")+i,of:o.window},o._removeClass(k(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",t,n(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=k(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=k.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||this.document.data("ui-dialog-instances",t=[]),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};k.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(t,e){var i,s=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:k("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!e&&s.draggable("destroy"),!i)&&e&&this._makeDraggable(),"position"===t&&this._position(),"resizable"===t&&((i=s.is(":data(ui-resizable)"))&&!e&&s.resizable("destroy"),i&&"string"==typeof e&&s.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t)&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=k(this);return k("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!k(t.target).closest(".ui-dialog").length||!!k(t.target).closest(".ui-datepicker").length},_createOverlay:function(){var e;this.options.modal&&(e=!0,this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=k("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var t;this.options.modal&&this.overlay&&((t=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==k.uiBackCompat&&k.widget("ui.dialog",k.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),k.ui.dialog,k.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=k("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=k("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),k.widget("ui.selectmenu",[k.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=k()},_drawButton:function(){var t,e=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=k("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=k("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=k("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=k("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){e=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&e.index!==i.focusIndex&&(i._trigger("focus",t,{item:e}),i.isOpen||i._select(e,t)),i.focusIndex=e.index,i.button.attr("aria-activedescendant",i.menuItems.eq(e.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(k.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=k("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(s,t){var n=this,o="";k.each(t,function(t,e){var i;e.optgroup!==o&&(i=k("<li>",{text:e.optgroup}),n._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(s),o=e.optgroup),n._renderItemData(s,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var i=k("<li>"),s=k("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(s,e.label),i.append(s).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](s).eq(-1):i[t+"All"](s).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){!this.isOpen||k(t.target).closest(".ui-selectmenu-menu, #"+k.ui.escapeSelector(this.ids.button)).length||this.close(t)}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case k.ui.keyCode.TAB:case k.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case k.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case k.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case k.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case k.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case k.ui.keyCode.LEFT:this._move("prev",t);break;case k.ui.keyCode.RIGHT:this._move("next",t);break;case k.ui.keyCode.HOME:case k.ui.keyCode.PAGE_UP:this._move("first",t);break;case k.ui.keyCode.END:case k.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){t=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(t,e){var i;"icons"===t&&(i=this.button.find("span.ui-icon"),this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t=(t=(t=t&&(t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)))&&t[0]?t:this.element.closest(".ui-front, dialog")).length?t:this.document[0].body},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return!1===t?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var i=this,s=[];t.each(function(t,e){s.push(i._parseOption(k(e),t))}),this.items=s},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),k.widget("ui.slider",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e=this.options,i=this.element.find(".ui-slider-handle"),s=[],n=e.values&&e.values.length||1;for(i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;t<n;t++)s.push("<span tabindex='0'></span>");this.handles=i.add(k(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){k(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:k.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=k("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,o,e,a,r=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-r.values(t));(e<s||s===e&&(t===r._lastChangedValue||r.values(t)===h.min))&&(s=e,n=k(this),o=t)}),!1!==this._start(t,o))&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(n,null,"ui-state-active"),n.trigger("focus"),e=n.offset(),a=!k(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-e.left-n.width()/2,top:t.pageY-e.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0)},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=t/e;return(t=1<t?1:t)<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),t=this._valueMin()+t*e,this._trimAlignValue(t)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n=this.value(),o=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),n=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),o[e]=i),i!==n&&!1!==this._trigger("slide",t,this._uiHash(e,i,o))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,s,n;if(1<arguments.length)this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!k.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,s=t,n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(s[n]),this._change(null,n);this._refreshValue()}},_setOption:function(t,e){var i,s=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),k.isArray(this.options.values)&&(s=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=s-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){var e,i;return this._valueMin()>=t?this._valueMin():t>=this._valueMax()?this._valueMax():(e=0<this.options.step?this.options.step:1,i=t-(t=(t-this._valueMin())%e),2*Math.abs(t)>=e&&(i+=0<t?e:-e),parseFloat(i.toFixed(5)))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return t=null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var t=""+t,e=t.indexOf(".");return-1===e?0:t.length-e-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,t,s,n,o=this.options.range,a=this.options,r=this,h=!this._animateOff&&a.animate,l={};this._hasMultipleValues()?this.handles.each(function(t){i=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,l["horizontal"===r.orientation?"left":"bottom"]=i+"%",k(this).stop(1,1)[h?"animate":"css"](l,a.animate),!0===r.options.range&&("horizontal"===r.orientation?(0===t&&r.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===t&&r.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===t&&r.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===t&&r.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(t=this.value(),s=this._valueMin(),n=this._valueMax(),i=n!==s?(t-s)/(n-s)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](l,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(t){var e,i,s,n=k(t.target).data("ui-slider-handle-index");switch(t.keyCode){case k.ui.keyCode.HOME:case k.ui.keyCode.END:case k.ui.keyCode.PAGE_UP:case k.ui.keyCode.PAGE_DOWN:case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(k(t.target),null,"ui-state-active"),!1===this._start(t,n)))return}switch(s=this.options.step,e=i=this._hasMultipleValues()?this.values(n):this.value(),t.keyCode){case k.ui.keyCode.HOME:i=this._valueMin();break;case k.ui.keyCode.END:i=this._valueMax();break;case k.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+s);break;case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-s)}this._slide(t,n,i)},keyup:function(t){var e=k(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(k(t.target),null,"ui-state-active"))}}}),k.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var s=this._super(),n=this.element;return k.each(["min","max","step"],function(t,e){var i=n.attr(e);null!=i&&i.length&&(s[e]=i)}),s},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){function e(){this.element[0]!==k.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i=this.element[0]===k.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();t.preventDefault(),e.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,e.call(this)}),!1!==this._start(t)&&this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return k(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,i=k.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,e.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?k.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return t=null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var t=""+t,e=t.indexOf(".");return-1===e?0:t.length-e-1},_adjustValue:function(t){var e=this.options,i=null!==e.min?e.min:0,s=t-i;return t=i+Math.round(s/e.step)*e.step,t=parseFloat(t.toFixed(this._precision())),null!==e.max&&t>e.max?e.max:null!==e.min&&e.min>t?e.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i))):("max"!==t&&"min"!==t&&"step"!==t||"string"!=typeof e||(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:e(function(t){this._super(t)}),_parse:function(t){return""===(t="string"==typeof t&&""!==t?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t:t)||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),!1!==k.uiBackCompat&&k.widget("ui.spinner",k.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),k.ui.spinner,k.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(f=/#.*$/,function(t){var e=t.href.replace(f,""),i=location.href.replace(f,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return 1<t.hash.length&&e===i}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),k.isArray(t.disabled)&&(t.disabled=k.unique(t.disabled.concat(k.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(t.active):k(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,t=this.options.collapsible,s=location.hash.substring(1);return!1!==(i=null===i&&(s&&this.tabs.each(function(t,e){return k(e).attr("aria-controls")===s?(i=t,!1):void 0}),null===(i=null===i?this.tabs.index(this.tabs.filter(".ui-tabs-active")):i)||-1===i)?!!this.tabs.length&&0:i)&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!t&&0),i=!t&&!1===i&&this.anchors.length?0:i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):k()}},_tabKeydown:function(t){var e=k(k.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(e),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:i++;break;case k.ui.keyCode.UP:case k.ui.keyCode.LEFT:s=!1,i--;break;case k.ui.keyCode.END:i=this.anchors.length-1;break;case k.ui.keyCode.HOME:i=0;break;case k.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case k.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,s),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===k.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===k.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===k.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){for(var i=this.tabs.length-1;-1!==k.inArray(t=(t=i<t?0:t)<0?i:t,this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=k.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!k.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=k()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=k()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var h=this,t=this.tabs,e=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){k(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){k(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return k("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=k(),this.anchors.each(function(t,e){var i,s,n,o=k(e).uniqueId().attr("id"),a=k(e).closest("li"),r=a.attr("aria-controls");h._isLocal(e)?(n=(i=e.hash).substring(1),s=h.element.find(h._sanitizeSelector(i))):(n=a.attr("aria-controls")||k({}).uniqueId()[0].id,(s=h.element.find(i="#"+n)).length||(s=h._createPanel(n)).insertAfter(h.panels[t-1]||h.tablist),s.attr("aria-live","polite")),s.length&&(h.panels=h.panels.add(s)),r&&a.data("ui-tabs-aria-controls",r),a.attr({"aria-controls":n,"aria-labelledby":o}),s.attr("aria-labelledby",o)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return k("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,i;for(k.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;e=this.tabs[i];i++)e=k(e),!0===t||-1!==k.inArray(i,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&k.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,e=this.element.parent();"fill"===t?(i=e.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=k(this).outerHeight(!0)}),this.panels.each(function(){k(this).height(Math.max(0,i-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,k(this).height("").height())}).height(i))},_eventHandler:function(t){var e=this.options,i=this.active,s=k(t.currentTarget).closest("li"),n=s[0]===i[0],o=n&&e.collapsible,a=o?k():this._getPanelForTab(s),r=i.length?this._getPanelForTab(i):k(),i={oldTab:i,oldPanel:r,newTab:o?k():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||n&&!e.collapsible||!1===this._trigger("beforeActivate",t,i)||(e.active=!o&&this.tabs.index(s),this.active=n?k():s,this.xhr&&this.xhr.abort(),r.length||a.length||k.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,i))},_toggle:function(t,e){function i(){n.running=!1,n._trigger("activate",t,e)}function s(){n._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&n.options.show?n._show(o,n.options.show,i):(o.show(),i())}var n=this,o=e.newPanel,a=e.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a.hide(),s()),a.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&a.length?e.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===k(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var t=this._findActive(t);t[0]!==this.active[0]&&(t=(t=t.length?t:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:t,currentTarget:t,preventDefault:k.noop}))},_findActive:function(t){return!1===t?k():this.tabs.eq(t)},_getIndex:function(t){return t="string"==typeof t?this.anchors.index(this.anchors.filter("[href$='"+k.ui.escapeSelector(t)+"']")):t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){k.data(this,"ui-tabs-destroy")?k(this).remove():k(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=k(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var t=this.options.disabled;!1!==t&&(t=void 0!==i&&(i=this._getIndex(i),k.isArray(t)?k.map(t,function(t){return t!==i?t:null}):k.map(this.tabs,function(t,e){return e!==i?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==k.inArray(t,e))return;e=k.isArray(e)?k.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,s){t=this._getIndex(t);function n(t,e){"abort"===e&&o.panels.stop(!1,!0),o._removeClass(i,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr}var o=this,i=this.tabs.eq(t),t=i.find(".ui-tabs-anchor"),a=this._getPanelForTab(i),r={tab:i,panel:a};this._isLocal(t[0])||(this.xhr=k.ajax(this._ajaxSettings(t,s,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,i){setTimeout(function(){a.html(t),o._trigger("load",s,r),n(i,e)},1)}).fail(function(t,e){setTimeout(function(){n(t,e)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return n._trigger("beforeLoad",i,k.extend({jqXHR:t,ajaxSettings:e},s))}}},_getPanelForTab:function(t){t=k(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+t))}}),!1!==k.uiBackCompat&&k.widget("ui.tabs",k.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),k.ui.tabs,k.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=k(this).attr("title")||"";return k("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",k.trim(i.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),e=k.inArray(e,i);-1!==e&&i.splice(e,1),t.removeData("ui-tooltip-id"),(i=k.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=k("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=k([])},_setOption:function(t,e){var i=this;this._super(t,e),"content"===t&&k.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var s=this;k.each(this.tooltips,function(t,e){var i=k.Event("blur");i.target=i.currentTarget=e.element[0],s.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=k(this);return t.is("[title]")?t.data("ui-tooltip-title",t.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var t=k(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=k([])},open:function(t){var i=this,e=k(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=k(this);e.data("ui-tooltip-open")&&((t=k.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),e.attr("title")&&(e.uniqueId(),i.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,i){var t=this.options.content,s=this,n=i?i.type:null;return"string"==typeof t||t.nodeType||t.jquery?this._open(i,e,t):void((t=t.call(e[0],function(t){s._delay(function(){e.data("ui-tooltip-open")&&(i&&(i.type=n),this._open(i,e,t))})}))&&this._open(i,e,t))},_open:function(t,e,i){function s(t){r.of=t,n.is(":hidden")||n.position(r)}var n,o,a,r=k.extend({},this.options.position);i&&((a=this._find(e))?a.tooltip.find(".ui-tooltip-content").html(i):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),a=this._tooltip(e),n=a.tooltip,this._addDescribedBy(e,n.attr("id")),n.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(a=k("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:s}),s(t)):n.position(k.extend({of:e},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){n.is(":visible")&&(s(r.of),clearInterval(o))},k.fx.interval)),this._trigger("open",t,{tooltip:n})))},_registerCloseHandlers:function(t,e){var i={keyup:function(t){t.keyCode===k.ui.keyCode.ESCAPE&&((t=k.Event(t)).currentTarget=e[0],this.close(t,!0))}};e[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(e).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,e,i)},close:function(t){var e,i=this,s=k(t?t.currentTarget:this.element),n=this._find(s);return n?(e=n.tooltip,void(n.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),n.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){i._removeTooltip(k(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&k.each(this.parents,function(t,e){k(e.element).attr("title",e.title),delete i.parents[t]}),n.closing=!0,this._trigger("close",t,{tooltip:e}),n.hiding)||(n.closing=!1))):void s.removeData("ui-tooltip-open")},_tooltip:function(t){var e=k("<div>").attr("role","tooltip"),i=k("<div>").appendTo(e),s=e.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[s]={element:t,tooltip:e}},_find:function(t){t=t.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){t=t.closest(".ui-front, dialog");return t=t.length?t:this.document[0].body},_destroy:function(){var s=this;k.each(this.tooltips,function(t,e){var i=k.Event("blur"),e=e.element;i.target=i.currentTarget=e[0],s.close(i,!0),k("#"+t).remove(),e.data("ui-tooltip-title")&&(e.attr("title")||e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==k.uiBackCompat&&k.widget("ui.tooltip",k.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),k.ui.tooltip,"ui-effects-"),S="ui-effects-style",H="ui-effects-animated",nt=k;function z(t,e,i,s){return t={effect:t=k.isPlainObject(t)?(e=t).effect:t},k.isFunction(e=null==e?{}:e)&&(s=e,i=null,e={}),"number"!=typeof e&&!k.fx.speeds[e]||(s=i,i=e,e={}),k.isFunction(i)&&(s=i,i=null),e&&k.extend(t,e),i=i||e.duration,t.duration=k.fx.off?0:"number"==typeof i?i:i in k.fx.speeds?k.fx.speeds[i]:k.fx.speeds._default,t.complete=s||e.complete,t}function O(t){return!t||"number"==typeof t||k.fx.speeds[t]||"string"==typeof t&&!k.effects.effect[t]||k.isFunction(t)||"object"==typeof t&&!t.effect}function ot(t,e){var i=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}function at(t){var e,i,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[e=s[i]]&&(n[k.camelCase(e)]=s[e]);else for(e in s)"string"==typeof s[e]&&(n[e]=s[e]);return n}function A(t,e,i){var s=w[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:t<0?0:t>s.max?s.max:t)}function rt(s){var n=b(),o=n._rgba=[];return s=s.toLowerCase(),P(it,function(t,e){var i=e.re.exec(s),i=i&&e.parse(i),e=e.space||"rgba";return i?(i=n[e](i),n[y[e].cache]=i[y[e].cache],o=n._rgba=i._rgba,!1):_}),o.length?("0,0,0,0"===o.join()&&m.extend(o,v.transparent),n):v[s]}function N(t,e,i){return 6*(i=(i+1)%1)<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+6*(e-t)*(2/3-i):t}k.effects={effect:{}},et=/^([\-+])=\s*(\d+\.?\d*)/,it=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],b=(m=nt).Color=function(t,e,i,s){return new m.Color.fn.parse(t,e,i,s)},y={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},w={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},I=b.support={},T=m("<p>")[0],P=m.each,T.style.cssText="background-color:rgba(1,1,1,.5)",I.rgba=-1<T.style.backgroundColor.indexOf("rgba"),P(y,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),(b.fn=m.extend(b.prototype,{parse:function(n,t,e,i){if(n===_)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=m(n).css(t),t=_);var o=this,s=m.type(n),a=this._rgba=[];return t!==_&&(n=[n,t,e,i],s="array"),"string"===s?this.parse(rt(n)||v._default):"array"===s?(P(y.rgba.props,function(t,e){a[e.idx]=A(n[e.idx],e)}),this):"object"===s?(n instanceof b?P(y,function(t,e){n[e.cache]&&(o[e.cache]=n[e.cache].slice())}):P(y,function(t,i){var s=i.cache;P(i.props,function(t,e){if(!o[s]&&i.to){if("alpha"===t||null==n[t])return;o[s]=i.to(o._rgba)}o[s][e.idx]=A(n[t],e,!0)}),o[s]&&m.inArray(null,o[s].slice(0,3))<0&&(o[s][3]=1,i.from)&&(o._rgba=i.from(o[s]))}),this):_},is:function(t){var n=b(t),o=!0,a=this;return P(y,function(t,e){var i,s=n[e.cache];return s&&(i=a[e.cache]||e.to&&e.to(a._rgba)||[],P(e.props,function(t,e){return null!=s[e.idx]?o=s[e.idx]===i[e.idx]:_})),o}),o},_space:function(){var i=[],s=this;return P(y,function(t,e){s[e.cache]&&i.push(t)}),i.pop()},transition:function(t,a){var t=(l=b(t))._space(),e=y[t],i=0===this.alpha()?b("transparent"):this,r=i[e.cache]||e.to(i._rgba),h=r.slice(),l=l[e.cache];return P(e.props,function(t,e){var i=e.idx,s=r[i],n=l[i],o=w[e.type]||{};null!==n&&(null===s?h[i]=n:(o.mod&&(n-s>o.mod/2?s+=o.mod:s-n>o.mod/2&&(s-=o.mod)),h[i]=A((n-s)*a+s,e)))}),this[t](h)},blend:function(t){var e,i,s;return 1===this._rgba[3]?this:(e=this._rgba.slice(),i=e.pop(),s=b(t)._rgba,b(m.map(e,function(t,e){return(1-i)*s[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=m.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=m.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),t=e&&e<3?Math.round(100*t)+"%":t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+m.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=b.fn,y.hsla.to=function(t){var e,i,s,n,o,a,r,h;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/255,i=t[1]/255,s=t[2]/255,t=t[3],r=.5*(h=(n=Math.max(e,i,s))+(o=Math.min(e,i,s))),h=0==(a=n-o)?0:r<=.5?a/h:a/(2-h),[Math.round(o===n?0:e===n?60*(i-s)/a+360:i===n?60*(s-e)/a+120:60*(e-i)/a+240)%360,h,r,null==t?1:t])},y.hsla.from=function(t){var e,i,s;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/360,s=t[1],i=t[2],t=t[3],s=2*i-(i=i<=.5?i*(1+s):i+s-i*s),[Math.round(255*N(s,i,e+1/3)),Math.round(255*N(s,i,e)),Math.round(255*N(s,i,e-1/3)),t])},P(y,function(r,t){var o=t.props,a=t.cache,h=t.to,l=t.from;b.fn[r]=function(t){var e,i,s,n;return h&&!this[a]&&(this[a]=h(this._rgba)),t===_?this[a].slice():(i=m.type(t),s="array"===i||"object"===i?t:arguments,n=this[a].slice(),P(o,function(t,e){t=s["object"===i?t:e.idx];null==t&&(t=n[e.idx]),n[e.idx]=A(t,e)}),l?((e=b(l(n)))[a]=n,e):b(n))},P(o,function(o,a){b.fn[o]||(b.fn[o]=function(t){var e=m.type(t),i="alpha"===o?this._hsla?"hsla":"rgba":r,s=this[i](),n=s[a.idx];return"undefined"===e?n:("function"===e&&(t=t.call(this,n),e=m.type(t)),null==t&&a.empty?this:("string"===e&&(e=et.exec(t))&&(t=n+parseFloat(e[2])*("+"===e[1]?1:-1)),s[a.idx]=t,this[i](s)))})})}),(b.hook=function(t){t=t.split(" ");P(t,function(t,o){m.cssHooks[o]={set:function(t,e){var i,s,n="";if("transparent"!==e&&("string"!==m.type(e)||(i=rt(e)))){if(e=b(i||e),!I.rgba&&1!==e._rgba[3]){for(s="backgroundColor"===o?t.parentNode:t;(""===n||"transparent"===n)&&s&&s.style;)try{n=m.css(s,"backgroundColor"),s=s.parentNode}catch(t){}e=e.blend(n&&"transparent"!==n?n:"_default")}e=e.toRgbaString()}try{t.style[o]=e}catch(t){}}},m.fx.step[o]=function(t){t.colorInit||(t.start=b(t.elem,o),t.end=b(t.end),t.colorInit=!0),m.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),m.cssHooks.borderColor={expand:function(i){var s={};return P(["Top","Right","Bottom","Left"],function(t,e){s["border"+e+"Color"]=i}),s}},v=m.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},Z=["add","remove","toggle"],tt={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){k.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(nt.style(t.elem,e,t.end),t.setAttr=!0)}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.effects.animateClass=function(n,t,e,i){var o=k.speed(t,e,i);return this.queue(function(){var i=k(this),t=i.attr("class")||"",e=(e=o.children?i.find("*").addBack():i).map(function(){return{el:k(this),start:at(this)}}),s=function(){k.each(Z,function(t,e){n[e]&&i[e+"Class"](n[e])})};s(),e=e.map(function(){return this.end=at(this.el[0]),this.diff=function(t,e){var i,s,n={};for(i in e)s=e[i],t[i]===s||tt[i]||!k.fx.step[i]&&isNaN(parseFloat(s))||(n[i]=s);return n}(this.start,this.end),this}),i.attr("class",t),e=e.map(function(){var t=this,e=k.Deferred(),i=k.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),k.when.apply(k,e.get()).done(function(){s(),k.each(arguments,function(){var e=this.el;k.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(i[0])})})},k.fn.extend({addClass:(J=k.fn.addClass,function(t,e,i,s){return e?k.effects.animateClass.call(this,{add:t},e,i,s):J.apply(this,arguments)}),removeClass:(Q=k.fn.removeClass,function(t,e,i,s){return 1<arguments.length?k.effects.animateClass.call(this,{remove:t},e,i,s):Q.apply(this,arguments)}),toggleClass:(G=k.fn.toggleClass,function(t,e,i,s,n){return"boolean"==typeof e||void 0===e?i?k.effects.animateClass.call(this,e?{add:t}:{remove:t},i,s,n):G.apply(this,arguments):k.effects.animateClass.call(this,{toggle:t},e,i,s)}),switchClass:function(t,e,i,s,n){return k.effects.animateClass.call(this,{add:e,remove:t},i,s,n)}}),k.expr&&k.expr.filters&&k.expr.filters.animated&&(k.expr.filters.animated=(X=k.expr.filters.animated,function(t){return!!k(t).data(H)||X(t)})),!1!==k.uiBackCompat&&k.extend(k.effects,{save:function(t,e){for(var i=0,s=e.length;i<s;i++)null!==e[i]&&t.data(M+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;s<n;s++)null!==e[s]&&(i=t.data(M+e[s]),t.css(e[s],i))},setMode:function(t,e){return e="toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var s={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},n=document.activeElement;try{n.id}catch(t){n=document.body}return i.wrap(t),i[0]!==n&&!k.contains(i[0],n)||k(n).trigger("focus"),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(k.extend(s,{position:i.css("position"),zIndex:i.css("z-index")}),k.each(["top","left","bottom","right"],function(t,e){s[e]=i.css(e),isNaN(parseInt(s[e],10))&&(s[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(s).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]===e||k.contains(t[0],e))&&k(e).trigger("focus"),t}}),k.extend(k.effects,{version:"1.12.1",define:function(t,e,i){return i||(i=e,e="effect"),k.effects.effect[t]=i,k.effects.effect[t].mode=e,i},scaledDimensions:function(t,e,i){var s;return 0===e?{height:0,width:0,outerHeight:0,outerWidth:0}:(s="horizontal"!==i?(e||100)/100:1,i="vertical"!==i?(e||100)/100:1,{height:t.height()*i,width:t.width()*s,outerHeight:t.outerHeight()*i,outerWidth:t.outerWidth()*s})},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();1<e&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(S,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(S)||"",t.removeData(S)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),e=(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(t){var e,i=t.css("position"),s=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",e=k("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(M+"placeholder",e)),t.css({position:i,left:s.left,top:s.top}),e},removePlaceholder:function(t){var e=M+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(t){k.effects.restoreStyle(t),k.effects.removePlaceholder(t)},setTransition:function(s,t,n,o){return o=o||{},k.each(t,function(t,e){var i=s.cssUnit(e);0<i[0]&&(o[e]=i[0]*n+i[1])}),o}}),k.fn.extend({effect:function(){function t(t){function e(){k.isFunction(r)&&r.call(i[0]),k.isFunction(t)&&t()}var i=k(this);s.mode=l.shift(),!1===k.uiBackCompat||o?"none"===s.mode?(i[h](),e()):n.call(i[0],s,function(){i.removeData(H),k.effects.cleanUp(i),"hide"===s.mode&&i.hide(),e()}):(i.is(":hidden")?"hide"===h:"show"===h)?(i[h](),e()):n.call(i[0],s,e)}function e(t){var e=k(this),i=k.effects.mode(e,h)||o;e.data(H,!0),l.push(i),o&&("show"===i||i===o&&"hide"===i)&&e.show(),o&&"none"===i||k.effects.saveStyle(e),k.isFunction(t)&&t()}var s=z.apply(this,arguments),n=k.effects.effect[s.effect],o=n.mode,i=s.queue,a=i||"fx",r=s.complete,h=s.mode,l=[];return k.fx.off||!n?h?this[h](s.duration,r):this.each(function(){r&&r.call(this)}):!1===i?this.each(e).each(t):this.queue(a,e).queue(a,t)},show:($=k.fn.show,function(t){var e;return O(t)?$.apply(this,arguments):((e=z.apply(this,arguments)).mode="show",this.effect.call(this,e))}),hide:(V=k.fn.hide,function(t){var e;return O(t)?V.apply(this,arguments):((e=z.apply(this,arguments)).mode="hide",this.effect.call(this,e))}),toggle:(U=k.fn.toggle,function(t){var e;return O(t)||"boolean"==typeof t?U.apply(this,arguments):((e=z.apply(this,arguments)).mode="toggle",this.effect.call(this,e))}),cssUnit:function(t){var i=this.css(t),s=[];return k.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):ot(this.css("clip"),this)},transfer:function(t,e){var i=k(this),s=k(t.to),n="fixed"===s.css("position"),o=k("body"),a=n?o.scrollTop():0,o=n?o.scrollLeft():0,r=s.offset(),r={top:r.top-a,left:r.left-o,height:s.innerHeight(),width:s.innerWidth()},s=i.offset(),h=k("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:s.top-a,left:s.left-o,height:i.innerHeight(),width:i.innerWidth(),position:n?"fixed":"absolute"}).animate(r,t.duration,t.easing,function(){h.remove(),k.isFunction(e)&&e()})}}),k.fx.step.clip=function(t){t.clipInit||(t.start=k(t.elem).cssClip(),"string"==typeof t.end&&(t.end=ot(t.end,t.elem)),t.clipInit=!0),k(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},g={},k.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){g[t]=function(t){return Math.pow(t,e+2)}}),k.extend(g,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),k.each(g,function(t,e){k.easing["easeIn"+t]=e,k.easing["easeOut"+t]=function(t){return 1-e(1-t)},k.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});k.effects;k.effects.define("blind","hide",function(t,e){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},s=k(this),n=t.direction||"up",o=s.cssClip(),a={clip:k.extend({},o)},r=k.effects.createPlaceholder(s);a.clip[i[n][0]]=a.clip[i[n][1]],"show"===t.mode&&(s.cssClip(a.clip),r&&r.css(k.effects.clipToBox(a)),a.clip=o),r&&r.animate(k.effects.clipToBox(a),t.duration,t.easing),s.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("bounce",function(t,e){var i,s,n=k(this),o=t.mode,a="hide"===o,o="show"===o,r=t.direction||"up",h=t.distance,l=t.times||5,c=2*l+(o||a?1:0),u=t.duration/c,d=t.easing,p="up"===r||"down"===r?"top":"left",f="up"===r||"left"===r,g=0,t=n.queue().length;for(k.effects.createPlaceholder(n),r=n.css(p),h=h||n["top"==p?"outerHeight":"outerWidth"]()/3,o&&((s={opacity:1})[p]=r,n.css("opacity",0).css(p,f?2*-h:2*h).animate(s,u,d)),a&&(h/=Math.pow(2,l-1)),(s={})[p]=r;g<l;g++)(i={})[p]=(f?"-=":"+=")+h,n.animate(i,u,d).animate(s,u,d),h=a?2*h:h/2;a&&((i={opacity:0})[p]=(f?"-=":"+=")+h,n.animate(i,u,d)),n.queue(e),k.effects.unshift(n,t,1+c)}),k.effects.define("clip","hide",function(t,e){var i={},s=k(this),n=t.direction||"vertical",o="both"===n,a=o||"horizontal"===n,o=o||"vertical"===n,n=s.cssClip();i.clip={top:o?(n.bottom-n.top)/2:n.top,right:a?(n.right-n.left)/2:n.right,bottom:o?(n.bottom-n.top)/2:n.bottom,left:a?(n.right-n.left)/2:n.left},k.effects.createPlaceholder(s),"show"===t.mode&&(s.cssClip(i.clip),i.clip=n),s.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("drop","hide",function(t,e){var i,s=k(this),n="show"===t.mode,o=t.direction||"left",a="up"===o||"down"===o?"top":"left",o="up"===o||"left"===o?"-=":"+=",r="+="==o?"-=":"+=",h={opacity:0};k.effects.createPlaceholder(s),i=t.distance||s["top"==a?"outerHeight":"outerWidth"](!0)/2,h[a]=o+i,n&&(s.css(h),h[a]=r+i,h.opacity=1),s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("explode","hide",function(t,e){function i(){g.push(this),g.length===h*l&&(c.css({visibility:"visible"}),k(g).remove(),e())}for(var s,n,o,a,r,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,l=h,c=k(this),u="show"===t.mode,d=c.show().css("visibility","hidden").offset(),p=Math.ceil(c.outerWidth()/l),f=Math.ceil(c.outerHeight()/h),g=[],m=0;m<h;m++)for(o=d.top+m*f,r=m-(h-1)/2,s=0;s<l;s++)n=d.left+s*p,a=s-(l-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*p,top:-m*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:f,left:n+(u?a*p:0),top:o+(u?r*f:0),opacity:u?0:1}).animate({left:n+(u?0:a*p),top:o+(u?0:r*f),opacity:u?1:0},t.duration||500,t.easing,i)}),k.effects.define("fade","toggle",function(t,e){var i="show"===t.mode;k(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("fold","hide",function(e,t){var i=k(this),s=e.mode,n="show"===s,s="hide"===s,o=e.size||15,a=/([0-9]+)%/.exec(o),r=!!e.horizFirst?["right","bottom"]:["bottom","right"],h=e.duration/2,l=k.effects.createPlaceholder(i),c=i.cssClip(),u={clip:k.extend({},c)},d={clip:k.extend({},c)},p=[c[r[0]],c[r[1]]],f=i.queue().length;a&&(o=parseInt(a[1],10)/100*p[s?0:1]),u.clip[r[0]]=o,d.clip[r[0]]=o,d.clip[r[1]]=0,n&&(i.cssClip(d.clip),l&&l.css(k.effects.clipToBox(d)),d.clip=c),i.queue(function(t){l&&l.animate(k.effects.clipToBox(u),h,e.easing).animate(k.effects.clipToBox(d),h,e.easing),t()}).animate(u,h,e.easing).animate(d,h,e.easing).queue(t),k.effects.unshift(i,f,4)}),k.effects.define("highlight","show",function(t,e){var i=k(this),s={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(s.opacity=0),k.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("size",function(s,e){var n,i=k(this),t=["fontSize"],o=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],a=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=s.mode,h="effect"!==r,l=s.scale||"both",c=s.origin||["middle","center"],u=i.css("position"),d=i.position(),p=k.effects.scaledDimensions(i),f=s.from||p,g=s.to||k.effects.scaledDimensions(i,0);k.effects.createPlaceholder(i),"show"===r&&(r=f,f=g,g=r),n={from:{y:f.height/p.height,x:f.width/p.width},to:{y:g.height/p.height,x:g.width/p.width}},"box"!==l&&"both"!==l||(n.from.y!==n.to.y&&(f=k.effects.setTransition(i,o,n.from.y,f),g=k.effects.setTransition(i,o,n.to.y,g)),n.from.x===n.to.x)||(f=k.effects.setTransition(i,a,n.from.x,f),g=k.effects.setTransition(i,a,n.to.x,g)),"content"!==l&&"both"!==l||n.from.y===n.to.y||(f=k.effects.setTransition(i,t,n.from.y,f),g=k.effects.setTransition(i,t,n.to.y,g)),c&&(r=k.effects.getBaseline(c,p),f.top=(p.outerHeight-f.outerHeight)*r.y+d.top,f.left=(p.outerWidth-f.outerWidth)*r.x+d.left,g.top=(p.outerHeight-g.outerHeight)*r.y+d.top,g.left=(p.outerWidth-g.outerWidth)*r.x+d.left),i.css(f),"content"!==l&&"both"!==l||(o=o.concat(["marginTop","marginBottom"]).concat(t),a=a.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var t=k(this),e=k.effects.scaledDimensions(t),i={height:e.height*n.from.y,width:e.width*n.from.x,outerHeight:e.outerHeight*n.from.y,outerWidth:e.outerWidth*n.from.x},e={height:e.height*n.to.y,width:e.width*n.to.x,outerHeight:e.height*n.to.y,outerWidth:e.width*n.to.x};n.from.y!==n.to.y&&(i=k.effects.setTransition(t,o,n.from.y,i),e=k.effects.setTransition(t,o,n.to.y,e)),n.from.x!==n.to.x&&(i=k.effects.setTransition(t,a,n.from.x,i),e=k.effects.setTransition(t,a,n.to.x,e)),h&&k.effects.saveStyle(t),t.css(i),t.animate(e,s.duration,s.easing,function(){h&&k.effects.restoreStyle(t)})})),i.animate(g,{queue:!1,duration:s.duration,easing:s.easing,complete:function(){var t=i.offset();0===g.opacity&&i.css("opacity",f.opacity),h||(i.css("position","static"===u?"relative":u).offset(t),k.effects.saveStyle(i)),e()}})}),k.effects.define("scale",function(t,e){var i=k(this),s=t.mode,s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==s?0:100),i=k.extend(!0,{from:k.effects.scaledDimensions(i),to:k.effects.scaledDimensions(i,s,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(i.from.opacity=1,i.to.opacity=0),k.effects.effect.size.call(this,i,e)}),k.effects.define("puff","hide",function(t,e){t=k.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});k.effects.effect.scale.call(this,t,e)}),k.effects.define("pulsate","show",function(t,e){var i=k(this),s=t.mode,n="show"===s,o=2*(t.times||5)+(n||"hide"===s?1:0),a=t.duration/o,r=0,h=1,s=i.queue().length;for(!n&&i.is(":visible")||(i.css("opacity",0).show(),r=1);h<o;h++)i.animate({opacity:r},a,t.easing),r=1-r;i.animate({opacity:r},a,t.easing),i.queue(e),k.effects.unshift(i,s,1+o)}),k.effects.define("shake",function(t,e){var i=1,s=k(this),n=t.direction||"left",o=t.distance||20,a=t.times||3,r=2*a+1,h=Math.round(t.duration/r),l="up"===n||"down"===n?"top":"left",n="up"===n||"left"===n,c={},u={},d={},p=s.queue().length;for(k.effects.createPlaceholder(s),c[l]=(n?"-=":"+=")+o,u[l]=(n?"+=":"-=")+2*o,d[l]=(n?"-=":"+=")+2*o,s.animate(c,h,t.easing);i<a;i++)s.animate(u,h,t.easing).animate(d,h,t.easing);s.animate(u,h,t.easing).animate(c,h/2,t.easing).queue(e),k.effects.unshift(s,p,1+r)}),k.effects.define("slide","show",function(t,e){var i,s,n=k(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=t.mode,r=t.direction||"left",h="up"===r||"down"===r?"top":"left",l="up"===r||"left"===r,c=t.distance||n["top"==h?"outerHeight":"outerWidth"](!0),u={};k.effects.createPlaceholder(n),i=n.cssClip(),s=n.position()[h],u[h]=(l?-1:1)*c+s,u.clip=n.cssClip(),u.clip[o[r][1]]=u.clip[o[r][0]],"show"===a&&(n.cssClip(u.clip),n.css(h,u[h]),u.clip=i,u[h]=s),n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),!1!==k.uiBackCompat&&k.effects.define("transfer",function(t,e){k(this).transfer(t,e)})});
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){var o,e,u,n;function c(o,t){var e,u;1<o.originalEvent.touches.length||(o.preventDefault(),e=o.originalEvent.changedTouches[0],(u=document.createEvent("MouseEvents")).initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(u))}t.support.touch="ontouchend"in document,t.support.touch&&(o=t.ui.mouse.prototype,e=o._mouseInit,u=o._mouseDestroy,o._touchStart=function(o){!n&&this._mouseCapture(o.originalEvent.changedTouches[0])&&(n=!0,this._touchMoved=!1,c(o,"mouseover"),c(o,"mousemove"),c(o,"mousedown"))},o._touchMove=function(o){n&&(this._touchMoved=!0,c(o,"mousemove"))},o._touchEnd=function(o){n&&(c(o,"mouseup"),c(o,"mouseout"),this._touchMoved||c(o,"click"),n=!1)},o._mouseInit=function(){var o=this;o.element.bind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),e.call(o)},o._mouseDestroy=function(){var o=this;o.element.unbind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),u.call(o)})}(jQuery);
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
!function(){function Wo(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function li(n,t,r,e){for(var u=-1,o=null==n?0:n.length;++u<o;){var i=n[u];t(e,i,r(i),n)}return e}function Bo(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function si(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Lo(n,t){for(var r=-1,e=null==n?0:n.length,u=0,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[u++]=i)}return o}function Uo(n,t){return!(null==n||!n.length)&&-1<No(n,t,0)}function Co(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function Do(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function Mo(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function To(n,t,r,e){var u=-1,o=null==n?0:n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function hi(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function $o(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function pi(n,e,t){var u;return t(n,function(n,t,r){if(e(n,t,r))return u=t,!1}),u}function Fo(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function No(n,t,r){if(t==t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=Fo(n,gi,r);return n}function _i(n,t,r,e){--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function gi(n){return n!=n}function di(n,t){var r=null==n?0:n.length;return r?Zo(n,t)/r:ri}function Po(t){return function(n){return null==n?ni:n[t]}}function n(t){return function(n){return null==t?ni:t[n]}}function vi(n,e,u,o,t){return t(n,function(n,t,r){u=o?(o=!1,n):e(u,n,t,r)}),u}function Zo(n,t){for(var r,e=-1,u=n.length;++e<u;){var o=t(n[e]);o!==ni&&(r=r===ni?o:r+o)}return r}function qo(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function Vo(t){return function(n){return t(n)}}function Ko(t,n){return Do(n,function(n){return t[n]})}function Go(n,t){return n.has(t)}function yi(n,t){for(var r=-1,e=n.length;++r<e&&-1<No(t,n[r],0););return r}function bi(n,t){for(var r=n.length;r--&&-1<No(t,n[r],0););return r}function xi(n){return"\\"+o[n]}function Ho(n){var r=-1,e=Array(n.size);return n.forEach(function(n,t){e[++r]=[t,n]}),e}function ji(t,r){return function(n){return t(r(n))}}function Jo(n,t){for(var r=-1,e=n.length,u=0,o=[];++r<e;){var i=n[r];i!==t&&"__lodash_placeholder__"!==i||(n[r]="__lodash_placeholder__",o[u++]=r)}return o}function Yo(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Qo(n){if(oi.test(n)){for(var t=u.lastIndex=0;u.test(n);)++t;n=t}else n=f(n);return n}function Xo(n){return oi.test(n)?n.match(u)||[]:n.split("")}var ni,ti=1/0,ri=NaN,wi=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],mi=/\b__p\+='';/g,Ai=/\b(__p\+=)''\+/g,Ei=/(__e\(.*?\)|\b__t\))\+'';/g,ki=/&(?:amp|lt|gt|quot|#39);/g,Si=/[&<>"']/g,Oi=RegExp(ki.source),Ii=RegExp(Si.source),Ri=/<%-([\s\S]+?)%>/g,zi=/<%([\s\S]+?)%>/g,Wi=/<%=([\s\S]+?)%>/g,Bi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Li=/^\w*$/,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ei=/[\\^$.*+?()[\]{}|]/g,Ci=RegExp(ei.source),Di=/^\s+|\s+$/g,Mi=/^\s+/,Ti=/\s+$/,$i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fi=/\{\n\/\* \[wrapped with (.+)\] \*/,Ni=/,? & /,Pi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zi=/\\(\\)?/g,qi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vi=/\w*$/,Ki=/^[-+]0x[0-9a-f]+$/i,Gi=/^0b[01]+$/i,Hi=/^\[object .+?Constructor\]$/,Ji=/^0o[0-7]+$/i,Yi=/^(?:0|[1-9]\d*)$/,Qi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui=/($^)/,Xi=/['\n\r\u2028\u2029\\]/g,t="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",r="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+t,nf=RegExp("[']","g"),tf=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),u=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+t,"g"),rf=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",r].join("|"),"g"),oi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ef=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uf="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),ii={},fi=(ii["[object Float32Array]"]=ii["[object Float64Array]"]=ii["[object Int8Array]"]=ii["[object Int16Array]"]=ii["[object Int32Array]"]=ii["[object Uint8Array]"]=ii["[object Uint8ClampedArray]"]=ii["[object Uint16Array]"]=ii["[object Uint32Array]"]=!0,ii["[object Arguments]"]=ii["[object Array]"]=ii["[object ArrayBuffer]"]=ii["[object Boolean]"]=ii["[object DataView]"]=ii["[object Date]"]=ii["[object Error]"]=ii["[object Function]"]=ii["[object Map]"]=ii["[object Number]"]=ii["[object Object]"]=ii["[object RegExp]"]=ii["[object Set]"]=ii["[object String]"]=ii["[object WeakMap]"]=!1,{}),o=(fi["[object Arguments]"]=fi["[object Array]"]=fi["[object ArrayBuffer]"]=fi["[object DataView]"]=fi["[object Boolean]"]=fi["[object Date]"]=fi["[object Float32Array]"]=fi["[object Float64Array]"]=fi["[object Int8Array]"]=fi["[object Int16Array]"]=fi["[object Int32Array]"]=fi["[object Map]"]=fi["[object Number]"]=fi["[object Object]"]=fi["[object RegExp]"]=fi["[object Set]"]=fi["[object String]"]=fi["[object Symbol]"]=fi["[object Uint8Array]"]=fi["[object Uint8ClampedArray]"]=fi["[object Uint16Array]"]=fi["[object Uint32Array]"]=!0,fi["[object Error]"]=fi["[object Function]"]=fi["[object WeakMap]"]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),of=parseFloat,ff=parseInt,t="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,ci=t||r||Function("return this")(),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,e=r&&"object"==typeof module&&module&&!module.nodeType&&module,cf=e&&e.exports===r,i=cf&&t.process,t=function(){try{var n=e&&e.f&&e.f("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}(),af=t&&t.isArrayBuffer,lf=t&&t.isDate,sf=t&&t.isMap,hf=t&&t.isRegExp,pf=t&&t.isSet,_f=t&&t.isTypedArray,f=Po("length"),gf=n({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),df=n({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),vf=n({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ai=function u(n){function p(n){if(j(n)&&!D(n)&&!(n instanceof g)){if(n instanceof _)return n;if(B.call(n,"__wrapped__"))return Yt(n)}return new _(n)}function o(){}function _(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ni}function g(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function M(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function T(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function $(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function F(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new $;++t<r;)this.add(n[t])}function d(n){this.size=(this.__data__=new T(n)).size}function N(n,t){var r,e=D(n),u=!e&&Lu(n),o=!e&&!u&&Cu(n),i=!e&&!u&&!o&&$u(n),f=(u=(e=e||u||o||i)?qo(n.length,Vr):[]).length;for(r in n)!t&&!B.call(n,r)||e&&("length"==r||o&&("offset"==r||"parent"==r)||i&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Tt(r,f))||u.push(r);return u}function P(n){var t=n.length;return t?n[zn(0,t-1)]:ni}function Z(n,t,r){(r===ni||y(n[t],r))&&(r!==ni||t in n)||H(n,t,r)}function q(n,t,r){var e=n[t];B.call(n,t)&&y(e,r)&&(r!==ni||t in n)||H(n,t,r)}function V(n,t){for(var r=n.length;r--;)if(y(n[r][0],t))return r;return-1}function K(n,e,u,o){return Ze(n,function(n,t,r){e(o,n,u(n),r)}),o}function G(n,t){return n&&tt(t,S(t),n)}function H(n,t,r){"__proto__"==t&&pe?pe(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function J(n,t){for(var r=-1,e=t.length,u=R(e),o=null==n;++r<e;)u[r]=o?ni:Sr(n,t[r]);return u}function Y(n,t,r){return n=n==n&&(r!==ni&&(n=n<=r?n:r),t!==ni)?t<=n?n:t:n}function v(r,e,u,n,t,o){var i,f,c,a,l,s=1&e,h=2&e,p=4&e;if((i=u?t?u(r,n,t,o):u(r):i)===ni){if(!x(r))return r;if(n=D(r)){if(_=(g=r).length,a=new g.constructor(_),_&&"string"==typeof g[0]&&B.call(g,"index")&&(a.index=g.index,a.input=g.input),i=a,!s)return E(r,i)}else{var _=C(r),g="[object Function]"==_||"[object GeneratorFunction]"==_;if(Cu(r))return Hn(r,s);if("[object Object]"==_||"[object Arguments]"==_||g&&!t){if(i=h||g?{}:Dt(r),!s)return h?(c=a=r,c=(f=i)&&tt(c,O(c),f),tt(a,Xe(a),c)):(c=G(i,f=r),tt(f,Qe(f),c))}else{if(!fi[_])return t?r:{};i=function(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Jn(n);case"[object Boolean]":case"[object Date]":return new e(+n);case"[object DataView]":return t=r?Jn(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yn(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return(t=new n.constructor(n.source,Vi.exec(n))).lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return Me?z(Me.call(n)):{}}}(r,_,s)}}if(t=(o=o||new d).get(r))return t;o.set(r,i),Tu(r)?r.forEach(function(n){i.add(v(n,e,u,n,r,o))}):Du(r)?r.forEach(function(n,t){i.set(t,v(n,e,u,t,r,o))}):(h=p?h?Rt:It:h?O:S,Bo((l=n?ni:h(r))||r,function(n,t){l&&(n=r[t=n]),q(i,t,v(n,e,u,t,r,o))}))}return i}function Q(n,t,r){var e=r.length;if(null==n)return!e;for(n=z(n);e--;){var u=r[e],o=t[u],i=n[u];if(i===ni&&!(u in n)||!o(i))return!1}return!0}function X(n,t,r){if("function"!=typeof n)throw new W("Expected a function");return ru(function(){n.apply(ni,r)},t)}function nn(n,t,r,e){var u=-1,o=Uo,i=!0,f=n.length,c=[],a=t.length;if(f){r&&(t=Do(t,Vo(r))),e?(o=Co,i=!1):200<=t.length&&(o=Go,i=!1,t=new F(t));n:for(;++u<f;){var l=n[u],s=null==r?l:r(l),l=e||0!==l?l:0;if(i&&s==s){for(var h=a;h--;)if(t[h]===s)continue n;c.push(l)}else o(t,s,e)||c.push(l)}}return c}function tn(n,e){var u=!0;return Ze(n,function(n,t,r){return u=!!e(n,t,r)}),u}function rn(n,t,r){for(var e=-1,u=n.length;++e<u;){var o,i,f=n[e],c=t(f);null!=c&&(o===ni?c==c&&!w(c):r(c,o))&&(o=c,i=f)}return i}function en(n,e){var u=[];return Ze(n,function(n,t,r){e(n,t,r)&&u.push(n)}),u}function c(n,t,r,e,u){var o=-1,i=n.length;for(r=r||Mt,u=u||[];++o<i;){var f=n[o];0<t&&r(f)?1<t?c(f,t-1,r,e,u):Mo(u,f):e||(u[u.length]=f)}return u}function un(n,t){return n&&Ve(n,t,S)}function on(n,t){return n&&Ke(n,t,S)}function fn(t,n){return Lo(n,function(n){return vr(t[n])})}function cn(n,t){for(var r=0,e=(t=Kn(t,n)).length;null!=n&&r<e;)n=n[Gt(t[r++])];return r&&r==e?n:ni}function an(n,t,r){return t=t(n),D(n)?t:Mo(t,r(n))}function r(n){if(null==n)n=n===ni?"[object Undefined]":"[object Null]";else if(he&&he in z(n)){var t=B.call(n,he),r=n[he];try{n[he]=ni;var e=!0}catch(n){}var u=Xr.call(n);e&&(t?n[he]=r:delete n[he]),n=u}else n=Xr.call(n);return n}function ln(n,t){return t<n}function sn(n,t){return null!=n&&B.call(n,t)}function hn(n,t){return null!=n&&t in z(n)}function pn(n,t,r){for(var e=r?Co:Uo,u=n[0].length,o=n.length,i=o,f=R(o),c=1/0,a=[];i--;){var l=n[i];i&&t&&(l=Do(l,Vo(t))),c=U(l.length,c),f[i]=!r&&(t||120<=u&&120<=l.length)?new F(i&&l):ni}var l=n[0],s=-1,h=f[0];n:for(;++s<u&&a.length<c;){var p=l[s],_=t?t(p):p,p=r||0!==p?p:0;if(h?!Go(h,_):!e(a,_,r)){for(i=o;--i;){var g=f[i];if(g?!Go(g,_):!e(n[i],_,r))continue n}h&&h.push(_),a.push(p)}}return a}function _n(n,t,r){return null==(t=null==(n=(t=Kn(t,n)).length<2?n:cn(n,i(t,0,-1)))?n:n[Gt(e(t))])?ni:Wo(t,n,r)}function gn(n){return j(n)&&"[object Arguments]"==r(n)}function dn(n,t,r,e,u){if(n===t)t=!0;else if(null==n||null==t||!j(n)&&!j(t))t=n!=n&&t!=t;else n:{var o=D(n),i=D(t),f=o?"[object Array]":C(n),c=i?"[object Array]":C(t),a="[object Object]"==(f="[object Arguments]"==f?"[object Object]":f),i="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c);if((c=f==c)&&Cu(n)){if(!Cu(t)){t=!1;break n}a=!(o=!0)}if(c&&!a)u=u||new d,t=o||$u(n)?St(n,t,r,e,dn,u):function(n,t,r,e,u,o,i){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":if(n.byteLength==t.byteLength&&o(new ue(n),new ue(t)))return!0;break;case"[object Boolean]":case"[object Date]":case"[object Number]":return y(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=Ho;case"[object Set]":if(f=f||Yo,n.size==t.size||1&e)return(r=i.get(n))?r==t:(e|=2,i.set(n,t),t=St(f(n),f(t),e,u,o,i),i.delete(n),t);break;case"[object Symbol]":if(Me)return Me.call(n)==Me.call(t)}return!1}(n,t,f,r,e,dn,u);else if(1&r||(o=a&&B.call(n,"__wrapped__"),f=i&&B.call(t,"__wrapped__"),!o&&!f))if(c)t:if(u=u||new d,o=1&r,(i=(f=It(n)).length)==(c=It(t).length)||o){for(a=i;a--;){var l=f[a];if(!(o?l in t:B.call(t,l))){t=!1;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=!0,u.set(n,t),u.set(t,n);for(var s=o;++a<i;){var h,p=n[l=f[a]],_=t[l];if((h=e?o?e(_,p,l,t,n,u):e(p,_,l,n,t,u):h)===ni?p!==_&&!dn(p,_,r,e,u):!h){c=!1;break}s=s||"constructor"==l}c&&!s&&(r=n.constructor)!=(e=t.constructor)&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(c=!1),u.delete(n),u.delete(t),t=c}}else t=!1;else t=!1;else t=dn(n=o?n.value():n,t=f?t.value():t,r,e,u=u||new d)}return t}function vn(n,t,r,e){var u=r.length,o=u,i=!e;if(null==n)return!o;for(n=z(n);u--;){var f=r[u];if(i&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<o;){var c,a=(f=r[u])[0],l=n[a],s=f[1];if(i&&f[2]){if(l===ni&&!(a in n))return!1}else if(f=new d,(c=e?e(l,s,a,n,t,f):c)===ni?!dn(s,l,3,e,f):!c)return!1}return!0}function yn(n){return!(!x(n)||Qr&&Qr in n)&&(vr(n)?re:Hi).test(Ht(n))}function bn(n){return"function"==typeof n?n:null==n?I:"object"==typeof n?D(n)?An(n[0],n[1]):mn(n):Mr(n)}function xn(n){if(!Nt(n))return we(n);var t,r=[];for(t in z(n))B.call(n,t)&&"constructor"!=t&&r.push(t);return r}function jn(n,t){return n<t}function wn(n,e){var u=-1,o=h(n)?R(n.length):[];return Ze(n,function(n,t,r){o[++u]=e(n,t,r)}),o}function mn(t){var r=Lt(t);return 1==r.length&&r[0][2]?Pt(r[0][0],r[0][1]):function(n){return n===t||vn(n,t,r)}}function An(r,e){return $t(r)&&e==e&&!x(e)?Pt(Gt(r),e):function(n){var t=Sr(n,r);return t===ni&&t===e?Or(n,r):dn(e,t,3)}}function En(l,s,h,p,_){l!==s&&Ve(s,function(n,t){var r,e,u,o,i,f,c,a;x(n)?(r=_=_||new d,e="__proto__"==t?ni:l[t],u="__proto__"==t?ni:s[t],(a=r.get(u))||((o=(a=p?p(e,u,t+"",l,s,r):ni)===ni)&&(f=!(i=D(u))&&Cu(u),c=!i&&!f&&$u(u),a=u,i||f||c?a=D(e)?e:b(e)?E(e):f?Hn(u,!(o=!1)):c?Yn(u,!(o=!1)):[]:jr(u)||Lu(u)?Lu(a=e)?a=kr(e):(!x(e)||h&&vr(e))&&(a=Dt(u)):o=!1),o&&(r.set(u,a),En(a,u,h,p,r),r.delete(u))),Z(l,t,a)):(r=p?p("__proto__"==t?ni:l[t],n,t+"",l,s,_):ni,Z(l,t,r=r===ni?n:r))},O)}function kn(n,t){var r=n.length;if(r)return Tt(t+=t<0?r:0,r)?n[t]:ni}function Sn(n,r,c){var e=-1,t=(r=Do(r.length?r:[I],Vo(l())),n=wn(n,function(t){return{a:Do(r,function(n){return n(t)}),b:++e,c:t}})),n=function(n,t){n:{for(var r=-1,e=n.a,u=t.a,o=e.length,i=c.length;++r<o;){var f=Qn(e[r],u[r]);if(f){r=i<=r?f:f*("desc"==c[r]?-1:1);break n}}r=n.b-t.b}return r},u=t.length;for(t.sort(n);u--;)t[u]=t[u].c;return t}function On(n,t,r){for(var e=-1,u=t.length,o={};++e<u;){var i=t[e],f=cn(n,i);r(f,i)&&Bn(o,Kn(i,n),f)}return o}function In(n,t,r,e){var u=e?_i:No,o=-1,i=t.length,f=n;for(n===t&&(t=E(t)),r&&(f=Do(n,Vo(r)));++o<i;)for(var c=0,a=t[o],a=r?r(a):a;-1<(c=u(f,a,c,e));)f!==n&&ae.call(f,c,1),ae.call(n,c,1);return n}function Rn(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u,o=t[r];r!=e&&o===u||(Tt(u=o)?ae.call(n,o,1):$n(n,o))}}function zn(n,t){return n+ye(Ee()*(t-n+1))}function Wn(n,t){var r="";if(!(!n||t<1||9007199254740991<t))for(;t%2&&(r+=n),(t=ye(t/2))&&(n+=n),t;);return r}function f(n,t){return eu(Zt(n,t,I),n+"")}function Bn(n,t,r,e){if(x(n))for(var u=-1,o=(t=Kn(t,n)).length,i=o-1,f=n;null!=f&&++u<o;){var c,a=Gt(t[u]),l=r;q(f,a,l=u!=i&&(c=f[a],(l=e?e(c,a,f):ni)===ni)?x(c)?c:Tt(t[u+1])?[]:{}:l),f=f[a]}return n}function i(n,t,r){var e=-1,u=n.length;for((r=u<r?u:r)<0&&(r+=u),u=r<(t=t<0?u<-t?0:u+t:t)?0:r-t>>>0,t>>>=0,r=R(u);++e<u;)r[e]=n[e+t];return r}function Ln(n,e){var u;return Ze(n,function(n,t,r){return!(u=e(n,t,r))}),!!u}function Un(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=2147483647){for(;e<u;){var o=e+u>>>1,i=n[o];null!==i&&!w(i)&&(r?i<=t:i<t)?e=1+o:u=o}return u}return Cn(n,t,I,r)}function Cn(n,t,r,e){t=r(t);for(var u=0,o=null==n?0:n.length,i=t!=t,f=null===t,c=w(t),a=t===ni;u<o;){var l=ye((u+o)/2),s=r(n[l]),h=s!==ni,p=null===s,_=s==s,g=w(s);(i?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!g):!p&&!g&&(e?s<=t:s<t))?u=l+1:o=l}return U(o,4294967294)}function Dn(n,t){for(var r=-1,e=n.length,u=0,o=[];++r<e;){var i,f=n[r],c=t?t(f):f;r&&y(c,i)||(i=c,o[u++]=0===f?0:f)}return o}function Mn(n){return"number"==typeof n?n:w(n)?ri:+n}function a(n){var t;return"string"==typeof n?n:D(n)?Do(n,a)+"":w(n)?Te?Te.call(n):"":"0"==(t=n+"")&&1/n==-ti?"-0":t}function Tn(n,t,r){var e=-1,u=Uo,o=n.length,i=!0,f=[],c=f;if(r)i=!1,u=Co;else if(200<=o){if(u=t?null:Je(n))return Yo(u);i=!1,u=Go,c=new F}else c=t?[]:f;n:for(;++e<o;){var a=n[e],l=t?t(a):a,a=r||0!==a?a:0;if(i&&l==l){for(var s=c.length;s--;)if(c[s]===l)continue n;t&&c.push(l),f.push(a)}else u(c,l,r)||(c!==f&&c.push(l),f.push(a))}return f}function $n(n,t){return null==(n=(t=Kn(t,n)).length<2?n:cn(n,i(t,0,-1)))||delete n[Gt(e(t))]}function Fn(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?i(n,e?0:o,e?o+1:u):i(n,e?o+1:0,e?u:o)}function Nn(n,t){var r=n;return To(t,function(n,t){return t.func.apply(t.thisArg,Mo([n],t.args))},r=n instanceof g?n.value():r)}function Pn(n,t,r){var e=n.length;if(e<2)return e?Tn(n[0]):[];for(var u=-1,o=R(e);++u<e;)for(var i=n[u],f=-1;++f<e;)f!=u&&(o[u]=nn(o[u]||i,n[f],t,r));return Tn(c(o,1),t,r)}function Zn(n,t,r){for(var e=-1,u=n.length,o=t.length,i={};++e<u;)r(i,n[e],e<o?t[e]:ni);return i}function qn(n){return b(n)?n:[]}function Vn(n){return"function"==typeof n?n:I}function Kn(n,t){return D(n)?n:$t(n,t)?[n]:uu(k(n))}function Gn(n,t,r){var e=n.length;return r=r===ni?e:r,!t&&e<=r?n:i(n,t,r)}function Hn(n,t){return t?n.slice():(t=n.length,t=oe?oe(t):new n.constructor(t),n.copy(t),t)}function Jn(n){var t=new n.constructor(n.byteLength);return new ue(t).set(new ue(n)),t}function Yn(n,t){return new n.constructor(t?Jn(n.buffer):n.buffer,n.byteOffset,n.length)}function Qn(n,t){if(n!==t){var r=n!==ni,e=null===n,u=n==n,o=w(n),i=t!==ni,f=null===t,c=t==t,a=w(t);if(!f&&!a&&!o&&t<n||o&&i&&c&&!f&&!a||e&&i&&c||!r&&c||!u)return 1;if(!e&&!o&&!a&&n<t||a&&r&&u&&!e&&!o||f&&r&&u||!i&&u||!c)return-1}return 0}function Xn(n,t,r,e){var u=-1,o=n.length,i=r.length,f=-1,c=t.length,a=L(o-i,0),l=R(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<i;)(e||u<o)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function nt(n,t,r,e){var u=-1,o=n.length,i=-1,f=r.length,c=-1,a=t.length,l=L(o-f,0),s=R(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++i<f;)(e||u<o)&&(s[l+r[i]]=n[u++]);return s}function E(n,t){var r=-1,e=n.length;for(t=t||R(e);++r<e;)t[r]=n[r];return t}function tt(n,t,r,e){var u=!r;r=r||{};for(var o=-1,i=t.length;++o<i;){var f=t[o],c=e?e(r[f],n[f],f,r,n):ni;(u?H:q)(r,f,c=c===ni?n[f]:c)}return r}function rt(u,o){return function(n,t){var r=D(n)?li:K,e=o?o():{};return r(n,u,l(t,2),e)}}function et(i){return f(function(n,t){var r=-1,e=t.length,u=1<e?t[e-1]:ni,o=2<e?t[2]:ni,u=3<i.length&&"function"==typeof u?(e--,u):ni;for(o&&s(t[0],t[1],o)&&(u=e<3?ni:u,e=1),n=z(n);++r<e;)(o=t[r])&&i(n,o,r,u);return n})}function ut(o,i){return function(n,t){if(null!=n){if(!h(n))return o(n,t);for(var r=n.length,e=i?r:-1,u=z(n);(i?e--:++e<r)&&!1!==t(u[e],e,u););}return n}}function ot(f){return function(n,t,r){for(var e=-1,u=z(n),o=(r=r(n)).length;o--;){var i=r[f?o:++e];if(!1===t(u[i],i,u))break}return n}}function it(e){return function(n){n=k(n);var t=oi.test(n)?Xo(n):ni,r=t?t[0]:n.charAt(0);return n=t?Gn(t,1).join(""):n.slice(1),r[e]()+n}}function ft(t){return function(n){return To(Br(Wr(n).replace(nf,"")),t,"")}}function ct(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=$e(r.prototype);return x(n=r.apply(t,n))?n:t}}function at(o,i,f){var c=ct(o);return function n(){for(var t=arguments.length,r=R(t),e=t,u=Wt(n);e--;)r[e]=arguments[e];return(t-=(e=t<3&&r[0]!==u&&r[t-1]!==u?[]:Jo(r,u)).length)<f?xt(o,i,ht,n.placeholder,ni,r,e,ni,ni,f-t):Wo(this&&this!==ci&&this instanceof n?c:o,this,r)}}function lt(o){return function(n,t,r){var e,u=z(n);return h(n)||(e=l(t,3),n=S(n),t=function(n){return e(u[n],n,u)}),-1<(t=o(n,t,r))?u[e?n[t]:t]:ni}}function st(f){return Ot(function(e){var u=e.length,n=u,t=_.prototype.thru;for(f&&e.reverse();n--;){if("function"!=typeof(r=e[n]))throw new W("Expected a function");t&&!i&&"wrapper"==zt(r)&&(i=new _([],!0))}for(n=i?n:u;++n<u;)var r,o="wrapper"==(t=zt(r=e[n]))?Ye(r):ni,i=o&&Ft(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?i[zt(o[0])].apply(i,o[3]):1==r.length&&Ft(r)?i[t]():i.thru(r);return function(){var n=(r=arguments)[0];if(i&&1==r.length&&D(n))return i.plant(n).value();for(var t=0,r=u?e[t].apply(this,r):n;++t<u;)r=e[t].call(this,r);return r}})}function ht(a,l,s,h,p,_,g,d,v,y){var b=128&l,x=1&l,j=2&l,w=24&l,m=512&l,A=j?ni:ct(a);return function n(){for(var t=arguments.length,r=R(t),e=t;e--;)r[e]=arguments[e];if(w)for(var u=Wt(n),e=r.length,o=0;e--;)r[e]===u&&++o;if(h&&(r=Xn(r,h,p,w)),_&&(r=nt(r,_,g,w)),t-=o,w&&t<y)return u=Jo(r,u),xt(a,l,ht,n.placeholder,s,r,u,d,v,y-t);if(u=x?s:this,e=j?u[a]:a,t=r.length,d){o=r.length;for(var i=U(d.length,o),f=E(r);i--;){var c=d[i];r[i]=Tt(c,o)?f[c]:ni}}else m&&1<t&&r.reverse();return b&&v<t&&(r.length=v),(e=this&&this!==ci&&this instanceof n?A||ct(e):e).apply(u,r)}}function pt(r,i){return function(n,t){return n=n,e=r,u=i(t),o={},un(n,function(n,t,r){e(o,u(n),t,r)}),o;var e,u,o}}function _t(e,u){return function(n,t){var r;if(n===ni&&t===ni)return u;if(n!==ni&&(r=n),t!==ni){if(r===ni)return t;t=("string"==typeof n||"string"==typeof t?(n=a(n),a):(n=Mn(n),Mn))(t),r=e(n,t)}return r}}function gt(e){return Ot(function(n){return n=Do(n,Vo(l())),f(function(t){var r=this;return e(n,function(n){return Wo(n,r,t)})})})}function dt(n,t){var r=(t=t===ni?" ":a(t)).length;return r<2?r?Wn(t,n):t:(r=Wn(t,ve(n/Qo(t))),oi.test(t)?Gn(Xo(r),0,n).join(""):r.slice(0,n))}function vt(f,n,c,a){var l=1&n,s=ct(f);return function n(){for(var t=-1,r=arguments.length,e=-1,u=a.length,o=R(u+r),i=this&&this!==ci&&this instanceof n?s:f;++e<u;)o[e]=a[e];for(;r--;)o[e++]=arguments[++t];return Wo(i,l?c:this,o)}}function yt(o){return function(n,t,r){r&&"number"!=typeof r&&s(n,t,r)&&(t=r=ni),n=Ar(n),t===ni?(t=n,n=0):t=Ar(t),r=r===ni?n<t?1:-1:Ar(r);var e=-1;t=L(ve((t-n)/(r||1)),0);for(var u=R(t);t--;)u[o?t:++e]=n,n+=r;return u}}function bt(r){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=A(n),t=A(t)),r(n,t)}}function xt(n,t,r,e,u,o,i,f,c,a){var l=8&t;return 4&(t=(t|(l?32:64))&~(l?64:32))||(t&=-4),r=r.apply(ni,u=[n,t,u,l?o:ni,l?i:ni,o=l?ni:o,i=l?ni:i,f,c,a]),Ft(n)&&tu(r,u),r.placeholder=e,qt(r,n,t)}function jt(n){var e=Zr[n];return function(n,t){var r;return n=A(n),(t=null==t?0:U(m(t),292))?(r=(k(n)+"e").split("e"),+((r=(k(r=e(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))):e(n)}}function wt(o){return function(n){var t,r,e,u=C(n);return"[object Map]"==u?Ho(n):"[object Set]"==u?(u=n,r=-1,e=Array(u.size),u.forEach(function(n){e[++r]=[n,n]}),e):Do(o(t=n),function(n){return[n,t[n]]})}}function mt(n,t,r,e,u,o,i,f){var c,a,l,s,h,p,_,g,d=2&t;if(d||"function"==typeof n)return(c=e?e.length:0)||(t&=-97,e=u=ni),i=i===ni?i:L(m(i),0),f=f===ni?f:m(f),c-=u?u.length:0,64&t&&(a=e,l=u,e=u=ni),s=d?ni:Ye(n),o=[n,t,r,e,u,a,l,o,i,f],s&&(r=o[1],n=s[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&o[7].length<=s[8]||384==n&&s[7].length<=s[8]&&8==r,t<131||e)&&(1&n&&(o[2]=s[2],t|=1&r?0:4),(r=s[3])&&(e=o[3],o[3]=e?Xn(e,r,s[4]):r,o[4]=e?Jo(o[3],"__lodash_placeholder__"):s[4]),(r=s[5])&&(e=o[5],o[5]=e?nt(e,r,s[6]):r,o[6]=e?Jo(o[5],"__lodash_placeholder__"):s[6]),(r=s[7])&&(o[7]=r),128&n&&(o[8]=null==o[8]?s[8]:U(o[8],s[8])),null==o[9]&&(o[9]=s[9]),o[0]=s[0],o[1]=t),n=o[0],t=o[1],r=o[2],e=o[3],u=o[4],!(f=o[9]=o[9]===ni?d?0:n.length:L(o[9]-c,0))&&24&t&&(t&=-25),qt((s?Ge:tu)(t&&1!=t?8==t||16==t?at(n,t,f):32!=t&&33!=t||u.length?ht.apply(ni,o):vt(n,t,r,e):(p=r,_=1&t,g=ct(h=n),function n(){return(this&&this!==ci&&this instanceof n?g:h).apply(_?p:this,arguments)}),o),n,t);throw new W("Expected a function")}function At(n,t,r,e){return n===ni||y(n,Gr[r])&&!B.call(e,r)?t:n}function Et(n,t,r,e,u,o){return x(n)&&x(t)&&(o.set(t,n),En(n,t,ni,Et,o),o.delete(t)),n}function kt(n){return jr(n)?ni:n}function St(n,t,r,e,u,o){var i=1&r,f=n.length;if(f!=(c=t.length)&&!(i&&f<c))return!1;if((c=o.get(n))&&o.get(t))return c==t;var c=-1,a=!0,l=2&r?new F:ni;for(o.set(n,t),o.set(t,n);++c<f;){var s,h=n[c],p=t[c];if((s=e?i?e(p,h,c,t,n,o):e(h,p,c,n,t,o):s)!==ni){if(s)continue;a=!1;break}if(l){if(!$o(t,function(n,t){return!Go(l,t)&&(h===n||u(h,n,r,e,o))&&l.push(t)})){a=!1;break}}else if(h!==p&&!u(h,p,r,e,o)){a=!1;break}}return o.delete(n),o.delete(t),a}function Ot(n){return eu(Zt(n,ni,nr),n+"")}function It(n){return an(n,S,Qe)}function Rt(n){return an(n,O,Xe)}function zt(n){for(var t=n.name+"",r=We[t],e=B.call(We,t)?r.length:0;e--;){var u=r[e],o=u.func;if(null==o||o==n)return u.name}return t}function Wt(n){return(B.call(p,"placeholder")?p:n).placeholder}function l(){var n=(n=p.iteratee||Ur)===Ur?bn:n;return arguments.length?n(arguments[0],arguments[1]):n}function Bt(n,t){var n=n.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Lt(n){for(var t=S(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u==u&&!x(u)]}return t}function Ut(n,t){n=null==n?ni:n[t];return yn(n)?n:ni}function Ct(n,t,r){for(var e=-1,u=(t=Kn(t,n)).length,o=!1;++e<u;){var i=Gt(t[e]);if(!(o=null!=n&&r(n,i)))break;n=n[i]}return o||++e!=u?o:!!(u=null==n?0:n.length)&&br(u)&&Tt(i,u)&&(D(n)||Lu(n))}function Dt(n){return"function"!=typeof n.constructor||Nt(n)?{}:$e(ie(n))}function Mt(n){return D(n)||Lu(n)||!!(le&&n&&n[le])}function Tt(n,t){var r=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Yi.test(n))&&-1<n&&0==n%1&&n<t}function s(n,t,r){var e;return!!x(r)&&!!("number"==(e=typeof t)?h(r)&&Tt(t,r.length):"string"==e&&t in r)&&y(r[t],n)}function $t(n,t){var r;if(!D(n))return"number"==(r=typeof n)||"symbol"==r||"boolean"==r||null==n||w(n)||Li.test(n)||!Bi.test(n)||null!=t&&n in z(t)}function Ft(n){var t=zt(n),r=p[t];return"function"==typeof r&&t in g.prototype&&(n===r||(t=Ye(r))&&n===t[0])}function Nt(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Gr)}function Pt(t,r){return function(n){return null!=n&&n[t]===r&&(r!==ni||t in z(n))}}function Zt(u,o,i){return o=L(o===ni?u.length-1:o,0),function(){for(var n=arguments,t=-1,r=L(n.length-o,0),e=R(r);++t<r;)e[t]=n[o+t];for(t=-1,r=R(o+1);++t<o;)r[t]=n[t];return r[o]=i(e),Wo(u,this,r)}}function qt(n,t,r){var e=t+"";t=eu;var u=Jt,o=(o=e.match(Fi))?o[1].split(Ni):[];return(u=(r=u(o,r)).length)&&(r[o=u-1]=(1<u?"& ":"")+r[o],r=r.join(2<u?", ":" "),e=e.replace($i,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Vt(r){var e=0,u=0;return function(){var n=me(),t=16-(n-u);if(u=n,0<t){if(800<=++e)return arguments[0]}else e=0;return r.apply(ni,arguments)}}function Kt(n,t){var r=-1,e=(u=n.length)-1;for(t=t===ni?u:t;++r<t;){var u,o=n[u=zn(r,e)];n[u]=n[r],n[r]=o}return n.length=t,n}function Gt(n){var t;return"string"==typeof n||w(n)?n:"0"==(t=n+"")&&1/n==-ti?"-0":t}function Ht(n){if(null==n)return"";try{return Jr.call(n)}catch(n){}return n+""}function Jt(r,e){return Bo(wi,function(n){var t="_."+n[0];e&n[1]&&!Uo(r,t)&&r.push(t)}),r.sort()}function Yt(n){var t;return n instanceof g?n.clone():((t=new _(n.__wrapped__,n.__chain__)).__actions__=E(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t)}function Qt(n,t,r){var e=null==n?0:n.length;return e?((r=null==r?0:m(r))<0&&(r=L(e+r,0)),Fo(n,l(t,3),r)):-1}function Xt(n,t,r){var e,u=null==n?0:n.length;return u?(e=u-1,r!==ni&&(e=m(r),e=r<0?L(u+e,0):U(e,u-1)),Fo(n,l(t,3),e,!0)):-1}function nr(n){return null!=n&&n.length?c(n,1):[]}function tr(n){return n&&n.length?n[0]:ni}function e(n){var t=null==n?0:n.length;return t?n[t-1]:ni}function rr(n,t){return n&&n.length&&t&&t.length?In(n,t):n}function er(n){return null==n?n:ke.call(n)}function ur(t){var r;return t&&t.length?(r=0,t=Lo(t,function(n){if(b(n))return r=L(n.length,r),!0}),qo(r,function(n){return Do(t,Po(n))})):[]}function or(n,t){return n&&n.length?(n=ur(n),null==t?n:Do(n,function(n){return Wo(t,ni,n)})):[]}function ir(n){return(n=p(n)).__chain__=!0,n}function fr(n,t){return t(n)}function cr(n,t){return(D(n)?Bo:Ze)(n,l(t,3))}function ar(n,t){return(D(n)?function(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}:qe)(n,l(t,3))}function lr(n,t){return(D(n)?Do:wn)(n,l(t,3))}function sr(n,t,r){return t=r?ni:t,t=n&&null==t?n.length:t,mt(n,128,ni,ni,ni,ni,t)}function hr(n,t){var r;if("function"!=typeof t)throw new W("Expected a function");return n=m(n),function(){return 0<--n&&(r=t.apply(this,arguments)),n<=1&&(t=ni),r}}function pr(e,u,n){function r(n){var t=c,r=a;return c=a=ni,_=n,s=e.apply(r,t)}function o(n){var t=n-p;return n-=_,p===ni||u<=t||t<0||d&&l<=n}function i(){if(o(r=Au()))return f(r);var n=ru,t=r-_,r=u-(r-p);t=d?U(r,l-t):r,h=n(i,t)}function f(n){return h=ni,v&&c?r(n):(c=a=ni,s)}function t(){var n=Au(),t=o(n);if(c=arguments,a=this,p=n,t){if(h===ni)return _=n=p,h=ru(i,u),g?r(n):s;if(d)return h=ru(i,u),r(p)}return h===ni&&(h=ru(i,u)),s}var c,a,l,s,h,p,_=0,g=!1,d=!1,v=!0;if("function"!=typeof e)throw new W("Expected a function");return u=A(u)||0,x(n)&&(g=!!n.leading,l=(d="maxWait"in n)?L(A(n.maxWait)||0,u):l,v="trailing"in n?!!n.trailing:v),t.cancel=function(){h!==ni&&He(h),_=0,c=p=a=h=ni},t.flush=function(){return h===ni?s:f(Au())},t}function _r(e,u){function o(){var n=arguments,t=u?u.apply(this,n):n[0],r=o.cache;return r.has(t)?r.get(t):(n=e.apply(this,n),o.cache=r.set(t,n)||r,n)}if("function"!=typeof e||null!=u&&"function"!=typeof u)throw new W("Expected a function");return o.cache=new(_r.Cache||$),o}function gr(t){if("function"!=typeof t)throw new W("Expected a function");return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function y(n,t){return n===t||n!=n&&t!=t}function h(n){return null!=n&&br(n.length)&&!vr(n)}function b(n){return j(n)&&h(n)}function dr(n){var t;return!!j(n)&&("[object Error]"==(t=r(n))||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!jr(n))}function vr(n){return!!x(n)&&("[object Function]"==(n=r(n))||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function yr(n){return"number"==typeof n&&n==m(n)}function br(n){return"number"==typeof n&&-1<n&&0==n%1&&n<=9007199254740991}function x(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function j(n){return null!=n&&"object"==typeof n}function xr(n){return"number"==typeof n||j(n)&&"[object Number]"==r(n)}function jr(n){return!(!j(n)||"[object Object]"!=r(n))&&(null===(n=ie(n))||"function"==typeof(n=B.call(n,"constructor")&&n.constructor)&&n instanceof n&&Jr.call(n)==ne)}function wr(n){return"string"==typeof n||!D(n)&&j(n)&&"[object String]"==r(n)}function w(n){return"symbol"==typeof n||j(n)&&"[object Symbol]"==r(n)}function mr(n){if(!n)return[];if(h(n))return(wr(n)?Xo:E)(n);if(se&&n[se]){n=n[se]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return("[object Map]"==(t=C(n))?Ho:"[object Set]"==t?Yo:Rr)(n)}function Ar(n){return n?(n=A(n))===ti||n===-ti?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function m(n){var t=(n=Ar(n))%1;return n==n?t?n-t:n:0}function Er(n){return n?Y(m(n),0,4294967295):0}function A(n){if("number"==typeof n)return n;if(w(n))return ri;if("string"!=typeof(n=x(n)?x(n="function"==typeof n.valueOf?n.valueOf():n)?n+"":n:n))return 0===n?n:+n;n=n.replace(Di,"");var t=Gi.test(n);return t||Ji.test(n)?ff(n.slice(2),t?2:8):Ki.test(n)?ri:+n}function kr(n){return tt(n,O(n))}function k(n){return null==n?"":a(n)}function Sr(n,t,r){return(n=null==n?ni:cn(n,t))===ni?r:n}function Or(n,t){return null!=n&&Ct(n,t,hn)}function S(n){return(h(n)?N:xn)(n)}function O(n){if(h(n))n=N(n,!0);else if(x(n)){var t,r=Nt(n),e=[];for(t in n)("constructor"!=t||!r&&B.call(n,t))&&e.push(t);n=e}else{if(t=[],null!=n)for(r in z(n))t.push(r);n=t}return n}function Ir(n,r){var t;return null==n?{}:(t=Do(Rt(n),function(n){return[n]}),r=l(r),On(n,t,function(n,t){return r(n,t[0])}))}function Rr(n){return null==n?[]:Ko(n,S(n))}function zr(n){return ho(k(n).toLowerCase())}function Wr(n){return(n=k(n))&&n.replace(Qi,gf).replace(tf,"")}function Br(n,t,r){return n=k(n),(t=r?ni:t)===ni?ef.test(n)?n.match(rf)||[]:n.match(Pi)||[]:n.match(t)||[]}function Lr(n){return function(){return n}}function I(n){return n}function Ur(n){return bn("function"==typeof n?n:v(n,1))}function Cr(e,t,n){var r=S(t),u=fn(t,r),o=(null!=n||x(t)&&(u.length||!r.length)||(n=t,t=e,e=this,u=fn(t,S(t))),!(x(n)&&"chain"in n&&!n.chain)),i=vr(e);return Bo(u,function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var n,t=this.__chain__;return o||t?(((n=e(this.__wrapped__)).__actions__=E(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n):r.apply(e,Mo([this.value()],arguments))})}),e}function Dr(){}function Mr(n){return $t(n)?Po(Gt(n)):(t=n,function(n){return cn(n,t)});var t}function Tr(){return[]}function $r(){return!1}var R=(n=null==n?ci:ai.defaults(ci.Object(),n,ai.pick(ci,uf))).Array,Fr=n.Date,Nr=n.Error,Pr=n.Function,Zr=n.Math,z=n.Object,qr=n.RegExp,Vr=n.String,W=n.TypeError,Kr=R.prototype,Gr=z.prototype,Hr=n["__core-js_shared__"],Jr=Pr.prototype.toString,B=Gr.hasOwnProperty,Yr=0,Qr=(ee=/[^.]+$/.exec(Hr&&Hr.keys&&Hr.keys.IE_PROTO||""))?"Symbol(src)_1."+ee:"",Xr=Gr.toString,ne=Jr.call(z),te=ci._,re=qr("^"+Jr.call(B).replace(ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=cf?n.Buffer:ni,t=n.Symbol,ue=n.Uint8Array,oe=ee?ee.g:ni,ie=ji(z.getPrototypeOf,z),fe=z.create,ce=Gr.propertyIsEnumerable,ae=Kr.splice,le=t?t.isConcatSpreadable:ni,se=t?t.iterator:ni,he=t?t.toStringTag:ni,pe=function(){try{var n=Ut(z,"defineProperty");return n({},"",{}),n}catch(n){}}(),_e=n.clearTimeout!==ci.clearTimeout&&n.clearTimeout,ge=Fr&&Fr.now!==ci.Date.now&&Fr.now,de=n.setTimeout!==ci.setTimeout&&n.setTimeout,ve=Zr.ceil,ye=Zr.floor,be=z.getOwnPropertySymbols,ee=ee?ee.isBuffer:ni,xe=n.isFinite,je=Kr.join,we=ji(z.keys,z),L=Zr.max,U=Zr.min,me=Fr.now,Ae=n.parseInt,Ee=Zr.random,ke=Kr.reverse,Fr=Ut(n,"DataView"),Se=Ut(n,"Map"),Oe=Ut(n,"Promise"),Ie=Ut(n,"Set"),n=Ut(n,"WeakMap"),Re=Ut(z,"create"),ze=n&&new n,We={},Be=Ht(Fr),Le=Ht(Se),Ue=Ht(Oe),Ce=Ht(Ie),De=Ht(n),t=t?t.prototype:ni,Me=t?t.valueOf:ni,Te=t?t.toString:ni,$e=function(n){return x(n)?fe?fe(n):(Fe.prototype=n,n=new Fe,Fe.prototype=ni,n):{}};function Fe(){}p.templateSettings={escape:Ri,evaluate:zi,interpolate:Wi,variable:"",imports:{_:p}},(p.prototype=o.prototype).constructor=p,(_.prototype=$e(o.prototype)).constructor=_,(g.prototype=$e(o.prototype)).constructor=g,M.prototype.clear=function(){this.__data__=Re?Re(null):{},this.size=0},M.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},M.prototype.get=function(n){var t=this.__data__;return Re?"__lodash_hash_undefined__"===(n=t[n])?ni:n:B.call(t,n)?t[n]:ni},M.prototype.has=function(n){var t=this.__data__;return Re?t[n]!==ni:B.call(t,n)},M.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Re&&t===ni?"__lodash_hash_undefined__":t,this},T.prototype.clear=function(){this.__data__=[],this.size=0},T.prototype.delete=function(n){var t=this.__data__;return!((n=V(t,n))<0||(n==t.length-1?t.pop():ae.call(t,n,1),--this.size,0))},T.prototype.get=function(n){var t=this.__data__;return(n=V(t,n))<0?ni:t[n][1]},T.prototype.has=function(n){return-1<V(this.__data__,n)},T.prototype.set=function(n,t){var r=this.__data__,e=V(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},$.prototype.clear=function(){this.size=0,this.__data__={hash:new M,map:new(Se||T),string:new M}},$.prototype.delete=function(n){return n=Bt(this,n).delete(n),this.size-=n?1:0,n},$.prototype.get=function(n){return Bt(this,n).get(n)},$.prototype.has=function(n){return Bt(this,n).has(n)},$.prototype.set=function(n,t){var r=Bt(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},F.prototype.add=F.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},F.prototype.has=function(n){return this.__data__.has(n)},d.prototype.clear=function(){this.__data__=new T,this.size=0},d.prototype.delete=function(n){var t=this.__data__;return n=t.delete(n),this.size=t.size,n},d.prototype.get=function(n){return this.__data__.get(n)},d.prototype.has=function(n){return this.__data__.has(n)},d.prototype.set=function(n,t){var r=this.__data__;if(r instanceof T){var e=r.__data__;if(!Se||e.length<199)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new $(e)}return r.set(n,t),this.size=r.size,this};var Ne,Pe,Ze=ut(un),qe=ut(on,!0),Ve=ot(),Ke=ot(!0),Ge=ze?function(n,t){return ze.set(n,t),n}:I,t=pe?function(n,t){return pe(n,"toString",{configurable:!0,enumerable:!1,value:Lr(t),writable:!0})}:I,He=_e||function(n){return ci.clearTimeout(n)},Je=Ie&&1/Yo(new Ie([,-0]))[1]==ti?function(n){return new Ie(n)}:Dr,Ye=ze?function(n){return ze.get(n)}:Dr,Qe=be?function(t){return null==t?[]:(t=z(t),Lo(be(t),function(n){return ce.call(t,n)}))}:Tr,Xe=be?function(n){for(var t=[];n;)Mo(t,Qe(n)),n=ie(n);return t}:Tr,C=r,nu=((Fr&&"[object DataView]"!=C(new Fr(new ArrayBuffer(1)))||Se&&"[object Map]"!=C(new Se)||Oe&&"[object Promise]"!=C(Oe.resolve())||Ie&&"[object Set]"!=C(new Ie)||n&&"[object WeakMap]"!=C(new n))&&(C=function(n){var t=r(n);if(n=(n="[object Object]"==t?n.constructor:ni)?Ht(n):"")switch(n){case Be:return"[object DataView]";case Le:return"[object Map]";case Ue:return"[object Promise]";case Ce:return"[object Set]";case De:return"[object WeakMap]"}return t}),Hr?vr:$r),tu=Vt(Ge),ru=de||function(n,t){return ci.setTimeout(n,t)},eu=Vt(t),uu=(Ne=(_e=_r(function(n){var u=[];return 46===n.charCodeAt(0)&&u.push(""),n.replace(Ui,function(n,t,r,e){u.push(r?e.replace(Zi,"$1"):t||n)}),u},function(n){return 500===Ne.size&&Ne.clear(),n})).cache,_e),Fr=f(function(n,t){return b(n)?nn(n,c(t,1,b,!0)):[]}),Oe=f(function(n,t){var r=e(t);return b(r)&&(r=ni),b(n)?nn(n,c(t,1,b,!0),l(r,2)):[]}),n=f(function(n,t){var r=e(t);return b(r)&&(r=ni),b(n)?nn(n,c(t,1,b,!0),ni,r):[]}),Hr=f(function(n){var t=Do(n,qn);return t.length&&t[0]===n[0]?pn(t):[]}),de=f(function(n){var t=e(n),r=Do(n,qn);return t===e(r)?t=ni:r.pop(),r.length&&r[0]===n[0]?pn(r,l(t,2)):[]}),t=f(function(n){var t=e(n),r=Do(n,qn);return(t="function"==typeof t?t:ni)&&r.pop(),r.length&&r[0]===n[0]?pn(r,ni,t):[]}),_e=f(rr),ou=Ot(function(n,t){var r=null==n?0:n.length,e=J(n,t);return Rn(n,Do(t,function(n){return Tt(n,r)?+n:n}).sort(Qn)),e}),iu=f(function(n){return Tn(c(n,1,b,!0))}),fu=f(function(n){var t=e(n);return b(t)&&(t=ni),Tn(c(n,1,b,!0),l(t,2))}),cu=f(function(n){var t="function"==typeof(t=e(n))?t:ni;return Tn(c(n,1,b,!0),ni,t)}),au=f(function(n,t){return b(n)?nn(n,t):[]}),lu=f(function(n){return Pn(Lo(n,b))}),su=f(function(n){var t=e(n);return b(t)&&(t=ni),Pn(Lo(n,b),l(t,2))}),hu=f(function(n){var t="function"==typeof(t=e(n))?t:ni;return Pn(Lo(n,b),ni,t)}),pu=f(ur),_u=f(function(n){var t="function"==typeof(t=1<(t=n.length)?n[t-1]:ni)?(n.pop(),t):ni;return or(n,t)}),gu=Ot(function(t){function n(n){return J(n,t)}var r=t.length,e=r?t[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof g&&Tt(e)?((u=u.slice(e,+e+(r?1:0))).__actions__.push({func:fr,args:[n],thisArg:ni}),new _(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(ni),n})):this.thru(n)}),du=rt(function(n,t,r){B.call(n,r)?++n[r]:H(n,r,1)}),vu=lt(Qt),yu=lt(Xt),bu=rt(function(n,t,r){B.call(n,r)?n[r].push(t):H(n,r,[t])}),xu=f(function(n,t,r){var e=-1,u="function"==typeof t,o=h(n)?R(n.length):[];return Ze(n,function(n){o[++e]=u?Wo(t,n,r):_n(n,t,r)}),o}),ju=rt(function(n,t,r){H(n,r,t)}),wu=rt(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),mu=f(function(n,t){var r;return null==n?[]:(1<(r=t.length)&&s(n,t[0],t[1])?t=[]:2<r&&s(t[0],t[1],t[2])&&(t=[t[0]]),Sn(n,c(t,1),[]))}),Au=ge||function(){return ci.Date.now()},Eu=f(function(n,t,r){var e,u=1;return r.length&&(e=Jo(r,Wt(Eu)),u|=32),mt(n,u,t,r,e)}),ku=f(function(n,t,r){var e,u=3;return r.length&&(e=Jo(r,Wt(ku)),u|=32),mt(t,u,n,r,e)}),ge=f(function(n,t){return X(n,1,t)}),Su=f(function(n,t,r){return X(n,A(t)||0,r)}),Ou=(_r.Cache=$,f(function(e,u){var o=(u=1==u.length&&D(u[0])?Do(u[0],Vo(l())):Do(c(u,1),Vo(l()))).length;return f(function(n){for(var t=-1,r=U(n.length,o);++t<r;)n[t]=u[t].call(this,n[t]);return Wo(e,this,n)})})),Iu=f(function(n,t){return mt(n,32,ni,t,Jo(t,Wt(Iu)))}),Ru=f(function(n,t){return mt(n,64,ni,t,Jo(t,Wt(Ru)))}),zu=Ot(function(n,t){return mt(n,256,ni,ni,ni,t)}),Wu=bt(ln),Bu=bt(function(n,t){return t<=n}),Lu=gn(function(){return arguments}())?gn:function(n){return j(n)&&B.call(n,"callee")&&!ce.call(n,"callee")},D=R.isArray,Uu=af?Vo(af):function(n){return j(n)&&"[object ArrayBuffer]"==r(n)},Cu=ee||$r,ee=lf?Vo(lf):function(n){return j(n)&&"[object Date]"==r(n)},Du=sf?Vo(sf):function(n){return j(n)&&"[object Map]"==C(n)},Mu=hf?Vo(hf):function(n){return j(n)&&"[object RegExp]"==r(n)},Tu=pf?Vo(pf):function(n){return j(n)&&"[object Set]"==C(n)},$u=_f?Vo(_f):function(n){return j(n)&&br(n.length)&&!!ii[r(n)]},Fu=bt(jn),Nu=bt(function(n,t){return n<=t}),Pu=et(function(n,t){if(Nt(t)||h(t))tt(t,S(t),n);else for(var r in t)B.call(t,r)&&q(n,r,t[r])}),Zu=et(function(n,t){tt(t,O(t),n)}),qu=et(function(n,t,r,e){tt(t,O(t),n,e)}),Vu=et(function(n,t,r,e){tt(t,S(t),n,e)}),Ku=Ot(J),Gu=f(function(n,t){n=z(n);var r=-1,e=t.length,u=2<e?t[2]:ni;for(u&&s(t[0],t[1],u)&&(e=1);++r<e;)for(var o=O(u=t[r]),i=-1,f=o.length;++i<f;){var c=o[i],a=n[c];(a===ni||y(a,Gr[c])&&!B.call(n,c))&&(n[c]=u[c])}return n}),Hu=f(function(n){return n.push(ni,Et),Wo(no,ni,n)}),Ju=pt(function(n,t,r){n[t=null!=t&&"function"!=typeof t.toString?Xr.call(t):t]=r},Lr(I)),Yu=pt(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=Xr.call(t)),B.call(n,t)?n[t].push(r):n[t]=[r]},l),Qu=f(_n),Xu=et(function(n,t,r){En(n,t,r)}),no=et(function(n,t,r,e){En(n,t,r,e)}),to=Ot(function(t,n){var r={};if(null!=t){var e=!1;n=Do(n,function(n){return n=Kn(n,t),e=e||1<n.length,n}),tt(t,Rt(t),r),e&&(r=v(r,7,kt));for(var u=n.length;u--;)$n(r,n[u])}return r}),ro=Ot(function(n,t){return null==n?{}:On(r=n,t,function(n,t){return Or(r,t)});var r}),eo=wt(S),uo=wt(O),oo=ft(function(n,t,r){return t=t.toLowerCase(),n+(r?zr(t):t)}),io=ft(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),fo=ft(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),co=it("toLowerCase"),ao=ft(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),lo=ft(function(n,t,r){return n+(r?" ":"")+ho(t)}),so=ft(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),ho=it("toUpperCase"),po=f(function(n,t){try{return Wo(n,ni,t)}catch(n){return dr(n)?n:new Nr(n)}}),_o=Ot(function(t,n){return Bo(n,function(n){n=Gt(n),H(t,n,Eu(t[n],t))}),t}),go=st(),vo=st(!0),yo=f(function(t,r){return function(n){return _n(n,t,r)}}),bo=f(function(t,r){return function(n){return _n(t,n,r)}}),xo=gt(Do),jo=gt(si),wo=gt($o),mo=yt(),Ao=yt(!0),Eo=_t(function(n,t){return n+t},0),ko=jt("ceil"),So=_t(function(n,t){return n/t},1),Oo=jt("floor"),Io=_t(function(n,t){return n*t},1),Ro=jt("round"),zo=_t(function(n,t){return n-t},0);return p.after=function(n,t){if("function"!=typeof t)throw new W("Expected a function");return n=m(n),function(){if(--n<1)return t.apply(this,arguments)}},p.ary=sr,p.assign=Pu,p.assignIn=Zu,p.assignInWith=qu,p.assignWith=Vu,p.at=Ku,p.before=hr,p.bind=Eu,p.bindAll=_o,p.bindKey=ku,p.castArray=function(){var n;return arguments.length?D(n=arguments[0])?n:[n]:[]},p.chain=ir,p.chunk=function(n,t,r){if(t=(r?s(n,t,r):t===ni)?1:L(m(t),0),!(r=null==n?0:n.length)||t<1)return[];for(var e=0,u=0,o=R(ve(r/t));e<r;)o[u++]=i(n,e,e+=t);return o},p.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var o=n[t];o&&(u[e++]=o)}return u},p.concat=function(){var n=arguments.length;if(!n)return[];for(var t=R(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return Mo(D(r)?E(r):[r],c(t,1))},p.cond=function(e){var u=null==e?0:e.length,t=l();return e=u?Do(e,function(n){if("function"!=typeof n[1])throw new W("Expected a function");return[t(n[0]),n[1]]}):[],f(function(n){for(var t=-1;++t<u;){var r=e[t];if(Wo(r[0],this,n))return Wo(r[1],this,n)}})},p.conforms=function(n){return t=v(n,1),r=S(t),function(n){return Q(n,t,r)};var t,r},p.constant=Lr,p.countBy=du,p.create=function(n,t){n=$e(n);return null==t?n:G(n,t)},p.curry=function n(t,r,e){return(t=mt(t,8,ni,ni,ni,ni,ni,r=e?ni:r)).placeholder=n.placeholder,t},p.curryRight=function n(t,r,e){return(t=mt(t,16,ni,ni,ni,ni,ni,r=e?ni:r)).placeholder=n.placeholder,t},p.debounce=pr,p.defaults=Gu,p.defaultsDeep=Hu,p.defer=ge,p.delay=Su,p.difference=Fr,p.differenceBy=Oe,p.differenceWith=n,p.drop=function(n,t,r){var e=null==n?0:n.length;return e?i(n,(t=r||t===ni?1:m(t))<0?0:t,e):[]},p.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?i(n,0,(t=e-(t=r||t===ni?1:m(t)))<0?0:t):[]},p.dropRightWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!0,!0):[]},p.dropWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!0):[]},p.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&"number"!=typeof r&&s(n,t,r)&&(r=0,e=u),u=n.length,(r=m(r))<0&&(r=u<-r?0:u+r),(e=e===ni||u<e?u:m(e))<0&&(e+=u),e=e<r?0:Er(e);r<e;)n[r++]=t;return n},p.filter=function(n,t){return(D(n)?Lo:en)(n,l(t,3))},p.flatMap=function(n,t){return c(lr(n,t),1)},p.flatMapDeep=function(n,t){return c(lr(n,t),ti)},p.flatMapDepth=function(n,t,r){return r=r===ni?1:m(r),c(lr(n,t),r)},p.flatten=nr,p.flattenDeep=function(n){return null!=n&&n.length?c(n,ti):[]},p.flattenDepth=function(n,t){return null!=n&&n.length?c(n,t=t===ni?1:m(t)):[]},p.flip=function(n){return mt(n,512)},p.flow=go,p.flowRight=vo,p.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},p.functions=function(n){return null==n?[]:fn(n,S(n))},p.functionsIn=function(n){return null==n?[]:fn(n,O(n))},p.groupBy=bu,p.initial=function(n){return null!=n&&n.length?i(n,0,-1):[]},p.intersection=Hr,p.intersectionBy=de,p.intersectionWith=t,p.invert=Ju,p.invertBy=Yu,p.invokeMap=xu,p.iteratee=Ur,p.keyBy=ju,p.keys=S,p.keysIn=O,p.map=lr,p.mapKeys=function(n,e){var u={};return e=l(e,3),un(n,function(n,t,r){H(u,e(n,t,r),n)}),u},p.mapValues=function(n,e){var u={};return e=l(e,3),un(n,function(n,t,r){H(u,t,e(n,t,r))}),u},p.matches=function(n){return mn(v(n,1))},p.matchesProperty=function(n,t){return An(n,v(t,1))},p.memoize=_r,p.merge=Xu,p.mergeWith=no,p.method=yo,p.methodOf=bo,p.mixin=Cr,p.negate=gr,p.nthArg=function(t){return t=m(t),f(function(n){return kn(n,t)})},p.omit=to,p.omitBy=function(n,t){return Ir(n,gr(l(t)))},p.once=function(n){return hr(2,n)},p.orderBy=function(n,t,r,e){return null==n?[]:Sn(n,t=D(t)?t:null==t?[]:[t],r=D(r=e?ni:r)?r:null==r?[]:[r])},p.over=xo,p.overArgs=Ou,p.overEvery=jo,p.overSome=wo,p.partial=Iu,p.partialRight=Ru,p.partition=wu,p.pick=ro,p.pickBy=Ir,p.property=Mr,p.propertyOf=function(t){return function(n){return null==t?ni:cn(t,n)}},p.pull=_e,p.pullAll=rr,p.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?In(n,t,l(r,2)):n},p.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?In(n,t,ni,r):n},p.pullAt=ou,p.range=mo,p.rangeRight=Ao,p.rearg=zu,p.reject=function(n,t){return(D(n)?Lo:en)(n,gr(l(t,3)))},p.remove=function(n,t){var r=[];if(n&&n.length){var e=-1,u=[],o=n.length;for(t=l(t,3);++e<o;){var i=n[e];t(i,e,n)&&(r.push(i),u.push(e))}Rn(n,u)}return r},p.rest=function(n,t){if("function"!=typeof n)throw new W("Expected a function");return f(n,t=t===ni?t:m(t))},p.reverse=er,p.sampleSize=function(n,t,r){return t=(r?s(n,t,r):t===ni)?1:m(t),(D(n)?function(n,t){return Kt(E(n),Y(t,0,n.length))}:function(n,t){return Kt(n=Rr(n),Y(t,0,n.length))})(n,t)},p.set=function(n,t,r){return null==n?n:Bn(n,t,r)},p.setWith=function(n,t,r,e){return e="function"==typeof e?e:ni,null==n?n:Bn(n,t,r,e)},p.shuffle=function(n){return(D(n)?function(n){return Kt(E(n))}:function(n){return Kt(Rr(n))})(n)},p.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r=r&&"number"!=typeof r&&s(n,t,r)?(t=0,e):(t=null==t?0:m(t),r===ni?e:m(r)),i(n,t,r)):[]},p.sortBy=mu,p.sortedUniq=function(n){return n&&n.length?Dn(n):[]},p.sortedUniqBy=function(n,t){return n&&n.length?Dn(n,l(t,2)):[]},p.split=function(n,t,r){return r&&"number"!=typeof r&&s(n,t,r)&&(t=r=ni),(r=r===ni?4294967295:r>>>0)?(n=k(n))&&("string"==typeof t||null!=t&&!Mu(t))&&!(t=a(t))&&oi.test(n)?Gn(Xo(n),0,r):n.split(t,r):[]},p.spread=function(r,e){if("function"!=typeof r)throw new W("Expected a function");return e=null==e?0:L(m(e),0),f(function(n){var t=n[e];return n=Gn(n,0,e),t&&Mo(n,t),Wo(r,this,n)})},p.tail=function(n){var t=null==n?0:n.length;return t?i(n,1,t):[]},p.take=function(n,t,r){return n&&n.length?i(n,0,(t=r||t===ni?1:m(t))<0?0:t):[]},p.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?i(n,(t=e-(t=r||t===ni?1:m(t)))<0?0:t,e):[]},p.takeRightWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!1,!0):[]},p.takeWhile=function(n,t){return n&&n.length?Fn(n,l(t,3)):[]},p.tap=function(n,t){return t(n),n},p.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new W("Expected a function");return x(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),pr(n,t,{leading:e,maxWait:t,trailing:u})},p.thru=fr,p.toArray=mr,p.toPairs=eo,p.toPairsIn=uo,p.toPath=function(n){return D(n)?Do(n,Gt):w(n)?[n]:E(uu(k(n)))},p.toPlainObject=kr,p.transform=function(n,e,u){var t,r=D(n),o=r||Cu(n)||$u(n);return e=l(e,4),null==u&&(t=n&&n.constructor,u=o?r?new t:[]:x(n)&&vr(t)?$e(ie(n)):{}),(o?Bo:un)(n,function(n,t,r){return e(u,n,t,r)}),u},p.unary=function(n){return sr(n,1)},p.union=iu,p.unionBy=fu,p.unionWith=cu,p.uniq=function(n){return n&&n.length?Tn(n):[]},p.uniqBy=function(n,t){return n&&n.length?Tn(n,l(t,2)):[]},p.uniqWith=function(n,t){return t="function"==typeof t?t:ni,n&&n.length?Tn(n,ni,t):[]},p.unset=function(n,t){return null==n||$n(n,t)},p.unzip=ur,p.unzipWith=or,p.update=function(n,t,r){return null==n?n:Bn(n,t,Vn(r)(cn(n,t)),void 0)},p.updateWith=function(n,t,r,e){return e="function"==typeof e?e:ni,n=null!=n?Bn(n,t,Vn(r)(cn(n,t)),e):n},p.values=Rr,p.valuesIn=function(n){return null==n?[]:Ko(n,O(n))},p.without=au,p.words=Br,p.wrap=function(n,t){return Iu(Vn(t),n)},p.xor=lu,p.xorBy=su,p.xorWith=hu,p.zip=pu,p.zipObject=function(n,t){return Zn(n||[],t||[],q)},p.zipObjectDeep=function(n,t){return Zn(n||[],t||[],Bn)},p.zipWith=_u,p.entries=eo,p.entriesIn=uo,p.extend=Zu,p.extendWith=qu,Cr(p,p),p.add=Eo,p.attempt=po,p.camelCase=oo,p.capitalize=zr,p.ceil=ko,p.clamp=function(n,t,r){return r===ni&&(r=t,t=ni),r!==ni&&(r=(r=A(r))==r?r:0),t!==ni&&(t=(t=A(t))==t?t:0),Y(A(n),t,r)},p.clone=function(n){return v(n,4)},p.cloneDeep=function(n){return v(n,5)},p.cloneDeepWith=function(n,t){return v(n,5,t="function"==typeof t?t:ni)},p.cloneWith=function(n,t){return v(n,4,t="function"==typeof t?t:ni)},p.conformsTo=function(n,t){return null==t||Q(n,t,S(t))},p.deburr=Wr,p.defaultTo=function(n,t){return null==n||n!=n?t:n},p.divide=So,p.endsWith=function(n,t,r){n=k(n),t=a(t);var e=n.length,e=r=r===ni?e:Y(m(r),0,e);return 0<=(r-=t.length)&&n.slice(r,e)==t},p.eq=y,p.escape=function(n){return(n=k(n))&&Ii.test(n)?n.replace(Si,df):n},p.escapeRegExp=function(n){return(n=k(n))&&Ci.test(n)?n.replace(ei,"\\$&"):n},p.every=function(n,t,r){return(D(n)?si:tn)(n,l(t=r&&s(n,t,r)?ni:t,3))},p.find=vu,p.findIndex=Qt,p.findKey=function(n,t){return pi(n,l(t,3),un)},p.findLast=yu,p.findLastIndex=Xt,p.findLastKey=function(n,t){return pi(n,l(t,3),on)},p.floor=Oo,p.forEach=cr,p.forEachRight=ar,p.forIn=function(n,t){return null==n?n:Ve(n,l(t,3),O)},p.forInRight=function(n,t){return null==n?n:Ke(n,l(t,3),O)},p.forOwn=function(n,t){return n&&un(n,l(t,3))},p.forOwnRight=function(n,t){return n&&on(n,l(t,3))},p.get=Sr,p.gt=Wu,p.gte=Bu,p.has=function(n,t){return null!=n&&Ct(n,t,sn)},p.hasIn=Or,p.head=tr,p.identity=I,p.includes=function(n,t,r,e){return n=h(n)?n:Rr(n),r=r&&!e?m(r):0,e=n.length,r<0&&(r=L(e+r,0)),wr(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<No(n,t,r)},p.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?No(n,t,r=(r=null==r?0:m(r))<0?L(e+r,0):r):-1},p.inRange=function(n,t,r){return t=Ar(t),r===ni?(r=t,t=0):r=Ar(r),(n=A(n))>=U(t,r)&&n<L(t,r)},p.invoke=Qu,p.isArguments=Lu,p.isArray=D,p.isArrayBuffer=Uu,p.isArrayLike=h,p.isArrayLikeObject=b,p.isBoolean=function(n){return!0===n||!1===n||j(n)&&"[object Boolean]"==r(n)},p.isBuffer=Cu,p.isDate=ee,p.isElement=function(n){return j(n)&&1===n.nodeType&&!jr(n)},p.isEmpty=function(n){if(null!=n){if(h(n)&&(D(n)||"string"==typeof n||"function"==typeof n.splice||Cu(n)||$u(n)||Lu(n)))return!n.length;var t,r=C(n);if("[object Map]"==r||"[object Set]"==r)return!n.size;if(Nt(n))return!xn(n).length;for(t in n)if(B.call(n,t))return!1}return!0},p.isEqual=function(n,t){return dn(n,t)},p.isEqualWith=function(n,t,r){var e=(r="function"==typeof r?r:ni)?r(n,t):ni;return e===ni?dn(n,t,ni,r):!!e},p.isError=dr,p.isFinite=function(n){return"number"==typeof n&&xe(n)},p.isFunction=vr,p.isInteger=yr,p.isLength=br,p.isMap=Du,p.isMatch=function(n,t){return n===t||vn(n,t,Lt(t))},p.isMatchWith=function(n,t,r){return r="function"==typeof r?r:ni,vn(n,t,Lt(t),r)},p.isNaN=function(n){return xr(n)&&n!=+n},p.isNative=function(n){if(nu(n))throw new Nr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yn(n)},p.isNil=function(n){return null==n},p.isNull=function(n){return null===n},p.isNumber=xr,p.isObject=x,p.isObjectLike=j,p.isPlainObject=jr,p.isRegExp=Mu,p.isSafeInteger=function(n){return yr(n)&&-9007199254740991<=n&&n<=9007199254740991},p.isSet=Tu,p.isString=wr,p.isSymbol=w,p.isTypedArray=$u,p.isUndefined=function(n){return n===ni},p.isWeakMap=function(n){return j(n)&&"[object WeakMap]"==C(n)},p.isWeakSet=function(n){return j(n)&&"[object WeakSet]"==r(n)},p.join=function(n,t){return null==n?"":je.call(n,t)},p.kebabCase=io,p.last=e,p.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==ni&&(u=(u=m(r))<0?L(e+u,0):U(u,e-1)),t==t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=Fo(n,gi,u,!0);return n},p.lowerCase=fo,p.lowerFirst=co,p.lt=Fu,p.lte=Nu,p.max=function(n){return n&&n.length?rn(n,I,ln):ni},p.maxBy=function(n,t){return n&&n.length?rn(n,l(t,2),ln):ni},p.mean=function(n){return di(n,I)},p.meanBy=function(n,t){return di(n,l(t,2))},p.min=function(n){return n&&n.length?rn(n,I,jn):ni},p.minBy=function(n,t){return n&&n.length?rn(n,l(t,2),jn):ni},p.stubArray=Tr,p.stubFalse=$r,p.stubObject=function(){return{}},p.stubString=function(){return""},p.stubTrue=function(){return!0},p.multiply=Io,p.nth=function(n,t){return n&&n.length?kn(n,m(t)):ni},p.noConflict=function(){return ci._===this&&(ci._=te),this},p.noop=Dr,p.now=Au,p.pad=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return!t||t<=e?n:dt(ye(t=(t-e)/2),r)+n+dt(ve(t),r)},p.padEnd=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return t&&e<t?n+dt(t-e,r):n},p.padStart=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return t&&e<t?dt(t-e,r)+n:n},p.parseInt=function(n,t,r){return t=r||null==t?0:t&&+t,Ae(k(n).replace(Mi,""),t||0)},p.random=function(n,t,r){var e;return r&&"boolean"!=typeof r&&s(n,t,r)&&(t=r=ni),r===ni&&("boolean"==typeof t?(r=t,t=ni):"boolean"==typeof n&&(r=n,n=ni)),n===ni&&t===ni?(n=0,t=1):(n=Ar(n),t===ni?(t=n,n=0):t=Ar(t)),t<n&&(e=n,n=t,t=e),r||n%1||t%1?(r=Ee(),U(n+r*(t-n+of("1e-"+((r+"").length-1))),t)):zn(n,t)},p.reduce=function(n,t,r){var e=D(n)?To:vi,u=arguments.length<3;return e(n,l(t,4),r,u,Ze)},p.reduceRight=function(n,t,r){var e=D(n)?hi:vi,u=arguments.length<3;return e(n,l(t,4),r,u,qe)},p.repeat=function(n,t,r){return t=(r?s(n,t,r):t===ni)?1:m(t),Wn(k(n),t)},p.replace=function(){var n=arguments,t=k(n[0]);return n.length<3?t:t.replace(n[1],n[2])},p.result=function(n,t,r){var e=-1,u=(t=Kn(t,n)).length;for(u||(u=1,n=ni);++e<u;){var o=null==n?ni:n[Gt(t[e])];o===ni&&(e=u,o=r),n=vr(o)?o.call(n):o}return n},p.round=Ro,p.runInContext=u,p.sample=function(n){return(D(n)?P:function(n){return P(Rr(n))})(n)},p.size=function(n){var t;return null==n?0:h(n)?wr(n)?Qo(n):n.length:"[object Map]"==(t=C(n))||"[object Set]"==t?n.size:xn(n).length},p.snakeCase=ao,p.some=function(n,t,r){return(D(n)?$o:Ln)(n,l(t=r&&s(n,t,r)?ni:t,3))},p.sortedIndex=function(n,t){return Un(n,t)},p.sortedIndexBy=function(n,t,r){return Cn(n,t,l(r,2))},p.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Un(n,t);if(e<r&&y(n[e],t))return e}return-1},p.sortedLastIndex=function(n,t){return Un(n,t,!0)},p.sortedLastIndexBy=function(n,t,r){return Cn(n,t,l(r,2),!0)},p.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Un(n,t,!0)-1;if(y(n[r],t))return r}return-1},p.startCase=lo,p.startsWith=function(n,t,r){return n=k(n),r=null==r?0:Y(m(r),0,n.length),t=a(t),n.slice(r,r+t.length)==t},p.subtract=zo,p.sum=function(n){return n&&n.length?Zo(n,I):0},p.sumBy=function(n,t){return n&&n.length?Zo(n,l(t,2)):0},p.template=function(i,n,t){var r=p.templateSettings;t&&s(i,n,t)&&(n=ni),i=k(i),n=qu({},n,r,At);var f,c,e=S(t=qu({},n.imports,r.imports,At)),u=Ko(t,e),a=0,l=(t=n.interpolate||ui,"__p+='"),o=(t=qr((n.escape||ui).source+"|"+t.source+"|"+(t===Wi?qi:ui).source+"|"+(n.evaluate||ui).source+"|$","g"),"sourceURL"in n?"//# sourceURL="+n.sourceURL+"\n":"");if(i.replace(t,function(n,t,r,e,u,o){return r=r||e,l+=i.slice(a,o).replace(Xi,xi),t&&(f=!0,l+="'+__e("+t+")+'"),u&&(c=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),a=o+n.length,n}),l+="';",(n=n.variable)||(l="with(obj){"+l+"}"),l=(c?l.replace(mi,""):l).replace(Ai,"$1").replace(Ei,"$1;"),l="function("+(n||"obj")+"){"+(n?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(c?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",(n=po(function(){return Pr(e,o+"return "+l).apply(ni,u)})).source=l,dr(n))throw n;return n},p.times=function(n,t){if((n=m(n))<1||9007199254740991<n)return[];var r=4294967295,e=U(n,4294967295);for(n-=4294967295,e=qo(e,t=l(t));++r<n;)t(r);return e},p.toFinite=Ar,p.toInteger=m,p.toLength=Er,p.toLower=function(n){return k(n).toLowerCase()},p.toNumber=A,p.toSafeInteger=function(n){return n?Y(m(n),-9007199254740991,9007199254740991):0===n?n:0},p.toString=k,p.toUpper=function(n){return k(n).toUpperCase()},p.trim=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Di,""):n&&(t=a(t))?Gn(n=Xo(n),t=yi(n,r=Xo(t)),r=bi(n,r)+1).join(""):n},p.trimEnd=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Ti,""):n&&(t=a(t))?Gn(n=Xo(n),0,t=bi(n,Xo(t))+1).join(""):n},p.trimStart=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Mi,""):n&&(t=a(t))?Gn(n=Xo(n),t=yi(n,Xo(t))).join(""):n},p.truncate=function(n,t){var r,e,u=30,o="...",t=(x(t)&&(r="separator"in t?t.separator:r,u="length"in t?m(t.length):u,o="omission"in t?a(t.omission):o),(n=k(n)).length);if((t=oi.test(n)?(e=Xo(n)).length:t)<=u)return n;if((t=u-Qo(o))<1)return o;if(u=e?Gn(e,0,t).join(""):n.slice(0,t),r!==ni)if(e&&(t+=u.length-t),Mu(r)){if(n.slice(t).search(r)){var i=u;for((r=r.global?r:qr(r.source,k(Vi.exec(r))+"g")).lastIndex=0;e=r.exec(i);)var f=e.index;u=u.slice(0,f===ni?t:f)}}else n.indexOf(a(r),t)!=t&&-1<(r=u.lastIndexOf(r))&&(u=u.slice(0,r));return u+o},p.unescape=function(n){return(n=k(n))&&Oi.test(n)?n.replace(ki,vf):n},p.uniqueId=function(n){var t=++Yr;return k(n)+t},p.upperCase=so,p.upperFirst=ho,p.each=cr,p.eachRight=ar,p.first=tr,Cr(p,(Pe={},un(p,function(n,t){B.call(p.prototype,t)||(Pe[t]=n)}),Pe),{chain:!1}),p.VERSION="4.17.10",Bo("bind bindKey curry curryRight partial partialRight".split(" "),function(n){p[n].placeholder=p}),Bo(["drop","take"],function(r,e){g.prototype[r]=function(n){n=n===ni?1:L(m(n),0);var t=this.__filtered__&&!e?new g(this):this.clone();return t.__filtered__?t.__takeCount__=U(n,t.__takeCount__):t.__views__.push({size:U(n,4294967295),type:r+(t.__dir__<0?"Right":"")}),t},g.prototype[r+"Right"]=function(n){return this.reverse()[r](n).reverse()}}),Bo(["filter","map","takeWhile"],function(n,t){var r=t+1,e=1==r||3==r;g.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:l(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),Bo(["head","last"],function(n,t){var r="take"+(t?"Right":"");g.prototype[n]=function(){return this[r](1).value()[0]}}),Bo(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");g.prototype[n]=function(){return this.__filtered__?new g(this):this[r](1)}}),g.prototype.compact=function(){return this.filter(I)},g.prototype.find=function(n){return this.filter(n).head()},g.prototype.findLast=function(n){return this.reverse().find(n)},g.prototype.invokeMap=f(function(t,r){return"function"==typeof t?new g(this):this.map(function(n){return _n(n,t,r)})}),g.prototype.reject=function(n){return this.filter(gr(l(n)))},g.prototype.slice=function(n,t){n=m(n);var r=this;return r.__filtered__&&(0<n||t<0)?new g(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),r=t!==ni?(t=m(t))<0?r.dropRight(-t):r.take(t-n):r)},g.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},g.prototype.toArray=function(){return this.take(4294967295)},un(g.prototype,function(c,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),s=p[l?"take"+("last"==n?"Right":""):n],h=l||/^find/.test(n);s&&(p.prototype[n]=function(){function n(n){return n=s.apply(p,Mo([n],r)),l&&i?n[0]:n}var t=this.__wrapped__,r=l?[1]:arguments,e=t instanceof g,u=r[0],o=e||D(t),i=(o&&a&&"function"==typeof u&&1!=u.length&&(e=o=!1),this.__chain__),f=!!this.__actions__.length,u=h&&!i,e=e&&!f;return!h&&o?(t=e?t:new g(this),(t=c.apply(t,r)).__actions__.push({func:fr,args:[n],thisArg:ni}),new _(t,i)):u&&e?c.apply(this,r):(t=this.thru(n),u?l?t.value()[0]:t.value():t)})}),Bo("pop push shift sort splice unshift".split(" "),function(n){var r=Kr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:pop|shift)$/.test(n);p.prototype[n]=function(){var n,t=arguments;return u&&!this.__chain__?(n=this.value(),r.apply(D(n)?n:[],t)):this[e](function(n){return r.apply(D(n)?n:[],t)})}}),un(g.prototype,function(n,t){var r,e=p[t];e&&(r=e.name+"",(We[r]||(We[r]=[])).push({name:t,func:e}))}),We[ht(ni,2).name]=[{name:"wrapper",func:ni}],g.prototype.clone=function(){var n=new g(this.__wrapped__);return n.__actions__=E(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=E(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=E(this.__views__),n},g.prototype.reverse=function(){var n;return this.__filtered__?((n=new g(this)).__dir__=-1,n.__filtered__=!0):(n=this.clone()).__dir__*=-1,n},g.prototype.value=function(){for(var n=this.__wrapped__.value(),t=this.__dir__,r=D(n),e=t<0,u=r?n.length:0,o=u,i=this.__views__,f=0,c=-1,a=i.length;++c<a;){var l=i[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":o-=s;break;case"take":o=U(o,f+s);break;case"takeRight":f=L(f,o-s)}}if(i=(o={start:f,end:o}).start,o=(f=o.end)-i,i=e?f:i-1,c=(f=this.__iteratees__).length,a=0,l=U(o,this.__takeCount__),!r||!e&&u==o&&l==o)return Nn(n,this.__actions__);r=[];n:for(;o--&&a<l;){for(e=-1,u=n[i+=t];++e<c;){var s=(h=f[e]).type,h=(0,h.iteratee)(u);if(2==s)u=h;else if(!h){if(1==s)continue n;break n}}r[a++]=u}return r},p.prototype.at=gu,p.prototype.chain=function(){return ir(this)},p.prototype.commit=function(){return new _(this.value(),this.__chain__)},p.prototype.next=function(){this.__values__===ni&&(this.__values__=mr(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?ni:this.__values__[this.__index__++]}},p.prototype.plant=function(n){for(var t,r=this;r instanceof o;)var e=Yt(r),u=(e.__index__=0,e.__values__=ni,t?u.__wrapped__=e:t=e,e),r=r.__wrapped__;return u.__wrapped__=n,t},p.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof g?((n=(n=this.__actions__.length?new g(this):n).reverse()).__actions__.push({func:fr,args:[er],thisArg:ni}),new _(n,this.__chain__)):this.thru(er)},p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=function(){return Nn(this.__wrapped__,this.__actions__)},p.prototype.first=p.prototype.head,se&&(p.prototype[se]=function(){return this}),p}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ci._=ai,define(function(){return ai})):e?((e.exports=ai)._=ai,r._=ai):ci._=ai}.call(this);
/**
 * gridstack.js 0.4.0
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2018 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(t){if("function"==typeof define&&define.amd)define(["jquery","lodash"],t);else{if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(t){}try{_=require("lodash")}catch(t){}}t(jQuery,_)}}(function(g,h){function t(t,e,i){function o(){return console.warn("gridstack.js: Function `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+i+"`. It will be **completely** removed in v1.0."),t.apply(this,arguments)}return o.prototype=t.prototype,o}function l(t,e){console.warn("gridstack.js: Option `"+t+"` is deprecated as of v0.2.5 and has been replaced with `"+e+"`. It will be **completely** removed in v1.0.")}var e=window,c={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,e,i){return i=i||h.chain(t).map(function(t){return t.x+t.width}).max().value(),e=-1!=e?1:-1,h.sortBy(t,[function(t){return e*(t.x+t.y*i)}])},createStylesheet:function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.setAttribute("data-gs-style-id",t),e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet},removeStylesheet:function(t){g("STYLE[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?!(""===(t=t.toLowerCase())||"no"==t||"false"==t||"0"==t):Boolean(t)},_collisionNodeCheck:function(t){return t!=this.node&&c.isIntercepted(t,this.nn)},_didCollide:function(t){return c.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return c.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var e="px";if(t&&h.isString(t)){var i=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!i)throw new Error("Invalid height");e=i[2]||"px",t=parseFloat(i[1])}return{height:t,unit:e}},removePositioningStyles:function(t){t=t[0].style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")},getScrollParent:function(t){t=null==t?null:t.scrollHeight>t.clientHeight?t:c.getScrollParent(t.parentNode);return t},updateScrollPosition:function(t,e,i){var o,a,s,r,n=t.getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight;(n.top<0||n.bottom>d)&&(o=n.bottom-d,a=n.top,r=(s=c.getScrollParent(t)).scrollTop,null!=s)&&(n.top<0&&i<0?t.offsetHeight>d?s.scrollTop+=i:s.scrollTop+=Math.abs(a)>Math.abs(i)?i:a:0<i&&(t.offsetHeight>d?s.scrollTop+=i:s.scrollTop+=i<o?i:o),e.position.top+=s.scrollTop-r)}};function p(t){this.grid=t}c.is_intercepted=t(c.isIntercepted,"is_intercepted","isIntercepted"),c.create_stylesheet=t(c.createStylesheet,"create_stylesheet","createStylesheet"),c.remove_stylesheet=t(c.removeStylesheet,"remove_stylesheet","removeStylesheet"),c.insert_css_rule=t(c.insertCSSRule,"insert_css_rule","insertCSSRule"),p.registeredPlugins=[],p.registerPlugin=function(t){p.registeredPlugins.push(t)},p.prototype.resizable=function(t,e){return this},p.prototype.draggable=function(t,e){return this},p.prototype.droppable=function(t,e){return this},p.prototype.isDroppable=function(t){return!1},p.prototype.on=function(t,e,i){return this};function _(t,e,i,o,a){this.width=t,this.float=i||!1,this.height=o||0,this.nodes=a||[],this.onchange=e||function(){},this._updateCounter=0,this._float=this.float,this._addedNodes=[],this._removedNodes=[]}function i(t,e){var i,o,a,s,r,n,d=this,t=(e=e||{},this.container=g(t),void 0!==e.handle_class&&(e.handleClass=e.handle_class,l("handle_class","handleClass")),void 0!==e.item_class&&(e.itemClass=e.item_class,l("item_class","itemClass")),void 0!==e.placeholder_class&&(e.placeholderClass=e.placeholder_class,l("placeholder_class","placeholderClass")),void 0!==e.placeholder_text&&(e.placeholderText=e.placeholder_text,l("placeholder_text","placeholderText")),void 0!==e.cell_height&&(e.cellHeight=e.cell_height,l("cell_height","cellHeight")),void 0!==e.vertical_margin&&(e.verticalMargin=e.vertical_margin,l("vertical_margin","verticalMargin")),void 0!==e.min_width&&(e.minWidth=e.min_width,l("min_width","minWidth")),void 0!==e.static_grid&&(e.staticGrid=e.static_grid,l("static_grid","staticGrid")),void 0!==e.is_nested&&(e.isNested=e.is_nested,l("is_nested","isNested")),void 0!==e.always_show_resize_handle&&(e.alwaysShowResizeHandle=e.always_show_resize_handle,l("always_show_resize_handle","alwaysShowResizeHandle")),e.itemClass=e.itemClass||"grid-stack-item",0<this.container.closest("."+e.itemClass).length);this.opts=h.defaults(e||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:e.alwaysShowResizeHandle||!1,resizable:h.defaults(e.resizable||{},{autoHide:!e.alwaysShowResizeHandle,handles:"se"}),draggable:h.defaults(e.draggable||{},{handle:(e.handleClass?"."+e.handleClass:e.handle||"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:e.disableDrag||!1,disableResize:e.disableResize||!1,rtl:"auto",removable:!1,removableOptions:h.defaults(e.removableOptions||{},{accept:"."+e.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:e.disableOneColumnMode||!1,oneColumnModeClass:e.oneColumnModeClass||"grid-stack-one-column-mode",ddPlugin:null}),!1===this.opts.ddPlugin?this.opts.ddPlugin=p:null===this.opts.ddPlugin&&(this.opts.ddPlugin=h.first(p.registeredPlugins)||p),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.container.css("direction")),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=t,(o="auto"===this.opts.cellHeight)?d.cellHeight(d.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),t&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new _(this.opts.width,function(t,e){e=void 0===e||e;var i=0;h.each(this.nodes,function(t){i=Math.max(i,t.y+t.height)}),h.each(t,function(t){e&&null===t._id?t.el&&t.el.remove():t.el.attr("data-gs-x",t.x).attr("data-gs-y",t.y).attr("data-gs-width",t.width).attr("data-gs-height",t.height)}),d._updateStyles(i+10)},this.opts.float,this.opts.height),this.opts.auto&&(a=[],(s=this).container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,e){e=g(e),a.push({el:e,i:parseInt(e.attr("data-gs-x"))+parseInt(e.attr("data-gs-y"))*s.opts.width})}),h.chain(a).sortBy(function(t){return t.i}).each(function(t){d._prepareElement(t.el)}).value()),this.setAnimation(this.opts.animate),this.placeholder=g('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=h.throttle(function(){d.cellHeight(d.cellWidth(),!1)},100),this.onResizeHandler=function(){o&&d._updateHeightsOnResize(),d._isOneColumnMode()&&!d.opts.disableOneColumnMode?i||(d.container.addClass(d.opts.oneColumnModeClass),i=!0,d.grid._sortNodes(),h.each(d.grid.nodes,function(t){d.container.append(t.el),d.opts.staticGrid||(d.dd.draggable(t.el,"disable"),d.dd.resizable(t.el,"disable"),t.el.trigger("resize"))})):i&&(d.container.removeClass(d.opts.oneColumnModeClass),i=!1,d.opts.staticGrid||h.each(d.grid.nodes,function(t){t.noMove||d.opts.disableDrag||d.dd.draggable(t.el,"enable"),t.noResize||d.opts.disableResize||d.dd.resizable(t.el,"enable"),t.el.trigger("resize")}))},g(window).resize(this.onResizeHandler),this.onResizeHandler(),d.opts.staticGrid||"string"!=typeof d.opts.removable||(e=g(d.opts.removable),this.dd.isDroppable(e)||this.dd.droppable(e,d.opts.removableOptions),this.dd.on(e,"dropover",function(t,e){e=g(e.draggable);e.data("_gridstack_node")._grid===d&&(e.data("inTrashZone",!0),d._setupRemovingTimeout(e))}).on(e,"dropout",function(t,e){e=g(e.draggable);e.data("_gridstack_node")._grid===d&&(e.data("inTrashZone",!1),d._clearRemovingTimeout(e))})),!d.opts.staticGrid&&d.opts.acceptWidgets&&(r=null,n=function(t,e){var i=r,o=i.data("_gridstack_node"),t=d.getCellFromPixel({left:t.pageX,top:t.pageY},!0),a=Math.max(0,t.x),t=Math.max(0,t.y);o._added||(o._added=!0,o.el=i,o.autoPosition=!0,o.x=a,o.y=t,d.grid.cleanNodes(),d.grid.beginUpdate(o),d.grid.addNode(o),d.container.append(d.placeholder),d.placeholder.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).show(),o.el=d.placeholder,o._beforeDragX=o.x,o._beforeDragY=o.y,d._updateContainerHeight()),d.grid.canMoveNode(o,a,t)&&(d.grid.moveNode(o,a,t),d._updateContainerHeight())},this.dd.droppable(d.container,{accept:function(t){var e=(t=g(t)).data("_gridstack_node");return(!e||e._grid!==d)&&t.is(!0===d.opts.acceptWidgets?".grid-stack-item":d.opts.acceptWidgets)}}).on(d.container,"dropover",function(t,e){d.container.offset();var e=g(e.draggable),i=d.cellWidth(),o=d.cellHeight(),a=e.data("_gridstack_node"),i=a?a.width:Math.ceil(e.outerWidth()/i),o=a?a.height:Math.ceil(e.outerHeight()/o),i=(r=e,d.grid._prepareNode({width:i,height:o,_added:!1,_temporary:!0}));e.data("_gridstack_node",i),e.data("_gridstack_node_orig",a),e.on("drag",n)}).on(d.container,"dropout",function(t,e){var i,e=g(e.draggable);e.data("_gridstack_node")&&(e.unbind("drag",n),(i=e.data("_gridstack_node")).el=null,d.grid.removeNode(i),d.placeholder.detach(),d._updateContainerHeight(),e.data("_gridstack_node",e.data("_gridstack_node_orig")))}).on(d.container,"drop",function(t,e){d.placeholder.detach();var i=g(e.draggable).data("_gridstack_node"),o=(i._grid=d,g(e.draggable).clone(!1)),a=(o.data("_gridstack_node",i),g(e.draggable).data("_gridstack_node_orig"));void 0!==a&&void 0!==a._grid&&a._grid._triggerRemoveEvent(),g(e.helper).remove(),i.el=o,d.placeholder.hide(),c.removePositioningStyles(o),o.find("div.ui-resizable-handle").remove(),o.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).addClass(d.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",n),d.container.append(o),d._prepareElementsByNode(o,i),d._updateContainerHeight(),d.grid._addedNodes.push(i),d._triggerAddEvent(),d._triggerChangeEvent(),d.grid.endUpdate(),g(e.draggable).unbind("drag",n),g(e.draggable).removeData("_gridstack_node"),g(e.draggable).removeData("_gridstack_node_orig")}))}var s=0;_.prototype.batchUpdate=function(){this._updateCounter=1,this.float=!0},_.prototype.commit=function(){0!==this._updateCounter&&(this._updateCounter=0,this.float=this._float,this._packNodes(),this._notify())},_.prototype.getNodeDataByDOMEl=function(e){return h.find(this.nodes,function(t){return e.get(0)===t.el.get(0)})},_.prototype._fixCollisions=function(t){this._sortNodes(-1);var e=t,i=Boolean(h.find(this.nodes,function(t){return t.locked}));for(this.float||i||(e={x:0,y:t.y,width:this.width,height:t.height});;){var o=h.find(this.nodes,h.bind(c._collisionNodeCheck,{node:t,nn:e}));if(void 0===o)return;this.moveNode(o,o.x,t.y+t.height,o.width,o.height,!0)}},_.prototype.isAreaEmpty=function(t,e,i,o){var a={x:t||0,y:e||0,width:i||1,height:o||1},t=h.find(this.nodes,h.bind(function(t){return c.isIntercepted(t,a)},this));return null==t},_.prototype._sortNodes=function(t){this.nodes=c.sort(this.nodes,t,this.width)},_.prototype._packNodes=function(){this._sortNodes(),this.float?h.each(this.nodes,h.bind(function(t,e){if(!t._updating&&void 0!==t._origY&&t.y!=t._origY)for(var i=t.y;i>=t._origY;)h.chain(this.nodes).take(e).find(h.bind(c._didCollide,{n:t,newY:i})).value()||(t._dirty=!0,t.y=i),--i},this)):h.each(this.nodes,h.bind(function(t,e){if(!t.locked)for(;0<t.y;){var i=t.y-1,o=0===e;if(!(o=0<e?void 0===h.chain(this.nodes).take(e).find(h.bind(c._didCollide,{n:t,newY:i})).value():o))break;t._dirty=t.y!=i,t.y=i}},this))},_.prototype._prepareNode=function(t,e){return(t=h.defaults(t||{},{width:1,height:1,x:0,y:0})).x=parseInt(""+t.x),t.y=parseInt(""+t.y),t.width=parseInt(""+t.width),t.height=parseInt(""+t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,t.width>this.width?t.width=this.width:t.width<1&&(t.width=1),t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.x+t.width>this.width&&(e?t.width=this.width-t.x:t.x=this.width-t.width),t.y<0&&(t.y=0),t},_.prototype._notify=function(){var t,e=Array.prototype.slice.call(arguments,0);e[0]=void 0===e[0]?[]:[e[0]],e[1]=void 0===e[1]||e[1],this._updateCounter||(t=e[0].concat(this.getDirtyNodes()),this.onchange(t,e[1]))},_.prototype.cleanNodes=function(){this._updateCounter||h.each(this.nodes,function(t){t._dirty=!1})},_.prototype.getDirtyNodes=function(){return h.filter(this.nodes,function(t){return t._dirty})},_.prototype.addNode=function(t,e){if(void 0!==(t=this._prepareNode(t)).maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),void 0!==t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),void 0!==t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),void 0!==t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t._id=++s,t._dirty=!0,t.autoPosition){this._sortNodes();for(var i=0;;++i){var o=i%this.width,a=Math.floor(i/this.width);if(!(o+t.width>this.width)&&!h.find(this.nodes,h.bind(c._isAddNodeIntercepted,{x:o,y:a,node:t}))){t.x=o,t.y=a;break}}}return this.nodes.push(t),void 0!==e&&e&&this._addedNodes.push(h.clone(t)),this._fixCollisions(t),this._packNodes(),this._notify(),t},_.prototype.removeNode=function(t,e){e=void 0===e||e,this._removedNodes.push(h.clone(t)),t._id=null,this.nodes=h.without(this.nodes,t),this._packNodes(),this._notify(t,e)},_.prototype.canMoveNode=function(e,t,i,o,a){if(!this.isNodeChangedPosition(e,t,i,o,a))return!1;var s,r=Boolean(h.find(this.nodes,function(t){return t.locked}));if(!this.height&&!r)return!0;var n=new _(this.width,null,this.float,0,h.map(this.nodes,function(t){return t==e?s=g.extend({},t):g.extend({},t)}));if(void 0===s)return!0;n.moveNode(s,t,i,o,a);t=!0;return r&&(t&=!Boolean(h.find(n.nodes,function(t){return t!=s&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.height&&(t&=n.getGridHeight()<=this.height),t},_.prototype.canBePlacedWithRespectToHeight=function(t){var e;return!this.height||((e=new _(this.width,null,this.float,0,h.map(this.nodes,function(t){return g.extend({},t)}))).addNode(t),e.getGridHeight()<=this.height)},_.prototype.isNodeChangedPosition=function(t,e,i,o,a){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(a=Math.min(a,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight)),t.x!=e||t.y!=i||t.width!=o||t.height!=a},_.prototype.moveNode=function(t,e,i,o,a,s){var r;return this.isNodeChangedPosition(t,e,i,o,a)&&("number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(a=Math.min(a,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight)),t.x==e&&t.y==i&&t.width==o&&t.height==a||(r=t.width!=o,t._dirty=!0,t.x=e,t.y=i,t.width=o,t.height=a,t.lastTriedX=e,t.lastTriedY=i,t.lastTriedWidth=o,t.lastTriedHeight=a,t=this._prepareNode(t,r),this._fixCollisions(t),s)||(this._packNodes(),this._notify())),t},_.prototype.getGridHeight=function(){return h.reduce(this.nodes,function(t,e){return Math.max(t,e.y+e.height)},0)},_.prototype.beginUpdate=function(t){h.each(this.nodes,function(t){t._origY=t.y}),t._updating=!0},_.prototype.endUpdate=function(){h.each(this.nodes,function(t){t._origY=t.y});var t=h.find(this.nodes,function(t){return t._updating});t&&(t._updating=!1)};return i.prototype._triggerChangeEvent=function(t){var e=this.grid.getDirtyNodes(),i=!1,o=[];e&&e.length&&(o.push(e),i=!0),!i&&!0!==t||this.container.trigger("change",o)},i.prototype._triggerAddEvent=function(){this.grid._addedNodes&&0<this.grid._addedNodes.length&&(this.container.trigger("added",[h.map(this.grid._addedNodes,h.clone)]),this.grid._addedNodes=[])},i.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&0<this.grid._removedNodes.length&&(this.container.trigger("removed",[h.map(this.grid._removedNodes,h.clone)]),this.grid._removedNodes=[])},i.prototype._initStyles=function(){this._stylesId&&c.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=c.createStylesheet(this._stylesId),null!==this._styles&&(this._styles._max=0)},i.prototype._updateStyles=function(t){if(null!==this._styles&&void 0!==this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if(void 0===t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&c.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var a=this._styles._max;a<t;++a)c.insertCSSRule(this._styles,i+'[data-gs-height="'+(a+1)+'"]',"height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(a+1)+'"]',"min-height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(a+1)+'"]',"max-height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-y="'+a+'"]',"top: "+e(a,a)+";",a);this._styles._max=t}}},i.prototype._updateContainerHeight=function(){var t,e;this.grid._updateCounter||(t=this.grid.getGridHeight(),0<(e=parseInt(this.container.css("min-height")))&&t<(e=(e+this.opts.verticalMargin)/(this.cellHeight()+this.opts.verticalMargin))&&(t=e),this.container.attr("data-gs-current-height",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit)))},i.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},i.prototype._setupRemovingTimeout=function(t){var e=g(t).data("_gridstack_node");!e._removeTimeout&&this.opts.removable&&(e._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),e._isAboutToRemove=!0},this.opts.removeTimeout))},i.prototype._clearRemovingTimeout=function(t){var e=g(t).data("_gridstack_node");e._removeTimeout&&(clearTimeout(e._removeTimeout),e._removeTimeout=null,t.removeClass("grid-stack-item-removing"),e._isAboutToRemove=!1)},i.prototype._prepareElementsByNode=function(n,d){function t(t,e){var i,o,a=Math.round(e.position.left/h),s=Math.floor((e.position.top+l/2)/l);if("drag"!=t.type&&(i=Math.round(e.size.width/h),o=Math.round(e.size.height/l)),"drag"==t.type){var r=e.position.top-d._prevYPix;d._prevYPix=e.position.top,c.updateScrollPosition(n[0],e,r),n.data("inTrashZone")||a<0||a>=p.grid.width||s<0||!p.grid.float&&s>p.grid.getGridHeight()?d._temporaryRemoved||(!0===p.opts.removable&&p._setupRemovingTimeout(n),a=d._beforeDragX,s=d._beforeDragY,p.placeholder.detach(),p.placeholder.hide(),p.grid.removeNode(d),p._updateContainerHeight(),d._temporaryRemoved=!0):(p._clearRemovingTimeout(n),d._temporaryRemoved&&(p.grid.addNode(d),p.placeholder.attr("data-gs-x",a).attr("data-gs-y",s).attr("data-gs-width",i).attr("data-gs-height",o).show(),p.container.append(p.placeholder),d.el=p.placeholder,d._temporaryRemoved=!1))}else if("resize"==t.type&&a<0)return;e=void 0!==i?i:d.lastTriedWidth,r=void 0!==o?o:d.lastTriedHeight,!p.grid.canMoveNode(d,a,s,i,o)||d.lastTriedX===a&&d.lastTriedY===s&&d.lastTriedWidth===e&&d.lastTriedHeight===r||(d.lastTriedX=a,d.lastTriedY=s,d.lastTriedWidth=i,d.lastTriedHeight=o,p.grid.moveNode(d,a,s,i,o),p._updateContainerHeight())}function e(t,e){p.container.append(p.placeholder);var i=g(this),o=(p.grid.cleanNodes(),p.grid.beginUpdate(d),h=p.cellWidth(),Math.ceil(i.outerHeight()/i.attr("data-gs-height")));l=p.container.height()/parseInt(p.container.attr("data-gs-current-height")),p.placeholder.attr("data-gs-x",i.attr("data-gs-x")).attr("data-gs-y",i.attr("data-gs-y")).attr("data-gs-width",i.attr("data-gs-width")).attr("data-gs-height",i.attr("data-gs-height")).show(),d.el=p.placeholder,d._beforeDragX=d.x,d._beforeDragY=d.y,d._prevYPix=e.position.top,p.dd.resizable(n,"option","minWidth",h*(d.minWidth||1)),p.dd.resizable(n,"option","minHeight",o*(d.minHeight||1)),"resizestart"==t.type&&i.find(".grid-stack-item").trigger("resizestart")}function i(t,e){var i,o=g(this);o.data("_gridstack_node")&&(i=!1,p.placeholder.detach(),d.el=o,p.placeholder.hide(),d._isAboutToRemove?(i=!0,n.data("_gridstack_node")._grid._triggerRemoveEvent(),n.removeData("_gridstack_node"),n.remove()):(p._clearRemovingTimeout(n),d._temporaryRemoved?(c.removePositioningStyles(o),o.attr("data-gs-x",d._beforeDragX).attr("data-gs-y",d._beforeDragY).attr("data-gs-width",d.width).attr("data-gs-height",d.height),d.x=d._beforeDragX,d.y=d._beforeDragY,d._temporaryRemoved=!1,p.grid.addNode(d)):(c.removePositioningStyles(o),o.attr("data-gs-x",d.x).attr("data-gs-y",d.y).attr("data-gs-width",d.width).attr("data-gs-height",d.height))),p._updateContainerHeight(),p._triggerChangeEvent(i),p.grid.endUpdate(),(i=o.find(".grid-stack")).length&&"resizestop"==t.type&&(i.each(function(t,e){g(e).data("gridstack").onResizeHandler()}),o.find(".grid-stack-item").trigger("resizestop"),o.find(".grid-stack-item").trigger("gsresizestop")),"resizestop"==t.type)&&p.container.trigger("gsresizestop",o)}var h,l,p=this;this.dd.draggable(n,{start:e,stop:i,drag:t}).resizable(n,{start:e,stop:i,resize:t}),(d.noMove||this._isOneColumnMode()&&!p.opts.disableOneColumnMode||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(n,"disable"),(d.noResize||this._isOneColumnMode()&&!p.opts.disableOneColumnMode||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(n,"disable"),n.attr("data-gs-locked",d.locked?"yes":null)},i.prototype._prepareElement=function(t,e){e=void 0!==e&&e;(t=g(t)).addClass(this.opts.itemClass);e=this.grid.addNode({x:parseInt(t.attr("data-gs-x"),10),y:parseInt(t.attr("data-gs-y"),10),width:t.attr("data-gs-width"),height:t.attr("data-gs-height"),maxWidth:t.attr("data-gs-max-width"),minWidth:t.attr("data-gs-min-width"),maxHeight:t.attr("data-gs-max-height"),minHeight:t.attr("data-gs-min-height"),autoPosition:c.toBool(t.attr("data-gs-auto-position")),noResize:c.toBool(t.attr("data-gs-no-resize")),noMove:c.toBool(t.attr("data-gs-no-move")),locked:c.toBool(t.attr("data-gs-locked")),resizeHandles:t.attr("data-gs-resize-handles"),el:t,id:t.attr("data-gs-id"),_grid:this},e);t.data("_gridstack_node",e),this._prepareElementsByNode(t,e)},i.prototype.setAnimation=function(t){t?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},i.prototype.addWidget=function(t,e,i,o,a,s,r,n,d,h,l){return t=g(t),void 0!==e&&t.attr("data-gs-x",e),void 0!==i&&t.attr("data-gs-y",i),void 0!==o&&t.attr("data-gs-width",o),void 0!==a&&t.attr("data-gs-height",a),void 0!==s&&t.attr("data-gs-auto-position",s?"yes":null),void 0!==r&&t.attr("data-gs-min-width",r),void 0!==n&&t.attr("data-gs-max-width",n),void 0!==d&&t.attr("data-gs-min-height",d),void 0!==h&&t.attr("data-gs-max-height",h),void 0!==l&&t.attr("data-gs-id",l),this.container.append(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},i.prototype.makeWidget=function(t){return t=g(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},i.prototype.willItFit=function(t,e,i,o,a){return this.grid.canBePlacedWithRespectToHeight({x:t,y:e,width:i,height:o,autoPosition:a})},i.prototype.removeWidget=function(t,e){e=void 0===e||e;var i=(i=(t=g(t)).data("_gridstack_node"))||this.grid.getNodeDataByDOMEl(t);this.grid.removeNode(i,e),t.removeData("_gridstack_node"),this._updateContainerHeight(),e&&t.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},i.prototype.removeAll=function(e){h.each(this.grid.nodes,h.bind(function(t){this.removeWidget(t.el,e)},this)),this.grid.nodes=[],this._updateContainerHeight()},i.prototype.destroy=function(t){g(window).off("resize",this.onResizeHandler),this.disable(),void 0===t||t?this.container.remove():(this.removeAll(!1),this.container.removeData("gridstack")),c.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},i.prototype.resizable=function(t,o){var a=this;return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.noResize=!o,i.noResize||a._isOneColumnMode()&&!a.opts.disableOneColumnMode?a.dd.resizable(e,"disable"):a.dd.resizable(e,"enable"))}),this},i.prototype.movable=function(t,o){var a=this;return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.noMove=!o,i.noMove||a._isOneColumnMode()&&!a.opts.disableOneColumnMode?(a.dd.draggable(e,"disable"),e.removeClass("ui-draggable-handle")):(a.dd.draggable(e,"enable"),e.addClass("ui-draggable-handle")))}),this},i.prototype.enableMove=function(t,e){this.movable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},i.prototype.enableResize=function(t,e){this.resizable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},i.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},i.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},i.prototype.locked=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.locked=o||!1,e.attr("data-gs-locked",i.locked?"yes":null))}),this},i.prototype.maxHeight=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.maxHeight=o||!1,e.attr("data-gs-max-height",o))}),this},i.prototype.minHeight=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.minHeight=o||!1,e.attr("data-gs-min-height",o))}),this},i.prototype.maxWidth=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.maxWidth=o||!1,e.attr("data-gs-max-width",o))}),this},i.prototype.minWidth=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.minWidth=o||!1,e.attr("data-gs-min-width",o))}),this},i.prototype._updateElement=function(t,e){var i,o=(t=g(t).first()).data("_gridstack_node");null!=o&&((i=this).grid.cleanNodes(),i.grid.beginUpdate(o),e.call(this,t,o),i._updateContainerHeight(),i._triggerChangeEvent(),i.grid.endUpdate())},i.prototype.resize=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.width,o=null!=o?o:e.height,this.grid.moveNode(e,e.x,e.y,i,o)})},i.prototype.move=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,this.grid.moveNode(e,i,o,e.width,e.height)})},i.prototype.update=function(t,i,o,a,s){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,a=null!=a?a:e.width,s=null!=s?s:e.height,this.grid.moveNode(e,i,o,a,s)})},i.prototype.verticalMargin=function(t,e){if(void 0===t)return this.opts.verticalMargin;t=c.parseHeight(t);this.opts.verticalMarginUnit===t.unit&&this.opts.height===t.height||(this.opts.verticalMarginUnit=t.unit,this.opts.verticalMargin=t.height,e)||this._updateStyles()},i.prototype.cellHeight=function(t,e){if(void 0===t)return this.opts.cellHeight||(i=this.container.children("."+this.opts.itemClass).first(),Math.ceil(i.outerHeight()/i.attr("data-gs-height")));var i=c.parseHeight(t);this.opts.cellHeightUnit===i.unit&&this.opts.cellHeight===i.height||(this.opts.cellHeightUnit=i.unit,this.opts.cellHeight=i.height,e)||this._updateStyles()},i.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},i.prototype.getCellFromPixel=function(t,e){var e=void 0!==e&&e?this.container.offset():this.container.position(),i=t.left-e.left,t=t.top-e.top,e=Math.floor(this.container.width()/this.opts.width),o=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(i/e),y:Math.floor(t/o)}},i.prototype.batchUpdate=function(){this.grid.batchUpdate()},i.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},i.prototype.isAreaEmpty=function(t,e,i,o){return this.grid.isAreaEmpty(t,e,i,o)},i.prototype.setStatic=function(t){this.opts.staticGrid=!0===t,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},i.prototype._setStaticClass=function(){var t="grid-stack-static";!0===this.opts.staticGrid?this.container.addClass(t):this.container.removeClass(t)},i.prototype._updateNodeWidths=function(t,e){this.grid._sortNodes(),this.grid.batchUpdate();for(var i,o=0;o<this.grid.nodes.length;o++)i=this.grid.nodes[o],this.update(i.el,Math.round(i.x*e/t),void 0,Math.round(i.width*e/t),void 0);this.grid.commit()},i.prototype.setGridWidth=function(t,e){this.container.removeClass("grid-stack-"+this.opts.width),!0!==e&&this._updateNodeWidths(this.opts.width,t),this.opts.width=t,this.grid.width=t,this.container.addClass("grid-stack-"+t)},_.prototype.batch_update=t(_.prototype.batchUpdate),_.prototype._fix_collisions=t(_.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),_.prototype.is_area_empty=t(_.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),_.prototype._sort_nodes=t(_.prototype._sortNodes,"_sort_nodes","_sortNodes"),_.prototype._pack_nodes=t(_.prototype._packNodes,"_pack_nodes","_packNodes"),_.prototype._prepare_node=t(_.prototype._prepareNode,"_prepare_node","_prepareNode"),_.prototype.clean_nodes=t(_.prototype.cleanNodes,"clean_nodes","cleanNodes"),_.prototype.get_dirty_nodes=t(_.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),_.prototype.add_node=t(_.prototype.addNode,"add_node","addNode, "),_.prototype.remove_node=t(_.prototype.removeNode,"remove_node","removeNode"),_.prototype.can_move_node=t(_.prototype.canMoveNode,"can_move_node","canMoveNode"),_.prototype.move_node=t(_.prototype.moveNode,"move_node","moveNode"),_.prototype.get_grid_height=t(_.prototype.getGridHeight,"get_grid_height","getGridHeight"),_.prototype.begin_update=t(_.prototype.beginUpdate,"begin_update","beginUpdate"),_.prototype.end_update=t(_.prototype.endUpdate,"end_update","endUpdate"),_.prototype.can_be_placed_with_respect_to_height=t(_.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),i.prototype._trigger_change_event=t(i.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),i.prototype._init_styles=t(i.prototype._initStyles,"_init_styles","_initStyles"),i.prototype._update_styles=t(i.prototype._updateStyles,"_update_styles","_updateStyles"),i.prototype._update_container_height=t(i.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),i.prototype._is_one_column_mode=t(i.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),i.prototype._prepare_element=t(i.prototype._prepareElement,"_prepare_element","_prepareElement"),i.prototype.set_animation=t(i.prototype.setAnimation,"set_animation","setAnimation"),i.prototype.add_widget=t(i.prototype.addWidget,"add_widget","addWidget"),i.prototype.make_widget=t(i.prototype.makeWidget,"make_widget","makeWidget"),i.prototype.will_it_fit=t(i.prototype.willItFit,"will_it_fit","willItFit"),i.prototype.remove_widget=t(i.prototype.removeWidget,"remove_widget","removeWidget"),i.prototype.remove_all=t(i.prototype.removeAll,"remove_all","removeAll"),i.prototype.min_height=t(i.prototype.minHeight,"min_height","minHeight"),i.prototype.min_width=t(i.prototype.minWidth,"min_width","minWidth"),i.prototype._update_element=t(i.prototype._updateElement,"_update_element","_updateElement"),i.prototype.cell_height=t(i.prototype.cellHeight,"cell_height","cellHeight"),i.prototype.cell_width=t(i.prototype.cellWidth,"cell_width","cellWidth"),i.prototype.get_cell_from_pixel=t(i.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),i.prototype.batch_update=t(i.prototype.batchUpdate,"batch_update","batchUpdate"),i.prototype.is_area_empty=t(i.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),i.prototype.set_static=t(i.prototype.setStatic,"set_static","setStatic"),i.prototype._set_static_class=t(i.prototype._setStaticClass,"_set_static_class","_setStaticClass"),e.GridStackUI=i,e.GridStackUI.Utils=c,e.GridStackUI.Engine=_,e.GridStackUI.GridStackDragDropPlugin=p,g.fn.gridstack=function(e){return this.each(function(){var t=g(this);t.data("gridstack")||t.data("gridstack",new i(this,e))})},e.GridStackUI});
/**
 * gridstack.js 1.0.0-dev
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2017 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(e){if("function"==typeof define&&define.amd)define(["jquery","lodash","gridstack","jquery-ui/data","jquery-ui/disable-selection","jquery-ui/focusable","jquery-ui/form","jquery-ui/ie","jquery-ui/keycode","jquery-ui/labels","jquery-ui/jquery-1-7","jquery-ui/plugin","jquery-ui/safe-active-element","jquery-ui/safe-blur","jquery-ui/scroll-parent","jquery-ui/tabbable","jquery-ui/unique-id","jquery-ui/version","jquery-ui/widget","jquery-ui/widgets/mouse","jquery-ui/widgets/draggable","jquery-ui/widgets/droppable","jquery-ui/widgets/resizable"],e);else{if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(e){}try{_=require("lodash")}catch(e){}try{GridStackUI=require("gridstack")}catch(e){}}e(jQuery,_,GridStackUI)}}(function(u,a,r){window;function e(e){r.GridStackDragDropPlugin.call(this,e)}return r.GridStackDragDropPlugin.registerPlugin(e),((e.prototype=Object.create(r.GridStackDragDropPlugin.prototype)).constructor=e).prototype.resizable=function(e,r){var t,i;return e=u(e),"disable"===r||"enable"===r?e.resizable(r):"option"===r?(i=arguments[2],t=arguments[3],e.resizable(r,i,t)):(i=e.data("gs-resize-handles")?e.data("gs-resize-handles"):this.grid.opts.resizable.handles,e.resizable(a.extend({},this.grid.opts.resizable,{handles:i},{start:r.start||function(){},stop:r.stop||function(){},resize:r.resize||function(){}}))),this},e.prototype.draggable=function(e,r){return e=u(e),"disable"===r||"enable"===r?e.draggable(r):e.draggable(a.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:r.start||function(){},stop:r.stop||function(){},drag:r.drag||function(){}})),this},e.prototype.droppable=function(e,r){return(e=u(e)).droppable(r),this},e.prototype.isDroppable=function(e,r){return e=u(e),Boolean(e.data("droppable"))},e.prototype.on=function(e,r,t){return u(e).on(r,t),this},e});
var Rex_Navigator=function(u){"use strict";var a,o,i,r,e,d=function(){var e,t;r.each(function(){e=u(this),null!==this.getAttribute("id")&&""!=this.getAttribute("id")&&(t=document.querySelector('.vertical-nav a[href="#'+this.getAttribute("id")+'"]'))&&(t=t.getAttribute("data-number")-1,e.offset().top-Rexbuilder_Util.globalViewport.height/2<Rexbuilder_Util.$window.scrollTop()&&e.offset().top+e.height()-Rexbuilder_Util.globalViewport.height/2>Rexbuilder_Util.$window.scrollTop()?i.eq(t).addClass("is-selected"):i.eq(t).removeClass("is-selected"))})};function s(){r=Rexbuilder_Util.$rexContainer.children(".rexpansive_section"),(e=r.get()).length,(e=e.filter(function(e){return e.getAttribute("id")&&""!==e.getAttribute("id")})).length,t(),n(),a&&d()}var t=function(){i=Rexbuilder_Util.$document.find(".vertical-nav a")},n=function(){o=Rexbuilder_Util.$document.find(".touch .vertical-nav a")},c={};function v(){for(var e=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]")),t=0;t<e.length;t++){var i=e[t].getAttribute("href"),r=e[t].getBoundingClientRect();c[i]=r}}return{init:function(){var r,e=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),i=(0!=e.length&&e.hasClass("nav-editor-mode-disable")&&(r=e,Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){var i,t=u(t).attr("data-rexlive-section-name");""!=t&&(i=t.replace(/ /gm,""),tmpl.arg="navigator",t=tmpl("tmpl-navigator-item",{sectionName:t,sectionID:i,number:e+1}),r.children("ul").append(t))})),(a=document.querySelector(".vertical-nav"))&&(Rexbuilder_Util.$window.on("scroll",function(){d()}),Rexbuilder_Util.$document.on("click",".vertical-nav a",function(e){e.preventDefault();e=u(e.target),e=(e=e.is("a")?e:e.parents("a")).attr("href"),e=Rexbuilder_Util.$rexContainer.children(e);Rexbuilder_Util.smoothScroll(e)}),Rexbuilder_Util.$document.on("click",".touch .vertical-nav a",function(){o.find(".rex-label").removeClass("fadeInAndOut"),u(this).find(".rex-label").addClass("fadeInAndOut"),Rexbuilder_Util.$document.find(".touch .vertical-nav").removeClass("open")})),s(),v(),document.getElementById("vertical-nav-label")),t=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]"));if(null!==i)for(var n=void 0!==(n=i.getAttribute("data-nav-position"))?n:"right",l=0;l<t.length;l++)t[l].addEventListener("mouseenter",function(e){var t=e.target.getAttribute("href"),e=e.target.getAttribute("data-section_nav_label"),e=(e?i.innerHTML=e:i.innerText=t.replace("#","").replace(/\-/g," "),i.style.display="inline",i.style.opacity="1",i.style.top=c[t].top+c[t].height/2-i.offsetHeight/2+"px",1.5*c[t].width+"px");"right"===n?i.style.right=e:i.style.left=e}),t[l].addEventListener("mouseleave",function(e){i.style.display="none",i.style.opacity="0"})},updateNavigator:s,updateNavigatorItem:function(e,t,i){var r=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');if(""!=t){if(""==e.attr("id")){var n=Rexbuilder_Util.$rexContainer.children(".rexpansive_section").length,l=Rexbuilder_Util.$rexContainer.children('.rexpansive_section[id=""]').length,a=e,o="";do{if(""!=(o=(a=a.next()).attr("id")))break}while(0!=a.length);n=n-l+1,l=(tmpl.arg="navigator",tmpl("tmpl-navigator-item",{sectionName:i,sectionID:t,number:n}));""==o||null==o?r.children("ul").append(l):u(l).insertBefore(r.find('li a[href="#'+o+'"]').parent())}else{var d,c=e.attr("id");(d=r.find('li a[href="#'+c+'"]')).attr("href","#"+t),d.find(".label").text(i)}e.attr("id",t),e.attr("href","#"+t)}else""!=e.attr("id")&&(c=e.attr("id"),(d=r.find('li a[href="#'+c+'"]').parent()).remove(),e.attr("id",""),e.removeAttr("href"));s()},fixNavigatorItemOrder:function(e){if(null!=e.attr("id")&&""!=e.attr("id")){var t=e.attr("id"),i=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),t=i.find('li a[href="#'+t+'"]').parent(),r=e,n="";do{if(""!=(n=(r=r.next()).attr("id")))break}while(0!=r.length);""==n||null==n?i.children("ul").append(t[0]):t.insertBefore(i.find('li a[href="#'+n+'"]').parent())}},getNavigationDotsPosition:v}}(jQuery);
/*!
 * Flickity PACKAGED v2.2.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */
!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,d=void 0===n?function(){}:function(t){n.error(t)};function s(l,h,c){(c=c||e||t.jQuery)&&(h.prototype.option||(h.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[l]=function(t){var n,s,o,r,a;return"string"!=typeof t?(o=t,this.each(function(t,e){var i=c.data(e,l);i?(i.option(o),i._init()):(i=new h(e,o),c.data(e,l,i))}),this):(r=i.call(arguments,1),a="$()."+l+'("'+(n=t)+'")',this.each(function(t,e){var i,e=c.data(e,l);e?(i=e[n])&&"_"!=n.charAt(0)?(i=i.apply(e,r),s=void 0===s?i:s):d(a+" is not a valid method"):d(l+" not initialized. Cannot call methods, i.e. "+a)}),void 0!==s?s:this)},o(c))}function o(t){t&&!t.bridget&&(t.bridget=s)}return o(e||t.jQuery),s}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function m(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},v=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=v.length;function b(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var E,S=!1;function C(t){if(S||(S=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(h=document.body||document.documentElement).appendChild(c),o=b(c),E=200==Math.round(m(o.width)),C.isBoxSizeOuter=E,h.removeChild(c)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=b(t);if("none"==e.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<y;n++)i[v[n]]=0;return i}var s={};s.width=t.offsetWidth,s.height=t.offsetHeight;for(var o=s.isBorderBox="border-box"==e.boxSizing,r=0;r<y;r++){var a=v[r],l=e[a],l=parseFloat(l);s[a]=isNaN(l)?0:l}var h=s.paddingLeft+s.paddingRight,c=s.paddingTop+s.paddingBottom,t=s.marginLeft+s.marginRight,d=s.marginTop+s.marginBottom,u=s.borderLeftWidth+s.borderRightWidth,p=s.borderTopWidth+s.borderBottomWidth,f=o&&E,g=m(e.width),g=(!1!==g&&(s.width=g+(f?0:h+u)),m(e.height));return!1!==g&&(s.height=g+(f?0:c+p)),s.innerWidth=s.width-(h+u),s.innerHeight=s.height-(c+p),s.outerWidth=s.width+t,s.outerHeight=s.height+d,s}var c,h,o}return C}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,o){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice,h=(l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,o(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){o(t,n)&&s.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)s.push(e[i])}else s.push(t)}),s},l.debounceMethod=function(t,e,n){n=n||100;var s=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o],e=(clearTimeout(t),arguments),i=this;this[o]=setTimeout(function(){s.apply(i,e),delete i[o]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(r,a){l.docReady(function(){var t=l.toDashed(a),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),e=l.makeArray(e).concat(l.makeArray(t)),s=n+"-options",o=i.jQuery;e.forEach(function(t){var e,i=t.getAttribute(n)||t.getAttribute(s);try{e=i&&JSON.parse(i)}catch(e){return void(h&&h.error("Error parsing "+n+" on "+t.className+": "+e))}i=new r(t,e);o&&o.data(t,a,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(0,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){var e;this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length&&(this.x=t.x,e=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=t.size[e])},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),e=e?e.size[t]:0,t=this.outerWidth-(this.firstMargin+e);this.target=this.x+this.firstMargin+t*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(0,t.fizzyUIUtils))}(window,function(t,e){return{startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t,e=this.x;this.integratePhysics(),this.positionSlider(),this.settle(e),this.isAnimating&&(t=this,requestAnimationFrame(function(){t.animate()}))},positionSlider:function(){var t=this.x;this.options.wrapAround&&1<this.cells.length&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;t=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+t+",0,0)":"translateX("+t+")"},dispatchScrollEvent:function(){var t,e=this.slides[0];e&&(t=(e=-this.x-e.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[t,e]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t,e=(this._shiftCells(this.beforeShiftCells,e,-1),this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition));this._shiftCells(this.afterShiftCells,e,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];s.wrapShift(0<e?i:0),e-=s.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var t;this.isDraggable&&this.isPointerDown&&(t=this.dragX-this.x-this.velocity,this.applyForce(t))},applySelectedAttraction:function(){var t;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(t))}}}),function(r,a){var t;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(t,e,i,n,s,o){return a(r,t,e,i,n,s,o)}):"object"==typeof module&&module.exports?module.exports=a(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(t=r.Flickity,r.Flickity=a(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,t.Cell,t.Slide,t.animatePrototype))}(window,function(n,t,e,r,i,a,s){var o=n.jQuery,l=n.getComputedStyle,h=n.console;function c(t,e){for(t=r.makeArray(t);t.length;)e.appendChild(t.shift())}var d=0,u={};function p(t,e){var i,n=r.getQueryElement(t);if(n){if(this.element=n,this.element.flickityGUID)return(i=u[this.element.flickityGUID]).option(e),i;o&&(this.$element=o(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(e),this._create()}else h&&h.error("Bad element for Flickity: "+(n||t))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var f=p.prototype,g=(r.extend(f,t.prototype),f._create=function(){var t,e=this.guid=++d;for(t in this.element.flickityGUID=e,(u[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var i=this.options.on[t];this.on(t,i)}p.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(t){r.extend(this.options,t)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},f._filterFindCellElements=function(t){return r.filterFindElements(t,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(t){return this._filterFindCellElements(t).map(function(t){return new i(t,this)},this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(t){this.maxCellHeight=(t=t||0)&&this.maxCellHeight||0;var e,i=0;0<t&&(i=(e=this.cells[t-1]).x+e.size.outerWidth);for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(i),i+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=i,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(t){t.forEach(function(t){t.getSize()})},f.updateSlides=function(){var n,s,o;this.slides=[],this.cells.length&&(n=new a(this),this.slides.push(n),s="left"==this.originSide?"marginRight":"marginLeft",o=this._getCanCellFit(),this.cells.forEach(function(t,e){var i;n.cells.length&&(i=n.outerWidth-n.firstMargin+(t.size.outerWidth-t.size[s]),o.call(this,e,i)||(n.updateTarget(),n=new a(this),this.slides.push(n))),n.addCell(t)},this),n.updateTarget(),this.updateSelectedSlide())},f._getCanCellFit=function(){var e,i,t=this.options.groupCells;return t?"number"==typeof t?(e=parseInt(t,10),function(t){return t%e!=0}):(t="string"==typeof t&&t.match(/^(\d+)%$/),i=t?parseInt(t[1],10)/100:1,function(t,e){return e<=(this.size.innerWidth+1)*i}):function(){return!1}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=e(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign},{center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}});return f.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){var t;this.options.setGallerySize&&(t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=t+"px")},f._getWrapShiftCells=function(){var t,e;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),t=this.cursorPosition,e=this.cells.length-1,this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1))},f._getGapCells=function(t,e,i){for(var n=[];0<t;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},f._containSlides=function(){var t,e,i,n,s,o;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(t=(e=this.options.rightToLeft)?"marginRight":"marginLeft",e=e?"marginLeft":"marginRight",i=this.slideableWidth-this.getLastCell().size[e],n=i<this.size.innerWidth,s=this.cursorPosition+this.cells[0].size[t],o=i-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(t){t.target=n?i*this.cellAlign:(t.target=Math.max(t.target,s),Math.min(t.target,o))},this))},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),o&&this.$element&&(n=t+=this.options.namespaceJQueryEvents?".flickity":"",e&&((e=o.Event(e)).type=t,n=e),this.$element.trigger(n,i))},f.select=function(t,e,i){this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=r.modulo(t,this.slides.length)),this.slides[t])&&(e=this.selectedIndex,this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=e&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect"))},f._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&1<e))return t;var i=r.modulo(t,e),n=Math.abs(i-this.selectedIndex),s=Math.abs(i+e-this.selectedIndex),i=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&s<n?t+=e:!this.isDragSelect&&i<n&&(t-=e),t<0?this.x-=this.slideableWidth:e<=t&&(this.x+=this.slideableWidth)},f.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},f.next=function(t,e){this.select(this.selectedIndex+1,t,e)},f.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),(this.selectedSlide=t).select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var t,e=this.options.initialIndex;this.isInitActivated?this.select(this.selectedIndex,!1,!0):e&&"string"==typeof e&&this.queryCell(e)?this.selectCell(e,!1,!0):(t=0,e&&this.slides[e]&&(t=e),this.select(t,!1,!0))},f.selectCell=function(t,e,i){var t=this.queryCell(t);t&&(t=this.getCellSlideIndex(t),this.select(t,e,i))},f.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},f.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},f.getCells=function(t){t=r.makeArray(t);var e=[];return t.forEach(function(t){t=this.getCell(t);t&&e.push(t)},this),e},f.getCellElements=function(){return this.cells.map(function(t){return t.element})},f.getParentCell=function(t){return this.getCell(t)||(t=r.getParent(t,".flickity-slider > *"),this.getCell(t))},f.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(i<=1+2*t)return this.getCellElements();for(var n=[],s=e-t;s<=e+t;s++){var o=this.options.wrapAround?r.modulo(s,i):s,o=this.slides[o];o&&(n=n.concat(o.getCellElements()))}return n},f.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#\.]?[\d\/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},r.debounceMethod(p,"onresize",150),f.resize=function(){var t;this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=r.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),t=this.selectedElements&&this.selectedElements[0],this.selectCell(t,!1,!0))},f.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;this.options.accessibility&&!e&&(e=p.keyboardHandlers[t.keyCode])&&e.call(this)},p.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},f.focus=function(){var t=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=t&&n.scrollTo(n.pageXOffset,t)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),o&&this.$element&&o.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete u[this.guid]},r.extend(f,s),p.data=function(t){t=(t=r.getQueryElement(t))&&t.flickityGUID;return t&&u[t]},r.htmlInit(p,"flickity"),o&&o.bridget&&o.bridget("flickity",p),p.setJQuery=function(t){o=t},p.Cell=i,p.Slide=a,p}),function(e,i){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.Unipointer=i(e,e.EvEmitter)}(window,function(n,t){function e(){}var t=e.prototype=Object.create(t.prototype),i=(t.bindStartEvent=function(t){this._bindStartEvent(t,!0)},t.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},t._bindStartEvent=function(t,e){var e=(e=void 0===e||e)?"addEventListener":"removeEventListener",i="mousedown";n.PointerEvent?i="pointerdown":"ontouchstart"in n&&(i="touchstart"),t[e](i,this)},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},t.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},t.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},t.onpointerdown=function(t){this._pointerDown(t,t)},t._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},t.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},{mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]});return t._bindPostStartEvents=function(t){t&&((t=i[t.type]).forEach(function(t){n.addEventListener(t,this)},this),this._boundPointerEvents=t)},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){n.removeEventListener(t,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(t){this._pointerMove(t,t)},t.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},t.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},t._pointerMove=function(t,e){this.pointerMove(t,e)},t.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},t.onmouseup=function(t){this._pointerUp(t,t)},t.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},t.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},t._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},t.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function(){},t.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},t.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},t._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},t.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e}),function(e,i){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("unipointer")):e.Unidragger=i(e,e.Unipointer)}(window,function(o,t){function e(){}var i=e.prototype=Object.create(t.prototype),n=(i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(t){for(var e=(t=void 0===t||t)?"addEventListener":"removeEventListener",i=t?this._touchActionValue:"",n=0;n<this.handles.length;n++){var s=this.handles[n];this._bindStartEvent(s,t),s[e]("click",this),o.PointerEvent&&(s.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))},{TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0}),s={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var e=n[t.target.nodeName],t=s[t.target.type],e=!e||t;return e||this._pointerReset(),e},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},i._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},i.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},i._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},i._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},i.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},i._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},i.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},i._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},i.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},e.getPointerPoint=t.getPointerPoint,e}),function(n,s){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(t,e,i){return s(n,t,e,i)}):"object"==typeof module&&module.exports?module.exports=s(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=s(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)}(window,function(i,t,e,o){o.extend(t.defaults,{draggable:">1",dragThreshold:3}),t.createMethods.push("_createDrag");var n=t.prototype,s=(o.extend(n,e.prototype),n._touchActionValue="pan-y","createTouch"in document),r=!1,a=(n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),s&&!r&&(i.addEventListener("touchmove",function(){}),r=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(t,e){this.isDraggable?this.okayPointerDown(t)&&(this._pointerDownPreventDefault(t),this.pointerDownFocus(t),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),i.addEventListener("scroll",this),this._pointerDownDefault(t,e)):this._pointerDownDefault(t,e)},n._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])},{INPUT:!0,TEXTAREA:!0,SELECT:!0});function l(){return{x:i.pageXOffset,y:i.pageYOffset}}return n.pointerDownFocus=function(t){a[t.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=a[t.target.nodeName];e||i||n||t.preventDefault()},n.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},n.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},n.pointerDone=function(){i.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(t,e){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),i.removeEventListener("scroll",this),this.dispatchEvent("dragStart",t,[e]))},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},n.dragMove=function(t,e,i){var n,s;this.isDraggable&&(t.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(i.x=i.x%this.slideableWidth),n=this.dragStartPosition+i.x*n,!this.options.wrapAround&&this.slides.length&&(n=(n=(s=Math.max(-this.slides[0].target,this.dragStartPosition))<n?.5*(n+s):n)<(s=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(n+s):n),this.dragX=n,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i]))},n.dragEnd=function(t,e){var i,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),i=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e]))},n.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),t=this._getClosestResting(t,e,-1);return(i.distance<t.distance?i:t).index},n._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(s=e,null!==(e=this.getSlideDistance(-t,n+=i)));)e=Math.abs(e);return{distance:s,index:n-i}},n.getSlideDistance=function(t,e){var i=this.slides.length,n=this.options.wrapAround&&1<i,s=n?o.modulo(e,i):e,s=this.slides[s];return s?(n=n?this.slideableWidth*Math.floor(e/i):0,t-(s.target+n)):null},n.dragEndBoostSelect=function(){var t,e;return void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime?0:(t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX,0<t&&0<e?1:t<0&&e<0?-1:0)},n.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,i=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,i])},n.onscroll=function(){var t=l(),e=this.pointerDownScroll.x-t.x,t=this.pointerDownScroll.y-t.y;(3<Math.abs(e)||3<Math.abs(t))&&this._pointerDone()},t}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";var s="http://www.w3.org/2000/svg";function o(t,e){this.direction=t,this.parent=e,this._create()}(o.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1,t=(this.isLeft=this.direction==t,this.element=document.createElement("button")),e=(t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next"),this.createSVG());t.appendChild(e),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var t=document.createElementNS(s,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(s,"path"),i="string"!=typeof(i=this.parent.options.arrowShape)?"M "+i.x0+",50 L "+i.x1+","+(i.y1+50)+" L "+i.x2+","+(i.y2+50)+" L "+i.x3+",50  L "+i.x2+","+(50-i.y2)+" L "+i.x1+","+(50-i.y1)+" Z":i;return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){var t;this.isEnabled&&(this.parent.uiChange(),t=this.isPrevious?"previous":"next",this.parent[t]())},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var t=this.parent.slides;this.parent.options.wrapAround&&1<t.length?this.enable():(t=t.length?t.length-1:0,t=this.isPrevious?0:t,this[this.parent.selectedIndex==t?"disable":"enable"]())},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");i=e.prototype;return i._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},i.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},i.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=o,e}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}(s.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;0<t?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=s.prototype.onClick=function(t){var t=t.target;"LI"==t.nodeName&&(this.parent.uiChange(),t=this.dots.indexOf(t),this.parent.select(t))},s.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");i=e.prototype;return i._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},i.activatePageDots=function(){this.pageDots.activate()},i.updateSelectedPageDots=function(){this.pageDots.updateSelected()},i.updatePageDots=function(){this.pageDots.setDots()},i.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(t.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var t,e;"playing"==this.state&&(t="number"==typeof(t=this.parent.options.autoPlay)?t:3e3,(e=this).clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");t=i.prototype;return t._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},t.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},t.playPlayer=function(){this.player.play()},t.stopPlayer=function(){this.player.stop()},t.pausePlayer=function(){this.player.pause()},t.unpausePlayer=function(){this.player.unpause()},t.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},t.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},t.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,n){var i=e.prototype;return i.insert=function(t,e){var i,n,s,o,r,t=this._makeCells(t);t&&t.length&&(i=this.cells.length,e=void 0===e?i:e,r=t,n=document.createDocumentFragment(),r.forEach(function(t){n.appendChild(t.element)}),r=n,(s=e==i)?this.slider.appendChild(r):(o=this.cells[e].element,this.slider.insertBefore(r,o)),0===e?this.cells=t.concat(this.cells):s?this.cells=this.cells.concat(t):(r=this.cells.splice(e,i-e),this.cells=this.cells.concat(t).concat(r)),this._sizeCells(t),this.cellChange(e,!0))},i.append=function(t){this.insert(t,this.cells.length)},i.prepend=function(t){this.insert(t,0)},i.remove=function(t){var i,t=this.getCells(t);t&&t.length&&(i=this.cells.length-1,t.forEach(function(t){t.remove();var e=this.cells.indexOf(t);i=Math.min(e,i),n.removeFrom(this.cells,t)},this),this.cellChange(i,!0))},i.cellSizeChange=function(t){var t=this.getCell(t);t&&(t.getSize(),t=this.cells.indexOf(t),this.cellChange(t))},i.cellChange=function(t,e){var i=this.selectedElement,i=(this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize(),this.getCell(i));i&&(this.selectedIndex=this.getCellSlideIndex(i)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,s){"use strict";e.createMethods.push("_createLazyload");var i=e.prototype;function n(t,e){this.img=t,this.flickity=e,this.load()}return i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var e,t=this.options.lazyLoad;t&&(t=this.getAdjacentCellElements("number"==typeof t?t:0),e=[],t.forEach(function(t){t=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),i=t.getAttribute("data-flickity-lazyload-src"),n=t.getAttribute("data-flickity-lazyload-srcset");if(e||i||n)return[t]}e=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return s.makeArray(e)}(t);e=e.concat(t)}),e.forEach(function(t){new n(t,this)},this))},n.prototype.handleEvent=s.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),i=i&&i.element;this.flickity.cellSizeChange(i),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,i)},e.LazyLoader=n,e}),function(t){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}((window,function(t){return t})),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(i,n){i.createMethods.push("_createAsNavFor");var t=i.prototype;return t._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t,e=this.options.asNavFor;e&&(t=this,setTimeout(function(){t.setNavCompanion(e)}))},t.setNavCompanion=function(t){t=n.getQueryElement(t);var e,t=i.data(t);t&&t!=this&&(this.navCompanion=t,(e=this).onNavCompanionSelect=function(){e.navCompanionSelect()},t.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},t.navCompanionSelect=function(t){var e,i,n;this.navCompanion&&(e=this.navCompanion.selectedCells[0],i=(e=this.navCompanion.cells.indexOf(e))+this.navCompanion.selectedCells.length-1,n=Math.floor((i-e)*this.navCompanion.cellAlign+e),this.selectCell(n,!1,t),this.removeNavSelectedElements(),n>=this.cells.length||(t=this.cells.slice(e,1+i),this.navSelectedElements=t.map(function(t){return t.element}),this.changeNavSelectedClass("add")))},t.changeNavSelectedClass=function(e){this.navSelectedElements.forEach(function(t){t.classList[e]("is-nav-selected")})},t.activateAsNavFor=function(){this.navCompanionSelect(!0)},t.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},t.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},t.deactivateAsNavFor=function(){this.removeNavSelectedElements()},t.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},i}),function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){var o=e.jQuery,r=e.console;function a(t,e){for(var i in e)t[i]=e[i];return t}var l=Array.prototype.slice;function h(t,e,i){if(!(this instanceof h))return new h(t,e,i);var n,s=t;(s="string"==typeof t?document.querySelectorAll(t):s)?(this.elements=(n=s,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=a({},this.options),"function"==typeof e?i=e:a(this.options,e),i&&this.on("always",i),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):r.error("Bad element for imagesLoaded "+(s||t))}(h.prototype=Object.create(t.prototype)).options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background)for(var o=t.querySelectorAll(this.options.background),n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}};var c={1:!0,9:!0,11:!0};function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}return h.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},h.prototype.addImage=function(t){t=new i(t);this.images.push(t)},h.prototype.addBackground=function(t,e){t=new n(t,e);this.images.push(t)},h.prototype.check=function(){var n=this;function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},h.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+i,t,e)},h.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(h.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((o=t).fn.imagesLoaded=function(t,e){return new h(this,t,e).jqDeferred.promise(o(this))})})(),h}),function(t,i){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("flickity"),require("imagesloaded")):t.Flickity=i(0,t.Flickity,t.imagesLoaded)}(window,function(t,e,n){"use strict";e.createMethods.push("_createImagesLoaded");var i=e.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){var i;this.options.imagesLoaded&&n((i=this).slider).on("progress",function(t,e){e=i.getParentCell(e.img);i.cellSizeChange(e&&e.element),i.options.freeScroll||i.positionSliderAtSelected()})},e});
var RexSlider=function(s){"use strict";var e=".rex-slider-wrap",o=".flickity-page-dots.rex-slider__custom-nav",t=".rexpansive_section",i=".rex-box-slider-wrap";function c(e){var t=this,i=this.element.getAttribute("data-custom-autoplay-timer")?this.element.getAttribute("data-custom-autoplay-timer"):9e3;t.customAutoplayInterval&&t.customAutoplayInterval.clear(),t.customAutoplayInterval=Rexbuilder_Util.rtimeOut(function(){t.playPlayer()},i),t.pausePlayer()}function a(e){void 0!==e.data("flickity")&&e.flickity("destroy"),e.find(".rex-slider-video-wrapper").each(function(e,t){Rexbuilder_Util.destroyVideo(s(t),!1)})}var r=function(e){var t=s(e),i={cellAlign:"center",prevNextButtons:!0,pageDots:!0,cellSelector:".rex-box-slider-element",selectedAttraction:.018,friction:.3,initialIndex:null!==e.getAttribute("data-rex-box-slider-initialIndex")?parseInt(e.getAttribute("data-rex-box-slider-initialIndex")):0,setGallerySize:!1,arrowShape:"m 38.79662,40.087413 0,0 c -0.387529,0 -0.757576,-0.154429 -1.031468,-0.425408 L 1.2470862,3.1322842 c -0.56818177,-0.5681815 -0.56818177,-1.4918411 0,-2.060023 0.5681819,-0.56818197 1.4918415,-0.56818197 2.0600234,0 L 38.793706,36.570513 74.294872,1.0722612 c 0.568182,-0.56818197 1.491842,-0.56818197 2.060023,0 0.568182,0.5681819 0.568182,1.4918415 0,2.060023 L 39.825175,39.659091 c -0.273893,0.273893 -0.641026,0.428322 -1.028555,0.428322 l 0,0 0,0 z"},e=e.getAttribute("data-rex-slider-animation");null!==e&&"true"==e&&(i.autoPlay=!0),t.flickity(i),t.flickity("stopPlayer"),t.on("dragStart.flickity",function(){s(this).addClass("is-dragging")}),t.on("dragEnd.flickity",function(){s(this).removeClass("is-dragging")})};return{init:function(){0<s(e,t).length&&s(e,t).each(function(e,t){RexSlider.initSlider(s(t)),s(t).attr("data-rex-slider-number",e),Rexbuilder_Dom_Util.lastSliderNumber=e}),0<s(i,t).length&&s(i,t).each(function(e,t){r(t)})},initSlider:function(a){var e=a.get(0),t={cellAlign:"left",prevNextButtons:!1,pageDots:!1,cellSelector:".rex-slider-element",selectedAttraction:.018,friction:.3,wrapAround:!0,arrowShape:_plugin_frontend_settings.slider.arrowShape},i=a.parents(".block-has-slider"),r=(t.setGallerySize=void 0!==a.attr("data-set-gallery-size")&&JSON.parse(a.attr("data-set-gallery-size")),t.wrapAround=void 0===a.attr("data-wrap-around")||JSON.parse(a.attr("data-wrap-around")),a.attr("data-rex-slider-animation")),r=(void 0!==r&&"true"==r.toString()?t.autoPlay=!0:t.autoPlay=!1,a.attr("data-rex-slider-prev-next")),r=(void 0!==r&&"1"==r.toString()&&(t.prevNextButtons=!0),a.attr("data-rex-slider-dots")),r=(void 0!==r&&"1"==r.toString()&&(t.pageDots=!0),a.attr("data-rexlider-lazyload")),r=(void 0!==r&&"0"!==r.toString()&&(t.bgLazyLoad=parseInt(r),t.lazyLoad=parseInt(r)),a.hasClass("rex-slider--bottom-interface")&&i.addClass("block-has-slider--navigator"),a.find(".rex-slider-element").each(function(e,t){t=s(t).find(".rex-slider-video-wrapper");Rexbuilder_Util.startVideoPlugin(t)}),!!t.autoPlay);t.prevNextButtons&&r&&(t.pauseAutoPlayOnHover=!1),a.flickity(t),a.flickity("stopPlayer");var l=Array.prototype.slice.call(e.getElementsByClassName("rex-slide--video"));if(a.on("dragStart.flickity",function(){Rexbuilder_Util.addClass(this,"is-dragging")}),a.on("dragEnd.flickity",function(){Rexbuilder_Util.removeClass(this,"is-dragging")}),0!==l.length&&a.on("select.flickity",function(e,t){for(var i=0;i<l.length;i++)Rexbuilder_Util.pauseVideo(s(l[i].querySelector(".rex-slider-video-wrapper")));Rexbuilder_Util.hasClass(Flickity.data(e.target).selectedCell.element,"rex-slide--video")&&Rexbuilder_Util.playVideo(s(e.target.querySelector(".rex-slider-video-wrapper")))}),t.autoPlay&&a.flickity("playPlayer"),r){var n=a.data("flickity");if(n.customAutoplayInterval=null,t.prevNextButtons&&(n.prevButton.element.addEventListener("click",c.bind(n)),n.nextButton.element.addEventListener("click",c.bind(n))),t.pageDots)for(var d=0;d<n.pageDots.dots.length;d++)n.pageDots.dots[d].addEventListener("click",c.bind(n));n.$element.on("dragEnd.flickity",c.bind(n))}a.attr("data-rex-slider-active",!0),a.find(o).children().first().addClass("is-selected"),a.find(o).on("click",".dot",function(e){var t=s(this),i=t.index();t.addClass("is-selected").siblings(".dot").removeClass("is-selected"),a.flickity("select",i)}),a.find(".flickity-page-dots.rex-slider__custom-nav__preview-slide").find(".rex-slider__b-label-image--item").hover(function(e){e=parseInt(e.currentTarget.getAttribute("data-nav-index"));a.flickity("select",e)})},startAutoPlay:function(){s(e,t).length&&s(e,t).each(function(e,t){t=Flickity.data(t);t&&t.autoPlay&&t.playPlayer()})},destroy:function(){0<s(e,t).length&&s(e,t).each(function(e,t){a(s(t))}),0<s(i,t).length&&s(i,t).each(function(e,t){a(s(t))})},destroySliderPlugins:a}}(jQuery);
/*
 *  TextFill
 */
!function(r,e,t,n){"use strict";var a="textFill",i={maxFontSize:100,textAlignment:"center",fontFamily:"sans-serif",fontWeight:"bold",relative:!1,relativeWrap:""};function h(t,e){this.element=t,this.$element=r(t),this.settings=r.extend({},i,e),this._defaults=i,this._name=a,this.properties={canvas:null,text:"",ctx:null,img:null,background:null,lines:null,wrap:null},this.init()}r.extend(h.prototype,{init:function(){this._defineSettings(),this._defineProperties(),this._attachImage();var t=this;r(e).on("resize",function(){t._resizeCanvas(),t._drawText()})},_defineSettings:function(){this.settings.maxFontSize=parseInt(this.element.dataset.maxFontSize||this.element.getAttribute("data-max-font-size")||this.settings.maxFontSize),this.settings.textAlignment=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.textAlign||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-text-align")||this.settings.textAlignment,this.settings.relativeWrap=this.element.getAttribute("data-relative-wrap")||this.settings.relativeWrap},_defineProperties:function(){this.properties.canvas=this.element.getElementsByClassName("text-fill-canvas")[0],this.properties.text=this.properties.canvas.textContent,this.properties.ctx=this.properties.canvas.getContext("2d"),this.properties.img=t.createElement("img"),this.properties.background=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.backSrc||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-back-src"),this.settings.relative&&""!==this.settings.relativeWrap&&(this.properties.wrap=r(this.element).parents(this.settings.relativeWrap)[0],void 0===this.properties.wrap)&&(this.settings.relative=!1)},_attachImage:function(){this.properties.img.src=this.properties.background;var t=this;this.properties.img.onload=function(){t._resizeCanvas(),t._drawText(),t.$element.trigger("textfill-render-complete")}},_drawText:function(){var t,e=this._calcFontSize(this.settings.maxFontSize);switch(this.properties.ctx.font=this.settings.fontWeight+" "+e+"px "+this.settings.fontFamily,this.properties.rows=this._numRows(this.properties.ctx,this.properties.text,(this.properties.relative?this.properties.wrap:this.element).offsetWidth-20),this.properties.canvas.height=this.properties.ctx.height=this.properties.rows*e,this.properties.ctx.clearRect(0,0,this.properties.canvas.width,this.properties.canvas.height),this.properties.ctx.font=this.settings.fontWeight+" "+e+"px "+this.settings.fontFamily,this.properties.ctx.fillStyle=this.properties.ctx.createPattern(this.properties.img,"repeat"),this.properties.ctx.textAlign=this.settings.textAlignment,this.properties.ctx.textBaseline="middle",this.settings.textAlignment){case"left":t=0;break;case"right":t=this.properties.canvas.width;break;default:t=this.properties.canvas.width/2}this._wrapText(this.properties.ctx,this.properties.text,t,e/2,(this.properties.relative?this.properties.wrap:this.element).offsetWidth-20,e)},_calcFontSize:function(t){var e=this.settings.maxFontSize/1e3;return this.properties.relative?this.properties.wrap.offsetWidth*e:this.element.offsetWidth*e},_wrapText:function(t,e,i,s,r,n){for(var a=e.split(" "),h=(t.measureText(a).width,""),p=0;p<a.length;p++){var o=h+a[p]+" ";r<t.measureText(o).width&&0<p?(t.fillText(h,i,s),h=a[p]+" ",s+=n):h=o}h=h.trim(),t.fillText(h,i,s)},_numRows:function(t,e,i){for(var s=new Array,r=e.split(" "),n=1,a=0;a<r.length;a++)s.unshift(" "),s.unshift(r[a]),i<this._partialTextLenght(t,s)&&(s.splice(1,s.length),n++);return n<=r.length?n:r.length},_partialTextLenght:function(t,e){for(var i=0,s=0;s<e.length;s++)i+=t.measureText(e[s]).width;return i},_resizeCanvas:function(){this.properties.canvas.width=this.properties.ctx.canvas.width=Math.floor((this.properties.relative?this.properties.wrap:this.element).offsetWidth),this.properties.canvas.height=this.properties.ctx.canvas.height=this._calcFontSize(this.settings.maxFontSize+50)},_calcSlope:function(t,e){return(e[1]-t[1])/(e[0]-t[0])}}),r.fn[a]=function(e){var i,s=arguments;return e===n||"object"==typeof e?this.each(function(){r.data(this,"plugin_"+a)||r.data(this,"plugin_"+a,new h(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=r.data(this,"plugin_"+a);t instanceof h&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(s,1))),"destroy"===e&&r.data(this,"plugin_"+a,null)}),i!==n?i:this):void 0}}(jQuery,window,document);
var VimeoVideo=function(t){"use strict";function e(e){var n=e;0<o.length&&o.each(function(e,i){var o=t(i).attr("data-vimeo-video-mute"),i=t(i).find("iframe")[0];"undefined"!=typeof Vimeo&&n.addPlayer(o,i)})}var i=null,o=null;return{init:function(){this.blockVideos=[],i=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--section"),o=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--block"),0<i.length&&i.each(function(e,i){var o,i=t(i).find("iframe")[0];"undefined"!=typeof Vimeo&&(o=new Vimeo.Player(i)).ready().then(function(){o.setVolume(0)})}),e(this)},findVideo:function(e){if(void 0!==this.blockVideos)for(var i=0,o=this.blockVideos.length;i<o;i++)if(this.blockVideos[i].el===e)return this.blockVideos[i].player;return null},initBlockVideos:e,addPlayer:function(e,i,o){var n;void 0!==this.blockVideos&&(n=void 0!==o?new Vimeo.Player(i,o):new Vimeo.Player(i),"1"==e&&n.ready().then(function(){n.setVolume(0)}),o={el:i,player:n},this.blockVideos.push(o))},removePlayer:function(e){for(var i=!1,o=this.blockVideos.length,n=0;n<o;n++)if(this.blockVideos[n].el===e){this.blockVideos[n].player.destroy().then(function(){}).catch(function(e){}),i=!0;break}i&&this.blockVideos.splice(n,1)}}}(jQuery);
/*
 *  rexAccordion - v1.0.0
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(i,t){"use strict";var l="rexAccordion",c={selectors:{self:".rex-accordion",toggle:".rex-accordion--toggle",content:".rex-accordion--content"},duration:150,durationOpen:null,durationClose:null,noToggleClass:"no-toggle"};function o(t,e){this.element=t,this.$element=i(t),this.settings=i.extend({},c,e),this._defaults=c,this._name=l,null==this.settings.durationOpen&&(this.settings.durationOpen=this.settings.duration),null==this.settings.durationClose&&(this.settings.durationClose=this.settings.duration);var t=this.$element.find(this.settings.selectors.toggle),e=this.$element.find(this.settings.selectors.content),s=this,n=[],o=(t.each(function(t,e){i(e).closest(s.settings.selectors.self).is(s.$element)&&n.push(e)}),[]);e.each(function(t,e){i(e).closest(s.settings.selectors.self).is(s.$element)&&o.push(e)}),this.properties={$toggle:i(n),$content:i(o)},this.init()}i.extend(o.prototype,{init:function(){var s=this;"function"==typeof this.settings.onSetup&&this.settings.onSetup.call(this),this.updateState(),this.properties.$toggle.each(function(e,t){i(t).on("click",function(t){i(t.target).hasClass(s.settings.noToggleClass)||0!==i(t.target).parents("."+s.settings.noToggleClass).length||s._handle_click(e)})})},updateState:function(){this.$element.hasClass("close")&&this.close_all(),this.$element.hasClass("open")&&this.open_all()},_handle_click:function(n){var o=this;1==this.properties.$toggle.length?this.$element.hasClass("open")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):this.$element.hasClass("close")&&(this.$element.addClass("open").removeClass("close"),this.properties.$content.slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):1<this.properties.$toggle.length&&(this.$element.hasClass("open")?"open"==this.properties.$content.eq(n).attr("data-item-status")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(n).slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):(this.$element.addClass("close").removeClass("close"),this.properties.$content.not(n).slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.eq(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):this.$element.hasClass("close")&&("close"==this.properties.$content.eq(n).attr("data-item-status")?(this.$element.addClass("open").removeClass("close"),this.properties.$content.eq(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}})):(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(n).slideUp({duration:this.settings.duration,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.not(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}))).attr("data-item-status","open"))},open_all:function(){this.properties.$content.attr("data-item-status","open"),this.properties.$content.css("display","block"),this.$element.hasClass("close")&&this.$element.addClass("open").removeClass("close")},close_all:function(){this.properties.$content.attr("data-item-status","close"),this.properties.$content.css("display","none"),this.$element.hasClass("open")&&this.$element.addClass("close").removeClass("open")},getState:function(){return this.properties.$content.attr("data-item-status")}}),i.fn[l]=function(e){var s,n=arguments;return e===t||"object"==typeof e?this.each(function(){i.data(this,"plugin_"+l)||i.data(this,"plugin_"+l,new o(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=i.data(this,"plugin_"+l);t instanceof o&&"function"==typeof t[e]&&(s=t[e].apply(t,Array.prototype.slice.call(n,1))),"destroy"===e&&i.data(this,"plugin_"+l,null)}),s!==t?s:this):void 0}}(jQuery,(window,void document));
!function(){"use strict";jQuery.fn.reverse=[].reverse}();
/*
 *  Perfect Grid Gallery Editor
 *  @since 2.0.0
 */
!function(A,f,u,a,_){"use strict";var x,y,s="perfectGridGalleryEditor",i={itemSelector:".perfect-grid-item",gridItemWidth:.0833333333,numberCol:12,gridSizerSelector:".perfect-grid-sizer",galleryLayout:"fixed",separator:20,fullHeight:"false",gridParentWrap:".rexpansive_section",mobilePadding:"false",cellHeightMasonry:5,scrollbarWrapClass:".rexlive-custom-scrollbar",editorMode:!1},k="classList"in u.documentElement?(x=function(t,e){return t.classList.contains(e)},y=function(t,e){t.classList.add(e)},function(t,e){t.classList.remove(e)}):(x=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},y=function(t,e){x(t,e)||(t.className+=" "+e)},function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")});function t(t){return t%2==0}function R(t){var e,i,r,s,a;return 0===t.length?0:(i=t[e=0],r=t.parents(".perfect-grid-item").hasClass("block-has-slider"),(a=(s=i.cloneNode(!0)).querySelector(".text-editor-span-fix"))&&a.parentNode.removeChild(a),r||0===s.textContent.trim().length&&0===s.childElementCount||(!x(i,"medium-editor-placeholder")||0<s.childElementCount||0!=t.parents(".pswp-item").length)&&(e=i.offsetHeight),e)}function o(t,e){for(var i,r,s=t[0],a=s.getAttribute("data-rexbuilder-block-id"),o=e.split(", "),l=o.length,n=0;n<l;n++)i=u.createElement("span"),y(i,"circle-handle"),y(i,"circle-handle-"+o[n]),i.setAttribute("data-axis",o[n]),r=u.createElement("div"),y(r,"ui-resizable-handle"),y(r,"ui-resizable-"+o[n]),r.setAttribute("data-axis",o[n]),"DIV"===s.tagName.toUpperCase()&&""!==a&&r.setAttribute("id","_handle_"+o[n]),i=A(i),r=A(r),i.appendTo(r),r.appendTo(t)}function e(t){this.batchGridstack(),this.updateCollapsedBlocksHeight(),this.commitGridstack(),setTimeout(function(t){this._updateElementsSizeViewers(),this._createFirstReverseStack(),this._fixImagesDimension();var e=this.$section;{var i;setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e[0]),1500),Rexbuilder_Util.windowIsResizing||Rexbuilder_Util.domUpdating||((i=jQuery.Event("rexlive:collapsingElementsEnded")).settings={galleryEditorInstance:this,$section:e,reverseData:t},A(u).trigger(i))}}.bind(this,t),500),this.properties.collapsingElements=!1}var l=function(){var t,e=u.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(e.style[t]!==_)return i[t]}();function r(t,e){void 0!==e&&(Rexbuilder_Util_Editor.elementIsDragging=!0,e.helper.eq(0).find(".text-wrap").blur())}function n(t){Rexbuilder_Util_Editor.elementDraggingTriggered||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=t.currentTarget.getAttribute("data-rexbuilder-block-id")&&(Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}function d(t,e){this.element=t,this.$element=A(t),this.settings=A.extend({},i,e),this._defaults=i,this._name=s,this.properties={halfSeparator:0,halfSeparatorTop:0,halfSeparatorRight:0,halfSeparatorBottom:0,halfSeparatorLeft:0,halfSeparatorElementTop:0,halfSeparatorElementRight:0,halfSeparatorElementBottom:0,halfSeparatorElementLeft:0,gridTopSeparator:null,gridRightSeparator:null,gridBottomSeparator:null,gridLeftSeparator:null,wrapWidth:0,singleWidth:0,singleHeight:0,paddingTopBottom:!1,setMobilePadding:!1,setDesktopPadding:!1,gutter:0,elementStartingH:0,resizeHandle:"",sectionNumber:null,gridstackInstance:null,gridstackInstanceID:null,serializedData:[],firstStartGrid:!1,gridBlocksHeight:0,editedFromBackend:!1,oneColumModeActive:!1,oldLayout:"",oldCellHeight:0,blocksBottomTop:null,updatingSectionSameGrid:!1,blocksDimensions:[],reverseDataGridDisposition:{},collapsingElements:!1,lastIDBlock:0,numberBlocksVisibileOnGrid:0,beforeCollapseWasFixed:!1,dispositionBeforeCollapsing:{},layoutBeforeCollapsing:{},initialStateGrid:null,mirrorStateGrid:null,fullWidthNaturalBackground:!1,naturalBackground:!1,isGridLocked:!1},this.$section=this.$element.parents(this._defaults.gridParentWrap),this.section=this.$section[0],this.init()}A.extend(d.prototype,{init:function(){"true"!=this.$section.children(".section-data").attr("data-row_edited_live")&&(this.properties.editedFromBackend=!0),this.properties.firstStartGrid=!0,this._setGridID(),this._updateBlocksRexID(),this._countBlocks(),this.clearStateGrid(),this._defineDataSettings(),this._setGutter(),this._defineHalfSeparatorProperties(),this._defineRowSeparator(),this._defineFullWidthNaturalBackground(),this._defineNaturalBackground(),this._setGridPadding(),this._defineDynamicPrivateProperties(),this._prepareElements(),this._launchGridStack(),this.$element.on("change",function(t,e){this.element!=t.target||Rexbuilder_Util_Editor.undoActive||Rexbuilder_Util_Editor.redoActive||Rexbuilder_Util_Editor.updatingRowDistances||Rexbuilder_Util_Editor.updatingSectionMargins||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util.domUpdating||Rexbuilder_Util.windowIsResizing||this.properties.collapsingElements||Rexbuilder_Util_Editor.addingNewBlocks||Rexbuilder_Util_Editor.removingBlocks||Rexbuilder_Util_Editor.updatingImageBg||Rexbuilder_Util_Editor.updatingPaddingBlock||Rexbuilder_Util_Editor.updatingCollapsedGrid||Rexbuilder_Util_Editor.openingModel||Rexbuilder_Util_Editor.blockCopying||Rexbuilder_Util_Editor.savingPage||Rexbuilder_Util_Editor.savingModel||!Rexbuilder_Util_Editor.needToSave||(e={eventName:"rexlive:edited",modelEdited:this.$section.hasClass("rex-model-section")},Rexbuilder_Util_Editor.sendParentIframeMessage(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(this.$section),t=this.createActionDataMoveBlocksGrid(),this.$element.attr("data-rexlive-layout-changed",!0),Rexbuilder_Util_Editor.pushAction(this.$section,"updateSectionBlocksDisposition",A.extend(!0,{},t),A.extend(!0,{},this.properties.reverseDataGridDisposition)),this.properties.reverseDataGridDisposition=t)}.bind(this)),this.$element.on("dblclick",".perfect-grid-item",function(t){var e,i,r;return"default"===Rexbuilder_Util.activeLayout&&!t.currentTarget.classList.contains("block-has-slider")&&void((!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=t.currentTarget.getAttribute("rexbuilder-block-id"))&&(e=(i=A(t.currentTarget)).find(".text-wrap"),Rexbuilder_Util_Editor.editingElement=!0,Rexbuilder_Util_Editor.editedElement=i,Rexbuilder_Util_Editor.editedTextWrap=e,Rexbuilder_Util_Editor.editingGallery=!0,Rexbuilder_Util_Editor.editedGallery=this,e.is(":focus")||("begin"==(x(t.currentTarget,"rex-flex-top")?"end":x(t.currentTarget,"rex-flex-middle")?(i=t.currentTarget.getAttribute("data-gs-height")?parseInt(t.currentTarget.getAttribute("data-gs-height"))*this.properties.singleHeight-this.properties.gutter:i.innerHeight(),r=e.innerHeight(),t.offsetY<i/2-r/2?"begin":"end"):x(t.currentTarget,"rex-flex-bottom")?"begin":"end")?e.focus():Rexbuilder_Live_Utilities.setEndOfContenteditable(e[0])),Rexbuilder_Util_Editor.startEditingElement()))}.bind(this)),this.$element.on("click",".perfect-grid-item",n),this._updateElementsSizeViewers(),this._linkResizeEvents(),this._linkDragEvents(),this._linkDnDEvents(),this._createFirstReverseStack(),this._updatePlaceholderPosition(),this.saveStateGrid();var t=this.section.getAttribute("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(null===t||"true"==t.toString())&&this.collapseElements(),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady(),this.properties.firstStartGrid=!1},_launchGridStack:function(){this.$element.gridstack({auto:!1,autoHide:!1,animate:!0,acceptWidgets:!1,alwaysShowResizeHandle:!0,disableOneColumnMode:!0,cellHeight:this.properties.singleHeight,draggable:{containment:this.element,handle:".rexlive-block-drag-handle",scroll:!1},float:"masonry"!=this.settings.galleryLayout,resizable:{minWidth:this.properties.singleWidth,minHeight:this.properties.singleHeight,handles:{e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw"}},verticalMargin:0,width:this.settings.numberCol}),this.$element.addClass("gridActive"),this.setGridstackIstanceNumber(),this.properties.gridstackInstance=this.$element.data("gridstack"),this.makeWidgets();for(var t=this.properties.gridstackInstance,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)x(e[r],"rex-hide-element")&&t.removeWidget(e[r],!1);for(Rexbuilder_Util.domUpdating||void 0!==Rexbuilder_Util_Editor.sectionCopying&&!1!==Rexbuilder_Util_Editor.sectionCopying||this.updateBlocksHeight(),r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data");this.updateElementDataHeightProperties(s,parseInt(e[r].getAttribute("data-gs-height")))}},makeWidgets:function(){var t=Array.prototype.slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;if(0!==t){for(this.properties.gridstackInstance.batchUpdate(),i=0;i<e;i++)this.properties.gridstackInstance.makeWidget(t[i]);this.properties.gridstackInstance.commit()}},triggerGalleryReady:function(){var t=jQuery.Event("rexlive:galleryReady");t.gallery=this,t.galleryID=this.properties.sectionNumber,A(u).trigger(t)},reInitGridFront:function(t){this.settings.galleryLayout=(t=void 0!==t?t:{}).galleryLayout,this._prepareElements(),this._launchGridStack();var e=this.$section.attr("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:t.galleryLayout,fullHeight:t.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(void 0===e||"true"==e.toString())&&this.collapseElements(),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady()},createActionDataMoveBlocksGrid:function(t,e){t=void 0!==t?t:null,e=void 0!==e&&e;for(var i=[],r=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder), .grid-stack-item:not(.removing_block)")),s=r.length,a=0,a=0;a<s;a++){var o=r[a].getAttribute("data-rexbuilder-block-id"),l=parseInt(r[a].getAttribute("data-gs-x")),n=parseInt(r[a].getAttribute("data-gs-y")),d=parseInt(r[a].getAttribute("data-gs-width")),p=parseInt(r[a].getAttribute("data-gs-height")),h={rexID:o,elem:r[a],x:l,y:n,w:d,h:p};switch(t){case"masonry":h.h=Math.floor(h.h*this.properties.singleWidth/5),h.y=Math.floor(h.y*this.properties.singleWidth/5);break;case"fixed":h.h=Math.floor(5*h.h/this.properties.singleWidth),h.y=Math.floor(5*h.y/this.properties.singleWidth)}e&&(h.w=12,h.x=0),i.push(h)}return{gridstackInstance:this.properties.gridstackInstance,blocks:i,cellHeight:this.properties.singleHeight}},_createFirstReverseStack:function(){this.properties.reverseDataGridDisposition=this.createActionDataMoveBlocksGrid()},clearStateGrid:function(){for(var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)t=e[r].getAttribute("data-rexbuilder-block-id"),store.remove(t),store.remove(t+"_noEdits")},saveStateGrid:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++){var r=t[i].getAttribute("data-rexbuilder-block-id"),s=parseInt(t[i].getAttribute("data-gs-x")),a=parseInt(t[i].getAttribute("data-gs-y")),o=parseInt(t[i].getAttribute("data-gs-width")),l=parseInt(t[i].getAttribute("data-gs-height"));store.set(r,{properties:[{x:s},{y:a},{w:o},{h:l}]}),store.set(r+"_noEdits",{properties:[{x:s},{y:a},{w:o},{h:l}]})}},updateGridSettingsChangeLayout:function(t){this.properties.firstStartGrid=!0,this.$element.removeClass("grid-number-"+this.properties.sectionNumber),this.settings.fullHeight=void 0!==t.full_height&&t.full_height.toString(),this.properties.elementStartingH=0,this.properties.resizeHandle="",this.properties.firstStartGrid=!1,this.properties.editedFromBackend=!1,this.properties.oneColumModeActive=!1,this.properties.updatingSectionSameGrid=!1,this.properties.blocksBottomTop=null,this.settings.galleryLayout=t.layout;var e=parseInt(t.gutter),i=parseInt(t.top),r=parseInt(t.right),s=parseInt(t.bottom),t=parseInt(t.left),e={gutter:isNaN(e)?20:e,top:isNaN(i)?20:i,right:isNaN(r)?20:r,bottom:isNaN(s)?20:s,left:isNaN(t)?20:t};this._setGridID(),this.updateGridDistance(e),this.updateFloatingElementsGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.clearStateGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.removeCollapseElementsProperties()},updateGridLayout:function(t,i){var r;this.settings.galleryLayout!==t&&(this._saveBlocksPosition(),this.removeCollapseElementsProperties(),this.properties.oldCellHeight=this.properties.singleHeight,this.properties.oldLayout=this.settings.galleryLayout,this.settings.galleryLayout=t,this.settings.fullHeight="false",this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.updateLayoutBlocksHeight(),this.updateFloatingElementsGridstack(),this.commitGridstack(),void 0!==i)&&(r=this,setTimeout(function(){var t=r,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:galleryLayoutChanged"));e.settings={galleryEditorInstance:t,$section:r.$section,reverseData:i},r.properties.oldLayout="",r.properties.oldCellHeight=r.properties.singleHeight,A(u).trigger(e)},300,i,r))},updateFloatingElementsGridstack:function(){var t=this.properties.gridstackInstance;t&&("masonry"==this.settings.galleryLayout?(t.grid._float=!1,t.grid.float=!1):(t.grid._float=!0,t.grid.float=!0))},updateGridstack:function(t){this.batchGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(),this.commitGridstack()},updateGridstackWidth:function(){this.batchGridstack(),this._defineDynamicPrivateProperties(),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!1,this.properties.gridstackInstance.grid.float=!1),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(!0),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!0,this.properties.gridstackInstance.grid.float=!0),this.commitGridstack()},updateSectionWidthWrap:function(t,i){var r,e=this.$element.parent();"100%"==t?(e.removeClass("center-disposition"),e.addClass("full-disposition")):(e.removeClass("full-disposition"),e.addClass("center-disposition")),e.css("max-width",t),void 0!==i&&(this.updateGridstackWidth(),r=this,setTimeout(function(){var t=r,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:sectionWidthApplyed"));e.settings={galleryEditorInstance:t,$section:r.$section,reverseData:i},A(u).trigger(e)},300,i,r))},updateRowDistances:function(i,r){var s;this.updateGridDistance(i),void 0!==r&&((s=this).updateGridstack(),setTimeout(function(){var t=s,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:rowDistancesApplied"));e.settings={galleryEditorInstance:t,$section:s.$section,newDistances:i,reverseData:r},A(u).trigger(e)},300,r,s,i))},updateRowSectionMargins:function(i,r){var s;void 0!==r&&((s=this).updateGridstack(),setTimeout(function(){var t=s,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:sectionMarginsApplied"));e.settings={galleryEditorInstance:t,$section:s.$section,newMargins:i,reverseData:r},A(u).trigger(e)},300,r,s,i))},updateGridDistance:function(t){this.properties.gutter=parseInt(t.gutter),this.properties.gridTopSeparator=parseInt(t.top),this.properties.gridRightSeparator=parseInt(t.right),this.properties.gridBottomSeparator=parseInt(t.bottom),this.properties.gridLeftSeparator=parseInt(t.left),this._setGutter(),this._defineHalfSeparatorProperties(),this.properties.setDesktopPadding=!1,this._setGridPadding();for(var e,i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)e=A(i[s]),this._updateElementPadding(e.find(".grid-stack-item-content")),this._updateHandlersPosition(e);this._updatePlaceholderPosition()},refreshGrid:function(){this._defineDynamicPrivateProperties(),this._setGridPadding(),this._fixHeightAllElements()},_countBlocks:function(){for(var t=0,i=0,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=e.length,s=0,s=0;s<r;s++){for(var a,t=s,o=/\d+$/gm,l=e[s].getAttribute("id");null!==(a=o.exec(l));)a.i===o.lastIndex&&o.lastIndex++,A.each(a,function(t,e){i=parseInt(e)});t<i&&(t=i)}this.properties.numberBlocksVisibileOnGrid=t,this.properties.lastIDBlock=t},getLastID:function(){return this.properties.lastIDBlock},getRowNumber:function(){return this.properties.sectionNumber},_setGridID:function(){this.properties.sectionNumber=parseInt(this.section.getAttribute("data-rexlive-section-number")),y(this.element,"grid-number-"+this.properties.sectionNumber)},_updateBlocksRexID:function(){for(var t,e,i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)(i[s].getAttribute("data-rexbuilder-block-id")===_||""==i[s].getAttribute("data-rexbuilder-block-id"))&&(t=Rexbuilder_Util.createBlockID(),i[s].setAttribute("data-rexbuilder-block-id",t),e=i[s].querySelector(".rexbuilder-block-data"))&&e.setAttribute("data-rexbuilder_block_id",t)},saveGrid:function(){var i="masonry"==this.settings.galleryLayout?this.properties.singleHeight/this.properties.singleWidth:1;this.serializedData=a.map(this.$element.children(".grid-stack-item"),function(t){var e=A(t).data("_gridstack_node");return{id:t.id,x:e.x,y:Math.round(e.y*i),width:e.width,height:Math.round(e.height*i)}},this)},getGridData:function(){return JSON.stringify(this.serializedData,null,"    ")},getGridstackNodes:function(){return this.properties.gridstackInstance.grid.nodes},getElementBottomTop:function(){for(var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)x(i[s],"removing_block")||((t=i[s]).x=parseInt(i[s].attributes["data-gs-x"].value),t.y=parseInt(i[s].attributes["data-gs-y"].value),t.w=parseInt(i[s].attributes["data-gs-width"].value),t.h=parseInt(i[s].attributes["data-gs-height"].value),t.xw=t.x+t.w,t.yh=t.y+t.h,e.push(t));return a.sortBy(e,[function(t){return t.yh},function(t){return t.xw}]).reverse()},getElementsTopBottom:function(){for(var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)x(i[s],"removing_block")||((t=i[s]).x=parseInt(i[s].getAttribute("data-gs-x")),t.y=parseInt(i[s].getAttribute("data-gs-y")),e.push(t));return a.sortBy(e,[function(t){return t.y},function(t){return t.x}])},batchGridstack:function(){null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.batchUpdate()},commitGridstack:function(){Rexbuilder_Util.domUpdating||null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.commit()},updateFullHeight:function(t){var e;t=void 0===t||"true"==t.toString(),this.properties.gridBlocksHeight=parseInt(this.element.getAttribute("data-gs-current-height")),this.properties.gridBlocksHeight=0===this.properties.gridBlocksHeight?1:this.properties.gridBlocksHeight,t?"fixed"==this.settings.galleryLayout&&(e=Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):e="fixed"==this.settings.galleryLayout?this.properties.singleWidth:this.properties.singleHeight,"masonry"!==this.settings.galleryLayout&&(this.updateGridstackStyles(e),this.$element.attr("data-full-height",t))},updateGridstackStyles:function(t){void 0!==t&&(this.properties.singleHeight=t),0!==this.properties.singleHeight&&null!==this.element.offsetParent&&null!==this.properties.gridstackInstance&&((t=this.properties.gridstackInstance).cellHeight(this.properties.singleHeight),t._initStyles(),t._updateStyles(this.properties.singleHeight))},updateGridstackGridSizes:function(t,e){this.properties.singleHeight=e,this.properties.singleWidth=t;t=this.properties.gridstackInstance;t.cellHeight(e),t._initStyles(),t._updateStyles(this.properties.singleHeight)},restoreBackup:function(){var t;this.$element.children(".grid-stack-item").each(function(){A(t=this).attr({"data-gs-x":t.attributes["data-col"].value-1,"data-gs-y":t.attributes["data-row"].value-1,"data-gs-width":t.attributes["data-width"].value,"data-gs-height":t.attributes["data-height"].value})})},destroyGridstack:function(){var t;null!==this.properties.gridstackInstance&&(this.properties.gridstackInstance.destroy(!1),this.$element.children(".grid-stack-item").each(function(){(t=A(this)).draggable("destroy"),t.resizable("destroy")}),k(this.element,"grid-stack-instance-"+this.properties.gridstackInstanceID),x(this.element,"grid-stack-one-column-mode")&&k(this.element,"grid-stack-one-column-mode"),this.properties.gridstackInstance=null)},getGridWidth:function(){return this.properties.wrapWidth},setGridWidth:function(t){this.$element.outerWidth(t)},getSingleWidth:function(){return this.properties.singleWidth},getSeparator:function(){return this.properties.gutter},getSectionNumber:function(){return this.properties.sectionNumber},setProperty:function(t){this.properties[t[0]]=t[1]},fillEmptySpaces:function(){for(var t,e,i,r=this.settings.numberCol,s=this._calculateGridHeight(),a=this.properties.gridstackInstance,o=[],l=1;l<=s;l++)for(g=1;g<=r;g++)if(a.isAreaEmpty(g-1,l-1,1,1)){for(t=0,0,e=g,i=l;e<=r&&a.isAreaEmpty(e-1,i-1,1,1);)t=e,e++;for(d=e-g,i++,e=g;i<=s;){for(;e<=t&&a.isAreaEmpty(e-1,i-1,1,1);)e++;if(e-1!=t)break;i++,e=g}var n=i-l,d={el:u.createElement("div"),x:g-1,y:l-1,w:d,h:n};a.addWidget(d.el,d.x,d.y,d.w,d.h,!1),o.push(d)}for(var p=this.properties.singleWidth,h=o.length,g=0;g<h;g++)a.removeWidget(o[g].el,!0),"masonry"==this.settings.galleryLayout&&(o[g].y=Math.floor(o[g].y*this.properties.singleHeight/p)+1,o[g].h=Math.round(o[g].h*this.properties.singleHeight/p));return o},removeBlock:function(t){this.properties.numberBlocksVisibileOnGrid--,this.properties.gridstackInstance.removeWidget(t,!1),"default"==Rexbuilder_Util.activeLayout&&y(t,"removing_block"),y(t,"rex-hide-element")},reAddBlock:function(t){var e,i,r,s;this.properties.numberBlocksVisibileOnGrid++,e=parseInt(t.attr("data-gs-x")),i=parseInt(t.attr("data-gs-y")),r=parseInt(t.attr("data-gs-width")),s=parseInt(t.attr("data-gs-height")),"default"==Rexbuilder_Util.activeLayout&&t.removeClass("removing_block"),t.removeClass("rex-hide-element"),t.draggable("destroy"),t.resizable("destroy"),t.children(".ui-resizable-handle").remove(),o(t,"e, s, w, se, sw"),this._updateHandlersPosition(t),this.properties.gridstackInstance.addWidget(t[0],e,i,r,s,!1,1,500,1)},deleteBlock:function(t){var e={targetElement:t,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)},t=(this.removeBlock(t.get(0)),this._createFirstReverseStack(),Rexbuilder_Util.stopBlockVideos(t),0==this.properties.numberBlocksVisibileOnGrid?this.$section.addClass("empty-section"):(this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide")),{targetElement:t,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)});Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",t,e)},createNewBlock:function(t,e,i,r){r=void 0!==r?r:"",Rexbuilder_Util_Editor.addingNewBlocks=!0;e=void 0===e?"text"==r?12:6:parseInt(e),i="masonry"==t?void 0===i?Math.round(4*this.properties.singleWidth/this.settings.cellHeightMasonry):parseInt(i):void 0===i?4:parseInt(i),e=parseInt(e),i=parseInt(i);var t=this.createBlock(0,0,e,i,r),r={targetElement:t,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)},s=(this.properties.gridstackInstance.addWidget(t[0],0,0,e,i,!0,1,500,1),t.filter(".insert-block-animation").one(l,function(t){this.classList.remove("insert-block-animation")}),parseInt(t.attr("data-gs-x"))),a=parseInt(t.attr("data-gs-y")),s=(this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.update(t[0],s,a,e,i),this.properties.gridstackInstance.commit(),this._createFirstReverseStack(),{targetElement:t,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)});return Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",s,r),Rexbuilder_Util_Editor.addingNewBlocks=!1,t.removeAttr("data-gs-auto-position"),t.data("gs-height",parseInt(t.attr("data-gs-height"))),t.data("gs-width",parseInt(t.attr("data-gs-width"))),t.data("gs-y",parseInt(t.attr("data-gs-y"))),t.data("gs-x",parseInt(t.attr("data-gs-x"))),t},createBlock:function(t,e,i,r,s){s=void 0!==s?s:"",this.properties.numberBlocksVisibileOnGrid++,this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),this.properties.lastIDBlock=this.properties.lastIDBlock+1;var a=this.properties.lastIDBlock,o=Rexbuilder_Util.createBlockID(),o=(tmpl.arg="block",tmpl("tmpl-new-block",{rexID:o,id:this.properties.sectionNumber+"_"+a,gsWidth:i,gsHeight:r,gsX:t,gsY:e,backendHeight:r,backendWidth:i,backendX:t+1,backendY:e+1,block_type:s,defaultPadding:{data:_plugin_frontend_settings.defaults.block.padding,style:_plugin_frontend_settings.defaults.block.padding.replace(";"," ").trim()}})),a=A(o),t=(a.append(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",{block_type:s})),a[0]);return this._prepareElement(t),this.updateSizeViewerText(t,i,r),a},updateAllElementsProperties:function(){this.properties.editedFromBackend=!1;var t=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder)")),e=t.length,i=0;if(this.properties.updatingSectionSameGrid)for(this.properties.updatingSectionSameGrid=!1,i=0;i<e;i++)this.updateElementAllProperties(t[i]),void 0!==store.get(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits")&&store.remove(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits");for(i=0;i<e;i++)this.updateElementAllProperties(t[i])},updateElementAllProperties:function(t){var e=this.properties.singleWidth,i=t.querySelector(".rexbuilder-block-data"),r=parseInt(t.getAttribute("data-gs-x")),r=(t.setAttribute("data-col",r+=1),i.setAttribute("data-col",r),r="masonry"==this.settings.galleryLayout?Math.floor(parseInt(t.getAttribute("data-gs-y"))*this.properties.singleHeight/e):parseInt(t.getAttribute("data-gs-y")),t.setAttribute("data-row",r+=1),i.setAttribute("data-row",r),parseInt(t.getAttribute("data-gs-width"))),s=t.getAttribute("data-width"),s=(t.setAttribute("data-width",r),k(t,"w"+s),y(t,"w"+r),i.setAttribute("data-size_x",r),t.getAttribute("data-height")),r="masonry"==this.settings.galleryLayout?Math.round(parseInt(t.getAttribute("data-gs-height"))*this.properties.singleHeight/e):parseInt(t.getAttribute("data-gs-height"));t.setAttribute("data-height",r),this.updateElementDataHeightProperties(i,parseInt(t.getAttribute("data-gs-height"))),k(t,"h"+s),y(t,"h"+r),i.setAttribute("data-size_y",r)},_defineDataSettings:function(){this.element.getAttribute("data-separator")&&(this.properties.gutter=parseInt(this.element.getAttribute("data-separator"))),this.element.getAttribute("data-layout")&&(this.settings.galleryLayout=this.element.getAttribute("data-layout").toString()),this.element.getAttribute("data-full-height")&&(this.settings.fullHeight=this.element.getAttribute("data-full-height").toString()),this.element.getAttribute("data-mobile-padding")&&(this.settings.mobilePadding=this.element.getAttribute("data-mobile-padding").toString())},_defineDynamicPrivateProperties:function(){var t=this.element.offsetWidth,e=this.section.getAttribute("data-rex-collapse-grid");if(e&&("default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<=_plugin_frontend_settings.defaultSettings.collapseWidth&&"true"==e.toString()||"true"==e.toString())?this.properties.oneColumModeActive=!0:this.properties.oneColumModeActive=!1,this.properties.wrapWidth=t,this.properties.singleWidth=t*this.settings.gridItemWidth,!this.settings.editorMode&&this.properties.fullWidthNaturalBackground)this._setFullWidthNaturalBackground(),this._setElementsToHeight("12");else if(!this.settings.editorMode&&this.properties.naturalBackground)this._setNaturalBackground(),this._setElementsToHeight("12");else if("masonry"==this.settings.galleryLayout)this.properties.singleHeight=this.settings.cellHeightMasonry;else{e=this.properties.singleHeight,t="true"==this.settings.fullHeight.toString()?(this.properties.gridBlocksHeight=this._calculateGridHeight(),Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):this.properties.singleWidth;if(e==t)return!1;this.properties.singleHeight=t}return!0},setFullWidthNaturalBackground:function(){!this.settings.editorMode&&this.properties.fullWidthNaturalBackground&&(this._setFullWidthNaturalBackground(),this._setElementsToHeight("12"))},_setFullWidthNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");null!==t&&null!==e&&""!==t&&""!==e&&(e=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t),this.section.style.minHeight=e+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(e-this.properties.gutter)/5:this.properties.singleHeight=(e-this.properties.gutter)/12)},setNaturalBackground:function(){!this.settings.editorMode&&this.properties.naturalBackground&&(this._setNaturalBackground(),this._setElementsToHeight("12"))},_setNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");null!==t&&null!==e&&""!==t&&""!==e&&(t=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t),this.section.style.minHeight=(t=e<t?e:t)+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(t-this.properties.gutter)/5:this.properties.singleHeight=(t-this.properties.gutter)/12)},_setElementsToHeight:function(t){for(var e=[].slice.call(this.element.getElementsByClassName("perfect-grid-item")),i=e.length,r=0,r=0;r<i;r++)e[r].setAttribute("data-gs-min-height",t)},_calculateGridHeight:function(){for(var t,e=0,i=[].slice.call(this.element.querySelectorAll(".grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)-1===i[s].className.indexOf("removing_block")&&e<(t=parseInt(i[s].getAttribute("data-gs-height"))+parseInt(i[s].getAttribute("data-gs-y")))&&(e=t);return e},_defineHalfSeparatorProperties:function(){t(this.properties.gutter)?(this.properties.halfSeparatorTop=this.properties.gutter/2,this.properties.halfSeparatorRight=this.properties.gutter/2,this.properties.halfSeparatorBottom=this.properties.gutter/2,this.properties.halfSeparatorLeft=this.properties.gutter/2):(this.properties.halfSeparatorTop=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorRight=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorBottom=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorLeft=Math.floor(this.properties.gutter/2)),this.properties.paddingTopBottom=-1!==this.section.className.indexOf("distance-block-top-bottom")},_defineRowSeparator:function(){this.properties.gridTopSeparator=this.element.getAttribute("data-row-separator-top")?parseInt(this.element.getAttribute("data-row-separator-top")):null,this.properties.gridRightSeparator=this.element.getAttribute("data-row-separator-right")?parseInt(this.element.getAttribute("data-row-separator-right")):null,this.properties.gridBottomSeparator=this.element.getAttribute("data-row-separator-bottom")?parseInt(this.element.getAttribute("data-row-separator-bottom")):null,this.properties.gridLeftSeparator=this.element.getAttribute("data-row-separator-left")?parseInt(this.element.getAttribute("data-row-separator-left")):null},_defineFullWidthNaturalBackground:function(){x(this.section,"full-width-natural-background")&&(this.properties.fullWidthNaturalBackground=!0)},_defineNaturalBackground:function(){x(this.section,"natural-background")&&(this.properties.naturalBackground=!0)},_setGutter:function(){t(this.properties.gutter)?(this.properties.halfSeparatorElementTop=this.properties.gutter/2,this.properties.halfSeparatorElementRight=this.properties.gutter/2,this.properties.halfSeparatorElementBottom=this.properties.gutter/2,this.properties.halfSeparatorElementLeft=this.properties.gutter/2):(this.properties.halfSeparatorElementTop=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementRight=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementBottom=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorElementLeft=Math.ceil(this.properties.gutter/2))},_fixHeightGrid:function(){var t=this.element;this.$element.outerHeight(t.attributes["data-gs-current-height"].value*this.properties.singleWidth)},_updateElementPadding:function(t){t.css({"padding-left":this.properties.halfSeparatorElementLeft,"padding-right":this.properties.halfSeparatorElementRight,"padding-top":this.properties.halfSeparatorElementTop,"padding-bottom":this.properties.halfSeparatorElementBottom})},_updateHandlersPosition:function(t){t.find(".ui-focused-element-highlight").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-e").css({top:this.properties.halfSeparatorElementTop,right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-se").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-s").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-sw").css({bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-w").css({top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft})},_updatePlaceholderPosition:function(){this.properties.gridstackInstance.placeholder.children(".placeholder-content").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom})},_saveBlocksPosition:function(){var t,e,i,r,s,a=this;this.$element.children(".grid-stack-item").each(function(){r=A(this),s=r.attr("data-rexbuilder-block-id"),t=parseInt(r.attr("data-gs-x")),e=parseInt(r.attr("data-gs-y")),i=parseInt(r.attr("data-gs-width")),r=parseInt(r.attr("data-gs-height")),store.set(s,{properties:[{x:t},{y:e},{w:i},{h:r}]}),Rexbuilder_Util_Editor.updatingSectionLayout&&!a.properties.updatingSectionSameGrid&&store.set(s+"_noEdits",{properties:[{x:t},{y:e},{w:i},{h:r}]})})},_restoreBlocksPosition:function(){var s,a=this.properties.gridstackInstance;this.$element.children(".grid-stack-item").each(function(){var t,e,i,r;s=A(this),r=Rexbuilder_Util_Editor.updatingSectionLayout&&void 0!==store.get(s.attr("data-rexbuilder-block-id")+"_noEdits")?store.get(s.attr("data-rexbuilder-block-id")+"_noEdits"):store.get(s.attr("data-rexbuilder-block-id")),t=parseInt(r.properties[0].x),e=parseInt(r.properties[1].y),i=parseInt(r.properties[2].w),r=parseInt(r.properties[3].h),a.update(this,t,e,i,r)})},createResizePlaceHolder:function(t){var e=t[0],i=u.createElement("div"),r=A(i),t=(t.parent().append(i),r.addClass("resizePlaceHolder"),r.addClass("w"+parseInt(e.attributes["data-width"].value)),parseInt(e.attributes["data-row"].value-1)*this.properties.singleWidth),i=parseInt(e.attributes["data-col"].value-1)*this.properties.singleWidth;return r.css("transform","translate("+i+"px, "+t+"px)"),r.css("position","absolute"),r},updateResizePlaceHolder:function(t,e){var i=e[0],r=this.properties.singleWidth,i=(parseInt(i.attributes["data-width"].value),Math.round(parseInt(e.outerWidth())/r)),e=(i<=0&&(i=1),t.removeClass(),t.addClass("resizePlaceHolder w"+i),Math.round(parseInt(e.outerHeight())/r));e<=0&&(e=1),t.css("width",i*r+"px"),t.css("height",e*r+"px")},_prepareElements:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;if(this.properties.editedFromBackend&&(void 0===Rexbuilder_Util_Editor.sectionCopying||!1===Rexbuilder_Util_Editor.sectionCopying))for(r=0;r<i;r++)e[r].setAttribute("data-gs-x",parseInt(e[r].getAttribute("data-col"))-1),e[r].setAttribute("data-gs-y",parseInt(e[r].getAttribute("data-row"))-1),e[r].setAttribute("data-gs-width",e[r].getAttribute("data-width")),e[r].setAttribute("data-gs-height",e[r].getAttribute("data-height"));for(r=0;r<i;r++)this._prepareElement(e[r]),null===(t=e[r].querySelector(".rexbuilder-block-data")).getAttribute("data-gs_start_h")&&t.setAttribute("data-gs_start_h",parseInt(e[r].getAttribute("data-gs-height")))},_prepareElement:function(t){var e=A(t);this._prepareElementEditing(e),this._updateElementPadding(e.find(".grid-stack-item-content")),this._updateHandlersPosition(e),this._fixImageSize(t)},updateElementDataHeightProperties:function(t,e){"masonry"==this.settings.galleryLayout?t.setAttribute("data-block_height_masonry",e):t.setAttribute("data-block_height_fixed",e),t.setAttribute("data-gs_start_h",e),t.setAttribute("data-block_height_calculated",e)},_prepareElementEditing:function(t){var e,i;o(t,"e, s, w, se, sw"),t.find(".grid-item-content").prepend('<div class="rexlive-block-drag-handle"></div>'),t.attr({"data-gs-min-width":1,"data-gs-min-height":1,"data-gs-max-width":500}),null===t[0].querySelector(".rex-slider-wrap")&&(0==(e=t.find(".text-wrap")).length?(i=u.createElement("div"),y(i,"text-wrap"),t.find(".rex-custom-scrollbar").append(i)):0==e.children(".text-editor-span-fix").length&&((i=u.createElement("span")).style.display="none",y(i,"text-editor-span-fix"),e.append(i))),this.addElementListeners(t)},_fixImagesDimension:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++)this._fixImageSize(t[i])},_fixImageSize:function(t){var e,i,r=t.querySelector(".grid-item-content");null!==r&&null!==(e=r.querySelector(".rex-image-wrapper"))&&x(e,"natural-image-background")&&-1!=(i=isNaN(parseInt(r.getAttribute("data-background_image_width")))?-1:parseInt(r.getAttribute("data-background_image_width")))&&(t.offsetWidth<i?y:k)(e,"small-width")},_removeHandles:function(t){t.children(".ui-resizable-handle").each(function(){A(this).remove()})},addElementListeners:function(s){var a=this,e=s.find(".rexlive-block-drag-handle"),t=(s.find(".text-wrap"),e[0]);s.on("mousedown",function(i){var r=A(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(Rexbuilder_Util_Editor.mouseDownEvent=i,!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&i.target!=t&&(clearTimeout(this.downTimer),this.downTimer=setTimeout(function(){e.addClass("drag-up"),s.addClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.mouseDownEvent&&(Rexbuilder_Util_Editor.mouseDownEvent.target=t,Rexbuilder_Util_Editor.mouseDownEvent.toElement=t,Rexbuilder_Util_Editor.elementDraggingTriggered=!0,s.trigger(Rexbuilder_Util_Editor.mouseDownEvent))},125),clearTimeout(a.doubleDownTimer),a.doubleDownTimer=setTimeout(function(){var t,e;Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.editingElement||s.hasClass("ui-resizable-resizing")||s.hasClass("ui-draggable-dragging")||r.hasClass("ui-resizable-handle")||r.hasClass("circle-handle")||1!==i.which||(s.trigger("mouseup"),t=tmpl("tmpl-tool-drag",{}),(t=A(t)).css("position","absolute"),t.css("zIndex",20),s.append(t),e=s[0].getBoundingClientRect(),t.css("left",i.clientX-e.left-t[0].offsetWidth/2),t.css("top",i.clientY-e.top-t[0].offsetHeight/2),s.addClass("grid-stack-item--drag-to-row"),a.properties.isGridLocked=!0,a.$section.addClass("rexpansive-lock-section--overlay"))},1500)):(e.addClass("drag-up"),s.addClass("ui-draggable--drag-up"),i.target=t,i.toElement=t)}),s.on("mouseup",function(t){t=A(t.target),"default"==Rexbuilder_Util.activeLayout||0!=t.parents(".tool-button").length||t.hasClass("ui-resizable-handle")||0!=t.parents(".ui-resizable-handle").length?0==t.parents(".tool-button").length&&(Rexbuilder_Util_Editor.elementDraggingTriggered&&(e.removeClass("drag-up"),s.removeClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.elementDraggingTriggered=!1),clearTimeout(this.downTimer),clearTimeout(a.doubleDownTimer),Rexbuilder_Util_Editor.mouseDownEvent=null):(e.removeClass("drag-up"),s.removeClass("ui-draggable--drag-up")),a.properties.isGridLocked&&(Rexbuilder_Util_Editor.releaseRowsLight(),a.properties.isGridLocked=!1)}),s.on("mouseenter",function(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=s,a.focusElement(Rexbuilder_Util_Editor.focusedElement))}),s.on("mouseleave",function(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=s,a.unFocusElement(Rexbuilder_Util_Editor.focusedElement))})},unFocusElementEditing:function(t){0<t.length&&t.removeClass("focused")},focusElementEditing:function(t){for(var e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)k(e[r],"focused");0<t.length&&t.addClass("focused")},focusElement:function(t){t&&0<t.length&&t.addClass("focused"),this.$section.addClass("focusedRow")},unFocusElement:function(t){0<t.length&&t.removeClass("focused"),this.$section.removeClass("focusedRow")},_updateElementsSizeViewers:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++)this.updateSizeViewerSizes(t[i]),this.checkBlockDimension(t[i])},updateSizeViewerText:function(t,e,i,r,s){r=void 0!==r?r:t.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),s=void 0!==s?s:t.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),e!==_&&i!==_||(e=parseInt(t.getAttribute("data-gs-width")),i=parseInt(t.getAttribute("data-gs-height")),"masonry"==this.settings.galleryLayout&&(i=Math.round(i*this.properties.singleHeight)-this.properties.gutter));t=e+" x "+i,e=e+"x"+i;r&&(r.textContent=t),s&&(s.textContent=e)},updateBlocksSizes:function(t){if(void 0!==t){this.properties.gridstackInstance.batchUpdate();for(var e=0;e<t.length;e++){var i=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t[e].rexID+'"]');this.properties.gridstackInstance.update(i,t[e].x,t[e].y,t[e].w,t[e].h),this.updateSizeViewerText(i,t[e].w,t[e].h)}this.properties.gridstackInstance.commit()}},updateBlockSize:function(t){this.properties.gridstackInstance.batchUpdate();var e=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t.rexID+'"]');this.properties.gridstackInstance.update(e,t.x,t.y,t.w,t.h),this.updateSizeViewerSizes(e),this.properties.gridstackInstance.commit()},updateSizeViewerSizes:function(t){this.updateSizeViewerText(t,t.getAttribute("data-gs-width"),this.calculateHeightSizeViewer(t))},calculateHeightSizeViewer:function(t){t=parseInt(t.getAttribute("data-gs-height"));return"masonry"==this.settings.galleryLayout?t*this.properties.singleHeight-this.properties.gutter:t},checkBlockDimension:function(t,e){((e=void 0!==e?e:parseInt(t.getAttribute("data-gs-width"))*this.properties.singleWidth)<190?y:k)(t,"ui-tools--view-mobile"),(e<100?y:k)(t,"ui-hide-mobile-size-viewer")},_linkResizeEvents:function(){var i,r,s,a,o,l,n,p,d,h,g,u,c,m,b=this;b.$element.on("resizestart",function(t,e){e.element.is("span")||(b.properties.resizeHandle=A(t.toElement).attr("data-axis"),t.target,h=t.target.querySelector(".grid-item-content"),t.target.querySelector(".grid-item-content-wrap"),p=t.target.querySelector(".text-wrap"),d=A(p),c=t.target.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),m=t.target.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),x(t.target,"block-has-slider"),r=isNaN(parseInt(h.getAttribute("data-background_image_width")))?0:parseInt(h.getAttribute("data-background_image_width")),s=isNaN(parseInt(h.getAttribute("data-background_image_height")))?0:parseInt(h.getAttribute("data-background_image_height")),g=h.querySelector(".rex-image-wrapper"),u=null!==g&&x(g,"natural-image-background"),Rexbuilder_Util_Editor.elementIsResizing=!0,i=parseInt(t.target.getAttribute("data-gs-x")),"e"==b.properties.resizeHandle||"se"==b.properties.resizeHandle?t.target.setAttribute("data-gs-max-width",b.settings.numberCol-i):"w"!=b.properties.resizeHandle&&"sw"!=b.properties.resizeHandle||parseInt(t.target.getAttribute("data-gs-width")),a=o=0,n="masonry"==b.settings.galleryLayout?1:b.properties.singleWidth)}).on("resize",function(t,e){var i=e.element;i.is("span")||(u&&(e.size.width<r?y:k)(g,"small-width"),b.updateSizeViewerText(t.target,Math.round(e.size.width/b.properties.singleWidth),Math.round(e.size.height/n)-("masonry"===b.settings.galleryLayout?b.properties.gutter:0),c,m),e.originalSize.width!==e.size.width&&b.checkBlockDimension(t.target,e.size.width),e=i.hasClass("fit-natural-bg-image"),"masonry"==b.settings.galleryLayout&&u&&(l=t.target.offsetWidth,a=l<r||e?s*(l-b.properties.gutter)/r:s,a=isNaN(a)?0:a),o=R(d),l=Math.max(o,a),"masonry"==b.settings.galleryLayout?b.properties.gridstackInstance.minHeight(t.target,Math.round((l+b.properties.gutter)/b.properties.singleHeight)):b.properties.gridstackInstance.minHeight(t.target,Math.ceil((l+b.properties.gutter)/b.properties.singleWidth)))}).on("gsresizestop",function(t,e){var i,r,s,a,o,l,n;function d(){o()-n<s?a||l(d):r()}Rexbuilder_Util_Editor.elementIsResizing&&("masonry"==b.settings.galleryLayout&&(e.setAttribute("data-height",Math.round(e.getAttribute("data-gs-height")/b.properties.singleWidth)),e.querySelector(".rexbuilder-block-data").setAttribute("data-element_real_fluid",e.getAttribute("data-gs-min-height")==e.getAttribute("data-gs-height")?1:0)),b.updateAllElementsProperties(),b.updateSizeViewerText(e,_,_,c,m),b.checkBlockDimension(e),e.setAttribute("data-gs-max-width",500),clearTimeout(b.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.elementIsResizing=!1,b.$element.attr('data-rexlive-layout-changed="true"'),b.removeCollapseElementsProperties(),i=b.$section,b.properties.gridstackInstance.minHeight(e,1),b.properties.gridstackInstance.batchUpdate(),b.properties.gridstackInstance.commit(),m=c=h=p=null,Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_start_h"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_width"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_height"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_x"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_y"),r=Rexbuilder_Util.fixYoutube.bind(null,i[0]),s=1500,o=Date.now,l=f.requestAnimationFrame,n=o(),l(d))})},_linkDragEvents:function(){this.$element.on("dragstart",r).on("dragstop",function(t,e){void 0!==e&&(this.updateAllElementsProperties(),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util.editedDataInfo.setBlockData(this.$section.attr("data-rexlive-section-id"),e.helper.attr("data-rexbuilder-block-id"),"gs_x"),Rexbuilder_Util.editedDataInfo.setBlockData(this.$section.attr("data-rexlive-section-id"),e.helper.attr("data-rexbuilder-block-id"),"gs_y"),clearTimeout(this.doubleDownTimer))}.bind(this))},_linkDnDEvents:function(){var s,a=this,i=!0,r=function(t){var e=A(u).scrollTop();A(u).scrollTop(e+t),i||setTimeout(function(){r(t)},20)};a.$element.on("dragstart",".drag-to-section",function(t){var e,i,r;Rexbuilder_Util_Editor.dragAndDropFromParent||(a.properties.isGridLocked||setTimeout(function(){Rexbuilder_Util_Editor.lockRowsLight(a.$section),a.properties.isGridLocked=!0},100),t.originalEvent.dataTransfer.effectAllowed="all",e=A(this).parents(".grid-stack-item"),(s=e.clone(!1)).find(".rexbuilder-block-data").remove(),s.find(".ui-resizable-handle").remove(),s.find(".rexlive-block-toolbox").remove(),s.find(".grid-stack-item-content").css("height","100%"),A("body").append(s),s.css("position","fixed"),s.css("left",t.clientX),s.css("top",t.clientY),s.css("width",e.width()),s.css("height",e.height()),s.css("transform","scale(0.5)"),s.css("transformOrigin","top left"),e=e.attr("data-rexbuilder-block-id"),i=a.$section.attr("data-rexlive-section-id"),r=void 0!==a.$section.attr("data-rexlive-model-number")?a.$section.attr("data-rexlive-model-number"):"",t.originalEvent.dataTransfer.setData("text/plain",JSON.stringify({sectionID:i,modelNumber:r,rexID:e})))}),a.$element.on("drag",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(s.css("left",t.clientX+5),s.css("top",t.clientY+5),s.css("zIndex",3e3),i=!0,event.clientY<150&&(i=!1,r(-1)),event.clientY>Rexbuilder_Util_Editor.viewportMeasurement.height-150&&(i=!1,r(1)))}),a.$element.on("dragend",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(a.properties.isGridLocked&&(Rexbuilder_Util_Editor.releaseRowsLight(),a.properties.isGridLocked=!1),i=!0,s.css("zIndex",-3e3),s.css("left",t.clientX+5),s.css("top",t.clientY+5),s.remove(),s=null)})},setGridstackIstanceNumber:function(){for(var t,e=this.$element.attr("class").split(/\s+/),i=0,r=e.length;i<r;i++)(t=e[i].split("-"))[2]!=_&&"instance"==t[2]&&(this.properties.gridstackInstanceID=t[3])},updateLayoutBlocksHeight:function(){var t=this.properties.gridstackInstance;if("null"!=typeof t&&(this.properties.blocksBottomTop=this.getElementBottomTop(),!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.batchGridstack();for(var e=[].slice.call(this.properties.blocksBottomTop),i=e.length,r=0,r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data"),a=this.getBlockSizeOnLayoutChange(e[r]);Rexbuilder_Util_Editor.elementIsResizing=!0,this.updateElementDataHeightProperties(s,a.height),this.resizeBlock(e[r],a.width,a.height),Rexbuilder_Util_Editor.elementIsResizing=!1}Rexbuilder_Util.windowIsResizing||this.commitGridstack()}},updateBlocksHeight:function(t){var e=this.properties.gridstackInstance;if("null"!=typeof e&&(!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.properties.blocksBottomTop=this.getElementBottomTop();for(var i=[].slice.call(this.properties.blocksBottomTop),r=i.length,s=0,s=0;s<r;s++)Rexbuilder_Util.backendEdited||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util_Editor.updatingCollapsedGrid||this.properties.firstStartGrid?x(i[s],"rex-hide-element")||x(i[s],"removing_block")||x(i[s],"block-has-slider")||this.updateElementHeight(i[s]):this.properties.collapsingElements||this.updateElementHeight(i[s],!1,t);Rexbuilder_Util.windowIsResizing}},getBlockSizeOnLayoutChange:function(t){var e,i=t.querySelector(".rexbuilder-block-data"),r=t.querySelector(".text-wrap"),s=t.querySelector(".rex-image-wrapper"),a=t.querySelector(".grid-item-content"),i=(parseInt(i.getAttribute("data-element_real_fluid")),i.getAttribute("data-type_bg_block")),o=parseInt(t.getAttribute("data-gs-width")),l=0,n=!1,d=parseInt(t.getAttribute("data-gs-height"))*this.properties.oldCellHeight,l=Math.round(d/this.properties.singleHeight);return r&&0<r.innerText.trim().length&&0<r.childElementCount&&(n=!0,e=r.offsetHeight+this.properties.gutter),!n&&s&&"masonry"===this.settings.galleryLayout&&"natural"===i&&(r=parseInt(a.getAttribute("data-background_image_width")),n=parseInt(a.getAttribute("data-background_image_height")),(t.offsetWidth<r?(e=n*o*this.properties.singleWidth/r,y):(e=n+this.properties.gutter,k))(s,"small-width")),{width:o,height:l=d<e?Math.round(e/this.properties.singleHeight):l}},getBlockSizeOnCollapse:function(t){var e=t.querySelector(".rexbuilder-block-data"),i=t.querySelector(".text-wrap"),r=t.querySelector(".rex-image-wrapper"),s=t.querySelector(".grid-item-content"),a=-1!==t.className.indexOf("block-has-slider"),o=(s.className.indexOf("empty-content"),-1!==s.className.indexOf("youtube-player")),l=0!==[].slice.call(t.getElementsByClassName("rex-video-wrap")).length,n=-1!==s.className.indexOf("vimeo-player"),d=(parseInt(e.getAttribute("data-element_real_fluid")),e.getAttribute("data-type_bg_block"),parseInt(t.getAttribute("data-gs-width"))),p=!1,h=null,g=parseInt(t.getAttribute("data-gs-height"))*this.properties.singleHeight,s=(Math.round(g/this.properties.singleHeight),i&&0<i.innerText.trim().length&&0<i.childElementCount&&(p=!0,h=i.offsetHeight+this.properties.gutter),!p&&r&&(g=parseInt(s.getAttribute("data-background_image_width")),i=parseInt(s.getAttribute("data-background_image_height")),(t.offsetWidth<g?(h=i*(d*this.properties.singleWidth-this.properties.gutter)/g,h+=this.properties.gutter,y):(h=i+this.properties.gutter,k))(r,"small-width")),!p&&(o||l||n)&&(h=Math.round(d*this.properties.singleWidth*.75)),parseFloat(e.getAttribute("data-slider_ratio")));return a&&!isNaN(s)&&(h=isNaN(s)?d*this.properties.singleWidth*.75:d*this.properties.singleWidth*s),{width:d,height:Math.round(h/this.properties.singleHeight)}},updateElementHeight:function(t,e,i,r){e=void 0!==e&&e,r=void 0!==r?r:0,i=void 0!==i&&i,this.properties.oneColumModeActive||(Rexbuilder_Util_Editor.elementIsResizing=!0);var s=t.querySelector(".rexbuilder-block-data"),a=parseInt(s.getAttribute("data-gs_start_h")),o=(parseInt(s.getAttribute("data-gs_start_h")),this.properties.singleWidth),o=this.properties.oneColumModeActive?this.element.offsetWidth*this.settings.gridItemWidth:o,l=this.properties.gutter,n=t.querySelector(".text-wrap"),n=A(n),d=parseInt(t.getAttribute("data-gs-width")),p=parseInt(t.getAttribute("data-gs-height")),h=p*this.properties.singleHeight-l,g=parseInt(s.getAttribute("data-element_real_fluid")),u=0,c=0,m=0,b=0,f=!1,_=s.getAttribute("data-type_bg_block"),x=t.querySelector(".grid-item-content"),y=null,k=!1,v=!1,E=!1,I=!1,S=!1,w=!1;if(x&&(y=x.querySelector(".rex-image-wrapper"),k=-1!==t.className.indexOf("block-has-slider"),w=-1!==t.className.indexOf("fit-natural-bg-image"),v=-1!==x.className.indexOf("empty-content"),E=-1!==x.className.indexOf("youtube-player"),I=-1!==x.className.indexOf("mp4-player"),S=-1!==x.className.indexOf("vimeo-player")),!k){if(n=R(n),this.properties.oneColumModeActive&&(d=12),0==n&&(null!==y&&(y=parseInt(x.getAttribute("data-background_image_width")),x=parseInt(x.getAttribute("data-background_image_height")),u=this.properties.singleWidth*t.getAttribute("data-gs-width")<y||w?x*(d*o-l)/y:x),(E||I||S)&&(c=p*this.properties.singleHeight),k&&(b=p*this.properties.singleHeight),0==c)&&0==u&&0==b&&(Rexbuilder_Util_Editor.updatingSectionLayout||v||this.properties.firstStartGrid||k)&&(m=this.properties.editedFromBackend&&"masonry"==this.settings.galleryLayout?Math.round(o*a):this.properties.oneColumModeActive&&this.properties.beforeCollapseWasFixed?a*this.properties.singleWidth:a*this.properties.singleHeight),k||0!=u||0!=c||0!=n||(f=!0),w=a*this.properties.singleHeight-l,y=k||E||S||I||!("full"===_&&0===n||""===_&&0===n)||this.properties.oneColumModeActive?(a=e?w:0,Math.max(a,u,c,m,n,b)):w,this.properties.oneColumModeActive&&!Rexbuilder_Util.windowIsResizing)return{height:y,empty:f};0!=r&&(y=d*o*r),x=!1,0!==n?("fixed"===this.settings.galleryLayout&&!i||1!==g&&"masonry"===this.settings.galleryLayout)&&y<=h&&(x=!0):0!==u?("fixed"===this.settings.galleryLayout||"masonry"===this.settings.galleryLayout&&("natural"===_&&1!==g||"full"===_)&&y<=h)&&(x=!0):0!==c&&"masonry"===this.settings.galleryLayout&&(x=!0),x||(p="fixed"==this.settings.galleryLayout&&(f||E||I||S)?Math.round((y+l)/this.properties.singleHeight):Math.ceil((y+l)/this.properties.singleHeight),this.updateElementDataHeightProperties(s,p),this.resizeBlock(t,d,p))}Rexbuilder_Util_Editor.elementIsResizing=!1},resizeBlock:function(t,e,i){var r,s,a;isNaN(i)||null!=(r=this.properties.gridstackInstance)&&(0!=this.properties.oldCellHeight&&this.properties.oldCellHeight!=this.properties.singleHeight&&"masonry"==this.properties.oldLayout?(s=(a=store.get(t.getAttribute("data-rexbuilder-block-id"))).properties[0].x,a=Math.round(parseInt(a.properties[1].y)*this.properties.oldCellHeight/this.properties.singleHeight),r.update(t,s,a,e,i)):r.resize(t,e,i))},_setParentGridPadding:function(){var t=this.$element.parent();(Rexbuilder_Util.globalViewport.width>=_plugin_frontend_settings.defaultSettings.collapseWidth&&!this.properties.setDesktopPadding||!this.properties.setDesktopPadding&&!this.properties.setMobilePadding&&"true"==this.$section.attr("data-rex-collapse-grid"))&&(this.properties.setDesktopPadding=!0,"true"==this.$section.attr("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?t.css("padding-top",this.properties.gridTopSeparator-this.properties.halfSeparatorTop):t.css("padding-top",this.properties.halfSeparatorTop),null!==this.properties.gridBottomSeparator?t.css("padding-bottom",this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom):t.css("padding-bottom",this.properties.halfSeparatorBottom),this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?t.css("padding-left",this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft):t.css("padding-left",this.properties.halfSeparatorLeft),null!==this.properties.gridRightSeparator?t.css("padding-right",this.properties.gridRightSeparator-this.properties.halfSeparatorRight):t.css("padding-right",this.properties.halfSeparatorRight)))},_setGridPadding:function(){this.properties.setDesktopPadding&&(this.properties.setDesktopPadding||this.properties.setMobilePadding||"true"!=this.section.getAttribute("data-rex-collapse-grid"))||(this.properties.setDesktopPadding=!0,"true"==this.section.getAttribute("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?this.element.style.marginTop=this.properties.gridTopSeparator-this.properties.halfSeparatorTop+"px":this.element.style.marginTop=this.properties.halfSeparatorTop+"px",null!==this.properties.gridBottomSeparator?this.element.style.marginBottom=this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom+"px":this.element.style.marginBottom=this.properties.halfSeparatorBottom+"px",this.properties.paddingTopBottom)||(null!==this.properties.gridLeftSeparator?this.element.style.marginLeft=this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft+"px":this.element.style.marginLeft=this.properties.halfSeparatorLeft+"px",null!==this.properties.gridRightSeparator?this.element.style.marginRight=this.properties.gridRightSeparator-this.properties.halfSeparatorRight+"px":this.element.style.marginRight=this.properties.halfSeparatorRight+"px")},collapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!0),this.$section.find(".collapse-grid").addClass("grid-collapsed"),this.properties.oneColumModeActive=!0},removeCollapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!1),this.$section.find(".collapse-grid").removeClass("grid-collapsed"),this.properties.oneColumModeActive=!1},updateGridLayoutCollapse:function(t){this.settings.galleryLayout=t.layout,this.settings.fullHeight=t.fullHeight,this.properties.singleHeight=t.singleHeight,this.element.setAttribute("data-full-height",t.fullHeight),this.element.setAttribute("data-layout",t.layout),this.$section.children(".section-data").attr("data-full_height",t.fullHeight),this.$section.children(".section-data").attr("data-layout",t.layout),this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack()},changeGridToMasonry:function(){this.settings.galleryLayout="masonry",this.settings.fullHeight=!1,this.properties.singleHeight=this.settings.cellHeightMasonry,this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack(),this.element.setAttribute("data-layout","masonry"),this.element.setAttribute("data-full-height","false"),this.$section.children(".section-data").attr("data-layout","masonry"),this.$section.children(".section-data").attr("data-full_height","false")},collapseElements:function(t){t=void 0===t?{}:t,this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.fixBlockDomOrder(),this._saveBlocksPosition(),this.collapseElementsProperties(),this.properties.collapsingElements=!0,"fixed"==this.settings.galleryLayout&&(this.properties.beforeCollapseWasFixed=!0,this.changeGridToMasonry()),this.batchGridstack(),this.updateBlocksWidth(),this.commitGridstack(),setTimeout(e.bind(this,t),500)},updateBlocksWidth:function(){for(var t=this.getElementsTopBottom(),e=0,i=t.length,r=0;r<i;r++)this.properties.gridstackInstance.update(t[r],0,e,12,parseInt(t[r].getAttribute("data-gs-height"))),e+=parseInt(t[r].getAttribute("data-gs-height"))},updateCollapsedBlocksHeight:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,r=t.reverse(),i=0;i<e;i++){var s=this.getBlockSizeOnCollapse(r[i]);this.properties.gridstackInstance.resize(r[i],s.width,s.height)}},fixBlockDomOrder:function(){var t,e,i,r,s=this.getElementsTopBottom(),a=[],o=[],l=s.length;for(g=0;g<l;g++){var n={rexID:A(s[g]).attr("data-rexbuilder-block-id"),added:!1};a.push(n)}var d,p=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),h=p.length,g=0;for(g=0;g<h;g++)d={rexID:p[g].getAttribute("data-rexbuilder-block-id"),element:A(p[g]).detach()},o.push(d);for(g=0,i=a.length;g<i;g++){for(e=0,r=o.length;e<r;e++)if(o[e].rexID==a[g].rexID){t=o[e].element;break}this.$element.append(t),o.splice(e,1)}},filter:function(t){for(var e=[],i=this.properties.initialStateGrid.length,r=0;r<i;r++)e.push(this.properties.initialStateGrid[r].el);var s=A(e).map(function(){return this.toArray()}),a=s.filter(t.filter),o=s.not(t.filter),l=this;if(a.each(function(t,e){"0"===e.style.opacity?A(e).velocity({scale:1,opacity:1},{duration:200,begin:function(t){t[0].style.display=""}}):(e.style.opacity=1,e.style.display="")}),o.each(function(t,e){"0"!==e.style.opacity?A(e).velocity({scale:0,opacity:0},{duration:200,complete:function(t){t[0].style.display="none"}}):(e.style.opacity=0,e.style.display="none")}),this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.removeAll(!1),"*"===t.filter){s.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),autoPosition:e.getAttribute("data-gs-auto-position"),minWidth:e.getAttribute("data-gs-min-width"),maxWidth:e.getAttribute("data-gs-max-width"),minHeight:e.getAttribute("data-gs-min-height"),maxHeight:e.getAttribute("data-gs-max-height"),id:e.getAttribute("data-gs-id")};l.properties.gridstackInstance.addWidget(e,i.x,i.y,i.width,i.height,i.autoPosition,i.minWidth,i.maxWidth,i.minHeight,i.maxHeight,i.id)});for(var r=0,n=this.properties.initialStateGrid.length;r<n;r++){var d=this.properties.initialStateGrid[r].el[0];this.properties.gridstackInstance.update(d,this.properties.initialStateGrid[r].x,this.properties.initialStateGrid[r].y)}}else this.properties.mirrorStateGrid=[],a.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))},i=l.placeElMirror(i);l.properties.mirrorStateGrid.push({x:i.x,y:i.y,el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))})}),a.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),el:e};l.properties.gridstackInstance.addWidget(e,i.x,i.y)}),a.each(function(t,e){l.properties.gridstackInstance.update(e,l.properties.mirrorStateGrid[t].x,l.properties.mirrorStateGrid[t].y)});this.properties.gridstackInstance.commit();o=jQuery.Event("rexlive:galleryFiltered");o.settings={galleryEditorInstance:this},A(u).trigger(o)},placeElMirror:function(t){for(var e={x:0,y:0},i=0;;++i){var r=i%this.properties.gridstackInstance.grid.width,s=Math.floor(i/this.properties.gridstackInstance.grid.width);if(!(r+t.width>this.properties.gridstackInstance.grid.width)&&!a.find(this.properties.mirrorStateGrid,a.bind(GridStackUI.Utils._isAddNodeIntercepted,{x:r,y:s,node:t}))){e.x=r,e.y=s;break}}return e},get_pixel_position:function(t){var e={left:"0",top:"0"};return e.left=this.properties.gridstackInstance.cellWidth()*t.x+"px",e.top=this.properties.gridstackInstance.cellHeight()*t.y+this.properties.gridstackInstance.opts.verticalMargin*t.y+"px",e},save_grid_state:function(){this.properties.initialStateGrid=this.properties.gridstackInstance.grid.nodes},fix_natural_image_blocks:function(){for(var t,e=[].slice.call(this.element.getElementsByClassName("rex-image-wrapper")),i=e.length,r=0,r=0;r<i;r++)x(e[r],"natural-image-background")&&(t=A(e[r]),t=parseInt(t.parents(".grid-item-content").attr("data-background_image_width")),e[r].offsetWidth,t>e[r].offsetWidth)&&y(e[r],"small-width")},set_grid_initial_state:function(t){this.properties.initialStateGrid=t},merge_grid_initial_state:function(t){this.properties.initialStateGrid=this.properties.initialStateGrid.concat(t)},_getCoord:function(t,e){return{x:t%e,y:Math.floor(t/e)}},destroyGridGallery:function(){this.destroyGridstack(),this.clearStateGrid(),this.$element.removeClass("grid-number-"+this.properties.sectionNumber)},_check_parent_class:function(t){return x(this.section,t)}}),A.fn[s]=function(e){var i,r=arguments;return e===_||"object"==typeof e?this.each(function(){A.data(this,"plugin_"+s)||A.data(this,"plugin_"+s,new d(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=A.data(this,"plugin_"+s);t instanceof d&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(r,1))),"destroy"===e&&A.data(this,"plugin_"+s,null)}),i!==_?i:this):void 0}}(jQuery,window,document,_);
/*
 * anime.js v3.1.0
 * (c) 2019 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},M={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},S=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],l={CSS:{},springs:{}};function C(n,e,t){return Math.min(Math.max(n,e),t)}function s(n,e){return-1<n.indexOf(e)}function o(n,e){return n.apply(null,e)}var w={arr:function(n){return Array.isArray(n)},obj:function(n){return s(Object.prototype.toString.call(n),"Object")},pth:function(n){return w.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||w.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return w.hex(n)||w.rgb(n)||w.hsl(n)},key:function(n){return!i.hasOwnProperty(n)&&!M.hasOwnProperty(n)&&"targets"!==n&&"keyframes"!==n}};function d(n){n=/\(([^)]+)\)/.exec(n);return n?n[1].split(",").map(function(n){return parseFloat(n)}):[]}function u(r,t){var n=d(r),e=C(w.und(n[0])?1:n[0],.1,100),a=C(w.und(n[1])?100:n[1],.1,100),o=C(w.und(n[2])?10:n[2],.1,100),n=C(w.und(n[3])?0:n[3],.1,100),u=Math.sqrt(a/e),i=o/(2*Math.sqrt(a*e)),c=i<1?u*Math.sqrt(1-i*i):0,s=i<1?(i*u-n)/c:-n+u;function f(n){var e=t?t*n/1e3:n,e=i<1?Math.exp(-e*i*u)*(+Math.cos(c*e)+s*Math.sin(c*e)):(1+s*e)*Math.exp(-e*u);return 0===n||1===n?n:1-e}return t?f:function(){var n=l.springs[r];if(n)return n;for(var e=0,t=0;;)if(1===f(e+=1/6)){if(16<=++t)break}else t=0;n=e*(1/6)*1e3;return l.springs[r]=n}}function q(e){return void 0===e&&(e=10),function(n){return Math.round(n*e)*(1/e)}}function $(b,e,M,t){if(0<=b&&b<=1&&0<=M&&M<=1){var x=new Float32Array(11);if(b!==e||M!==t)for(var n=0;n<11;++n)x[n]=k(.1*n,b,M);return function(n){return b===e&&M===t||0===n||1===n?n:k(function(n){for(var e=0,t=1;10!==t&&x[t]<=n;++t)e+=.1;var r=e+(n-x[--t])/(x[t+1]-x[t])*.1,a=O(r,b,M);if(.001<=a){for(var o=n,u=r,i=b,c=M,s=0;s<4;++s){var f=O(u,i,c);if(0===f)return u;u-=(k(u,i,c)-o)/f}return u}if(0===a)return r;for(var l,d,p=n,h=e,g=e+.1,m=b,v=M,y=0;0<(l=k(d=h+(g-h)/2,m,v)-p)?g=d:h=d,1e-7<Math.abs(l)&&++y<10;);return d}(n),e,t)}}}e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,t=4;n<((e=Math.pow(2,--t))-1)/11;);return 1/Math.pow(4,3-t)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===e&&(e=.5);var t=C(n=void 0===n?1:n,1,10),r=C(e,.1,2);return function(n){return 0===n||1===n?n:-t*Math.pow(2,10*(n-1))*Math.sin((n-1-r/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){t[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}}});var e,t,c=e;function r(n,e){return 1-3*e+3*n}function k(n,e,t){return((r(e,t)*n+(3*t-6*e))*n+3*e)*n}function O(n,e,t){return 3*r(e,t)*n*n+2*(3*t-6*e)*n+3*e}function B(n,e){if(w.fnc(n))return n;var t=n.split("(")[0],r=c[t],a=d(n);switch(t){case"spring":return u(n,e);case"cubicBezier":return o($,a);case"steps":return o(q,a);default:return o(r,a)}}function a(n){try{return document.querySelectorAll(n)}catch(n){}}function P(n,e){for(var t,r=n.length,a=2<=arguments.length?e:void 0,o=[],u=0;u<r;u++)u in n&&(t=n[u],e.call(a,t,u,n))&&o.push(t);return o}function f(n){return n.reduce(function(n,e){return n.concat(w.arr(e)?f(e):e)},[])}function p(n){return w.arr(n)?n:(n=w.str(n)?a(n)||n:n)instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n]}function h(n,e){return n.some(function(n){return n===e})}function g(n){var e,t={};for(e in n)t[e]=n[e];return t}function x(n,e){var t,r=g(n);for(t in n)r[t]=(e.hasOwnProperty(t)?e:n)[t];return r}function I(n,e){var t,r=g(n);for(t in e)r[t]=(w.und(n[t])?e:n)[t];return r}function T(n){n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(n)return n[1]}function m(n,e){return w.fnc(n)?n(e.target,e.id,e.total):n}function v(n,e){return n.getAttribute(e)}function y(n,e,t){var r,a,o;return h([t,"deg","rad","turn"],T(e))?e:(r=l.CSS[e+t],w.und(r)?(a=document.createElement(n.tagName),(n=n.parentNode&&n.parentNode!==document?n.parentNode:document.body).appendChild(a),a.style.position="absolute",a.style.width=100+t,o=100/a.offsetWidth,n.removeChild(a),n=o*parseFloat(e),l.CSS[e+t]=n):r)}function b(n,e,t){var r;if(e in n.style)return r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0",t?y(n,e,t):e}function D(n,e){return w.dom(n)&&!w.inp(n)&&(v(n,e)||w.svg(n)&&n[e])?"attribute":w.dom(n)&&h(S,e)?"transform":w.dom(n)&&"transform"!==e&&b(n,e)?"css":null!=n[e]?"object":void 0}function X(n){if(w.dom(n)){for(var e,t=n.style.transform||"",r=/(\w+)\(([^)]*)\)/g,a=new Map;e=r.exec(t);)a.set(e[1],e[2]);return a}}function E(n,e,t,r){switch(D(n,e)){case"transform":return a=n,u=r,i=t,c=s(o=e,"scale")?1:0+(s(c=o,"translate")||"perspective"===c?"px":s(c,"rotate")||s(c,"skew")?"deg":void 0),c=X(a).get(o)||c,u&&(u.transforms.list.set(o,c),u.transforms.last=o),i?y(a,c,i):c;case"css":return b(n,e,t);case"attribute":return v(n,e);default:return n[e]||0}var a,o,u,i,c}function F(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=T(n)||0,a=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return a+o+r;case"-":return a-o+r;case"*":return a*o+r}}function Y(n,e){var t,r,a,o,u,i,c;return w.col(n)?(i=n,w.rgb(i)?(o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(u=i))?"rgba("+o[1]+",1)":u:w.hex(i)?(o=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,t,r){return e+e+t+t+r+r}),u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o),"rgba("+parseInt(u[1],16)+","+parseInt(u[2],16)+","+parseInt(u[3],16)+",1)"):w.hsl(i)?(o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o=i)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(o),u=parseInt(o[1],10)/360,i=parseInt(o[2],10)/100,c=parseInt(o[3],10)/100,o=o[4]||1,0==i?t=r=a=c:(t=s(i=2*c-(c=c<.5?c*(1+i):c+i-c*i),c,u+1/3),r=s(i,c,u),a=s(i,c,u-1/3)),"rgba("+255*t+","+255*r+","+255*a+","+o+")"):void 0):/\s/g.test(n)?n:(c=(i=T(n))?n.substr(0,n.length-i.length):n,e?c+e:c);function s(n,e,t){return t<0&&(t+=1),1<t&&--t,t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}}function N(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Z(n){for(var e,t=n.points,r=0,a=0;a<t.numberOfItems;a++){var o=t.getItem(a);0<a&&(r+=N(e,o)),e=o}return r}function Q(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return 2*Math.PI*v(n,"r");case"rect":return 2*v(e=n,"width")+2*v(e,"height");case"line":return N({x:v(e=n,"x1"),y:v(e,"y1")},{x:v(e,"x2"),y:v(e,"y2")});case"polyline":return Z(n);case"polygon":return e=n.points,Z(n)+N(e.getItem(e.numberOfItems-1),e.getItem(0))}var e}function V(e,n){var n=n||{},t=n.el||function(){for(var n=e.parentNode;w.svg(n)&&w.svg(n.parentNode);)n=n.parentNode;return n}(),r=t.getBoundingClientRect(),a=v(t,"viewBox"),o=r.width,r=r.height,n=n.viewBox||(a?a.split(" "):[0,0,o,r]);return{el:t,viewBox:n,x:+n[0],y:+n[1],w:o/n[2],h:r/n[3]}}function z(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Y(w.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:w.str(n)||e?r.split(t):[]}}function H(n){return P(n?f(w.arr(n)?n.map(p):p(n)):[],function(n,e,t){return t.indexOf(n)===e})}function G(n){var t=H(n);return t.map(function(n,e){return{target:n,id:e,total:t.length,transforms:{list:X(n)}}})}function R(n,e){var t,r=[],a=e.keyframes;for(t in e=a?I(function(e){for(var t=P(f(e.map(function(n){return Object.keys(n)})),function(n){return w.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),a={},n=0;n<t.length;n++)!function(n){var r=t[n];a[r]=e.map(function(n){var e,t={};for(e in n)w.key(e)?e==r&&(t.value=n[e]):t[e]=n[e];return t})}(n);return a}(a),e):e)w.key(t)&&r.push({name:t,tweens:function(n,t){var e,r=g(t),a=(/^spring/.test(r.easing)&&(r.duration=u(r.easing)),w.arr(n)&&(2!==(e=n.length)||w.obj(n[0])?w.fnc(t.duration)||(r.duration=t.duration/e):n={value:n}),w.arr(n)?n:[n]);return a.map(function(n,e){n=w.obj(n)&&!w.pth(n)?n:{value:n};return w.und(n.delay)&&(n.delay=e?0:t.delay),w.und(n.endDelay)&&(n.endDelay=e===a.length-1?t.endDelay:0),n}).map(function(n){return I(n,r)})}(e[t],n)});return r}var W={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,a){var o;r.list.set(e,t),e!==r.last&&!a||(o="",r.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o)}};function J(n,u){G(n).forEach(function(n){for(var e in u){var t=m(u[e],n),r=n.target,a=T(t),o=E(r,e,a,n),t=F(Y(t,a||T(o)),o),a=D(r,e);W[a](r,e,t,n.transforms,!0)}})}function K(n,e){return P(f(n.map(function(o){return e.map(function(n){var e,t,i,c,s,r=o,a=D(r.target,n.name);if(a)return c=r,t=(e=(i=n).tweens.map(function(n){var n=function(n,e){var t,r={};for(t in n){var a=m(n[t],e);w.arr(a)&&1===(a=a.map(function(n){return m(n,e)})).length&&(a=a[0]),r[t]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,c),e=n.value,t=w.arr(e)?e[1]:e,r=T(t),a=E(c.target,i.name,r,c),o=s?s.to.original:a,u=w.arr(e)?e[0]:o,a=T(u)||T(a),r=r||a;return w.und(t)&&(t=o),n.from=z(u,r),n.to=z(F(t,u),r),n.start=s?s.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=B(n.easing,n.duration),n.isPath=w.pth(e),n.isColor=w.col(n.from.original),n.isColor&&(n.round=1),s=n}))[e.length-1],{type:a,property:n.name,animatable:r,tweens:e,duration:t.end,delay:e[0].delay,endDelay:t.endDelay}})})),function(n){return!w.und(n)})}function U(n,e){function t(n){return n.timelineOffset||0}var r=n.length,a={};return a.duration=r?Math.max.apply(Math,n.map(function(n){return t(n)+n.duration})):e.duration,a.delay=r?Math.min.apply(Math,n.map(function(n){return t(n)+n.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,n.map(function(n){return t(n)+n.duration-n.endDelay})):e.endDelay,a}var A,_=0,L=[],n=[],nn=en;function en(){A=requestAnimationFrame(tn)}function tn(n){var e=L.length;if(e){for(var t=0;t<e;){var r,a=L[t];a.paused?-1<(r=L.indexOf(a))&&(L.splice(r,1),e=L.length):a.tick(n),t++}en()}else A=cancelAnimationFrame(A)}function j(n){var c,s=0,f=0,l=0,d=0,p=null;function h(n){var e=window.Promise&&new Promise(function(n){return p=n});n.finished=e}e=x(i,n=n=void 0===n?{}:n),t=R(r=x(M,n),n),r=U(t=K(n=G(n.targets),t),r),a=_,_++;var e,t,r,a,k=I(e,{id:a,children:[],animatables:n,animations:t,duration:r.duration,delay:r.delay,endDelay:r.endDelay});function g(){var n=k.direction;"alternate"!==n&&(k.direction="normal"!==n?"normal":"reverse"),k.reversed=!k.reversed,c.forEach(function(n){return n.reversed=k.reversed})}function m(n){return k.reversed?k.duration-n:n}function o(){s=0,f=m(k.currentTime)*(1/j.speed)}function v(n,e){e&&e.seek(n-e.timelineOffset)}function y(e){for(var n=0,t=k.animations,r=t.length;n<r;){var a=t[n],o=a.animatable,u=a.tweens,i=u.length-1,c=u[i];i&&(c=P(u,function(n){return e<n.end})[0]||c);for(var i=C(e-c.start-c.delay,0,c.duration)/c.duration,s=isNaN(i)?1:c.easing(i),f=c.to.strings,l=c.round,d=[],p=c.to.numbers.length,h=void 0,g=0;g<p;g++){var m=void 0,v=c.to.numbers[g],y=c.from.numbers[g]||0,m=c.isPath?function(e,t){function n(n){return e.el.getPointAtLength(1<=t+(n=void 0===n?0:n)?t+n:0)}var r=V(e.el,e.svg),a=n(),o=n(-1),u=n(1);switch(e.property){case"x":return(a.x-r.x)*r.w;case"y":return(a.y-r.y)*r.h;case"angle":return 180*Math.atan2(u.y-o.y,u.x-o.x)/Math.PI}}(c.value,s*v):y+s*(v-y);!l||c.isColor&&2<g||(m=Math.round(m*l)/l),d.push(m)}var b=f.length;if(b)for(var h=f[0],M=0;M<b;M++){f[M];var x=f[M+1],w=d[M];isNaN(w)||(h+=x?w+x:w+" ")}else h=d[0];W[a.type](o.target,a.property,h,o.transforms),a.currentValue=h,n++}}function b(n){k[n]&&!k.passThrough&&k[n](k)}function u(n){var e=k.duration,t=k.delay,r=e-k.endDelay,a=m(n);if(k.progress=C(a/e*100,0,100),k.reversePlayback=a<k.currentTime,c){var o=a;if(k.reversePlayback)for(var u=d;u--;)v(o,c[u]);else for(var i=0;i<d;i++)v(o,c[i])}!k.began&&0<k.currentTime&&(k.began=!0,b("begin")),!k.loopBegan&&0<k.currentTime&&(k.loopBegan=!0,b("loopBegin")),a<=t&&0!==k.currentTime&&y(0),(r<=a&&k.currentTime!==e||!e)&&y(e),t<a&&a<r?(k.changeBegan||(k.changeBegan=!0,k.changeCompleted=!1,b("changeBegin")),b("change"),y(a)):k.changeBegan&&(k.changeCompleted=!0,k.changeBegan=!1,b("changeComplete")),k.currentTime=C(a,0,e),k.began&&b("update"),e<=n&&(f=0,k.remaining&&!0!==k.remaining&&k.remaining--,k.remaining?(s=l,b("loopComplete"),k.loopBegan=!1,"alternate"===k.direction&&g()):(k.paused=!0,k.completed||(k.completed=!0,b("loopComplete"),b("complete"),!k.passThrough&&"Promise"in window&&(p(),h(k)))))}return h(k),k.reset=function(){var n=k.direction;k.passThrough=!1,k.currentTime=0,k.progress=0,k.paused=!0,k.began=!1,k.loopBegan=!1,k.changeBegan=!1,k.completed=!1,k.changeCompleted=!1,k.reversePlayback=!1,k.reversed="reverse"===n,k.remaining=k.loop,c=k.children;for(var e=d=c.length;e--;)k.children[e].reset();(k.reversed&&!0!==k.loop||"alternate"===n&&1===k.loop)&&k.remaining++,y(k.reversed?k.duration:0)},k.set=function(n,e){return J(n,e),k},k.tick=function(n){u(((l=n)+(f-(s=s||l)))*j.speed)},k.seek=function(n){u(m(n))},k.pause=function(){k.paused=!0,o()},k.play=function(){k.paused&&(k.completed&&k.reset(),k.paused=!1,L.push(k),o(),A||nn())},k.reverse=function(){g(),o()},k.restart=function(){k.reset(),k.play()},k.reset(),k.autoplay&&k.play(),k}function rn(n,e){for(var t=e.length;t--;)h(n,e[t].animatable.target)&&e.splice(t,1)}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(L.forEach(function(n){return n.pause()}),n=L.slice(0),j.running=L=[]):n.forEach(function(n){return n.play()})}),j.version="3.1.0",j.speed=1,j.running=L,j.remove=function(n){for(var e=H(n),t=L.length;t--;){var r=L[t],a=r.animations,o=r.children;rn(e,a);for(var u=o.length;u--;){var i=o[u],c=i.animations;rn(e,c),c.length||i.children.length||o.splice(u,1)}a.length||o.length||r.pause()}},j.get=E,j.set=J,j.convertPx=y,j.path=function(n,e){var t=w.str(n)?a(n)[0]:n,r=e||100;return function(n){return{property:n,el:t,svg:V(t),totalLength:Q(t)*(r/100)}}},j.setDashoffset=function(n){var e=Q(n);return n.setAttribute("stroke-dasharray",e),e},j.stagger=function(n,e){var i=(e=void 0===e?{}:e).direction||"normal",c=e.easing?B(e.easing):null,s=e.grid,f=e.axis,l=e.from||0,d="first"===l,p="center"===l,h="last"===l,g=w.arr(n),m=g?parseFloat(n[0]):parseFloat(n),v=g?parseFloat(n[1]):0,y=T(g?n[1]:n)||0,b=e.start||0+(g?m:0),M=[],x=0;return function(n,e,t){if(d&&(l=0),p&&(l=(t-1)/2),h&&(l=t-1),!M.length){for(var r,a,o,u=0;u<t;u++)s?(r=p?(s[0]-1)/2:l%s[0],a=p?(s[1]-1)/2:Math.floor(l/s[0]),r=r-u%s[0],a=a-Math.floor(u/s[0]),o=Math.sqrt(r*r+a*a),"x"===f&&(o=-r),M.push(o="y"===f?-a:o)):M.push(Math.abs(l-u)),x=Math.max.apply(Math,M);c&&(M=M.map(function(n){return c(n/x)*x})),"reverse"===i&&(M=M.map(function(n){return f?n<0?-1*n:-n:Math.abs(x-n)}))}return b+(g?(v-m)/x:m)*(Math.round(100*M[e])/100)+y}},j.timeline=function(u){var i=j(u=void 0===u?{}:u);return i.duration=0,i.add=function(n,e){var t=L.indexOf(i),r=i.children;function a(n){n.passThrough=!0}-1<t&&L.splice(t,1);for(var o=0;o<r.length;o++)a(r[o]);t=I(n,x(M,u)),t.targets=t.targets||u.targets,n=i.duration,t.autoplay=!1,t.direction=i.direction,t.timelineOffset=w.und(e)?n:F(e,n),a(i),i.seek(t.timelineOffset),e=j(t),a(e),r.push(e),n=U(r,u);return i.delay=n.delay,i.endDelay=n.endDelay,i.duration=n.duration,i.seek(0),i.reset(),i.autoplay&&i.play(),i},i},j.easing=B,j.penner=c,j.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},j});
// var lodash = _.noConflict();
var Rexbuilder_App=function(P){"use strict";function b(){Rexbuilder_Util.$document.on("YTPStart",function(e){var t=(e=P(e.target)).parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),i=e.YTPGetPlayer();void 0!==i&&(e.optimizeDisplay(),0==t.length||t.hasClass("user-has-muted")?(i.mute(),i.isMute=!0,i.setVolume(0)):e.YTPUnmute())}),Rexbuilder_Util.$document.on("click",".YTPOverlay",function(e){0<(e=P(e.target).parents(".rex-youtube-wrap")).length&&(1==e[0].state?e.YTPPause():e.YTPPlay())}),Rexbuilder_Util.$document.on("click",".block-has-slider",function(e){var t,i=(r=P(this).find(".grid-item-content")).children(".rex-youtube-wrap"),n=r.children(".rex-video-vimeo-wrap--block"),r=r.children(".rex-video-wrap");0<i.length&&(1==i[0].state?i.YTPPause():i.YTPPlay()),0<n.length&&(t=VimeoVideo.findVideo(n.find("iframe")[0]))&&t.getPaused().then(function(e){e?t.play():t.pause()}).catch(function(e){}),0<r.length&&((i=r.find(".rex-video-container").get(0)).paused?i.play():i.pause())}),Rexbuilder_Util.$document.on("click",".rex-video-toggle-audio",function(e){e.stopPropagation();var t,i=P(this),e=i.parents(".youtube-player").eq(0).children(".rex-youtube-wrap"),n=i.parents(".mp4-player").eq(0).find(".rex-video-container"),r=i.parents(".vimeo-player").eq(0).find(".rex-video-vimeo-wrap--block");0<e.length&&(e.get(0).player.isMuted()?(e.YTPUnmute(),i.removeClass("user-has-muted")):(e.YTPMute(),i.addClass("user-has-muted"))),0<n.length&&(n.prop("muted")?(n.prop("muted",!1),i.removeClass("user-has-muted")):(n.prop("muted",!0),i.addClass("user-has-muted"))),0<r.length&&(t=VimeoVideo.findVideo(r.find("iframe")[0]))&&t.getVolume().then(function(e){0==e?(t.setVolume(1),i.removeClass("user-has-muted")):(t.setVolume(0),i.addClass("user-has-muted"))}).catch(function(e){})}),Rexbuilder_Util.$document.on("click",".rex-video__controls .pause",function(e){var t=(e=P(e.currentTarget)).parent().children(".play"),i=e.parents(".rexpansive_section");e.removeClass("video-tool--view"),t.addClass("video-tool--view"),Rexbuilder_Util.pauseVideo(i)}),Rexbuilder_Util.$document.on("click",".rex-video__controls .play",function(e){var t=(e=P(e.currentTarget)).parent().children(".pause"),i=e.parents(".rexpansive_section");e.removeClass("video-tool--view"),t.addClass("video-tool--view"),Rexbuilder_Util.playVideo(i)}),Rexbuilder_Util.$document.on("click",".sticky-video-controls",function(e){P(e.currentTarget).parent().find(".video-tool--view").click()})}var r=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),T="undefined"!=typeof SplitScrollable,A="undefined"!=typeof StickySection,y=null,v=null,e=null,t=null,R=[],i={},U=[];function n(){var e=this.iframeContainer.contentDocument.querySelector(".rexbuilder-live-content");e.parentElement.removeChild(e),this.iframeContainer.contentDocument.body.insertBefore(e,this.iframeContainer.contentDocument.body.firstChild)}var L=function(){if("undefined"!=typeof DistanceAccordion)for(var e=document.getElementsByClassName("distance-accordion-toggle"),t=0,i=e.length;t<i;t++)new DistanceAccordion(e[t])},$=function(){if("undefined"!=typeof PopUpContent)for(var e=[].slice.call(document.getElementsByClassName("popup-content-button")),t=e.length,i=0,i=0;i<t;i++)null===PopUpContent.data(e[i])&&new PopUpContent(e[i],{contentRetrieveMethod:"iframe",getPopUpContentComplete:n,ajaxSettings:{type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_popup_content",nonce_param:_plugin_frontend_settings.rexajax.rexnonce}}})};function V(){if("undefined"!=typeof PopUpContent&&!Rexbuilder_Util.isIframe){window.addEventListener("message",l,!1),document.addEventListener("popUpContent:open",function(){var e;for(e=0;e<i.length;e++)i[e].options.autoPlay&&i[e].pausePlayer()}),document.addEventListener("popUpContent:close",function(){var e;for(e=0;e<i.length;e++)i[e].options.autoPlay&&i[e].unpausePlayer()});for(var e=Array.prototype.slice.call(document.getElementsByClassName("rex-slider-wrap")),t=e.length,i=[],n=0;n<t;n++){var r=Flickity.data(e[n]);r&&i.push(r)}}}function l(e){if(e.data.rexliveEvent)switch(e.data.eventName){case"popUpContent:pswpOpened":Rexbuilder_Util.addClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:pswpClosed":Rexbuilder_Util.removeClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:changePage":""!==e.data.href&&(window.location=e.data.href)}}function M(){var e,t,i=this.element.querySelector(".perfect-grid-gallery"),n=u(i);if(n.instance){for(o(this,n.instance),a(this,n.instance),e=0;e<this.totScrollEls;e++)this.scrollEls[e].style.height="";for(e=0;e<this.totOpacityEls;e++)this.opacityEls[e].style.top="";for(e=0;e<n.instance.gridBlocksTotal;e++){for(t=0;t<this.totScrollEls;t++)if(this.scrollEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setHeight=!1;break}for(t=0;t<this.totOpacityEls;t++)if(this.opacityEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setTop=!1;break}}i.style.height="",n.instance.properties.gridHeightSettable=!1}}function o(t,e){t.scrollEls=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.scrollElsClass)}).map(function(e){return e.el}),t.scrollElsToWatch=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.scrollElsClass)}).map(function(e){return e.el.querySelector("."+t.options.scrollElsToWatchClass)});for(var i=0,n=0,r=0;i<e.gridBlocksTotal;i++)for(n=0;n<t.totScrollEls;n++)if(t.scrollEls[n]===e.gridBlocks[i].el){t.scrollEls[n].style.WebKitBoxOrdinalGroup=r+1,t.scrollEls[n].style.MozFlexOrder=r,t.scrollEls[n].style.OOrder=r,t.scrollEls[n].style.MSOrder=r,t.scrollEls[n].style.order=r,t.scrollElsToWatch[n].setAttribute("data-scroll-el-index",r),r++;break}}function a(t,e){t.opacityEls=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.opacityElsClass)}).map(function(e){return e.el})}var C=function(e){if("undefined"!=typeof Odometer){var t,i,n,r=e.innerText;if(null!==e.getAttribute("data-yearly-inc")&&""!==_plugin_frontend_settings.sitedate&&(t=new Date(_plugin_frontend_settings.sitedate),i=(new Date).getFullYear()-t.getFullYear(),n=e.getAttribute("data-yearly-inc"),r=parseInt(r)+parseInt(n)*i),null!==e.getAttribute("data-montly-inc")&&""!==_plugin_frontend_settings.sitedate&&(t=new Date(_plugin_frontend_settings.sitedate),i=(new Date).getMonth()-t.getMonth(),n=e.getAttribute("data-montly-inc"),r=parseInt(r)+parseInt(n)*i),e.setAttribute("data-final-value",r),null==(l=e.getAttribute("data-start-value")))for(var l="",o=0,a=e.innerText.length;o<a;o++)l+="1";return new Odometer({el:e,value:l,format:_plugin_frontend_settings.odometer.format,theme:_plugin_frontend_settings.odometer.theme})}};function k(){e=Rexbuilder_Util.$rexContainer.find(".rex-accordion"),t=Rexbuilder_Util.$document.find(".rex-accordion").not(e),i={onSetup:function(){var e,t,i,n,r;Rexbuilder_Util.editorMode||(t=(e=this.$element.parents(".perfect-grid-gallery")).find(".perfect-grid-item"),i=e.get(0),n=this.$element.parents(".perfect-grid-item").get(0),r=u(i),this.caching={$grid:e,grid:i,$blocks:t,block:n,$block:P(n),rexGridInstance:r})}},Rexbuilder_Util.editorMode?(i.open={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=e.properties.$content.parents(".grid-stack").data("gridstack");i.resize(t,null,Math.round(e.element.parentElement.offsetHeight/i.opts.cellHeight))}},i.close={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=t.children[0].getAttribute("data-gs_start_h");e.properties.$content.parents(".grid-stack").data("gridstack").resize(t,null,Math.round(parseInt(i)))}}):(i.open={startClbk:function(e){e.caching.$blocks.addClass("accordion-animate-block")},progressClbk:function(e){e.caching.rexGridInstance&&e.caching.rexGridInstance.instance.reCalcBlockHeight(e.caching.block)}},i.close={progressClbk:function(e){e.caching.rexGridInstance&&e.caching.rexGridInstance.instance.reCalcBlockHeight(e.caching.block)},completeClbk:function(e){e.caching.$block.one(Rexbuilder_Util._transitionEvent,function(){e.caching.$blocks.removeClass("accordion-animate-block")})}}),e.rexAccordion(i),t.rexAccordion({open:{},close:{}})}function s(){for(var e=0;e<U.length;e++)Rexbuilder_Util.removeClass(U[e].section,"empty-section"),(0===U[e].gridBlocksTotal||U[e].section.getElementsByClassName("rex-hide-element").length===U[e].gridBlocksTotal)&&Rexbuilder_Util.addClass(U[e].section,"empty-section")}function d(){if(!Rexbuilder_Util.editorMode){for(var e=Array.prototype.slice.call(document.getElementsByClassName("disable-grid")),t=e.length,i=0;i<t;i++){for(var n=e[i].querySelector(".perfect-grid-gallery"),r=Array.prototype.slice.call(e[i].getElementsByClassName("grid-stack-item")),l=r.length,o=[],a=0;a<l;a++)o.push(r[a].style.height);for(F(n),Rexbuilder_Util.addClass(e[i],"disabled"),P(n).find(".rex-animate-lazy-loaded-resource .rex-image-wrapper").addClass("rex-image-wrapper--lazy-show"),a=0;a<l;a++)r[a].style.height=o[a]}if(Rexbuilder_Photoswipe.init(".photoswipe-gallery"),Rexbuilder_Util.$rexContainer.find(".inline-pswp-gallery").on("click",Rexbuilder_Photoswipe.init_inline_pswp),P(".rex-effect-distortion").each(function(e,t){var i=P(t);1==_plugin_frontend_settings.animations?i.one("rs-animation-complete",function(){i.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}):i.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}),P(".rex-effect-distortion-section").each(function(e,t){var i=P(t);1==_plugin_frontend_settings.animations?i.one("rs-scrolled-complete",function(){i.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}):i.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}),P("[class*=border-space-animated-]").each(function(e,t){var i=P(t);i.addClass("border-space-animated"),1==_plugin_frontend_settings.animations&&768<Rexbuilder_Util.globalViewport.width?i.one("rs-animation-complete",function(){i.addClass("border-active")}):i.parents(".rexpansive_section").one("rs-scrolled-complete",function(){i.addClass("border-active")})}),A){var s,d,c=!(Rexbuilder_Util.cssPropertyValueSupported("position","sticky")||Rexbuilder_Util.cssPropertyValueSupported("position","-webkit-sticky")),u=Array.prototype.slice.call(document.getElementsByClassName("sticky-section")),p=u.length,f=0,g="";for(StickySection.destroyHandlers(),f=0;f<p;f++)if(s=u[f],null!==StickySection.data(s)&&StickySection.data(s).destroy(),Rexbuilder_Util.hasClass(s,"mp4-player")?g=".rex-video-wrap":""===s.style.backgroundImage&&!Rexbuilder_Util.hasClass(s,"section-w-image")||(g=".sticky-background-simulator"),d="true"===s.querySelector(".section-data").getAttribute("data-row_overlay_active"),new StickySection(s,{borderAnimation:!0,stickyJS:c,stickyElementSelector:g,overlayAnimation:d}),"undefined"!=typeof RevealOpacityOnScroll&&_plugin_frontend_settings.stickySection.revealContentOnScroll)for(var x=RexGrid.data(s.querySelector(".perfect-grid-gallery")),m=0;m<x.gridBlocksTotal;m++){Rexbuilder_Util.removeClass(x.gridBlocks[m].el,"has-rs-animation"),Rexbuilder_Util.removeClass(x.gridBlocks[m].el,"rs-animation");var _=x.gridBlocks[m].el.querySelector(".text-wrap");new RevealOpacityOnScroll(_,{offset:1,transition:!1})}}if(P(document.getElementsByClassName("rex-element--animated")).rexScrolled({callback:function(e){e.addEventListener(Rexbuilder_Util._transitionEvent,B),Rexbuilder_Util.addClass(e,"run-animation")}}),1==_plugin_frontend_settings.animations&&Rexbuilder_Util.$rexContainer.imagesLoaded({background:!0},function(){P(document.querySelectorAll(".rs-animation:not(.deactivate-rexpansive-animation)")).rexScrollify({mobile:!1})}),L(),$(),"undefined"!=typeof PopUpVideo)for(var h=[].slice.call(document.getElementsByClassName("popup-video-button")),b=h.length,y=0,y=0;y<b;y++)""!==h[y].href&&new PopUpVideo(h[y],{closeOnEnd:_plugin_frontend_settings.popUpVideo.closeOnEnd});if(T&&!(Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth))for(var v=Array.prototype.slice.call(document.getElementsByClassName("split-scrollable")),R=v.length,U=0;U<R;U++)null===SplitScrollable.data(v[U])&&new SplitScrollable(v[U],{scrollElsToWatchClass:"text-wrap",initializeComplete:M});if("undefined"!=typeof ParticleSwarm)for(var C=Array.prototype.slice.call(document.getElementsByClassName("particle-swarm")),k=C.length,w=0;w<k;w++){var E=document.createElement("canvas");C[w].insertBefore(E,C[w].firstChild),new ParticleSwarm(E)}if("undefined"!=typeof RexIndicator){var S=Array.prototype.slice.call(document.getElementsByClassName("rex-indicator__placeholder"));for(let e=0;e<S.length;e++)new RexIndicator(S[e])}V()}function B(e){Rexbuilder_Util.removeClass(this,"rex-element--animated"),this.removeEventListener(Rexbuilder_Util._transitionEvent,B)}}var c=[];function w(e){void 0!==c[e]&&c[e].forEach(function(e){e.call()})}function u(e){for(var t=e.getAttribute("data-rex-grid-id"),i=0,n=U.length,i=0;i<n;i++)if(t===U[i].properties.id&&e===U[i].element)return{instance:U[i],index:i};return null}function F(e){e=u(e);null!==e&&(e.instance.destroy(),U.splice(e.index,1))}return{init:function(){if(Rexbuilder_Util.init(),Rexbuilder_Dom_Util.init(),y=Rexbuilder_Util.$rexContainer.find(".rexpansive_section"),v=Rexbuilder_Util.$rexContainer.find(".grid-stack-row"),w("builder_before_launch_grids"),0!==v.length)if(Rexbuilder_Util.editorMode)v.perfectGridGalleryEditor({editorMode:Rexbuilder_Util.editorMode});else{for(var e=Rexbuilder_Util.chooseLayout(),t=(Rexbuilder_Util.handleLayoutChange(e),Array.prototype.slice.call(document.getElementsByClassName("perfect-grid-gallery"))),i=t.length,n=0,n=0;n<i;n++){var r=new RexGrid(t[n]);U.push(r)}for(n=0;n<i;n++)A&&Rexbuilder_Util.hasClass(U[n].section,"sticky-section")&&StickySection.prepare(U[n].section);window.FastLoad.init()}if(Rexbuilder_Rexbutton.init(),Rexbuilder_Rexelement.init(),Rexbuilder_Rexwpcf7.init(),Rexbuilder_Util.editorMode)Rex_Save_Listeners.init(),Rexbuilder_Rexelement_Editor.init(),Rexbuilder_Rexwpcf7_Editor.init(),Rexbuilder_CreateBlocks.init(),Rexbuilder_Util_Editor.init(),Rexbuilder_Color_Palette.init(),Rexbuilder_Overlay_Palette.init(),Rexbuilder_Section.init(),Rexbuilder_Section_Editor.init(),Rexbuilder_Block.init(),Rexbuilder_Block_Editor.init(),Rexbuilder_Live_Utilities.addBuilderListeners(),TextEditor.init(),Rexbuilder_Section_Editor.triggerRowDataChange();else for(var l,o,a=[].slice.call(document.getElementsByClassName("rex-button-wrapper")),s=a.length,d=0,d=0;d<s;d++)a[d].querySelector(".rex-button-container")||((l=document.createElement("span")).className="rex-button-container",(o=a[d].querySelector(".rex-button-background")).parentNode.insertBefore(l,o),l.appendChild(o));if(Rex_Navigator.init(),Rexbuilder_Util.editorMode&&v.each(function(e,t){TextEditor.launchTextEditors(t)}),Rexbuilder_Util.editorMode&&Rexbuilder_Util.launchEditDomLayout(),!Rexbuilder_Util.editorMode){y.each(function(e,t){0===t.getElementsByClassName("pswp-figure").length&&Rexbuilder_Util.removeClass(t,"photoswipe-gallery")});for(var c=[].slice.call(document.getElementsByClassName("rex-num-spin")),u=c.length,p=0;p<u;p++){var f=C(c[p]);f&&(R.push(f),Rexbuilder_Util.hasClass(c[p],"rex-num-spin__block-scrolled")?P(c[p]).parents(".perfect-grid-item").one("rs-scrolled-complete",{el:c[p]},function(e){e.data.el.innerHTML=e.data.el.getAttribute("data-final-value")}):Rexbuilder_Util.hasClass(c[p],"rex-num-spin__stopped")||P(c[p]).rexScrolled({callback:function(e){e.innerHTML=e.getAttribute("data-final-value")}}))}e=Rexbuilder_Util.$body.find(".rex-slideshow");0<e.length&&e.rexSlideshow()}if(1==_plugin_frontend_settings.native_scroll_animation){for(var g=['[href="#"]',".no-smoothing",".vertical-nav-link",".rex-vertical-nav-link",".woocommerce-review-link",".distance-accordion-toggle"],x=Rexbuilder_Util.$body.find('a[href*="#"]'),m=0,_=g.length;m<_;m++)x=x.not(g[m]);(x=x.not(h)).on("click",function(e){if(!(Rexbuilder_Util.editorMode&&e.currentTarget.matches(".rex-button-container")||location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")||location.hostname!=this.hostname)){e=P(this.hash);if((e=e.length?e:Rexbuilder_Util.$rexContainer.find("[name="+this.hash.slice(1)+"]")).length)return Rexbuilder_Util.smoothScroll(e),!1}});var h=function(e){return 0!=P(this).parents(".woocommerce-tabs").length}}b(),Rexbuilder_Util.editorMode&&(Rexbuilder_Util.$document.on("rexlive:editDomLayoutEnd",RexSlider.init),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),k())},load:function(){if(Rexbuilder_Util.editorMode)TextEditor.load(),Rexbuilder_Util_Editor.load(),Rexbuilder_Live_Utilities.load();else{for(var e=U.length,t=0;t<e;t++)U[t].fixAfterLoad();RexSlider.init(),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),k()}var i,n;0!==(n=P(".text-fill-container-canvas")).length&&(n.textFill({relative:!0,relativeWrap:".perfect-grid-item",fontFamily:_plugin_frontend_settings.textFill.font_family,fontWeight:_plugin_frontend_settings.textFill.font_weight}),n.on("textfill-render-complete",function(){Rexbuilder_Util.$window.resize()})),RexSlider.startAutoPlay(),s(),d(),Rexbuilder_Util.galleryPluginActive=!0,r&&!Rexbuilder_Util.editorMode&&"navigate"!==(n=performance.getEntriesByType("navigation")[0].type)&&"prerender"!==n&&void 0!==(i=store.get("scrollPosition"))&&setTimeout(function(){window.scrollTo(0,i)},0)},handleLiveResize:function(){Rexbuilder_Util_Editor.elementIsResizing||(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.loadWidth!==Rexbuilder_Util.globalViewport.width&&Rexbuilder_Util.doneResizing())},handleFrontEndResize:function(){for(var e=Rexbuilder_Util.findFrontLayout(),t=U.length,i=(Rexbuilder_Util.startFrontLayout!=e&&(Rexbuilder_Util.changedFrontLayout=!0,Rexbuilder_Util.startFrontLayout=e),Rexbuilder_Util.changedFrontLayout&&(w("builder_before_layout_change"),e=Rexbuilder_Util.chooseLayout(),Rexbuilder_Util.handleLayoutChange(e)),RexGrid.updateViewportSize(),0),n=0,r=null;i<t;i++){if((r=T?SplitScrollable.data(U[i].section):r)&&Rexbuilder_Util.changedFrontLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth)for(r.destroy(),U[i].properties.gridHeightSettable=!(r=null),n=0;n<U[i].gridBlocksTotal;n++)U[i].gridBlocks[n].setHeight=!0,U[i].gridBlocks[n].setTop=!0;Rexbuilder_Util.changedFrontLayout&&U[i].endChangeLayout(),U[i].endResize(),r&&(Rexbuilder_Util.changedFrontLayout&&(o(r,U[i]),a(r,U[i]),r.refreshScrollableIndex()),r.callFixStickyHeight()),A&&Rexbuilder_Util.changedFrontLayout&&StickySection.data(U[i].section)&&StickySection.prepare(U[i].section)}Rexbuilder_Util.changedFrontLayout&&(window.FastLoad.destroy(),window.FastLoad.init(),s(),Rexbuilder_Util.editorMode||"undefined"!=typeof RexIndicator&&RexIndicator.destroyAll(),d()),Rex_Navigator.getNavigationDotsPosition(),Rexbuilder_Util.changedFrontLayout=!1},addAction:function(e,t){void 0===c[e]&&(c[e]=[]),c[e].push(t)},getRexGridInstance:u,destroyRexGridInstance:F}}(jQuery);
!function(){"use strict";var i,e=!1;function t(){var e;return window.matchMedia("(orientation: portrait)").matches&&(e="portrait"),(e=window.matchMedia("(orientation: landscape)").matches?"landscape":e)!=i&&(i=e,1)}(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),t(),document.addEventListener("DOMContentLoaded",Rexbuilder_App.init),window.addEventListener("load",Rexbuilder_App.load);var o,a,n,r,d=Rexbuilder_Util.editorMode?1e3:100,l=(window.addEventListener("resize",(o=function(){Rexbuilder_Util.globalViewport=Rexbuilder_Util.viewport(),Rexbuilder_Util.editorMode?Rexbuilder_App.handleLiveResize():(e&&t()||!e)&&Rexbuilder_App.handleFrontEndResize()},a=d,function(){var e=this,i=arguments,t=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||o.apply(e,i)},a),t&&o.apply(e,i)})),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));window.addEventListener("beforeunload",function(){l&&!Rexbuilder_Util.editorMode&&store.set("scrollPosition",window.pageYOffset||document.documentElement.scrollTop)})}();