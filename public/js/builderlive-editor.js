!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.tippy=e()}(this,function(){"use strict";function t(t){return t&&"[object Function]"==={}.toString.call(t)}function e(t,e){if(1!==t.nodeType)return[];var r=getComputedStyle(t,null);return e?r[e]:r}function r(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function n(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var o=e(t),i=o.overflow,a=o.overflowX,p=o.overflowY;return/(auto|scroll|overlay)/.test(i+p+a)?t:n(r(t))}function o(t){return 11===t?mt:10===t?ht:mt||ht}function i(t){if(!t)return document.documentElement;for(var r=o(10)?document.body:null,n=t.offsetParent;n===r&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var a=n&&n.nodeName;return a&&"BODY"!==a&&"HTML"!==a?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===e(n,"position")?i(n):n:t?t.ownerDocument.documentElement:document.documentElement}function a(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||i(t.firstElementChild)===t)}function p(t){return null===t.parentNode?t:p(t.parentNode)}function s(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var r=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?t:e,o=r?e:t,l=document.createRange();l.setStart(n,0),l.setEnd(o,0);var c=l.commonAncestorContainer;if(t!==c&&e!==c||n.contains(o))return a(c)?c:i(c);var f=p(t);return f.host?s(f.host,e):s(t,p(e).host)}function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",r="top"===e?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var o=t.ownerDocument.documentElement,i=t.ownerDocument.scrollingElement||o;return i[r]}return t[r]}function c(t,e){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=l(e,"top"),o=l(e,"left"),i=r?-1:1;return t.top+=n*i,t.bottom+=n*i,t.left+=o*i,t.right+=o*i,t}function f(t,e){var r="x"===e?"Left":"Top",n="Left"===r?"Right":"Bottom";return parseFloat(t["border"+r+"Width"],10)+parseFloat(t["border"+n+"Width"],10)}function d(t,e,r,n){return et(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],o(10)?parseInt(r["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function u(t){var e=t.body,r=t.documentElement,n=o(10)&&getComputedStyle(r);return{height:d("Height",e,r,n),width:d("Width",e,r,n)}}function m(t){return gt({},t,{right:t.left+t.width,bottom:t.top+t.height})}function h(t){var e={};try{if(o(10)){e=t.getBoundingClientRect();var r=l(t,"top"),n=l(t,"left");e.top+=r,e.left+=n,e.bottom+=r,e.right+=n}else e=t.getBoundingClientRect()}catch(i){}var a={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},p="HTML"===t.nodeName?u(t.ownerDocument):{},s=p.width||t.clientWidth||a.right-a.left,c=p.height||t.clientHeight||a.bottom-a.top,d=t.offsetWidth-s,h=t.offsetHeight-c;if(d||h){var b=i(t);d-=f(b,"x"),h-=f(b,"y"),a.width-=d,a.height-=h}return m(a)}function b(t,r){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],a=o(10),p="HTML"===r.nodeName,s=h(t),l=h(r),f=n(t),d=e(r),u=parseFloat(d.borderTopWidth,10),b=parseFloat(d.borderLeftWidth,10);i&&p&&(l.top=et(l.top,0),l.left=et(l.left,0));var y=m({top:s.top-l.top-u,left:s.left-l.left-b,width:s.width,height:s.height});if(y.marginTop=0,y.marginLeft=0,!a&&p){var v=parseFloat(d.marginTop,10),g=parseFloat(d.marginLeft,10);y.top-=u-v,y.bottom-=u-v,y.left-=b-g,y.right-=b-g,y.marginTop=v,y.marginLeft=g}return(a&&!i?r.contains(f):r===f&&"BODY"!==f.nodeName)&&(y=c(y,r)),y}function y(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=t.ownerDocument.documentElement,n=b(t,r),o=et(r.clientWidth,window.innerWidth||0),i=et(r.clientHeight,window.innerHeight||0),a=e?0:l(r),p=e?0:l(r,"left"),s={top:a-n.top+n.marginTop,left:p-n.left+n.marginLeft,width:o,height:i};return m(s)}function v(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===e(t,"position")||v(r(t)))}function g(t){if(!t||!t.parentElement||o())return document.documentElement;for(var r=t.parentElement;r&&"none"===e(r,"transform");)r=r.parentElement;return r||document.documentElement}function w(t,e,o,i){var a=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4],p={top:0,left:0},l=a?g(t):s(t,e);if("viewport"===i)p=y(l,a);else{var c;"scrollParent"===i?(c=n(r(e)),"BODY"===c.nodeName&&(c=t.ownerDocument.documentElement)):c="window"===i?t.ownerDocument.documentElement:i;var f=b(c,l,a);if("HTML"!==c.nodeName||v(l))p=f;else{var d=u(t.ownerDocument),m=d.height,h=d.width;p.top+=f.top-f.marginTop,p.bottom=m+f.top,p.left+=f.left-f.marginLeft,p.right=h+f.left}}o=o||0;var w="number"==typeof o;return p.left+=w?o:o.left||0,p.top+=w?o:o.top||0,p.right-=w?o:o.right||0,p.bottom-=w?o:o.bottom||0,p}function x(t){var e=t.width,r=t.height;return e*r}function k(t,e,r,n,o){var i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=w(r,n,i,o),p={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},s=Object.keys(p).map(function(t){return gt({key:t},p[t],{area:x(p[t])})}).sort(function(t,e){return e.area-t.area}),l=s.filter(function(t){var e=t.width,n=t.height;return e>=r.clientWidth&&n>=r.clientHeight}),c=0<l.length?l[0].key:s[0].key,f=t.split("-")[1];return c+(f?"-"+f:"")}function E(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=n?g(e):s(e,r);return b(r,o,n)}function O(t){var e=getComputedStyle(t),r=parseFloat(e.marginTop)+parseFloat(e.marginBottom),n=parseFloat(e.marginLeft)+parseFloat(e.marginRight),o={width:t.offsetWidth+n,height:t.offsetHeight+r};return o}function C(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function L(t,e,r){r=r.split("-")[0];var n=O(t),o={width:n.width,height:n.height},i=-1!==["right","left"].indexOf(r),a=i?"top":"left",p=i?"left":"top",s=i?"height":"width",l=i?"width":"height";return o[a]=e[a]+e[s]/2-n[s]/2,o[p]=r===p?e[p]-n[l]:e[C(p)],o}function T(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function A(t,e,r){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===r});var n=T(t,function(t){return t[e]===r});return t.indexOf(n)}function Y(e,r,n){var o=void 0===n?e:e.slice(0,A(e,"name",n));return o.forEach(function(e){e["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e["function"]||e.fn;e.enabled&&t(n)&&(r.offsets.popper=m(r.offsets.popper),r.offsets.reference=m(r.offsets.reference),r=n(r,e))}),r}function P(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=E(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=k(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=L(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=Y(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function D(t,e){return t.some(function(t){var r=t.name,n=t.enabled;return n&&r===e})}function X(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var o=e[n],i=o?""+o+r:t;if("undefined"!=typeof document.body.style[i])return i}return null}function N(){return this.state.isDestroyed=!0,D(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[X("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function I(t){var e=t.ownerDocument;return e?e.defaultView:window}function S(t,e,r,o){var i="BODY"===t.nodeName,a=i?t.ownerDocument.defaultView:t;a.addEventListener(e,r,{passive:!0}),i||S(n(a.parentNode),e,r,o),o.push(a)}function H(t,e,r,o){r.updateBound=o,I(t).addEventListener("resize",r.updateBound,{passive:!0});var i=n(t);return S(i,"scroll",r.updateBound,r.scrollParents),r.scrollElement=i,r.eventsEnabled=!0,r}function F(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}function R(t,e){return I(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function B(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=R(this.reference,this.state))}function M(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function W(t,e){Object.keys(e).forEach(function(r){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&M(e[r])&&(n="px"),t.style[r]=e[r]+n})}function z(t,e){Object.keys(e).forEach(function(r){var n=e[r];!1===n?t.removeAttribute(r):t.setAttribute(r,e[r])})}function _(t,e,r){var n=T(t,function(t){var r=t.name;return r===e}),o=!!n&&t.some(function(t){return t.name===r&&t.enabled&&t.order<n.order});if(!o){var i="`"+e+"`";console.warn("`"+r+"` modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}function U(t){return"end"===t?"start":"start"===t?"end":t}function j(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=xt.indexOf(t),n=xt.slice(r+1).concat(xt.slice(0,r));return e?n.reverse():n}function V(t,e,r,n){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],a=o[2];if(!i)return t;if(0===a.indexOf("%")){var p;switch(a){case"%p":p=r;break;case"%":case"%r":default:p=n}var s=m(p);return s[e]/100*i}if("vh"===a||"vw"===a){var l;return l="vh"===a?et(document.documentElement.clientHeight,window.innerHeight||0):et(document.documentElement.clientWidth,window.innerWidth||0),l/100*i}return i}function q(t,e,r,n){var o=[0,0],i=-1!==["right","left"].indexOf(n),a=t.split(/(\+|\-)/).map(function(t){return t.trim()}),p=a.indexOf(T(a,function(t){return-1!==t.search(/,|\s/)}));a[p]&&-1===a[p].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var s=/\s*,\s*|\s+/,l=-1===p?[a]:[a.slice(0,p).concat([a[p].split(s)[0]]),[a[p].split(s)[1]].concat(a.slice(p+1))];return l=l.map(function(t,n){var o=(1===n?!i:i)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return V(t,o,e,r)})}),l.forEach(function(t,e){t.forEach(function(r,n){M(r)&&(o[e]+=r*("-"===t[n-1]?-1:1))})}),o}function K(t,e){var r=e.offset,n=t.placement,o=t.offsets,i=o.popper,a=o.reference,p=n.split("-")[0],s=void 0;return s=M(+r)?[+r,0]:q(r,i,a,p),"left"===p?(i.top+=s[0],i.left-=s[1]):"right"===p?(i.top+=s[0],i.left+=s[1]):"top"===p?(i.left+=s[0],i.top-=s[1]):"bottom"===p&&(i.left+=s[0],i.top+=s[1]),t.popper=i,t}function G(t){document.addEventListener("click",Le,t),document.addEventListener("touchstart",Ee),window.addEventListener("blur",Te),window.addEventListener("resize",Ae),!xe&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)&&document.addEventListener("pointerdown",Ee)}function J(t,e){function r(){le(function(){M=!1})}function n(t){var e=I=t,r=e.clientX,n=e.clientY;if(q.popperInstance){var o=q.reference.getBoundingClientRect(),i=q.props.followCursor,a="horizontal"===i,p="vertical"===i;q.popperInstance.reference={getBoundingClientRect:function(){return{width:0,height:0,top:a?o.top:n,bottom:a?o.bottom:n,left:p?o.left:r,right:p?o.right:r}},clientWidth:0,clientHeight:0},q.popperInstance.scheduleUpdate()}}function o(t){var e=Qt(t.target,q.props.target);if(e&&!e._tippy){var r=q.props.content;r&&(J(e,ot({},q.props,{content:r,target:"",showOnInit:!0})),i(t))}}function i(t){if(L(),!q.state.isVisible){if(q.props.target)return o(t);if(F=!0,q.props.wait)return q.props.wait(q,t);v()&&(V.arrow&&(V.arrow.style.margin="0"),document.addEventListener("mousemove",n));var e=Rt(q.props.delay,0,it.delay);e?S=setTimeout(function(){A()},e):A()}}function a(){if(L(),!q.state.isVisible)return p();F=!1;var t=Rt(q.props.delay,1,it.delay);t?H=setTimeout(function(){q.state.isVisible&&Y()},t):Y()}function p(){document.removeEventListener("mousemove",n),I=null}function s(){document.body.removeEventListener("mouseleave",a),document.removeEventListener("mousemove",z)}function l(t){!q.state.isEnabled||h(t)||(!q.state.isVisible&&(N=t),"click"===t.type&&!1!==q.props.hideOnClick&&q.state.isVisible?a():i(t))}function c(t){var e=Zt(t.target,function(t){return t._tippy}),r=Qt(t.target,Ot.POPPER)===q.popper,n=e===q.reference;r||n||ce(de(q.popper),q.popper.getBoundingClientRect(),t,q.props)&&(s(),a())}function f(t){return h(t)?void 0:q.props.interactive?(document.body.addEventListener("mouseleave",a),void document.addEventListener("mousemove",z)):void a()}function d(t){if(t.target===q.reference){if(q.props.interactive){if(!t.relatedTarget)return;if(Qt(t.relatedTarget,Ot.POPPER))return}a()}}function u(t){Qt(t.target,q.props.target)&&i(t)}function m(t){Qt(t.target,q.props.target)&&a()}function h(t){var e=-1<t.type.indexOf("touch"),r=xe&&ke&&q.props.touchHold&&!e,n=ke&&!q.props.touchHold&&e;return r||n}function b(){var t=q.popperChildren.tooltip,e=q.props.popperOptions,r=Ot["round"===q.props.arrowType?"ROUND_ARROW":"ARROW"],n=t.querySelector(r),o=ot({placement:q.props.placement},e||{},{modifiers:ot({},e?e.modifiers:{},{arrow:ot({element:r},e&&e.modifiers?e.modifiers.arrow:{}),flip:ot({enabled:q.props.flip,padding:q.props.distance+5,behavior:q.props.flipBehavior},e&&e.modifiers?e.modifiers.flip:{}),offset:ot({offset:q.props.offset},e&&e.modifiers?e.modifiers.offset:{})}),onCreate:function(){t.style[de(q.popper)]=fe(q.props.distance,it.distance),n&&q.props.arrowTransform&&ae(n,q.props.arrowTransform)},onUpdate:function(){var e=t.style;e.top="",e.bottom="",e.left="",e.right="",e[de(q.popper)]=fe(q.props.distance,it.distance),n&&q.props.arrowTransform&&ae(n,q.props.arrowTransform)}}),p=new MutationObserver(function(){q.popperInstance.update()});return p.observe(q.popper,{childList:!0,subtree:!0}),X&&X.disconnect(),X=p,W||(W=!0,q.popper.addEventListener("mouseenter",function(t){q.props.interactive&&q.state.isVisible&&"mouseenter"===N.type&&i(t)}),q.popper.addEventListener("mouseleave",function(t){q.props.interactive&&"mouseenter"===N.type&&0===q.props.interactiveDebounce&&ce(de(q.popper),q.popper.getBoundingClientRect(),t,q.props)&&a()})),new Et(q.reference,q.popper,o)}function y(t){if(q.popperInstance?(!v()&&q.popperInstance.scheduleUpdate(),q.props.livePlacement&&!v()&&q.popperInstance.enableEventListeners()):(q.popperInstance=b(),!q.props.livePlacement&&q.popperInstance.disableEventListeners()),q.popperInstance.reference=q.reference,v()){q.popperChildren.arrow&&(q.popperChildren.arrow.style.margin="");var e=Rt(q.props.delay,0,it.delay);N.type&&n(e&&I?I:N)}se(q.popperInstance,t),q.props.appendTo.contains(q.popper)||(q.props.appendTo.appendChild(q.popper),_=!0)}function v(){return q.props.followCursor&&!ke&&"focus"!==N.type}function g(){Dt([q.popper],ge?0:q.props.updateDuration);var t=function e(){q.popperInstance&&q.popperInstance.scheduleUpdate(),_?requestAnimationFrame(e):Dt([q.popper],0)};t()}function w(t,e){k(t,function(){!q.state.isVisible&&q.props.appendTo.contains(q.popper)&&e()})}function x(t,e){k(t,e)}function k(t,e){if(0===t)return e();var r=q.popperChildren.tooltip,n=function o(t){t.target===r&&(me(r,"remove",o),e())};me(r,"remove",R),me(r,"add",n),R=n}function E(t,e,r){q.reference.addEventListener(t,e),r.push({eventType:t,handler:e})}function O(){B=q.props.trigger.trim().split(" ").reduce(function(t,e){return"manual"===e?t:(q.props.target?"mouseenter"===e?(E("mouseover",u,t),E("mouseout",m,t)):"focus"===e?(E("focusin",u,t),E("focusout",m,t)):"click"===e?E(e,u,t):void 0:(E(e,l,t),q.props.touchHold&&(E("touchstart",l,t),E("touchend",f,t)),"mouseenter"===e?E("mouseleave",f,t):"focus"===e?E(ge?"focusout":"blur",d,t):void 0),t)},[])}function C(){B.forEach(function(t){var e=t.eventType,r=t.handler;q.reference.removeEventListener(e,r)})}function L(){clearTimeout(S),clearTimeout(H)}function T(t){be(t,it);var e=q.props,r=ue(q.reference,ot({},q.props,t,{performance:!0}));r.performance=t.performance||e.performance,q.props=r,("trigger"in t||"touchHold"in t)&&(C(),O()),"interactiveDebounce"in t&&(s(),z=he(c,t.interactiveDebounce)),Vt(q.popper,e,r),q.popperChildren=Xt(q.popper),q.popperInstance&&pt.some(function(e){return e in t})&&(q.popperInstance.destroy(),q.popperInstance=b(),!q.state.isVisible&&q.popperInstance.disableEventListeners(),q.props.followCursor&&I&&n(I))}function A(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Rt(q.props.duration,0,it.duration[0]);return q.state.isDestroyed||!q.state.isEnabled||ke&&!q.props.touch?void 0:q.reference.isVirtual||document.documentElement.contains(q.reference)?q.reference.hasAttribute("disabled")?void 0:M?void(M=!1):void(!1===q.props.onShow(q)||(q.popper.style.visibility="visible",q.state.isVisible=!0,Dt([q.popper,q.popperChildren.tooltip,q.popperChildren.backdrop],0),y(function(){q.state.isVisible&&(!v()&&q.popperInstance.update(),Dt([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],t),q.popperChildren.backdrop&&(q.popperChildren.content.style.transitionDelay=$(t/6)+"ms"),q.props.interactive&&q.reference.classList.add("tippy-active"),q.props.sticky&&g(),pe([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],"visible"),x(t,function(){0===q.props.updateDuration&&q.popperChildren.tooltip.classList.add("tippy-notransition"),q.props.interactive&&-1<["focus","click"].indexOf(N.type)&&$t(q.popper),q.reference.setAttribute("aria-describedby",q.popper.id),q.props.onShown(q)}))}))):P()}function Y(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Rt(q.props.duration,1,it.duration[1]);q.state.isDestroyed||!q.state.isEnabled||!1===q.props.onHide(q)||(0===q.props.updateDuration&&q.popperChildren.tooltip.classList.remove("tippy-notransition"),q.props.interactive&&q.reference.classList.remove("tippy-active"),q.popper.style.visibility="hidden",q.state.isVisible=!1,Dt([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],t),pe([q.popperChildren.tooltip,q.popperChildren.backdrop,q.popperChildren.content],"hidden"),q.props.interactive&&!M&&-1<["focus","click"].indexOf(N.type)&&("focus"===N.type&&(M=!0),$t(q.reference)),w(t,function(){F||p(),q.reference.removeAttribute("aria-describedby"),q.popperInstance.disableEventListeners(),q.props.appendTo.removeChild(q.popper),_=!1,q.props.onHidden(q)}))}function P(t){q.state.isDestroyed||(q.state.isVisible&&Y(0),C(),q.reference.removeEventListener("click",r),delete q.reference._tippy,q.props.target&&t&&At(q.reference.querySelectorAll(q.props.target)).forEach(function(t){return t._tippy&&t._tippy.destroy()}),q.popperInstance&&q.popperInstance.destroy(),X&&X.disconnect(),q.state.isDestroyed=!0)}var D=ue(t,e);if(!D.multiple&&t._tippy)return null;var X=null,N={},I=null,S=0,H=0,F=!1,R=function(){},B=[],M=!1,W=!1,z=0<D.interactiveDebounce?he(c,D.interactiveDebounce):c,_=!1,U=Ye++,j=jt(U,D),V=Xt(j),q={id:U,reference:t,popper:j,popperChildren:V,popperInstance:null,props:D,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1},clearDelayTimeouts:L,set:T,setContent:function(t){T({content:t})},show:A,hide:Y,enable:function(){q.state.isEnabled=!0},disable:function(){q.state.isEnabled=!1},destroy:P};return O(),t.addEventListener("click",r),D.lazy||(q.popperInstance=b(),q.popperInstance.disableEventListeners()),D.showOnInit&&setTimeout(i,20),!D.a11y||D.target||Pt(t)||t.setAttribute("tabindex","0"),t._tippy=q,j._tippy=q,q}function Q(t,e,r){be(e,it),Pe||(G(De),Pe=!0);var n=ot({},it,e);Nt(t)&&Gt(t);var o=Ht(t),i=o[0],a=(r&&i?[i]:o).reduce(function(t,e){var r=e&&J(e,n);return r&&t.push(r),t},[]);return{targets:t,props:n,instances:a,destroyAll:function(){this.instances.forEach(function(t){t.destroy()}),this.instances=[]}}}for(var Z=Math.min,$=Math.round,tt=Math.floor,et=Math.max,rt='.tippy-iOS{cursor:pointer!important}.tippy-notransition{transition:none!important}.tippy-popper{-webkit-perspective:700px;perspective:700px;z-index:9999;outline:0;transition-timing-function:cubic-bezier(.165,.84,.44,1);pointer-events:none;line-height:1.4}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-8px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 6px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%);opacity:1}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) rotateX(0);transform:translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(60deg);transform:translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-8px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 6px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%);opacity:1}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) rotateX(0);transform:translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(-60deg);transform:translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-16px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) rotateY(0);transform:translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(-60deg);transform:translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-16px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) rotateY(0);transform:translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(60deg);transform:translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:4px;font-size:.9rem;padding:.3rem .6rem;max-width:350px;text-align:center;will-change:transform;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#333}.tippy-tooltip[data-size=small]{padding:.2rem .4rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.4rem .8rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.53,2,.36,.85)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:24px;height:8px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;will-change:transform;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}@media (max-width:360px){.tippy-popper{max-width:96%;max-width:calc(100% - 20px)}}',nt="3.0.6",ot=Object.assign||function(t){
for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},it={a11y:!0,content:"",placement:"top",livePlacement:!0,trigger:"mouseenter focus",hideOnClick:!0,animation:"shift-away",animateFill:!0,arrow:!1,delay:[0,20],duration:[325,275],interactive:!1,interactiveBorder:2,interactiveDebounce:0,theme:"dark",size:"regular",distance:10,offset:0,multiple:!1,followCursor:!1,inertia:!1,updateDuration:200,sticky:!1,appendTo:function(){return document.body},zIndex:9999,touchHold:!1,performance:!1,flip:!0,flipBehavior:"flip",arrowType:"sharp",arrowTransform:"",target:"",allowHTML:!0,showOnInit:!1,popperOptions:{},lazy:!0,touch:!0,wait:null,shouldPopperHideOnBlur:function(){return!0},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){}},at=function(t){it=ot({},it,t)},pt=["placement","popperOptions","flip","flipBehavior","distance","offset"],st="undefined"!=typeof window&&"undefined"!=typeof document,lt=["Edge","Trident","Firefox"],ct=0,ft=0;ft<lt.length;ft+=1)if(st&&0<=navigator.userAgent.indexOf(lt[ft])){ct=1;break}var dt=st&&window.Promise,ut=dt?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},ct))}},mt=st&&!(!window.MSInputMethodContext||!document.documentMode),ht=st&&/MSIE 10/.test(navigator.userAgent),bt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},yt=function(){function t(t,e){for(var r,n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),vt=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},gt=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},wt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],xt=wt.slice(3),kt={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},Et=function(){function e(r,n){var o=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};bt(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(o.update)},this.update=ut(this.update.bind(this)),this.options=gt({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=r&&r.jquery?r[0]:r,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(gt({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){o.options.modifiers[t]=gt({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return gt({name:t},o.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(e){e.enabled&&t(e.onLoad)&&e.onLoad(o.reference,o.popper,o.options,e,o.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return yt(e,[{key:"update",value:function(){return P.call(this)}},{key:"destroy",value:function(){return N.call(this)}},{key:"enableEventListeners",value:function(){return F.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),e}();Et.Utils=("undefined"==typeof window?global:window).PopperUtils,Et.placements=wt,Et.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,r=e.split("-")[0],n=e.split("-")[1];if(n){var o=t.offsets,i=o.reference,a=o.popper,p=-1!==["bottom","top"].indexOf(r),s=p?"left":"top",l=p?"width":"height",c={start:vt({},s,i[s]),end:vt({},s,i[s]+i[l]-a[l])};t.offsets.popper=gt({},a,c[n])}return t}},offset:{order:200,enabled:!0,fn:K,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var r=e.boundariesElement||i(t.instance.popper);t.instance.reference===r&&(r=i(r));var n=X("transform"),o=t.instance.popper.style,a=o.top,p=o.left,s=o[n];o.top="",o.left="",o[n]="";var l=w(t.instance.popper,t.instance.reference,e.padding,r,t.positionFixed);o.top=a,o.left=p,o[n]=s,e.boundaries=l;var c=e.priority,f=t.offsets.popper,d={primary:function(t){var r=f[t];return f[t]<l[t]&&!e.escapeWithReference&&(r=et(f[t],l[t])),vt({},t,r)},secondary:function(t){var r="right"===t?"left":"top",n=f[r];return f[t]>l[t]&&!e.escapeWithReference&&(n=Z(f[r],l[t]-("right"===t?f.width:f.height))),vt({},r,n)}};return c.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";f=gt({},f,d[e](t))}),t.offsets.popper=f,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,r=e.popper,n=e.reference,o=t.placement.split("-")[0],i=tt,a=-1!==["top","bottom"].indexOf(o),p=a?"right":"bottom",s=a?"left":"top",l=a?"width":"height";return r[p]<i(n[s])&&(t.offsets.popper[s]=i(n[s])-r[l]),r[s]>i(n[p])&&(t.offsets.popper[s]=i(n[p])),t}},arrow:{order:500,enabled:!0,fn:function(t,r){var n;if(!_(t.instance.modifiers,"arrow","keepTogether"))return t;var o=r.element;if("string"==typeof o){if(o=t.instance.popper.querySelector(o),!o)return t}else if(!t.instance.popper.contains(o))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],a=t.offsets,p=a.popper,s=a.reference,l=-1!==["left","right"].indexOf(i),c=l?"height":"width",f=l?"Top":"Left",d=f.toLowerCase(),u=l?"left":"top",h=l?"bottom":"right",b=O(o)[c];s[h]-b<p[d]&&(t.offsets.popper[d]-=p[d]-(s[h]-b)),s[d]+b>p[h]&&(t.offsets.popper[d]+=s[d]+b-p[h]),t.offsets.popper=m(t.offsets.popper);var y=s[d]+s[c]/2-b/2,v=e(t.instance.popper),g=parseFloat(v["margin"+f],10),w=parseFloat(v["border"+f+"Width"],10),x=y-t.offsets.popper[d]-g-w;return x=et(Z(p[c]-b,x),0),t.arrowElement=o,t.offsets.arrow=(n={},vt(n,d,$(x)),vt(n,u,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(D(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var r=w(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],o=C(n),i=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case kt.FLIP:a=[n,o];break;case kt.CLOCKWISE:a=j(n);break;case kt.COUNTERCLOCKWISE:a=j(n,!0);break;default:a=e.behavior}return a.forEach(function(p,s){if(n!==p||a.length===s+1)return t;n=t.placement.split("-")[0],o=C(n);var l=t.offsets.popper,c=t.offsets.reference,f=tt,d="left"===n&&f(l.right)>f(c.left)||"right"===n&&f(l.left)<f(c.right)||"top"===n&&f(l.bottom)>f(c.top)||"bottom"===n&&f(l.top)<f(c.bottom),u=f(l.left)<f(r.left),m=f(l.right)>f(r.right),h=f(l.top)<f(r.top),b=f(l.bottom)>f(r.bottom),y="left"===n&&u||"right"===n&&m||"top"===n&&h||"bottom"===n&&b,v=-1!==["top","bottom"].indexOf(n),g=!!e.flipVariations&&(v&&"start"===i&&u||v&&"end"===i&&m||!v&&"start"===i&&h||!v&&"end"===i&&b);(d||y||g)&&(t.flipped=!0,(d||y)&&(n=a[s+1]),g&&(i=U(i)),t.placement=n+(i?"-"+i:""),t.offsets.popper=gt({},t.offsets.popper,L(t.instance.popper,t.offsets.reference,t.placement)),t=Y(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,r=e.split("-")[0],n=t.offsets,o=n.popper,i=n.reference,a=-1!==["left","right"].indexOf(r),p=-1===["top","left"].indexOf(r);return o[a?"left":"top"]=i[r]-(p?o[a?"width":"height"]:0),t.placement=C(e),t.offsets.popper=m(o),t}},hide:{order:800,enabled:!0,fn:function(t){if(!_(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,r=T(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var r=e.x,n=e.y,o=t.offsets.popper,a=T(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var p=void 0===a?e.gpuAcceleration:a,s=i(t.instance.popper),l=h(s),c={position:o.position},f={left:tt(o.left),top:$(o.top),bottom:$(o.bottom),right:tt(o.right)},d="bottom"===r?"top":"bottom",u="right"===n?"left":"right",m=X("transform"),b=void 0,y=void 0;if(y="bottom"==d?"HTML"===s.nodeName?-s.clientHeight+f.bottom:-l.height+f.bottom:f.top,b="right"==u?"HTML"===s.nodeName?-s.clientWidth+f.right:-l.width+f.right:f.left,p&&m)c[m]="translate3d("+b+"px, "+y+"px, 0)",c[d]=0,c[u]=0,c.willChange="transform";else{var v="bottom"==d?-1:1,g="right"==u?-1:1;c[d]=y*v,c[u]=b*g,c.willChange=d+", "+u}var w={"x-placement":t.placement};return t.attributes=gt({},w,t.attributes),t.styles=gt({},c,t.styles),t.arrowStyles=gt({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return W(t.instance.popper,t.styles),z(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&W(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,r,n,o){var i=E(o,e,t,r.positionFixed),a=k(r.placement,i,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",a),W(e,{position:r.positionFixed?"fixed":"absolute"}),r},gpuAcceleration:void 0}}};var Ot={POPPER:".tippy-popper",TOOLTIP:".tippy-tooltip",CONTENT:".tippy-content",BACKDROP:".tippy-backdrop",ARROW:".tippy-arrow",ROUND_ARROW:".tippy-roundarrow"},Ct={x:!0},Lt="undefined"!=typeof window,Tt=Lt&&"MutationObserver"in window,At=function(t){return[].slice.call(t)},Yt=function(t,e){e.content instanceof Element?(St(t,""),t.appendChild(e.content)):t[e.allowHTML?"innerHTML":"textContent"]=e.content},Pt=function(t){return!(t instanceof Element)||Jt.call(t,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!t.hasAttribute("disabled")},Dt=function(t,e){t.filter(Boolean).forEach(function(t){t.style.transitionDuration=e+"ms"})},Xt=function(t){var e=function(e){return t.querySelector(e)};return{tooltip:e(Ot.TOOLTIP),backdrop:e(Ot.BACKDROP),content:e(Ot.CONTENT),arrow:e(Ot.ARROW)||e(Ot.ROUND_ARROW)}},Nt=function(t){return"[object Object]"==={}.toString.call(t)},It=function(){return document.createElement("div")},St=function(t,e){t[Ct.x&&"innerHTML"]=e instanceof Element?e[Ct.x&&"innerHTML"]:e},Ht=function(t){if(t instanceof Element||Nt(t))return[t];if(t instanceof NodeList)return At(t);if(Array.isArray(t))return t;try{return At(document.querySelectorAll(t))}catch(e){return[]}},Ft=function(t){return!isNaN(t)&&!isNaN(parseFloat(t))},Rt=function(t,e,r){if(Array.isArray(t)){var n=t[e];return null==n?r:n}return t},Bt=function(t){var e=It();return"round"===t?(e.className="tippy-roundarrow",St(e,'<svg viewBox="0 0 24 8" xmlns="http://www.w3.org/2000/svg"><path d="M3 8s2.021-.015 5.253-4.218C9.584 2.051 10.797 1.007 12 1c1.203-.007 2.416 1.035 3.761 2.782C19.012 8.005 21 8 21 8H3z"/></svg>')):e.className="tippy-arrow",e},Mt=function(){var t=It();return t.className="tippy-backdrop",t.setAttribute("data-state","hidden"),t},Wt=function(t,e){t.setAttribute("tabindex","-1"),e.setAttribute("data-interactive","")},zt=function(t,e){t.removeAttribute("tabindex"),e.removeAttribute("data-interactive")},_t=function(t){t.setAttribute("data-inertia","")},Ut=function(t){t.removeAttribute("data-inertia")},jt=function(t,e){var r=It();r.className="tippy-popper",r.setAttribute("role","tooltip"),r.id="tippy-"+t,r.style.zIndex=e.zIndex;var n=It();n.className="tippy-tooltip",n.setAttribute("data-size",e.size),n.setAttribute("data-animation",e.animation),n.setAttribute("data-state","hidden"),e.theme.split(" ").forEach(function(t){n.classList.add(t+"-theme")});var o=It();return o.className="tippy-content",o.setAttribute("data-state","hidden"),e.interactive&&Wt(r,n),e.arrow&&n.appendChild(Bt(e.arrowType)),e.animateFill&&(n.appendChild(Mt()),n.setAttribute("data-animatefill","")),e.inertia&&n.setAttribute("data-inertia",""),Yt(o,e),n.appendChild(o),r.appendChild(n),r.addEventListener("focusout",function(t){t.relatedTarget&&r._tippy&&!Zt(t.relatedTarget,function(t){return t===r})&&t.relatedTarget!==r._tippy.reference&&r._tippy.props.shouldPopperHideOnBlur(t)&&r._tippy.hide()}),r},Vt=function(t,e,r){var n=Xt(t),o=n.tooltip,i=n.content,a=n.backdrop,p=n.arrow;t.style.zIndex=r.zIndex,o.setAttribute("data-size",r.size),o.setAttribute("data-animation",r.animation),e.content!==r.content&&Yt(i,r),!e.animateFill&&r.animateFill?(o.appendChild(Mt()),o.setAttribute("data-animatefill","")):e.animateFill&&!r.animateFill&&(o.removeChild(a),o.removeAttribute("data-animatefill")),!e.arrow&&r.arrow?o.appendChild(Bt(r.arrowType)):e.arrow&&!r.arrow&&o.removeChild(p),e.arrow&&r.arrow&&e.arrowType!==r.arrowType&&o.replaceChild(Bt(r.arrowType),p),!e.interactive&&r.interactive?Wt(t,o):e.interactive&&!r.interactive&&zt(t,o),!e.inertia&&r.inertia?_t(o):e.inertia&&!r.inertia&&Ut(o),e.theme!==r.theme&&(e.theme.split(" ").forEach(function(t){o.classList.remove(t+"-theme")}),r.theme.split(" ").forEach(function(t){o.classList.add(t+"-theme")}))},qt=function(t){At(document.querySelectorAll(Ot.POPPER)).forEach(function(e){var r=e._tippy;r&&!0===r.props.hideOnClick&&(!t||e!==t.popper)&&r.hide()})},Kt=function(t){return Object.keys(it).reduce(function(e,r){var n=(t.getAttribute("data-tippy-"+r)||"").trim();return n?(e[r]="true"===n||"false"!==n&&(Ft(n)?+n:"target"!==r&&"["===n[0]?JSON.parse(n):n),e):e},{})},Gt=function(t){var e={isVirtual:!0,attributes:t.attributes||{},setAttribute:function(e,r){t.attributes[e]=r},getAttribute:function(e){return t.attributes[e]},removeAttribute:function(e){delete t.attributes[e]},hasAttribute:function(e){return e in t.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(e){t.classList.classNames[e]=!0},remove:function(e){delete t.classList.classNames[e]},contains:function(e){return e in t.classList.classNames}}};for(var r in e)t[r]=e[r];return t},Jt=function(){if(Lt){var t=Element.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector}}(),Qt=function(t,e){return(Element.prototype.closest||function(t){for(var e=this;e;){if(Jt.call(e,t))return e;e=e.parentElement}}).call(t,e)},Zt=function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}},$t=function(t){var e=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;t.focus(),scroll(e,r)},te=function(t){void t.offsetHeight},ee=function(t,e){return(e?t:{X:"Y",Y:"X"}[t])||""},re=function(t,e,r,n){var o=e[0],i=e[1];if(!o&&!i)return"";var a={scale:function(){return i?r?o+", "+i:i+", "+o:""+o}(),translate:function(){return i?r?n?o+"px, "+-i+"px":o+"px, "+i+"px":n?-i+"px, "+o+"px":i+"px, "+o+"px":n?-o+"px":o+"px"}()};return a[t]},ne=function(t,e){var r=t.match(new RegExp(e+"([XY])"));return r?r[1]:""},oe=function(t,e){var r=t.match(e);return r?r[1].split(",").map(parseFloat):[]},ie={translate:/translateX?Y?\(([^)]+)\)/,scale:/scaleX?Y?\(([^)]+)\)/},ae=function(t,e){var r=de(Qt(t,Ot.POPPER)),n="top"===r||"bottom"===r,o="right"===r||"bottom"===r,i={translate:{axis:ne(e,"translate"),numbers:oe(e,ie.translate)},scale:{axis:ne(e,"scale"),numbers:oe(e,ie.scale)}},a=e.replace(ie.translate,"translate"+ee(i.translate.axis,n)+"("+re("translate",i.translate.numbers,n,o)+")").replace(ie.scale,"scale"+ee(i.scale.axis,n)+"("+re("scale",i.scale.numbers,n,o)+")");t.style["undefined"==typeof document.body.style.transform?"webkitTransform":"transform"]=a},pe=function(t,e){t.filter(Boolean).forEach(function(t){t.setAttribute("data-state",e)})},se=function(t,e){var r=t.popper,n=t.options,o=n.onCreate,i=n.onUpdate;n.onCreate=n.onUpdate=function(){te(r),e(),i(),n.onCreate=o,n.onUpdate=i}},le=function(t){setTimeout(t,1)},ce=function(t,e,r,n){if(!t)return!0;var o=r.clientX,i=r.clientY,a=n.interactiveBorder,p=n.distance,s=e.top-i>("top"===t?a+p:a),l=i-e.bottom>("bottom"===t?a+p:a),c=e.left-o>("left"===t?a+p:a),f=o-e.right>("right"===t?a+p:a);return s||l||c||f},fe=function(t,e){return-(t-e)+"px"},de=function(t){var e=t.getAttribute("x-placement");return e?e.split("-")[0]:""},ue=function(t,e){var r=ot({},e,e.performance?{}:Kt(t));return r.arrow&&(r.animateFill=!1),"function"==typeof r.appendTo&&(r.appendTo=e.appendTo(t)),"function"==typeof r.content&&(r.content=e.content(t)),r},me=function(t,e,r){t[e+"EventListener"]("transitionend",r)},he=function(t,e){var r;return function(){var n=this,o=arguments;clearTimeout(r),r=setTimeout(function(){return t.apply(n,o)},e)}},be=function(t,e){for(var r in t||{})if(!(r in e))throw Error("[tippy]: `"+r+"` is not a valid option")},ye=Lt?navigator:{},ve=Lt?window:{},ge=/MSIE |Trident\//.test(ye.userAgent),we=/iPhone|iPad|iPod/.test(ye.platform)&&!ve.MSStream,xe="ontouchstart"in ve,ke=!1,Ee=function(){ke||(ke=!0,we&&document.body.classList.add("tippy-iOS"),window.performance&&document.addEventListener("mousemove",Ce))},Oe=0,Ce=function Xe(){var t=performance.now();20>t-Oe&&(ke=!1,document.removeEventListener("mousemove",Xe),!we&&document.body.classList.remove("tippy-iOS")),Oe=t},Le=function(t){var e=t.target;if(!(e instanceof Element))return qt();var r=Qt(e,Ot.POPPER);if(!(r&&r._tippy&&r._tippy.props.interactive)){var n=Zt(e,function(t){return t._tippy&&t._tippy.reference===t});if(n){var o=n._tippy,i=-1<o.props.trigger.indexOf("click");if(ke||i)return qt(o);if(!0!==o.props.hideOnClick||i)return;o.clearDelayTimeouts()}qt()}},Te=function(){var t=document,e=t.activeElement;e&&e.blur&&e._tippy&&e.blur()},Ae=function(){At(document.querySelectorAll(Ot.POPPER)).forEach(function(t){var e=t._tippy;e.props.livePlacement||e.popperInstance.scheduleUpdate()})},Ye=1,Pe=!1,De=!1;return Q.version=nt,Q.defaults=it,Q.one=function(t,e){return Q(t,e,!0).instances[0]},Q.setDefaults=function(t){at(t),Q.defaults=it},Q.disableAnimations=function(){Q.setDefaults({duration:0,updateDuration:0,animateFill:!1})},Q.hideAllPoppers=qt,Q.useCapture=function(){De=!0},Lt&&setTimeout(function(){At(document.querySelectorAll("[data-tippy]")).forEach(function(t){var e=t.getAttribute("data-tippy");e&&Q(t,{content:e})})}),function(t){if(Tt){var e=document.createElement("style");e.type="text/css",e.textContent=t,document.head.insertBefore(e,document.head.firstChild)}}(rt),Q});
/**
 * Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}(function(){function e(e,t){var n=typeof e[t];return n==N||!(n!=C||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=C||!e[t])}function n(e,t){return typeof e[t]!=E}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function o(e){return e&&O(e,T)&&D(e,w)}function i(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function a(t){typeof console!=E&&e(console,"log")&&console.log(t)}function s(e,t){b&&t?alert(e):a(e)}function c(e){I.initialized=!0,I.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,I.config.alertOnFail)}function d(e){s("Rangy warning: "+e,I.config.alertOnWarn)}function f(e){return e.message||e.description||String(e)}function u(){if(b&&!I.initialized){var t,n=!1,r=!1;e(document,"createRange")&&(t=document.createRange(),O(t,y)&&D(t,S)&&(n=!0));var s=i(document);if(!s||"body"!=s.nodeName.toLowerCase())return void c("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),o(t)&&(r=!0)),!n&&!r)return void c("Neither Range nor TextRange are available");I.initialized=!0,I.features={implementsDomRange:n,implementsTextRange:r};var d,u;for(var l in x)(d=x[l])instanceof p&&d.init(d,I);for(var h=0,g=M.length;g>h;++h)try{M[h](I)}catch(m){u="Rangy init listener threw an exception. Continuing. Detail: "+f(m),a(u)}}}function l(e,t,n){n&&(e+=" in module "+n.name),I.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function h(e,t,n,r){e[t]=function(){return l(t,n,r),e[n].apply(e,P.toArray(arguments))}}function g(e){e=e||window,u();for(var t=0,n=k.length;n>t;++t)k[t](e)}function p(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n){var r=new p(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(I,t),t.supported=!0}catch(r){var o="Module '"+e+"' failed to load: "+f(r);a(o),r.stack&&a(r.stack)}}});return x[e]=r,r}function R(){}function v(){}var C="object",N="function",E="undefined",S=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],y=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],w=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],T=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],O=r(e),_=r(t),D=r(n),A=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;r>n;++n)t(e[n],n)},x={},b=typeof window!=E&&typeof document!=E,P={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:O,areHostObjects:_,areHostProperties:D,isTextRange:o,getBody:i,forEach:A},I={version:"1.3.0",initialized:!1,isBrowser:b,supported:!0,util:P,features:{},modules:x,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==E||rangyAutoInitialize}};I.fail=c,I.warn=d;var B;({}).hasOwnProperty?(P.extend=B=function(e,t,n){var r,o;for(var i in t)t.hasOwnProperty(i)&&(r=e[i],o=t[i],n&&null!==r&&"object"==typeof r&&null!==o&&"object"==typeof o&&B(r,o,!0),e[i]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},P.createOptions=function(e,t){var n={};return B(n,t),e&&B(n,e),n}):c("hasOwnProperty not supported"),b||c("Rangy can only run in a browser"),function(){var e;if(b){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(r){}}e||(e=function(e){for(var t=[],n=0,r=e.length;r>n;++n)t[n]=e[n];return t}),P.toArray=e}();var H;b&&(e(document,"addEventListener")?H=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?H=function(e,t,n){e.attachEvent("on"+t,n)}:c("Document does not have required addEventListener or attachEvent method"),P.addListener=H);var M=[];P.deprecationNotice=l,P.createAliasForDeprecatedMethod=h,I.init=u,I.addInitListener=function(e){I.initialized?e(I):M.push(e)};var k=[];I.addShimListener=function(e){k.push(e)},b&&(I.shim=I.createMissingNativeApi=g,h(I,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,o=n.length;o>r;++r){if(t=n[r],e=x[t],!(e&&e instanceof p))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){I.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){I.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},I.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=m(e,n,t);I.initialized&&I.supported&&r.init()},I.createCoreModule=function(e,t,n){m(e,t,n)},I.RangePrototype=R,I.rangePrototype=new R,I.selectionPrototype=new v,I.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==b||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function o(e){for(var t=0;e=e.previousSibling;)++t;return t}function i(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function a(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(M(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function c(e,t){return s(e,t,!0)}function d(e,t,n){for(var r,o=n?e:e.parentNode;o;){if(r=o.parentNode,r===t)return o;o=r}return null}function f(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function l(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function h(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),l(r,e),n)for(var i,a=0;i=n[a++];)i.node==e&&i.offset>t?(i.node=r,i.offset-=t):i.node==e.parentNode&&i.offset>o(e)&&++i.offset;return r}function g(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=b)return e.ownerDocument;if(typeof e.document!=b)return e.document;if(e.parentNode)return g(e.parentNode);throw t.createError("getDocument: no document found for node")}function p(e){var n=g(e);if(typeof n.defaultView!=b)return n.defaultView;if(typeof n.parentWindow!=b)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=b)return e.contentDocument;if(typeof e.contentWindow!=b)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function R(e){if(typeof e.contentWindow!=b)return e.contentWindow;if(typeof e.contentDocument!=b)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function v(e){return e&&P.isHostMethod(e,"setTimeout")&&P.isHostObject(e,"document")}function C(e,t,n){var r;if(e?P.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):g(e):v(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function N(e){for(var t;t=e.parentNode;)e=t;return e}function E(e,n,r,i){var s,c,f,u,l;if(e==r)return n===i?0:i>n?-1:1;if(s=d(r,e,!0))return n<=o(s)?-1:1;if(s=d(e,r,!0))return o(s)<i?-1:1;if(c=a(e,r),!c)throw new Error("comparePoints error: nodes have no common ancestor");if(f=e===c?c:d(e,c,!0),u=r===c?c:d(r,c,!0),f===u)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=c.firstChild;l;){if(l===f)return-1;if(l===u)return 1;l=l.nextSibling}}function S(e){var t;try{return t=e.parentNode,!1}catch(n){return!0}}function y(e){if(!e)return"[No node]";if(k&&S(e))return"[Broken node]";if(f(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+o(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function w(e){for(var t,n=g(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function T(e,t,n){var r=I(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var i=r.firstChild;return i?r.insertBefore(o,i):r.appendChild(o),o}function O(e){return e.parentNode.removeChild(e)}function _(e){this.root=e,this._next=e}function D(e){return new _(e)}function A(e,t){this.node=e,this.offset=t}function x(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var b="undefined",P=e.util,I=P.getBody;P.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),P.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var B=document.createElement("div");P.areHostMethods(B,["insertBefore","appendChild","cloneNode"]||!P.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),P.isHostProperty(B,"innerHTML")||t.fail("Element is missing innerHTML property");var H=document.createTextNode("test");P.areHostMethods(H,["splitText","deleteData","insertData","appendData","cloneNode"]||!P.areHostObjects(B,["previousSibling","nextSibling","childNodes","parentNode"])||!P.areHostProperties(H,["data"]))||t.fail("Incomplete Text Node implementation");var M=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},k=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",k=S(n),e.features.crashyTextNodes=k}();var L;typeof window.getComputedStyle!=b?L=function(e,t){return p(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=b?L=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),_.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},A.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+y(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},x.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},x.prototype.toString=function(){return this.message},e.dom={arrayContains:M,isHtmlNamespace:n,parentElement:r,getNodeIndex:o,getNodeLength:i,getCommonAncestor:a,isAncestorOf:s,isOrIsAncestorOf:c,getClosestAncestorIn:d,isCharacterDataNode:f,isTextOrCommentNode:u,insertAfter:l,splitDataNode:h,getDocument:g,getWindow:p,getIframeWindow:R,getIframeDocument:m,getBody:I,isWindow:v,getContentDocument:C,getRootContainer:N,comparePoints:E,isBrokenNode:S,inspectNode:y,getComputedStyleProperty:L,createTestElement:T,removeNode:O,fragmentFromNodeChildren:w,createIterator:D,DomPosition:A},e.DOMException=x}),I.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(F(e,t.startContainer)||F(e,t.endContainer))}function n(e){return e.document||j(e.startContainer)}function r(e){return Q(e.startContainer)}function o(e){return new M(e.parentNode,W(e))}function i(e){return new M(e.parentNode,W(e)+1)}function a(e,t,n){var r=11==e.nodeType?e.firstChild:e;return L(t)?n==t.length?B.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:U(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function s(e,t,r){if(w(e),w(t),n(t)!=n(e))throw new k("WRONG_DOCUMENT_ERR");var o=z(e.startContainer,e.startOffset,t.endContainer,t.endOffset),i=z(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return r?0>=o&&i>=0:0>o&&i>0}function c(e){for(var t,r,o,i=n(e.range).createDocumentFragment();r=e.next();){if(t=e.isPartiallySelectedSubtree(),r=r.cloneNode(!t),t&&(o=e.getSubtreeIterator(),r.appendChild(c(o)),o.detach()),10==r.nodeType)throw new k("HIERARCHY_REQUEST_ERR");i.appendChild(r)}return i}function d(e,t,n){var r,o;n=n||{stop:!1};for(var i,a;i=e.next();)if(e.isPartiallySelectedSubtree()){if(t(i)===!1)return void(n.stop=!0);if(a=e.getSubtreeIterator(),d(a,t,n),a.detach(),n.stop)return}else for(r=B.createIterator(i);o=r.next();)if(t(o)===!1)return void(n.stop=!0)}function f(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),f(t),t.detach()):e.remove()}function u(e){for(var t,r,o=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(u(r)),r.detach()):e.remove(),10==t.nodeType)throw new k("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function l(e,t,n){var r,o=!(!t||!t.length),i=!!n;o&&(r=new RegExp("^("+t.join("|")+")$"));var a=[];return d(new g(e,(!1)),function(t){if(!(o&&!r.test(t.nodeType)||i&&!n(t))){var s=e.startContainer;if(t!=s||!L(s)||e.startOffset!=s.length){var c=e.endContainer;t==c&&L(c)&&0==e.endOffset||a.push(t)}}}),a}function h(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+B.inspectNode(e.startContainer)+":"+e.startOffset+", "+B.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&L(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||L(this.sc)?V(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||L(this.ec)?V(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function p(e){return function(t,n){for(var r,o=n?t:t.parentNode;o;){if(r=o.nodeType,Y(e,r))return o;o=o.parentNode}return null}}function m(e,t){if(re(e,t))throw new k("INVALID_NODE_TYPE_ERR")}function R(e,t){if(!Y(t,e.nodeType))throw new k("INVALID_NODE_TYPE_ERR")}function v(e,t){if(0>t||t>(L(e)?e.length:e.childNodes.length))throw new k("INDEX_SIZE_ERR")}function C(e,t){if(te(e,!0)!==te(t,!0))throw new k("WRONG_DOCUMENT_ERR")}function N(e){if(ne(e,!0))throw new k("NO_MODIFICATION_ALLOWED_ERR")}function E(e,t){if(!e)throw new k(t)}function S(e,t){return t<=(L(e)?e.length:e.childNodes.length)}function y(e){return!!e.startContainer&&!!e.endContainer&&!(G&&(B.isBrokenNode(e.startContainer)||B.isBrokenNode(e.endContainer)))&&Q(e.startContainer)==Q(e.endContainer)&&S(e.startContainer,e.startOffset)&&S(e.endContainer,e.endOffset)}function w(e){if(!y(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function T(e,t){w(e);var n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,a=n===o;L(o)&&i>0&&i<o.length&&U(o,i,t),L(n)&&r>0&&r<n.length&&(n=U(n,r,t),a?(i-=r,o=n):o==n.parentNode&&i>=W(n)&&i++,r=0),e.setStartAndEnd(n,r,o,i)}function O(e){w(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function _(e){e.START_TO_START=de,e.START_TO_END=fe,e.END_TO_END=ue,e.END_TO_START=le,e.NODE_BEFORE=he,e.NODE_AFTER=ge,e.NODE_BEFORE_AND_AFTER=pe,e.NODE_INSIDE=me}function D(e){_(e),_(e.prototype)}function A(e,t){return function(){w(this);var n,r,o=this.startContainer,a=this.startOffset,s=this.commonAncestorContainer,c=new g(this,(!0));o!==s&&(n=V(o,s,!0),r=i(n),o=r.node,a=r.offset),d(c,N),c.reset();var f=e(c);return c.detach(),t(this,o,a,o,a),f}}function x(n,r){function a(e,t){return function(n){R(n,Z),R(Q(n),$);var r=(e?o:i)(n);(t?s:c)(this,r.node,r.offset)}}function s(e,t,n){var o=e.endContainer,i=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((Q(t)!=Q(o)||1==z(t,n,o,i))&&(o=t,i=n),r(e,t,n,o,i))}function c(e,t,n){var o=e.startContainer,i=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((Q(t)!=Q(o)||-1==z(t,n,o,i))&&(o=t,i=n),r(e,o,i,t,n))}var d=function(){};d.prototype=e.rangePrototype,n.prototype=new d,H.extend(n.prototype,{setStart:function(e,t){m(e,!0),v(e,t),s(this,e,t)},setEnd:function(e,t){m(e,!0),v(e,t),c(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],o=t,i=n;switch(e.length){case 3:i=e[2];break;case 4:o=e[2],i=e[3]}r(this,t,n,o,i)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(e){w(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),r(this,e,0,e,q(e))},selectNode:function(e){m(e,!1),R(e,Z);var t=o(e),n=i(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:A(u,r),deleteContents:A(f,r),canSurroundContents:function(){w(this),N(this.startContainer),N(this.endContainer);var e=new g(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},splitBoundaries:function(){T(this)},splitBoundariesPreservingPositions:function(e){T(this,e)},normalizeBoundaries:function(){w(this);var e,t=this.startContainer,n=this.startOffset,o=this.endContainer,i=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,i=e.length,e.appendData(t.data),X(t))},s=function(e){var r=e.previousSibling;if(r&&r.nodeType==e.nodeType){t=e;var a=e.length;if(n=r.length,e.insertData(0,r.data),X(r),t==o)i+=n,o=t;else if(o==e.parentNode){var s=W(e);i==s?(o=e,i=a):i>s&&i--}}},c=!0;if(L(o))i==o.length?a(o):0==i&&(e=o.previousSibling,e&&e.nodeType==o.nodeType&&(i=e.length,t==o&&(c=!1),e.appendData(o.data),X(o),o=e));else{if(i>0){var d=o.childNodes[i-1];d&&L(d)&&a(d)}c=!this.collapsed}if(c){if(L(t))0==n?s(t):n==t.length&&(e=t.nextSibling,e&&e.nodeType==t.nodeType&&(o==e&&(o=t,i+=t.length),t.appendData(e.data),X(e)));else if(n<t.childNodes.length){var f=t.childNodes[n];f&&L(f)&&s(f)}}else t=o,n=i;r(this,t,n,o,i)},collapseToPoint:function(e,t){m(e,!0),v(e,t),this.setStartAndEnd(e,t)}}),D(n)}function b(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:B.getCommonAncestor(e.startContainer,e.endContainer)}function P(e,t,n,r,o){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=o,e.document=B.getDocument(t),b(e)}function I(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,b(this)}var B=e.dom,H=e.util,M=B.DomPosition,k=e.DOMException,L=B.isCharacterDataNode,W=B.getNodeIndex,F=B.isOrIsAncestorOf,j=B.getDocument,z=B.comparePoints,U=B.splitDataNode,V=B.getClosestAncestorIn,q=B.getNodeLength,Y=B.arrayContains,Q=B.getRootContainer,G=e.features.crashyTextNodes,X=B.removeNode;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,L(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!L(n)||n!==this.sc&&n!==this.ec?n.parentNode&&X(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse(!1);else{e=new I(n(this.range));var t=this._current,r=t,o=0,i=t,a=q(t);F(t,this.sc)&&(r=this.sc,o=this.so),F(t,this.ec)&&(i=this.ec,a=this.eo),P(e,r,o,i,a)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Z=[1,3,4,5,7,8,10],$=[2,9,11],J=[5,6,10,12],K=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],te=p([9,11]),ne=p(J),re=p([6,10,12]),oe=document.createElement("style"),ie=!1;try{oe.innerHTML="<b>x</b>",ie=3==oe.firstChild.nodeType}catch(ae){}e.features.htmlParsingConforms=ie;var se=ie?function(e){var t=this.startContainer,n=j(t);if(!t)throw new k("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:L(t)&&(r=B.parentElement(t)),r=null===r||"HTML"==r.nodeName&&B.isHtmlNamespace(j(r).documentElement)&&B.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,B.fragmentFromNodeChildren(r)}:function(e){var t=n(this),r=t.createElement("body");return r.innerHTML=e,B.fragmentFromNodeChildren(r)},ce=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],de=0,fe=1,ue=2,le=3,he=0,ge=1,pe=2,me=3;H.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){w(this),C(this.startContainer,t.startContainer);var n,r,o,i,a=e==le||e==de?"start":"end",s=e==fe||e==de?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],o=t[s+"Container"],i=t[s+"Offset"],z(n,r,o,i)},insertNode:function(e){if(w(this),R(e,K),N(this.startContainer),F(e,this.startContainer))throw new k("HIERARCHY_REQUEST_ERR");var t=a(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){w(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&L(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var r=new g(this,(!0));return e=c(r),r.detach(),e},canSurroundContents:function(){w(this),N(this.startContainer),N(this.endContainer);var e=new g(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(R(e,ee),!this.canSurroundContents())throw new k("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);a(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){w(this);for(var e,t=new I(n(this)),r=ce.length;r--;)e=ce[r],t[e]=this[e];return t},toString:function(){w(this);var e=this.startContainer;if(e===this.endContainer&&L(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new g(this,(!0));return d(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){w(this);var t=e.parentNode,n=W(e);if(!t)throw new k("NOT_FOUND_ERR");var r=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return 0>r?o>0?pe:he:o>0?ge:me},comparePoint:function(e,t){return w(this),E(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),z(e,t,this.startContainer,this.startOffset)<0?-1:z(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:se,toHtml:function(){return O(this)},intersectsNode:function(e,t){if(w(this),Q(e)!=r(this))return!1;var n=e.parentNode,o=W(e);if(!n)return!0;var i=z(n,o,this.endContainer,this.endOffset),a=z(n,o+1,this.startContainer,this.startOffset);return t?0>=i&&a>=0:0>i&&a>0},isPointInRange:function(e,t){return w(this),E(e,"HIERARCHY_REQUEST_ERR"),C(e,this.startContainer),z(e,t,this.startContainer,this.startOffset)>=0&&z(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return s(this,e,!1)},intersectsOrTouchesRange:function(e){return s(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=z(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=z(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==z(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==z(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new k("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,q(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return w(this),l(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=n(this),o=e.createRange(r);t=t||B.getBody(r),o.selectNodeContents(t);var i=this.intersection(o),a=0,s=0;return i&&(o.setEnd(i.startContainer,i.startOffset),a=o.toString().length,s=a+i.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,o,i,a,s=[t],c=!1,d=!1;!d&&(r=s.pop());)if(3==r.nodeType)o=n+r.length,!c&&e.start>=n&&e.start<=o&&(this.setStart(r,e.start-n),c=!0),c&&e.end>=n&&e.end<=o&&(this.setEnd(r,e.end-n),d=!0),n=o;else for(a=r.childNodes,i=a.length;i--;)s.push(a[i])},getName:function(){return"DomRange"},equals:function(e){return I.rangesEqual(this,e)},isValid:function(){return y(this)},inspect:function(){return h(this)},detach:function(){}}),x(I,P),H.extend(I,{rangeProperties:ce,RangeIterator:g,copyComparisonConstants:D,createPrototypeRange:x,inspect:h,toHtml:O,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=I}),I.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,o=e.dom,i=e.util,a=o.DomPosition,s=e.DomRange,c=o.getBody,d=o.getContentDocument,f=o.isCharacterDataNode;if(e.features.implementsDomRange&&!function(){function r(e){for(var t,n=l.length;n--;)t=l[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function a(e,t,n,r,o){var i=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=o,s=!e.equals(e.nativeRange);(i||a||s)&&(e.setEnd(r,o),e.setStart(t,n))}var f,u,l=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},s.createPrototypeRange(n,a),f=n.prototype,f.selectNode=function(e){this.nativeRange.selectNode(e),r(this)},f.cloneContents=function(){return this.nativeRange.cloneContents()},f.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},f.collapse=function(e){this.nativeRange.collapse(e),r(this)},f.cloneRange=function(){return new n(this.nativeRange.cloneRange())},f.refresh=function(){r(this)},f.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");c(document).appendChild(h);var g=document.createRange();g.setStart(h,0),g.setEnd(h,0);try{g.setStart(h,1),f.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},f.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},u=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(p){f.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},f.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},u=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}f.setStartBefore=u("setStartBefore","setEndBefore"),f.setStartAfter=u("setStartAfter","setEndAfter"),f.setEndBefore=u("setEndBefore","setStartBefore"),f.setEndAfter=u("setEndAfter","setStartAfter"),f.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},g.selectNodeContents(h),g.setEnd(h,3);var m=document.createRange();m.selectNodeContents(h),m.setEnd(h,4),m.setStart(h,2),f.compareBoundaryPoints=-1==g.compareBoundaryPoints(g.START_TO_END,m)&&1==g.compareBoundaryPoints(g.END_TO_START,m)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var R=document.createElement("div");R.innerHTML="123";var v=R.firstChild,C=c(document);C.appendChild(R),g.setStart(v,1),g.setEnd(v,2),g.deleteContents(),"13"==v.data&&(f.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},f.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),C.removeChild(R),C=null,i.isHostMethod(g,"createContextualFragment")&&(f.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(h),f.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange){var u=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();n=e.duplicate(),n.collapse(!1);var i=n.parentElement(),a=r==i?r:o.getCommonAncestor(r,i);return a==t?a:o.getCommonAncestor(t,a)},l=function(e){return 0==e.compareEndPoints("StartToEnd",e)},h=function(e,t,n,r,i){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(o.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var d=new a(c.parentNode,o.getNodeIndex(c));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=o.getDocument(c).createElement("span");u.parentNode&&o.removeNode(u);for(var l,h,g,p,m,R=n?"StartToStart":"StartToEnd",v=i&&i.containerElement==c?i.nodeIndex:0,C=c.childNodes.length,N=C,E=N;E==C?c.appendChild(u):c.insertBefore(u,c.childNodes[E]),s.moveToElementText(u),l=s.compareEndPoints(R,e),0!=l&&v!=N;){if(-1==l){if(N==v+1)break;v=E}else N=N==v+1?v:E;E=Math.floor((v+N)/2),c.removeChild(u)}if(m=u.nextSibling,-1==l&&m&&f(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var S;if(/[\r\n]/.test(m.data)){var y=s.duplicate(),w=y.text.replace(/\r\n/g,"\r").length;for(S=y.moveStart("character",w);-1==(l=y.compareEndPoints("StartToEnd",y));)S++,y.moveStart("character",1)}else S=s.text.length;p=new a(m,S)}else h=(r||!n)&&u.previousSibling,g=(r||n)&&u.nextSibling,p=g&&f(g)?new a(g,0):h&&f(h)?new a(h,h.data.length):new a(c,o.getNodeIndex(u));return o.removeNode(u),{boundaryPosition:p,nodeInfo:{nodeIndex:E,containerElement:c}}},g=function(e,t){var n,r,i,a,s=e.offset,d=o.getDocument(e.node),u=c(d).createTextRange(),l=f(e.node);return l?(n=e.node,r=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,r=e.node),i=d.createElement("span"),i.innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),u.moveToElementText(i),u.collapse(!t),r.removeChild(i),l&&u[t?"moveStart":"moveEnd"]("character",s),u};r=function(e){this.textRange=e,this.refresh()},r.prototype=new s(document),r.prototype.refresh=function(){
var e,t,n,r=u(this.textRange);l(this.textRange)?t=e=h(this.textRange,r,!0,!0).boundaryPosition:(n=h(this.textRange,r,!0,!1),e=n.boundaryPosition,t=h(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var p=function(e){if(e.collapsed)return g(new a(e.startContainer,e.startOffset),!0);var t=g(new a(e.startContainer,e.startOffset),!0),n=g(new a(e.endContainer,e.endOffset),!1),r=c(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=p,r.prototype.toTextRange=function(){return p(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var m=function(e){return e("return this;")()}(Function);"undefined"==typeof m.Range&&(m.Range=r),e.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),c(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=d(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=d(e,t,"createRangyRange"),new s(e)},i.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),i.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),I.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(D.isWindow(e))return e;if(e instanceof R)return e.win;var r=D.getContentDocument(e,t,n);return D.getWindow(r)}return window}function o(e){return r(e,"getWinSelection").getSelection()}function i(e){return r(e,"getDocSelection").document.selection}function a(e){var t=!1;return e.anchorNode&&(t=1==D.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",o=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function c(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function d(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function f(t){var n;return t instanceof b?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof P?n=t.nativeRange:H.implementsDomRange&&t instanceof D.getWindow(t.startContainer).Range&&(n=t),n}function u(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!D.isAncestorOf(e[0],e[t]))return!1;return!0}function l(e){var n=e.getNodes();if(!u(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function h(e){return!!e&&"undefined"!=typeof e.text}function g(e,t){var n=new P(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function p(t){if(t._ranges.length=0,"None"==t.docSelection.type)d(t);else{var n=t.docSelection.createRange();if(h(n))g(t,n);else{t.rangeCount=n.length;for(var r,o=k(n.item(0)),i=0;i<t.rangeCount;++i)r=e.createRange(o),r.selectNode(n.item(i)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,n){for(var r=e.docSelection.createRange(),o=l(n),i=k(r.item(0)),a=L(i).createControlRange(),s=0,c=r.length;c>s;++s)a.add(r.item(s));try{a.add(o)}catch(d){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),p(e)}function R(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function C(e,t){for(var n,r,o=te.length;o--;)if(n=te[o],r=n.selection,"deleteAll"==t)v(r);else if(n.win==e)return"delete"==t?(te.splice(o,1),!0):r;return"deleteAll"==t&&(te.length=0),null}function N(e,n){for(var r,o=k(n[0].startContainer),i=L(o).createControlRange(),a=0,s=n.length;s>a;++a){r=l(n[a]);try{i.add(r)}catch(c){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),p(e)}function E(e,t){if(e.win.document!=k(t))throw new I("WRONG_DOCUMENT_ERR")}function S(t){return function(n,r){var o;this.rangeCount?(o=this.getRangeAt(0),o["set"+(t?"Start":"End")](n,r)):(o=e.createRange(this.win.document),o.setStartAndEnd(n,r)),this.setSingleRange(o,this.isBackward())}}function y(e){var t=[],n=new B(e.anchorNode,e.anchorOffset),r=new B(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var i=0,a=e.rangeCount;a>i;++i)t[i]=b.inspect(e.getRangeAt(i));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.config.checkSelectionRanges=!0;var w,T,O="boolean",_="number",D=e.dom,A=e.util,x=A.isHostMethod,b=e.DomRange,P=e.WrappedRange,I=e.DOMException,B=D.DomPosition,H=e.features,M="Control",k=D.getDocument,L=D.getBody,W=b.rangesEqual,F=x(window,"getSelection"),j=A.isHostObject(document,"selection");H.implementsWinGetSelection=F,H.implementsDocSelection=j;var z=j&&(!F||e.config.preferTextRange);if(z)w=i,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||k(n.createRange().parentElement())==t};else{if(!F)return t.fail("Neither document.selection or window.getSelection() detected."),!1;w=o,e.isSelectionValid=function(){return!0}}e.getNativeSelection=w;var U=w();if(!U)return t.fail("Native selection was null (possibly issue 138?)"),!1;var V=e.createNativeRange(document),q=L(document),Y=A.areHostProperties(U,["anchorNode","focusNode","anchorOffset","focusOffset"]);H.selectionHasAnchorAndFocus=Y;var Q=x(U,"extend");H.selectionHasExtend=Q;var G=typeof U.rangeCount==_;H.selectionHasRangeCount=G;var X=!1,Z=!0,$=Q?function(t,n){var r=b.getRangeDocument(n),o=e.createRange(r);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(f(o)),t.extend(n.startContainer,n.startOffset)}:null;A.areHostMethods(U,["addRange","getRangeAt","removeAllRanges"])&&typeof U.rangeCount==_&&H.implementsDomRange&&!function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,o=[],i=a(t),s=0;n>s;++s)o[s]=t.getRangeAt(s);var c=D.createTestElement(document,"",!1),d=c.appendChild(document.createTextNode("")),f=document.createRange();if(f.setStart(d,1),f.collapse(!0),t.removeAllRanges(),t.addRange(f),Z=1==t.rangeCount,t.removeAllRanges(),!r){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)X=!1;else{var l=f.cloneRange();f.setStart(d,0),l.setEnd(d,3),l.setStart(d,2),t.addRange(f),t.addRange(l),X=2==t.rangeCount}}for(D.removeNode(c),t.removeAllRanges(),s=0;n>s;++s)0==s&&i?$?$(t,o[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[s])):t.addRange(o[s])}}(),H.selectionSupportsMultipleRanges=X,H.collapsedNonEditableSelectionsSupported=Z;var J,K=!1;q&&x(q,"createControlRange")&&(J=q.createControlRange(),A.areHostProperties(J,["item","add"])&&(K=!0)),H.implementsControlRange=K,T=Y?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var ee;x(U,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:Y&&(ee=function(t){var n=k(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),R.prototype=e.selectionPrototype;var te=[],ne=function(e){if(e&&e instanceof R)return e.refresh(),e;e=r(e,"getNativeSelection");var t=C(e),n=w(e),o=j?i(e):null;return t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new R(n,o,e),te.push({win:e,selection:t})),t};e.getSelection=ne,A.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var re=R.prototype;if(!z&&Y&&A.areHostMethods(U,["removeAllRanges","addRange"])){re.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),d(this)};var oe=function(e,t){$(e.nativeSelection,t),e.refresh()};re.addRange=G?function(t,r){if(K&&j&&this.docSelection.type==M)m(this,t);else if(n(r)&&Q)oe(this,t);else{var o;X?o=this.rangeCount:(this.removeAllRanges(),o=0);var i=f(t).cloneRange();try{this.nativeSelection.addRange(i)}catch(a){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var c=ee(this.nativeSelection,this.rangeCount-1);c&&!W(c,t)&&(t=new P(c))}this._ranges[this.rangeCount-1]=t,s(this,t,se(this.nativeSelection)),this.isCollapsed=T(this)}else this.refresh()}}:function(e,t){n(t)&&Q?oe(this,e):(this.nativeSelection.addRange(f(e)),this.refresh())},re.setRanges=function(e){if(K&&j&&e.length>1)N(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(x(U,"empty")&&x(V,"select")&&K&&z))return t.fail("No means of selecting a Range or TextRange was found"),!1;re.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=k(this.anchorNode);else if(this.docSelection.type==M){var t=this.docSelection.createRange();t.length&&(e=k(t.item(0)))}if(e){var n=L(e).createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}d(this)},re.addRange=function(t){this.docSelection.type==M?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},re.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?N(this,e):t&&this.addRange(e[0])}}re.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new I("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var ie;if(z)ie=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=L(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==M?p(t):h(n)?g(t,n):d(t)};else if(x(U,"getRangeAt")&&typeof U.rangeCount==_)ie=function(t){if(K&&j&&t.docSelection.type==M)p(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;r>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],se(t.nativeSelection)),t.isCollapsed=T(t)}else d(t)};else{if(!Y||typeof U.isCollapsed!=O||typeof V.collapsed!=O||!H.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ie=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,c(e),e.isCollapsed=T(e)):d(e)}}re.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(ie(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;o--;)if(!W(t[o],this._ranges[o]))return!0;return!1}};var ae=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;o>r;++r)W(t,n[r])||e.addRange(n[r]);e.rangeCount||d(e)};re.removeRange=K&&j?function(e){if(this.docSelection.type==M){for(var t,n=this.docSelection.createRange(),r=l(e),o=k(n.item(0)),i=L(o).createControlRange(),a=!1,s=0,c=n.length;c>s;++s)t=n.item(s),t!==r||a?i.add(n.item(s)):a=!0;i.select(),p(this)}else ae(this,e)}:function(e){ae(this,e)};var se;!z&&Y&&H.implementsDomRange?(se=a,re.isBackward=function(){return se(this)}):se=re.isBackward=function(){return!1},re.isBackwards=re.isBackward,re.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},re.collapse=function(t,n){E(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},re.collapseToStart=function(){if(!this.rangeCount)throw new I("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},re.collapseToEnd=function(){if(!this.rangeCount)throw new I("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},re.selectAllChildren=function(t){E(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},re.deleteFromDocument=function(){if(K&&j&&this.docSelection.type==M){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),D.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,o=n.length;o>r;++r)n[r].deleteContents();this.addRange(n[o-1])}}},re.eachRange=function(e,t){for(var n=0,r=this._ranges.length;r>n;++n)if(e(this.getRangeAt(n)))return t},re.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},re.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},re.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},re.setStart=S(!0),re.setEnd=S(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},re.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},re.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},re.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},re.moveToBookmark=function(t){for(var n,r,o=[],i=0;n=t.rangeBookmarks[i++];)r=e.createRange(this.win),r.moveToBookmark(n),o.push(r);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},re.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},re.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},re.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(b.toHtml(t))}),e.join("")},H.implementsTextRange&&(re.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(h(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),re.getName=function(){return"WrappedSelection"},re.inspect=function(){return y(this)},re.detach=function(){C(this.win,"delete"),v(this)},R.detachAll=function(){C(null,"deleteAll")},R.inspect=y,R.isDirectionBackward=n,e.Selection=R,e.selectionPrototype=re,e.addShimListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})});var L=!1,W=function(){L||(L=!0,!I.initialized&&I.config.autoInitialize&&u())};return b&&("complete"==document.readyState?W():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",W,!1),H(window,"load",W))),I},this);
/**
 * Class Applier module for Rangy.
 * Adds, removes and toggles classes on Ranges and Selections
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(e,t){function n(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)return!1;return!0}function s(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function o(e,t){if("object"==typeof e.classList)return e.classList.contains(t);var n="string"==typeof e.className,s=n?e.className:e.getAttribute("class");return r(s,t)}function a(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,s=n?e.className:e.getAttribute("class");s?r(s,t)||(s+=" "+t):s=t,n?e.className=s:e.setAttribute("class",s)}}function l(e){var t="string"==typeof e.className;return t?e.className:e.getAttribute("class")}function u(e){return e&&e.split(/\s+/).sort().join(" ")}function f(e){return u(l(e))}function c(e,t){return f(e)==f(t)}function p(e,t){for(var n=t.split(/\s+/),r=0,i=n.length;i>r;++r)if(!o(e,s(n[r])))return!1;return!0}function d(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function h(e,t,n,s,r){var i=e.node,o=e.offset,a=i,l=o;i==s&&o>r&&++l,i!=t||o!=n&&o!=n+1||(a=s,l+=r-n),i==t&&o>n+1&&--l,e.node=a,e.offset=l}function m(e,t,n){e.node==t&&e.offset>n&&--e.offset}function g(e,t,n,s){-1==n&&(n=t.childNodes.length);var r=e.parentNode,i=$.getNodeIndex(e);U(s,function(e){h(e,r,i,t,n)}),t.childNodes.length==n?t.appendChild(e):t.insertBefore(e,t.childNodes[n])}function N(e,t){var n=e.parentNode,s=$.getNodeIndex(e);U(t,function(e){m(e,n,s)}),$.removeNode(e)}function v(e,t,n,s,r){for(var i,o=[];i=e.firstChild;)g(i,t,n++,r),o.push(i);return s&&N(e,r),o}function y(e,t){return v(e,e.parentNode,$.getNodeIndex(e),!0,t)}function C(e,t){var n=e.cloneRange();n.selectNodeContents(t);var s=n.intersection(e),r=s?s.toString():"";return""!=r}function T(e){for(var t,n=e.getNodes([3]),s=0;(t=n[s])&&!C(e,t);)++s;for(var r=n.length-1;(t=n[r])&&!C(e,t);)--r;return n.slice(s,r+1)}function E(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,s,r,i=0,o=e.attributes.length;o>i;++i)if(n=e.attributes[i],r=n.name,"class"!=r){if(s=t.attributes.getNamedItem(r),null===n!=(null===s))return!1;if(n.specified!=s.specified)return!1;if(n.specified&&n.nodeValue!==s.nodeValue)return!1}return!0}function b(e,t){for(var n,s=0,r=e.attributes.length;r>s;++s)if(n=e.attributes[s].name,(!t||!B(t,n))&&e.attributes[s].specified&&"class"!=n)return!0;return!1}function A(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||G(e)&&!G(e.parentNode))}function S(e){return(G(e)||1!=e.nodeType&&G(e.parentNode))&&!A(e)}function x(e){return e&&1==e.nodeType&&!J.test(F(e,"display"))}function R(e){if(0==e.data.length)return!0;if(K.test(e.data))return!1;var t=F(e.parentNode,"whiteSpace");switch(t){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return x(e.previousSibling)||x(e.nextSibling)}function P(e){var t,n,s=[];for(t=0;n=e[t++];)s.push(new z(n.startContainer,n.startOffset),new z(n.endContainer,n.endOffset));return s}function w(e,t){for(var n,s,r,i=0,o=e.length;o>i;++i)n=e[i],s=t[2*i],r=t[2*i+1],n.setStartAndEnd(s.node,s.offset,r.node,r.offset)}function O(e,t){return $.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}function I(e,n,s,r){var i,o,a=0==s;if($.isAncestorOf(n,e))return e;if($.isCharacterDataNode(n)){var l=$.getNodeIndex(n);if(0==s)s=l;else{if(s!=n.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+s+" in "+n.data);s=l+1}n=n.parentNode}if(O(n,s)){i=n.cloneNode(!1),o=n.parentNode,i.id&&i.removeAttribute("id");for(var u,f=0;u=n.childNodes[s];)g(u,i,f++,r);return g(i,o,$.getNodeIndex(n)+1,r),n==e?i:I(e,o,$.getNodeIndex(i),r)}if(e!=n){i=n.parentNode;var c=$.getNodeIndex(n);return a||c++,I(e,i,c,r)}return e}function W(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&c(e,t)&&E(e,t)&&"inline"==F(e,"display")&&"inline"==F(t,"display")}function L(e){var t=e?"nextSibling":"previousSibling";return function(n,s){var r=n.parentNode,i=n[t];if(i){if(i&&3==i.nodeType)return i}else if(s&&(i=r[t],i&&1==i.nodeType&&W(r,i))){var o=i[e?"firstChild":"lastChild"];if(o&&3==o.nodeType)return o}return null}}function M(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}function H(e,t,r){var i,o,a,l,f=this;f.cssClass=f.className=e;var c=null,p={};if("object"==typeof t&&null!==t){for("undefined"!=typeof t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),r=t.tagNames,c=t.elementProperties,p=t.elementAttributes,o=0;l=Y[o++];)t.hasOwnProperty(l)&&(f[l]=t[l]);i=t.normalize}else i=t;f.normalize="undefined"==typeof i||i,f.attrExceptions=[];var d=document.createElement(f.elementTagName);f.elementProperties=f.copyPropertiesToElement(c,d,!0),n(p,function(e,t){f.attrExceptions.push(e),p[e]=""+t}),f.elementAttributes=p,f.elementSortedClassName=f.elementProperties.hasOwnProperty("className")?u(f.elementProperties.className+" "+e):e,f.applyToAnyTagName=!1;var h=typeof r;if("string"==h)"*"==r?f.applyToAnyTagName=!0:f.tagNames=s(r.toLowerCase()).split(/\s*,\s*/);else if("object"==h&&"number"==typeof r.length)for(f.tagNames=[],o=0,a=r.length;a>o;++o)"*"==r[o]?f.applyToAnyTagName=!0:f.tagNames.push(r[o].toLowerCase());else f.tagNames=[f.elementTagName]}function j(e,t,n){return new H(e,t,n)}var $=e.dom,z=$.DomPosition,B=$.arrayContains,D=e.util,U=D.forEach,V="span",k=D.isHostMethod(document,"createElementNS"),q=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var s="string"==typeof t.className,r=s?t.className:t.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),s?t.className=r:t.setAttribute("class",r)}}}(),F=$.getComputedStyleProperty,G=function(){var e=document.createElement("div");return"boolean"==typeof e.isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||G(e.parentNode))}}(),J=/^inline(-block|-table)?$/i,K=/[^\r\n\t\f \u200B]/,Q=L(!1),X=L(!0);M.prototype={doMerge:function(e){var t=this.textNodes,n=t[0];if(t.length>1){var s,r=$.getNodeIndex(n),i=[],o=0;U(t,function(t,a){s=t.parentNode,a>0&&(s.removeChild(t),s.hasChildNodes()||$.removeNode(s),e&&U(e,function(e){e.node==t&&(e.node=n,e.offset+=o),e.node==s&&e.offset>r&&(--e.offset,e.offset==r+1&&len-1>a&&(e.node=n,e.offset=o))})),i[a]=t.data,o+=t.data.length}),n.data=i.join("")}return n.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return U(this.textNodes,function(t,n){e[n]="'"+t.data+"'"}),"[Merge("+e.join(",")+")]"}};var Y=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],Z={};H.prototype={elementTagName:V,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var s,r,i,o,l,f,c={};for(var p in e)if(e.hasOwnProperty(p))if(o=e[p],l=t[p],"className"==p)a(t,o),a(t,this.className),t[p]=u(t[p]),n&&(c[p]=o);else if("style"==p){r=l,n&&(c[p]=i={});for(s in e[p])e[p].hasOwnProperty(s)&&(r[s]=o[s],n&&(i[s]=r[s]));this.attrExceptions.push(p)}else t[p]=o,n&&(c[p]=t[p],f=Z.hasOwnProperty(p)?Z[p]:p,this.attrExceptions.push(f));return n?c:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return B(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&o(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||S(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&R(e)},postApply:function(e,t,n,s){var r,o,a=e[0],l=e[e.length-1],u=[],f=a,c=l,p=0,d=l.length;U(e,function(e){o=Q(e,!s),o?(r||(r=new M(o),u.push(r)),r.textNodes.push(e),e===a&&(f=r.textNodes[0],p=f.length),e===l&&(c=r.textNodes[0],d=r.getLength())):r=null});var h=X(l,!s);if(h&&(r||(r=new M(l),u.push(r)),r.textNodes.push(h)),u.length){for(i=0,len=u.length;len>i;++i)u[i].doMerge(n);t.setStartAndEnd(f,p,c,d)}},createContainer:function(e){var t,n=$.getDocument(e),s=k&&!$.isHtmlNamespace(e)&&(t=e.namespaceURI)?n.createElementNS(e.namespaceURI,this.elementTagName):n.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,s,!1),this.copyAttributesToElement(this.elementAttributes,s),a(s,this.className),this.onElementCreate&&this.onElementCreate(s,this),s},elementHasProperties:function(e,t){var s=this;return n(t,function(t,n){if("className"==t)return p(e,n);if("object"==typeof n){if(!s.elementHasProperties(e[t],n))return!1}else if(e[t]!==n)return!1})},elementHasAttributes:function(e,t){return n(t,function(t,n){return e.getAttribute(t)===n&&void 0})},applyToTextNode:function(e){if(d(e)){var t=e.parentNode;if(1==t.childNodes.length&&this.useExistingElements&&this.appliesToElement(t)&&this.elementHasProperties(t,this.elementProperties)&&this.elementHasAttributes(t,this.elementAttributes))a(t,this.className);else{var n=e.parentNode,s=this.createContainer(n);n.insertBefore(s,e),s.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&f(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!b(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),s=[e],r=P(s);U(n,function(e){N(e,r)}),w(s,r)},undoToTextNode:function(e,t,n,s){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n),r.isPointInRange(t.endContainer,t.endOffset)&&(I(n,t.endContainer,t.endOffset,s),t.setEndAfter(n)),r.isPointInRange(t.startContainer,t.startOffset)&&(n=I(n,t.startContainer,t.startOffset,s))}this.isRemovable(n)?y(n,s):q(n,this.className)},splitAncestorWithClass:function(e,t,n){var s=this.getSelfOrAncestorWithClass(e);s&&I(s,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?y(e,t):q(e,this.className)},applyToRange:function(e,t){var n=this;t=t||[];var s=P(t||[]);e.splitBoundariesPreservingPositions(s),n.removeEmptyElements&&n.removeEmptyContainers(e);var r=T(e);if(r.length){U(r,function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,s)});var i=r[r.length-1];e.setStartAndEnd(r[0],0,i,i.length),n.normalize&&n.postApply(r,e,s,!1),w(t,s)}var o=n.getEmptyElements(e);U(o,function(e){a(e,n.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var n=e.getSelection(t);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(e,t){var n=this;t=t||[];var s=P(t);e.splitBoundariesPreservingPositions(s),n.removeEmptyElements&&n.removeEmptyContainers(e,s);var r,i,o=T(e),a=o[o.length-1];if(o.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,s),n.splitAncestorWithClass(e.startContainer,e.startOffset,s);for(var l=0,u=o.length;u>l;++l)r=o[l],i=n.getSelfOrAncestorWithClass(r),i&&n.isModifiable(r)&&n.undoToAncestor(i,s);e.setStartAndEnd(o[0],0,a,a.length),n.normalize&&n.postApply(o,e,s,!0),w(t,s)}var f=n.getEmptyElements(e);U(f,function(e){q(e,n.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var n=e.getSelection(t),s=e.getSelection(t).getAllRanges();this.undoToRanges(s),n.setRanges(s)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,s=0;n=t[s++];)if(!this.isIgnorableWhiteSpaceNode(n)&&C(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var n=e.getSelection(t);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],function(e){var s=n.getSelfOrAncestorWithClass(e);s&&!B(t,s)&&t.push(s)}),t},detach:function(){}},H.util={hasClass:o,addClass:a,removeClass:q,getClass:l,hasSameClasses:c,hasAllClasses:p,replaceWithOwnChildren:y,elementsHaveSameNonClassAttributes:E,elementHasNonClassAttributes:b,splitNodeAt:I,isEditableElement:G,isEditingHost:A,isEditable:S},e.CssClassApplier=e.ClassApplier=H,e.createClassApplier=j,D.createAliasForDeprecatedMethod(e,"createCssClassApplier","createClassApplier",t)}),e},this);
/**
 * Selection save and restore module for Rangy.
 * Saves and restores user selections using marker invisible elements in the DOM.
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,n){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(n.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,n){function r(e,n){return(n||document).getElementById(e)}function t(e,n){var r,t="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),a=m.getDocument(e.startContainer),o=e.cloneRange();return o.collapse(n),r=a.createElement("span"),r.id=t,r.style.lineHeight="0",r.style.display="none",r.className="rangySelectionBoundary",r.appendChild(a.createTextNode(k)),o.insertNode(r),r}function a(e,t,a,o){var s=r(a,e);s?(t[o?"setStartBefore":"setEndBefore"](s),p(s)):n.warn("Marker element has been removed. Cannot restore selection.")}function o(e,n){return n.compareBoundaryPoints(e.START_TO_START,e)}function s(n,r){var a,o,s=e.DomRange.getRangeDocument(n),i=n.toString(),d=v(r);return n.collapsed?(o=t(n,!1),{document:s,markerId:o.id,collapsed:!0}):(o=t(n,!1),a=t(n,!0),{document:s,startMarkerId:a.id,endMarkerId:o.id,collapsed:!1,backward:d,toString:function(){return"original text: '"+i+"', new text: '"+n.toString()+"'"}})}function i(t,o){var s=t.document;"undefined"==typeof o&&(o=!0);var i=e.createRange(s);if(t.collapsed){var d=r(t.markerId,s);if(d){d.style.display="inline";var l=d.previousSibling;l&&3==l.nodeType?(p(d),i.collapseToPoint(l,l.length)):(i.collapseBefore(d),p(d))}else n.warn("Marker element has been removed. Cannot restore selection.")}else a(s,i,t.startMarkerId,!0),a(s,i,t.endMarkerId,!1);return o&&i.normalizeBoundaries(),i}function d(n,t){var a,i,d=[],l=v(t);n=n.slice(0),n.sort(o);for(var c=0,u=n.length;u>c;++c)d[c]=s(n[c],l);for(c=u-1;c>=0;--c)a=n[c],i=e.DomRange.getRangeDocument(a),a.collapsed?a.collapseAfter(r(d[c].markerId,i)):(a.setEndBefore(r(d[c].endMarkerId,i)),a.setStartAfter(r(d[c].startMarkerId,i)));return d}function l(r){if(!e.isSelectionValid(r))return n.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var t=e.getSelection(r),a=t.getAllRanges(),o=1==a.length&&t.isBackward(),s=d(a,o);return o?t.setSingleRange(a[0],o):t.setRanges(a),{win:r,rangeInfos:s,restored:!1}}function c(e){for(var n=[],r=e.length,t=r-1;t>=0;t--)n[t]=i(e[t],!0);return n}function u(n,r){if(!n.restored){var t=n.rangeInfos,a=e.getSelection(n.win),o=c(t),s=t.length;1==s&&r&&e.features.selectionHasExtend&&t[0].backward?(a.removeAllRanges(),a.addRange(o[0],!0)):a.setRanges(o),n.restored=!0}}function f(e,n){var t=r(n,e);t&&p(t)}function g(e){for(var n,r=e.rangeInfos,t=0,a=r.length;a>t;++t)n=r[t],n.collapsed?f(e.doc,n.markerId):(f(e.doc,n.startMarkerId),f(e.doc,n.endMarkerId))}var m=e.dom,p=m.removeNode,v=e.Selection.isDirectionBackward,k="\ufeff";e.util.extend(e,{saveRange:s,restoreRange:i,saveRanges:d,restoreRanges:c,saveSelection:l,restoreSelection:u,removeMarkerElement:f,removeMarkers:g})}),e},this);
/**
 * Text range module for Rangy.
 * Text-based manipulation and searching of ranges and selections.
 *
 * Features
 *
 * - Ability to move range boundaries by character or word offsets
 * - Customizable word tokenizer
 * - Ignores text nodes inside <script> or <style> elements or those hidden by CSS display and visibility properties
 * - Range findText method to search for text or regex within the page or within a range. Flags for whole words and case
 *   sensitivity
 * - Selection and range save/restore as text offsets within a node
 * - Methods to return visible text within a range or selection
 * - innerText method for elements
 *
 * References
 *
 * https://www.w3.org/Bugs/Public/show_bug.cgi?id=13145
 * http://aryeh.name/spec/innertext/innertext.html
 * http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html
 *
 * Part of Rangy, a cross-browser JavaScript range and selection library
 * https://github.com/timdown/rangy
 *
 * Depends on Rangy core.
 *
 * Copyright 2015, Tim Down
 * Licensed under the MIT license.
 * Version: 1.3.0
 * Build date: 10 May 2015
 */
!function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("TextRange",["WrappedSelection"],function(e,t){function n(e,t){function n(e,t,n){s.push({start:e,end:t,isWord:n})}for(var r,i,o,a=e.join(""),s=[],c=0;r=t.wordRegex.exec(a);){if(i=r.index,o=i+r[0].length,i>c&&n(c,i,!1),t.includeTrailingSpace)for(;X.test(e[o]);)++o;n(i,o,!0),c=o}return c<e.length&&n(c,e.length,!1),s}function r(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,o=n.length;o>i;++i)n[i].token=r;return r}function i(e,t,n){for(var i,o=n(e,t),a=[],s=0;i=o[s++];)a.push(r(e,i));return a}function o(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),n.join("").replace(/(.)\1+/g,"$1")}function a(e){var t,n;return e?(t=e.language||Z,n={},K(n,ce[t]||ce[Z]),K(n,e),n):ce[Z]}function s(e,t){var n=z(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=a(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=z(n.characterOptions,ae)),n}function c(e,t){var n=pe(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&oe&&fe.hasOwnProperty(r)?fe[r]:n}function u(e){for(var t=f(e),n=0,r=t.length;r>n;++n)if(1==t[n].nodeType&&"none"==c(t[n]))return!0;return!1}function d(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==pe(t,"visibility")}function l(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(c(e))||9==e.nodeType||11==e.nodeType)}function h(e){return U.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}function p(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function f(e){return p(e).concat([e])}function g(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}function v(e,t){return!t&&e.hasChildNodes()?e.firstChild:g(e)}function S(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function C(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=pe(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function N(e){if(""===e.data)return!0;if(!C(e))return!1;var t=e.parentNode;return!t||!!u(e)}function y(e){var t=e.nodeType;return 7==t||8==t||u(e)||/^(script|style)$/i.test(e.nodeName)||d(e)||N(e)}function m(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==c(e,t)}function x(){this.store={}}function T(e,t,n){return function(r){var i=this.cache;if(i.hasOwnProperty(e))return ge++,i[e];ve++;var o=t.call(this,n?this[n]:this,r);return i[e]=o,o}}function P(e,t){this.node=e,this.session=t,this.cache=new x,this.positions=new x}function b(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new x}function w(){return"[Position("+U.inspectNode(this.node)+":"+this.offset+")]"}function R(){return B(),Be=new Oe}function E(){return Be||R()}function B(){Be&&Be.detach(),Be=null}function O(e,n,r,i){function o(){var e=null;return n?(e=s,c||(s=s.previousVisible(),c=!s||r&&s.equals(r))):c||(e=s=s.nextVisible(),c=!s||r&&s.equals(r)),c&&(s=null),e}r&&(n?y(r.node)&&(r=e.previousVisible()):y(r.node)&&(r=r.nextVisible()));var a,s=e,c=!1,u=!1;return{next:function(){if(u)return u=!1,a;for(var e,t;e=o();)if(t=e.getCharacter(i))return a=e,e;return null},rewind:function(){if(!a)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");u=!0},dispose:function(){e=r=null}}}function k(e,t,n){function r(e){for(var t,n,r=[],i=e?o:a,s=!1,c=!1;t=i.next();){if(n=t.character,Q.test(n))c&&(c=!1,s=!0);else{if(s){i.rewind();break}c=!0}r.push(t)}return r}var o=O(e,!1,null,t),a=O(e,!0,null,t),s=n.tokenizer,c=r(!0),u=r(!1).reverse(),d=i(u.concat(c),n,s),l=c.length?d.slice(ke(d,c[0].token)):[],h=u.length?d.slice(0,ke(d,u.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==l.length&&!(e=l[0]).isWord&&(t=r(!0)).length>0;)l=i(e.chars.concat(t),n,s);return l.shift()},previousStartToken:function(){for(var e,t;1==h.length&&!(e=h[0]).isWord&&(t=r(!1)).length>0;)h=i(t.reverse().concat(e.chars),n,s);return h.pop()},dispose:function(){o.dispose(),a.dispose(),l=h=null}}}function L(e,t,n,r,i){var o,a,s,c,u=0,d=e,l=Math.abs(n);if(0!==n){var h=0>n;switch(t){case M:for(a=O(e,h,null,r);(o=a.next())&&l>u;)++u,d=o;s=o,a.dispose();break;case j:for(var p=k(e,r,i),f=h?p.previousStartToken:p.nextEndToken;(c=f())&&l>u;)c.isWord&&(++u,d=h?c.chars[0]:c.chars[c.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}h?(d=d.previousVisible(),u=-u):d&&d.isLeadingSpace&&!d.isTrailingSpace&&(t==j&&(a=O(e,!1,null,r),s=a.next(),a.dispose()),s&&(d=s.previousVisible()))}return{position:d,unitsMoved:u}}function I(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),o=e.getRangeBoundaryPosition(t,!1),a=r?o:i,s=r?i:o;return O(a,!!r,s,n)}function A(e,t,n){for(var r,i=[],o=I(e,t,n);r=o.next();)i.push(r);return o.dispose(),i}function W(t,n,r){var i=e.createRange(t.node);return i.setStartAndEnd(t.node,t.offset,n.node,n.offset),!i.expand("word",{wordOptions:r})}function _(e,t,n,r,i){function o(e,t){var n=g[e].previousVisible(),r=g[t-1],o=!i.wholeWordsOnly||W(n,r,i.wordOptions);return{startPos:n,endPos:r,valid:o}}for(var a,s,c,u,d,l,h=ee(i.direction),p=O(e,h,e.session.getRangeBoundaryPosition(r,h),i.characterOptions),f="",g=[],v=null;a=p.next();)if(s=a.character,n||i.caseSensitive||(s=s.toLowerCase()),h?(g.unshift(a),f=s+f):(g.push(a),f+=s),n){if(d=t.exec(f))if(c=d.index,u=c+d[0].length,l){if(!h&&u<f.length||h&&c>0){v=o(c,u);break}}else l=!0}else if(-1!=(c=f.indexOf(t))){v=o(c,c+t.length);break}return l&&(v=o(c,u)),p.dispose(),v}function D(e){return function(){var t=!!Be,n=E(),r=[n].concat(G.toArray(arguments)),i=e.apply(this,r);return t||B(),i}}function F(e,t){return D(function(n,r,i,o){typeof i==q&&(i=r,r=M),o=s(o,de);var a=e;t&&(a=i>=0,this.collapse(!a));var c=L(n.getRangeBoundaryPosition(this,a),r,i,o.characterOptions,o.wordOptions),u=c.position;return this[a?"setStart":"setEnd"](u.node,u.offset),c.unitsMoved})}function V(e){return D(function(t,n){n=z(n,ae);for(var r,i=I(t,this,n,!e),o=0;(r=i.next())&&Q.test(r.character);)++o;i.dispose();var a=o>0;return a&&this[e?"moveStart":"moveEnd"]("character",e?o:-o,{characterOptions:n}),a})}function $(e){return D(function(t,n){var r=!1;return this.changeEachRange(function(t){r=t[e](n)||r}),r})}var q="undefined",M="character",j="word",U=e.dom,G=e.util,K=G.extend,z=G.createOptions,H=U.getBody,Y=/^[ \t\f\r\n]+$/,J=/^[ \t\f\r]+$/,Q=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,X=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,Z="en",ee=e.Selection.isDirectionBackward,te=!1,ne=!1,re=!1,ie=!0;!function(){var t=U.createTestElement(document,"<p>1 </p><p></p>",!0),n=t.firstChild,r=e.getSelection();r.collapse(n.lastChild,2),r.setStart(n.firstChild,0),te=1==(""+r).length,t.innerHTML="1 <br />",r.collapse(t,2),r.setStart(t.firstChild,0),ne=1==(""+r).length,t.innerHTML="1 <p>1</p>",r.collapse(t,2),r.setStart(t.firstChild,0),re=1==(""+r).length,U.removeNode(t),r.removeAllRanges()}();var oe,ae={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""},se={includeBlockContentTrailingSpace:!ie,includeSpaceBeforeBr:!ne,includeSpaceBeforeBlock:!re,includePreLineTrailingSpace:!0},ce={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:n}},ue={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},de={wordOptions:null,characterOptions:null},le={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},he={wordOptions:null,characterOptions:null,direction:"forward"},pe=U.getComputedStyleProperty;!function(){var e=document.createElement("table"),t=H(document);t.appendChild(e),oe="block"==pe(e,"display"),t.removeChild(e)}();var fe={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};x.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var ge=0,ve=0,Se={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new b(this,e))},toString:function(){return"[NodeWrapper("+U.inspectNode(this.node)+")]"}};P.prototype=Se;var Ce="EMPTY",Ne="NON_SPACE",ye="UNCOLLAPSIBLE_SPACE",me="COLLAPSIBLE_SPACE",xe="TRAILING_SPACE_BEFORE_BLOCK",Te="TRAILING_SPACE_IN_BLOCK",Pe="TRAILING_SPACE_BEFORE_BR",be="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",we="TRAILING_LINE_BREAK_AFTER_BR",Re="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";K(Se,{isCharacterDataNode:T("isCharacterDataNode",U.isCharacterDataNode,"node"),getNodeIndex:T("nodeIndex",U.getNodeIndex,"node"),getLength:T("nodeLength",U.getNodeLength,"node"),containsPositions:T("containsPositions",h,"node"),isWhitespace:T("isWhitespace",C,"node"),isCollapsedWhitespace:T("isCollapsedWhitespace",N,"node"),getComputedDisplay:T("computedDisplay",c,"node"),isCollapsed:T("collapsed",y,"node"),isIgnored:T("ignored",m,"node"),next:T("nextPos",v,"node"),previous:T("previous",S,"node"),getTextNodeInfo:T("textNodeInfo",function(e){var t=null,n=!1,r=pe(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=J,n=!0):("normal"==r||"nowrap"==r)&&(t=Y,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:T("hasInnerText",function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),o=t?r:i,a=t?i:r;o!==a;){if(o.prepopulateChar(),o.isDefinitelyNonEmpty())return!0;o=t?o.previousVisible():o.nextVisible()}return!1},"node"),isRenderedBlock:T("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;r>n;++n)if(!y(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:T("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!m(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:T("leadingSpace",function(){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var Ee={character:"",characterType:Ce,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",i=Ce,o=!1;if(n>0)if(3==t.nodeType){var a=t.data,s=a.charAt(n-1),c=e.nodeWrapper.getTextNodeInfo(),u=c.spaceRegex;c.collapseSpaces?u.test(s)?n>1&&u.test(a.charAt(n-2))||(c.preLine&&"\n"===a.charAt(n)?(r=" ",i=be):(r=" ",i=me)):(r=s,i=Ne,o=!0):(r=s,i=ye,o=!0)}else{var d=t.childNodes[n-1];if(d&&1==d.nodeType&&!y(d)&&("br"==d.tagName.toLowerCase()?(r="\n",e.isBr=!0,i=me,o=!1):e.checkForTrailingSpace=!0),!r){var l=t.childNodes[n];l&&1==l.nodeType&&!y(l)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=i,e.isCharInvariant=o}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==Ne||e==ye},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=me),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=me),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t,n=this;n=n.previousVisible();)if(t=n.getCharacter(e),""!==t)return n;return null},getCharacter:function(e){function t(){return p||(d=f.getPrecedingUncollapsedPosition(e),p=!0),d}this.resolveLeadingAndTrailingSpaces();var n,r=this.character,i=o(e.ignoreCharacters),a=""!==r&&i.indexOf(r)>-1;if(this.isCharInvariant)return n=a?"":r;var s=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,i].join("_"),c=this.cache.get(s);if(null!==c)return c;var u,d,l="",h=this.characterType==me,p=!1,f=this;return h&&(this.type==Re?l="\n":" "==r&&(!t()||d.isTrailingSpace||"\n"==d.character||" "==d.character&&d.characterType==me)||("\n"==r&&this.isLeadingSpace?t()&&"\n"!=d.character&&(l="\n"):(u=this.nextUncollapsed(),u&&(u.isBr?this.type=Pe:u.isTrailingSpace&&"\n"==u.character?this.type=Te:u.isLeadingSpace&&"\n"==u.character&&(this.type=xe),"\n"==u.character?(this.type!=Pe||e.includeSpaceBeforeBr)&&(this.type!=xe||e.includeSpaceBeforeBlock)&&(this.type==Te&&u.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=be||u.type!=Ne||e.includePreLineTrailingSpace)&&("\n"==r?u.isTrailingSpace?this.isTrailingSpace||this.isBr&&(u.type=we,t()&&d.isLeadingSpace&&!d.isTrailingSpace&&"\n"==d.character?u.character="":u.type=Re):l="\n":" "==r&&(l=" "))):l=r)))),i.indexOf(l)>-1&&(l=""),this.cache.set(s,l),l},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:w,toString:function(){return this.character}};b.prototype=Ee,K(Ee,{next:T("nextPos",function(e){var t=e.nodeWrapper,n=e.node,r=e.offset,i=t.session;if(!n)return null;var o,a,s;return r==t.getLength()?(o=n.parentNode,a=o?t.getNodeIndex()+1:0):t.isCharacterDataNode()?(o=n,a=r+1):(s=n.childNodes[r],i.getNodeWrapper(s).containsPositions()?(o=s,a=0):(o=n,a=r+1)),o?i.getPosition(o,a):null}),previous:T("previous",function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return 0==a?(t=o.parentNode,n=t?i.getNodeIndex():0):i.isCharacterDataNode()?(t=o,n=a-1):(r=o.childNodes[a-1],s.getNodeWrapper(r).containsPositions()?(t=r,n=U.getNodeLength(r)):(t=o,n=a-1)),t?s.getPosition(t,n):null}),nextVisible:T("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),i}),nextUncollapsed:T("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:T("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex())),i})});var Be=null,Oe=function(){function e(e){var t=new x;return{get:function(n){var r=t.get(n[e]);if(r)for(var i,o=0;i=r[o++];)if(i.node===n)return i;return null},set:function(n){var r=n.node[e],i=t.get(r)||t.set(r,[]);i.push(n)}}}function t(){this.initCaches()}var n=G.isHostProperty(document.documentElement,"uniqueID");return t.prototype={initCaches:function(){this.elementCache=n?function(){var e=new x;return{get:function(t){return e.get(t.uniqueID)},set:function(t){e.set(t.node.uniqueID,t)}}}():e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new P(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},t}();K(U,{nextNode:v,previousNode:S});var ke=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;++n)if(e[n]===t)return n;return-1};K(e.rangePrototype,{moveStart:F(!0,!1),moveEnd:F(!1,!1),move:F(!0,!0),trimStart:V(!0),trimEnd:V(!1),trim:D(function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r}),expand:D(function(e,t,n){var r=!1;n=s(n,le);var i=n.characterOptions;if(t||(t=M),t==j){var o,a,c=n.wordOptions,u=e.getRangeBoundaryPosition(this,!0),d=e.getRangeBoundaryPosition(this,!1),l=k(u,i,c),h=l.nextEndToken(),p=h.chars[0].previousVisible();if(this.collapsed)o=h;else{var f=k(d,i,c);o=f.previousStartToken()}return a=o.chars[o.chars.length-1],p.equals(u)||(this.setStart(p.node,p.offset),r=!0),a&&!a.equals(d)&&(this.setEnd(a.node,a.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(i)||r),n.trimEnd&&(r=this.trimEnd(i)||r)),r}return this.moveEnd(M,1,n)}),text:D(function(e,t){return this.collapsed?"":A(e,this,z(t,ae)).join("")}),selectCharacters:D(function(e,t,n,r,i){var o={characterOptions:i};t||(t=H(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,o),this.collapse(!0),this.moveEnd("character",r-n,o)}),toCharacterRange:D(function(e,t,n){t||(t=H(this.getDocument()));var r,i,o=t.parentNode,a=U.getNodeIndex(t),s=-1==U.comparePoints(this.startContainer,this.endContainer,o,a),c=this.cloneRange();return s?(c.setStartAndEnd(this.startContainer,this.startOffset,o,a),r=-c.text(n).length):(c.setStartAndEnd(o,a,this.startContainer,this.startOffset),r=c.text(n).length),i=r+this.text(n).length,{start:r,end:i}}),findText:D(function(t,n,r){r=s(r,ue),r.wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1);var i=ee(r.direction),o=r.withinRange;o||(o=e.createRange(),o.selectNodeContents(this.getDocument()));var a=n,c=!1;"string"==typeof a?r.caseSensitive||(a=a.toLowerCase()):c=!0;var u=t.getRangeBoundaryPosition(this,!i),d=o.comparePoint(u.node,u.offset);-1===d?u=t.getRangeBoundaryPosition(o,!0):1===d&&(u=t.getRangeBoundaryPosition(o,!1));for(var l,h=u,p=!1;;)if(l=_(h,a,c,o,r)){if(l.valid)return this.setStartAndEnd(l.startPos.node,l.startPos.offset,l.endPos.node,l.endPos.offset),!0;h=i?l.startPos:l.endPos}else{if(!r.wrap||p)return!1;o=o.cloneRange(),h=t.getRangeBoundaryPosition(o,!i),o.setBoundary(u.node,u.offset,i),p=!0}}),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),K(e.selectionPrototype,{expand:D(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:D(function(e,t,n,r){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var o=this.getRangeAt(0);r||(r={}),r.characterOptions=z(r.characterOptions,se),i=o.move(t,n,r),this.setSingleRange(o)}return i}),trimStart:$("trimStart"),trimEnd:$("trimEnd"),trim:$("trim"),selectCharacters:D(function(t,n,r,i,o,a){var s=e.createRange(n);s.selectCharacters(n,r,i,a),this.setSingleRange(s,o)}),saveCharacterRanges:D(function(e,t,n){for(var r=this.getAllRanges(),i=r.length,o=[],a=1==i&&this.isBackward(),s=0,c=r.length;c>s;++s)o[s]={characterRange:r[s].toCharacterRange(t,n),backward:a,characterOptions:n};return o}),restoreCharacterRanges:D(function(t,n,r){this.removeAllRanges();for(var i,o,a,s=0,c=r.length;c>s;++s)o=r[s],a=o.characterRange,i=e.createRange(n),i.selectCharacters(n,a.start,a.end,o.characterOptions),this.addRange(i,o.backward)}),text:D(function(e,t){for(var n=[],r=0,i=this.rangeCount;i>r;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")})}),e.innerText=function(t,n){var r=e.createRange(t);r.selectNodeContents(t);var i=r.text(n);return i},e.createWordIterator=function(e,t,n){var r=E();n=s(n,he);var i=r.getPosition(e,t),o=k(i,n.characterOptions,n.wordOptions),a=ee(n.direction);return{next:function(){return a?o.previousStartToken():o.nextEndToken()},dispose:function(){o.dispose(),this.next=function(){}}}},e.noMutation=function(e){var t=E();e(t),B()},e.noMutation.createEntryPointFunction=D,e.textRange={isBlockNode:l,isCollapsedWhitespaceNode:N,createPosition:D(function(e,t,n){return e.getPosition(t,n)})}}),e},this);
// Spectrum Colorpicker v1.8.0
// https://github.com/bgrins/spectrum
// Author: Brian Grinstead
// License: MIT
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):t(jQuery)}(function(t,e){"use strict";function r(e,r,a,n){for(var o=[],i=0;i<e.length;i++){var s=e[i];if(s){var l=tinycolor(s),c=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(r,s)?" sp-thumb-active":"";var f=l.toString(n.preferredFormat||"rgb"),u=b?"background-color:"+l.toRgbString():"filter:"+l.toFilter();o.push('<span title="'+f+'" data-color="'+l.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+u+';" /></span>')}else{var h="sp-clear-display";o.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+h+'"></span>').attr("title",n.noColorSelectedText)).html())}}return"<div class='sp-cf "+a+"'>"+o.join("")+"</div>"}function a(){for(var t=0;t<p.length;t++)p[t]&&p[t].hide()}function n(e,r){var a=t.extend({},d,e);return a.callbacks={move:c(a.move,r),change:c(a.change,r),show:c(a.show,r),hide:c(a.hide,r),beforeShow:c(a.beforeShow,r)},a}function o(o,s){function c(){if(W.showPaletteOnly&&(W.showPalette=!0),Dt.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){dt=W.palette.slice(0),pt=t.isArray(dt[0])?dt:[dt],gt={};for(var e=0;e<pt.length;e++)for(var r=0;r<pt[e].length;r++){var a=tinycolor(pt[e][r]).toRgbString();gt[a]=!0}}kt.toggleClass("sp-flat",X),kt.toggleClass("sp-input-disabled",!W.showInput),kt.toggleClass("sp-alpha-enabled",W.showAlpha),kt.toggleClass("sp-clear-enabled",Qt),kt.toggleClass("sp-buttons-disabled",!W.showButtons),kt.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly),kt.toggleClass("sp-palette-disabled",!W.showPalette),kt.toggleClass("sp-palette-only",W.showPaletteOnly),kt.toggleClass("sp-initial-disabled",!W.showInitial),kt.addClass(W.className).addClass(W.containerClassName),z()}function d(){function e(e){return e.data&&e.data.ignore?(O(t(e.target).closest(".sp-thumb-el").data("color")),j()):(O(t(e.target).closest(".sp-thumb-el").data("color")),j(),W.hideAfterPaletteSelect?(I(!0),F()):I()),!1}if(g&&kt.find("*:not(input)").attr("unselectable","on"),c(),Bt&&_t.after(Lt).hide(),Qt||jt.hide(),X)_t.after(kt).hide();else{var r="parent"===W.appendTo?_t.parent():t(W.appendTo);1!==r.length&&(r=t("body")),r.append(kt)}y(),Kt.on("click.spectrum touchstart.spectrum",function(e){xt||A(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(_t.is(":disabled")||W.disabled===!0)&&V(),kt.click(l),Tt.change(P),Tt.on("paste",function(){setTimeout(P,1)}),Tt.keydown(function(t){13==t.keyCode&&P()}),Nt.text(W.cancelText),Nt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),T(),F()}),jt.attr("title",W.clearText),jt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Gt=!0,j(),X&&I(!0)}),Et.text(W.chooseText),Et.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),g&&Tt.is(":focus")&&Tt.trigger("change"),N()&&(I(!0),F())}),Dt.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Dt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,W.showPaletteOnly||X||kt.css("left","-="+(St.outerWidth(!0)+5)),c()}),f(Ht,function(t,e,r){ht=t/it,Gt=!1,r.shiftKey&&(ht=Math.round(10*ht)/10),j()},S,C),f(At,function(t,e){ct=parseFloat(e/nt),Gt=!1,W.showAlpha||(ht=1),j()},S,C),f(Ct,function(t,e,r){if(r.shiftKey){if(!yt){var a=ft*et,n=rt-ut*rt,o=Math.abs(t-a)>Math.abs(e-n);yt=o?"x":"y"}}else yt=null;var i=!yt||"x"===yt,s=!yt||"y"===yt;i&&(ft=parseFloat(t/et)),s&&(ut=parseFloat((rt-e)/rt)),Gt=!1,W.showAlpha||(ht=1),j()},S,C),$t?(O($t),E(),Xt=W.preferredFormat||tinycolor($t).format,w($t)):E(),X&&M();var a=g?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ot.on(a,".sp-thumb-el",e),qt.on(a,".sp-thumb-el:nth-child(1)",{ignore:!0},e)}function y(){if(G&&window.localStorage){try{var e=window.localStorage[G].split(",#");e.length>1&&(delete window.localStorage[G],t.each(e,function(t,e){w(e)}))}catch(r){}try{bt=window.localStorage[G].split(";")}catch(r){}}}function w(e){if(Y){var r=tinycolor(e).toRgbString();if(!gt[r]&&t.inArray(r,bt)===-1)for(bt.push(r);bt.length>vt;)bt.shift();if(G&&window.localStorage)try{window.localStorage[G]=bt.join(";")}catch(a){}}}function _(){var t=[];if(W.showPalette)for(var e=0;e<bt.length;e++){var r=tinycolor(bt[e]).toRgbString();gt[r]||t.push(bt[e])}return t.reverse().slice(0,W.maxSelectionSize)}function x(){var e=q(),a=t.map(pt,function(t,a){return r(t,e,"sp-palette-row sp-palette-row-"+a,W)});y(),bt&&a.push(r(_(),e,"sp-palette-row sp-palette-row-selection",W)),Ot.html(a.join(""))}function k(){if(W.showInitial){var t=Wt,e=q();qt.html(r([t,e],e,"sp-palette-row-initial",W))}}function S(){(rt<=0||et<=0||nt<=0)&&z(),tt=!0,kt.addClass(mt),yt=null,_t.trigger("dragstart.spectrum",[q()])}function C(){tt=!1,kt.removeClass(mt),_t.trigger("dragstop.spectrum",[q()])}function P(){var t=Tt.val();if(null!==t&&""!==t||!Qt){var e=tinycolor(t);e.isValid()?(O(e),j(),I()):Tt.addClass("sp-validation-error")}else O(null),j(),I()}function A(){Z?F():M()}function M(){var e=t.Event("beforeShow.spectrum");return Z?void z():(_t.trigger(e,[q()]),void(J.beforeShow(q())===!1||e.isDefaultPrevented()||(a(),Z=!0,t(wt).on("keydown.spectrum",R),t(wt).on("click.spectrum",H),t(window).on("resize.spectrum",U),Lt.addClass("sp-active"),kt.removeClass("sp-hidden"),z(),E(),Wt=q(),k(),J.show(Wt),_t.trigger("show.spectrum",[Wt]))))}function R(t){27===t.keyCode&&F()}function H(t){2!=t.button&&(tt||(Yt?I(!0):T(),F()))}function F(){Z&&!X&&(Z=!1,t(wt).off("keydown.spectrum",R),t(wt).off("click.spectrum",H),t(window).off("resize.spectrum",U),Lt.removeClass("sp-active"),kt.addClass("sp-hidden"),J.hide(q()),_t.trigger("hide.spectrum",[q()]))}function T(){O(Wt,!0),I(!0)}function O(t,e){if(tinycolor.equals(t,q()))return void E();var r,a;!t&&Qt?Gt=!0:(Gt=!1,r=tinycolor(t),a=r.toHsv(),ct=a.h%360/360,ft=a.s,ut=a.v,ht=a.a),E(),r&&r.isValid()&&!e&&(Xt=W.preferredFormat||r.getFormat())}function q(t){return t=t||{},Qt&&Gt?null:tinycolor.fromRatio({h:ct,s:ft,v:ut,a:Math.round(1e3*ht)/1e3},{format:t.format||Xt})}function N(){return!Tt.hasClass("sp-validation-error")}function j(){E(),J.move(q()),_t.trigger("move.spectrum",[q()])}function E(){Tt.removeClass("sp-validation-error"),D();var t=tinycolor.fromRatio({h:ct,s:1,v:1});Ct.css("background-color",t.toHexString());var e=Xt;ht<1&&(0!==ht||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var r=q({format:e}),a="";if(Vt.removeClass("sp-clear-display"),Vt.css("background-color","transparent"),!r&&Qt)Vt.addClass("sp-clear-display");else{var n=r.toHexString(),o=r.toRgbString();if(b||1===r.alpha?Vt.css("background-color",o):(Vt.css("background-color","transparent"),Vt.css("filter",r.toFilter())),W.showAlpha){var i=r.toRgb();i.a=0;var s=tinycolor(i).toRgbString(),l="linear-gradient(left, "+s+", "+n+")";g?Rt.css("filter",tinycolor(s).toFilter({gradientType:1},n)):(Rt.css("background","-webkit-"+l),Rt.css("background","-moz-"+l),Rt.css("background","-ms-"+l),Rt.css("background","linear-gradient(to right, "+s+", "+n+")"))}a=r.toString(e)}W.showInput&&Tt.val(a),W.showPalette&&x(),k()}function D(){var t=ft,e=ut;if(Qt&&Gt)Ft.hide(),Mt.hide(),Pt.hide();else{Ft.show(),Mt.show(),Pt.show();var r=t*et,a=rt-e*rt;r=Math.max(-at,Math.min(et-at,r-at)),a=Math.max(-at,Math.min(rt-at,a-at)),Pt.css({top:a+"px",left:r+"px"});var n=ht*it;Ft.css({left:n-st/2+"px"});var o=ct*nt;Mt.css({top:o-lt+"px"})}}function I(t){var e=q(),r="",a=!tinycolor.equals(e,Wt);e&&(r=e.toString(Xt),w(e)),It&&_t.val(r),t&&a&&(J.change(e),_t.trigger("change",[e]))}function z(){Z&&(et=Ct.width(),rt=Ct.height(),at=Pt.height(),ot=At.width(),nt=At.height(),lt=Mt.height(),it=Ht.width(),st=Ft.width(),X||(kt.css("position","absolute"),W.offset?kt.offset(W.offset):kt.offset(i(kt,Kt))),D(),W.showPalette&&x(),_t.trigger("reflow.spectrum"))}function B(){_t.show(),Kt.off("click.spectrum touchstart.spectrum"),kt.remove(),Lt.remove(),p[Jt.id]=null}function L(r,a){return r===e?t.extend({},W):a===e?W[r]:(W[r]=a,"preferredFormat"===r&&(Xt=W.preferredFormat),void c())}function K(){xt=!1,_t.attr("disabled",!1),Kt.removeClass("sp-disabled")}function V(){F(),xt=!0,_t.attr("disabled",!0),Kt.addClass("sp-disabled")}function $(t){W.offset=t,z()}var W=n(s,o),X=W.flat,Y=W.showSelectionPalette,G=W.localStorageKey,Q=W.theme,J=W.callbacks,U=u(z,10),Z=!1,tt=!1,et=0,rt=0,at=0,nt=0,ot=0,it=0,st=0,lt=0,ct=0,ft=0,ut=0,ht=1,dt=[],pt=[],gt={},bt=W.selectionPalette.slice(0),vt=W.maxSelectionSize,mt="sp-dragging",yt=null,wt=o.ownerDocument,_t=(wt.body,t(o)),xt=!1,kt=t(m,wt).addClass(Q),St=kt.find(".sp-picker-container"),Ct=kt.find(".sp-color"),Pt=kt.find(".sp-dragger"),At=kt.find(".sp-hue"),Mt=kt.find(".sp-slider"),Rt=kt.find(".sp-alpha-inner"),Ht=kt.find(".sp-alpha"),Ft=kt.find(".sp-alpha-handle"),Tt=kt.find(".sp-input"),Ot=kt.find(".sp-palette"),qt=kt.find(".sp-initial"),Nt=kt.find(".sp-cancel"),jt=kt.find(".sp-clear"),Et=kt.find(".sp-choose"),Dt=kt.find(".sp-palette-toggle"),It=_t.is("input"),zt=It&&"color"===_t.attr("type")&&h(),Bt=It&&!X,Lt=Bt?t(v).addClass(Q).addClass(W.className).addClass(W.replacerClassName):t([]),Kt=Bt?Lt:_t,Vt=Lt.find(".sp-preview-inner"),$t=W.color||It&&_t.val(),Wt=!1,Xt=W.preferredFormat,Yt=!W.showButtons||W.clickoutFiresChange,Gt=!$t,Qt=W.allowEmpty&&!zt;d();var Jt={show:M,hide:F,toggle:A,reflow:z,option:L,enable:K,disable:V,offset:$,set:function(t){O(t),I()},get:q,destroy:B,container:kt};return Jt.id=p.push(Jt)-1,Jt}function i(e,r){var a=0,n=e.outerWidth(),o=e.outerHeight(),i=r.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,c=l.clientWidth+t(s).scrollLeft(),f=l.clientHeight+t(s).scrollTop(),u=r.offset(),h=u.left,d=u.top;return d+=i,h-=Math.min(h,h+n>c&&c>n?Math.abs(h+n-c):0),d-=Math.min(d,d+o>f&&f>o?Math.abs(o+i-a):a),{top:d,bottom:u.bottom,left:h,right:u.right,width:u.width,height:u.height}}function s(){}function l(t){t.stopPropagation()}function c(t,e){var r=Array.prototype.slice,a=r.call(arguments,2);return function(){return t.apply(e,a.concat(r.call(arguments)))}}function f(e,r,a,n){function o(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function i(t){if(f){if(g&&c.documentMode<9&&!t.button)return l();var a=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],n=a&&a.pageX||t.pageX,i=a&&a.pageY||t.pageY,s=Math.max(0,Math.min(n-u.left,d)),b=Math.max(0,Math.min(i-u.top,h));p&&o(t),r.apply(e,[s,b,t])}}function s(r){var n=r.which?3==r.which:2==r.button;n||f||a.apply(e,arguments)!==!1&&(f=!0,h=t(e).height(),d=t(e).width(),u=t(e).offset(),t(c).on(b),t(c.body).addClass("sp-dragging"),i(r),o(r))}function l(){f&&(t(c).off(b),t(c.body).removeClass("sp-dragging"),setTimeout(function(){n.apply(e,arguments)},0)),f=!1}r=r||function(){},a=a||function(){},n=n||function(){};var c=document,f=!1,u={},h=0,d=0,p="ontouchstart"in window,b={};b.selectstart=o,b.dragstart=o,b["touchmove mousemove"]=i,b["touchend mouseup"]=l,t(e).on("touchstart mousedown",s)}function u(t,e,r){var a;return function(){var n=this,o=arguments,i=function(){a=null,t.apply(n,o)};r&&clearTimeout(a),!r&&a||(a=setTimeout(i,e))}}function h(){return t.fn.spectrum.inputTypeColorSupport()}var d={beforeShow:s,move:s,change:s,show:s,hide:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},p=[],g=!!/msie/i.exec(window.navigator.userAgent),b=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),r=e.style;return r.cssText="background-color:rgba(0,0,0,.5)",t(r.backgroundColor,"rgba")||t(r.backgroundColor,"hsla")}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),m=function(){var t="";if(g)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e,r){if("string"==typeof e){var a=this,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=p[t(this).data(y)];if(r){var o=r[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?a=r.get():"container"==e?a=r.container:"option"==e?a=r.option.apply(r,n):"destroy"==e?(r.destroy(),t(this).removeData(y)):o.apply(r,n)}}),a}return this.spectrum("destroy").each(function(){var r=t.extend({},t(this).data(),e),a=o(this,r);t(this).data(y,a.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=f,t.fn.spectrum.defaults=d,t.fn.spectrum.inputTypeColorSupport=function w(){if("undefined"==typeof w._cachedResult){var e=t("<input type='color'/>")[0];w._cachedResult="color"===e.type&&""!==e.value}return w._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!h()&&e.spectrum({preferredFormat:"hex6"})},
// Brian Grinstead, MIT License
function(){function t(t){var r={r:0,g:0,b:0},n=1,i=!1,s=!1;return"string"==typeof t&&(t=T(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(r=e(t.r,t.g,t.b),i=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=R(t.s),t.v=R(t.v),r=o(t.h,t.s,t.v),i=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=R(t.s),t.l=R(t.l),r=a(t.h,t.s,t.l),i=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=x(n),{ok:i,format:t.format||s,r:D(255,I(r.r,0)),g:D(255,I(r.g,0)),b:D(255,I(r.b,0)),a:n}}function e(t,e,r){return{r:255*k(t,255),g:255*k(e,255),b:255*k(r,255)}}function r(t,e,r){t=k(t,255),e=k(e,255),r=k(r,255);var a,n,o=I(t,e,r),i=D(t,e,r),s=(o+i)/2;if(o==i)a=n=0;else{var l=o-i;switch(n=s>.5?l/(2-o-i):l/(o+i),o){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4}a/=6}return{h:a,s:n,l:s}}function a(t,e,r){function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}var n,o,i;if(t=k(t,360),e=k(e,100),r=k(r,100),0===e)n=o=i=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=a(l,s,t+1/3),o=a(l,s,t),i=a(l,s,t-1/3)}return{r:255*n,g:255*o,b:255*i}}function n(t,e,r){t=k(t,255),e=k(e,255),r=k(r,255);var a,n,o=I(t,e,r),i=D(t,e,r),s=o,l=o-i;if(n=0===o?0:l/o,o==i)a=0;else{switch(o){case t:a=(e-r)/l+(e<r?6:0);break;case e:a=(r-t)/l+2;break;case r:a=(t-e)/l+4}a/=6}return{h:a,s:n,v:s}}function o(t,e,r){t=6*k(t,360),e=k(e,100),r=k(r,100);var a=j.floor(t),n=t-a,o=r*(1-e),i=r*(1-n*e),s=r*(1-(1-n)*e),l=a%6,c=[r,i,o,o,s,r][l],f=[s,r,r,i,o,o][l],u=[o,o,s,r,r,i][l];return{r:255*c,g:255*f,b:255*u}}function i(t,e,r,a){var n=[M(E(t).toString(16)),M(E(e).toString(16)),M(E(r).toString(16))];return a&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function s(t,e,r,a){var n=[M(H(a)),M(E(t).toString(16)),M(E(e).toString(16)),M(E(r).toString(16))];return n.join("")}function l(t,e){e=0===e?0:e||10;var r=B(t).toHsl();return r.s-=e/100,r.s=S(r.s),B(r)}function c(t,e){e=0===e?0:e||10;var r=B(t).toHsl();return r.s+=e/100,r.s=S(r.s),B(r)}function f(t){return B(t).desaturate(100)}function u(t,e){e=0===e?0:e||10;var r=B(t).toHsl();return r.l+=e/100,r.l=S(r.l),B(r)}function h(t,e){e=0===e?0:e||10;var r=B(t).toRgb();return r.r=I(0,D(255,r.r-E(255*-(e/100)))),r.g=I(0,D(255,r.g-E(255*-(e/100)))),r.b=I(0,D(255,r.b-E(255*-(e/100)))),B(r)}function d(t,e){e=0===e?0:e||10;var r=B(t).toHsl();return r.l-=e/100,r.l=S(r.l),B(r)}function p(t,e){var r=B(t).toHsl(),a=(E(r.h)+e)%360;return r.h=a<0?360+a:a,B(r)}function g(t){var e=B(t).toHsl();return e.h=(e.h+180)%360,B(e)}function b(t){var e=B(t).toHsl(),r=e.h;return[B(t),B({h:(r+120)%360,s:e.s,l:e.l}),B({h:(r+240)%360,s:e.s,l:e.l})]}function v(t){var e=B(t).toHsl(),r=e.h;return[B(t),B({h:(r+90)%360,s:e.s,l:e.l}),B({h:(r+180)%360,s:e.s,l:e.l}),B({h:(r+270)%360,s:e.s,l:e.l})]}function m(t){var e=B(t).toHsl(),r=e.h;return[B(t),B({h:(r+72)%360,s:e.s,l:e.l}),B({h:(r+216)%360,s:e.s,l:e.l})]}function y(t,e,r){e=e||6,r=r||30;var a=B(t).toHsl(),n=360/r,o=[B(t)];for(a.h=(a.h-(n*e>>1)+720)%360;--e;)a.h=(a.h+n)%360,o.push(B(a));return o}function w(t,e){e=e||6;for(var r=B(t).toHsv(),a=r.h,n=r.s,o=r.v,i=[],s=1/e;e--;)i.push(B({h:a,s:n,v:o})),o=(o+s)%1;return i}function _(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function x(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function k(t,e){P(t)&&(t="100%");var r=A(t);return t=D(e,I(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),j.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function S(t){return D(1,I(0,t))}function C(t){return parseInt(t,16)}function P(t){return"string"==typeof t&&t.indexOf(".")!=-1&&1===parseFloat(t)}function A(t){return"string"==typeof t&&t.indexOf("%")!=-1}function M(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function H(t){return Math.round(255*parseFloat(t)).toString(16)}function F(t){return C(t)/255}function T(t){t=t.replace(O,"").replace(q,"").toLowerCase();var e=!1;if(L[t])t=L[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=V.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=V.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=V.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=V.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=V.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=V.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=V.hex8.exec(t))?{a:F(r[1]),r:C(r[2]),g:C(r[3]),b:C(r[4]),format:e?"name":"hex8"}:(r=V.hex6.exec(t))?{r:C(r[1]),g:C(r[2]),b:C(r[3]),format:e?"name":"hex"}:!!(r=V.hex3.exec(t))&&{r:C(r[1]+""+r[1]),g:C(r[2]+""+r[2]),b:C(r[3]+""+r[3]),format:e?"name":"hex"}}var O=/^[\s,#]+/,q=/\s+$/,N=0,j=Math,E=j.round,D=j.min,I=j.max,z=j.random,B=function(e,r){if(e=e?e:"",r=r||{},e instanceof B)return e;if(!(this instanceof B))return new B(e,r);var a=t(e);this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=E(1e3*this._a)/1e3,this._format=r.format||a.format,this._gradientType=r.gradientType,this._r<1&&(this._r=E(this._r)),this._g<1&&(this._g=E(this._g)),this._b<1&&(this._b=E(this._b)),this._ok=a.ok,this._tc_id=N++};B.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=x(t),this._roundA=E(1e3*this._a)/1e3,this},toHsv:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=n(this._r,this._g,this._b),e=E(360*t.h),r=E(100*t.s),a=E(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+a+"%)":"hsva("+e+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=r(this._r,this._g,this._b),e=E(360*t.h),a=E(100*t.s),n=E(100*t.l);return 1==this._a?"hsl("+e+", "+a+"%, "+n+"%)":"hsla("+e+", "+a+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return i(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*k(this._r,255))+"%",g:E(100*k(this._g,255))+"%",b:E(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+E(100*k(this._r,255))+"%, "+E(100*k(this._g,255))+"%, "+E(100*k(this._b,255))+"%)":"rgba("+E(100*k(this._r,255))+"%, "+E(100*k(this._g,255))+"%, "+E(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(K[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+s(this._r,this._g,this._b,this._a),r=e,a=this._gradientType?"GradientType = 1, ":"";if(t){var n=B(t);r=n.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,a=this._a<1&&this._a>=0,n=!e&&a&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return n?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(u,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(d,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(m,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},B.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var a in t)t.hasOwnProperty(a)&&("a"===a?r[a]=t[a]:r[a]=R(t[a]));t=r}return B(t,e)},B.equals=function(t,e){return!(!t||!e)&&B(t).toRgbString()==B(e).toRgbString()},B.random=function(){return B.fromRatio({r:z(),g:z(),b:z()})},B.mix=function(t,e,r){r=0===r?0:r||50;var a,n=B(t).toRgb(),o=B(e).toRgb(),i=r/100,s=2*i-1,l=o.a-n.a;a=s*l==-1?s:(s+l)/(1+s*l),a=(a+1)/2;var c=1-a,f={r:o.r*a+n.r*c,g:o.g*a+n.g*c,b:o.b*a+n.b*c,a:o.a*i+n.a*(1-i)};return B(f)},B.readability=function(t,e){var r=B(t),a=B(e),n=r.toRgb(),o=a.toRgb(),i=r.getBrightness(),s=a.getBrightness(),l=Math.max(n.r,o.r)-Math.min(n.r,o.r)+Math.max(n.g,o.g)-Math.min(n.g,o.g)+Math.max(n.b,o.b)-Math.min(n.b,o.b);return{brightness:Math.abs(i-s),color:l}},B.isReadable=function(t,e){var r=B.readability(t,e);return r.brightness>125&&r.color>500},B.mostReadable=function(t,e){for(var r=null,a=0,n=!1,o=0;o<e.length;o++){var i=B.readability(t,e[o]),s=i.brightness>125&&i.color>500,l=3*(i.brightness/125)+i.color/500;(s&&!n||s&&n&&l>a||!s&&!n&&l>a)&&(n=s,a=l,r=B(e[o]))}return r};var L=B.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=B.hexNames=_(L),V=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=B}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})});
/*global self, document, DOMException */
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],o=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},c=function(e){for(var t=s.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,o=n.length;i<o;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=c[n]=[],u=function(){return new c(this)};if(a[n]=Error[n],d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",l(this,e)!==-1},d.add=function(){var e,t=arguments,n=0,i=t.length,o=!1;do e=t[n]+"",l(this,e)===-1&&(this.push(e),o=!0);while(++n<i);o&&this._updateClassName()},d.remove=function(){var e,t,n=arguments,i=0,o=n.length,s=!1;do for(e=n[i]+"",t=l(this,e);t!==-1;)this.splice(t,1),s=!0,t=l(this,e);while(++i<o);s&&this._updateClassName()},d.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},d.toString=function(){return this.join(" ")},o.defineProperty){var h={get:u,enumerable:!0,configurable:!0};try{o.defineProperty(i,t,h)}catch(m){m.number===-2146823252&&(h.enumerable=!1,o.defineProperty(i,t,h))}}else o[n].__defineGetter__&&i.__defineGetter__(t,u)}}(self),/* Blob.js
 * A Blob implementation.
 * 2014-07-24
 *
 * By Eli Grey, http://eligrey.com
 * By Devin Samarin, https://github.com/dsamarin
 * License: X11/MIT
 *   See https://github.com/eligrey/Blob.js/blob/master/LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,s=i.prototype,r=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,h=d.revokeObjectURL,m=d,f=e.btoa,p=e.atob,g=e.ArrayBuffer,b=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=s.fake=!0;c--;)a.prototype[l[c]]=c+1;return d.createObjectURL||(m=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(v),n.origin=t&&t[1])),n}),m.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):f?t+";base64,"+f(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},m.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(d,e)},o.append=function(e){var n=this.data;if(b&&(e instanceof g||e instanceof b)){for(var o="",s=new b(e),l=0,c=s.length;l<c;l++)o+=String.fromCharCode(s[l]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!r)throw new a("NOT_READABLE_ERR");var d=new r;n.push(d.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&p?n.push(p(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,n){var o=arguments.length;return o<3&&(n=null),new i(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var i=t?t.type||"":"",o=new n;if(e)for(var s=0,r=e.length;s<r;s++)Uint8Array&&e[s]instanceof Uint8Array?o.append(e[s].buffer):o.append(e[s]);var a=o.getBlob(i);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var i=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=i(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";var n="object"==typeof module&&"undefined"!=typeof process&&process&&process.versions&&process.versions.electron;n||"object"!=typeof module?"function"==typeof define&&define.amd?define(function(){return t}):e.MediumEditor=t:module.exports=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function n(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var o=0;o<i.length;o++){var s=i[o];if(s)for(n in s)s.hasOwnProperty(n)&&"undefined"!=typeof s[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=s[n])}return t}var i=!1;try{var o=document.createElement("div"),s=document.createTextNode(" ");o.appendChild(s),i=o.contains(s)}catch(r){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return!!(a.isMac&&e.metaKey||!a.isMac&&e.ctrlKey)},isKey:function(e,t){var n=a.getKeyCode(e);return!1===Array.isArray(t)?n===t:-1!==t.indexOf(n)},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},createLink:function(e,t,n,i){var o=e.createElement("a");return a.moveTextRangeIntoElement(t[0],t[t.length-1],o),o.setAttribute("href",n),i&&("_blank"===i&&o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target",i)),o},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),o=[],s=0,r=!1,l=null,c=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!r&&n.start<s+l.nodeValue.length&&(r=!0,c=a.splitStartNodeIfNeeded(l,n.start,s)),r&&a.splitEndNodeIfNeeded(l,c,n.end,s),r&&s===n.end)break;if(r&&s>n.end+1)throw new Error("PerformLinking overshot the target!");r&&o.push(c||l),s+=l.nodeValue.length,null!==c&&(s+=c.nodeValue.length,i.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!r&&n.start<=s&&(r=!0),r&&o.push(l));return o},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var o,s;o=i+e.nodeValue.length+(t?t.nodeValue.length:0)-1,s=n-i-(t?e.nodeValue.length:0),o>=n&&i!==o&&0!==s&&(t||e).splitText(s)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],i=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(i).length)return[t];for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];if(3===s.nodeType)n.push(s);else if(1===s.nodeType){var r=s.querySelectorAll(i);0===r.length?n.push(s):n=n.concat(e.util.splitByBlockElements(s))}}return n},findAdjacentTextNodeWithContent:function(e,t,n){var i,o=!1,s=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=s.nextNode();i;){if(i===t)o=!0;else if(o&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=s.nextNode()}return i},findPreviousSibling:function(e){if(!e||a.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!a.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,n){if(!e||!t)return!1;if(e===t)return!!n;if(1!==e.nodeType)return!1;if(i||3!==t.nodeType)return e.contains(t);for(var o=t.parentNode;null!==o;){if(o===e)return!0;o=o.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var n,i,o,s=50,r=null,a=0,l=function(){a=Date.now(),r=null,o=e.apply(n,i),r||(n=i=null)};return t||0===t||(t=s),function(){var s=Date.now(),c=t-(s-a);return n=this,i=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),a=s,o=e.apply(n,i),r||(n=i=null)):r||(r=setTimeout(l,c)),o}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(a.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var i,o,s,r,l,c,d,u=!1,h=["insertHTML",!1,n];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,h)}catch(m){}if(i=t.getSelection(),i.rangeCount){if(o=i.getRangeAt(0),d=o.commonAncestorContainer,a.isMediumEditorElement(d)&&!d.firstChild)o.selectNode(d.appendChild(t.createTextNode("")));else if(3===d.nodeType&&0===o.startOffset&&o.endOffset===d.nodeValue.length||3!==d.nodeType&&d.innerHTML===o.toString()){for(;!a.isMediumEditorElement(d)&&d.parentNode&&1===d.parentNode.childNodes.length&&!a.isMediumEditorElement(d.parentNode);)d=d.parentNode;o.selectNode(d)}for(o.deleteContents(),s=t.createElement("div"),s.innerHTML=n,r=t.createDocumentFragment();s.firstChild;)l=s.firstChild,c=r.appendChild(l);o.insertNode(r),c&&(o=o.cloneRange(),o.setStartAfter(c),o.collapse(!0),e.selection.selectRange(t,o)),u=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(h,u),u},execFormatBlock:function(t,n){var i,o=a.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===n){if(o&&(i=Array.prototype.slice.call(o.childNodes),i.some(function(e){return a.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(a.isIE)return t.execCommand("indent",!1,n)}if(o&&n===o.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),o&&"blockquote"===o.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return i=Array.prototype.slice.call(o.childNodes),i.some(function(e){return!a.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank",e.rel="noopener noreferrer";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)!1!==i&&i!==e[n].attributes.href.value||(e[n].target="_blank",e[n].rel="noopener noreferrer")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target"),e.removeAttribute("rel");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&(e[n].removeAttribute("target"),e[n].removeAttribute("rel"))},addClassToAnchors:function(e,t){var n,i,o=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<o.length;i+=1)e.classList.add(o[i]);else{var s=e.getElementsByTagName("a");if(0===s.length){var r=a.getClosestTag(e,"a");e=r?[r]:[]}else e=s;for(n=0;n<e.length;n+=1)for(i=0;i<o.length;i+=1)e[n].classList.add(o[i])}},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!a.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t)return!1;n=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(a.unwrap(i.parentElement,t),e.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,n){for(var i=t,o=null,s=!n;i!==e;){var r,a=i.parentNode,l=a.cloneNode(!1),c=s?i:a.firstChild;for(o&&(s?l.appendChild(o):r=o),o=l;c;){var d=c.nextSibling;c===i?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=s?d:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=d)}r&&o.appendChild(r),i=a}return o},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i=a.findCommonRoot(e,t);if(!i)return!1;if(t===e){var o=e.parentNode,s=e.nextSibling;return o.removeChild(e),n.appendChild(e),s?o.insertBefore(n,s):o.appendChild(n),n.hasChildNodes()}for(var r,l,c,d=[],u=0;u<i.childNodes.length;u++)if(c=i.childNodes[u],r){if(a.isDescendant(c,t,!0)){l=c;break}d.push(c)}else a.isDescendant(c,e,!0)&&(r=c);var h=l.nextSibling,m=i.ownerDocument.createDocumentFragment();return r===e?(r.parentNode.removeChild(r),m.appendChild(r)):m.appendChild(a.splitOffDOMTree(r,e)),d.forEach(function(e){e.parentNode.removeChild(e),m.appendChild(e)}),l===t?(l.parentNode.removeChild(l),m.appendChild(l)):m.appendChild(a.splitOffDOMTree(l,t,!0)),n.appendChild(m),l.parentNode===i?i.insertBefore(n,l):h?i.insertBefore(n,h):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=a.depthOfNode(e),i=a.depthOfNode(t),o=e,s=t;n!==i;)n>i?(o=o.parentNode,n-=1):(s=s.parentNode,i-=1);for(;o!==s;)o=o.parentNode,s=s.parentNode;return o},isElementAtBeginningOfBlock:function(e){for(var t,n;!a.isBlockContainer(e)&&!a.isMediumEditorElement(e);){for(n=e;n=n.previousSibling;)if(t=3===n.nodeType?n.nodeValue:n.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return a.traverseUp(e,function(e){return a.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&a.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(e){return a.traverseUp(e,function(e){return a.isBlockContainer(e)||a.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!a.isBlockContainer(e)&&e;return a.traverseUp(e,function(e){return a.isBlockContainer(e)&&(t=e),!(t||!a.isMediumEditorElement(e))&&(t=e,!0)}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=a.traverseUp(e,function(e){return a.emptyElementNames.indexOf(e.nodeName.toLowerCase())===-1}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=a._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return e.indexOf("://")===-1?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,n){var i=e+" is deprecated, please use "+t+" instead.";n&&(i+=" Will be removed in "+n),a.warn(i)},deprecatedMethod:function(e,t,n,i){a.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.indexOf(e.nodeName.toLowerCase())!==-1&&e.parentNode.removeChild(e)},unwrapTags:function(t,n){n.indexOf(t.nodeName.toLowerCase())!==-1&&e.util.unwrap(t,document)},getClosestTag:function(e,t){return a.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),o=0;o<i.length;o++)n.appendChild(i[o]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.util=a}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.util.extend(n,i);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,t&&e.util.extend(n.prototype,t),n},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(t,n){var i,o,s=n.getSelection();return 0!==s.rangeCount&&(i=s.getRangeAt(0),o=i.commonAncestorContainer,e.util.traverseUp(o,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var n=null,i=t.getSelection();if(i.rangeCount>0){var o,s=i.getRangeAt(0),r=s.cloneRange();r.selectNodeContents(e),r.setEnd(s.startContainer,s.startOffset),o=r.toString().length,n={start:o,end:o+s.toString().length},this.doesRangeStartWithImages(s,t)&&(n.startsWithImage=!0);var a=this.getTrailingImageCount(e,n,s.endContainer,s.endOffset);if(a&&(n.trailingImageCount=a),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,s.startContainer,s.startOffset);l!==-1&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(e,t,n,i){if(e&&t){var o=n.createRange();o.setStart(t,0),o.collapse(!0);var s,r=t,a=[],l=0,c=!1,d=!1,u=0,h=!1,m=!1,f=null;for((i||e.startsWithImage||"undefined"!=typeof e.emptyBlocksIndex)&&(m=!0);!h&&r;)if(r.nodeType>3)r=a.pop();else{if(3!==r.nodeType||d){if(e.trailingImageCount&&d&&("img"===r.nodeName.toLowerCase()&&u++,u===e.trailingImageCount)){for(var p=0;r.parentNode.childNodes[p]!==r;)p++;o.setEnd(r.parentNode,p+1),h=!0}if(!h&&1===r.nodeType)for(var g=r.childNodes.length-1;g>=0;)a.push(r.childNodes[g]),g-=1}else s=l+r.length,!c&&e.start>=l&&e.start<=s&&(m||e.start<s?(o.setStart(r,e.start-l),c=!0):f=r),c&&e.end>=l&&e.end<=s&&(e.trailingImageCount?d=!0:(o.setEnd(r,e.end-l),h=!0)),l=s;h||(r=a.pop())}!c&&f&&(o.setStart(f,f.length),o.setEnd(f,f.length)),"undefined"!=typeof e.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,o)),i&&(o=this.importSelectionMoveCursorPastAnchor(e,o)),this.selectRange(n,o)}},importSelectionMoveCursorPastAnchor:function(t,n){var i=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&e.util.traverseUp(n.startContainer,i)){for(var o=n.startContainer,s=n.startContainer.parentNode;null!==s&&"a"!==s.nodeName.toLowerCase();)s.childNodes[s.childNodes.length-1]!==o?s=null:(o=s,s=s.parentNode);if(null!==s&&"a"===s.nodeName.toLowerCase()){for(var r=null,a=0;null===r&&a<s.parentNode.childNodes.length;a++)s.parentNode.childNodes[a]===s&&(r=a);n.setStart(s.parentNode,r+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,o,s){var r,a,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),c=s.startContainer,d=0;for(o=o||1,r=3===c.nodeType&&e.util.isBlockContainer(c.previousSibling)?c.previousSibling:e.util.getClosestBlockContainer(c);l.nextNode();)if(a){if(a=l.currentNode,d++,d===o)break;if(a.textContent.length>0)break}else r===l.currentNode&&(a=l.currentNode);return a||(a=r),s.setStart(e.util.getFirstSelectableLeafNode(a),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,o,s){if(o.textContent.length>0&&s>0)return-1;var r=o;if(3!==r.nodeType&&(r=o.childNodes[s]),r){if(!e.util.isElementAtBeginningOfBlock(r))return-1;var a=e.util.findPreviousSibling(r);if(!a)return-1;if(a.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(o),c=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),d=0;c.nextNode();){var u=""===c.currentNode.textContent;if((u||d>0)&&(d+=1),c.currentNode===l)return d;u||(d=0)}return d},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var o=i.currentNode;if(o===n)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var o=n.childNodes[i-1];o.hasChildNodes();)o=o.lastChild;for(var s,r=e,a=[],l=0,c=!1,d=!1,u=!1,h=0;!u&&r;)if(r.nodeType>3)r=a.pop();else{if(3!==r.nodeType||d){if("img"===r.nodeName.toLowerCase()&&h++,r===o)u=!0;else if(1===r.nodeType)for(var m=r.childNodes.length-1;m>=0;)a.push(r.childNodes[m]),m-=1}else h=0,s=l+r.length,!c&&t.start>=l&&t.start<=s&&(c=!0),c&&t.end>=l&&t.end<=s&&(d=!0),l=s;u||(r=a.pop())}return h},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var n=this.getSelectedParentElement(t.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(e){var t,n=this.findMatchingSelectionParent(function(e){var n=e&&e.getAttribute("contenteditable");return"true"===n&&(t=!0),"#text"!==e.nodeName&&"false"===n},e);return!t&&n},getSelectionHtml:function(e){var t,n,i,o="",s=e.getSelection();if(s.rangeCount){for(i=e.createElement("div"),t=0,n=s.rangeCount;t<n;t+=1)i.appendChild(s.getRangeAt(t).cloneContents());o=i.innerHTML}return o},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i,o=e.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(t=o.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof o.containsNode||o.containsNode(e,!0)})},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,o){var s=e.createRange();return s.setStart(t,n),i?s.setEnd(i,o):s.collapse(!0),this.selectRange(e,s),s},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},selectRange:function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n}};e.selection=n}(),function(){function t(t,n){return!!t&&t.some(function(t){if("function"!=typeof t.getInteractionElements)return!1;var i=t.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(t){return e.util.isDescendant(t,n,!0)}))})}var n=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(t,n,i,o){var s=this.base.options.contentWindow,r=this.base.options.ownerDocument;t=e.util.isElement(t)||[s,r].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){e.addEventListener(n,i,o),this.events.push([e,n,i,o])}.bind(this))},detachDOMEvent:function(t,n,i,o){var s,r,a=this.base.options.contentWindow,l=this.base.options.ownerDocument;t&&(t=e.util.isElement(t)||[a,l].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){s=this.indexOfListener(e,n,i,o),s!==-1&&(r=this.events.splice(s,1)[0],r[0].removeEventListener(r[1],r[2],r[3]))}.bind(this)))},indexOfListener:function(e,t,n,i){var o,s,r;for(o=0,s=this.events.length;o<s;o+=1)if(r=this.events[o],r[0]===e&&r[1]===t&&r[2]===n&&r[3]===i)return o;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var t=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),n=0,i=t.length;n<i;n++){var o=t[n];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(e,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);n!==-1&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){"editableInput"==e&&"insertParagraph"!=t.inputType,this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);t!==-1&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,n){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},n=function(){var n=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return t(i,n),n};n.orig=e.execCommand,n.listeners=[],n.callListeners=t,e.execCommand=n}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,e,t.bind(this))},this),this.eventsCache.push({name:e,handler:t})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[t])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(n,i){var o,s=this.base.getFocusedElement();s&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(s,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(o=s),o||this.base.elements.some(function(t){return!o&&e.util.isDescendant(t,n,!0)&&(o=t),!!o},this);var r=!e.util.isDescendant(s,n,!0)&&!t(this.base.extensions,n);o!==s&&(s&&r&&(s.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,s)),o&&(o.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,o))),r&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var n=e.getAttribute("medium-editor-index"),i=e.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var n,i=t.currentTarget.activeElement;this.base.elements.some(function(t){return!!e.util.isDescendant(t,i,!0)&&(n=t,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,
aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===i&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(i=o.indexOf(e.nodeName.toLowerCase())!==-1),!i&&this.style&&(t=this.style.value.split("|"),n=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(i=n.indexOf(e)!==-1,(i||"text-decoration"!==this.style.prop)&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.button.classList.add("hide-tool-rexbutton"),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var n=e.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if(t=t||{value:""},"string"==typeof t&&(t={value:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=t.value,n.focus(),i&&(i.checked="_blank"===t.target),o){var s=t.buttonClass?t.buttonClass.split(" "):[];o.checked=s.indexOf(this.customClassOption)!==-1}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},ensureEncodedUri:function(e){return e===decodeURI(e)?encodeURI(e):e},ensureEncodedUriComponent:function(e){return e===decodeURIComponent(e)?encodeURIComponent(e):e},ensureEncodedParam:function(e){var t=e.split("="),n=t[0],i=t[1];return n+(void 0===i?"":"="+this.ensureEncodedUriComponent(i))},ensureEncodedQuery:function(e){return e.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=t.test(e),i="",o=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,s=e.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),r=s[1],a=s[2],l=s[3];if(o.test(e))return"tel:"+e;if(!n){var c=r.split("/")[0];(c.match(/.+(\.|:).+/)||"localhost"===c)&&(i="http://")}return i+this.ensureEncodedUri(r)+(void 0===a?"":"?"+this.ensureEncodedQuery(a))+(void 0===l?"":"#"+l)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){return t.keyCode===e.util.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i,o,s,r=this.window.innerWidth,a=this.anchorPreview.offsetHeight,l=e.getBoundingClientRect(),c=this.diffLeft,d=this.diffTop,u=this.getEditorOption("elementsContainer"),h=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,m={};t=this.anchorPreview.offsetWidth/2;var f=this.base.getExtensionByName("toolbar");f&&(c=f.diffLeft,d=f.diffTop),n=c-t,h?(o=u.getBoundingClientRect(),["top","left"].forEach(function(e){m[e]=l[e]-o[e]}),m.width=l.width,m.height=l.height,l=m,r=o.width,s=u.scrollTop):s=this.window.pageYOffset,i=l.left+l.width/2,s+=a+l.top+l.height-d-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(s)+"px",this.anchorPreview.style.right="initial",i<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):r-i<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var n=e.util.getClosestTag(t.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var n,i,o,s,r;n=[" ","\t","\n","\r","","","","","","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",s=new RegExp("^("+i+")$","i"),r=new RegExp(o,"gi");var a=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(n){window.console&&window.console.error("Failed to perform linking",n),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var n=e.util.splitByBlockElements(t),i=!1;0===n.length&&(n=[t]);for(var o=0;o<n.length;o++)i=this.removeObsoleteAutoLinkSpans(n[o])||i,i=this.performLinkingWithinElement(n[o])||i;return this.base.events.updateInput(t,{target:t,currentTarget:t}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),o=!1,s=0;s<i.length;s++){var r=i[s].textContent;if(r.indexOf("://")===-1&&(r=e.util.ensureUrlHasProtocol(r)),i[s].getAttribute("data-href")!==r&&t(i[s])){o=!0;var a=r.replace(/\s+$/,"");if(i[s].getAttribute("data-href")===a){var l=r.length-a.length,c=e.util.splitOffDOMTree(i[s],this.splitTextBeforeEnd(i[s],l));i[s].parentNode.insertBefore(c,i[s].nextSibling)}else e.util.unwrap(i[s],this.document)}}return o},splitTextBeforeEnd:function(e,t){for(var n=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var o,s,r;t>0&&null!==r;)o=n.currentNode,s=o.nodeValue,s.length>t?(r=o.splitText(s.length-t),t=0):(r=n.previousNode(),t-=s.length);return r},performLinkingWithinElement:function(t){for(var n=this.findLinkableText(t),i=!1,o=0;o<n.length;o++){var s=e.util.findOrCreateMatchingTextNodes(this.document,t,n[o]);this.shouldNotLink(s)||this.createAutoLink(s,n[o].href)}return i},shouldNotLink:function(t){for(var n=!1,i=0;i<t.length&&n===!1;i++)n=!!e.util.traverseUp(t[i],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return n},findLinkableText:function(e){for(var t=e.textContent,i=null,o=[];null!==(i=r.exec(t));){var a=!0,l=i.index+i[0].length;a=!(0!==i.index&&n.indexOf(t[i.index-1])===-1||l!==t.length&&n.indexOf(t[l])===-1),a=a&&(i[0].indexOf("/")!==-1||s.test(i[0].split(".").pop().split("?").shift())),a&&o.push({href:i[0],start:i.index,end:l})}return o},createAutoLink:function(t,n){n=e.util.ensureUrlHasProtocol(n);var i=e.util.createLink(this.document,t,n,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",n),i.insertBefore(o,i.firstChild);i.childNodes.length>1;)o.appendChild(i.childNodes[1])}});e.extensions.autoLink=a}(),function(){function t(t){var i=e.util.getContainerEditorElement(t),o=Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n));o.forEach(function(e){e.classList.remove(n)})}var n="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var i=e.target.classList?e.target:e.target.parentElement;t(i),"dragover"===e.type&&i.classList.add(n)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(t){var n=this.document.createElement("img");n.src=t.target.result,e.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n=e.util.getKeyCode(t);if(this.keys[n]){var i=e.util.isMetaCtrlKey(t),o=!!t.shiftKey,s=!!t.altKey;this.keys[n].forEach(function(e){e.meta!==i||e.shift!==o||e.alt!==s&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),o=t.createElement("a"),s=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var r=0;r<this.fonts.length;r++)e=t.createElement("option"),e.innerHTML=this.fonts[r],e.value=this.fonts[r],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),o=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]];
}function n(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,o={};if(!i)return o;if(i.getData){var s=i.getData("Text");s&&s.length>0&&(o["text/plain"]=s)}if(i.types)for(var r=0;r<i.types.length;r++){var a=i.types[r];o[a]=i.getData(a)}return o}var i="%ME_PASTEBIN%",o=null,s=null,r=function(e){e.stopPropagation()},a=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(e){this.on(e,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(e,t){this.on(t,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){if(!e.defaultPrevented){var i=n(e,this.window,this.document),o=i["text/html"],s=i["text/plain"];this.window.clipboardData&&void 0===e.clipboardData&&!o&&(o=s),(o||s)&&(e.preventDefault(),this.doPaste(o,s,t))}},doPaste:function(t,n,i){var o,s,r="";if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(n){if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))r=e.util.htmlEntities(n);else if(o=n.split(/[\r\n]+/g),o.length>1)for(s=0;s<o.length;s+=1)""!==o[s]&&(r+="<p>"+e.util.htmlEntities(o[s])+"</p>");else r=e.util.htmlEntities(o[0]);e.util.insertHTMLCommand(this.document,r)}},handlePasteBinPaste:function(e){if(e.defaultPrevented)return void this.removePasteBin();var t=n(e,this.window,this.document),i=t["text/html"],o=t["text/plain"],r=s;return!this.cleanPastedHTML||i?(e.preventDefault(),this.removePasteBin(),this.doPaste(i,o,r),void this.trigger("editablePaste",{currentTarget:r,target:r},r)):void setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,o,r),this.trigger("editablePaste",{currentTarget:r,target:r},r)}.bind(this),0)},handleKeydown:function(t,n){e.util.isKey(t,e.util.keyCode.V)&&e.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(t){var n,a=e.selection.getSelectionRange(this.document),l=this.window.pageYOffset;s=t,a&&(n=a.getClientRects(),l+=n.length?n[0].top:void 0!==a.startContainer.getBoundingClientRect?a.startContainer.getBoundingClientRect().top:a.getBoundingClientRect().top),o=a;var c=this.document.createElement("div");c.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),c.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),c.setAttribute("contentEditable",!0),c.innerHTML=i,this.document.body.appendChild(c),this.on(c,"focus",r),this.on(c,"focusin",r),this.on(c,"focusout",r),c.focus(),e.selection.selectNode(c,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(c,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==o&&(e.selection.selectRange(this.document,o),o=null),null!==s&&(s=null);var t=this.getPasteBin();t&&t&&(this.off(t,"focus",r),this.off(t,"focusin",r),this.off(t,"focusout",r),this.off(t,"paste",this.boundHandlePaste),t.parentElement.removeChild(t))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e=this.getPasteBin();if(!e)return!1;if(e.firstChild&&"mcepastebin"===e.firstChild.id)return!1;var t=e.innerHTML;return!(!t||t===i)&&t},cleanPaste:function(e){var n,i,o,s,r=/<p|<br|<div/.test(e),a=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(n=0;n<a.length;n+=1)e=e.replace(a[n][0],a[n][1]);if(!r)return this.pasteHTML(e);for(o=this.document.createElement("div"),o.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",i=o.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(s=i[n],s.innerHTML=s.innerHTML.replace(/\n/gi," "),s.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(s);break;case"br":this.filterLineBreak(s)}this.pasteHTML(o.innerHTML)},pasteHTML:function(t,n){n=e.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var i,o,s,r,a=this.document.createDocumentFragment();for(a.appendChild(this.document.createElement("body")),r=a.querySelector("body"),r.innerHTML=t,this.cleanupSpans(r),i=r.querySelectorAll("*"),s=0;s<i.length;s+=1)o=i[s],"a"===o.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(o),e.util.cleanupAttrs(o,n.cleanAttrs),e.util.cleanupTags(o,n.cleanTags),e.util.unwrapTags(o,n.unwrapTags);e.util.insertHTMLCommand(this.document,r.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var n,i,o,s=t.querySelectorAll(".replace-with"),r=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<s.length;n+=1)i=s[n],o=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?o.innerHTML="<i>"+i.innerHTML+"</i>":o.innerHTML=i.innerHTML,i.parentNode.replaceChild(o,i);for(s=t.querySelectorAll("span"),n=0;n<s.length;n+=1){if(i=s[n],e.util.traverseUp(i,r))return!1;e.util.unwrap(i,this.document)}}});e.extensions.paste=a}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(t){t&&(e.util.isFF&&0===t.childNodes.length?(t.classList.add("medium-editor-placeholder-relative"),t.classList.remove("medium-editor-placeholder")):(t.classList.add("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){return e.querySelector("img, blockquote, ul, ol, table, form")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,"static":!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(n){if(n!==this)return e.apply(t||this,arguments)},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this["static"]?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,n,i,o,s,r,a=this.document.createElement("ul");return a.id="medium-editor-toolbar-actions"+this.getEditorId(),a.className="medium-editor-toolbar-actions",a.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(s=i,r=null):(s=i.name,r=i),o=this.base.addBuiltInExtension(s,r),o&&"function"==typeof o.getButton&&(n=o.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(n)?t.appendChild(n):t.innerHTML=n,a.appendChild(t))},this),i=a.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),a},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this["static"]&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return!(t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=e.selection.getSelectionHtml(this.document).replace(t,""),o=i.match(n);return!!o&&o.length>1},modifySelection:function(){var t=this.window.getSelection(),n=t.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var o=0;0===i.nodeValue.substr(o,1).trim().length;)o+=1;n=e.selection.select(this.document,i,o,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||this.getEditorElements().indexOf(t)===-1||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this["static"]?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,n=[],i=null,o=e.selection.getSelectionRange(this.document),s=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(o&&(this.forEachExtension(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&"function"==typeof e.setActive&&e.setActive()):void n.push(e)}),t=e.selection.getSelectedParentElement(o),this.getEditorElements().some(function(n){return e.util.isDescendant(n,t,!0)})))for(;t&&(n.forEach(s),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();return e?void(!this["static"]&&t.isCollapsed||(this.showToolbar(),this.relativeContainer||(this["static"]?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,o=this.getToolbarElement(),s=e.getBoundingClientRect(),r=s.top+n,a=s.left+s.width/2,l=o.offsetHeight,c=o.offsetWidth,d=c/2;switch(this.sticky?n>r+e.offsetHeight-l-this.stickyTopOffset?(o.style.top=r+e.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):n>r-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=r-l+"px"):o.style.top=r-l+"px",this.align){case"left":t=s.left;break;case"right":t=s.right-c;break;case"center":t=a-d}t<0?t=0:t+c>i&&(t=i-Math.ceil(c)-1),o.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),n=t.getBoundingClientRect();(!n||0===n.height&&0===n.width&&t.startContainer===t.endContainer)&&(n=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var i,o,s=this.window.innerWidth,r=this.getToolbarElement(),a=r.offsetHeight,l=r.offsetWidth,c=l/2,d=50,u=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),m=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,f={},p={};m?(o=h.getBoundingClientRect(),["top","left"].forEach(function(e){p[e]=n[e]-o[e]}),p.width=n.width,p.height=n.height,n=p,s=o.width,f.top=h.scrollTop):f.top=this.window.pageYOffset,i=n.left+n.width/2,f.top+=n.top-a,n.top<d?(r.classList.add("medium-toolbar-arrow-over"),r.classList.remove("medium-toolbar-arrow-under"),f.top+=d+n.height-this.diffTop):(r.classList.add("medium-toolbar-arrow-under"),r.classList.remove("medium-toolbar-arrow-over"),f.top+=this.diffTop),i<c?(f.left=u+c,f.right="initial"):s-i<c?(f.left="auto",f.right=0):(f.left=u+i,f.right="initial"),["top","left","right"].forEach(function(e){r.style[e]=f[e]+(isNaN(f[e])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(t){var n,i="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(n=Array.prototype.slice.call(t.dataTransfer.files,0),n.some(function(t){if(t.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(t),i="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.document.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),t.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,o=e.selection.getCaretOffsets(n);(void 0===i[o.left-1]||""===i[o.left-1].trim()||void 0!==i[o.left]&&""===i[o.left].trim())&&t.preventDefault()}function n(t,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=e.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&t.preventDefault()}}function i(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n&&n.nodeName.toLowerCase();"pre"===i&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(n)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument),o=i.nodeName.toLowerCase(),s=/^(\s+|<br\/?>)?$/i,r=/h\d/i,d=a(i);if(e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&i.previousElementSibling&&r.test(o)&&0===e.selection.getCaretOffsets(i).left)e.util.isKey(t,e.util.keyCode.BACKSPACE)&&s.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),t.preventDefault());else if(e.util.isKey(t,e.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!r.test(o)&&s.test(i.innerHTML)&&r.test(i.nextElementSibling.nodeName.toLowerCase()))e.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault();else if(e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===o&&s.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase())n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),e.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),t.preventDefault();else if(e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).left)t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p");else if(e.util.isKey(t,e.util.keyCode.ENTER)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).right)n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),e.selection.moveCursor(this.options.ownerDocument,n),t.preventDefault();else if(e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(i.parentElement)&&!i.previousElementSibling&&i.nextElementSibling&&s.test(i.innerHTML))t.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,i.nextSibling),i.parentElement.removeChild(i);else if(e.util.isKey(t,e.util.keyCode.BACKSPACE)&&d&&d.previousElementSibling&&0===e.selection.getCaretOffsets(i).left){if(t.preventDefault(),0===d.previousElementSibling.innerText.trim().length){for(;d.previousElementSibling.firstChild;)d.previousElementSibling.removeChild(d.previousElementSibling.firstChild);e.selection.moveCursor(this.options.ownerDocument,d.previousElementSibling)}else{var u=l(d.previousElementSibling);c(u[u.length-1],u[u.length-1].length)}for(;d.childNodes.length>0;)d.previousElementSibling.appendChild(d.childNodes[0]);d.remove()}}function s(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument);i&&(e.util.isKey(t,e.util.keyCode.ENTER)&&"undefined"!=typeof this.options.extensions["rexbutton-input"]&&this.options.extensions["rexbutton-input"].insideRexButton(i)||(e.util.isMediumEditorElement(i)&&0===i.children.length&&!e.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(i)||e.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||a(i)||this.options.ownerDocument.execCommand("formatBlock",!1,"p"))))}function r(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}function a(t){var n=t.nodeName.toLowerCase(),i=/h\d/i;return!e.util.isMediumEditorElement(t)&&(i.test(n)?t:a(t.parentNode))}function l(e){for(var t,n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)n.push(t);return n}function c(e,t){t="undefined"!=typeof t?t:0;var n=document.createRange(),i=window.getSelection();n.setStart(e,t),n.collapse(!0),i.removeAllRanges(),i.addRange(n)}function d(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function u(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function h(t,n,i){var o=[];if(t||(t=[]),"string"==typeof t&&(t=n.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]),i)for(var s=0;s<t.length;s++){var r=t[s];!e.util.isElement(r)||r.getAttribute("data-medium-editor-element")||r.getAttribute("medium-editor-textarea-id")||o.push(r)}else o=Array.prototype.slice.apply(t);return o}function m(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function p(e,t,n){var i={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return e=f(e,i),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function g(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&this.options.toolbar!==!1}function b(){return!!g.call(this)&&this.options.anchorPreview!==!1}function v(){return this.options.placeholder!==!1}function E(){return this.options.autoLink!==!1}function C(){return this.options.imageDragging!==!1}function y(){return this.options.keyboardCommands!==!1}function w(){return!this.options.extensions.imageDragging}function x(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,o=e.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var s=0,r=o.length;s<r;s++)t.hasAttribute(o[s].nodeName)||t.setAttribute(o[s].nodeName,o[s].value);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}function T(t,i){if(!t.getAttribute("data-medium-editor-element")){"textarea"===t.nodeName.toLowerCase()&&(t=x.call(this,t),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=r.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||t.getAttribute("data-disable-return")||this.on(t,"keyup",s.bind(this));var o=e.util.guid();t.setAttribute("data-medium-editor-element",!0),t.classList.add("medium-editor-element"),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("data-medium-editor-editor-index",i),t.setAttribute("medium-editor-index",o),D[o]=t.innerHTML,this.events.attachAllEventsToElement(t)}return t}function S(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function k(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(p(this.options.extensions[e],e,this))},this),w.call(this)){var t=this.options.fileDragging;t||(t={},C.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var n={paste:!0,"anchor-preview":b.call(this),autoLink:E.call(this),keyboardCommands:y.call(this),placeholder:v.call(this)};Object.keys(n).forEach(function(e){n[e]&&this.addBuiltInExtension(e)},this);var i=this.options.extensions.toolbar;if(!i&&g.call(this)){var o=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new e.extensions.toolbar(o)}i&&this.extensions.push(p(i,"toolbar",this))}function A(t,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(t){n.hasOwnProperty(t[0])&&void 0!==n[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},n,t)}function N(t,n){var i,o,s=/^append-(.+)$/gi,r=/justify([A-Za-z]*)$/g;if(i=s.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===t)return n.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),o=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,o);if("fontName"===t)return n.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),o=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,o);if("createLink"===t)return this.createLink(n);if("image"===t){var a=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,a)}if("html"===t){var l=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,l)}if(r.exec(t)){var c=this.options.ownerDocument.execCommand(t,!1,null),d=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return d&&L.call(this,e.util.getTopBlockContainer(d)),c}return o=n&&n.value,this.options.ownerDocument.execCommand(t,!1,o)}function L(t){if(t){var n,i=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t});i.length&&(this.saveSelection(),i.forEach(function(t){if(t.style.textAlign===n){var i=t.lastChild;if(i){e.util.unwrap(t,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(o,i.nextSibling)}}},this),t.style.textAlign=n,this.restoreSelection())}}var D={};e.prototype={init:function(e,t){return this.options=A.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(d.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,k.call(this),S.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.classList.remove("medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&m(e)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,u.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e();
},this.options.delay)},serialize:function(){var e,t,n={},i=this.elements.length;for(e=0;e<i;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===e&&(t=n,!0)}),t},addBuiltInExtension:function(t,n){var i,o=this.getExtensionByName(t);if(o)return o;switch(t){case"anchor":i=e.util.extend({},this.options.anchor,n),o=new e.extensions.anchor(i);break;case"anchor-preview":o=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new e.extensions.autoLink;break;case"fileDragging":o=new e.extensions.fileDragging(n);break;case"fontname":o=new e.extensions.fontName(this.options.fontName);break;case"fontsize":o=new e.extensions.fontSize(n);break;case"keyboardCommands":o=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new e.extensions.paste(this.options.paste);break;case"placeholder":o=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(n?(i=e.util.defaults({},n,e.extensions.button.prototype.defaults[t]),o=new e.extensions.button(i)):o=new e.extensions.button(t))}return o&&this.extensions.push(p(o,t,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(o){i=null}return i},execAction:function(t,n){var i,o,s=/^full-(.+)$/gi;return i=s.exec(t),i?(this.saveSelection(),this.selectAllContents(),o=N.call(this,i[1],n),this.restoreSelection()):o=N.call(this,t,n),"insertunorderedlist"!==t&&"insertorderedlist"!==t||e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var n=e.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(t),i=null;return n>=0&&(i=e.selection.exportSelection(t,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,n){if(t){var i=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var n,i=e.selection.getSelectionElement(this.options.contentWindow),o={};if(this.elements.indexOf(i)!==-1){try{if(this.events.disableCustomEvent("editableInput"),t.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),n=t.url||t.value,n&&n.trim().length>0){var s=this.options.contentWindow.getSelection();if(s){var r,a,l,c,d=s.getRangeAt(0),u=d.commonAncestorContainer;if(3===d.endContainer.nodeType&&3!==d.startContainer.nodeType&&0===d.startOffset&&d.startContainer.firstChild===d.endContainer&&(u=d.endContainer),a=e.util.getClosestBlockContainer(d.startContainer),l=e.util.getClosestBlockContainer(d.endContainer),3!==u.nodeType&&0!==u.textContent.length&&a===l){var h=a||i,m=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),r=this.exportSelection(),m.appendChild(h.cloneNode(!0)),i===h?e.selection.select(this.options.ownerDocument,h.firstChild,0,h.lastChild,3===h.lastChild.nodeType?h.lastChild.nodeValue.length:h.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,h,0,h,h.childNodes.length);var f=this.exportSelection();c=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,m,{start:r.start-f.start,end:r.end-f.start,editableElementIndex:r.editableElementIndex}),0===c.length&&(m=this.options.ownerDocument.createDocumentFragment(),m.appendChild(u.cloneNode(!0)),c=[m.firstChild.firstChild,m.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,c,n.trim());var p=(m.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,m.firstChild.innerHTML.replace(/^\s+/,"")),r.start-=p,r.end-=p,this.importSelection(r)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){o=this.options.ownerDocument.createEvent("HTMLEvents"),o.initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,b=this.elements.length;g<b;g+=1)this.elements[g].dispatchEvent(o)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",o,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var n=this.elements[t];n.innerHTML=e,this.checkContentChanged(n)}},getContent:function(e){return e=e||0,this.elements[e]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(t){t=t||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(t,{target:t,currentTarget:t})},resetContent:function(e){if(e){var t=this.elements.indexOf(e);return void(t!==-1&&this.setContent(D[e.getAttribute("medium-editor-index")],t))}this.elements.forEach(function(e,t){this.setContent(D[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){var t=h(e,this.options.ownerDocument,!0);return 0!==t.length&&void t.forEach(function(e){e=T.call(this,e,this.id),this.elements.push(e),this.trigger("addElement",{target:e,currentTarget:e},e)},this)},removeElements:function(e){var t=h(e,this.options.ownerDocument),n=t.map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return n.indexOf(e)===-1||(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&m(e),this.trigger("removeElement",{target:e,currentTarget:e},e),!1)},this)}},e.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),n=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[t]?n._mediumEditors[t]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),n=t[0].split("."),i=t.length>1?t[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},e.version=e.parseVersionString.call(this,{version:"5.23.3"}.version),e}());
var MediumEditorToolbarStates=MediumEditor.Extension.extend({name:"toolbar_states",attributeName:"data-toolbar-state",hideClass:"hide",states:{},hasNodeNames:!1,init:function(){var t=this;MediumEditor.Extension.prototype.init.apply(this,arguments),Object.keys(this.states).forEach(function(e){var a=t.states[e];a.nodeNames&&(t.hasNodeNames=!0)}),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this))},destroy:function(){},selectedStateName:"default",pendingStateName:null,checkState:function(t){this.pendingStateName||(this.getStateNameForNode&&"function"==typeof this.getStateNameForNode?this.pendingStateName=this.getStateNameForNode(t)||null:this.hasNodeNames?this.pendingStateName=this.getStateNameFromNodeNames(t)||null:t.hasAttribute(this.attributeName)&&(this.pendingStateName=t.getAttribute(this.attributeName)||null)),MediumEditor.util.isMediumEditorElement(t)&&(this.selectedStateName=this.pendingStateName||"default",this.pendingStateName=null)},getStateNameFromNodeNames:function(t){var e,a=this;return Object.keys(this.states).forEach(function(s){var i=a.states[s];i.nodeNames&&i.nodeNames.indexOf(t.nodeName)>=0&&(e=s)}),e},handlePositionToolbar:function(t,e){var a={buttons:this.base.getExtensionByName("toolbar").buttons};a=this.getState&&"function"==typeof this.getState?this.getState(e)||a:this.states[this.selectedStateName]||a,this.updateToolbarState(a)},updateToolbarState:function(t){var e,a,s=this.base.getExtensionByName("toolbar"),i=this;s.forEachExtension(function(o){var n;"function"==typeof o.getButton&&(-1!=t.buttons.indexOf(o.name)?(n=o.getButton(),n.classList.remove(i.hideClass),e=e||n,a=n):(n=o.getButton(),n.classList.add(i.hideClass)),n.classList.remove(s.firstButtonClass),n.classList.remove(s.lastButtonClass))}),e&&a&&(e.classList.add(s.firstButtonClass),a.classList.add(s.lastButtonClass))}});
/**
 * JS Object to manipulate and reorder a grid
 * @param {int} maxWidth max column width
 * @since 2.0.0
 */
function IndexedGrid(i){i="undefined"!=typeof i?i:12,this.grid=[],this.maxWidth=i}IndexedGrid.prototype.insertionSort=function(){for(var i,r=this.grid.length,t=1;t<r;t++){for(var d=this.grid[t],i=t-1;i>=0&&this.grid[i]>d;i--)this.grid[i+1]=this.grid[i];this.grid[i+1]=d}},IndexedGrid.prototype.setGrid=function(i,r,t,d){for(var h=0;h<d;h++)for(var e=0;e<t;e++)this.grid.push(i+e+(r+h)*this.maxWidth);this.insertionSort()},IndexedGrid.prototype.checkGrid=function(i){for(var r=0;this.grid[r]<i;){var t=this.grid[r];t+1!==this.grid[r+1]&&this.grid.push(t+1),r++}this.insertionSort()},IndexedGrid.prototype.willFit=function(i,r){if(0==this.grid.length)return 0;for(var t=this.findHoles(),d=0,h=t.length;d<h;d++){var e=t[d],o=t[d]+1;if("undefined"!=typeof e&&"undefined"!=typeof o)for(var n=this.grid[e]+1;n<this.grid[o];n++){var s=this.searchFreeSpace(n,i,r);if(s)return n}}for(var f=this.grid[this.grid.length-1]+1,a=Math.floor(f/this.maxWidth),g=Math.floor((f+(i-1))/this.maxWidth);a!==g;)f+=1,a=Math.floor(f/this.maxWidth),g=Math.floor((f+(i-1))/this.maxWidth);return f},IndexedGrid.prototype.findHoles=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)"undefined"!=typeof this.grid[r+1]&&this.grid[r]+1===this.grid[r+1]||i.push(r);return i},IndexedGrid.prototype.searchFreeSpace=function(i,r,t){var d=Math.floor(i/this.maxWidth),h=Math.floor((i+r-1)/this.maxWidth);if(d!==h)return!1;for(var e=0;e<t;e++)for(var o=0;o<r;o++){var n=i+o+e*this.maxWidth;if(-1!==this.grid.indexOf(n))return!1}return!0},IndexedGrid.prototype.negativeGrid=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)if(this.grid[r]+1!==this.grid[r+1])for(var d=this.grid[r]+1;d<this.grid[r+1];d++)i.push(d);return i};
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.4
 */
var Rexbuilder_Live_Templates=function(){"use strict";function t(t,o){switch(t){case"tmpl-tool-save":return'<div class="rex-modal__outside-footer"><div class="tool-button tool-button--inline tool-button--confirm tool-button--modal rex-modal-option tippy" data-tippy-content="Save" data-rex-option="save"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z016-Checked"></use></svg></i></span></div><div class="tool-button tool-button--inline tool-button--modal rex-modal-option tippy" data-rex-option="reset" data-tippy-content="Reset"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i></span></div></div>';case"tmpl-tool-close":return'<div class="tool-button tool-button--black tool-button--close rex-modal__close-button"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div>';case"tmpl-palette-item":return'<div class="palette-item"><div class="tool-button tool-button--deactivate palette-item__delete"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"tmpl-block-drag-handle":return'<div class="rexlive-block-drag-handle"></div>';case"tmpl-new-section":return o="undefined"!=typeof o?o:{rexID:"",dimension:"full",dimensionClass:"center-disposition",layout:"fixed",sectionWidth:"100%",fullHeight:"false",blockDistance:20,rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},'<section class="rexpansive_section empty-section'+(o.rowSeparatorTop<25?" ui-tools--near-top":"")+'" data-rexlive-section-id="'+o.rexID+'" data-rexlive-section-name=""> <div class="section-data" style="display: none;" data-section_name="" data-type="perfect-grid" data-color_bg_section="" data-color_bg_section_active="true"data-dimension="'+o.dimension+'" data-image_bg_section_active="true" data-image_bg_section="" data-id_image_bg_section=""data-video_bg_url_section="" data-video_bg_id_section="" data-video_bg_width_section="" data-video_bg_height_section="" data-video_bg_url_vimeo_section="" data-full_height="'+o.fullHeight+'"data-block_distance="'+o.blockDistance+'" data-layout="'+o.layout+'" data-responsive_background="" data-custom_classes=""data-section_width="'+o.sectionWidth+'" data-row_separator_top="'+o.rowSeparatorTop+'" data-row_separator_bottom="'+o.rowSeparatorBottom+'"data-row_separator_right="'+o.rowSeparatorRight+'" data-row_separator_left="'+o.rowSeparatorLeft+'" data-margin=""data-row_margin_top="" data-row_margin_bottom="" data-row_margin_right="" data-row_margin_left="" data-row_active_photoswipe=""data-row_overlay_color="" data-row_overlay_active="false" data-rexlive_section_id="'+o.rexID+'" data-row_edited_live="true"></div> <div class="responsive-overlay"> <div class="rex-row__dimension '+o.dimensionClass+'"> <div class="perfect-grid-gallery grid-stack grid-stack-row" data-separator="'+o.blockDistance+'" data-layout="'+o.layout+'"data-full-height="'+o.fullHeight+'" data-row-separator-top="'+o.rowSeparatorTop+'" data-row-separator-right="'+o.rowSeparatorRight+'"data-row-separator-bottom="'+o.rowSeparatorBottom+'" data-row-separator-left="'+o.rowSeparatorLeft+'"> <div class="perfect-grid-sizer"></div> </div> </div> </div> </section>';case"tmpl-toolbox-section":return o="undefined"!=typeof o?o:{rexID:"",dimension:"full",layout:"fixed"},'<div class="section-toolBox"><div class="tools"><div class="bl_d-flex bl_ai-c tools-area tool-area--side tool-area--left"><div class="switch-toggle switch-live switch-dimension"><input type="radio" class="edit-row-width" data-section_width="full" id="row-dimension-full-'+o.rexID+'" name="row-dimension-'+o.rexID+'" value="100%"'+("full"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.full+'" for="row-dimension-full-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B001-Full"></use></svg></i></span></label><input type="radio" class="edit-row-width" data-section_width="boxed" id="row-dimension-boxed-'+o.rexID+'" name="row-dimension-'+o.rexID+'" value="80%"'+("boxed"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.boxed+'" for="row-dimension-boxed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B002-Boxed"></use></svg></i></span></label></div><div class="switch-toggle switch-live" style="display:none;"><input type="radio" class="edit-row-layout" data-section_layout="fixed" id="row-layout-fixed-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="fixed"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid+'" for="row-layout-fixed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label><input type="radio" class="edit-row-layout" data-section_layout="masonry" id="row-layout-masonry-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="masonry"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.masonry+'" for="row-layout-masonry-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B010-Masonry"></use></svg></i></span></label></div><div class="bl_switch tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid_on_off+'"><label><input class="edit-row-layout-checkbox" type="checkbox"'+("fixed"==o.layout?" checked":"")+'><span class="lever"></span><span class="bl_switch__icon"><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label></div><div class="tool-button tool-button--flat tool-button--inline collapse-grid tippy" data-tippy-content="'+_plugin_frontend_settings.labels.collapse+'"><i class="l-svg-icons"><svg><use xlink:href="#B006-Collapse"></use></svg></i></div></div><div class="bl_d-flex bl_ai-c tools-area tools-area--right-small tool-area--center"><div class="tool-button tool-button--flat tool-button--inline tool-button__image--flat add-new-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_image+'"><i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i></div><div class="tool-button tool-button--flat tool-button__text--flat add-new-block-text tool-button--inline tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_text+'"><i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i></div> <div class="tool-button tool-button--flat tool-button--inline tool-button__video--flat add-new-block-video tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button-floating tool-button-floating--wide"> <div class="tool-button tool-button--flat active"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--section"> <div class="tool-button add-new-block-slider tool-button_list--item tool-button_list--section-item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tippy add-new-section tool-button_list--item tool-button_list--section-item" data-tippy-content="'+_plugin_frontend_settings.labels.insert_row+'" data-new-row-position="after"> <i class="l-svg-icons"><svg><use xlink:href="#B016-New-Adjacent-Row"></use></svg></i> </div> </div> </div> </div> <div class="bl_d-flex bl_ai-c bl_jc-fe tools-area tool-area--side"> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__fast-configuration"> <div class="tool-button tool-button--flat update-model-button tool-button--distance-fix--small locked tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <span class="unlocked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B015-UnClosed"></use></svg></i> </span> <span class="locked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-row-image-background tippy" data-tippy-content="" value=""> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--opacity-preview tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button__video-fast tool-button--hide tool-button--distance-fix tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline tool-button--flat edit-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--deactivate tool-button--double-icon deactivate-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__standard-configuration"> <div class="tool-button tool-button--flat tool-button--inline builder-copy-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button tool-button--flat tool-button--inline builder-move-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.move_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i> </div> <div class="tool-button-floating tool-button--model-hide"> <div class="tool-button tool-button--flat tool-button--flat--distance-fix" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button builder-section-config tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-background-section tippy tool-button--hide"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-row-image-background tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tool-button--opacity-preview tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button edit-row-video-background tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button open-model tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <i class="l-svg-icons"><svg><use xlink:href="#B005-RexModel"></use></svg></i> </div> <div class="tool-button synch-section-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--flat tool-button--inline builder-delete-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="section-toolBoox__highlight"></div> <div class="section-block-noediting-ui"> <div class="no-editing--indicator bl_d-flex bl_jc-c bl_ai-c"> <span class="call-update-model-button"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> </div>';case"tmpl-toolbox-block-wrap":return o="undefined"!=typeof o?o:{block_type:""},'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position tool-button--hide" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("image"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image tippy"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("video"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--black builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools" data-block_type="'+o.block_type+'"> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+("video"!=o.block_type?" tool-button--hide":"")+'"> <div class="tool-button tool-button--inline edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-toolbox-block-wrap-clean":return'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content'+(o.has_content?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.text+'"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position'+(o.has_content?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.content_position+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_image?"":" tool-button--hide")+'"> <div class="tool-button tool-button--inline edit-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item'+(o.not_has_overlay?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_video?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview'+(o.not_has_overlay?" tool-button--hide ":" tool-button--picker-preview ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"'+(o.not_has_overlay?"":' style="background-color:'+o.overlay+';"')+'></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+(o.not_has_video?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"><div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-rexbutton-tools-top":
return'<div class="rex-button-tools-container"> <div class="tool-button rex-delete-button tippy" data-tippy-content="'+_plugin_frontend_settings.labels["delete"]+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div>';case"tmpl-rexbutton-tools-bottom":return'<div class="rex-button-tools-container"> <div class="tool-button tool-button_list--item tippy rex-edit-button" data-tippy-content="'+_plugin_frontend_settings.labels.config+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> </div>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-inline-svg-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-svg-color medium-editor-button-first"> <span class="meditor-color-picker"><span class="meditor-color-picker__placeholder">P</span></span> <span class="meditor-color-picker--preview"></span> </button> </li> <li> <button class="medium-editor-action me-svg-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-svg-inline"> <i class="fa fa-info-circle"></i> </button> </li> <li> <button class="medium-editor-action me-svg-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-insert-media-button":return'<input type="text" class="me-insert-embed__value"> <div class="tool-button-floating"> <div class="tool-button"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--vertical_top"> <div class="tool-button tool-button_list--item me-insert-inline-svg"> <i class="l-svg-icons"><svg><use xlink:href="#C008-Star"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-embed"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> </div>';case"wpcf7-form-tools":return'<div class="rexwpcf7-form-tools" contenteditable="false"><div class="tool-button tool-button--flat tool-button--add-big wpcf7-form-button wpcf7-add-new-row tippy" data-tippy-content="Add Row" data-operation="addRow"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="wpcf7-select-columns wpcf7-select-columns--bottom"><ul><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div></div>';case"wpcf7-row-tools":return'<div class="rexwpcf7-row-tools" contenteditable="false"><div class="tool-button rex-wpcf7-row-drag tippy" data-tippy-content="'+_plugin_frontend_settings.labels.drag+'" ><i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i></div><div class="tool-button wpcf7-form-button rex-wpcf7-row-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--black wpcf7-form-button rex-wpcf7-row-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels["delete"]+'" data-operation="deleteRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-column-tools":return'<div contenteditable="false" class="rexwpcf7-column-tools">'+(o.name?'<div class="tool-button rex-wpcf7-column-info tippy" data-tippy-content="'+o.name+'"><i class="l-svg-icons"><svg><use xlink:href="#Z015-Question-Mark-Sign"></use></svg></i></div>':"")+'<div class="tool-button tool-button--pink wpcf7-form-button rex-wpcf7-column-settings tippy" data-tippy-content="'+_plugin_frontend_settings.labels.settings+'" data-operation="columnSettings"><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button wpcf7-form-button rex-wpcf7-column-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneColumn"><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--black wpcf7-form-button rex-wpcf7-column-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels["delete"]+'" data-operation="deleteColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-button-fix":return'<span class="wpcf7-form-control-wrap"></span>';case"rexelement-tools":return'<div contenteditable="false" class="rexelement-tools"><div class="wpcf7-select-columns wpcf7-select-columns--top"><ul><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div><div class="tool-button tool-button--blue wpcf7-form-button rex-add-row tippy" data-tippy-content="Add Row" data-operation="addRowTop"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="tool-button wpcf7-form-button rex-edit-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels[o.settingsType]+'" data-operation="editElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button tool-button--black wpcf7-form-button rex-delete-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels["delete"]+'" data-operation="deleteElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-plus-button-inside-row":return'<div class="tool-button tool-button--flat tool-button--add-big-pink wpcf7-form-button wpcf7-add-new-form-content" data-operation="addColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div>';default:return""}}return{getTemplate:t}}();
/**
 * Utilities functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Live_Utilities=function($){"use strict";var PLATFORM_IS_MAC=window.navigator.platform.match("Mac"),tippyCollection,_tooltips=function(){tippyCollection=tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},_addSpectrumCustomSaveButton=function(e){var t=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-save"),i=$(t);e.spectrum("container").append(i);var o=i.find(".rex-modal-option");o.on("click",function(t){switch(t.stopPropagation(),t.preventDefault(),this.getAttribute("data-rex-option")){case"save":e.spectrum("container").find(".sp-choose").trigger("click");break;case"reset":e.spectrum("set",e.attr("data-color-on-show")),e.spectrum("container").find(".sp-input").trigger("change")}})},_addSpectrumCustomCloseButton=function(e){var t=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-close"),i=$(t);e.spectrum("container").append(i),i.on("click",function(t){t.stopPropagation(),t.preventDefault(),e.attr("data-revert",!0),e.spectrum("container").find(".sp-cancel").trigger("click")})},_removeColorPicker=function(e){e.find(".tool-button--spectrum").remove()},_removeTextEditor=function(e){var t,i,o,r=e.find(".text-wrap");0!=r.length&&r.hasClass("medium-editor-element")&&(t=r.html(),i=$(document.createElement("div")),o=r.attr("style"),i.appendTo(r.parent()),i.addClass("text-wrap"),r.hasClass("rex-content-resizable")&&i.addClass("rex-content-resizable"),r.remove(),i.attr("style",o),i.html(t),i.find(".text-editor-span-fix").remove(),i.find(".medium-insert-buttons").remove()),r=void 0,t=void 0,i=void 0,o=void 0},_removeHandles=function(e){e.children(".ui-resizable-handle").each(function(e,t){$(t).remove()})},_hideAllTools=function(){Rexbuilder_Util_Editor.manageElement=!1,Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("focusedRow").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item").removeClass("focused"),Rexbuilder_Util.$rexContainer.find(".tool-button-floating--active").removeClass("tool-button-floating--active")},_getBackgroundUrlFromCss=function(e){return e.replace("url(","").replace(")","").replace(/\"/gi,"")},_generateElementNewIDs=function(e,t,i){var o="block_"+i+"_"+t,r=e.children(".rexbuilder-block-data"),d=Rexbuilder_Util.createBlockID();e.attr("data-rexbuilder-block-id",d),r.attr("data-rexbuilder_block_id",d),e.attr("id",o),r.attr("data-id",o),r.attr("id",o+"-builder-data")},_fixCopiedElementSlider=function(e){if(e.hasClass("block-has-slider")){var t=e.find(".text-wrap"),i=e.attr("data-rexbuilder-block-id"),o=t.children('.rex-slider-wrap[data-rex-slider-active="true"]');t.children().remove();var r=e.parents(".rexpansive_section"),d=r.attr("data-rexlive-section-id"),n="undefined"!=typeof r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",l={sectionID:d,modelNumber:n,rexID:i},a=Rexbuilder_Live_Utilities.createSliderData(o);Rexbuilder_Live_Utilities.saveSliderOnDB(a,!0,i,l)}},removeDeletedBlocks=function(e){e.children(".removing_block").each(function(){$(this).remove()})},_createSliderData=function($sliderWrapper){for(var auto_start="true"==$sliderWrapper.attr("data-rex-slider-animation").toString(),prev_next="1"==$sliderWrapper.attr("data-rex-slider-prev-next").toString(),dots="1"==$sliderWrapper.attr("data-rex-slider-dots").toString(),data={id:parseInt($sliderWrapper.attr("data-slider-id")),settings:{auto_start:auto_start,prev_next:prev_next,dots:dots},slides:[]},slides=$sliderWrapper.find(".rex-slider-element"),i=0;i<slides.length;i++){var $slide=$(slides[i]),slide={slide_image_id:"",slide_image_url:"",slide_url:"",slide_text:"",slide_video:"",slide_videoMp4Url:"",slide_video_audio:"",slide_video_type:""};slide.slide_image_id=isNaN(parseInt($slide.attr("data-rex-slide-image-id")))?"":parseInt($slide.attr("data-rex-slide-image-id"));var backgroundImageUrl=Rexbuilder_Live_Utilities.getBackgroundUrlFromCss($slide.css("background-image"));"none"!=backgroundImageUrl&&(slide.slide_image_url=backgroundImageUrl);var $linkDiv=$slide.children("a");0!=$linkDiv.length&&(slide.slide_url=$linkDiv.attr("href"));var $textContent=$slide.find(".rex-slider-element-title");0!=$textContent.length&&0!=$textContent.html().trim().length&&(slide.slide_text=$textContent.html());var $videoMp4Wrap=$slide.find(".mp4-player"),$videoVimeoWrap=$slide.find(".vimeo-player"),$videoYoutubeWrap=$slide.find(".youtube-player");if(0!=$videoMp4Wrap.length&&(slide.slide_video=parseInt($videoMp4Wrap.children(".rex-video-wrap").attr("data-rex-video-mp4-id")),slide.slide_videoMp4Url=$videoMp4Wrap.find("source").attr("src"),slide.slide_video_audio=0!=$videoMp4Wrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="mp4"),0!=$videoVimeoWrap.length){var $iframe=$videoVimeoWrap.find("iframe");slide.slide_video=$iframe.attr("src").split("?")[0],slide.slide_video_audio=0!=$videoVimeoWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="vimeo"}if(0!=$videoYoutubeWrap.length){var $ytpPlayer=$videoYoutubeWrap.find(".rex-youtube-wrap"),elemData=jQuery.extend(!0,{},eval("("+$ytpPlayer.attr("data-property")+")"));slide.slide_video=elemData.videoURL,slide.slide_video_audio=0!=$videoYoutubeWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="youtube"}data.slides.push(slide)}return data},_saveSliderOnDB=function(e,t,i,o){var r={eventName:"rexlive:uploadSliderFromLive",sliderInfo:{slider:e,newSlider:t,blockID:i,target:o}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)},_getElementsPhotoswipe=function(e){var t=[];return e.children(".grid-stack-item:not(.removing_block)").each(function(e,i){var o=$(i),r=o.children(".rexbuilder-block-data"),d={$data:r,photoswipe:!1};"true"==r.attr("data-photoswipe").toString()&&(d.photoswipe=!0),t.push(d)}),t},_fixToolsVisibility=function(e){"default"==e?(Rexbuilder_Util.$rexContainer.removeClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.parent().removeClass("rex-hide-responsive-tools")):(Rexbuilder_Util.$rexContainer.parent().addClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.addClass("rex-hide-responsive-tools"))},setEndOfContenteditable=function(e){var t,i;document.createRange?(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):document.selection&&(t=document.body.createTextRange(),t.moveToElementText(e),t.collapse(!1),t.select())},_updateModelSectionTools=function(e,t){var i=Rexbuilder_Util_Editor.rowAttrsObj(t[0]),o={idImage:"undefined"!=typeof i.id_image_bg_section?i.id_image_bg_section:"",urlImage:"undefined"!=typeof i.image_bg_section?i.image_bg_section:""},r="undefined"!=typeof i.color_bg_section?i.color_bg_section:"",d={active:"undefined"!=typeof i.row_overlay_active?i.row_overlay_active:"",color:"undefined"!=typeof i.row_overlay_color?i.row_overlay_color:""},n={typeVideo:""};"undefined"!=typeof i.video_mp4_url&&""!=i.video_mp4_url?n.typeVideo="mp4":"undefined"!=typeof i.video_bg_url_vimeo_section&&""!=i.video_bg_url_vimeo_section?n.typeVideo="vimeo":"undefined"!=typeof i.video_bg_url_section&&""!=i.video_bg_url_section&&(n.typeVideo="youtube"),Rexbuilder_Section_Editor.updateSectionDimensionTool(e,i),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,i),""!==o.idImage?Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,o):Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e),-1===r.indexOf("gradient")?Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,r):Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,r),-1===d.color.indexOf("gradient")?(Rexbuilder_Dom_Util.updateSectionOverlay(e,d),Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,d)):(Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,d),Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,d)),Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,n),e.find(".perfect-grid-item").each(function(e,t){var i=$(t);Rexbuilder_Live_Utilities.updateModelBlocksTools(i,i.find(".rexbuilder-block-data"))})},_updateModelBlocksTools=function(e,t){Rexbuilder_Util_Editor.blockAttrsObj(t[0]);e.removeClass("has-rs-animation")},addWindowListeners=function(){function e(e){if((PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&83==e.keyCode){e.preventDefault();var t={eventName:"rexlive:savePageWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}else if("BODY"==e.target.nodeName&&(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode){e.preventDefault();var t={eventName:"rexlive:undoWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}else if("BODY"==e.target.nodeName&&((PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&89==e.keyCode)){e.preventDefault();var t={eventName:"rexlive:redoWithButton"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}else if(27===e.keyCode&&!Rexbuilder_Util_Editor.editingGallery){var t={eventName:"rexlive:esc_pressed"};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}function t(e){if(e.data.rexliveEvent){var t=jQuery.Event(e.data.eventName);t.settings={},jQuery.extend(t.settings,e.data),Rexbuilder_Util.$document.trigger(t)}}document.addEventListener("keydown",e),Rexbuilder_Util.$window.on("mousedown",function(e){Rexbuilder_Util_Editor.mouseDown=!0,Rexbuilder_Util_Editor.mouseUp=!1}),Rexbuilder_Util.$window.on("mouseup",function(e){Rexbuilder_Util_Editor.mouseDown=!1,Rexbuilder_Util_Editor.mouseUp=!0}),Rexbuilder_Util.$window[0].addEventListener("message",t,!1)},addDocumentListeners=function(){Rexbuilder_Util.$document.on("rexlive:changeLayout",function(e){var t=e.settings;Rexbuilder_Util_Editor.undoStackArray=[],Rexbuilder_Util_Editor.redoStackArray=[],Rexbuilder_Util.chosenLayoutData=jQuery.extend(!0,{},t.layoutData),Rexbuilder_Util_Editor.changedLayout=!0,Rexbuilder_Util_Editor.clickedLayoutID=t.selectedLayoutName,Rexbuilder_Live_Utilities.fixToolsVisibility(t.selectedLayoutName)}),Rexbuilder_Util.$document.on("rexlive:startChangeLayout",function(e){Rexbuilder_Util_Editor.startLoading()}),Rexbuilder_Util.$document.on("rexlive:updateLayoutsDimensions",function(e){var t=e.settings.data_to_send;$("#layout-avaiable-dimensions").text(JSON.stringify(t.layouts)),t.updateHeights&&(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.updateGridsHeights(),Rexbuilder_Util.windowIsResizing=!1)}),Rexbuilder_Util.$document.on("rexlive:undo",function(e){if(Rexbuilder_Util_Editor.undoStackArray.length>0){var t={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(t);var i=Rexbuilder_Util_Editor.undoStackArray.pop();Rexbuilder_Dom_Util.performAction(i,!1),Rexbuilder_Util_Editor.redoStackArray.push(i)}Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:redo",function(e){if(Rexbuilder_Util_Editor.redoStackArray.length>0){var t=Rexbuilder_Util_Editor.redoStackArray.pop();Rexbuilder_Dom_Util.performAction(t,!0),Rexbuilder_Util_Editor.undoStackArray.push(t)}Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:updateSlider",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSliderStack(t.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:change_section_bg_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSectionBackgroundColorLive(t.data_to_send.sectionTarget,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_section_overlay_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateSectionOverlayColorLive(t.data_to_send.sectionTarget,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_bg_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateBlockBackgroundColorLive(t.data_to_send.target,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_overlay_color",function(e){var t=e.settings;Rexbuilder_Dom_Util.updateBlockOverlayColorLive(t.data_to_send.target,t.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:newSliderSavedOnDB",function(e){var t=e.settings;Rexbuilder_CreateBlocks.createSlider(t.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:dropChanges",function(e){Rexbuilder_Util_Editor.startLoading();var t=e.settings.data_to_send;Rexbuilder_Util_Editor.restorePageStartingState(t)}),Rexbuilder_Util.$document.on("rexlive:lockRows",function(e){Rexbuilder_Util_Editor.lockRows()}),Rexbuilder_Util.$document.on("rexlive:unlockRows",function(e){Rexbuilder_Util_Editor.releaseRows()}),Rexbuilder_Util.$document.on("rexlive:close_modal",function(e){Rexbuilder_Live_Utilities.hideAllTools();var t=Rexbuilder_Util.rexContainer.querySelector(".needs-refocus");t&&(Rexbuilder_Util.addClass(t,"focusedRow"),Rexbuilder_Util.removeClass(t,"needs-refocus"))}),Rexbuilder_Util.$document.on("rexlive:openCreateModelModal",function(e){var t=e.settings.data_to_send;$(".rexpansive_section[data-rexlive-section-id="+t.sectionTarget.sectionID+"]").find(".open-model").trigger("click")}),Rexbuilder_Util.$document.on("rexlive:importButton",function(e){Rexbuilder_Rexbutton.fixImportedButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateButtonLive",function(e){Rexbuilder_Rexbutton.updateButtonLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_button",function(e){Rexbuilder_Rexbutton.removeSeparateButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_button",function(e){Rexbuilder_Rexbutton.separateRexButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_button",function(e){Rexbuilder_Rexbutton.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:importElement",function(e){Rexbuilder_Rexelement_Editor.fixImportedElement(e.settings.data)}),Rexbuilder_Util.$document.on("rexlive:completeImportElement",function(e){Rexbuilder_Rexelement_Editor.handleCompleteImportElement(e)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_element",function(e){Rexbuilder_Rexelement_Editor.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_element",function(e){Rexbuilder_Rexelement_Editor.separateRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:refresh_separated_rex_element",function(e){Rexbuilder_Rexelement_Editor.refreshSeparatedRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_element",function(e){Rexbuilder_Rexelement.removeSeparateElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_add_field",function(e){Rexbuilder_Rexwpcf7_Editor.addField(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_form_span_data",function(e){Rexbuilder_Rexwpcf7.createFormSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_column_content_span_data",function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateColumnContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateColumnContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:focusElement",function(e){Rexbuilder_Rexelement_Editor.focusRexElement(e.settings.data_to_send.$textWrap)}),Rexbuilder_Util.$document.on("rexlive:drag_drop_started",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!0}),Rexbuilder_Util.$document.on("rexlive:drag_drop_ended",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!1}),Rexbuilder_Util.$document.on("rexlive:set_container_margins",function(e){Rexbuilder_Util_Editor.updateContainerMargins(e.settings.data_to_send)})},addDnDEvents=function(){Rexbuilder_Util.$rexContainer.on("dragenter",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||e.stopPropagation()}),Rexbuilder_Util.$rexContainer.on("dragover",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.preventDefault(),e.stopPropagation())}),Rexbuilder_Util.$rexContainer.on("drop",function(e){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){e.preventDefault(),e.stopPropagation();var t;t=e.isTrigger?triggerEvent.originalEvent:e.originalEvent;var i=t.dataTransfer.getData("text/plain");try{i=void 0!==typeof i?JSON.parse(i):null}catch(e){i=null}if(i){var o,r,d=document.elementFromPoint(e.clientX,e.clientY),n=$(d);o=""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+i.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]').find('div [data-rexbuilder-block-id="'+i.rexID+'"]'),r=o.parents(".grid-stack-row"),n=n.parents(".rexpansive_section").find(".grid-stack-row"),n.length>0&&!n.is(r)&&(Rexbuilder_CreateBlocks.moveBlockToOtherSection(o,n),o.find(".builder-delete-block").first().trigger("click"))}}})},addBuilderListeners=function(){addDocumentListeners(),addWindowListeners(),addDnDEvents()},load=function(){_tooltips()};return{launchTooltips:_tooltips,addSpectrumCustomSaveButton:_addSpectrumCustomSaveButton,addSpectrumCustomCloseButton:_addSpectrumCustomCloseButton,removeColorPicker:_removeColorPicker,removeTextEditor:_removeTextEditor,removeHandles:_removeHandles,hideAllTools:_hideAllTools,getBackgroundUrlFromCss:_getBackgroundUrlFromCss,generateElementNewIDs:_generateElementNewIDs,fixCopiedElementSlider:_fixCopiedElementSlider,removeDeletedBlocks:removeDeletedBlocks,createSliderData:_createSliderData,saveSliderOnDB:_saveSliderOnDB,getElementsPhotoswipe:_getElementsPhotoswipe,fixToolsVisibility:_fixToolsVisibility,setEndOfContenteditable:setEndOfContenteditable,updateModelSectionTools:_updateModelSectionTools,updateModelBlocksTools:_updateModelBlocksTools,addBuilderListeners:addBuilderListeners,load:load}}(jQuery);
!function(t,e){"use strict";t.RexEditedData=e(t)}("undefined"!=typeof window?window:this,function(){function t(){this.editedInfo=null,this.startData=null,arguments[0]&&(this.startData=arguments[0]),e.call(this),i.call(this)}function e(){if(!Array.isArray(this.startData)){var t=[];for(var e in this.startData)t.push(this.startData[e]);this.startData=t}}function i(t){t="undefined"!=typeof t?t:this.startData;var e,i,o=[],r=t.length,a=0;for(e=0;e<r;e++){var n={};for(n.section_rex_id=t[e].section_rex_id,n.targets=[],a=t[e].targets.length,i=0;i<a;i++){var s={};s.name=t[e].targets[i].name,s.props={};var c;if("self"===s.name)for(c=0;c<_.length;c++)"undefined"==typeof t[e].targets[i].props[_[c]]?s.props[_[c]]=!1:s.props[_[c]]=!0;else for(c=0;c<l.length;c++)"undefined"==typeof t[e].targets[i].props[l[c]]?s.props[l[c]]=!1:s.props[l[c]]=!0;n.targets.push(s)}o.push(n)}this.editedInfo=o}function o(t){var e,i=this.editedInfo.length;for(e=0;e<i;e++)if(t===this.editedInfo[e].section_rex_id)return e;return!1}function r(t,e){var i,o=this.editedInfo[t].targets.length;for(i=0;i<o;i++)if(e===this.editedInfo[t].targets[i].name)return i;return!1}function a(t,e){var i=r.call(this,t,e);return!1!==i&&this.editedInfo[t].targets[i].props}function n(t,e,i,a){a="undefined"==typeof a||a;var n=o.call(this,t);if(n!==!1){var s=r.call(this,n,e);!1!==s&&(this.editedInfo[n].targets[s].props[i]=a)}}function s(t,e,i){i="undefined"==typeof i||i;var a=o.call(this,t);if(a!==!1){var n=r.call(this,a,e);if(!1!==n){var s,c;if("self"===e)for(c=_.length,s=0;s<c;s++)this.editedInfo[a].targets[n].props[_[s]]=i;else for(c=l.length,s=0;s<c;s++)this.editedInfo[a].targets[n].props[l[s]]=i}}}var _=["section_name","section_nav_label","color_bg_section","color_bg_section_active","image_bg_section_active","image_bg_section","image_width","image_height","id_image_bg_section","image_size","video_bg_id","video_mp4_url","video_bg_width_section","video_bg_height_section","video_bg_url_section","video_bg_url_vimeo_section","block_distance","row_separator_top","row_separator_bottom","row_separator_right","row_separator_left","margin","row_margin_top","row_margin_bottom","row_margin_right","row_margin_left","custom_classes","row_overlay_color","row_overlay_active"],l=["color_bg_block","color_bg_block_active","image_bg_url","image_width","image_height","id_image_bg","image_size","image_bg_elem_active","type_bg_image","video_bg_id","video_bg_width","video_bg_height","video_mp4_url","video_bg_url_youtube","video_bg_url_vimeo","photoswipe","block_custom_class","block_padding","overlay_block_color","overlay_block_color_active","linkurl","block_flex_position","block_flex_img_position"];return t.prototype.getSectionData=function(t){var e=o.call(this,t);return e!==!1&&a.call(this,e,"self")},t.prototype.getBlockData=function(t,e){var i=o.call(this,t);return i!==!1&&a.call(this,i,e)},t.prototype.addSectionData=function(t){var e=o.call(this,t);if(!1===e){var i={};for(z=0;z<_.length;z++)i[_[z]]=!1;var r={section_rex_id:t,targets:[{name:"self",props:i}]};this.editedInfo.push(r)}},t.prototype.addBlockData=function(t,e){var i=o.call(this,t);if(!1!==i){var a=r.call(this,i,e);if(!1===a){var n={};for(z=0;z<l.length;z++)n[l[z]]=!1;var s={name:e,props:n};this.editedInfo[i].targets.push(s)}}},t.prototype.setSectionData=function(t,e,i){n.call(this,t,"self",e,i)},t.prototype.setBlockData=function(t,e,i,o){n.call(this,t,e,i,o)},t.prototype.setBulkSectionData=function(t,e){s.call(this,t,"self",e)},t.prototype.setBulkBlockData=function(t,e,i){s.call(this,t,e,i)},t.getTracePropsSection=function(){return _},t.getTracePropsBlock=function(){return l},t});
/**
 * Gradient palette color to append to Spectrum Picker.
 * With a button to open the gradient picker
 * 
 * @since 2.0.0
 */
var Rexbuilder_Color_Palette=function(e){"use strict";var t,r=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object,t.textSelection=void 0!==e.textSelection?e.textSelection:null;var r=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(r)},i=function(){t.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),t.$spicker=null,t.action=null,t.object=null,t.textSelection=null},n=function(){t.$add_color.on("click",function(r){if(r.preventDefault(),null!==t.$spicker){var i=t.$spicker.spectrum("get"),n=Rexbuilder_Util.createRandomID(4),o=i.toRgbString(),a={eventName:"rexlive:savePaletteColor",color_data:{color:o,ID:n}};Rexbuilder_Util_Editor.sendParentIframeMessage(a);var l=Rexbuilder_Live_Templates.getTemplate("tmpl-palette-item"),c=e(l);t.$add_color.before(c),c.css("background",o),c.attr("data-color-id",n),c.attr("data-color-value",o)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-color-value");t&&a(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,r=t.getAttribute("data-color-id"),i={eventName:"rexlive:deletePaletteColor",color_data:{ID:r}};Rexbuilder_Util_Editor.sendParentIframeMessage(i),Rexbuilder_Color_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":Rexbuilder_Block_Editor.openBlockBackgroundGradient(t.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openSectionBackgroundGradient(t.$spicker.parents(".rexpansive_section"));break;case"text":TextEditor.openTextGradientColor(t.$spicker)}t.$spicker.spectrum("hide")})},o=function(t){e(t).remove()},a=function(e,r){var r=void 0!==typeof r&&r;""!==e&&(t.$spicker.spectrum("set",e),r&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},l=function(){var r=e(".sp-rex-color-palette");t={$spicker:null,object:null,action:null,$container:r,$add_color:r.find(".palette__add-color"),$palette_list:r.find(".palette-list"),$open_gradient_palette:r.find(".palette__open-gradient")},n()};return{init:l,show:r,hide:i,deletePaletteItem:o}}(jQuery);
/**
 * Gradient palette color to append to Spectrum Picker for an overlay.
 * With a button to open the gradient picker
 * 
 * @since 2.0.0
 */
var Rexbuilder_Overlay_Palette=function(e){"use strict";var t,a=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object;var a=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(a)},r=function(){t.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),t.$spicker=null,t.action=null,t.object=null},i=function(){t.$add_color.on("click",function(a){if(a.preventDefault(),null!==t.$spicker){var r=t.$spicker.spectrum("get"),i=Rexbuilder_Util.createRandomID(4),n=r.toRgbString(),l={eventName:"rexlive:savePaletteOverlayColor",overlay_data:{overlay:n,ID:i}};Rexbuilder_Util_Editor.sendParentIframeMessage(l);var o=Rexbuilder_Live_Templates.getTemplate("tmpl-palette-item"),c=e(o);t.$add_color.before(c),c.css("background",n),c.attr("data-overlay-id",i),c.attr("data-overlay-value",n)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-overlay-value");t&&l(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,a=t.getAttribute("data-overlay-id"),r={eventName:"rexlive:deletePaletteOverlayColor",overlay_data:{ID:a}};Rexbuilder_Util_Editor.sendParentIframeMessage(r),Rexbuilder_Overlay_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":Rexbuilder_Block_Editor.openBlockOverlayGradient(t.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openRowOverlayGradient(t.$spicker.parents(".rexpansive_section"))}t.$spicker.spectrum("hide")})},n=function(t){e(t).remove()},l=function(e,a){var a=void 0!==typeof a&&a;""!==e&&(t.$spicker.spectrum("set",e),a&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},o=function(){var a=e(".sp-rex-color-overlay-palette");t={$spicker:null,object:null,action:null,$container:a,$add_color:a.find(".palette__add-color"),$palette_list:a.find(".palette-list"),$open_gradient_palette:a.find(".palette__open-gradient")},i()};return{init:o,show:a,hide:r,deletePaletteItem:n}}(jQuery);
/**
 * Object that handles the live text editor inside the blocks
 * 
 * @since 2.0.0
 */
var TextEditor=function(t){"use strict";function e(t){var e,i,s,n=[].slice.call(t.getElementsByClassName("rex-text-editable")),a=n.length,o=0;for(o=0;o<a;o++)e=n[o].getElementsByClassName("pswp-figure"),i=n[o].getElementsByClassName("rex-slider-wrap"),0===e.length&&0===i.length&&(s=n[o].querySelector(".text-wrap"),TextEditor.addElementToTextEditor(s))}function i(){rangy.init()}var s,n,a,o,r,l,d,c,h,u,m=function(t){s.addElements(t)},p=function(e){t(s.getSelectedParentElement()).css("color",e)},b=function(){return t(s.getSelectedParentElement()).css("color")},g=function(){return s.getSelectedParentElement().getAttribute("data-gradient")},f=function(){return s.getSelectedParentElement().getAttribute("style")},v=function(t){var e=t?t:"rgba(0,0,0,0)";P({name:"rexlive:mediumeditor:removeGradient",data:{},editable:null}),n.base.importSelection(h),n.document.execCommand("styleWithCSS",!1,!0),n.document.execCommand("foreColor",!1,e)},x=function(t){var e=t.parents(".rexpansive_section"),i=t.attr("data-rexbuilder-block-id"),s=(t.children(".rexbuilder-block-data"),e.attr("data-rexlive-section-id")),n="undefined"!=typeof e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",a=t.attr("data-selection-gradient"),o={blockData:{gradient:a,target:{sectionID:s,modelNumber:n,rexID:i}}};Rexbuilder_Util_Editor.manageElement=!0;var r={eventName:"rexlive:editTextGradient",activeBlockData:o};Rexbuilder_Util_Editor.sendParentIframeMessage(r)},E=function(e,i){var n=t(e),a=n.find(".meditor-color-picker--preview");n.spectrum({preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",show:function(){this.setAttribute("data-revert",!1),Rexbuilder_Color_Palette.show({$target:n,action:"color",object:"text",textSelection:s.exportSelection()})},change:function(t){i.call(this,t.toRgbString()),a.css("background-color",t.toRgbString())},move:function(t){i.call(this,t.toRgbString())},hide:function(t){var e=n.attr("data-selection-gradient"),o=this.getAttribute("data-revert");if("null"==e){var r="true"==o?this.getAttribute("data-color-on-show"):t.toRgbString();i.call(this,t.toRgbString()),a.css("background-color",r)}Rexbuilder_Color_Palette.hide(),s.getExtensionByName("insert-media").hideAllToolbars()}}),Rexbuilder_Live_Utilities.addSpectrumCustomSaveButton(n),Rexbuilder_Live_Utilities.addSpectrumCustomCloseButton(n),n.spectrum("container").draggable()},_=MediumEditor.extensions.button.extend({name:"colorPicker",action:"applyForeColor",aria:"color picker",contentDefault:"<span class='editor-color-picker'>Text Color<span>",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action--color-picker"),this.button.innerHTML="<span class='meditor-color-picker'><span class='meditor-color-picker__placeholder'>P</span></span><span class='meditor-color-picker--preview'></span>",E(this.button,v),this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.handleShowToolbar.bind(this))},handleClick:function(e){var i=s.getExtensionByName("toolbar");i&&i.hideToolbar(),h=s.exportSelection();var n=b();t(this.button).spectrum("set",n),this.button.setAttribute("data-color-on-show",n);var a=g(),o=f();this.button.setAttribute("data-selection-gradient",a),P({name:"rexlive:mediumeditor:traceTextGradient",data:{gradient:a,style:o},editable:null}),e.preventDefault(),e.stopPropagation();var r=this.getAction();r&&this.execAction(r)},handleShowToolbar:function(e){var i=t(s.getSelectedParentElement()),n=i.prop("style").color;""!==n?t(this.button).find(".meditor-color-picker--preview").css("background-color",b()):t(this.button).find(".meditor-color-picker--preview").css("background-color","")}}),y=MediumEditor.Extension.extend({name:"textGradient",init:function(){this.gradientClassApplier=rangy.createClassApplier("text-gradient",{elementTagName:"span",normalize:!0,elementAttributes:{"data-gradient":"",style:""}}),this.subscribe("rexlive:mediumeditor:setTextGradient",this.handleGradient.bind(this)),this.subscribe("rexlive:mediumeditor:traceTextGradient",this.traceGradient.bind(this)),this.subscribe("rexlive:mediumeditor:removeGradient",this.removeGradient.bind(this))},handleGradient:function(t,e){this.gradientClassApplier.undoToSelection(),this.gradientClassApplier.elementAttributes["data-gradient"]=t.color,this.gradientClassApplier.elementAttributes.style=t.style,this.gradientClassApplier.applyToSelection()},traceGradient:function(t,e){this.gradientClassApplier.elementAttributes["data-gradient"]=t.gradient,this.gradientClassApplier.elementAttributes.style=t.style},removeGradient:function(t,e){this.gradientClassApplier.undoToSelection()}}),w=MediumEditor.extensions.button.extend({name:"headingTags",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.list_parent=this.document.createElement("div"),this.list_parent.classList.add("me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),this.list_active_action.classList.add("me__action-active"),this.list_active_action.innerHTML="h1",t(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),this.list_element.classList.add("me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='append-h1'>h1</div><div class='medium-editor-action' data-tag-action='append-h2'>h2</div><div class='medium-editor-action' data-tag-action='append-h3'>h3</div><div class='medium-editor-action' data-tag-action='append-h4'>h4</div><div class='medium-editor-action' data-tag-action='append-h5'>h5</div><div class='medium-editor-action' data-tag-action='append-h6'>h6</div><div class='medium-editor-action' data-tag-action='append-p'>p</div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),t(this.button).append(this.list_parent),t(this.button).append(this.list_element),this.action_active="",this.all_actions=["append-h1","append-h2","append-h3","append-h4","append-h5","append-h6"],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(t){switch(t.nodeName.toLowerCase()){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":return this.action_active="append-"+t.nodeName.toLowerCase(),this.setActionListState(),!0;default:return!1}},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="h1";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){""!=this.action_active&&(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.list_active_action.innerHTML=this.action_active.replace("append-",""))},resetEnv:function(){this.action_active=""},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),"undefined"!=typeof e&&s.execAction(e)}}),C=MediumEditor.extensions.button.extend({name:"formattingTags",contentDefault:"TAGS",useQueryState:!1,aria:"Format text",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.list_parent=this.document.createElement("div"),this.list_parent.classList.add("me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),this.list_active_action.classList.add("me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-bold'></i>",t(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),this.list_element.classList.add("me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='bold'><i class='fa fa-bold'></i></div><div class='medium-editor-action' data-tag-action='italic'><i class='fa fa-italic'></i></div><div class='medium-editor-action' data-tag-action='underline'><i class='fa fa-underline'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),t(this.button).append(this.list_parent),t(this.button).append(this.list_element),this.action_active=[],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.clearListButtons.bind(this))},checkState:function(t){switch(t.nodeName.toLowerCase()){case"b":case"strong":this.action_active.push("bold"),this.mark_active=!0;break;case"i":this.action_active.push("italic"),this.mark_active=!0;break;case"u":this.action_active.push("underline"),this.mark_active=!0;break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"li":case"ol":case"ul":this.mark_active&&(this.setActionListState(),this.action_active=[],delete this.mark_active)}},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),"undefined"!=typeof e&&s.execAction(e)},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-bold'></i>";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){for(var t=0;t<this.action_active.length;t++)this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active[t]+'"]').classList.add("medium-editor-button-active"),0==t&&(this.list_active_action.innerHTML="<i class='fa fa-"+this.action_active[t]+"'></i>")}}),T=MediumEditor.extensions.button.extend({name:"listDropdown",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.list_parent=this.document.createElement("div"),this.list_parent.classList.add("me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),this.list_active_action.classList.add("me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>",t(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),this.list_element.classList.add("me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='insertorderedlist'><i class='fa fa-list-ol'></i></div><div class='medium-editor-action' data-tag-action='insertunorderedlist'><i class='fa fa-list-ul'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),t(this.button).append(this.list_parent),t(this.button).append(this.list_element),this.action_active="",this.all_actions=["insertorderedlist","insertunorderedlist"],this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(t){for(var e=0;e<this.all_actions.length;e++)if(this.base.queryCommandState(this.all_actions[e]))return this.action_active=this.all_actions[e],!0;return!1},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){if(""!=this.action_active)switch(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.action_active){case"insertorderedlist":this.list_active_action.innerHTML="<i class='fa fa-list-ol'></i>";break;case"insertunorderedlist":this.list_active_action.innerHTML="<i class='fa fa-list-ul'></i>";break;default:this.list_active_action.innerHTML="<i class='fa fa-list-alt'></i>"}},resetEnv:function(){this.action_active=""},handleClick:function(t){var e=void 0;t.target.hasAttribute("data-tag-action")?e=t.target.getAttribute("data-tag-action"):t.target.parentNode.hasAttribute("data-tag-action")&&(e=t.target.parentNode.getAttribute("data-tag-action")),"undefined"!=typeof e&&s.execAction(e)}}),R=MediumEditor.extensions.button.extend({name:"contentBlockPosition",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("hide-tool-rexbutton"),this.button.classList.add("hide-tool-rexelement"),this.button.classList.add("medium-editor-action"),this.button.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#C005-Layout'></use></svg></i>",this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var i=this.button.getBoundingClientRect();Rexbuilder_Util_Editor.mousePosition={client:{x:e.clientX,y:e.clientY},offset:{x:e.clientX-i.left,y:e.clientY-i.top}},Rexbuilder_Util_Editor.mouseClickObject={offset:{w:this.button.offsetWidth,h:this.button.offsetHeight}},t(this.base.getFocusedElement()).parents(".grid-stack-item").find(".edit-block-content-position").trigger("click")}}),S=MediumEditor.extensions.button.extend({name:"justifyDropdown",action:"",contentDefault:"TAGS",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.list_parent=this.document.createElement("div"),this.list_parent.classList.add("me__heading-list-parent"),this.list_parent.innerHTML="<i class='l-svg-icons drop-down-icon'><svg><use xlink:href='#A007-Close'></use></svg></i>",this.list_active_action=this.document.createElement("span"),this.list_active_action.classList.add("me__action-active"),this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>",t(this.list_parent).append(this.list_active_action),this.list_element=this.document.createElement("div"),this.list_element.classList.add("me__action-list"),this.list_element.innerHTML="<div class='medium-editor-action' data-tag-action='justifyLeft'><i class='fa fa-align-left'></i></div><div class='medium-editor-action' data-tag-action='justifyCenter'><i class='fa fa-align-center'></i></div><div class='medium-editor-action' data-tag-action='justifyRight'><i class='fa fa-align-right'></i></div><div class='medium-editor-action hide-tool-rexbutton hide-tool-rexelement' data-tag-action='justifyFull'><i class='fa fa-align-justify'></i></div>",this.list_actions=this.list_element.getElementsByClassName("medium-editor-action"),this.action_active="",this.all_actions=["justifyLeft","justifyCenter","justifyRight","justifyFull"],t(this.button).append(this.list_parent),t(this.button).append(this.list_element),this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("showToolbar",this.resetEnv.bind(this))},isAlreadyApplied:function(){for(var t=0;t<this.all_actions.length;t++)if(this.base.queryCommandState(this.all_actions[t]))return this.action_active=this.all_actions[t],!0;return!1},setInactive:function(){this.setActionListState()},setActive:function(){this.setActionListState()},setActionListState:function(){this.clearListButtons(),this.activateListButtons()},clearListButtons:function(){this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>";for(var t=0;t<this.list_actions.length;t++)this.list_actions[t].classList.remove("medium-editor-button-active")},activateListButtons:function(){if(""!=this.action_active)switch(this.list_element.querySelector('.medium-editor-action[data-tag-action="'+this.action_active+'"]').classList.add("medium-editor-button-active"),this.action_active){case"justifyLeft":this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>";break;case"justifyCenter":this.list_active_action.innerHTML="<i class='fa fa-align-center'></i>";break;case"justifyRight":this.list_active_action.innerHTML="<i class='fa fa-align-right'></i>";break;case"justifyFull":this.list_active_action.innerHTML="<i class='fa fa-align-justify'></i>";break;default:this.list_active_action.innerHTML="<i class='fa fa-align-left'></i>"}},resetEnv:function(){this.action_active=""},handleClick:function(e){var i=void 0;if(e.target.hasAttribute("data-tag-action")?i=e.target.getAttribute("data-tag-action"):e.target.parentNode.hasAttribute("data-tag-action")&&(i=e.target.parentNode.getAttribute("data-tag-action")),"undefined"!=typeof i)if(u){this.action_active=i,this.clearListButtons(),this.activateListButtons();var n=s.getSelectedParentElement(),a=t(n).parents("p.rex-buttons-paragraph");switch(i){case"justifyRight":a.css("text-align","right");break;case"justifyCenter":a.css("text-align","center");break;case"justifyLeft":a.css("text-align","left")}var o=this.base.getExtensionByName("toolbar"),r=this.base.getExtensionByName("rexbutton-input");o&&o.setToolbarPosition(),r&&r.placeRexbuttonToolbox(),e.preventDefault()}else s.execAction(i)}}),L=MediumEditor.Extension.extend({name:"close-editor-escape",init:function(){this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleKeydown:function(e,i){if(!MediumEditor.util.isKey(e,MediumEditor.util.keyCode.ESCAPE))return!1;i.removeAttribute("data-medium-focused");var s=t(i).parents(".grid-stack-item"),n=s.parents(".perfect-grid-gallery");n.data("plugin_perfectGridGalleryEditor");Rexbuilder_Util_Editor.focusedElement=s,Rexbuilder_Util_Editor.elementIsDragging=!1,TextEditor.triggerMEEvent({name:"blur",data:e,editable:i})}}),k=(MediumEditor.Extension.extend({name:"dropDownButtonList",action:"",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.classList.add("medium-editor-action-list"),this.button.innerHTML=this.contentDefault,this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},handleClick:function(t){var e=t.target.getAttribute("data-tag-action");"undefined"!=typeof e&&s.execAction(e)}}),MediumEditor.extensions.button.extend({name:"textHtml",action:"changeText",aria:"text to html",contentDefault:"<span class='editor-text-html'>Text Html<span>",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.innerHTML="<i class='l-svg-icons'><svg><use xlink:href='#A008-Code'></use></svg></i>",this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var i=s.exportSelection(),n=jQuery.extend(!0,{},i);n.end=n.start+1,s.importSelection(n,!0);var a=t(s.getSelectedParentElement());a.hasClass("text-wrap")&&(a=a.children().eq(0));var o=t(s.getSelectedParentElement());o.hasClass("text-wrap")&&(o=o.children().eq(0)),n=jQuery.extend(!0,{},i),n.start=n.end-1,s.importSelection(n,!0);for(var r=t(s.getSelectedParentElement()),l=[],d=a.parents(".text-wrap").eq(0).children().length,c=0,h=!1;o.get(0)!==r.get(0)&&c<d;){if(o.hasClass("medium-insert-buttons")){h=!0;break}l.push(o),o=o.next(),c++}l.push(o);var u=s.getExtensionByName("toolbar");u&&u.hideToolbar();var m="";for(c=0;c<l.length;c++){l[c].wrap("<div></div>");var p=l[c].parent(),b=p.html();if("undefined"==typeof b){h=!0;break}m+=b,l[c].unwrap()}if(!h){a.wrap("<textarea></textarea");var g=a.parent();for(c=0;c<l.length;c++)l[c].remove();g.text(m),g.wrap('<div class="editing-html"></div>');var f=g.parent(),v=t(document.createElement("button"));v.addClass("rex-close-html-editor"),v.text("applica"),f.prepend(v[0])}}}),MediumEditor.extensions.button.extend({name:"textEditorHtml",action:"changeText",aria:"text to html",contentDefault:"<span class='editor-text-html'>Text Html<span>",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.innerHTML="<i class='l-svg-icons'><svg><use xlink:href='#A008-Code'></use></svg></i>",this.on(this.button,"click",this.handleClick.bind(this)),this.subscribe("rexlive:mediumEditor:saveHTMLContent",this.handleHtmlEditorSave.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation(),this.traceEditor=this.base.getFocusedElement(),this.base.selectAllContents();var e=this.base.exportSelection().editableElementIndex,i=this.base.serialize(),s=i["element-"+e].value;s=s.replace('<span class="text-editor-span-fix" style="display: none;"></span>',"").trim();var n={eventName:"rexlive:openHTMLEditor",htmlContent:s};Rexbuilder_Util_Editor.sendParentIframeMessage(n)},handleHtmlEditorSave:function(t){var e=this.base.exportSelection().editableElementIndex;this.base.setContent(t.customHTML,e)}})),I=MediumEditor.Extension.extend({name:"hide-row-tools-on-editing",init:function(){this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("blur",this.handleBlur.bind(this))},handleFocus:function(e,i){t(i).parents(".grid-stack-item").addClass("item--me-focus"),t(i).parents(".rexpansive_section").addClass("block-editing")},handleBlur:function(e,i){t(i).parents(".grid-stack-item").removeClass("item--me-focus"),t(i).parents(".rexpansive_section").removeClass("block-editing")}}),z=MediumEditor.Extension.extend({name:"rexbutton-input",init:function(){u=!1,this.keyCode=MediumEditor.util.keyCode,this.arrowKeys=[37,38,39,40],this.traceBTN=null,this.traceEditor=null,this.subscribe("editableKeydown",this.handleEventKeyDown.bind(this)),this.subscribe("editableKeyup",this.handleEventKeyUp.bind(this)),this.subscribe("keyup",this.handleEventKeyUp.bind(this)),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this)),this.subscribe("hideToolbar",this.handleHideToolbar.bind(this)),this.rexbuttonToolsTop=document.createElement("div"),this.rexbuttonToolsTop.contentEditable=!1,this.rexbuttonToolsTop.classList.add("rexbutton-tools"),this.rexbuttonToolsTop.style.display="none",this.rexbuttonToolsTop.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-rexbutton-tools-top"),document.body.appendChild(this.rexbuttonToolsTop),this.rexbuttonToolsBottom=document.createElement("div"),this.rexbuttonToolsBottom.contentEditable=!1,this.rexbuttonToolsBottom.classList.add("rexbutton-tools"),this.rexbuttonToolsBottom.style.display="none",this.rexbuttonToolsBottom.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-rexbutton-tools-bottom"),document.body.appendChild(this.rexbuttonToolsBottom),this.deleteRexbuttonBtn=this.rexbuttonToolsTop.querySelector(".rex-delete-button"),this.editRexbuttonBtn=this.rexbuttonToolsBottom.querySelector(".rex-edit-button");var t=null,e=this;Rexbuilder_Util.$rexContainer.on("mouseenter",".rex-button-wrapper",function(i){e.hideAnchorPreview(),null!==t&&(clearTimeout(t),t=null)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rex-button-wrapper",function(i){t=setTimeout(e.showAnchorPreview,1e3)}),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("editableClick",this.traceInputRexButton.bind(this)),this.on(this.deleteRexbuttonBtn,"click",this.handleClickDeleteRexbutton.bind(this)),this.on(this.editRexbuttonBtn,"click",this.handleClickEditRexbutton.bind(this))},showAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="block"},hideAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="none"},handlePositionToolbar:function(e){var i=s.getSelectedParentElement(),n=this.base.getExtensionByName("toolbar"),a=t(n.toolbar);this.insideRexButton(i)?(a.addClass("medium-toolbar-hover-rexbutton"),a.find("button.medium-editor-action:not(.hide-tool-rexbutton)").first().addClass("medium-editor-button-first"),a.find("button.medium-editor-action:not(.hide-tool-rexbutton)").last().addClass("medium-editor-button-last"),u=!0):(this.restoreButtonClasses(a),u=!1)},handleHideToolbar:function(e){if(u){var i=this.base.getExtensionByName("toolbar"),s=t(i.toolbar);this.restoreButtonClasses(s),u=!1}},restoreButtonClasses:function(t){t.removeClass("medium-toolbar-hover-rexbutton"),t.find("button.medium-editor-action:not(.hide-tool-rexbutton)").first().removeClass("medium-editor-button-first"),t.find("button.medium-editor-action:not(.hide-tool-rexbutton)").last().removeClass("medium-editor-button-last"),t.find("button.medium-editor-action").first().addClass("medium-editor-button-first"),t.find("button.medium-editor-action").last().addClass("medium-editor-button-last")},viewRexbuttonToolbox:function(t){this.rexbuttonToolsTop.style.display="block",this.rexbuttonToolsBottom.style.display="block",this.placeRexbuttonToolbox()},hideRexbuttonToolbox:function(t){this.rexbuttonToolsTop.style.display="none",this.rexbuttonToolsBottom.style.display="none"},traceInputRexButton:function(e){if("click"==e.type){var i=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument);t(e.target).hasClass("rex-button-text")?(this.traceBTN=t(e.target).parents(".rex-button-container")[0],this.viewRexbuttonToolbox()):0!=t(i).parents(".rex-button-container").length?(this.traceBTN=t(i).parents(".rex-button-container")[0],this.viewRexbuttonToolbox()):this.handleBlur(e)}},handleBlur:function(e){0==t(e.target).parents(".rex-button-wrapper").length&&0==t(e.target).parents(".rexbutton-tools").length&&this.hideRexbuttonToolbox()},placeRexbuttonToolbox:function(){var t=this.traceBTN.getBoundingClientRect();this.rexbuttonToolsTop.style.width=t.width+"px",this.rexbuttonToolsTop.style.left=t.left+(t.width-this.rexbuttonToolsTop.offsetWidth)/2+"px",this.rexbuttonToolsTop.style.top=window.scrollY+t.top-this.rexbuttonToolsTop.offsetHeight+"px",this.rexbuttonToolsBottom.style.width=t.width+"px",this.rexbuttonToolsBottom.style.left=t.left+(t.width-this.rexbuttonToolsBottom.offsetWidth)/2+"px",this.rexbuttonToolsBottom.style.top=window.scrollY+t.top+t.height+"px"},handleClickDeleteRexbutton:function(e){this.hideRexbuttonToolbox();var i=t(this.traceBTN).parents(".rex-button-wrapper"),s=i.parents("p.rex-buttons-paragraph");i.remove(),0==s.find(".rex-button-wrapper").length&&s.remove()},handleClickEditRexbutton:function(e){this.hideRexbuttonToolbox();var i=t(this.traceBTN).parents(".rex-button-wrapper"),s={eventName:"rexlive:openRexButtonEditor",buttonData:Rexbuilder_Rexbutton.generateButtonData(i)};i.parents(".text-wrap").blur(),Rexbuilder_Util_Editor.sendParentIframeMessage(s)},handleEventKeyUp:function(e,i){var s=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument),n=t(s);if(MediumEditor.util.isKey(e,this.keyCode.ENTER)&&this.insideRexButton(s)){var a=MediumEditor.selection.getCaretOffsets(s).right,o=MediumEditor.selection.getCaretOffsets(s).left;if(0===a&&n.parents(".rex-button-wrapper").eq(0).is(":last-child")){var r=t("<p><br></p>");n.parents(".rex-buttons-paragraph").after(r),this.customMoveCursor(r[0],0)}else if(0===o&&n.parents(".rex-button-wrapper").eq(0).is(":first-child")){var r=t("<p><br></p>");n.parents(".rex-buttons-paragraph").before(r),this.customMoveCursor(r[0],0)}e.preventDefault()}},handleEventKeyDown:function(e,i){var s,n=MediumEditor.selection.getSelectionStart(this.base.options.ownerDocument),a=null;if(n&&(a=MediumEditor.selection.getCaretOffsets(n).left,s=MediumEditor.selection.getCaretOffsets(n).right),MediumEditor.util.isKey(e,this.keyCode.BACKSPACE)&&(0==window.getSelection().focusOffset||1==window.getSelection().focusOffset))if(0===a){var o=/^(\s+|<br\/?>)?$/i;if(this.isElementBefore(n,"rex-buttons-paragraph"))o.test(n.innerHTML)||e.preventDefault();else if(this.insideRexButton(n)){var r=t(n);if(!r.parents(".rex-button-wrapper").eq(0).is(":first-child"))return void e.preventDefault();var l=r.parents(".rex-buttons-paragraph").eq(0),d=l.prev();if(!o.test(d[0].innerHTML))return void e.preventDefault()}}else this.isNodeBefore(n,a,"rex-button-wrapper")&&e.preventDefault();if(MediumEditor.util.isKey(e,this.keyCode.ENTER)&&this.insideRexButton(n))return void e.preventDefault();if(MediumEditor.util.isKey(e,this.keyCode.DELETE)&&0===s){var o=/^(\s+|<br\/?>)?$/i;if(this.insideRexButton(n)){var r=t(n);if(!r.parents(".rex-button-wrapper").eq(0).is(":last-child"))return void e.preventDefault();var l=r.parents(".rex-buttons-paragraph").eq(0),c=l.next();if(!o.test(c[0].innerHTML))return void e.preventDefault()}!o.test(n.innerHTML)&&this.isElementAfter(n,"rex-buttons-paragraph")&&e.preventDefault()}this.isInsideRexbuttonParagraph(n)&&!this.insideRexButton(n)&&(MediumEditor.util.isKey(e,this.arrowKeys)||e.preventDefault())},replaceClasses:function(t,e,i){t.find("."+e).removeClass(e).addClass(i)},customMoveCursor:function(t,e){e="undefined"!=typeof e?e:0;var i=document.createRange(),s=window.getSelection();i.setStart(t,e),i.collapse(!0),s.removeAllRanges(),s.addRange(i)},isSafeInsert:function(e){var i=t(e),s=MediumEditor.selection.getCaretOffsets(e).left,n=!0;return i.hasClass("rex-button-text")?n=!1:i.prev().hasClass("rex-button-wrapper")&&!i.parent().hasClass("medium-editor-element")?n=!1:this.isNodeBefore(e,s,"rex-button-wrapper")&&(n=!1),n},isNodeBefore:function(e,i,s){for(var n,a=0,o=e.childNodes;;){if(n=parseInt(o[a].length),isNaN(n)&&(n=t(o[a]).text().length),n>i)break;if(i-=n,a+=1,a==o.length)break}if(a>0){var r=parseInt(o[a-1].length);if(isNaN(r)&&t(o[a-1]).hasClass(s))return!0}return!1},isElementBefore:function(e,i){var s=t(e);if(s.prev().hasClass(i))return!0;for(;!s.is("body")&&!s.parent().hasClass("medium-editor-element");)s=s.parent();return s.prev().hasClass(i)},isElementAfter:function(e,i){var s=t(e);if(s.next().hasClass(i))return!0;for(;!s.is("body")&&!s.parent().hasClass("medium-editor-element");)s=s.parent();return s.next().hasClass(i)},isInsideRexbuttonParagraph:function(e){var i=t(e);return!!i.hasClass("rex-buttons-paragraph")||0!=i.parents(".rex-buttons-paragraph").length},insideRexButton:function(e){var i=t(e);return!!i.hasClass("rex-button-wrapper")||0!=i.parents(".rex-button-wrapper").length}}),B=MediumEditor.Extension.extend({name:"insert-media",init:function(){this.insertionPoint=null,this.traceImg=null,this.traceVideo=null,this.traceSVG=null,this.traceSelection=null,this.traceEditor=null,this.method=4,this.submethod=3,this.toolbarWrapClass="me-insert-media-button",this.mirrorResize=document.createElement("img"),this.mirrorResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorResize),this.mirrorVideoResize=document.createElement("span"),this.mirrorVideoResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorVideoResize),this.mirrorSVGResize=document.createElement("span"),this.mirrorSVGResize.classList.add("me-resize-mirror"),document.body.appendChild(this.mirrorSVGResize),
this.resizeSizes=document.createElement("span"),this.resizeSizes.classList.add("me-resize-sizes"),this.imageEditToolbar=document.createElement("div"),this.imageEditToolbar.id="me-edit-inline-image-toolbar",this.imageEditToolbar.classList.add("medium-editor-toolbar"),this.imageEditToolbar.classList.add("medium-toolbar-arrow-under"),this.imageEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-image-edit"),document.body.appendChild(this.imageEditToolbar),this.inlineSVGEditToolbar=document.createElement("div"),this.inlineSVGEditToolbar.id="me-edit-inline-svg-toolbar",this.inlineSVGEditToolbar.classList.add("medium-editor-toolbar"),this.inlineSVGEditToolbar.classList.add("medium-toolbar-arrow-under"),this.inlineSVGEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-inline-svg-edit"),document.body.appendChild(this.inlineSVGEditToolbar),E(this.inlineSVGEditToolbar.querySelector(".me-svg-color"),this.applySVGColor),this.videoEditToolbar=document.createElement("div"),this.videoEditToolbar.id="me-edit-inline-image-toolbar",this.videoEditToolbar.classList.add("medium-editor-toolbar"),this.videoEditToolbar.classList.add("medium-toolbar-arrow-under"),this.videoEditToolbar.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-image-edit"),document.body.appendChild(this.videoEditToolbar),this.mediaBtn=document.createElement("div"),this.mediaBtn.contentEditable=!1,this.mediaBtn.classList.add(this.toolbarWrapClass),this.mediaBtn.style.display="none",this.mediaBtn.innerHTML=Rexbuilder_Live_Templates.getTemplate("tmpl-me-insert-media-button"),document.body.appendChild(this.mediaBtn),this.mediaLibraryBtn=this.mediaBtn.querySelector(".me-insert-image"),this.mediaEmbedBtn=this.mediaBtn.querySelector(".me-insert-embed"),this.mediaEmbedInput=this.mediaBtn.querySelector(".me-insert-embed__value"),this.inlineSVGBtn=this.mediaBtn.querySelector(".me-insert-inline-svg"),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.traceInput.bind(this)),this.subscribe("editableKeydown",this.traceInput.bind(this)),this.subscribe("rexlive:mediumEditor:inlineImageEdit",this.handleImageInsertReplace.bind(this)),this.subscribe("rexlive:mediumEditor:inlineVideoEditor:Transfer",this.getEmbedCode.bind(this)),this.subscribe("rexlive:mediumEditor:inlineSVG:transfer",this.handleInlineSVGInsertReplace.bind(this)),this.subscribe("editableKeydown",this.handleRemoveInlineElement.bind(this)),this.on(this.mediaLibraryBtn,"click",this.handleClickImage.bind(this)),this.on(this.imageEditToolbar,"click",this.handleImageEdit.bind(this)),this.on(this.mediaEmbedBtn,"click",this.handleClickEmbed.bind(this)),"undefined"!=typeof this.mediaEmbedInput&&(this.on(this.mediaEmbedInput,"keydown",this.getEmbedCode.bind(this)),this.on(this.mediaEmbedInput,"blur",this.mediaEmbedInputBlur.bind(this))),this.on(this.inlineSVGBtn,"click",this.handleClickInlineSVG.bind(this)),this.on(this.inlineSVGEditToolbar,"click",this.handleInlineSVGEdit.bind(this))},handleBlur:function(e){0!=t(e.target).parents("#me-edit-inline-image-toolbar").length||0!=t(e.target).parents("#me-edit-inline-svg-toolbar").length||t(e.target).is(".me-insert-embed__value")||0!=t(e.target).parents(".me-insert-embed").length||(this.mediaBtn.style.display="none",this.mediaBtn.classList.remove("embed-value-visibile"),this.hideAllToolbars())},handleFocus:function(t,e){this.mediaBtn.style.display="block",4==this.method&&(this.traceEditor=this.base.getFocusedElement(),this.traceSelection=rangy.getSelection().saveCharacterRanges(this.traceEditor)),this.placeMediaBtn()},placeMediaBtnBottomTextEditor:function(){var t=this.base.getFocusedElement(),e=t.getBoundingClientRect();this.mediaBtn.style.left=e.left+(e.width-this.mediaBtn.offsetWidth)/2+"px",this.mediaBtn.style.top=window.scrollY+e.top+e.height-this.mediaBtn.offsetHeight+"px"},placeMediaBtnTopCenterTextEditor:function(){var e=this.base.getFocusedElement(),i=t(e).parents(".grid-item-content-wrap"),s=i[0].getBoundingClientRect();this.mediaBtn.style.left=s.left+(s.width-this.mediaBtn.offsetWidth)/2+"px",this.mediaBtn.style.top=window.scrollY+s.top+15+"px"},placeMediaBtn:function(e){var i=this.base.getFocusedElement();if(i){var s="undefined"==typeof e?t(i).parents(".grid-item-content-wrap"):e,n=s[0].getBoundingClientRect();this.mediaBtn.style.left=window.scrollX+n.left+n.width-this.mediaBtn.offsetWidth-15+"px",this.mediaBtn.style.top=window.scrollY+n.top+n.height-this.mediaBtn.offsetHeight-15+"px"}},traceInput:function(e){if(0===t(e.target).parents(".me-insert-media-button").length&&!MediumEditor.util.isKey(e,MediumEditor.util.keyCode.ESCAPE))switch(this.method){case 1:case 2:this.base.saveSelection();break;case 3:this.traceSelection&&rangy.removeMarkers(this.traceSelection),this.traceSelection=rangy.saveSelection();break;case 4:var i=this.base.getFocusedElement();this.traceSelection=rangy.getSelection().saveCharacterRanges(i)}if("click"==e.type)if("IMG"==e.target.nodeName)0!=t(this.mirrorResize).find(".ui-resizable-handle").length&&t(this.mirrorResize).resizable("destroy"),this.viewEditImgToolbar(e.target),this.imageResizableEnable(),this.hideEditVideoToolbar(),this.hideEditInlineSVGToolbar();else if("SPAN"==e.target.nodeName&&"overlay-status-for-video-inline"==e.target.className)0!=t(this.mirrorVideoResize).find(".ui-resizable-handle").length&&t(this.mirrorVideoResize).resizable("destroy"),this.viewEditVideoToolbar(e.target),this.videoResizableEnable(),this.hideEditImgToolbar(),this.hideEditInlineSVGToolbar();else if("USE"==e.target.nodeName.toUpperCase()&&""!==e.target.getAttribute("xlink:href")||"SVG"===e.target.nodeName.toUpperCase()&&"I"===e.target.parentNode.nodeName.toUpperCase()){var s;s="SVG"===e.target.nodeName.toUpperCase()?e.target.children[0]:e.target,0!=t(this.mirrorSVGResize).find(".ui-resizable-handle").length&&t(this.mirrorSVGResize).resizable("destroy"),0!==t(s).parents(".wpcf7-form:not(.no-builder-form)").length?this.hideAllToolbars():(this.viewEditInlineSVGToolbar(s),this.inlineSVGResizableEnable()),this.hideEditVideoToolbar(),this.hideEditImgToolbar()}else this.hideAllToolbars()},handleClickImage:function(t){var e={eventName:"rexlive:openMEImageUploader",img_data:{}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},handleImageInsertReplace:function(t){var e='<img class="wp-image-'+t.imgData.idImage+" "+t.imgData.align+'" data-image-id="'+t.imgData.idImage+'" src="'+t.imgData.urlImage+'" alt="" width="'+t.imgData.width+'" height="'+t.imgData.height+'">';switch(""!==t.displayData.linkUrl&&(e='<a href="'+t.displayData.linkUrl+'">'+e+"</a>"),this.method){case 1:case 2:this.base.restoreSelection();break;case 3:if(this.traceSelection){rangy.restoreSelection(this.traceSelection);var i=this.getFirstRange()}break;case 4:if(this.traceSelection){rangy.getSelection().restoreCharacterRanges(this.traceEditor,this.traceSelection);var i=this.getFirstRange();i.refresh()}}if(this.traceImg){switch(this.method){case 1:case 2:case 3:this.base.selectElement(this.traceImg);break;case 4:var s=rangy.createRange();t.displayData.previousLink?s.selectNode(this.traceImg.parentElement):s.selectNode(this.traceImg),i=s,this.submethod=1}rangy.dom.removeNode(this.traceImg)}switch(this.method){case 1:MediumEditor.util.insertHTMLCommand(document,e);break;case 2:this.base.pasteHTML(e,{cleanPastedHTML:!1,cleanAttrs:["dir"]});break;case 3:if(i){var n=Rexbuilder_Dom_Util.htmlToElement(e);i.insertNode(n)}break;case 4:if(i)switch(this.submethod){case 1:i.pasteHtml(e);break;case 2:var n=Rexbuilder_Dom_Util.htmlToElement(e);break;case 3:var n=Rexbuilder_Dom_Util.htmlToElement(e);if(i.insertNode(n),n.parentElement===this.traceEditor){var a=n.previousElementSibling,o=n.nextElementSibling,r="";o?r=o.tagName.toLowerCase():a&&(r=a.tagName.toLowerCase()),this.emptyLine(o)&&rangy.dom.removeNode(o),this.emptyLine(a)&&rangy.dom.removeNode(a),"div"!==r&&"span"!==r&&""!==r||(r="p"),this.wrap(n,document.createElement(r))}}}this.hideAllToolbars(),this.mediaBtn.style.display="none"},getFirstRange:function(){var t=rangy.getSelection();return t.rangeCount?t.getRangeAt(0):null},wrap:function(t,e){t.parentNode.insertBefore(e,t),e.appendChild(t)},emptyLine:function(t){return!(!t||1!==t.childNodes.length||!(1===t.childNodes[0].nodeType&&"br"===t.childNodes[0].tagName.toLowerCase()||3===t.childNodes[0].nodeType&&0===t.childNodes[0].textContent.trim().length))},handleImageEdit:function(e){var i=t(e.target);if(i.hasClass("medium-editor-action")||(i=i.parents(".medium-editor-action")),i.hasClass("me-image-align-left")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignleft"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),i.hasClass("me-image-align-center")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("aligncenter"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),i.hasClass("me-image-align-right")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignright"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),i.hasClass("me-image-align-none")&&(this.traceImg.classList.remove("alignleft"),this.traceImg.classList.remove("aligncenter"),this.traceImg.classList.remove("alignright"),this.traceImg.classList.remove("alignnone"),this.traceImg.classList.add("alignnone"),this.mirrorResize.classList.contains("ui-resizable")&&this.mirrorResize.parentElement.classList.contains("ui-wrapper")?this.placeMirrorImg(this.mirrorResize.parentElement):this.placeMirrorImg(this.mirrorResize),this.viewEditImgToolbar(this.traceImg)),i.hasClass("me-image-inline-photoswipe")&&("undefined"==typeof this.traceImg.getAttribute("inline-photoswipe")?this.traceImg.setAttribute("inline-photoswipe",!0):this.traceImg.setAttribute("inline-photoswipe","true"!=this.traceImg.getAttribute("inline-photoswipe")),this.viewEditImgToolbar(this.traceImg)),i.hasClass("me-image-replace")){var s="";this.traceImg.classList.contains("alignleft")&&(s="alignleft"),this.traceImg.classList.contains("aligncenter")&&(s="aligncenter"),this.traceImg.classList.contains("alignright")&&(s="alignright"),this.traceImg.classList.contains("alignnone")&&(s="alignnone");var n=!1;"A"===this.traceImg.parentElement.tagName&&(n=!0);var a={eventName:"rexlive:openMEImageUploader",img_data:{image_id:this.traceImg.getAttribute("data-image-id"),width:this.traceImg.width,height:this.traceImg.height,align:s,imgInsideLink:n}};Rexbuilder_Util_Editor.sendParentIframeMessage(a)}i.hasClass("me-image-delete")&&(t(this.traceImg).remove(),this.hideEditImgToolbar())},setActiveButtonsImgEditToolbar:function(e){var i=t(this.imageEditToolbar).find("button");i.each(function(){t(this).hasClass("me-image-align-left")&&(t(e).hasClass("alignleft")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),t(this).hasClass("me-image-align-center")&&(t(e).hasClass("aligncenter")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),t(this).hasClass("me-image-align-right")&&(t(e).hasClass("alignright")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),t(this).hasClass("me-image-align-none")&&(t(e).hasClass("alignnone")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active")),t(this).hasClass("me-image-inline-photoswipe")&&("undefined"!=typeof e.getAttribute("inline-photoswipe")&&"true"==e.getAttribute("inline-photoswipe")?this.classList.add("medium-editor-button-active"):this.classList.remove("medium-editor-button-active"))})},applySVGColor:function(e){t(d.traceSVG).parent("svg").css("fill",e)},handleInlineSVGEdit:function(e){var i=t(e.target);if(i.hasClass("medium-editor-action")||(i=i.parents(".medium-editor-action")),i.hasClass("me-svg-replace")){var s=this.traceSVG.getAttribute("xlink:href").replace("#",""),n={eventName:"rexlive:inlineSVG",inlineSVGData:{id:s}};Rexbuilder_Util_Editor.sendParentIframeMessage(n)}i.hasClass("me-svg-inline")&&(t(this.traceSVG).parents("i").toggleClass("inline-icon"),t(this.inlineSVGEditToolbar.querySelector(".me-svg-inline")).toggleClass("medium-editor-button-active")),i.hasClass("me-svg-delete")&&(t(this.traceSVG).parents("i").remove(),this.hideEditInlineSVGToolbar())},viewEditImgToolbar:function(t){this.traceImg=t,this.setActiveButtonsImgEditToolbar(this.traceImg),this.placeEditImgToolbar(),this.imageEditToolbar.classList.add("medium-editor-toolbar-active")},viewEditVideoToolbar:function(t){this.traceVideo=t},viewEditInlineSVGToolbar:function(t){this.traceSVG=t,this.placeEditInlineSVGToolbar(),this.checkToolbarTools(),this.inlineSVGEditToolbar.classList.add("medium-editor-toolbar-active")},checkToolbarTools:function(){var e=t(this.traceSVG).parents("i").hasClass("inline-icon"),i=this.inlineSVGEditToolbar.querySelector(".me-svg-inline");e?i.classList.add("medium-editor-button-active"):i.classList.remove("medium-editor-button-active")},imageResizableEnable:function(){var e=this,i=this.traceImg.getBoundingClientRect();this.mirrorResize.style.width=i.width+"px",this.mirrorResize.style.height=i.height+"px",this.mirrorResize.style.top=i.top+window.scrollY+"px",this.mirrorResize.style.left=i.left+window.scrollX+"px",this.mirrorResize.style.display="block";var s=t(this.mirrorResize),n=t(this.traceImg);s.resizable({aspectRatio:!0,handles:"e, s, se",alsoResize:n,create:function(i,s){var n=t(i.target);n.addClass("me-ui-custom-wrapper"),n.append(e.resizeSizes),n.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),n.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),n.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,i){e.resizeSizes.style.display="block"},resize:function(t,i){e.placeMirrorImg(t.target),e.placeEditImgToolbar(),e.resizeSizes.textContent=i.size.width+" x "+i.size.height},stop:function(t,i){e.resizeSizes.style.display="none"}})},inlineSVGResizableEnable:function(){var e=this,i=this.traceSVG.getBoundingClientRect();this.mirrorSVGResize.style.width=i.width+"px",this.mirrorSVGResize.style.height=i.height+"px",this.mirrorSVGResize.style.top=i.top+window.scrollY+"px",this.mirrorSVGResize.style.left=i.left+window.scrollX+"px",this.mirrorSVGResize.style.display="block";var s=t(this.mirrorSVGResize),n=t(this.traceSVG).parents("i");s.resizable({aspectRatio:!0,handles:"e, s, se",create:function(i,s){var n=t(i.target);n.addClass("me-ui-custom-wrapper"),n.append(e.resizeSizes),n.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),n.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),n.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,i){e.resizeSizes.style.display="block"},resize:function(t,i){e.placeMirrorSVG(t.target),e.placeEditInlineSVGToolbar(),n.css("fontSize",i.size.width+"px"),e.resizeSizes.textContent=i.size.width+" x "+i.size.height},stop:function(t,i){e.resizeSizes.style.display="none"}})},videoResizableEnable:function(){var e=this,i=this.traceVideo.getBoundingClientRect();this.mirrorVideoResize.style.width=i.width+"px",this.mirrorVideoResize.style.height=i.height+"px",this.mirrorVideoResize.style.top=i.top+window.scrollY+"px",this.mirrorVideoResize.style.left=i.left+window.scrollX+"px",this.mirrorVideoResize.style.display="block";var s=t(this.mirrorVideoResize),n=t(this.traceVideo);s.resizable({aspectRatio:!0,handles:"e, s, se",alsoResize:n,create:function(i,s){var n=t(i.target);n.addClass("me-ui-custom-wrapper"),n.append(e.resizeSizes),n.find(".ui-resizable-e").append('<span class="img-resize-handle img-resize-handle-e" data-axis="e"></span>'),n.find(".ui-resizable-se").append('<span class="img-resize-handle img-resize-handle-se" data-axis="se"></span>'),n.find(".ui-resizable-s").append('<span class="img-resize-handle img-resize-handle-s" data-axis="s"></span>')},start:function(t,i){e.resizeSizes.style.display="block"},resize:function(t,i){e.placeMirrorVideo(t.target),e.resizeSizes.textContent=i.size.width+" x "+i.size.height,n.find("iframe").height(i.size.height),n.find("iframe").width(i.size.width)},stop:function(t,i){e.resizeSizes.style.display="none"}})},handleRemoveInlineElement:function(t){this.hideAllToolbars()},placeMirrorImg:function(t){var e=this.traceImg.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeMirrorVideo:function(t){var e=this.traceVideo.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeMirrorSVG:function(t){var e=this.traceSVG.getBoundingClientRect();t.style.top=e.top+window.scrollY+"px",t.style.left=e.left+window.scrollX+"px"},placeEditImgToolbar:function(){var t=this.traceImg.getBoundingClientRect();this.imageEditToolbar.style.left=t.left+(t.width-this.imageEditToolbar.offsetWidth)/2+"px",this.imageEditToolbar.style.top=window.scrollY+t.top-this.imageEditToolbar.offsetHeight-8+"px"},placeEditInlineSVGToolbar:function(){var t=this.traceSVG.getBoundingClientRect();this.inlineSVGEditToolbar.style.left=t.left+(t.width-this.inlineSVGEditToolbar.offsetWidth)/2+"px",this.inlineSVGEditToolbar.style.top=window.scrollY+t.top-this.inlineSVGEditToolbar.offsetHeight-8+"px"},hideEditImgToolbar:function(){this.traceImg&&("undefined"!=typeof t(this.mirrorResize).data("uiResizable")&&t(this.mirrorResize).resizable("destroy"),this.mirrorResize.style.display="",this.mirrorResize.style.margin="",this.mirrorResize.style.position="",this.mirrorResize.style.top="",this.mirrorResize.style.left=""),this.traceImg=null,this.imageEditToolbar.classList.remove("medium-editor-toolbar-active")},hideEditVideoToolbar:function(){this.traceVideo&&("undefined"!=typeof t(this.mirrorVideoResize).data("uiResizable")&&t(this.mirrorVideoResize).resizable("destroy"),this.mirrorVideoResize.style.display="",this.mirrorVideoResize.style.margin="",this.mirrorVideoResize.style.position="",this.mirrorVideoResize.style.top="",this.mirrorVideoResize.style.left=""),this.traceVideo=null},hideEditInlineSVGToolbar:function(){this.traceSVG&&("undefined"!=typeof t(this.mirrorSVGResize).data("uiResizable")&&t(this.mirrorSVGResize).resizable("destroy"),this.mirrorSVGResize.style.display="",this.mirrorSVGResize.style.margin="",this.mirrorSVGResize.style.position="",this.mirrorSVGResize.style.top="",this.mirrorSVGResize.style.left=""),this.traceSVG=null,this.inlineSVGEditToolbar.classList.remove("medium-editor-toolbar-active")},hideAllToolbars:function(){this.hideEditImgToolbar(),this.hideEditVideoToolbar(),this.hideEditInlineSVGToolbar()},pasteMediaHTML:function(t){this.base.restoreSelection(),t='<div class="media-embed-wrap">'+t+"</div>",this.base.pasteHTML(t,{cleanPastedHTML:!1,cleanAttrs:["dir"]}),this.hideAllToolbars(),this.mediaBtn.classList.remove("embed-value-visibile"),this.mediaBtn.style.display="none"},handleClickEmbed:function(t){var e={eventName:"rexlive:inlineVideoEditor",lastCursorPosition:this.traceSelection};Rexbuilder_Util_Editor.sendParentIframeMessage(e),this.clientLastCursorPosition=e.lastCursorPosition},getEmbedCode:function(e){var i=this,s=e.valueUrl;""!==s&&(this.mediaEmbedInput.classList.remove("embed-loading"),t.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_get_embed_code",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,url_to_embed:s},success:function(e,n){if(s="",e.success&&""!==e.data.embed){if(i.traceSelection){rangy.getSelection().restoreCharacterRanges(i.traceEditor,i.clientLastCursorPosition);var a=i.getFirstRange();a.refresh();var o="span"}var r=Rexbuilder_Dom_Util.htmlToElement(e.data.embed);a.insertNode(r);var l=document.createElement(o);l.className="overlay-status-for-video-inline",i.wrap(r,l);var d=t(i.traceEditor).parents(".grid-stack-item"),c=d.parent().data().plugin_perfectGridGalleryEditor;c.updateElementHeight(d[0]);var h={eventName:"rexlive:edited",modelEdited:d.parents(".rexpansive_section").hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(h)}},error:function(t){},complete:function(){i.mediaEmbedInput.classList.remove("embed-loading"),i.traceEditor.focus()}}))},mediaEmbedInputBlur:function(t){this.mediaBtn.classList.remove("embed-value-visibile")},handleClickInlineSVG:function(t){var e={eventName:"rexlive:inlineSVG",inlineSVGData:{}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},handleInlineSVGInsertReplace:function(t){var e='<i class="'+t.svg_class+'"><svg><use xlink:href="#'+t.svg_ID+'"></use></svg></i>';if(this.traceSelection){rangy.getSelection().restoreCharacterRanges(this.traceEditor,this.traceSelection);var i=this.getFirstRange();i.refresh()}var s=!1;if(this.traceSVG&&(this.traceSVG.setAttribute("xlink:href","#"+t.svg_ID),s=!0),i)if(s);else{var n=Rexbuilder_Dom_Util.htmlToElement(e);if(i.insertNode(n),n.parentElement===this.traceEditor){var a=n.previousElementSibling,o=n.nextElementSibling,r="";o?r=o.tagName.toLowerCase():a&&(r=a.tagName.toLowerCase()),this.emptyLine(o)&&rangy.dom.removeNode(o),this.emptyLine(a)&&rangy.dom.removeNode(a),"div"!==r&&"span"!==r&&""!==r||(r="p"),this.wrap(n,document.createElement(r))}}this.hideAllToolbars(),this.mediaBtn.style.display="none"}}),M=MediumEditor.Extension.extend({name:"onlySVGFixExtension",init:function(){this.subscribe("editableClick",this.checkContent.bind(this))},checkContent:function(t){if("click"==t.type){var e=this.base.getFocusedElement();if(this.checkOnlyIcons(e)){for(var i=t.currentTarget;0!==i.childElementCount;)i=i.children[i.childElementCount-1];"USE"===i.tagName.toUpperCase()&&(i=i.parentNode),"SVG"===i.tagName.toUpperCase()&&(i=i.parentNode);var s=document.createElement("span");s.innerHTML="&nbsp;",i.parentNode.append(s);var n=document.createRange(),a=window.getSelection();n.setStart(s,1),n.collapse(!0),a.removeAllRanges(),a.addRange(n)}}},checkOnlyIcons:function(t){var e=t.getElementsByTagName("svg");return 0!==e.length&&""==t.innerText}}),A=MediumEditor.Extension.extend({name:"rexelement",init:function(){this.traceElement=null,this.traceElementId="",this.containsWpcf7,this.subscribe("editableMouseover",this.handleMouseOver.bind(this)),this.subscribe("positionToolbar",this.handlePositionToolbar.bind(this)),this.subscribe("hideToolbar",this.handleHideToolbar.bind(this))},handleMouseOver:function(e,i){var s=e.target,n=Rexbuilder_Util.hasClass(t(i).parents(".grid-stack-item").get(0),"item--me-focus"),a=t(i).parents(".rexpansive_section").get(0),o=Rexbuilder_Util.hasClass(a,"block-editing");if(n&&o){var r=s.matches(".rex-element-wrapper")?s:t(s).parents(".rex-element-wrapper").get(0);r&&(this.traceElement=r,this.traceElementId=r.dataset.rexElementId,this.containsWpcf7=!!this.traceElement.querySelector(".wpcf7"))}},editRexelement:function(e){var i=t(this.traceElement);this.containsWpcf7&&this.setOutline(this.traceElement.querySelector(".wpcf7-form"),"#00ACFF");var s={eventName:"rexlive:openRexElementChoose",elementData:Rexbuilder_Rexelement.generateElementData(i)};Rexbuilder_Util_Editor.sendParentIframeMessage(s),i.parents(".text-wrap").blur()},deleteRexelement:function(e){var i=t(this.traceElement),s=i.parents("p.rex-elements-paragraph");this.containsWpcf7&&Rexbuilder_Rexwpcf7_Editor.removeFormInPage(this.traceElementId),i.remove(),0==s.find(".rex-element-wrapper").length&&s.remove(),Rexbuilder_Util_Editor.builderEdited(!1)},setOutline:function(t,e){t.style.outline="2px solid "+e,t.style.outlineOffset="-1px"},handlePositionToolbar:function(t){var e=s.getSelectedParentElement(),i=this.base.getExtensionByName("toolbar");this.insideRexElement(e)&&(i.toolbar.style.display="none")},handleHideToolbar:function(t){var e=this.base.getExtensionByName("toolbar");e.toolbar.style.display=""},insideRexElement:function(e){var i=t(e);return!!i.hasClass("rex-element-wrapper")||0!=i.parents(".rex-element-wrapper").length},hideAnchorPreview:function(t){for(var e=document.getElementsByClassName("medium-editor-anchor-preview"),i=0;i<e.length;i++)e[i].style.display="none"}}),V=MediumEditor.Extension.extend({name:"rexwpcf7",init:function(){this.traceGsItem=null,this.traceForm=null,this.traceRow=null,this.traceColumn=null,this.traceColumnContent=null,Rexbuilder_Util.$rexContainer.on("click",".wpcf7-form-button",this.delegateClickContainer.bind(this)),this.subscribe("editableMouseover",this.handleMouseOver.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),Rexbuilder_Util.$document.on("rexlive:clearFormOutlines",this.clearOutlines.bind(this)),Rexbuilder_Rexwpcf7_Editor.setCf7EditorInstance(this)},delegateClickContainer:function(t){t.preventDefault();var e=t.currentTarget.getAttribute("data-operation");if(""!==e)switch(e){case"addRow":Rexbuilder_Util.addClass(this.traceForm.querySelector(".wpcf7-select-columns--bottom"),"active");break;case"addRowTop":Rexbuilder_Util.addClass(this.traceForm.querySelector(".wpcf7-select-columns--top"),"active");break;case"addSelectedColumns":this.addSelectedColumns(t.currentTarget);break;case"cloneRow":this.cloneRow();break;case"deleteRow":this.deleteRow();break;case"columnSettings":this.openColumnSettings();break;case"cloneColumn":this.cloneColumn();break;case"deleteColumnContent":this.deleteColumnContent();break;case"addColumnContent":this.addColumnContent();break;case"editElement":c.editRexelement();break;case"deleteElement":c.deleteRexelement()}},handleMouseOver:function(e,i){this.traceTextWrap=i,this.$traceTextWrap=t(i),this.traceGsItem=t(this.traceTextWrap).parents(".grid-stack-item").get(0);var s=t(this.traceTextWrap).parents(".rexpansive_section").get(0),n=e.target;if(Rexbuilder_Util.hasClass(this.traceGsItem,"item--me-focus")&&Rexbuilder_Util.hasClass(s,"block-editing")){var a=n.matches(".wpcf7-form:not(.no-builder-form)")?n:t(n).parents(".wpcf7-form:not(.no-builder-form)").get(0);if(a){this.traceForm=a;var o=n.matches(".wpcf7-row")?n:t(n).parents(".wpcf7-row").get(0);if(this.updateHeight(!0),o){this.traceRow=o,Rexbuilder_Util.removeClass(this.traceForm.querySelector(".wpcf7-select-columns--top"),"active"),Rexbuilder_Util.removeClass(this.traceForm.querySelector(".wpcf7-select-columns--bottom"),"active");var r=n.matches(".wpcf7-column")?n:t(n).parents(".wpcf7-column").get(0);r&&(this.traceColumn=r,Rexbuilder_Util.hasClass(r,"with-button")||(this.traceColumnContent=r.querySelector(".wpcf7-form-control-wrap")))}}else this.handleBlur()}},addColumnContent:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t={eventName:"rexlive:openRexWpcf7AddContent",insertionPoint:{formID:c.traceElementId,row_number:this.traceRow.getAttribute("wpcf7-row-number"),column_number:this.traceColumn.getAttribute("wpcf7-column-number")}};Rexbuilder_Util_Editor.sendParentIframeMessage(t),Rexbuilder_Rexelement_Editor.focusRexElement(this.$traceTextWrap)},addSelectedColumns:function(t){Rexbuilder_Util_Editor.builderEdited(!1);var e=parseInt(t.className.match(/select-(\d)-columns?/)[1]);Rexbuilder_Rexwpcf7_Editor.addNewRow(c.traceElementId,e),this.updateHeight()},cloneRow:function(){Rexbuilder_Util_Editor.builderEdited(!1);var e=t(this.traceRow).clone(),i=parseInt(e.attr("wpcf7-row-number"));Rexbuilder_Rexwpcf7_Editor.addRow(c.traceElementId,e,i),Rexbuilder_Live_Utilities.launchTooltips(),this.updateHeight()},deleteRow:function(){Rexbuilder_Util_Editor.builderEdited(!1);var e=t(this.traceRow).attr("wpcf7-row-number");Rexbuilder_Rexwpcf7_Editor.deleteRow(c.traceElementId,e),this.updateHeight()},openColumnSettings:function(){this.setOutline(this.traceColumnContent,"#FF0055");var e=!!this.traceColumn.querySelector(".rex-wpcf7-column-content-data"),i=!!this.traceColumn.querySelector(".rex-wpcf7-file-caption"),s={eventName:"rexlive:openRexWpcf7EditContent",columnContentData:Rexbuilder_Rexwpcf7.generateColumnContentData(t(this.traceColumn),e),spanDataExists:e,fileCaptionExists:i};Rexbuilder_Util_Editor.sendParentIframeMessage(s)},cloneColumn:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=parseInt(this.traceColumn.getAttribute("wpcf7-column-number")),e=parseInt(this.traceRow.getAttribute("wpcf7-row-number"));Rexbuilder_Rexwpcf7_Editor.addClonedColumnRow(c.traceElementId,t,e),Rexbuilder_Live_Utilities.launchTooltips(),this.updateHeight()},deleteColumnContent:function(){Rexbuilder_Util_Editor.builderEdited(!1);var t=this.traceRow.getAttribute("wpcf7-row-number"),e=this.traceColumn.getAttribute("wpcf7-column-number");Rexbuilder_Rexwpcf7_Editor.deleteColumnContent(c.traceElementId,t,e),this.updateHeight()},handleBlur:function(){this.updateHeight()},setOutline:function(t,e){t.style.outline="2px solid "+e,t.style.outlineOffset="-1px"},clearOutlines:function(){this.traceForm&&(this.traceForm.style.outline="",this.traceForm.style.outlineOffset="",this.traceColumnContent.style.outline="",this.traceColumnContent.style.outlineOffset="")},updateHeight:function(e){function i(e){s=t(e).parents(".text-wrap"),0!==s.length&&Rexbuilder_Util_Editor.updateBlockContainerHeight(s,!1,!0)}e=e||!1;var s;if(e){if(!this.traceForm)return;i(this.traceForm)}else{var n=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+c.traceElementId+'"] .wpcf7-form'));if(0===n.length)return;n.forEach(i)}},focusBlock:function(){Rexbuilder_Rexelement_Editor.focusRexElement(this.$traceTextWrap)}}),G=function(){Rexbuilder_Util.$document.on("click",".rex-close-html-editor",function(e){var i=t(e.target).parents(".editing-html"),s=i.find("textarea"),n=t.parseHTML(s.val());i.children().remove(),i.append(n),i.children().eq(0).unwrap()})},N=function(){s.subscribe("editableInput",function(e,i){var s=t(i).parents(".grid-stack-item"),n={eventName:"rexlive:edited",modelEdited:s.parents(".rexpansive_section").hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(n)}),s.subscribe("focus",function(e,i){if(i){var s=t(i).parents(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;s&&s.properties.gridstackInstance.enableMove(!1)}}),s.subscribe("blur",function(e,i){if("click"==e.type&&"undefined"!=typeof s.getExtensionByName("insert-media")&&0!==t(e.srcElement).parents("."+s.getExtensionByName("insert-media").toolbarWrapClass).length)return!1;Rexbuilder_Block_Editor.updateTextTool(i);var n=t(i).parents(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;n&&(n.properties.gridstackInstance.enableMove(!0),Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}),s.subscribe("editablePaste",function(e,i){setTimeout(function(){Rexbuilder_Util_Editor.updateBlockContainerHeight(t(i))},0);var n=MediumEditor.selection.getSelectionStart(s.options.ownerDocument),a=t(n),o=n.tagName.toLowerCase();
if("span"===o||"p"===o){var r=n.parentNode.tagName.toLowerCase();if("h1"!==r&&"h2"!==r&&"h3"!==r&&"h4"!==r&&"h5"!==r&&"h6"!==r){var l=a.prev().css("color");p(l)}}else{var d=a.children().last().css("color");p(d)}})},H=function(){var e="textEditorToolbar";if(0==Rexbuilder_Util.$rexContainer.children('.editable[id="'+e+'"]').length){var i=document.createElement("div");t(i).attr({id:e,"class":"editable",style:"display: none"}),Rexbuilder_Util.$rexContainer.prepend(i)}},D=function(){s.destroy()},U=function(){n=new _,a=new w,o=new C,r=new S,l=new T,d=new B,c=new A,s=new MediumEditor(".editable",{toolbar:{buttons:["colorPicker","formattingTags",{name:"anchor",contentDefault:'<i class="l-svg-icons"><svg><use xlink:href="#C001-Link"></use></svg></i>',formSaveLabel:'<span class="tool-button tool-button--inline"><i class="l-svg-icons"><svg><use xlink:href="#A006-Save"></use></svg></i></span>',formCloseLabel:'<span class="tool-button tool-button--inline tool-button--black"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></span>'},"headingTags","justifyDropdown","listDropdown","contentBlockPosition","textEditorHtml"]},imageDragging:!1,extensions:{imageDragging:{},colorPicker:n,textEditorHtml:new k,headingTags:a,formattingTags:o,justifyDropdown:r,listDropdown:l,contentBlockPosition:new R,"close-editor-escape":new L,"insert-media":d,textGradient:new y,"hide-row-tools-on-editing":new I,"rexbutton-input":new z,rexelement:c,rexwpcf7:new V,onlySVGFixExtension:new M},paste:{forcePlainText:!1},placeholder:{text:"Type here your text",hideOnClick:!1}}),N()},P=function(t){s.trigger(t.name,t.data,t.editable)},F=function(t){s.getExtensionByName("placeholder").hidePlaceholder(t[0])},q=function(){return s},j=function(){u=!1,H(),U(),G()};return{init:j,load:i,launchTextEditors:e,addElementToTextEditor:m,destroyMediumEditor:D,getEditorInstance:q,createEditor:U,triggerMEEvent:P,openTextGradientColor:x,removePlaceholder:F}}(jQuery);
var Rexbuilder_Section=function(e){"use strict";function t(e){var t,i=Array.prototype.slice.call(e.getElementsByClassName("perfect-grid-item")),r=i.length;for(t=0;t<r;t++)Rexbuilder_Util.hasClass(i[t],"block-has-slider")||TextEditor.addElementToTextEditor(i[t].querySelector(".text-wrap"))}function i(t){var i=e(t.currentTarget).parents(".rexpansive_section"),r=null,o=-1,l=-1,a=i.attr("data-rexlive-section-id"),d=null;if("default"==Rexbuilder_Util.activeLayout&&(d=Rexbuilder_Util.getDefaultLayoutState(),r=Rexbuilder_Util.getPageCustomizationsDom(),i.hasClass("rex-model-section")&&(o=parseInt(i.attr("data-rexlive-model-number")),l=parseInt(i.attr("data-rexlive-model-id")))),"undefined"!=typeof Rexbuilder_Rexwpcf7_Editor){var n=i.find(".rex-element-wrapper").has(".wpcf7-form");n.each(function(t,i){var r=e(i);if(0!==r.find(".wpcf7-form").length){var o=r.attr("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.removeFormInPage(o)}})}Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage();var s={show:!0,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null,stateDefault:null!=d?jQuery.extend(!0,[],d):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(i,!1),null!=r){var u,c;for(Rexbuilder_Dom_Util.fixModelNumbers(),u=0;u<r.length;u++){for(c=0;c<r[u].sections.length;c++)if(r[u].sections[c].section_is_model){if(r[u].sections[c].section_model_id==l&&r[u].sections[c].section_model_number==o){r[u].sections.splice(c,1);break}}else if(a==r[u].sections[c].section_rex_id){r[u].sections.splice(c,1);break}if(l!=-1){var _=1;for(c=0;c<r[u].sections.length;c++)r[u].sections[c].section_model_id==l&&(r[u].sections[c].section_model_number=_,_+=1)}}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(r),c=0;c<d.length;c++)if(d[c].section_is_model){if(d[c].section_model_id==l&&d[c].section_model_number==o){d.splice(c,1);break}}else if(a==d[c].section_rex_id){d.splice(c,1);break}if(l!=-1){var _=1;for(c=0;c<d.length;c++)d[c].section_model_id==l&&(d[c].section_model_number=_,_+=1)}Rexbuilder_Util.updateDefaultLayoutState({pageData:d})}0===Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)").length&&Rexbuilder_Util_Editor.activeAddSection();var x={show:!1,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null,stateDefault:null!=d?jQuery.extend(!0,[],d):null};Rexbuilder_Util_Editor.pushAction(i,"updateSectionVisibility",x,s);var m={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(m)}function r(i){Rexbuilder_Util_Editor.sectionCopying=!0;var r=e(i.currentTarget).parents(".rexpansive_section"),o=r.clone(!1),l=null;"default"==Rexbuilder_Util.activeLayout&&(l=Rexbuilder_Util.getPageCustomizationsDom());var a=r.attr("data-rexlive-section-id"),d=-1,n=-1;r.hasClass("rex-model-section")&&(d=r.attr("data-rexlive-model-id"),n=r.attr("data-rexlive-model-number"));var s=-1;if(Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(t,i){var o=e(i);if(o.attr("data-rexlive-section-id")==a){if(!r.hasClass("rex-model-section"))return s=t+1,!1;if(o.attr("data-rexlive-model-id")==d&&o.attr("data-rexlive-model-number")==n)return s=t+1,!1}}),r.hasClass("rex-model-section")){Rexbuilder_Util_Editor.insertingModel=!0;var u=o.attr("data-rexlive-model-id"),c=1;Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(t,i){var r=e(i);r.attr("data-rexlive-model-id")==u&&(c+=1)}),o.attr("data-rexlive-model-number",c);var _=o.find(".update-model-button");Rexbuilder_Dom_Util.updateLockEditModel(_,!0)}Rexbuilder_Live_Utilities.removeColorPicker(o),Rexbuilder_Section.prepareSectionCopied(o),o.insertAfter(r),Rexbuilder_Section_Editor.listenNewRowDataChange(o.children(".section-data")[0]);var x=o.find(".grid-stack-row");x.perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),Rexbuilder_Util.$rexContainer.sortable("refresh"),t(x[0]),Rexbuilder_Live_Utilities.launchTooltips();var m={show:!1,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(o,!0),null!=l){var b,v,p={section_rex_id:o.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0};for(o.hasClass("rex-model-section")&&(p.section_is_model=!0,p.section_model_id=o.attr("data-rexlive-model-id")),b=0;b<l.length;b++){if(p.section_is_model){var c=1;for(v=0;v<l[b].sections.length;v++)l[b].sections[v].section_model_id==p.section_model_id&&(c+=1);p.section_model_number=c}s!=-1?l[b].sections.splice(s,0,p):l[b].sections.push(p)}Rexbuilder_Util.updatePageCustomizationsDomOrder(l)}var g={show:!0,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};Rexbuilder_Util_Editor.pushAction(o,"updateSectionVisibility",g,m),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1;var f={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(f),Rexbuilder_Util.editedDataInfo.addSectionData(o.attr("data-rexlive-section-id")),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o,s)}function o(t){var i=e(t.target).parents(".rexpansive_section");p(i)}function l(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]'),p(t)}function a(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,r=e.settings.$section;if("undefined"!=typeof i.collapse){var o=t.createActionDataMoveBlocksGrid(),l={gridInstance:t,gridLayout:{layout:"masonry",fullHeight:!1,singleHeight:t.settings.cellHeightMasonry},blockDisposition:o,collapse:!0};Rexbuilder_Util_Editor.pushAction(r,"collapseSection",l,i)}}function d(t){var i=Rexbuilder_Util.createSectionID(),r=e(this),o=r.attr("data-new-row-position"),l=null;"default"==Rexbuilder_Util.activeLayout&&(l=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section";var a={rexID:i,dimension:"full",dimensionClass:"full-disposition",sectionWidth:"100%",fullHeight:"false",blockDistance:20,layout:"fixed",rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},d=Rexbuilder_Live_Templates.getTemplate("tmpl-new-section",a),n=e(d),s=n.children(".section-data");switch(s.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",a)),o){case"bottom":var u=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":var u=r.parents(".rexpansive_section")}0!=u.length?n.insertAfter(u):n.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,n.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),n.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();var c={show:!1,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(n,!0),null!=l){var _,x={section_rex_id:n.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0};for(_=0;_<l.length;_++)l[_].sections.push(x);Rexbuilder_Util.updatePageCustomizationsDomOrder(l)}var m={show:!0,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};Rexbuilder_Util_Editor.pushAction(n,"updateSectionVisibility",m,c);var b={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(b),Rexbuilder_Util.editedDataInfo.addSectionData(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}function n(t){var i,r=Rexbuilder_Util.createSectionID(),o=t.settings.data_to_send,l=o.position;i=""!=o.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionTarget.sectionID+'"][data-rexlive-model-number="'+o.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionTarget.sectionID+'"]');var a=null;"default"==Rexbuilder_Util.activeLayout&&(a=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section";var d={rexID:r,dimension:"full",dimensionClass:"center-disposition",sectionWidth:"100%",fullHeight:"false",blockDistance:20,layout:"fixed",rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},n=Rexbuilder_Live_Templates.getTemplate("tmpl-new-section",d),s=e(n),u=s.children(".section-data");switch(u.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",d)),l){case"bottom":var c=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":var c=i}0!=c.length?s.insertAfter(c):s.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Section_Editor.listenNewRowDataChange(u[0]),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,s.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),s.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();var _={show:!1,layoutsOrder:null!=a?jQuery.extend(!0,[],a):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(s,!0),null!=a){var x,m={section_rex_id:s.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0};for(x=0;x<a.length;x++)a[x].sections.push(m);Rexbuilder_Util.updatePageCustomizationsDomOrder(a)}var b={show:!0,layoutsOrder:null!=a?jQuery.extend(!0,[],a):null};Rexbuilder_Util_Editor.pushAction(s,"updateSectionVisibility",b,_);var o={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(o),Rexbuilder_Util.editedDataInfo.addSectionData(r),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(s)}function s(t){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var i,r=t.settings.data_to_send,o=r.model,l=e.parseHTML(o),a=r.sectionTarget.modelNumber,d=-1,n=r.sectionTarget.sectionID,s=null,u=null;"default"==Rexbuilder_Util.activeLayout&&(s=Rexbuilder_Util.getDefaultLayoutState(),u=Rexbuilder_Util.getPageCustomizationsDom()),""!=a?(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+n+'"][data-rexlive-model-number="'+a+'"]'),d=parseInt(i.attr("data-rexlive-model-id"))):i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+n+'"]');var c=1;Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(t,i){var o=e(i);o.attr("data-rexlive-model-id")==r.modelID&&(c+=1)}),i.after(l);var _=e(l),x=_.attr("data-rexlive-section-id"),m={id:r.modelID,modelName:r.modelName,sectionID:x,$section:_,modelNumber:c,isModel:!0},b={id:m.id,names:r.customizationsNames};Rexbuilder_Util.updateDivModelCustomizationsNames(b);var v={id:m.id,name:m.modelName,customizations:r.customizationsData};Rexbuilder_Util.updateModelsCustomizationsData(v),Rexbuilder_Dom_Util.updateSectionBecameModel(m),Rexbuilder_Section.prepareSectionCopied(_);var p=_.children(".section-data");p.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section"));var g=_.find(".update-model-button");Rexbuilder_Dom_Util.updateLockEditModel(g,!0);var f=_.find(".grid-stack-row");f.perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(_,p),setTimeout(function(){f.children(".grid-stack-item").each(function(t,i){var r=e(i).find(".rex-slider-wrap");0!=r.length&&RexSlider.initSlider(r)})},500,f),Rexbuilder_Util.$rexContainer.sortable("refresh");var R={$sectionToHide:_,$sectionToShow:i,layoutsOrder:null!=u?jQuery.extend(!0,[],u):null,stateDefault:null!=s?jQuery.extend(!0,[],s):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(i,!1),Rexbuilder_Dom_Util.updateSectionVisibility(_,!0),null!=u){var h,U,y={section_rex_id:x,targets:[],section_is_model:!0,section_model_id:r.modelID,section_model_number:c,section_hide:!1,section_created_live:!0};for(h=0;h<u.length;h++){for(U=0;U<u[h].sections.length;U++)if(u[h].sections[U].section_is_model){if(u[h].sections[U].section_model_id==d&&u[h].sections[U].section_model_number==a)break}else if(n==u[h].sections[U].section_rex_id)break;u[h].sections[U].section_created_live?u[h].sections.splice(U,1,jQuery.extend(!0,{},y)):(y.section_created_live=!1,u[h].sections.splice(U,1),u[h].sections.push(jQuery.extend(!0,{},y))),y.section_created_live=!0}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(u),U=0;U<s.length;U++)if(s[U].section_is_model){if(s[U].section_model_id==d&&s[U].section_model_number==a)break}else if(n==s[U].section_rex_id)break;s.splice(U,1,y),Rexbuilder_Util.updateDefaultLayoutState({pageData:s,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var D={$sectionToHide:i,$sectionToShow:_,layoutsOrder:null!=u?jQuery.extend(!0,[],u):null,stateDefault:null!=s?jQuery.extend(!0,[],s):null};Rexbuilder_Util_Editor.pushAction(_,"updateSectionModel",D,R),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1;var r={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(r)}function u(i){if("default"==Rexbuilder_Util.activeLayout){var r=Rexbuilder_Util.$rexContainer.find(".import-model");0!=r.length&&(r.next().is("#textEditorToolbar")&&Rexbuilder_Util.$rexContainer.find(".rexpansive_section").eq(0).before(r.detach()),e.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_model_live",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:{ID:parseInt(r.attr("data-rex-model-id"))}},success:function(i){if(i.success){var o={model:i.data.model,modelName:i.data.name,modelID:i.data.id,customizationsData:i.data.customizations_data,customizationsNames:i.data.customizations_names};Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var l=1;Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(t,i){var r=e(i);r.attr("data-rexlive-model-id")==o.modelID&&(l+=1)});var a=e.parseHTML(o.model);r.after(a),r.remove();var d=Rexbuilder_Util.getDefaultLayoutState(),n=Rexbuilder_Util.getPageCustomizationsDom(),s=e(a),u=s.attr("data-rexlive-section-id");s.attr("data-rexlive-model-number",l);var _={id:o.modelID,names:o.customizationsNames};Rexbuilder_Util.updateDivModelCustomizationsNames(_);var x={id:o.modelID,name:o.modelName,customizations:o.customizationsData};Rexbuilder_Util.updateModelsCustomizationsData(x),Rexbuilder_Section.prepareSectionCopied(s);var m=s.children(".section-data");m.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section"));var b=s.find(".update-model-button");Rexbuilder_Dom_Util.updateLockEditModel(b,!0);var v=s.find(".grid-stack-row");v.perfectGridGalleryEditor({editorMode:!0}),c(v,i),v.find(".rex-element-wrapper").each(function(t,i){Rexbuilder_Rexelement_Editor.setupElement(e(i))}),Rexbuilder_Live_Utilities.updateModelSectionTools(s,m),setTimeout(function(){v.find(".grid-stack-item").each(function(t,i){var r=e(i).find(".rex-slider-wrap");0!=r.length&&RexSlider.initSlider(r)})},500,v),t(v.get(0)),Rexbuilder_Live_Utilities.launchTooltips();var p,g=Array.prototype.slice.call(v.get(0).getElementsByClassName("perfect-grid-item")),f=g.length;for(p=0;p<f;p++){var R=e(g[p]).find(".grid-item-content"),h=g[p].querySelector(".rexbuilder-block-data"),U=h.getAttribute("data-image_bg_elem_active"),y=h.getAttribute("data-image_bg_block");if("true"==U&&""!==y){var D={active:U,urlImage:y};Rexbuilder_Util.addClass(g[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-image").parentElement,"tool-button--hide"),Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(R,D),Rexbuilder_Block_Editor.updateBlockImagePositionTool(R,D)}var S=h.getAttribute("data-color_bg_block"),C=h.getAttribute("data-color_bg_block_active");"true"==C&&""!==S&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(R,S);var E=h.getAttribute("data-overlay_block_color"),k=h.getAttribute("data-overlay_block_color_active");"true"==k&&""!==E&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(R,E);var T=h.getAttribute("data-video_bg_id"),L=h.getAttribute("data-video_bg_url"),w=h.getAttribute("data-video_bg_url_vimeo");""===T&&""===L&&""===w||(Rexbuilder_Util.addClass(g[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-video-background").parentElement,"tool-button--hide"),Rexbuilder_Util.removeClass(g[p].querySelector(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parentElement,"tool-button--hide")),Rexbuilder_Block_Editor.updateTextTool(g[p].querySelector(".text-wrap"))}Rexbuilder_Util.$rexContainer.sortable("refresh");var I={show:!1,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(s,!0),null!=n){var M=0;Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(t,i){var r=e(i);if(r.attr("data-rexlive-model-id")==o.modelID&&r.attr("data-rexlive-model-number")==l)return M=t,!1});var p,N={section_rex_id:u,targets:[],section_is_model:!0,section_model_id:o.modelID,section_model_number:l,section_hide:!1,section_created_live:!0};for(p=0;p<n.length;p++)n[p].sections.splice(M,0,jQuery.extend(!0,{},N));d.splice(M,0,jQuery.extend(!0,{},N)),Rexbuilder_Util.updatePageCustomizationsDomOrder(n),Rexbuilder_Util.updateDefaultLayoutState({pageData:d,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var A={show:!0,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null};Rexbuilder_Util_Editor.pushAction(s,"updateSectionVisibility",A,I),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1;var D={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(D)}},error:function(e){},complete:function(e){}}))}}function c(t,i){var r,o,l=t.find(".rex-button-wrapper"),a="",d=i.data.rexButtonsHTML,n=d.length;l.each(function(t,i){var l=e(i);for(a=l.attr("data-rex-button-id"),o=0;o<n;o++)if(r=d[o],-1!==r.search(a)){l.replaceWith(r);break}}),l=t.find(".rex-button-wrapper"),l.each(function(t,i){Rexbuilder_Rexbutton.endFixingButtonImported(e(i))})}function _(){for(var t,i,r={rexID:"",dimension:"full",dimensionClass:"center-disposition",sectionWidth:"100%",fullHeight:"false",blockDistance:20,layout:"fixed",rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},o=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),l=o.length,a=0;a<l;a++){t=o[a],i=t.getAttribute("data-rexlive-section-id"),r.rexID=i;var d=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",r);e(t).find(".section-data").after(d)}}var x=function(e){e.children(".section-toolBox").addClass("tool-box-active")},m=function(e,t){var i=e.find(".section-toolBox")[0];"mobile"===Rexbuilder_Util.activeLayout?(i.style.marginLeft="-"+t.left+"px",i.style.marginRight="-"+t.right+"px"):(i.style.marginLeft="",i.style.marginRight="")},b=function(e,t){t.top>25?e.removeClass("ui-tools--near-top"):e.addClass("ui-tools--near-top")},v=function(t){var i=parseInt(t.attr("data-rexlive-section-number"));Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,t.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber);var r=t.find(".grid-stack-row");if(r.removeClass("grid-number-"+i),r.removeClass(function(e,t){return(t.match(/grid-stack-instance-\d+/g)||[]).join(" ")}),Rexbuilder_Live_Utilities.removeDeletedBlocks(r),!Rexbuilder_Util_Editor.insertingModel){var o=Rexbuilder_Util.createSectionID();t.attr("data-rexlive-section-id",o),t.attr("data-rexlive-section-name","");var l=t[0].querySelector(".section-data");l.setAttribute("data-rexlive_section_id",o);var a=[].slice.call(t[0].getElementsByClassName("edit-row-width"));a.forEach(function(e,t){var i="row-dimension-"+e.getAttribute("data-section_width")+"-"+o;e.setAttribute("name","row-dimension-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)});var d=[].slice.call(t[0].getElementsByClassName("edit-row-layout"));d.forEach(function(e,t){var i="row-layout-"+e.getAttribute("data-section_layout")+"-"+o;e.setAttribute("name","row-layout-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)})}tmpl.arg="block";var n,s=Rexbuilder_Live_Templates.getTemplate("tmpl-block-drag-handle"),u="";r.find(".grid-stack-item").each(function(t,i){var r=e(i),o={block_type:""};Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.generateElementNewIDs(r,t,Rexbuilder_Util.lastSectionNumber),Rexbuilder_Live_Utilities.removeHandles(r),Rexbuilder_Live_Utilities.removeTextEditor(r),Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.fixCopiedElementSlider(r),0==r.find(".rexlive-block-toolbox").length&&(u=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",o),r.find(".grid-stack-item-content").after(u)),null===i.querySelector(".rexlive-block-drag-handle")&&(n=i.querySelector(".grid-item-content"),n.insertAdjacentHTML("beforebegin",s)),Rexbuilder_CreateBlocks.sanitizeBlockContent(i)}),tmpl.arg="section"},p=function(e){var t;t="undefined"!=typeof e.attr("data-rex-collapse-grid")&&"true"==e.attr("data-rex-collapse-grid").toString();var i=Rexbuilder_Util.getGalleryInstance(e),r={layout:i.settings.galleryLayout,fullHeight:i.settings.fullHeight,singleHeight:i.properties.singleHeight},o={gridInstance:i,gridLayout:r,blockDisposition:i.createActionDataMoveBlocksGrid(),collapse:t};if(t){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0;var l=Rexbuilder_Util.getLayoutLiveSectionTargets(e),a=Rexbuilder_Util.getGridLayoutLive(e);("mobile"===Rexbuilder_Util.activeLayout||Rexbuilder_Util.isMobile())&&Rexbuilder_Util.applyDefaultBlocksDimentions(e,l,a);var d,n=i.properties.gridstackInstance,s="true"==a.fullHeight.toString();d="masonry"==a.layout?5:i.$element.outerWidth()/12;var u={layout:a.layout,fullHeight:s,singleHeight:d};i.element.setAttribute("data-layout",u.layout),i.element.setAttribute("data-full-height",u.fullHeight),i.updateGridLayoutCollapse(u),i.batchGridstack();for(var c,_,x,m,b=e[0],v=1;v<l.length;v++)c=b.querySelector('div[data-rexbuilder-block-id="'+l[v].name+'"]'),_=c.querySelector(".rexbuilder-block-data"),x=l[v].props,m={x:x.gs_x,y:x.gs_y,w:x.gs_width,h:x.gs_height,startH:x.gs_start_h,gridstackInstance:n},Rexbuilder_Util.updateElementDimensions(c,_,m),i.updateSizeViewerText(c,m.w,m.h);i.commitGridstack(),i.removeCollapseElementsProperties(),"masonry"==u.layout?setTimeout(function(){i.updateBlocksHeight(),setTimeout(function(){var t={gridInstance:i,gridLayout:u,blockDisposition:i.createActionDataMoveBlocksGrid(),collapse:!1};i._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(e,"collapseSection",t,o),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,o,e,i,u)},300,o,e,i,u):s?setTimeout(function(){i.properties.gridBlocksHeight=i._calculateGridHeight(),u.singleHeight=Rexbuilder_Util.globalViewport.height/i.properties.gridBlocksHeight,i.updateGridstackStyles(u.singleHeight),setTimeout(function(){var t={gridInstance:i,gridLayout:u,blockDisposition:i.createActionDataMoveBlocksGrid(),collapse:!1};Rexbuilder_Util_Editor.pushAction(e,"collapseSection",t,o),i._fixImagesDimension(),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},100,o,e,i,u)},300,o,e,i,u):setTimeout(function(){var t={gridInstance:i,gridLayout:u,blockDisposition:i.createActionDataMoveBlocksGrid(),collapse:!1};i._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(e,"collapseSection",t,o),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,o,e,i,u)}else{e.removeClass("rex-block-grid");var p=e.children(".section-data").attr("data-custom_classes");e.children(".section-data").attr("data-custom_classes",p.replace(/\s*rex-block-grid/,"")),i.collapseElementsProperties(),i.collapseElements(o)}var g={eventName:"rexlive:edited",modelEdited:e.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(g),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e)},g=function(){Rexbuilder_Util.$rexContainer.on("click",".builder-delete-row",i),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-row",r),Rexbuilder_Util.$rexContainer.on("click",".collapse-grid",o),Rexbuilder_Util.$document.on("click",".add-new-section",d),Rexbuilder_Util.$document.on("rexlive:collapse_row",l),Rexbuilder_Util.$document.on("rexlive:collapsingElementsEnded",a),Rexbuilder_Util.$document.on("rexlive:add_new_section_after",n),Rexbuilder_Util.$document.on("rexlive:applyModelSection",s),Rexbuilder_Util.$document.on("rexlive:importModels",u)},f=function(t){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var i=t.modelID,r=t.html,o=t.model_number,l=t.modelName;Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(t,a){var d=e(a);if(a.getAttribute("data-rexlive-model-id")==i&&a.getAttribute("data-rexlive-model-number")!=o){var n=isNaN(parseInt(d.attr("data-rexlive-model-number")))?"":d.attr("data-rexlive-model-number"),s=1;Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(t,r){e(r).attr("data-rexlive-model-id")==i&&(s+=1)});var u=e.parseHTML(r);d.after(u);var c=e(u);c.attr("data-rexlive-model-number",n);var _={modelID:i,modelName:l,modelNumber:s,sectionID:c.attr("data-rexlive-section-id"),isModel:!0,$section:c};Rexbuilder_Dom_Util.updateSectionBecameModel(_),Rexbuilder_Section.prepareSectionCopied(c);var x=c.children(".section-data"),m=c.attr("data-rexlive-section-id");x.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",{rexID:m}));var b=c.find(".update-model-button");Rexbuilder_Dom_Util.updateLockEditModel(b,!0);var v=c.find(".grid-stack-row");v.perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(c,x),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Dom_Util.updateSectionVisibility(d,!1),Rexbuilder_Dom_Util.updateSectionVisibility(c,!0)}}),Rexbuilder_Util.$rexContainer.children(".rexpansive_section.removing_section.rex-model-section").each(function(t,i){e(i).attr("data-rexlive-model-number","")}),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1},R=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(t,i){var r=e(i);r.hasClass("rex-model-section")&&(r.addClass("rexlive-block-grid-editing"),r.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),r.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')),"undefined"==typeof r.attr("id")&&r.attr("id",""),"undefined"==typeof r.attr("data-rexlive-section-name")&&r.attr("data-rexlive-section-name","")});var t=[],i=[];Rexbuilder_Util.$rexContainer.sortable({iframeFix:!0,start:function(i,r){Rexbuilder_Dom_Util.fixModelNumbers(),t=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(i,r){var o=e(r),l={rexID:o.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};o.hasClass("rex-model-section")&&(l.modelID=o.attr("data-rexlive-model-id"),l.modelNumber=o.attr("data-rexlive-model-number")),t.push(l)})},handle:".builder-move-row",stop:function(r,o){var l=e(r.srcElement).parents(".rexpansive_section"),a={rexID:l.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};l.hasClass("rex-model-section")&&(a.modelID=l.attr("data-rexlive-model-id"),a.modelNumber=l.attr("data-rexlive-model-number")),i=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(t,r){var o=e(r),l={rexID:o.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};o.hasClass("rex-model-section")&&(l.modelID=o.attr("data-rexlive-model-id"),l.modelNumber=o.attr("data-rexlive-model-number")),i.push(l)}),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(i);var d={sectionOrder:t,sectionMoved:a};Rexbuilder_Util.updateSectionOrderCustomLayouts(a,i);var n={sectionOrder:i,sectionMoved:a};Rexbuilder_Util_Editor.pushAction("document","updateSectionOrder",n,d);var s={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(s),Rex_Navigator.fixNavigatorItemOrder(l)}}),_(),g()};return{init:R,prepareSectionCopied:v,showSectionToolBox:x,updateModelsHtmlLive:f,fixSectionToolbox:m,fixBlockToolsAccordingToSeparator:b}}(jQuery);
/**
 * Object that handles all the live events triggered on a row
 * To edit a selected row
 * @since 2.0.0
 */
var Rexbuilder_Section_Editor=function(e){"use strict";function t(){s=e(document.getElementById("global-spectrum-row-background")),c=e(document.getElementById("global-spectrum-row-overlay")),g=null,v=null,u=!1,_=!1,x={data_to_send:{color:null,sectionTarget:{sectionID:"",modelNumber:""}}},h={data_to_send:{color:null,active:!1,sectionTarget:{sectionID:"",modelNumber:""}}};var t=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-close"),n=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-save");s.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:s,object:"section",action:"background"})},move:o,hide:a}),c.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:c,object:"section",action:"overlay"})},move:r,hide:i});var d=e(t);s.spectrum("container").append(d),d.on("click",function(e){e.preventDefault(),null!==p&&(s.spectrum("set",p),s.spectrum("container").find(".sp-input").trigger("change")),s.spectrum("hide")});var l=e(n),b=l.find(".rex-modal-option");s.spectrum("container").append(l),b.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":s.spectrum("hide");break;case"reset":null!==p&&(s.spectrum("set",p),s.spectrum("container").find(".sp-input").trigger("change"))}});var m=e(t);c.spectrum("container").append(m),m.on("click",function(e){e.preventDefault(),null!==f&&(c.spectrum("set",f),c.spectrum("container").find(".sp-input").trigger("change")),c.spectrum("hide")});var w=e(n),y=w.find(".rex-modal-option");c.spectrum("container").append(w),y.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":c.spectrum("hide");break;case"reset":null!==f&&(c.spectrum("set",f),c.spectrum("container").find(".sp-input").trigger("change"))}}),s.spectrum("container").draggable(),c.spectrum("container").draggable()}function o(e){u=!0,x.data_to_send.color=b&&e?e.toRgbString():"";var t=jQuery.Event("rexlive:change_section_bg_color");t.settings=x,Rexbuilder_Util.$document.trigger(t)}function a(e){if(u&&e){var t=e.toRgbString();x.data_to_send.color=b?t:"",x.data_to_send.active=b;var o=jQuery.Event("rexlive:apply_background_color_section");o.settings=x,Rexbuilder_Util.$document.trigger(o);var a={eventName:"rexlive:updateTopToolbar",updateInfo:{color_bg_section:t,color_bg_section_active:b}};Rexbuilder_Util_Editor.sendParentIframeMessage(a)}Rexbuilder_Live_Utilities.hideAllTools(),c.spectrum("set",""),g=null,v=null,b=!1,p=null,u=!1}function r(e){if(_=!0,h.data_to_send.active=!0,h.data_to_send.color=e?e.toRgbString():"",m)var t=jQuery.Event("rexlive:change_section_overlay_color");else var t=jQuery.Event("rexlive:change_section_overlay");t.settings=h,Rexbuilder_Util.$document.trigger(t)}function i(e){if(_&&e){h.data_to_send.color=e.toRgbString(),h.data_to_send.active=!0;var t=jQuery.Event("rexlive:change_section_overlay");t.settings=h,Rexbuilder_Util.$document.trigger(t);var o={eventName:"rexlive:updateTopToolbar",updateInfo:{row_overlay_color:h.data_to_send.color,row_overlay_active:!0}};Rexbuilder_Util_Editor.sendParentIframeMessage(o)}Rexbuilder_Live_Utilities.hideAllTools(),s.spectrum("set",""),g=null,v=null,m=!1,f=null,_=!1}function n(t){return t.preventDefault(),g=e(t.currentTarget).parents(".rexpansive_section"),v=g.children(".section-data"),x.data_to_send.sectionTarget.sectionID=g.attr("data-rexlive-section-id"),x.data_to_send.sectionTarget.modelNumber="undefined"!=typeof g.attr("data-rexlive-model-number")?g.attr("data-rexlive-model-number"):"",b="undefined"!=typeof v.attr("data-color_bg_section_active")?v.attr("data-color_bg_section_active"):"true",p=v.attr("data-color_bg_section"),g.addClass("activeRowTools"),e(t.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),u=!1,s.spectrum("set",p),s.spectrum("show"),s.spectrum("container").css("top",t.pageY+"px"),s.spectrum("container").css("left",t.pageX+"px"),j(s,t.currentTarget),!1}function d(t){return t.preventDefault(),g=e(t.currentTarget).parents(".rexpansive_section"),v=g.children(".section-data"),h.data_to_send.sectionTarget.sectionID=g.attr("data-rexlive-section-id"),h.data_to_send.sectionTarget.modelNumber="undefined"!=typeof g.attr("data-rexlive-model-number")?g.attr("data-rexlive-model-number"):"",m=JSON.parse("undefined"!=typeof v.attr("data-row_overlay_active")&&v.attr("data-row_overlay_active")),f=v.attr("data-row_overlay_color"),g.addClass("activeRowTools"),e(t.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),_=!1,c.spectrum("set",f),c.spectrum("show"),c.spectrum("container").css("top",t.pageY+"px"),c.spectrum("container").css("left",t.pageX+"px"),j(c,t.currentTarget),!1}var l,s,c,u,_,g,v,b,p,m,f,x,h,w=function(){Rexbuilder_Util.$document.on("change",".edit-row-width",function(t){var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i="",n="",d=t.target.value.trim().split(/(\d+)/);i=d[1],n=d[2];var l={data_to_send:{sectionTarget:{sectionID:a,modelNumber:r},sectionWidth:{width:i,type:n}},forged:!0},s=jQuery.Event("rexlive:set_section_width");s.settings=l,Rexbuilder_Util.$document.trigger(s)}),Rexbuilder_Util.$document.on("change",".edit-row-layout",function(t){var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={data_to_send:{sectionTarget:{sectionID:a,modelNumber:r},layout:t.target.value},forged:!0},n=jQuery.Event("rexlive:set_gallery_layout");n.settings=i,Rexbuilder_Util.$document.trigger(n)}),Rexbuilder_Util.$document.on("change",".edit-row-layout-checkbox",function(t){var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={data_to_send:{sectionTarget:{sectionID:a,modelNumber:r},layout:t.target.checked?"fixed":"masonry"},forged:!0},n=jQuery.Event("rexlive:set_gallery_layout");n.settings=i,Rexbuilder_Util.$document.trigger(n)}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-image-background",function(t){var o=e(this).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:a,modelNumber:r},idImage:this.getAttribute("value"),returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};Rexbuilder_Util_Editor.sendParentIframeMessage(i)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-image-background",function(t){var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i=o.children(".section-data"),n=i.attr("data-id_image_bg_section");if(""!==n){var d={data_to_send:{sectionTarget:{sectionID:a,modelNumber:r},active:!1,idImage:n,urlImage:i.attr("data-image_bg_section"),width:o.attr("data-background_image_width"),height:o.attr("data-background_image_height")}},l=jQuery.Event("rexlive:apply_background_image_section");l.settings=d,Rexbuilder_Util.$document.trigger(l);var s={eventName:"rexlive:updateTopToolbar",updateInfo:{image_bg_section:"",image_bg_section_active:!1}};Rexbuilder_Util_Editor.sendParentIframeMessage(s)}}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-color-background",function(t){t.stopPropagation();var o=(e(t.target),e(t.target).parents(".rexpansive_section")),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={data_to_send:{color:"",active:!1,sectionTarget:{sectionID:a,modelNumber:r}}},n=jQuery.Event("rexlive:apply_background_color_section");n.settings=i,Rexbuilder_Util.$document.trigger(n);var d={eventName:"rexlive:updateTopToolbar",updateInfo:{color_bg_section:"",color_bg_section_active:!1}};Rexbuilder_Util_Editor.sendParentIframeMessage(d)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-overlay-color",function(t){t.stopPropagation();var o=e(t.target).parents(".rexpansive_section"),a=o.children(".section-data"),r=o.attr("data-rexlive-section-id"),i="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",n={data_to_send:{color:a.attr("data-row_overlay_color"),active:!1,sectionTarget:{sectionID:r,modelNumber:i}}},d=jQuery.Event("rexlive:change_section_overlay");d.settings=n,Rexbuilder_Util.$document.trigger(d);var l={eventName:"rexlive:updateTopToolbar",updateInfo:{row_overlay_color:"",row_overlay_active:!1}};Rexbuilder_Util_Editor.sendParentIframeMessage(l)}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-video-background",function(t){t.preventDefault();var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i=o.children(".section-data"),n="undefined"==typeof i.attr("data-video_mp4_url")?"":i.attr("data-video_mp4_url"),d="undefined"==typeof i.attr("data-video_bg_url_section")?"":i.attr("data-video_bg_url_section"),l="undefined"==typeof i.attr("data-video_bg_id_section")?"":i.attr("data-video_bg_id_section"),s="undefined"==typeof i.attr("data-video_bg_url_vimeo_section")?"":i.attr("data-video_bg_url_vimeo_section"),c=e(t.target).parents(".row-toolBox__fast-configuration").length,u=null;c>0&&(u=Rexbuilder_Util_Editor.getMousePosition(t,{offset:{w:this.offsetWidth,h:this.offsetHeight}})),o.addClass("activeRowTools");var _={eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:a,modelNumber:r},youtubeVideo:d,vimeoUrl:s,mp4Video:n,mp4VideoID:l}},mousePosition:u};Rexbuilder_Util_Editor.sendParentIframeMessage(_)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-video-background",function(t){t.preventDefault();var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={data_to_send:{sectionTarget:{sectionID:a,modelNumber:r},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:""}}},n=jQuery.Event("rexlive:update_section_background_video");n.settings=i,Rexbuilder_Util.$document.trigger(n);var d={eventName:"rexlive:updateTopToolbar",updateInfo:{video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}};Rexbuilder_Util_Editor.sendParentIframeMessage(d)}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-color-background",n),Rexbuilder_Util.$rexContainer.on("click",".edit-row-overlay-color",d),Rexbuilder_Util.$rexContainer.on("click",".synch-section-content",function(t){t.preventDefault();var o=e(t.target).parents(".rexpansive_section"),a=o.attr("data-rexlive-section-id"),r="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",i={eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:a,modelNumber:r,rexID:"self"}}};Rexbuilder_Util_Editor.sendParentIframeMessage(i)})},y=function(e,t){t="undefined"!=typeof t?t:null,null===t&&(t={},t.dimension=e.find(".section-data").attr("data-dimension")),e.find(".edit-row-width[data-section_width="+t.dimension+"]").prop("checked",!0)},R=function(e,t){switch(t="undefined"!=typeof t?t:null,null===t&&(t={},t.layout=e.find(".section-data").attr("data-layout")),t.layout){case"masonry":e.find(".edit-row-layout-checkbox").prop("checked",!1);break;case"fixed":e.find(".edit-row-layout-checkbox").prop("checked",!0)}},k=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");o.addClass("tool-button--image-preview").attr("value",t.idImage).css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide"),a.addClass("tool-button--hide")},C=function(e){var t=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),o=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");t.removeClass("tool-button--image-preview").attr("value","").css("background-image","none").parent().addClass("tool-button--hide"),o.removeClass("tool-button--hide")},T=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-color-background"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-color-background");""!=t?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background-color",t),a.parent().addClass("tool-button--hide")):(a.parent().removeClass("tool-button--hide"),o.parent().addClass("tool-button--hide"))},I=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-color-background"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-color-background");""!=t?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t),a.parent().addClass("tool-button--hide")):(a.parent().removeClass("tool-button--hide"),o.parent().addClass("tool-button--hide"))},N=function(e,t){var o=e.find(".edit-row-color-background");o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background-color",t)},E=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-overlay-color"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-overlay-color");"true"==t.active.toString()?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background-color",t.color),a.parent().addClass("tool-button--hide")):(a.parent().removeClass("tool-button--hide"),o.parent().addClass("tool-button--hide"))},U=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-overlay-color"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-overlay-color");"true"==t.active.toString()?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t.color),a.parent().addClass("tool-button--hide")):(a.parent().removeClass("tool-button--hide"),o.parent().addClass("tool-button--hide"))},B=function(e,t){var o=e.find(".edit-row-overlay-color");o.parent().addClass("tool-button--picker-preview"),o.siblings(".tool-button--color-preview").css("background-color",t)},D=function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-video-background"),a=e.find(".row-toolBox__standard-configuration").find(".edit-row-video-background");""==t.typeVideo?(o.parent().addClass("tool-button--hide"),a.removeClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.addClass("tool-button--hide"))},S=function(e){e=0===e.length?g:e;var t=e.attr("data-rexlive-section-id"),o="undefined"!=typeof e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",a=e.children(".section-data"),r=a.attr("data-color_bg_section"),i={eventName:"rexlive:editSectionBackgroundGradient",activeRowData:{gradient:r,sectionTarget:{sectionID:t,modelNumber:o}}};Rexbuilder_Util_Editor.sendParentIframeMessage(i)},$=function(e){e=0===e.length?g:e;var t=e.children(".section-data"),o=e.attr("data-rexlive-section-id"),a="undefined"!=typeof e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",r={eventName:"rexlive:editRowOverlayGradient",activeRowData:{gradient:t.attr("data-row_overlay_color"),sectionTarget:{sectionID:o,modelNumber:a}}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)},A=function(){Rexbuilder_Section_Editor.dataNodes=Array.prototype.slice.call(document.getElementsByClassName("section-data"));var e=function(e,t){"false"!=e[0].target.getAttribute("data-color_bg_section_active")&&""!=e[0].target.getAttribute("data-color_bg_section")||"false"!=e[0].target.getAttribute("data-image_bg_section_active")&&""!=e[0].target.getAttribute("data-id_image_bg_section")||"false"!=e[0].target.getAttribute("data-row_overlay_active")&&""!=e[0].target.getAttribute("data-row_overlay_color")||""!=e[0].target.getAttribute("data-video_bg_url_section")||""!=e[0].target.getAttribute("data-video_bg_id_section")||""!=e[0].target.getAttribute("data-video_bg_url_vimeo_section")?Rexbuilder_Util.removeClass(e[0].target.parentNode,"rowTools__hide-fast-data"):Rexbuilder_Util.addClass(e[0].target.parentNode,"rowTools__hide-fast-data")};Rexbuilder_Section_Editor.dataObserver=new MutationObserver(e);for(var t=0;t<Rexbuilder_Section_Editor.dataNodes.length;t++)Rexbuilder_Section_Editor.dataObserver.observe(Rexbuilder_Section_Editor.dataNodes[t],Rexbuilder_Section_Editor.config)},P=function(e){Rexbuilder_Section_Editor.dataObserver.observe(e,Rexbuilder_Section_Editor.config),e.setAttribute("data-load","true")},M=function(){for(var e=0;e<Rexbuilder_Section_Editor.dataNodes.length;e++)Rexbuilder_Section_Editor.dataNodes[e].setAttribute("data-load","true")},j=function(e,t){var o,a=e.spectrum("container")[0],r=a.getBoundingClientRect(),i=r.top;o="undefined"!=typeof t?t.parentNode.getBoundingClientRect():e[0].parentNode.getBoundingClientRect();var n=parseInt(a.style.left);i+r.height==o.top?a.style.top=parseInt(a.style.top)-10+"px":i==o.top+o.height&&(a.style.top=parseInt(a.style.top)+10+"px"),n+a.offsetWidth+15>=document.body.offsetWidth&&(n-a.offsetWidth<0?a.style.left="15px":a.style.left=n-a.offsetWidth+"px")},Q=function(){this.dataObserver=null,this.dataNodes=null,this.config={attributes:!0,childList:!1,subtree:!1,attributeFilter:["data-load","data-color_bg_section_active","data-color_bg_section","data-image_bg_section_active","data-id_image_bg_section","data-row_overlay_active","data-row_overlay_color","data-video_bg_url_section","data-video_bg_id_section","data-video_bg_url_vimeo_section"]},l="tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",w(),t(),A()};return{init:Q,updateSectionDimensionTool:y,updateSectionLayoutTool:R,updateRowBackgroundImageTool:k,resetRowBackgroundImageTool:C,updateRowBackgroundColorTool:T,updateRowBackgroundColorToolLive:N,updateRowBackgroundGradientTool:I,updateRowOverlayColorTool:E,updateRowOverlayColorToolLive:B,updateRowOverlayGradientTool:U,updateRowBackgroundVideo:D,triggerRowDataChange:M,listenNewRowDataChange:P,openSectionBackgroundGradient:S,openRowOverlayGradient:$}}(jQuery);
var Rexbuilder_Block=function(e){"use strict";function t(t){t.preventDefault(),t.stopPropagation(),Rexbuilder_Util_Editor.removingBlocks=!0;var r=e(t.target).parents(".grid-stack-item"),i=r.parent().data().plugin_perfectGridGalleryEditor,a=i.$section;if(i.deleteBlock(r),r.attr("data-rexlive-element-edited",!0),Rexbuilder_Util_Editor.removingBlocks=!1,0!==r.find(".wpcf7-form:not(.no-builder-form)").length){var l=r.find(".rex-element-wrapper").attr("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.removeFormInPage(l)}Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),0===a.find(".perfect-grid-item").not(".rex-hide-element").length?a.addClass("empty-section"):a.removeClass("empty-section");var o={eventName:"rexlive:edited",modelEdited:a.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(o)}function r(t){t.preventDefault(),t.stopPropagation();var r=e(t.target).parents(".grid-stack-item"),i=r.parents(".rexpansive_section"),a=r.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),o="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d={sectionID:l,modelNumber:o,rexID:a,sliderNumber:0},n=r.find('.rex-slider-wrap[data-rex-slider-active="true"]');if(n.length>0){d.sliderNumber=n.attr("data-rex-slider-number");var c=n.attr("data-slider-id"),u=r.attr("id"),_='[RexSlider slider_id="'+c+'"]',s={eventName:"rexlive:editSlider",sliderID:c,blockID:u,shortCodeSlider:_,target:d};Rexbuilder_Util_Editor.sendParentIframeMessage(s)}}function i(t){t.preventDefault(),t.stopPropagation(),Rexbuilder_Util_Editor.blockCopying=!0;var r=e(t.currentTarget).parents(".grid-stack-item");Rexbuilder_CreateBlocks.createCopyBlock(r),Rexbuilder_Util_Editor.blockCopying=!1}function a(){var e,t,r,i,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".perfect-grid-item")),l=a.length,o={not_has_image:!1,not_has_overlay:!1,not_has_video:!1,has_content:!1,overlay:""};for(t=0;t<l;t++)e=a[t].querySelector(".rexbuilder-block-data"),o.not_has_image=null===e.getAttribute("data-image_bg_elem_active")||"true"!=e.getAttribute("data-image_bg_elem_active")||""==e.getAttribute("data-id_image_bg_block"),o.not_has_overlay="true"!=e.getAttribute("data-overlay_block_color_active")||""==e.getAttribute("data-overlay_block_color"),o.not_has_video=""==e.getAttribute("data-video_bg_id")&&""==e.getAttribute("data-video_bg_url")&&""==e.getAttribute("data-video_bg_url_vimeo"),r=a[t].querySelector(".text-wrap"),0==r.childElementCount||1==r.childElementCount&&Rexbuilder_Util.hasClass(r.children[0],"text-editor-span-fix")?o.has_content=!1:o.has_content=!0,o.overlay=null!==e.getAttribute("data-overlay_block_color")?e.getAttribute("data-overlay_block_color"):"",i=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap-clean",o),e.nextElementSibling.insertAdjacentHTML("afterend",i)}var l=function(){Rexbuilder_Util.$rexContainer.on("click",".builder-delete-block",t),Rexbuilder_Util.$rexContainer.on("click",".builder-edit-slider",r),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-block",i)},o=function(){a(),l()};return{init:o}}(jQuery);
/**
 * Object that handles all the live events triggered on a block
 * To edit a selected block
 * @since 2.0.0
 */
var Rexbuilder_Block_Editor=function(e){"use strict";function t(t){var a=e(t).parents(".grid-stack-item").find(".block-toolBox__editor-tools"),i=a.find(".edit-block-content"),r=a.find(".edit-block-content-position");o(t)?(i.removeClass("tool-button--hide"),r.addClass("tool-button--hide")):(i.addClass("tool-button--hide"),r.removeClass("tool-button--hide"))}function o(e){if(0===e.childElementCount)return!0;if(""===e.textContent.trim()&&1===e.childElementCount&&e.querySelector(".text-editor-span-fix"))return!0;var t=Array.prototype.slice.call(e.getElementsByTagName("img")).length,o=Array.prototype.slice.call(e.getElementsByTagName("svg")).length,a=Array.prototype.slice.call(e.getElementsByTagName("iframe")).length;return 0===t+o+a&&""===e.textContent.trim()}function a(){u=e(document.getElementById("global-spectrum-block-background")),b=e(document.getElementById("global-spectrum-block-overlay")),g=null,v=null,m=!1,p=!1,I={data_to_send:{color:"",active:!1,target:{sectionID:"",modelNumber:"",rexID:""}}},w={data_to_send:{color:"",active:!1,target:{sectionID:"",modelNumber:"",rexID:""}}};var t=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-close"),o=Rexbuilder_Live_Templates.getTemplate("tmpl-tool-save");u.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:u,action:"background",object:"block"})},move:i,hide:r}),b.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:b,action:"overlay",object:"block"})},move:l,hide:n});var a=e(t);u.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),null!==h&&(u.spectrum("set",h),u.spectrum("container").find(".sp-input").trigger("change")),u.spectrum("hide")});var d=e(o),c=d.find(".rex-modal-option");u.spectrum("container").append(d),c.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":u.spectrum("hide");break;case"reset":null!==h&&(u.spectrum("set",h),u.spectrum("container").find(".sp-input").trigger("change"))}});var s=e(t);b.spectrum("container").append(s),s.on("click",function(e){e.preventDefault(),null!==C&&(b.spectrum("set",C),b.spectrum("container").find(".sp-input").trigger("change")),b.spectrum("hide")});var x=e(o),_=x.find(".rex-modal-option");b.spectrum("container").append(x),_.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":b.spectrum("hide");break;case"reset":null!==C&&(b.spectrum("set",C),b.spectrum("container").find(".sp-input").trigger("change"))}}),u.spectrum("container").draggable(),b.spectrum("container").draggable()}function i(e){m=!0,I.data_to_send.active=!0,I.data_to_send.color=I.data_to_send.active&&e?e.toRgbString():"";var t=jQuery.Event("rexlive:change_block_bg_color");t.settings=I,Rexbuilder_Util.$document.trigger(t)}function r(e){if(m&&e){f.hasClass("top-tools")&&(_.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),_.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),I.data_to_send.color=e.toRgbString();var t=jQuery.Event("rexlive:apply_background_color_block");t.settings=I,Rexbuilder_Util.$document.trigger(t)}Rexbuilder_Live_Utilities.hideAllTools(),u.spectrum("set",""),g=null,v=null,x=null,_=null,f=null,k=!1,h=null,m=!1}function l(e){if(p=!0,w.data_to_send.active=!0,w.data_to_send.color=e?e.toRgbString():"",y)var t=jQuery.Event("rexlive:change_block_overlay_color");else var t=jQuery.Event("rexlive:change_block_overlay");t.settings=w,Rexbuilder_Util.$document.trigger(t)}function n(e){if(p&&e){w.data_to_send.active=!0,w.data_to_send.color=e.toRgbString(),f.hasClass("top-tools")&&(_.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),_.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"));var t=jQuery.Event("rexlive:change_block_overlay");t.settings=w,Rexbuilder_Util.$document.trigger(t)}Rexbuilder_Live_Utilities.hideAllTools(),b.spectrum("set",""),g=null,v=null,x=null,_=null,f=null,y=!1,C=null,p=!1}function d(t){return t.preventDefault(),_=e(t.currentTarget),g=_.parents(".grid-stack-item"),v=g.children(".rexbuilder-block-data"),x=g.parents(".rexpansive_section"),f=_.parents(".rexlive-block-toolbox"),I.data_to_send.target.rexID=g.attr("data-rexbuilder-block-id"),I.data_to_send.target.sectionID=x.attr("data-rexlive-section-id"),I.data_to_send.target.modelNumber="undefined"!=typeof x.attr("data-rexlive-model-number")?x.attr("data-rexlive-model-number"):"",k=v.attr("data-color_bg_block_active"),h=v.attr("data-color_bg_block"),Rexbuilder_Util_Editor.manageElement=!0,_.parents(".tool-button-floating").addClass("tool-button-floating--active"),m=!1,u.spectrum("set",h),u.spectrum("show"),u.spectrum("container").css("top",t.pageY+"px"),u.spectrum("container").css("left",t.pageX+"px"),j(u,t.currentTarget),!1}function c(t){return t.preventDefault(),_=e(t.currentTarget),g=_.parents(".grid-stack-item"),v=g.children(".rexbuilder-block-data"),x=g.parents(".rexpansive_section"),f=_.parents(".rexlive-block-toolbox"),w.data_to_send.target.rexID=g.attr("data-rexbuilder-block-id"),w.data_to_send.target.sectionID=x.attr("data-rexlive-section-id"),w.data_to_send.target.modelNumber="undefined"!=typeof x.attr("data-rexlive-model-number")?x.attr("data-rexlive-model-number"):"",y=!(g.hasClass("active-large-block-overlay")||g.hasClass("active-medium-block-overlay")||g.hasClass("active-small-block-overlay"))&&("undefined"!=typeof v.attr("data-overlay_block_color_active")&&""!==v.attr("data-overlay_block_color_active")&&JSON.parse(v.attr("data-overlay_block_color_active"))),y||("default"==Rexbuilder_Util.activeLayout&&g.hasClass("active-large-block-overlay")&&(y=!0),"tablet"==Rexbuilder_Util.activeLayout&&g.hasClass("active-medium-block-overlay")&&(y=!0),"mobile"==Rexbuilder_Util.activeLayout&&g.hasClass("active-small-block-overlay")&&(y=!0)),C=v.attr("data-overlay_block_color"),Rexbuilder_Util_Editor.manageElement=!0,_.parents(".tool-button-floating").addClass("tool-button-floating--active"),p=!1,b.spectrum("set",C),b.spectrum("show"),b.spectrum("container").css("top",t.pageY+"px"),b.spectrum("container").css("left",t.pageX+"px"),j(b,t.currentTarget),!1}var s,u,b,m,p,g,v,x,_,f,k,h,y,C,I,w,E=function(){Rexbuilder_Util.$document.on("click",".edit-block-image",function(t){var a=e(t.target),i=a.parents(".grid-stack-item"),r=i.parents(".rexpansive_section"),l=i.attr("data-rexbuilder-block-id"),n=r.attr("data-rexlive-section-id"),d="undefined"!=typeof r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",c=i.children(".rexbuilder-block-data"),s=i.find(".grid-item-content"),u=i.find(".text-wrap"),b=o(u.get(0)),m="",p=a.parents(".rexlive-block-toolbox");p.hasClass("bottom-tools")?m="bottom":p.hasClass("top-tools")&&(m="top");var g="undefined"==typeof c.attr("data-id_image_bg_block")?"":c.attr("data-id_image_bg_block"),v="undefined"==typeof c.attr("data-image_bg_block")?"":c.attr("data-image_bg_block"),x="undefined"==typeof s.attr("data-background_image_width")?"":s.attr("data-background_image_width"),_="undefined"==typeof s.attr("data-background_image_height")?"":s.attr("data-background_image_height"),f="undefined"==typeof c.attr("data-image_bg_elem_active")||c.attr("data-image_bg_elem_active"),k="fixed"==i.parents(".grid-stack-row").attr("data-layout")?"full":"natural";b||(k="full");var h="undefined"==typeof c.attr("data-type_bg_block")||""==c.attr("data-type_bg_block")?k:c.attr("data-type_bg_block"),y="undefined"==typeof c.attr("data-photoswipe")?"":c.attr("data-photoswipe"),C="undefined"==typeof c.attr("data-image_size")?"":c.attr("data-image_size"),f=!0,I={eventName:"rexlive:openLiveImageUploader",live_uploader_data:{idImage:f?g:"",urlImage:f?v:"",width:f?x:"",height:f?_:"",typeBGimage:f?h:"",photoswipe:f?y:"",imageSize:f?C:"",active:f,sectionTarget:{sectionID:n,modelNumber:d,rexID:l},returnEventName:"rexlive:apply_background_image_block",data_to_send:{idImage:f?g:"",urlImage:f?v:"",width:f?x:"",height:f?_:"",typeBGimage:f?h:"",photoswipe:f?y:"",imageSize:f?C:"",active:f,updateBlockHeight:!!b,tools:m,sectionTarget:{sectionID:n,modelNumber:d,rexID:l}}}};Rexbuilder_Util_Editor.sendParentIframeMessage(I)}),Rexbuilder_Util.$document.on("click",".edit-block-video-background",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=a.children(".rexbuilder-block-data"),c=a.find(".grid-item-content"),s="",u=o.parents(".rexlive-block-toolbox");u.hasClass("bottom-tools")?s="bottom":u.hasClass("top-tools")&&(s="top");var b="undefined"==typeof d.attr("data-video_mp4_url")?"":d.attr("data-video_mp4_url"),m="undefined"==typeof d.attr("data-video_bg_id")?"":d.attr("data-video_bg_id"),p="undefined"==typeof d.attr("data-video_bg_url")?"":d.attr("data-video_bg_url"),g="undefined"==typeof d.attr("data-video_bg_url_vimeo")?"":d.attr("data-video_bg_url_vimeo"),v=c.children(".rex-video-wrap"),x="",_="";0!=v.length&&(x=parseInt(v.attr("data-rex-video-width")),_=parseInt(v.attr("data-rex-video-height")));var f="",k=0!=c.children(".rex-video-toggle-audio").length;""!=m?f="mp4":""!=p?f="youtube":""!=g&&(f="vimeo"),Rexbuilder_Util_Editor.manageElement=!0;var h=o.parents(".block-toolBox__fast-configuration").length,y=null;h>0&&(y=Rexbuilder_Util_Editor.getMousePosition(t,{offset:{w:this.offsetWidth,h:this.offsetHeight}}));var C={eventName:"rexlive:editBlockVideoBackground",activeBlockData:{bgVideo:{type:f,mp4Data:{idMp4:m,linkMp4:b,width:x,height:_},vimeoUrl:g,youtubeUrl:p,audio:k,target:{sectionID:l,modelNumber:n,rexID:r},tools:s}},mousePosition:y};Rexbuilder_Util_Editor.sendParentIframeMessage(C)}),Rexbuilder_Util.$document.on("click",".deactivate-block-image-background",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=o.parents(".rexlive-block-toolbox");d.hasClass("bottom-tools")&&(o.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),d.find(".edit-block-image-position").addClass("tool-button--hide"),a.find(".rexlive-block-toolbox.top-tools").find(".edit-block-image").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"));var c={data_to_send:{target:{sectionID:l,modelNumber:n,rexID:r},idImage:"",urlImage:"",width:"",height:"",typeBGimage:"",photoswipe:"",active:!1}},s=jQuery.Event("rexlive:apply_background_image_block");s.settings=c,Rexbuilder_Util.$document.trigger(s)}),Rexbuilder_Util.$document.on("click",".deactivate-block-color-background",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=o.parents(".rexlive-block-toolbox");d.hasClass("bottom-tools")&&(o.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),a.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"));var c={data_to_send:{color:"",active:!1,target:{sectionID:l,modelNumber:n,rexID:r}}},s=jQuery.Event("rexlive:apply_background_color_block");s.settings=c,Rexbuilder_Util.$document.trigger(s)}),Rexbuilder_Util.$document.on("click",".deactivate-block-overlay-color",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=o.parents(".rexlive-block-toolbox");d.hasClass("bottom-tools")&&(o.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),a.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"));var c={data_to_send:{color:"",active:!1,target:{sectionID:l,modelNumber:n,rexID:r}}},s=jQuery.Event("rexlive:change_block_overlay");s.settings=c,Rexbuilder_Util.$document.trigger(s)}),Rexbuilder_Util.$document.on("click",".deactivate-block-video-background",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=i.attr("data-rexlive-section-id"),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=o.parents(".rexlive-block-toolbox");d.hasClass("bottom-tools")&&(o.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),a.find(".rexlive-block-toolbox.top-tools").find(".edit-block-video-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"));var c={data_to_send:{target:{sectionID:l,modelNumber:n,rexID:r},urlYoutube:"",urlVimeo:"",videoMp4:"",audio:"",typeVideo:""}},s=jQuery.Event("rexlive:update_block_background_video");s.settings=c,Rexbuilder_Util.$document.trigger(s)}),Rexbuilder_Util.$document.on("click",".edit-block-content",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=jQuery.Event("dblclick");i.target=a.get(0),i.offsetY=0,a.parents(".perfect-grid-gallery").trigger(i)}),Rexbuilder_Util.$document.on("click",".edit-block-content-position",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=a.children(".rexbuilder-block-data"),n=i.attr("data-rexlive-section-id"),d="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",c="undefined"==typeof l.attr("data-block_flex_position")?"":l.attr("data-block_flex_position"),s=c.split(" "),u=s[1]+"-"+s[0],b={flexPosition:{target:{sectionID:n,modelNumber:d,rexID:r},position:u}};Rexbuilder_Util_Editor.manageElement=!0;var m=Rexbuilder_Util_Editor.getMousePosition(t,{offset:{w:this.offsetWidth,h:this.offsetHeight}}),p={eventName:"rexlive:editBlockContentPosition",activeBlockData:b,mousePosition:m};Rexbuilder_Util_Editor.sendParentIframeMessage(p)}),Rexbuilder_Util.$document.on("click",".edit-block-accordion",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=(a.children(".rexbuilder-block-data"),i.attr("data-rexlive-section-id")),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=a.find(".rex-accordion"),c="",s="",u=d.hasClass("open")?"open":"close",b="",m=!1,p=d.find(".rex-accordion--toggle").clone();p.find(".rex-accordion--toggle-icon").remove(),d.length>0&&(c=p.html().trim(),s=d.find(".rex-accordion--content").html().trim(),b=d.find(".rex-accordion--toggle-icon").html().trim(),d.find(".rex-accordion--content").hasClass("rex-accordion--gallery")&&(m=!0));var g={blockData:{target:{sectionID:l,modelNumber:n,rexID:r},accordion:{header:c,icon:b,content:s,state:u,is_gallery:m}}};Rexbuilder_Util_Editor.manageElement=!0;var v={eventName:"rexlive:editBlockAccordion",activeBlockData:g};Rexbuilder_Util_Editor.sendParentIframeMessage(v)}),Rexbuilder_Util.$document.on("click",".edit-block-slideshow",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=(a.children(".rexbuilder-block-data"),i.attr("data-rexlive-section-id")),n="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=[],c=a.find(".rex-slideshow");c.length>0&&c.find(".rex-slideshow__slide").each(function(e,t){d.push(t.innerHTML)});var s={blockData:{target:{sectionID:l,modelNumber:n,rexID:r},slideshow:{slides:d}}},u={eventName:"rexlive:editBlockSlideshow",activeBlockData:s};Rexbuilder_Util_Editor.sendParentIframeMessage(u)}),Rexbuilder_Util.$document.on("rexlive:updateSlideshow",function(e){var t,o=e.settings.data_to_send,a=o.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'),t.find(".text-wrap.medium-editor-element").html(o.slideshow.slides)}),Rexbuilder_Util.$document.on("click",".edit-block-gradient",function(t){var o=e(t.target),a=o.parents(".grid-stack-item");R(a)}),Rexbuilder_Util.$document.on("rexlive:updateAccordion",function(e){var t,o=e.settings.data_to_send,a=o.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'),t.find(".text-wrap.medium-editor-element").html(o.accordion.complete)}),Rexbuilder_Util.$document.on("click",".edit-block-image-position",function(t){var o=e(t.target),a=o.parents(".grid-stack-item"),i=a.parents(".rexpansive_section"),r=a.attr("data-rexbuilder-block-id"),l=a.children(".rexbuilder-block-data"),n=i.attr("data-rexlive-section-id"),d=a.find(".grid-item-content"),c="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",s="undefined"==typeof l.attr("data-id_image_bg_block")?"":l.attr("data-id_image_bg_block"),u="undefined"==typeof l.attr("data-image_bg_block")?"":l.attr("data-image_bg_block"),b="undefined"==typeof d.attr("data-background_image_width")?"":d.attr("data-background_image_width"),m="undefined"==typeof d.attr("data-background_image_height")?"":d.attr("data-background_image_height"),p="undefined"==typeof l.attr("data-image_bg_elem_active")||l.attr("data-image_bg_elem_active"),g="fixed"==a.parents(".grid-stack-row").attr("data-layout")?"full":"natural",v="undefined"==typeof l.attr("data-type_bg_block")?g:l.attr("data-type_bg_block"),x="undefined"==typeof l.attr("data-photoswipe")?"":l.attr("data-photoswipe"),_={idImage:s,imageUrl:u,width:b,height:m,typeBGimage:v,active:p,defaultTypeImage:g,photoswipe:x,target:{sectionID:n,modelNumber:c,rexID:r}},f="undefined"==typeof l.attr("data-block_flex_img_position")?"":l.attr("data-block_flex_img_position");""===f&&(f="center middle");var k=f.split(" "),h=k[1]+"-"+k[0],y={target:{sectionID:n,modelNumber:c,rexID:r},position:h},C={rexID:r,x:parseInt(a.attr("data-gs-x")),y:parseInt(a.attr("data-gs-y")),w:parseInt(a.attr("data-gs-width")),h:parseInt(a.attr("data-gs-height"))},I={imageBG:_,flexImgPosition:y,sectionTarget:{sectionID:n,modelNumber:c},blockState:C};Rexbuilder_Util_Editor.manageElement=!0;var w=Rexbuilder_Util_Editor.getMousePosition(t,{offset:{w:this.offsetWidth,h:this.offsetHeight}}),E={eventName:"rexlive:editBlockImageSettings",activeBlockData:I,mousePosition:w};Rexbuilder_Util_Editor.sendParentIframeMessage(E)}),Rexbuilder_Util.$document.on("rexlive:SetcustomHTML",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:saveHTMLContent",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:inlineImageEdit",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineImageEdit",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineVideoEditor",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineVideoEditor:Transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineSVG",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineSVG:transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$rexContainer.on("click",".edit-block-color-background",d),Rexbuilder_Util.$rexContainer.on("click",".edit-block-overlay-color",c),Rexbuilder_Util.$rexContainer.on("click",".synch-block-content",function(t){t.preventDefault();var o=e(t.target).parents(".grid-stack-item"),a=o.parents(".rexpansive_section"),i=o.attr("data-rexbuilder-block-id"),r=a.attr("data-rexlive-section-id"),l="undefined"!=typeof a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",n={eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:r,modelNumber:l,rexID:i}}};Rexbuilder_Util_Editor.sendParentIframeMessage(n)})},R=function(e){e=0===e.length?g:e;var t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=e.children(".rexbuilder-block-data"),i=t.attr("data-rexlive-section-id"),r="undefined"!=typeof t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",l=a.attr("data-color_bg_block"),n={blockData:{gradient:l,target:{sectionID:i,modelNumber:r,rexID:o}}};Rexbuilder_Util_Editor.manageElement=!0;var d={eventName:"rexlive:editBlockGradient",activeBlockData:n};Rexbuilder_Util_Editor.sendParentIframeMessage(d)},D=function(e){e=0===e.length?g:e;var t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=e.children(".rexbuilder-block-data"),i=t.attr("data-rexlive-section-id"),r="undefined"!=typeof t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",l=a.attr("data-overlay_block_color"),n={blockData:{gradient:l,target:{sectionID:i,modelNumber:r,rexID:o}}};Rexbuilder_Util_Editor.manageElement=!0;var d={eventName:"rexlive:editBlockOverlayGradient",activeBlockData:n};Rexbuilder_Util_Editor.sendParentIframeMessage(d)},U=function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image");o.addClass("tool-button--image-preview").css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide")},B=function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image-position");o.removeClass("tool-button--hide")},N=function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),a=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},T=function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),a=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},$=function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),a=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},P=function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),a=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},M=function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),a=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},S=function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),a=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");""!=t?(a.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background",t),o.parent().addClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),a.parent().addClass("tool-button--hide"))},j=function(e,t){var o,a=e.spectrum("container")[0],i=a.getBoundingClientRect(),r=i.top;o="undefined"!=typeof t?t.parentNode.getBoundingClientRect():e[0].parentNode.getBoundingClientRect();var l=parseInt(a.style.left);r+i.height==o.top?a.style.top=parseInt(a.style.top)-10+"px":r==o.top+o.height&&(a.style.top=parseInt(a.style.top)+10+"px"),l+a.offsetWidth+15>=document.body.offsetWidth&&(l-a.offsetWidth<0?a.style.left="15px":a.style.left=l-a.offsetWidth+"px")},G=function(){s="tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",E(),a()};return{init:G,updateBlockBackgroundImageTool:U,updateBlockImagePositionTool:B,updateBlockBackgroundColorToolLive:N,updateBlockBackgroundColorTool:T,updateBlockBackgroundGradientTool:$,updateBlockOverlayColorToolLive:P,updateBlockOverlayColorTool:M,updateBlockOverlayGradientTool:S,openBlockBackgroundGradient:R,openBlockOverlayGradient:D,updateTextTool:t}}(jQuery);
!function(e){"use strict";e(function(){var t=e(document);t.on("rexlive:set_row_fullHeight",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.find(".grid-stack-row"),o=Rexbuilder_Util.getGalleryInstance(t),r={fullHeight:a.attr("data-full-height"),galleryInstance:o};o.updateFullHeight("true"==i.fullHeight.toString());var d={fullHeight:i.fullHeight.toString(),galleryInstance:o};Rexbuilder_Util_Editor.pushAction(t,"updateSectionFullHeight",d,r),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),t.on("rexlive:set_gallery_layout",function(t){var i,a=t.settings.data_to_send;i=""!=a.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"][data-rexlive-model-number="'+a.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"]');var o=i.find(".grid-stack-row"),r=Rexbuilder_Util.getGalleryInstance(i),d={collapse_grid:i.attr("data-rex-collapse-grid"),gridLayout:r.settings.galleryLayout,galleryInstance:r,singleWidth:r.properties.singleWidth,singleHeight:r.properties.singleHeight,blocksDisposition:e.extend(!0,{},r.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!0,i.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(i.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionLayoutTool(i,a),Rexbuilder_Dom_Util.updateGridLayoutDomProperties(o,a.layout),r.updateGridLayout(a.layout,d)}),t.on("rexlive:galleryLayoutChanged",function(t){var i=t.settings.galleryEditorInstance,a=t.settings.reverseData,o=t.settings.$section,r={gridLayout:t.settings.layout,galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:e.extend(!0,{},i.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!1,Rexbuilder_Util_Editor.pushAction(o,"updateSectionLayout",r,a)}),t.on("rexlive:set_row_separatos",function(t){var i,a=t.settings.data_to_send;i=""!=a.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"][data-rexlive-model-number="'+a.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"]');var o=i.find(".grid-stack-row"),r=Rexbuilder_Util.getGalleryInstance(i),d=r.createActionDataMoveBlocksGrid(),l={gutter:parseInt(o.attr("data-separator")),top:parseInt(o.attr("data-row-separator-top")),bottom:parseInt(o.attr("data-row-separator-bottom")),right:parseInt(o.attr("data-row-separator-right")),left:parseInt(o.attr("data-row-separator-left"))},n={rowDistances:l,galleryInstance:r,singleWidth:r.properties.singleWidth,singleHeight:r.properties.singleHeight,blocksDisposition:e.extend(!0,{},d)};Rexbuilder_Util_Editor.updatingRowDistances=!0,Rexbuilder_Dom_Util.updateRowDistancesData(o,a.distances),r.updateRowDistances(a.distances,n),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"block_distance"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_separator_top"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_separator_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_separator_right"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_separator_left"),Rexbuilder_Section.fixBlockToolsAccordingToSeparator(i,a.distances),i.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(i.hasClass("rex-model-section"))}),t.on("rexlive:rowDistancesApplied",function(t){var i=t.settings.galleryEditorInstance,a=t.settings.reverseData,o=t.settings.$section,r={rowDistances:jQuery.extend({},!0,t.settings.newDistances),galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:e.extend(!0,{},i.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingRowDistances=!1,Rexbuilder_Util_Editor.pushAction(o,"updateGridDistances",r,a)}),t.on("rexlive:set_section_margins",function(t){var i,a=t.settings.data_to_send;i=""!=a.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"][data-rexlive-model-number="'+a.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"]');var o=Rexbuilder_Util.getGalleryInstance(i),r=o.createActionDataMoveBlocksGrid(),d=parseInt(i.css("margin-top").split("px")[0]),l=parseInt(i.css("margin-right").split("px")[0]),n=parseInt(i.css("margin-bottom").split("px")[0]),s=parseInt(i.css("margin-left").split("px")[0]),c={top:isNaN(d)?0:d,right:isNaN(l)?0:l,bottom:isNaN(n)?0:n,left:isNaN(s)?0:s},u={marginsSection:c,galleryInstance:o,singleWidth:o.properties.singleWidth,singleHeight:o.properties.singleHeight,blocksDisposition:e.extend(!0,{},r)};Rexbuilder_Util_Editor.updatingSectionMargins=!0,Rexbuilder_Dom_Util.updateSectionMarginsData(i,a.margins),o.updateRowSectionMargins(a.margins,u),Rexbuilder_Section.fixSectionToolbox(i,a.margins),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"margin"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_margin_top"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_margin_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_margin_right"),Rexbuilder_Util.editedDataInfo.setSectionData(a.sectionTarget.sectionID,"row_margin_left"),i.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(i.hasClass("rex-model-section"))}),t.on("rexlive:sectionMarginsApplied",function(t){var i=t.settings.galleryEditorInstance,a=t.settings.reverseData,o=t.settings.$section,r={marginsSection:jQuery.extend({},!0,t.settings.newMargins),galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:e.extend(!0,{},i.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionMargins=!1,Rexbuilder_Util_Editor.pushAction(o,"updateSectionMargins",r,a)}),t.on("rexlive:set_section_width",function(t){var i,a=t.settings.data_to_send;i=""!=a.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"][data-rexlive-model-number="'+a.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"]');var o=i.find(".grid-stack-row"),r=Rexbuilder_Util.getGalleryInstance(i),d=""+a.sectionWidth.width+a.sectionWidth.type;Rexbuilder_Util_Editor.updatingSectionWidth=!0;var l="none"==o.parent().css("max-width")?"100%":o.parent().css("max-width"),n=o.parent().hasClass("full-disposition")?"full":"boxed",s=r.createActionDataMoveBlocksGrid(),c={section_width:l,dimension:n,galleryInstance:r,singleWidth:r.properties.singleWidth,singleHeight:r.properties.singleHeight,blocksDisposition:e.extend(!0,{},s)};Rexbuilder_Util_Editor.builderEdited(i.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionDimensionTool(i,{dimension:"100%"===d?"full":"boxed"}),r.updateSectionWidthWrap(d,c),Rexbuilder_Dom_Util.updateSectionWidthData(i,{sectionWidth:d,widthType:"100%"===d?"full":"boxed"}),i.attr("data-rexlive-section-edited",!0)}),t.on("rexlive:sectionWidthApplyed",function(t){var i=t.settings.galleryEditorInstance,a=t.settings.reverseData,o=t.settings.$section,r="none"==i.$element.parent().css("max-width")?"100%":i.$element.parent().css("max-width"),d=i.$element.parent().hasClass("full-disposition")?"full":"boxed",l={section_width:r,dimension:d,galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:e.extend(!0,{},i.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionWidth=!1,Rexbuilder_Util_Editor.pushAction(o,"updateSectionWidth",l,a)}),t.on("rexlive:set_row_photoswipe",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.find(".grid-stack-row"),o=Rexbuilder_Live_Utilities.getElementsPhotoswipe(a),r={elements:o};"true"==i.photoswipe.toString()?Rexbuilder_Dom_Util.enablePhotoswipeAllBlocksSection(t):"false"==i.photoswipe.toString()&&Rexbuilder_Dom_Util.removePhotoswipeAllBlocksSection(t);var d,l=Array.prototype.slice.call(t.get(0).getElementsByClassName("perfect-grid-item")),n=l.length;for(d=0;d<n;d++)Rexbuilder_Util.editedDataInfo.setBlockData(i.sectionTarget.sectionID,l[d].getAttribute("data-rexbuilder-block-id"),"photoswipe");var s=Rexbuilder_Live_Utilities.getElementsPhotoswipe(a),c={elements:s};Rexbuilder_Util_Editor.pushAction(t,"updateSectionPhotoswipe",c,r),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),t.on("rexlive:set_row_hold_grid",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]'),t.find(".collapse-grid").trigger("click")}),t.on("rexlive:change_section_name",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a={sectionName:t.attr("data-rexlive-section-name")};Rexbuilder_Dom_Util.updateSectionName(t,i.sectionName);var o={sectionName:i.sectionName};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"section_name"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionName",o,a)}),t.on("rexlive:change_section_nav_label",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a={sectionNavLabel:t.children(".section-data").attr("data-section_nav_label")};Rexbuilder_Dom_Util.updateSectionNavLabel(t,i.sectionNavLabel);var o={sectionNavLabel:i.sectionNavLabel};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"section_nav_label"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionNavLabel",o,a)}),t.on("rexlive:apply_section_custom_classes",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data").attr("data-custom_classes");a=a.trim();var o=a.split(/\s+/),r={$target:t,classes:o};Rexbuilder_Dom_Util.updateCustomClasses(t,i.customClasses);var d={$target:t,classes:i.customClasses};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"custom_classes"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateCustomClasses",d,r)}),t.on("rexlive:update_blocks_sizes",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.find(".grid-stack-row"),o=a.data().plugin_perfectGridGalleryEditor;o.updateBlocksSizes(i.blocksState)}),t.on("rexlive:update_block_size",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.find(".grid-stack-row"),o=a.data().plugin_perfectGridGalleryEditor;o.updateBlockSize(i.blockState)}),t.on("rexlive:SetCustomCSS",function(e){var t=e.settings.data_to_send,i=Rexbuilder_Util_Editor.$styleElement.text(),a={css:i};Rexbuilder_Dom_Util.updateCustomCSS(t.customCSS);var o={css:t.customCSS};Rexbuilder_Util_Editor.pushAction("document","updateCustomCSS",o,a),Rexbuilder_Util_Editor.builderEdited(!1)}),t.on("rexlive:apply_background_color_section",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o=a.attr("data-color_bg_section"),r=a.attr("data-color_bg_section_active"),d={color:o,active:r};Rexbuilder_Dom_Util.updateSectionBackgroundColor(t,i),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var l={color:i.color,active:i.active};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundColor",l,d)}),t.on("rexlive:updateSectionBackgroundGradient",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o=a.attr("data-color_bg_section"),r=a.attr("data-color_bg_section_active"),d={color:o,active:r};Rexbuilder_Dom_Util.updateSectionBackgroundGradient(t,i),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var l={color:i.color,active:i.active};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundGradient",l,d)}),t.on("rexlive:updateSectionOverlayGradient",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o=a.attr("data-row_overlay_color"),r=a.attr("data-row_overlay_active"),d={color:o,active:r};Rexbuilder_Dom_Util.updateSectionOverlayGradient(t,i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var l={color:i.color,active:i.active};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"row_overlay_active"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlayGradient",l,d)}),t.on("rexlive:change_section_overlay",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o=a.attr("data-row_overlay_color"),r=a.attr("data-row_overlay_active"),d={color:o,active:r};Rexbuilder_Dom_Util.updateSectionOverlay(t,i),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"row_overlay_active");var l={color:i.color,active:i.active};t.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlay",l,d)}),t.on("rexlive:apply_background_image_section",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o="undefined"==typeof a.attr("data-id_image_bg_section")?"":a.attr("data-id_image_bg_section"),r="undefined"==typeof a.attr("data-image_size")?"":a.attr("data-image_size"),d="undefined"==typeof a.attr("data-image_bg_section")?"":a.attr("data-image_bg_section"),l="undefined"==typeof t.attr("data-background_image_width")?"":t.attr("data-background_image_width"),n="undefined"==typeof t.attr("data-background_image_height")?"":t.attr("data-background_image_height"),s="undefined"==typeof a.attr("data-image_bg_section_active")||a.attr("data-image_bg_section_active"),c={active:s,idImage:o,image_size:r,urlImage:d,width:l,height:n};Rexbuilder_Dom_Util.updateImageBG(t,i);var u={active:i.active,idImage:i.idImage,urlImage:i.urlImage,image_size:i.image_size,width:i.width,height:i.height};t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"image_bg_section_active"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"image_width"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"image_height"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"id_image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"image_size"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionImageBG",u,c)}),t.on("rexlive:update_section_background_video",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.children(".section-data"),o="undefined"==typeof a.attr("data-video_mp4_url")?"":a.attr("data-video_mp4_url"),r="undefined"==typeof a.attr("data-video_bg_url_section")?"":a.attr("data-video_bg_url_section"),d="undefined"==typeof a.attr("data-video_bg_id_section")?"":a.attr("data-video_bg_id_section"),l="undefined"==typeof a.attr("data-video_bg_width_section")?"":a.attr("data-video_bg_width_section"),n="undefined"==typeof a.attr("data-video_bg_height_section")?"":a.attr("data-video_bg_height_section"),s="undefined"==typeof a.attr("data-video_bg_url_vimeo_section")?"":a.attr("data-video_bg_url_vimeo_section"),c="";""!=d?c="mp4":""!=s?c="vimeo":""!=r&&(c="youtube");var u={mp4Data:{idMp4:d,linkMp4:o,width:l,height:n},vimeoUrl:s,youtubeUrl:r,audio:!1,typeVideo:c},_={mp4Data:{idMp4:i.videoMp4.idMp4,linkMp4:i.videoMp4.linkMp4,width:i.videoMp4.width,height:i.videoMp4.height},vimeoUrl:i.urlVimeo,youtubeUrl:i.urlYoutube,audio:!1,typeVideo:i.typeVideo};Rexbuilder_Dom_Util.updateVideos(t,_),Rexbuilder_Dom_Util.fixVideoProportion(t[0]);var b={mp4Data:{idMp4:i.videoMp4.idMp4,linkMp4:i.videoMp4.linkMp4,width:i.videoMp4.width,height:i.videoMp4.height},vimeoUrl:i.urlVimeo,youtubeUrl:i.urlYoutube,audio:!1,typeVideo:i.typeVideo};switch(b.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_bg_id_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_mp4_url"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_bg_width_section"),Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_bg_height_section");break;case"youtube":Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_bg_url_section");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setSectionData(i.sectionTarget.sectionID,"video_bg_url_vimeo_section")}t.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionVideoBG",b,u)}),t.on("rexlive:apply_background_color_block",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d=o.attr("data-color_bg_block"),l="undefined"==typeof o.attr("data-color_bg_elem_active")||o.attr("data-color_bg_elem_active"),n={$elem:t,color:d,active:l},s={$elem:t,color:i.color,active:i.active};Rexbuilder_Dom_Util.updateBlockBackgroundColor(s),t.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"color_bg_block_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockBackgroundColor",s,n)}),t.on("rexlive:updateBlockBackgroundGradient",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d=o.attr("data-color_bg_block"),l="undefined"==typeof o.attr("data-color_bg_elem_active")||o.attr("data-color_bg_elem_active"),n={$elem:t,color:d,active:l},s={$elem:t,color:i.color,active:i.active};Rexbuilder_Dom_Util.updateBlockBackgroundGradient(s),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"color_bg_block_active"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockBackgroundGradient",s,n)}),t.on("rexlive:updateBlockOverlayGradient",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d=o.attr("data-overlay_block_color"),l="undefined"==typeof o.attr("data-overlay_block_color_active")||o.attr("data-overlay_block_color_active"),n={$elem:t,color:d,active:l},s={$elem:t,color:i.color,active:i.active};Rexbuilder_Dom_Util.updateBlockOverlayGradient(s),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"overlay_block_color_active"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockOverlayGradient",s,n)}),t.on("rexlive:change_block_overlay",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"!=typeof o.attr("data-overlay_block_color")?o.attr("data-overlay_block_color"):"",l="undefined"!=typeof o.attr("data-overlay_block_color_active")&&o.attr("data-overlay_block_color_active"),n={$elem:t,color:d,active:l},s={$elem:t,color:i.color,active:i.active};Rexbuilder_Dom_Util.updateBlockOverlay(s),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"overlay_block_color_active"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockOverlay",s,n)}),t.on("rexlive:apply_background_image_block",function(e){var t=e.settings.data_to_send;Rexbuilder_Util_Editor.updatingImageBg=!0;var i,a=t.target;i=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=i.get(0),r=i.find(".grid-item-content"),d=i.children(".rexbuilder-block-data"),l=i.parents(".rexpansive_section"),n=Rexbuilder_Util.getGalleryInstance(l);switch(t.tools){case"top":i.find(".rexlive-block-toolbox.top-tools .edit-block-image").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),i.find(".rexlive-block-toolbox.bottom-tools .edit-block-image").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide");case"bottom":}var s,c="undefined"==typeof d.attr("data-id_image_bg_block")?"":d.attr("data-id_image_bg_block"),u="undefined"==typeof d.attr("data-image_bg_block")?"":d.attr("data-image_bg_block"),_="undefined"==typeof r.attr("data-background_image_width")?"":r.attr("data-background_image_width"),b="undefined"==typeof r.attr("data-background_image_height")?"":r.attr("data-background_image_height"),x="undefined"==typeof d.attr("data-image_bg_elem_active")||d.attr("data-image_bg_elem_active");s="true"==x.toString()?"fixed"==i.parents(".grid-stack-row").attr("data-layout")?"full":"natural":"";var m="undefined"==typeof d.attr("data-type_bg_block")?s:d.attr("data-type_bg_block"),v="undefined"==typeof d.attr("data-photoswipe")?"":d.attr("data-photoswipe"),g={active:x,idImage:c,urlImage:u,width:_,height:b,typeBGimage:m,photoswipe:v},p={$itemContent:r,imageOpt:g},f={active:t.active,idImage:t.idImage,urlImage:t.urlImage,width:t.width,height:t.height,typeBGimage:t.typeBGimage,photoswipe:t.photoswipe};Rexbuilder_Dom_Util.updateImageBG(r,f),t.updateBlockHeight&&(u!==t.urlImage||m!==t.typeBGimage&&"natural"==t.typeBGimage)&&n.resizeBlockWithNewImage(o);var D={$itemContent:r,imageOpt:f};Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"image_bg_url"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"image_width"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"image_height"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"id_image_bg"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"image_size"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"image_bg_elem_active"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"type_bg_image"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(l),Rexbuilder_Util_Editor.builderEdited(l.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(l,"updateBlockImageBG",D,p),Rexbuilder_Util_Editor.updatingImageBg=!1}),t.on("rexlive:apply_photoswipe_block",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"==typeof o.attr("data-photoswipe")?"":o.attr("data-photoswipe"),l={$elem:t,photoswipe:d},n={$elem:t,photoswipe:i.photoswipe};Rexbuilder_Dom_Util.updateBlockPhotoswipe(n),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"photoswipe"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockPhotoswipe",n,l)}),t.on("rexlive:update_block_background_video",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');
var o=t.find(".grid-item-content"),r=t.children(".rexbuilder-block-data"),d=t.parents(".rexpansive_section");Rexbuilder_Util.getGalleryInstance(d);if("youtube"==i.typeVideo&&""!==i.urlYoutube||"vimeo"==i.typeVideo&&""!==i.urlVimeo||"mp4"==i.typeVideo&&""!==i.videoMp4.idMp4)switch(i.tools){case"top":t.find(".rexlive-block-toolbox.top-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide");case"bottom":}var l="undefined"==typeof r.attr("data-video_mp4_url")?"":r.attr("data-video_mp4_url"),n="undefined"==typeof r.attr("data-video_bg_id")?"":r.attr("data-video_bg_id"),s="undefined"==typeof r.attr("data-video_bg_url")?"":r.attr("data-video_bg_url"),c="undefined"==typeof r.attr("data-video_bg_url_vimeo")?"":r.attr("data-video_bg_url_vimeo"),u=o.children(".rex-video-wrap"),_="",b="";0!=u.length&&(_=parseInt(u.attr("data-rex-video-width")),b=parseInt(u.attr("data-rex-video-height")));var x=0!=o.children(".rex-video-toggle-audio").length,m="";""!=n?m="mp4":""!=s?m="youtube":""!=c&&(m="vimeo");var v={$itemContent:o,videoOpt:{mp4Data:{idMp4:n,linkMp4:l,width:_,height:b},vimeoUrl:c,youtubeUrl:s,audio:x,typeVideo:m}},g={mp4Data:{idMp4:i.videoMp4.idMp4,linkMp4:i.videoMp4.linkMp4,width:i.videoMp4.width,height:i.videoMp4.height},vimeoUrl:i.urlVimeo,youtubeUrl:i.urlYoutube,audio:"true"==i.audio.toString(),typeVideo:i.typeVideo};Rexbuilder_Dom_Util.updateVideos(o,g),Rexbuilder_Dom_Util.fixVideoProportion(o.get(0));var p={$itemContent:o,videoOpt:g};switch(t.attr("data-rexlive-element-edited",!0),i.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_bg_id"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_bg_width"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_bg_height"),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_mp4_url");break;case"youtube":Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_bg_url_youtube");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"video_bg_url_vimeo")}"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(d),Rexbuilder_Util_Editor.builderEdited(d.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(d,"updateBlockVideoBG",p,v)}),t.on("rexlive:apply_paddings_block",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d=Rexbuilder_Util.getGalleryInstance(r),l="undefined"==typeof o.attr("data-block_padding")?"":o.attr("data-block_padding"),n=Rexbuilder_Util.getPaddingsDataString(l),s={$elem:t,dataPadding:n};Rexbuilder_Util_Editor.updatingPaddingBlock=!0,Rexbuilder_Dom_Util.updateBlockPaddings(t,i.paddings),"masonry"==d.settings.galleryLayout&&(d.updateElementHeight(t[0],!0),d.updateSizeViewerSizes(t[0])),Rexbuilder_Util_Editor.updatingPaddingBlock=!1;var c={$elem:t,dataPadding:i.paddings};Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"block_padding"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockPadding",c,s)}),t.on("rexlive:apply_flex_position_block",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"==typeof o.attr("data-block_flex_position")?"":o.attr("data-block_flex_position"),l={x:"",y:""};if(""!=d){var n=d.split(" ");l.x=n[0],l.y=n[1]}var s={$elem:t,dataPosition:l};Rexbuilder_Dom_Util.updateFlexPostition(t,i.position);var c={$elem:t,dataPosition:i.position};t.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"block_flex_position"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockFlexPosition",c,s)}),t.on("rexlive:apply_flex_image_position_block",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"==typeof o.attr("data-block_flex_img_position")?"":o.attr("data-block_flex_img_position"),l={x:"",y:""};if(""!=d){var n=d.split(" ");l.x=n[0],l.y=n[1]}var s={$elem:t,dataPosition:l};Rexbuilder_Dom_Util.updateImageFlexPostition(t,i.position);var c={$elem:t,dataPosition:i.position};Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"block_flex_img_position"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockImageFlexPosition",c,s)}),t.on("rexlive:apply_block_custom_classes",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"==typeof o.attr("data-block_custom_class")?"":o.attr("data-block_custom_class");d=d.trim();var l=d.split(/\s+/),n={$target:t,classes:l};Rexbuilder_Dom_Util.updateCustomClasses(t,i.customClasses);var s={$target:t,classes:i.customClasses};Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"block_custom_class"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateCustomClasses",s,n)}),t.on("rexlive:apply_block_link_url",function(e){var t,i=e.settings.data_to_send,a=i.target;t=""!=a.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"][data-rexlive-model-number="'+a.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionID+'"]').find('div [data-rexbuilder-block-id="'+a.rexID+'"]');var o=t.children(".rexbuilder-block-data"),r=t.parents(".rexpansive_section"),d="undefined"==typeof o.attr("data-linkurl")?"":o.attr("data-linkurl"),l={$elem:t,url:d};Rexbuilder_Dom_Util.updateBlockUrl(t,i.url);var n={$elem:t,url:i.url};Rexbuilder_Util.editedDataInfo.setBlockData(a.sectionID,a.rexID,"linkurl"),t.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockUrl",n,l)}),t.on("rexlive:setTextGradient",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumeditor:setTextGradient",data:e.settings.data_to_send,editable:null})}),t.on("rexlive:editModel",function(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var a=t.find(".update-model-button"),o={$button:a,lock:!0},r={$button:a,lock:!1};Rexbuilder_Dom_Util.updateLockEditModel(a,!1),Rexbuilder_Util.$rexContainer.addClass("editing-model"),Rexbuilder_Util_Editor.pushAction("document","updateLockButton",r,o)}),t.on("rexlive:modelBecameSection",function(e){var t,i=e.settings.data_to_send,a=null,o=null;"default"==Rexbuilder_Util.activeLayout&&(a=Rexbuilder_Util.getDefaultLayoutState(),o=Rexbuilder_Util.getPageCustomizationsDom());var r=i.sectionTarget.sectionID,d=i.modelID,l=i.sectionTarget.modelNumber;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"][data-rexlive-model-number="'+l+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"]');var n={modelID:d,modelName:i.modelName,modelNumber:l,sectionID:t.attr("data-rexlive-section-id"),isModel:!0,$section:t,layoutsOrder:null!=o?jQuery.extend(!0,[],o):null,stateDefault:null!=a?jQuery.extend(!0,[],a):null},r=i.sectionTarget.sectionID,d=i.modelID,l=i.sectionTarget.modelNumber,s=Rexbuilder_Util.createSectionID();if(null!=o){var c,u,_={section_rex_id:s,targets:[],section_is_model:!1,section_model_id:-1,section_model_number:-1,section_hide:!1,section_created_live:!0};for(c=0;c<o.length;c++){for(u=0;u<o[c].sections.length;u++)if(o[c].sections[u].section_is_model){if(o[c].sections[u].section_model_id==d&&o[c].sections[u].section_model_number==l)break}else if(r==o[c].sections[u].section_rex_id)break;o[c].sections.splice(u,1,jQuery.extend(!0,{},_))}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(o),u=0;u<a.length;u++)if(a[u].section_is_model){if(a[u].section_model_id==d&&a[u].section_model_number==l)break}else if(r==a[u].section_rex_id)break;_.targets=Rex_Save_Listeners.createTargets(t,"default"),a.splice(u,1,_),Rexbuilder_Util.updateDefaultLayoutState({pageData:a})}Rexbuilder_Dom_Util.updateSectionBecameModel({modelID:"",modelName:"",modelNumber:"",sectionID:s,isModel:!1,$section:t});var b={modelID:"",modelName:"",modelNumber:"",sectionID:s,isModel:!1,$section:t,layoutsOrder:null!=o?jQuery.extend(!0,[],o):null,stateDefault:null!=a?jQuery.extend(!0,[],a):null};Rexbuilder_Util_Editor.pushAction(t,"sectionBecameModel",b,n)}),t.on("Buttons: rexlive:update_button_page",function(e){var t=e.settings.data_to_send,i={buttonProperties:jQuery.extend(!0,{},t.reverseButtonData)},a={buttonProperties:jQuery.extend(!0,{},t.actionButtonData)};Rexbuilder_Rexbutton.updateButton(a),Rexbuilder_Util_Editor.pushAction("document","updateRexButton",a,i)}),t.on("rexlive:update_wcpf7_column_content_page",function(e){var t=e.settings.data_to_send,i={columnContentData:jQuery.extend(!0,{},t.reverseColumnContentData)},a={columnContentData:jQuery.extend(!0,{},t.actionColumnContentData)};t.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateColumnContent(a),Rexbuilder_Rexwpcf7_Editor.updateColumnContentShortcode(a),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7ColumnContent",a,i)}),t.on("rexlive:update_wcpf7_page",function(e){var t=e.settings.data_to_send,i={elementData:jQuery.extend(!0,{},t.reverseFormData)},a={elementData:jQuery.extend(!0,{},t.actionFormData)};t.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateForm(a),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7",a,i)}),t.on("rexlive:getCustomCss",function(){var t=e("#rexpansive-builder-style-inline-css").text().replace(/^\s+|\s+$/g,""),i={eventName:"rexlive:openCssEditor",currentStyle:t};Rexbuilder_Util_Editor.sendParentIframeMessage(i)}),t.on("rexlive:apply_reSynchContent",function(e){if("default"!=Rexbuilder_Util.activeLayout){var t=document.getElementById("rexbuilder-layout-data").querySelector('.customization-wrap[data-customization-name="default"]').querySelector('.section-targets[data-section-rex-id="'+e.settings.data.targetInfo.sectionID+'"]').textContent,i=""!==t?JSON.parse(t):{};if("self"===e.settings.data.targetInfo.rexID){var a=Rexbuilder_Util.editedDataInfo.getSectionData(e.settings.data.targetInfo.sectionID);Rexbuilder_Dom_Util.updateBulkSection(e.settings.data.targetInfo,a,i),Rexbuilder_Util.editedDataInfo.setBulkSectionData(e.settings.data.targetInfo.sectionID,!1)}else{var o=Rexbuilder_Util.editedDataInfo.getBlockData(e.settings.data.targetInfo.sectionID,e.settings.data.targetInfo.rexID);Rexbuilder_Dom_Util.updateBulkBlock(e.settings.data.targetInfo,o,i),Rexbuilder_Util.editedDataInfo.setBulkBlockData(e.settings.data.targetInfo.sectionID,e.settings.data.targetInfo.rexID,!1)}Rexbuilder_Util_Editor.builderEdited(""!==e.settings.data.targetInfo.modelNumber)}}),t.on("click",".builder-section-config",function(t){t.preventDefault();var i=e(t.target).parents(".rexpansive_section"),a=i.children(".section-data"),o=i.attr("data-rexlive-section-id"),r="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",d=i.find(".grid-stack-row"),l=d.data().plugin_perfectGridGalleryEditor,n=l.createActionDataMoveBlocksGrid().blocks,s=n.map(function(e){return{rexID:e.rexID,x:e.x,y:e.y,w:e.w,h:e.h}}),c=d.attr("data-layout"),u=d.attr("data-full-height"),_=d.parent().css("max-width"),b="100%"===_||"none"==_?"full":"boxed",x={gutter:parseInt(d.attr("data-separator")),top:parseInt(d.attr("data-row-separator-top")),bottom:parseInt(d.attr("data-row-separator-bottom")),right:parseInt(d.attr("data-row-separator-right")),left:parseInt(d.attr("data-row-separator-left"))},m={top:parseInt(i.css("margin-top").split("px")[0]),right:parseInt(i.css("margin-right").split("px")[0]),bottom:parseInt(i.css("margin-bottom").split("px")[0]),left:parseInt(i.css("margin-left").split("px")[0])},v=!0,g=[];if(d.children(".grid-stack-item:not(.removing_block)").each(function(t,i){var a=e(i),o=a.children(".rexbuilder-block-data"),r=Rexbuilder_Util_Editor.getTextWrapLength(a);""!=o.attr("data-image_bg_block")&&""!=o.attr("data-image_bg_block")&&0==r&&g.push(o)}),g.length>0)for(var p=0;p<g.length;p++)"true"!=g[p].attr("data-photoswipe").toString()&&(v=!1);else v=!1;var f=i.attr("data-rexlive-section-name"),D=a.attr("data-custom_classes"),I=a.attr("data-section_nav_label"),h={eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:o,modelNumber:r},blocksState:s,activeLayout:c,fullHeight:u,section_width:_,dimension:b,rowDistances:x,marginsSection:m,photoswipe:v,sectionName:f,sectionNavLabel:"undefined"!=typeof I?I:"",customClasses:D}};Rexbuilder_Util_Editor.sendParentIframeMessage(h)}),t.on("click",".add-new-block-image",function(t){t.preventDefault();var i=e(t.target).parents(".rexpansive_section"),a=i.attr("data-rexlive-section-id"),o="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",r={sectionTarget:{sectionID:a,modelNumber:o},returnEventName:"rexlive:insert_image",eventName:"rexlive:openMediaUploader"};Rexbuilder_Util_Editor.sendParentIframeMessage(r)}),t.on("click",".add-new-block-video",function(t){t.preventDefault();var i=e(t.target).parents(".rexpansive_section"),a=i.attr("data-rexlive-section-id"),o="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",r={eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:a,modelNumber:o}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)}),t.on("click",".add-new-block-slider",function(t){t.preventDefault();var i=e(t.target).parents(".rexpansive_section"),a=i.attr("data-rexlive-section-id"),o="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",r={eventName:"rexlive:addNewSlider",target:{sectionID:a,modelNumber:o}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)}),t.on("click",".edit-background-section",function(t){t.preventDefault();var i=e(t.target).parents(".rexpansive_section"),a=i.attr("data-rexlive-section-id"),o="undefined"!=typeof i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",r=i.children(".section-data"),d="undefined"!=typeof r.attr("data-color_bg_section")?r.attr("data-color_bg_section"):"";""==d&&(d="rgba(0,0,0,0)");var l="undefined"==typeof r.attr("data-color_bg_section_active")||r.attr("data-color_bg_section_active"),n="undefined"!=typeof r.attr("data-row_overlay_color")?r.attr("data-row_overlay_color"):"";""==n&&(n=void 0===r.attr("data-responsive_background")?"":r.attr("data-responsive_background"),""==n&&(n="rgba(0,0,0,0)"));var s;s=!(i.hasClass("active-large-overlay")||i.hasClass("active-medium-overlay")||i.hasClass("active-small-overlay"))&&("undefined"!=typeof r.attr("data-row_overlay_active")&&r.attr("data-row_overlay_active"));var c=i.find(".responsive-overlay");s||("default"==Rexbuilder_Util.activeLayout&&i.hasClass("active-large-overlay")&&(s=!0,i.removeClass("active-large-overlay"),r.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-overlay",r),c.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&i.hasClass("active-medium-overlay")&&(s=!0,i.removeClass("active-medium-overlay"),r.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-overlay",r),c.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&i.hasClass("active-small-overlay")&&(s=!0,i.removeClass("active-small-overlay"),r.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-overlay",r),c.addClass("rex-active-overlay")));var u="undefined"==typeof r.attr("data-id_image_bg_section")?"":r.attr("data-id_image_bg_section"),_="undefined"==typeof r.attr("data-image_bg_section")?"":r.attr("data-image_bg_section"),b="undefined"==typeof i.attr("data-background_image_width")?"":i.attr("data-background_image_width"),x="undefined"==typeof i.attr("data-background_image_height")?"":i.attr("data-background_image_height"),m="undefined"==typeof r.attr("data-image_bg_section_active")||r.attr("data-image_bg_section_active"),v="undefined"==typeof r.attr("data-video_mp4_url")?"":r.attr("data-video_mp4_url"),g="undefined"==typeof r.attr("data-video_bg_url_section")?"":r.attr("data-video_bg_url_section"),p="undefined"==typeof r.attr("data-video_bg_id_section")?"":r.attr("data-video_bg_id_section"),f="undefined"==typeof r.attr("data-video_bg_url_vimeo_section")?"":r.attr("data-video_bg_url_vimeo_section"),D={bgColor:{sectionTarget:{sectionID:a,modelNumber:o},color:d,active:l},imageBG:{sectionTarget:{sectionID:a,modelNumber:o},idImage:u,imageUrl:_,width:b,height:x,active:m},bgVideo:{sectionTarget:{sectionID:a,modelNumber:o},youtubeVideo:g,vimeoUrl:f,mp4Video:v,mp4VideoID:p},overlay:{sectionTarget:{sectionID:a,modelNumber:o},color:n,active:s}},I={eventName:"rexlive:editBackgroundSection",activeBG:D};Rexbuilder_Util_Editor.sendParentIframeMessage(I)}),t.on("click",".builder-edit-block",function(t){t.preventDefault();var i=e(t.target).parents(".grid-stack-item"),a=i.parents(".rexpansive_section"),o=i.attr("data-rexbuilder-block-id"),r=a.attr("data-rexlive-section-id"),d="undefined"!=typeof a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",l=i.children(".rexbuilder-block-data"),n=i.find(".grid-item-content"),s=i.find(".text-wrap"),c=l.attr("data-color_bg_block"),u="undefined"==typeof l.attr("data-color_bg_elem_active")||l.attr("data-color_bg_elem_active");""==c&&(c="rgba(0,0,0,0)");var _={color:c,active:u,target:{sectionID:r,modelNumber:d,rexID:o}},b="undefined"!=typeof l.attr("data-overlay_block_color")?l.attr("data-overlay_block_color"):"";""==b&&(b="rgba(0,0,0,0)");var x;x=!(i.hasClass("active-large-block-overlay")||i.hasClass("active-medium-block-overlay")||i.hasClass("active-small-block-overlay"))&&("undefined"!=typeof l.attr("data-overlay_block_color_active")&&l.attr("data-overlay_block_color_active"));var m=i.find(".responsive-block-overlay");x||("default"==Rexbuilder_Util.activeLayout&&i.hasClass("active-large-block-overlay")&&(x=!0,i.removeClass("active-large-block-overlay"),l.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-block-overlay",l),m.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&i.hasClass("active-medium-block-overlay")&&(x=!0,i.removeClass("active-medium-block-overlay"),l.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-block-overlay",l),m.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&i.hasClass("active-small-block-overlay")&&(x=!0,i.removeClass("active-small-block-overlay"),l.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-block-overlay",l),m.addClass("rex-active-overlay")));var v={color:b,active:x,target:{sectionID:r,modelNumber:d,rexID:o}},g="undefined"==typeof l.attr("data-id_image_bg_block")?"":l.attr("data-id_image_bg_block"),p="undefined"==typeof l.attr("data-image_bg_block")?"":l.attr("data-image_bg_block"),f="undefined"==typeof n.attr("data-background_image_width")?"":n.attr("data-background_image_width"),D="undefined"==typeof n.attr("data-background_image_height")?"":n.attr("data-background_image_height"),I="undefined"==typeof l.attr("data-image_bg_elem_active")||l.attr("data-image_bg_elem_active"),h="fixed"==i.parents(".grid-stack-row").attr("data-layout")?"full":"natural";""!==s.text().trim()&&(h="full");var R="undefined"==typeof l.attr("data-type_bg_block")?h:l.attr("data-type_bg_block"),y="undefined"==typeof l.attr("data-photoswipe")?"":l.attr("data-photoswipe"),U={idImage:g,imageUrl:p,width:f,height:D,typeBGimage:R,active:I,defaultTypeImage:h,photoswipe:y,target:{sectionID:r,modelNumber:d,rexID:o}},k="undefined"==typeof l.attr("data-video_mp4_url")?"":l.attr("data-video_mp4_url"),C="undefined"==typeof l.attr("data-video_bg_id")?"":l.attr("data-video_bg_id"),S="undefined"==typeof l.attr("data-video_bg_url")?"":l.attr("data-video_bg_url"),w="undefined"==typeof l.attr("data-video_bg_url_vimeo")?"":l.attr("data-video_bg_url_vimeo"),E=n.children(".rex-video-wrap"),T="",N="";0!=E.length&&(T=parseInt(E.attr("data-rex-video-width")),N=parseInt(E.attr("data-rex-video-height")));var B="",$=0!=n.children(".rex-video-toggle-audio").length;""!=C?B="mp4":""!=S?B="youtube":""!=w&&(B="vimeo");var L={type:B,mp4Data:{idMp4:C,linkMp4:k,width:T,height:N},vimeoUrl:w,youtubeUrl:S,audio:$,target:{sectionID:r,modelNumber:d,rexID:o}},M="undefined"==typeof l.attr("data-block_padding")?"":l.attr("data-block_padding"),G={target:{sectionID:r,modelNumber:d,rexID:o},paddings:Rexbuilder_Util.getPaddingsDataString(M)},A="undefined"==typeof l.attr("data-block_flex_position")?"":l.attr("data-block_flex_position");""===A&&(A="left top");var P=A.split(" "),V=P[1]+"-"+P[0],W={target:{sectionID:r,modelNumber:d,rexID:o},position:V},H="undefined"==typeof l.attr("data-block_flex_img_position")?"":l.attr("data-block_flex_img_position");""===H&&(H="center middle");var O=H.split(" "),z=O[1]+"-"+O[0],j={target:{sectionID:r,modelNumber:d,rexID:o},position:z},Q="undefined"==typeof l.attr("data-block_custom_class")?"":l.attr("data-block_custom_class"),F="undefined"==typeof l.attr("data-linkurl")?"":l.attr("data-linkurl"),Y={rexID:o,x:parseInt(i.attr("data-gs-x")),y:parseInt(i.attr("data-gs-y")),w:parseInt(i.attr("data-gs-width")),h:parseInt(i.attr("data-gs-height"))},q={bgColor:_,imageBG:U,bgVideo:L,overlay:v,paddings:G,flexPosition:W,flexImgPosition:j,customClasses:{classes:Q,target:{sectionID:r,modelNumber:d,rexID:o}},linkBlock:{link:F,target:{sectionID:r,modelNumber:d,rexID:o}},sectionTarget:{sectionID:r,modelNumber:d},blockState:Y},J={eventName:"rexlive:editBlockOptions",activeBlockData:q};Rexbuilder_Util_Editor.sendParentIframeMessage(J)}),t.on("click",".open-model",function(t){Rexbuilder_Util_Editor.openingModel=!0;var i,a=e(t.target).parents(".rexpansive_section"),o=a.attr("data-rexlive-section-id"),r="undefined"!=typeof a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",d=Rexbuilder_Util.createSectionID(),l=Rex_Save_Listeners.createSectionProperties(a,"shortcode",d),n=Rexbuilder_Util.getSectionCustomLayouts(o),s=[];if(0!=n.length)for(i=0;i<n.length;i++)s.push(n[i].name),"default"==n[i].name&&(n[i].targets=Rex_Save_Listeners.createTargets(a,"default"));else s.push("default"),n.push({name:"default",targets:Rex_Save_Listeners.createTargets(a,"default")});var c,u="undefined"!=typeof a.attr("data-rexlive-model-id")?a.attr("data-rexlive-model-id"):"",_=[],b=!1;Rexbuilder_Util.$rexContainer.find(".rexpansive_section.rex-model-section").each(function(t,i){var a=e(i),o=parseInt(a.attr("data-rexlive-model-id")),r=parseInt(a.attr("data-rexlive-model-number"));for(b=!1,c=0;c<_.length;c++)o==_[c].modelID&&r>_[c].number&&(_[c].number=r,b=!0);b||_.push({modelID:o,number:r})});var x={eventName:"rexlive:openModalMenu",modelData:{modelID:u,sectionTarget:{sectionID:o,modelNumber:r},shortCode:l,layouts:n,layoutsNames:s,modelsNumbers:_}};Rexbuilder_Util_Editor.sendParentIframeMessage(x),Rexbuilder_Util_Editor.openingModel=!1}),t.on("click",".call-update-model-button",function(t){e(this).parents(".rexpansive_section").find(".update-model-button").trigger("click")}),t.on("click",".update-model-button",function(i){var a=e(this),o=a.parents(".rexpansive_section"),r=o.attr("data-rexlive-section-id"),d="undefined"!=typeof o.attr("data-rexlive-model-id")?o.attr("data-rexlive-model-id"):"",l="undefined"!=typeof o.attr("data-rexlive-model-name")?o.attr("data-rexlive-model-name"):"",n="undefined"!=typeof o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"";if(a.hasClass("locked")){var s={eventName:"rexlive:editRemoveModal",modelData:{modelName:l,modelNumber:n,modelID:d,sectionTarget:{sectionID:r,modelNumber:n},layoutActive:Rexbuilder_Util.activeLayout}};Rexbuilder_Util_Editor.sendParentIframeMessage(s),Rexbuilder_Util_Editor.openingModel=!1}else{var s={eventName:"rexlive:saveAndCloseModel",modelData:{modelName:l,modelNumber:n,modelID:d,sectionTarget:{sectionID:r,modelNumber:n},layoutActive:Rexbuilder_Util.activeLayout}};Rexbuilder_Util_Editor.sendParentIframeMessage(s);var c=jQuery.Event("rexlive:saveModel");t.trigger(c)}})})}(jQuery);
!function(){function e(e,t){for(var a=Array.prototype.slice.call(arguments,2),i=e.split("."),d=i.pop(),r=0;r<i.length;r++)t=t[i[r]];return t[d].apply(t,a)}var t,a;String.prototype.hashCode=function(){var e,t,a=0;if(0===this.length)return a;for(e=0;e<this.length;e++)t=this.charCodeAt(e),a=(a<<5)-a+t,a|=0;return a};var i=function(e,t){var a=document.createElement("span");a.setAttribute("class","builderlive-editable-media__wrapper"),a.innerHTML=tmpl("tmpl-editable-media-toolbar",{type:t});var i=a.querySelector('[data-action="remove"]');i&&i.addEventListener("click",o.bind(a));var d=a.querySelector('[data-action="add"]');d&&d.addEventListener("click",o.bind(a));var r=a.querySelector('[data-action="edit"]');return r&&r.addEventListener("click",o.bind(a)),e.parentNode.insertBefore(a,e.parentNode.firstChild),a.appendChild(e)},d=function(){t=[].slice.call(document.getElementsByClassName("builderlive-editable-field"))},r=function(){d(),a=parseInt(document.getElementById("id-post").getAttribute("data-post-id"))},l=function(){t.forEach(function(e,t){var a=e.getAttribute("data-editable-type");a=null===a?"text":a,e.setAttribute("data-editable-id","bl_"+a+"_"+t);var d=null;switch(a){case"html":case"float":case"text":d=e.innerText.trim().hashCode(),e.setAttribute("contenteditable",!0),e.addEventListener("click",u),e.addEventListener("input",c);break;case"media":case"media_list":i(e,a),d=e.getAttribute("data-editable-value").hashCode(),e.addEventListener("click",n);break;case"media_list_aggregate":d=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",d)})},n=function(e){e.preventDefault(),s(e.currentTarget)},s=function(e,t){e="undefined"!=typeof e?e:null,t="undefined"!=typeof t&&t;var a="",i="",d="";e?(a="edit",i=e.getAttribute("data-editable-value"),d=e.getAttribute("data-editable-id")):a="add";var r={eventName:"rexlive:openPostEditMediaUploader",mediaData:{action:a,mediaId:i,fieldId:d,fromMediaListModal:t}};Rexbuilder_Util_Editor.sendParentIframeMessage(r)},o=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-action"),a=this.querySelector(".builderlive-editable-field");switch(t){case"remove":a&&(a.setAttribute("data-editable-value",""),a.style.visibility="hidden");break;case"add":a&&s();case"edit":a&&s(a)}},u=function(e){e.stopPropagation()},c=function(e){var t={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(t)},v=function(e){var t=document.querySelector('.builderlive-editable-field[data-editable-id="'+e.media_data.fieldId+'"]');switch(t.setAttribute("data-editable-value",e.imgData[0].media_info.id),t.tagName.toLowerCase()){case"img":t.setAttribute("src",e.imgData[0].display_info.src),t.removeAttribute("srcset");break;default:t.style.backgroundImage="url("+e.imgData[0].display_info.src+")"}if("undefined"!==e.media_data.fromMediaListModal&&e.media_data.fromMediaListModal){var a={eventName:"rexlive:liveMediaEditFromListComplete",mediaData:{src:e.imgData[0].display_info.src,fieldId:e.media_data.fieldId}};Rexbuilder_Util_Editor.sendParentIframeMessage(a)}},m=function(t){var a=document.querySelector(t.media_data.destinationSelector),d=e(t.media_data.tmplDataGeneration,window,t),r=tmpl(t.media_data.addTmplId,d),l=document.createElement("DIV");l.innerHTML=r;var s,o=l.children[0];s=-1!==o.className.indexOf("builderlive-editable-field")?o:o.querySelector(".builderlive-editable-field");var u=s.getAttribute("data-editable-type"),c=document.getElementsByClassName("builderlive-editable-field"),v="bl_"+u+"_"+c.length;s.setAttribute("data-editable-id",v);i(s,u);if(s.addEventListener("click",n),a.appendChild(o),e(t.media_data.completeAddCallback,window,o,d),"undefined"!==t.media_data.fromMediaListModal&&t.media_data.fromMediaListModal){var m={eventName:"rexlive:liveMediaAddFromListComplete",mediaData:{src:t.imgData[0].display_info.src,fieldId:v}};Rexbuilder_Util_Editor.sendParentIframeMessage(m)}},b=function(){var e=[];return d(),t.forEach(function(t){var a=t.getAttribute("data-editable-type");a=null===a?"text":a;var i,d=t.getAttribute("data-editable-hash");switch(a){case"html":case"float":case"text":i=t.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":i=t.getAttribute("data-editable-value").hashCode()}if(i!=d){var r=t.getAttribute("data-editable-info"),l=t.getAttribute("data-editable-format"),n={prev_value:null,value:null,info:""!==r?JSON.parse(r):[],type:a};switch(a){case"media":n.value=t.getAttribute("data-editable-value");break;case"media_list":case"media_list_aggregate":n.prev_value=t.getAttribute("data-editable-prev-value"),n.value=t.getAttribute("data-editable-value");break;case"html":n.value=t.innerHTML.trim();break;case"float":var s=t.innerText.trim();if(null!==l){var o=l.split("x");s=s.replace(o[1],""),s=s.replace(o[2],".")}n.value=parseFloat(s);break;case"text":default:n.value=t.innerText.trim()}e.push(n)}}),e},f=function(e){var t,a="",i=[];for(t in e)i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a=i.join("&").replace(/%20/g,"+")},p=function(i){if(i.data.rexliveEvent){if("rexlive:savePage"===i.data.eventName){var d=b();if(d.length>0){var r={action:"rexlive_save_editable_fields",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,postID:a,fieldData:JSON.stringify(d)},l=f(r),n=new XMLHttpRequest;n.open("POST",_plugin_frontend_settings.rexajax.ajaxurl,!0),n.onload=function(){if(n.status>=200&&n.status<400){var e=JSON.parse(n.responseText);e.success&&t.forEach(function(e,t){var a=e.getAttribute("data-editable-type");a=null===a?"text":a;var i=null;switch(a){case"html":case"float":case"text":i=e.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":i=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",i),e.setAttribute("data-editable-prev-value",e.getAttribute("data-editable-value"))})}},n.onerror=function(){},n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(l)}}if("rexlive:liveMediaEdit"===i.data.eventName&&(v(i.data.data_to_send),c()),"rexlive:liveMediaAdd"===i.data.eventName&&(m(i.data.data_to_send),c()),"rexlive:liveMediaOpenEdit"===i.data.eventName){var o=document.querySelector('.builderlive-editable-field[data-editable-id="'+i.data.data_to_send.elId+'"]');o&&s(o,i.data.data_to_send.fromMediaListModal)}if("rexlive:liveMediaReorder"===i.data.eventName&&i.data.data_to_send&&(e(i.data.data_to_send.completeReorderCallback,window,i.data.data_to_send),c()),"rexlive:liveMediaDelete"===i.data.eventName){var o=document.querySelector('.builderlive-editable-field[data-editable-id="'+i.data.data_to_send.elId+'"]');if(o){var u=o.getAttribute("data-editable-value");o.setAttribute("data-editable-value",""),o.style.visibility="hidden";var p={mediaListAggregateSelector:i.data.data_to_send.mediaListAggregateSelector,value:u};e(i.data.data_to_send.completeRemoveCallback,window,p),c()}}}},_=function(){l()};document.addEventListener("DOMContentLoaded",r),window.addEventListener("message",p,!1),window.addEventListener("load",_)}();
!function(e){"use strict";var n=function(e,t){var r=/[^\w\-.:]/.test(e)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+e.replace(n.regexp,n.func)+"';return _s;"):n.cache[e]=n.cache[e]||n(n.load(e));return t?r(t,n):function(e){return r(e,n)}};n.cache={},n.load=function(e){return document.getElementById(e).innerHTML},n.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(e,n,t,r,c,u){return n?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[n]||"\\"+n:t?"="===t?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":c?"';":u?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},n.encode=function(e){return(null==e?"":""+e).replace(n.encReg,function(e){return n.encMap[e]||""})},n.arg="o",n.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.tmpl=n}(this);
/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!i.pointerEvent){var a=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&r.length>0&&(r=parseInt(r[1],10),r>=1&&r<8&&(i.isOldIOSPhone=!0))}var l=a.match(/Android\s([0-9\.]*)/),s=l?l[1]:0;s=parseFloat(s),s>=1&&(s<4.4&&(i.isOldAndroid=!0),i.androidVersion=s),i.isMobileOpera=/opera mini|opera mobi/i.test(a)}for(var u,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],m=0;m<4;m++){n=p[m];for(var f=0;f<3;f++)u=d[f],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var h=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),i=window.setTimeout(function(){e(t+n)},n);return h=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)});var a=this,r=25,l=3,s={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(s,i);var u,c,d,p,m,f,h,y,v,x,g,w,b,I,C,D,T,M,S,A,E,O,k,R,P,Z,F,L,z,_,N,U,H,Y,W,B,G,X,V,K,q,$,j,J,Q,ee,te,ne,ie,oe,ae,re,le,se,ue,ce,de,pe=function(){return{x:0,y:0}},me=pe(),fe=pe(),he=pe(),ye={},ve=0,xe={},ge=pe(),we=0,be=!0,Ie=[],Ce={},De=!1,Te=function(e,t){o.extend(a,t.publicMethods),Ie.push(e)},Me=function(e){var t=en();return e>t-1?e-t:e<0?t+e:e},Se={},Ae=function(e,t){return Se[e]||(Se[e]=[]),Se[e].push(t)},Ee=function(e){var t=Se[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(a,n)}},Oe=function(){return(new Date).getTime()},ke=function(e){ue=e,a.bg.style.opacity=e*s.bgOpacity},Re=function(e,t,n,i,o){(!De||o&&o!==a.currItem)&&(i/=o?o.fitRatio:a.currItem.fitRatio),e[O]=w+t+"px, "+n+"px"+b+" scale("+i+")"},Pe=function(e){oe&&(e&&(x>a.currItem.fitRatio?De||(mn(a.currItem,!1,!0),De=!0):De&&(mn(a.currItem),De=!1)),Re(oe,he.x,he.y,x))},Ze=function(e){e.container&&Re(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Fe=function(e,t){t[O]=w+e+"px, 0px"+b},Le=function(e,t){if(!s.loop&&t){var n=p+(ge.x*ve-e)/ge.x,i=Math.round(e-gt.x);(n<0&&i>0||n>=en()-1&&i<0)&&(e=gt.x+i*s.mainScrollEndFriction)}gt.x=e,Fe(e,m)},ze=function(e,t){var n=wt[e]-xe[e];return fe[e]+me[e]+n-n*(t/g)},_e=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ne=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Ue=null,He=function(){Ue&&(o.unbind(document,"mousemove",He),o.addClass(e,"pswp--has_mouse"),s.mouseUsed=!0,Ee("mouseUsed")),Ue=setTimeout(function(){Ue=null},100)},Ye=function(){o.bind(document,"keydown",a),N.transform&&o.bind(a.scrollWrap,"click",a),s.mouseUsed||o.bind(document,"mousemove",He),o.bind(window,"resize scroll orientationchange",a),Ee("bindEvents")},We=function(){o.unbind(window,"resize scroll orientationchange",a),o.unbind(window,"scroll",v.scroll),o.unbind(document,"keydown",a),o.unbind(document,"mousemove",He),N.transform&&o.unbind(a.scrollWrap,"click",a),V&&o.unbind(window,h,a),clearTimeout(U),Ee("unbindEvents")},Be=function(e,t){var n=un(a.currItem,ye,e);return t&&(ie=n),n},Ge=function(e){return e||(e=a.currItem),e.initialZoomLevel},Xe=function(e){return e||(e=a.currItem),e.w>0?s.maxSpreadZoom:1},Ve=function(e,t,n,i){return i===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],!0):(n[e]=ze(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ke=function(){if(O){var t=N.perspective&&!R;return w="translate"+(t?"3d(":"("),void(b=N.perspective?", 0px)":")")}O="left",o.addClass(e,"pswp--ie"),Fe=function(e,t){t.left=e+"px"},Ze=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Pe=function(){if(oe){var e=oe,t=a.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},qe=function(e){var t="";s.escKey&&27===e.keyCode?t="close":s.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))},$e=function(e){e&&($||q||ae||G)&&(e.preventDefault(),e.stopPropagation())},je=function(){a.setScrollOffset(0,o.getScrollY())},Je={},Qe=0,et=function(e){Je[e]&&(Je[e].raf&&Z(Je[e].raf),Qe--,delete Je[e])},tt=function(e){Je[e]&&et(e),Je[e]||(Qe++,Je[e]={})},nt=function(){for(var e in Je)Je.hasOwnProperty(e)&&et(e)},it=function(e,t,n,i,o,a,r){var l,s=Oe();tt(e);var u=function(){if(Je[e]){if(l=Oe()-s,l>=i)return et(e),a(n),void(r&&r());a((n-t)*o(l/i)+t),Je[e].raf=P(u)}};u()},ot={shout:Ee,listen:Ae,viewportSize:ye,options:s,isMainScrollAnimating:function(){return ae},getZoomLevel:function(){return x},getCurrentIndex:function(){return p},isDragging:function(){return V},isZooming:function(){return ee},setScrollOffset:function(e,t){xe.x=e,_=xe.y=t,Ee("updateScrollOffset",xe)},applyZoomPan:function(e,t,n,i){he.x=t,he.y=n,x=e,Pe(i)},init:function(){if(!u&&!c){var n;a.framework=o,a.template=e,a.bg=o.getChildByClass(e,"pswp__bg"),F=e.className,u=!0,N=o.detectFeatures(),P=N.raf,Z=N.caf,O=N.transform,z=N.oldIE,a.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),a.container=o.getChildByClass(a.scrollWrap,"pswp__container"),m=a.container.style,a.itemHolders=D=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],D[0].el.style.display=D[2].el.style.display="none",Ke(),v={resize:a.updateSize,orientationchange:function(){clearTimeout(U),U=setTimeout(function(){ye.x!==a.scrollWrap.clientWidth&&a.updateSize()},500)},scroll:je,keydown:qe,click:$e};var i=N.isOldIOSPhone||N.isOldAndroid||N.isMobileOpera;for(N.animationName&&N.transform&&!i||(s.showAnimationDuration=s.hideAnimationDuration=0),n=0;n<Ie.length;n++)a["init"+Ie[n]]();if(t){var r=a.ui=new t(a,o);r.init()}Ee("firstUpdate"),p=p||s.index||0,(isNaN(p)||p<0||p>=en())&&(p=0),a.currItem=Qt(p),(N.isOldIOSPhone||N.isOldAndroid)&&(be=!1),e.setAttribute("aria-hidden","false"),s.modal&&(be?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===_&&(Ee("initialLayout"),_=L=o.getScrollY());var d="pswp--open ";for(s.mainClass&&(d+=s.mainClass+" "),s.showHideOpacity&&(d+="pswp--animate_opacity "),d+=R?"pswp--touch":"pswp--notouch",d+=N.animationName?" pswp--css_animation":"",d+=N.svg?" pswp--svg":"",o.addClass(e,d),a.updateSize(),f=-1,we=null,n=0;n<l;n++)Fe((n+f)*ge.x,D[n].el.style);z||o.bind(a.scrollWrap,y,a),Ae("initialZoomInEnd",function(){a.setContent(D[0],p-1),a.setContent(D[2],p+1),D[0].el.style.display=D[2].el.style.display="block",s.focus&&e.focus(),Ye()}),a.setContent(D[1],p),a.updateCurrItem(),Ee("afterInit"),be||(I=setInterval(function(){Qe||V||ee||x!==a.currItem.initialZoomLevel||a.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,Ee("close"),We(),nn(a.currItem,null,!0,a.destroy))},destroy:function(){Ee("destroy"),qt&&clearTimeout(qt),e.setAttribute("aria-hidden","true"),e.className=F,I&&clearInterval(I),o.unbind(a.scrollWrap,y,a),o.unbind(window,"scroll",a),Tt(),nt(),Se=null},panTo:function(e,t,n){n||(e>ie.min.x?e=ie.min.x:e<ie.max.x&&(e=ie.max.x),t>ie.min.y?t=ie.min.y:t<ie.max.y&&(t=ie.max.y)),he.x=e,he.y=t,Pe()},handleEvent:function(e){e=e||window.event,v[e.type]&&v[e.type](e)},goTo:function(e){e=Me(e);var t=e-p;we=t,p=e,a.currItem=Qt(p),ve-=t,Le(ge.x*ve),nt(),ae=!1,a.updateCurrItem()},next:function(){a.goTo(p+1)},prev:function(){a.goTo(p-1)},updateCurrZoomItem:function(e){if(e&&Ee("beforeChange",0),D[1].el.children.length){var t=D[1].el.children[0];oe=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else oe=null;ie=a.currItem.bounds,g=x=a.currItem.initialZoomLevel,he.x=ie.center.x,he.y=ie.center.y,e&&Ee("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<l;e++)D[e].item&&(D[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==we){var t,n=Math.abs(we);if(!(e&&n<2)){a.currItem=Qt(p),De=!1,Ee("beforeChange",we),n>=l&&(f+=we+(we>0?-l:l),n=l);for(var i=0;i<n;i++)we>0?(t=D.shift(),D[l-1]=t,f++,Fe((f+2)*ge.x,t.el.style),a.setContent(t,p-n+i+1+1)):(t=D.pop(),D.unshift(t),f--,Fe(f*ge.x,t.el.style),a.setContent(t,p+n-i-1-1));if(oe&&1===Math.abs(we)){var o=Qt(T);o.initialZoomLevel!==x&&(un(o,ye),mn(o),Ze(o))}we=0,a.updateCurrZoomItem(),T=p,Ee("afterChange")}}},updateSize:function(t){if(!be&&s.modal){var n=o.getScrollY();if(_!==n&&(e.style.top=n+"px",_=n),!t&&Ce.x===window.innerWidth&&Ce.y===window.innerHeight)return;Ce.x=window.innerWidth,Ce.y=window.innerHeight,e.style.height=Ce.y+"px"}if(ye.x=a.scrollWrap.clientWidth,ye.y=a.scrollWrap.clientHeight,je(),ge.x=ye.x+Math.round(ye.x*s.spacing),ge.y=ye.y,Le(ge.x*ve),Ee("beforeResize"),void 0!==f){for(var i,r,u,c=0;c<l;c++)i=D[c],Fe((c+f)*ge.x,i.el.style),u=p+c-1,s.loop&&en()>2&&(u=Me(u)),r=Qt(u),r&&(C||r.needsUpdate||!r.bounds)?(a.cleanSlide(r),a.setContent(i,u),1===c&&(a.currItem=r,a.updateCurrZoomItem(!0)),r.needsUpdate=!1):i.index===-1&&u>=0&&a.setContent(i,u),r&&r.container&&(un(r,ye),mn(r),Ze(r));C=!1}g=x=a.currItem.initialZoomLevel,ie=a.currItem.bounds,ie&&(he.x=ie.center.x,he.y=ie.center.y,Pe(!0)),Ee("resize")},zoomTo:function(e,t,n,i,a){t&&(g=x,wt.x=Math.abs(t.x)-he.x,wt.y=Math.abs(t.y)-he.y,_e(fe,he));var r=Be(e,!1),l={};Ve("x",r,l,e),Ve("y",r,l,e);var s=x,u={x:he.x,y:he.y};Ne(l);var c=function(t){1===t?(x=e,he.x=l.x,he.y=l.y):(x=(e-s)*t+s,he.x=(l.x-u.x)*t+u.x,he.y=(l.y-u.y)*t+u.y),a&&a(t),Pe(1===t)};n?it("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},at=30,rt=10,lt={},st={},ut={},ct={},dt={},pt=[],mt={},ft=[],ht={},yt=0,vt=pe(),xt=0,gt=pe(),wt=pe(),bt=pe(),It=function(e,t){return e.x===t.x&&e.y===t.y},Ct=function(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r},Dt=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},Tt=function(){j&&(Z(j),j=null)},Mt=function(){V&&(j=P(Mt),Yt())},St=function(){return!("fit"===s.scaleMode&&x===a.currItem.initialZoomLevel)},At=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:At(e.parentNode,t))},Et={},Ot=function(e,t){return Et.prevent=!At(e.target,s.isClickableElement),Ee("preventDragEvent",e,t,Et),Et.prevent},kt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Rt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Pt=function(e,t,n){if(e-Y>50){var i=ft.length>2?ft.shift():{};i.x=t,i.y=n,ft.push(i),Y=e}},Zt=function(){var e=he.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(ye.y/2))},Ft={},Lt={},zt=[],_t=function(e){for(;zt.length>0;)zt.pop();return k?(de=0,pt.forEach(function(e){0===de?zt[0]=e:1===de&&(zt[1]=e),de++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(zt[0]=kt(e.touches[0],Ft),e.touches.length>1&&(zt[1]=kt(e.touches[1],Lt))):(Ft.x=e.pageX,Ft.y=e.pageY,Ft.id="",zt[0]=Ft),zt},Nt=function(e,t){var n,i,o,r,l=0,u=he[e]+t[e],c=t[e]>0,d=gt.x+t.x,p=gt.x-mt.x;return n=u>ie.min[e]||u<ie.max[e]?s.panEndFriction:1,u=he[e]+t[e]*n,!s.allowPanToNext&&x!==a.currItem.initialZoomLevel||(oe?"h"!==re||"x"!==e||q||(c?(u>ie.min[e]&&(n=s.panEndFriction,l=ie.min[e]-u,i=ie.min[e]-fe[e]),(i<=0||p<0)&&en()>1?(r=d,p<0&&d>mt.x&&(r=mt.x)):ie.min.x!==ie.max.x&&(o=u)):(u<ie.max[e]&&(n=s.panEndFriction,l=u-ie.max[e],i=fe[e]-ie.max[e]),(i<=0||p>0)&&en()>1?(r=d,p>0&&d<mt.x&&(r=mt.x)):ie.min.x!==ie.max.x&&(o=u))):r=d,"x"!==e)?void(ae||J||x>a.currItem.fitRatio&&(he[e]+=t[e]*n)):(void 0!==r&&(Le(r,!0),J=r!==mt.x),ie.min.x!==ie.max.x&&(void 0!==o?he.x=o:J||(he.x+=t.x*n)),void 0!==r)},Ut=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Jt)return void e.preventDefault();if(!X||"mousedown"!==e.type){if(Ot(e,!0)&&e.preventDefault(),Ee("pointerDown"),k){var t=o.arraySearch(pt,e.pointerId,"id");t<0&&(t=pt.length),pt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=_t(e),i=n.length;Q=null,nt(),V&&1!==i||(V=le=!0,o.bind(window,h,a),B=ce=se=G=J=$=K=q=!1,re=null,Ee("firstTouchStart",n),_e(fe,he),me.x=me.y=0,_e(ct,n[0]),_e(dt,ct),mt.x=ge.x*ve,ft=[{x:ct.x,y:ct.y}],Y=H=Oe(),Be(x,!0),Tt(),Mt()),!ee&&i>1&&!ae&&!J&&(g=x,q=!1,ee=K=!0,me.y=me.x=0,_e(fe,he),_e(lt,n[0]),_e(st,n[1]),Rt(lt,st,bt),wt.x=Math.abs(bt.x)-he.x,wt.y=Math.abs(bt.y)-he.y,te=ne=Dt(lt,st))}}},Ht=function(e){if(e.preventDefault(),k){var t=o.arraySearch(pt,e.pointerId,"id");if(t>-1){var n=pt[t];n.x=e.pageX,n.y=e.pageY}}if(V){var i=_t(e);if(re||$||ee)Q=i;else if(gt.x!==ge.x*ve)re="h";else{var a=Math.abs(i[0].x-ct.x)-Math.abs(i[0].y-ct.y);Math.abs(a)>=rt&&(re=a>0?"h":"v",Q=i)}}},Yt=function(){if(Q){var e=Q.length;if(0!==e)if(_e(lt,Q[0]),ut.x=lt.x-ct.x,ut.y=lt.y-ct.y,ee&&e>1){if(ct.x=lt.x,ct.y=lt.y,!ut.x&&!ut.y&&It(Q[1],st))return;_e(st,Q[1]),q||(q=!0,Ee("zoomGestureStarted"));var t=Dt(lt,st),n=Vt(t);n>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ce=!0);var i=1,o=Ge(),r=Xe();if(n<o)if(s.pinchToClose&&!ce&&g<=a.currItem.initialZoomLevel){var l=o-n,u=1-l/(o/1.2);ke(u),Ee("onPinchClose",u),se=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>r&&(i=(n-r)/(6*o),i>1&&(i=1),n=r+i*o);i<0&&(i=0),te=t,Rt(lt,st,vt),me.x+=vt.x-bt.x,me.y+=vt.y-bt.y,_e(bt,vt),he.x=ze("x",n),he.y=ze("y",n),B=n>x,x=n,Pe()}else{if(!re)return;if(le&&(le=!1,Math.abs(ut.x)>=rt&&(ut.x-=Q[0].x-dt.x),Math.abs(ut.y)>=rt&&(ut.y-=Q[0].y-dt.y)),ct.x=lt.x,ct.y=lt.y,0===ut.x&&0===ut.y)return;if("v"===re&&s.closeOnVerticalDrag&&!St()){me.y+=ut.y,he.y+=ut.y;var c=Zt();return G=!0,Ee("onVerticalDrag",c),ke(c),void Pe()}Pt(Oe(),lt.x,lt.y),$=!0,ie=a.currItem.bounds;var d=Nt("x",ut);d||(Nt("y",ut),Ne(he),Pe())}}},Wt=function(e){if(N.isOldAndroid){if(X&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(X),X=setTimeout(function(){X=0},600))}Ee("pointerUp"),Ot(e,!1)&&e.preventDefault();var t;if(k){var n=o.arraySearch(pt,e.pointerId,"id");if(n>-1)if(t=pt.splice(n,1)[0],navigator.msPointerEnabled){var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var r,l=_t(e),u=l.length;if("mouseup"===e.type&&(u=0),2===u)return Q=null,!0;1===u&&_e(dt,l[0]),0!==u||re||ae||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Ee("touchRelease",e,t));var c=-1;if(0===u&&(V=!1,o.unbind(window,h,a),Tt(),ee?c=0:xt!==-1&&(c=Oe()-xt)),xt=1===u?Oe():-1,r=c!==-1&&c<150?"zoom":"swipe",ee&&u<2&&(ee=!1,1===u&&(r="zoomPointerUp"),Ee("zoomGestureEnded")),Q=null,$||q||ae||G)if(nt(),W||(W=Bt()),W.calculateSwipeSpeed("x"),G){var d=Zt();if(d<s.verticalDragRange)a.close();else{var p=he.y,m=ue;it("verticalDrag",0,1,300,o.easing.cubic.out,function(e){he.y=(a.currItem.initialPosition.y-p)*e+p,ke((1-m)*e+m),Pe()}),Ee("onVerticalDrag",1)}}else{if((J||ae)&&0===u){var f=Xt(r,W);if(f)return;r="zoomPointerUp"}if(!ae)return"swipe"!==r?void Kt():void(!J&&x>a.currItem.fitRatio&&Gt(W))}},Bt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){ft.length>1?(e=Oe()-Y+50,t=ft[ft.length-2][i]):(e=Oe()-H,t=dt[i]),n.lastFlickOffset[i]=ct[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ie.min[e]?n.backAnimDestination[e]=ie.min[e]:he[e]<ie.max[e]&&(n.backAnimDestination[e]=ie.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,it("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){he[e]=t,Pe()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Je.zoomPan&&(Je.zoomPan.raf=P(n.panAnimLoop),n.now=Oe(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Pe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),Pe(),void et("zoomPan")}};return n},Gt=function(e){return e.calculateSwipeSpeed("y"),ie=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(tt("zoomPan"),e.lastNow=Oe(),void e.panAnimLoop())},Xt=function(e,t){var n;ae||(yt=p);var i;if("swipe"===e){var r=ct.x-dt.x,l=t.lastFlickDist.x<10;r>at&&(l||t.lastFlickOffset.x>20)?i=-1:r<-at&&(l||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(p+=i,p<0?(p=s.loop?en()-1:0,u=!0):p>=en()&&(p=s.loop?0:en()-1,u=!0),u&&!s.loop||(we+=i,ve-=i,n=!0));var c,d=ge.x*ve,m=Math.abs(d-gt.x);return n||d>gt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?m/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,yt===p&&(n=!1),ae=!0,Ee("mainScrollAnimStart"),it("mainScroll",gt.x,d,c,o.easing.cubic.out,Le,function(){nt(),ae=!1,yt=-1,(n||yt!==p)&&a.updateCurrItem(),Ee("mainScrollAnimComplete")}),n&&a.updateCurrItem(!0),n},Vt=function(e){return 1/ne*e*g},Kt=function(){var e=x,t=Ge(),n=Xe();x<t?e=t:x>n&&(e=n);var i,r=1,l=ue;return se&&!B&&!ce&&x<t?(a.close(),!0):(se&&(i=function(e){ke((r-l)*e+l)}),a.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};Te("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){M=e+t,S=e+n,A=e+i,E=o?e+o:""};k=N.pointerEvent,k&&N.touch&&(N.touch=!1),k?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):N.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),h=S+" "+A+" "+E,y=M,k&&!R&&(R=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),a.likelyTouchDevice=R,v[M]=Ut,v[S]=Ht,v[A]=Wt,E&&(v[E]=v[A]),N.touch&&(y+=" mousedown",h+=" mousemove mouseup",v.mousedown=v[M],v.mousemove=v[S],v.mouseup=v[A]),R||(s.allowPanToNext=!1)}}});var qt,$t,jt,Jt,Qt,en,tn,nn=function(t,n,i,r){qt&&clearTimeout(qt),Jt=!0,jt=!0;var l;t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=s.getThumbBoundsFn&&s.getThumbBoundsFn(p);var u=i?s.hideAnimationDuration:s.showAnimationDuration,c=function(){et("initialZoom"),i?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(ke(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),Ee("initialZoom"+(i?"OutEnd":"InEnd"))),r&&r(),Jt=!1};if(!u||!l||void 0===l.x)return Ee("initialZoom"+(i?"Out":"In")),x=t.initialZoomLevel,_e(he,t.initialPosition),Pe(),e.style.opacity=i?0:1,ke(1),void(u?setTimeout(function(){c()},u):c());var m=function(){var n=d,r=!a.currItem.src||a.currItem.loadError||s.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(x=l.w/t.w,he.x=l.x,he.y=l.y-L,a[r?"template":"bg"].style.opacity=.001,Pe()),tt("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),r&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),qt=setTimeout(function(){if(Ee("initialZoom"+(i?"Out":"In")),i){var a=l.w/t.w,s={x:he.x,y:he.y},d=x,p=ue,m=function(t){1===t?(x=a,he.x=l.x,he.y=l.y-_):(x=(a-d)*t+d,he.x=(l.x-s.x)*t+s.x,he.y=(l.y-_-s.y)*t+s.y),Pe(),r?e.style.opacity=1-t:ke(p-t*p)};n?it("initialZoom",0,1,u,o.easing.cubic.out,m,c):(m(1),qt=setTimeout(c,u+20))}else x=t.initialZoomLevel,_e(he,t.initialPosition),Pe(),ke(1),r?e.style.opacity=1:ke(1),qt=setTimeout(c,u+20)},i?25:90)};m()},on={},an=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return $t.length}},ln=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((on.x-t)/2),i.center.y=Math.round((on.y-n)/2)+e.vGap.top,i.max.x=t>on.x?Math.round(on.x-t):i.center.x,i.max.y=n>on.y?Math.round(on.y-n)+e.vGap.top:i.center.y,i.min.x=t>on.x?0:i.center.x,i.min.y=n>on.y?e.vGap.top:i.center.y},un=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),Ee("parseVerticalMargin",e)),on.x=t.x,on.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=on.x/e.w,a=on.y/e.h;e.fitRatio=o<a?o:a;var r=s.scaleMode;"orig"===r?n=1:"fit"===r&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=ln())}if(!n)return;return sn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=ln(),e.initialPosition=e.bounds.center,e.bounds},cn=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,mn(t,i,t===a.currItem&&De),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},dn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},pn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=s.errorMsg.replace("%url%",e.src),!0},mn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},fn=function(){if(an.length){for(var e,t=0;t<an.length;t++)e=an[t],e.holder.index===e.index&&cn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);an=[]}};Te("Controller",{publicMethods:{lazyLoadItem:function(e){e=Me(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||C)&&(Ee("gettingData",e,t),t.src&&dn(t))},initController:function(){o.extend(s,rn,!0),a.items=$t=n,Qt=a.getItemAt,en=s.getNumItemsFn,tn=s.loop,en()<3&&(s.loop=!1),Ae("beforeChange",function(e){var t,n=s.preload,i=null===e||e>=0,o=Math.min(n[0],en()),r=Math.min(n[1],en());for(t=1;t<=(i?r:o);t++)a.lazyLoadItem(p+t);for(t=1;t<=(i?o:r);t++)a.lazyLoadItem(p-t)}),Ae("initialLayout",function(){a.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)}),Ae("mainScrollAnimComplete",fn),Ae("initialZoomInEnd",fn),Ae("destroy",function(){for(var e,t=0;t<$t.length;t++)e=$t[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);an=null})},getItemAt:function(e){return e>=0&&void 0!==$t[e]&&$t[e]},allowProgressiveImg:function(){return s.forceProgressiveLoading||!R||s.mouseUsed||screen.width>1200},setContent:function(e,t){s.loop&&(t=Me(t));var n=a.getItemAt(e.index);n&&(n.container=null);var i,r=a.getItemAt(t);if(!r)return void(e.el.innerHTML="");Ee("gettingData",t,r),e.index=t,e.item=r;var l=r.container=o.createEl("pswp__zoom-wrap");if(!r.src&&r.html&&(r.html.tagName?l.appendChild(r.html):l.innerHTML=r.html),pn(r),un(r,ye),!r.src||r.loadError||r.loaded)r.src&&!r.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=r.src,mn(r,i),cn(t,r,l,i,!0));else{if(r.loadComplete=function(n){if(u){if(e&&e.index===t){if(pn(n,!0))return n.loadComplete=n.img=null,un(n,ye),Ze(n),void(e.index===p&&a.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):N.transform&&(ae||Jt)?an.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):cn(t,n,l,n.img,ae||Jt,!0)}n.loadComplete=null,n.img=null,Ee("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=r.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,r.msrc?"img":"");r.msrc&&(d.src=r.msrc),mn(r,d),l.appendChild(d),r.placeholder=d}r.loading||dn(r),a.allowProgressiveImg()&&(!jt&&N.transform?an.push({item:r,baseDiv:l,img:r.img,index:t,holder:e}):cn(t,r,l,r.img,!0,!0))}jt||t!==p?Ze(r):(oe=l.style,nn(r,i||r.img)),e.el.innerHTML="",e.el.appendChild(l)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,yn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Te("Tap",{publicMethods:{initTap:function(){Ae("firstTouchStart",a.onTapStart),Ae("touchRelease",a.onTapRelease),Ae("destroy",function(){yn={},hn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!$&&!K&&!Qe){var n=t;if(hn&&(clearTimeout(hn),hn=null,Ct(n,yn)))return void Ee("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);_e(yn,n),hn=setTimeout(function(){vn(e,t),hn=null},300)}}}});var xn;Te("DesktopZoom",{publicMethods:{initDesktopZoom:function(){z||(R?Ae("mouseUsed",function(){a.setupDesktopZoom()}):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){xn={};var n="wheel mousewheel DOMMouseScroll";Ae("bindEvents",function(){o.bind(e,n,a.handleMouseWheel)}),Ae("unbindEvents",function(){xn&&o.unbind(e,n,a.handleMouseWheel)}),a.mouseZoomedIn=!1;var i,r=function(){a.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),x<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),l()},l=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Ae("resize",r),Ae("afterChange",r),Ae("pointerDown",function(){a.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Ae("pointerUp",l),t||r()},handleMouseWheel:function(e){if(x<=a.currItem.fitRatio)return s.modal&&(!s.closeOnScroll||Qe||V?e.preventDefault():O&&Math.abs(e.deltaY)>2&&(d=!0,a.close())),!0;if(e.stopPropagation(),xn.x=0,"deltaX"in e)1===e.deltaMode?(xn.x=18*e.deltaX,xn.y=18*e.deltaY):(xn.x=e.deltaX,xn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(xn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?xn.y=-.16*e.wheelDeltaY:xn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;xn.y=e.detail}Be(x,!0);var t=he.x-xn.x,n=he.y-xn.y;(s.modal||t<=ie.min.x&&t>=ie.max.x&&n<=ie.min.y&&n>=ie.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ye.x/2+xe.x,y:ye.y/2+xe.y};var n=s.getDoubleTapZoom(!0,a.currItem),i=x===n;a.mouseZoomedIn=!i,a.zoomTo(i?a.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var gn,wn,bn,In,Cn,Dn,Tn,Mn,Sn,An,En,On,kn={history:!0,galleryUID:1},Rn=function(){return En.hash.substring(1)},Pn=function(){gn&&clearTimeout(gn),bn&&clearTimeout(bn)},Zn=function(){var e=Rn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(s.galleryPIDs){var a=t.pid;for(t.pid=0,n=0;n<$t.length;n++)if($t[n].pid===a){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Fn=function(){if(bn&&clearTimeout(bn),Qe||V)return void(bn=setTimeout(Fn,500));In?clearTimeout(wn):In=!0;var e=p+1,t=Qt(p);t.hasOwnProperty("pid")&&(e=t.pid);var n=Tn+"&gid="+s.galleryUID+"&pid="+e;Mn||En.hash.indexOf(n)===-1&&(An=!0);var i=En.href.split("#")[0]+"#"+n;On?"#"+n!==window.location.hash&&history[Mn?"replaceState":"pushState"]("",document.title,i):Mn?En.replace(i):En.hash=n,Mn=!0,wn=setTimeout(function(){In=!1},60)};Te("History",{publicMethods:{initHistory:function(){if(o.extend(s,kn,!0),s.history){En=window.location,An=!1,Sn=!1,Mn=!1,Tn=Rn(),On="pushState"in history,Tn.indexOf("gid=")>-1&&(Tn=Tn.split("&gid=")[0],Tn=Tn.split("?gid=")[0]),Ae("afterChange",a.updateURL),Ae("unbindEvents",function(){o.unbind(window,"hashchange",a.onHashChange)});var e=function(){Dn=!0,Sn||(An?history.back():Tn?En.hash=Tn:On?history.pushState("",document.title,En.pathname+En.search):En.hash=""),Pn()};Ae("unbindEvents",function(){d&&e()}),Ae("destroy",function(){Dn||e()}),Ae("firstUpdate",function(){p=Zn().pid});var t=Tn.indexOf("pid=");t>-1&&(Tn=Tn.substring(0,t),"&"===Tn.slice(-1)&&(Tn=Tn.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",a.onHashChange)},40)}},onHashChange:function(){return Rn()===Tn?(Sn=!0,void a.close()):void(In||(Cn=!0,a.goTo(Zn().pid),Cn=!1))},updateURL:function(){Pn(),Cn||(Mn?gn=setTimeout(Fn,800):Fn())}}}),o.extend(a,ot)};return e});
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,o,l,r,i,s,a,u,c,p,d,m,f,h,w,v,g,b,_,C=this,T=!1,I=!0,E=!0,F={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},x=function(e){if(v)return!0;e=e||window.event,w.timeToIdle&&w.mouseUsed&&!c&&D();for(var n,o,l=e.target||e.srcElement,r=l.getAttribute("class")||"",i=0;i<N.length;i++)n=N[i],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),o=!0);if(o){e.stopPropagation&&e.stopPropagation(),v=!0;var s=t.features.isOldAndroid?600:30;g=setTimeout(function(){v=!1},s)}},S=function(){return!e.likelyTouchDevice||w.mouseUsed||screen.width>w.fitControlsWidth},k=function(e,n,o){t[(o?"add":"remove")+"Class"](e,"pswp__"+n)},K=function(){var e=1===w.getNumItemsFn();e!==h&&(k(o,"ui--one-slide",e),h=e)},L=function(){k(a,"share-modal--hidden",E)},O=function(){return E=!E,E?(t.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){E&&L()},300)):(L(),setTimeout(function(){E||t.addClass(a,"pswp__share-modal--fade-in")},30)),E||y(),!1},R=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),E||O(),1))},y=function(){for(var e,t,n,o,l,r="",i=0;i<w.shareButtons.length;i++)e=w.shareButtons[i],n=w.getImageURLForShare(e),o=w.getPageURLForShare(e),l=w.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(l)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",w.parseShareButtonOut&&(r=w.parseShareButtonOut(e,r));a.children[0].innerHTML=r,a.children[0].onclick=R},z=function(e){for(var n=0;n<w.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+w.closeElClasses[n]))return!0},M=0,D=function(){clearTimeout(_),M=0,c&&C.setIdle(!1)},A=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(_),_=setTimeout(function(){C.setIdle(!0)},w.timeToIdleOutside))},P=function(){w.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=C.getFullscreenAPI()),n?(t.bind(document,n.eventK,C.updateFullscreen),C.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},U=function(){w.preloaderEl&&(Z(!0),p("beforeChange",function(){clearTimeout(f),f=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&Z(!1):Z(!0)},w.loadingIndicatorDelay)}),p("imageLoadComplete",function(t,n){e.currItem===n&&Z(!0)}))},Z=function(e){m!==e&&(k(d,"preloader--active",!e),m=e)},q=function(e){var n=e.vGap;if(S()){var i=w.barsSize;if(w.captionEl&&"auto"===i.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),o.insertBefore(r,l),t.addClass(o,"pswp__ui--fit")),w.addCaptionHTMLFn(e,r,!0)){var s=r.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=i.top;else n.bottom="auto"===i.bottom?0:i.bottom;n.top=i.top}else n.top=n.bottom=0},B=function(){w.timeToIdle&&p("mouseUsed",function(){t.bind(document,"mousemove",D),t.bind(document,"mouseout",A),b=setInterval(function(){M++,2===M&&C.setIdle(!0)},w.timeToIdle/2)})},H=function(){p("onVerticalDrag",function(e){I&&e<.95?C.hideControls():!I&&e>=.95&&C.showControls()});var e;p("onPinchClose",function(t){I&&t<.9?(C.hideControls(),e=!0):e&&!I&&t>.9&&C.showControls()}),p("zoomGestureEnded",function(){e=!1,e&&!I&&C.showControls()})},N=[{name:"caption",option:"captionEl",onInit:function(e){l=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){i=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){d=e}}],W=function(){var e,n,l,r=function(o){if(o)for(var r=o.length,i=0;i<r;i++){e=o[i],n=e.className;for(var s=0;s<N.length;s++)l=N[s],n.indexOf("pswp__"+l.name)>-1&&(w[l.option]?(t.removeClass(e,"pswp__element--disabled"),l.onInit&&l.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(o.children);var i=t.getChildByClass(o,"pswp__top-bar");i&&r(i.children)};C.init=function(){t.extend(e.options,F,!0),w=e.options,o=t.getChildByClass(e.scrollWrap,"pswp__ui"),p=e.listen,H(),p("beforeChange",C.update),p("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(w.getDoubleTapZoom(!1,e.currItem),t,333)}),p("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(o.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),p("bindEvents",function(){t.bind(o,"pswpTap click",x),t.bind(e.scrollWrap,"pswpTap",C.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",C.onMouseOver)}),p("unbindEvents",function(){E||O(),b&&clearInterval(b),t.unbind(document,"mouseout",A),t.unbind(document,"mousemove",D),t.unbind(o,"pswpTap click",x),t.unbind(e.scrollWrap,"pswpTap",C.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",C.onMouseOver),n&&(t.unbind(document,n.eventK,C.updateFullscreen),n.isFullscreen()&&(w.hideAnimationDuration=0,n.exit()),n=null)}),p("destroy",function(){w.captionEl&&(r&&o.removeChild(r),t.removeClass(l,"pswp__caption--empty")),a&&(a.children[0].onclick=null),t.removeClass(o,"pswp__ui--over-close"),t.addClass(o,"pswp__ui--hidden"),C.setIdle(!1)}),w.showAnimationDuration||t.removeClass(o,"pswp__ui--hidden"),p("initialZoomIn",function(){w.showAnimationDuration&&t.removeClass(o,"pswp__ui--hidden")}),p("initialZoomOut",function(){t.addClass(o,"pswp__ui--hidden")}),p("parseVerticalMargin",q),W(),w.shareEl&&s&&a&&(E=!0),K(),B(),P(),U()},C.setIdle=function(e){c=e,k(o,"ui--idle",e)},C.update=function(){I&&e.currItem?(C.updateIndexIndicator(),w.captionEl&&(w.addCaptionHTMLFn(e.currItem,l),k(l,"caption--empty",!e.currItem.title)),T=!0):T=!1,E||O(),K()},C.updateFullscreen=function(o){o&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},C.updateIndexIndicator=function(){w.counterEl&&(i.innerHTML=e.getCurrentIndex()+1+w.indexIndicatorSep+w.getNumItemsFn())},C.onGlobalTap=function(n){n=n||window.event;var o=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(z(o))return void e.close();t.hasClass(o,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?w.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(w.tapToToggleControls&&(I?C.hideControls():C.showControls()),w.tapToClose&&(t.hasClass(o,"pswp__img")||z(o)))return void e.close()},C.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;k(o,"ui--over-close",z(t))},C.hideControls=function(){t.addClass(o,"pswp__ui--hidden"),I=!1},C.showControls=function(){I=!0,T||C.update(),t.removeClass(o,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var t,n=document.documentElement,o="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=w.closeOnScroll,w.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return w.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});
/*jquery.mb.YTPlayer 02-02-2017
 _ jquery.mb.components 
 _ email: matteo@open-lab.com 
 _ Copyright (c) 2001-2017. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */
function onYouTubeIframeAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+r:e}function setFilter(e,r,t){var a=uncamel(r),o=jQuery.browser.mozilla?"":jQuery.CSS.sfx;e[o+"filter"]=e[o+"filter"]||"",t=setUnit(t>jQuery.CSS.filters[r].max?jQuery.CSS.filters[r].max:t,jQuery.CSS.filters[r].unit),e[o+"filter"]+=a+"("+t+") ",delete e[r]}var ytp=ytp||{},getYTPVideoID=function(e){var r,t;return e.indexOf("youtu.be")>0?(r=e.substr(e.lastIndexOf("/")+1,e.length),t=r.indexOf("?list=")>0?r.substr(r.lastIndexOf("="),r.length):null,r=t?r.substr(0,r.lastIndexOf("?")):r):e.indexOf("http")>-1?(r=e.match(/[\\?&]v=([^&#]*)/)[1],t=e.indexOf("list=")>0?e.match(/[\\?&]list=([^&#]*)/)[1]:null):(r=e.length>15?null:e,t=r?null:e),{videoID:r,playlistID:t}};!function(jQuery,ytp){jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"3.0.11",build:"6092",author:"Matteo Bicocchi (pupunzi)",apiKey:"",defaults:{containment:"body",ratio:"auto",videoURL:null,playlistURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:50,addRaster:!1,mask:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnBlur:!0,realfullscreen:!0,mobileFallbackImage:null,gaTrack:!0,optimizeDisplay:!0,anchor:"center,center",onReady:function(e){},onError:function(e,r){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},controlBar:null,loading:null,locationProtocol:"https:",filters:{grayscale:{value:0,unit:"%"},hue_rotate:{value:0,unit:"deg"},invert:{value:0,unit:"%"},opacity:{value:0,unit:"%"},saturate:{value:0,unit:"%"},sepia:{value:0,unit:"%"},brightness:{value:0,unit:"%"},contrast:{value:0,unit:"%"},blur:{value:0,unit:"px"}},buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={},YTPlayer.state={},YTPlayer.filters=jQuery.mbYTPlayer.filters,YTPlayer.filtersEnabled=!0,YTPlayer.id=YTPlayer.id||"YTP_"+(new Date).getTime(),$YTPlayer.addClass("mb_YTPlayer");var property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property");"undefined"!=typeof property&&"undefined"!=typeof property.vol&&(property.vol=0===property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),YTPlayer.hasChanged||(YTPlayer.defaultOpt={},jQuery.extend(YTPlayer.defaultOpt,jQuery.mbYTPlayer.defaults,options)),"true"==YTPlayer.opt.loop&&(YTPlayer.opt.loop=9999),YTPlayer.isRetina=window.retina||window.devicePixelRatio>1;var isIframe=function(){var e=!1;try{self.location.href!=top.location.href&&(e=!0)}catch(r){e=!0}return e};YTPlayer.canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe()),YTPlayer.canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","ytp_"+(new Date).getTime());var playerID="mbYTP_"+YTPlayer.id;YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0,YTPlayer.videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).videoID,YTPlayer.playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={modestbranding:1,autoplay:0,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations};if(document.createElement("video").canPlayType&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1),YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.defaultOpt.containment=YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground=YTPlayer.opt.containment.is("body"),!YTPlayer.isBackground||!ytp.backgroundIsInited){var isPlayer=YTPlayer.opt.containment.is(jQuery(this));YTPlayer.canPlayOnMobile=isPlayer&&0===jQuery(this).children().length,YTPlayer.isPlayer=!1,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide();var overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");YTPlayer.isPlayer&&overlay.on("click",function(){$YTPlayer.YTPTogglePlay()});var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0});var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox");if(playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({position:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.addClass("visible")}).on("mouseleave",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100);else{jQuery("#YTAPI").remove();var tag=jQuery("<script></script>").attr({src:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/iframe_api?v="+jQuery.mbYTPlayer.version,id:"YTAPI"});jQuery("head").prepend(tag)}if(jQuery.browser.mobile&&!YTPlayer.canPlayOnMobile)return YTPlayer.opt.mobileFallbackImage&&wrapper.css({backgroundImage:"url("+YTPlayer.opt.mobileFallbackImage+")",backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",opacity:1}),$YTPlayer.remove(),void jQuery(document).trigger("YTPUnavailable");jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay="undefined"==typeof YTPlayer.opt.autoPlay?!!YTPlayer.isBackground:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromAPI(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){if(!YTPlayer.isInit){if(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile){if(YTPlayer.opt.containment.outerWidth()>jQuery(window).width()){YTPlayer.opt.containment.css({maxWidth:"100%"});var h=.563*YTPlayer.opt.containment.outerWidth();YTPlayer.opt.containment.css({maxHeight:h})}return void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),width:"100%",height:h,playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1})}}})}new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,YTPlayer.isReady||(YTPlayer.isReady=!(YTPlayer.isPlayer&&!YTPlayer.opt.autoPlay),YTPlayer.playerEl=YTPlayer.player.getIframe(),jQuery(YTPlayer.playerEl).unselectable(),$YTPlayer.optimizeDisplay(),jQuery(window).off("resize.YTP_"+YTPlayer.id).on("resize.YTP_"+YTPlayer.id,function(){$YTPlayer.optimizeDisplay()}),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState();if(YTPlayer.preventTrigger)return void(YTPlayer.preventTrigger=!1);YTPlayer.state=state;var eventType;switch(state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPPlay",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 5:eventType="YTPCued"}var YTPEvent=jQuery.Event(eventType);YTPEvent.time=YTPlayer.currentTime,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPEvent)}},onPlaybackQualityChange:function(e){var r=e.target.getPlaybackQuality(),t=jQuery.Event("YTPQualityChange");t.quality=r,jQuery(YTPlayer).trigger(t)},onError:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList&&jQuery(YTPlayer).playNext()),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}})}}))}),$YTPlayer.off("YTPTime.mask"),jQuery.mbYTPlayer.applyMask(YTPlayer)}})},getDataFromAPI:function(e){if(e.videoData=jQuery.mbStorage.get("YTPlayer_data_"+e.videoID),jQuery(e).off("YTPData.YTPlayer").on("YTPData.YTPlayer",function(){if(e.hasData&&e.isPlayer&&!e.opt.autoPlay){var r=e.videoData.thumb_max||e.videoData.thumb_high||e.videoData.thumb_medium;e.opt.containment.css({background:"rgba(0,0,0,0.5) url("+r+") center center",backgroundSize:"cover"}),e.opt.backgroundUrl=r}}),e.videoData)setTimeout(function(){e.opt.ratio="auto"==e.opt.ratio?"16/9":e.opt.ratio,e.dataReceived=!0,jQuery(e).trigger("YTPChanged");var r=jQuery.Event("YTPData");r.prop={};for(var t in e.videoData)r.prop[t]=e.videoData[t];jQuery(e).trigger(r)},500),e.hasData=!0;else if(jQuery.mbYTPlayer.apiKey)jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//www.googleapis.com/youtube/v3/videos?id="+e.videoID+"&key="+jQuery.mbYTPlayer.apiKey+"&part=snippet",function(r){function t(r){e.videoData={},e.videoData.id=e.videoID,e.videoData.channelTitle=r.channelTitle,e.videoData.title=r.title,e.videoData.description=r.description.length<400?r.description:r.description.substring(0,400)+" ...",e.videoData.aspectratio="auto"==e.opt.ratio?"16/9":e.opt.ratio,e.opt.ratio=e.videoData.aspectratio,e.videoData.thumb_max=r.thumbnails.maxres?r.thumbnails.maxres.url:null,e.videoData.thumb_high=r.thumbnails.high?r.thumbnails.high.url:null,e.videoData.thumb_medium=r.thumbnails.medium?r.thumbnails.medium.url:null,jQuery.mbStorage.set("YTPlayer_data_"+e.videoID,e.videoData)}e.dataReceived=!0,jQuery(e).trigger("YTPChanged"),t(r.items[0].snippet),e.hasData=!0;var a=jQuery.Event("YTPData");a.prop={};for(var o in e.videoData)a.prop[o]=e.videoData[o];jQuery(e).trigger(a)});else{if(setTimeout(function(){jQuery(e).trigger("YTPChanged")},50),e.isPlayer&&!e.opt.autoPlay){var r=jQuery.mbYTPlayer.locationProtocol+"//i.ytimg.com/vi/"+e.videoID+"/hqdefault.jpg";e.opt.containment.css({background:"rgba(0,0,0,0.5) url("+r+") center center",backgroundSize:"cover"}),e.opt.backgroundUrl=r}e.videoData=null,e.opt.ratio="auto"==e.opt.ratio?"16/9":e.opt.ratio}!e.isPlayer||e.opt.autoPlay||jQuery.browser.mobile||(e.loading=jQuery("<div/>").addClass("loading").html("Loading").hide(),jQuery(e).append(e.loading),e.loading.fadeIn())},removeStoredData:function(){jQuery.mbStorage.remove()},getVideoData:function(){var e=this.get(0);return e.videoData},getVideoID:function(){var e=this.get(0);return e.videoID||!1},setVideoQuality:function(e){var r=this.get(0);r.player.setPlaybackQuality(e)},playlist:function(e,r,t,a){var o=this,i=o.get(0);return i.isPlayList=!0,r&&(e=jQuery.shuffle(e)),i.videoID||(i.videos=e,i.videoCounter=0,i.videoLength=e.length,jQuery(i).data("property",e[0]),jQuery(i).mb_YTPlayer()),"function"==typeof t&&jQuery(i).one("YTPChanged",function(){t(i)}),jQuery(i).on("YTPEnd",function(){a="undefined"==typeof a||a,jQuery(i).playNext(a)}),this},playNext:function(e){var r=this.get(0);return r.checkForStartAt&&(clearTimeout(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter++,r.videoCounter>=r.videoLength&&e&&(r.videoCounter=0),r.videoCounter<r.videoLength?jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]):r.videoCounter--,this},playPrev:function(){var e=this.get(0);return e.checkForStartAt&&(clearInterval(e.checkForStartAt),clearInterval(e.getState)),e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e).YTPChangeMovie(e.videos[e.videoCounter]),this},playIndex:function(e){var r=this.get(0);return e-=1,r.checkForStartAt&&(clearInterval(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter=e,r.videoCounter>=r.videoLength-1&&(r.videoCounter=r.videoLength-1),jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]),this},changeMovie:function(e){var r=this,t=r.get(0);t.opt.startAt=0,t.opt.stopAt=0,t.opt.mask=!1,t.opt.mute=!0,t.hasData=!1,t.hasChanged=!0,t.player.loopTime=void 0,e&&jQuery.extend(t.opt,e),t.videoID=getYTPVideoID(t.opt.videoURL).videoID,"true"==t.opt.loop&&(t.opt.loop=9999),jQuery(t.playerEl).CSSAnimate({opacity:0},200,function(){var e=jQuery.Event("YTPChangeMovie");e.time=t.currentTime,e.videoId=t.videoID,jQuery(t).trigger(e),jQuery(t).YTPGetPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+t.videoID),1,t.opt.quality),jQuery(t).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(t),jQuery.mbYTPlayer.getDataFromAPI(t)}),jQuery.mbYTPlayer.applyMask(t)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);ytp.YTAPIReady=!0,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null,e.isReady=!1;var r=e.wrapper;return r.remove(),jQuery("#controlBar_"+e.id).remove(),clearInterval(e.checkForStartAt),clearInterval(e.getState),this},fullscreen:function(real){function hideMouse(){YTPlayer.overlay.css({cursor:"none"})}function RunPrefixMethod(e,r){for(var t,a,o=["webkit","moz","ms","o",""],i=0;i<o.length&&!e[t];){if(t=r,""==o[i]&&(t=t.substr(0,1).toLowerCase()+t.substr(1)),t=o[i]+t,a=typeof e[t],"undefined"!=a)return o=[o[i]],"function"==a?e[t]():e[t];i++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0);"undefined"==typeof real&&(real=YTPlayer.opt.realfullscreen),real=eval(real);var controls=jQuery("#controlBar_"+YTPlayer.id),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper;if(real){var fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){var e=RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen");e?(jQuery(YTPlayer).YTPSetVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).YTPSetVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("YTPFullscreen"),videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})}return YTPlayer.isAlone?(jQuery(document).off("mousemove.YTPlayer"),clearTimeout(YTPlayer.hideCursor),YTPlayer.overlay.css({cursor:"auto"}),real?cancelFullscreen():(videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(jQuery(document).on("mousemove.YTPlayer",function(e){YTPlayer.overlay.css({cursor:"auto"}),clearTimeout(YTPlayer.hideCursor),jQuery(e.target).parents().is(".mb_YTPBar")||(YTPlayer.hideCursor=setTimeout(hideMouse,3e3))}),hideMouse(),real?(videoWrapper.css({opacity:0}),videoWrapper.addClass("YTPFullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({opacity:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0),this},toggleLoops:function(){var e=this.get(0),r=e.opt;return 1==r.loop?r.loop=0:(r.startAt?e.player.seekTo(r.startAt):e.player.playVideo(),r.loop=1),this},play:function(){var e=this.get(0);if(!e.isReady)return this;e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},2e3),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPPlaypause");return t.html(jQuery.mbYTPlayer.controls.pause),e.state=1,jQuery(e).css("background-image","none"),this},togglePlay:function(e){var r=this.get(0);return 1==r.state?this.YTPPause():this.YTPPlay(),"function"==typeof e&&e(r.state),this},stop:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPPlaypause");return t.html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo(),this},pause:function(){var e=this.get(0);return e.player.pauseVideo(),e.state=2,this},seekTo:function(e){var r=this.get(0);return r.player.seekTo(e,!0),this},setVolume:function(e){var r=this.get(0);return e||r.opt.vol||0!=r.player.getVolume()?!e&&r.player.getVolume()>0||e&&r.opt.vol==e?r.isMute?jQuery(r).YTPUnmute():jQuery(r).YTPMute():(r.opt.vol=e,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(e)):jQuery(r).YTPUnmute(),this},toggleVolume:function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).YTPUnmute(),!0):(jQuery(e).YTPMute(),!1)},mute:function(){var e=this.get(0);if(!e.isMute){e.player.mute(),e.isMute=!0,e.player.setVolume(0),e.volumeBar&&e.volumeBar.length&&e.volumeBar.width()>10&&e.volumeBar.updateSliderVal(0);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPMuteUnmute");t.html(jQuery.mbYTPlayer.controls.unmute),jQuery(e).addClass("isMuted"),e.volumeBar&&e.volumeBar.length&&e.volumeBar.addClass("muted");var a=jQuery.Event("YTPMuted");return a.time=e.currentTime,e.canTrigger&&jQuery(e).trigger(a),this}},unmute:function(){var e=this.get(0);if(e.isMute){e.player.unMute(),e.isMute=!1,e.player.setVolume(e.opt.vol),e.volumeBar&&e.volumeBar.length&&e.volumeBar.updateSliderVal(e.opt.vol>10?e.opt.vol:10);var r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPMuteUnmute");t.html(jQuery.mbYTPlayer.controls.mute),jQuery(e).removeClass("isMuted"),e.volumeBar&&e.volumeBar.length&&e.volumeBar.removeClass("muted");var a=jQuery.Event("YTPUnmuted");return a.time=e.currentTime,e.canTrigger&&jQuery(e).trigger(a),this}},applyFilter:function(e,r){return this.each(function(){var t=this;t.filters[e].value=r,t.filtersEnabled&&jQuery(t).YTPEnableFilters()})},applyFilters:function(e){return this.each(function(){var r=this;if(!r.isReady)return void jQuery(r).on("YTPReady",function(){jQuery(r).YTPApplyFilters(e)});for(var t in e)jQuery(r).YTPApplyFilter(t,e[t]);jQuery(r).trigger("YTPFiltersApplied")})},toggleFilter:function(e,r){return this.each(function(){var t=this;t.filters[e].value?t.filters[e].value=0:t.filters[e].value=r,t.filtersEnabled&&jQuery(this).YTPEnableFilters()})},toggleFilters:function(e){return this.each(function(){var r=this;r.filtersEnabled?(jQuery(r).trigger("YTPDisableFilters"),jQuery(r).YTPDisableFilters()):(jQuery(r).YTPEnableFilters(),jQuery(r).trigger("YTPEnableFilters")),"function"==typeof e&&e(r.filtersEnabled)})},disableFilters:function(){return this.each(function(){var e=this,r=jQuery(e.playerEl);r.css("-webkit-filter",""),r.css("filter",""),e.filtersEnabled=!1})},enableFilters:function(){return this.each(function(){var e=this,r=jQuery(e.playerEl),t="";for(var a in e.filters)e.filters[a].value&&(t+=a.replace("_","-")+"("+e.filters[a].value+e.filters[a].unit+") ");r.css("-webkit-filter",t),r.css("filter",t),e.filtersEnabled=!0})},removeFilter:function(e,r){return this.each(function(){var t=this;if("function"==typeof e&&(r=e,e=null),e)jQuery(this).YTPApplyFilter(e,0),"function"==typeof r&&r(e);else for(var a in t.filters)jQuery(this).YTPApplyFilter(a,0),"function"==typeof r&&r(a)})},getFilters:function(){var e=this.get(0);return e.filters},addMask:function(e){var r=this.get(0),t=r.overlay;e||(e=r.actualMask);var a=jQuery("<img/>").attr("src",e).on("load",function(){t.CSSAnimate({opacity:0},500,function(){r.hasMask=!0,a.remove(),t.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"}),t.CSSAnimate({opacity:1},500)})});return this},removeMask:function(){var e=this.get(0),r=e.overlay;return r.CSSAnimate({opacity:0},500,function(){e.hasMask=!1,r.css({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""}),r.CSSAnimate({opacity:1},500)}),this},applyMask:function(e){var r=jQuery(e);if(r.off("YTPTime.mask"),e.opt.mask)if("string"==typeof e.opt.mask)r.YTPAddMask(e.opt.mask),e.actualMask=e.opt.mask;else if("object"==typeof e.opt.mask){for(var t in e.opt.mask)e.opt.mask[t]&&jQuery("<img/>").attr("src",e.opt.mask[t]);e.opt.mask[0]&&r.YTPAddMask(e.opt.mask[0]),r.on("YTPTime.mask",function(t){for(var a in e.opt.mask)t.time==a&&(e.opt.mask[a]?(r.YTPAddMask(e.opt.mask[a]),e.actualMask=e.opt.mask[a]):r.YTPRemoveMask())})}},toggleMask:function(){var e=this.get(0),r=$(e);return e.hasMask?r.YTPRemoveMask():r.YTPAddMask(),this},manageProgress:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPProgress"),a=r.find(".mb_YTPLoaded"),o=r.find(".mb_YTPseekbar"),i=t.outerWidth(),n=Math.floor(e.player.getCurrentTime()),l=Math.floor(e.player.getDuration()),s=n*i/l,u=0,y=100*e.player.getVideoLoadedFraction();return a.css({left:u,width:y+"%"}),o.css({left:0,width:s}),{totalTime:l,currentTime:n}},buildControls:function(YTPlayer){var data=YTPlayer.opt;if(data.showYTLogo=data.showYTLogo||data.printUrl,!jQuery("#controlBar_"+YTPlayer.id).length){YTPlayer.controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({whiteSpace:"noWrap",position:YTPlayer.isBackground?"fixed":"absolute",zIndex:YTPlayer.isBackground?1e4:1e3}).hide();var buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).YTPPause():jQuery(YTPlayer).YTPPlay()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).YTPUnmute():jQuery(YTPlayer).YTPMute()}),volumeBar=jQuery("<div/>").addClass("mb_YTPVolumeBar").css({display:"inline-block"});YTPlayer.volumeBar=volumeBar;var idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL?data.videoURL:"";vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL);var movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).YTPFullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({width:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0});var r=Math.floor(YTPlayer.player.getDuration());YTPlayer["goto"]=timeBar.outerWidth()*r/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer["goto"]),!0),YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute");progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(volumeBar).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),YTPlayer.controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(YTPlayer.controlBar):(YTPlayer.controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(YTPlayer.controlBar)),volumeBar.simpleSlider({initialval:YTPlayer.opt.vol,scale:100,orientation:"h",callback:function(e){0==e.value?jQuery(YTPlayer).YTPMute():jQuery(YTPlayer).YTPUnmute(),YTPlayer.player.setVolume(e.value),YTPlayer.isMute||(YTPlayer.opt.vol=e.value)}})}},checkForState:function(YTPlayer){var interval=YTPlayer.opt.showControls?100:400;return clearInterval(YTPlayer.getState),jQuery.contains(document,YTPlayer)?(jQuery.mbYTPlayer.checkForStart(YTPlayer),void(YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).YTPManageProgress(),$YTPlayer=jQuery(YTPlayer),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0;if(stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPlayer.currentTime!=prog.currentTime){var YTPEvent=jQuery.Event("YTPTime");YTPEvent.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(YTPEvent)}if(YTPlayer.currentTime=prog.currentTime,YTPlayer.totalTime=YTPlayer.player.getDuration(),0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),YTPlayer.opt.showControls&&(prog.totalTime?YTPlayer.controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):YTPlayer.controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.YTPPlay()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.YTPPause())),YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()<=400&&!YTPlayer.isCompact?(YTPlayer.controlBar.addClass("compact"),YTPlayer.isCompact=!0,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)):YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()>400&&YTPlayer.isCompact&&(YTPlayer.controlBar.removeClass("compact"),YTPlayer.isCompact=!1,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-1.5)<YTPlayer.player.getCurrentTime()||stopAt>0&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)){if(YTPlayer.isEnded)return;if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},1e3),YTPlayer.isPlayList){if(!data.loop||data.loop>0&&YTPlayer.player.loopTime===data.loop-1){YTPlayer.player.loopTime=void 0,clearInterval(YTPlayer.getState);var YTPEnd=jQuery.Event("YTPEnd");return YTPEnd.time=YTPlayer.currentTime,void jQuery(YTPlayer).trigger(YTPEnd)}}else if(!data.loop||data.loop>0&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),void YTPlayer.wrapper.CSSAnimate({opacity:0},500,function(){YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);var e=jQuery.Event("YTPEnd");e.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),YTPlayer.isBackground||YTPlayer.opt.containment.css({background:"rgba(0,0,0,0.5) url("+YTPlayer.opt.backgroundUrl+") center center",backgroundSize:"cover"})});YTPlayer.player.loopTime=YTPlayer.player.loopTime?++YTPlayer.player.loopTime:1,startAt=startAt||1,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),YTPlayer.player.seekTo(startAt,!0),$YTPlayer.YTPPlay()}},interval))):(jQuery(YTPlayer).YTPPlayerDestroy(),clearInterval(YTPlayer.getState),void clearInterval(YTPlayer.checkForStartAt))},getTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.currentTime)},getTotalTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.totalTime)},checkForStart:function(e){var r=jQuery(e);if(!jQuery.contains(document,e))return void jQuery(e).YTPPlayerDestroy();if(e.preventTrigger=!0,e.state=2,jQuery(e).YTPPause(),jQuery(e).muteYTPVolume(),jQuery("#controlBar_"+e.id).remove(),e.controlBar=!1,e.opt.showControls&&jQuery.mbYTPlayer.buildControls(e),e.opt.addRaster){var t="dot"==e.opt.addRaster?"raster-dot":"raster";e.overlay.addClass(e.isRetina?t+" retina":t)}else e.overlay.removeClass(function(e,r){var t=r.split(" "),a=[];return jQuery.each(t,function(e,r){/raster.*/.test(r)&&a.push(r)}),a.push("retina"),a.join(" ")});var a=e.opt.startAt?e.opt.startAt:1;e.player.playVideo(),e.player.seekTo(a,!0),e.checkForStartAt=setInterval(function(){jQuery(e).YTPMute();var t=e.player.getVideoLoadedFraction()>=a/e.player.getDuration();if(e.player.getDuration()>0&&e.player.getCurrentTime()>=a&&t){clearInterval(e.checkForStartAt),"function"==typeof e.opt.onReady&&e.opt.onReady(e),e.isReady=!0;var o=jQuery.Event("YTPReady");if(o.time=e.currentTime,jQuery(e).trigger(o),e.preventTrigger=!0,e.state=2,jQuery(e).YTPPause(),e.opt.mute||jQuery(e).YTPUnmute(),e.canTrigger=!0,e.opt.autoPlay){var i=jQuery.Event("YTPStart");i.time=e.currentTime,jQuery(e).trigger(i),r.css("background-image","none"),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3),r.YTPPlay(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},1e3),jQuery.browser.safari&&(e.safariPlay=setInterval(function(){1!=e.state?r.YTPPlay():clearInterval(e.safariPlay)},10)),r.on("YTPReady",function(){r.YTPPlay()})}else e.player.pauseVideo(),e.isPlayer||(jQuery(e.playerEl).CSSAnimate({opacity:1},500),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},500)),e.controlBar.length&&e.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);e.isPlayer&&!e.opt.autoPlay&&e.loading&&e.loading.length&&(e.loading.html("Ready"),setTimeout(function(){e.loading.fadeOut()},100)),e.controlBar&&e.controlBar.length&&e.controlBar.slideDown(1e3)}else jQuery.browser.safari&&(e.player.playVideo(),a>=0&&e.player.seekTo(a,!0))},1)},setAnchor:function(e){var r=this;r.optimizeDisplay(e)},getAnchor:function(){var e=this.get(0);return e.opt.anchor},formatTime:function(e){var r=Math.floor(e/60),t=Math.floor(e-60*r);return(9>=r?"0"+r:r)+" : "+(9>=t?"0"+t:t)}},jQuery.fn.optimizeDisplay=function(e){var r=this.get(0),t=jQuery(r.playerEl),a={};r.opt.anchor=e||r.opt.anchor,r.opt.anchor="undefined "!=typeof r.opt.anchor?r.opt.anchor:"center,center";var o=r.opt.anchor.split(",");if(r.opt.optimizeDisplay){var i=r.isPlayer?0:80,n={},l=r.wrapper;n.width=l.outerWidth(),n.height=l.outerHeight()+i,a.width=n.width,a.height="16/9"==r.opt.ratio?Math.ceil(a.width*(9/16)):Math.ceil(.75*a.width),a.marginTop=-((a.height-n.height)/2),a.marginLeft=0;var s=a.height<n.height;s&&(a.height=n.height,a.width="16/9"==r.opt.ratio?Math.floor(a.height*(16/9)):Math.floor(a.height*(4/3)),a.marginTop=0,a.marginLeft=-((a.width-n.width)/2));for(var u in o)if(o.hasOwnProperty(u)){var y=o[u].replace(/ /g,"");switch(y){case"top":a.marginTop=s?-((a.height-n.height)/2):0;
break;case"bottom":a.marginTop=s?0:-(a.height-n.height);break;case"left":a.marginLeft=0;break;case"right":a.marginLeft=s?-(a.width-n.width):0;break;default:a.width>n.width&&(a.marginLeft=-((a.width-n.width)/2))}}}else a.width="100%",a.height="100%",a.marginTop=0,a.marginLeft=0;t.css({width:a.width,height:a.height,marginTop:a.marginTop,marginLeft:a.marginLeft,maxWidth:"initial"})},jQuery.shuffle=function(e){for(var r=e.slice(),t=r.length,a=t;a--;){var o=parseInt(Math.random()*t),i=r[a];r[a]=r[o],r[o]=i}return r},jQuery.fn.unselectable=function(){return this.each(function(){jQuery(this).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).attr("unselectable","on")})},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPGetPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.YTPGetVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.YTPChangeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.YTPPlayerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.YTPPlay=jQuery.mbYTPlayer.play,jQuery.fn.YTPTogglePlay=jQuery.mbYTPlayer.togglePlay,jQuery.fn.YTPStop=jQuery.mbYTPlayer.stop,jQuery.fn.YTPPause=jQuery.mbYTPlayer.pause,jQuery.fn.YTPSeekTo=jQuery.mbYTPlayer.seekTo,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.playlist,jQuery.fn.YTPPlayNext=jQuery.mbYTPlayer.playNext,jQuery.fn.YTPPlayPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.YTPPlayIndex=jQuery.mbYTPlayer.playIndex,jQuery.fn.YTPMute=jQuery.mbYTPlayer.mute,jQuery.fn.YTPUnmute=jQuery.mbYTPlayer.unmute,jQuery.fn.YTPToggleVolume=jQuery.mbYTPlayer.toggleVolume,jQuery.fn.YTPSetVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.YTPGetVideoData=jQuery.mbYTPlayer.getVideoData,jQuery.fn.YTPFullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.YTPToggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.YTPSetVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.YTPManageProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPApplyFilter=jQuery.mbYTPlayer.applyFilter,jQuery.fn.YTPApplyFilters=jQuery.mbYTPlayer.applyFilters,jQuery.fn.YTPToggleFilter=jQuery.mbYTPlayer.toggleFilter,jQuery.fn.YTPToggleFilters=jQuery.mbYTPlayer.toggleFilters,jQuery.fn.YTPRemoveFilter=jQuery.mbYTPlayer.removeFilter,jQuery.fn.YTPDisableFilters=jQuery.mbYTPlayer.disableFilters,jQuery.fn.YTPEnableFilters=jQuery.mbYTPlayer.enableFilters,jQuery.fn.YTPGetFilters=jQuery.mbYTPlayer.getFilters,jQuery.fn.YTPGetTime=jQuery.mbYTPlayer.getTime,jQuery.fn.YTPGetTotalTime=jQuery.mbYTPlayer.getTotalTime,jQuery.fn.YTPAddMask=jQuery.mbYTPlayer.addMask,jQuery.fn.YTPRemoveMask=jQuery.mbYTPlayer.removeMask,jQuery.fn.YTPToggleMask=jQuery.mbYTPlayer.toggleMask,jQuery.fn.YTPSetAnchor=jQuery.mbYTPlayer.setAnchor,jQuery.fn.YTPGetAnchor=jQuery.mbYTPlayer.getAnchor,jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.play,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stop,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pause,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekTo,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.mute,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmute,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPGetDataFromFeed=jQuery.mbYTPlayer.getVideoData}(jQuery,ytp),jQuery.support.CSStransition=function(){var e=document.body||document.documentElement,r=e.style;return void 0!==r.transition||void 0!==r.WebkitTransition||void 0!==r.MozTransition||void 0!==r.MsTransition||void 0!==r.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var r=jQuery.extend(!0,{},e);jQuery.browser.webkit||jQuery.browser.opera?jQuery.CSS.sfx="-webkit-":jQuery.browser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.browser.msie&&(jQuery.CSS.sfx="-ms-");for(var t in r){"transform"===t&&(r[jQuery.CSS.sfx+"transform"]=r[t],delete r[t]),"transform-origin"===t&&(r[jQuery.CSS.sfx+"transform-origin"]=e[t],delete r[t]),"filter"!==t||jQuery.browser.mozilla||(r[jQuery.CSS.sfx+"filter"]=e[t],delete r[t]),"blur"===t&&setFilter(r,"blur",e[t]),"brightness"===t&&setFilter(r,"brightness",e[t]),"contrast"===t&&setFilter(r,"contrast",e[t]),"grayscale"===t&&setFilter(r,"grayscale",e[t]),"hueRotate"===t&&setFilter(r,"hueRotate",e[t]),"invert"===t&&setFilter(r,"invert",e[t]),"saturate"===t&&setFilter(r,"saturate",e[t]),"sepia"===t&&setFilter(r,"sepia",e[t]);var a="";"x"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateX("+setUnit(e[t],"px")+")",delete r[t]),"y"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateY("+setUnit(e[t],"px")+")",delete r[t]),"z"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" translateZ("+setUnit(e[t],"px")+")",delete r[t]),"rotate"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotate("+setUnit(e[t],"deg")+")",delete r[t]),"rotateX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateX("+setUnit(e[t],"deg")+")",delete r[t]),"rotateY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateY("+setUnit(e[t],"deg")+")",delete r[t]),"rotateZ"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" rotateZ("+setUnit(e[t],"deg")+")",delete r[t]),"scale"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scale("+setUnit(e[t],"")+")",delete r[t]),"scaleX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleX("+setUnit(e[t],"")+")",delete r[t]),"scaleY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleY("+setUnit(e[t],"")+")",delete r[t]),"scaleZ"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" scaleZ("+setUnit(e[t],"")+")",delete r[t]),"skew"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skew("+setUnit(e[t],"deg")+")",delete r[t]),"skewX"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skewX("+setUnit(e[t],"deg")+")",delete r[t]),"skewY"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" skewY("+setUnit(e[t],"deg")+")",delete r[t]),"perspective"===t&&(a=jQuery.CSS.sfx+"transform",r[a]=r[a]||"",r[a]+=" perspective("+setUnit(e[t],"px")+")",delete r[t])}return r},getProp:function(e){var r=[];for(var t in e)r.indexOf(t)<0&&r.push(uncamel(t));return r.join(",")},animate:function(e,r,t,a,o){return this.each(function(){function i(){n.called=!0,n.CSSAIsRunning=!1,l.off(jQuery.CSS.transitionEnd+"."+n.id),clearTimeout(n.timeout),l.css(jQuery.CSS.sfx+"transition",""),"function"==typeof o&&o.apply(n),"function"==typeof n.CSSqueue&&(n.CSSqueue(),n.CSSqueue=null)}var n=this,l=jQuery(this);n.id=n.id||"CSSA_"+(new Date).getTime();var s=s||{type:"noEvent"};if(n.CSSAIsRunning&&n.eventType==s.type&&!jQuery.browser.msie&&jQuery.browser.version<=9)return void(n.CSSqueue=function(){l.CSSAnimate(e,r,t,a,o)});if(n.CSSqueue=null,n.eventType=s.type,0!==l.length&&e){if(e=jQuery.normalizeCss(e),n.CSSAIsRunning=!0,"function"==typeof r&&(o=r,r=jQuery.fx.speeds._default),"function"==typeof t&&(a=t,t=0),"string"==typeof t&&(o=t,t=0),"function"==typeof a&&(o=a,a="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof r)for(var u in jQuery.fx.speeds){if(r==u){r=jQuery.fx.speeds[u];break}r=jQuery.fx.speeds._default}if(r||(r=jQuery.fx.speeds._default),"string"==typeof o&&(a=o,o=null),!jQuery.support.CSStransition){for(var y in e){if("transform"===y&&delete e[y],"filter"===y&&delete e[y],"transform-origin"===y&&delete e[y],"auto"===e[y]&&delete e[y],"x"===y){var c=e[y],p="left";e[p]=c,delete e[y]}if("y"===y){var c=e[y],p="top";e[p]=c,delete e[y]}("-ms-transform"===y||"-ms-filter"===y)&&delete e[y]}return void l.delay(t).animate(e,r,o)}var d={"default":"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};d[a]&&(a=d[a]),l.off(jQuery.CSS.transitionEnd+"."+n.id);var f=jQuery.CSS.getProp(e),T={};jQuery.extend(T,e),T[jQuery.CSS.sfx+"transition-property"]=f,T[jQuery.CSS.sfx+"transition-duration"]=r+"ms",T[jQuery.CSS.sfx+"transition-delay"]=t+"ms",T[jQuery.CSS.sfx+"transition-timing-function"]=a,setTimeout(function(){l.one(jQuery.CSS.transitionEnd+"."+n.id,i),l.css(T)},1),n.timeout=setTimeout(function(){return n.called||!o?(n.called=!1,void(n.CSSAIsRunning=!1)):(l.css(jQuery.CSS.sfx+"transition",""),o.apply(n),n.CSSAIsRunning=!1,void("function"==typeof n.CSSqueue&&(n.CSSqueue(),n.CSSqueue=null)))},r+t+10)}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(e){return this.each(function(){var r=jQuery(this),t=jQuery.normalizeCss(e);r.css(t)})};var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt);var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):nAgt.indexOf("mozilla/5.0")>-1&&nAgt.indexOf("android ")>-1&&nAgt.indexOf("applewebkit")>-1&&!(nAgt.indexOf("chrome")>-1)?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),function(e){e.simpleSlider={defaults:{initialval:0,scale:100,orientation:"h",readonly:!1,callback:!1},events:{start:e.browser.mobile?"touchstart":"mousedown",end:e.browser.mobile?"touchend":"mouseup",move:e.browser.mobile?"touchmove":"mousemove"},init:function(r){return this.each(function(){var t=this,a=e(t);a.addClass("simpleSlider"),t.opt={},e.extend(t.opt,e.simpleSlider.defaults,r),e.extend(t.opt,a.data());var o="h"==t.opt.orientation?"horizontal":"vertical",o=e("<div/>").addClass("level").addClass(o);a.prepend(o),t.level=o,a.css({cursor:"default"}),"auto"==t.opt.scale&&(t.opt.scale=e(t).outerWidth()),a.updateSliderVal(),t.opt.readonly||(a.on(e.simpleSlider.events.start,function(r){e.browser.mobile&&(r=r.changedTouches[0]),t.canSlide=!0,a.updateSliderVal(r),"h"==t.opt.orientation?a.css({cursor:"col-resize"}):a.css({cursor:"row-resize"}),r.preventDefault(),r.stopPropagation()}),e(document).on(e.simpleSlider.events.move,function(r){e.browser.mobile&&(r=r.changedTouches[0]),t.canSlide&&(e(document).css({cursor:"default"}),a.updateSliderVal(r),r.preventDefault(),r.stopPropagation())}).on(e.simpleSlider.events.end,function(){e(document).css({cursor:"auto"}),t.canSlide=!1,a.css({cursor:"auto"})}))})},updateSliderVal:function(r){var t=this.get(0);if(t.opt){t.opt.initialval="number"==typeof t.opt.initialval?t.opt.initialval:t.opt.initialval(t);var a=e(t).outerWidth(),o=e(t).outerHeight();t.x="object"==typeof r?r.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof r?r*a/t.opt.scale:t.opt.initialval*a/t.opt.scale,t.y="object"==typeof r?r.clientY+document.body.scrollTop-this.offset().top:"number"==typeof r?(t.opt.scale-t.opt.initialval-r)*o/t.opt.scale:t.opt.initialval*o/t.opt.scale,t.y=this.outerHeight()-t.y,t.scaleX=t.x*t.opt.scale/a,t.scaleY=t.y*t.opt.scale/o,t.outOfRangeX=t.scaleX>t.opt.scale?t.scaleX-t.opt.scale:0>t.scaleX?t.scaleX:0,t.outOfRangeY=t.scaleY>t.opt.scale?t.scaleY-t.opt.scale:0>t.scaleY?t.scaleY:0,t.outOfRange="h"==t.opt.orientation?t.outOfRangeX:t.outOfRangeY,t.value="undefined"!=typeof r?"h"==t.opt.orientation?t.x>=this.outerWidth()?t.opt.scale:0>=t.x?0:t.scaleX:t.y>=this.outerHeight()?t.opt.scale:0>=t.y?0:t.scaleY:"h"==t.opt.orientation?t.scaleX:t.scaleY,"h"==t.opt.orientation?t.level.width(Math.floor(100*t.x/a)+"%"):t.level.height(Math.floor(100*t.y/o)),"function"==typeof t.opt.callback&&t.opt.callback(t)}}},e.fn.simpleSlider=e.simpleSlider.init,e.fn.updateSliderVal=e.simpleSlider.updateSliderVal}(jQuery),!function(e){e.mbCookie={set:function(e,r,t,a){r=JSON.stringify(r),t||(t=7),a=a?"; domain="+a:"";var o,i=new Date;i.setTime(i.getTime()+864e5*t),o="; expires="+i.toGMTString(),document.cookie=e+"="+r+o+"; path=/"+a},get:function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(r))return JSON.parse(o.substring(r.length,o.length))}return null},remove:function(r){e.mbCookie.set(r,"",-1)}},e.mbStorage={set:function(e,r){r=JSON.stringify(r),localStorage.setItem(e,r)},get:function(e){return localStorage[e]?JSON.parse(localStorage[e]):null},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);
/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.store=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=e("../storages/all"),i=[e("../plugins/json2")];t.exports=r.createStore(o,i)},{"../plugins/json2":2,"../src/store-engine":4,"../storages/all":6}],2:[function(e,t,n){"use strict";function r(){return e("./lib/json2"),{}}t.exports=r},{"./lib/json2":3}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,u,a=gap,c=t[e];switch(c&&"object"===("undefined"==typeof c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),"undefined"==typeof c?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)u[n]=str(n,c)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+a+"]":"["+u.join(",")+"]",gap=a,o}if(rep&&"object"===("undefined"==typeof rep?"undefined":_typeof(rep)))for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,c),o&&u.push(quote(r)+(gap?": ":":")+o));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o&&u.push(quote(r)+(gap?": ":":")+o));return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+a+"}":"{"+u.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!==("undefined"==typeof t?"undefined":_typeof(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"===("undefined"==typeof o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],4:[function(e,t,n){"use strict";function r(){var e="undefined"==typeof console?null:console;if(e){var t=e.warn?e.warn:e.log;t.apply(e,arguments)}}function o(e,t,n){n||(n=""),e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var o=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+o):null,v=/^[a-zA-Z0-9_\-]*$/;if(!v.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h={_namespacePrefix:o,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(r){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){function t(){if(n)return c(arguments,function(e,t){r[t]=e}),n.apply(o,r)}var r=u(arguments,0),o=this,i=[t].concat(r);return e.apply(o,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(r){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(l(e))return void c(e,function(e){t._addPlugin(e)});var n=a(this.plugins,function(t){return e===t});if(!n){if(this.plugins.push(e),!p(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!d(r))throw new Error("Plugins must return an object of function properties");c(r,function(n,r){if(!p(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)})}},addStorage:function(e){r("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=s(h,g,{plugins:[]});return m.raw={},c(m,function(e,t){p(e)&&(m.raw[t]=f(m,e))}),c(e,function(e){m._addStorage(e)}),c(t,function(e){m._addPlugin(e)}),m}var i=e("./util"),u=i.slice,a=i.pluck,c=i.each,f=i.bind,s=i.create,l=i.isList,p=i.isFunction,d=i.isObject;t.exports={createStore:o};var g={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each(function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return o.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return o(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,t,n){(function(e){"use strict";function n(){return Object.assign?Object.assign:function(e,t,n,r){for(var o=1;o<arguments.length;o++)a(Object(arguments[o]),function(t,n){e[n]=t});return e}}function r(){if(Object.create)return function(e,t,n,r){var o=u(arguments,1);return d.apply(this,[Object.create(e)].concat(o))};var e=function(){};return function(t,n,r,o){var i=u(arguments,1);return e.prototype=t,d.apply(this,[new e].concat(i))}}function o(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function i(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function u(e,t){return Array.prototype.slice.call(e,t||0)}function a(e,t){f(e,function(e,n){return t(e,n),!1})}function c(e,t){var n=s(e)?[]:{};return f(e,function(e,r){return n[r]=t(e,r),!1}),n}function f(e,t){if(s(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function s(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function l(e){return e&&"[object Function]"==={}.toString.call(e)}function p(e){return e&&"[object Object]"==={}.toString.call(e)}var d=n(),g=r(),v=o(),h="undefined"!=typeof window?window:e;t.exports={assign:d,create:g,trim:v,bind:i,slice:u,each:a,map:c,pluck:f,isList:s,isFunction:l,isObject:p,Global:h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]},{"./cookieStorage":7,"./localStorage":8,"./memoryStorage":9,"./oldFF-globalStorage":10,"./oldIE-userDataStorage":11,"./sessionStorage":12}],7:[function(e,t,n){"use strict";function r(e){if(!e||!c(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(p.cookie.replace(new RegExp(t),"$1"))}function o(e){for(var t=p.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(l(t[n])){var r=t[n].split("="),o=unescape(r[0]),i=unescape(r[1]);e(i,o)}}function i(e,t){e&&(p.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function u(e){e&&c(e)&&(p.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function a(){o(function(e,t){u(t)})}function c(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(p.cookie)}var f=e("../src/util"),s=f.Global,l=f.trim;t.exports={name:"cookieStorage",read:r,write:i,each:o,remove:u,clearAll:a};var p=s.document},{"../src/util":5}],8:[function(e,t,n){"use strict";function r(){return s.localStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function u(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function a(e){return r().removeItem(e)}function c(){return r().clear()}var f=e("../src/util"),s=f.Global;t.exports={name:"localStorage",read:o,write:i,each:u,remove:a,clearAll:c}},{"../src/util":5}],9:[function(e,t,n){"use strict";function r(e){return c[e]}function o(e,t){c[e]=t}function i(e){for(var t in c)c.hasOwnProperty(t)&&e(c[t],t)}function u(e){delete c[e]}function a(e){c={}}t.exports={name:"memoryStorage",read:r,write:o,each:i,remove:u,clearAll:a};var c={}},{}],10:[function(e,t,n){"use strict";function r(e){return s[e]}function o(e,t){s[e]=t}function i(e){for(var t=s.length-1;t>=0;t--){var n=s.key(t);e(s[n],n)}}function u(e){return s.removeItem(e)}function a(){i(function(e,t){delete s[e]})}var c=e("../src/util"),f=c.Global;t.exports={name:"oldFF-globalStorage",read:r,write:o,each:i,remove:u,clearAll:a};var s=f.globalStorage},{"../src/util":5}],11:[function(e,t,n){"use strict";function r(e,t){if(!v){var n=c(e);g(function(e){e.setAttribute(n,t),e.save(p)})}}function o(e){if(!v){var t=c(e),n=null;return g(function(e){n=e.getAttribute(t)}),n}}function i(e){g(function(t){for(var n=t.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var o=n[r];e(t.getAttribute(o.name),o.name)}})}function u(e){var t=c(e);g(function(e){e.removeAttribute(t),e.save(p)})}function a(){g(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(p);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(p)})}function c(e){return e.replace(/^\d/,"___$&").replace(h,"___")}function f(){if(!d||!d.documentElement||!d.documentElement.addBehavior)return null;var e,t,n,r="script";try{t=new ActiveXObject("htmlfile"),t.open(),t.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,n=e.createElement("div")}catch(o){n=d.createElement("div"),e=d.body}return function(t){var r=[].slice.call(arguments,0);r.unshift(n),e.appendChild(n),n.addBehavior("#default#userData"),n.load(p),t.apply(this,r),e.removeChild(n)}}var s=e("../src/util"),l=s.Global;t.exports={name:"oldIE-userDataStorage",write:r,read:o,each:i,remove:u,clearAll:a};var p="storejs",d=l.document,g=f(),v=(l.navigator?l.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),h=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],12:[function(e,t,n){"use strict";function r(){return s.sessionStorage}function o(e){return r().getItem(e)}function i(e,t){return r().setItem(e,t)}function u(e){for(var t=r().length-1;t>=0;t--){var n=r().key(t);e(o(n),n)}}function a(e){return r().removeItem(e)}function c(){return r().clear()}var f=e("../src/util"),s=f.Global;t.exports={name:"sessionStorage",read:o,write:i,each:u,remove:a,clearAll:c}},{"../src/util":5}]},{},[1])(1)});
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.5
 */
var Rexbuilder_Public_Templates=function(){"use strict";function e(e,t){switch(e){case"label-text-paragraph":return'<div class="wpcf7-label-text__paragraph" contenteditable="false"></div>'}}return{getTemplate:e}}();
var Rexbuilder_Util=function($){"use strict";function rtimeOut(e,t){var i,a=Date.now,o=window.requestAnimationFrame,r=a(),n=function(){a()-r<t?i||o(n):e()};return o(n),{clear:function(){i=1}}}function rInterval(e,t){var i,a=Date.now,o=window.requestAnimationFrame,r=a(),n=function(){a()-r<t||(r+=t,e()),i||o(n)};return o(n),{clear:function(){i=1}}}function handlingRowReadyEnd(e){if(edlTimeouts[e]=null,""===edlTimeouts.join("")){var t=jQuery.Event("rexlive:editDomLayoutEnd");Rexbuilder_Util.$document.trigger(t),edlTimeouts=[]}}function guessLayout(e){var t=document.getElementById("layout-avaiable-dimensions").textContent;t=""!==t?JSON.parse(t):[];var i=t.filter(function(t){return t.id===e});if(!i)return"default";if(i=i[0],"standard"===i.type)return"default";var a,o=$availableLayoutNames.text(),r=t.filter(function(e){return-1!==o.indexOf(e.id)}),n=r.length,s="";if(parseInt(i.min)<_plugin_frontend_settings.defaultSettings.collapseWidth){for(a=0;a<n;a++)if(parseInt(r[a].min)<_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){s=r[a].id;break}}else for(a=0;a<n;a++)if(parseInt(r[a].min)>=_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){s=r[a].id;break}return""===s&&(s="default"),s}function _isMobile(){return Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth}function clearSectionsEdited(){var e,t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length;for(e=0;e<i;e++){t[e].setAttribute("data-rexlive-section-edited",!1),t[e].querySelector(".grid-stack-row").setAttribute("data-rexlive-layout-changed",!1);var a,o=Array.prototype.slice.call(t[e].getElementsByClassName("grid-stack-item")),r=o.length;for(a=0;a<r;a++)o[a].setAttribute("data-rexlive-element-edited",!1)}}function handlingGridstackCommitEnd(e,t,i,a){Rexbuilder_Util.domUpdating=!0,e.properties.gridstackInstance&&e.properties.gridstackInstance.batchUpdate(),e.fixBlockDomOrder(),e.saveStateGrid(),"masonry"!=e.settings.galleryLayout||t?"fixed"==e.settings.galleryLayout&&"true"==e.settings.fullHeight.toString()&&e.updateFullHeight():e.updateBlocksHeight(),i[0].props.collapse_grid&&(e.collapseElements(),e.collapseElementsProperties()),e.properties.gridstackInstance&&e.properties.gridstackInstance.commit();var o=setTimeout(handlingRowReady.bind(null,e,a),200);edlTimeouts.push(o)}function handlingRowReady(e,t){Rexbuilder_Util.domUpdating=!1,e.properties.dispositionBeforeCollapsing=e.createActionDataMoveBlocksGrid(),e._createFirstReverseStack(),e._fixImagesDimension(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers(),Rexbuilder_Util.playAllVideos(),handlingRowReadyEnd(t),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e.section),1500)}function _updateDOMSingleElement(e){var t=e.$elem,i=t.get(0),a=e.targetProps,o=e.$itemData,r=o.get(0),n=e.$itemContent,s=e.gridstackInstance,d=e.positionAndSize||!1,l=e.collapseGrid||!1;if(d){l&&(i.setAttribute("data-gs-width",12),i.setAttribute("data-width",12),r.setAttribute("data-gs_width",12),r.setAttribute("data-size_x",12),a.gs_width="12",a.size_x="12",i.setAttribute("data-gs-x",0),i.setAttribute("data-row",1),r.setAttribute("data-gs_x",0),r.setAttribute("data-row",1),a.gs_x="0",a.row="1");var u={x:i.getAttribute("data-gs-x"),y:i.getAttribute("data-gs-y"),w:i.getAttribute("data-gs-width"),h:i.getAttribute("data-gs-height"),startH:r.getAttribute("data-gs_start_h"),realFluid:r.getAttribute("data-element_real_fluid")},c={x:"undefined"==typeof a.gs_x?u.x:a.gs_x,y:"undefined"==typeof a.gs_y?u.y:a.gs_y,w:"undefined"==typeof a.gs_width?u.w:a.gs_width,h:"undefined"==typeof a.gs_height?u.h:a.gs_height,startH:"undefined"==typeof a.gs_start_h?u.startH:a.gs_start_h,realFluid:"undefined"==typeof a.element_real_fluid?u.realFluid:a.element_real_fluid,gridstackInstance:s};_updateElementDimensions(t[0],o[0],c)}var _=isNaN(parseInt(a.video_bg_id))?"":parseInt(a.video_bg_id),m="undefined"==typeof a.video_bg_url_youtube?"":a.video_bg_url_youtube,g="undefined"==typeof a.video_bg_url_vimeo?"":a.video_bg_url_vimeo,p="";""!=_?p="mp4":""!=g?p="vimeo":""!=m&&(p="youtube");var f={mp4Data:{idMp4:_,linkMp4:"undefined"==typeof a.video_mp4_url?"":a.video_mp4_url,width:isNaN(parseInt(a.video_bg_width))?"":parseInt(a.video_bg_width),height:isNaN(parseInt(a.video_bg_height))?"":parseInt(a.video_bg_height)},vimeoUrl:g,youtubeUrl:m,audio:"undefined"==typeof a.video_has_audio?"":"1"==a.video_has_audio||"true"==a.video_has_audio.toString(),typeVideo:p};Rexbuilder_Dom_Util.updateVideos(n,f);var h="undefined"==typeof a.image_bg_elem_active||"true"==a.image_bg_elem_active.toString(),b={active:h,idImage:h?isNaN(parseInt(a.id_image_bg))?"":parseInt(a.id_image_bg):"",urlImage:h?a.image_bg_url:"",width:h?isNaN(parseInt(a.image_width))?"":parseInt(a.image_width):"",height:h?isNaN(parseInt(a.image_height))?"":parseInt(a.image_height):"",typeBGimage:h?a.type_bg_image:"",photoswipe:h?a.photoswipe:""};Rexbuilder_Dom_Util.updateImageBG(n,b);var y={$elem:t,color:"undefined"!=typeof a.color_bg_block?a.color_bg_block:"",active:"undefined"==typeof a.color_bg_block_active||a.color_bg_block_active.toString()};-1===y.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockBackgroundColor(y):Rexbuilder_Dom_Util.updateBlockBackgroundGradient(y);var v={$elem:t,color:"undefined"!=typeof a.overlay_block_color?a.overlay_block_color:"",active:"undefined"!=typeof a.overlay_block_color_active&&a.overlay_block_color_active.toString()};-1===v.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockOverlay(v):Rexbuilder_Dom_Util.updateBlockOverlayGradient(v),Rexbuilder_Dom_Util.updateBlockPaddings(t,_getPaddingsDataString("undefined"!=typeof a.block_padding?a.block_padding:""));var x="undefined"==typeof a.block_custom_class?"":a.block_custom_class,S=[];""!=x&&(x=x.trim(),S=x.split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(t,S);var D="undefined"!=typeof a.block_flex_position?a.block_flex_position.split(" "):"",C={x:D[0],y:D[1]};Rexbuilder_Dom_Util.updateFlexPostition(t,C);var D="undefined"!=typeof a.block_flex_img_position?a.block_flex_img_position.split(" "):"",R={x:D[0],y:D[1]};Rexbuilder_Dom_Util.updateImageFlexPostition(t,R);var U="undefined"==typeof a.slider_dimension_ratio?"":a.slider_dimension_ratio;o.attr("data-slider_ratio",U);var I="undefined"==typeof a.block_ratio?"":a.block_ratio;o.attr("data-block_ratio",I);var k="undefined"==typeof a.block_dimensions_live_edited?"":a.block_dimensions_live_edited;o.attr("data-block_dimensions_live_edited",k);var w="undefined"!=typeof a.hide&&"true"==a.hide.toString();w?(t.hasClass("rex-hide-element")||t.addClass("rex-hide-element"),Rexbuilder_Util.stopBlockVideos(t)):(t.hasClass("rex-hide-element")&&t.removeClass("rex-hide-element"),Rexbuilder_Util.playBlockVideos(t));var L="undefined"!=typeof a.element_edited&&"true"==a.element_edited.toString();t.attr("data-rexlive-element-edited",L);for(var $ in a)switch($){case"type":o.attr("data-type",a.type);break;case"size_x":t.attr("data-width",a.size_x);break;case"size_y":t.attr("data-height",a.size_y);break;case"row":t.attr("data-row",a.row);break;case"col":t.attr("data-col",a.col);break;case"photoswipe":if(!Rexbuilder_Util.editorMode)if(""===a.linkurl&&"true"==a.photoswipe){Rexbuilder_Photoswipe.addElement(n,a.image_bg_url,parseInt(a.image_width),parseInt(a.image_height),a.image_size);var N=t.parents(".rexpansive_section");N.addClass("photoswipe-gallery")}else Rexbuilder_Photoswipe.removeElement(n);o.attr("data-photoswipe",a.photoswipe);break;case"linkurl":if(!Rexbuilder_Util.editorMode){var z=n.parents(".element-link");if(""!=a.linkurl)if(0!=z.length)z.attr("href",a.linkurl),z.attr("title",a.linkurl);else{var A=n.parent();tmpl.arg="link",A.append('<a class="element-link hovered" href="'+a.linkurl+'" title="'+a.linkurl+'"></a>');var E=A.children(".element-link");n.detach().appendTo(E)}else 0!=z.length&&z.children().unwrap()}Rexbuilder_Dom_Util.updateBlockUrl(t,a.linkurl);break;case"zak_background":case"zak_side":case"zak_title":case"zak_icon":case"zak_foreground":break;case"block_animation":break;case"block_has_scrollbar":}}function _smoothScroll(e){$bodyHtml.animate({scrollTop:e.offset().top+_plugin_frontend_settings.scroll_animation_offset},600)}function handleYtbVideoMobileClick(ev){ev.preventDefault();var data_yt=eval("("+this.getAttribute("data-property")+")"),url=data_yt.videoURL;window.location.href=url}function handleLayoutChange(e){var t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),i=t.length;Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e;var a,o,r=[],n=[];for(a=0;a<i;a++)Rexbuilder_Util.hasClass(t[a],"rex-model-section")&&r.push(parseInt(t[a].getAttribute("data-rexlive-model-id"))),o={rexID:t[a].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(t[a].getAttribute("data-rexlive-model-id")))?"":parseInt(t[a].getAttribute("data-rexlive-model-id"))},n.push(o);var s,d,l=Rexbuilder_Util.getPageCustomizations();"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.saveCustomizationDomOrder(jQuery.extend(!0,[],l));var u,c=Rexbuilder_Util.getModelsCustomizations();"true"==$defaultLayoutState.attr("data-empty-default-customization")?(u=Rexbuilder_Util.getDefaultPageLayout(l,c),_createDefaultLayoutState(u)):(Rexbuilder_Util.updateDefaultLayoutState({modelsData:c}),u=Rexbuilder_Util.getDefaultLayoutState());var _,m=Rexbuilder_Util.getCustomLayoutSections(l,c,u,e),g=[];for(s=0;s<m;s++)if("true"==m[s].section_is_model.toString()){for(_=!1,d=0;d<g.length;d++)if(g[d].id==m[s].section_model_id){g[d].number=g[d].number+1,m[s].section_model_number=g[d].number,_=!0;break}_||(m[s].section_model_number=1,g.push({id:m[s].section_model_id,number:1}))}Rexbuilder_Util.clearSectionsEdited();var p=_mergeSections(m,u);Rexbuilder_Util.domUpdating=!0;var f,h,b=!1,y=[];for(f in p)if(!p[f].notInSection||"default"==e){var v={rexID:p[f].section_rex_id,modelID:-1,modelNumber:-1};"true"==p[f].section_is_model.toString()?(v.modelID=p[f].section_model_id,v.modelNumber=p[f].section_model_number,h=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+p[f].section_rex_id+'"][data-rexlive-model-number="'+v.modelNumber+'"]')):h=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+p[f].section_rex_id+'"]'),h&&!Rexbuilder_Util.hasClass(h,"removing_section")&&("undefined"!=typeof p[f].section_hide&&"true"==p[f].section_hide.toString()?Rexbuilder_Util.addClass(h,"rex-hide-section"):(Rexbuilder_Util.removeClass(h,"rex-hide-section"),updateRexGrid(h,p[f].targets,b,f)),y.push(v))}Rexbuilder_Dom_Util.fixSectionDomOrder(y,!0),Rexbuilder_Util.domUpdating=!1}function updateRexGrid(e,t,i){var a=$(e),o=a.find(".grid-stack-row"),r=t[0].props.collapse_grid;-1!==t[0].props.custom_classes.indexOf("rex-block-grid")&&(r=!1),e.querySelector(".section-data").setAttribute("data-collapse-grid",r),t[0].props.gridEdited&&o.attr("data-rexlive-layout-changed",!0);var n,s=t.length;for(n=1;n<s;n++){var d=o.children('div[data-rexbuilder-block-id="'+t[n].name+'"]'),l="undefined"!=typeof t[n].props.hide&&"true"==t[n].props.hide.toString();l?d.hasClass("rex-hide-element")||d.addClass("rex-hide-element"):d.hasClass("rex-hide-element")&&d.removeClass("rex-hide-element")}var u,c,d,_,m,g,p,f;for(n=1;n<s;n++)if((!t[n].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(u=t[n].name,c=t[n].props,d=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+u+'"]'),g=d[0],_=d.children(".rexbuilder-block-data"),m=d.find(".grid-item-content"),d.length>0)){if(p=[].slice.call(g.getElementsByTagName("img")),f=p.length,!Rexbuilder_Util.editorMode&&0!==f){var h;for(h=0;h<f;h++)"true"===p[h].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(p[h]))}var b={$elem:d,targetProps:c,$itemData:_,$itemContent:m,gridstackInstance:null,positionAndSize:!0,collapseGrid:r};Rexbuilder_Util.updateDOMSingleElement(b)}updateSection(a,o,t[0].props,i)}function removeArrayDuplicates(e){return e.filter(function(e,t,i){return i.indexOf(e)===t})}function isOrIsChild(e,t){return!!e.matches(t)||0!==$(e).parents(t).length}var hasClass,addClass,removeClass,toggleClass;"classList"in document.documentElement?(hasClass=function(e,t){return e.classList.contains(t)},addClass=function(e,t){e.classList.add(t)},removeClass=function(e,t){e.classList.remove(t)}):(hasClass=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},removeClass=function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),toggleClass=function(e,t){hasClass(e,t)?removeClass(e,t):addClass(e,t)};var editorMode=!1,windowIsResizing=!1,responsiveLayouts,defaultLayoutSections,$modelsCustomizationsDataDiv,$pageCustomizationsDataDiv,$liveDataContainer,$layoutsDomOrder,$defaultLayoutState,$usedIDSContainer,sectionIDSused,frontAvailableLayouts,startFrontLayout,changedFrontLayout,layoutSavedInfo,$rexbuilderLayoutData,$rexbuilderModelData,$availableLayoutNames,edlTimeouts=[],$bodyHtml,createRandomID=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},_createRandomNumericID=function(e){for(var t="",i="0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return parseInt(t)},_storeNamesUsed=function(){sectionIDSused=$usedIDSContainer.length>0?JSON.parse($usedIDSContainer.text()):[]},_saveSectionNamesUsed=function(){$usedIDSContainer.text(JSON.stringify(sectionIDSused))},_getSectionNamesUsed=function(){return sectionIDSused},_addSectionID=function(e){var t;for(t=sectionIDSused.length-1;t>=0&&e!=sectionIDSused[t];t--);t==-1&&sectionIDSused.push(e)},_removeSectionID=function(e){var t=0;for(t=sectionIDSused.length-1;t>=0&&e!=sectionIDSused[t];t--);t>-1&&(sectionIDSused.splice(t,1),_saveSectionNamesUsed())},_createSectionID=function(){var e,t,i,a=4;do if(t=!0,e=createRandomID(a),"self"==e)t=!1;else for(i=0;i<sectionIDSused.length;i++)if(e==sectionIDSused[i]){t=!1;break}while(!t);return _addSectionID(e),e},createBlockID=function(){var e,t,i,a=4;do t=!0,e=createRandomID(a),"self"==e?t=!1:Rexbuilder_Util.$rexContainer.find(".grid-stack-item").each(function(){i=$(this),void 0!==i.attr("data-rexbuilder-block-id")&&i.attr("data-rexbuilder-block-id")==e&&(t=!1)});while(!t);return e},_updateSectionsID=function(){if(Rexbuilder_Util.rexContainer){var e,t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++){var o=i[t].getAttribute("data-rexlive-section-id");null!==o&&""!==o||(e=_createSectionID(),i[t].setAttribute("data-rexlive-section-id",e),_fix_tools_ids(i[t],e))}}},_fix_tools_ids=function(e,t){if(e){var i,a,o,r,n,s,d=[].slice.call(e.getElementsByClassName("tool-area--side tool-area--left")),l=d.length;for(i=0;i<l;i++){for(o=[].slice.call(d[i].getElementsByClassName("edit-row-width")),r=o.length,a=0;a<r;a++)o[a].setAttribute("id",o[a].getAttribute("id")+t),o[a].setAttribute("name",o[a].getAttribute("name")+t),o[a].nextElementSibling.setAttribute("for",o[a].nextElementSibling.getAttribute("for")+t);for(n=[].slice.call(d[i].getElementsByClassName("edit-row-layout")),s=n.length,a=0;a<s;a++)n[a].setAttribute("id",n[a].getAttribute("id")+t),n[a].setAttribute("name",n[a].getAttribute("name")+t),n[a].nextElementSibling.setAttribute("for",n[a].nextElementSibling.getAttribute("for")+t)}}},_updateSectionsNumber=function(){var e=-1;if(Rexbuilder_Util.rexContainer){var t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++)i[t].setAttribute("data-rexlive-section-number",t),e=t;Rexbuilder_Util.lastSectionNumber=e}},_findLayoutType=function(e){return"default"==e||"tablet"==e||"mobile"==e?"standard":"custom"},_findFrontLayout=function(){for(var e=Rexbuilder_Util.globalViewport.width,t=frontAvailableLayouts.length-1;t>=0;t--)if(e>=parseInt(frontAvailableLayouts[t].min)&&(""==frontAvailableLayouts[t].max||e<=parseInt(frontAvailableLayouts[t].max)))return frontAvailableLayouts[t].id},_getModelsCustomizations=function(){var e=[];return $modelsCustomizationsDataDiv.children(".model-customizations-container").each(function(t,i){var a=$(i),o=parseInt(a.attr("data-model-id")),r=[];a.children(".model-customization-data").each(function(e,t){var i=$(t),a=i.attr("data-model-layout-name"),o=JSON.parse(i.text()),n={name:a,targets:o};r.push(n)});var n={id:o,customizations:r};e.push(n)}),e},_updateModelsCustomizationsData=function(e){var t,i,a=e.id,o=$modelsCustomizationsDataDiv.children('.model-customizations-container[data-model-id="'+a+'"]');for(0!=o.length?o.children(".model-customization-data").remove():(o=$(document.createElement("div")),o.addClass("model-customizations-container"),o.attr("data-model-id",a),o.appendTo($modelsCustomizationsDataDiv[0])),t=0,i=e.customizations.length;t<i;t++){var r=$(document.createElement("div"));r.addClass("model-customization-data"),r.attr("data-model-layout-name",e.customizations[t].name),r.text(JSON.stringify(e.customizations[t].targets)),r.appendTo(o[0])}$modelsCustomizationsDataDiv.attr("data-empty-models-customizations",!1)},_updateDivModelCustomizationsNames=function(e){var t,i,a=$rexbuilderModelData.find(".available-models-customizations-names"),o=JSON.parse(a.text()),r=[];for(t=0,i=o.length;t<i;t++){var n=o[t];n.id!=e.id&&r.push(n)}r.push(e),a.text(JSON.stringify(r))},_getPageCustomizations=function(){var e=[],t={name:"default",sections:[]},i=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="default"]');return i.children(".section-targets").each(function(e,i){var a=$(i),o=a.attr("data-section-rex-id"),r=isNaN(parseInt(a.attr("data-model-id")))?-1:parseInt(a.attr("data-model-id")),n=isNaN(parseInt(a.attr("data-model-number")))?-1:parseInt(a.attr("data-model-number")),s="undefined"!=typeof a.attr("data-section-hide")&&"1"==a.attr("data-section-hide").toString(),d=""!=a.text()?JSON.parse(a.text()):[];t.sections.push({section_rex_id:o,section_model_id:r!=-1?r:"",section_model_number:n!=-1?n:"",section_is_model:r!=-1,section_hide:s,targets:d})}),e.push(t),$pageCustomizationsDataDiv.children('.customization-wrap:not([data-customization-name="default"])').each(function(t,i){var a=$(i),o=a.attr("data-customization-name"),r={name:o,sections:[]};a.children(".section-targets").each(function(e,t){var i=$(t),a=i.attr("data-section-rex-id"),o=isNaN(parseInt(i.attr("data-model-id")))?-1:parseInt(i.attr("data-model-id")),n=isNaN(parseInt(i.attr("data-model-number")))?-1:parseInt(i.attr("data-model-number")),s="undefined"!=typeof i.attr("data-section-hide")&&"1"==i.attr("data-section-hide").toString(),d=""!=i.text()?JSON.parse(i.text()):[],l="undefined"!=typeof i.attr("data-section-created-live")&&"1"==i.attr("data-section-created-live").toString();r.sections.push({section_rex_id:a,section_model_id:o!=-1?o:"",section_model_number:n!=-1?n:"",section_is_model:o!=-1,section_hide:s,section_created_live:l,targets:d})}),e.push(r)}),e},_createPageCustomizationsDataLive=function(e){$liveDataContainer.children().remove();var t,i;for(t=0,i=e.length;t<i;t++){var a=$(document.createElement("div"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($liveDataContainer[0])}},_updatePageCustomizationsData=function(e){var t,i,a=e.name,o=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="'+a+'"]');for(0!=o.length?o.children(".section-targets").remove():(o=$(document.createElement("div")),o.addClass("customization-wrap"),o.attr("data-customization-name",a),o.appendTo($pageCustomizationsDataDiv[0])),t=0,i=e.sections.length;t<i;t++){var r=$(document.createElement("div"));r.addClass("section-targets"),r.attr("data-section-rex-id",e.sections[t].section_rex_id),r.attr("data-model-id",e.sections[t].section_model_id),r.attr("data-model-number",e.sections[t].section_model_number),r.attr("data-section-hide",e.sections[t].section_hide),r.attr("data-section-created-live","true"==e.sections[t].section_created_live.toString()&&"1"),""==e.sections[t].section_model_id&&r.text(JSON.stringify(e.sections[t].targets)),r.appendTo(o[0])}$pageCustomizationsDataDiv.removeAttr("data-empty-customizations")},_updatePageAvaiableLayoutsNames=function(e){$availableLayoutNames.text(JSON.stringify(e))},_getSectionCustomLayouts=function(e){var t,i,a,o,r=[],n=Rexbuilder_Util.getPageCustomizations();for(t=0,a=n.length;t<a;t++){var s=n[t].name;if(null!=n[t].sections)for(i=0,o=n[t].sections.length;i<o;i++)if(n[t].sections[i].section_rex_id==e){var d=jQuery.extend(!0,[],n[t].sections[i].targets),l={name:s,targets:d};r.push(l)}}return r},chooseLayout=function(){var e=$rexbuilderLayoutData,t=$rexbuilderModelData;if(Rexbuilder_Util.chosenLayoutData={min:0,max:"",id:"default",label:"My Desktop",type:"standard"},"true"==e.children(".layouts-data").attr("data-empty-customizations")||Rexbuilder_Util.editorMode&&Rexbuilder_Util.firstStart)return"default";var i,a,o,r,n,s,d,l,u,c,_=Rexbuilder_Util.globalViewport.width,m=document.getElementById("layout-avaiable-dimensions"),g=m?JSON.parse(m.textContent):[],p=t.children(".available-models-customizations-names"),f=p.length>0?JSON.parse(p.text()):[],h=e.children("#available-layouts-names"),b=h.length>0?JSON.parse(h.text()):[],y=[];for(i=0,r=g.length;i<r;i++){for(c=!1,a=0,n=f.length;a<n;a++)for(o=0,s=f[a].names.length;o<s;o++)if(g[i].id==f[a].names[o]){var v=g[i];v.model=!0,c=!0,y.push(v)}if(!c)for(o=0,d=b.length;o<d;o++)if(g[i].id==b[o]){var v=g[i];v.model=!1,c=!0,y.push(v)}}for(i=0,l=y.length;i<l;i++)""==y[i].min&&(y[i].min=0);var x="",S=function(e){return function(t,i){return t[e]>i[e]?1:i[e]>t[e]?-1:0}},D=y.concat();for(D.sort(S("min")),i=0,u=D.length;i<u;i++)_>=D[i].min&&(""!=D[i].max?_<=D[i].max&&(x=D[i].id,Rexbuilder_Util.chosenLayoutData=D[i]):(x=D[i].id,Rexbuilder_Util.chosenLayoutData=D[i]));return""===x&&(x="default"),x},predictLayout=function(){var e=Rexbuilder_Util.globalViewport.width;return e<=767?"mobile":e<=1024?"tablet":"default"},_createEmptyTargets=function(e){var t,i,a=[];for(t=0,i=e.length;t<i;t++){var o={name:e[t].name,props:{}};"self"==e[t].name&&_isMobile()&&(o.props.collapse_grid=!0),a.push(o)}return a},_getDefaultPageLayout=function(e,t){var i,a,o,r,n,s,d,l,u,c=[];for(i=0,n=e.length;i<n;i++)if("default"==e[i].name){for(a=0,s=e[i].sections.length;a<s;a++)c.push(jQuery.extend(!0,{},e[i].sections[a]));break}for(i=0,d=c.length;i<d;i++)if("true"==c[i].section_is_model.toString())for(o=0,l=t.length;o<l;o++)if(t[o].id==c[i].section_model_id){for(r=0,u=t[o].customizations.length;r<u;r++)if("default"==t[o].customizations[r].name){c[i].targets=jQuery.extend(!0,[],t[o].customizations[r].targets);break}break}return c},_getDefaultModelsLayout=function(e){var t,i,a,o,r=[];for(t=0,a=e.length;t<a;t++)for(i=0,o=e[t].customizations.length;i<o;i++)if("default"==e[t].customizations[i].name){r.push({id:e[t].id,targets:e[t].customizations[i].targets});break}return r},_getCustomLayoutSections=function(e,t,i,a){if("default"==a)return i;var o,r,n,s,d,l,u,c,_,m,g,p,f=[],h=!1,b=_getDefaultModelsLayout(t);for(o=0,d=e.length;o<d;o++)if(e[o].name==a){for(h=!0,r=0,l=e[o].sections.length;r<l;r++)f.push(jQuery.extend(!0,{},e[o].sections[r]));break}if(!h)for(o=0,u=i.length;o<u;o++){var y=jQuery.extend(!0,{},i[o]);y.targets=_createEmptyTargets(i[o].targets),y.sectionCleared=!0,f.push(y)}for(o=0,c=f.length;o<c;o++)if("true"==f[o].section_is_model.toString()){for(n=0,_=t.length;n<_;n++)if(t[n].id==f[o].section_model_id){for(p=!1,s=0,m=t[n].customizations.length;s<m;s++)if(t[n].customizations[s].name==a){p=!0,f[o].targets=jQuery.extend(!0,[],t[n].customizations[s].targets),f[o].defaultSection=!1,f[o].sectionCleared=!1;break}if(!p)for(s=0,g=b.length;s<g;s++)if(f[o].section_model_id==b[s].id){f[o].targets=_createEmptyTargets(b[s].targets),f[o].sectionCleared=!0;break}break}}else if(0==f[o].targets.length)for(r=0,u=i.length;r<u;r++)if(f[o].section_rex_id==i[r].section_rex_id){f[o].targets=_createEmptyTargets(i[r].targets),f[o].sectionCleared=!0;break}return f},_mergeSections=function(e,t){var i,a,o,r,n,s,d,l,u;if("default"!=Rexbuilder_Util.activeLayout){for(i=0,n=e.length;i<n;i++)for(e[i].sectionFounded=!1,e[i].defaultSection=!1,a=0,s=t.length;a<s;a++)if(e[i].section_rex_id==t[a].section_rex_id){e[i].sectionFounded=!0;var c=e[i],_=t[a];for(("undefined"==typeof c.targets[0]||jQuery.isEmptyObject(c.targets[0].props)||"undefined"!=typeof c.sectionCleared&&c.sectionCleared)&&(c.defaultSection=!0,c.targets=jQuery.extend(!0,[],_.targets)),o=0,d=c.targets.length;o<d;o++){for(u=!1,r=0,l=_.targets.length;r<l;r++)if(c.targets[o].name==_.targets[r].name){if(c.targets[o].notDisplay=!1,u=!0,_.targets[r].oldElement=!0,o>=1&&jQuery.isEmptyObject(c.targets[o].props)&&"default"!=Rexbuilder_Util.activeLayout&&_.targets[0].props.layout!=c.targets[0].props.layout){var m=parseFloat(_.targets[0].props.grid_cell_width),g=5;"masonry"==_.targets[0].props.layout?(c.targets[o].props.gs_y=Math.round(_.targets[r].props.gs_y*g/m),c.targets[o].props.gs_height=Math.round(_.targets[r].props.gs_height*g/m),c.targets[o].props.gs_start_h=Math.round(_.targets[r].props.gs_start_h*g/m)):(c.targets[o].props.gs_y=Math.round(_.targets[r].props.gs_y*m/g),c.targets[o].props.gs_height=Math.round(_.targets[r].props.gs_height*m/g),c.targets[o].props.gs_start_h=Math.round(_.targets[r].props.gs_start_h*m/g))}c.targets[o].props=Rexbuilder_Util.merge(_.targets[r].props,c.targets[o].props);break}u||(c.targets[o].notDisplay=!0)}for(r=0,l=_.targets.length;r<l;r++)if("undefined"==typeof _.targets[r].oldElement){var p=jQuery.extend(!0,{},_.targets[r]);if("default"!=Rexbuilder_Util.activeLayout&&_.targets[0].props.layout!=c.targets[0].props.layout){var m=parseFloat(_.targets[0].props.grid_cell_width),g=5;"masonry"==_.targets[0].props.layout?(p.props.gs_y=Math.round(p.props.gs_y*g/m),p.props.gs_height=Math.round(p.props.gs_height*g/m),p.props.gs_start_h=Math.round(p.props.gs_start_h*g/m)):(p.props.gs_y=Math.round(p.props.gs_y*m/g),p.props.gs_height=Math.round(p.props.gs_height*m/g),p.props.gs_start_h=Math.round(p.props.gs_start_h*m/g))}c.targets.splice(1,0,p)}break}if(0==e.length)for(e=t,i=0,n=e.length;i<n;i++)e[i].defaultSection=!0}for(_createPageCustomizationsDataLive(e),i=0,n=e.length;i<n;i++)(e[i].sectionFounded||"default"==Rexbuilder_Util.activeLayout)&&("default"!=Rexbuilder_Util.activeLayout&&e[i].defaultSection||"default"==Rexbuilder_Util.activeLayout)&&_isMobile()&&(e[i].targets[0].props.collapse_grid=!0,e[i].targets[0].props.noMobileLayoutSaved=!0,e[i].targets[0].props.layout="masonry",e[i].targets[0].props.fullHeight=!1);return jQuery.extend(!0,{},e)},_cssPropertyValueSupported=function(e,t){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t},launchEditDomLayout=function(){var e=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.edit_dom_layout(e)},_edit_dom_layout=function(e){var t={collapse_needed:!1};if(e==Rexbuilder_Util.activeLayout&&"default"==e)return _isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids(),t;if(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,"true"==$rexbuilderLayoutData.children(".layouts-customizations").attr("data-empty-customizations")&&"true"==$rexbuilderModelData.children(".models-customizations").attr("data-empty-models-customizations")){_isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids();var i=[{section_rex_id:document.querySelector(".rexpansive_section.empty-section").getAttribute("data-rexlive-section-id"),targets:[{name:"self",props:{}}]}];return Rexbuilder_Util.editedDataInfo=new RexEditedData(i),t}var a,o,r=[],n=[],s=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),d=s.length;for(a=0;a<d;a++)Rexbuilder_Util.hasClass(s[a],"rex-model-section")&&r.push(parseInt(s[a].getAttribute("data-rexlive-model-id"))),o={rexID:s[a].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(s[a].getAttribute("data-rexlive-model-id")))?"":parseInt(s[a].getAttribute("data-rexlive-model-id"))},n.push(o);var l,u,c=_getPageCustomizations();"default"==Rexbuilder_Util.activeLayout&&_saveCustomizationDomOrder(jQuery.extend(!0,[],c));var _,m=_getModelsCustomizations();"true"==$defaultLayoutState.attr("data-empty-default-customization")?(_=Rexbuilder_Util.getDefaultPageLayout(c,m),_createDefaultLayoutState(_)):(_updateDefaultLayoutState({modelsData:m}),_=_getDefaultLayoutState());var g,p=Rexbuilder_Util.getCustomLayoutSections(c,m,_,e),f=[];for(l=0;l<p;l++)if("true"==p[l].section_is_model.toString()){for(g=!1,u=0;u<f.length;u++)if(f[u].id==p[l].section_model_id){f[u].number=f[u].number+1,p[l].section_model_number=f[u].number,g=!0;break}g||(p[l].section_model_number=1,f.push({id:p[l].section_model_id,number:1}))}if(Rexbuilder_Util.clearSectionsEdited(),"default"!==e&&"tablet"!==e&&"mobile"!==e&&null===document.querySelector('.customization-wrap[data-customization-name="'+e+'"]')){var h,b=guessLayout(e);e!==b?(h=c.filter(function(e){return b===e.name}),h=h[0].sections):h=p}Rexbuilder_Util.editedDataInfo=new RexEditedData("undefined"==typeof b?p:h);var y=_mergeSections("undefined"==typeof b?p:h,_);Rexbuilder_Util.removeCollapsedGrids(),Rexbuilder_Util.domUpdating=!0;var v,x,S,D=!1,C=[];for(v in y)if(!y[v].notInSection||"default"==e){var R={rexID:y[v].section_rex_id,modelID:-1,modelNumber:-1};"true"==y[v].section_is_model.toString()?(R.modelID=y[v].section_model_id,R.modelNumber=y[v].section_model_number,x=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+y[v].section_rex_id+'"][data-rexlive-model-number="'+R.modelNumber+'"]')):x=Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+y[v].section_rex_id+'"]'),x&&!Rexbuilder_Util.hasClass(x,"removing_section")&&("undefined"!=typeof y[v].section_hide&&"true"==y[v].section_hide.toString()?Rexbuilder_Util.addClass(x,"rex-hide-section"):(Rexbuilder_Util.removeClass(x,"rex-hide-section"),S=$(x),t.collapse_needed+=_updateDOMelements(S,y[v].targets,D,v)),C.push(R))}return Rexbuilder_Dom_Util.fixSectionDomOrder(C,!0),Rexbuilder_Util.domUpdating=!1,t},_updateDOMelements=function(e,t,i,a){var o=e.find(".grid-stack-row"),r=o.get(0),n=o.data(),s=n.plugin_perfectGridGalleryEditor;if(t[0].props.gridEdited&&r.setAttribute("data-rexlive-layout-changed",!0),"undefined"!=typeof n&&"undefined"!=typeof s){for(var d=1,l=t.length;d<l;d++){var u=r.querySelector('div[data-rexbuilder-block-id="'+t[d].name+'"]');if(null!==u){var c="undefined"!=typeof t[d].props.hide&&"true"==t[d].props.hide.toString();c?Rexbuilder_Util.hasClass(u,"rex-hide-element")||(Rexbuilder_Util.addClass(u,"rex-hide-element"),s.removeBlock(u)):Rexbuilder_Util.hasClass(u,"rex-hide-element")&&(Rexbuilder_Util.removeClass(u,"rex-hide-element"),s.reAddBlock($(u)))}}s.properties.gridstackInstance.batchUpdate()}var d,_,m,g,p,f,u,h,b,y=t.length;for(d=1;d<y;d++)if((!t[d].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(_=t[d].name,m=t[d].props,g=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+_+'"]'),u=g[0],p=g.children(".rexbuilder-block-data"),f=g.find(".grid-item-content"),g.length>0)){if(h=[].slice.call(u.getElementsByTagName("img")),b=h.length,!Rexbuilder_Util.editorMode&&0!==b){var v;for(v=0;v<b;v++)"true"===h[v].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(h[v]));
}var x={$elem:g,targetProps:m,$itemData:p,$itemContent:f,gridstackInstance:Rexbuilder_Util.editorMode?s.properties.gridstackInstance:null,positionAndSize:!0};Rexbuilder_Util.updateDOMSingleElement(x)}updateSection(e,o,t[0].props,i),Rexbuilder_Util.editorMode&&updateSectionTools(e,o,t[0].props,i);var S="undefined"!=typeof t[0].props.collapse_grid&&("true"==t[0].props.collapse_grid.toString()||i);return"undefined"!=typeof n&&"undefined"!=typeof s&&"undefined"!=typeof s.properties.gridstackInstance&&s.properties.gridstackInstance&&(Rexbuilder_Util.domUpdating=!0,s.properties.gridstackInstance.commit(),handlingGridstackCommitEnd(s,S,t,a)),S},_getDefaultBlockMeasure=function(e){e="undefined"!=typeof e?e:"";var t={defDefaultWidth:3,defDefaultHeight:4,defMobileWidth:12,defMobileHeight:null};if(""!==e){var i=$pageCustomizationsDataDiv.find(".customization-wrap");i.each(function(i,a){for(var o=$(a),r=a.getAttribute("data-customization-name"),n=JSON.parse(o.find(".section-targets[data-section-rex-id="+e+"]").text()),s=0,d=n.length;s<d;s++)if("self"===n[s].name){switch(n[s].props.layout){case"masonry":"mobile"==r?t.defMobileHeight=52:t.defDefaultHeight=Math.ceil(4*n[s].props.grid_cell_width/5);break;case"fixed":"mobile"==r?t.defMobileHeight=4:t.defDefaultHeight=4}break}})}return t.defMobileHeight||(t.defMobileHeight=52),t},_updateModelsLive=function(e,t,i){Rexbuilder_Util.domUpdating=!0;var a,o,r=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),n=r.length;for(a=0;a<n;a++)r[a].getAttribute("data-rexlive-model-id")==e&&r[a].getAttribute("data-rexlive-model-number")!=i&&(o=$(r[a]),_updateDOMelements(o,t,!1));Rexbuilder_Util.domUpdating=!1},_saveCustomizationDomOrder=function(e){var t,i,a,o;$layoutsDomOrder.children().remove();var r=[];for(t=0,a=e.length;t<a;t++){var n=document.createElement("div");for(Rexbuilder_Util.addClass(n,"layout-sections"),n.setAttribute("data-rex-layout-name",e[t].name),r=[],i=0,o=e[t].sections.length;i<o;i++)r.push(e[t].sections[i]);n.textContent=JSON.stringify(r),$(n).appendTo($layoutsDomOrder[0])}},_getPageCustomizationsDom=function(){var e=[];return $layoutsDomOrder.children('.layout-sections:not([data-rex-layout-name="default"])').each(function(t,i){var a=$(i);e.push({name:a.attr("data-rex-layout-name"),sections:JSON.parse(a.text())})}),e},_updatePageCustomizationsDomOrder=function(e){for(var t=0,i=e.length;t<i;t++)$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="'+e[t].name+'"]').text(JSON.stringify(e[t].sections))},_getPageAvaiableLayoutsNames=function(){return JSON.parse($availableLayoutNames.text())},_getLayoutLiveSectionTargets=function(e){var t=[];if(e.hasClass("rex-model-section")){var i=e.attr("data-rexlive-model-id");$liveDataContainer.children().each(function(e,a){var o=$(a);if(i==o.attr("data-model-id"))return t=JSON.parse(o.text()),!1})}else{var a=e.attr("data-rexlive-section-id");$liveDataContainer.children().each(function(e,i){var o=$(i);if(a==o.attr("data-section-rex-id"))return t=JSON.parse(o.text()),!1})}return t},_applyDefaultBlocksDimentions=function(e,t,i){for(var a=_getDefaultLayoutState(),o=e.attr("data-rexlive-section-id"),r=0,n=a.length;r<n;r++)if(o==a[r].section_rex_id){var s=a[r],d=s.targets;i.layout=d[0].props.layout,i.fullHeight=d[0].props.full_height,i.collapsed="undefined"!=typeof d[0].props.collapsed&&d[0].props.collapsed;for(var l=1,u=t.length;l<u;l++)for(var c=0,_=d.length;c<_;c++){var m=t[l];m.name==d[c].name&&(m.props.gs_x=d[c].props.gs_x,m.props.gs_y=d[c].props.gs_y,m.props.gs_width=d[c].props.gs_width,m.props.gs_height=d[c].props.gs_height,m.props.gs_start_h=d[c].props.gs_start_h)}break}},_createDefaultLayoutState=function(e){$defaultLayoutState.children().remove();var t,i;for(t=0,i=e.length;t<i;t++){var a=$(document.createElement("div"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($defaultLayoutState[0])}$defaultLayoutState.removeAttr("data-empty-default-customization")},_updateDefaultLayoutState=function(e){var t,i,a,o,r,n,s="undefined"==typeof e.pageData?[]:e.pageData,d="undefined"==typeof e.modelsData?[]:e.modelsData;if(0==s.length)$defaultLayoutState.children(".section-targets").each(function(e,t){var r=$(t),n=isNaN(parseInt(r.attr("data-model-id")))?-1:parseInt(r.attr("data-model-id"));if(n!=-1)for(i=0;i<d.length;i++)if(n==d[i].id){for(a=0,o=d[i].customizations.length;a<o;a++)if("default"==d[i].customizations[a].name){r.text(JSON.stringify(d[i].customizations[a].targets));break}break}});else for($defaultLayoutState.children(".section-targets").remove(),t=0,r=s.length;t<r;t++){var l=$(document.createElement("div"));if(l.addClass("section-targets"),l.attr("data-section-rex-id",s[t].section_rex_id),l.attr("data-model-id",s[t].section_model_id),l.attr("data-model-number",s[t].section_model_number),l.attr("data-section-hide",s[t].section_hide),""==s[t].section_model_id||s[t].section_model_id==-1)l.text(JSON.stringify(s[t].targets));else if(s[t].section_model_id!=-1)for(i=0,n=d.length;i<n;i++)if(s[t].section_model_id==d[i].id){for(a=0,o=d[i].customizations.length;a<o;a++)if("default"==d[i].customizations[a].name){l.text(JSON.stringify(d[i].customizations[a].targets));break}break}l.appendTo($defaultLayoutState[0])}},_updateDefaultLayoutStateDOMOrder=function(e){var t=_getDefaultLayoutState();e=jQuery.extend(!0,[],e);var i,a,o,r,n,s,d=[];for(i=0,o=e.length;i<o;i++)if(e[i].modelID!=-1){for(s=!1,a=0,r=d.length;a<r;a++)if(d[a].id==e[i].modelID){d[a].number=d[a].number+1,e[i].modelNumber=d[a].number,s=!0;break}s||(d.push({id:e[i].modelID,number:1}),e[i].modelNumber=1)}var l,u=[];for(i=0,o=e.length;i<e;i++){for(a=0,n=t.length;a<n;a++)e[i].modelID!=-1?e[i].modelID==t[a].section_model_id&&e[i].modelNumber==t[a].section_model_number&&(l=t.splice(a,1)):e[i].rexID==t[a].section_rex_id&&(l=t.splice(a,1));u.push(l[0])}_updateDefaultLayoutState({pageData:u})},_updateDefaultLayoutStateSection=function(e,t){var i=e[0];t="undefined"==typeof t?-1:t,Rexbuilder_Dom_Util.fixModelNumbers();var a=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),o=!1;if(hasClass(i,"rex-model-section")){var r,n=i.getAttribute("data-rexlive-model-id"),s=i.getAttribute("data-rexlive-section-number"),d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets")),l=d.length;for(r=0;r<l;r++)n==d[r].getAttribute("data-model-id")&&(d[r].textContent=JSON.stringify(a),s==d[r].getAttribute("data-model-number")&&(o=!0))}else{var r,u=i.getAttribute("data-rexlive-section-id"),d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets")),l=d.length;for(r=0;r<l;r++)u==d[r].getAttribute("data-section-rex-id")&&(d[r].textContent=JSON.stringify(a),o=!0)}if(!o){var c={section_rex_id:i.getAttribute("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1};c.section_hide=hasClass(i,"rex-hide-section"),hasClass(i,"rex-model-section")&&(c.section_is_model=!0,c.section_model_id=i.getAttribute("data-rexlive-model-id"),c.section_model_number=i.getAttribute("data-rexlive-model-number"));var _=document.createElement("div");addClass(_,"section-targets"),_.setAttribute("data-section-rex-id",c.section_rex_id),_.setAttribute("data-model-id",c.section_model_id),_.setAttribute("data-model-number",c.section_model_number),_.setAttribute("data-section-hide",c.section_hide),_.textContent=JSON.stringify(a);var m=$(_);if(t==-1)m.appendTo($defaultLayoutState[0]);else{var g;t-=1,$defaultLayoutState.children(".section-targets").each(function(e,i){if(e==t)return g=$(i),!1}),g.after(m[0])}}},_getDefaultLayoutState=function(){var e=[];return $defaultLayoutState.children(".section-targets").each(function(t,i){var a=$(i),o=a.attr("data-section-rex-id"),r=isNaN(parseInt(a.attr("data-model-id")))?-1:parseInt(a.attr("data-model-id")),n=isNaN(parseInt(a.attr("data-model-number")))?-1:parseInt(a.attr("data-model-number")),s="undefined"!=typeof a.attr("data-section-hide")&&"1"==a.attr("data-section-hide").toString(),d=""!=a.text()?JSON.parse(a.text()):[];e.push({section_rex_id:o,section_model_id:r!=-1?r:"",section_model_number:n!=-1?n:"",section_is_model:r!=-1,section_hide:s,targets:d})}),e},_updateSectionOrderCustomLayouts=function(e,t){var i,a,o,r,n,s,d,l=Rexbuilder_Util.getPageCustomizationsDom();for(o=0,n=t.length;o<n;o++)if(t[o].rexID==e.rexID&&t[o].modelNumber==e.modelNumber&&t[o].modelID==e.modelID){a=o;break}for(o=0,s=l.length;o<s;o++){for(i=!1,r=0,d=l[o].sections.length;r<d;r++)if(l[o].sections[r].section_is_model){if(l[o].sections[r].section_model_id==e.modelID&&l[o].sections[r].section_model_number==e.modelNumber){"undefined"!=typeof l[o].sections[r].section_created_live&&"true"==l[o].sections[r].section_created_live.toString()&&(i=!0);break}}else if(e.rexID==l[o].sections[r].section_rex_id){"undefined"!=typeof l[o].sections[r].section_created_live&&"true"==l[o].sections[r].section_created_live.toString()&&(i=!0);break}if(i){var u=l[o].sections.splice(r,1)[0];l[o].sections.splice(a,0,u)}}Rexbuilder_Util.updatePageCustomizationsDomOrder(l)},_updateSectionStateLive=function(e){Rexbuilder_Dom_Util.fixModelNumbers();var t=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),i=!1;if(e.hasClass("rex-model-section")){var a=e.attr("data-rexlive-model-id");$liveDataContainer.children().each(function(e,o){var r=$(o);a==r.attr("data-model-id")&&(r.text(JSON.stringify(t)),i=!0)})}else{var o=e.attr("data-rexlive-section-id");$liveDataContainer.children().each(function(e,a){var r=$(a);o==r.attr("data-section-rex-id")&&(r.text(JSON.stringify(t)),i=!0)})}if(!i){var r={section_rex_id:e.attr("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1};r.section_hide=e.hasClass("rex-hide-section"),e.hasClass("rex-model-section")&&(r.section_is_model=!0,r.section_model_id=e.attr("data-rexlive-model-id"),r.section_model_number=e.attr("data-rexlive-model-number"));var n=$(document.createElement("div"));n.addClass("section-targets"),n.attr("data-section-rex-id",r.section_rex_id),n.attr("data-model-id",r.section_model_id),n.attr("data-model-number",r.section_model_number),n.attr("data-section-hide",r.section_hide),n.text(JSON.stringify(t)),n.appendTo($liveDataContainer[0])}},_getGridLayoutLive=function(e){var t,i={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){var a=e.attr("data-rexlive-model-id");$liveDataContainer.children(".section-targets").each(function(e,i){var o=$(i);a==o.attr("data-model-id")&&(t=JSON.parse(o.text()))})}else{var o=e.attr("data-rexlive-section-id");$liveDataContainer.children(".section-targets").each(function(e,i){var a=$(i);o==a.attr("data-section-rex-id")&&(t=JSON.parse(a.text()))})}return i.layout=t[0].props.layout,i.fullHeight=t[0].props.full_height,i.collapsed=t[0].props.collapse_grid,i},_getLayoutSectionTargets=function(e,t){t="undefined"==typeof t?"default":t;var i,a,o,r,n,s,d=[];if(e.hasClass("rex-model-section")){var l=e.attr("data-rexlive-model-id"),u=_getModelsCustomizations();for(i=0,o=u.length;i<o;i++)if(u[i].id==l){for(a=0,r=u[i].customizations.length;a<r;a++)if(u[i].customizations[a].name==t){d=jQuery.extend(!0,[],u[i].customizations[a].targets);break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(i=0,n=_.length;i<n;i++)if(_[i].name==t&&"undefined"!=typeof _[i].sections){for(a=0,s=_[i].sections.length;a<s;a++)if(_[i].sections[a].section_rex_id==c){d=jQuery.extend(!0,[],_[i].sections[a].targets);break}break}}return d},_getDefaultBlockProps=function(e,t){var i,a,o=_getLayoutSectionTargets(e,"default"),r={};for(i=1,a=o.length;i<a;i++)if(o[i].name==t){r=jQuery.extend(!0,{},o[i].props);break}return r},_getGridLayout=function(e,t){t="undefined"==typeof t?"default":t;var i,a,o,r,n,s,d={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){var l=e.attr("data-rexlive-model-id"),u=_getModelsCustomizations();for(i=0,o=u.length;i<o;i++)if(u[i].id==l){for(a=0,r=u[i].customizations.length;a<r;a++)if(u[i].customizations[a].name==t){d.layout=u[i].customizations[a].targets[0].props.layout,d.fullHeight=u[i].customizations[a].targets[0].props.full_height,d.collapsed=u[i].customizations[a].targets[0].props.collapse_grid;break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(i=0,n=_.length;i<n;i++)if(_[i].name==t&&"undefined"!=typeof _[i].sections&&null!==typeof _[i].sections){for(a=0,s=_[i].sections.length;a<s;a++)if(_[i].sections[a].section_rex_id==c){0!=_[i].sections[a].targets.length&&(d.layout=_[i].sections[a].targets[0].props.layout,d.fullHeight=_[i].sections[a].targets[0].props.full_height,d.collapsed=_[i].sections[a].targets[0].props.collapse_grid);break}break}}return d},_customizationExists=function(e){var t,i,a=!1,o=[];for(""!=$availableLayoutNames.text()&&(o=JSON.parse($availableLayoutNames.text())),t=0,i=o.length;t<i;t++)if(o[t]==e){a=!0;break}return a},updateSection=function(e,t,i,a){var o=e.children(".section-data"),r=isNaN(parseInt(i.video_bg_id))?"":parseInt(i.video_bg_id),n="undefined"==typeof i.video_bg_url_section?"":i.video_bg_url_section,s="undefined"==typeof i.video_bg_url_vimeo_section?"":i.video_bg_url_vimeo_section,d="";""!=r?d="mp4":""!=s?d="vimeo":""!=n&&(d="youtube");var l="undefined"!==i.custom_classes&&-1!==i.custom_classes.indexOf("rex-video--with-audio"),u={mp4Data:{idMp4:r,linkMp4:"undefined"==typeof i.video_mp4_url?"":i.video_mp4_url,width:"undefined"==typeof i.video_bg_width_section?"":i.video_bg_width_section,height:"undefined"==typeof i.video_bg_height_section?"":i.video_bg_height_section},vimeoUrl:s,youtubeUrl:n,audio:l,typeVideo:d};Rexbuilder_Dom_Util.updateSectionVideoBackground(e,u),Rexbuilder_Util.editorMode&&t.perfectGridGalleryEditor("fixVideoProportion");var c={active:"undefined"==typeof i.image_bg_section_active||i.image_bg_section_active.toString(),idImage:isNaN(parseInt(i.id_image_bg_section))?"":parseInt(i.id_image_bg_section),urlImage:i.image_bg_section,width:parseInt(i.image_width),height:parseInt(i.image_height)},_={color:i.row_overlay_color,active:"undefined"!=typeof i.row_overlay_active&&i.row_overlay_active.toString()};Rexbuilder_Dom_Util.updateImageBG(e,c);var m={color:"undefined"!=typeof i.color_bg_section?i.color_bg_section:"",active:"undefined"==typeof i.color_bg_section_active||i.color_bg_section_active.toString()};-1===m.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionBackgroundColor(e,m):Rexbuilder_Dom_Util.updateSectionBackgroundGradient(e,m),-1===_.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionOverlay(e,_):Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,_);var g={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)};Rexbuilder_Dom_Util.updateSectionMarginsData(e,g),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1,i.layout=o.attr("data-layout"));var p={gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:"undefined"!=typeof i.collapse_grid&&("true"==i.collapse_grid.toString()||a),noMobileLayoutSaved:!!i.noMobileLayoutSaved};Rexbuilder_Dom_Util.updateRow(e,o,t,p);var f="undefined"==typeof i.section_name?"":i.section_name;Rexbuilder_Dom_Util.updateSectionName(e,f),e.attr("data-type",i.type);var h="undefined"==typeof i.custom_classes?"":i.custom_classes,b=[];""!=h&&(h=h.trim(),b=h.split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(e,b);var y="undefined"!=typeof i.section_edited&&"true"==i.section_edited.toString();e.attr("data-rexlive-section-edited",y)},updateSectionTools=function(e,t,i,a){var o={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)};Rexbuilder_Section.fixSectionToolbox(e,o),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1);var r={gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:"undefined"!=typeof i.collapse_grid&&("true"==i.collapse_grid.toString()||a)};Rexbuilder_Section.fixBlockToolsAccordingToSeparator(e,r)},_updateElementDimensions=function(e,t,i){var a=parseInt(i.x),o=parseInt(i.y),r=parseInt(i.w),n=parseInt(i.h),s=parseInt(i.startH),d=(parseInt(i.increaseHeight),parseInt(i.realFluid));"undefined"!=typeof i.gridstackInstance&&i.gridstackInstance?i.gridstackInstance.update(e,a,o,r,n):(e.setAttribute("data-gs-height",n),e.setAttribute("data-gs-width",r),e.setAttribute("data-gs-y",o),e.setAttribute("data-gs-x",a)),t.setAttribute("data-gs_start_h",s),t.setAttribute("data-gs_width",r),t.setAttribute("data-gs_height",n),t.setAttribute("data-gs_y",o),t.setAttribute("data-gs_x",a),t.setAttribute("data-element_real_fluid",d)},_detect_mobile=function(){"ontouchstart"in document.documentElement?Rexbuilder_Util.addClass(document.body,"touch"):Rexbuilder_Util.addClass(document.body,"no-touch")},_viewport=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},_merge=function(e,t){var i={},a=function(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?i[t]=merge(i[t],e[t]):i[t]=e[t])};return a(e),a(t),i},getYoutubeID=function(e){var t;return t=e.indexOf("youtu.be")>0?e.substr(e.lastIndexOf("/")+1,e.length):e.indexOf("http")>-1?e.match(/[\\?&]v=([^&#]*)/)[1]:e.length>15?null:e},_checkPresentationPage=function(){return 0!==$(".rexpansive_portfolio_presentation").length},_checkStaticPresentationPage=function(){return 0!==$(".rexpansive-static-portfolio").length},_checkPost=function(){return 0!==$("#rex-article").length},_whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},_whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},doneResizing=function(){if(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.editorMode){if(!Rexbuilder_Util_Editor.changedLayout)return"default"===Rexbuilder_Util.chosenLayoutData.id&&_updateGridsHeights(),void(Rexbuilder_Util.windowIsResizing=!1);Rexbuilder_Util_Editor.changedLayout=!1;var e=_edit_dom_layout(Rexbuilder_Util_Editor.clickedLayoutID);0===e.collapse_needed?Rexbuilder_Util_Editor.endLoading():Rexbuilder_Util.$document.one("rexlive:collapsingElementsEnded",function(e){Rexbuilder_Util_Editor.endLoading()})}Rexbuilder_Util.windowIsResizing=!1,Rexbuilder_Util.loadWidth=Rexbuilder_Util.globalViewport.width},_set_initial_grids_state=function(e){if(e="undefined"!=typeof e?e:"default",Rexbuilder_Util.rexContainer){var t,i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),a=i.length;for(t=0;t<a;t++){for(var o=$(i[t]),r=o.find(".grid-stack-row"),n=r.data().plugin_perfectGridGalleryEditor,s=Rexbuilder_Util.getSectionCustomLayouts(i[t].getAttribute("data-rexlive-section-id")),d=null,l=null,u=0;u<s.length;u++){if("default"===s[u].name&&(l=u),s[u].name===e){d=u;break}u==s.length-1&&(d=l)}for(var c=[],u=0,_=s[d].targets.length;u<_;u++)if("self"!==s[d].targets[u].name){var m={};m.el=o.find(".perfect-grid-item[data-rexbuilder-block-id="+s[d].targets[u].name+"]"),m.x=parseInt(s[d].targets[u].props.gs_x),m.y=parseInt(s[d].targets[u].props.gs_y),m.width=parseInt(s[d].targets[u].props.gs_width),m.height=parseInt(s[d].targets[u].props.gs_height),c.push(m)}n.set_grid_initial_state(c)}}},_updateGridsHeights=function(){if(Rexbuilder_Util.rexContainer){var e,t,i,a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-row")),o=a.length;for(e=0;e<o;e++){t=$(a[e]),i=t.data().plugin_perfectGridGalleryEditor,void 0!==i&&(i.batchGridstack(),i._defineDynamicPrivateProperties(),i.updateGridstackStyles(),i.setFullWidthNaturalBackground(),i.setNaturalBackground(),i.updateBlocksHeight(),i.fixVideoProportion(),i.commitGridstack());var r=jQuery.Event("rexlive:updateGridsHeights");r.settings={$row:t},Rexbuilder_Util.$document.trigger(r)}}},_stopBlockVideos=function(e){_stopVideo(e.find(".grid-item-content"))},_playBlockVideos=function(e){_playVideoFromBegin(e.find(".grid-item-content"))},_stopPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");$.each(t,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(i,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(a,function(e,t){Rexbuilder_Util.stopVideo($(t))})},_playPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");Rexbuilder_Util.editorMode&&$.each(t,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(i,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(a,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))})},_stopVideo=function(e){if(e.hasClass("mp4-player")){var t=e.children(".rex-video-wrap").find("video")[0];t.currentTime=0,t.pause()}else if(e.hasClass("vimeo-player")){var i=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);i&&i.unload()}else if(e.hasClass("youtube-player")){if(void 0===e.children(".rex-youtube-wrap").YTPGetPlayer())return;e.children(".rex-youtube-wrap").YTPStop()}},_fixVideosAudioSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");Rexbuilder_Util.fixVideoAudio(e),$.each(t,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(i,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(a,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))})},_fixYoutube=function(e){var t,i=[].slice.call(e.getElementsByClassName("rex-youtube-wrap")),a=i.length;for(t=0;t<a;t++){var o=$(i[t]),r=o.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),n=o.YTPGetPlayer();void 0!==n&&(o.optimizeDisplay(),o.YTPPlay(),0==r.length||r.hasClass("user-has-muted")?(n.mute(),n.isMute=!0,n.setVolume(0)):o.YTPUnmute())}},_fixVideoAudio=function(e){var t=e.children("rex-video-toggle-audio");if(e.hasClass("mp4-player")){var i=e.children(".rex-video-wrap").find("video")[0];0==t.length||t.hasClass("user-has-muted")?$(i).prop("muted",!0):$(i).prop("muted",!1)}else if(e.hasClass("vimeo-player")){var a=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);0==t.length||t.hasClass("user-has-muted")?a&&a.setVolume(0):a.setVolume(1)}else if(e.hasClass("youtube-player")){var o=e.children(".rex-youtube-wrap"),r=o.YTPGetPlayer();void 0!==r&&(0==t.length||t.hasClass("user-has-muted")?(r.mute(),r.isMute=!0,r.setVolume(0)):o.YTPUnmute())}},_playVideoFromBegin=function(e){var t=!1;if(e.hasClass("mp4-player")){var i=e.children(".rex-video-wrap").find("video")[0];i.currentTime=0,i.play(),t=!0}else if(e.hasClass("vimeo-player")){var a=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);null!==a&&a.play(),t=!0}else if(e.hasClass("youtube-player")){var o=e.children(".rex-youtube-wrap");if(0==o.length)return;var r=o.YTPGetPlayer();if(void 0===r)return;o.YTPPlay(),t=!0}t&&setTimeout(Rexbuilder_Util.fixVideoAudio.bind(null,e),500)},setContainer=function(e){this.$rexContainer=e},_parents=function(e,t){for(;e.parentNode;){if(_matches(e,t))return e;e=e.parentNode}return null},_matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},_transitionEvent="",_animationEvent="",_getGalleryInstance=function(e){var t=e.find(".grid-stack-row");return 0==t.length?null:t.data().plugin_perfectGridGalleryEditor},removeCollapsedGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length;for(e=0;e<i;e++){var a=_getGalleryInstance($(t[e]));Rexbuilder_Dom_Util.collapseGrid(a,!1,a.properties.dispositionBeforeCollapsing,a.properties.layoutBeforeCollapsing)}}},collapseAllGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length;for(e=0;e<i;e++){var a=_getGalleryInstance($(t[e]));a._defineDynamicPrivateProperties(),a.collapseElements()}}},_startVideoPlugin=function(e){if(e.hasClass("mp4-player"));else if(e.hasClass("vimeo-player")){var t=e.children(".rex-video-vimeo-wrap").find("iframe")[0],i={autoplay:!0,background:!0,loop:!0};VimeoVideo.addPlayer("1",t,i)}else e.hasClass("youtube-player")&&void 0===e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPlayer()},_destroyVideo=function(e,t){var i="";return e.hasClass("mp4-player")?(i="mp4",Rexbuilder_Dom_Util.removeMp4Video(e,t)):e.hasClass("vimeo-player")?(i="vimeo",Rexbuilder_Dom_Util.removeVimeoVideo(e,t)):e.hasClass("youtube-player")&&(i="youtube",Rexbuilder_Dom_Util.removeYoutubeVideo(e,t)),i},_pauseVideo=function(e){if(e.hasClass("mp4-player"))e.children(".rex-video-wrap").find("video")[0].pause();else if(e.hasClass("vimeo-player")){var t=VimeoVideo.findVideo(e.find(".rex-video-vimeo-wrap").find("iframe")[0]);t.pause()}else if(e.hasClass("youtube-player")){if(void 0===e.children(".rex-youtube-wrap").YTPGetPlayer())return;e.children(".rex-youtube-wrap").YTPPause()}},_launchVideoPlugins=function(){var ytVideos=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rex-youtube-wrap")),i,tot_ytVideos=ytVideos.length,$ytVideo,data_yt,url,id;if(jQuery.browser.mobile)for(i=0;i<tot_ytVideos;i++)data_yt=eval("("+ytVideos[i].getAttribute("data-property")+")"),url=data_yt.videoURL,id=getYoutubeID(url),ytVideos[i].style.backgroundImage="url(https://img.youtube.com/vi/"+id+"/0.jpg)",ytVideos[i].addEventListener("click",handleYtbVideoMobileClick);else for(i=0;i<tot_ytVideos;i++){if($ytVideo=$(ytVideos[i]),void 0===$ytVideo.YTPGetPlayer()&&!Rexbuilder_Util.hasClass(ytVideos[i],"youtube-player-launching"))return void $ytVideo.YTPlayer();Rexbuilder_Util.removeClass(ytVideos[i],"youtube-player-launching")}VimeoVideo.init()},_playAllVideos=function(){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("mp4-player")),i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("vimeo-player")),a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("youtube-player")),o=t.length,r=i.length,n=a.length;if(Rexbuilder_Util.editorMode)for(e=0;e<o;e++)Rexbuilder_Util.playVideo($(t[e]));for(e=0;e<r;e++)Rexbuilder_Util.playVideo($(i[e]));for(e=0;e<n;e++)Rexbuilder_Util.playVideo($(a[e]))},_playVideo=function(e){var t=e[0];if("undefined"!=typeof t)if(Rexbuilder_Util.hasClass(t,"mp4-player")){var i=t.querySelector("video");i&&i.play()}else if(Rexbuilder_Util.hasClass(t,"vimeo-player")){var a=VimeoVideo.findVideo(t.querySelector("iframe"));a&&a.play()}else if(Rexbuilder_Util.hasClass(t,"youtube-player")){var o=t.querySelector(".rex-youtube-wrap");if(!o)return;var r=$(o);if(void 0===r.YTPGetPlayer())return;r.YTPPlay()}},_getPaddingsDataString=function(e){var t={top:"5",right:"5",bottom:"5",left:"5",type:"px"};if(""!=e){var i=e.split(/;/gm);t.top=parseInt(i[0].split(/\D+/gm)[0]),t.right=parseInt(i[1].split(/\D+/gm)[0]),t.bottom=parseInt(i[2].split(/\D+/gm)[0]),t.left=parseInt(i[3].split(/\D+/gm)[0]);var a="";a=i[0].indexOf("%")!=-1?"%":"px",t.type=a}return t},_paddingsToString=function(e){var t="";return t+=""+e.top+e.type+";",t+=""+e.right+e.type+";",t+=""+e.bottom+e.type+";",t+=""+e.left+e.type+";"},getCoord=function(e,t){return t="undefined"!=typeof t?t:12,{x:e%t,y:Math.floor(e/t)}},_diffStrings=function(e,t){t="undefined"!=typeof t?t:" ";for(var i=e.join(" "),a=i.split(t),o={},r=[],n=0,s=a.length;n<s;n++)o[a[n]]="undefined"!=typeof o[a[n]]?o[a[n]]+1:1;for(var d in o)1===o[d]&&r.push(d);return r},init=function(){this.globalViewport=Rexbuilder_Util.viewport(),this.firstStart=!0,this.isIframe=window.location!==window.parent.location,_plugin_frontend_settings.scroll_animation_offset=0,Rexbuilder_Util.changedFrontLayout=!1,_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing?this.editorMode=!0:this.editorMode=!1,this._transitionEvent=_whichTransitionEvent(),this._animationEvent=_whichAnimationEvent(),this.$window=$(window),this.$document=$(document),this.$body=$("body"),$bodyHtml=$("body, html"),this.galleryPluginActive=!1,_detect_mobile(),$rexbuilderLayoutData=$(document.getElementById("rexbuilder-layout-data")),$rexbuilderModelData=$(document.getElementById("rexbuilder-model-data")),$availableLayoutNames=$(document.getElementById("available-layouts-names"));var e=$(document.getElementById("layout-avaiable-dimensions"));frontAvailableLayouts=e.length>0?JSON.parse(e.text()):[];var t=$availableLayoutNames.text();layoutSavedInfo=frontAvailableLayouts.filter(function(e){return-1!==t.indexOf(e.id)}),this.editorMode||(Rexbuilder_Util.startFrontLayout=_findFrontLayout()),$modelsCustomizationsDataDiv=$("#rexbuilder-model-data").children(".models-customizations").eq(0),$pageCustomizationsDataDiv=$rexbuilderLayoutData.children(".layouts-customizations").eq(0),$liveDataContainer=$("#rexbuilder-layout-data-live"),$layoutsDomOrder=$("#rexbuilder-layouts-sections-order"),$defaultLayoutState=$("#rexbuilder-default-layout-state"),$usedIDSContainer=$("#sections-ids-used"),_storeNamesUsed(),this.$rexContainer=$(".rex-container"),this.rexContainer=this.$rexContainer[0],this.backendEdited=!1,Rexbuilder_Util.$rexContainer.length>0&&"true"==Rexbuilder_Util.$rexContainer.attr("data-backend-edited").toString()&&(Rexbuilder_Util.$rexContainer.addClass("backend-edited"),this.backendEdited=!0),this.lastSectionNumber=-1,this.activeLayout="",this.domUpdating=!1;var i=this.$rexContainer.children(".rexpansive_section").eq(0).attr("data-rex-collapse-grid");this.blockGridUnder768="undefined"!=typeof i&&"false"==i.toString(),this.chosenLayoutData=null,this.loadWidth=Rexbuilder_Util.globalViewport.width,_updateSectionsID(),Rexbuilder_Dom_Util.fixModelNumbers(),_updateSectionsNumber(),this.firstStart=!1};return{init:init,viewport:_viewport,getYoutubeID:getYoutubeID,transitionEvent:_transitionEvent,animationEvent:_animationEvent,checkPresentationPage:_checkPresentationPage,checkStaticPresentationPage:_checkStaticPresentationPage,editorMode:editorMode,windowIsResizing:windowIsResizing,launchVideoPlugins:_launchVideoPlugins,stopPluginsSection:_stopPluginsSection,playPluginsSection:_playPluginsSection,stopBlockVideos:_stopBlockVideos,playBlockVideos:_playBlockVideos,chooseLayout:chooseLayout,predictLayout:predictLayout,setContainer:setContainer,createSectionID:_createSectionID,createBlockID:createBlockID,addSectionID:_addSectionID,removeSectionID:_removeSectionID,createRandomID:createRandomID,createRandomNumericID:_createRandomNumericID,responsiveLayouts:responsiveLayouts,defaultLayoutSections:defaultLayoutSections,launchEditDomLayout:launchEditDomLayout,edit_dom_layout:_edit_dom_layout,
smoothScroll:_smoothScroll,getGalleryInstance:_getGalleryInstance,removeCollapsedGrids:removeCollapsedGrids,collapseAllGrids:collapseAllGrids,stopVideo:_stopVideo,playVideoFromBegin:_playVideoFromBegin,pauseVideo:_pauseVideo,playVideo:_playVideo,destroyVideo:_destroyVideo,startVideoPlugin:_startVideoPlugin,getPaddingsDataString:_getPaddingsDataString,paddingsToString:_paddingsToString,playAllVideos:_playAllVideos,findLayoutType:_findLayoutType,updateModelsLive:_updateModelsLive,getLayoutSectionTargets:_getLayoutSectionTargets,updateElementDimensions:_updateElementDimensions,getGridLayout:_getGridLayout,customizationExists:_customizationExists,getDefaultBlockProps:_getDefaultBlockProps,fixVideosAudioSection:_fixVideosAudioSection,fixVideoAudio:_fixVideoAudio,fixYoutube:_fixYoutube,saveCustomizationDomOrder:_saveCustomizationDomOrder,getDefaultPageLayout:_getDefaultPageLayout,getModelsCustomizations:_getModelsCustomizations,updateModelsCustomizationsData:_updateModelsCustomizationsData,getPageCustomizations:_getPageCustomizations,updatePageCustomizationsData:_updatePageCustomizationsData,updatePageAvaiableLayoutsNames:_updatePageAvaiableLayoutsNames,getPageAvaiableLayoutsNames:_getPageAvaiableLayoutsNames,updateDivModelCustomizationsNames:_updateDivModelCustomizationsNames,getSectionCustomLayouts:_getSectionCustomLayouts,getLayoutLiveSectionTargets:_getLayoutLiveSectionTargets,getGridLayoutLive:_getGridLayoutLive,getCustomLayoutSections:_getCustomLayoutSections,updateSectionStateLive:_updateSectionStateLive,updatePageCustomizationsDomOrder:_updatePageCustomizationsDomOrder,getPageCustomizationsDom:_getPageCustomizationsDom,updateDefaultLayoutState:_updateDefaultLayoutState,updateDefaultLayoutStateSection:_updateDefaultLayoutStateSection,updateDefaultLayoutStateDOMOrder:_updateDefaultLayoutStateDOMOrder,getDefaultLayoutState:_getDefaultLayoutState,updateSectionOrderCustomLayouts:_updateSectionOrderCustomLayouts,updateGridsHeights:_updateGridsHeights,getSectionNamesUsed:_getSectionNamesUsed,saveSectionNamesUsed:_saveSectionNamesUsed,updateDOMSingleElement:_updateDOMSingleElement,getDefaultBlockMeasure:_getDefaultBlockMeasure,doneResizing:doneResizing,getCoord:getCoord,diffStrings:_diffStrings,applyDefaultBlocksDimentions:_applyDefaultBlocksDimentions,isMobile:_isMobile,cssPropertyValueSupported:_cssPropertyValueSupported,changedFrontLayout:changedFrontLayout,startFrontLayout:startFrontLayout,findFrontLayout:_findFrontLayout,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,parents:_parents,rtimeOut:rtimeOut,rInterval:rInterval,merge:_merge,handleLayoutChange:handleLayoutChange,removeArrayDuplicates:removeArrayDuplicates,isOrIsChild:isOrIsChild,clearSectionsEdited:clearSectionsEdited}}(jQuery);
var Rexbuilder_Photoswipe=function(e){"use strict";function t(e){for(var t,r,i,n,l=e.length,a=0,s=0;a<l;a++)for(t=Array.prototype.slice.call(e[a].querySelectorAll(".rex-slider-element")),r=t.length,s=0;s<r;s++)i=t[s].querySelector(".pswp-item"),n=t[s].querySelector(".slider-overlay"),i&&n&&i.appendChild(n)}var r="",i=function(e){var t=e.target,r=t.getAttribute("data-inline-pswp-info");if("undefined"!=typeof r&&""!==r){var i=document.querySelectorAll(".pswp")[0],n=!1,l=JSON.parse(r),a={galleryUID:t.getAttribute("data-pswp-uid"),closeOnScroll:!1,showHideOpacity:!0};n&&(a.showAnimationDuration=0);var s=new PhotoSwipe(i,PhotoSwipeUI_Default,l,a);s.init()}},n=function(e,t,r,i,n){if(!e.parents(".grid-stack-item").hasClass("block-has-slider")){tmpl.arg="image";var l=e.parents(".grid-stack-item-content");if(0==e.parents(".pswp-figure").length){e.parent().prepend(tmpl("tmpl-photoswipe-block",{link:t,width:r,height:i,type:n}));var a=l.find(".pswp-item");e.detach().appendTo(a)}}},l=function(t){var r=t.attr("class").split(" ")[1];tmpl.arg="image",t.before(tmpl("tmpl-photoswipe-block-inline",{link:t.attr("src"),width:t.css("width"),height:t.css("height"),type:"natural",align:r}));var i=t.parents(".text-wrap").find(".pswp-item"),n=i.filter(function(t){return 3==e(this).children().length});t.detach().appendTo(n)},a=function(e){var t=e.parents(".pswp-figure");if(0!=t.length){var r=t.parent();e.detach().appendTo(r),t.remove()}},s=function(t){for(var r,i,n,l,a=e(t).find(".pswp-figure").get(),s=a.length,p=[],o=0;o<s;o++)r=a[o],1===r.nodeType&&(i=r.children[0],n=i.getAttribute("data-size").replace("px","").split("x"),l={src:i.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},r.children.length>1&&(l.title=r.children[1].innerHTML),i.children.length>0&&(l.msrc=i.children[0].getAttribute("data-thumburl")),l.pid=o,l.el=r,p.push(l));return p},p=function h(e,t){return e&&(t(e)?e:h(e.parentNode,t))},o=function(t){if(t=t||window.event,!(e(t.target).parents(".perfect-grid-item").find(".element-link").length>0||"a"===t.target.tagName.toUpperCase())){var i=t.target||t.srcElement,n=p(i,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(n){t.preventDefault?t.preventDefault():t.returnValue=!1;for(var l,a=e(n).parents(r)[0],s=Array.prototype.slice.call(a.getElementsByClassName("pswp-figure")),o=s.length,d=0,u=0;u<o;u++)if(1===s[u].nodeType){if(s[u]===n){l=d;break}d++}return l>=0&&f(l,a),!1}}},d=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var r=e.split("&"),i=0;i<r.length;i++)if(r[i]){var n=r[i].split("=");n.length<2||(t[n[0]]=n[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},u=function(){var e={eventName:"popUpContent:pswpOpened"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},c=function(){var e={eventName:"popUpContent:pswpClosed"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},f=function(t,r,i,n){var l,a,p,o=document.querySelectorAll(".pswp")[0];if(p=s(r),a={galleryUID:r.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=p[e].el.getElementsByClassName("pswp-item-thumb")[0],r=p[e].el.getElementsByClassName("rex-custom-scrollbar")[0],i=window.pageYOffset||document.documentElement.scrollTop,n=r.getBoundingClientRect(),l=t.getAttribute("data-thumb-image-type");return"natural"==l?{x:n.left,y:n.top+i,w:n.width}:null},galleryPIDs:!0,closeOnScroll:!1,showHideOpacity:!0},n)if(a.galleryPIDs){for(var d=0,f=p.length;d<f;d++)if(p[d].pid==t){a.index=d;break}}else a.index=parseInt(t,10)-1;else a.index=parseInt(t,10);if(Rexbuilder_Util.hasClass(r,"split-scrollable")){var g=e(r).find(".pswp-figure").eq(t).parents(".opacity-block").find(".pswp-figure").get(),h=e(r).find(".pswp-figure").eq(t).get(0);a.index=g.indexOf(h),p=p.filter(function(e){for(var t=0;t<g.length;t++)if(e.el===g[t])return!0;return!1})}else{var m=0!==Array.prototype.slice.call(r.getElementsByClassName("block-has-slider")).length;if(m){var w=Rexbuilder_Util.parents(p[t].el,".perfect-grid-item"),v=!1;w&&Rexbuilder_Util.hasClass(w,"block-has-slider")&&(v=!0),p=p.filter(function(e){var t=Rexbuilder_Util.parents(e.el,".perfect-grid-item");return!t||(Rexbuilder_Util.hasClass(t,"block-has-slider")?!!v:!v)})}}isNaN(a.index)||(i&&(a.showAnimationDuration=0),l=new PhotoSwipe(o,PhotoSwipeUI_Default,p,a),l.init(),Rexbuilder_Util.isIframe&&(u(),l.listen("close",c)))},g=function(e){r=e;for(var i=document.querySelectorAll(e),n=i.length,l=0;l<n;l++)i[l].setAttribute("data-pswp-uid",l+1),i[l].onclick=o;t(i);var a=d();a.pid&&a.gid&&f(a.pid,i[a.gid-1],!0,!0)};return{init:g,addElement:n,addElementFromInline:l,removeElement:a,init_inline_pswp:i}}(jQuery);
/**
 * Util functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Util_Editor=function(e){"use strict";var t=function(e){e="undefined"!=typeof e?e:null,Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),e&&e.removeClass("activeRowTools")},i=function(e,t,i){t=void 0===t||t,this.needToSave=t;var r=Rexbuilder_Util.getGalleryInstance(e.parents(".rexpansive_section").eq(0));r.updateElementHeight(e.parents(".grid-stack-item").get(0),void 0,i);var n=TextEditor.getEditorInstance().getExtensionByName("insert-media");if(n){var o=e.parents(".grid-item-content-wrap");n.placeMediaBtn(o)}this.needToSave=!0},r=function(e){var t=e.find(".text-wrap"),i=0,r=0;if(t.hasClass("medium-editor-element")){var n=t.clone(!1);n.children(".medium-insert-buttons").remove(),i=n.text().trim().length,0!=i&&(t.hasClass("medium-editor-element")&&!t.hasClass("medium-editor-placeholder")||0!=t.parents(".pswp-item").length)&&(r=t.innerHeight())}else i=t.text().trim().length,0!=i&&(r=t.innerHeight());return 0==r?0:i},n=function(){var e=Rexbuilder_Util_Editor.editedGallery;e&&clearTimeout(e.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.editedTextWrap&&Rexbuilder_Util_Editor.editedTextWrap.blur(),e&&e.focusElementEditing(Rexbuilder_Util_Editor.editedElement),Rexbuilder_Util_Editor.editingGallery=!1,Rexbuilder_Util_Editor.editedGallery=null,Rexbuilder_Util_Editor.editingElement=!1,Rexbuilder_Util_Editor.editedElement=null,Rexbuilder_Util_Editor.editedTextWrap=null},o=function(){if(Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editingGallery){var e=Rexbuilder_Util_Editor.editedGallery,t=Rexbuilder_Util_Editor.editedElement;e.unFocusElementEditing(t),e.properties.elementStartingH=parseInt(t.attr("data-gs-height"))}},l=function(e){var t=Rexbuilder_Util.$rexContainer.parents(".rexbuilder-live-content").eq(0);e.distances.vals.top>0?t.addClass("fix-tools-first-row"):t.removeClass("fix-tools-first-row"),t.css("margin-top",e.distances.vals.top)},a=function(e,t,i,r){if("document"!==e)var n=s(e);else var n={sectionID:"",targetID:"",modelNumber:-1};var o={sectionID:n.sectionID,targetID:n.targetID,modelNumber:n.modelNumber,actionName:t,performActionData:i,reverseActionData:r};Rexbuilder_Util_Editor.undoStackArray.push(o),Rexbuilder_Util_Editor.redoStackArray=[],d()},d=function(){var e={eventName:"rexlive:undoRedoStackChange",stacks:{undo:Rexbuilder_Util_Editor.undoStackArray.length,redo:Rexbuilder_Util_Editor.redoStackArray.length}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)},s=function(e){var t={sectionID:"",targetID:"",modelNumber:""},i=e.is("section")?e:e.parents(".rexpansive_section"),r=e.parents(".grid-stack-item");return t.sectionID=i.attr("data-rexlive-section-id"),i.hasClass("rex-model-section")&&(t.modelNumber=i.attr("data-rexlive-model-number")),0!=r.length?t.targetID=r.attr("data-rexbuilder-block-id"):t.targetID="self",t},u=function(){var e={undo:Rexbuilder_Util_Editor.undoStackArray,redo:Rexbuilder_Util_Editor.redoStackArray};return e},c=function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),window.parent.postMessage(t,"*")},x=function(e,t){if(""!=e){v(e,t);var i="";i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),i+=" "+e,i=i.trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i)}},v=function(e,t){if(""!=e){var i="";i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),e=m(e);var r="(\\s"+e+"\\s|^"+e+"\\s|\\s"+e+"$|^"+e+"$)",n=new RegExp(r,"g");i=i.replace(n," "),i=i.trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i)}},m=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},_=function(){if(0==Rexbuilder_Util_Editor.$styleElement.length){var e="",t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id="rexpansive-builder-style-inline-css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}},b=function(e){e="undefined"==typeof e||e,e&&(Rexbuilder_Util.$rexContainer.parent().addClass("rexbuilder-live-content--loading"),Rexbuilder_Util.$rexContainer.addClass("fade-out").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","0").removeClass("fade-out");var e={eventName:"rexlive:animateContentsFadeOutEnd"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}))},g=function(e){e="undefined"==typeof e||e,e&&Rexbuilder_Util.$rexContainer.addClass("fade-in").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","").removeClass("fade-in"),Rexbuilder_Util.$rexContainer.parent().removeClass("rexbuilder-live-content--loading");var e={eventName:"rexlive:animateContentsEnd"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)})},f=function(e){if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")){var t=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0);Rexbuilder_Dom_Util.updateLockEditModel(t,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model")}var i={eventName:"rexlive:restoreStateEnded",buttonData:e.buttonData};Rexbuilder_Util_Editor.sendParentIframeMessage(i)},h=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(t,i){var r=e(i);r.wrap("<div></div>"),r.parent().attr("style","position:relative;"),r.parent().append('<div class="rexpansive-lock-section"></div>')})},p=function(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(t,i){var r=e(i);r.siblings().each(function(t,i){var r=e(i);r.hasClass("rexpansive-lock-section")&&r.remove()}),r.unwrap()})},R=function(e){e=void 0!==typeof e?e:null;var t=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");null!==e&&t.not(e),t.addClass("rexpansive-lock-section--light")},E=function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").removeClass("rexpansive-lock-section--light").removeClass("rexpansive-lock-section--overlay"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item--drag-to-row").removeClass("grid-stack-item--drag-to-row"),Rexbuilder_Util.$rexContainer.find(".drag-to-section-simulator").remove()},U=function(e){for(var t,i=document.createElement("div"),r=i.style,n=Rexbuilder_Util_Editor.getPrefixedValues(e),o=0;o<n.length&&(t=n[o],r.backgroundImage=t,r.backgroundImage!=t);o++);return r.backgroundImage},w=function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],i=[],r=0;r<t.length;r++)i.push(t[r]+e);return i},C=function(){e(".text-gradient").each(function(t,i){var r=i.getAttribute("data-gradient");r=U(r);var n=e(i);n.css("background",r),n.css("-webkit-background-clip","text"),n.css("-webkit-text-fill-color","transparent")})},y=function(){function t(){var t,i,r=e(window).height();t=.8*r,i=.3*r;var n=null;return Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(r,o){var l=e(o),a=l.offset().top,d=l.height(),s=e(window).scrollTop();if(a-t<s&&a+d-i>s)return n=o,!1}),n}Rexbuilder_Util_Editor.visibleRow=t();var i={};if(null!==Rexbuilder_Util_Editor.visibleRow){var r=e(Rexbuilder_Util_Editor.visibleRow).find(".section-data")[0];i=k(r),i.collapse=Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rex-collapse-grid")}Rexbuilder_Util_Editor.visibleRowInfo={sectionID:null!==Rexbuilder_Util_Editor.visibleRow?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-section-id"):null,modelNumber:null!==Rexbuilder_Util_Editor.visibleRow?"undefined"!=typeof Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number"):"":null,modelEditing:null!==Rexbuilder_Util_Editor.visibleRow?"undefined"!=typeof Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing"):"":null};var n={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:i};Rexbuilder_Util_Editor.sendParentIframeMessage(n),e(Rexbuilder_Util_Editor.visibleRow).addClass("highLightRow");var o=!1,l=!1;Rexbuilder_Util.$window.on("scroll",function(e){o=!0,l=!0}),setInterval(function(){if(o){var e=t();null!==e&&Rexbuilder_Util_Editor.visibleRow!==e&&I(e),o=!1}},250),setInterval(function(){if(l){l=!1;var e,t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.focusedRow"),r=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();t.length>0?T(t)?t.is(r)?e={eventName:"rexlive:hideTopFastTools"}:i.length>0?t.is(i)&&(e={eventName:"rexlive:hideTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:i.length>0?t.is(i)&&(e={eventName:"rexlive:viewTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:e={eventName:"rexlive:hideTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(e)}},250);var a;Rexbuilder_Util.$rexContainer.on("mouseenter",".rexpansive_section",function(t){var i,r=e(this);r.hasClass("highLightRow")?i=T(r)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"}:(a=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),I(this),i=T(r)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"}),Rexbuilder_Util_Editor.sendParentIframeMessage(i)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rexpansive_section",function(t){var i=e(this),r=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();if(!i.is(r)){var n;n={eventName:"rexlive:viewTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(n)}})},k=function(e){var t={};if("undefined"!=typeof e)for(var i=e.attributes,r=0;r<i.length;r++)"class"!==i[r].name&&"style"!==i[r].name&&(t[i[r].name.replace("data-","")]=i[r].value);return t},I=function(t){var i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("highLightRow"),r=i.filter(".focusedRow"),n=e(t);if(0==r.length||n.is(r)){n.addClass("highLightRow"),Rexbuilder_Util_Editor.visibleRow=t,Rexbuilder_Util_Editor.visibleRowInfo={sectionID:t.getAttribute("data-rexlive-section-id"),modelNumber:"undefined"!=typeof t.getAttribute("data-rexlive-model-number")?t.getAttribute("data-rexlive-model-number"):"",modelEditing:"undefined"!=typeof t.getAttribute("data-rexlive-model-editing")?t.getAttribute("data-rexlive-model-editing"):""};var o={},l=n.find(".section-data")[0];o=k(l),o.collapse=t.getAttribute("data-rex-collapse-grid");var a={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:o};Rexbuilder_Util_Editor.sendParentIframeMessage(a)}},T=function(t,i,r){i=void 0===typeof i?i:0,r=void 0===typeof r?r:0;var n=t.offset().top,o=t.height(),l=e(window).scrollTop();return!(n+i<l&&n+o+r>l)},$=function(e){e="undefined"!=typeof e&&e;var t={eventName:"rexlive:edited",modelEdited:e};Rexbuilder_Util_Editor.sendParentIframeMessage(t)},A=function(e,t){var i={};if("undefined"!=typeof e.clientX&&"undefined"!=typeof e.clientY&&"undefined"!=typeof e.offsetX&&"undefined"!=typeof e.offsetY&&"undefined"!=typeof t){var r=e.target.getBoundingClientRect();i={x:r.left+t.offset.w/2,y:r.top+Rexbuilder_Util_Editor.mousePositionFrameYOffset}}else null!==Rexbuilder_Util_Editor.mousePosition&&null!==Rexbuilder_Util_Editor.mouseClickObject?(i={x:Rexbuilder_Util_Editor.mousePosition.client.x-Rexbuilder_Util_Editor.mousePosition.offset.x+Rexbuilder_Util_Editor.mouseClickObject.offset.w/2,y:Rexbuilder_Util_Editor.mousePosition.client.y-Rexbuilder_Util_Editor.mousePosition.offset.y+Rexbuilder_Util_Editor.mousePositionFrameYOffset},Rexbuilder_Util_Editor.mousePosition=null,Rexbuilder_Util_Editor.mouseClickObject=null):i={x:Rexbuilder_Util_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Editor.viewportMeasurement.height/2};return i},N=function(){var e=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(removing_section)");"1"==e.length&&e.hasClass("empty-section")?(Rexbuilder_Util.$rexContainer.parent().addClass("add-new-section--hide"),e.addClass("activeRowTools")):Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide")},P=function(){this.elementIsResizing=!1,this.elementIsDragging=!1,this.sectionCopying=!1,this.blockCopying=!1,this.editingGallery=!1,this.editingElement=!1,this.manageElement=!1,this.editedGallery=null,this.editedElement=null,this.editedTextWrap=null,this.activateElementFocus=!1,this.mouseDownEvent=null,this.mouseUpEvent=null,this.mouseDown=!1,this.mouseUp=!1,this.mousePosition=null,this.mouseClickObject=null,this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexbuilder_Util.globalViewport,this.elementDraggingTriggered=!1,this.focusedElement=null,this.hasResized=!1,this.changedLayout=!1,this.clickedLayoutID="",this.undoActive=!1,this.redoActive=!1,this.updatingGridstack=!1,this.addingNewBlocks=!1,this.removingBlocks=!1,this.updatingImageBg=!1,this.updatingPaddingBlock=!1,this.updatingCollapsedGrid=!1,this.updatingSectionWidth=!1,this.updatingSectionLayout=!1,this.savingPage=!1,this.savingModel=!1,this.openingModel=!1,this.insertingModel=!1,this.visibleRow=null,this.visibleRowInfo={},this.scrollbarsActive=!1,this.dragAndDropFromParent=!1,this.undoStackArray=[],this.redoStackArray=[],this.needToSave=!0,this.$styleElement=e("#rexpansive-builder-style-inline-css")},D=function(){y(),N(),_()};return{init:P,load:D,activeAddSection:t,endEditingElement:n,startEditingElement:o,sendParentIframeMessage:c,addCustomClass:x,removeCustomClass:v,escapeRegExp:m,pushAction:a,getIDs:s,getStacks:u,getTextWrapLength:r,rowAttrsObj:k,blockAttrsObj:k,startLoading:b,endLoading:g,builderEdited:$,getMousePosition:A,lockRows:h,lockRowsLight:R,releaseRows:p,releaseRowsLight:E,getGradientSafeValue:U,getPrefixedValues:w,synchGradient:C,updateBlockContainerHeight:i,updateContainerMargins:l,sendUndoRedoInformation:d,restorePageStartingState:f}}(jQuery);
/**
 * Attaching handlers on events that creates blocks
 * of text, image, video ...
 * Contains utility function to handle the moving of blocks
 * between rows
 * @since 2.0.0
 */
var Rexbuilder_CreateBlocks=function(e){"use strict";function t(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();for(var i=e(t.target).parents(".rexpansive_section"),r=Rexbuilder_Util.getGalleryInstance(i),a=new IndexedGrid(12),d=r.getGridstackNodes(),l=0;l<d.length;l++)a.setGrid(d[l].x,d[l].y,d[l].width,d[l].height);var o,s,u=a.findHoles(),c=a.negativeGrid(),p=n(u,c);p.w>2&&p.h>2&&(o=p.w,s=p.h);var x=r.createNewBlock(r.settings.galleryLayout,o,s,"text"),b=x[0];TextEditor.addElementToTextEditor(b.querySelector(".text-wrap")),Rexbuilder_Live_Utilities.launchTooltips();var m=jQuery.Event("dblclick");m.target=b,m.offsetY=0,r.$element.trigger(m),Rexbuilder_Util.editedDataInfo.addBlockData(i.attr("data-rexlive-section-id"),b.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(i);var v={eventName:"rexlive:edited",modelEdited:i.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(v)}function i(e){var t,i,r,a=e.settings.data_to_send,d=!1,l=!1;"undefined"!=typeof a.addBlockButton&&"true"==a.addBlockButton.toString()?(d=!0,t=a.$section):"undefined"!=typeof a.addBlockElement&&"true"==a.addBlockElement.toString()?(l=!0,t=a.$section):t=""!=a.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"][data-rexlive-model-number="'+a.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a.sectionTarget.sectionID+'"]');var o=Rexbuilder_Util.getGalleryInstance(t);if(d)i=4,r=100,r=Math.ceil(r/o.properties.singleHeight);else if(l){var n=t.width()/Rexbuilder_Util.globalViewport.width*100;i=n<=50?12:n<=75?6:4,r=Math.ceil(100/o.properties.singleHeight)}var s=o.createNewBlock(o.settings.galleryLayout,i,r,"text"),u=s[0];TextEditor.addElementToTextEditor(u.querySelector(".text-wrap")),Rexbuilder_Live_Utilities.launchTooltips();var c=jQuery.Event("dblclick");c.target=u,c.offsetY=0,o.$element.trigger(c),Rexbuilder_Util.editedDataInfo.addBlockData(a.sectionTarget.sectionID,u.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var p;d?(p=jQuery.Event("rexlive:completeImportButton"),p.settings={$buttonWrapper:a.$buttonWrapper,$blockAdded:s}):l&&(p=jQuery.Event("rexlive:completeImportElement"),p.settings={$elementWrapper:a.$elementWrapper,$elementAdded:s,formFieldsString:a.formFieldsString});var x=o.properties.gridstackInstance,b=x.getCellFromPixel({left:a.mousePosition.x,top:a.mousePosition.y},!0),m=Math.max(0,b.x-Math.round(i/2)),v=Math.max(0,b.y-Math.round(r/2));m=1/0!==m?m:0,v=1/0!==v?v:0,x.move(u,m,v),Rexbuilder_Util.$document.trigger(p);var a={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(a)}function r(e){var t,i=e.settings.data_to_send;t=""!=i.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"][data-rexlive-model-number="'+i.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionTarget.sectionID+'"]');var r,a=Rexbuilder_Util.getGalleryInstance(t),d=i.media,l=a.properties.wrapWidth,o=a.properties.singleWidth,n=a.settings.cellHeightMasonry;for(r=0;r<d.length;r++){var s,u=d[r].media_info.id,c=d[r].display_info.src,p=d[r].display_info.size,x=d[r].display_info.width,b=d[r].display_info.height,m="",v=1,_=1;if(v=x>l?6:Math.max(Math.round(6*x/l),1),_=Math.max(Math.round(b*v/x),1),"fixed"==a.settings.galleryLayout)s=a.createNewBlock("fixed",v,_,"image"),m="full";else{var g=a.properties.gutter;_=v*o<x?b*v*o/x:b+g,_=Math.max(Math.round(_/n),1),s=a.createNewBlock("masonry",v,_,"image"),m="natural"}var f={idImage:u,urlImage:c,sizeImage:p,width:x,height:b,typeBGimage:m,active:"true"};Rexbuilder_Dom_Util.updateImageBG(s.find(".grid-item-content"),f);var h=s[0];TextEditor.addElementToTextEditor(h.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(i.sectionTarget.sectionID,h.getAttribute("data-rexbuilder-block-id"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var i={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(i)}function a(e){var t=e.settings.data_to_send;if("undefined"!=typeof t.typeVideo){var i;i=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]');var r=Rexbuilder_Util.getGalleryInstance(i),a="undefined"==typeof t.hasAudio?"":t.hasAudio,d="undefined"==typeof t.urlYoutube?"":t.urlYoutube,l="undefined"==typeof t.urlVimeo?"":t.urlVimeo,o="undefined"==typeof t.videoMp4?"":t.videoMp4,n="";if(0!=o.length?n="mp4":""!=l?n="vimeo":""!=d&&(n="youtube"),0==o.length){var s=c(r,3,3,"video"),u=s.find(".grid-item-content"),p={mp4Data:{idMp4:"",linkMp4:"",width:"",height:""},vimeoUrl:l,youtubeUrl:d,audio:a,typeVideo:n};Rexbuilder_Dom_Util.updateVideos(u,p);var x=s[0];TextEditor.addElementToTextEditor(x.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(t.sectionTarget.sectionID,x.getAttribute("data-rexbuilder-block-id"))}else for(var b=0;b<o.length;b++){var s=c(r,3,3,"video"),u=s.find(".grid-item-content"),m=o[b].videoUrl,v=o[b].videoID,_=o[b].width,g=o[b].height,p={mp4Data:{idMp4:v,linkMp4:m,width:_,height:g},vimeoUrl:"",youtubeUrl:"",audio:a,typeVideo:n};Rexbuilder_Dom_Util.updateVideos(u,p);var x=s[0];TextEditor.addElementToTextEditor(x.querySelector(".text-wrap")),Rexbuilder_Util.editedDataInfo.addBlockData(t.sectionTarget.sectionID,x.getAttribute("data-rexbuilder-block-id"))}}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(i);var t={eventName:"rexlive:edited",modelEdited:i.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}function d(e){var t,i=s(e.settings.data_to_send);t=""!=e.settings.data_to_send.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"][data-rexlive-model-number="'+e.settings.data_to_send.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"]'),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.editedDataInfo.addBlockData(e.settings.data_to_send.target.sectionID,i.attr("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var r={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(r)}function l(){Rexbuilder_Util.$document.on("click",".add-new-block-text",t),Rexbuilder_Util.$document.on("rexlive:insert_new_text_block",i),Rexbuilder_Util.$document.on("rexlive:insert_image",r),Rexbuilder_Util.$document.on("rexlive:insert_video",a),Rexbuilder_Util.$document.on("rexlive:insert_new_slider",d)}function o(){l()}var n=function(e,t){for(var i=0,r=0,a=0;a<e.length;a++){for(var d=t.indexOf(e[a]+1),l=d;l<t.length&&(l++,t[l]+1==t[l+1]););if(i=t[l]-t[d]+1,!(i<=2)){for(r=0;;)if(r++,-1===t.indexOf(t[d]+12*r)||-1===t.indexOf(t[l]+12*r))break;if(!(r<=2))break}}return{w:i,h:r}},s=function(t,i,r){var a;"undefined"==typeof r?(Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1,a=Rexbuilder_Dom_Util.lastSliderNumber):a=r;var d,l,o=t.slides,n={id:t.id,settings:t.settings,numberSlides:o.length};if("undefined"==typeof i){var s;s=""!=t.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.target.sectionID+'"][data-rexlive-model-number="'+t.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.target.sectionID+'"]');var p=Rexbuilder_Util.getGalleryInstance(s);d="undefined"==typeof t.target.rexID?c(p,12,4,"rexslider"):s.find('div [data-rexbuilder-block-id="'+t.target.rexID+'"]'),l=d.find(".text-wrap"),l.children().remove()}else d=i,l=d.find(".text-wrap");var x=d.children(".rexbuilder-block-data");d.addClass("block-has-slider"),d.find(".block-toolBox__editor-tools").find(".edit-block-content").addClass("tool-button--hide"),x.attr("data-type","rexslider");var b=u(l,n),m="true"==x.attr("data-overlay_block_color_active"),v="";m&&(v=l.parents(".responsive-block-overlay").css("background-color"));for(var _=0;_<o.length;_++){tmpl.arg="slide";var g=e('<div class="rex-slider-element"></div>');if(m&&g.append('<div class="slider-overlay" style="background-color:'+v+'"></div>'),t.settings.natural_blur||"none"===o[_].slide_image_url||(g.css("background-image","url("+o[_].slide_image_url+")"),g.attr("data-rex-slide-image-id",o[_].slide_image_id)),t.settings.natural_blur&&"none"!==o[_].slide_image_url){var f=document.createElement("div");f.className="natural-blur-effect blur-slide",f.style.backgroundImage="url("+o[_].slide_image_url+")";var h=document.createElement("img");h.className="natural-slide",h.src=o[_].slide_image_url,g.append(f),g.append(h)}if(0!=o[_].slide_text.trim().length&&g.append(".rex-slider-element-title").html(o[_].slide_text),g.appendTo(b[0]),""!=o[_].slide_url){tmpl.arg="link";var y=e(tmpl("tmpl-new-slider-element-link",{url:o[_].slide_url}));g.children(".rex-slider-element-title").detach().appendTo(y[0]),g.append(y[0])}if(""!=o[_].slide_video_type){tmpl.arg="video";var R=g.append(".rex-slider-video-wrapper");switch(o[_].slide_video_type){case"mp4":R.prepend(tmpl("tmpl-video-mp4",{url:o[_].slide_videoMp4Url})),R.addClass("mp4-player"),R.children(".rex-video-wrap").attr("data-rex-video-mp4-id",o[_].slide_video);break;case"vimeo":R.prepend(tmpl("tmpl-video-vimeo",{url:o[_].slide_video})),R.addClass("vimeo-player");break;case"youtube":R.prepend(tmpl("tmpl-video-youtube",{url:o[_].slide_video,audio:!1})),R.addClass("youtube-player")}"true"==o[_].slide_video_audio.toString()&&R.append(tmpl("tmpl-video-toggle-audio"))}}return b.attr("data-rex-slider-number",a),RexSlider.initSlider(b),d},u=function(t,i){tmpl.arg="slider";var r=e(tmpl("tmpl-new-slider-wrap",{id:i.id,animation:!!i.settings.auto_start||0,dots:i.settings.dots?1:0,prevnext:i.settings.prev_next?1:0,numberSlides:i.numberSlides}));return t.append(r[0]),r},c=function(e,t,i,r){r="undefined"!=typeof r?r:"";var a,d=e.properties.singleWidth,l=t,o=i;return"fixed"==e.settings.galleryLayout?a=e.createNewBlock("fixed",l,o,r):(o=Math.max(Math.round(o*d/e.settings.cellHeightMasonry),1),a=e.createNewBlock("masonry",l,o,r)),a},p=function(t){var i,r=t.parents(".grid-stack-row"),a=r.data().plugin_perfectGridGalleryEditor,d=r.data("gridstack"),l=t.parents(".rexpansive_section");i=t.clone(!1);var o=i.children(".rexbuilder-block-data");a._removeHandles(i);var n=Rexbuilder_Util.createBlockID();a.properties.lastIDBlock=a.properties.lastIDBlock+1;var s="block_"+a.properties.sectionNumber+"_"+a.properties.lastIDBlock;i.attr("data-rexbuilder-block-id",n),o.attr("data-rexbuilder_block_id",n),i.attr("id",s),o.attr("data-id",s),o.attr("id",s+"-builder-data"),x(i[0]),i.appendTo(r.eq(0));var u=parseInt(i.attr("data-gs-width")),c=parseInt(i.attr("data-gs-height")),p=i.find(".grid-item-content"),b=Rexbuilder_Util.destroyVideo(p,!1);Rexbuilder_Live_Utilities.removeTextEditor(i),Rexbuilder_Live_Utilities.removeColorPicker(i),a._prepareElement(i[0]),a.unFocusElementEditing(i);var m={targetElement:i,hasToBeRemoved:!0,galleryInstance:a,blocksDisposition:e.extend(!0,{},a.properties.reverseDataGridDisposition)};d.addWidget(i[0],0,0,u,c,!0,1,500,1);var v=parseInt(i.attr("data-gs-x")),_=parseInt(i.attr("data-gs-y"));d.batchUpdate(),d.update(i[0],v,_,u,c),d.commit(),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),a._createFirstReverseStack(),a.properties.numberBlocksVisibileOnGrid=a.properties.numberBlocksVisibileOnGrid+1;var g={targetElement:i,hasToBeRemoved:!1,galleryInstance:a,blocksDisposition:e.extend(!0,{},a.properties.reverseDataGridDisposition)};Rexbuilder_Util_Editor.pushAction(a.$element,"updateBlockVisibility",g,m),i.removeAttr("data-gs-auto-position"),""!=b&&p.addClass(b+"-player"),Rexbuilder_Util.startVideoPlugin(p);var f=i.find(".text-wrap");if(t.hasClass("block-has-slider")){var h=t.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]');f.children().remove();var y=l.attr("data-rexlive-section-id"),R="undefined"!=typeof l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",k=n,U={sectionID:y,modelNumber:R,rexID:k},D=Rexbuilder_Live_Utilities.createSliderData(h);Rexbuilder_Live_Utilities.saveSliderOnDB(D,!0,s,U)}else{var I=i[0];TextEditor.addElementToTextEditor(I.querySelector(".text-wrap"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(l),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(l);var E={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(E)},x=function(e){var t=e.querySelector(".text-wrap");b(t)},b=function(e){if(e){var t,i,r,a,d=[].slice.call(e.getElementsByClassName("rex-button-wrapper")),l=d.length;for(t=0;t<l;t++)Rexbuilder_Util.hasClass(d[t],"rex-separate-button")?(d[t].setAttribute("data-rex-button-id",Rexbuilder_Util.createBlockID()),d[t].setAttribute("data-rex-button-number","1")):(r=d[t].getAttribute("data-rex-button-id"),a=[].slice.call(document.querySelectorAll('.rex-button-wrapper[data-rex-button-id="'+r+'"]')),d[t].setAttribute("data-rex-button-number",a.length+1),i=d[t].querySelector(".rex-button-data"),i&&i.removeAttribute("data-synchronize"))}},m=function(t,i,r,a){if(r="undefined"==typeof r||r,a="undefined"==typeof a||a,i.length>0){var d,l=i.data().plugin_perfectGridGalleryEditor,o=i.data("gridstack"),n=i.parents(".rexpansive_section");d=t;var s=d.children(".rexbuilder-block-data");l._removeHandles(d),l.properties.lastIDBlock=l.properties.lastIDBlock+1;var u="block_"+l.properties.sectionNumber+"_"+l.properties.lastIDBlock,c=d.attr("data-rexbuilder-block-id");""===c&&(c=Rexbuilder_Util.createBlockID(),d.attr("data-rexbuilder-block-id",c),s.attr("data-rexbuilder_block_id",c)),""===d.attr("id")&&(d.attr("id",u),s.attr("data-id",u),s.attr("id",u+"-builder-data")),d.appendTo(i.eq(0));var p=parseInt(d.attr("data-gs-x")),x=parseInt(d.attr("data-gs-y")),b=parseInt(d.attr("data-gs-width")),m=parseInt(d.attr("data-gs-height")),v=d.find(".grid-item-content"),_=Rexbuilder_Util.destroyVideo(v,!1);Rexbuilder_Live_Utilities.removeTextEditor(d),Rexbuilder_Live_Utilities.removeColorPicker(d),l._prepareElement(d[0]),l.unFocusElementEditing(d);var g={targetElement:d,hasToBeRemoved:!0,galleryInstance:l,blocksDisposition:e.extend(!0,{},l.properties.reverseDataGridDisposition)};a&&"masonry"===l.settings.galleryLayout&&(m=Math.floor(m*l.properties.singleWidth/l.properties.singleHeight)),o.addWidget(d[0],0,0,b,m,!0,1,500,1),r&&(o.batchUpdate(),o.update(d[0],p,x,b,m),o.commit()),l._updateElementsSizeViewers(),l._createFirstReverseStack(),l.properties.numberBlocksVisibileOnGrid=l.properties.numberBlocksVisibileOnGrid+1;var f={targetElement:d,hasToBeRemoved:!1,galleryInstance:l,blocksDisposition:e.extend(!0,{},l.properties.reverseDataGridDisposition)};Rexbuilder_Util_Editor.pushAction(l.$element,"updateBlockVisibility",f,g),d.removeAttr("data-gs-auto-position"),""!=_&&v.addClass(_+"-player"),Rexbuilder_Util.startVideoPlugin(v);var h=d.find(".text-wrap");if(t.hasClass("block-has-slider")){var y=t.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]');h.children().remove();var R=n.attr("data-rexlive-section-id"),k="undefined"!=typeof n.attr("data-rexlive-model-number")?n.attr("data-rexlive-model-number"):"",U=c,D={sectionID:R,modelNumber:k,rexID:U},I=Rexbuilder_Live_Utilities.createSliderData(y);Rexbuilder_Live_Utilities.saveSliderOnDB(I,!0,u,D)}else{var E=d[0];TextEditor.addElementToTextEditor(E.querySelector(".text-wrap"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(n),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}},v=function(t,i){var r,a=i.data().plugin_perfectGridGalleryEditor,d=i.data("gridstack"),l=t.parents(".rexpansive_section"),o=l.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor,n=o.settings.galleryLayout,s=a.settings.galleryLayout;r=t.clone(!1);var u=r.children(".rexbuilder-block-data");a._removeHandles(r);var c=Rexbuilder_Util.createBlockID();a.properties.lastIDBlock=a.properties.lastIDBlock+1;var p="block_"+a.properties.sectionNumber+"_"+a.properties.lastIDBlock;r.attr("data-rexbuilder-block-id",c),u.attr("data-rexbuilder_block_id",c),r.attr("id",p),u.attr("data-id",p),u.attr("id",p+"-builder-data"),r.appendTo(i.eq(0));var x=parseInt(r.attr("data-gs-width")),b=parseInt(r.attr("data-gs-height"));if(n!==s)switch(s){case"fixed":b=Math.floor(5*b/a.properties.singleHeight);break;case"masonry":b=Math.floor(b*o.properties.singleHeight/5)}var m=r.find(".grid-item-content"),v=Rexbuilder_Util.destroyVideo(m,!1);Rexbuilder_Live_Utilities.removeTextEditor(r),Rexbuilder_Live_Utilities.removeColorPicker(r),a._prepareElement(r[0]),a.unFocusElementEditing(r);var _={targetElement:r,hasToBeRemoved:!0,galleryInstance:a,blocksDisposition:e.extend(!0,{},a.properties.reverseDataGridDisposition)};d.addWidget(r[0],0,0,x,b,!0,1,500,1),a._updateElementsSizeViewers();var g=parseInt(r.attr("data-gs-x")),f=parseInt(r.attr("data-gs-y"));d.batchUpdate(),d.update(r[0],g,f,x,b),d.commit(),a._createFirstReverseStack(),a.properties.numberBlocksVisibileOnGrid=a.properties.numberBlocksVisibileOnGrid+1;var h={targetElement:r,hasToBeRemoved:!1,galleryInstance:a,blocksDisposition:e.extend(!0,{},a.properties.reverseDataGridDisposition)};Rexbuilder_Util_Editor.pushAction(a.$element,"updateBlockVisibility",h,_),r.removeAttr("data-gs-auto-position"),""!=v&&m.addClass(v+"-player"),Rexbuilder_Util.startVideoPlugin(m);var y=r.find(".text-wrap");if(t.hasClass("block-has-slider")){var R=t.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]');y.children().remove();var k=l.attr("data-rexlive-section-id"),U="undefined"!=typeof l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",D=c,I={sectionID:k,modelNumber:U,rexID:D},E=Rexbuilder_Live_Utilities.createSliderData(R);Rexbuilder_Live_Utilities.saveSliderOnDB(E,!0,p,I)}else{var S=r[0];TextEditor.addElementToTextEditor(S.querySelector(".text-wrap"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(l),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(l)};return{init:o,createSlider:s,createCopyBlock:p,insertHTMLBlock:m,moveBlockToOtherSection:v,sanitizeBlockContent:x}}(jQuery);
var Rexbuilder_Dom_Util=function($){"use strict";function _enablePhotoswipeAllBlocksSection(e){for(var t,a,i,o,r,d=e.get(0),l=d.querySelectorAll(".grid-stack-item:not(.removing_block)"),n=l.length,s=0;s<n;s++)t=l[s],a=t.querySelector(".rexbuilder-block-data"),i=Rexbuilder_Util.hasClass(t,"block-has-slider"),o=0!==Rexbuilder_Util_Editor.getTextWrapLength($(t)),r=""!==a.getAttribute("data-image_bg_block"),t.setAttribute("data-rexlive-element-edited",!0),(r&&!o||i)&&a.setAttribute("data-photoswipe",!0)}function _removePhotoswipeAllBlocksSection(e){for(var t,a=e.get(0),i=a.querySelectorAll(".grid-stack-item:not(.removing_block)"),o=i.length,r=0;r<o;r++)t=i[r].querySelector(".rexbuilder-block-data"),i[r].setAttribute("data-rexlive-element-edited",!0),t.setAttribute("data-photoswipe",!1)}function _updateBulkSection(e,t,a){var i;i=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]');var o,r,d=a.length;for(r=0;r<d;r++)if("self"===a[r].name){o=a[r].props;break}var l=!1,n=!1,s=!1,c=!1,u=!1,p=!1,_=!1;for(var g in t)if(t[g])switch(g){case"section_name":_updateSectionName(i,o.sectionName);break;case"color_bg_section":case"color_bg_section_active":if(l)break;_updateSectionBackgroundColor(i,{color:o.color_bg_section,active:o.color_bg_section_active}),l=!0;break;case"image_bg_section_active":case"image_bg_section":case"image_width":case"image_height":case"id_image_bg_section":case"image_size":if(n)break;_updateSectionBackgroundImage(i,{width:o.image_width,height:o.image_height,image_size:o.image_size,idImage:o.id_image_bg_section,urlImage:o.image_bg_section,active:o.image_bg_section_active}),n=!0;break;case"video_bg_id_section":case"video_mp4_url":case"video_bg_width_section":case"video_bg_height_section":if(s)break;_updateSectionVideoBackground(i,{typeVideo:"mp4",mp4Data:{linkMp4:o.video_mp4_url,idMp4:o.video_bg_id_section,width:o.video_bg_width_section,height:o.video_bg_height_section}}),s=!0;break;case"video_bg_url_section":_updateSectionVideoBackground(i,{typeVideo:"youtube",youtubeUrl:o.video_bg_url_section});break;case"video_bg_url_vimeo_section":_updateSectionVideoBackground(i,{typeVideo:"vimeo",vimeoUrl:o.video_bg_url_vimeo_section});break;case"block_distance":case"row_separator_top":case"row_separator_bottom":case"row_separator_right":case"row_separator_left":if(c)break;var m=i.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;_updateRowDistances(i,{rowDistances:{gutter:o.block_distance,top:o.row_separator_top,right:o.row_separator_right,bottom:o.row_separator_bottom,left:o.row_separator_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),c=!0;break;case"margin":case"row_margin_top":case"row_margin_bottom":case"row_margin_right":case"row_margin_left":if(u)break;var m=i.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;_updateSectionMargins(i,{marginsSection:{top:o.row_margin_top,bottom:o.row_margin_bottom,right:o.row_margin_right,left:o.row_margin_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),u=!0;break;case"custom_classes":var v=o.custom_classes.trim().split(/\s+/);_updateCustomClasses(i,v),_=!0;break;case"row_overlay_color":case"row_overlay_active":if(p)break;_updateSectionOverlay(i,{color:o.row_overlay_color,active:o.row_overlay_active}),p=!0}_&&"default"!==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<768&&-1!==o.custom_classes.indexOf("rex-block-grid")&&i.find(".collapse-grid").trigger("click")}function _updateBulkBlock(e,t,a){var i;i=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"]');var o,r,d=a.length;for(r=0;r<d;r++)if(e.rexID===a[r].name){o=a[r].props;break}var l=!1,n=!1,s=!1,c=!1;for(var u in t)if(t[u])switch(u){case"color_bg_block":case"color_bg_block_active":if(l)break;_updateBlockBackgroundColor({$elem:i,color:o.color_bg_block,active:o.color_bg_block_active}),l=!0;break;case"image_bg_url":case"image_width":case"image_height":case"id_image_bg":case"image_size":case"image_bg_elem_active":case"type_bg_image":if(n)break;_updateImageBG(i.find(".grid-item-content"),{width:o.image_width,height:o.image_height,sizeImage:o.image_size,idImage:o.id_image_bg,urlImage:o.image_bg_url,active:o.image_bg_elem_active,typeBGimage:o.type_bg_image}),n=!0;break;case"video_bg_id":case"video_bg_width":case"video_bg_height":case"video_mp4_url":if(s)break;_updateVideos(i,{typeVideo:"mp4",mp4Data:{linkMp4:o.video_mp4_url,idMp4:o.video_bg_id,width:o.video_bg_width,height:o.video_bg_height}}),s=!0;case"video_bg_url_youtube":_updateVideos(i,{typeVideo:"youtube",vimeoUrl:o.video_bg_url_youtube});break;case"video_bg_url_vimeo":_updateVideos(i,{typeVideo:"vimeo",vimeoUrl:o.video_bg_url_vimeo});break;case"photoswipe":_updateBlockPhotoswipe({$elem:i,photoswipe:o.photoswipe});break;case"block_custom_class":var p=o.block_custom_class.trim().split(/\s+/);_updateCustomClasses(i,p);break;case"block_padding":var _=-1!==o.block_padding.indexOf("px")?"px":-1!==o.block_padding.indexOf("%")?"%":"",g=o.block_padding;g=g.replace(/px|%/g,"");var m=g.split(";");_updateBlockPaddings(i,{top:m[0],right:m[1],bottom:m[2],left:m[3],type:_});break;case"overlay_block_color":case"overlay_block_color_active":if(c)break;_updateBlockOverlay({$elem:i,color:o.overlay_block_color,active:o.overlay_block_color_active}),c=!0;break;case"linkurl":_updateBlockUrl(i,o.linkurl);break;case"block_flex_position":var v=o.block_flex_position.split(" ");_updateFlexPostition(i,{x:v[0],y:v[1]});break;case"block_flex_img_position":var v=o.block_flex_img_position.split(" ");_updateImageFlexPostition(i,{x:v[0],y:v[1]})}}function htmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}var _updateSlider=function(e){var t=e.textWrap,a=e.sliderNumberToActive,i=t.children('.rex-slider-wrap:not([data-rex-slider-number="'+e.sliderNumberToActive+'"])');i.each(function(e,t){var a=$(t);t.style.display="none",t.setAttribute("data-rex-slider-active",!1),RexSlider.destroySliderPlugins(a)});var o=t.children('.rex-slider-wrap[data-rex-slider-number="'+a+'"]');if(0==o.length){var r=e.newSliderData;if("undefined"!=typeof r){var d=t.parents(".grid-stack-item");Rexbuilder_CreateBlocks.createSlider(e.newSliderData,d,a)}}else{var l=o[0];l.style.display="",RexSlider.initSlider(o)}},_updateSliderStack=function(e){var t;t=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]');var a=t.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]'),i=a.find(".text-wrap"),o=i.find('.rex-slider-wrap[data-rex-slider-number="'+e.target.sliderNumber+'"]'),r={textWrap:i,sliderNumberToActive:parseInt(o.attr("data-rex-slider-number"))};Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1;var d={textWrap:i,sliderNumberToActive:Rexbuilder_Dom_Util.lastSliderNumber,newSliderData:e};_updateSlider(d),Rexbuilder_Util_Editor.pushAction(t,"updateSlider",d,r)},_updateRow=function(e,t,a,i){var o=parseInt(i.gutter),r=parseInt(i.top),d=parseInt(i.right),l=parseInt(i.bottom),n=parseInt(i.left),s=20,c={gutter:isNaN(o)?s:o,top:isNaN(r)?s:r,right:isNaN(d)?s:d,bottom:isNaN(l)?s:l,left:isNaN(n)?s:n},u=c.gutter,p=c.top,_=c.right,g=c.bottom,m=c.left,v="undefined"==typeof i.layout?"fixed":i.layout,b="undefined"!=typeof i.full_height&&"masonry"!=v&&i.full_height,k="undefined"==typeof i.section_width?"100%":""+i.section_width,x="undefined"==typeof i.dimension?"full":i.dimension,f=!Rexbuilder_Util.editorMode&&i.collapse_grid,h=a.parent(),y=h[0];"full"==x?(h.removeClass("center-disposition"),h.addClass("full-disposition"),y.style.maxWidth="100%"):(h.removeClass("full-disposition"),h.addClass("center-disposition"),y.style.maxWidth=k),a.attr("data-separator",u),a.attr("data-row-separator-top",p),a.attr("data-row-separator-right",_),a.attr("data-row-separator-bottom",g),a.attr("data-row-separator-left",m),a.attr("data-layout",v),a.attr("data-full-height",b),t.attr("data-section_width",k),t.attr("data-dimension",x),t.attr("data-no-mobile-layout",i.noMobileLayoutSaved),t.attr("data-responsive_collapse",f),e.attr("data-rex-collapse-grid",f);var S=a.data();if(void 0!==S){var B=S.plugin_perfectGridGalleryEditor;void 0!==B&&B.updateGridSettingsChangeLayout(i)}Rexbuilder_Util.editorMode&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(e,i),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,i))},_updateImageBG=function(e,t){if(e.hasClass("rexpansive_section")){var a=e.children(".section-data");""==t.idImage||"true"!=t.active.toString()?(_resetImageSection(e,a),Rexbuilder_Util.editorMode||e.removeClass("section-w-image")):(_updateImageSection(e,a,t),Rexbuilder_Util.editorMode||e.addClass("section-w-image"))}else if(e.hasClass("grid-item-content")){var i=e.parents(".grid-stack-item"),o=i.children(".rexbuilder-block-data");""==t.idImage||"true"!=t.active.toString()?(_resetImageBlock(e,o,t),Rexbuilder_Util.editorMode||i.removeClass("block-w-image")):(Rexbuilder_Util.editorMode||i.addClass("block-w-image"),_updateImageBlock(e,o,t))}},_updateImageSection=function(e,t,a){if("undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,a),a.idImage!=parseInt(t.attr("data-id_image_bg_section"))){var i=e[0];Rexbuilder_Util.editorMode?i.style.backgroundImage="url("+a.urlImage+")":i.setAttribute("data-src",a.urlImage),i.setAttribute("data-background_image_width",a.width),i.setAttribute("data-background_image_height",a.height),t.attr("data-image_size",a.image_size),t.attr("data-id_image_bg_section",a.idImage),t.attr("data-image_bg_section",a.urlImage),t.attr("data-image_bg_section_active",a.active)}},_updateBlockPhotoswipe=function(e){var t=e.$elem.children(".rexbuilder-block-data");t.attr("data-photoswipe",e.photoswipe)},_updateImageBlock=function(e,t,a){t.attr("data-id_image_bg_block",a.idImage),t.attr("data-type_bg_block",a.typeBGimage),t.attr("data-image_bg_block",a.urlImage),t.attr("data-image_size",a.sizeImage),t.attr("data-image_bg_elem_active",a.active),"full"==a.typeBGimage?_addImageFullBgBlock(e,a):"natural"==a.typeBGimage&&_addImageNaturalBgBlock(e,a),e.attr("data-background_image_width",a.width),e.attr("data-background_image_height",a.height),"undefined"!=typeof Rexbuilder_Block_Editor&&(Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(e,a),Rexbuilder_Block_Editor.updateBlockImagePositionTool(e,a))},_addImageNaturalBgBlock=function(e,t){var a=e.find(".rex-image-wrapper"),i=e.find(".responsive-block-overlay");if(0==a.length){var o=document.createElement("div");a=$(o),a.addClass("rex-image-wrapper"),a.prependTo(i[0])}else a.hasClass("full-image-background")&&(a.detach().prependTo(i[0]),a.removeClass("full-image-background"));var r=a[0];a.addClass("natural-image-background"),Rexbuilder_Util.editorMode?r.style.backgroundImage="url("+t.urlImage+")":r.setAttribute("data-src",t.urlImage);var d=e.parents(".grid-stack-item"),l=d[0];l&&(l.offsetWidth<t.width?a.addClass("small-width"):a.removeClass("small-width"))},_removeImageBlock=function(e){var t=e.find(".rex-image-wrapper");0!=t.length&&t.remove()},_addImageFullBgBlock=function(e,t){var a=e.find(".rex-image-wrapper"),i=e.find(".responsive-block-overlay");if(0==a.length){var o=document.createElement("div");a=$(o),a.addClass("rex-image-wrapper"),a.insertBefore(i[0])}else a.hasClass("natural-image-background")&&(a.detach().insertBefore(i[0]),a.removeClass("natural-image-background"),a.removeClass("small-width"));var r=a[0];a.addClass("full-image-background"),Rexbuilder_Util.editorMode?r.style.backgroundImage="url("+t.urlImage+")":r.setAttribute("data-src",t.urlImage)},_resetImageSection=function(e,t){var a=e[0];t.attr("data-image_bg_section",""),t.attr("data-id_image_bg_section",""),t.data("data-image_size",""),a.setAttribute("data-background_image_width",""),a.setAttribute("data-background_image_height",""),a.style.backgroundImage="","undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e)},_resetImageBlock=function(e,t,a){t.attr("data-id_image_bg_block",""),t.attr("data-type_bg_block",""),t.attr("data-image_bg_block",""),t.attr("data-image_size",""),e.parents(".grid-stack-item").hasClass("block-has-slider")?t.attr("data-photoswipe",a.photoswipe):t.attr("data-photoswipe",""),t.attr("data-image_bg_elem_active",""),_removeImageBlock(e),e.attr("data-background_image_width",""),e.attr("data-background_image_height","")},_removeYoutubeVideo=function($target,removeFromDom){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio");if(0!=$ytpWrapper.length)if(removeFromDom="undefined"==typeof removeFromDom||removeFromDom,$target.removeClass("youtube-player"),removeFromDom)void 0!==$ytpWrapper.YTPGetPlayer()&&$ytpWrapper.YTPPlayerDestroy(),$ytpWrapper.remove(),0!=$toggleAudio.length&&$toggleAudio.remove();else{var videoID;if(void 0!==$ytpWrapper.YTPGetPlayer())videoID=$ytpWrapper.YTPGetVideoID(),$ytpWrapper.YTPPlayerDestroy();else{var elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")"));videoID=elemData.videoURL}var wasSlide=0!=$ytpWrapper.parents(".rex-slider-element").length,hadAudio=0!=$toggleAudio.length;if(wasSlide&&(hadAudio=0!=$ytpWrapper.children(".rex-video-toggle-audio").length),$ytpWrapper.remove(),tmpl.arg="video",$target.prepend('<div class="rex-youtube-wrap" data-property="{videoURL:\''+videoID+"',containment:'self',startAt:0,mute:"+!1+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>'),hadAudio&&wasSlide){var $toggle=$('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>');$toggle.addClass("removing-toggle-audio"),$toggle.appendTo($target.children(".rex-youtube-wrap")[0])}}},_removeVimeoVideo=function(e,t){var a=e.children(".rex-video-vimeo-wrap"),i=e.children(".rex-video-toggle-audio");if(0!=a.length){var o=a.children("iframe")[0];if(t="undefined"==typeof t||t,e.removeClass("vimeo-player"),t)VimeoVideo.removePlayer(o),a.remove(),0!=i.length&&i.remove();else{var r=VimeoVideo.findVideo(o);r&&r.unload(),0!=i.length&&i.addClass("removing-toggle-audio")}}},_removeMp4Video=function(e,t){var a=e.children(".rex-video-wrap"),i=e.children(".rex-video-toggle-audio");if(0!=a.length){t="undefined"==typeof t||t;var o=a.find("video")[0];o.pause(),o.currentTime=0,e.removeClass("mp4-player"),t?(a.remove(),0!=i.length&&i.remove()):(a.addClass("removing-video-mp4"),0!=i.length&&i.addClass("removing-toggle-audio"))}},_addMp4Video=function(e,t,a){var i=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio"),r=i.find("source"),d=Rexbuilder_Util.editorMode?r.attr("src"):r.attr("data-src");if(0!=i.length&&d!=t.linkMp4||0==i.length){_removeMp4Video(e,!0),e.addClass("mp4-player"),tmpl.arg="video";var l='<div class="rex-video-wrap" data-rex-video-width="'+t.width+'" data-rex-video-height="'+t.height+'"><video width="'+t.width+'" height="'+t.height+'" class="rex-video-container" preload autoplay loop muted><source type="video/mp4" src="'+t.linkMp4+'"></video></div>';if(e.is("section")){var n="";n=Rexbuilder_Util.editorMode?".section-toolBox":".section-data",e.children(n).after(l)}else{var s=e.find(".rexlive-block-drag-handle");0==s.length?e.prepend(l):s.after(l)}}else 0!=i.length&&(i.removeClass("removing-video-mp4"),Rexbuilder_Util.editorMode&&i.find("video")[0].play());0==o.length?a&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):a?o.removeClass("removing-toggle-audio"):o.remove()},fixVideoProportion=function(e){var t,a=Array.prototype.slice.call(e.getElementsByClassName("rex-video-wrap")),i=a.length;for(t=0;t<i;t++)a[t].children[0].style.maxWidth=_findVideoMaxWidth(a[t])},_findVideoMaxWidth=function(e){var t,a,i,o;i=e.getAttribute("data-rex-video-width"),o=e.getAttribute("data-rex-video-height");var r="100%";return t=e.offsetWidth,a=e.offsetHeight,i/o>t/a&&(r=a*i/o*100/t,r+="%"),r},_addYoutubeVideo=function($target,urlYoutube,hasAudio){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio");if(0!=$ytpWrapper.length){var elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),activeUrl=elemData.videoURL,videoID=Rexbuilder_Util.getYoutubeID(activeUrl),urlID=Rexbuilder_Util.getYoutubeID(urlYoutube);videoID!=urlID?void 0===$ytpWrapper.YTPGetPlayer()?($ytpWrapper.attr("data-property","{videoURL:'"+urlYoutube+"',containment:'self',startAt:0,mute:'"+!hasAudio+"',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"),$ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer()):(_removeYoutubeVideo($target,!0),setTimeout(function(){tmpl.arg="video",$target.prepend('<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>'),$target.children(".rex-youtube-wrap").YTPlayer();var e=$target.children(".rex-video-toggle-audio");0==e.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?e.removeClass("removing-toggle-audio"):e.remove()},1e3,$target,urlYoutube,hasAudio)):void 0===$ytpWrapper.YTPGetPlayer()&&($ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer())}else tmpl.arg="video",$target.prepend('<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>'),$target.children(".rex-youtube-wrap").YTPlayer();$target.addClass("youtube-player"),0==$toggleAudio.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?$toggleAudio.removeClass("removing-toggle-audio"):$toggleAudio.remove()},_addVimeoVideo=function(e,t,a){var i=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");if(e.addClass("vimeo-player"),""==t)_removeVimeoVideo(e,!0);else if(0!=i.length&&i.children("iframe").attr("src").split("?")[0]!=t||0==i.length){_removeVimeoVideo(e,!0),tmpl.arg="video",t+="?autoplay=1&loop=1&title=0&byline=0&portrait=0&autopause=0&muted="+("true"==a.toString()?"0":"1")+"&background=1",e.prepend('<div class="rex-video-vimeo-wrap rex-video-vimeo-wrap--block"><iframe src="'+t+'" width="640" height="360" frameborder="0" allow="autoplay"  webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>');var r=e.children(".rex-video-vimeo-wrap").find("iframe")[0];VimeoVideo.addPlayer("1",r)}else if(0!=i.length){var d=VimeoVideo.findVideo(i.find("iframe")[0]);null!=d&&d.play()}0==o.length?a&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):a?o.removeClass("removing-toggle-audio"):o.remove()},_updateVideos=function(e,t){var a="";if(e.hasClass("rexpansive_section")){var i=e.children(".section-data");a="section"}else if(e.hasClass("grid-item-content")){var o=e.parents(".grid-stack-item"),r=o.children(".rexbuilder-block-data");a="block"}else{if(!e.hasClass("rex-slider-video-wrapper"))return;a="slide"}var d=t.typeVideo;""==d?(_removeMp4Video(e,!0),_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0)):"mp4"==d?(_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0),_addMp4Video(e,t.mp4Data,t.audio)):"vimeo"==d?(_removeYoutubeVideo(e,!0),_removeMp4Video(e,!0),_addVimeoVideo(e,t.vimeoUrl,t.audio)):"youtube"==d&&(_removeVimeoVideo(e,!0),_removeMp4Video(e,!0),_addYoutubeVideo(e,t.youtubeUrl,t.audio)),"section"==a?(i.attr("data-video_mp4_url",t.mp4Data.linkMp4),i.attr("data-video_bg_id_section",t.mp4Data.idMp4),i.attr("data-video_bg_width_section",t.mp4Data.width),i.attr("data-video_bg_height_section",t.mp4Data.height),i.attr("data-video_bg_url_section",t.youtubeUrl),i.attr("data-video_bg_url_vimeo_section",t.vimeoUrl),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,t),"mp4"==d?e.addClass("section-w-html-video"):e.removeClass("section-w-html-video")):"block"==a&&(r.attr("data-video_mp4_url",t.mp4Data.linkMp4),r.attr("data-video_bg_id",t.mp4Data.idMp4),r.attr("data-video_bg_width",t.mp4Data.width),r.attr("data-video_bg_height",t.mp4Data.height),r.attr("data-video_bg_url",t.youtubeUrl),r.attr("data-video_bg_url_vimeo",t.vimeoUrl),r.attr("data-video_has_audio",t.audio),"mp4"==d?o.addClass("block-w-html-video"):o.removeClass("block-w-html-video"))},_updateBlockPaddings=function(e,t){var a=e.children(".rexbuilder-block-data");a.attr("data-block_padding",Rexbuilder_Util.paddingsToString(t));var i=e.find(".text-wrap");if(0!=i.length){var o=i[0];o.style.paddingTop=""+t.top+t.type,o.style.paddingRight=""+t.right+t.type,o.style.paddingBottom=""+t.bottom+t.type,o.style.paddingLeft=""+t.left+t.type}},_updateBlocksLayout=function(e){var t,a,i,o,r,d,l=e.blocks,n=e.gridstackInstance;if(l.length>0){var s=$(e.blocks[0].elem).parents(".rexpansive_section");for(Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.batchUpdate(),t=0;t<l.length;t++)a=l[t].x,i=l[t].y,o=l[t].w,r=l[t].h,d=l[t].elem,n.update(d,a,i,o,r);Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.commit(),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,s[0]),1500)}},_collapseGrid=function(e,t,a,i){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0,t?e.collapseElementsProperties():e.removeCollapseElementsProperties(),e.updateGridLayoutCollapse(i),_updateBlocksLayout(a),setTimeout(function(){Rexbuilder_Util_Editor.updatingCollapsedGrid=!1,e._fixImagesDimension(),e._createFirstReverseStack(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers()},200)},_updateRemovingBlock=function(e,t,a){if(t?(a.removeBlock(e.get(0)),Rexbuilder_Util.stopBlockVideos(e)):(a.reAddBlock(e),Rexbuilder_Util.playBlockVideos(e)),0==a.properties.numberBlocksVisibileOnGrid)e.parents(".rexpansive_section").addClass("empty-section");else{var i=e.parents(".rexpansive_section");i.removeClass("empty-section")}},_updateSectionName=function(e,t){if(null!==t&&(e.attr("data-rexlive-section-name",t),""!==t)){var a=t.replace(/\s/gm,"");Rex_Navigator.updateNavigatorItem(e,a,t)}},_updateSectionNavLabel=function(e,t){e.children(".section-data").attr("data-section_nav_label",t)},_fixSectionDomOrder=function(e,t,a){var i,o,r,d,l=[];t="undefined"!=typeof t&&t;var n,s=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),c=s.length;for(n=0;n<c;n++){o=$(s[n]);var u={rexID:s[n].getAttribute("data-rexlive-section-id"),section_is_model:Rexbuilder_Util.hasClass(s[n],"rex-model-section"),section_model_id:s[n].getAttribute("data-rexlive-model-id"),section_model_number:s[n].getAttribute("data-rexlive-model-number"),$section:o.detach()};l.push(u)}for(r=0;r<e.length;r++){for(d=0;d<l.length;d++)if(l[d].rexID==e[r].rexID){if(!l[d].section_is_model){i=l[d].$section;break}if(l[d].section_model_number==e[r].modelNumber){i=l[d].$section;break}}Rexbuilder_Util.$rexContainer.append(i),l.splice(d,1)}for(d=0;d<l.length;d++)Rexbuilder_Util.$rexContainer.append(l[d].$section);"default"==Rexbuilder_Util.activeLayout&&(Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(e),"undefined"!=typeof a&&Rexbuilder_Util.updateSectionOrderCustomLayouts(a,e))},_updateSectionPhotoswipe=function(e){for(var t=0;t<e.length;t++)e[t].$data.attr("data-photoswipe",e[t].photoswipe)},_updateCustomClasses=function(e,t){var a,i="";e.is("section")?(a=e.children(".section-data"),i=a.attr("data-custom_classes")):(a=e.children(".rexbuilder-block-data"),i=a.attr("data-block_custom_class")),"undefined"==typeof i&&(i=""),i=i.trim();for(var o=i.split(/\s+/),r=0;r<o.length;r++)Rexbuilder_Util_Editor.removeCustomClass(o[r],a),e.removeClass(o[r]);for(var r=0;r<t.length;r++)Rexbuilder_Util_Editor.addCustomClass(t[r],a),e.addClass(t[r])},_updateBlockUrl=function(e,t){var a=e.children(".rexbuilder-block-data");a.attr("data-linkurl",t)},_updateFlexPostition=function(e,t){if(!e.hasClass("block-has-slider")){var a="rex-flex-top rex-flex-middle rex-flex-bottom rex-flex-left rex-flex-center rex-flex-right";e.removeClass(a);var i=e.children(".rexbuilder-block-data");i.attr("data-block_flex_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-"+t.x),e.addClass("rex-flex-"+t.y),i.attr("data-block_flex_position",t.x+" "+t.y))}},_updateImageFlexPostition=function(e,t){if(!e.hasClass("block-has-slider")){var a="rex-flex-img-top rex-flex-img-middle rex-flex-img-bottom rex-flex-img-left rex-flex-img-center rex-flex-img-right";e.removeClass(a);var i=e.children(".rexbuilder-block-data");i.attr("data-block_flex_img_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-img-"+t.x),e.addClass("rex-flex-img-"+t.y),i.attr("data-block_flex_img_position",t.x+" "+t.y))}},_updateCustomCSS=function(e){var t=document.getElementById("rexpansive-builder-style-inline-css");t&&(t.textContent=e)},_updateSectionVideoBackground=function(e,t){_updateVideos(e,t)},_updateSectionBackgroundColorLive=function(e,t){var a;""!=e.modelNumber?(a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'),-1!==a.css("background").indexOf("linear-gradient")&&a.css("background",""),a.css("background-color",t)):(a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),-1!==a.css("background").indexOf("linear-gradient")&&a.css("background",""),a.css("background-color",t)),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorToolLive(a,t)},_updateSectionBackgroundColor=function(e,t){var a=e.children(".section-data"),i=e[0];-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=t.color,a.attr("data-color_bg_section",t.color),a.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,t.color)},_updateSectionBackgroundGradient=function(e,t){var a=e.children(".section-data"),i=Rexbuilder_Util_Editor.getGradientSafeValue(t.color),o=e[0];o.style.background=i,a.attr("data-color_bg_section",t.color),a.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,i)},_updateBlockBackgroundColorLive=function(e,t){var a,i;if(""!=e.modelNumber){var o='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',r='div[data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content';a=Rexbuilder_Util.$rexContainer.find(o).find(r),i=a[0],-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=t}else a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content'),i=a[0],-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=t;"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(a,t)},_updateBlockBackgroundColor=function(e){var t=e.$elem,a=t.find(".grid-item-content"),i=a[0],o=t.children(".rexbuilder-block-data");-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=e.color,o.attr("data-color_bg_block",e.color),o.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorTool(t,e.color)},_updateBlockBackgroundGradient=function(e){var t=e.$elem,a=t.find(".grid-item-content"),i=a[0],o=t.children(".rexbuilder-block-data"),r=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);i.style.background=r,o.attr("data-color_bg_block",e.color),o.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundGradientTool(t,r)},_updateSectionOverlayColorLive=function(e,t){var a;""!=e.modelNumber?(a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'),-1!==a.children(".responsive-overlay").css("background").indexOf("linear-gradient")&&a.children(".responsive-overlay").css("background",""),a.children(".responsive-overlay").css("background-color",t)):(a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),-1!==a.children(".responsive-overlay").css("background").indexOf("linear-gradient")&&a.children(".responsive-overlay").css("background",""),a.children(".responsive-overlay").css("background-color",t)),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorToolLive(a,t)},_updateSectionOverlay=function(e,t){var a=e.children(".responsive-overlay"),i=a[0],o=e.children(".section-data");-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=t.color,o.attr("data-row_overlay_color",t.color),o.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?a.addClass("rex-active-overlay"):a.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,t)},_updateSectionOverlayGradient=function(e,t){var a=e.children(".section-data"),i=e.children(".responsive-overlay"),o=i[0],r=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);o.style.background=r,a.attr("data-row_overlay_color",t.color),a.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?i.addClass("rex-active-overlay"):i.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,{active:t.active,color:r})},_updateBlockOverlayColorLive=function(e,t){var a;if(""!=e.modelNumber){var i='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',o='div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay';a=Rexbuilder_Util.$rexContainer.find(i).find(o),-1!==a.css("background").indexOf("linear-gradient")&&a.css("background",""),a.css("background-color",t)}else{a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay');var r=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .slider-overlay');if(-1!==a.css("background").indexOf("linear-gradient")&&a.css("background",""),a.css("background-color",t),0===r.length){var d=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .rex-slider-element');""!==t&&d.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')}else r.css("background-color",t)}"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(a,t)},_updateBlockOverlay=function(e){var t=e.color,a=e.active,i=e.$elem,o=i.children(".rexbuilder-block-data"),r=i.find(".responsive-block-overlay"),d=r[0],l=r.find(".slider-overlay");
if(-1!==getComputedStyle(d).background.indexOf("linear-gradient")&&(d.style.background=""),d.style.backgroundColor=t,0===l.length){var n=i.find(".rex-slider-element");""!==t&&n.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')}else l.css("background-color",t);o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",a),"true"==a.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorTool(i,t)},_updateBlockOverlayGradient=function(e){var t=e.color,a=e.active,i=e.$elem,o=i.children(".rexbuilder-block-data"),r=i.find(".responsive-block-overlay"),d=Rexbuilder_Util_Editor.getGradientSafeValue(e.color),l=r[0];l.style.background=d,o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",a),"true"==a.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayGradientTool(i,d)},_updateSectionBackgroundImage=function(e,t){_updateImageBG(e,t)},_updateSectionVisibility=function(e,t,a,i){t?("default"==Rexbuilder_Util.activeLayout&&(e.removeClass("removing_section"),Rexbuilder_Util.addSectionID(e.attr("data-rexlive-section-id"))),e.removeClass("rex-hide-section"),Rexbuilder_Util.playPluginsSection(e)):(Rexbuilder_Util.stopPluginsSection(e),"default"==Rexbuilder_Util.activeLayout&&(e.addClass("removing_section"),Rexbuilder_Util.removeSectionID(e.attr("data-rexlive-section-id"))),e.addClass("rex-hide-section")),"undefined"!=typeof a&&null!=a&&Rexbuilder_Util.updatePageCustomizationsDomOrder(a),"undefined"!=typeof i&&null!=i&&Rexbuilder_Util.updateDefaultLayoutState({pageData:i})},_updateModelVisibility=function(e){var t=e.$sectionToHide,a=e.$sectionToShow,i=e.layoutsOrder,o=e.defaultStateSections;_updateSectionVisibility(t,!1),_updateSectionVisibility(a,!0),"undefined"!=typeof i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),"undefined"!=typeof o&&null!=o&&Rexbuilder_Util.updateDefaultLayoutState({pageData:o})},_updateSectionBecameModel=function(e){var t=e.$section,a=e.layoutsOrder,i=e.defaultStateSections;e.isModel?(t.addClass("rex-model-section"),t.addClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),0==t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&t.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==t.find(".rexpansive-block-section-toolbox").length&&t.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')):(t.removeClass("rex-model-section"),t.removeClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),t.find(".rexpansive-block-section-toolbox").remove()),t.attr("data-rexlive-model-id",e.modelID),t.attr("data-rexlive-model-name",e.modelName),t.attr("data-rexlive-model-number",e.modelNumber),t.attr("data-rexlive-section-id",e.sectionID),"undefined"!=typeof a&&null!=a&&Rexbuilder_Util.updatePageCustomizationsDomOrder(a),"undefined"!=typeof i&&null!=i&&Rexbuilder_Util.updateDefaultLayoutState({pageData:i})},_updateLockEditModel=function(e,t){var a=e.parents(".rexpansive_section");t?(a.addClass("rexlive-block-grid-editing"),a.attr("data-rexlive-model-editing","false"),0==a.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&a.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==a.find(".rexpansive-block-section-toolbox").length&&a.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>'),e.removeClass("unlocked"),e.addClass("locked")):(e.addClass("unlocked"),e.removeClass("locked"),a.removeClass("rexlive-block-grid-editing"),a.attr("data-rexlive-model-editing","true"),a.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),a.find(".rexpansive-block-section-toolbox").remove())},_fixModelNumbers=function(){var e,t,a=[];if(Rexbuilder_Util.rexContainer){var i,o=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),r=o.length;for(i=0;i<r;i++)if(Rexbuilder_Util.hasClass(o[i],"rex-model-section")){var d=o[i].getAttribute("data-rexlive-model-id");for(t=!1,e=0;e<a.length;e++)a[e].id==d&&(a[e].number=a[e].number+1,o[i].setAttribute("data-rexlive-model-number",a[e].number),t=!0);if(!t){var l={id:d,number:1};a.push(l),o[i].setAttribute("data-rexlive-model-number",l.number)}}}},_updateSectionWidthData=function(e,t){var a=e.children(".section-data");a.attr("data-section_width",t.sectionWidth),a.attr("data-dimension",t.widthType)},_updateSectionWidth=function(e,t){var a=t.section_width,i=t.dimension,o=t.galleryInstance;_updateSectionWidthData(e,{sectionWidth:a,widthType:i}),o.updateSectionWidthWrap(a),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateRowDistancesData=function(e,t){var a=e.parents(".rexpansive_section").children(".section-data");e.attr("data-separator",t.gutter),e.attr("data-row-separator-top",t.top),e.attr("data-row-separator-right",t.right),e.attr("data-row-separator-bottom",t.bottom),e.attr("data-row-separator-left",t.left),a.attr("data-block_distance",t.gutter),a.attr("data-row_separator_top",t.top),a.attr("data-row_separator_right",t.right),a.attr("data-row_separator_bottom",t.bottom),a.attr("data-row_separator_left",t.left)},_updateRowDistances=function(e,t){var a=t.rowDistances,i=e.find(".grid-stack-row"),o=t.galleryInstance;_updateRowDistancesData(i,a),o.updateRowDistances(a),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionMarginsData=function(e,t){var a=e[0];a.style.marginTop=t.top+"px",a.style.marginRight=t.right+"px",a.style.marginBottom=t.bottom+"px",a.style.marginLeft=t.left+"px"},_updateSectionMargins=function(e,t){_updateSectionMarginsData(e,t.marginsSection);var a=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,a.batchGridstack(),a.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),a.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateGridLayoutDomProperties=function(e,t){var a=e.parents(".rexpansive_section").children(".section-data");e.attr("data-layout",t),e.attr("data-full-height",!1),a.attr("data-layout",t),a.attr("data-full_height",!1)},_updateSectionLayout=function(e,t){_updateGridLayoutDomProperties(e,t.layout);var a=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,a.settings.galleryLayout=t.layout,a.batchGridstack(),a.updateFloatingElementsGridstack(),a.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),a.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionFullHeight=function(e){e.galleryInstance.updateFullHeight("true"==e.fullHeight.toString())},_updateRexButton=function(e){Rexbuilder_Rexbutton.updateButton(e)},_performAction=function(e,t){var a;t?(a=e.performActionData,Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!0):(a=e.reverseActionData,Rexbuilder_Util_Editor.redoActive=!1,Rexbuilder_Util_Editor.undoActive=!0);var i;i=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]');var o=i.find(".grid-stack-row"),r=o.data();if(void 0!==r)var d=o.data().plugin_perfectGridGalleryEditor;switch(e.actionName){case"updateSectionLayout":_updateSectionLayout(o,a);break;case"updateSectionFullHeight":_updateSectionFullHeight(a);break;case"updateSectionBlocksDisposition":void 0!==d&&(_updateBlocksLayout(a),setTimeout(d._updateElementsSizeViewers(),200));break;case"updateBlockVisibility":void 0!==d&&_updateRemovingBlock(a.targetElement,a.hasToBeRemoved,a.galleryInstance);break;case"updateSlider":_updateSlider(a);break;case"updateSectionName":_updateSectionName(i,a.sectionName);break;case"updateSectionPhotoswipe":_updateSectionPhotoswipe(a.elements);break;case"collapseSection":_collapseGrid(a.gridInstance,a.collapse,a.blockDisposition,a.gridLayout);break;case"updateCustomClasses":_updateCustomClasses(a.$target,a.classes);break;case"updateCustomCSS":_updateCustomCSS(a.css);break;case"_updateSectionBackgroundColor":_updateSectionBackgroundColor(i,a);break;case"updateSectionOverlay":_updateSectionOverlay(i,a);break;case"updateSectionImageBG":_updateImageBG(i,a);break;case"updateSectionVideoBG":Rexbuilder_Dom_Util.updateVideos(i,a);break;case"updateBlockBackgroundColor":_updateBlockBackgroundColor(a);break;case"updateBlockBackgroundGradient":_updateBlockBackgroundGradient(a);break;case"updateBlockOverlayGradient":_updateBlockOverlayGradient(a);break;case"updateBlockOverlay":_updateBlockOverlay(a);break;case"updateBlockImageBG":Rexbuilder_Util_Editor.updatingImageBg=!0,_updateImageBG(a.$itemContent,a.imageOpt),void 0!==d&&"masonry"==d.settings.galleryLayout&&d.updateElementHeight(a.$itemContent.parents(".grid-stack-item").get(0)),Rexbuilder_Util_Editor.updatingImageBg=!1;break;case"updateBlockPhotoswipe":_updateBlockPhotoswipe(a);break;case"updateBlockPadding":Rexbuilder_Util_Editor.updatingPaddingBlock=!0,_updateBlockPaddings(a.$elem,a.dataPadding),void 0!==d&&"masonry"==d.settings.galleryLayout&&d.updateElementHeight(a.$elem[0],!0),Rexbuilder_Util_Editor.updatingPaddingBlock=!1;break;case"updateBlockVideoBG":Rexbuilder_Dom_Util.updateVideos(a.$itemContent,a.videoOpt);break;case"updateBlockFlexPosition":_updateFlexPostition(a.$elem,a.dataPosition);break;case"updateBlockImageFlexPosition":_updateImageFlexPostition(a.$elem,a.dataPosition);break;case"updateBlockUrl":_updateBlockUrl(a.$elem,a.url);break;case"updateSectionVisibility":_updateSectionVisibility(i,a.show,a.layoutsOrder,a.stateDefault);break;case"updateSectionModel":_updateModelVisibility(a);break;case"sectionBecameModel":_updateSectionBecameModel(a);break;case"updateSectionOrder":_fixSectionDomOrder(a.sectionOrder,!1,a.sectionMoved);break;case"updateLockButton":_updateLockEditModel(a.$button,a.lock);break;case"updateSectionWidth":_updateSectionWidth(i,a);break;case"updateGridDistances":_updateRowDistances(i,a);break;case"updateSectionMargins":_updateSectionMargins(i,a);break;case"updateRexButton":_updateRexButton(a)}Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!1},init=function(){this.lastSliderNumber=0};return{init:init,updateRow:_updateRow,updateSectionMargins:_updateSectionMargins,updateSectionMarginsData:_updateSectionMarginsData,updateImageBG:_updateImageBG,updateBlockPhotoswipe:_updateBlockPhotoswipe,performAction:_performAction,addYoutubeVideo:_addYoutubeVideo,removeYoutubeVideo:_removeYoutubeVideo,addVimeoVideo:_addVimeoVideo,removeVimeoVideo:_removeVimeoVideo,addMp4Video:_addMp4Video,removeMp4Video:_removeMp4Video,fixVideoProportion:fixVideoProportion,updateSlider:_updateSlider,updateSliderStack:_updateSliderStack,updateSectionName:_updateSectionName,updateSectionNavLabel:_updateSectionNavLabel,enablePhotoswipeAllBlocksSection:_enablePhotoswipeAllBlocksSection,removePhotoswipeAllBlocksSection:_removePhotoswipeAllBlocksSection,updateCustomClasses:_updateCustomClasses,collapseGrid:_collapseGrid,updateCustomCSS:_updateCustomCSS,updateSectionVideoBackground:_updateSectionVideoBackground,updateSectionBackgroundImage:_updateSectionBackgroundImage,updateSectionBackgroundColor:_updateSectionBackgroundColor,updateSectionBackgroundColorLive:_updateSectionBackgroundColorLive,updateSectionBackgroundGradient:_updateSectionBackgroundGradient,updateSectionOverlay:_updateSectionOverlay,updateSectionOverlayColorLive:_updateSectionOverlayColorLive,updateSectionOverlayGradient:_updateSectionOverlayGradient,updateBlockBackgroundColor:_updateBlockBackgroundColor,updateBlockBackgroundColorLive:_updateBlockBackgroundColorLive,updateBlockBackgroundGradient:_updateBlockBackgroundGradient,updateBlockOverlayColorLive:_updateBlockOverlayColorLive,updateBlockOverlay:_updateBlockOverlay,updateBlockOverlayGradient:_updateBlockOverlayGradient,updateVideos:_updateVideos,updateBlockPaddings:_updateBlockPaddings,updateFlexPostition:_updateFlexPostition,updateImageFlexPostition:_updateImageFlexPostition,updateBlockUrl:_updateBlockUrl,updateSectionVisibility:_updateSectionVisibility,fixSectionDomOrder:_fixSectionDomOrder,updateSectionBecameModel:_updateSectionBecameModel,updateLockEditModel:_updateLockEditModel,fixModelNumbers:_fixModelNumbers,updateSectionWidthData:_updateSectionWidthData,updateSectionWidth:_updateSectionWidth,updateRowDistancesData:_updateRowDistancesData,updateGridLayoutDomProperties:_updateGridLayoutDomProperties,htmlToElement:htmlToElement,updateBulkSection:_updateBulkSection,updateBulkBlock:_updateBulkBlock}}(jQuery);
/**
 Values to insert on "wp_options" to work with rexbuttons
 Data are in form
 "option_name"
 "option_value"

 
_rex_buttons_ids

[\"9UEc\"]


_rex_buttons_styles

[{\"rexID\":\"9UEc\",\"buttonName\":\"Rex Funny v23\",\"rules\":{\"element\":{\"text_color\":\"rgb(111, 115, 181)\",\"font_size\":\"px\",\"background_color\":\"rgb(0, 238, 255)\",\"button_height\":\"px\",\"button_width\":\"\",\"border_color\":\"rgb(165, 0, 255)\",\"border_width\":\"px\",\"border_radius\":\"px\",\"margin_top\":\"px\",\"margin_bottom\":\"px\",\"margin_right\":\"px\",\"margin_left\":\"px\",\"padding_top\":\"px\",\"padding_bottom\":\"px\",\"padding_right\":\"px\",\"padding_left\":\"px\"},\"hover\":{\"background_color\":\"rgb(165, 0, 146)\",\"text_color\":\"rgb(0, 60, 255)\",\"border_color\":\"rgb(0, 255, 15)\"}}}]


_rex_button_9UEc_css

.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container{font-size: 12px;color: rgb(111, 115, 181);min-height: 70px;min-width: 100px;margin-top: 20px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-text{padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background{background-color: rgb(0, 238, 255);border-color: rgb(165, 0, 255);border-width: 5px;border-radius: 10px;border-style: solid;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background:hover{background-color: rgb(165, 0, 146);border-color: rgb(0, 255, 15);}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container:hover{color: rgb(0, 60, 255);}

_rex_button_9UEc_html

<span class=\"rex-button-wrapper\" data-rex-button-id=\"9UEc\"><span class=\"rex-button-data\" style=\"display:none;\" data-text-color=\"rgb(111, 115, 181)\" data-text-size=\"px\" data-background-color=\"rgb(0, 238, 255)\" data-background-color-hover=\"rgb(165, 0, 146)\" data-border-color-hover=\"rgb(0, 255, 15)\" data-text-color-hover=\"rgb(0, 60, 255)\" data-border-width=\"px\" data-border-color=\"rgb(165, 0, 255)\" data-border-radius=\"px\" data-button-height=\"px\" data-button-width=\"\" data-margin-top=\"px\" data-margin-bottom=\"px\" data-margin-left=\"px\" data-margin-right=\"px\" data-padding-left=\"px\" data-padding-right=\"px\" data-padding-top=\"px\" data-padding-bottom=\"px\" data-link-target=\"#\" data-link-type=\"_blank\" data-button-name=\"Rex Funny v23\"></span><a href=\"#\" class=\"rex-button-container\" target=\"_blank\"><span class=\"rex-button-background\"><span class=\"rex-button-text\">Learn More</span></span></a></span>


 */
var Rexbuilder_Rexbutton=function(t){"use strict";function e(t){for(var e=0;e<n.cssRules.length;e++)if(-1!==n.cssRules[e].selectorText.indexOf(t))return!0;return!1}function r(t){t=t||!1;for(var e,r,o,a,n,i=[],s=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),d=s.length,l=0,u=0,b=0,c=0,p=0;b<d;b++)if(e=s[b],t||!Rexbuilder_Util.hasClass(e,"removing_section"))for(r=Array.prototype.slice.call(e.querySelectorAll(".perfect-grid-item")),l=r.length,c=0;c<l;c++)if(o=r[c],t||!Rexbuilder_Util.hasClass(o,"removing_block"))for(a=Array.prototype.slice.call(o.querySelectorAll(".rex-button-wrapper")),u=a.length,p=0;p<u;p++)n=a[p],i.push(n.getAttribute("data-rex-button-id"));return i=Rexbuilder_Util.removeArrayDuplicates(i)}function o(){var t=r(!0),e={};t.forEach(function(t){e[t]={occurrencies:0}});for(var o,a,n=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),i=n.length,s=0;s<i;s++)o=n[s],a=o.getAttribute("data-rex-button-id"),e[a].occurrencies++,o.setAttribute("data-rex-button-number",e[a].occurrencies)}function a(){i=[];for(var r,o,a,n=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),s=0;s<n.length;s++)r=n[s],o=r.getAttribute("data-rex-button-id"),a=parseInt(r.getAttribute("data-rex-button-number")),i.push({id:o,number:a}),Rexbuilder_Util.hasClass(r,"rex-separate-button")&&(e(o)||v(t(r))),i[s].number<a&&(i[s].number=a)}var n,i,s,d=function(){if(0==Rexbuilder_Rexbutton.$buttonsStyle.length){var t="",e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.id="rexpansive-builder-rexbutton-style-inline-css",r.dataset.rexName="buttons-style",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),e.appendChild(r)}for(var o=0;o<document.styleSheets.length;o++)"rexpansive-builder-rexbutton-style-inline-css"==document.styleSheets[o].ownerNode.id&&(n=document.styleSheets[o])},l=function(){return n},u=function(t,e){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container{'+e+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container{'+e+"}",n.cssRules.length)},b=function(t,e){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background{'+e+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background{'+e+"}",n.cssRules.length)},c=function(t,e){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text{'+e+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text{'+e+"}",n.cssRules.length)},p=function(t,e){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover{'+e+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover{'+e+"}",n.cssRules.length)},g=function(t,e){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover{'+e+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover{'+e+"}",n.cssRules.length)},x=function(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container"){switch(e){case"font-size":n.cssRules[o].style.fontSize=r;break;case"color":n.cssRules[o].style.color=r;break;case"min-height":n.cssRules[o].style.minHeight=r;break;case"min-width":n.cssRules[o].style.minWidth=r;break;case"margin-top":n.cssRules[o].style.marginTop=r;break;case"margin-bottom":n.cssRules[o].style.marginBottom=r;break;case"margin-left":n.cssRules[o].style.marginLeft=r;break;case"margin-right":n.cssRules[o].style.marginRight=r}break}},h=function(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background"){switch(e){case"border-width":n.cssRules[o].style.borderWidth=r,n.cssRules[o].style.borderTopWidth=r,n.cssRules[o].style.borderLeftWidth=r,n.cssRules[o].style.borderRightWidth=r,n.cssRules[o].style.borderBottomWidth=r,n.cssRules[o].style.borderTop=r+" "+n.cssRules[o].style.borderTopStyle+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=r+" "+n.cssRules[o].style.borderLeftStyle+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=r+" "+n.cssRules[o].style.borderRightStyle+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=r+" "+n.cssRules[o].style.borderBottomStyle+" "+n.cssRules[o].style.borderBottomColor;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor;break;case"border-radius":n.cssRules[o].style.borderRadius=r,n.cssRules[o].style.borderTopLeftRadius=r,n.cssRules[o].style.borderTopRightRadius=r,n.cssRules[o].style.borderBottomLeftRadius=r,n.cssRules[o].style.borderBottomRightRadius=r,n.cssRules[o].style.webkitBorderRadius=r,n.cssRules[o].style.webkitBorderTopLeftRadius=r,n.cssRules[o].style.webkitBorderTopRightRadius=r,n.cssRules[o].style.webkitBorderBottomLeftRadius=r,n.cssRules[o].style.webkitBorderBottomRightRadius=r;break;case"background-color":n.cssRules[o].style.backgroundColor=r}break}},m=function(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-text")switch(e){case"padding-left":n.cssRules[o].style.paddingLeft=r;break;case"padding-right":n.cssRules[o].style.paddingRight=r;break;case"padding-top":n.cssRules[o].style.paddingTop=r;break;case"padding-bottom":n.cssRules[o].style.paddingBottom=r}},_=function(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container:hover"){switch(e){case"color":n.cssRules[o].style.color=r}break}},R=function(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background:hover"){switch(e){case"background-color":n.cssRules[o].style.backgroundColor=r;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor}break}},f=function(t){var e=Rexbuilder_Util.$rexContainer.find(".rex-loading-button .rex-button-wrapper");e.unwrap();var r=e.parents(".rex-buttons-paragraph").eq(0),o=e.parents(".text-wrap").eq(0),a=e.parents(".grid-stack-row").eq(0),n=e.parents(".rexpansive_section").eq(0),i=jQuery.extend(!0,{},t.buttonDimensions);a.find(".button-list__element__tools").remove();var s=e.find(".rex-button-data").eq(0),d={top:parseInt(s.attr("data-margin-top").replace("px","")),bottom:parseInt(s.attr("data-margin-bottom").replace("px","")),left:parseInt(s.attr("data-margin-left").replace("px","")),right:parseInt(s.attr("data-margin-right").replace("px",""))};d.top=isNaN(d.top)?0:d.top,d.bottom=isNaN(d.bottom)?0:d.bottom,d.left=isNaN(d.left)?0:d.left,d.right=isNaN(d.right)?0:d.right;var l={top:parseInt(s.attr("data-padding-top").replace("px","")),bottom:parseInt(s.attr("data-padding-bottom").replace("px","")),left:parseInt(s.attr("data-padding-left").replace("px","")),right:parseInt(s.attr("data-padding-right").replace("px",""))};l.top=isNaN(l.top)?0:l.top,l.bottom=isNaN(l.bottom)?0:l.bottom,l.left=isNaN(l.left)?0:l.left,l.right=isNaN(l.right)?0:l.right,i.height=i.height+d.top+d.bottom+l.top+l.bottom,i.width=i.width+d.left+d.right+l.left+l.right;var u;switch(u=0==o.length?0!=a.length?"inside-row":"inside-new-row":0!=r.length?"inside-paragraph":"inside-block"){case"inside-block":e.wrap('<p class="rex-buttons-paragraph"></p>'),y(e);break;case"inside-paragraph":y(e);break;case"inside-row":var b=jQuery.Event("rexlive:insert_new_text_block");b.settings={data_to_send:{$buttonWrapper:e,$section:n,addBlockButton:!0,mousePosition:t.mousePosition,blockDimensions:{w:i.width,h:i.height},sectionTarget:{sectionID:n.attr("data-rexlive-section-id"),modelNumber:"undefined"!=typeof n.attr("data-rexlive-model-number")?n.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(b);break;case"inside-new-row":}},y=function(t){for(var e=t.attr("data-rex-button-id"),r=!1,n=0;n<i.length;n++)if(i[n].id==e){r=!0;break}r||v(t),o(),a(),S(t);var s=t.parents(".text-wrap");0!=s.length&&TextEditor.removePlaceholder(s.eq(0)),Rexbuilder_Util_Editor.updateBlockContainerHeight(s),Rexbuilder_Util_Editor.builderEdited(!1)},v=function(t){if(0!=t.find(".rex-button-data").eq(0).length){var e=I(t,!0),r=e.buttonInfo.buttonTarget.button_id;w(r,e.buttonInfo)}},w=function(t,e){var r="",o="",a="",n="",i="",d="";d+="color: "+e.text_color+";",i=isNaN(parseInt(e.font_size.replace("px","")))?s.font_size:e.font_size,d+="font-size: "+i+";",a=isNaN(parseInt(e.button_height.replace("px","")))?s.dimensions.height:e.button_height,d+="min-height: "+a+";",a=isNaN(parseInt(e.button_width.replace("px","")))?s.dimensions.width:e.button_width,d+="min-width: "+a+";",r=isNaN(parseInt(e.margin_top.replace("px","")))?s.margins.top:e.margin_top,d+="margin-top: "+r+";",r=isNaN(parseInt(e.margin_right.replace("px","")))?s.margins.right:e.margin_right,d+="margin-right: "+r+";",r=isNaN(parseInt(e.margin_bottom.replace("px","")))?s.margins.bottom:e.margin_bottom,d+="margin-bottom: "+r+";",r=isNaN(parseInt(e.margin_left.replace("px","")))?s.margins.left:e.margin_left,d+="margin-left: "+r+";",u(t,d);var l="";l+="border-color: "+e.border_color+";",l+="border-style: solid;",n=isNaN(parseInt(e.border_width.replace("px","")))?s.border.width:e.border_width,l+="border-width: "+n+";",n=isNaN(parseInt(e.border_radius.replace("px","")))?s.border.radius:e.border_radius,l+="border-radius: "+n+";",l+="background-color: "+e.background_color+";",b(t,l);var x="";o=isNaN(parseInt(e.padding_top.replace("px","")))?s.paddings.top:e.padding_top,x+="padding-top: "+o+";",o=isNaN(parseInt(e.padding_right.replace("px","")))?s.paddings.right:e.padding_right,x+="padding-right: "+o+";",o=isNaN(parseInt(e.padding_bottom.replace("px","")))?s.paddings.bottom:e.padding_bottom,x+="padding-bottom: "+o+";",o=isNaN(parseInt(e.padding_left.replace("px","")))?s.paddings.left:e.padding_left,x+="padding-left: "+o+";",c(t,x);var h="";h+="background-color: "+e.hover_color+";",h+="border-color: "+e.hover_border+";",p(t,h);var m="";m+="color: "+e.hover_text+";",g(t,m)},k=function(t){switch(t.propertyType){case"text":m(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"container":x(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"background":h(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"backgroundHover":case"borderHover":R(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"textHover":_(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"button":var e=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t.buttonTarget.button_id+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');switch(t.propertyName){case"link_target":e.find("a.rex-button-container").eq(0).attr("href",t.newValue);break;case"link_type":e.find("a.rex-button-container").eq(0).attr("target",t.newValue);break;case"button_label":e.find(".rex-button-text").eq(0).text(t.newValue);break;case"button_class":e.find("a.rex-button-container").eq(0).attr("class","").addClass("rex-button-container").addClass(t.newValue);break;case"button_name":e.find(".rex-button-data").eq(0).attr("data-button-name",t.newValue)}}},N=function(t){var e=t.buttonProperties,r=e.buttonTarget.button_id,o="",a="",n="",i="",d="";d=isNaN(parseInt(e.font_size.replace("px","")))?s.font_size:e.font_size,x(r,"font-size",d),x(r,"color",e.text_color),n=isNaN(parseInt(e.button_height.replace("px","")))?s.dimensions.height:e.button_height,x(r,"min-height",n),n=isNaN(parseInt(e.button_width.replace("px","")))?s.dimensions.width:e.button_width,x(r,"min-width",n),o=isNaN(parseInt(e.margin_top.replace("px","")))?s.margins.top:e.margin_top,x(r,"margin-top",o),o=isNaN(parseInt(e.margin_right.replace("px","")))?s.margins.right:e.margin_right,x(r,"margin-right",o),o=isNaN(parseInt(e.margin_bottom.replace("px","")))?s.margins.bottom:e.margin_bottom,x(r,"margin-bottom",o),o=isNaN(parseInt(e.margin_left.replace("px","")))?s.margins.left:e.margin_left,x(r,"margin-left",o),h(r,"border-color",e.border_color),i=isNaN(parseInt(e.border_width.replace("px","")))?s.border.width:e.border_width,h(r,"border-width",i),i=isNaN(parseInt(e.border_radius.replace("px","")))?s.border.radius:e.border_radius,h(r,"border-radius",i),h(r,"background-color",e.background_color),a=isNaN(parseInt(e.padding_top.replace("px","")))?s.paddings.top:e.padding_top,m(r,"padding-top",a),a=isNaN(parseInt(e.padding_right.replace("px","")))?s.paddings.right:e.padding_right,m(r,"padding-right",a),a=isNaN(parseInt(e.padding_bottom.replace("px","")))?s.paddings.bottom:e.padding_bottom,m(r,"padding-bottom",a),a=isNaN(parseInt(e.padding_left.replace("px","")))?s.paddings.left:e.padding_left,m(r,"padding-left",a),R(r,"background-color",e.hover_color),R(r,"border-color",e.hover_border),_(r,"color",e.hover_text);var l=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]'),u=l.find(".rex-button-data").eq(0);l.find(".rex-button-text").eq(0).text(e.text),l.find("a.rex-button-container").eq(0).attr("href",e.link_target),l.find("a.rex-button-container").eq(0).attr("target",e.link_type),u.attr("data-link-target",e.link_target),u.attr("data-link-type",e.link_type),l.hasClass("rex-separate-button")?C(l,e):S(l)},A=function(t){var e=t.buttonTarget.button_id,r=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"]');r.removeClass("rex-separate-button"),S(r)},T=function(t){var e=t.buttonData,r=t.newID,o=e.buttonTarget.button_id,a=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+o+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]');if(a.addClass("rex-separate-button"),a.attr("data-rex-button-id",r),a.attr("data-rex-button-number",1),i.push({id:r,number:1}),0==Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+o+'"]').length){var n;for(n=0;n<i.length&&i[n].id!=o;n++);n!=i.length&&i.splice(n,1)}C(a,e),v(a)},S=function(t){var e=t.find(".rex-button-data").eq(0);e.removeAttr("data-text-color"),e.removeAttr("data-text-size"),e.removeAttr("data-background-color"),e.removeAttr("data-background-color-hover"),e.removeAttr("data-border-color-hover"),e.removeAttr("data-text-color-hover"),e.removeAttr("data-border-width"),e.removeAttr("data-border-color"),e.removeAttr("data-border-radius"),e.removeAttr("data-button-height"),e.removeAttr("data-button-width"),e.removeAttr("data-margin-top"),e.removeAttr("data-margin-bottom"),e.removeAttr("data-margin-left"),e.removeAttr("data-margin-right"),e.removeAttr("data-padding-top"),e.removeAttr("data-padding-bottom"),e.removeAttr("data-padding-left"),e.removeAttr("data-padding-right"),e.removeAttr("data-button-name")},C=function(t,e){var r=t.find(".rex-button-data").eq(0);r.attr("data-text-color",e.text_color),r.attr("data-text-size",e.font_size),r.attr("data-background-color",e.background_color),r.attr("data-background-color-hover",e.hover_color),r.attr("data-border-color-hover",e.hover_border),r.attr("data-text-color-hover",e.hover_text),r.attr("data-border-width",e.border_width),r.attr("data-border-color",e.border_color),r.attr("data-border-radius",e.border_radius),r.attr("data-button-height",e.button_height),r.attr("data-button-width",e.button_width),r.attr("data-margin-top",e.margin_top),r.attr("data-margin-bottom",e.margin_bottom),r.attr("data-margin-right",e.margin_right),r.attr("data-margin-left",e.margin_left),r.attr("data-padding-top",e.padding_top),r.attr("data-padding-bottom",e.padding_bottom),r.attr("data-padding-right",e.padding_right),r.attr("data-padding-left",e.padding_left),r.attr("data-button-name",e.buttonTarget.button_name)},I=function(t,e){e="undefined"!=typeof e&&"true"==e.toString();var r={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_border:"",hover_text:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:""}},o=t.find(".rex-button-data").eq(0);r.buttonTarget.button_id=t.attr("data-rex-button-id"),r.buttonTarget.button_number=parseInt(t.attr("data-rex-button-number"));var a=o[0],n=!1;t.hasClass("rex-separate-button")||e?(r.font_size=a.getAttribute("data-text-size")?a.getAttribute("data-text-size").toString():"",r.text_color=a.getAttribute("data-text-color")?a.getAttribute("data-text-color").toString():"",r.button_height=a.getAttribute("data-button-height")?a.getAttribute("data-button-height").toString():"",r.button_width=a.getAttribute("data-button-width")?a.getAttribute("data-button-width").toString():"",r.margin_top=a.getAttribute("data-margin-top")?a.getAttribute("data-margin-top").toString():"",r.margin_bottom=a.getAttribute("data-margin-bottom")?a.getAttribute("data-margin-bottom").toString():"",r.margin_right=a.getAttribute("data-margin-right")?a.getAttribute("data-margin-right").toString():"",r.margin_left=a.getAttribute("data-margin-left")?a.getAttribute("data-margin-left").toString():"",r.border_color=a.getAttribute("data-border-color")?a.getAttribute("data-border-color").toString():"",r.border_width=a.getAttribute("data-border-width")?a.getAttribute("data-border-width").toString():"",r.border_radius=a.getAttribute("data-border-radius")?a.getAttribute("data-border-radius").toString():"",r.background_color=a.getAttribute("data-background-color")?a.getAttribute("data-background-color").toString():"",r.padding_top=a.getAttribute("data-padding-top")?a.getAttribute("data-padding-top").toString():"",r.padding_bottom=a.getAttribute("data-padding-bottom")?a.getAttribute("data-padding-bottom").toString():"",r.padding_right=a.getAttribute("data-padding-right")?a.getAttribute("data-padding-right").toString():"",r.padding_left=a.getAttribute("data-padding-left")?a.getAttribute("data-padding-left").toString():"",r.hover_color=a.getAttribute("data-background-color-hover")?a.getAttribute("data-background-color-hover").toString():"",r.hover_border=a.getAttribute("data-border-color-hover")?a.getAttribute("data-border-color-hover").toString():"",r.hover_text=a.getAttribute("data-text-color-hover")?a.getAttribute("data-text-color-hover").toString():"",r.buttonTarget.button_name=a.getAttribute("data-button-name")?a.getAttribute("data-button-name").toString():"",n=!0):r.synchronize="undefined"!=typeof o.attr("data-synchronize")&&o.attr("data-synchronize").toString(),r.text=t.find(".rex-button-text").eq(0).text(),r.link_target=o.attr("data-link-target"),r.link_type=o.attr("data-link-type"),r.classes=t.find("a.rex-button-container").eq(0).attr("class").replace("rex-button-container","").replace(/\s/,"");var i={separateButton:n,buttonInfo:r};return i},B=function(t){var e=t.buttonTarget.button_id,r=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');r.find(".rex-button-data").attr("data-synchronize",!0)},q=function(){Rexbuilder_Util.$document.on("rexlive:completeImportButton",function(t){var e=t.settings,r=e.$blockAdded,o=e.$buttonWrapper;o.detach().prependTo(r.find(".text-wrap").eq(0)),o.wrap('<p class="rex-buttons-paragraph"></p>'),y(o)})},z=function(){return i},L=function(){n=null,i=[],s={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},this.$buttonsStyle=t("#rexpansive-builder-rexbutton-style-inline-css"),d(),o(),a(),q()};return{init:L,getActiveStyleSheet:l,fixImportedButton:f,getButtonsInPage:z,updateButtonLive:k,lockSynchronize:B,updateButton:N,removeSeparateButton:A,separateRexButton:T,generateButtonData:I,endFixingButtonImported:y,updateButtonListInPage:a,findIDsInPage:r,refreshNumbers:o,updateButtonContainerRule:x,updateButtonBackgroundRule:h,updateButtonBackgroundHoverRule:R,updateContainerHoverRule:_}}(jQuery);
var Rexbuilder_Rexelement=function(e){"use strict";function t(){Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(t,o){var n=e(o);n.hasClass("rex-separate-element")?r(n):0!==t&&i[t].id==i[t-1].id||r(n)})}function r(t){var r=0!==t.find(".wpcf7-form").length;r&&(Rexbuilder_Rexwpcf7.refreshFormStyle(t.find(".wpcf7-form"),!0),t.find(".wpcf7-column").each(function(t,r){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(e(r))}))}function o(e){var t={},r=e.get(0).querySelector(".rex-element-data").dataset,o={element_id:e.attr("data-rex-element-id"),element_number:parseInt(e.attr("data-rex-element-number"))},a=e.find(".wpcf7-form"),c={background_color:r.wpcf7BackgroundColor||a.css("background-color"),border_color:r.wpcf7BorderColor||a.css("border-color"),border_width:r.wpcf7BorderWidth||a.css("border-width"),margin_top:r.wpcf7MarginTop||a.css("margin-top"),margin_left:r.wpcf7MarginLeft||a.css("margin-left"),margin_right:r.wpcf7MarginRight||a.css("margin-right"),margin_bottom:r.wpcf7MarginBottom||a.css("margin-bottom"),error_message_color:r.wpcf7ErrorMessageColor||_.wpcf7_data.error_message_color,error_message_font_size:r.wpcf7ErrorMessageFontSize||_.wpcf7_data.error_message_font_size,send_message_color:r.wpcf7SendMessageColor||_.wpcf7_data.send_message_color,send_message_font_size:r.wpcf7SendMessageFontSize||_.wpcf7_data.send_message_font_size},d={width:r.wpcf7ContentWidth||_.wpcf7_data.content.width,height:r.wpcf7ContentHeight||_.wpcf7_data.content.height,font_size:r.wpcf7ContentFontSize||_.wpcf7_data.content.font_size,border_width:r.wpcf7ContentBorderWidth||_.wpcf7_data.content.border_width,border_radius:r.wpcf7ContentBorderRadius||_.wpcf7_data.content.border_radius,text_color:r.wpcf7ContentTextColor||_.wpcf7_data.content.text_color,background_color:r.wpcf7ContentBackgroundColor||_.wpcf7_data.content.background_color,border_color:r.wpcf7ContentBorderColor||_.wpcf7_data.content.border_color,text_color_hover:r.wpcf7ContentTextColorHover||_.wpcf7_data.content.text_color_hover,background_color_hover:r.wpcf7ContentBackgroundColorHover||_.wpcf7_data.content.background_color_hover,border_color_hover:r.wpcf7ContentBorderColorHover||_.wpcf7_data.content.border_color_hover},i={padding_top:r.wpcf7ColumnsPaddingTop||_.wpcf7_data.columns.padding_top,padding_left:r.wpcf7ColumnsPaddingLeft||_.wpcf7_data.columns.padding_left,padding_right:r.wpcf7ColumnsPaddingRight||_.wpcf7_data.columns.padding_right,padding_bottom:r.wpcf7ColumnsPaddingBottom||_.wpcf7_data.columns.padding_bottom};return c.content=d,c.columns=i,c.options_different=n(o.element_id),t.synchronize=r.synchronize||!1,t.element_target=o,t.wpcf7_data=c,t}function n(e){function t(e,t,r){return e===r[0]}var r=Rexbuilder_Util.rexContainer.querySelector('.rex-element-wrapper[data-rex-element-id="'+e+'"]'),o=r.querySelector(".rex-element-data"),n=Array.prototype.slice.call(r.querySelectorAll(".rex-wpcf7-column-content-data")),a=new Array(o.getAttribute("data-wpcf7-content-width")),c=new Array(o.getAttribute("data-wpcf7-content-height")),d=new Array(o.getAttribute("data-wpcf7-content-text-color")),i=new Array(o.getAttribute("data-wpcf7-content-font-size"));n.forEach(function(e){a.push(e.getAttribute("data-wpcf7-input-width")),c.push(e.getAttribute("data-wpcf7-input-height")),d.push(e.getAttribute("data-text-color")),i.push(e.getAttribute("data-wpcf7-font-size"))});var _={};return _.width=!a.every(t),_.height=!c.every(t),_.text_color=!d.every(t),_.font_size=!i.every(t),_}function a(){var t,r=!1;Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(o,n){var a=e(n),c=a.attr("data-rex-element-id"),d=parseInt(a.attr("data-rex-element-number"));for(r=!1,t=0;t<i.length;t++)if(i[t].id==c){r=!0;break}r=!1,r||i.push({id:parseInt(c),number:d}),i[t].number<d&&(i[t].number=d)})}function c(){var t=Rexbuilder_Util.$document.find("form").get(),r=t.filter(function(t){return 0===e(t).parents(".rex-element-wrapper").length});r.forEach(function(e){Rexbuilder_Util.addClass(e,"no-builder-form")})}function d(){c(),a()}var i=[],_={synchronize:!1,wpcf7_data:{background_color:"rgb(0, 0, 0, 0)",border_color:"rgb(0, 0, 0, 1)",border_width:"2px",margin_top:"5px",margin_left:"5px",margin_right:"5px",margin_bottom:"5px",error_message_color:"rgb(0, 0, 0, 1)",error_message_font_size:"15px",send_message_color:"rgb(0, 0, 0, 1)",send_message_font_size:"15px",columns:{padding_top:"15px",padding_left:"15px",padding_right:"15px",padding_bottom:"15px"},content:{background_color:"rgb(255, 255, 255, 1)",background_color_hover:"rgb(255, 255, 255, 1)",text_color:"rgb(0, 0, 0, 1)",text_color_hover:"rgb(0, 0, 0, 1)",border_color:"rgb(0, 0, 0, 1)",border_color_hover:"rgb(0, 0, 0, 1)",width:"200px",height:"50px",font_size:"15px",border_width:"1px",border_radius:"0px"},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}};return{init:d,addStyles:t,addElementStyle:r,generateElementData:o}}(jQuery);
var Rexbuilder_Rexelement_Editor=function(e){"use strict";function t(t){var r=Rexbuilder_Util.$rexContainer.find(".rex-loading-element .rex-element-wrapper"),a=r.attr("data-rex-element-id"),n=r.parents(".text-wrap").eq(0),l=r.parents(".grid-stack-row").eq(0),o=r.parents(".rexpansive_section").eq(0);r.addClass("importing-element"),r.detach(),l.find(".element-list-preview").remove();var d;0==n.length?0!==l.length&&(d="inside-row"):d="inside-block",e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:a},success:function(a){if(a.success){var l=e.parseHTML(a.data.shortcode_transformed),c=a.data.form_content.toString().trim(),p=e('<div class="rex-element-container"></div>');p.append(l),r.append(p);var s=a.data.shortcode,f=e('<span class="string-shortcode"></span>').get(0);f.setAttribute("shortcode",s),r.prepend(f);var m=r.find(".rex-element-data"),u=e.parseHTML(a.data.element_data_html[0]);if(m.attr("data-synchronize",!1),null!==u){m.remove();var x=e(u);r.prepend(x),x.attr("data-synchronize",!1)}switch(d){case"inside-block":r.wrap('<span class="rex-elements-paragraph"></span>'),n.prepend(r),i(r,c),Rexbuilder_Util_Editor.updateBlockContainerHeight(n);break;case"inside-row":var w=jQuery.Event("rexlive:insert_new_text_block");w.settings={data_to_send:{$elementWrapper:r,$section:o,addBlockElement:!0,mousePosition:t.mousePosition,formFieldsString:c,sectionTarget:{sectionID:o.attr("data-rexlive-section-id"),modelNumber:void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(w)}}},error:function(e){}})}function r(e){var t=e.settings,r=t.$elementAdded,a=t.$elementWrapper,n=t.formFieldsString;a.detach().prependTo(r.find(".text-wrap").eq(0)),a.wrap('<span class="rex-elements-paragraph"></span>'),i(a,n)}function a(e){var t=e.elementData,r=e.newID,a=t.element_target.element_id,n=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"][data-rex-element-number="'+t.element_target.element_number+'"]');if(n.addClass("rex-separate-element"),n.attr("data-rex-element-id",r),n.attr("data-rex-element-number",1),s.push({id:r,number:1}),0===Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"]').length){for(var l=0;l<s.length&&s[l].id!=a;l++);l!=s.length&&s.splice(l,1)}Rexbuilder_Rexwpcf7_Editor.removeFormInPage(a)}function n(t){var r=t.elementID.toString(),a=t.oldElementID.toString(),n=t.elementData,o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]'),d=o.find(".string-shortcode"),c=d.attr("shortcode").toString(),p=c.replace(a,r);d.attr("shortcode",p),e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:r},success:function(t){if(t.success){var r=t.data.form_content.toString().trim(),a=o.find(".rex-element-container");a.empty();var d=e.parseHTML(t.data.shortcode_transformed);a.append(d),l(n),i(o,r)}},error:function(e){}})}function l(e){var t=e.element_target.element_id,r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"][data-rex-element-number="'+e.element_target.element_number+'"]');r.find(".rex-element-data").attr("data-synchronize",!0)}function i(t,r){var a=t.get(0),n=0!==t.find(".wpcf7").length,l=t.attr("data-rex-element-id"),i=!1;t.attr("data-rex-element-number",1);for(var o=0;o<s.length;o++)if(s[o].id==l){s[o].number+=1,t.attr("data-rex-element-number",s[o].number),i=!0;break}i||s.push({id:l,number:1});var p=Rexbuilder_Util.hasClass(a,"rex-separate-element")||!i,f=t.parents(".text-wrap");if(0!=f.length&&TextEditor.removePlaceholder(f.eq(0)),n){var m=0===t.find(".wpcf7-rows").length,u=l;if(m){var x=t.find(".wpcf7-form"),w=x.children().not(".wpcf7-response-output").not(x.children().first());w.wrapAll('<div class="wpcf7-rows ui-sortable"></div>');var v=x.find(".wpcf7-rows");x.find("[type=url]").parents(".wpcf7-form-control-wrap").remove(),x.find("[type=tel]").parents(".wpcf7-form-control-wrap").remove(),x.find("[type=date]").parents(".wpcf7-form-control-wrap").remove(),x.find("[type=range]").parents(".wpcf7-form-control-wrap").remove(),x.find(".wpcf7-checkbox").parents(".wpcf7-form-control-wrap").remove(),x.find(".wpcf7-quiz-label").parents(".wpcf7-form-control-wrap").remove();var _=/\[(url|tel|date|checkbox|quiz|range)\*?[^\]]+\]/g;r=r.replace(_,"");var b=v.children().filter(function(t,r){var a=e(r);return 0!=a.find(".wpcf7-form-control-wrap").length||0!=a.find(".wpcf7-form-control").length||a.is(".wpcf7-form-control-wrap")||a.is(".wpcf7-form-control")}),g=e();b.each(function(t,r){var a=e(r);if(0!==a.find(".wpcf7-form-control-wrap").length){if(a=a.find(".wpcf7-form-control-wrap"),0!==a.parent("label").length){var n=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),l=a.parent("label");l.contents().wrapAll(n),l.append(a),a=l.addClass("wpcf7-label-text")}}else 0!==a.find(".wpcf7-form-control").length&&(a=a.find(".wpcf7-form-control"));g=g.add(a)}),v.empty();var h=[],C=[],R=e(document.createElement("div")).addClass("wpcf7-rows ui-sortable");g.each(function(t,a){var n=e(a),l=e(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",t+1),i=e(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),o=e(document.createElement("span")).addClass("wpcf7-column-content").append(a);i.append(o),l.append(i),R.append(l);var d=e(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",t+1),c=e(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),p=e(document.createElement("span")).addClass("wpcf7-column-content").append(a);c.append(p),d.append(c),v.append(d),o.append(n[0].outerHTML),n.is("label")&&(n=void 0===n.find(".wpcf7-form-control-wrap")?n.find(".wpcf7-form-control"):n.find(".wpcf7-form-control-wrap"));var s=0!=n.find("[type=text]").length,f=0!=n.find(".wpcf7-email").length,m=0!=n.find(".wpcf7-number").length,u=0!=n.find(".wpcf7-textarea").length,x=0!=n.find(".wpcf7-select").length,w=0!=n.find(".wpcf7-radio").length,_=0!=n.find(".wpcf7-acceptance").length,b=0!=n.find(".wpcf7-file").length,g=n.is(".wpcf7-submit"),E=Rexbuilder_Util.createRandomNumericID(3);if(h[t]=E,C[t]=/\[[\w]+[^\]]+\]/.exec(r)[0],s){var y="text-"+h[t],T=n.find(".wpcf7-text");T.addClass(y),n.addClass(y),T.attr("size",""),r=r.replace(C[t],"");var S=/\[text\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(f){var y="email-"+h[t],T=n.find(".wpcf7-email");T.addClass(y),n.addClass(y),T.attr("size",""),r=r.replace(C[t],"");var S=/\[email\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(m){var y="number-"+h[t],T=n.find(".wpcf7-number");T.addClass(y),n.addClass(y),T.attr("size",""),r=r.replace(C[t],"");var S=/\[number\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(u){var y="textarea-"+h[t],T=n.find(".wpcf7-textarea");T.addClass(y),n.addClass(y),T.attr("size",""),r=r.replace(C[t],"");var S=/\[textarea\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(x){var y="menu-"+h[t],T=n.find(".wpcf7-select");T.addClass(y),n.addClass(y),T.prepend('<option value="" disabled selected>Select something</option>'),T.attr("size",""),r=r.replace(C[t],"");var S=/\[select\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(w){var y="radio-"+h[t],k=n.find("[type=radio]").attr("name");n.addClass(y),n.removeClass(k),r=r.replace(C[t],"");var S=/\[radio\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(_){var y="acceptance-"+h[t],k=n.find("[type=checkbox]").attr("name");n.addClass(y),n.removeClass(k),C[t]=/\[acceptance\*?[^(\])]+\][^(\])]+\]/.exec(r)[0],r=r.replace(C[t],"");var S=/\[acceptance\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(b){var y="file-"+h[t],k=n.find("[type=file]").attr("name");n.append('<div class="wpcf7-file-caption">Your text here</div>'),n.addClass(y),n.removeClass(k),r=r.replace(C[t],"");var S=/\[file\*? [^(\s|\])]+/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),C[t]=C[t].replace("]",']<div class="wpcf7-file-caption">Your text here</div>'),o.find(".wpcf7-form-control-wrap").replaceWith(C[t])}else if(g){var y="submit-"+E;n.addClass(y),r=r.replace(C[t],"");var S=/\[submit/;C[t]=C[t].replace(S,S.exec(C[t])[0]+" class:"+y),o.find(".wpcf7-form-control").replaceWith(C[t])}/\]/.test(C[t])||(C[t]+="]")}),Rexbuilder_Rexwpcf7_Editor.addFormInPage(u,R),R.find(".wpcf7-column").each(function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData({editPoint:{element_id:u,row_number:e+1,column_number:1}})});var t=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+u+'"]').eq(0);Rexbuilder_Rexelement.addElementStyle(t),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Util_Editor.updateBlockContainerHeight(f),t.removeClass("importing-element")}else Rexbuilder_Rexwpcf7_Editor.updateDBFormsInPage(l,p);Rexbuilder_Rexwpcf7_Editor.wrapButtons(),Rexbuilder_Rexwpcf7_Editor.setRowsSortable(),Rexbuilder_Rexwpcf7_Editor.addMissingTools(u),d(),c(f)}Rexbuilder_Live_Utilities.launchTooltips()}function o(){var t,r=!1;Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(a,n){var l=e(n),i=l.attr("data-rex-element-id"),o=parseInt(l.attr("data-rex-element-number"));for(r=!1,t=0;t<s.length;t++)if(s[t].id==i){r=!0;break}r=!1,r||s.push({id:parseInt(i),number:o}),s[t].number<o&&(s[t].number=o)})}function d(){for(var e=Rexbuilder_Live_Templates.getTemplate("rexelement-tools",{settingsType:"form_settings"}),t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),r=0;r<t.length;r++)t[r].querySelector(".rexelement-tools")||t[r].insertAdjacentHTML("afterbegin",e)}function c(e){var t=e.get(0),r=e.parents(".grid-stack-row"),a=r.data().plugin_perfectGridGalleryEditor;a.focusElement(),t.setAttribute("data-medium-focused",!0),TextEditor.triggerMEEvent({name:"focus",data:{},editable:t})}function p(){d(),o()}var s=[];return{init:p,focusRexElement:c,fixImportedElement:t,setupElement:i,handleCompleteImportElement:r,lockSynchronize:l,separateRexElement:a,refreshSeparatedRexElement:n}}(jQuery);
var Rexbuilder_Rexwpcf7=function(t){"use strict";function e(){if(0===Rexbuilder_Rexwpcf7.$rexFormsStyle.length){var t="",e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.id="rexpansive-builder-rexwpcf7-style-inline-css",r.dataset.rexName="rexwpcf7-style",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),e.appendChild(r)}for(var o=0;o<document.styleSheets.length;o++)"rexpansive-builder-rexwpcf7-style-inline-css"==document.styleSheets[o].ownerNode.id&&(j=document.styleSheets[o])}function r(t){for(var e=0;e<j.cssRules.length;e++)if(j.cssRules[e].selectorText==t)return!0;return!1}function o(t){var e={},r=t.split(";");return r.forEach(function(t){var r=t.split(":");2===r.length&&(e[r[0]]=r[1].trim())}),e}function a(t,e){var a='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',c=a+"{"+e+"}";if(r(a)){var l=o(e);for(var n in l)l.hasOwnProperty(n)&&f(t,n,l[n])}else"insertRule"in j?j.insertRule(c,j.cssRules.length):"addRule"in j&&j.addRule(c,j.cssRules.length)}function c(t,e,a){var c='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,l=c+"{"+a+"}";if(r(c)){var n=o(a);for(var i in n)n.hasOwnProperty(i)&&u(t,i,n[i])}else"insertRule"in j?j.insertRule(l,j.cssRules.length):"addRule"in j&&j.addRule(l,j.cssRules.length)}function l(t,e){var a='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',c=a+"{"+e+"}";if(r(a)){var l=o(e);for(var n in l)l.hasOwnProperty(n)&&b(t,n,l[n])}else"insertRule"in j?j.insertRule(c,j.cssRules.length):"addRule"in j&&j.addRule(c,j.cssRules.length)}function n(t,e,a,c,l){var n='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .'+c,i=n+"{"+l+"}";if(r(n)){var s=o(l);for(var d in s)s.hasOwnProperty(d)&&p(t,d,s[d])}else"insertRule"in j?j.insertRule(i,j.cssRules.length):"addRule"in j&&j.addRule(i,j.cssRules.length)}function i(t,e,a,c,l){var n='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .'+c+":focus",i=n+"{"+l+"}";if(r(n)){var s=o(l);for(var d in s)s.hasOwnProperty(d)&&_(t,d,s[d])}else"insertRule"in j?j.insertRule(i,j.cssRules.length):"addRule"in j&&j.addRule(i,j.cssRules.length)}function s(t,e,a,c,l){var n='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .'+c+":hover",i=n+"{"+l+"}";if(r(n)){var s=o(l);for(var d in s)s.hasOwnProperty(d)&&g(t,d,s[d])}else"insertRule"in j?j.insertRule(i,j.cssRules.length):"addRule"in j&&j.addRule(i,j.cssRules.length)}function d(t,e,a,c,l){var n='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .'+c+":hover::placeholder",i=n+"{"+l+"}";if(r(n)){var s=o(l);for(var d in s)s.hasOwnProperty(d)&&w(t,d,s[d])}else"insertRule"in j?j.insertRule(i,j.cssRules.length):"addRule"in j&&j.addRule(i,j.cssRules.length)}function f(t,e,r){for(var o=0;o<j.cssRules.length;o++)if(j.cssRules[o].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form'||j.cssRules[o].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form'){switch(e){case"margin-top":j.cssRules[o].style.marginTop=r;break;case"margin-bottom":j.cssRules[o].style.marginBottom=r;break;case"margin-left":j.cssRules[o].style.marginLeft=r;break;case"margin-right":j.cssRules[o].style.marginRight=r;break;case"border-width":j.cssRules[o].style.borderWidth=r,j.cssRules[o].style.borderTopWidth=r,j.cssRules[o].style.borderLeftWidth=r,j.cssRules[o].style.borderRightWidth=r,j.cssRules[o].style.borderBottomWidth=r,j.cssRules[o].style.borderTop=r+" "+j.cssRules[o].style.borderTopStyle+" "+j.cssRules[o].style.borderTopColor,j.cssRules[o].style.borderLeft=r+" "+j.cssRules[o].style.borderLeftStyle+" "+j.cssRules[o].style.borderLeftColor,j.cssRules[o].style.borderRight=r+" "+j.cssRules[o].style.borderRightStyle+" "+j.cssRules[o].style.borderRightColor,j.cssRules[o].style.borderBottom=r+" "+j.cssRules[o].style.borderBottomStyle+" "+j.cssRules[o].style.borderBottomColor;break;case"border-color":j.cssRules[o].style.borderColor=r,j.cssRules[o].style.borderTopColor=r,j.cssRules[o].style.borderLeftColor=r,j.cssRules[o].style.borderRightColor=r,j.cssRules[o].style.borderBottomColor=r;break;case"border-style":j.cssRules[o].style.borderStyle=r,j.cssRules[o].style.borderTopStyle=r,j.cssRules[o].style.borderLeftStyle=r,j.cssRules[o].style.borderRightStyle=r,j.cssRules[o].style.borderBottomStyle=r,j.cssRules[o].style.borderTop=j.cssRules[o].style.borderTopWidth+" "+r+" "+j.cssRules[o].style.borderTopColor,j.cssRules[o].style.borderLeft=j.cssRules[o].style.borderLeftWidth+" "+r+" "+j.cssRules[o].style.borderLeftColor,j.cssRules[o].style.borderRight=j.cssRules[o].style.borderRightWidth+" "+r+" "+j.cssRules[o].style.borderRightColor,j.cssRules[o].style.borderBottom=j.cssRules[o].style.borderBottomWidth+" "+r+" "+j.cssRules[o].style.borderBottomColor;break;case"border-radius":j.cssRules[o].style.borderRadius=r,j.cssRules[o].style.borderTopLeftRadius=r,j.cssRules[o].style.borderTopRightRadius=r,j.cssRules[o].style.borderBottomLeftRadius=r,j.cssRules[o].style.borderBottomRightRadius=r,j.cssRules[o].style.webkitBorderRadius=r,j.cssRules[o].style.webkitBorderTopLeftRadius=r,j.cssRules[o].style.webkitBorderTopRightRadius=r,j.cssRules[o].style.webkitBorderBottomLeftRadius=r,j.cssRules[o].style.webkitBorderBottomRightRadius=r;break;case"background-color":j.cssRules[o].style.backgroundColor=r}break}}function u(t,e,r,o){for(var a='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,c='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form',l=0;l<j.cssRules.length;l++)if(j.cssRules[l].selectorText==a||j.cssRules[l].selectorText==c){switch(r){case"text-color":j.cssRules[l].style.color=o;break;case"font-size":j.cssRules[l].style.fontSize=o}break}}function b(t,e,r){for(var o='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',a='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form .wpcf7-column',c=0;c<j.cssRules.length;c++)if(j.cssRules[c].selectorText==o||j.cssRules[c].selectorText==a){switch(e){case"padding-top":j.cssRules[c].style.paddingTop=r;break;case"padding-left":j.cssRules[c].style.paddingLeft=r;break;case"padding-right":j.cssRules[c].style.paddingRight=r;break;case"padding-bottom":j.cssRules[c].style.paddingBottom=r}break}}function p(t,e,r,o,a,c){for(var l=0;l<j.cssRules.length;l++)if(j.cssRules[l].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o||j.cssRules[l].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o){switch(a){case"float":j.cssRules[l].style["float"]=c;break;case"width":j.cssRules[l].style.width=c;break;case"height":j.cssRules[l].style.height=c;break;case"text-color":j.cssRules[l].style.color=c;break;case"font-size":j.cssRules[l].style.fontSize=c;break;case"margin-top":j.cssRules[l].style.marginTop=c;break;case"margin-bottom":j.cssRules[l].style.marginBottom=c;break;case"margin-left":j.cssRules[l].style.marginLeft=c;break;case"margin-right":j.cssRules[l].style.marginRight=c;break;case"padding-top":j.cssRules[l].style.paddingTop=c;break;case"padding-bottom":j.cssRules[l].style.paddingBottom=c;break;case"padding-left":j.cssRules[l].style.paddingLeft=c;break;case"padding-right":j.cssRules[l].style.paddingRight=c;break;case"border-width":j.cssRules[l].style.borderWidth=c,j.cssRules[l].style.borderTopWidth=c,j.cssRules[l].style.borderLeftWidth=c,j.cssRules[l].style.borderRightWidth=c,j.cssRules[l].style.borderBottomWidth=c,j.cssRules[l].style.borderTop=c+" "+j.cssRules[l].style.borderTopStyle+" "+j.cssRules[l].style.borderTopColor,j.cssRules[l].style.borderLeft=c+" "+j.cssRules[l].style.borderLeftStyle+" "+j.cssRules[l].style.borderLeftColor,j.cssRules[l].style.borderRight=c+" "+j.cssRules[l].style.borderRightStyle+" "+j.cssRules[l].style.borderRightColor,j.cssRules[l].style.borderBottom=c+" "+j.cssRules[l].style.borderBottomStyle+" "+j.cssRules[l].style.borderBottomColor;break;case"border-color":j.cssRules[l].style.borderColor=c,j.cssRules[l].style.borderTopColor=c,j.cssRules[l].style.borderLeftColor=c,j.cssRules[l].style.borderRightColor=c,j.cssRules[l].style.borderBottomColor=c;break;case"border-top-color":j.cssRules[l].style.borderTopColor=c;break;case"border-right-color":j.cssRules[l].style.borderRightColor=c;break;case"border-bottom-color":j.cssRules[l].style.borderBottomColor=c;break;case"border-left-color":j.cssRules[l].style.borderLeftColor=c;break;case"border-style":j.cssRules[l].style.borderStyle=c,j.cssRules[l].style.borderTopStyle=c,j.cssRules[l].style.borderLeftStyle=c,j.cssRules[l].style.borderRightStyle=c,j.cssRules[l].style.borderBottomStyle=c,j.cssRules[l].style.borderTop=j.cssRules[l].style.borderTopWidth+" "+c+" "+j.cssRules[l].style.borderTopColor,j.cssRules[l].style.borderLeft=j.cssRules[l].style.borderLeftWidth+" "+c+" "+j.cssRules[l].style.borderLeftColor,j.cssRules[l].style.borderRight=j.cssRules[l].style.borderRightWidth+" "+c+" "+j.cssRules[l].style.borderRightColor,j.cssRules[l].style.borderBottom=j.cssRules[l].style.borderBottomWidth+" "+c+" "+j.cssRules[l].style.borderBottomColor;break;case"border-radius":j.cssRules[l].style.borderRadius=c,j.cssRules[l].style.borderTopLeftRadius=c,j.cssRules[l].style.borderTopRightRadius=c,j.cssRules[l].style.borderBottomLeftRadius=c,j.cssRules[l].style.borderBottomRightRadius=c,j.cssRules[l].style.webkitBorderRadius=c,j.cssRules[l].style.webkitBorderTopLeftRadius=c,j.cssRules[l].style.webkitBorderTopRightRadius=c,j.cssRules[l].style.webkitBorderBottomLeftRadius=c,j.cssRules[l].style.webkitBorderBottomRightRadius=c;break;case"background-color":j.cssRules[l].style.backgroundColor=c}break}}function _(t,e,r,o,a,c){for(var l=0;l<j.cssRules.length;l++)if(j.cssRules[l].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o+":focus"||j.cssRules[l].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+o+":focus"){switch(a){case"text-color":j.cssRules[l].style.color=c}break}}function g(t,e,r,o,a,c){for(var l=0;l<j.cssRules.length;l++)if(j.cssRules[l].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o+":hover"||j.cssRules[l].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+o+":hover"){switch(a){case"text-color":j.cssRules[l].style.color=c;break;case"background-color":j.cssRules[l].style.backgroundColor=c;break;case"border-color":j.cssRules[l].style.borderColor=c}break}}function w(t,e,r,o,a,c){for(var l=0;l<j.cssRules.length;l++)if(j.cssRules[l].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o+":hover::placeholder"||j.cssRules[l].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+o+":hover::placeholder"){switch(a){case"text-color":j.cssRules[l].style.color=c;break;case"background-color":j.cssRules[l].style.backgroundColor=c;break;case"border-color":j.cssRules[l].style.borderColor=c}break}}function m(t){for(var e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',r=0;r<j.cssRules.length;r++)if(j.cssRules[r].selectorText==e){j.deleteRule(r);break}}function h(t,e,r,o){for(var a='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o,c=0;c<j.cssRules.length;c++)if(j.cssRules[c].selectorText==a){j.deleteRule(c);break}}function x(t,e,r,o){for(var a=0;a<j.cssRules.length;a++)if(j.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o+":hover"){j.deleteRule(a);break}}function R(t,e,r,o){for(var a=0;a<j.cssRules.length;a++)if(j.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .'+o+":focus"){j.deleteRule(a);break}}function v(t){var e=t.elementData.wpcf7_data,r=t.elementData.element_target.element_id;f(r,"background-color",e.background_color),f(r,"border-color",e.border_color),f(r,"border-width",e.border_width),f(r,"margin-top",e.margin_top),f(r,"margin-left",e.margin_left),f(r,"margin-right",e.margin_right),f(r,"margin-bottom",e.margin_bottom),u(r,"wpcf7-validation-errors","text-color",e.error_message_color),u(r,"wpcf7-validation-errors","font-size",e.error_message_font_size),u(r,"wpcf7-mail-sent-ok ","text-color",e.send_message_color),u(r,"wpcf7-mail-sent-ok ","font-size",e.send_message_font_size),b(r,"padding-top",e.columns.padding_top),b(r,"padding-left",e.columns.padding_left),b(r,"padding-right",e.columns.padding_right),b(r,"padding-bottom",e.columns.padding_bottom),y(t.elementData);var o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]');N(o,e)}function y(e){var r=e,o=r.element_target.element_id,a=r.wpcf7_data.options_different,c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+o+'"] .wpcf7-column').not(".with-button");c.each(function(e,o){var c=t(o),l=0!==c.find(".rex-wpcf7-column-content-data").length,n=T(c,l),i=n.input_type;"file"!=i&&"radio"!=i&&"acceptance"!=i&&(n.background_color=r.wpcf7_data.content.background_color,n.background_color_hover=r.wpcf7_data.content.background_color_hover,n.border_color=r.wpcf7_data.content.border_color,n.border_color_hover=r.wpcf7_data.content.border_color_hover,n.border_width=r.wpcf7_data.content.border_width,n.border_radius=r.wpcf7_data.content.border_radius),a.width||(n.input_width=r.wpcf7_data.content.width),a.height||(n.input_height=r.wpcf7_data.content.height),a.font_size||(n.font_size=r.wpcf7_data.content.font_size),a.text_color||(n.text_color=r.wpcf7_data.content.text_color),n.text_color_hover=r.wpcf7_data.content.text_color_hover;var s={columnContentData:n};z(s)})}function k(t,e){P(t),C(t,e)}function C(t,e){e="undefined"!=typeof e&&e;var r=t.parents(".rex-element-wrapper"),o=0!==r.find(".rex-element-data").length;if(o){var a=Rexbuilder_Rexelement.generateElementData(r),c=a.element_target.element_id,l=a.wpcf7_data;U(c,l),e&&v({elementData:{element_target:a.element_target,synchronize:a.synchronize,wpcf7_data:a.wpcf7_data}})}}function A(t){D(t),S(t)}function S(t){if(t.get(0).querySelector(".rex-wpcf7-column-content-data")){var e=T(t,!0),r=e.target.element_id;F(r,e)}}function z(t){var e,r=t.columnContentData,o=r.target.element_id,a=r.target.row_number,c=r.target.column_number,l=r.input_type,n=r.field_class,i=r.wpcf7_button.height,s=r.wpcf7_button.width,d=r.wpcf7_button.border_width,f=r.wpcf7_button.border_radius,u=r.wpcf7_button.margin_top,b=r.wpcf7_button.margin_right,m=r.wpcf7_button.margin_bottom,h=r.wpcf7_button.margin_left,x=r.wpcf7_button.padding_top,R=r.wpcf7_button.padding_right,v=r.wpcf7_button.padding_bottom,y=r.wpcf7_button.padding_left,k=r.wpcf7_button.font_size,C=r.background_color,A=r.background_color_hover,S=r.text_color,z=r.text_color_hover,T=r.text_color_focus,q=r.palceholder_color,B=r.palceholder_color_hover,L=r.border_color,W=r.border_color_hover,U=r.wpcf7_button.text_color,F=r.wpcf7_button.text_color_hover,P=r.wpcf7_button.background_color,D=r.wpcf7_button.background_color_hover,N=r.wpcf7_button.border_color,E=r.wpcf7_button.border_color_hover;switch(l){case"text":case"email":case"number":case"textarea":case"select":e="wpcf7-"+l;break;case"acceptance":e="wpcf7-form-control-wrap";break;case"submit":case"file":e=n;break;case"radio":e="wpcf7-form-control-wrap."+n}"radio"===l&&p(o,a,c,e+" .wpcf7-radio-label","font-size",r.font_size),"acceptance"===l&&(p(o,a,c,e+" .wpcf7-list-item-label","font-size",r.font_size),p(o,a,c,e+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color",r.text_color),p(o,a,c,e+" :checked ~ .wpcf7-list-item-label::before","border-bottom-color",r.text_color),p(o,a,c,e+" :checked ~ .wpcf7-list-item-label::before","border-right-color",r.text_color)),"text"!=l&&"email"!=l&&"number"!=l&&"textarea"!=l||(p(o,a,c,e+"::placeholder","text-color",q),w(o,a,c,e,"text-color",B)),"submit"!=l?(g(o,a,c,e,"color",z),g(o,a,c,e,"background-color",A),g(o,a,c,e,"border-color",W),p(o,a,c,e,"width",M(l,o,a,c,r.input_width)),"acceptance"!==l&&p(o,a,c,e,"height",r.input_height),p(o,a,c,e,"font-size",r.font_size),p(o,a,c,e,"border-width",r.border_width),p(o,a,c,e,"border-radius",r.border_radius),p(o,a,c,e,"text-color",S),p(o,a,c,e,"background-color",C),p(o,a,c,e,"border-color",L),"file"==l&&(p(o,a,c,e+" label","height",i),p(o,a,c,e+" label","width",s),p(o,a,c,e+" label","border-width",d),p(o,a,c,e+" label","border-radius",f),p(o,a,c,e+" label","margin-top",u),p(o,a,c,e+" label","margin-right",b),p(o,a,c,e+" label","margin-bottom",m),p(o,a,c,e+" label","margin-left",h),p(o,a,c,e+" label","padding-top",x),p(o,a,c,e+" label","padding-right",R),p(o,a,c,e+" label","padding-bottom",v),p(o,a,c,e+" label","padding-left",y),p(o,a,c,e+" label","font-size",k),p(o,a,c,e+" label","text-color",U),p(o,a,c,e+" label","background-color",P),p(o,a,c,e+" label","border-color",N),g(o,a,c,e+" label","text-color",F),g(o,a,c,e+" label","background-color",D),g(o,a,c,e+" label","border-color",E))):(p(o,a,c,e,"height",i),p(o,a,c,e,"width",s),p(o,a,c,e,"border-width",d),p(o,a,c,e,"border-radius",f),p(o,a,c,e,"margin-top",u),p(o,a,c,e,"margin-right",b),p(o,a,c,e,"margin-bottom",m),p(o,a,c,e,"margin-left",h),p(o,a,c,e,"padding-top",x),p(o,a,c,e,"padding-right",R),p(o,a,c,e,"padding-bottom",v),p(o,a,c,e,"padding-left",y),p(o,a,c,e,"font-size",k),p(o,a,c,e,"text-color",U),p(o,a,c,e,"background-color",P),p(o,a,c,e,"border-color",N),g(o,a,c,e,"text-color",F),g(o,a,c,e,"background-color",D),g(o,a,c,e,"border-color",E)),_(o,a,c,e,"text-color",T),O(o,r)}function T(t,e){var r={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",label_text:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}};r.target.element_id=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),r.target.row_number=t.parents(".wpcf7-row").attr("wpcf7-row-number"),r.target.column_number=t.attr("wpcf7-column-number");var o,a=/([a-z]+\-[\d]+)(-rexclone-([\d]+))?/,c=t.find(".wpcf7-form-control");if(r.field_class=null,0!==c.length){if(o=c.get(0).className.match(a),!o){var l=t.find(".wpcf7-form-control-wrap").get(0).className;if(o=l.match(a),!o){var n=t.find("[type=checkbox]").get(0).className;o=n.match(a)}}r.field_class=o[0]}r.input_type=/[a-z]+/.exec(r.field_class)[0],r.input_type="menu"==r.input_type?"select":r.input_type;var i,s=r.input_type;switch(s){case"text":case"email":case"number":case"textarea":case"select":i="wpcf7-"+s;break;case"acceptance":i="wpcf7-form-control-wrap";break;case"submit":case"file":i=r.field_class;break;case"radio":i="wpcf7-form-control-wrap."+r.field_class}-1!==["text","email","number","textarea"].indexOf(s)&&(r.label_text=t.find(".wpcf7-label-text__paragraph").html()),"acceptance"==s&&(r.text=t.find(".wpcf7-list-item-label").html()),"file"==s&&(r.text=t.find(".wpcf7-file-caption").html());var d=t.find(".wpcf7-select").eq(0).find("option");if(0!=d.length&&d.each(function(t,e){""===e.value||e.getAttribute("disabled")||r.wpcf7_list_fields.push(e.textContent)}),0!==t.find(".wpcf7-radio").length){var f=t.find(".wpcf7-radio").eq(0).find(".wpcf7-radio-label");0===f.length&&(f=t.find(".wpcf7-radio").eq(0).find(".wpcf7-list-item-label")),f.each(function(t,e){r.wpcf7_list_fields.push(e.textContent)})}if(e){var u=t.find(".rex-wpcf7-column-content-data").eq(0),b=u[0],p=0!==t.find(".wpcf7-validates-as-required").length;if(!p){var _=0!==t.find(".wpcf7-acceptance").length;_&&(p=0===t.find(".wpcf7-acceptance.optional"))}r.wpcf7_required_field=b.getAttribute("data-wpcf7-required-field")?"true"===b.getAttribute("data-wpcf7-required-field"):p;var g=0!==t.find(".wpcf7-validates-as-email").length;r.wpcf7_email=b.getAttribute("data-wpcf7-email")?"true"===b.getAttribute("data-wpcf7-email").toString():g;var w=0!==t.find(".wpcf7-validates-as-number").length;r.wpcf7_only_numbers=b.getAttribute("data-wpcf7-only-numbers")?"true"===b.getAttribute("data-wpcf7-only-numbers").toString():w;var m=void 0!==t.find(".wpcf7-acceptance [type=checkbox]").prop("checked");if(r.wpcf7_default_check=b.getAttribute("data-wpcf7-default-check")?"true"===b.getAttribute("data-wpcf7-default-check").toString():m,-1!==["text","email","number","textarea"].indexOf(s)?b.hasAttribute("data-wpcf7-placeholder")&&b.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=b.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control").attr("placeholder")||"":-1!==["select"].indexOf(s)&&(b.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=b.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control [disabled]").text()||""),r.wpcf7_file_max_dimensions=b.getAttribute("data-wpcf7-file-max-dimensions")?b.getAttribute("data-wpcf7-file-max-dimensions").toString():I.wpcf7_file_max_dimensions,"file"===s)if(b.getAttribute("data-wpcf7-file-types"))r.wpcf7_list_fields=b.getAttribute("data-wpcf7-file-types").toString().split(",");else{for(var h=t.find("[type=file]").attr("accept").toString().split(","),x=0;x<h.length;x++)h[x]=h[x].replace(".","");r.wpcf7_list_fields=h}r.input_width=b.getAttribute("data-wpcf7-input-width")?b.getAttribute("data-wpcf7-input-width").toString():t.find("."+i).css("width"),r.input_height=b.getAttribute("data-wpcf7-input-height")?b.getAttribute("data-wpcf7-input-height").toString():t.find("."+i).css("height"),r.font_size=b.getAttribute("data-wpcf7-font-size")?b.getAttribute("data-wpcf7-font-size").toString():t.find("."+i).css("font-size"),r.background_color=b.getAttribute("data-background-color")?b.getAttribute("data-background-color").toString():t.find("."+i).css("background-color"),r.text_color=b.getAttribute("data-text-color")?b.getAttribute("data-text-color").toString():t.find("."+i).css("color"),r.text_color_focus=b.getAttribute("data-text-color-focus")?b.getAttribute("data-text-color-focus").toString():I.text_color_focus,r.select_color_after_selection=b.getAttribute("data-select-color-after-selection")?b.getAttribute("data-select-color-after-selection").toString():"",r.placeholder_color=b.getAttribute("data-placeholder-color")?b.getAttribute("data-placeholder-color").toString():I.placeholder_color,r.placeholder_hover_color=b.getAttribute("data-placeholder-hover-color")?b.getAttribute("data-placeholder-hover-color").toString():I.placeholder_hover_color,r.border_width=b.getAttribute("data-wpcf7-border-width")?b.getAttribute("data-wpcf7-border-width").toString():t.find("."+i).css("border-width"),r.border_radius=b.getAttribute("data-wpcf7-border-radius")?b.getAttribute("data-wpcf7-border-radius").toString():t.find("."+i).css("border-radius"),r.background_color_hover=b.getAttribute("data-background-color-hover")?b.getAttribute("data-background-color-hover").toString():"",r.text_color_hover=b.getAttribute("data-text-color-hover")?b.getAttribute("data-text-color-hover").toString():"",r.border_color=b.getAttribute("data-border-color")?b.getAttribute("data-border-color").toString():t.find("."+i).css("border-color"),r.border_color_hover=b.getAttribute("data-border-color-hover")?b.getAttribute("data-border-color-hover").toString():"",b.getAttribute("data-button-text")?r.wpcf7_button.text=b.getAttribute("data-button-text").toString():"file"==s?r.wpcf7_button.text="Choose a file":"submit"==s&&(r.wpcf7_button.text=t.find("[type=submit]").val()),b.getAttribute("data-button-text-font-size")?r.wpcf7_button.font_size=b.getAttribute("data-button-text-font-size").toString():"file"==s?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==s&&(r.wpcf7_button.font_size=t.find("."+i).css("font-size")),/\d+\.\d+/.test(r.wpcf7_button.font_size)&&(r.wpcf7_button.font_size=/\d+/.exec(r.wpcf7_button.font_size)[0]+"px"),b.getAttribute("data-button-height")?r.wpcf7_button.height=b.getAttribute("data-button-height").toString():"file"==s?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==s&&(r.wpcf7_button.height=t.find("."+i).css("height")),b.getAttribute("data-button-width")?r.wpcf7_button.width=b.getAttribute("data-button-width").toString():"file"==s?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==s&&(r.wpcf7_button.width=t.find("."+i).css("width")),b.getAttribute("data-button-border-width")?r.wpcf7_button.border_width=b.getAttribute("data-button-border-width").toString():"file"==s?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==s&&(r.wpcf7_button.border_width=t.find("."+i).css("border-width")),b.getAttribute("data-button-border-radius")?r.wpcf7_button.border_radius=b.getAttribute("data-button-border-radius").toString():"file"==s?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==s&&(r.wpcf7_button.border_radius=t.find("."+i).css("border-radius")),b.getAttribute("data-button-margin-top")?r.wpcf7_button.margin_top=b.getAttribute("data-button-margin-top").toString():"file"==s?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==s&&(r.wpcf7_button.margin_top=t.find("."+i).css("margin-top")),b.getAttribute("data-button-margin-right")?r.wpcf7_button.margin_right=b.getAttribute("data-button-margin-right").toString():"file"==s?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==s&&(r.wpcf7_button.margin_right=t.find("."+i).css("margin-right")),b.getAttribute("data-button-margin-bottom")?r.wpcf7_button.margin_bottom=b.getAttribute("data-button-margin-bottom").toString():"file"==s?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==s&&(r.wpcf7_button.margin_bottom=t.find("."+i).css("margin-bottom")),b.getAttribute("data-button-margin-left")?r.wpcf7_button.margin_left=b.getAttribute("data-button-margin-left").toString():"file"==s?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==s&&(r.wpcf7_button.margin_left=t.find("."+i).css("margin-left")),b.getAttribute("data-button-padding-top")?r.wpcf7_button.padding_top=b.getAttribute("data-button-padding-top").toString():"file"==s?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==s&&(r.wpcf7_button.padding_top=t.find("."+i).css("padding-top")),b.getAttribute("data-button-padding-right")?r.wpcf7_button.padding_right=b.getAttribute("data-button-padding-right").toString():"file"==s?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==s&&(r.wpcf7_button.padding_right=t.find("."+i).css("padding-right")),b.getAttribute("data-button-padding-bottom")?r.wpcf7_button.padding_bottom=b.getAttribute("data-button-padding-bottom").toString():"file"==s?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==s&&(r.wpcf7_button.padding_bottom=t.find("."+i).css("padding-bottom")),b.getAttribute("data-button-padding-left")?r.wpcf7_button.padding_left=b.getAttribute("data-button-padding-left").toString():"file"==s?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==s&&(r.wpcf7_button.padding_left=t.find("."+i).css("padding-left")),b.getAttribute("data-button-text-color")?r.wpcf7_button.text_color=b.getAttribute("data-button-text-color").toString():"file"==s?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==s&&(r.wpcf7_button.text_color=t.find("."+i).css("color")),r.wpcf7_button.text_color_hover=b.getAttribute("data-button-text-color-hover")?b.getAttribute("data-button-text-color-hover").toString():I.wpcf7_button.text_color_hover,b.getAttribute("data-button-background-color")?r.wpcf7_button.background_color=b.getAttribute("data-button-background-color").toString():"file"==s?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==s&&(r.wpcf7_button.background_color=t.find("."+i).css("background-color")),r.wpcf7_button.background_color_hover=b.getAttribute("data-button-background-color-hover")?b.getAttribute("data-button-background-color-hover").toString():I.wpcf7_button.background_color_hover,b.getAttribute("data-button-border-color")?r.wpcf7_button.border_color=b.getAttribute("data-button-border-color").toString():"file"==s?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==s&&(r.wpcf7_button.border_color=t.find("."+i).css("border-color")),r.wpcf7_button.border_color_hover=b.getAttribute("data-button-border-color-hover")?b.getAttribute("data-button-border-color-hover").toString():I.wpcf7_button.border_color_hover}else r.wpcf7_required_field=I.wpcf7_required_field,r.wpcf7_only_numbers=I.wpcf7_only_numbers,r.wpcf7_default_check=I.wpcf7_default_check,r.wpcf7_placeholder=I.wpcf7_placeholder,r.wpcf7_file_max_dimensions=I.wpcf7_file_max_dimensions,"file"==s&&(r.wpcf7_list_fields=["png","jpg","jpeg","pdf"]),r.input_width=t.find("."+i).css("width"),r.input_height=t.find("."+i).css("height"),r.font_size=I.font_size,r.background_color=t.find("."+i).css("background-color"),r.text_color=t.find("."+i).css("color"),r.text_color_focus=I.text_color_focus,"file"==s?r.wpcf7_button.text="Choose a file":"submit"==s&&(r.wpcf7_button.text="Send"),"file"==s?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==s&&(r.wpcf7_button.font_size=t.find("."+i).css("font-size")),"file"==s?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==s&&(r.wpcf7_button.height=t.find("."+i).css("height")),"file"==s?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==s&&(r.wpcf7_button.width=t.find("."+i).css("width")),"file"==s?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==s&&(r.wpcf7_button.border_width=t.find("."+i).css("border-width")),"file"==s?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==s&&(r.wpcf7_button.border_radius=t.find("."+i).css("border-radius")),"file"==s?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==s&&(r.wpcf7_button.margin_top=t.find("."+i).css("margin-top")),"file"==s?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==s&&(r.wpcf7_button.margin_right=t.find("."+i).css("margin-right")),"file"==s?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==s&&(r.wpcf7_button.margin_bottom=t.find("."+i).css("margin-bottom")),
"file"==s?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==s&&(r.wpcf7_button.margin_left=t.find("."+i).css("margin-left")),"file"==s?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==s&&(r.wpcf7_button.padding_top=t.find("."+i).css("padding-top")),"file"==s?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==s&&(r.wpcf7_button.padding_right=t.find("."+i).css("padding-right")),"file"==s?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==s&&(r.wpcf7_button.padding_bottom=t.find("."+i).css("padding-bottom")),"file"==s?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==s&&(r.wpcf7_button.padding_left=t.find("."+i).css("padding-left")),"file"==s?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==s&&(r.wpcf7_button.text_color=t.find("."+i).css("color")),r.wpcf7_button.text_color_hover=I.wpcf7_button.text_color_hover,"file"==s?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==s&&(r.wpcf7_button.background_color=t.find("."+i).css("background-color")),r.wpcf7_button.background_color_hover=I.wpcf7_button.background_color_hover,"file"==s?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==s&&(r.wpcf7_button.border_color=t.find("."+i).css("border-color")),r.wpcf7_button.border_color_hover=I.wpcf7_button.border_color_hover;return r}function q(){Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-column").each(function(e,r){var o=t(r),a={text:0!=o.find("[type=text]").length,email:0!=o.find(".wpcf7-email").length,number:0!=o.find(".wpcf7-number").length,textarea:0!=o.find(".wpcf7-textarea").length,select:0!=o.find(".wpcf7-select").length,radio:0!=o.find(".wpcf7-radio").length,acceptance:0!=o.find(".wpcf7-acceptance").length,file:0!=o.find(".wpcf7-file").length,submit:0!=o.find(".wpcf7-submit").length},c="";for(var l in a)if(1==a[l]){c=l;break}var n=null;switch(c){case"text":case"email":case"number":case"textarea":n=o.find(".wpcf7-"+c),n.attr("size",""),B(n);break;case"select":n=o.find(".wpcf7-select");var i="";if(""==n.find("option").eq(0).val()){var s=n.find("option").eq(0);s.attr("disabled",""),s.attr("selected",""),i=s.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),s.text(i),""===s.text()&&(s.text("Select something"),n.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))}else{var d=t("<option value disabled selected></option>");n.prepend(d),i=n.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),d.text(i),""===d.text()&&(d.text("Select something"),n.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))}n.on("change",function(){var t=n.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-select-color-after-selection");n.css("color",t)});break;case"radio":case"acceptance":case"file":case"submit":}}),L(),W()}function B(t){var e=t.parents(".wpcf7-column-content").children("label");if(0!==e.length)1===e.length&&e.addClass("wpcf7-label-text");else{var r=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),o=t.parents(".wpcf7-form-control-wrap").get(0),a=document.createElement("label");if(Rexbuilder_Util.addClass(a,"wpcf7-label-text"),a.insertAdjacentHTML("afterbegin",r),o.parentNode.insertBefore(a,o),a.appendChild(o),Rexbuilder_Util.editorMode){var r=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),c=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),l=t.parents(".wpcf7-row").attr("wpcf7-row-number"),n=t.parents(".wpcf7-column").attr("wpcf7-column-number"),i=Rexbuilder_Rexwpcf7_Editor.retrieveFormsInPage()[c].find('[wpcf7-row-number="'+l+'"] [wpcf7-column-number="'+n+'"] .wpcf7-column-content').get(0);i.innerHTML='<label class="wpcf7-label-text">'+r+i.textContent+"</label>"}}}function L(){for(var e,r,o=Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-radio"),a=o.length,c=0;c<a;c++)if(e=o[c],r=e.className.match(/radio-\d+/)){r=r[0],Rexbuilder_Util.removeClass(e,r);var l=e.querySelector("[type=radio]").name,n=e.parentNode;Rexbuilder_Util.addClass(n,r),Rexbuilder_Util.removeClass(n,l)}Rexbuilder_Util.$rexContainer.find('.wpcf7 input[type="radio"]').each(function(e,r){var o=t(r);o.addClass("with-gap"),o.attr("id","wpcf7-radio-"+(e+1));var a=o.siblings(".wpcf7-list-item-label");if(0!==a.length){var c=a.text();a.empty();var l=t(document.createElement("label"));l.addClass("wpcf7-radio-label"),l.attr("for",o.attr("id")),l.text(c),l.insertAfter(a),a.removeClass("wpcf7-list-item-label")}else o.siblings(".wpcf7-radio-label").attr("for","wpcf7-radio-"+(e+1))})}function W(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .wpcf7 .wpcf7-form-control-wrap").has(".wpcf7-file").each(function(e,r){var o=t(r);0===o.find(".wpcf7-file-caption").length&&o.siblings(".wpcf7-file-caption").detach().appendTo(o);var a=o.find("[type=file]"),c=/file-\w+/gm,l=a.get(0).className,n=c.exec(l);n&&(n=n[0],a.removeClass(n),a.parents(".wpcf7-form-control-wrap").addClass(n)),a.attr("id","wpcf7-file-"+(e+1)),a.siblings("label").remove();var i=t('<label for="'+a.attr("id")+'"></label>');if(i.insertAfter(a),"undefined"!=typeof o.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text")){var s=o.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text");i.text(s)}else i.text("Choose a file"),o.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text","Choose a file");var d=a.parents(".wpcf7-column"),f=T(d,!0);O(f.target.element_id,f),A(d)})}function U(t,e){var r="";r+="background-color: "+e.background_color+";",r+="border-style: solid;",r+="border-color: "+e.border_color+";",r+="border-width: "+e.border_width+";",r+="margin-top: "+e.margin_top+";",r+="margin-left: "+e.margin_left+";",r+="margin-right: "+e.margin_right+";",r+="margin-bottom: "+e.margin_bottom+";",a(t,r);var o="";o+="color:"+e.error_message_color+";",o+="font-size:"+e.error_message_font_size+";",c(t,"wpcf7-validation-errors",o);var n="";n+="color:"+e.send_message_color+";",n+="font-size:"+e.send_message_font_size+";",c(t,"wpcf7-mail-sent-ok",n);var i="";i+="padding-top: "+e.columns.padding_top+";",i+="padding-left: "+e.columns.padding_left+";",i+="padding-right: "+e.columns.padding_right+";",i+="padding-bottom: "+e.columns.padding_bottom+";",l(t,i)}function F(t,e){var r,o=e.target.row_number,a=e.target.column_number,c=e.field_class,l=e.input_type;switch(l){case"text":case"email":case"number":case"textarea":case"select":r="wpcf7-"+l;break;case"acceptance":r="wpcf7-form-control-wrap";break;case"file":case"submit":r=c;break;case"radio":r="wpcf7-form-control-wrap."+c}var f="";if("select"!=l&&(f+="color: "+e.text_color_focus+";",i(t,o,a,r,f)),"file"==l){var u="";u+="font-size: "+e.wpcf7_button.font_size+";",u+="height: "+e.wpcf7_button.height+";",u+="width: "+e.wpcf7_button.width+";",u+="border-width: "+e.wpcf7_button.border_width+";",u+="border-radius: "+e.wpcf7_button.border_radius+";",u+="border-style: solid;",u+="margin-top: "+e.wpcf7_button.margin_top+";",u+="margin-right: "+e.wpcf7_button.margin_right+";",u+="margin-bottom: "+e.wpcf7_button.margin_bottom+";",u+="margin-left: "+e.wpcf7_button.margin_left+";",u+="padding-top: "+e.wpcf7_button.padding_top+";",u+="padding-right: "+e.wpcf7_button.padding_right+";",u+="padding-bottom: "+e.wpcf7_button.padding_bottom+";",u+="padding-left: "+e.wpcf7_button.padding_left+";",u+="color: "+e.wpcf7_button.text_color+";",u+="background-color: "+e.wpcf7_button.background_color+";",u+="border-color: "+e.wpcf7_button.border_color+";";var b="";b+="color: "+e.wpcf7_button.text_color_hover+";",b+="background-color: "+e.wpcf7_button.background_color_hover+";",b+="border-color: "+e.wpcf7_button.border_color_hover+";",n(t,o,a,r+" label",u),s(t,o,a,r+" label",b)}if("submit"==l){var p="";p+="font-size: "+e.wpcf7_button.font_size+";",p+="height: "+e.wpcf7_button.height+";",p+="width: "+e.wpcf7_button.width+";",p+="border-width: "+e.wpcf7_button.border_width+";",p+="border-radius: "+e.wpcf7_button.border_radius+";",p+="border-style: solid;",p+="margin-top: "+e.wpcf7_button.margin_top+";",p+="margin-right: "+e.wpcf7_button.margin_right+";",p+="margin-bottom: "+e.wpcf7_button.margin_bottom+";",p+="margin-left: "+e.wpcf7_button.margin_left+";",p+="padding-top: "+e.wpcf7_button.padding_top+";",p+="padding-right: "+e.wpcf7_button.padding_right+";",p+="padding-bottom: "+e.wpcf7_button.padding_bottom+";",p+="padding-left: "+e.wpcf7_button.padding_left+";",p+="color: "+e.wpcf7_button.text_color+";",p+="background-color: "+e.wpcf7_button.background_color+";",p+="border-color: "+e.wpcf7_button.border_color+";";var _="";_+="color: "+e.wpcf7_button.text_color_hover+";",_+="background-color: "+e.wpcf7_button.background_color_hover+";",_+="border-color: "+e.wpcf7_button.border_color_hover+";",n(t,o,a,r,p),s(t,o,a,r,_)}else{var g="",w="";"file"===l?g+="display: block;":(g+="background-color: "+e.background_color+";",g+="border-color: "+e.border_color+";",g+="border-style: solid;",g+="border-width: "+e.border_width+";",g+="border-radius: "+e.border_radius+";",w+="background-color: "+e.background_color_hover+";",w+="border-color: "+e.border_color_hover+";");var m="";if("radio"===l&&(m+="font-size: "+e.font_size+";",m+="cursor:pointer;",n(t,o,a,r+" .wpcf7-radio-label",m)),"acceptance"===l){m+="font-size: "+e.font_size+";",m+="cursor:pointer;",n(t,o,a,r+" .wpcf7-list-item-label",m),n(t,o,a,r+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color:"+e.text_color+";");var h="border-bottom-color:"+e.text_color+";";h+="border-right-color:"+e.text_color+";",n(t,o,a,r+" :checked ~ .wpcf7-list-item-label::before",h)}if(g+="color: "+e.text_color+";",g+="width: "+M(l,t,o,a,e.input_width)+";","acceptance"!==l&&(g+="height: "+e.input_height+";"),g+="font-size: "+e.font_size+";",n(t,o,a,r,g),w+="color: "+e.text_color_hover+";",s(t,o,a,r,w),"text"==l||"email"==l||"number"==l||"textarea"==l){var x="";x+="color:"+e.placeholder_color+";",n(t,o,a,r+"::placeholder",x);var R="";R+="color:"+e.placeholder_hover_color+";",d(t,o,a,r,R)}}}function P(t){}function D(t){var e=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),r=t.parents(".wpcf7-row").attr("wpcf7-row-number"),o=t.attr("wpcf7-column-number"),a=0===t.find(".wpcf7-add-new-form-content").length&&0==t.parents("#rex-wpcf7-tools").length;if(a){var c=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control").get(0).classList);null===c?(c=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control-wrap").get(0).classList),c=null===c?/[a-z]+\-[0-9]+/.exec(t.find("[type=checkbox]").get(0).classList)[0]:c[0]):c=c[0];var l=/[a-z]+/.exec(c)[0];l="menu"==l?"select":l;var n;switch(l){case"text":case"email":case"number":case"textarea":case"select":n="wpcf7-"+l;break;case"acceptance":n="wpcf7-form-control-wrap";break;case"submit":n=c;break;case"file":n=c,h(e,r,o,n+" label"),x(e,r,o,n+" label");break;case"radio":n="wpcf7-form-control-wrap."+c}h(e,r,o,n),x(e,r,o,n),R(e,r,o,n)}}function N(e,r){e.each(function(){var e=t(this).find(".rex-element-data").eq(0);e.attr("data-wpcf7-background-color",r.background_color),e.attr("data-wpcf7-border-color",r.border_color),e.attr("data-wpcf7-border-width",r.border_width),e.attr("data-wpcf7-margin-top",r.margin_top),e.attr("data-wpcf7-margin-left",r.margin_left),e.attr("data-wpcf7-margin-right",r.margin_right),e.attr("data-wpcf7-margin-bottom",r.margin_bottom),e.attr("data-wpcf7-error-message-color",r.error_message_color),e.attr("data-wpcf7-error-message-font-size",r.error_message_font_size),e.attr("data-wpcf7-send-message-color",r.send_message_color),e.attr("data-wpcf7-send-message-font-size",r.send_message_font_size),e.attr("data-wpcf7-columns-padding-top",r.columns.padding_top),e.attr("data-wpcf7-columns-padding-left",r.columns.padding_left),e.attr("data-wpcf7-columns-padding-right",r.columns.padding_right),e.attr("data-wpcf7-columns-padding-bottom",r.columns.padding_bottom),e.attr("data-wpcf7-content-width",r.content.width),e.attr("data-wpcf7-content-height",r.content.height),e.attr("data-wpcf7-content-font-size",r.content.font_size),e.attr("data-wpcf7-content-border-width",r.content.border_width),e.attr("data-wpcf7-content-border-radius",r.content.border_radius),e.attr("data-wpcf7-content-text-color",r.content.text_color),e.attr("data-wpcf7-content-text-color-hover",r.content.text_color_hover),e.attr("data-wpcf7-content-background-color",r.content.background_color),e.attr("data-wpcf7-content-background-color-hover",r.content.background_color_hover),e.attr("data-wpcf7-content-border-color",r.content.border_color),e.attr("data-wpcf7-content-border-color-hover",r.content.border_color_hover)})}function O(e,r){var o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),a=r.target.row_number,c=r.target.column_number,l=r.input_type;o.each(function(){var e=t(this).find('.wpcf7-row[wpcf7-row-number="'+a+'"]').find('.wpcf7-column[wpcf7-column-number="'+c+'"]').find(".rex-wpcf7-column-content-data");"submit"!==l&&"radio"!==l&&e.attr("data-wpcf7-required-field",r.wpcf7_required_field),"text"!==l&&"email"!==l&&"number"!==l||(e.attr("data-wpcf7-email",r.wpcf7_email),e.attr("data-wpcf7-only-numbers",r.wpcf7_only_numbers)),"acceptance"===l&&e.attr("data-wpcf7-default-check",r.wpcf7_default_check),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l&&"select"!==l||e.attr("data-wpcf7-placeholder",r.wpcf7_placeholder),"file"===l&&(e.attr("data-wpcf7-file-max-dimensions",r.wpcf7_file_max_dimensions),e.attr("data-wpcf7-file-types",r.wpcf7_list_fields)),"file"!=l&&"radio"!=l&&"acceptance"!=l&&(e.attr("data-wpcf7-border-width",r.border_width),e.attr("data-wpcf7-border-radius",r.border_radius),e.attr("data-background-color",r.background_color),e.attr("data-background-color-hover",r.background_color_hover),e.attr("data-border-color",r.border_color),e.attr("data-border-color-hover",r.border_color_hover)),e.attr("data-wpcf7-input-width",r.input_width),e.attr("data-wpcf7-input-height",r.input_height),e.attr("data-wpcf7-font-size",r.font_size),e.attr("data-text-color",r.text_color),e.attr("data-text-color-hover",r.text_color_hover),e.attr("data-text-color-focus",r.text_color_focus),"select"===l&&e.attr("data-select-color-after-selection",r.select_color_after_selection),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l||(e.attr("data-placeholder-color",r.placeholder_color),e.attr("data-placeholder-hover-color",r.placeholder_hover_color)),"file"!==l&&"submit"!==l||(e.attr("data-button-text",r.wpcf7_button.text),e.attr("data-button-text-font-size",r.wpcf7_button.font_size),e.attr("data-button-height",r.wpcf7_button.height),e.attr("data-button-width",r.wpcf7_button.width),e.attr("data-button-border-width",r.wpcf7_button.border_width),e.attr("data-button-border-radius",r.wpcf7_button.border_radius),e.attr("data-button-margin-top",r.wpcf7_button.margin_top),e.attr("data-button-margin-right",r.wpcf7_button.margin_right),e.attr("data-button-margin-bottom",r.wpcf7_button.margin_bottom),e.attr("data-button-margin-left",r.wpcf7_button.margin_left),e.attr("data-button-padding-top",r.wpcf7_button.padding_top),e.attr("data-button-padding-right",r.wpcf7_button.padding_right),e.attr("data-button-padding-bottom",r.wpcf7_button.padding_bottom),e.attr("data-button-padding-left",r.wpcf7_button.padding_left),e.attr("data-button-text-color",r.wpcf7_button.text_color),e.attr("data-button-text-color-hover",r.wpcf7_button.text_color_hover),e.attr("data-button-background-color",r.wpcf7_button.background_color),e.attr("data-button-background-color-hover",r.wpcf7_button.background_color_hover),e.attr("data-button-border-color",r.wpcf7_button.border_color),e.attr("data-button-border-color-hover",r.wpcf7_button.border_color_hover))}),Rexbuilder_Util.editorMode&&Rexbuilder_Rexwpcf7_Editor.updateSpanDataInDB(e,r)}function E(){t(".wpcf7-column.with-button").each(function(t,e){Rexbuilder_Util.removeClass(e,"with-button"),Rexbuilder_Util.addClass(e,"column-empty"),e.innerHTML=""})}function M(t,e,r,o,a){var c=-1!==["text","email","number","textarea","select"].indexOf(t)&&/\%/.test(a),l=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-row[wpcf7-row-number="'+r+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .wpcf7-form-control-wrap'));return l.forEach(function(t){t.style.width=c?a:""}),c?"100%":a}function $(){Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-radio").each(function(e,r){t(r).find(".wpcf7-list-item").click(function(e){e.preventDefault();var o=t(e.target).parents(".wpcf7-list-item");o.hasClass("selected")||(t(r).find(".wpcf7-list-item").each(function(e,o){t(o).removeClass("selected"),t(r).find("input").attr("checked",!1)}),o.addClass("selected"),o.find("input").attr("checked",!0))})})}function H(){this.$rexFormsStyle=t("#rexpansive-builder-rexwpcf7-style-inline-css"),e(),Rexbuilder_Util.editorMode||q(),Rexbuilder_Rexelement.addStyles(),$(),Rexbuilder_Util.editorMode||E()}var j=null,I={wpcf7_required_field:!1,wpcf7_email:!1,wpcf7_only_numbers:!1,wpcf7_default_check:!1,wpcf7_placeholder:"Placeholder",wpcf7_file_max_dimensions:"25mb",wpcf7_button:{text_color_hover:"rgba(255,255,255,1)",background_color_hover:"rgba(86,86,86,1)",border_color_hover:"rgba(255,255,255,1)"},placeholder_color:"rgba(0,0,0,1)",placeholder_hover_color:"rgba(0,0,0,1)",text_color_focus:"rgba(0,0,0,1)"};return{init:H,guessWidthToSet:M,addFormStyle:C,refreshFormStyle:k,addColumnContentStyle:S,removeColumnContentStyle:D,refreshColumnContentStyle:A,fixInputs:q,fixWpcf7RadioButtons:L,fixWpcf7Files:W,generateColumnContentData:T,updateForm:v,updateFormContent:y,updateColumnContent:z,addFormRule:a,addFormMessageRule:c,addFormColumnsRule:l,addColumnContentRule:n,addColumnContentFocusRule:i,addColumnContentHoverRule:s,addColumnContentPlaceholderHoverRule:d,updateFormRule:f,updateFormMessageRule:u,updateFormColumnsRule:b,updateColumnContentRule:p,updateColumnContentFocusRule:_,updateColumnContentHoverRule:g,updateColumnContentPlaceholderHoverRule:w,removeFormRule:m,removeColumnContentRule:h,removeColumnContentHoverRule:x,removeColumnContentFocusRule:R}}(jQuery);
var Rexbuilder_Rexwpcf7_Editor=function(e){"use strict";function t(t){var a,r=t.insertionPoint,n=r.formID,c=t.fieldType,o=Rexbuilder_Util.createRandomNumericID(3),l=r.row_number,i=r.column_number,p=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+n+'"] .wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]'),f=O[n].find('.wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]');p.empty().removeClass("with-button"),f.empty().removeClass("with-button");var d=e(document.createElement("span")).addClass("wpcf7-column-content");p.append(d);var s=p.find(".wpcf7-column-content"),w=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph");switch(c){case"text":a='<label class="wpcf7-label-text">'+w+"[text text-"+o+" class:text-"+o+"]</label>",s.prepend('<label class="wpcf7-label-text">'+w+'<span class="wpcf7-form-control-wrap text-'+o+'"><input type="text" name="text-'+o+'" value="" class="wpcf7-form-control wpcf7-text text-'+o+'" aria-invalid="false"></span></label>');break;case"textarea":a='<label class="wpcf7-label-text">'+w+"[textarea textarea-"+o+" class:textarea-"+o+"]</label>",s.prepend('<label class="wpcf7-label-text">'+w+'<span class="wpcf7-form-control-wrap textarea-'+o+'"><textarea name="textarea-'+o+'" class="wpcf7-form-control wpcf7-textarea textarea-'+o+'" aria-invalid="false"></textarea></span></label>');break;case"menu":a="[select menu-"+o+" class:menu-"+o+' "Field 1" "Field 2"]',s.prepend('<span class="wpcf7-form-control-wrap menu-'+o+'"><select name="menu-'+o+'" class="wpcf7-form-control wpcf7-select menu-'+o+'" aria-invalid="false"><option value="" disabled selected>Select something</option><option value="Field 1">Field 1</option><option value="Field 2">Field 2</option></select></span>');break;case"radiobuttons":a="[radio radio-"+o+' default:1  "Option 1" "Option 2" ]',s.prepend('<span class="wpcf7-form-control-wrap radio-'+o+'"><span class="wpcf7-form-control wpcf7-radio"><span class="wpcf7-list-item first"><input type="radio" name="radio-'+o+'" value="Option 1" checked="checked" class="with-gap" id="wpcf7-radio-1"><span class="wpcf7-list-item-label">Option 1</span></span><span class="wpcf7-list-item last"><input type="radio" name="radio-'+o+'" value="Option 2" class="with-gap" id="wpcf7-radio-2"><span class="wpcf7-list-item-label">Option 2</span></span></span></span>');break;case"acceptance":a="[acceptance acceptance-"+o+" optional]<p>Your text</p>[/acceptance]",s.prepend('<span class="wpcf7-form-control-wrap acceptance-'+o+'"><span class="wpcf7-form-control wpcf7-acceptance optional"><span class="wpcf7-list-item"><label><input type="checkbox" name="acceptance-'+o+'" value="1" aria-invalid="false"><span class="wpcf7-list-item-label"><p>Your text</p></span></label></span></span></span>');break;case"file":a="[file file-"+o+" filetypes: limit:]<div class='wpcf7-file-caption'>Your text here</div>",s.prepend('<span class="wpcf7-form-control-wrap file-'+o+'"><input type="file" name="file-'+o+'" class="wpcf7-form-control wpcf7-file" accept=".jpg,.jpeg,.png,.gif" aria-invalid="false" id="wpcf7-file-2"><label for="wpcf7-file-2">Choose file</label><div class="wpcf7-file-caption">Your text here</div></span>');break;case"submit":a="[submit class:submit-"+o+' "Send"]',s.prepend('<span class="wpcf7-form-control-wrap"><input type="submit" value="Send" class="wpcf7-form-control wpcf7-submit submit-'+o+' wrapped"></span>')}R(r,a),u({editPoint:{element_id:n,row_number:l,column_number:i}}),F(n),Rexbuilder_Rexwpcf7.fixWpcf7Files(),Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons(),Rexbuilder_Rexwpcf7.addColumnContentStyle(p),Rexbuilder_Live_Utilities.launchTooltips(),D.updateHeight()}function a(t,a){var r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-form"),n=e(document.createElement("div")),c=parseInt(r.find(".wpcf7-row").last().attr("wpcf7-row-number"))+1;switch(a){case 1:n.addClass("wpcf7-row wpcf7-row__1-column");break;case 2:n.addClass("wpcf7-row wpcf7-row__2-columns");break;case 3:n.addClass("wpcf7-row wpcf7-row__3-columns");break;case 4:n.addClass("wpcf7-row wpcf7-row__4-columns")}n.attr("wpcf7-row-number",c);for(var o=[],l=0;l<a;l++){o[l]=e(document.createElement("div")),o[l].addClass("wpcf7-column with-button"),o[l].attr("wpcf7-column-number",l+1);var i=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");o[l].append(i),n.append(o[l])}r.each(function(){var t=n.clone();e(this).find(".wpcf7-rows").append(t)}),F(t),y(t,n)}function r(t,a,r){var n=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-form"),o=n.find('.wpcf7-row[wpcf7-row-number="'+r+'"]');a.insertAfter(o),N(n),k(t,r),E();var l=Array.prototype.slice.call(a.get(0).getElementsByClassName("wpcf7-column")),i=r+1;l.forEach(function(a,r){Rexbuilder_Util.hasClass(a,"with-button")||(c(a,t,i,r+1),Rexbuilder_Rexwpcf7.addColumnContentStyle(e(a)))})}function n(t,a,r){var n=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-form"),o=n.find('.wpcf7-row[wpcf7-row-number="'+r+'"]'),l=e(o[0]).clone(!1);l.insertAfter(o),N(n);var i,p=r+1,f=n.find('.wpcf7-row[wpcf7-row-number="'+p+'"]');f.each(function(t,r){e(r).find(".wpcf7-column").each(function(t,r){if(t+1!==a){e(r).empty();var n=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");e(r).append(n).addClass("with-button")}else i=r})}),T(t,a,r),E(),c(i,t,p,a)}function c(e,t,a,r){var n=o(e);if(n){var c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7 .wpcf7-row[wpcf7-row-number="'+a+'"] .wpcf7-column[wpcf7-column-number="'+r+'"]');if(c.find(".rex-wpcf7-column-info").attr("data-tippy-content",n.newName),"radio"!==n.inputType){var i=c.find(".wpcf7-form-control-wrap").get(0);i.className=i.className.replace(n.oldName,n.newName)}n.inputType?c.find('[type="'+("acceptance"===n.inputType?"checkbox":"radio")+'"]').attr("name",n.newName):c.find(".wpcf7-form-control").attr("name",n.newName),l(t,{newRowNumber:a,newColumnNumber:r,oldName:n.oldName,newName:n.newName})}}function o(e){var t,a=/(-rexclone-)(\d+)$/,r=e.querySelector(".wpcf7-form-control:not(.wpcf7-acceptance):not(.wpcf7-radio)"),n=null;if(r){if(r.matches(".wpcf7-submit"))return null}else n=e.querySelector(".wpcf7-form-control").className.match(/wpcf7-(radio|acceptance)/),n&&(n=n[1],r=e.querySelector('[type="'+("acceptance"===n?"checkbox":"radio")+'"]'));t=r.getAttribute("name");var c,o=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('[name^="'+t.replace(a,"")+'"]')),l=1;o.forEach(function(e){c=e.getAttribute("name").match(a),c&&(l=parseInt(c[2])>l?parseInt(c[2]):l)}),l++;var i,p=a.test(t);return i=p?t.replace(a,"-rexclone-"+l):t+"-rexclone-"+l,{inputType:n,oldName:t,newName:i}}function l(e,t){var a=t.newRowNumber,r=t.newColumnNumber,n=t.oldName,c=t.newName,o=O[e].find('.wpcf7-row[wpcf7-row-number="'+a+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .wpcf7-column-content').get(0),l=o.innerHTML;-1!==l.indexOf(n)?o.innerHTML=l.replace(n,c):console.error("Something went wrong when cloning fields!")}function i(e,t){var a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),r=a.find('.wpcf7-row[wpcf7-row-number="'+t+'"]');r.remove(),N(a),S(e,t)}function p(e,t,a){var r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),n=r.find('.wpcf7-row[wpcf7-row-number="'+t+'"] .wpcf7-column[wpcf7-column-number="'+a+'"]');Rexbuilder_Rexwpcf7.removeColumnContentStyle(n),n.empty();var c=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");n.append(c).addClass("with-button"),A(e,t,a)}function f(t){var a=t.element_target.element_id,r=t.propertyType,n=t.propertyName,c=t.newValue,o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"]').parents(".text-wrap");switch(r){case"background":case"border":case"border-width":case"margin":Rexbuilder_Rexwpcf7.updateFormRule(a,n,c),o.each(function(t,a){Rexbuilder_Util_Editor.updateBlockContainerHeight(e(a))});break;case"validation-error":Rexbuilder_Rexwpcf7.updateFormMessageRule(a,"wpcf7-validation-errors",n,c);break;case"send-message":Rexbuilder_Rexwpcf7.updateFormMessageRule(a,"wpcf7-mail-sent-ok",n,c);break;case"columns-padding":Rexbuilder_Rexwpcf7.updateFormColumnsRule(a,n,c),o.each(function(t,a){Rexbuilder_Util_Editor.updateBlockContainerHeight(e(a))})}D.updateHeight()}function d(t){var a=t.element_target.element_id;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"] .wpcf7-column').not(".with-button").each(function(a,r){var n=e(r),c=0!=n.find(".rex-wpcf7-column-content-data").length,o=Rexbuilder_Rexwpcf7.generateColumnContentData(n,c);if("submit"!=o.input_type){var l={target:o.target,content:o,propertyType:t.propertyType,propertyName:t.propertyName,newValue:t.newValue};s(l)}}),D.updateHeight()}function s(t){var a=t.target.element_id,r=t.target.row_number,n=t.target.column_number,c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+"\"] .wpcf7-row[wpcf7-row-number='"+r+"'] .wpcf7-column[wpcf7-column-number='"+n+"']"),o=t.content.field_class,l=t.content.input_type,i=t.propertyName,p=t.propertyType,f=t.newValue,d=t.content.wpcf7_required_field,u=t.content.wpcf7_only_numbers,w=t.content.wpcf7_email;l="text"===l?u?"number":w?"email":"text":l;var m;switch(l){case"text":case"email":case"number":case"textarea":case"select":m="wpcf7-"+l;break;case"acceptance":m="wpcf7-form-control-wrap";break;case"submit":case"file":m=o;break;case"radio":m="wpcf7-form-control-wrap."+o}switch(p){case"background-color":case"border-width":case"border-radius":case"border-color":"file"!=l&&"radio"!=l&&"acceptance"!=l&&Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m,i,f);break;case"font-size":Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m,i,f),Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m+" .wpcf7-radio-label",i,f),Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m+" .wpcf7-list-item-label",i,f);break;case"width":Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m,i,Rexbuilder_Rexwpcf7.guessWidthToSet(l,a,r,n,f));break;case"height":case"text-color":if(Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m,i,f),"acceptance"===l){var b=[{property:"border-color",selector:m+" :not(:checked) ~ .wpcf7-list-item-label::before"},{property:"border-bottom-color",selector:m+" :checked ~ .wpcf7-list-item-label::before"},{property:"border-right-color",selector:m+" :checked ~ .wpcf7-list-item-label::before"}];b.forEach(function(e){Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,e.selector,e.property,f)})}break;case"placeholder-color":Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m+"::placeholder",i,f);break;case"select-color":/color\:/.test(c.find(".wpcf7-select").attr("style"))&&c.find(".wpcf7-select").css("color",f);break;case"button-text":"file"===l?c.find("label").text(f):"submit"===l&&c.find("[type=submit]").val(f);break;case"button-width":case"button-height":case"button-border-width":case"button-border-radius":case"button-margin-top":case"button-margin-right":case"button-margin-bottom":case"button-margin-left":case"button-padding-top":case"button-padding-right":case"button-padding-bottom":case"button-padding-left":case"button-font-size":case"button-text-color":case"button-background-color":case"button-border-color":"file"==l?Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m+" label",i,f):Rexbuilder_Rexwpcf7.updateColumnContentRule(a,r,n,m,i,f);break;case"background-color-hover":case"border-color-hover":"file"!=l&&"radio"!=l&&"acceptance"!=l&&Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(a,r,n,m,i,f);break;case"text-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(a,r,n,m,i,f);break;case"placeholder-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentPlaceholderHoverRule(a,r,n,m,i,f);break;case"text-focus":Rexbuilder_Rexwpcf7.updateColumnContentFocusRule(a,r,n,m,i,f);break;case"button-text-color-hover":case"button-background-color-hover":case"button-border-color-hover":"file"==l?Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(a,r,n,m+" label",i,f):Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(a,r,n,m,i,f);break;case"wpcf7-required":if(d)switch(l){case"text":case"email":case"number":case"select":case"file":case"textarea":c.find(".wpcf7-"+l).addClass("wpcf7-validates-as-required"),c.find(".wpcf7-"+l).attr("aria-required","true");break;case"acceptance":c.find(".wpcf7-acceptance").removeClass("optional")}else switch(l){case"text":case"email":case"number":case"select":case"file":case"textarea":c.find(".wpcf7-"+l).removeClass("wpcf7-validates-as-required"),c.find(".wpcf7-"+l).removeAttr("aria-required");break;case"acceptance":c.find(".wpcf7-acceptance").addClass("optional")}break;case"wpcf7-email":if(w){var x=c.find(".wpcf7-form-control"),_=x.attr("type"),h=new RegExp(_+"-[\\d]+"),v=h.exec(x[0].classList)[0],g="email-"+/[0-9]+/.exec(v)[0];x.attr("type","email"),x.removeClass(v).removeClass("wpcf7-"+_).removeClass("wpcf7-validates-as-number"),x.addClass(g).addClass("wpcf7-email").addClass("wpcf7-validates-as-email"),l="email"}else{l=u?"number":"text";var x=c.find(".wpcf7-email"),v=/email-[\d]+/.exec(x[0].classList)[0],g=l+"-"+/[0-9]+/.exec(v)[0];x.attr("type",l),x.removeClass(v).removeClass("wpcf7-email").removeClass("wpcf7-validates-as-email"),x.addClass(g).addClass("wpcf7-"+l),"number"===l&&x.addClass("wpcf7-validates-as-number")}c.each(function(t,a){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(e(a))});break;case"wpcf7-only-numbers":if(u){var x=c.find(".wpcf7-form-control"),_=x.attr("type"),h=new RegExp(_+"-[\\d]+"),v=h.exec(x[0].classList)[0],g="number-"+/[0-9]+/.exec(v)[0];x.attr("type","number"),x.removeClass(v).removeClass("wpcf7-"+_).removeClass("wpcf7-validates-as-email"),x.addClass(g).addClass("wpcf7-number").addClass("wpcf7-validates-as-number"),l="number"}else{l=w?"email":"text";var x=c.find(".wpcf7-number"),v=/number-[\d]+/.exec(x[0].classList)[0],g=l+"-"+/[0-9]+/.exec(v)[0];x.attr("type",l),x.removeClass(v).removeClass("wpcf7-number").removeClass("wpcf7-validates-as-number"),x.addClass(g).addClass("wpcf7-"+l),"email"===l&&x.addClass("wpcf7-validates-as-email")}c.each(function(t,a){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(e(a))});break;case"wpcf7-placeholder":switch(l){case"text":case"email":case"number":case"textarea":c.find(".wpcf7-"+l).attr("placeholder",f);break;case"select":c.find(".wpcf7-"+l+" option[disabled]").text(f)}break;case"wpcf7-default-check":c.find(".wpcf7-acceptance input[type='checkbox']").prop("checked",f);break;case"wpcf7-label-text-editor":f=f.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),c.find(".wpcf7-label-text__paragraph").html(f);break;case"wpcf7-text-editor":switch(f=f.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),l){case"acceptance":c.find(".wpcf7-list-item-label").html(f);break;case"file":c.find(".wpcf7-file-caption").html(f)}break;case"wpcf7-file-dimensions":break;case"wpcf7-list":var a=c.parents(".rex-element-wrapper").eq(0).attr("data-rex-element-id"),C=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"]').length;switch(l){case"select":var R,y=c.get();y.forEach(function(e){f.fields.forEach(function(t,a){R=e.querySelectorAll(".wpcf7-select option:not([disabled])")[a],R.setAttribute("value",t),R.innerText=t})});break;case"radio":var k=f.fields,T=f.type,S=k.length;switch(T){case"resetting":var A=c[0].querySelectorAll(".wpcf7-list-item").length;if(A<S)for(var q=0;q<S-A;q++)s({target:t.target,content:t.content,propertyType:"wpcf7-list-add",propertyName:void 0,newValue:void 0});else if(A>S)for(var q=0;q<A-S;q++)s({target:t.target,content:t.content,propertyType:"wpcf7-list-remove",propertyName:void 0,newValue:A-1-q});case"sorting":for(var q=0;q<C;q++){var L=c.eq(q).find(".wpcf7-radio .wpcf7-list-item");L.removeClass("first").removeClass("last"),L.first().addClass("first"),L.last().addClass("last")}case"writing":for(var q=0;q<C;q++)for(var q=0;q<S;q++)c.eq(q).find(".wpcf7-radio .wpcf7-list-item").eq(q).find("input").val(k[q]).end().find(".wpcf7-radio-label").text(k[q])}for(var q=0;q<C;q++)for(var q=0;q<S;q++)c.find(".wpcf7-radio .wpcf7-list-item").removeClass("first").removeClass("last"),c.find(".wpcf7-radio .wpcf7-list-item").eq(q).find("input").val(k[q]),c.find(".wpcf7-radio .wpcf7-list-item").eq(q).find(".wpcf7-radio-label").text(k[q]);c.find(".wpcf7-radio .wpcf7-list-item").eq(0).addClass("first"),c.find(".wpcf7-radio .wpcf7-list-item").eq(S-1).addClass("last");break;case"file":f.fields=f.fields.map(function(e){return"."+e}),c.find(".wpcf7-file").attr("accept",f.fields)}break;case"wpcf7-list-add":switch(l){case"select":var N=e(document.createElement("option"));N.attr("value",""),c.find(".wpcf7-select").append(N);break;case"radio":var U=0==c.find(".wpcf7-radio .wpcf7-list-item").length,E=c.find(".wpcf7-radio");if(U){var H=tmpl("tmpl-rexwpcf7-new-radio-field",{});E.append(H)}else{var j=c.find(".wpcf7-radio .wpcf7-list-item.last").eq(0).clone();c.find(".wpcf7-radio .wpcf7-list-item.last").removeClass("last"),j.find(".wpcf7-radio-label").text(""),j.find("[type='radio']").val(""),j.addClass("last"),j.removeClass("first"),E.append(j)}Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":c.find(".wpcf7-file").attr("accept",c.find(".wpcf7-file").attr("accept")+",")}break;case"wpcf7-list-remove":var I=parseInt(f);switch(l){case"select":for(var F=c.find(".wpcf7-select").length,q=0;q<F;q++)c.find(".wpcf7-select").eq(q).find("option").eq(I).remove();break;case"radio":for(var M=c.length,q=0;q<M;q++){var $=e(c[q].querySelectorAll(".wpcf7-radio")),B=e($[0].querySelectorAll(".wpcf7-list-item")[I-1]),O=B.hasClass("first"),P=B.hasClass("last");B.remove(),O&&P||(O&&(B=$.find(".wpcf7-list-item").first().addClass("first")),P&&(B=$.find(".wpcf7-list-item").last().addClass("last")));for(var z=$.find(".wpcf7-list-item"),q=0;q<z.length;q++){var v=/wpcf7-radio\-[0-9]+/.exec(z.find("[type='radio']")[q].id)[0];e(z.find("[type='radio']")[q]).removeClass(v)}}Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":var V=c.find(".wpcf7-file").attr("accept").split(",");V.splice(f-1,1),c.find(".wpcf7-file").attr("accept",V)}}D.updateHeight()}function u(t){var a=t.editPoint,r=a.element_id,n=a.row_number,c=a.column_number,o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]').find(".wpcf7-row[wpcf7-row-number='"+n+"']").find(".wpcf7-column[wpcf7-column-number='"+c+"']"),l=O[r],i=l.find(".wpcf7-row[wpcf7-row-number='"+n+"']").find(".wpcf7-column[wpcf7-column-number='"+c+"']"),p=e(document.createElement("span"));p.addClass("rex-wpcf7-column-content-data");var f=0!=o.find(".wpcf7-radio").length,d=0!=o.find(".wpcf7-acceptance").length,s=0!=o.find(".wpcf7-file").length,u=0!=o.find(".wpcf7-submit").length,w=o.parents(".rex-element-wrapper").find(".rex-element-data");f||d||s||u||(p.attr("data-background-color",w.attr("data-wpcf7-content-background-color")),p.attr("data-border-color",w.attr("data-wpcf7-content-border-color")),p.attr("data-wpcf7-border-width",w.attr("data-wpcf7-content-border-width")),p.attr("data-background-color-hover",w.attr("data-wpcf7-content-background-color-hover")),p.attr("data-border-color-hover",w.attr("data-wpcf7-content-border-color-hover"))),u||(p.attr("data-wpcf7-input-width",w.attr("data-wpcf7-content-width")),p.attr("data-wpcf7-input-height",w.attr("data-wpcf7-content-height")),p.attr("data-text-color",w.attr("data-wpcf7-content-text-color")),p.attr("data-wpcf7-font-size",w.attr("data-wpcf7-content-font-size")),p.attr("data-text-color-hover",w.attr("data-wpcf7-content-text-color-hover")));var m=p.clone();if(o.prepend(p),0===i.find(".wpcf7-column-content").length){var b=i.html(),x=e('<span class="wpcf7-column-content">'+b+"</div>");i.empty().append(x)}i.prepend(m)}function w(t){var a=t.columnContentData,r=a.target.element_id,n=a.target.row_number,c=a.target.column_number,o=a.input_type,l=O[r].find('.wpcf7-row[wpcf7-row-number="'+n+'"] .wpcf7-column[wpcf7-column-number="'+c+'"]'),i=l.find(".wpcf7-column-content").html();"undefined"==typeof i&&(i=l.html());var p="true"==String(a.wpcf7_required_field),f="true"==String(a.wpcf7_email),d="true"==String(a.wpcf7_only_numbers),s="true"==String(a.wpcf7_default_check),u=a.wpcf7_placeholder,w=a.label_text,m=a.text,b=a.wpcf7_list_fields,x=a.wpcf7_file_max_dimensions,_=a.wpcf7_button.text;if(-1!==["text","email","number","select","file","textarea","acceptance"].indexOf(o)){var h=i.match(/\[(textarea|email|number|select|file|text)\*?|(optional)/);if(h){var v=h[0],C=h[1],R=h[2];R?p&&(i=i.replace(" "+R,"")):i=i.replace(v,"["+C+(p?"*":""))}else p||(i=i.replace(/\]/," optional]"))}if(-1!==["text","email","number"].indexOf(o)){var y=f?"email":d?"number":"text";if(y!==o)try{var k=i.match(/\[(text|email|number)/),T=/(text|email|number)(-\d+)/,S=i.match(T);i=i.replace(k[0],"["+y).replace(new RegExp(T,"g"),y+S[2])}catch(A){console.error("Error while changing the field type to "+y+". Error:",A)}}if(-1!==["text","email","number","textarea"].indexOf(o))try{var q=e(e.parseHTML(i));q.contents().get(0).innerHTML=w,i=q.get(0).outerHTML}catch(A){console.error("Error while changing the label text. Error:",A)}if("acceptance"==o){var L=/default\:on/.test(i);L?s||(i=i.replace("default:on","")):s&&(i=i.replace(/\[[a-z]+ [a-z]+\-[0-9]+ /,/\[[a-z]+ [a-z]+\-[0-9]+ /.exec(i)+"default:on "))}if(-1!==["text","email","number","textarea"].indexOf(o)){var N=/placeholder/.test(i);if(""===u)N&&(i=i.replace(/\splaceholder \".+\"/,""));else{var U=i.match(/\[.+(\"|\')(.+)(\"|\')\]/),E='placeholder "'+u+'"';N||U?N?i=i.replace(/placeholder \".+\"/,E):U&&(i=i.replace(U[1]+U[2]+U[3],""),i=i.replace("]"," "+E+"]")):i=i.replace("]"," "+E+"]")}}if("acceptance"==o&&(i=i.replace(/\][\s\S]+\[/,"]"+m+"["),i=i.replace(/<p>\s<\/p>/g,"")),"select"==o||"radio"==o){i=i.replace(/\s[\"\'][\s\S]+[\"\']/,"");for(var H in b)i=i.replace("]"," '"+b[H]+"']")}if("file"==o&&(i=i.replace(/limit\:[\w]*/,"limit:"+x)),"file"===o){for(var j="filetypes:",I=0;I<b.length;I++)b[I]=b[I].toLowerCase(),j+=b[I],I!=b.length-1&&(j+="|");i=i.replace(/filetypes\:[\w\|]*/,j)}if("file"==o){var F=e(e.parseHTML(i)[1]);F.empty(),F.append(m),i=i.replace(/\][\s\S]*/,"]"+F[0].outerHTML)}"submit"==o&&(i=i.replace(/[\"\'][\s\S]*[\"\']/,'"'+_+'"'));var M=l.find(".wpcf7-column-content");M.empty(),M.append(i),g(r,a)}function m(){var t=document.getElementById("rex-wpcf7-tools");if(null!==t){var a=parseInt(e(t).parents(".grid-stack-item").attr("data-gs-height"));a--,e(t).parents(".grid-stack-item").attr("data-gs-height",a)}}function b(e,t){O[e]=t,z[e]=z[e]?z[e]+1:1,P.push(e),P=Rexbuilder_Util.removeArrayDuplicates(P)}function x(e){1===z[e]?(delete O[e],delete z[e],P.splice(P.indexOf(e),1)):z[e]-=1}function _(t,a){var r=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .rex-element-wrapper").has(".wpcf7-form");if(0!==r.length){P=[],r.each(function(e,t){P.push(t.getAttribute("data-rex-element-id"))}),z={};for(var n=0;n<P.length;n++){var c=P[n];z[c]=z[c]?z[c]+1:1}P=Rexbuilder_Util.removeArrayDuplicates(P),e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:P},success:function(n){if(n.success){for(var c=0;c<P.length;c++)O[P[c]]=e(n.data.html_forms[c].toString().trim()),a&&P[c]==t&&Rexbuilder_Rexelement.addElementStyle(r.filter('[data-rex-element-id="'+t+'"]'));Rexbuilder_Rexwpcf7.fixInputs();var o=Rexbuilder_Util.$rexContainer.find(".importing-element");if(0===o.length)return;Rexbuilder_Util_Editor.updateBlockContainerHeight(o.parents(".text-wrap")),o.removeClass("importing-element")}}})}}function h(t){if(void 0!==O[t]){var a=O[t][0].outerHTML,r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').eq(0).find(".rex-element-data")[0].outerHTML;e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_save_changes",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:t,new_form_string:a,element_data_string:r},success:function(e){e.success&&(a="")},error:function(e){}})}}function v(){return P}function g(e,t){if(O){var a=O[e],r=t.target.row_number,n=t.target.column_number,c=a.find('.wpcf7-row[wpcf7-row-number="'+r+'"]').find('.wpcf7-column[wpcf7-column-number="'+n+'"]').find(".rex-wpcf7-column-content-data"),o=t.input_type;"submit"!==o&&"radio"!==o&&c.attr("data-wpcf7-required-field",t.wpcf7_required_field),"text"!==o&&"email"!==o&&"number"!==o||(c.attr("data-wpcf7-email",t.wpcf7_email),c.attr("data-wpcf7-only-numbers",t.wpcf7_only_numbers)),"acceptance"===o&&c.attr("data-wpcf7-default-check",t.wpcf7_default_check),"text"!==o&&"email"!==o&&"number"!==o&&"textarea"!==o&&"select"!==o||c.attr("data-wpcf7-placeholder",t.wpcf7_placeholder),"file"===o&&(c.attr("data-wpcf7-file-max-dimensions",t.wpcf7_file_max_dimensions),c.attr("data-wpcf7-file-types",t.wpcf7_list_fields)),"file"!=o&&"radio"!=o&&"acceptance"!=o&&(c.attr("data-wpcf7-border-width",t.border_width),c.attr("data-wpcf7-border-radius",t.border_radius),c.attr("data-background-color",t.background_color),c.attr("data-background-color-hover",t.background_color_hover),c.attr("data-border-color",t.border_color),c.attr("data-border-color-hover",t.border_color_hover)),c.attr("data-wpcf7-input-width",t.input_width),c.attr("data-wpcf7-input-height",t.input_height),c.attr("data-wpcf7-font-size",t.font_size),c.attr("data-text-color",t.text_color),c.attr("data-text-color-hover",t.text_color_hover),c.attr("data-text-color-focus",t.text_color_focus),"select"===o&&c.attr("data-select-color-after-selection",t.select_color_after_selection),"text"!==o&&"email"!==o&&"number"!==o&&"textarea"!==o||(c.attr("data-placeholder-color",t.placeholder_color),c.attr("data-placeholder-hover-color",t.placeholder_hover_color)),"file"!==o&&"submit"!==o||(c.attr("data-button-text",t.wpcf7_button.text),c.attr("data-button-text-font-size",t.wpcf7_button.font_size),c.attr("data-button-height",t.wpcf7_button.height),c.attr("data-button-width",t.wpcf7_button.width),c.attr("data-button-border-width",t.wpcf7_button.border_width),c.attr("data-button-border-radius",t.wpcf7_button.border_radius),c.attr("data-button-margin-top",t.wpcf7_button.margin_top),c.attr("data-button-margin-right",t.wpcf7_button.margin_right),c.attr("data-button-margin-bottom",t.wpcf7_button.margin_bottom),c.attr("data-button-margin-left",t.wpcf7_button.margin_left),c.attr("data-button-padding-top",t.wpcf7_button.padding_top),c.attr("data-button-padding-right",t.wpcf7_button.padding_right),c.attr("data-button-padding-bottom",t.wpcf7_button.padding_bottom),c.attr("data-button-padding-left",t.wpcf7_button.padding_left),c.attr("data-button-text-color",t.wpcf7_button.text_color),c.attr("data-button-text-color-hover",t.wpcf7_button.text_color_hover),c.attr("data-button-background-color",t.wpcf7_button.background_color),c.attr("data-button-background-color-hover",t.wpcf7_button.background_color_hover),c.attr("data-button-border-color",t.wpcf7_button.border_color),c.attr("data-button-border-color-hover",t.wpcf7_button.border_color_hover))}}function C(){var t=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").has(".wpcf7-form:not(.no-builder-form)");if(0!==t.length){P=[],t.each(function(){P.push(e(this).attr("data-rex-element-id"))}),z={};for(var a=0;a<P.length;a++){var r=P[a];z[r]=z[r]?z[r]+1:1}P=Rexbuilder_Util.removeArrayDuplicates(P),e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:P},success:function(t){if(t.success){var a=0;for(a=0;a<P.length;a++)O[P[a]]=e(t.data.html_forms[a].toString().trim());U(),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Rexelement.addStyles()}},error:function(e){}})}}function R(e,t){var a=e.formID,r=e.row_number,n=e.column_number,c=O[a].find('.wpcf7-row[wpcf7-row-number="'+r+'"] .wpcf7-column[wpcf7-column-number="'+n+'"]');c.removeClass("with-button").append(t)}function y(e,t){var a=O[e],r=a.find(".wpcf7-row").last();t.insertAfter(r)}function k(e,t){var a=O[e],r=a.find('.wpcf7-row[wpcf7-row-number="'+t+'"]'),n=r.clone();n.insertAfter(r),L(a)}function T(t,a,r){var n=O[t],c=n.find('.wpcf7-row[wpcf7-row-number="'+r+'"]'),o=c.clone();o.insertAfter(c),L(n);var l=r+1,i=n.find('.wpcf7-row[wpcf7-row-number="'+l+'"]');i.find(".wpcf7-column").each(function(t,r){if(t+1!=a){e(r).empty();var n=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");e(r).append(n).addClass("with-button")}})}function S(e,t){var a=O[e],r=a.find('.wpcf7-row[wpcf7-row-number="'+t+'"]');r.remove(),L(a)}function A(e,t,a){var r=O[e],n=r.find('.wpcf7-row[wpcf7-row-number="'+t+'"]').find('.wpcf7-column[wpcf7-column-number="'+a+'"]');n.empty();var c=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");n.append(c).addClass("with-button")}function q(){return O}function L(t){t.each(function(t,a){e(a).find(".wpcf7-row").each(function(t,a){e(a).attr("wpcf7-row-number",t+1)})})}function N(t){t.each(function(t,a){e(a).find(".wpcf7-row").each(function(t,a){var r=e(a);r.attr("wpcf7-row-number",t+1)})}),t.find(".wpcf7-row").each(function(t){var a=e(this);a.find(".wpcf7-column").each(function(){var t=e(this);Rexbuilder_Rexwpcf7.refreshColumnContentStyle(t)})})}function U(){var e=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper");e.find(".wpcf7-rows").addClass("ui-sortable").sortable({direction:"vertical",handle:".rex-wpcf7-row-drag",cursor:"pointer",update:function(t,a){var r=a.item.parents(".rex-element-wrapper").attr("data-rex-element-id"),n=parseInt(a.item.attr("wpcf7-row-number"));N(e.find(".wpcf7-form"));var c=parseInt(a.item.attr("wpcf7-row-number")),o=O[r].find(".wpcf7-row[wpcf7-row-number='"+n+"']"),l=O[r].find(".wpcf7-row[wpcf7-row-number='"+c+"']");n<c?o.insertAfter(l):o.insertBefore(l),L(O[r]),Rexbuilder_Util_Editor.builderEdited(!1)}})}function E(){e(".wpcf7-form:not(.no-builder-form) .wpcf7-submit:not(.wrapped)").each(function(t,a){Rexbuilder_Util.addClass(a,"wrapped"),e(a).wrap(Rexbuilder_Live_Templates.getTemplate("wpcf7-button-fix"))})}function H(){var e=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)"));t.forEach(function(t){t.querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",e)})}function j(){for(var e,t=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),r=0,n=0;r<a.length;r++)for(e=Array.prototype.slice.call(a[r].querySelectorAll(".wpcf7-row")),n=0;n<e.length;n++)e[n].insertAdjacentHTML("afterbegin",t)}function I(){for(var e,t,a,r=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),n=0,c=0;c<r.length;c++)for(e=Array.prototype.slice.call(r[c].querySelectorAll(".wpcf7-form-control")),n=0;n<e.length;n++)t=M(e[n]),a=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:t}),e[n].insertAdjacentHTML("afterend",a)}function F(t){for(var a,r,n,c,o,l=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),i=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),p=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form:not(.no-builder-form)')),f=0,d=0,s=0;s<p.length;s++)for(p[s].querySelector(".rexwpcf7-form-tools")||p[s].querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",l),a=Array.prototype.slice.call(p[s].getElementsByClassName("wpcf7-row")),f=0;f<a.length;f++)for(r=a[f],r.querySelector(".rexwpcf7-row-tools")||r.insertAdjacentHTML("afterbegin",i),
n=Array.prototype.slice.call(r.getElementsByClassName("wpcf7-form-control")),d=0;d<n.length;d++)0===e(n[d]).siblings(".rexwpcf7-column-tools").length&&(c=M(n[d]),o=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:c}),n[d].insertAdjacentHTML("afterend",o))}function M(e){var t=e.className.match(/wpcf7-email/);if(t)return e.getAttribute("name");if(t=e.className.match(/wpcf7-(text|number|textarea|select|submit|acceptance|radio|file)/))switch(t=t[1]){case"text":case"number":case"textarea":case"select":case"file":return e.getAttribute("name");case"acceptance":t="checkbox";case"radio":return e.querySelector('[type="'+t+'"]').getAttribute("name");case"submit":default:return null}}function $(e){D=e}function B(){O={},E(),H(),j(),I(),C()}var O,D,P=[],z={};return{init:B,retrieveFormsInPage:q,setCf7EditorInstance:$,addMissingTools:F,wrapButtons:E,updateFormInDB:h,updateSpanDataInDB:g,setRowsSortable:U,addField:t,addNewRow:a,addRow:r,addClonedColumnRow:n,deleteRow:i,deleteColumnContent:p,updateFormLive:f,updateFormContentLive:d,updateColumnContentLive:s,updateColumnContentShortcode:w,addFormInPage:b,removeFormInPage:x,updateDBFormsInPage:_,getIDsInPage:v,fixBlocksHeight:m,createColumnContentSpanData:u}}(jQuery);
var Rex_Save_Listeners=function(e){"use strict";function t(){Rexbuilder_Util.$document.on("rexlive:savePage",function(t){var a,o,r,l,u,d,_=t.settings.data_to_send;Rexbuilder_Util_Editor.savingPage=!0;var n=parseInt(e("#id-post").attr("data-post-id")),c=Rexbuilder_Util.activeLayout;if("undefined"!=typeof Rexbuilder_Rexwpcf7){var g=Rexbuilder_Rexwpcf7_Editor.getIDsInPage();g.forEach(function(e){Rexbuilder_Rexwpcf7_Editor.updateFormInDB(e)}),0!==g.length&&Rexbuilder_Rexwpcf7_Editor.fixBlocksHeight()}var m=e("#rexpansive-builder-style-inline-css").text().trim(),f=v();Rexbuilder_Dom_Util.fixModelNumbers();var x,p=i(c),y=Rexbuilder_Util.getPageAvaiableLayoutsNames(),h=!1;for(a=0,x=y.length;a<x;a++)if(y[a]==p.name){h=!0;break}h||y.push(p.name),Rexbuilder_Util.updatePageAvaiableLayoutsNames(y),Rexbuilder_Util.updatePageCustomizationsData(p);var A=Rexbuilder_Rexbutton.findIDsInPage(!1),R=[];if(R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_buttons_in_page",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,ids:JSON.stringify(A)},success:function(e){e.success},error:function(e){}})),R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_layouts",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,names:y},success:function(e){e.success},error:function(e){}})),R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_css",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,custom_css:m},success:function(e){e.success},error:function(e){}})),R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_effects",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,custom_effects:f},success:function(e){e.success},error:function(e){}})),"default"==c){var U="",k="";Rexbuilder_Util.updateDefaultLayoutState({pageData:p.sections,modelsData:Rexbuilder_Util.getModelsCustomizations()}),Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(){var t=e(this);t.hasClass("removing_section")||(k+=t.hasClass("rex-model-section")?"[RexModel id="+t.attr("data-rexlive-model-id")+"][/RexModel]":s(t,"shortcode",null))});var L,w=[];w=Rexbuilder_Util.getPageCustomizationsDom();var z,j,S;for(a=0,z=w.length;a<z;a++){var N=b(w[a].sections);for(o=0,j=p.sections.length;o<j;o++)for(r=0,S=w[a].sections.length;r<S;r++)if(p.sections[o].section_rex_id==w[a].sections[r].section_rex_id){if("true"==w[a].sections[r].section_is_model.toString())for(l=0;l<N.length;l++)N[l].id==w[a].sections[r].section_model_id&&parseInt(p.sections[o].section_model_number)<=N[l].number;if("true"!=w[a].sections[r].section_is_model.toString())for("undefined"!=typeof w[a].sections[r].targets&&0!=w[a].sections[r].targets.length||(w[a].sections[r].targets=[],w[a].sections[r].targets.push({name:"self",props:{}})),u=1;u<p.sections[o].targets.length;u++){for(L=!1,d=1;d<w[a].sections[r].targets.length;d++)p.sections[o].targets[u].name==w[a].sections[r].targets[d].name&&(L=!0);if(!L){var E={name:p.sections[o].targets[u].name,props:{}};w[a].sections[r].targets.splice(1,0,E)}}}}w.push(p);for(var a=0;a<w.length;a++)Rexbuilder_Util.updatePageCustomizationsData(w[a]),Rexbuilder_Util.updatePageCustomizationsDomOrder(w[a]),R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,sections:JSON.stringify(w[a].sections),layout_name:w[a].name},success:function(e){e.success},error:function(e){}}));R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,clean_post:U,rex_shortcode:k},success:function(e){e.success&&(Rexbuilder_Util.$rexContainer.removeClass("backend-edited"),Rexbuilder_Util.backendEdited=!1)},error:function(e){}}));var C=Rexbuilder_Util.getSectionNamesUsed();Rexbuilder_Util.saveSectionNamesUsed(),R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_sections_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,ids_used:JSON.stringify(C)},success:function(e){e.success},error:function(e){}}))}else R.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:n,sections:JSON.stringify(p.sections),layout_name:p.name},success:function(e){e.success},error:function(e){}}));e.when.apply(e,R).then(function(){Rexbuilder_Util_Editor.savingPage=!1;var e={eventName:"rexlive:savePageEnded",buttonData:_.buttonData,dataSaved:"page"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}).fail(function(){}).always(function(){})}),Rexbuilder_Util.$document.on("rexlive:saveModel",function(t){if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")){var i=[];Rexbuilder_Util_Editor.savingModel=!0;var a,r=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0).parents(".rexpansive_section"),l=Rexbuilder_Util.activeLayout,u="undefined"!=typeof r.attr("data-rexlive-model-id")?r.attr("data-rexlive-model-id"):"",_="undefined"!=typeof r.attr("data-rexlive-model-name")?r.attr("data-rexlive-model-name"):"",n="undefined"!=typeof r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",c=Rexbuilder_Util.getModelsCustomizations(),g={};for(a=0;a<c.length;a++){var b=c[a];b.id==u&&(g=b)}jQuery.isEmptyObject(g)&&(g.id=u,g.name=_,g.customizations=[]);var v=o(g,r,l);Rexbuilder_Util.updateModelsCustomizationsData(v);var m=[];for(a=0;a<v.customizations.length;a++)m.push(v.customizations[a].name);var f={modelID:u,names:m};if(Rexbuilder_Util.updateDivModelCustomizationsNames(f),i.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_model_layouts_names",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,names:m},success:function(e){e.success},error:function(e){}})),"default"!=l){for(a=0;a<v.customizations.length;a++)if(v.customizations[a].name==l){Rexbuilder_Util.updateModelsLive(u,d(r,"default"),n),i.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:v.id,model_name:v.customizations.name,targets:JSON.stringify(v.customizations[a].targets),layout_name:v.customizations[a].name},success:function(e){e.success},error:function(e){}}));break}}else{var x=s(r,"shortcode"),p={model_id:u,post_title:_,post_content:x},y={modelName:_,model_number:r.attr("data-rexlive-model-number"),html:"",modelID:u};for(i.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_edit_model_shortcode_builder",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:p},success:function(e){e.success&&(y.html=e.data.model_html,Rexbuilder_Section.updateModelsHtmlLive(y))},error:function(e){},complete:function(e){}})),a=0;a<v.customizations.length;a++)i.push(e.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:v.id,model_name:v.customizations.name,targets:JSON.stringify(v.customizations[a].targets),layout_name:v.customizations[a].name},success:function(e){e.success},error:function(e){}}))}e.when.apply(e,i).then(function(){var e=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0);Rexbuilder_Dom_Util.updateLockEditModel(e,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model"),Rexbuilder_Util_Editor.savingModel=!1;var i={eventName:"rexlive:savePageEnded",dataSaved:"model",buttonData:"undefined"!=typeof t.settings?t.settings.data_to_send.buttonData:""};Rexbuilder_Util_Editor.sendParentIframeMessage(i)}).fail(function(){}).always(function(){})}})}var i=function(e){var t={name:e,sections:[]};return t.sections=a(e),t},a=function(t){var i=[];return Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(a,o){var r=e(o),l=r.attr("data-rexlive-section-id"),u={section_rex_id:l,targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!1};u.section_hide=r.hasClass("rex-hide-section"),r.hasClass("rex-model-section")?(u.section_is_model=!0,u.section_model_id=r.attr("data-rexlive-model-id"),u.section_model_number=r.attr("data-rexlive-model-number")):u.targets=d(r,t),i.push(u)}),i},o=function(e,t,i,a){var o,r,l,u,_=[];for(o=0;o<e.customizations.length;o++)if(e.customizations[o].name!=i){var n=e.customizations[o];_.push(n)}a="undefined"!=typeof a?a:d(t,i);var s={name:i,targets:a};if("default"==i)for(o=0;o<_.length;o++)for("undefined"!=typeof _[o].targets&&null!=_[o].targets&&0!=_[o].targets.length||(_[o].targets=[],_[o].targets.push({name:"self",props:{}})),r=1;r<s.targets.length;r++){for(u=!1,l=1;l<_[o].targets.length;l++)if(s.targets[r].name==_[o].targets[l].name){u=!0;break}if(!u){var c={name:s.targets[r].name,props:{}};_[o].targets.splice(1,0,c)}}return _.push(s),e.customizations=_,e},r=function(e){return"true"==e.getAttribute("data-rexlive-section-edited")},l=function(e){return"true"==e.getAttribute("data-rexlive-layout-changed")},u=function(e){return"true"==e.getAttribute("data-rexlive-element-edited")},d=function(t,i){var a=t[0],o=[],d={name:"self",props:{}},c=a.querySelector(".grid-stack-row"),g=e(c),b=l(c);("default"==i||r(a))&&(d.props=s(t,"customLayout",null)),"true"==a.getAttribute("data-rex-collapse-grid")&&(d.props.collapse_grid=!0,!b&&Rexbuilder_Util.isMobile()?(d.props.pickDefaultSizeCollapse=!0,b=!1):d.props.pickDefaultSizeCollapse=!1),b?(d.props.gridEdited=!0,d.props.full_height=c.getAttribute("data-full-height"),d.props.layout=c.getAttribute("data-layout")):d.props.gridEdited=!1,o.push(d);var v,m=g.data().plugin_perfectGridGalleryEditor,f=m.getElementsTopBottom(),x=f.length;for(m.updateAllElementsProperties(),v=0;v<x;v++)if(!Rexbuilder_Util.hasClass(f[v],"removing_block")){var p=f[v].getAttribute("data-rexbuilder-block-id"),y={name:p,props:{}},h=u(f[v]);("default"==i||b||h)&&(y.props=n(f[v],"customLayout",c)),"default"!=i&&b&&!h&&_(y.props),o.push(y)}return o},_=function(e){for(var t in e)switch(t){case"rex_id":case"size_x":case"size_y":case"row":case"col":case"gs_start_h":case"gs_width":case"gs_height":case"gs_y":case"gs_x":case"block_dimensions_live_edited":case"element_real_fluid":case"hide":case"photoswipe":break;case"element_edited":e.element_edited=!1;break;default:e[t]=void 0}},n=function(t,i,a){a="undefined"!=typeof a?a:t.parentNode();var o,r="",l="",u="text",d=1,_=1,n="",s="",c=1,g=1,b=1,v="",m="",f="#ffffff",x="#ffffff",p="",y=0,h=0,A="",R="",U="full",k="",L=!0,w="",z="",j="",S="",N="",E="",C="",T="",I="",P="",D=!1,O="",B="",q="",M="",$="",J="fadeInUpBig",H="0",G="false",F="",Q="",W="",K=1,V=1,X=!1,Y=0,Z="",ee=t.querySelector(".grid-item-content"),te=t.querySelector(".rexbuilder-block-data"),ie=t.querySelector(".rex-video-wrap");r=t.id,l=t.getAttribute("data-rexbuilder-block-id"),u=""==te.getAttribute("data-type")?"text":te.getAttribute("data-type"),d=t.getAttribute("data-width"),_=t.getAttribute("data-height"),n=t.getAttribute("data-row"),s=t.getAttribute("data-col"),c=t.getAttribute("data-gs-height"),g=t.getAttribute("data-gs-width"),b=t.getAttribute("data-gs-height"),v=t.getAttribute("data-gs-y"),m=t.getAttribute("data-gs-x"),f=null==te.getAttribute("data-color_bg_block")?"":te.getAttribute("data-color_bg_block"),x=null==te.getAttribute("data-color_bg_elem_active")||te.getAttribute("data-color_bg_elem_active"),A=null===te.getAttribute("data-id_image_bg_block")?"":te.getAttribute("data-id_image_bg_block"),p=null===te.getAttribute("data-image_bg_block")?"":te.getAttribute("data-image_bg_block"),y=isNaN(parseInt(ee.getAttribute("data-background_image_width")))?"":parseInt(ee.getAttribute("data-background_image_width")),h=isNaN(parseInt(ee.getAttribute("data-background_image_height")))?"":parseInt(ee.getAttribute("data-background_image_height"));var ae="fixed"==a.getAttribute("data-layout")?"full":"natural";R=null==te.getAttribute("data-type_bg_block")?ae:te.getAttribute("data-type_bg_block"),U=null==te.getAttribute("data-image_size")?"full":te.getAttribute("data-image_size"),k=null===te.getAttribute("data-photoswipe")?"":te.getAttribute("data-photoswipe"),L=null==te.getAttribute("data-image_bg_elem_active")||te.getAttribute("data-image_bg_elem_active"),z=null===te.getAttribute("data-video_bg_id")?"":te.getAttribute("data-video_bg_id"),ie&&(j=""==te.getAttribute("data-video_bg_width")||null===te.getAttribute("data-video_bg_width")?ie.getAttribute("data-rex-video-width"):te.getAttribute("data-video_bg_width"),S=""==te.getAttribute("data-video_bg_height")||null===te.getAttribute("data-video_bg_height")?ie.getAttribute("data-rex-video-height"):te.getAttribute("data-video_bg_height")),w=null===te.getAttribute("data-video_mp4_url")?"":te.getAttribute("data-video_mp4_url"),N=null===te.getAttribute("data-video_bg_url")?"":te.getAttribute("data-video_bg_url"),E=null===te.getAttribute("data-video_bg_url_vimeo")?"":te.getAttribute("data-video_bg_url_vimeo"),H=null!==te.getAttribute("data-video_has_audio")&&te.getAttribute("data-video_has_audio"),C=null===te.getAttribute("data-linkurl")?"":te.getAttribute("data-linkurl"),T=null===te.getAttribute("data-block_custom_class")?"":te.getAttribute("data-block_custom_class"),I=null===te.getAttribute("data-block_padding")?"":te.getAttribute("data-block_padding"),P=null==te.getAttribute("data-overlay_block_color")?"":te.getAttribute("data-overlay_block_color"),D=null!=te.getAttribute("data-overlay_block_color_active")&&te.getAttribute("data-overlay_block_color_active"),O=null===te.getAttribute("data-zak_background")?"":te.getAttribute("data-zak_background"),B=null===te.getAttribute("data-zak_side")?"":te.getAttribute("data-zak_side"),q=null===te.getAttribute("data-zak_title")?"":te.getAttribute("data-zak_title"),M=null===te.getAttribute("data-zak_icon")?"":te.getAttribute("data-zak_icon"),$=null===te.getAttribute("data-zak_foreground")?"":te.getAttribute("data-zak_foreground"),J=null===te.getAttribute("data-block_animation")?"fadeInUpBig":te.getAttribute("data-block_animation"),G=null===te.getAttribute("data-block_has_scrollbar")?"false":te.getAttribute("data-block_has_scrollbar"),F="masonry"==a.getAttribute("data-layout")?null===te.getAttribute("data-block_dimensions_live_edited")?"":te.getAttribute("data-block_dimensions_live_edited"):"",Q=null==te.getAttribute("data-block_flex_position")?"":te.getAttribute("data-block_flex_position"),W=null==te.getAttribute("data-block_flex_img_position")?"":te.getAttribute("data-block_flex_img_position"),V=(t.offsetHeight/t.offsetWidth).toFixed(3),K=Rexbuilder_Util.hasClass(t,"block-has-slider")?V:"",te.setAttribute("data-slider_ratio",K),X=Rexbuilder_Util.hasClass(t,"rex-hide-element");var oe=parseInt(te.getAttribute("data-element_real_fluid"));if(Y=isNaN(oe)?0:oe,"shortcode"==i){if(o=ee.querySelector(".text-wrap"),Rexbuilder_Util.hasClass(t,"block-has-slider")){var re=o.querySelector('.rex-slider-wrap[data-rex-slider-active="true"]');if(re)var le=parseInt(re.getAttribute("data-slider-id"));Z='[RexSlider slider_id="'+le+'"]'}else{var ue=o.cloneNode(!0),de=ue.querySelector(".medium-insert-buttons"),_e=ue.querySelector(".text-editor-span-fix"),ne=ue.querySelector(".ui-sortable"),se=ue.querySelector(".ui-sortable-handle"),ce=ue.querySelector("figure");de&&de.parentNode.removeChild(de),_e&&_e.parentNode.removeChild(_e),ne&&Rexbuilder_Util.removeClass(ne,"ui-sortable"),se&&Rexbuilder_Util.removeClass(ne,"ui-sortable-handle"),ce&&(ce.removeAttribute("style"),ce.removeAttribute("class")),""==ue.textContent.trim()?ue.getElementsByTagName("iframe").length>0||ue.getElementsByTagName("img").length>0||ue.getElementsByTagName("i").length>0||ue.getElementsByTagName("form").length>0||ue.getElementsByTagName("hr").length>0?(ue.getElementsByTagName("form").length>0&&[].slice.call(ue.getElementsByClassName("rex-element-container")).forEach(function(t){e(t).empty();var i=e(t).siblings(".string-shortcode").attr("shortcode");e(t).append(i)}),Z=ue.innerHTML.trim()):Z="":(Array.prototype.slice.call(ue.getElementsByClassName("rex-element-container")).forEach(function(t){e(t).empty();var i=e(t).siblings(".string-shortcode").attr("shortcode");e(t).append(i)}),Z=ue.innerHTML.trim(),[].slice.call(ue.getElementsByClassName("rex-button-data")).forEach(function(e){e.removeAttribute("data-synchronize")}))}var ge='[RexpansiveBlock id="'+r+'" rexbuilder_block_id="'+l+'" type="'+u+'" size_x="'+d+'" size_y="'+_+'" row="'+n+'" col="'+s+'" gs_start_h="'+c+'" gs_width="'+g+'" gs_height="'+b+'" gs_y="'+v+'" gs_x="'+m+'" element_real_fluid="'+Y+'" color_bg_block="'+f+'" color_bg_block_active="'+x+'" image_bg_block="'+p+'" id_image_bg_block="'+A+'" image_bg_elem_active="'+L+'" video_bg_id="'+z+'" video_bg_width="'+j+'" video_bg_height="'+S+'" video_mp4_url="'+w+'" video_bg_url="'+N+'" video_bg_url_vimeo="'+E+'" type_bg_block="'+R+'" image_size="'+U+'" photoswipe="'+k+'" linkurl="'+C+'" block_custom_class="'+T+'" block_padding="'+I+'" overlay_block_color="'+P+'" overlay_block_color_active="'+D+'"'+(""!==O?' zak_background="'+O+'"':"")+(""!==B?' zak_side="'+B+'"':"")+(""!==q?' zak_title="'+q+'"':"")+(""!==M?' zak_icon="'+M+'"':"")+(""!==$?' zak_foreground="'+$+'"':"")+' block_animation="'+J+'" video_has_audio="'+("true"==H.toString()?"1":"0")+'" block_has_scrollbar="'+G+'" block_flex_position="'+Q+'" block_flex_img_position="'+W+'"]'+Z+"[/RexpansiveBlock]";return ge}if("customLayout"==i){var be=e(a).parents(".rexpansive_section").attr("data-rexlive-section-id"),ve=Rexbuilder_Util.editedDataInfo.getBlockData(be,l),me={};return me.hide=X,"default"==Rexbuilder_Util.activeLayout?me.element_edited=!1:me.element_edited=!0,me.rexbuilder_block_id=l,me.type=u,me.size_x=d,me.size_y=_,me.row=n,me.col=s,me.gs_start_h=c,me.gs_width=g,me.gs_height=b,me.gs_y=v,me.gs_x=m,me.element_real_fluid=Y,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.color_bg_block)&&(me.color_bg_block=f),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.color_bg_block_active)&&(me.color_bg_block_active=x),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.image_bg_url)&&(me.image_bg_url=p),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.image_width)&&(me.image_width=y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.image_height)&&(me.image_height=h),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.id_image_bg)&&(me.id_image_bg=A),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.image_size)&&(me.image_size=U),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.image_bg_elem_active)&&(me.image_bg_elem_active=L),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.type_bg_image)&&(me.type_bg_image=R),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_bg_id)&&(me.video_bg_id=z),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_bg_width)&&(me.video_bg_width=j),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_bg_height)&&(me.video_bg_height=S),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_mp4_url)&&(me.video_mp4_url=w),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_bg_url_youtube)&&(me.video_bg_url_youtube=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.video_bg_url_vimeo)&&(me.video_bg_url_vimeo=E),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.photoswipe)&&(me.photoswipe=k),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.block_custom_class)&&(me.block_custom_class=T),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.block_padding)&&(me.block_padding=I),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.overlay_block_color)&&(me.overlay_block_color=P),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.overlay_block_color_active)&&(me.overlay_block_color_active=D),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.linkurl)&&(me.linkurl=C),""!==O&&(me.zak_background=O),""!==B&&(me.zak_side=B),""!==q&&(me.zak_title=q),""!==M&&(me.zak_icon=M),""!==$&&(me.zak_foreground=$),me.block_animation=J,me.video_has_audio=H,me.block_has_scrollbar=G,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.block_flex_position)&&(me.block_flex_position=Q),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ve&&ve.block_flex_img_position)&&(me.block_flex_img_position=W),me.slider_dimension_ratio=K,me.block_ratio=V,me}},s=function(e,t,i){var a="",o="",r="perfect-grid",l="#ffffff",u="true",d="full",_="",s="",g=0,b=0,v="full",m="",f="",x="",p="",y="",h="",A="",R="",U="",k=20,L="fixed",w="",z="",j="",S="",N="",E="",C="",T="",I="",P="",D="",O="",B="",q="",M="",$=!1,J="",H="",G=1,F="",Q=e[0],W=e.find(".grid-stack-row"),K=W[0],V=Q.querySelector(".section-data"),X=Q.querySelector(".rex-video-wrap"),Y=W.data().plugin_perfectGridGalleryEditor;a=Q.getAttribute("data-rexlive-section-name"),o=null===V.getAttribute("data-section_nav_label")?"":V.getAttribute("data-section_nav_label"),r=null===V.getAttribute("data-type")?"perfect-grid":V.getAttribute("data-type"),l=null==V.getAttribute("data-color_bg_section")?"":V.getAttribute("data-color_bg_section"),u=null==V.getAttribute("data-color_bg_section_active")||V.getAttribute("data-color_bg_section_active"),_=null===V.getAttribute("data-margin")?"":V.getAttribute("data-margin"),s=null===V.getAttribute("data-image_bg_section")?"":V.getAttribute("data-image_bg_section"),g=null===Q.getAttribute("data-background_image_width")?"":isNaN(parseInt(Q.getAttribute("data-background_image_width")))?"":parseInt(Q.getAttribute("data-background_image_width")),b=null===Q.getAttribute("data-background_image_height")?"":isNaN(parseInt(Q.getAttribute("data-background_image_height")))?"":parseInt(Q.getAttribute("data-background_image_height")),v=null==V.getAttribute("data-image_size")?"full":V.getAttribute("data-image_size"),m=null===V.getAttribute("data-id_image_bg_section")?"":V.getAttribute("data-id_image_bg_section"),f=null==V.getAttribute("data-image_bg_section_active")||V.getAttribute("data-image_bg_section_active"),A=null===V.getAttribute("data-video_mp4_url")?"":V.getAttribute("data-video_mp4_url"),x=null===V.getAttribute("data-video_bg_url_section")?"":V.getAttribute("data-video_bg_url_section"),p=null===V.getAttribute("data-video_bg_id_section")?"":V.getAttribute("data-video_bg_id_section"),X&&(y=""==V.getAttribute("data-video_bg_width_section")||null===V.getAttribute("data-video_bg_width_section")?X.getAttribute("data-rex-video-width"):V.getAttribute("data-video_bg_width_section"),h=""==V.getAttribute("data-video_bg_height_section")||null===V.getAttribute("data-video_bg_height_section")?X.getAttribute("data-rex-video-height"):V.getAttribute("data-video_bg_height_section")),R=null===V.getAttribute("data-video_bg_url_vimeo_section")?"":V.getAttribute("data-video_bg_url_vimeo_section"),U=null===K.getAttribute("data-full-height")?"":K.getAttribute("data-full-height"),L=null===K.getAttribute("data-layout")?"":K.getAttribute("data-layout"),z=null===V.getAttribute("data-custom_classes")?"":V.getAttribute("data-custom_classes"),j=W.parent().css("max-width"),d="100%"===j||"none"==j?"full":"boxed";var Z=parseInt(K.getAttribute("data-separator")),ee=parseInt(K.getAttribute("data-row-separator-top")),te=parseInt(K.getAttribute("data-row-separator-right")),ie=parseInt(K.getAttribute("data-row-separator-bottom")),ae=parseInt(K.getAttribute("data-row-separator-left")),oe={gutter:isNaN(Z)?"":Z,top:isNaN(ee)?"":ee,right:isNaN(te)?"":te,bottom:isNaN(ie)?"":ie,left:isNaN(ae)?"":ae};k=oe.gutter,S=oe.top,E=oe.right,N=oe.bottom,C=oe.left;var re=getComputedStyle(Q),le=parseInt(re["margin-top"].replace("px","")),ue=parseInt(re["margin-right"].replace("px","")),de=parseInt(re["margin-bottom"].replace("px","")),_e=parseInt(re["margin-left"].replace("px","")),ne={top:isNaN(le)?"":le,right:isNaN(ue)?"":ue,bottom:isNaN(de)?"":de,left:isNaN(_e)?"":_e};if(T=ne.top,P=ne.right,I=ne.bottom,D=ne.left,O=null==V.getAttribute("data-row_active_photoswipe")?"0":V.getAttribute("data-row_active_photoswipe"),w=null===V.getAttribute("data-responsive_background")?"":V.getAttribute("data-responsive_background"),B=null==V.getAttribute("data-row_overlay_color")?"":V.getAttribute("data-row_overlay_color"),""==B&&(B=w),q=null!=V.getAttribute("data-row_overlay_active")&&V.getAttribute("data-row_overlay_active"),M="undefined"==typeof i||null===i?null==Q.getAttribute("data-rexlive-section-id")?"":Q.getAttribute("data-rexlive-section-id"):i,$=null!=Q.getAttribute("data-rex-collapse-grid")&&"true"==Q.getAttribute("data-rex-collapse-grid").toString(),J=null==Q.getAttribute("data-rexlive-model-id")?"":Q.getAttribute("data-rexlive-model-id"),H=null==Q.getAttribute("data-rexlive-model-name")?"":Q.getAttribute("data-rexlive-model-name"),G=Rexbuilder_Util.getGalleryInstance(e).properties.singleWidth,"shortcode"==t){F='[RexpansiveSection section_name="'+a+'" section_nav_label="'+o+'" type="'+r+'" color_bg_section="'+l+'" color_bg_section_active="'+u+'" dimension="'+d+'" image_bg_section_active="'+f+'" image_bg_section="'+s+'" id_image_bg_section="'+m+'" image_size="'+v+'" video_bg_url_section="'+x+'" video_bg_id_section="'+p+'" video_bg_width_section="'+y+'" video_bg_height_section="'+h+'" video_bg_url_vimeo_section="'+R+'" full_height="'+U+'" block_distance="'+k+'" layout="'+L+'" responsive_background="'+w+'" custom_classes="'+z+'" section_width="'+j+'" row_separator_top="'+S+'" row_separator_bottom="'+N+'" row_separator_right="'+E+'" row_separator_left="'+C+'" margin="'+_+'" row_margin_top="'+T+'" row_margin_bottom="'+I+'" row_margin_right="'+P+'" row_margin_left="'+D+'" row_active_photoswipe="'+O+'" row_overlay_color="'+B+'" row_overlay_active="'+q+'" rexlive_section_id="'+M+'" rexlive_model_id="'+J+'" rexlive_model_name="'+H+'" row_edited_live="true"]',Y.updateAllElementsProperties();var se=Y.getElementsTopBottom();return se.forEach(function(e){Rexbuilder_Util.hasClass(e,"removing_block")||(F+=n(e,"shortcode",K))}),F+=c(Y),F+="[/RexpansiveSection]"}if("customLayout"==t){var ce=Rexbuilder_Util.editedDataInfo.getSectionData(M),ge={};return ge.collapse_grid=$,ge.grid_cell_width=G,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.section_name)&&(ge.section_name=a),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.section_nav_label)&&(ge.section_nav_label=o),ge.type=r,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.color_bg_section)&&(ge.color_bg_section=l),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.color_bg_section_active)&&(ge.color_bg_section_active=u),ge.dimension=d,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.margin)&&(ge.margin=_),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.image_bg_section_active)&&(ge.image_bg_section_active=f),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.image_bg_section)&&(ge.image_bg_section=s),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.image_width)&&(ge.image_width=g),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.image_height)&&(ge.image_height=b),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.id_image_bg_section)&&(ge.id_image_bg_section=m),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.image_size)&&(ge.image_size=v),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_bg_id)&&(ge.video_bg_id=p),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_bg_width_section)&&(ge.video_bg_width_section=y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_bg_height_section)&&(ge.video_bg_height_section=h),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_mp4_url)&&(ge.video_mp4_url=A),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_bg_url_section)&&(ge.video_bg_url_section=x),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.video_bg_url_vimeo_section)&&(ge.video_bg_url_vimeo_section=R),ge.full_height=U,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.block_distance)&&(ge.block_distance=k),ge.layout=L,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.custom_classes)&&(ge.custom_classes=z),ge.section_width=j,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_separator_top)&&(ge.row_separator_top=S),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_separator_bottom)&&(ge.row_separator_bottom=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_separator_right)&&(ge.row_separator_right=E),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_separator_left)&&(ge.row_separator_left=C),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_margin_top)&&(ge.row_margin_top=T),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_margin_bottom)&&(ge.row_margin_bottom=I),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_margin_right)&&(ge.row_margin_right=P),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_margin_left)&&(ge.row_margin_left=D),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_overlay_color)&&(ge.row_overlay_color=B),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&ce&&ce.row_overlay_active)&&(ge.row_overlay_active=q),ge.rexlive_model_id=J,ge.rexlive_model_name=H,ge.section_edited=!0,ge}},c=function(e){var t,i="",a=e.getLastID(),o=e.getRowNumber(),r=e.fillEmptySpaces();for(t=0;t<r.length;t++)a+=1,i+=g(o,a,r[t]);return i},g=function(e,t,i){var a='[RexpansiveBlock id="block_'+e+"_"+t+'" type="empty" col="'+(i.x+1)+'" row="'+(i.y+1)+'" size_x="'+i.w+'" size_y="'+i.h+'" color_bg_block="" image_bg_block="" id_image_bg_block="" type_bg_block="" photoswipe="" linkurl="" empty_block_backend_fix="'+!0+'"][/RexpansiveBlock]';
return a},b=function(e){var t,i,a,o,r=[];for(t=0,a=e.length;t<a;t++)if("true"==e[t].section_is_model.toString()){var l=e[t].section_model_id;for(i=0,o=r.length;i<o;i++)if(r[i].id==l){r[i].number=r[i].number+1;break}if(i==o){var u={id:l,number:1};r.push(u)}}return r},v=function(){var e,t,i,a,o,r,l,u,d,_,n,s,c,g=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),b=document.getElementById("rexbuilder-layout-data"),v=[{condition:"rex-effect",active:!1},{condition:"rex-num-spin",active:!1},{condition:"rex-slideshow",active:!1},{condition:"sticky-section",active:!1},{condition:"reveal-opacity-on-scroll",active:!1},{condition:"distance-accordion-toggle",active:!1},{condition:"rex-indicator__",active:!1},{condition:"popup-content-button",active:!1},{condition:"split-scrollable",active:!1},{condition:"particle-swarm",active:!1}];return g.forEach(function(g){if(l=g.getAttribute("data-rexlive-section-id"),l&&(u=[].slice.call(b.querySelectorAll('[data-section-rex-id="'+l+'"]')),u.forEach(function(e){if(""!==e.innerText)for(d=JSON.parse(e.innerText),_=0,n=d.length;_<n;_++)for(s=0,c=v.length;s<c;s++)"undefined"!=typeof d[_].props.custom_classes&&-1!==d[_].props.custom_classes.indexOf(v[s].condition)&&(v[s].active=!0),"undefined"!=typeof d[_].props.block_custom_class&&-1!==d[_].props.block_custom_class.indexOf(v[s].condition)&&(v[s].active=!0)})),o=g.querySelector(".section-data"),o&&(r=o.getAttribute("data-custom_classes")))for(s=0,c=v.length;s<c;s++)-1!==r.indexOf(v[s].condition)&&(v[s].active=!0);e=[].slice.call(g.querySelectorAll(".grid-stack-item:not(.removing_block)")),e.forEach(function(e){if(i=e.querySelector(".rexbuilder-block-data"),i&&(a=i.getAttribute("data-block_custom_class")))for(s=0,c=v.length;s<c;s++)-1!==a.indexOf(v[s].condition)&&(v[s].active=!0);if(t=e.querySelector(".text-wrap"))for(s=0,c=v.length;s<c;s++)-1!==t.innerHTML.indexOf(v[s].condition)&&(v[s].active=!0)})}),v};return{init:t,createSectionProperties:s,createTargets:d,createBlockProperties:n,createCustomization:i,updateModel:o,_checkSpecialEffects:v}}(jQuery);
/*! jQuery UI - v1.12.1 - 2017-10-08
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){t.datepicker._isDisabledDatepicker(p.inline?p.dpDiv.parent()[0]:p.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}function r(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.ui=t.ui||{},t.ui.version="1.12.1";var h=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},h=e.split(".")[0];e=e.split(".")[1];var l=h+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[h]=t[h]||{},n=t[h][e],o=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?void(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(r[e]=s)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:h,widgetName:e,widgetFullName:l}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o="string"==typeof n,a=l.call(arguments,1),r=this;return o?this.length||"instance"!==n?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(r=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+n+"'")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=t(e.add?t.unique(a.get().concat(e.element.get())):a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+o.eventNamespace,c=h[2];c?n.on(l,c,r):i.on(l,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,h=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||"flip").split(" "),k={};return _=s(v),v[0].preventDefault&&(n.at="left top"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=l.exec(i[0]),e=l.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?m.left+=p:"center"===n.at[0]&&(m.left+=p/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,h=t(this),l=h.outerWidth(),c=h.outerHeight(),d=i(this,"marginLeft"),_=i(this,"marginTop"),x=l+d+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=t.extend({},m),I=e(k.my,h.outerWidth(),h.outerHeight());"right"===n.my[0]?D.left-=l:"center"===n.my[0]&&(D.left-=l/2),"bottom"===n.my[1]?D.top-=c:"center"===n.my[1]&&(D.top-=c/2),D.left+=I[0],D.top+=I[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:l,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+I[0],u[1]+I[1]],my:n.my,at:n.at,within:b,elem:h})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-l,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:h,left:D.left,top:D.top,width:l,height:c},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};l>p&&p>a(e+i)&&(u.horizontal="center"),c>f&&f>a(s+r)&&(u.vertical="middle"),u.important=o(a(e),a(i))>o(a(s),a(r))?"horizontal":"vertical",n.using.call(this,t,u)}),h.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-r-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-r-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(i,s){var n,o,a,r,h,l=i.nodeName.toLowerCase();return"area"===l?(n=i.parentNode,o=n.name,!(!i.href||!o||"map"!==n.nodeName.toLowerCase())&&(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(r=!i.disabled,r&&(h=t(i).closest("fieldset")[0],h&&(r=!h.disabled))):r="a"===l?i.href||s:s,r&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data("ui-form-reset-instances");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data("ui-form-reset-instances")||[];t.length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===t.fn.jquery.substring(0,3)&&(t.each(["Width","Height"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+"px")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),t.fn.labels=function(){var e,i,s,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),s=this.attr("id"),s&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),i="label[for='"+t.ui.escapeSelector(s)+"']",n=n.add(o.find(i).addBack(i))),this.pushStack(n))},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!s||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var c=!1;t(document).on("mouseup",function(){c=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),c=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,c=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),
i=t(n.containment),s=i[0],void(s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),h=t.pageX,l=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(h=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,h,l,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)h=s.snapElements[d].left-s.margins.left,l=h+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,h-g>_||m>l+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(h-_),r=g>=Math.abs(l-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(h-m),r=g>=Math.abs(l-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&u(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(n=!0,!1):void 0}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var u=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,h=a+e.helperProportions.height,l=i.offset.left,c=i.offset.top,u=l+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=l&&u>=r&&a>=c&&d>=h;case"intersect":return o+e.helperProportions.width/2>l&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>h-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,l,i.proportions().width);case"touch":return(a>=c&&d>=a||h>=c&&d>=h||c>a&&h>d)&&(o>=l&&u>=o||r>=l&&u>=r||l>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&u(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=u(e,this,this.options.tolerance,i),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===n}),o.length&&(s=t(o[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0||(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,h=this._change[o];return this._updatePrevProperties(),!!h&&(i=h.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,h=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&c&&(t.top=h-e.minHeight),n&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,h=t(this).resizable("instance"),l=h.options,c=h.element,u=l.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(h.containerElement=t(d),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=h._num(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,o=h.containerSize.width,a=h._hasScroll(d,"left")?d.scrollWidth:o,r=h._hasScroll(d)?d.scrollHeight:n,h.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?h.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-h.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-h.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;
e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,c=h[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=h,_&&(p+=l),v&&(f+=c),g&&(p-=l),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-l)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-l>0?(i.size.width=p,i.position.left=a.left-u):(p=l-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),s=i.offset(),n={left:s.left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:n.left,top:n.top,right:n.left+i.outerWidth(),bottom:n.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,"ui-selected"),s.selected=!1,i._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),i._removeClass(n.$element,s?"ui-unselecting":"ui-selected")._addClass(n.$element,s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,"touch"===n.tolerance?l=!(c.left>r||o>c.right||c.top>h||a>c.bottom):"fit"===n.tolerance&&(l=c.left>o&&r>c.right&&c.top>a&&h>c.bottom),l?(i.selected&&(s._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,"ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,s._addClass(i.$element,"ui-selected"),i.selected=!0):(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,"ui-selected"),i.selected=!1,s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),!!s&&(!(this.options.handle&&!i&&(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),!n))&&(this.currentItem=s,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],n))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return!!o&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,h,l,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[a],l=!1,e[u]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(e[u]-h)&&(n=Math.abs(e[u]-h),o=this.items[s],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",
height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,s=this.options.icons;s&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+s.header),e.prependTo(this.headers),i=this.active.children(".ui-accordion-header-icon"),this._removeClass(i,s.header)._addClass(i,null,s.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),void("icons"===t&&(this._destroyIcons(),e&&this._createIcons())))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),t(o).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var e=t(this),i=e.uniqueId().attr("id"),s=e.next(),n=s.uniqueId().attr("id");e.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(e=n.height(),this.element.siblings(":visible").each(function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,s,n=this.options,o=this.active,a=t(e.currentTarget),r=a[0]===o[0],h=r&&n.collapsible,l=h?t():a.next(),c=o.next(),u={oldHeader:o,oldPanel:c,newHeader:h?t():a,newPanel:l};e.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",e,u)===!1||(n.active=!h&&this.headers.index(a),this.active=r?t():a,this._toggle(u),this._removeClass(o,"ui-accordion-header-active","ui-state-active"),n.icons&&(i=o.children(".ui-accordion-header-icon"),this._removeClass(i,null,n.icons.activeHeader)._addClass(i,null,n.icons.header)),r||(this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active"),n.icons&&(s=a.children(".ui-accordion-header-icon"),this._removeClass(s,null,n.icons.header)._addClass(s,null,n.icons.activeHeader)),this._addClass(a.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var s,n,o,a=this,r=0,h=t.css("box-sizing"),l=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=l&&c.down||c,d=function(){a._toggleComplete(i)};return"number"==typeof u&&(o=u),"string"==typeof u&&(n=u),n=n||u.easing||c.easing,o=o||u.duration||c.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:n,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:n,complete:d,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===h&&(r+=i.now):"content"!==a.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-r),r=0)}})):e.animate(this.hideProps,o,n,d):t.animate(this.showProps,o,n,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget);i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",o=!1,n=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s,n,o,a=this,r=this.options.icons.submenu,h=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),s=h.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),s=t("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(s,"ui-menu","ui-widget ui-widget-content ui-front"),e=h.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,"ui-menu-divider","ui-widget-content")}),n=i.not(".ui-menu-item, .ui-menu-divider"),o=n.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,s,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,s,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,void(i=!0);e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault());if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,void(s&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion))))},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var d=/ui-corner-([a-z]){2,6}/g;t.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(s,n){var o,a={};return n?"controlgroupLabel"===s?(o=e.element.find(n),o.each(function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),e._addClass(o,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(o.get()))):void(t.fn[s]&&(a=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(n).each(function(){var n=t(this),o=n[s]("instance"),r=t.widget.extend({},a);if("button"!==s||!n.parent(".ui-spinner").length){o||(o=n[s]()[s]("instance")),o&&(r.classes=e._resolveClassesValues(r.classes,o)),n[s](r);var h=n[s]("widget");t.data(h[0],"ui-controlgroup-data",o?o:n[s]("instance")),i.push(h[0])}}))):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this),s=i.data("ui-controlgroup-data");s&&s[e]&&s[e]()})},_updateCornerClass:function(t,e){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",s=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,i),this._addClass(t,null,s)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,"ui-spinner");return e.classes["ui-spinner-up"]="",e.classes["ui-spinner-down"]="",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:!!e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,function(n){var o=i.options.classes[n]||"";o=t.trim(o.replace(d,"")),s[n]=(o+" "+e[n]).replace(/\s+/g," ")}),s},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(":visible")),e.length&&(t.each(["first","last"],function(t,s){var n=e[s]().data("ui-controlgroup-data");if(n&&i["_"+n.widgetName+"Options"]){var o=i["_"+n.widgetName+"Options"](1===e.length?"only":s);o.classes=i._resolveClassesValues(o.classes,n),n.element[n.widgetName](o)}else i._updateCornerClass(e[s](),s)}),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i,s=this,n=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){s.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(n.disabled=e),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,i=this.element[0].name,s="input[name='"+t.ui.escapeSelector(i)+"']";return i?(e=this.form.length?t(this.form[0].elements).filter(s):t(s).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),
"radio"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,n=s?this.options.iconPosition:i,o="top"===n||"bottom"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(n),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),t.fn.button=function(e){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(t.ui.checkboxradio||t.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.12.1"}});var p;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.on("focus",this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var r,h,l,c,u,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,l/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),p===n&&(p=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,r,h,l=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):l?"all"===i?t.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),void(l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),a(l.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,h,l,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),h={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),h=t.datepicker._checkOffset(s,h,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),s.inline||(l=t.datepicker._get(s,"showAnim"),c=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?s.dpDiv.show(l,t.datepicker._get(s,"showOptions"),c):s.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,p=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,n):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,o,a,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,o=RegExp("^\\d{"+n+","+s+"}"),a=i.substring(h).match(o);if(!a)throw"Missing number at position "+h;return h+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],h+=s.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+h},x=function(){if(i.charAt(h)!==e.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?x():b=!1;else switch(e.charAt(n)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":r=new Date(w("@")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(i.length>h&&(a=i.substr(h),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;o=this._getDaysInMonth(g,m-1),!(o>=_);)m++,_-=o;if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=""+e;if(h(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||h("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=h("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":h("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,I,T,P,M,S,H,z,O,A,N,W,E,F,L,R=new Date,B=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),$=this._get(t,"stepMonths"),X=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)Z--,0>Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-$,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z+$,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:B,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,
h=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(Y?"":h)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),I=" ui-corner-all",T="",X){if(T+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",I=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:T+=" ui-datepicker-group-last",I=" ui-corner-"+(Y?"left":"right");break;default:T+=" ui-datepicker-group-middle",I=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===k?Y?o:s:"")+(/all|right/.test(I)&&0===k?Y?s:o:"")+this._generateMonthYearHeader(t,Z,tt,Q,J,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",P=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,P+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+d[M]+"'>"+p[M]+"</span></th>";for(T+=P+"</tr></thead><tbody>",S=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),H=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,z=Math.ceil((H+S)/7),O=X&&this.maxRows>z?this.maxRows:z,this.maxRows=O,A=this._daylightSavingAdjust(new Date(tt,Z,1-H)),N=0;O>N;N++){for(T+="<tr>",W=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(A)+"</td>":"",w=0;7>w;w++)E=m?m.apply(t.input?t.input[0]:null,[A]):[!0,""],F=A.getMonth()!==Z,L=F&&!v||!E[0]||Q&&Q>A||J&&A>J,W+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(A.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===A.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+E[1]+(A.getTime()===G.getTime()?" "+this._currentClass:"")+(A.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(F&&!_||!E[2]?"":" title='"+E[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===B.getTime()?" ui-state-highlight":"")+(A.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);T+=W+"</tr>"}Z++,Z>11&&(Z=0,tt++),T+="</tbody></table>"+(X?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=T}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,h=this._get(t,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker,t.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).trigger("focus")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger("focus")}),e.preventDefault()):(this._delay(function(){s.trigger("focus")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,o={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(o).appendTo(e.uiButtonSet).on("click",function(){n.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){i._addClass(t(this),"ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(r>=0?"+":"")+r,of:i.window},i._removeClass(t(this),"ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){i._addClass(t(this),"ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),h=a.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(h>=0?"+":"")+h,of:i.window},i._removeClass(t(this),"ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,i){var s,n,o=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&(s=o.is(":data(ui-draggable)"),s&&!i&&o.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!i&&o.resizable("destroy"),n&&"string"==typeof i&&o.resizable("option","handles",i),n||i===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectmenu",[t.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,s=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),e=t("<span>").appendTo(this.button),this._addClass(e,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(s).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data("ui-selectmenu-item"),t)},focus:function(t,i){var s=i.item.data("ui-selectmenu-item");null!=e.focusIndex&&s.index!==e.focusIndex&&(e._trigger("focus",t,{item:s}),e.isOpen||e._select(s,t)),e.focusIndex=s.index,e.button.attr("aria-activedescendant",e.menuItems.eq(s.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find("option");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t("<span>");return this._setText(i,e.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(e,i){var s=this,n="";t.each(i,function(i,o){var a;o.optgroup!==n&&(a=t("<li>",{text:o.optgroup}),s._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),a.appendTo(e),n=o.optgroup),s._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,i){var s=t("<li>"),n=t("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(s,null,"ui-state-disabled"),this._setText(n,i.label),s.append(n).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),n+=":not(.ui-state-disabled)"),s="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](n).eq(-1):i[t+"All"](n).eq(0),s.length&&this.menuInstance.focus(e,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){if("icons"===t){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(e){var i=this,s=[];e.each(function(e,n){s.push(i._parseOption(t(n),e))}),this.items=s},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null
},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===e.range||"max"===e.range)&&this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,"ui-state-active"),o.trigger("focus"),h=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==o&&(s=this._trigger("slide",t,this._uiHash(e,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.round((t-e)/i)*i;t=s+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=!this._animateOff&&r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c["horizontal"===h.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[l?"animate":"css"](c,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-i+"%"},r.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-i+"%"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);null!=n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i,s,n;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i))):(("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(s=this.buttons.first().find(".ui-icon"),this._removeClass(s,null,this.options.icons.up),this._addClass(s,null,e.up),n=this.buttons.last().find(".ui-icon"),this._removeClass(n,null,this.options.icons.down),this._addClass(n,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:r(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:r(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:r(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:r(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:r(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void r(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,s;i=e.href.replace(t,""),s=location.href.replace(t,"");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return e.hash.length>1&&i===s}}(),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===e&&(s&&this.tabs.each(function(i,n){return t(n).attr("aria-controls")===s?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===e||-1===e)&&(e=!!this.tabs.length&&0)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=!i&&0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:n=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s!==this.options.active&&s);default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each(function(i,s){var n,o,a,r=t(s).uniqueId().attr("id"),h=t(s).closest("li"),l=h.attr("aria-controls");e._isLocal(s)?(n=s.hash,a=n.substring(1),o=e.element.find(e._sanitizeSelector(n))):(a=h.attr("aria-controls")||t({}).uniqueId()[0].id,n="#"+a,o=e.element.find(n),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":a,"aria-labelledby":r}),o.attr("aria-labelledby",r)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,s,n;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),n=0;s=this.tabs[n];n++)i=t(s),e===!0||-1!==t.inArray(n,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,e===!0)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest("li"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=!r&&this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger("activate",e,i)}function n(){o._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){o._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+t.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var s=this,n=this.tabs.eq(e),o=n.find(".ui-tabs-anchor"),a=this._getPanelForTab(n),r={tab:n,panel:a},h=function(t,e){"abort"===e&&s.panels.stop(!1,!0),s._removeClass(n,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){a.html(t),s._trigger("load",i,r),h(n,e)},1)}).fail(function(t,e){setTimeout(function(){h(t,e)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,o){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s.element[0],e.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);return e.is("[title]")?e.data("ui-tooltip-title",e.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))}),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s||s.nodeType||s.jquery?this._open(e,t,s):(i=s.call(t[0],function(i){n._delay(function(){t.data("ui-tooltip-open")&&(e&&(e.type=o),this._open(e,t,i))})}),void(i&&this._open(e,t,i)))},_open:function(e,i,s){function n(t){l.of=t,a.is(":hidden")||a.position(l)}var o,a,r,h,l=t.extend({},this.options.position);if(s){if(o=this._find(i))return void o.tooltip.find(".ui-tooltip-content").html(s);i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),a=o.tooltip,this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(s),
this.liveRegion.children().hide(),h=t("<div>").html(a.find(".ui-tooltip-content").html()),h.removeAttr("name").find("[name]").removeAttr("name"),h.removeAttr("id").find("[id]").removeAttr("id"),h.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(n(l.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var s={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var s=t.Event(e);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);return o?(i=o.tooltip,void(o.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:i}),o.hiding||(o.closing=!1)))):void n.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),n=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){var e=t.closest(".ui-front, dialog");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur"),o=s.element;n.target=n.currentTarget=o[0],e.close(n,!0),t("#"+i).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var f="ui-effects-",g="ui-effects-style",m="ui-effects-animated",_=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||"rgba";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d="array"),"string"===d?this.parse(s(n)||o._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if("alpha"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l("transparent"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h="alpha"===e?this._hsla?"hsla":"rgba":s,l=this[h](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:("string"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("transparent"!==n&&("string"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(_),function(){function e(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(o[i]=n[i]);return o}function i(e,i){var s,o,a={};for(s in i)o=i[s],e[s]!==o&&(n[s]||(t.fx.step[s]||!isNaN(parseFloat(o)))&&(a[s]=o));return a}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(_.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr("class")||"",l=h.children?a.find("*").addBack():a;l=l.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(s,function(t,e){n[e]&&a[e+"Class"](n[e])})},o(),l=l.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,s,n,o,a){return"boolean"==typeof s||void 0===s?n?t.effects.animateClass.call(this,s?{add:i}:{remove:i},n,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},s,n,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function e(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}function s(t,e){var i=e.outerWidth(),s=e.outerHeight(),n=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=n.exec(t)||["",0,i,s,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?i:parseFloat(o[2]),bottom:"auto"===o[3]?s:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(i){return!!t(i).data(m)||e(i)}}(t.expr.filters.animated)),t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;s>i;i++)null!==e[i]&&t.data(f+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;n>s;s++)null!==e[s]&&(i=t.data(f+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1,n="vertical"!==i?(e||100)/100:1;return{height:t.height()*n,width:t.width()*s,outerHeight:t.outerHeight()*n,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();e>1&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(g,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(g)||"",t.removeData(g)},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),n=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),"float":e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(f+"placeholder",i)),e.css({position:s,left:n.left,top:n.top}),i},removePlaceholder:function(t){var e=f+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function i(e){function i(){r.removeData(m),t.effects.cleanUp(r),"hide"===s.mode&&r.hide(),a()}function a(){t.isFunction(h)&&h.call(r[0]),t.isFunction(e)&&e()}var r=t(this);s.mode=c.shift(),t.uiBackCompat===!1||o?"none"===s.mode?(r[l](),a()):n.call(r[0],s,i):(r.is(":hidden")?"hide"===l:"show"===l)?(r[l](),a()):n.call(r[0],s,a)}var s=e.apply(this,arguments),n=t.effects.effect[s.effect],o=n.mode,a=s.queue,r=a||"fx",h=s.complete,l=s.mode,c=[],u=function(e){var i=t(this),s=t.effects.mode(i,l)||o;i.data(m,!0),c.push(s),o&&("show"===s||s===o&&"hide"===s)&&i.show(),o&&"none"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()};return t.fx.off||!n?l?this[l](s.duration,h):this.each(function(){h&&h.call(this)}):a===!1?this.each(u).each(i):this.queue(r,u).queue(r,i)},show:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(t.fn.show),hide:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(s){if(i(s)||"boolean"==typeof s)return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(e,i){var s=t(this),n=t(e.to),o="fixed"===n.css("position"),a=t("body"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();var v=t.effects;t.effects.define("blind","hide",function(e,i){var s={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},n=t(this),o=e.direction||"up",a=n.cssClip(),r={clip:t.extend({},a)},h=t.effects.createPlaceholder(n);r.clip[s[o][0]]=r.clip[s[o][1]],"show"===e.mode&&(n.cssClip(r.clip),h&&h.css(t.effects.clipToBox(r)),r.clip=a),h&&h.animate(t.effects.clipToBox(r),e.duration,e.easing),n.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("bounce",function(e,i){var s,n,o,a=t(this),r=e.mode,h="hide"===r,l="show"===r,c=e.direction||"up",u=e.distance,d=e.times||5,p=2*d+(l||h?1:0),f=e.duration/p,g=e.easing,m="up"===c||"down"===c?"top":"left",_="up"===c||"left"===c,v=0,b=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(m),u||(u=a["top"===m?"outerHeight":"outerWidth"]()/3),l&&(n={opacity:1},n[m]=o,a.css("opacity",0).css(m,_?2*-u:2*u).animate(n,f,g)),h&&(u/=Math.pow(2,d-1)),n={},n[m]=o;d>v;v++)s={},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g).animate(n,f,g),u=h?2*u:u/2;h&&(s={opacity:0},s[m]=(_?"-=":"+=")+u,a.animate(s,f,g)),a.queue(i),t.effects.unshift(a,b,p+1)}),t.effects.define("clip","hide",function(e,i){var s,n={},o=t(this),a=e.direction||"vertical",r="both"===a,h=r||"horizontal"===a,l=r||"vertical"===a;s=o.cssClip(),n.clip={top:l?(s.bottom-s.top)/2:s.top,right:h?(s.right-s.left)/2:s.right,bottom:l?(s.bottom-s.top)/2:s.bottom,left:h?(s.right-s.left)/2:s.left},t.effects.createPlaceholder(o),"show"===e.mode&&(o.cssClip(n.clip),n.clip=s),o.animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("drop","hide",function(e,i){var s,n=t(this),o=e.mode,a="show"===o,r=e.direction||"left",h="up"===r||"down"===r?"top":"left",l="up"===r||"left"===r?"-=":"+=",c="+="===l?"-=":"+=",u={opacity:0};t.effects.createPlaceholder(n),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0)/2,u[h]=l+s,a&&(n.css(u),u[h]=c+s,u.opacity=1),n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("explode","hide",function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=e.mode,g="show"===f,m=p.show().css("visibility","hidden").offset(),_=Math.ceil(p.outerWidth()/d),v=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*v,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*_,l=a-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*_,top:-o*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:_,height:v,left:r+(g?l*_:0),top:h+(g?c*v:0),opacity:g?0:1}).animate({left:r+(g?0:l*_),top:h+(g?0:c*v),opacity:g?1:0},e.duration||500,e.easing,s)}),t.effects.define("fade","toggle",function(e,i){var s="show"===e.mode;t(this).css("opacity",s?0:1).animate({opacity:s?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("fold","hide",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=e.size||15,h=/([0-9]+)%/.exec(r),l=!!e.horizFirst,c=l?["right","bottom"]:["bottom","right"],u=e.duration/2,d=t.effects.createPlaceholder(s),p=s.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[c[0]],p[c[1]]],_=s.queue().length;h&&(r=parseInt(h[1],10)/100*m[a?0:1]),f.clip[c[0]]=r,g.clip[c[0]]=r,g.clip[c[1]]=0,o&&(s.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),s.queue(function(i){d&&d.animate(t.effects.clipToBox(f),u,e.easing).animate(t.effects.clipToBox(g),u,e.easing),i()}).animate(f,u,e.easing).animate(g,u,e.easing).queue(i),t.effects.unshift(s,_,4)}),t.effects.define("highlight","show",function(e,i){var s=t(this),n={backgroundColor:s.css("backgroundColor")};"hide"===e.mode&&(n.opacity=0),t.effects.saveStyle(s),s.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define("size",function(e,i){var s,n,o,a=t(this),r=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=e.mode,u="effect"!==c,d=e.scale||"both",p=e.origin||["middle","center"],f=a.css("position"),g=a.position(),m=t.effects.scaledDimensions(a),_=e.from||m,v=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),"show"===c&&(o=_,_=v,v=o),n={from:{y:_.height/m.height,x:_.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},("box"===d||"both"===d)&&(n.from.y!==n.to.y&&(_=t.effects.setTransition(a,h,n.from.y,_),v=t.effects.setTransition(a,h,n.to.y,v)),n.from.x!==n.to.x&&(_=t.effects.setTransition(a,l,n.from.x,_),v=t.effects.setTransition(a,l,n.to.x,v))),("content"===d||"both"===d)&&n.from.y!==n.to.y&&(_=t.effects.setTransition(a,r,n.from.y,_),v=t.effects.setTransition(a,r,n.to.y,v)),p&&(s=t.effects.getBaseline(p,m),_.top=(m.outerHeight-_.outerHeight)*s.y+g.top,_.left=(m.outerWidth-_.outerWidth)*s.x+g.left,v.top=(m.outerHeight-v.outerHeight)*s.y+g.top,v.left=(m.outerWidth-v.outerWidth)*s.x+g.left),a.css(_),("content"===d||"both"===d)&&(h=h.concat(["marginTop","marginBottom"]).concat(r),l=l.concat(["marginLeft","marginRight"]),a.find("*[width]").each(function(){var i=t(this),s=t.effects.scaledDimensions(i),o={height:s.height*n.from.y,width:s.width*n.from.x,outerHeight:s.outerHeight*n.from.y,outerWidth:s.outerWidth*n.from.x},a={height:s.height*n.to.y,width:s.width*n.to.x,outerHeight:s.height*n.to.y,outerWidth:s.width*n.to.x};n.from.y!==n.to.y&&(o=t.effects.setTransition(i,h,n.from.y,o),a=t.effects.setTransition(i,h,n.to.y,a)),n.from.x!==n.to.x&&(o=t.effects.setTransition(i,l,n.from.x,o),a=t.effects.setTransition(i,l,n.to.x,a)),u&&t.effects.saveStyle(i),i.css(o),i.animate(a,e.duration,e.easing,function(){u&&t.effects.restoreStyle(i)})})),a.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===v.opacity&&a.css("opacity",_.opacity),u||(a.css("position","static"===f?"relative":f).offset(e),t.effects.saveStyle(a)),i()}})}),t.effects.define("scale",function(e,i){var s=t(this),n=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"effect"!==n?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(s),to:t.effects.scaledDimensions(s,o,e.direction||"both"),origin:e.origin||["middle","center"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,i)}),t.effects.define("puff","hide",function(e,i){var s=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,s,i)}),t.effects.define("pulsate","show",function(e,i){var s=t(this),n=e.mode,o="show"===n,a="hide"===n,r=o||a,h=2*(e.times||5)+(r?1:0),l=e.duration/h,c=0,u=1,d=s.queue().length;for((o||!s.is(":visible"))&&(s.css("opacity",0).show(),c=1);h>u;u++)s.animate({opacity:c},l,e.easing),c=1-c;s.animate({opacity:c},l,e.easing),s.queue(i),t.effects.unshift(s,d,h+1)}),t.effects.define("shake",function(e,i){var s=1,n=t(this),o=e.direction||"left",a=e.distance||20,r=e.times||3,h=2*r+1,l=Math.round(e.duration/h),c="up"===o||"down"===o?"top":"left",u="up"===o||"left"===o,d={},p={},f={},g=n.queue().length;for(t.effects.createPlaceholder(n),d[c]=(u?"-=":"+=")+a,p[c]=(u?"+=":"-=")+2*a,f[c]=(u?"-=":"+=")+2*a,n.animate(d,l,e.easing);r>s;s++)n.animate(p,l,e.easing).animate(f,l,e.easing);n.animate(p,l,e.easing).animate(d,l/2,e.easing).queue(i),t.effects.unshift(n,g,h+1)}),t.effects.define("slide","show",function(e,i){var s,n,o=t(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},r=e.mode,h=e.direction||"left",l="up"===h||"down"===h?"top":"left",c="up"===h||"left"===h,u=e.distance||o["top"===l?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(o),s=o.cssClip(),n=o.position()[l],d[l]=(c?-1:1)*u+n,d.clip=o.cssClip(),d.clip[a[h][1]]=d.clip[a[h][0]],"show"===r&&(o.cssClip(d.clip),o.css(l,d[l]),d.clip=s,d[l]=n),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})});var v;t.uiBackCompat!==!1&&(v=t.effects.define("transfer",function(e,i){t(this).transfer(e,i)}))});
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(o){function t(o,t){if(!(o.originalEvent.touches.length>1)){o.preventDefault();var e=o.originalEvent.changedTouches[0],u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(u)}}if(o.support.touch="ontouchend"in document,o.support.touch){var e,u=o.ui.mouse.prototype,n=u._mouseInit,c=u._mouseDestroy;u._touchStart=function(o){var u=this;!e&&u._mouseCapture(o.originalEvent.changedTouches[0])&&(e=!0,u._touchMoved=!1,t(o,"mouseover"),t(o,"mousemove"),t(o,"mousedown"))},u._touchMove=function(o){e&&(this._touchMoved=!0,t(o,"mousemove"))},u._touchEnd=function(o){e&&(t(o,"mouseup"),t(o,"mouseout"),this._touchMoved||t(o,"click"),e=!1)},u._mouseInit=function(){var t=this;t.element.bind({touchstart:o.proxy(t,"_touchStart"),touchmove:o.proxy(t,"_touchMove"),touchend:o.proxy(t,"_touchEnd")}),n.call(t)},u._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:o.proxy(t,"_touchStart"),touchmove:o.proxy(t,"_touchMove"),touchend:o.proxy(t,"_touchEnd")}),c.call(t)}}}(jQuery);
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function e(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!(null==n||!n.length)&&-1<v(n,t,0)}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function _(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function v(n,t,r){if(t===t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=_(n,d,r);return n}function g(n,t,r,e){--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function d(n){return n!==n}function y(n,t){var r=null==n?0:n.length;return r?m(n,t)/r:F}function b(n){return function(t){return null==t?T:t[n]}}function x(n){return function(t){return null==n?T:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function w(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function m(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==T&&(r=r===T?i:r+i)}return r}function A(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function E(n,t){return c(t,function(t){return[t,n[t]]})}function k(n){return function(t){return n(t)}}function S(n,t){return c(t,function(t){return n[t]})}function O(n,t){return n.has(t)}function I(n,t){for(var r=-1,e=n.length;++r<e&&-1<v(t,n[r],0););return r}function R(n,t){for(var r=n.length;r--&&-1<v(t,n[r],0););return r}function z(n){return"\\"+Un[n]}function W(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function B(n,t){return function(r){return n(t(r))}}function L(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&"__lodash_placeholder__"!==o||(n[r]="__lodash_placeholder__",i[u++]=r)}return i}function U(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function C(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function D(n){if(Rn.test(n)){for(var t=On.lastIndex=0;On.test(n);)++t;n=t}else n=Qn(n);return n}function M(n){return Rn.test(n)?n.match(On)||[]:n.split("")}var T,$=1/0,F=NaN,N=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],P=/\b__p\+='';/g,Z=/\b(__p\+=)''\+/g,q=/(__e\(.*?\)|\b__t\))\+'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(V.source),H=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/[\\^$.*+?()[\]{}|]/g,en=RegExp(rn.source),un=/^\s+|\s+$/g,on=/^\s+/,fn=/\s+$/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,an=/\{\n\/\* \[wrapped with (.+)\] \*/,ln=/,? & /,sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hn=/\\(\\)?/g,pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_n=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,dn=/^\[object .+?Constructor\]$/,yn=/^0o[0-7]+$/i,bn=/^(?:0|[1-9]\d*)$/,xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jn=/($^)/,wn=/['\n\r\u2028\u2029\\]/g,mn="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",An="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+mn,En="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",kn=RegExp("[']","g"),Sn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),On=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+En+mn,"g"),In=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",An].join("|"),"g"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),zn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Bn={};Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=!0,Bn["[object Arguments]"]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object Boolean]"]=Bn["[object DataView]"]=Bn["[object Date]"]=Bn["[object Error]"]=Bn["[object Function]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn["[object Object]"]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object WeakMap]"]=!1;var Ln={};Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=!0,Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object WeakMap]"]=!1;var Un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cn=parseFloat,Dn=parseInt,Mn="object"==typeof global&&global&&global.Object===Object&&global,Tn="object"==typeof self&&self&&self.Object===Object&&self,$n=Mn||Tn||Function("return this")(),Fn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nn=Fn&&"object"==typeof module&&module&&!module.nodeType&&module,Pn=Nn&&Nn.exports===Fn,Zn=Pn&&Mn.process,qn=function(){try{var n=Nn&&Nn.f&&Nn.f("util").types;return n?n:Zn&&Zn.binding&&Zn.binding("util")}catch(n){}}(),Vn=qn&&qn.isArrayBuffer,Kn=qn&&qn.isDate,Gn=qn&&qn.isMap,Hn=qn&&qn.isRegExp,Jn=qn&&qn.isSet,Yn=qn&&qn.isTypedArray,Qn=b("length"),Xn=x({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),nt=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),tt=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rt=function et(x){function mn(n){if(du(n)&&!of(n)&&!(n instanceof On)){if(n instanceof En)return n;if(ii.call(n,"__wrapped__"))return $e(n)}return new En(n)}function An(){}function En(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=T}function On(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Un(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Mn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Tn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Fn(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Tn;++t<r;)this.add(n[t])}function Nn(n){this.size=(this.__data__=new Mn(n)).size}function Zn(n,t){var r,e=of(n),u=!e&&uf(n),i=!e&&!u&&cf(n),o=!e&&!u&&!i&&pf(n),u=(e=e||u||i||o)?A(n.length,Xu):[],f=u.length;for(r in n)!t&&!ii.call(n,r)||e&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Se(r,f))||u.push(r);return u}function qn(n){var t=n.length;return t?n[ir(0,t-1)]:T}function Qn(n,t){return Ce(Ur(n),pt(t,0,n.length))}function ut(n){return Ce(Ur(n))}function it(n,t,r){(r===T||au(n[t],r))&&(r!==T||t in n)||st(n,t,r)}function ot(n,t,r){var e=n[t];ii.call(n,t)&&au(e,r)&&(r!==T||t in n)||st(n,t,r)}function ft(n,t){for(var r=n.length;r--;)if(au(n[r][0],t))return r;return-1}function ct(n,t,r,e){return eo(n,function(n,u,i){t(e,n,r(n),i)}),e}function at(n,t){return n&&Cr(t,zu(t),n)}function lt(n,t){return n&&Cr(t,Wu(t),n)}function st(n,t,r){"__proto__"==t&&mi?mi(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function ht(n,t){for(var r=-1,e=t.length,u=Vu(e),i=null==n;++r<e;)u[r]=i?T:Iu(n,t[r]);return u}function pt(n,t,r){return n===n&&(r!==T&&(n=n<=r?n:r),t!==T&&(n=n>=t?n:t)),n}function _t(n,t,e,u,i,o){var f,c=1&t,a=2&t,l=4&t;if(e&&(f=i?e(n,u,i,o):e(n)),f!==T)return f;if(!gu(n))return n;if(u=of(n)){if(f=me(n),!c)return Ur(n,f)}else{var s=_o(n),h="[object Function]"==s||"[object GeneratorFunction]"==s;if(cf(n))return Ir(n,c);if("[object Object]"==s||"[object Arguments]"==s||h&&!i){if(f=a||h?{}:Ae(n),!c)return a?Mr(n,lt(f,n)):Dr(n,at(f,n))}else{if(!Ln[s])return i?n:{};f=Ee(n,s,c)}}if(o||(o=new Nn),i=o.get(n))return i;if(o.set(n,f),hf(n))return n.forEach(function(r){f.add(_t(r,t,e,r,n,o))}),f;if(lf(n))return n.forEach(function(r,u){f.set(u,_t(r,t,e,u,n,o))}),f;var a=l?a?ve:_e:a?Wu:zu,p=u?T:a(n);return r(p||n,function(r,u){p&&(u=r,r=n[u]),ot(f,u,_t(r,t,e,u,n,o))}),f}function vt(n){var t=zu(n);return function(r){return gt(r,n,t)}}function gt(n,t,r){var e=r.length;if(null==n)return!e;for(n=Yu(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===T&&!(u in n)||!i(o))return!1}return!0}function dt(n,t,r){if("function"!=typeof n)throw new ni("Expected a function");return yo(function(){n.apply(T,r)},t)}function yt(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;if(!l)return s;r&&(t=c(t,k(r))),e?(i=f,a=!1):200<=t.length&&(i=O,a=!1,t=new Fn(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p),p=e||0!==p?p:0;if(a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function bt(n,t){var r=!0;return eo(n,function(n,e,u){return r=!!t(n,e,u)}),r}function xt(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===T?o===o&&!ju(o):r(o,f)))var f=o,c=i}return c}function jt(n,t){var r=[];return eo(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function wt(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=ke),u||(u=[]);++i<o;){var f=n[i];0<t&&r(f)?1<t?wt(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function mt(n,t){return n&&io(n,t,zu)}function At(n,t){return n&&oo(n,t,zu)}function Et(n,t){return i(t,function(t){return pu(n[t])})}function kt(n,t){t=Sr(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[De(t[r++])];return r&&r==e?n:T}function St(n,t,r){return t=t(n),of(n)?t:a(t,r(n))}function Ot(n){if(null==n)n=n===T?"[object Undefined]":"[object Null]";else if(wi&&wi in Yu(n)){var t=ii.call(n,wi),r=n[wi];try{n[wi]=T;var e=!0}catch(n){}var u=ci.call(n);e&&(t?n[wi]=r:delete n[wi]),n=u}else n=ci.call(n);return n}function It(n,t){return n>t}function Rt(n,t){return null!=n&&ii.call(n,t)}function zt(n,t){return null!=n&&t in Yu(n)}function Wt(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=Vu(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,k(t))),s=Ui(p.length,s),l[a]=!r&&(t||120<=u&&120<=p.length)?new Fn(a&&p):T}var p=n[0],_=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],d=t?t(g):g,g=r||0!==g?g:0;if(v?!O(v,d):!e(h,d,r)){for(a=i;--a;){var y=l[a];if(y?!O(y,d):!e(n[a],d,r))continue n}v&&v.push(d),h.push(g)}}return h}function Bt(n,t,r){var e={};return mt(n,function(n,u,i){t(e,r(n),u,i)}),e}function Lt(t,r,e){return r=Sr(r,t),t=2>r.length?t:kt(t,hr(r,0,-1)),r=null==t?t:t[De(qe(r))],null==r?T:n(r,t,e)}function Ut(n){return du(n)&&"[object Arguments]"==Ot(n)}function Ct(n){return du(n)&&"[object ArrayBuffer]"==Ot(n)}function Dt(n){return du(n)&&"[object Date]"==Ot(n)}function Mt(n,t,r,e,u){if(n===t)t=!0;else if(null==n||null==t||!du(n)&&!du(t))t=n!==n&&t!==t;else n:{var i=of(n),o=of(t),f=i?"[object Array]":_o(n),c=o?"[object Array]":_o(t),f="[object Arguments]"==f?"[object Object]":f,c="[object Arguments]"==c?"[object Object]":c,a="[object Object]"==f,o="[object Object]"==c;if((c=f==c)&&cf(n)){if(!cf(t)){t=!1;break n}i=!0,a=!1}if(c&&!a)u||(u=new Nn),t=i||pf(n)?se(n,t,r,e,Mt,u):he(n,t,f,r,e,Mt,u);else{if(!(1&r)&&(i=a&&ii.call(n,"__wrapped__"),f=o&&ii.call(t,"__wrapped__"),i||f)){n=i?n.value():n,t=f?t.value():t,u||(u=new Nn),t=Mt(n,t,r,e,u);break n}if(c)t:if(u||(u=new Nn),i=1&r,f=_e(n),o=f.length,c=_e(t).length,o==c||i){for(a=o;a--;){var l=f[a];if(!(i?l in t:ii.call(t,l))){t=!1;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=!0,u.set(n,t),u.set(t,n);for(var s=i;++a<o;){var l=f[a],h=n[l],p=t[l];if(e)var _=i?e(p,h,l,t,n,u):e(h,p,l,n,t,u);if(_===T?h!==p&&!Mt(h,p,r,e,u):!_){c=!1;break}s||(s="constructor"==l)}c&&!s&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(c=!1)),u["delete"](n),u["delete"](t),t=c}}else t=!1;else t=!1}}return t}function Tt(n){return du(n)&&"[object Map]"==_o(n)}function $t(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Yu(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){var f=r[u],c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===T&&!(c in n))return!1}else{if(f=new Nn,e)var s=e(a,l,c,n,t,f);if(s===T?!Mt(l,a,3,e,f):!s)return!1}}return!0}function Ft(n){return!(!gu(n)||fi&&fi in n)&&(pu(n)?si:dn).test(Me(n))}function Nt(n){return du(n)&&"[object RegExp]"==Ot(n)}function Pt(n){return du(n)&&"[object Set]"==_o(n)}function Zt(n){return du(n)&&vu(n.length)&&!!Bn[Ot(n)]}function qt(n){return"function"==typeof n?n:null==n?Tu:"object"==typeof n?of(n)?Jt(n[0],n[1]):Ht(n):Pu(n)}function Vt(n){if(!ze(n))return Bi(n);var t,r=[];for(t in Yu(n))ii.call(n,t)&&"constructor"!=t&&r.push(t);return r}function Kt(n,t){return n<t}function Gt(n,t){var r=-1,e=lu(n)?Vu(n.length):[];return eo(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Ht(n){var t=xe(n);return 1==t.length&&t[0][2]?We(t[0][0],t[0][1]):function(r){return r===n||$t(r,n,t)}}function Jt(n,t){return Ie(n)&&t===t&&!gu(t)?We(De(n),t):function(r){var e=Iu(r,n);return e===T&&e===t?Ru(r,n):Mt(t,e,3)}}function Yt(n,t,r,e,u){n!==t&&io(t,function(i,o){if(gu(i)){u||(u=new Nn);var f=u,c="__proto__"==o?T:n[o],a="__proto__"==o?T:t[o],l=f.get(a);if(l)it(n,o,l);else{var l=e?e(c,a,o+"",n,t,f):T,s=l===T;if(s){var h=of(a),p=!h&&cf(a),_=!h&&!p&&pf(a),l=a;h||p||_?of(c)?l=c:su(c)?l=Ur(c):p?(s=!1,l=Ir(a,!0)):_?(s=!1,l=zr(a,!0)):l=[]:bu(a)||uf(a)?(l=c,uf(c)?l=Su(c):(!gu(c)||r&&pu(c))&&(l=Ae(a))):s=!1}s&&(f.set(a,l),Yt(l,a,r,e,f),f["delete"](a)),it(n,o,l)}}else f=e?e("__proto__"==o?T:n[o],i,o+"",n,t,u):T,f===T&&(f=i),it(n,o,f)},Wu)}function Qt(n,t){var r=n.length;if(r)return t+=0>t?r:0,Se(t,r)?n[t]:T}function Xt(n,t,r){var e=-1;return t=c(t.length?t:[Tu],k(ye())),n=Gt(n,function(n){return{a:c(t,function(t){return t(n)}),b:++e,c:n}}),w(n,function(n,t){var e;n:{e=-1;for(var u=n.a,i=t.a,o=u.length,f=r.length;++e<o;){var c=Wr(u[e],i[e]);if(c){e=e>=f?c:c*("desc"==r[e]?-1:1);break n}}e=n.b-t.b}return e})}function nr(n,t){return tr(n,t,function(t,r){return Ru(n,r)})}function tr(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=kt(n,o);r(f,o)&&lr(i,Sr(o,n),f)}return i}function rr(n){return function(t){return kt(t,n)}}function er(n,t,r,e){var u=e?g:v,i=-1,o=t.length,f=n;for(n===t&&(t=Ur(t)),r&&(f=c(n,k(r)));++i<o;)for(var a=0,l=t[i],l=r?r(l):l;-1<(a=u(f,l,a,e));)f!==n&&bi.call(f,a,1),bi.call(n,a,1);return n}function ur(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Se(u)?bi.call(n,u,1):xr(n,u)}}}function ir(n,t){return n+Oi(Mi()*(t-n+1))}function or(n,t){var r="";if(!n||1>t||9007199254740991<t)return r;do t%2&&(r+=n),(t=Oi(t/2))&&(n+=n);while(t);return r}function fr(n,t){return bo(Be(n,t,Tu),n+"")}function cr(n){return qn(Lu(n))}function ar(n,t){var r=Lu(n);return Ce(r,pt(t,0,r.length))}function lr(n,t,r,e){if(!gu(n))return n;t=Sr(t,n);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=De(t[u]),a=r;if(u!=o){var l=f[c],a=e?e(l,c,f):T;a===T&&(a=gu(l)?l:Se(t[u+1])?[]:{})}ot(f,c,a),f=f[c]}return n}function sr(n){return Ce(Lu(n))}function hr(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Vu(u);++e<u;)r[e]=n[e+t];return r}function pr(n,t){var r;return eo(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function _r(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t===t&&2147483647>=u){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!ju(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return vr(n,t,Tu,r)}function vr(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,c=ju(t),a=t===T;u<i;){var l=Oi((u+i)/2),s=r(n[l]),h=s!==T,p=null===s,_=s===s,v=ju(s);(o?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):p||v?0:e?s<=t:s<t)?u=l+1:i=l}return Ui(i,4294967294)}function gr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!au(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function dr(n){return"number"==typeof n?n:ju(n)?F:+n}function yr(n){if("string"==typeof n)return n;if(of(n))return c(n,yr)+"";if(ju(n))return to?to.call(n):"";var t=n+"";return"0"==t&&1/n==-$?"-0":t}function br(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(200<=i){if(u=t?null:lo(n))return U(u);c=!1,u=O,l=new Fn}else l=t?[]:a;n:for(;++e<i;){var s=n[e],h=t?t(s):s,s=r||0!==s?s:0;if(c&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue n;t&&l.push(h),a.push(s)}else u(l,h,r)||(l!==a&&l.push(h),a.push(s))}return a}function xr(n,t){return t=Sr(t,n),n=2>t.length?n:kt(n,hr(t,0,-1)),null==n||delete n[De(qe(t))]}function jr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?hr(n,e?0:i,e?i+1:u):hr(n,e?i+1:0,e?u:i)}function wr(n,t){var r=n;return r instanceof On&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mr(n,t,r){var e=n.length;if(2>e)return e?br(n[0]):[];for(var u=-1,i=Vu(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=yt(i[u]||o,n[f],t,r));return br(wt(i,1),t,r)}function Ar(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;)r(o,n[e],e<i?t[e]:T);return o}function Er(n){return su(n)?n:[]}function kr(n){return"function"==typeof n?n:Tu}function Sr(n,t){return of(n)?n:Ie(n,t)?[n]:xo(Ou(n))}function Or(n,t,r){var e=n.length;return r=r===T?e:r,!t&&r>=e?n:hr(n,t,r)}function Ir(n,t){if(t)return n.slice();var r=n.length,r=vi?vi(r):new n.constructor(r);return n.copy(r),r}function Rr(n){var t=new n.constructor(n.byteLength);return new _i(t).set(new _i(n)),t}function zr(n,t){return new n.constructor(t?Rr(n.buffer):n.buffer,n.byteOffset,n.length)}function Wr(n,t){if(n!==t){var r=n!==T,e=null===n,u=n===n,i=ju(n),o=t!==T,f=null===t,c=t===t,a=ju(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Br(n,t,r,e){var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Li(i-o,0),l=Vu(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<o;)(e||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function Lr(n,t,r,e){var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Li(i-f,0),s=Vu(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++o<f;)(e||u<i)&&(s[l+r[o]]=n[u++]);return s}function Ur(n,t){var r=-1,e=n.length;for(t||(t=Vu(e));++r<e;)t[r]=n[r];return t}function Cr(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):T;c===T&&(c=n[f]),u?st(r,f,c):ot(r,f,c)}return r}function Dr(n,t){return Cr(n,ho(n),t)}function Mr(n,t){return Cr(n,po(n),t)}function Tr(n,r){return function(e,u){var i=of(e)?t:ct,o=r?r():{};return i(e,n,ye(u,2),o)}}function $r(n){return fr(function(t,r){var e=-1,u=r.length,i=1<u?r[u-1]:T,o=2<u?r[2]:T,i=3<n.length&&"function"==typeof i?(u--,i):T;for(o&&Oe(r[0],r[1],o)&&(i=3>u?T:i,u=1),t=Yu(t);++e<u;)(o=r[e])&&n(t,o,e,i);return t})}function Fr(n,t){return function(r,e){if(null==r)return r;if(!lu(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Yu(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function Nr(n){return function(t,r,e){var u=-1,i=Yu(t);e=e(t);for(var o=e.length;o--;){var f=e[n?o:++u];if(!1===r(i[f],f,i))break}return t}}function Pr(n,t,r){function e(){return(this&&this!==$n&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=1&t,i=Vr(n);return e}function Zr(n){return function(t){t=Ou(t);var r=Rn.test(t)?M(t):T,e=r?r[0]:t.charAt(0);return t=r?Or(r,1).join(""):t.slice(1),e[n]()+t}}function qr(n){return function(t){return l(Du(Cu(t).replace(kn,"")),n,"")}}function Vr(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ro(n.prototype),t=n.apply(r,t);return gu(t)?t:r}}function Kr(t,r,e){function u(){for(var o=arguments.length,f=Vu(o),c=o,a=de(u);c--;)f[c]=arguments[c];return c=3>o&&f[0]!==a&&f[o-1]!==a?[]:L(f,a),o-=c.length,o<e?ue(t,r,Jr,u.placeholder,T,f,c,T,T,e-o):n(this&&this!==$n&&this instanceof u?i:t,this,f)}var i=Vr(t);return u}function Gr(n){return function(t,r,e){var u=Yu(t);if(!lu(t)){var i=ye(r,3);t=zu(t),r=function(n){return i(u[n],n,u)}}return r=n(t,r,e),-1<r?u[i?t[r]:r]:T}}function Hr(n){return pe(function(t){var r=t.length,e=r,u=En.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if("function"!=typeof i)throw new ni("Expected a function");if(u&&!o&&"wrapper"==ge(i))var o=new En([],(!0))}for(e=o?e:r;++e<r;)var i=t[e],u=ge(i),f="wrapper"==u?so(i):T,o=f&&Re(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?o[ge(f[0])].apply(o,f[3]):1==i.length&&Re(i)?o[u]():o.thru(i);return function(){var n=arguments,e=n[0];if(o&&1==n.length&&of(e))return o.plant(e).value();for(var u=0,n=r?t[u].apply(this,n):e;++u<r;)n=t[u].call(this,n);return n}})}function Jr(n,t,r,e,u,i,o,f,c,a){function l(){for(var d=arguments.length,y=Vu(d),b=d;b--;)y[b]=arguments[b];if(_){var x,j=de(l),b=y.length;for(x=0;b--;)y[b]===j&&++x}if(e&&(y=Br(y,e,u,_)),i&&(y=Lr(y,i,o,_)),d-=x,_&&d<a)return j=L(y,j),ue(n,t,Jr,l.placeholder,r,y,j,f,c,a-d);if(j=h?r:this,b=p?j[n]:n,d=y.length,f){x=y.length;for(var w=Ui(f.length,x),m=Ur(y);w--;){var A=f[w];y[w]=Se(A,x)?m[A]:T}}else v&&1<d&&y.reverse();return s&&c<d&&(y.length=c),this&&this!==$n&&this instanceof l&&(b=g||Vr(b)),b.apply(j,y)}var s=128&t,h=1&t,p=2&t,_=24&t,v=512&t,g=p?T:Vr(n);return l}function Yr(n,t){return function(r,e){return Bt(r,n,t(e))}}function Qr(n,t){return function(r,e){var u;if(r===T&&e===T)return t;if(r!==T&&(u=r),e!==T){if(u===T)return e;"string"==typeof r||"string"==typeof e?(r=yr(r),e=yr(e)):(r=dr(r),e=dr(e)),u=n(r,e)}return u}}function Xr(t){return pe(function(r){return r=c(r,k(ye())),fr(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ne(n,t){t=t===T?" ":yr(t);var r=t.length;return 2>r?r?or(t,n):t:(r=or(t,Si(n/D(t))),Rn.test(t)?Or(M(r),0,n).join(""):r.slice(0,n))}function te(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=Vu(l+c),h=this&&this!==$n&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];return n(h,o?e:this,s)}var o=1&r,f=Vr(t);return i}function re(n){return function(t,r,e){e&&"number"!=typeof e&&Oe(t,r,e)&&(r=e=T),t=mu(t),r===T?(r=t,t=0):r=mu(r),e=e===T?t<r?1:-1:mu(e);var u=-1;r=Li(Si((r-t)/(e||1)),0);for(var i=Vu(r);r--;)i[n?r:++u]=t,t+=e;return i}}function ee(n){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ku(t),r=ku(r)),n(t,r)}}function ue(n,t,r,e,u,i,o,f,c,a){var l=8&t,s=l?o:T;o=l?T:o;var h=l?i:T;return i=l?T:i,t=(t|(l?32:64))&~(l?64:32),4&t||(t&=-4),u=[n,t,u,h,s,i,o,f,c,a],r=r.apply(T,u),Re(n)&&go(r,u),r.placeholder=e,Le(r,n,t)}function ie(n){var t=Ju[n];return function(n,r){if(n=ku(n),r=null==r?0:Ui(Au(r),292)){var e=(Ou(n)+"e").split("e"),e=t(e[0]+"e"+(+e[1]+r)),e=(Ou(e)+"e").split("e");return+(e[0]+"e"+(+e[1]-r))}return t(n)}}function oe(n){return function(t){var r=_o(t);return"[object Map]"==r?W(t):"[object Set]"==r?C(t):E(t,n(t))}}function fe(n,t,r,e,u,i,o,f){var c=2&t;if(!c&&"function"!=typeof n)throw new ni("Expected a function");var a=e?e.length:0;if(a||(t&=-97,e=u=T),o=o===T?o:Li(Au(o),0),f=f===T?f:Au(f),a-=u?u.length:0,64&t){var l=e,s=u;e=u=T}var h=c?T:so(n);return i=[n,t,r,e,u,l,s,i,o,f],h&&(r=i[1],n=h[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&i[7].length<=h[8]||384==n&&h[7].length<=h[8]&&8==r,131>t||e)&&(1&n&&(i[2]=h[2],t|=1&r?0:4),(r=h[3])&&(e=i[3],i[3]=e?Br(e,r,h[4]):r,i[4]=e?L(i[3],"__lodash_placeholder__"):h[4]),(r=h[5])&&(e=i[5],i[5]=e?Lr(e,r,h[6]):r,i[6]=e?L(i[5],"__lodash_placeholder__"):h[6]),(r=h[7])&&(i[7]=r),128&n&&(i[8]=null==i[8]?h[8]:Ui(i[8],h[8])),null==i[9]&&(i[9]=h[9]),i[0]=h[0],i[1]=t),n=i[0],t=i[1],r=i[2],e=i[3],u=i[4],f=i[9]=i[9]===T?c?0:n.length:Li(i[9]-a,0),!f&&24&t&&(t&=-25),Le((h?fo:go)(t&&1!=t?8==t||16==t?Kr(n,t,f):32!=t&&33!=t||u.length?Jr.apply(T,i):te(n,t,r,e):Pr(n,t,r),i),n,t)}function ce(n,t,r,e){return n===T||au(n,ri[r])&&!ii.call(e,r)?t:n}function ae(n,t,r,e,u,i){return gu(n)&&gu(t)&&(i.set(t,n),Yt(n,t,T,ae,i),i["delete"](t)),n}function le(n){return bu(n)?T:n}function se(n,t,r,e,u,i){var o=1&r,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;if((c=i.get(n))&&i.get(t))return c==t;var c=-1,a=!0,l=2&r?new Fn:T;for(i.set(n,t),i.set(t,n);++c<f;){var s=n[c],p=t[c];if(e)var _=o?e(p,s,c,t,n,i):e(s,p,c,n,t,i);if(_!==T){if(_)continue;a=!1;break}if(l){if(!h(t,function(n,t){if(!O(l,t)&&(s===n||u(s,n,r,e,i)))return l.push(t)})){a=!1;break}}else if(s!==p&&!u(s,p,r,e,i)){a=!1;break}}return i["delete"](n),i["delete"](t),a}function he(n,t,r,e,u,i,o){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":if(n.byteLength!=t.byteLength||!i(new _i(n),new _i(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return au(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=W;case"[object Set]":if(f||(f=U),n.size!=t.size&&!(1&e))break;return(r=o.get(n))?r==t:(e|=2,o.set(n,t),t=se(f(n),f(t),e,u,i,o),o["delete"](n),t);case"[object Symbol]":if(no)return no.call(n)==no.call(t)}return!1}function pe(n){return bo(Be(n,T,Pe),n+"")}function _e(n){return St(n,zu,ho)}function ve(n){return St(n,Wu,po)}function ge(n){for(var t=n.name+"",r=Ki[t],e=ii.call(Ki,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function de(n){return(ii.call(mn,"placeholder")?mn:n).placeholder}function ye(){var n=mn.iteratee||$u,n=n===$u?qt:n;return arguments.length?n(arguments[0],arguments[1]):n}function be(n,t){var r=n.__data__,e=typeof t;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function xe(n){for(var t=zu(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u===u&&!gu(u)]}return t}function je(n,t){var r=null==n?T:n[t];return Ft(r)?r:T}function we(n,t,r){t=Sr(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=De(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&vu(u)&&Se(o,u)&&(of(n)||uf(n)))}function me(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&ii.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ae(n){return"function"!=typeof n.constructor||ze(n)?{}:ro(gi(n))}function Ee(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Rr(n);case"[object Boolean]":case"[object Date]":return new e((+n));case"[object DataView]":return t=r?Rr(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":
case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return zr(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return t=new n.constructor(n.source,_n.exec(n)),t.lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return no?Yu(no.call(n)):{}}}function ke(n){return of(n)||uf(n)||!!(xi&&n&&n[xi])}function Se(n,t){var r=typeof n;return t=null==t?9007199254740991:t,!!t&&("number"==r||"symbol"!=r&&bn.test(n))&&-1<n&&0==n%1&&n<t}function Oe(n,t,r){if(!gu(r))return!1;var e=typeof t;return!!("number"==e?lu(r)&&Se(t,r.length):"string"==e&&t in r)&&au(r[t],n)}function Ie(n,t){if(of(n))return!1;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!ju(n))||nn.test(n)||!X.test(n)||null!=t&&n in Yu(t)}function Re(n){var t=ge(n),r=mn[t];return"function"==typeof r&&t in On.prototype&&(n===r||(t=so(r),!!t&&n===t[0]))}function ze(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||ri)}function We(n,t){return function(r){return null!=r&&r[n]===t&&(t!==T||n in Yu(r))}}function Be(t,r,e){return r=Li(r===T?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Li(u.length-r,0),f=Vu(o);++i<o;)f[i]=u[r+i];for(i=-1,o=Vu(r+1);++i<r;)o[i]=u[i];return o[r]=e(f),n(t,this,o)}}function Le(n,t,r){var e=t+"";t=bo;var u,i=Te;return u=(u=e.match(an))?u[1].split(ln):[],r=i(u,r),(i=r.length)&&(u=i-1,r[u]=(1<i?"& ":"")+r[u],r=r.join(2<i?", ":" "),e=e.replace(cn,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Ue(n){var t=0,r=0;return function(){var e=Ci(),u=16-(e-r);if(r=e,0<u){if(800<=++t)return arguments[0]}else t=0;return n.apply(T,arguments)}}function Ce(n,t){var r=-1,e=n.length,u=e-1;for(t=t===T?e:t;++r<t;){var e=ir(r,u),i=n[e];n[e]=n[r],n[r]=i}return n.length=t,n}function De(n){if("string"==typeof n||ju(n))return n;var t=n+"";return"0"==t&&1/n==-$?"-0":t}function Me(n){if(null!=n){try{return ui.call(n)}catch(n){}return n+""}return""}function Te(n,t){return r(N,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function $e(n){if(n instanceof On)return n.clone();var t=new En(n.__wrapped__,n.__chain__);return t.__actions__=Ur(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Fe(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Au(r),0>r&&(r=Li(e+r,0)),_(n,ye(t,3),r)):-1}function Ne(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==T&&(u=Au(r),u=0>r?Li(e+u,0):Ui(u,e-1)),_(n,ye(t,3),u,!0)}function Pe(n){return(null==n?0:n.length)?wt(n,1):[]}function Ze(n){return n&&n.length?n[0]:T}function qe(n){var t=null==n?0:n.length;return t?n[t-1]:T}function Ve(n,t){return n&&n.length&&t&&t.length?er(n,t):n}function Ke(n){return null==n?n:Ti.call(n)}function Ge(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){if(su(n))return t=Li(n.length,t),!0}),A(t,function(t){return c(n,b(t))})}function He(t,r){if(!t||!t.length)return[];var e=Ge(t);return null==r?e:c(e,function(t){return n(r,T,t)})}function Je(n){return n=mn(n),n.__chain__=!0,n}function Ye(n,t){return t(n)}function Qe(){return this}function Xe(n,t){return(of(n)?r:eo)(n,ye(t,3))}function nu(n,t){return(of(n)?e:uo)(n,ye(t,3))}function tu(n,t){return(of(n)?c:Gt)(n,ye(t,3))}function ru(n,t,r){return t=r?T:t,t=n&&null==t?n.length:t,fe(n,128,T,T,T,T,t)}function eu(n,t){var r;if("function"!=typeof t)throw new ni("Expected a function");return n=Au(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=T),r}}function uu(n,t,r){return t=r?T:t,n=fe(n,8,T,T,T,T,T,t),n.placeholder=uu.placeholder,n}function iu(n,t,r){return t=r?T:t,n=fe(n,16,T,T,T,T,T,t),n.placeholder=iu.placeholder,n}function ou(n,t,r){function e(t){var r=c,e=a;return c=a=T,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return n-=_,p===T||r>=t||0>r||g&&n>=l}function i(){var n=Ko();if(u(n))return o(n);var r,e=yo;r=n-_,n=t-(n-p),r=g?Ui(n,l-r):n,h=e(i,r)}function o(n){return h=T,d&&c?e(n):(c=a=T,s)}function f(){var n=Ko(),r=u(n);if(c=arguments,a=this,p=n,r){if(h===T)return _=n=p,h=yo(i,t),v?e(n):s;if(g)return h=yo(i,t),e(p)}return h===T&&(h=yo(i,t)),s}var c,a,l,s,h,p,_=0,v=!1,g=!1,d=!0;if("function"!=typeof n)throw new ni("Expected a function");return t=ku(t)||0,gu(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Li(ku(r.maxWait)||0,t):l,d="trailing"in r?!!r.trailing:d),f.cancel=function(){h!==T&&ao(h),_=0,c=p=a=h=T},f.flush=function(){return h===T?s:o(Ko())},f}function fu(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new ni("Expected a function");return r.cache=new(fu.Cache||Tn),r}function cu(n){if("function"!=typeof n)throw new ni("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function au(n,t){return n===t||n!==n&&t!==t}function lu(n){return null!=n&&vu(n.length)&&!pu(n)}function su(n){return du(n)&&lu(n)}function hu(n){if(!du(n))return!1;var t=Ot(n);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!bu(n)}function pu(n){return!!gu(n)&&(n=Ot(n),"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function _u(n){return"number"==typeof n&&n==Au(n)}function vu(n){return"number"==typeof n&&-1<n&&0==n%1&&9007199254740991>=n}function gu(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function du(n){return null!=n&&"object"==typeof n}function yu(n){return"number"==typeof n||du(n)&&"[object Number]"==Ot(n)}function bu(n){return!(!du(n)||"[object Object]"!=Ot(n))&&(n=gi(n),null===n||(n=ii.call(n,"constructor")&&n.constructor,"function"==typeof n&&n instanceof n&&ui.call(n)==ai))}function xu(n){return"string"==typeof n||!of(n)&&du(n)&&"[object String]"==Ot(n)}function ju(n){return"symbol"==typeof n||du(n)&&"[object Symbol]"==Ot(n)}function wu(n){if(!n)return[];if(lu(n))return xu(n)?M(n):Ur(n);if(ji&&n[ji]){n=n[ji]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return t=_o(n),("[object Map]"==t?W:"[object Set]"==t?U:Lu)(n)}function mu(n){return n?(n=ku(n),n===$||n===-$?1.7976931348623157e308*(0>n?-1:1):n===n?n:0):0===n?n:0}function Au(n){n=mu(n);var t=n%1;return n===n?t?n-t:n:0}function Eu(n){return n?pt(Au(n),0,4294967295):0}function ku(n){if("number"==typeof n)return n;if(ju(n))return F;if(gu(n)&&(n="function"==typeof n.valueOf?n.valueOf():n,n=gu(n)?n+"":n),"string"!=typeof n)return 0===n?n:+n;n=n.replace(un,"");var t=gn.test(n);return t||yn.test(n)?Dn(n.slice(2),t?2:8):vn.test(n)?F:+n}function Su(n){return Cr(n,Wu(n))}function Ou(n){return null==n?"":yr(n)}function Iu(n,t,r){return n=null==n?T:kt(n,t),n===T?r:n}function Ru(n,t){return null!=n&&we(n,t,zt)}function zu(n){return lu(n)?Zn(n):Vt(n)}function Wu(n){if(lu(n))n=Zn(n,!0);else if(gu(n)){var t,r=ze(n),e=[];for(t in n)("constructor"!=t||!r&&ii.call(n,t))&&e.push(t);n=e}else{if(t=[],null!=n)for(r in Yu(n))t.push(r);n=t}return n}function Bu(n,t){if(null==n)return{};var r=c(ve(n),function(n){return[n]});return t=ye(t),tr(n,r,function(n,r){return t(n,r[0])})}function Lu(n){return null==n?[]:S(n,zu(n))}function Uu(n){return Tf(Ou(n).toLowerCase())}function Cu(n){return(n=Ou(n))&&n.replace(xn,Xn).replace(Sn,"")}function Du(n,t,r){return n=Ou(n),t=r?T:t,t===T?zn.test(n)?n.match(In)||[]:n.match(sn)||[]:n.match(t)||[]}function Mu(n){return function(){return n}}function Tu(n){return n}function $u(n){return qt("function"==typeof n?n:_t(n,1))}function Fu(n,t,e){var u=zu(t),i=Et(t,u);null!=e||gu(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=Et(t,zu(t)));var o=!(gu(e)&&"chain"in e&&!e.chain),f=pu(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Ur(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Nu(){}function Pu(n){return Ie(n)?b(De(n)):rr(n)}function Zu(){return[]}function qu(){return!1}x=null==x?$n:rt.defaults($n.Object(),x,rt.pick($n,Wn));var Vu=x.Array,Ku=x.Date,Gu=x.Error,Hu=x.Function,Ju=x.Math,Yu=x.Object,Qu=x.RegExp,Xu=x.String,ni=x.TypeError,ti=Vu.prototype,ri=Yu.prototype,ei=x["__core-js_shared__"],ui=Hu.prototype.toString,ii=ri.hasOwnProperty,oi=0,fi=function(){var n=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ci=ri.toString,ai=ui.call(Yu),li=$n._,si=Qu("^"+ui.call(ii).replace(rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hi=Pn?x.Buffer:T,pi=x.Symbol,_i=x.Uint8Array,vi=hi?hi.g:T,gi=B(Yu.getPrototypeOf,Yu),di=Yu.create,yi=ri.propertyIsEnumerable,bi=ti.splice,xi=pi?pi.isConcatSpreadable:T,ji=pi?pi.iterator:T,wi=pi?pi.toStringTag:T,mi=function(){try{var n=je(Yu,"defineProperty");return n({},"",{}),n}catch(n){}}(),Ai=x.clearTimeout!==$n.clearTimeout&&x.clearTimeout,Ei=Ku&&Ku.now!==$n.Date.now&&Ku.now,ki=x.setTimeout!==$n.setTimeout&&x.setTimeout,Si=Ju.ceil,Oi=Ju.floor,Ii=Yu.getOwnPropertySymbols,Ri=hi?hi.isBuffer:T,zi=x.isFinite,Wi=ti.join,Bi=B(Yu.keys,Yu),Li=Ju.max,Ui=Ju.min,Ci=Ku.now,Di=x.parseInt,Mi=Ju.random,Ti=ti.reverse,$i=je(x,"DataView"),Fi=je(x,"Map"),Ni=je(x,"Promise"),Pi=je(x,"Set"),Zi=je(x,"WeakMap"),qi=je(Yu,"create"),Vi=Zi&&new Zi,Ki={},Gi=Me($i),Hi=Me(Fi),Ji=Me(Ni),Yi=Me(Pi),Qi=Me(Zi),Xi=pi?pi.prototype:T,no=Xi?Xi.valueOf:T,to=Xi?Xi.toString:T,ro=function(){function n(){}return function(t){return gu(t)?di?di(t):(n.prototype=t,t=new n,n.prototype=T,t):{}}}();mn.templateSettings={escape:J,evaluate:Y,interpolate:Q,variable:"",imports:{_:mn}},mn.prototype=An.prototype,mn.prototype.constructor=mn,En.prototype=ro(An.prototype),En.prototype.constructor=En,On.prototype=ro(An.prototype),On.prototype.constructor=On,Un.prototype.clear=function(){this.__data__=qi?qi(null):{},this.size=0},Un.prototype["delete"]=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},Un.prototype.get=function(n){var t=this.__data__;return qi?(n=t[n],"__lodash_hash_undefined__"===n?T:n):ii.call(t,n)?t[n]:T},Un.prototype.has=function(n){var t=this.__data__;return qi?t[n]!==T:ii.call(t,n)},Un.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=qi&&t===T?"__lodash_hash_undefined__":t,this},Mn.prototype.clear=function(){this.__data__=[],this.size=0},Mn.prototype["delete"]=function(n){var t=this.__data__;return n=ft(t,n),!(0>n||(n==t.length-1?t.pop():bi.call(t,n,1),--this.size,0))},Mn.prototype.get=function(n){var t=this.__data__;return n=ft(t,n),0>n?T:t[n][1]},Mn.prototype.has=function(n){return-1<ft(this.__data__,n)},Mn.prototype.set=function(n,t){var r=this.__data__,e=ft(r,n);return 0>e?(++this.size,r.push([n,t])):r[e][1]=t,this},Tn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(Fi||Mn),string:new Un}},Tn.prototype["delete"]=function(n){return n=be(this,n)["delete"](n),this.size-=n?1:0,n},Tn.prototype.get=function(n){return be(this,n).get(n)},Tn.prototype.has=function(n){return be(this,n).has(n)},Tn.prototype.set=function(n,t){var r=be(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Fn.prototype.add=Fn.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(n){return this.__data__.has(n)},Nn.prototype.clear=function(){this.__data__=new Mn,this.size=0},Nn.prototype["delete"]=function(n){var t=this.__data__;return n=t["delete"](n),this.size=t.size,n},Nn.prototype.get=function(n){return this.__data__.get(n)},Nn.prototype.has=function(n){return this.__data__.has(n)},Nn.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Mn){var e=r.__data__;if(!Fi||199>e.length)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Tn(e)}return r.set(n,t),this.size=r.size,this};var eo=Fr(mt),uo=Fr(At,!0),io=Nr(),oo=Nr(!0),fo=Vi?function(n,t){return Vi.set(n,t),n}:Tu,co=mi?function(n,t){return mi(n,"toString",{configurable:!0,enumerable:!1,value:Mu(t),writable:!0})}:Tu,ao=Ai||function(n){return $n.clearTimeout(n)},lo=Pi&&1/U(new Pi([,-0]))[1]==$?function(n){return new Pi(n)}:Nu,so=Vi?function(n){return Vi.get(n)}:Nu,ho=Ii?function(n){return null==n?[]:(n=Yu(n),i(Ii(n),function(t){return yi.call(n,t)}))}:Zu,po=Ii?function(n){for(var t=[];n;)a(t,ho(n)),n=gi(n);return t}:Zu,_o=Ot;($i&&"[object DataView]"!=_o(new $i(new ArrayBuffer(1)))||Fi&&"[object Map]"!=_o(new Fi)||Ni&&"[object Promise]"!=_o(Ni.resolve())||Pi&&"[object Set]"!=_o(new Pi)||Zi&&"[object WeakMap]"!=_o(new Zi))&&(_o=function(n){var t=Ot(n);if(n=(n="[object Object]"==t?n.constructor:T)?Me(n):"")switch(n){case Gi:return"[object DataView]";case Hi:return"[object Map]";case Ji:return"[object Promise]";case Yi:return"[object Set]";case Qi:return"[object WeakMap]"}return t});var vo=ei?pu:qu,go=Ue(fo),yo=ki||function(n,t){return $n.setTimeout(n,t)},bo=Ue(co),xo=function(n){n=fu(n,function(n){return 500===t.size&&t.clear(),n});var t=n.cache;return n}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(tn,function(n,r,e,u){t.push(e?u.replace(hn,"$1"):r||n)}),t}),jo=fr(function(n,t){return su(n)?yt(n,wt(t,1,su,!0)):[]}),wo=fr(function(n,t){var r=qe(t);return su(r)&&(r=T),su(n)?yt(n,wt(t,1,su,!0),ye(r,2)):[]}),mo=fr(function(n,t){var r=qe(t);return su(r)&&(r=T),su(n)?yt(n,wt(t,1,su,!0),T,r):[]}),Ao=fr(function(n){var t=c(n,Er);return t.length&&t[0]===n[0]?Wt(t):[]}),Eo=fr(function(n){var t=qe(n),r=c(n,Er);return t===qe(r)?t=T:r.pop(),r.length&&r[0]===n[0]?Wt(r,ye(t,2)):[]}),ko=fr(function(n){var t=qe(n),r=c(n,Er);return(t="function"==typeof t?t:T)&&r.pop(),r.length&&r[0]===n[0]?Wt(r,T,t):[]}),So=fr(Ve),Oo=pe(function(n,t){var r=null==n?0:n.length,e=ht(n,t);return ur(n,c(t,function(n){return Se(n,r)?+n:n}).sort(Wr)),e}),Io=fr(function(n){return br(wt(n,1,su,!0))}),Ro=fr(function(n){var t=qe(n);return su(t)&&(t=T),br(wt(n,1,su,!0),ye(t,2))}),zo=fr(function(n){var t=qe(n),t="function"==typeof t?t:T;return br(wt(n,1,su,!0),T,t)}),Wo=fr(function(n,t){return su(n)?yt(n,t):[]}),Bo=fr(function(n){return mr(i(n,su))}),Lo=fr(function(n){var t=qe(n);return su(t)&&(t=T),mr(i(n,su),ye(t,2))}),Uo=fr(function(n){var t=qe(n),t="function"==typeof t?t:T;return mr(i(n,su),T,t)}),Co=fr(Ge),Do=fr(function(n){var t=n.length,t=1<t?n[t-1]:T,t="function"==typeof t?(n.pop(),t):T;return He(n,t)}),Mo=pe(function(n){function t(t){return ht(t,n)}var r=n.length,e=r?n[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof On&&Se(e)?(u=u.slice(e,+e+(r?1:0)),u.__actions__.push({func:Ye,args:[t],thisArg:T}),new En(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(T),n})):this.thru(t)}),To=Tr(function(n,t,r){ii.call(n,r)?++n[r]:st(n,r,1)}),$o=Gr(Fe),Fo=Gr(Ne),No=Tr(function(n,t,r){ii.call(n,r)?n[r].push(t):st(n,r,[t])}),Po=fr(function(t,r,e){var u=-1,i="function"==typeof r,o=lu(t)?Vu(t.length):[];return eo(t,function(t){o[++u]=i?n(r,t,e):Lt(t,r,e)}),o}),Zo=Tr(function(n,t,r){st(n,r,t)}),qo=Tr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Vo=fr(function(n,t){if(null==n)return[];var r=t.length;return 1<r&&Oe(n,t[0],t[1])?t=[]:2<r&&Oe(t[0],t[1],t[2])&&(t=[t[0]]),Xt(n,wt(t,1),[])}),Ko=Ei||function(){return $n.Date.now()},Go=fr(function(n,t,r){var e=1;if(r.length)var u=L(r,de(Go)),e=32|e;return fe(n,e,t,r,u)}),Ho=fr(function(n,t,r){var e=3;if(r.length)var u=L(r,de(Ho)),e=32|e;return fe(t,e,n,r,u)}),Jo=fr(function(n,t){return dt(n,1,t)}),Yo=fr(function(n,t,r){return dt(n,ku(t)||0,r)});fu.Cache=Tn;var Qo=fr(function(t,r){r=1==r.length&&of(r[0])?c(r[0],k(ye())):c(wt(r,1),k(ye()));var e=r.length;return fr(function(u){for(var i=-1,o=Ui(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),Xo=fr(function(n,t){return fe(n,32,T,t,L(t,de(Xo)))}),nf=fr(function(n,t){return fe(n,64,T,t,L(t,de(nf)))}),tf=pe(function(n,t){return fe(n,256,T,T,T,t)}),rf=ee(It),ef=ee(function(n,t){return n>=t}),uf=Ut(function(){return arguments}())?Ut:function(n){return du(n)&&ii.call(n,"callee")&&!yi.call(n,"callee")},of=Vu.isArray,ff=Vn?k(Vn):Ct,cf=Ri||qu,af=Kn?k(Kn):Dt,lf=Gn?k(Gn):Tt,sf=Hn?k(Hn):Nt,hf=Jn?k(Jn):Pt,pf=Yn?k(Yn):Zt,_f=ee(Kt),vf=ee(function(n,t){return n<=t}),gf=$r(function(n,t){if(ze(t)||lu(t))Cr(t,zu(t),n);else for(var r in t)ii.call(t,r)&&ot(n,r,t[r])}),df=$r(function(n,t){Cr(t,Wu(t),n)}),yf=$r(function(n,t,r,e){Cr(t,Wu(t),n,e)}),bf=$r(function(n,t,r,e){Cr(t,zu(t),n,e)}),xf=pe(ht),jf=fr(function(n,t){n=Yu(n);var r=-1,e=t.length,u=2<e?t[2]:T;for(u&&Oe(t[0],t[1],u)&&(e=1);++r<e;)for(var u=t[r],i=Wu(u),o=-1,f=i.length;++o<f;){var c=i[o],a=n[c];(a===T||au(a,ri[c])&&!ii.call(n,c))&&(n[c]=u[c])}return n}),wf=fr(function(t){return t.push(T,ae),n(Sf,T,t)}),mf=Yr(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=ci.call(t)),n[t]=r},Mu(Tu)),Af=Yr(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=ci.call(t)),ii.call(n,t)?n[t].push(r):n[t]=[r]},ye),Ef=fr(Lt),kf=$r(function(n,t,r){Yt(n,t,r)}),Sf=$r(function(n,t,r,e){Yt(n,t,r,e)}),Of=pe(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=Sr(t,n),e||(e=1<t.length),t}),Cr(n,ve(n),r),e&&(r=_t(r,7,le));for(var u=t.length;u--;)xr(r,t[u]);return r}),If=pe(function(n,t){return null==n?{}:nr(n,t)}),Rf=oe(zu),zf=oe(Wu),Wf=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?Uu(t):t)}),Bf=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Lf=qr(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Uf=Zr("toLowerCase"),Cf=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Df=qr(function(n,t,r){return n+(r?" ":"")+Tf(t)}),Mf=qr(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),Tf=Zr("toUpperCase"),$f=fr(function(n,t){try{return r(n,T,t)}catch(r){return hu(r)?r:new Gu(r)}}),Ff=pe(function(n,t){return r(t,function(t){t=De(t),st(n,t,Go(n[t],n))}),n}),Nf=Hr(),Pf=Hr(!0),Zf=fr(function(n,t){return function(r){return Lt(r,n,t)}}),qf=fr(function(n,t){return function(r){return Lt(n,r,t)}}),Vf=Xr(c),Kf=Xr(u),Gf=Xr(h),Hf=re(),Jf=re(!0),Yf=Qr(function(n,t){return n+t},0),Qf=ie("ceil"),Xf=Qr(function(n,t){return n/t},1),nc=ie("floor"),tc=Qr(function(n,t){return n*t},1),rc=ie("round"),ec=Qr(function(n,t){return n-t},0);return mn.after=function(n,t){if("function"!=typeof t)throw new ni("Expected a function");return n=Au(n),function(){if(1>--n)return t.apply(this,arguments)}},mn.ary=ru,mn.assign=gf,mn.assignIn=df,mn.assignInWith=yf,mn.assignWith=bf,mn.at=xf,mn.before=eu,mn.bind=Go,mn.bindAll=Ff,mn.bindKey=Ho,mn.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return of(n)?n:[n]},mn.chain=Je,mn.chunk=function(n,t,r){if(t=(r?Oe(n,t,r):t===T)?1:Li(Au(t),0),r=null==n?0:n.length,!r||1>t)return[];for(var e=0,u=0,i=Vu(Si(r/t));e<r;)i[u++]=hr(n,e,e+=t);return i},mn.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},mn.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Vu(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return a(of(r)?Ur(r):[r],wt(t,1))},mn.cond=function(t){var r=null==t?0:t.length,e=ye();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new ni("Expected a function");return[e(n[0]),n[1]]}):[],fr(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})},mn.conforms=function(n){return vt(_t(n,1))},mn.constant=Mu,mn.countBy=To,mn.create=function(n,t){var r=ro(n);return null==t?r:at(r,t)},mn.curry=uu,mn.curryRight=iu,mn.debounce=ou,mn.defaults=jf,mn.defaultsDeep=wf,mn.defer=Jo,mn.delay=Yo,mn.difference=jo,mn.differenceBy=wo,mn.differenceWith=mo,mn.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),hr(n,0>t?0:t,e)):[]},mn.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),t=e-t,hr(n,0,0>t?0:t)):[]},mn.dropRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!0,!0):[]},mn.dropWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!0):[]},mn.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&"number"!=typeof r&&Oe(n,t,r)&&(r=0,e=u),u=n.length,r=Au(r),0>r&&(r=-r>u?0:u+r),e=e===T||e>u?u:Au(e),0>e&&(e+=u),e=r>e?0:Eu(e);r<e;)n[r++]=t;return n},mn.filter=function(n,t){return(of(n)?i:jt)(n,ye(t,3))},mn.flatMap=function(n,t){return wt(tu(n,t),1)},mn.flatMapDeep=function(n,t){return wt(tu(n,t),$)},mn.flatMapDepth=function(n,t,r){return r=r===T?1:Au(r),wt(tu(n,t),r)},mn.flatten=Pe,mn.flattenDeep=function(n){return(null==n?0:n.length)?wt(n,$):[]},mn.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===T?1:Au(t),wt(n,t)):[]},mn.flip=function(n){return fe(n,512)},mn.flow=Nf,mn.flowRight=Pf,mn.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},mn.functions=function(n){return null==n?[]:Et(n,zu(n))},mn.functionsIn=function(n){return null==n?[]:Et(n,Wu(n))},mn.groupBy=No,mn.initial=function(n){return(null==n?0:n.length)?hr(n,0,-1):[]},mn.intersection=Ao,mn.intersectionBy=Eo,mn.intersectionWith=ko,mn.invert=mf,mn.invertBy=Af,mn.invokeMap=Po,mn.iteratee=$u,mn.keyBy=Zo,mn.keys=zu,mn.keysIn=Wu,mn.map=tu,mn.mapKeys=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,t(n,e,u),n)}),r},mn.mapValues=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,e,t(n,e,u))}),r},mn.matches=function(n){return Ht(_t(n,1))},mn.matchesProperty=function(n,t){return Jt(n,_t(t,1))},mn.memoize=fu,mn.merge=kf,mn.mergeWith=Sf,mn.method=Zf,mn.methodOf=qf,mn.mixin=Fu,mn.negate=cu,mn.nthArg=function(n){return n=Au(n),fr(function(t){return Qt(t,n)})},mn.omit=Of,mn.omitBy=function(n,t){return Bu(n,cu(ye(t)))},mn.once=function(n){return eu(2,n)},mn.orderBy=function(n,t,r,e){return null==n?[]:(of(t)||(t=null==t?[]:[t]),r=e?T:r,of(r)||(r=null==r?[]:[r]),Xt(n,t,r))},mn.over=Vf,mn.overArgs=Qo,mn.overEvery=Kf,mn.overSome=Gf,mn.partial=Xo,mn.partialRight=nf,mn.partition=qo,mn.pick=If,mn.pickBy=Bu,mn.property=Pu,mn.propertyOf=function(n){return function(t){return null==n?T:kt(n,t)}},mn.pull=So,mn.pullAll=Ve,mn.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,ye(r,2)):n},mn.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,T,r):n},mn.pullAt=Oo,mn.range=Hf,mn.rangeRight=Jf,mn.rearg=tf,mn.reject=function(n,t){return(of(n)?i:jt)(n,cu(ye(t,3)))},mn.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=ye(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return ur(n,u),r},mn.rest=function(n,t){if("function"!=typeof n)throw new ni("Expected a function");return t=t===T?t:Au(t),fr(n,t)},mn.reverse=Ke,mn.sampleSize=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Au(t),(of(n)?Qn:ar)(n,t)},mn.set=function(n,t,r){return null==n?n:lr(n,t,r)},mn.setWith=function(n,t,r,e){return e="function"==typeof e?e:T,null==n?n:lr(n,t,r,e)},mn.shuffle=function(n){return(of(n)?ut:sr)(n)},mn.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&"number"!=typeof r&&Oe(n,t,r)?(t=0,r=e):(t=null==t?0:Au(t),r=r===T?e:Au(r)),hr(n,t,r)):[]},mn.sortBy=Vo,mn.sortedUniq=function(n){return n&&n.length?gr(n):[]},mn.sortedUniqBy=function(n,t){return n&&n.length?gr(n,ye(t,2)):[]},mn.split=function(n,t,r){return r&&"number"!=typeof r&&Oe(n,t,r)&&(t=r=T),r=r===T?4294967295:r>>>0,r?(n=Ou(n))&&("string"==typeof t||null!=t&&!sf(t))&&(t=yr(t),!t&&Rn.test(n))?Or(M(n),0,r):n.split(t,r):[]},mn.spread=function(t,r){if("function"!=typeof t)throw new ni("Expected a function");return r=null==r?0:Li(Au(r),0),fr(function(e){var u=e[r];return e=Or(e,0,r),u&&a(e,u),n(t,this,e)})},mn.tail=function(n){var t=null==n?0:n.length;return t?hr(n,1,t):[]},mn.take=function(n,t,r){return n&&n.length?(t=r||t===T?1:Au(t),hr(n,0,0>t?0:t)):[]},mn.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Au(t),t=e-t,hr(n,0>t?0:t,e)):[]},mn.takeRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),!1,!0):[]},mn.takeWhile=function(n,t){return n&&n.length?jr(n,ye(t,3)):[]},mn.tap=function(n,t){return t(n),n},mn.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new ni("Expected a function");return gu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ou(n,t,{leading:e,maxWait:t,trailing:u})},mn.thru=Ye,mn.toArray=wu,mn.toPairs=Rf,mn.toPairsIn=zf,mn.toPath=function(n){return of(n)?c(n,De):ju(n)?[n]:Ur(xo(Ou(n)))},mn.toPlainObject=Su,mn.transform=function(n,t,e){var u=of(n),i=u||cf(n)||pf(n);if(t=ye(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:gu(n)&&pu(o)?ro(gi(n)):{}}return(i?r:mt)(n,function(n,r,u){return t(e,n,r,u)}),e},mn.unary=function(n){return ru(n,1)},mn.union=Io,mn.unionBy=Ro,mn.unionWith=zo,mn.uniq=function(n){return n&&n.length?br(n):[]},mn.uniqBy=function(n,t){return n&&n.length?br(n,ye(t,2)):[]},mn.uniqWith=function(n,t){return t="function"==typeof t?t:T,n&&n.length?br(n,T,t):[]},mn.unset=function(n,t){return null==n||xr(n,t)},mn.unzip=Ge,mn.unzipWith=He,mn.update=function(n,t,r){return null==n?n:lr(n,t,kr(r)(kt(n,t)),void 0)},mn.updateWith=function(n,t,r,e){return e="function"==typeof e?e:T,null!=n&&(n=lr(n,t,kr(r)(kt(n,t)),e)),n},mn.values=Lu,mn.valuesIn=function(n){return null==n?[]:S(n,Wu(n))},mn.without=Wo,mn.words=Du,mn.wrap=function(n,t){return Xo(kr(t),n)},mn.xor=Bo,mn.xorBy=Lo,mn.xorWith=Uo,mn.zip=Co,mn.zipObject=function(n,t){return Ar(n||[],t||[],ot)},mn.zipObjectDeep=function(n,t){return Ar(n||[],t||[],lr)},mn.zipWith=Do,mn.entries=Rf,mn.entriesIn=zf,mn.extend=df,mn.extendWith=yf,Fu(mn,mn),mn.add=Yf,mn.attempt=$f,mn.camelCase=Wf,mn.capitalize=Uu,mn.ceil=Qf,mn.clamp=function(n,t,r){return r===T&&(r=t,t=T),r!==T&&(r=ku(r),r=r===r?r:0),t!==T&&(t=ku(t),t=t===t?t:0),pt(ku(n),t,r)},mn.clone=function(n){return _t(n,4)},mn.cloneDeep=function(n){return _t(n,5)},mn.cloneDeepWith=function(n,t){return t="function"==typeof t?t:T,_t(n,5,t)},mn.cloneWith=function(n,t){return t="function"==typeof t?t:T,_t(n,4,t)},mn.conformsTo=function(n,t){return null==t||gt(n,t,zu(t))},mn.deburr=Cu,mn.defaultTo=function(n,t){return null==n||n!==n?t:n},mn.divide=Xf,mn.endsWith=function(n,t,r){n=Ou(n),t=yr(t);var e=n.length,e=r=r===T?e:pt(Au(r),0,e);return r-=t.length,0<=r&&n.slice(r,e)==t},mn.eq=au,mn.escape=function(n){return(n=Ou(n))&&H.test(n)?n.replace(K,nt):n},mn.escapeRegExp=function(n){return(n=Ou(n))&&en.test(n)?n.replace(rn,"\\$&"):n},mn.every=function(n,t,r){var e=of(n)?u:bt;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},mn.find=$o,mn.findIndex=Fe,mn.findKey=function(n,t){return p(n,ye(t,3),mt)},mn.findLast=Fo,mn.findLastIndex=Ne,mn.findLastKey=function(n,t){return p(n,ye(t,3),At)},mn.floor=nc,mn.forEach=Xe,mn.forEachRight=nu,mn.forIn=function(n,t){return null==n?n:io(n,ye(t,3),Wu)},mn.forInRight=function(n,t){return null==n?n:oo(n,ye(t,3),Wu)},mn.forOwn=function(n,t){return n&&mt(n,ye(t,3))},mn.forOwnRight=function(n,t){return n&&At(n,ye(t,3))},mn.get=Iu,mn.gt=rf,mn.gte=ef,mn.has=function(n,t){return null!=n&&we(n,t,Rt)},mn.hasIn=Ru,mn.head=Ze,mn.identity=Tu,mn.includes=function(n,t,r,e){return n=lu(n)?n:Lu(n),r=r&&!e?Au(r):0,e=n.length,0>r&&(r=Li(e+r,0)),xu(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<v(n,t,r)},mn.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Au(r),0>r&&(r=Li(e+r,0)),v(n,t,r)):-1},mn.inRange=function(n,t,r){return t=mu(t),r===T?(r=t,t=0):r=mu(r),n=ku(n),n>=Ui(t,r)&&n<Li(t,r)},mn.invoke=Ef,mn.isArguments=uf,mn.isArray=of,mn.isArrayBuffer=ff,mn.isArrayLike=lu,mn.isArrayLikeObject=su,mn.isBoolean=function(n){return!0===n||!1===n||du(n)&&"[object Boolean]"==Ot(n)},mn.isBuffer=cf,mn.isDate=af,mn.isElement=function(n){return du(n)&&1===n.nodeType&&!bu(n)},mn.isEmpty=function(n){if(null==n)return!0;if(lu(n)&&(of(n)||"string"==typeof n||"function"==typeof n.splice||cf(n)||pf(n)||uf(n)))return!n.length;var t=_o(n);if("[object Map]"==t||"[object Set]"==t)return!n.size;if(ze(n))return!Vt(n).length;for(var r in n)if(ii.call(n,r))return!1;return!0},mn.isEqual=function(n,t){return Mt(n,t)},mn.isEqualWith=function(n,t,r){var e=(r="function"==typeof r?r:T)?r(n,t):T;return e===T?Mt(n,t,T,r):!!e},mn.isError=hu,mn.isFinite=function(n){return"number"==typeof n&&zi(n)},mn.isFunction=pu,mn.isInteger=_u,mn.isLength=vu,mn.isMap=lf,mn.isMatch=function(n,t){return n===t||$t(n,t,xe(t))},mn.isMatchWith=function(n,t,r){return r="function"==typeof r?r:T,$t(n,t,xe(t),r)},mn.isNaN=function(n){return yu(n)&&n!=+n},mn.isNative=function(n){if(vo(n))throw new Gu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ft(n)},mn.isNil=function(n){return null==n},mn.isNull=function(n){return null===n},mn.isNumber=yu,mn.isObject=gu,mn.isObjectLike=du,mn.isPlainObject=bu,mn.isRegExp=sf,mn.isSafeInteger=function(n){return _u(n)&&-9007199254740991<=n&&9007199254740991>=n},mn.isSet=hf,mn.isString=xu,mn.isSymbol=ju,mn.isTypedArray=pf,mn.isUndefined=function(n){return n===T},mn.isWeakMap=function(n){return du(n)&&"[object WeakMap]"==_o(n)},mn.isWeakSet=function(n){return du(n)&&"[object WeakSet]"==Ot(n)},mn.join=function(n,t){return null==n?"":Wi.call(n,t)},mn.kebabCase=Bf,mn.last=qe,mn.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==T&&(u=Au(r),u=0>u?Li(e+u,0):Ui(u,e-1)),t===t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=_(n,d,u,!0);return n},mn.lowerCase=Lf,mn.lowerFirst=Uf,mn.lt=_f,mn.lte=vf,mn.max=function(n){return n&&n.length?xt(n,Tu,It):T},mn.maxBy=function(n,t){return n&&n.length?xt(n,ye(t,2),It):T},mn.mean=function(n){return y(n,Tu)},mn.meanBy=function(n,t){return y(n,ye(t,2))},mn.min=function(n){return n&&n.length?xt(n,Tu,Kt):T},mn.minBy=function(n,t){return n&&n.length?xt(n,ye(t,2),Kt):T},mn.stubArray=Zu,mn.stubFalse=qu,mn.stubObject=function(){return{}},mn.stubString=function(){return""},mn.stubTrue=function(){return!0},mn.multiply=tc,mn.nth=function(n,t){return n&&n.length?Qt(n,Au(t)):T},mn.noConflict=function(){return $n._===this&&($n._=li),this},mn.noop=Nu,mn.now=Ko,mn.pad=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return!t||e>=t?n:(t=(t-e)/2,ne(Oi(t),r)+n+ne(Si(t),r))},mn.padEnd=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return t&&e<t?n+ne(t-e,r):n},mn.padStart=function(n,t,r){n=Ou(n);var e=(t=Au(t))?D(n):0;return t&&e<t?ne(t-e,r)+n:n},mn.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Di(Ou(n).replace(on,""),t||0)},mn.random=function(n,t,r){if(r&&"boolean"!=typeof r&&Oe(n,t,r)&&(t=r=T),r===T&&("boolean"==typeof t?(r=t,t=T):"boolean"==typeof n&&(r=n,n=T)),n===T&&t===T?(n=0,t=1):(n=mu(n),t===T?(t=n,n=0):t=mu(t)),n>t){var e=n;n=t,t=e}return r||n%1||t%1?(r=Mi(),Ui(n+r*(t-n+Cn("1e-"+((r+"").length-1))),t)):ir(n,t)},mn.reduce=function(n,t,r){var e=of(n)?l:j,u=3>arguments.length;return e(n,ye(t,4),r,u,eo)},mn.reduceRight=function(n,t,r){var e=of(n)?s:j,u=3>arguments.length;return e(n,ye(t,4),r,u,uo)},mn.repeat=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Au(t),or(Ou(n),t)},mn.replace=function(){var n=arguments,t=Ou(n[0]);return 3>n.length?t:t.replace(n[1],n[2])},mn.result=function(n,t,r){t=Sr(t,n);var e=-1,u=t.length;for(u||(u=1,n=T);++e<u;){var i=null==n?T:n[De(t[e])];i===T&&(e=u,i=r),n=pu(i)?i.call(n):i}return n},mn.round=rc,mn.runInContext=et,mn.sample=function(n){return(of(n)?qn:cr)(n)},mn.size=function(n){if(null==n)return 0;if(lu(n))return xu(n)?D(n):n.length;var t=_o(n);return"[object Map]"==t||"[object Set]"==t?n.size:Vt(n).length},mn.snakeCase=Cf,mn.some=function(n,t,r){var e=of(n)?h:pr;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},mn.sortedIndex=function(n,t){return _r(n,t)},mn.sortedIndexBy=function(n,t,r){return vr(n,t,ye(r,2))},mn.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=_r(n,t);if(e<r&&au(n[e],t))return e}return-1},mn.sortedLastIndex=function(n,t){return _r(n,t,!0)},mn.sortedLastIndexBy=function(n,t,r){return vr(n,t,ye(r,2),!0)},mn.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=_r(n,t,!0)-1;if(au(n[r],t))return r}return-1},mn.startCase=Df,mn.startsWith=function(n,t,r){
return n=Ou(n),r=null==r?0:pt(Au(r),0,n.length),t=yr(t),n.slice(r,r+t.length)==t},mn.subtract=ec,mn.sum=function(n){return n&&n.length?m(n,Tu):0},mn.sumBy=function(n,t){return n&&n.length?m(n,ye(t,2)):0},mn.template=function(n,t,r){var e=mn.templateSettings;r&&Oe(n,t,r)&&(t=T),n=Ou(n),t=yf({},t,e,ce),r=yf({},t.imports,e.imports,ce);var u,i,o=zu(r),f=S(r,o),c=0;r=t.interpolate||jn;var a="__p+='";r=Qu((t.escape||jn).source+"|"+r.source+"|"+(r===Q?pn:jn).source+"|"+(t.evaluate||jn).source+"|$","g");var l="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(wn,z),r&&(u=!0,a+="'+__e("+r+")+'"),f&&(i=!0,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=t.variable)||(a="with(obj){"+a+"}"),a=(i?a.replace(P,""):a).replace(Z,"$1").replace(q,"$1;"),a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=$f(function(){return Hu(o,l+"return "+a).apply(T,f)}),t.source=a,hu(t))throw t;return t},mn.times=function(n,t){if(n=Au(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Ui(n,4294967295);for(t=ye(t),n-=4294967295,e=A(e,t);++r<n;)t(r);return e},mn.toFinite=mu,mn.toInteger=Au,mn.toLength=Eu,mn.toLower=function(n){return Ou(n).toLowerCase()},mn.toNumber=ku,mn.toSafeInteger=function(n){return n?pt(Au(n),-9007199254740991,9007199254740991):0===n?n:0},mn.toString=Ou,mn.toUpper=function(n){return Ou(n).toUpperCase()},mn.trim=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(un,""):n&&(t=yr(t))?(n=M(n),r=M(t),t=I(n,r),r=R(n,r)+1,Or(n,t,r).join("")):n},mn.trimEnd=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(fn,""):n&&(t=yr(t))?(n=M(n),t=R(n,M(t))+1,Or(n,0,t).join("")):n},mn.trimStart=function(n,t,r){return(n=Ou(n))&&(r||t===T)?n.replace(on,""):n&&(t=yr(t))?(n=M(n),t=I(n,M(t)),Or(n,t).join("")):n},mn.truncate=function(n,t){var r=30,e="...";if(gu(t))var u="separator"in t?t.separator:u,r="length"in t?Au(t.length):r,e="omission"in t?yr(t.omission):e;n=Ou(n);var i=n.length;if(Rn.test(n))var o=M(n),i=o.length;if(r>=i)return n;if(i=r-D(e),1>i)return e;if(r=o?Or(o,0,i).join(""):n.slice(0,i),u===T)return r+e;if(o&&(i+=r.length-i),sf(u)){if(n.slice(i).search(u)){var f=r;for(u.global||(u=Qu(u.source,Ou(_n.exec(u))+"g")),u.lastIndex=0;o=u.exec(f);)var c=o.index;r=r.slice(0,c===T?i:c)}}else n.indexOf(yr(u),i)!=i&&(u=r.lastIndexOf(u),-1<u&&(r=r.slice(0,u)));return r+e},mn.unescape=function(n){return(n=Ou(n))&&G.test(n)?n.replace(V,tt):n},mn.uniqueId=function(n){var t=++oi;return Ou(n)+t},mn.upperCase=Mf,mn.upperFirst=Tf,mn.each=Xe,mn.eachRight=nu,mn.first=Ze,Fu(mn,function(){var n={};return mt(mn,function(t,r){ii.call(mn.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),mn.VERSION="4.17.10",r("bind bindKey curry curryRight partial partialRight".split(" "),function(n){mn[n].placeholder=mn}),r(["drop","take"],function(n,t){On.prototype[n]=function(r){r=r===T?1:Li(Au(r),0);var e=this.__filtered__&&!t?new On(this):this.clone();return e.__filtered__?e.__takeCount__=Ui(r,e.__takeCount__):e.__views__.push({size:Ui(r,4294967295),type:n+(0>e.__dir__?"Right":"")}),e},On.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){var r=t+1,e=1==r||3==r;On.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:ye(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){var r="take"+(t?"Right":"");On.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");On.prototype[n]=function(){return this.__filtered__?new On(this):this[r](1)}}),On.prototype.compact=function(){return this.filter(Tu)},On.prototype.find=function(n){return this.filter(n).head()},On.prototype.findLast=function(n){return this.reverse().find(n)},On.prototype.invokeMap=fr(function(n,t){return"function"==typeof n?new On(this):this.map(function(r){return Lt(r,n,t)})}),On.prototype.reject=function(n){return this.filter(cu(ye(n)))},On.prototype.slice=function(n,t){n=Au(n);var r=this;return r.__filtered__&&(0<n||0>t)?new On(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==T&&(t=Au(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},On.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},On.prototype.toArray=function(){return this.take(4294967295)},mt(On.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=mn[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(mn.prototype[t]=function(){function t(n){return n=u.apply(mn,a([n],f)),e&&h?n[0]:n}var o=this.__wrapped__,f=e?[1]:arguments,c=o instanceof On,l=f[0],s=c||of(o);s&&r&&"function"==typeof l&&1!=l.length&&(c=s=!1);var h=this.__chain__,p=!!this.__actions__.length,l=i&&!h,c=c&&!p;return!i&&s?(o=c?o:new On(this),o=n.apply(o,f),o.__actions__.push({func:Ye,args:[t],thisArg:T}),new En(o,h)):l&&c?n.apply(this,f):(o=this.thru(t),l?e?o.value()[0]:o.value():o)})}),r("pop push shift sort splice unshift".split(" "),function(n){var t=ti[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);mn.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(of(u)?u:[],n)}return this[r](function(r){return t.apply(of(r)?r:[],n)})}}),mt(On.prototype,function(n,t){var r=mn[t];if(r){var e=r.name+"";(Ki[e]||(Ki[e]=[])).push({name:t,func:r})}}),Ki[Jr(T,2).name]=[{name:"wrapper",func:T}],On.prototype.clone=function(){var n=new On(this.__wrapped__);return n.__actions__=Ur(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ur(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ur(this.__views__),n},On.prototype.reverse=function(){if(this.__filtered__){var n=new On(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},On.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=of(t),u=0>r,i=e?t.length:0;n=i;for(var o=this.__views__,f=0,c=-1,a=o.length;++c<a;){var l=o[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=Ui(n,f+s);break;case"takeRight":f=Li(f,n-s)}}if(n={start:f,end:n},o=n.start,f=n.end,n=f-o,o=u?f:o-1,f=this.__iteratees__,c=f.length,a=0,l=Ui(n,this.__takeCount__),!e||!u&&i==n&&l==n)return wr(t,this.__actions__);e=[];n:for(;n--&&a<l;){for(o+=r,u=-1,i=t[o];++u<c;){var h=f[u],s=h.type,h=(0,h.iteratee)(i);if(2==s)i=h;else if(!h){if(1==s)continue n;break n}}e[a++]=i}return e},mn.prototype.at=Mo,mn.prototype.chain=function(){return Je(this)},mn.prototype.commit=function(){return new En(this.value(),this.__chain__)},mn.prototype.next=function(){this.__values__===T&&(this.__values__=wu(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?T:this.__values__[this.__index__++]}},mn.prototype.plant=function(n){for(var t,r=this;r instanceof An;){var e=$e(r);e.__index__=0,e.__values__=T,t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},mn.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof On?(this.__actions__.length&&(n=new On(this)),n=n.reverse(),n.__actions__.push({func:Ye,args:[Ke],thisArg:T}),new En(n,this.__chain__)):this.thru(Ke)},mn.prototype.toJSON=mn.prototype.valueOf=mn.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},mn.prototype.first=mn.prototype.head,ji&&(mn.prototype[ji]=Qe),mn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($n._=rt,define(function(){return rt})):Nn?((Nn.exports=rt)._=rt,Fn._=rt):$n._=rt}).call(this);
/**
 * gridstack.js 0.4.0
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2018 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(t){if("function"==typeof define&&define.amd)define(["jquery","lodash"],t);else if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(e){}try{_=require("lodash")}catch(e){}t(jQuery,_)}else t(jQuery,_)}(function(t,e){function i(t){this.grid=t}var o=window,a=function(t,e,i){var o=function(){return console.warn("gridstack.js: Function `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+i+"`. It will be **completely** removed in v1.0."),t.apply(this,arguments)};return o.prototype=t.prototype,o},n=function(t,e){console.warn("gridstack.js: Option `"+t+"` is deprecated as of v0.2.5 and has been replaced with `"+e+"`. It will be **completely** removed in v1.0.")},s={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,i,o){return o=o||e.chain(t).map(function(t){return t.x+t.width}).max().value(),i=i!=-1?1:-1,e.sortBy(t,[function(t){return i*(t.x+t.y*o)}])},createStylesheet:function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.setAttribute("data-gs-style-id",t),e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet},removeStylesheet:function(e){t("STYLE[data-gs-style-id="+e+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?(t=t.toLowerCase(),!(""===t||"no"==t||"false"==t||"0"==t)):Boolean(t)},_collisionNodeCheck:function(t){return t!=this.node&&s.isIntercepted(t,this.nn)},_didCollide:function(t){return s.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return s.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var i=t,o="px";if(i&&e.isString(i)){var a=i.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!a)throw new Error("Invalid height");o=a[2]||"px",i=parseFloat(a[1])}return{height:i,unit:o}},removePositioningStyles:function(t){var e=t[0].style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")},getScrollParent:function(t){var e;return e=null==t?null:t.scrollHeight>t.clientHeight?t:s.getScrollParent(t.parentNode)},updateScrollPosition:function(t,e,i){var o=t.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight;if(o.top<0||o.bottom>a){var n=o.bottom-a,d=o.top,r=s.getScrollParent(t),h=r.scrollTop;null!=r&&(o.top<0&&i<0?t.offsetHeight>a?r.scrollTop+=i:r.scrollTop+=Math.abs(d)>Math.abs(i)?i:d:i>0&&(t.offsetHeight>a?r.scrollTop+=i:r.scrollTop+=n>i?i:n),e.position.top+=r.scrollTop-h)}}};s.is_intercepted=a(s.isIntercepted,"is_intercepted","isIntercepted"),s.create_stylesheet=a(s.createStylesheet,"create_stylesheet","createStylesheet"),s.remove_stylesheet=a(s.removeStylesheet,"remove_stylesheet","removeStylesheet"),s.insert_css_rule=a(s.insertCSSRule,"insert_css_rule","insertCSSRule"),i.registeredPlugins=[],i.registerPlugin=function(t){i.registeredPlugins.push(t)},i.prototype.resizable=function(t,e){return this},i.prototype.draggable=function(t,e){return this},i.prototype.droppable=function(t,e){return this},i.prototype.isDroppable=function(t){return!1},i.prototype.on=function(t,e,i){return this};var d=0,r=function(t,e,i,o,a){this.width=t,this["float"]=i||!1,this.height=o||0,this.nodes=a||[],this.onchange=e||function(){},this._updateCounter=0,this._float=this["float"],this._addedNodes=[],this._removedNodes=[]};r.prototype.batchUpdate=function(){this._updateCounter=1,this["float"]=!0},r.prototype.commit=function(){0!==this._updateCounter&&(this._updateCounter=0,this["float"]=this._float,this._packNodes(),this._notify())},r.prototype.getNodeDataByDOMEl=function(t){return e.find(this.nodes,function(e){return t.get(0)===e.el.get(0)})},r.prototype._fixCollisions=function(t){this._sortNodes(-1);var i=t,o=Boolean(e.find(this.nodes,function(t){return t.locked}));for(this["float"]||o||(i={x:0,y:t.y,width:this.width,height:t.height});;){var a=e.find(this.nodes,e.bind(s._collisionNodeCheck,{node:t,nn:i}));if("undefined"==typeof a)return;this.moveNode(a,a.x,t.y+t.height,a.width,a.height,!0)}},r.prototype.isAreaEmpty=function(t,i,o,a){var n={x:t||0,y:i||0,width:o||1,height:a||1},d=e.find(this.nodes,e.bind(function(t){return s.isIntercepted(t,n)},this));return null===d||"undefined"==typeof d},r.prototype._sortNodes=function(t){this.nodes=s.sort(this.nodes,t,this.width)},r.prototype._packNodes=function(){this._sortNodes(),this["float"]?e.each(this.nodes,e.bind(function(t,i){if(!t._updating&&"undefined"!=typeof t._origY&&t.y!=t._origY)for(var o=t.y;o>=t._origY;){var a=e.chain(this.nodes).take(i).find(e.bind(s._didCollide,{n:t,newY:o})).value();a||(t._dirty=!0,t.y=o),--o}},this)):e.each(this.nodes,e.bind(function(t,i){if(!t.locked)for(;t.y>0;){var o=t.y-1,a=0===i;if(i>0){var n=e.chain(this.nodes).take(i).find(e.bind(s._didCollide,{n:t,newY:o})).value();a="undefined"==typeof n}if(!a)break;t._dirty=t.y!=o,t.y=o}},this))},r.prototype._prepareNode=function(t,i){return t=e.defaults(t||{},{width:1,height:1,x:0,y:0}),t.x=parseInt(""+t.x),t.y=parseInt(""+t.y),t.width=parseInt(""+t.width),t.height=parseInt(""+t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,t.width>this.width?t.width=this.width:t.width<1&&(t.width=1),t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.x+t.width>this.width&&(i?t.width=this.width-t.x:t.x=this.width-t.width),t.y<0&&(t.y=0),t},r.prototype._notify=function(){var t=Array.prototype.slice.call(arguments,0);if(t[0]="undefined"==typeof t[0]?[]:[t[0]],t[1]="undefined"==typeof t[1]||t[1],!this._updateCounter){var e=t[0].concat(this.getDirtyNodes());this.onchange(e,t[1])}},r.prototype.cleanNodes=function(){this._updateCounter||e.each(this.nodes,function(t){t._dirty=!1})},r.prototype.getDirtyNodes=function(){return e.filter(this.nodes,function(t){return t._dirty})},r.prototype.addNode=function(t,i){if(t=this._prepareNode(t),"undefined"!=typeof t.maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),"undefined"!=typeof t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),"undefined"!=typeof t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t._id=++d,t._dirty=!0,t.autoPosition){this._sortNodes();for(var o=0;;++o){var a=o%this.width,n=Math.floor(o/this.width);if(!(a+t.width>this.width||e.find(this.nodes,e.bind(s._isAddNodeIntercepted,{x:a,y:n,node:t})))){t.x=a,t.y=n;break}}}return this.nodes.push(t),"undefined"!=typeof i&&i&&this._addedNodes.push(e.clone(t)),this._fixCollisions(t),this._packNodes(),this._notify(),t},r.prototype.removeNode=function(t,i){i="undefined"==typeof i||i,this._removedNodes.push(e.clone(t)),t._id=null,this.nodes=e.without(this.nodes,t),this._packNodes(),this._notify(t,i)},r.prototype.canMoveNode=function(i,o,a,n,s){if(!this.isNodeChangedPosition(i,o,a,n,s))return!1;var d=Boolean(e.find(this.nodes,function(t){return t.locked}));if(!this.height&&!d)return!0;var h,l=new r(this.width,null,this["float"],0,e.map(this.nodes,function(e){return e==i?h=t.extend({},e):t.extend({},e)}));if("undefined"==typeof h)return!0;l.moveNode(h,o,a,n,s);var p=!0;return d&&(p&=!Boolean(e.find(l.nodes,function(t){return t!=h&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.height&&(p&=l.getGridHeight()<=this.height),p},r.prototype.canBePlacedWithRespectToHeight=function(i){if(!this.height)return!0;var o=new r(this.width,null,this["float"],0,e.map(this.nodes,function(e){return t.extend({},e)}));return o.addNode(i),o.getGridHeight()<=this.height},r.prototype.isNodeChangedPosition=function(t,e,i,o,a){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),"undefined"!=typeof t.maxWidth&&(o=Math.min(o,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(a=Math.min(a,t.maxHeight)),"undefined"!=typeof t.minWidth&&(o=Math.max(o,t.minWidth)),"undefined"!=typeof t.minHeight&&(a=Math.max(a,t.minHeight)),t.x!=e||t.y!=i||t.width!=o||t.height!=a},r.prototype.moveNode=function(t,e,i,o,a,n){if(!this.isNodeChangedPosition(t,e,i,o,a))return t;if("number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),"undefined"!=typeof t.maxWidth&&(o=Math.min(o,t.maxWidth)),"undefined"!=typeof t.maxHeight&&(a=Math.min(a,t.maxHeight)),"undefined"!=typeof t.minWidth&&(o=Math.max(o,t.minWidth)),"undefined"!=typeof t.minHeight&&(a=Math.max(a,t.minHeight)),t.x==e&&t.y==i&&t.width==o&&t.height==a)return t;var s=t.width!=o;return t._dirty=!0,t.x=e,t.y=i,t.width=o,t.height=a,t.lastTriedX=e,t.lastTriedY=i,t.lastTriedWidth=o,t.lastTriedHeight=a,t=this._prepareNode(t,s),this._fixCollisions(t),n||(this._packNodes(),this._notify()),t},r.prototype.getGridHeight=function(){return e.reduce(this.nodes,function(t,e){return Math.max(t,e.y+e.height)},0)},r.prototype.beginUpdate=function(t){e.each(this.nodes,function(t){t._origY=t.y}),t._updating=!0},r.prototype.endUpdate=function(){e.each(this.nodes,function(t){t._origY=t.y});var t=e.find(this.nodes,function(t){return t._updating});t&&(t._updating=!1)};var h=function(o,a){var d,h,l=this;a=a||{},this.container=t(o),"undefined"!=typeof a.handle_class&&(a.handleClass=a.handle_class,n("handle_class","handleClass")),"undefined"!=typeof a.item_class&&(a.itemClass=a.item_class,n("item_class","itemClass")),"undefined"!=typeof a.placeholder_class&&(a.placeholderClass=a.placeholder_class,n("placeholder_class","placeholderClass")),"undefined"!=typeof a.placeholder_text&&(a.placeholderText=a.placeholder_text,n("placeholder_text","placeholderText")),"undefined"!=typeof a.cell_height&&(a.cellHeight=a.cell_height,n("cell_height","cellHeight")),"undefined"!=typeof a.vertical_margin&&(a.verticalMargin=a.vertical_margin,n("vertical_margin","verticalMargin")),"undefined"!=typeof a.min_width&&(a.minWidth=a.min_width,n("min_width","minWidth")),"undefined"!=typeof a.static_grid&&(a.staticGrid=a.static_grid,n("static_grid","staticGrid")),"undefined"!=typeof a.is_nested&&(a.isNested=a.is_nested,n("is_nested","isNested")),"undefined"!=typeof a.always_show_resize_handle&&(a.alwaysShowResizeHandle=a.always_show_resize_handle,n("always_show_resize_handle","alwaysShowResizeHandle")),a.itemClass=a.itemClass||"grid-stack-item";var p=this.container.closest("."+a.itemClass).length>0;if(this.opts=e.defaults(a||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,"float":!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:a.alwaysShowResizeHandle||!1,resizable:e.defaults(a.resizable||{},{autoHide:!a.alwaysShowResizeHandle,handles:"se"}),draggable:e.defaults(a.draggable||{},{handle:(a.handleClass?"."+a.handleClass:a.handle?a.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:a.disableDrag||!1,disableResize:a.disableResize||!1,rtl:"auto",removable:!1,removableOptions:e.defaults(a.removableOptions||{},{accept:"."+a.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:a.disableOneColumnMode||!1,oneColumnModeClass:a.oneColumnModeClass||"grid-stack-one-column-mode",ddPlugin:null}),this.opts.ddPlugin===!1?this.opts.ddPlugin=i:null===this.opts.ddPlugin&&(this.opts.ddPlugin=e.first(i.registeredPlugins)||i),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.container.css("direction")),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=p,h="auto"===this.opts.cellHeight,h?l.cellHeight(l.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),p&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new r(this.opts.width,function(t,i){i="undefined"==typeof i||i;var o=0;e.each(this.nodes,function(t){o=Math.max(o,t.y+t.height)}),e.each(t,function(t){i&&null===t._id?t.el&&t.el.remove():t.el.attr("data-gs-x",t.x).attr("data-gs-y",t.y).attr("data-gs-width",t.width).attr("data-gs-height",t.height)}),l._updateStyles(o+10)},this.opts["float"],this.opts.height),this.opts.auto){var g=[],c=this;this.container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(e,i){i=t(i),g.push({el:i,i:parseInt(i.attr("data-gs-x"))+parseInt(i.attr("data-gs-y"))*c.opts.width})}),e.chain(g).sortBy(function(t){return t.i}).each(function(t){l._prepareElement(t.el)}).value()}if(this.setAnimation(this.opts.animate),this.placeholder=t('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=e.throttle(function(){l.cellHeight(l.cellWidth(),!1)},100),this.onResizeHandler=function(){if(h&&l._updateHeightsOnResize(),l._isOneColumnMode()&&!l.opts.disableOneColumnMode){if(d)return;l.container.addClass(l.opts.oneColumnModeClass),d=!0,l.grid._sortNodes(),e.each(l.grid.nodes,function(t){l.container.append(t.el),l.opts.staticGrid||(l.dd.draggable(t.el,"disable"),l.dd.resizable(t.el,"disable"),t.el.trigger("resize"))})}else{if(!d)return;if(l.container.removeClass(l.opts.oneColumnModeClass),d=!1,l.opts.staticGrid)return;e.each(l.grid.nodes,function(t){t.noMove||l.opts.disableDrag||l.dd.draggable(t.el,"enable"),t.noResize||l.opts.disableResize||l.dd.resizable(t.el,"enable"),t.el.trigger("resize")})}},t(window).resize(this.onResizeHandler),this.onResizeHandler(),!l.opts.staticGrid&&"string"==typeof l.opts.removable){var u=t(l.opts.removable);this.dd.isDroppable(u)||this.dd.droppable(u,l.opts.removableOptions),this.dd.on(u,"dropover",function(e,i){var o=t(i.draggable),a=o.data("_gridstack_node");a._grid===l&&(o.data("inTrashZone",!0),l._setupRemovingTimeout(o))}).on(u,"dropout",function(e,i){var o=t(i.draggable),a=o.data("_gridstack_node");a._grid===l&&(o.data("inTrashZone",!1),l._clearRemovingTimeout(o))})}if(!l.opts.staticGrid&&l.opts.acceptWidgets){var _=null,f=function(t,e){var i=_,o=i.data("_gridstack_node"),a=l.getCellFromPixel({left:t.pageX,top:t.pageY},!0),n=Math.max(0,a.x),s=Math.max(0,a.y);o._added||(o._added=!0,o.el=i,o.autoPosition=!0,o.x=n,o.y=s,l.grid.cleanNodes(),l.grid.beginUpdate(o),l.grid.addNode(o),l.container.append(l.placeholder),l.placeholder.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).show(),o.el=l.placeholder,o._beforeDragX=o.x,o._beforeDragY=o.y,l._updateContainerHeight()),l.grid.canMoveNode(o,n,s)&&(l.grid.moveNode(o,n,s),l._updateContainerHeight())};this.dd.droppable(l.container,{accept:function(e){e=t(e);var i=e.data("_gridstack_node");return(!i||i._grid!==l)&&e.is(l.opts.acceptWidgets===!0?".grid-stack-item":l.opts.acceptWidgets)}}).on(l.container,"dropover",function(e,i){var o=(l.container.offset(),t(i.draggable)),a=l.cellWidth(),n=l.cellHeight(),s=o.data("_gridstack_node"),d=s?s.width:Math.ceil(o.outerWidth()/a),r=s?s.height:Math.ceil(o.outerHeight()/n);_=o;var h=l.grid._prepareNode({width:d,height:r,_added:!1,_temporary:!0});o.data("_gridstack_node",h),o.data("_gridstack_node_orig",s),o.on("drag",f)}).on(l.container,"dropout",function(e,i){var o=t(i.draggable);if(o.data("_gridstack_node")){o.unbind("drag",f);var a=o.data("_gridstack_node");a.el=null,l.grid.removeNode(a),l.placeholder.detach(),l._updateContainerHeight(),o.data("_gridstack_node",o.data("_gridstack_node_orig"))}}).on(l.container,"drop",function(e,i){l.placeholder.detach();var o=t(i.draggable).data("_gridstack_node");o._grid=l;var a=t(i.draggable).clone(!1);a.data("_gridstack_node",o);var n=t(i.draggable).data("_gridstack_node_orig");"undefined"!=typeof n&&"undefined"!=typeof n._grid&&n._grid._triggerRemoveEvent(),t(i.helper).remove(),o.el=a,l.placeholder.hide(),s.removePositioningStyles(a),a.find("div.ui-resizable-handle").remove(),a.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).addClass(l.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",f),l.container.append(a),l._prepareElementsByNode(a,o),l._updateContainerHeight(),l.grid._addedNodes.push(o),l._triggerAddEvent(),l._triggerChangeEvent(),l.grid.endUpdate(),t(i.draggable).unbind("drag",f),t(i.draggable).removeData("_gridstack_node"),t(i.draggable).removeData("_gridstack_node_orig")})}};return h.prototype._triggerChangeEvent=function(t){var e=this.grid.getDirtyNodes(),i=!1,o=[];e&&e.length&&(o.push(e),i=!0),(i||t===!0)&&this.container.trigger("change",o)},h.prototype._triggerAddEvent=function(){this.grid._addedNodes&&this.grid._addedNodes.length>0&&(this.container.trigger("added",[e.map(this.grid._addedNodes,e.clone)]),this.grid._addedNodes=[])},h.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&this.grid._removedNodes.length>0&&(this.container.trigger("removed",[e.map(this.grid._removedNodes,e.clone)]),this.grid._removedNodes=[])},h.prototype._initStyles=function(){this._stylesId&&s.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=s.createStylesheet(this._stylesId),null!==this._styles&&(this._styles._max=0)},h.prototype._updateStyles=function(t){if(null!==this._styles&&"undefined"!=typeof this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if("undefined"==typeof t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&s.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var a=this._styles._max;a<t;++a)s.insertCSSRule(this._styles,i+'[data-gs-height="'+(a+1)+'"]',"height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(a+1)+'"]',"min-height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(a+1)+'"]',"max-height: "+e(a+1,a)+";",a),s.insertCSSRule(this._styles,i+'[data-gs-y="'+a+'"]',"top: "+e(a,a)+";",a);this._styles._max=t}}},h.prototype._updateContainerHeight=function(){if(!this.grid._updateCounter){var t=this.grid.getGridHeight(),e=parseInt(this.container.css("min-height"));if(e>0){var i=(e+this.opts.verticalMargin)/(this.cellHeight()+this.opts.verticalMargin);t<i&&(t=i)}this.container.attr("data-gs-current-height",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit))}},h.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},h.prototype._setupRemovingTimeout=function(e){var i=this,o=t(e).data("_gridstack_node");!o._removeTimeout&&i.opts.removable&&(o._removeTimeout=setTimeout(function(){e.addClass("grid-stack-item-removing"),o._isAboutToRemove=!0},i.opts.removeTimeout))},h.prototype._clearRemovingTimeout=function(e){var i=t(e).data("_gridstack_node");i._removeTimeout&&(clearTimeout(i._removeTimeout),i._removeTimeout=null,e.removeClass("grid-stack-item-removing"),i._isAboutToRemove=!1)},h.prototype._prepareElementsByNode=function(e,i){var o,a,n=this,d=function(t,d){var r,h,l=Math.round(d.position.left/o),p=Math.floor((d.position.top+a/2)/a);if("drag"!=t.type&&(r=Math.round(d.size.width/o),h=Math.round(d.size.height/a)),"drag"==t.type){var g=d.position.top-i._prevYPix;i._prevYPix=d.position.top,s.updateScrollPosition(e[0],d,g),e.data("inTrashZone")||l<0||l>=n.grid.width||p<0||!n.grid["float"]&&p>n.grid.getGridHeight()?i._temporaryRemoved||(n.opts.removable===!0&&n._setupRemovingTimeout(e),l=i._beforeDragX,p=i._beforeDragY,n.placeholder.detach(),n.placeholder.hide(),n.grid.removeNode(i),n._updateContainerHeight(),i._temporaryRemoved=!0):(n._clearRemovingTimeout(e),i._temporaryRemoved&&(n.grid.addNode(i),n.placeholder.attr("data-gs-x",l).attr("data-gs-y",p).attr("data-gs-width",r).attr("data-gs-height",h).show(),n.container.append(n.placeholder),i.el=n.placeholder,i._temporaryRemoved=!1))}else if("resize"==t.type&&l<0)return;var c="undefined"!=typeof r?r:i.lastTriedWidth,u="undefined"!=typeof h?h:i.lastTriedHeight;!n.grid.canMoveNode(i,l,p,r,h)||i.lastTriedX===l&&i.lastTriedY===p&&i.lastTriedWidth===c&&i.lastTriedHeight===u||(i.lastTriedX=l,i.lastTriedY=p,i.lastTriedWidth=r,i.lastTriedHeight=h,n.grid.moveNode(i,l,p,r,h),n._updateContainerHeight())},r=function(s,d){n.container.append(n.placeholder);var r=t(this);n.grid.cleanNodes(),n.grid.beginUpdate(i),o=n.cellWidth();var h=Math.ceil(r.outerHeight()/r.attr("data-gs-height"));a=n.container.height()/parseInt(n.container.attr("data-gs-current-height")),n.placeholder.attr("data-gs-x",r.attr("data-gs-x")).attr("data-gs-y",r.attr("data-gs-y")).attr("data-gs-width",r.attr("data-gs-width")).attr("data-gs-height",r.attr("data-gs-height")).show(),i.el=n.placeholder,i._beforeDragX=i.x,i._beforeDragY=i.y,i._prevYPix=d.position.top,n.dd.resizable(e,"option","minWidth",o*(i.minWidth||1)),n.dd.resizable(e,"option","minHeight",h*(i.minHeight||1)),"resizestart"==s.type&&r.find(".grid-stack-item").trigger("resizestart")},h=function(o,a){var d=t(this);if(d.data("_gridstack_node")){var r=!1;if(n.placeholder.detach(),i.el=d,n.placeholder.hide(),i._isAboutToRemove){r=!0;var h=e.data("_gridstack_node")._grid;h._triggerRemoveEvent(),e.removeData("_gridstack_node"),e.remove()}else n._clearRemovingTimeout(e),i._temporaryRemoved?(s.removePositioningStyles(d),d.attr("data-gs-x",i._beforeDragX).attr("data-gs-y",i._beforeDragY).attr("data-gs-width",i.width).attr("data-gs-height",i.height),i.x=i._beforeDragX,i.y=i._beforeDragY,i._temporaryRemoved=!1,n.grid.addNode(i)):(s.removePositioningStyles(d),d.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height));n._updateContainerHeight(),n._triggerChangeEvent(r),n.grid.endUpdate();var l=d.find(".grid-stack");l.length&&"resizestop"==o.type&&(l.each(function(e,i){t(i).data("gridstack").onResizeHandler()}),d.find(".grid-stack-item").trigger("resizestop"),d.find(".grid-stack-item").trigger("gsresizestop")),"resizestop"==o.type&&n.container.trigger("gsresizestop",d)}};this.dd.draggable(e,{start:r,stop:h,drag:d}).resizable(e,{start:r,stop:h,resize:d}),(i.noMove||this._isOneColumnMode()&&!n.opts.disableOneColumnMode||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(e,"disable"),(i.noResize||this._isOneColumnMode()&&!n.opts.disableOneColumnMode||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(e,"disable"),e.attr("data-gs-locked",i.locked?"yes":null)},h.prototype._prepareElement=function(e,i){i="undefined"!=typeof i&&i;var o=this;e=t(e),e.addClass(this.opts.itemClass);var a=o.grid.addNode({x:parseInt(e.attr("data-gs-x"),10),y:parseInt(e.attr("data-gs-y"),10),width:e.attr("data-gs-width"),height:e.attr("data-gs-height"),maxWidth:e.attr("data-gs-max-width"),minWidth:e.attr("data-gs-min-width"),maxHeight:e.attr("data-gs-max-height"),minHeight:e.attr("data-gs-min-height"),autoPosition:s.toBool(e.attr("data-gs-auto-position")),noResize:s.toBool(e.attr("data-gs-no-resize")),noMove:s.toBool(e.attr("data-gs-no-move")),locked:s.toBool(e.attr("data-gs-locked")),resizeHandles:e.attr("data-gs-resize-handles"),el:e,id:e.attr("data-gs-id"),_grid:o},i);e.data("_gridstack_node",a),this._prepareElementsByNode(e,a)},h.prototype.setAnimation=function(t){t?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},h.prototype.addWidget=function(e,i,o,a,n,s,d,r,h,l,p){return e=t(e),"undefined"!=typeof i&&e.attr("data-gs-x",i),"undefined"!=typeof o&&e.attr("data-gs-y",o),"undefined"!=typeof a&&e.attr("data-gs-width",a),"undefined"!=typeof n&&e.attr("data-gs-height",n),"undefined"!=typeof s&&e.attr("data-gs-auto-position",s?"yes":null),"undefined"!=typeof d&&e.attr("data-gs-min-width",d),"undefined"!=typeof r&&e.attr("data-gs-max-width",r),"undefined"!=typeof h&&e.attr("data-gs-min-height",h),"undefined"!=typeof l&&e.attr("data-gs-max-height",l),"undefined"!=typeof p&&e.attr("data-gs-id",p),this.container.append(e),this._prepareElement(e,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),e},h.prototype.makeWidget=function(e){return e=t(e),this._prepareElement(e,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),e},h.prototype.willItFit=function(t,e,i,o,a){var n={x:t,y:e,width:i,height:o,autoPosition:a};return this.grid.canBePlacedWithRespectToHeight(n)},h.prototype.removeWidget=function(e,i){i="undefined"==typeof i||i,e=t(e);var o=e.data("_gridstack_node");o||(o=this.grid.getNodeDataByDOMEl(e)),this.grid.removeNode(o,i),e.removeData("_gridstack_node"),this._updateContainerHeight(),i&&e.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},h.prototype.removeAll=function(t){e.each(this.grid.nodes,e.bind(function(e){this.removeWidget(e.el,t)},this)),this.grid.nodes=[],this._updateContainerHeight()},h.prototype.destroy=function(e){t(window).off("resize",this.onResizeHandler),this.disable(),"undefined"==typeof e||e?this.container.remove():(this.removeAll(!1),this.container.removeData("gridstack")),s.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},h.prototype.resizable=function(e,i){var o=this;return e=t(e),e.each(function(e,a){a=t(a);var n=a.data("_gridstack_node");"undefined"!=typeof n&&null!==n&&(n.noResize=!i,n.noResize||o._isOneColumnMode()&&!o.opts.disableOneColumnMode?o.dd.resizable(a,"disable"):o.dd.resizable(a,"enable"))}),this},h.prototype.movable=function(e,i){var o=this;return e=t(e),e.each(function(e,a){a=t(a);var n=a.data("_gridstack_node");"undefined"!=typeof n&&null!==n&&(n.noMove=!i,n.noMove||o._isOneColumnMode()&&!o.opts.disableOneColumnMode?(o.dd.draggable(a,"disable"),a.removeClass("ui-draggable-handle")):(o.dd.draggable(a,"enable"),a.addClass("ui-draggable-handle")))}),this},h.prototype.enableMove=function(t,e){this.movable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},h.prototype.enableResize=function(t,e){this.resizable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},h.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},h.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},h.prototype.locked=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(a.locked=i||!1,o.attr("data-gs-locked",a.locked?"yes":null))}),this},h.prototype.maxHeight=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.maxHeight=i||!1,o.attr("data-gs-max-height",i)))}),this},h.prototype.minHeight=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.minHeight=i||!1,o.attr("data-gs-min-height",i)))}),this},h.prototype.maxWidth=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.maxWidth=i||!1,o.attr("data-gs-max-width",i)))}),this},h.prototype.minWidth=function(e,i){return e=t(e),e.each(function(e,o){o=t(o);var a=o.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(i)||(a.minWidth=i||!1,o.attr("data-gs-min-width",i)))}),this},h.prototype._updateElement=function(e,i){e=t(e).first();var o=e.data("_gridstack_node");if("undefined"!=typeof o&&null!==o){var a=this;a.grid.cleanNodes(),a.grid.beginUpdate(o),i.call(this,e,o),a._updateContainerHeight(),a._triggerChangeEvent(),a.grid.endUpdate()}},h.prototype.resize=function(t,e,i){this._updateElement(t,function(t,o){e=null!==e&&"undefined"!=typeof e?e:o.width,i=null!==i&&"undefined"!=typeof i?i:o.height,this.grid.moveNode(o,o.x,o.y,e,i)})},h.prototype.move=function(t,e,i){this._updateElement(t,function(t,o){e=null!==e&&"undefined"!=typeof e?e:o.x,i=null!==i&&"undefined"!=typeof i?i:o.y,this.grid.moveNode(o,e,i,o.width,o.height)})},h.prototype.update=function(t,e,i,o,a){this._updateElement(t,function(t,n){e=null!==e&&"undefined"!=typeof e?e:n.x,i=null!==i&&"undefined"!=typeof i?i:n.y,o=null!==o&&"undefined"!=typeof o?o:n.width,a=null!==a&&"undefined"!=typeof a?a:n.height,this.grid.moveNode(n,e,i,o,a)})},h.prototype.verticalMargin=function(t,e){if("undefined"==typeof t)return this.opts.verticalMargin;var i=s.parseHeight(t);this.opts.verticalMarginUnit===i.unit&&this.opts.height===i.height||(this.opts.verticalMarginUnit=i.unit,this.opts.verticalMargin=i.height,e||this._updateStyles())},h.prototype.cellHeight=function(t,e){if("undefined"==typeof t){if(this.opts.cellHeight)return this.opts.cellHeight;var i=this.container.children("."+this.opts.itemClass).first();return Math.ceil(i.outerHeight()/i.attr("data-gs-height"))}var o=s.parseHeight(t);this.opts.cellHeightUnit===o.unit&&this.opts.cellHeight===o.height||(this.opts.cellHeightUnit=o.unit,this.opts.cellHeight=o.height,e||this._updateStyles())},h.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},h.prototype.getCellFromPixel=function(t,e){var i="undefined"!=typeof e&&e?this.container.offset():this.container.position(),o=t.left-i.left,a=t.top-i.top,n=Math.floor(this.container.width()/this.opts.width),s=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(o/n),y:Math.floor(a/s)}},h.prototype.batchUpdate=function(){this.grid.batchUpdate()},h.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},h.prototype.isAreaEmpty=function(t,e,i,o){return this.grid.isAreaEmpty(t,e,i,o)},h.prototype.setStatic=function(t){this.opts.staticGrid=t===!0,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},h.prototype._setStaticClass=function(){var t="grid-stack-static";this.opts.staticGrid===!0?this.container.addClass(t):this.container.removeClass(t)},h.prototype._updateNodeWidths=function(t,e){this.grid._sortNodes(),this.grid.batchUpdate();for(var i={},o=0;o<this.grid.nodes.length;o++)i=this.grid.nodes[o],this.update(i.el,Math.round(i.x*e/t),void 0,Math.round(i.width*e/t),void 0);this.grid.commit()},h.prototype.setGridWidth=function(t,e){this.container.removeClass("grid-stack-"+this.opts.width),e!==!0&&this._updateNodeWidths(this.opts.width,t),
this.opts.width=t,this.grid.width=t,this.container.addClass("grid-stack-"+t)},r.prototype.batch_update=a(r.prototype.batchUpdate),r.prototype._fix_collisions=a(r.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),r.prototype.is_area_empty=a(r.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),r.prototype._sort_nodes=a(r.prototype._sortNodes,"_sort_nodes","_sortNodes"),r.prototype._pack_nodes=a(r.prototype._packNodes,"_pack_nodes","_packNodes"),r.prototype._prepare_node=a(r.prototype._prepareNode,"_prepare_node","_prepareNode"),r.prototype.clean_nodes=a(r.prototype.cleanNodes,"clean_nodes","cleanNodes"),r.prototype.get_dirty_nodes=a(r.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),r.prototype.add_node=a(r.prototype.addNode,"add_node","addNode, "),r.prototype.remove_node=a(r.prototype.removeNode,"remove_node","removeNode"),r.prototype.can_move_node=a(r.prototype.canMoveNode,"can_move_node","canMoveNode"),r.prototype.move_node=a(r.prototype.moveNode,"move_node","moveNode"),r.prototype.get_grid_height=a(r.prototype.getGridHeight,"get_grid_height","getGridHeight"),r.prototype.begin_update=a(r.prototype.beginUpdate,"begin_update","beginUpdate"),r.prototype.end_update=a(r.prototype.endUpdate,"end_update","endUpdate"),r.prototype.can_be_placed_with_respect_to_height=a(r.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),h.prototype._trigger_change_event=a(h.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),h.prototype._init_styles=a(h.prototype._initStyles,"_init_styles","_initStyles"),h.prototype._update_styles=a(h.prototype._updateStyles,"_update_styles","_updateStyles"),h.prototype._update_container_height=a(h.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),h.prototype._is_one_column_mode=a(h.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),h.prototype._prepare_element=a(h.prototype._prepareElement,"_prepare_element","_prepareElement"),h.prototype.set_animation=a(h.prototype.setAnimation,"set_animation","setAnimation"),h.prototype.add_widget=a(h.prototype.addWidget,"add_widget","addWidget"),h.prototype.make_widget=a(h.prototype.makeWidget,"make_widget","makeWidget"),h.prototype.will_it_fit=a(h.prototype.willItFit,"will_it_fit","willItFit"),h.prototype.remove_widget=a(h.prototype.removeWidget,"remove_widget","removeWidget"),h.prototype.remove_all=a(h.prototype.removeAll,"remove_all","removeAll"),h.prototype.min_height=a(h.prototype.minHeight,"min_height","minHeight"),h.prototype.min_width=a(h.prototype.minWidth,"min_width","minWidth"),h.prototype._update_element=a(h.prototype._updateElement,"_update_element","_updateElement"),h.prototype.cell_height=a(h.prototype.cellHeight,"cell_height","cellHeight"),h.prototype.cell_width=a(h.prototype.cellWidth,"cell_width","cellWidth"),h.prototype.get_cell_from_pixel=a(h.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),h.prototype.batch_update=a(h.prototype.batchUpdate,"batch_update","batchUpdate"),h.prototype.is_area_empty=a(h.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),h.prototype.set_static=a(h.prototype.setStatic,"set_static","setStatic"),h.prototype._set_static_class=a(h.prototype._setStaticClass,"_set_static_class","_setStaticClass"),o.GridStackUI=h,o.GridStackUI.Utils=s,o.GridStackUI.Engine=r,o.GridStackUI.GridStackDragDropPlugin=i,t.fn.gridstack=function(e){return this.each(function(){var i=t(this);i.data("gridstack")||i.data("gridstack",new h(this,e))})},o.GridStackUI});
/**
 * gridstack.js 1.0.0-dev
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2017 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(e){if("function"==typeof define&&define.amd)define(["jquery","lodash","gridstack","jquery-ui/data","jquery-ui/disable-selection","jquery-ui/focusable","jquery-ui/form","jquery-ui/ie","jquery-ui/keycode","jquery-ui/labels","jquery-ui/jquery-1-7","jquery-ui/plugin","jquery-ui/safe-active-element","jquery-ui/safe-blur","jquery-ui/scroll-parent","jquery-ui/tabbable","jquery-ui/unique-id","jquery-ui/version","jquery-ui/widget","jquery-ui/widgets/mouse","jquery-ui/widgets/draggable","jquery-ui/widgets/droppable","jquery-ui/widgets/resizable"],e);else if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(r){}try{_=require("lodash")}catch(r){}try{GridStackUI=require("gridstack")}catch(r){}e(jQuery,_,GridStackUI)}else e(jQuery,_,GridStackUI)}(function(e,r,t){function i(e){t.GridStackDragDropPlugin.call(this,e)}window;return t.GridStackDragDropPlugin.registerPlugin(i),i.prototype=Object.create(t.GridStackDragDropPlugin.prototype),i.prototype.constructor=i,i.prototype.resizable=function(t,i){if(t=e(t),"disable"===i||"enable"===i)t.resizable(i);else if("option"===i){var u=arguments[2],a=arguments[3];t.resizable(i,u,a)}else{var n=t.data("gs-resize-handles")?t.data("gs-resize-handles"):this.grid.opts.resizable.handles;t.resizable(r.extend({},this.grid.opts.resizable,{handles:n},{start:i.start||function(){},stop:i.stop||function(){},resize:i.resize||function(){}}))}return this},i.prototype.draggable=function(t,i){return t=e(t),"disable"===i||"enable"===i?t.draggable(i):t.draggable(r.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:i.start||function(){},stop:i.stop||function(){},drag:i.drag||function(){}})),this},i.prototype.droppable=function(r,t){return r=e(r),r.droppable(t),this},i.prototype.isDroppable=function(r,t){return r=e(r),Boolean(r.data("droppable"))},i.prototype.on=function(r,t,i){return e(r).on(t,i),this},i});
var Rex_Navigator=function(e){"use strict";function t(){d=Rexbuilder_Util.$rexContainer.children(".rexpansive_section"),c=d.get(),u=c.length,v=c.filter(function(e){return e.getAttribute("id")&&""!==e.getAttribute("id")}),s=v.length}function i(){r();for(var e=document.getElementById("vertical-nav-label"),t=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]")),i=0;i<t.length;i++)t[i].addEventListener("mouseenter",function(t){var i=t.target.getAttribute("href"),r=t.target.getAttribute("data-section_nav_label");r?e.innerHTML=r:e.innerText=i.replace("#","").replace(/\-/g," "),e.style.display="inline",e.style.opacity="1",e.style.top=R[i].top+R[i].height/2-e.offsetHeight/2+"px",e.style.right=1.5*R[i].width+"px"}),t[i].addEventListener("mouseleave",function(t){e.style.display="none",e.style.opacity="0"})}function r(){for(var e=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]")),t=0;t<e.length;t++){var i=e[t].getAttribute("href"),r=e[t].getBoundingClientRect();R[i]=r}}function n(){var e=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');0!=e.length&&e.hasClass("nav-editor-mode-disable")&&f(e),a=document.querySelector(".vertical-nav"),a&&(Rexbuilder_Util.$window.on("scroll",function(){h()}),_()),x(),i()}var a,l,o,d,c,u,v,s,f=function(t){var i=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");i.each(function(i,r){var n=e(r),a=n.attr("data-rexlive-section-name");if(""!=a){var l=a.replace(/ /gm,"");tmpl.arg="navigator";var o=tmpl("tmpl-navigator-item",{sectionName:a,sectionID:l,number:i+1});t.children("ul").append(o)}})},h=function(){var t,i,r;d.each(function(){t=e(this),null!==this.getAttribute("id")&&""!=this.getAttribute("id")&&(i=document.querySelector('.vertical-nav a[href="#'+this.getAttribute("id")+'"]'),i&&(r=i.getAttribute("data-number")-1,t.offset().top-Rexbuilder_Util.globalViewport.height/2<Rexbuilder_Util.$window.scrollTop()&&t.offset().top+t.height()-Rexbuilder_Util.globalViewport.height/2>Rexbuilder_Util.$window.scrollTop()?o.eq(r).addClass("is-selected"):o.eq(r).removeClass("is-selected")))})},g=function(){o=Rexbuilder_Util.$document.find(".vertical-nav a")},p=function(){l=Rexbuilder_Util.$document.find(".touch .vertical-nav a")},b=function(e){if(void 0!=e.attr("id")&&""!=e.attr("id")){var t=e.attr("id"),i=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),r=i.find('li a[href="#'+t+'"]').parent(),n=e,a="";do if(n=n.next(),a=n.attr("id"),""!=a)break;while(0!=n.length);""==a||void 0==a?i.children("ul").append(r[0]):r.insertBefore(i.find('li a[href="#'+a+'"]').parent())}},m=function(t,i,r){var n=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');if(""!=i){if(""==t.attr("id")){var a=Rexbuilder_Util.$rexContainer.children(".rexpansive_section").length,l=Rexbuilder_Util.$rexContainer.children('.rexpansive_section[id=""]').length,o=t,d="";do if(o=o.next(),d=o.attr("id"),""!=d)break;while(0!=o.length);var c=a-l+1;tmpl.arg="navigator";var u=tmpl("tmpl-navigator-item",{sectionName:r,sectionID:i,number:c});""==d||void 0==d?n.children("ul").append(u):e(u).insertBefore(n.find('li a[href="#'+d+'"]').parent())}else{var v=t.attr("id"),s=n.find('li a[href="#'+v+'"]');s.attr("href","#"+i),s.find(".label").text(r)}t.attr("id",i),t.attr("href","#"+i)}else if(""!=t.attr("id")){var v=t.attr("id"),s=n.find('li a[href="#'+v+'"]').parent();s.remove(),t.attr("id",""),t.removeAttr("href")}x()},x=function(){t(),g(),p(),a&&h()},_=function(){Rexbuilder_Util.$document.on("click",".vertical-nav a",function(t){t.preventDefault();var i=e(t.target);i.is("a")||(i=i.parents("a"));var r=i.attr("href"),n=Rexbuilder_Util.$rexContainer.children(r);Rexbuilder_Util.smoothScroll(n)}),Rexbuilder_Util.$document.on("click",".touch .vertical-nav a",function(){l.find(".rex-label").removeClass("fadeInAndOut"),e(this).find(".rex-label").addClass("fadeInAndOut"),Rexbuilder_Util.$document.find(".touch .vertical-nav").removeClass("open")})},R={};return{init:n,updateNavigator:x,updateNavigatorItem:m,fixNavigatorItemOrder:b,getNavigationDotsPosition:r}}(jQuery);
/*!
 * Flickity PACKAGED v2.2.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */
!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,o,a){(a=a||e||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"!=typeof t)return d=t,this.each(function(t,e){var n=a.data(e,i);n?(n.option(d),n._init()):(n=new o(e,d),a.data(e,i,n))}),this;var e,n,l,h,c,d,u=s.call(arguments,1);return l=u,c="$()."+i+'("'+(n=t)+'")',(e=this).each(function(t,e){var s=a.data(e,i);if(s){var o=s[n];if(o&&"_"!=n.charAt(0)){var d=o.apply(s,l);h=void 0===h?d:h}else r(c+" is not a valid method")}else r(i+" not initialized. Cannot call methods, i.e. "+c)}),void 0!==h?h:e},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var s=Array.prototype.slice,o=t.console,r=void 0===o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function i(s){if(function(){if(!a){a=!0;var s=document.createElement("div");s.style.width="200px",s.style.padding="1px 2px 3px 4px",s.style.borderStyle="solid",s.style.borderWidth="1px 2px 3px 4px",s.style.boxSizing="border-box";var o=document.body||document.documentElement;o.appendChild(s);var r=e(s);n=200==Math.round(t(r.width)),i.isBoxSizeOuter=n,o.removeChild(s)}}(),"string"==typeof s&&(s=document.querySelector(s)),s&&"object"==typeof s&&s.nodeType){var l=e(s);if("none"==l.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<r;e++)t[o[e]]=0;return t}();var h={};h.width=s.offsetWidth,h.height=s.offsetHeight;for(var c=h.isBorderBox="border-box"==l.boxSizing,d=0;d<r;d++){var u=o[d],f=l[u],p=parseFloat(f);h[u]=isNaN(p)?0:p}var g=h.paddingLeft+h.paddingRight,v=h.paddingTop+h.paddingBottom,m=h.marginLeft+h.marginRight,y=h.marginTop+h.marginBottom,b=h.borderLeftWidth+h.borderRightWidth,E=h.borderTopWidth+h.borderBottomWidth,S=c&&n,C=t(l.width);!1!==C&&(h.width=C+(S?0:g+b));var x=t(l.height);return!1!==x&&(h.height=x+(S?0:v+E)),h.innerWidth=h.width-(g+b),h.innerHeight=h.height-(v+E),h.outerWidth=h.width+m,h.outerHeight=h.height+y,h}}var n,s="undefined"==typeof console?function(){}:function(t){console.error(t)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=o.length,a=!1;return i}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){e(t,n)&&s.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}else s.push(t)}),s},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var s=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var o=i.toDashed(n),r="data-"+o,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+o),h=i.makeArray(a).concat(i.makeArray(l)),c=r+"-options",d=t.jQuery;h.forEach(function(t){var i,o=t.getAttribute(r)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(i){return void(s&&s.error("Error parsing "+r+" on "+t.className+": "+i))}var a=new e(t,i);d&&d.data(t,n,a)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,function(t,e){var i={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame(function(){e.animate()})}},positionSlider:function(){var t=this.x;this.options.wrapAround&&1<this.cells.length&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+i+",0,0)":"translateX("+i+")"},dispatchScrollEvent:function(){var t=this.slides[0];if(t){var e=-this.x-t.target,i=e/this.slidesWidth;this.dispatchEvent("scroll",null,[i,e])}},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=0<e?i:0;s.wrapShift(o),e-=s.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x-this.velocity;this.applyForce(t)}},applySelectedAttraction:function(){if((!this.isDraggable||!this.isPointerDown)&&!this.isFreeScrolling&&this.slides.length){var t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction;this.applyForce(t)}}};return i}),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(i,n,s,o,r,a){return e(t,i,n,s,o,r,a)});else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,function(t,e,i,n,s,o,r){function a(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}function l(t,e){var i=n.getQueryElement(t);if(i){if(this.element=i,this.element.flickityGUID){var s=f[this.element.flickityGUID];return s.option(e),s}h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}else d&&d.error("Bad element for Flickity: "+(i||t))}var h=t.jQuery,c=t.getComputedStyle,d=t.console,u=0,f={};l.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},l.createMethods=[];var p=l.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++u;for(var i in this.element.flickityGUID=e,(f[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this),this.options.on){var n=this.options.on[i];this.on(i,n)}l.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),a(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){return this._filterFindCellElements(t).map(function(t){return new s(t,this)},this)},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t&&this.maxCellHeight||0;var e=0;if(0<t){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide?"marginRight":"marginLeft",i=this._getCanCellFit();this.cells.forEach(function(n,s){if(t.cells.length){var r=t.outerWidth-t.firstMargin+(n.size.outerWidth-n.size[e]);i.call(this,s,r)||(t.updateTarget(),t=new o(this),this.slides.push(t)),t.addCell(n)}else t.addCell(n)},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!=0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];0<t;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],r=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){t.target=s?n*this.cellAlign:(t.target=Math.max(t.target,o),Math.min(t.target,r))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h&&this.$element){var s=t+=this.options.namespaceJQueryEvents?".flickity":"";if(e){var o=h.Event(e);o.type=t,s=o}this.$element.trigger(s,i)}},p.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t])){var s=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=s&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},p._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&1<e))return t;var i=n.modulo(t,e),s=Math.abs(i-this.selectedIndex),o=Math.abs(i+e-this.selectedIndex),r=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&o<s?t+=e:!this.isDragSelect&&r<s&&(t-=e),t<0?this.x-=this.slideableWidth:e<=t&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),(this.selectedSlide=t).select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectInitialIndex=function(){var t=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(t&&"string"==typeof t&&this.queryCell(t))return void this.selectCell(t,!1,!0);var e=0;t&&this.slides[t]&&(e=t),this.select(e,!1,!0)}},p.selectCell=function(t,e,i){var n=this.queryCell(t);if(n){var s=this.getCellSlideIndex(n);this.select(s,e,i)}},p.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e||(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(i<=1+2*t)return this.getCellElements();for(var s=[],o=e-t;o<=e+t;o++){var r=this.options.wrapAround?n.modulo(o,i):o,a=this.slides[r];a&&(s=s.concat(a.getCellElements()))}return s},p.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#\.]?[\d\/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(l,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){this.options.watchCSS&&(-1!=c(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},p.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=l.keyboardHandlers[t.keyCode];i&&i.call(this)}},l.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},p.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),a(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),h&&this.$element&&h.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},n.extend(p,r),l.data=function(t){var e=(t=n.getQueryElement(t))&&t.flickityGUID;return e&&f[e]},n.htmlInit(l,"flickity"),h&&h.bridget&&h.bridget("flickity",l),l.setJQuery=function(t){h=t},l.Cell=s,l.Slide=o,l}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindStartEvent=function(t){this._bindStartEvent(t,!0)},n.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},n._bindStartEvent=function(e,i){var n=(i=void 0===i||i)?"addEventListener":"removeEventListener",s="mousedown";t.PointerEvent?s="pointerdown":"ontouchstart"in t&&(s="touchstart"),e[n](s,this)},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},n.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},n.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},n.onpointerdown=function(t){this._pointerDown(t,t)},n._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},n.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(e){if(e){var i=s[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},n.onmousemove=function(t){this._pointerMove(t,t)},n.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},n.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},n._pointerMove=function(t,e){this.pointerMove(t,e)},n.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},n.onmouseup=function(t){this._pointerUp(t,t)},n.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},n.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},n._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},n.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},n._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},n.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},i.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},i}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){for(var i=(e=void 0===e||e)?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",s=0;s<this.handles.length;s++){var o=this.handles[s];this._bindStartEvent(o,e),o[i]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var s={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=s[t.target.nodeName],i=o[t.target.type],n=!e||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},n._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},n.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},n.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(){return{x:t.pageXOffset,y:t.pageYOffset}}n.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var o=e.prototype;n.extend(o,i.prototype),o._touchActionValue="pan-y";var r="createTouch"in document,a=!1;o._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},o.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},o.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},o._uiChangeDrag=function(){delete this.isFreeScrolling},o.pointerDown=function(e,i){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=s(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i)):this._pointerDownDefault(e,i)},o._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var l={INPUT:!0,TEXTAREA:!0,SELECT:!0};return o.pointerDownFocus=function(t){l[t.target.nodeName]||this.focus()},o._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=l[t.target.nodeName];e||i||n||t.preventDefault()},o.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},o.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},o.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},o.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x=i.x%this.slideableWidth);var s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=o<s?.5*(s+o):s;var r=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<r?.5*(s+r):s}this.dragX=s,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i]);
}},o.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},o.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1);return i.distance<n.distance?i.index:n.index},o._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(n+=i,s=e,null!==(e=this.getSlideDistance(-t,n)));)e=Math.abs(e);return{distance:s,index:n-i}},o.getSlideDistance=function(t,e){var i=this.slides.length,s=this.options.wrapAround&&1<i,o=s?n.modulo(e,i):e,r=this.slides[o];if(!r)return null;var a=s?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+a)},o.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return 0<t&&0<e?1:t<0&&e<0?-1:0},o.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,s])},o.onscroll=function(){var t=s(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(3<Math.abs(e)||3<Math.abs(i))&&this._pointerDone()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";function s(t,e){this.direction=t,this.parent=e,this._create()}var o="http://www.w3.org/2000/svg";(s.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(o,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e,i=document.createElementNS(o,"path"),n="string"!=typeof(e=this.parent.options.arrowShape)?"M "+e.x0+",50 L "+e.x1+","+(e.y1+50)+" L "+e.x2+","+(e.y2+50)+" L "+e.x3+",50  L "+e.x2+","+(50-e.y2)+" L "+e.x1+","+(50-e.y1)+" Z":e;return i.setAttribute("d",n),i.setAttribute("class","arrow"),this.isLeft||i.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(i),t},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&1<t.length)this.enable();else{var e=t.length?t.length-1:0,i=this.isPrevious?0:e;this[this.parent.selectedIndex==i?"disable":"enable"]()}},s.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var r=e.prototype;return r._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s((-1),this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},r.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},r.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):e(t,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}(s.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;0<t?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=s.prototype.onClick=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(t.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var s=i.prototype;return s._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},s.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},s.playPlayer=function(){this.player.play()},s.stopPlayer=function(){this.player.stop()},s.pausePlayer=function(){this.player.pause()},s.unpausePlayer=function(){this.player.unpause()},s.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},s.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},s.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){var n=e.prototype;return n.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var n=this.cells.length;e=void 0===e?n:e;var s,o,r=(s=i,o=document.createDocumentFragment(),s.forEach(function(t){o.appendChild(t.element)}),o),a=e==n;if(a)this.slider.appendChild(r);else{var l=this.cells[e].element;this.slider.insertBefore(r,l)}if(0===e)this.cells=i.concat(this.cells);else if(a)this.cells=this.cells.concat(i);else{var h=this.cells.splice(e,n-e);this.cells=this.cells.concat(i).concat(h)}this._sizeCells(i),this.cellChange(e,!0)}},n.append=function(t){this.insert(t,this.cells.length)},n.prepend=function(t){this.insert(t,0)},n.remove=function(t){var e=this.getCells(t);if(e&&e.length){var n=this.cells.length-1;e.forEach(function(t){t.remove();var e=this.cells.indexOf(t);n=Math.min(e,n),i.removeFrom(this.cells,t)},this),this.cellChange(n,!0)}},n.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},n.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){"use strict";function n(t,e){this.img=t,this.flickity=e,this.load()}e.createMethods.push("_createLazyload");var s=e.prototype;return s._createLazyload=function(){this.on("select",this.lazyLoad)},s.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,s=this.getAdjacentCellElements(e),o=[];s.forEach(function(t){var e=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),n=t.getAttribute("data-flickity-lazyload-src"),s=t.getAttribute("data-flickity-lazyload-srcset");if(e||n||s)return[t]}var o=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return i.makeArray(o)}(t);o=o.concat(e)}),o.forEach(function(t){new n(t,this)},this)}},n.prototype.handleEvent=i.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=n,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(t){return t}),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){t.createMethods.push("_createAsNavFor");var i=t.prototype;return i._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},i.setNavCompanion=function(i){i=e.getQueryElement(i);var n=t.data(i);if(n&&n!=this){this.navCompanion=n;var s=this;this.onNavCompanionSelect=function(){s.navCompanionSelect()},n.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},i.navCompanionSelect=function(t){if(this.navCompanion){var e,i,n,s=this.navCompanion.selectedCells[0],o=this.navCompanion.cells.indexOf(s),r=o+this.navCompanion.selectedCells.length-1,a=Math.floor((e=o,i=r,n=this.navCompanion.cellAlign,(i-e)*n+e));if(this.selectCell(a,!1,t),this.removeNavSelectedElements(),!(a>=this.cells.length)){var l=this.cells.slice(o,r+1);this.navSelectedElements=l.map(function(t){return t.element}),this.changeNavSelectedClass("add")}}},i.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},i.activateAsNavFor=function(){this.navCompanionSelect(!0)},i.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},i.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},i.deactivateAsNavFor=function(){this.removeNavSelectedElements()},i.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t,e,s){if(!(this instanceof n))return new n(t,e,s);var o,h=t;"string"==typeof t&&(h=document.querySelectorAll(t)),h?(this.elements=(o=h,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?l.call(o):[o]),this.options=i({},this.options),"function"==typeof e?s=e:i(this.options,e),s&&this.on("always",s),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(h||t))}function s(t){this.img=t}function o(t,e){this.url=t,this.element=e,this.img=new Image}var r=t.jQuery,a=t.console,l=Array.prototype.slice;(n.prototype=Object.create(e.prototype)).options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&h[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var h={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},n.prototype.addImage=function(t){var e=new s(t);this.images.push(e)},n.prototype.addBackground=function(t,e){var i=new o(t,e);this.images.push(i)},n.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},n.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},n.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(s.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},s.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},s.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},s.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},s.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(o.prototype=Object.create(s.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},n.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((r=e).fn.imagesLoaded=function(t,e){return new n(this,t,e).jqDeferred.promise(r(this))})},n.makeJQueryPlugin(),n}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var n=e.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){if(this.options.imagesLoaded){var t=this;i(this.slider).on("progress",function(e,i){var n=t.getParentCell(i.img);t.cellSizeChange(n&&n.element),t.options.freeScroll||t.positionSliderAtSelected()})}},e});
var RexSlider=function(e){"use strict";function t(e){var t=this,i=this.element.getAttribute("data-custom-autoplay-timer")?this.element.getAttribute("data-custom-autoplay-timer"):9e3;t.customAutoplayInterval&&t.customAutoplayInterval.clear(),t.customAutoplayInterval=Rexbuilder_Util.rtimeOut(function(){t.playPlayer()},i),t.pausePlayer()}var i=".rex-slider-wrap",a=".rex-slider-element",r=".flickity-page-dots.rex-slider__custom-nav",l=".flickity-page-dots.rex-slider__custom-nav__preview-slide",n=".rexpansive_section",d=".rex-box-slider-wrap",s=".rex-box-slider-element",o=function(i){function n(){Rexbuilder_Util.addClass(this,"is-dragging")}function d(){Rexbuilder_Util.removeClass(this,"is-dragging")}function s(t,i){for(var a=0;a<x.length;a++)Rexbuilder_Util.pauseVideo(e(x[a].querySelector(".rex-slider-video-wrapper")));var r=Rexbuilder_Util.hasClass(Flickity.data(t.target).selectedCell.element,"rex-slide--video");r&&Rexbuilder_Util.playVideo(e(t.target.querySelector(".rex-slider-video-wrapper")))}var o=i.get(0),c={cellAlign:"left",prevNextButtons:!1,pageDots:!1,cellSelector:a,selectedAttraction:.018,friction:.3,wrapAround:!0,arrowShape:"M 71.080084,1.034481 C 71.763642,0.34482599 72.61809,-1.250001e-8 73.557983,-1.250001e-8 c 0.939893,0 1.794341,0.34482600250001 2.477899,1.03448101250001 1.367117,1.37931 1.367117,3.620689 0,5 L 32.459031,49.999998 76.035882,93.965515 c 1.367117,1.379311 1.367117,3.62069 0,5 -1.367117,1.379315 -3.588681,1.379315 -4.955798,0 L 25.025333,52.499998 c -1.367117,-1.37931 -1.367117,-3.62069 0,-5 l 46.054751,-46.465517 0,0 z"},u=i.parents(".block-has-slider");c.setGallerySize="undefined"!=typeof i.attr("data-set-gallery-size")&&JSON.parse(i.attr("data-set-gallery-size")),c.wrapAround="undefined"==typeof i.attr("data-wrap-around")||JSON.parse(i.attr("data-wrap-around"));var f=i.attr("data-rex-slider-animation");"undefined"!=typeof f&&"true"==f.toString()?c.autoPlay=!0:c.autoPlay=!1;var y=i.attr("data-rex-slider-prev-next");"undefined"!=typeof y&&"1"==y.toString()&&(c.prevNextButtons=!0);var p=i.attr("data-rex-slider-dots");"undefined"!=typeof p&&"1"==p.toString()&&(c.pageDots=!0);var g=i.attr("data-rexlider-lazyload");"undefined"!=typeof g&&"1"==g.toString()&&(c.bgLazyLoad=1,c.lazyLoad=1),i.hasClass("rex-slider--bottom-interface")&&u.addClass("block-has-slider--navigator"),i.find(".rex-slider-element").each(function(t,i){var a=e(i).find(".rex-slider-video-wrapper");Rexbuilder_Util.startVideoPlugin(a)}),1==c.setGallerySize&&(c.on={ready:function(e){var t=this.$element.parents(".rexpansive_section").eq(0);if(t.length>0){var i=Rexbuilder_Util.getGalleryInstance(t);"undefined"!==i&&i.updateElementHeight(this.$element.parents(".grid-stack-item").get(0))}}});var v=!!c.autoPlay;c.prevNextButtons&&v&&(c.pauseAutoPlayOnHover=!1),i.flickity(c),i.flickity("stopPlayer");var x=Array.prototype.slice.call(o.getElementsByClassName("rex-slide--video"));if(i.on("dragStart.flickity",n),i.on("dragEnd.flickity",d),0!==x.length&&i.on("select.flickity",s),c.autoPlay&&i.flickity("playPlayer"),v){var m=i.data("flickity");if(m.customAutoplayInterval=null,c.prevNextButtons&&(m.prevButton.element.addEventListener("click",t.bind(m)),m.nextButton.element.addEventListener("click",t.bind(m))),c.pageDots)for(var h=0;h<m.pageDots.dots.length;h++)m.pageDots.dots[h].addEventListener("click",t.bind(m));m.$element.on("dragEnd.flickity",t.bind(m))}i.attr("data-rex-slider-active",!0),i.find(r).children().first().addClass("is-selected"),i.find(r).on("click",".dot",function(t){var a=e(this),r=a.index();a.addClass("is-selected").siblings(".dot").removeClass("is-selected"),i.flickity("select",r)}),i.find(l).find(".rex-slider__b-label-image--item").hover(function(e){var t=parseInt(e.currentTarget.getAttribute("data-nav-index"));i.flickity("select",t)})},c=function(t){var i=e(t),a={cellAlign:"center",prevNextButtons:!0,pageDots:!0,cellSelector:s,selectedAttraction:.018,friction:.3,initialIndex:null!==t.getAttribute("data-rex-box-slider-initialIndex")?parseInt(t.getAttribute("data-rex-box-slider-initialIndex")):0,setGallerySize:!1,arrowShape:"m 38.79662,40.087413 0,0 c -0.387529,0 -0.757576,-0.154429 -1.031468,-0.425408 L 1.2470862,3.1322842 c -0.56818177,-0.5681815 -0.56818177,-1.4918411 0,-2.060023 0.5681819,-0.56818197 1.4918415,-0.56818197 2.0600234,0 L 38.793706,36.570513 74.294872,1.0722612 c 0.568182,-0.56818197 1.491842,-0.56818197 2.060023,0 0.568182,0.5681819 0.568182,1.4918415 0,2.060023 L 39.825175,39.659091 c -0.273893,0.273893 -0.641026,0.428322 -1.028555,0.428322 l 0,0 0,0 z"},r=t.getAttribute("data-rex-slider-animation");null!==r&&"true"==r&&(a.autoPlay=!0),i.flickity(a),i.flickity("stopPlayer"),i.on("dragStart.flickity",function(){e(this).addClass("is-dragging")}),i.on("dragEnd.flickity",function(){e(this).removeClass("is-dragging")})},u=function(){e(i,n).length>0&&e(i,n).each(function(t,i){RexSlider.initSlider(e(i)),e(i).attr("data-rex-slider-number",t),Rexbuilder_Dom_Util.lastSliderNumber=t}),e(d,n).length>0&&e(d,n).each(function(e,t){c(t)})},f=function(t){"undefined"!=typeof t.data("flickity")&&t.flickity("destroy"),t.find(".rex-slider-video-wrapper").each(function(t,i){Rexbuilder_Util.destroyVideo(e(i),!1)})},y=function(){e(i,n).length>0&&e(i,n).each(function(t,i){f(e(i))}),e(d,n).length>0&&e(d,n).each(function(t,i){f(e(i))})},p=function(){e(i,n).length&&e(i,n).each(function(e,t){var i=Flickity.data(t);i&&i.autoPlay&&i.playPlayer()})},g=function(){u()};return{init:g,initSlider:o,startAutoPlay:p,destroy:y,destroySliderPlugins:f}}(jQuery);
/*
 *  TextFill
 */
!function(t,e,i,s){"use strict";function r(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},a,i),this._defaults=a,this._name=n,this.properties={canvas:null,text:"",ctx:null,img:null,background:null,lines:null,wrap:null},this.init()}var n="textFill",a={maxFontSize:100,textAlignment:"center",fontFamily:"sans-serif",fontWeight:"bold",relative:!1,relativeWrap:""};t.extend(r.prototype,{init:function(){this._defineSettings(),this._defineProperties(),this._attachImage();var i=this;t(e).on("resize",function(){i._resizeCanvas(),i._drawText()})},_defineSettings:function(){this.settings.maxFontSize=parseInt(this.element.dataset.maxFontSize||this.element.getAttribute("data-max-font-size")||this.settings.maxFontSize),this.settings.textAlignment=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.textAlign||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-text-align")||this.settings.textAlignment,this.settings.relativeWrap=this.element.getAttribute("data-relative-wrap")||this.settings.relativeWrap},_defineProperties:function(){this.properties.canvas=this.element.getElementsByClassName("text-fill-canvas")[0],this.properties.text=this.properties.canvas.textContent,this.properties.ctx=this.properties.canvas.getContext("2d"),this.properties.img=i.createElement("img"),this.properties.background=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.backSrc||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-back-src"),this.settings.relative&&""!==this.settings.relativeWrap&&(this.properties.wrap=t(this.element).parents(this.settings.relativeWrap)[0],"undefined"==typeof this.properties.wrap&&(this.settings.relative=!1))},_attachImage:function(){this.properties.img.src=this.properties.background;var t=this;this.properties.img.onload=function(){t._resizeCanvas(),t._drawText(),t.$element.trigger("textfill-render-complete")}},_drawText:function(){var t=this._calcFontSize(this.settings.maxFontSize);this.properties.ctx.font=this.settings.fontWeight+" "+t+"px "+this.settings.fontFamily,this.properties.rows=this._numRows(this.properties.ctx,this.properties.text,(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth)-20),this.properties.canvas.height=this.properties.ctx.height=this.properties.rows*t,this.properties.ctx.clearRect(0,0,this.properties.canvas.width,this.properties.canvas.height),this.properties.ctx.font=this.settings.fontWeight+" "+t+"px "+this.settings.fontFamily,this.properties.ctx.fillStyle=this.properties.ctx.createPattern(this.properties.img,"repeat"),this.properties.ctx.textAlign=this.settings.textAlignment,this.properties.ctx.textBaseline="middle";var e;switch(this.settings.textAlignment){case"left":e=0;break;case"right":e=this.properties.canvas.width;break;case"center":e=this.properties.canvas.width/2;break;default:e=this.properties.canvas.width/2}var i=t/2;this._wrapText(this.properties.ctx,this.properties.text,e,i,(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth)-20,t)},_calcFontSize:function(t){var e=this.settings.maxFontSize/1e3,i=this.properties.relative?this.properties.wrap.offsetWidth*e:this.element.offsetWidth*e,s=i;return s},_wrapText:function(t,e,i,s,r,n){for(var a=e.split(" "),h=(t.measureText(a).width,""),p=0;p<a.length;p++){var o=h+a[p]+" ",l=t.measureText(o),c=l.width;c>r&&p>0?(t.fillText(h,i,s),h=a[p]+" ",s+=n):h=o}h=h.trim(),t.fillText(h,i,s)},_numRows:function(t,e,i){for(var s,r=new Array,n=" ",a=e.split(" "),h=1,p=0;p<a.length;p++)r.unshift(n),r.unshift(a[p]),s=this._partialTextLenght(t,r),s>i&&(r.splice(1,r.length),h++);return h<=a.length?h:a.length},_partialTextLenght:function(t,e){for(var i=0,s=0;s<e.length;s++)i+=t.measureText(e[s]).width;return i},_resizeCanvas:function(){this.properties.canvas.width=this.properties.ctx.canvas.width=Math.floor(this.properties.relative?this.properties.wrap.offsetWidth:this.element.offsetWidth),this.properties.canvas.height=this.properties.ctx.canvas.height=this._calcFontSize(this.settings.maxFontSize+50)},_calcSlope:function(t,e){var i=(e[1]-t[1])/(e[0]-t[0]);return i}}),t.fn[n]=function(e){var i=arguments;if(e===s||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new r(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var a;return this.each(function(){var s=t.data(this,"plugin_"+n);s instanceof r&&"function"==typeof s[e]&&(a=s[e].apply(s,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+n,null)}),a!==s?a:this}}}(jQuery,window,document);
var VimeoVideo=function(e){"use strict";var i=null,o=null,n=function(){i=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--section"),o=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--block")},t=function(){i.length>0&&i.each(function(i,o){var n=e(o).find("iframe")[0];if("undefined"!=typeof Vimeo){var t=new Vimeo.Player(n);t.ready().then(function(){t.setVolume(0)})}})},r=function(i){var n=i;o.length>0&&o.each(function(i,o){var t=e(o).attr("data-vimeo-video-mute"),r=e(o).find("iframe")[0];"undefined"!=typeof Vimeo&&n.addPlayer(t,r)})},l=function(e,i,o){if("undefined"!=typeof this.blockVideos){var n;n="undefined"!=typeof o?new Vimeo.Player(i,o):new Vimeo.Player(i),"1"==e&&n.ready().then(function(){n.setVolume(0)});var t={el:i,player:n};this.blockVideos.push(t)}},d=function(e){if(void 0!==this.blockVideos)for(var i=0,o=this.blockVideos.length;i<o;i++)if(this.blockVideos[i].el===e)return this.blockVideos[i].player;return null},a=function(e){var i,o=!1,n=this.blockVideos.length;for(i=0;i<n;i++)if(this.blockVideos[i].el===e){this.blockVideos[i].player.destroy().then(function(){})["catch"](function(e){}),o=!0;break}o&&this.blockVideos.splice(i,1)},f=function(){this.blockVideos=[],n(),t(),r(this)};return{init:f,findVideo:d,initBlockVideos:r,addPlayer:l,removePlayer:a}}(jQuery);
/*
 *  rexAccordion - v1.0.0
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(t,e,s,n){"use strict";function o(e,s){this.element=e,this.$element=t(e),this.settings=t.extend({},l,s),this._defaults=l,this._name=i,null==this.settings.durationOpen&&(this.settings.durationOpen=this.settings.duration),null==this.settings.durationClose&&(this.settings.durationClose=this.settings.duration);var n=this.$element.find(this.settings.selectors.toggle),o=this.$element.find(this.settings.selectors.content),c=this,r=[];n.each(function(e,s){t(s).closest(c.settings.selectors.self).is(c.$element)&&r.push(s)});var a=[];o.each(function(e,s){t(s).closest(c.settings.selectors.self).is(c.$element)&&a.push(s)}),this.properties={$toggle:t(r),$content:t(a)},this.init()}var i="rexAccordion",l={selectors:{self:".rex-accordion",toggle:".rex-accordion--toggle",content:".rex-accordion--content"},duration:150,durationOpen:null,durationClose:null,noToggleClass:"no-toggle"};t.extend(o.prototype,{init:function(){var e=this;this.updateState(),this.properties.$toggle.each(function(s,n){t(n).on("click",function(n){t(n.srcElement).hasClass(e.settings.noToggleClass)||0!==t(n.srcElement).parents("."+e.settings.noToggleClass).length||e._handle_click(s)})})},updateState:function(){this.$element.hasClass("close")&&this.close_all(),this.$element.hasClass("open")&&this.open_all()},_handle_click:function(t){var e=this;1==this.properties.$toggle.length?this.$element.hasClass("open")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.slideUp({duration:this.settings.durationClose,start:function(s){"function"==typeof e.settings.close.startClbk&&e.settings.close.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.close.progressClbk&&e.settings.close.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.close.completeClbk&&e.settings.close.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):this.$element.hasClass("close")&&(this.$element.addClass("open").removeClass("close"),this.properties.$content.slideDown({duration:this.settings.durationOpen,start:function(s){"function"==typeof e.settings.open.startClbk&&e.settings.open.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.open.progressClbk&&e.settings.open.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.open.completeClbk&&e.settings.open.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):1<this.properties.$toggle.length&&(this.$element.hasClass("open")?"open"==this.properties.$content.eq(t).attr("data-item-status")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(t).slideUp({duration:this.settings.durationClose,start:function(s){"function"==typeof e.settings.close.startClbk&&e.settings.close.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.close.progressClbk&&e.settings.close.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.close.completeClbk&&e.settings.close.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):(this.$element.addClass("close").removeClass("close"),this.properties.$content.not(t).slideUp({duration:this.settings.durationClose,start:function(s){"function"==typeof e.settings.close.startClbk&&e.settings.close.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.close.progressClbk&&e.settings.close.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.close.completeClbk&&e.settings.close.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.eq(t).slideDown({duration:this.settings.durationOpen,start:function(s){"function"==typeof e.settings.open.startClbk&&e.settings.open.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.open.progressClbk&&e.settings.open.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.open.completeClbk&&e.settings.open.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):this.$element.hasClass("close")&&("close"==this.properties.$content.eq(t).attr("data-item-status")?(this.$element.addClass("open").removeClass("close"),this.properties.$content.eq(t).slideDown({duration:this.settings.durationOpen,start:function(s){"function"==typeof e.settings.open.startClbk&&e.settings.open.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.open.progressClbk&&e.settings.open.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.open.completeClbk&&e.settings.open.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(t).slideUp({duration:this.settings.duration,start:function(s){"function"==typeof e.settings.close.startClbk&&e.settings.close.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.close.progressClbk&&e.settings.close.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.close.completeClbk&&e.settings.close.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.not(t).slideDown({duration:this.settings.durationOpen,start:function(s){"function"==typeof e.settings.open.startClbk&&e.settings.open.startClbk.call(this,e,t)},progress:function(s,n,o){"function"==typeof e.settings.open.progressClbk&&e.settings.open.progressClbk.call(this,e,n,t)},complete:function(){"function"==typeof e.settings.open.completeClbk&&e.settings.open.completeClbk.call(this,e,t),e.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open"))))},open_all:function(){this.properties.$content.attr("data-item-status","open"),this.properties.$content.css("display","block"),this.$element.hasClass("close")&&this.$element.addClass("open").removeClass("close")},close_all:function(){this.properties.$content.attr("data-item-status","close"),this.properties.$content.css("display","none"),this.$element.hasClass("open")&&this.$element.addClass("close").removeClass("open")},getState:function(){return this.properties.$content.attr("data-item-status")}}),t.fn[i]=function(e){var s=arguments;if(e===n||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var l;return this.each(function(){var n=t.data(this,"plugin_"+i);n instanceof o&&"function"==typeof n[e]&&(l=n[e].apply(n,Array.prototype.slice.call(s,1))),"destroy"===e&&t.data(this,"plugin_"+i,null)}),l!==n?l:this}}}(jQuery,window,document);
!function(e){"use strict";e.fn.reverse=[].reverse}(jQuery);
/*
 *  Perfect Grid Gallery Editor
 *  @since 2.0.0
 */
!function(t,e,i,r,s){"use strict";function a(t,i){var r,s=Date.now,a=e.requestAnimationFrame,o=s(),n=function(){s()-o<i?r||a(n):t()};return a(n),{clear:function(){r=1}}}function o(t){return t%2==0}function n(t){var e,i,r,s;r=t.getAttribute("data-rex-video-width"),s=t.getAttribute("data-rex-video-height");var a="100%";return e=t.offsetWidth,i=t.offsetHeight,r/s>e/i&&(a=i*r/s*100/e,a+="%"),a}function l(t){var e=t.getElementsByClassName("rex-video-wrap");e.length>0&&(e[0].children[0].style.maxWidth=n(e[0]))}function d(t){if(0===t.length)return 0;var e=0,i=t[0],r=t.parents(".perfect-grid-item").hasClass("block-has-slider"),s=i.cloneNode(!0),a=s.querySelector(".text-editor-span-fix");return a&&a.parentNode.removeChild(a),r||0===s.textContent.trim().length&&0===s.childElementCount||(!y(i,"medium-editor-placeholder")||s.childElementCount>0||0!=t.parents(".pswp-item").length)&&(e=i.offsetHeight),e}function p(e,r){var s,a,o,n,l,d=e[0],p=d.getAttribute("data-rexbuilder-block-id"),h=r.split(", "),g=h.length;for(l=0;l<g;l++)s=i.createElement("span"),x(s,"circle-handle"),x(s,"circle-handle-"+h[l]),s.setAttribute("data-axis",h[l]),o=i.createElement("div"),x(o,"ui-resizable-handle"),x(o,"ui-resizable-"+h[l]),o.setAttribute("data-axis",h[l]),"DIV"===d.tagName.toUpperCase()&&""!==p&&o.setAttribute("id","_handle_"+h[l]),a=t(s),n=t(o),a.appendTo(n),n.appendTo(e)}function h(t){this.batchGridstack(),this.updateCollapsedBlocksHeight(),this.commitGridstack(),setTimeout(g.bind(this,t),500),this.properties.collapsingElements=!1}function g(e){this._updateElementsSizeViewers(),this._createFirstReverseStack(),this._fixImagesDimension();var r=this.$section;if(setTimeout(Rexbuilder_Util.fixYoutube.bind(null,r[0]),1500),!Rexbuilder_Util.windowIsResizing&&!Rexbuilder_Util.domUpdating){var s=jQuery.Event("rexlive:collapsingElementsEnded");s.settings={galleryEditorInstance:this,$section:r,reverseData:e},t(i).trigger(s)}}function u(e,i){if(this.element==e.target&&!Rexbuilder_Util_Editor.undoActive&&!Rexbuilder_Util_Editor.redoActive&&!Rexbuilder_Util_Editor.updatingRowDistances&&!Rexbuilder_Util_Editor.updatingSectionMargins&&!Rexbuilder_Util_Editor.updatingSectionLayout&&!Rexbuilder_Util.domUpdating&&!Rexbuilder_Util.windowIsResizing&&!this.properties.collapsingElements&&!Rexbuilder_Util_Editor.addingNewBlocks&&!Rexbuilder_Util_Editor.removingBlocks&&!Rexbuilder_Util_Editor.updatingImageBg&&!Rexbuilder_Util_Editor.updatingPaddingBlock&&!Rexbuilder_Util_Editor.updatingCollapsedGrid&&!Rexbuilder_Util_Editor.openingModel&&!Rexbuilder_Util_Editor.blockCopying&&!Rexbuilder_Util_Editor.savingPage&&!Rexbuilder_Util_Editor.savingModel&&Rexbuilder_Util_Editor.needToSave){var i={eventName:"rexlive:edited",modelEdited:this.$section.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(this.$section);var r=this.createActionDataMoveBlocksGrid();this.$element.attr("data-rexlive-layout-changed",!0),Rexbuilder_Util_Editor.pushAction(this.$section,"updateSectionBlocksDisposition",t.extend(!0,{},r),t.extend(!0,{},this.properties.reverseDataGridDisposition)),this.properties.reverseDataGridDisposition=r}(Rexbuilder_Util_Editor.addingNewBlocks||Rexbuilder_Util_Editor.updatingSectionLayout||this.properties.collapsingElements||Rexbuilder_Util_Editor.blockCopying)&&this.fixVideoProportion()}function c(t,e){"undefined"!=typeof e&&(Rexbuilder_Util_Editor.elementIsDragging=!0,e.helper.eq(0).find(".text-wrap").blur())}function m(t,e){"undefined"!=typeof e&&(this.updateAllElementsProperties(),Rexbuilder_Util_Editor.elementIsDragging=!1,clearTimeout(this.doubleDownTimer))}function f(e){if("default"!==Rexbuilder_Util.activeLayout)return!1;if(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.currentTarget.getAttribute("rexbuilder-block-id")){var i=t(e.currentTarget),r=i.find(".text-wrap");if(Rexbuilder_Util_Editor.editingElement=!0,Rexbuilder_Util_Editor.editedElement=i,Rexbuilder_Util_Editor.editedTextWrap=r,Rexbuilder_Util_Editor.editingGallery=!0,Rexbuilder_Util_Editor.editedGallery=this,!r.is(":focus")){var s;if(y(e.currentTarget,"rex-flex-top"))s="end";else if(y(e.currentTarget,"rex-flex-middle")){var a;if(e.currentTarget.getAttribute("data-gs-height"))var a=parseInt(e.currentTarget.getAttribute("data-gs-height"))*this.properties.singleHeight-this.properties.gutter;else var a=i.innerHeight();var o=r.innerHeight();s=e.offsetY<a/2-o/2?"begin":"end"}else s=y(e.currentTarget,"rex-flex-bottom")?"begin":"end";"begin"==s?r.focus():Rexbuilder_Live_Utilities.setEndOfContenteditable(r[0])}Rexbuilder_Util_Editor.startEditingElement()}}function b(t){Rexbuilder_Util_Editor.elementDraggingTriggered||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=t.currentTarget.getAttribute("data-rexbuilder-block-id")&&(Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}function _(e,i){this.element=e,this.$element=t(e),this.settings=t.extend({},I,i),this._defaults=I,this._name=E,this.properties={halfSeparator:0,halfSeparatorTop:0,halfSeparatorRight:0,halfSeparatorBottom:0,halfSeparatorLeft:0,halfSeparatorElementTop:0,halfSeparatorElementRight:0,halfSeparatorElementBottom:0,halfSeparatorElementLeft:0,gridTopSeparator:null,gridRightSeparator:null,gridBottomSeparator:null,gridLeftSeparator:null,wrapWidth:0,singleWidth:0,singleHeight:0,paddingTopBottom:!1,setMobilePadding:!1,setDesktopPadding:!1,gutter:0,elementStartingH:0,resizeHandle:"",sectionNumber:null,gridstackInstance:null,gridstackInstanceID:null,serializedData:[],firstStartGrid:!1,gridBlocksHeight:0,editedFromBackend:!1,oneColumModeActive:!1,oldLayout:"",oldCellHeight:0,blocksBottomTop:null,updatingSectionSameGrid:!1,blocksDimensions:[],reverseDataGridDisposition:{},collapsingElements:!1,lastIDBlock:0,numberBlocksVisibileOnGrid:0,beforeCollapseWasFixed:!1,dispositionBeforeCollapsing:{},layoutBeforeCollapsing:{},initialStateGrid:null,mirrorStateGrid:null,fullWidthNaturalBackground:!1,naturalBackground:!1},this.$section=this.$element.parents(this._defaults.gridParentWrap),this.section=this.$section[0],this.init()}var y,x,k,v,E="perfectGridGalleryEditor",I={itemSelector:".perfect-grid-item",gridItemWidth:.0833333333,numberCol:12,gridSizerSelector:".perfect-grid-sizer",galleryLayout:"fixed",separator:20,fullHeight:"false",gridParentWrap:".rexpansive_section",mobilePadding:"false",cellHeightMasonry:5,scrollbarWrapClass:".rexlive-custom-scrollbar",editorMode:!1};"classList"in i.documentElement?(y=function(t,e){return t.classList.contains(e)},x=function(t,e){t.classList.add(e)},k=function(t,e){t.classList.remove(e)}):(y=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},x=function(t,e){y(t,e)||(t.className+=" "+e)},k=function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")}),v=function(t,e){y(t,e)?k(t,e):x(t,e)};var S=function(){var t,e=i.createElement("fakeelement"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in r)if(e.style[t]!==s)return r[t]},w=S();t.extend(_.prototype,{init:function(){"true"!=this.$section.children(".section-data").attr("data-row_edited_live")&&(this.properties.editedFromBackend=!0),this.properties.firstStartGrid=!0,this._setGridID(),this._updateBlocksRexID(),this._countBlocks(),this.clearStateGrid(),this._defineDataSettings(),this._setGutter(),this._defineHalfSeparatorProperties(),this._defineRowSeparator(),this._defineFullWidthNaturalBackground(),this._defineNaturalBackground(),this._setGridPadding(),this._defineDynamicPrivateProperties(),this._prepareElements(),this._launchGridStack(),this.$element.on("change",u.bind(this)),this.$element.on("dblclick",".perfect-grid-item",f.bind(this)),this.$element.on("click",".perfect-grid-item",b),this._updateElementsSizeViewers(),this._linkResizeEvents(),this._linkDragEvents(),this._linkDnDEvents(),this._createFirstReverseStack(),this._updatePlaceholderPosition(),this.saveStateGrid();var t=this.section.getAttribute("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(null===t?this.collapseElements():"true"==t.toString()&&this.collapseElements()),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady(),this.properties.firstStartGrid=!1},_launchGridStack:function(){this.$element.gridstack({auto:!1,autoHide:!1,animate:!0,acceptWidgets:!1,alwaysShowResizeHandle:!0,disableOneColumnMode:!0,cellHeight:this.properties.singleHeight,draggable:{containment:this.element,handle:".rexlive-block-drag-handle",scroll:!1},"float":"masonry"!=this.settings.galleryLayout,resizable:{minWidth:this.properties.singleWidth,minHeight:this.properties.singleHeight,handles:{e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw"}},verticalMargin:0,width:this.settings.numberCol}),this.$element.addClass("gridActive"),this.setGridstackIstanceNumber(),this.properties.gridstackInstance=this.$element.data("gridstack"),this.makeWidgets();var t=this.properties.gridstackInstance,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)y(e[r],"rex-hide-element")&&t.removeWidget(e[r],!1);for(Rexbuilder_Util.domUpdating||"undefined"!=typeof Rexbuilder_Util_Editor.sectionCopying&&!1!==Rexbuilder_Util_Editor.sectionCopying||this.updateBlocksHeight(),r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data");this.updateElementDataHeightProperties(s,parseInt(e[r].getAttribute("data-gs-height")))}this.fixVideoProportion()},makeWidgets:function(){var t=Array.prototype.slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;if(0!==t){for(this.properties.gridstackInstance.batchUpdate(),i=0;i<e;i++)this.properties.gridstackInstance.makeWidget(t[i]);this.properties.gridstackInstance.commit()}},triggerGalleryReady:function(){var e=jQuery.Event("rexlive:galleryReady");e.gallery=this,e.galleryID=this.properties.sectionNumber,t(i).trigger(e)},reInitGridFront:function(t){t="undefined"!=typeof t?t:{},this.settings.galleryLayout=t.galleryLayout,this._prepareElements(),this._launchGridStack();var e=this.$section.attr("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:t.galleryLayout,fullHeight:t.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&("undefined"==typeof e?this.collapseElements():"true"==e.toString()&&this.collapseElements()),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady()},createActionDataMoveBlocksGrid:function(){var t,e=[],i=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder), .grid-stack-item:not(.removing_block)")),r=i.length,s=0;for(s=0;s<r;s++){t=i[s].getAttribute("data-rexbuilder-block-id");var a,o,n,l;a=parseInt(i[s].getAttribute("data-gs-x")),o=parseInt(i[s].getAttribute("data-gs-y")),n=parseInt(i[s].getAttribute("data-gs-width")),l=parseInt(i[s].getAttribute("data-gs-height"));var d={rexID:t,elem:i[s],x:a,y:o,w:n,h:l};e.push(d)}var p={gridstackInstance:this.properties.gridstackInstance,blocks:e,cellHeight:this.properties.singleHeight};return p},_createFirstReverseStack:function(){this.properties.reverseDataGridDisposition=this.createActionDataMoveBlocksGrid()},clearStateGrid:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)t=e[r].getAttribute("data-rexbuilder-block-id"),store.remove(t),store.remove(t+"_noEdits")},saveStateGrid:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++){t=e[r].getAttribute("data-rexbuilder-block-id");var s,a,o,n;s=parseInt(e[r].getAttribute("data-gs-x")),a=parseInt(e[r].getAttribute("data-gs-y")),o=parseInt(e[r].getAttribute("data-gs-width")),n=parseInt(e[r].getAttribute("data-gs-height")),store.set(t,{properties:[{x:s},{y:a},{w:o},{h:n}]}),store.set(t+"_noEdits",{properties:[{x:s},{y:a},{w:o},{h:n}]})}},updateGridSettingsChangeLayout:function(t){this.properties.firstStartGrid=!0,this.$element.removeClass("grid-number-"+this.properties.sectionNumber),this.settings.fullHeight="undefined"!=typeof t.full_height&&t.full_height.toString(),this.properties.elementStartingH=0,this.properties.resizeHandle="",this.properties.firstStartGrid=!1,this.properties.editedFromBackend=!1,this.properties.oneColumModeActive=!1,this.properties.updatingSectionSameGrid=!1,this.properties.blocksBottomTop=null,this.settings.galleryLayout=t.layout;var e=parseInt(t.gutter),i=parseInt(t.top),r=parseInt(t.right),s=parseInt(t.bottom),a=parseInt(t.left),o=20,n={gutter:isNaN(e)?o:e,top:isNaN(i)?o:i,right:isNaN(r)?o:r,bottom:isNaN(s)?o:s,left:isNaN(a)?o:a};this._setGridID(),this.updateGridDistance(n),this.updateFloatingElementsGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.clearStateGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.removeCollapseElementsProperties()},updateGridLayout:function(e,r){if(this.settings.galleryLayout!=e&&(this._saveBlocksPosition(),this.removeCollapseElementsProperties(),this.properties.oldCellHeight=this.properties.singleHeight,this.properties.oldLayout=this.settings.galleryLayout,this.settings.galleryLayout=e,this.settings.fullHeight="false",this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.updateLayoutBlocksHeight(),this.updateFloatingElementsGridstack(),this.commitGridstack(),"undefined"!=typeof r)){var s=this;setTimeout(function(){var e=s;e._updateElementsSizeViewers();var a=jQuery.Event("rexlive:galleryLayoutChanged");a.settings={galleryEditorInstance:e,$section:s.$section,reverseData:r},s.properties.oldLayout="",s.properties.oldCellHeight=s.properties.singleHeight,t(i).trigger(a)},300,r,s)}},updateFloatingElementsGridstack:function(){var t=this.properties.gridstackInstance;t&&("masonry"==this.settings.galleryLayout?(t.grid._float=!1,t.grid["float"]=!1):(t.grid._float=!0,t.grid["float"]=!0))},updateGridstack:function(t){this.batchGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(),this.commitGridstack()},updateGridstackWidth:function(){this.batchGridstack(),this._defineDynamicPrivateProperties(),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!1,this.properties.gridstackInstance.grid["float"]=!1),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(!0),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!0,this.properties.gridstackInstance.grid["float"]=!0),this.commitGridstack()},updateSectionWidthWrap:function(e,r){var s=this.$element.parent();if("100%"==e?(s.removeClass("center-disposition"),s.addClass("full-disposition")):(s.removeClass("full-disposition"),s.addClass("center-disposition")),s.css("max-width",e),"undefined"!=typeof r){this.updateGridstackWidth();var a=this;setTimeout(function(){var e=a;e._updateElementsSizeViewers();var s=jQuery.Event("rexlive:sectionWidthApplyed");s.settings={galleryEditorInstance:e,$section:a.$section,reverseData:r},t(i).trigger(s)},300,r,a)}},updateRowDistances:function(e,r){if(this.updateGridDistance(e),"undefined"!=typeof r){var s=this;this.updateGridstack(),setTimeout(function(){var a=s;a._updateElementsSizeViewers();var o=jQuery.Event("rexlive:rowDistancesApplied");o.settings={galleryEditorInstance:a,$section:s.$section,newDistances:e,reverseData:r},t(i).trigger(o)},300,r,s,e)}},updateRowSectionMargins:function(e,r){if("undefined"!=typeof r){var s=this;this.updateGridstack(),setTimeout(function(){var a=s;a._updateElementsSizeViewers();var o=jQuery.Event("rexlive:sectionMarginsApplied");o.settings={galleryEditorInstance:a,$section:s.$section,newMargins:e,reverseData:r},t(i).trigger(o)},300,r,s,e)}},updateGridDistance:function(e){this.properties.gutter=parseInt(e.gutter),this.properties.gridTopSeparator=parseInt(e.top),this.properties.gridRightSeparator=parseInt(e.right),this.properties.gridBottomSeparator=parseInt(e.bottom),this.properties.gridLeftSeparator=parseInt(e.left),this._setGutter(),this._defineHalfSeparatorProperties(),this.properties.setDesktopPadding=!1,this._setGridPadding();var i,r=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=r.length,a=0;for(a=0;a<s;a++)i=t(r[a]),this._updateElementPadding(i.find(".grid-stack-item-content")),this._updateHandlersPosition(i);this._updatePlaceholderPosition()},refreshGrid:function(){this._defineDynamicPrivateProperties(),this._setGridPadding(),this._fixHeightAllElements()},_countBlocks:function(){var e=0,i=0,r=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=r.length,a=0;for(a=0;a<s;a++){e=a;for(var o,n=/\d+$/gm,l=r[a].getAttribute("id");null!==(o=n.exec(l));)o.i===n.lastIndex&&n.lastIndex++,t.each(o,function(t,e){i=parseInt(e)});i>e&&(e=i)}this.properties.numberBlocksVisibileOnGrid=e,this.properties.lastIDBlock=e},getLastID:function(){return this.properties.lastIDBlock},getRowNumber:function(){return this.properties.sectionNumber},_setGridID:function(){this.properties.sectionNumber=parseInt(this.section.getAttribute("data-rexlive-section-number")),x(this.element,"grid-number-"+this.properties.sectionNumber)},_updateBlocksRexID:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)if(e[r].getAttribute("data-rexbuilder-block-id")===s||""==e[r].getAttribute("data-rexbuilder-block-id")){t=Rexbuilder_Util.createBlockID(),e[r].setAttribute("data-rexbuilder-block-id",t);var a=e[r].querySelector(".rexbuilder-block-data");a&&a.setAttribute("data-rexbuilder_block_id",t)}},saveGrid:function(){var e=this,i="masonry"==e.settings.galleryLayout?e.properties.singleHeight/e.properties.singleWidth:1;this.serializedData=r.map(e.$element.children(".grid-stack-item"),function(e){var r=t(e),s=r.data("_gridstack_node");return{id:e.id,x:s.x,y:Math.round(s.y*i),width:s.width,height:Math.round(s.height*i)}},this)},getGridData:function(){return JSON.stringify(this.serializedData,null,"    ")},getGridstackNodes:function(){return this.properties.gridstackInstance.grid.nodes},getElementBottomTop:function(){var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=i.length,a=0;for(a=0;a<s;a++)y(i[a],"removing_block")||(t=i[a],t.x=parseInt(i[a].attributes["data-gs-x"].value),t.y=parseInt(i[a].attributes["data-gs-y"].value),t.w=parseInt(i[a].attributes["data-gs-width"].value),t.h=parseInt(i[a].attributes["data-gs-height"].value),t.xw=t.x+t.w,t.yh=t.y+t.h,e.push(t));return r.sortBy(e,[function(t){return t.yh},function(t){return t.xw}]).reverse()},getElementsTopBottom:function(){var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),s=i.length,a=0;for(a=0;a<s;a++)y(i[a],"removing_block")||(t=i[a],t.x=parseInt(i[a].getAttribute("data-gs-x")),t.y=parseInt(i[a].getAttribute("data-gs-y")),e.push(t));return r.sortBy(e,[function(t){return t.y},function(t){return t.x}])},batchGridstack:function(){null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.batchUpdate()},commitGridstack:function(){Rexbuilder_Util.domUpdating||null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.commit()},updateFullHeight:function(t){t="undefined"==typeof t||"true"==t.toString(),this.properties.gridBlocksHeight=parseInt(this.element.getAttribute("data-gs-current-height")),this.properties.gridBlocksHeight=0===this.properties.gridBlocksHeight?1:this.properties.gridBlocksHeight;var e;t?"fixed"==this.settings.galleryLayout&&(e=Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):e=this.properties.singleWidth,this.updateGridstackStyles(e),this.$element.attr("data-full-height",t)},updateGridstackStyles:function(t){if(t!==s&&(this.properties.singleHeight=t),0!==this.properties.singleHeight&&null!==this.element.offsetParent&&null!==this.properties.gridstackInstance){var e=this.properties.gridstackInstance;e.cellHeight(this.properties.singleHeight),e._initStyles(),e._updateStyles(this.properties.singleHeight)}},updateGridstackGridSizes:function(t,e){this.properties.singleHeight=e,this.properties.singleWidth=t;var i=this.properties.gridstackInstance;i.cellHeight(e),i._initStyles(),i._updateStyles(this.properties.singleHeight)},restoreBackup:function(){var e,i,r=this;r.$element.children(".grid-stack-item").each(function(){e=this,i=t(this),i.attr({"data-gs-x":e.attributes["data-col"].value-1,"data-gs-y":e.attributes["data-row"].value-1,"data-gs-width":e.attributes["data-width"].value,"data-gs-height":e.attributes["data-height"].value})})},destroyGridstack:function(){if(null!==this.properties.gridstackInstance){var e,i=this.properties.gridstackInstance;i.destroy(!1),this.$element.children(".grid-stack-item").each(function(){e=t(this),e.draggable("destroy"),e.resizable("destroy")}),k(this.element,"grid-stack-instance-"+this.properties.gridstackInstanceID),y(this.element,"grid-stack-one-column-mode")&&k(this.element,"grid-stack-one-column-mode"),this.properties.gridstackInstance=null}},getGridWidth:function(){return this.properties.wrapWidth},setGridWidth:function(t){this.$element.outerWidth(t)},getSingleWidth:function(){return this.properties.singleWidth},getSeparator:function(){return this.properties.gutter},getSectionNumber:function(){return this.properties.sectionNumber},setProperty:function(t){this.properties[t[0]]=t[1]},fillEmptySpaces:function(){var t,e,r,s,a,o,n,l=this.settings.numberCol,d=this._calculateGridHeight(),p=this.properties.gridstackInstance,h=[];for(e=1;e<=d;e++)for(t=1;t<=l;t++)if(p.isAreaEmpty(t-1,e-1,1,1)){for(r=0,s=a=1,o=t,n=e;o<=l&&p.isAreaEmpty(o-1,n-1,1,1);)r=o,o++;for(s=o-t,n++,o=t;n<=d;){for(;o<=r&&p.isAreaEmpty(o-1,n-1,1,1);)o++;if(o-1!=r)break;n++,o=t}a=n-e;var g=i.createElement("div"),u={el:g,x:t-1,y:e-1,w:s,h:a};p.addWidget(u.el,u.x,u.y,u.w,u.h,!1),h.push(u)}var c=this.properties.singleWidth,m=h.length;for(t=0;t<m;t++)p.removeWidget(h[t].el,!0),"masonry"==this.settings.galleryLayout&&(h[t].y=Math.floor(h[t].y*this.properties.singleHeight/c)+1,h[t].h=Math.round(h[t].h*this.properties.singleHeight/c));return h},removeBlock:function(t){this.properties.numberBlocksVisibileOnGrid--,this.properties.gridstackInstance.removeWidget(t,!1),"default"==Rexbuilder_Util.activeLayout&&x(t,"removing_block"),x(t,"rex-hide-element")},reAddBlock:function(t){this.properties.numberBlocksVisibileOnGrid++;var e,i,r,s;e=parseInt(t.attr("data-gs-x")),i=parseInt(t.attr("data-gs-y")),r=parseInt(t.attr("data-gs-width")),s=parseInt(t.attr("data-gs-height")),"default"==Rexbuilder_Util.activeLayout&&t.removeClass("removing_block"),t.removeClass("rex-hide-element"),t.draggable("destroy"),t.resizable("destroy"),t.children(".ui-resizable-handle").remove(),p(t,"e, s, w, se, sw"),this.properties.gridstackInstance.addWidget(t[0],e,i,r,s,!1,1,500,1)},deleteBlock:function(e){var i={targetElement:e,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};this.removeBlock(e.get(0)),this._createFirstReverseStack(),Rexbuilder_Util.stopBlockVideos(e),0==this.properties.numberBlocksVisibileOnGrid?this.$section.addClass("empty-section"):(this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"));var r={targetElement:e,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",r,i)},createNewBlock:function(e,i,r,s){s="undefined"!=typeof s?s:"",Rexbuilder_Util_Editor.addingNewBlocks=!0;var a="text"==s?12:6,o=4;i="undefined"==typeof i?a:parseInt(i),r="masonry"==e?"undefined"==typeof r?Math.round(this.properties.singleWidth*o/this.settings.cellHeightMasonry):parseInt(r):"undefined"==typeof r?o:parseInt(r),i=parseInt(i),r=parseInt(r);var n=this.createBlock(0,0,i,r,s),l={targetElement:n,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};this.properties.gridstackInstance.addWidget(n[0],0,0,i,r,!0,1,500,1),n.filter(".insert-block-animation").one(w,function(t){this.classList.remove("insert-block-animation")});var d=parseInt(n.attr("data-gs-x")),p=parseInt(n.attr("data-gs-y"));this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.update(n[0],d,p,i,r),this.properties.gridstackInstance.commit(),this._createFirstReverseStack();var h={targetElement:n,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:t.extend(!0,{},this.properties.reverseDataGridDisposition)};return Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",h,l),Rexbuilder_Util_Editor.addingNewBlocks=!1,n.removeAttr("data-gs-auto-position"),n.data("gs-height",parseInt(n.attr("data-gs-height"))),n.data("gs-width",parseInt(n.attr("data-gs-width"))),n.data("gs-y",parseInt(n.attr("data-gs-y"))),n.data("gs-x",parseInt(n.attr("data-gs-x"))),n},createBlock:function(e,i,r,s,a){a="undefined"!=typeof a?a:"",this.properties.numberBlocksVisibileOnGrid++,this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),this.properties.lastIDBlock=this.properties.lastIDBlock+1;var o=this.properties.lastIDBlock,n=Rexbuilder_Util.createBlockID();tmpl.arg="block";var l=tmpl("tmpl-new-block",{rexID:n,id:this.properties.sectionNumber+"_"+o,gsWidth:r,gsHeight:s,gsX:e,gsY:i,backendHeight:s,backendWidth:r,backendX:e+1,backendY:i+1,block_type:a}),d=t(l),p={block_type:a};d.append(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",p));var h=d[0];return this._prepareElement(h),this.updateSizeViewerText(h,r,s),d},updateAllElementsProperties:function(){this.properties.editedFromBackend=!1;var t=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder)")),e=t.length,i=0;if(this.properties.updatingSectionSameGrid)for(this.properties.updatingSectionSameGrid=!1,i=0;i<e;i++)this.updateElementAllProperties(t[i]),"undefined"!=typeof store.get(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits")&&store.remove(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits");for(i=0;i<e;i++)this.updateElementAllProperties(t[i])},updateElementAllProperties:function(t){var e,i,r=t,s=this.properties.singleWidth,a=r.querySelector(".rexbuilder-block-data");e=parseInt(r.getAttribute("data-gs-x")),e+=1,r.setAttribute("data-col",e),a.setAttribute("data-col",e),i="masonry"==this.settings.galleryLayout?Math.floor(parseInt(r.getAttribute("data-gs-y"))*this.properties.singleHeight/s):parseInt(r.getAttribute("data-gs-y")),i+=1,r.setAttribute("data-row",i),a.setAttribute("data-row",i);var o=parseInt(r.getAttribute("data-gs-width")),n=r.getAttribute("data-width");r.setAttribute("data-width",o),k(r,"w"+n),x(r,"w"+o),a.setAttribute("data-size_x",o);var l,d=r.getAttribute("data-height");l="masonry"==this.settings.galleryLayout?Math.round(parseInt(r.getAttribute("data-gs-height"))*this.properties.singleHeight/s):parseInt(r.getAttribute("data-gs-height")),r.setAttribute("data-height",l),this.updateElementDataHeightProperties(a,parseInt(r.getAttribute("data-gs-height"))),k(r,"h"+d),x(r,"h"+l),a.setAttribute("data-size_y",l)},_defineDataSettings:function(){this.element.getAttribute("data-separator")&&(this.properties.gutter=parseInt(this.element.getAttribute("data-separator"))),this.element.getAttribute("data-layout")&&(this.settings.galleryLayout=this.element.getAttribute("data-layout").toString()),this.element.getAttribute("data-full-height")&&(this.settings.fullHeight=this.element.getAttribute("data-full-height").toString()),this.element.getAttribute("data-mobile-padding")&&(this.settings.mobilePadding=this.element.getAttribute("data-mobile-padding").toString())},_defineDynamicPrivateProperties:function(){var t=this.element.offsetWidth,e=this.section.getAttribute("data-rex-collapse-grid");if(e&&("default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<=_plugin_frontend_settings.defaultSettings.collapseWidth&&"true"==e.toString()||"true"==e.toString())?this.properties.oneColumModeActive=!0:this.properties.oneColumModeActive=!1,this.properties.wrapWidth=t,this.properties.singleWidth=t*this.settings.gridItemWidth,!this.settings.editorMode&&this.properties.fullWidthNaturalBackground)this._setFullWidthNaturalBackground(),this._setElementsToHeight("12");else if(!this.settings.editorMode&&this.properties.naturalBackground)this._setNaturalBackground(),this._setElementsToHeight("12");else if("masonry"==this.settings.galleryLayout)this.properties.singleHeight=this.settings.cellHeightMasonry;else{var i,r=this.properties.singleHeight;if("true"==this.settings.fullHeight.toString()?(this.properties.gridBlocksHeight=this._calculateGridHeight(),i=Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):i=this.properties.singleWidth,r==i)return!1;this.properties.singleHeight=i}return!0},setFullWidthNaturalBackground:function(){!this.settings.editorMode&&this.properties.fullWidthNaturalBackground&&(this._setFullWidthNaturalBackground(),this._setElementsToHeight("12"))},_setFullWidthNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");if(null!==t&&null!==e&&""!==t&&""!==e){var i=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t);this.section.style.minHeight=i+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(i-this.properties.gutter)/5:this.properties.singleHeight=(i-this.properties.gutter)/12}},setNaturalBackground:function(){!this.settings.editorMode&&this.properties.naturalBackground&&(this._setNaturalBackground(),this._setElementsToHeight("12"))},_setNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");if(null!==t&&null!==e&&""!==t&&""!==e){var i=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t);i>e&&(i=e),this.section.style.minHeight=i+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(i-this.properties.gutter)/5:this.properties.singleHeight=(i-this.properties.gutter)/12}},_setElementsToHeight:function(t){var e=[].slice.call(this.element.getElementsByClassName("perfect-grid-item")),i=e.length,r=0;for(r=0;r<i;r++)e[r].setAttribute("data-gs-min-height",t)},_calculateGridHeight:function(){var t,e=0,i=[].slice.call(this.element.querySelectorAll(".grid-stack-item")),r=i.length,s=0;for(s=0;s<r;s++)-1===i[s].className.indexOf("removing_block")&&(t=parseInt(i[s].getAttribute("data-gs-height"))+parseInt(i[s].getAttribute("data-gs-y")),t>e&&(e=t));return e},_defineHalfSeparatorProperties:function(){o(this.properties.gutter)?(this.properties.halfSeparatorTop=this.properties.gutter/2,
this.properties.halfSeparatorRight=this.properties.gutter/2,this.properties.halfSeparatorBottom=this.properties.gutter/2,this.properties.halfSeparatorLeft=this.properties.gutter/2):(this.properties.halfSeparatorTop=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorRight=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorBottom=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorLeft=Math.floor(this.properties.gutter/2)),this.properties.paddingTopBottom=-1!==this.section.className.indexOf("distance-block-top-bottom")},_defineRowSeparator:function(){this.properties.gridTopSeparator=this.element.getAttribute("data-row-separator-top")?parseInt(this.element.getAttribute("data-row-separator-top")):null,this.properties.gridRightSeparator=this.element.getAttribute("data-row-separator-right")?parseInt(this.element.getAttribute("data-row-separator-right")):null,this.properties.gridBottomSeparator=this.element.getAttribute("data-row-separator-bottom")?parseInt(this.element.getAttribute("data-row-separator-bottom")):null,this.properties.gridLeftSeparator=this.element.getAttribute("data-row-separator-left")?parseInt(this.element.getAttribute("data-row-separator-left")):null},_defineFullWidthNaturalBackground:function(){y(this.section,"full-width-natural-background")&&(this.properties.fullWidthNaturalBackground=!0)},_defineNaturalBackground:function(){y(this.section,"natural-background")&&(this.properties.naturalBackground=!0)},_setGutter:function(){o(this.properties.gutter)?(this.properties.halfSeparatorElementTop=this.properties.gutter/2,this.properties.halfSeparatorElementRight=this.properties.gutter/2,this.properties.halfSeparatorElementBottom=this.properties.gutter/2,this.properties.halfSeparatorElementLeft=this.properties.gutter/2):(this.properties.halfSeparatorElementTop=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementRight=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementBottom=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorElementLeft=Math.ceil(this.properties.gutter/2))},_fixHeightGrid:function(){var t=this.element;this.$element.outerHeight(t.attributes["data-gs-current-height"].value*this.properties.singleWidth)},_updateElementPadding:function(t){t.css({"padding-left":this.properties.halfSeparatorElementLeft,"padding-right":this.properties.halfSeparatorElementRight,"padding-top":this.properties.halfSeparatorElementTop,"padding-bottom":this.properties.halfSeparatorElementBottom})},_updateHandlersPosition:function(t){t.find(".ui-focused-element-highlight").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-e").css({top:this.properties.halfSeparatorElementTop,right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-se").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-s").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-sw").css({bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-w").css({top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft})},_updatePlaceholderPosition:function(){this.properties.gridstackInstance.placeholder.children(".placeholder-content").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom})},_saveBlocksPosition:function(){var e,i,r,s,a,o=this,n="";this.$element.children(".grid-stack-item").each(function(){e=t(this),n=e.attr("data-rexbuilder-block-id"),i=parseInt(e.attr("data-gs-x")),r=parseInt(e.attr("data-gs-y")),s=parseInt(e.attr("data-gs-width")),a=parseInt(e.attr("data-gs-height")),store.set(n,{properties:[{x:i},{y:r},{w:s},{h:a}]}),Rexbuilder_Util_Editor.updatingSectionLayout&&!o.properties.updatingSectionSameGrid&&store.set(n+"_noEdits",{properties:[{x:i},{y:r},{w:s},{h:a}]})})},_restoreBlocksPosition:function(){var e,i=this.properties.gridstackInstance;this.$element.children(".grid-stack-item").each(function(){var r,s,a,o,n;e=t(this),n=Rexbuilder_Util_Editor.updatingSectionLayout&&"undefined"!=typeof store.get(e.attr("data-rexbuilder-block-id")+"_noEdits")?store.get(e.attr("data-rexbuilder-block-id")+"_noEdits"):store.get(e.attr("data-rexbuilder-block-id")),r=parseInt(n.properties[0].x),s=parseInt(n.properties[1].y),a=parseInt(n.properties[2].w),o=parseInt(n.properties[3].h),i.update(this,r,s,a,o)})},createResizePlaceHolder:function(e){var r=e[0],s=i.createElement("div"),a=t(s);e.parent().append(s),a.addClass("resizePlaceHolder"),a.addClass("w"+parseInt(r.attributes["data-width"].value));var o=parseInt(r.attributes["data-row"].value-1)*this.properties.singleWidth,n=parseInt(r.attributes["data-col"].value-1)*this.properties.singleWidth;return a.css("transform","translate("+n+"px, "+o+"px)"),a.css("position","absolute"),a},updateResizePlaceHolder:function(t,e){var i=e[0],r=this.properties.singleWidth,s=(parseInt(i.attributes["data-width"].value),Math.round(parseInt(e.outerWidth())/r));s<=0&&(s=1),t.removeClass(),t.addClass("resizePlaceHolder w"+s);var a=Math.round(parseInt(e.outerHeight())/r);a<=0&&(a=1),t.css("width",s*r+"px"),t.css("height",a*r+"px")},_prepareElements:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;if(this.properties.editedFromBackend&&("undefined"==typeof Rexbuilder_Util_Editor.sectionCopying||!1===Rexbuilder_Util_Editor.sectionCopying))for(i=0;i<e;i++)t[i].setAttribute("data-gs-x",parseInt(t[i].getAttribute("data-col"))-1),t[i].setAttribute("data-gs-y",parseInt(t[i].getAttribute("data-row"))-1),t[i].setAttribute("data-gs-width",t[i].getAttribute("data-width")),t[i].setAttribute("data-gs-height",t[i].getAttribute("data-height"));var r;for(i=0;i<e;i++)this._prepareElement(t[i]),r=t[i].querySelector(".rexbuilder-block-data"),null===r.getAttribute("data-gs_start_h")&&r.setAttribute("data-gs_start_h",parseInt(t[i].getAttribute("data-gs-height")))},_prepareElement:function(e){var i=this,r=t(e);i._prepareElementEditing(r),i._updateElementPadding(r.find(".grid-stack-item-content")),i._updateHandlersPosition(r),i._fixImageSize(e)},updateElementDataHeightProperties:function(t,e){"masonry"==this.settings.galleryLayout?t.setAttribute("data-block_height_masonry",e):t.setAttribute("data-block_height_fixed",e),t.setAttribute("data-gs_start_h",e),t.setAttribute("data-block_height_calculated",e)},_prepareElementEditing:function(t){p(t,"e, s, w, se, sw"),t.find(".grid-item-content").prepend('<div class="rexlive-block-drag-handle"></div>'),t.attr({"data-gs-min-width":1,"data-gs-min-height":1,"data-gs-max-width":500});var e=t[0].querySelector(".rex-slider-wrap");if(null===e){var r=t.find(".text-wrap");if(0==r.length){var s;s=i.createElement("div"),x(s,"text-wrap"),t.find(".rex-custom-scrollbar").append(s)}else if(0==r.children(".text-editor-span-fix").length){var a=i.createElement("span");a.style.display="none",x(a,"text-editor-span-fix"),r.append(a)}}this.addElementListeners(t)},_fixImagesDimension:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;for(i=0;i<e;i++)this._fixImageSize(t[i])},_fixImageSize:function(t){var e=t.querySelector(".grid-item-content");if(null!==e){var i=e.querySelector(".rex-image-wrapper");if(null!==i&&y(i,"natural-image-background")){var r=isNaN(parseInt(e.getAttribute("data-background_image_width")))?-1:parseInt(e.getAttribute("data-background_image_width"));r!=-1&&(t.offsetWidth<r?x(i,"small-width"):k(i,"small-width"))}}},_removeHandles:function(e){e.children(".ui-resizable-handle").each(function(){t(this).remove()})},addElementListeners:function(e){function i(i){var r=t(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(Rexbuilder_Util_Editor.mouseDownEvent=i,(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&i.target!=l&&(clearTimeout(this.downTimer),this.downTimer=setTimeout(function(){n.addClass("drag-up"),e.addClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.mouseDownEvent&&(Rexbuilder_Util_Editor.mouseDownEvent.target=l,Rexbuilder_Util_Editor.mouseDownEvent.srcElement=l,Rexbuilder_Util_Editor.mouseDownEvent.toElement=l,Rexbuilder_Util_Editor.elementDraggingTriggered=!0,e.trigger(Rexbuilder_Util_Editor.mouseDownEvent))},125),clearTimeout(o.doubleDownTimer),o.doubleDownTimer=setTimeout(function(){if(!(Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.editingElement||e.hasClass("ui-resizable-resizing")||e.hasClass("ui-draggable-dragging")||r.hasClass("ui-resizable-handle")||r.hasClass("circle-handle"))&&1===i.which){e.trigger("mouseup");var s=tmpl("tmpl-tool-drag",{}),a=t(s);a.css("position","absolute"),a.css("zIndex",20),e.append(a);var n=e[0].getBoundingClientRect();a.css("left",i.clientX-n.left-a[0].offsetWidth/2),a.css("top",i.clientY-n.top-a[0].offsetHeight/2),e.addClass("grid-stack-item--drag-to-row"),o.$section.addClass("rexpansive-lock-section--overlay")}},1500))):(n.addClass("drag-up"),e.addClass("ui-draggable--drag-up"),i.target=l,i.srcElement=l,i.toElement=l)}function r(i){var r=t(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(Rexbuilder_Util_Editor.elementDraggingTriggered&&(n.removeClass("drag-up"),e.removeClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.elementDraggingTriggered=!1),clearTimeout(this.downTimer),clearTimeout(o.doubleDownTimer),Rexbuilder_Util_Editor.mouseDownEvent=null):(n.removeClass("drag-up"),e.removeClass("ui-draggable--drag-up"))}function s(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=e,o.focusElement(Rexbuilder_Util_Editor.focusedElement))}function a(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=e.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=e,o.unFocusElement(Rexbuilder_Util_Editor.focusedElement))}var o=this,n=e.find(".rexlive-block-drag-handle"),l=(e.find(".text-wrap"),n[0]);e.on("mousedown",i),e.on("mouseup",r),e.on("mouseenter",s),e.on("mouseleave",a)},unFocusElementEditing:function(t){t.length>0&&t.removeClass("focused")},focusElementEditing:function(t){var e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;for(r=0;r<i;r++)k(e[r],"focused");t.length>0&&t.addClass("focused")},focusElement:function(t){t&&t.length>0&&t.addClass("focused"),this.$section.addClass("focusedRow")},unFocusElement:function(t){t.length>0&&t.removeClass("focused"),this.$section.removeClass("focusedRow")},_updateElementsSizeViewers:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;for(i=0;i<e;i++)this.updateSizeViewerSizes(t[i]),this.checkBlockDimension(t[i])},updateSizeViewerText:function(t,e,i,r,a){if(r="undefined"!=typeof r?r:t.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),a="undefined"!=typeof a?a:t.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),e===s||i===s){var e,i;e=parseInt(t.getAttribute("data-gs-width")),i=parseInt(t.getAttribute("data-gs-height")),"masonry"==this.settings.galleryLayout&&(i=Math.round(i*this.properties.singleHeight)-this.properties.gutter)}var o=e+" x "+i,n=e+"x"+i;r&&(r.textContent=o),a&&(a.textContent=n)},updateBlocksSizes:function(t){if("undefined"!=typeof t){this.properties.gridstackInstance.batchUpdate();for(var e=0;e<t.length;e++){var i=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t[e].rexID+'"]');this.properties.gridstackInstance.update(i,t[e].x,t[e].y,t[e].w,t[e].h),this.updateSizeViewerText(i,t[e].w,t[e].h)}this.properties.gridstackInstance.commit()}},updateBlockSize:function(t){this.properties.gridstackInstance.batchUpdate();var e=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t.rexID+'"]');this.properties.gridstackInstance.update(e,t.x,t.y,t.w,t.h),this.updateSizeViewerText(e,t.w,t.h),this.properties.gridstackInstance.commit()},updateSizeViewerSizes:function(t){this.updateSizeViewerText(t,t.getAttribute("data-gs-width"),this.calculateHeightSizeViewer(t))},calculateHeightSizeViewer:function(t){var e=parseInt(t.getAttribute("data-gs-height"));return"masonry"==this.settings.galleryLayout?e*this.properties.singleHeight-this.properties.gutter:e},checkBlockDimension:function(t,e){e="undefined"!=typeof e?e:parseInt(t.getAttribute("data-gs-width"))*this.properties.singleWidth,e<190?x(t,"ui-tools--view-mobile"):k(t,"ui-tools--view-mobile"),e<100?x(t,"ui-hide-mobile-size-viewer"):k(t,"ui-hide-mobile-size-viewer")},_linkResizeEvents:function(){function e(e,i){i.element.is("span")||(H.properties.resizeHandle=t(e.toElement).attr("data-axis"),o=e.target,E=e.target.querySelector(".grid-item-content"),I=e.target.querySelector(".grid-item-content-wrap"),_=e.target.querySelector(".text-wrap"),v=t(_),A=e.target.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),R=e.target.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),B=y(e.target,"block-has-slider"),h=isNaN(parseInt(E.getAttribute("data-background_image_width")))?0:parseInt(E.getAttribute("data-background_image_width")),g=isNaN(parseInt(E.getAttribute("data-background_image_height")))?0:parseInt(E.getAttribute("data-background_image_height")),S=E.querySelector(".rex-image-wrapper"),w=null!==S&&y(S,"natural-image-background"),Rexbuilder_Util_Editor.elementIsResizing=!0,n=parseInt(e.target.getAttribute("data-gs-x")),"e"==H.properties.resizeHandle||"se"==H.properties.resizeHandle?e.target.setAttribute("data-gs-max-width",H.settings.numberCol-n):"w"!=H.properties.resizeHandle&&"sw"!=H.properties.resizeHandle||(p=parseInt(e.target.getAttribute("data-gs-width"))),c=0,u=0,b="masonry"==H.settings.galleryLayout?1:H.properties.singleWidth)}function i(t,e){e.element.is("span")||(w&&(e.size.width<h?x(S,"small-width"):k(S,"small-width")),H.updateSizeViewerText(t.target,Math.round(e.size.width/H.properties.singleWidth),Math.round(e.size.height/b)-("masonry"===H.settings.galleryLayout?H.properties.gutter:0),A,R),e.originalSize.width!==e.size.width&&H.checkBlockDimension(t.target,e.size.width),"masonry"==H.settings.galleryLayout&&w&&(f=t.target.offsetWidth,u=f<h?g*(f-H.properties.gutter)/h:g,u=isNaN(u)?0:u),c=d(v),m=Math.max(c,u),"masonry"==H.settings.galleryLayout?H.properties.gridstackInstance.minHeight(t.target,Math.round((m+H.properties.gutter)/H.properties.singleHeight)):H.properties.gridstackInstance.minHeight(t.target,Math.ceil((m+H.properties.gutter)/H.properties.singleWidth)))}function r(t,e){if(Rexbuilder_Util_Editor.elementIsResizing){"masonry"==H.settings.galleryLayout&&(e.setAttribute("data-height",Math.round(e.getAttribute("data-gs-height")/H.properties.singleWidth)),e.querySelector(".rexbuilder-block-data").setAttribute("data-element_real_fluid",e.getAttribute("data-gs-min-height")==e.getAttribute("data-gs-height")?1:0)),H.updateAllElementsProperties(),l(e),H.updateSizeViewerText(e,s,s,A,R),H.checkBlockDimension(e),e.setAttribute("data-gs-max-width",500),clearTimeout(H.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.elementIsResizing=!1,H.$element.attr('data-rexlive-layout-changed="true"'),H.removeCollapseElementsProperties();var i=H.$section;H.properties.gridstackInstance.minHeight(e,1),H.properties.gridstackInstance.batchUpdate(),H.properties.gridstackInstance.commit(),_=null,E=null,I=null,A=null,R=null,a(Rexbuilder_Util.fixYoutube.bind(null,i[0]),1500)}}var o,n,p,h,g,u,c,m,f,b,_,v,E,I,S,w,A,R,B,H=this;H.$element.on("resizestart",e).on("resize",i).on("gsresizestop",r)},_linkDragEvents:function(){this.$element.on("dragstart",c).on("dragstop",m.bind(this))},_linkDnDEvents:function(){var e,r=this,s=!1,a=!0,o=function(e){var r=t(i).scrollTop();t(i).scrollTop(r+e),a||setTimeout(function(){o(e)},20)};r.$element.on("dragstart",".drag-to-section",function(i){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){s||setTimeout(function(){Rexbuilder_Util_Editor.lockRowsLight(r.$section),s=!0},100),i.originalEvent.dataTransfer.effectAllowed="all";var a=t(this).parents(".grid-stack-item");e=a.clone(!1),e.find(".rexbuilder-block-data").remove(),e.find(".ui-resizable-handle").remove(),e.find(".rexlive-block-toolbox").remove(),e.find(".grid-stack-item-content").css("height","100%"),t("body").append(e),e.css("position","fixed"),e.css("left",i.clientX),e.css("top",i.clientY),e.css("width",a.width()),e.css("height",a.height()),e.css("transform","scale(0.5)"),e.css("transformOrigin","top left");var o=a.attr("data-rexbuilder-block-id"),n=r.$section.attr("data-rexlive-section-id"),l="undefined"!=typeof r.$section.attr("data-rexlive-model-number")?r.$section.attr("data-rexlive-model-number"):"",d={sectionID:n,modelNumber:l,rexID:o};i.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(d))}}),r.$element.on("drag",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.css("left",t.clientX+5),e.css("top",t.clientY+5),e.css("zIndex",3e3),a=!0,event.clientY<150&&(a=!1,o(-1)),event.clientY>Rexbuilder_Util_Editor.viewportMeasurement.height-150&&(a=!1,o(1)))}),r.$element.on("dragend",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(s&&(Rexbuilder_Util_Editor.releaseRowsLight(),s=!1),a=!0,e.css("zIndex",-3e3),e.css("left",t.clientX+5),e.css("top",t.clientY+5),e.remove(),e=null)})},setGridstackIstanceNumber:function(){for(var t,e=this,i=this.$element.attr("class").split(/\s+/),r=0,a=i.length;r<a;r++)t=i[r].split("-"),t[2]!=s&&"instance"==t[2]&&(e.properties.gridstackInstanceID=t[3])},updateLayoutBlocksHeight:function(){var t=this.properties.gridstackInstance;if("null"!=typeof t&&(this.properties.blocksBottomTop=this.getElementBottomTop(),!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.batchGridstack();var e=[].slice.call(this.properties.blocksBottomTop),i=e.length,r=0;for(r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data"),a=this.getBlockSizeOnLayoutChange(e[r]);Rexbuilder_Util_Editor.elementIsResizing=!0,this.updateElementDataHeightProperties(s,a.height),this.resizeBlock(e[r],a.width,a.height),Rexbuilder_Util_Editor.elementIsResizing=!1}Rexbuilder_Util.windowIsResizing||this.commitGridstack()}},updateBlocksHeight:function(t){var e=this.properties.gridstackInstance;if("null"!=typeof e&&(!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.properties.blocksBottomTop=this.getElementBottomTop();var i=[].slice.call(this.properties.blocksBottomTop),r=i.length,s=0;for(s=0;s<r;s++)Rexbuilder_Util.backendEdited||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util_Editor.updatingCollapsedGrid||this.properties.firstStartGrid?y(i[s],"rex-hide-element")||y(i[s],"removing_block")||y(i[s],"block-has-slider")||this.updateElementHeight(i[s]):this.properties.collapsingElements||this.updateElementHeight(i[s],!1,t);!Rexbuilder_Util.windowIsResizing}},getBlockSizeOnLayoutChange:function(t){var e,i=t.querySelector(".rexbuilder-block-data"),r=t.querySelector(".text-wrap"),s=t.querySelector(".rex-image-wrapper"),a=t.querySelector(".grid-item-content"),o=(parseInt(i.getAttribute("data-element_real_fluid")),i.getAttribute("data-type_bg_block")),n=parseInt(t.getAttribute("data-gs-width")),l=parseInt(t.getAttribute("data-gs-height")),d=0,p=!1,h=l*this.properties.oldCellHeight,d=Math.round(h/this.properties.singleHeight);if(r&&r.innerText.trim().length>0&&r.childElementCount>0&&(p=!0,e=r.offsetHeight+this.properties.gutter),!p&&s&&"masonry"===this.settings.galleryLayout&&"natural"===o){var g=parseInt(a.getAttribute("data-background_image_width")),u=parseInt(a.getAttribute("data-background_image_height"));t.offsetWidth<g?(e=u*n*this.properties.singleWidth/g,x(s,"small-width")):(e=u+this.properties.gutter,k(s,"small-width"))}return e>h&&(d=Math.round(e/this.properties.singleHeight)),{width:n,height:d}},getBlockSizeOnCollapse:function(t){var e=t.querySelector(".rexbuilder-block-data"),i=t.querySelector(".text-wrap"),r=t.querySelector(".rex-image-wrapper"),s=t.querySelector(".grid-item-content"),a=-1!==t.className.indexOf("block-has-slider"),o=(-1!==s.className.indexOf("empty-content"),-1!==s.className.indexOf("youtube-player")),n=0!==[].slice.call(t.getElementsByClassName("rex-video-wrap")).length,l=-1!==s.className.indexOf("vimeo-player"),d=(parseInt(e.getAttribute("data-element_real_fluid")),e.getAttribute("data-type_bg_block"),parseInt(t.getAttribute("data-gs-width"))),p=parseInt(t.getAttribute("data-gs-height")),h=0,g=!1,u=null,c=p*this.properties.singleHeight,h=Math.round(c/this.properties.singleHeight);if(i&&i.innerText.trim().length>0&&i.childElementCount>0&&(g=!0,u=i.offsetHeight+this.properties.gutter),!g&&r){var m=parseInt(s.getAttribute("data-background_image_width")),f=parseInt(s.getAttribute("data-background_image_height"));t.offsetWidth<m?(u=f*(d*this.properties.singleWidth-this.properties.gutter)/m,x(r,"small-width")):(u=f+this.properties.gutter,k(r,"small-width"))}var b=.75;!g&&(o||n||l)&&(u=Math.round(d*this.properties.singleWidth*b));var _=parseFloat(e.getAttribute("data-slider_ratio"));return a&&!isNaN(_)&&(u=isNaN(_)?d*this.properties.singleWidth*b:d*this.properties.singleWidth*_),h=Math.round(u/this.properties.singleHeight),{width:d,height:h}},updateElementHeight:function(e,i,r,s){i="undefined"!=typeof i&&i,s="undefined"!=typeof s?s:0,r="undefined"!=typeof r&&r,this.properties.oneColumModeActive||(Rexbuilder_Util_Editor.elementIsResizing=!0);var a,o=e.querySelector(".rexbuilder-block-data");a=parseInt(o.getAttribute("data-gs_start_h"));var n,l,p=(parseInt(o.getAttribute("data-gs_start_h")),this.properties.singleWidth);l=this.properties.oneColumModeActive?this.element.offsetWidth*this.settings.gridItemWidth:p;var h,g=this.properties.gutter,u=e.querySelector(".text-wrap"),c=t(u),m=parseInt(e.getAttribute("data-gs-width")),f=parseInt(e.getAttribute("data-gs-height")),b=f*this.properties.singleHeight-g,_=parseInt(o.getAttribute("data-element_real_fluid")),y=0,x=0,k=0,v=0,E=!1,I=o.getAttribute("data-type_bg_block"),S=e.querySelector(".grid-item-content"),w=null,A=!1,R=!1,B=!1,H=!1,U=!1;if(S&&(w=S.querySelector(".rex-image-wrapper"),A=-1!==e.className.indexOf("block-has-slider"),R=-1!==S.className.indexOf("empty-content"),B=-1!==S.className.indexOf("youtube-player"),H=-1!==S.className.indexOf("mp4-player"),U=-1!==S.className.indexOf("vimeo-player")),A)return void(Rexbuilder_Util_Editor.elementIsResizing=!1);if(h=d(c),this.properties.oneColumModeActive&&(m=12),0==h){if(null!==w){var G=parseInt(S.getAttribute("data-background_image_width")),C=parseInt(S.getAttribute("data-background_image_height"));y=this.properties.singleWidth*e.getAttribute("data-gs-width")<G?C*(m*l-g)/G:C}(B||H||U)&&(x=f*this.properties.singleHeight),A&&(v=f*this.properties.singleHeight),0==x&&0==y&&0==v&&(Rexbuilder_Util_Editor.updatingSectionLayout||R||this.properties.firstStartGrid||A)&&(k=this.properties.editedFromBackend&&"masonry"==this.settings.galleryLayout?Math.round(l*a):this.properties.oneColumModeActive&&this.properties.beforeCollapseWasFixed?a*this.properties.singleWidth:a*this.properties.singleHeight)}if(A||0!=y||0!=x||0!=h||(E=!0),A||B||U||H||!("full"===I&&0===h||""===I&&0===h)||this.properties.oneColumModeActive?(i?a*=this.properties.singleHeight:a=0,n=Math.max(a,y,x,k,h,v)):n=a*this.properties.singleHeight,this.properties.oneColumModeActive&&!Rexbuilder_Util.windowIsResizing){var D=n;return{height:D,empty:E}}0!=s&&(n=m*l*s);var z=!1;if(0!==h?("fixed"===this.settings.galleryLayout&&!r||1!==_&&"masonry"===this.settings.galleryLayout)&&n<=b&&(z=!0):0!==y?"fixed"===this.settings.galleryLayout?z=!0:"masonry"===this.settings.galleryLayout&&("natural"===I&&1!==_||"full"===I)&&n<=b&&(z=!0):0!==x&&"masonry"===this.settings.galleryLayout&&(z=!0),z)return void(Rexbuilder_Util_Editor.elementIsResizing=!1);var T;T="fixed"==this.settings.galleryLayout&&(E||B||H||U)?Math.round((n+g)/this.properties.singleHeight):Math.ceil((n+g)/this.properties.singleHeight),this.updateElementDataHeightProperties(o,T),this.resizeBlock(e,m,T),Rexbuilder_Util_Editor.elementIsResizing=!1},resizeBlockWithNewImage:function(t){var e=t.querySelector(".grid-item-content"),i=this.properties.wrapWidth,r=e.getAttribute("data-background_image_width"),s=1,a=e.getAttribute("data-background_image_height"),o=1;r>i?(s=6,this.properties.oneColumModeActive&&(s=12)):s=Math.max(Math.round(6*r/i),1),o=Math.max(Math.round(a*s/r),1),"masonry"===this.settings.galleryLayout&&(o=s*this.properties.singleWidth<r?a*s*this.properties.singleWidth/r:a+this.properties.gutter,o=Math.max(Math.round(o/this.settings.cellHeightMasonry),1)),this.resizeBlock(t,s,o),this.updateSizeViewerText(t),this.fix_natural_image_blocks()},resizeBlock:function(t,e,i){if(!isNaN(i)){var r=this.properties.gridstackInstance;if("undefined"!=typeof r&&null!==r)if(0!=this.properties.oldCellHeight&&this.properties.oldCellHeight!=this.properties.singleHeight&&"masonry"==this.properties.oldLayout){var s,a,o,n,l;l=store.get(t.getAttribute("data-rexbuilder-block-id")),s=l.properties[0].x,a=Math.round(parseInt(l.properties[1].y)*this.properties.oldCellHeight/this.properties.singleHeight),o=e,n=i,r.update(t,s,a,o,n)}else r.resize(t,e,i)}},_setParentGridPadding:function(){var t=this.$element.parent();(Rexbuilder_Util.globalViewport.width>=_plugin_frontend_settings.defaultSettings.collapseWidth&&!this.properties.setDesktopPadding||!this.properties.setDesktopPadding&&!this.properties.setMobilePadding&&"true"==this.$section.attr("data-rex-collapse-grid"))&&(this.properties.setDesktopPadding=!0,"true"==this.$section.attr("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?t.css("padding-top",this.properties.gridTopSeparator-this.properties.halfSeparatorTop):t.css("padding-top",this.properties.halfSeparatorTop),null!==this.properties.gridBottomSeparator?t.css("padding-bottom",this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom):t.css("padding-bottom",this.properties.halfSeparatorBottom),this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?t.css("padding-left",this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft):t.css("padding-left",this.properties.halfSeparatorLeft),null!==this.properties.gridRightSeparator?t.css("padding-right",this.properties.gridRightSeparator-this.properties.halfSeparatorRight):t.css("padding-right",this.properties.halfSeparatorRight)))},_setGridPadding:function(){this.properties.setDesktopPadding&&(this.properties.setDesktopPadding||this.properties.setMobilePadding||"true"!=this.section.getAttribute("data-rex-collapse-grid"))||(this.properties.setDesktopPadding=!0,"true"==this.section.getAttribute("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?this.element.style.marginTop=this.properties.gridTopSeparator-this.properties.halfSeparatorTop+"px":this.element.style.marginTop=this.properties.halfSeparatorTop+"px",null!==this.properties.gridBottomSeparator?this.element.style.marginBottom=this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom+"px":this.element.style.marginBottom=this.properties.halfSeparatorBottom+"px",this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?this.element.style.marginLeft=this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft+"px":this.element.style.marginLeft=this.properties.halfSeparatorLeft+"px",null!==this.properties.gridRightSeparator?this.element.style.marginRight=this.properties.gridRightSeparator-this.properties.halfSeparatorRight+"px":this.element.style.marginRight=this.properties.halfSeparatorRight+"px"))},collapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!0),this.$section.find(".collapse-grid").addClass("grid-collapsed"),this.properties.oneColumModeActive=!0},removeCollapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!1),this.$section.find(".collapse-grid").removeClass("grid-collapsed"),this.properties.oneColumModeActive=!1},updateGridLayoutCollapse:function(t){this.settings.galleryLayout=t.layout,this.settings.fullHeight=t.fullHeight,this.properties.singleHeight=t.singleHeight,this.element.setAttribute("data-full-height",t.fullHeight),this.element.setAttribute("data-layout",t.layout),this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack()},changeGridToMasonry:function(){this.settings.galleryLayout="masonry",this.settings.fullHeight=!1,this.properties.singleHeight=this.settings.cellHeightMasonry,this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack(),this.element.setAttribute("data-layout","masonry"),this.element.setAttribute("data-full-height","false")},collapseElements:function(t){t="undefined"==typeof t?{}:t,this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.fixBlockDomOrder(),this._saveBlocksPosition(),this.collapseElementsProperties(),this.properties.collapsingElements=!0,"fixed"==this.settings.galleryLayout&&(this.properties.beforeCollapseWasFixed=!0,this.changeGridToMasonry()),this.batchGridstack(),this.updateBlocksWidth(),this.commitGridstack(),setTimeout(h.bind(this,t),500)},updateBlocksWidth:function(){var t,e=this.getElementsTopBottom(),i=0,r=e.length;for(t=0;t<r;t++)this.properties.gridstackInstance.update(e[t],0,i,12,parseInt(e[t].getAttribute("data-gs-height"))),i+=parseInt(e[t].getAttribute("data-gs-height"))},updateCollapsedBlocksHeight:function(){var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,r=t.reverse();for(i=0;i<e;i++){var s=this.getBlockSizeOnCollapse(r[i]);this.properties.gridstackInstance.resize(r[i],s.width,s.height)}},fixVideoProportion:function(){var t=[].slice.call(this.section.getElementsByClassName("rex-video-wrap")),e=t.length,i=0,r=[];for(i=0;i<e;i++)r.push(n(t[i]));for(i=0;i<e;i++)t[i].children[0].style.maxWidth=r[i]},fixBlockDomOrder:function(){var e,i,r,s,a,o=this.getElementsTopBottom(),n=[],l=[],d=o.length;for(i=0;i<d;i++){var p={rexID:t(o[i]).attr("data-rexbuilder-block-id"),added:!1};n.push(p)}var h,g=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),u=g.length,i=0;
for(i=0;i<u;i++)h={rexID:g[i].getAttribute("data-rexbuilder-block-id"),element:t(g[i]).detach()},l.push(h);for(i=0,s=n.length;i<s;i++){for(r=0,a=l.length;r<a;r++)if(l[r].rexID==n[i].rexID){e=l[r].element;break}this.$element.append(e),l.splice(r,1)}},filter:function(e){for(var r=[],s=this.properties.initialStateGrid.length,a=0;a<s;a++)r.push(this.properties.initialStateGrid[a].el);var o=t(r).map(function(){return this.toArray()}),n=o.filter(e.filter),l=o.not(e.filter),d=this;if(n.each(function(e,i){if("0"===i.style.opacity){var r=t(i);r.velocity({scale:1,opacity:1},{duration:200,begin:function(t){t[0].style.display=""}})}else i.style.opacity=1,i.style.display=""}),l.each(function(e,i){if("0"!==i.style.opacity){var r=t(i);r.velocity({scale:0,opacity:0},{duration:200,complete:function(t){t[0].style.display="none"}})}else i.style.opacity=0,i.style.display="none"}),this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.removeAll(!1),"*"===e.filter){o.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),autoPosition:e.getAttribute("data-gs-auto-position"),minWidth:e.getAttribute("data-gs-min-width"),maxWidth:e.getAttribute("data-gs-max-width"),minHeight:e.getAttribute("data-gs-min-height"),maxHeight:e.getAttribute("data-gs-max-height"),id:e.getAttribute("data-gs-id")};d.properties.gridstackInstance.addWidget(e,i.x,i.y,i.width,i.height,i.autoPosition,i.minWidth,i.maxWidth,i.minHeight,i.maxHeight,i.id)});for(var a=0,p=this.properties.initialStateGrid.length;a<p;a++){var h=this.properties.initialStateGrid[a].el[0];this.properties.gridstackInstance.update(h,this.properties.initialStateGrid[a].x,this.properties.initialStateGrid[a].y)}}else this.properties.mirrorStateGrid=[],n.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))},r=d.placeElMirror(i);d.properties.mirrorStateGrid.push({x:r.x,y:r.y,el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))})}),n.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),el:e};d.properties.gridstackInstance.addWidget(e,i.x,i.y)}),n.each(function(t,e){d.properties.gridstackInstance.update(e,d.properties.mirrorStateGrid[t].x,d.properties.mirrorStateGrid[t].y)});this.properties.gridstackInstance.commit();var g=jQuery.Event("rexlive:galleryFiltered");g.settings={galleryEditorInstance:this},t(i).trigger(g)},placeElMirror:function(t){for(var e={x:0,y:0},i=0;;++i){var s=i%this.properties.gridstackInstance.grid.width,a=Math.floor(i/this.properties.gridstackInstance.grid.width);if(!(s+t.width>this.properties.gridstackInstance.grid.width||r.find(this.properties.mirrorStateGrid,r.bind(GridStackUI.Utils._isAddNodeIntercepted,{x:s,y:a,node:t})))){e.x=s,e.y=a;break}}return e},get_pixel_position:function(t){var e={left:"0",top:"0"};return e.left=this.properties.gridstackInstance.cellWidth()*t.x+"px",e.top=this.properties.gridstackInstance.cellHeight()*t.y+this.properties.gridstackInstance.opts.verticalMargin*t.y+"px",e},save_grid_state:function(){this.properties.initialStateGrid=this.properties.gridstackInstance.grid.nodes},fix_natural_image_blocks:function(){var e,i=[].slice.call(this.element.getElementsByClassName("rex-image-wrapper")),r=i.length,s=0;for(s=0;s<r;s++)if(y(i[s],"natural-image-background")){e=t(i[s]);var a=parseInt(e.parents(".grid-item-content").attr("data-background_image_width"));i[s].offsetWidth;a>i[s].offsetWidth&&x(i[s],"small-width")}},set_grid_initial_state:function(t){this.properties.initialStateGrid=t},merge_grid_initial_state:function(t){this.properties.initialStateGrid=this.properties.initialStateGrid.concat(t)},_getCoord:function(t,e){return{x:t%e,y:Math.floor(t/e)}},destroyGridGallery:function(){this.destroyGridstack(),this.clearStateGrid(),this.$element.removeClass("grid-number-"+this.properties.sectionNumber)},_check_parent_class:function(t){return y(this.section,t)}}),t.fn[E]=function(e){var i=arguments;if(e===s||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+E)||t.data(this,"plugin_"+E,new _(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var r;return this.each(function(){var s=t.data(this,"plugin_"+E);s instanceof _&&"function"==typeof s[e]&&(r=s[e].apply(s,Array.prototype.slice.call(i,1))),"destroy"===e&&t.data(this,"plugin_"+E,null)}),r!==s?r:this}}}(jQuery,window,document,_);
/*
 * anime.js v3.1.0
 * (c) 2019 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";function n(n,e,t){return Math.min(Math.max(n,e),t)}function e(n,e){return n.indexOf(e)>-1}function t(n,e){return n.apply(null,e)}function r(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function a(e,t){function a(n){var e=t?t*n/1e3:n;return e=l<1?Math.exp(-e*l*f)*(p*Math.cos(d*e)+h*Math.sin(d*e)):(p+h*e)*Math.exp(-e*f),0===n||1===n?n:1-e}var o=r(e),u=n(J.und(o[0])?1:o[0],.1,100),i=n(J.und(o[1])?100:o[1],.1,100),c=n(J.und(o[2])?10:o[2],.1,100),s=n(J.und(o[3])?0:o[3],.1,100),f=Math.sqrt(i/u),l=c/(2*Math.sqrt(i*u)),d=l<1?f*Math.sqrt(1-l*l):0,p=1,h=l<1?(l*f-s)/d:-s+f;return t?a:function(){var n=W.springs[e];if(n)return n;for(var t=0,r=0;;)if(1===a(t+=1/6)){if(++r>=16)break}else r=0;var o=t*(1/6)*1e3;return W.springs[e]=o,o}}function o(n){return void 0===n&&(n=10),function(e){return Math.round(e*n)*(1/n)}}function u(n,e){if(J.fnc(n))return n;var u=n.split("(")[0],i=U[u],c=r(n);switch(u){case"spring":return a(n,e);case"cubicBezier":return t(K,c);case"steps":return t(o,c);default:return t(i,c)}}function i(n){try{return document.querySelectorAll(n)}catch(n){return}}function c(n,e){for(var t=n.length,r=arguments.length>=2?arguments[1]:void 0,a=[],o=0;o<t;o++)if(o in n){var u=n[o];e.call(r,u,o,n)&&a.push(u)}return a}function s(n){return n.reduce(function(n,e){return n.concat(J.arr(e)?s(e):e)},[])}function f(n){return J.arr(n)?n:(J.str(n)&&(n=i(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function l(n,e){return n.some(function(n){return n===e})}function d(n){var e={};for(var t in n)e[t]=n[t];return e}function p(n,e){var t=d(n);for(var r in n)t[r]=e.hasOwnProperty(r)?e[r]:n[r];return t}function h(n,e){var t=d(n);for(var r in e)t[r]=J.und(n[r])?e[r]:n[r];return t}function v(n){return J.rgb(n)?(t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=n))?"rgba("+t[1]+",1)":e:J.hex(n)?(r=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,t,r){return e+e+t+t+r+r}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+",1)"):J.hsl(n)?function(n){function e(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}var t,r,a,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),u=parseInt(o[1],10)/360,i=parseInt(o[2],10)/100,c=parseInt(o[3],10)/100,s=o[4]||1;if(0==i)t=r=a=c;else{var f=c<.5?c*(1+i):c+i-c*i,l=2*c-f;t=e(l,f,u+1/3),r=e(l,f,u),a=e(l,f,u-1/3)}return"rgba("+255*t+","+255*r+","+255*a+","+s+")"}(n):void 0;var e,t,r,a}function g(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function m(n,e){return J.fnc(n)?n(e.target,e.id,e.total):n}function y(n,e){return n.getAttribute(e)}function b(n,e,t){if(l([t,"deg","rad","turn"],g(e)))return e;var r=W.CSS[e+t];if(!J.und(r))return r;var a=document.createElement(n.tagName),o=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=100+t;var u=100/a.offsetWidth;o.removeChild(a);var i=u*parseFloat(e);return W.CSS[e+t]=i,i}function M(n,e,t){if(e in n.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0";return t?b(n,a,t):a}}function x(n,e){return J.dom(n)&&!J.inp(n)&&(y(n,e)||J.svg(n)&&n[e])?"attribute":J.dom(n)&&l(R,e)?"transform":J.dom(n)&&"transform"!==e&&M(n,e)?"css":null!=n[e]?"object":void 0}function w(n){if(J.dom(n)){for(var e,t=n.style.transform||"",r=/(\w+)\(([^)]*)\)/g,a=new Map;e=r.exec(t);)a.set(e[1],e[2]);return a}}function k(n,t,r,a){var o,u=e(t,"scale")?1:0+(e(o=t,"translate")||"perspective"===o?"px":e(o,"rotate")||e(o,"skew")?"deg":void 0),i=w(n).get(t)||u;return r&&(r.transforms.list.set(t,i),r.transforms.last=t),a?b(n,i,a):i}function O(n,e,t,r){switch(x(n,e)){case"transform":return k(n,e,r,t);case"css":return M(n,e,t);case"attribute":return y(n,e);default:return n[e]||0}}function C(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=g(n)||0,a=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return a+o+r;case"-":return a-o+r;case"*":return a*o+r}}function B(n,e){if(J.col(n))return v(n);if(/\s/g.test(n))return n;var t=g(n),r=t?n.substr(0,n.length-t.length):n;return e?r+e:r}function P(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function I(n){for(var e,t=n.points,r=0,a=0;a<t.numberOfItems;a++){var o=t.getItem(a);a>0&&(r+=P(e,o)),e=o}return r}function T(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return o=n,2*Math.PI*y(o,"r");case"rect":return 2*y(a=n,"width")+2*y(a,"height");case"line":return P({x:y(r=n,"x1"),y:y(r,"y1")},{x:y(r,"x2"),y:y(r,"y2")});case"polyline":return I(n);case"polygon":return t=(e=n).points,I(e)+P(t.getItem(t.numberOfItems-1),t.getItem(0))}var e,t,r,a,o}function D(n,e){var t=e||{},r=t.el||function(n){for(var e=n.parentNode;J.svg(e)&&J.svg(e.parentNode);)e=e.parentNode;return e}(n),a=r.getBoundingClientRect(),o=y(r,"viewBox"),u=a.width,i=a.height,c=t.viewBox||(o?o.split(" "):[0,0,u,i]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:u/c[2],h:i/c[3]}}function E(n,e){function t(t){void 0===t&&(t=0);var r=e+t>=1?e+t:0;return n.el.getPointAtLength(r)}var r=D(n.el,n.svg),a=t(),o=t(-1),u=t(1);switch(n.property){case"x":return(a.x-r.x)*r.w;case"y":return(a.y-r.y)*r.h;case"angle":return 180*Math.atan2(u.y-o.y,u.x-o.x)/Math.PI}}function F(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=B(J.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:J.str(n)||e?r.split(t):[]}}function N(n){return c(n?s(J.arr(n)?n.map(f):f(n)):[],function(n,e,t){return t.indexOf(n)===e})}function A(n){var e=N(n);return e.map(function(n,t){return{target:n,id:t,total:e.length,transforms:{list:w(n)}}})}function L(n,e){var t=d(e);if(/^spring/.test(t.easing)&&(t.duration=a(t.easing)),J.arr(n)){var r=n.length;2!==r||J.obj(n[0])?J.fnc(e.duration)||(t.duration=e.duration/r):n={value:n}}var o=J.arr(n)?n:[n];return o.map(function(n,t){var r=J.obj(n)&&!J.pth(n)?n:{value:n};return J.und(r.delay)&&(r.delay=t?0:e.delay),J.und(r.endDelay)&&(r.endDelay=t===o.length-1?e.endDelay:0),r}).map(function(n){return h(n,t)})}function j(n,e){var t=[],r=e.keyframes;for(var a in r&&(e=h(function(n){for(var e=c(s(n.map(function(n){return Object.keys(n)})),function(n){return J.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),t={},r=function(r){var a=e[r];t[a]=n.map(function(n){var e={};for(var t in n)J.key(t)?t==a&&(e.value=n[t]):e[t]=n[t];return e})},a=0;a<e.length;a++)r(a);return t}(r),e)),e)J.key(a)&&t.push({name:a,tweens:L(e[a],n)});return t}function S(n,e){var t;return n.tweens.map(function(r){var a=function(n,e){var t={};for(var r in n){var a=m(n[r],e);J.arr(a)&&1===(a=a.map(function(n){return m(n,e)})).length&&(a=a[0]),t[r]=a}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}(r,e),o=a.value,i=J.arr(o)?o[1]:o,c=g(i),s=O(e.target,n.name,c,e),f=t?t.to.original:s,l=J.arr(o)?o[0]:f,d=g(l)||g(s),p=c||d;return J.und(i)&&(i=f),a.from=F(l,p),a.to=F(C(i,l),p),a.start=t?t.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=u(a.easing,a.duration),a.isPath=J.pth(o),a.isColor=J.col(a.from.original),a.isColor&&(a.round=1),t=a,a})}function q(n,e){A(n).forEach(function(n){for(var t in e){var r=m(e[t],n),a=n.target,o=g(r),u=O(a,t,o,n),i=C(B(r,o||g(u)),u),c=x(a,t);_[c](a,t,i,n.transforms,!0)}})}function $(n,e){return c(s(n.map(function(n){return e.map(function(e){return function(n,e){var t=x(n.target,e.name);if(t){var r=S(e,n),a=r[r.length-1];return{type:t,property:e.name,animatable:n,tweens:r,duration:a.end,delay:r[0].delay,endDelay:a.endDelay}}}(n,e)})})),function(n){return!J.und(n)})}function X(n,e){var t=n.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=t?Math.max.apply(Math,n.map(function(n){return r(n)+n.duration})):e.duration,a.delay=t?Math.min.apply(Math,n.map(function(n){return r(n)+n.delay})):e.delay,a.endDelay=t?a.duration-Math.max.apply(Math,n.map(function(n){return r(n)+n.duration-n.endDelay})):e.endDelay,a}function Y(e){function t(n){var e=window.Promise&&new Promise(function(n){return B=n});return n.finished=e,e}function r(){var n=P.direction;"alternate"!==n&&(P.direction="normal"!==n?"normal":"reverse"),P.reversed=!P.reversed,l.forEach(function(n){return n.reversed=P.reversed})}function a(n){return P.reversed?P.duration-n:n}function o(){w=0,k=a(P.currentTime)*(1/Y.speed)}function u(n,e){e&&e.seek(n-e.timelineOffset)}function i(e){for(var t=0,r=P.animations,a=r.length;t<a;){var o=r[t],u=o.animatable,i=o.tweens,s=i.length-1,f=i[s];s&&(f=c(i,function(n){return e<n.end})[0]||f);for(var l=n(e-f.start-f.delay,0,f.duration)/f.duration,d=isNaN(l)?1:f.easing(l),p=f.to.strings,h=f.round,v=[],g=f.to.numbers.length,m=void 0,y=0;y<g;y++){var b=void 0,M=f.to.numbers[y],x=f.from.numbers[y]||0;b=f.isPath?E(f.value,d*M):x+d*(M-x),h&&(f.isColor&&y>2||(b=Math.round(b*h)/h)),v.push(b)}var w=p.length;if(w){m=p[0];for(var k=0;k<w;k++){p[k];var O=p[k+1],C=v[k];isNaN(C)||(m+=O?C+O:C+" ")}}else m=v[0];_[o.type](u.target,o.property,m,u.transforms),o.currentValue=m,t++}}function s(n){P[n]&&!P.passThrough&&P[n](P)}function f(e){var o=P.duration,c=P.delay,f=o-P.endDelay,d=a(e);P.progress=n(d/o*100,0,100),P.reversePlayback=d<P.currentTime,l&&function(n){if(P.reversePlayback)for(var e=C;e--;)u(n,l[e]);else for(var t=0;t<C;t++)u(n,l[t])}(d),!P.began&&P.currentTime>0&&(P.began=!0,s("begin")),!P.loopBegan&&P.currentTime>0&&(P.loopBegan=!0,s("loopBegin")),d<=c&&0!==P.currentTime&&i(0),(d>=f&&P.currentTime!==o||!o)&&i(o),d>c&&d<f?(P.changeBegan||(P.changeBegan=!0,P.changeCompleted=!1,s("changeBegin")),s("change"),i(d)):P.changeBegan&&(P.changeCompleted=!0,P.changeBegan=!1,s("changeComplete")),P.currentTime=n(d,0,o),P.began&&s("update"),e>=o&&(k=0,P.remaining&&!0!==P.remaining&&P.remaining--,P.remaining?(w=O,s("loopComplete"),P.loopBegan=!1,"alternate"===P.direction&&r()):(P.paused=!0,P.completed||(P.completed=!0,s("loopComplete"),s("complete"),!P.passThrough&&"Promise"in window&&(B(),t(P)))))}void 0===e&&(e={});var l,d,v,g,m,y,b,M,x,w=0,k=0,O=0,C=0,B=null,P=(v=p(H,d=e),g=p(G,d),m=j(g,d),y=A(d.targets),b=$(y,m),M=X(b,g),x=nn,nn++,h(v,{id:x,children:[],animatables:y,animations:b,duration:M.duration,delay:M.delay,endDelay:M.endDelay}));return t(P),P.reset=function(){var n=P.direction;P.passThrough=!1,P.currentTime=0,P.progress=0,P.paused=!0,P.began=!1,P.loopBegan=!1,P.changeBegan=!1,P.completed=!1,P.changeCompleted=!1,P.reversePlayback=!1,P.reversed="reverse"===n,P.remaining=P.loop,l=P.children;for(var e=C=l.length;e--;)P.children[e].reset();(P.reversed&&!0!==P.loop||"alternate"===n&&1===P.loop)&&P.remaining++,i(P.reversed?P.duration:0)},P.set=function(n,e){return q(n,e),P},P.tick=function(n){O=n,w||(w=O),f((O+(k-w))*Y.speed)},P.seek=function(n){f(a(n))},P.pause=function(){P.paused=!0,o()},P.play=function(){P.paused&&(P.completed&&P.reset(),P.paused=!1,en.push(P),o(),z||rn())},P.reverse=function(){r(),o()},P.restart=function(){P.reset(),P.play()},P.reset(),P.autoplay&&P.play(),P}function Z(n,e){for(var t=e.length;t--;)l(n,e[t].animatable.target)&&e.splice(t,1)}var Q,V,z,H={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},G={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},R=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],W={CSS:{},springs:{}},J={arr:function(n){return Array.isArray(n)},obj:function(n){return e(Object.prototype.toString.call(n),"Object")},pth:function(n){return J.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||J.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return J.hex(n)||J.rgb(n)||J.hsl(n)},key:function(n){return!H.hasOwnProperty(n)&&!G.hasOwnProperty(n)&&"targets"!==n&&"keyframes"!==n}},K=function(){function n(n,e){return 1-3*e+3*n}function e(n,e){return 3*e-6*n}function t(n){return 3*n}function r(r,a,o){return((n(a,o)*r+e(a,o))*r+t(a))*r}function a(r,a,o){return 3*n(a,o)*r*r+2*e(a,o)*r+t(a)}var o=11,u=1/(o-1);return function(n,e,t,i){function c(e){for(var i=0,c=1,f=o-1;c!==f&&s[c]<=e;++c)i+=u;var l=i+(e-s[--c])/(s[c+1]-s[c])*u,d=a(l,n,t);return d>=.001?function(n,e,t,o){for(var u=0;u<4;++u){var i=a(e,t,o);if(0===i)return e;e-=(r(e,t,o)-n)/i}return e}(e,l,n,t):0===d?l:function(n,e,t,a,o){for(var u,i,c=0;(u=r(i=e+(t-e)/2,a,o)-n)>0?t=i:e=i,Math.abs(u)>1e-7&&++c<10;);return i}(e,i,i+u,n,t)}if(0<=n&&n<=1&&0<=t&&t<=1){var s=new Float32Array(o);if(n!==e||t!==i)for(var f=0;f<o;++f)s[f]=r(f*u,n,t);return function(a){return n===e&&t===i?a:0===a||1===a?a:r(c(a),e,i)}}}}(),U=(Q={linear:function(){return function(n){return n}}},V={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,t=4;n<((e=Math.pow(2,--t))-1)/11;);return 1/Math.pow(4,3-t)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=n(e,1,10),a=n(t,.1,2);return function(n){return 0===n||1===n?n:-r*Math.pow(2,10*(n-1))*Math.sin((n-1-a/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/a)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){V[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(V).forEach(function(n){var e=V[n];Q["easeIn"+n]=e,Q["easeOut"+n]=function(n,t){return function(r){return 1-e(n,t)(1-r)}},Q["easeInOut"+n]=function(n,t){return function(r){return r<.5?e(n,t)(2*r)/2:1-e(n,t)(-2*r+2)/2}}}),Q),_={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,a){if(r.list.set(e,t),e===r.last||a){var o="";r.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o}}},nn=0,en=[],tn=[],rn=function(){function n(){z=requestAnimationFrame(e)}function e(e){var t=en.length;if(t){for(var r=0;r<t;){var a=en[r];if(a.paused){var o=en.indexOf(a);o>-1&&(en.splice(o,1),t=en.length)}else a.tick(e);r++}n()}else z=cancelAnimationFrame(z)}return n}();return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(en.forEach(function(n){return n.pause()}),tn=en.slice(0),Y.running=en=[]):tn.forEach(function(n){return n.play()})}),Y.version="3.1.0",Y.speed=1,Y.running=en,Y.remove=function(n){for(var e=N(n),t=en.length;t--;){var r=en[t],a=r.animations,o=r.children;Z(e,a);for(var u=o.length;u--;){var i=o[u],c=i.animations;Z(e,c),c.length||i.children.length||o.splice(u,1)}a.length||o.length||r.pause()}},Y.get=O,Y.set=q,Y.convertPx=b,Y.path=function(n,e){var t=J.str(n)?i(n)[0]:n,r=e||100;return function(n){return{property:n,el:t,svg:D(t),totalLength:T(t)*(r/100)}}},Y.setDashoffset=function(n){var e=T(n);return n.setAttribute("stroke-dasharray",e),e},Y.stagger=function(n,e){void 0===e&&(e={});var t=e.direction||"normal",r=e.easing?u(e.easing):null,a=e.grid,o=e.axis,i=e.from||0,c="first"===i,s="center"===i,f="last"===i,l=J.arr(n),d=l?parseFloat(n[0]):parseFloat(n),p=l?parseFloat(n[1]):0,h=g(l?n[1]:n)||0,v=e.start||0+(l?d:0),m=[],y=0;return function(n,e,u){if(c&&(i=0),s&&(i=(u-1)/2),f&&(i=u-1),!m.length){for(var g=0;g<u;g++){if(a){var b=s?(a[0]-1)/2:i%a[0],M=s?(a[1]-1)/2:Math.floor(i/a[0]),x=b-g%a[0],w=M-Math.floor(g/a[0]),k=Math.sqrt(x*x+w*w);"x"===o&&(k=-x),"y"===o&&(k=-w),m.push(k)}else m.push(Math.abs(i-g));y=Math.max.apply(Math,m)}r&&(m=m.map(function(n){return r(n/y)*y})),"reverse"===t&&(m=m.map(function(n){return o?n<0?-1*n:-n:Math.abs(y-n)}))}return v+(l?(p-d)/y:d)*(Math.round(100*m[e])/100)+h}},Y.timeline=function(n){void 0===n&&(n={});var e=Y(n);return e.duration=0,e.add=function(t,r){function a(n){n.passThrough=!0}var o=en.indexOf(e),u=e.children;o>-1&&en.splice(o,1);for(var i=0;i<u.length;i++)a(u[i]);var c=h(t,p(G,n));c.targets=c.targets||n.targets;var s=e.duration;c.autoplay=!1,c.direction=e.direction,c.timelineOffset=J.und(r)?s:C(r,s),a(e),e.seek(c.timelineOffset);var f=Y(c);a(f),u.push(f);var l=X(u,n);return e.delay=l.delay,e.endDelay=l.endDelay,e.duration=l.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},Y.easing=u,Y.penner=U,Y.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},Y});
// var lodash = _.noConflict();
var Rexbuilder_App=function(e){"use strict";function t(){function t(){Rexbuilder_Util.$window.resize()}var i=e(".text-fill-container-canvas");0!==i.length&&(i.textFill({relative:!0,relativeWrap:".perfect-grid-item",fontFamily:_plugin_frontend_settings.textFill.font_family,fontWeight:_plugin_frontend_settings.textFill.font_weight}),i.on("textfill-render-complete",t))}function i(e){"undefined"!=typeof rexIndicator&&e.find(".rex-indicator__placeholder").rexIndicator()}function n(){e(".rex-effect-distortion").each(function(t,i){var n=e(i);1==_plugin_frontend_settings.animations?n.one("rs-animation-complete",function(){n.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}):n.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}),e(".rex-effect-distortion-section").each(function(t,i){var n=e(i);1==_plugin_frontend_settings.animations?n.one("rs-scrolled-complete",function(){n.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}):n.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})})}function r(){e("[class*=border-space-animated-]").each(function(t,i){var n=e(i);n.addClass("border-space-animated"),1==_plugin_frontend_settings.animations&&Rexbuilder_Util.globalViewport.width>768?n.one("rs-animation-complete",function(){n.addClass("border-active")}):n.parents(".rexpansive_section").one("rs-scrolled-complete",function(){n.addClass("border-active")})})}function l(t){function i(e){Rexbuilder_Util.removeClass(this,"rex-element--animated"),this.removeEventListener(Rexbuilder_Util._transitionEvent,i)}var n=e(document.getElementsByClassName("rex-element--animated"));n.rexScrolled({callback:function(e){e.addEventListener(Rexbuilder_Util._transitionEvent,i),Rexbuilder_Util.addClass(e,"run-animation")}})}function o(){var t=e(document.getElementsByClassName("rs-animation"));t.rexScrollify({mobile:!1})}function a(){if(B){var e,t=!(Rexbuilder_Util.cssPropertyValueSupported("position","sticky")||Rexbuilder_Util.cssPropertyValueSupported("position","-webkit-sticky")),i=Array.prototype.slice.call(document.getElementsByClassName("sticky-section")),n=i.length,r=0,l="",o=!1;for(StickySection.destroyHandlers(),r=0;r<n;r++)if(e=i[r],null!==StickySection.data(e)&&StickySection.data(e).destroy(),Rexbuilder_Util.hasClass(e,"mp4-player")?l=".rex-video-wrap":(""!==e.style.backgroundImage||Rexbuilder_Util.hasClass(e,"section-w-image"))&&(l=".sticky-background-simulator"),o="true"===e.querySelector(".section-data").getAttribute("data-row_overlay_active"),new StickySection(e,{borderAnimation:!0,stickyJS:t,stickyElementSelector:l,overlayAnimation:o}),"undefined"!=typeof RevealOpacityOnScroll&&_plugin_frontend_settings.stickySection.revealContentOnScroll){var a,s=Array.prototype.slice.call(e.getElementsByClassName("perfect-grid-item")),d=s.length;for(a=0;a<d;a++){s[a].setAttribute("data-rs-animation-force-launch",!0);var c=s[a].querySelector(".text-wrap");new RevealOpacityOnScroll(c,{offset:1,transition:!1})}}}}function s(){function e(){var e;for(e=0;e<l.length;e++)l[e].options.autoPlay&&l[e].pausePlayer()}function t(){var e;for(e=0;e<l.length;e++)l[e].options.autoPlay&&l[e].unpausePlayer()}if("undefined"!=typeof PopUpContent&&!Rexbuilder_Util.isIframe){window.addEventListener("message",d,!1),document.addEventListener("popUpContent:open",e),document.addEventListener("popUpContent:close",t);var i,n=Array.prototype.slice.call(document.getElementsByClassName("rex-slider-wrap")),r=n.length,l=[];for(i=0;i<r;i++){var o=Flickity.data(n[i]);o&&l.push(o)}}}function d(e){if(e.data.rexliveEvent)switch(e.data.eventName){case"popUpContent:pswpOpened":Rexbuilder_Util.addClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:pswpClosed":Rexbuilder_Util.removeClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:changePage":""!==e.data.href&&(window.location=e.data.href)}}function c(){var e,t,i=this.element.querySelector(".perfect-grid-gallery"),n=C(i);if(n.instance){for(u(this,n.instance),p(this,n.instance),e=0;e<this.totScrollEls;e++)this.scrollEls[e].style.height="";for(e=0;e<this.totOpacityEls;e++)this.opacityEls[e].style.top="";for(e=0;e<n.instance.gridBlocksTotal;e++){for(t=0;t<this.totScrollEls;t++)if(this.scrollEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setHeight=!1;break}for(t=0;t<this.totOpacityEls;t++)if(this.opacityEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setTop=!1;break}}i.style.height="",n.instance.properties.gridHeightSettable=!1}}function u(e,t){e.scrollEls=t.gridBlocks.filter(function(t){return Rexbuilder_Util.hasClass(t.el,e.options.scrollElsClass)}).map(function(e){return e.el}),e.scrollElsToWatch=t.gridBlocks.filter(function(t){return Rexbuilder_Util.hasClass(t.el,e.options.scrollElsClass)}).map(function(t){return t.el.querySelector("."+e.options.scrollElsToWatchClass)});for(var i=0,n=0,r=0;i<t.gridBlocksTotal;i++)for(n=0;n<e.totScrollEls;n++)if(e.scrollEls[n]===t.gridBlocks[i].el){e.scrollEls[n].style.WebKitBoxOrdinalGroup=r+1,e.scrollEls[n].style.MozFlexOrder=r,e.scrollEls[n].style.OOrder=r,e.scrollEls[n].style.MSOrder=r,e.scrollEls[n].style.order=r,e.scrollElsToWatch[n].setAttribute("data-scroll-el-index",r),r++;break}}function p(e,t){e.opacityEls=t.gridBlocks.filter(function(t){return Rexbuilder_Util.hasClass(t.el,e.options.opacityElsClass)}).map(function(e){return e.el})}function f(){if(P&&!(Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth)){var e,t=Array.prototype.slice.call(document.getElementsByClassName("split-scrollable")),i=t.length;for(e=0;e<i;e++)null===SplitScrollable.data(t[e])&&new SplitScrollable(t[e],{scrollElsToWatchClass:"text-wrap",initializeComplete:c})}}function g(){if("undefined"!=typeof ParticleSwarm){var e,t=Array.prototype.slice.call(document.getElementsByClassName("particle-swarm")),i=t.length;for(e=0;e<i;e++){var n=document.createElement("canvas");t[e].insertBefore(n,t[e].firstChild),new ParticleSwarm(n)}}}function m(){var e,t=Array.prototype.slice.call(document.getElementsByClassName("disable-grid")),i=t.length;for(e=0;e<i;e++){var n,r=t[e].querySelector(".perfect-grid-gallery"),l=Array.prototype.slice.call(t[e].getElementsByClassName("grid-stack-item")),o=l.length,a=[];for(n=0;n<o;n++)a.push(l[n].style.height);for(w(r),Rexbuilder_Util.addClass(t[e],"disabled"),n=0;n<o;n++)l[n].style.height=a[n]}}function _(){var e=Rexbuilder_Util.$rexContainer.find(".inline-pswp-gallery");e.on("click",Rexbuilder_Photoswipe.init_inline_pswp)}function x(){L=Rexbuilder_Util.$rexContainer.find(".rex-accordion"),$=Rexbuilder_Util.$document.find(".rex-accordion").not(L),F={},Rexbuilder_Util.editorMode?(F.open={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=e.properties.$content.parents(".grid-stack").data("gridstack");i.resize(t,null,Math.round(e.element.parentElement.offsetHeight/i.opts.cellHeight))}},F.close={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=t.children[0].getAttribute("data-gs_start_h"),n=e.properties.$content.parents(".grid-stack").data("gridstack");n.resize(t,null,Math.round(parseInt(i)))}}):(F.open={startClbk:function(e){var t=e.$element.parents(".perfect-grid-gallery"),i=t.find(".perfect-grid-item");i.addClass("accordion-animate-block")},progressClbk:function(e){var t=e.$element.parents(".perfect-grid-gallery").get(0),i=e.$element.parents(".perfect-grid-item").get(0),n=C(t);n&&n.instance.reCalcBlockHeight(i)}},F.close={progressClbk:function(e){var t=e.$element.parents(".perfect-grid-gallery").get(0),i=e.$element.parents(".perfect-grid-item").get(0),n=C(t);n&&n.instance.reCalcBlockHeight(i)},completeClbk:function(t){var i=t.$element.parents(".perfect-grid-gallery"),n=i.find(".perfect-grid-item"),r=t.$element.parents(".perfect-grid-item").get(0);e(r).one(Rexbuilder_Util._transitionEvent,function(){n.removeClass("accordion-animate-block")})}}),L.rexAccordion(F),$.rexAccordion({open:{},close:{}})}function h(){Rexbuilder_Util.editorMode||(m(),Rexbuilder_Photoswipe.init(".photoswipe-gallery"),_(),n(),r(),a(),l(T),1==_plugin_frontend_settings.animations&&o(),O(),z(),f(),g(),s())}function y(){var e=M.length,t=0;for(t=0;t<e;t++)Rexbuilder_Dom_Util.fixVideoProportion(M[t].section)}function b(){var e=performance.getEntriesByType("navigation")[0],t=e.type;if("navigate"!==t&&"prerender"!==t){var i=store.get("scrollPosition");"undefined"!=typeof i&&setTimeout(function(){window.scrollTo(0,i)},0)}}function v(){if(0!==A.length)if(Rexbuilder_Util.editorMode)A.perfectGridGalleryEditor({editorMode:Rexbuilder_Util.editorMode});else{var e=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.handleLayoutChange(e);var t=Array.prototype.slice.call(document.getElementsByClassName("perfect-grid-gallery")),i=t.length,n=0;for(n=0;n<i;n++){var r=new RexGrid(t[n]);M.push(r)}for(n=0;n<i;n++)B&&Rexbuilder_Util.hasClass(M[n].section,"sticky-section")&&StickySection.prepare(M[n].section);window.FastLoad.init()}}function R(){function t(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:Rexbuilder_Util.$rexContainer.find("[name="+this.hash.slice(1)+"]"),t.length)return Rexbuilder_Util.smoothScroll(t),!1}}if(Rexbuilder_Util.init(),Rexbuilder_Dom_Util.init(),T=Rexbuilder_Util.$rexContainer.find(".rexpansive_section"),A=Rexbuilder_Util.$rexContainer.find(".grid-stack-row"),v(),Rexbuilder_Rexbutton.init(),Rexbuilder_Rexelement.init(),Rexbuilder_Rexwpcf7.init(),Rexbuilder_Util.editorMode?(Rex_Save_Listeners.init(),Rexbuilder_Rexelement_Editor.init(),Rexbuilder_Rexwpcf7_Editor.init(),Rexbuilder_CreateBlocks.init(),Rexbuilder_Util_Editor.init(),Rexbuilder_Color_Palette.init(),Rexbuilder_Overlay_Palette.init(),Rexbuilder_Section.init(),Rexbuilder_Section_Editor.init(),Rexbuilder_Block.init(),Rexbuilder_Block_Editor.init(),Rexbuilder_Live_Utilities.addBuilderListeners(),TextEditor.init(),Rexbuilder_Section_Editor.triggerRowDataChange()):N(),Rex_Navigator.init(),Rexbuilder_Util.editorMode&&A.each(function(e,t){TextEditor.launchTextEditors(t)}),Rexbuilder_Util.editorMode&&Rexbuilder_Util.launchEditDomLayout(),!Rexbuilder_Util.editorMode){T.each(function(e,t){var i=t.getElementsByClassName("pswp-figure");0===i.length&&Rexbuilder_Util.removeClass(t,"photoswipe-gallery")});var i,n=[].slice.call(document.getElementsByClassName("rex-num-spin")),r=n.length;for(i=0;i<r;i++){var l=q(n[i]);l&&(V.push(l),e(n[i]).rexScrolled({callback:function(e){e.innerHTML=e.getAttribute("data-final-value")}}))}var o=Rexbuilder_Util.$body.find(".rex-slideshow");o.length>0&&o.rexSlideshow()}if(1==_plugin_frontend_settings.native_scroll_animation){for(var a=['[href="#"]',".no-smoothing",".vertical-nav-link",".rex-vertical-nav-link",".woocommerce-review-link"],s=Rexbuilder_Util.$body.find('a[href*="#"]'),d=0,c=a.length;d<c;d++)s=s.not(a[d]);s=s.not(u),s.on("click",t);var u=function(t){return 0!=e(this).parents(".woocommerce-tabs").length}}D(),Rexbuilder_Util.editorMode&&(Rexbuilder_Util.$document.on("rexlive:editDomLayoutEnd",RexSlider.init),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),x())}function U(){if(Rexbuilder_Util.editorMode)TextEditor.load(),Rexbuilder_Util_Editor.load(),Rexbuilder_Live_Utilities.load();else{for(var e=M.length,n=0;n<e;n++)M[n].fixAfterLoad();y(),RexSlider.init(),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),x()}t(),RexSlider.startAutoPlay(),A&&i(A),h(),y(),Rexbuilder_Util.galleryPluginActive=!0,S&&!Rexbuilder_Util.editorMode&&b()}function C(e){var t=e.getAttribute("data-rex-grid-id"),i=0,n=M.length;for(i=0;i<n;i++)if(t===M[i].properties.id&&e===M[i].element)return{instance:M[i],index:i};return null}function w(e){var t=C(e);null!==t&&(t.instance.destroy(),M.splice(t.index,1))}function k(){Rexbuilder_Util_Editor.elementIsResizing||(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.loadWidth!==Rexbuilder_Util.globalViewport.width&&Rexbuilder_Util.doneResizing())}function E(){var e=Rexbuilder_Util.findFrontLayout(),t=M.length;if(Rexbuilder_Util.startFrontLayout!=e&&(Rexbuilder_Util.changedFrontLayout=!0,Rexbuilder_Util.startFrontLayout=e),Rexbuilder_Util.changedFrontLayout){var i=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.handleLayoutChange(i)}RexGrid.updateViewportSize();for(var n=0,r=0,l=null;n<t;n++){if(P&&(l=SplitScrollable.data(M[n].section)),l&&Rexbuilder_Util.changedFrontLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth)for(l.destroy(),l=null,M[n].properties.gridHeightSettable=!0,r=0;r<M[n].gridBlocksTotal;r++)M[n].gridBlocks[r].setHeight=!0,M[n].gridBlocks[r].setTop=!0;if(Rexbuilder_Util.changedFrontLayout&&M[n].endChangeLayout(),M[n].endResize(),l&&(Rexbuilder_Util.changedFrontLayout&&(u(l,M[n]),p(l,M[n]),l.refreshScrollableIndex()),l.callFixStickyHeight()),B&&Rexbuilder_Util.changedFrontLayout){var o=StickySection.data(M[n].section);o&&StickySection.prepare(M[n].section)}}y(),Rexbuilder_Util.changedFrontLayout&&(window.FastLoad.destroy(),window.FastLoad.init(),h()),Rex_Navigator.getNavigationDotsPosition(),Rexbuilder_Util.changedFrontLayout=!1}var S=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),P="undefined"!=typeof SplitScrollable,B="undefined"!=typeof StickySection,T=null,A=null,L=null,$=null,V=[],F={},M=[],N=function(){var e=[].slice.call(document.getElementsByClassName("rex-button-wrapper")),t=e.length,i=0;for(i=0;i<t;i++){var n=e[i].querySelector(".rex-button-container");if(!n){var r=document.createElement("span");r.className="rex-button-container";var l=e[i].querySelector(".rex-button-background");l.parentNode.insertBefore(r,l),r.appendChild(l)}}},D=function(){function t(t){var i=e(t.target),n=i.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),r=i.YTPGetPlayer();void 0!==r&&(i.optimizeDisplay(),0==n.length||n.hasClass("user-has-muted")?(r.mute(),r.isMute=!0,r.setVolume(0)):i.YTPUnmute())}function i(t){var i=e(t.target).parents(".rex-youtube-wrap");if(i.length>0){var n=i[0].state;1==n?i.YTPPause():i.YTPPlay()}}function n(t){var i=e(this).find(".grid-item-content"),n=i.children(".rex-youtube-wrap"),r=i.children(".rex-video-vimeo-wrap--block"),l=i.children(".rex-video-wrap");if(n.length>0){var o=n[0].state;1==o?n.YTPPause():n.YTPPlay()}if(r.length>0){var a=VimeoVideo.findVideo(r.find("iframe")[0]);a&&a.getPaused().then(function(e){e?a.play():a.pause()})["catch"](function(e){})}if(l.length>0){var s=l.find(".rex-video-container").get(0);s.paused?s.play():s.pause()}}function r(t){t.stopPropagation();var i=e(this),n=i.parents(".youtube-player").eq(0).children(".rex-youtube-wrap"),r=i.parents(".mp4-player").eq(0).find(".rex-video-container"),l=i.parents(".vimeo-player").eq(0).find(".rex-video-vimeo-wrap--block");if(n.length>0){var o=n.get(0).player.isMuted();o?(n.YTPUnmute(),i.removeClass("user-has-muted")):(n.YTPMute(),i.addClass("user-has-muted"))}if(r.length>0&&(r.prop("muted")?(r.prop("muted",!1),i.removeClass("user-has-muted")):(r.prop("muted",!0),i.addClass("user-has-muted"))),l.length>0){var a=VimeoVideo.findVideo(l.find("iframe")[0]);a&&a.getVolume().then(function(e){0==e?(a.setVolume(1),i.removeClass("user-has-muted")):(a.setVolume(0),i.addClass("user-has-muted"))})["catch"](function(e){})}}function l(t){var i=e(t.currentTarget),n=i.parent().children(".play"),r=i.parents(".rexpansive_section");i.removeClass("video-tool--view"),n.addClass("video-tool--view"),Rexbuilder_Util.pauseVideo(r)}function o(t){var i=e(t.currentTarget),n=i.parent().children(".pause"),r=i.parents(".rexpansive_section");i.removeClass("video-tool--view"),n.addClass("video-tool--view"),Rexbuilder_Util.playVideo(r)}function a(t){var i=e(t.currentTarget).parent().find(".video-tool--view");i.click()}Rexbuilder_Util.$document.on("YTPStart",t),Rexbuilder_Util.$document.on("click",".YTPOverlay",i),Rexbuilder_Util.$document.on("click",".block-has-slider",n),Rexbuilder_Util.$document.on("click",".rex-video-toggle-audio",r),Rexbuilder_Util.$document.on("click",".rex-video__controls .pause",l),Rexbuilder_Util.$document.on("click",".rex-video__controls .play",o),Rexbuilder_Util.$document.on("click",".sticky-video-controls",a)},O=function(){if("undefined"!=typeof DistanceAccordion)for(var e=document.getElementsByClassName("distance-accordion-toggle"),t=0,i=e.length;t<i;t++){new DistanceAccordion(e[t])}},I=function(){var e=this.iframeContainer.contentDocument.querySelector(".rexbuilder-live-content");e.parentElement.removeChild(e),this.iframeContainer.contentDocument.body.insertBefore(e,this.iframeContainer.contentDocument.body.firstChild)},z=function(){if("undefined"!=typeof PopUpContent){var e=[].slice.call(document.getElementsByClassName("popup-content-button")),t=e.length,i=0;for(i=0;i<t;i++)null===PopUpContent.data(e[i])&&new PopUpContent(e[i],{contentRetrieveMethod:"iframe",getPopUpContentComplete:I,ajaxSettings:{type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_popup_content",nonce_param:_plugin_frontend_settings.rexajax.rexnonce}}})}},q=function(e){if("undefined"!=typeof Odometer){var t=e.innerText;if(null!==e.getAttribute("data-yearly-inc")&&""!==_plugin_frontend_settings.sitedate){var i=new Date(_plugin_frontend_settings.sitedate),n=new Date,r=n.getFullYear()-i.getFullYear(),l=e.getAttribute("data-yearly-inc");t=parseInt(t)+parseInt(l)*r}if(null!==e.getAttribute("data-montly-inc")&&""!==_plugin_frontend_settings.sitedate){var i=new Date(_plugin_frontend_settings.sitedate),n=new Date,r=n.getMonth()-i.getMonth(),o=e.getAttribute("data-montly-inc");t=parseInt(t)+parseInt(o)*r}e.setAttribute("data-final-value",t);var a=e.getAttribute("data-start-value");if(null==a){a="";for(var s=0,d=e.innerText.length;s<d;s++)a+="1"}var c=new Odometer({el:e,value:a,format:_plugin_frontend_settings.odometer.format,theme:_plugin_frontend_settings.odometer.theme});return c}};return{init:R,load:U,handleLiveResize:k,handleFrontEndResize:E,getRexGridInstance:C,destroyRexGridInstance:w}}(jQuery);
!function(){"use strict";function e(){var e;return window.matchMedia("(orientation: portrait)").matches&&(e="portrait"),window.matchMedia("(orientation: landscape)").matches&&(e="landscape"),e!=n&&(n=e,!0)}function i(e,i,t){var o;return function(){var a=this,n=arguments,r=function(){o=null,t||e.apply(a,n)},d=t&&!o;clearTimeout(o),o=setTimeout(r,i),d&&e.apply(a,n)}}function t(){Rexbuilder_Util.globalViewport=Rexbuilder_Util.viewport(),Rexbuilder_Util.editorMode?Rexbuilder_App.handleLiveResize():(a&&e()||!a)&&Rexbuilder_App.handleFrontEndResize()}function o(){d&&!Rexbuilder_Util.editorMode&&store.set("scrollPosition",window.pageYOffset||document.documentElement.scrollTop)}var a=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(a=!0);var n;e(),document.addEventListener("DOMContentLoaded",Rexbuilder_App.init),window.addEventListener("load",Rexbuilder_App.load);var r=Rexbuilder_Util.editorMode?1e3:100;window.addEventListener("resize",i(t,r));var d=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);window.addEventListener("beforeunload",o)}();