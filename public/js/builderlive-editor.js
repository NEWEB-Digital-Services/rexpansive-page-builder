!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.tippy=e()}(this,function(){"use strict";function T(t){return t&&"[object Function]"==={}.toString.call(t)}function d(t,e){return 1!==t.nodeType?[]:(t=getComputedStyle(t,null),e?t[e]:t)}function s(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function c(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=d(t),r=e.overflow,n=e.overflowX,e=e.overflowY;return/(auto|scroll|overlay)/.test(r+e+n)?t:c(s(t))}function f(t){return 11===t?lt:10!==t&&lt||ct}function u(t){if(!t)return document.documentElement;for(var e=f(10)?document.body:null,r=t.offsetParent;r===e&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var n=r&&r.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TD","TABLE"].indexOf(r.nodeName)&&"static"===d(r,"position")?u(r):r:(t?t.ownerDocument:document).documentElement}function i(t){return null===t.parentNode?t:i(t.parentNode)}function l(t,e){var r,n,o;return t&&t.nodeType&&e&&e.nodeType?(n=(o=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING)?t:e,o=o?e:t,(r=document.createRange()).setStart(n,0),r.setEnd(o,0),t!==(r=r.commonAncestorContainer)&&e!==r||n.contains(o)?"BODY"===(o=(n=r).nodeName)||"HTML"!==o&&u(n.firstElementChild)!==n?u(r):r:(o=i(t)).host?l(o.host,e):l(t,i(e).host)):document.documentElement}function m(t,e){var e="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",r=t.nodeName;return("BODY"===r||"HTML"===r?(r=t.ownerDocument.documentElement,t.ownerDocument.scrollingElement||r):t)[e]}function L(t,e){var e="x"===e?"Left":"Top",r="Left"==e?"Right":"Bottom";return parseFloat(t["border"+e+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function C(t,e,r,n){return k(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],f(10)?parseInt(r["offset"+t])+parseInt(n["margin"+("Height"===t?"Top":"Left")])+parseInt(n["margin"+("Height"===t?"Bottom":"Right")]):0)}function A(t){var e=t.body,t=t.documentElement,r=f(10)&&getComputedStyle(t);return{height:C("Height",e,t,r),width:C("Width",e,t,r)}}function h(t){return O({},t,{right:t.left+t.width,bottom:t.top+t.height})}function b(t){var e={};try{f(10)?(e=t.getBoundingClientRect(),r=m(t,"top"),n=m(t,"left"),e.top+=r,e.left+=n,e.bottom+=r,e.right+=n):e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},n="HTML"===t.nodeName?A(t.ownerDocument):{},e=n.width||t.clientWidth||r.right-r.left,n=n.height||t.clientHeight||r.bottom-r.top,e=t.offsetWidth-e,n=t.offsetHeight-n;return(e||n)&&(e-=L(t=d(t),"x"),n-=L(t,"y"),r.width-=e,r.height-=n),h(r)}function y(t,e,r){var r=!!(2<arguments.length&&void 0!==r)&&r,n=f(10),o="HTML"===e.nodeName,i=b(t),a=b(e),t=c(t),p=d(e),s=parseFloat(p.borderTopWidth,10),l=parseFloat(p.borderLeftWidth,10),a=(r&&o&&(a.top=k(a.top,0),a.left=k(a.left,0)),h({top:i.top-a.top-s,left:i.left-a.left-l,width:i.width,height:i.height}));return a.marginTop=0,a.marginLeft=0,!n&&o&&(i=parseFloat(p.marginTop,10),o=parseFloat(p.marginLeft,10),a.top-=s-i,a.bottom-=s-i,a.left-=l-o,a.right-=l-o,a.marginTop=i,a.marginLeft=o),a=(n&&!r?e.contains(t):e===t&&"BODY"!==t.nodeName)?function(t,e,r){var r=!!(2<arguments.length&&void 0!==r)&&r,n=m(e,"top"),e=m(e,"left"),r=r?-1:1;return t.top+=n*r,t.bottom+=n*r,t.left+=e*r,t.right+=e*r,t}(a,e):a}function Y(t){if(!t||!t.parentElement||f())return document.documentElement;for(var e=t.parentElement;e&&"none"===d(e,"transform");)e=e.parentElement;return e||document.documentElement}function v(t,e,r,n,o){var i,o=!!(4<arguments.length&&void 0!==o)&&o,a={top:0,left:0},p=o?Y(t):l(t,e),p=("viewport"===n?a=function(t,e){var e=!!(1<arguments.length&&void 0!==e)&&e,r=t.ownerDocument.documentElement,t=y(t,r),n=k(r.clientWidth,window.innerWidth||0),o=k(r.clientHeight,window.innerHeight||0),i=e?0:m(r),e=e?0:m(r,"left");return h({top:i-t.top+t.marginTop,left:e-t.left+t.marginLeft,width:n,height:o})}(p,o):("scrollParent"===n?"BODY"===(i=c(s(e))).nodeName&&(i=t.ownerDocument.documentElement):i="window"===n?t.ownerDocument.documentElement:n,e=y(i,p,o),"HTML"!==i.nodeName||function t(e){var r=e.nodeName;return"BODY"!==r&&"HTML"!==r&&("fixed"===d(e,"position")||t(s(e)))}(p)?a=e:(o=(n=A(t.ownerDocument)).height,i=n.width,a.top+=e.top-e.marginTop,a.bottom=o+e.top,a.left+=e.left-e.marginLeft,a.right=i+e.left)),"number"==typeof(r=r||0));return a.left+=p?r:r.left||0,a.top+=p?r:r.top||0,a.right-=p?r:r.right||0,a.bottom-=p?r:r.bottom||0,a}function D(t,e,r,n,o,i){var a,i=5<arguments.length&&void 0!==i?i:0;return-1===t.indexOf("auto")?t:(n=v(r,n,i,o),a={top:{width:n.width,height:e.top-n.top},right:{width:n.right-e.right,height:n.height},bottom:{width:n.width,height:n.bottom-e.bottom},left:{width:e.left-n.left,height:n.height}},(0<(o=(i=Object.keys(a).map(function(t){return O({key:t},a[t],{area:(t=a[t]).width*t.height})}).sort(function(t,e){return e.area-t.area})).filter(function(t){var e=t.width,t=t.height;return e>=r.clientWidth&&t>=r.clientHeight})).length?o:i)[0].key+((e=t.split("-")[1])?"-"+e:""))}function X(t,e,r,n){n=3<arguments.length&&void 0!==n?n:null;return y(r,n?Y(e):l(e,r),n)}function P(t){var e=getComputedStyle(t),r=parseFloat(e.marginTop)+parseFloat(e.marginBottom),e=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+e,height:t.offsetHeight+r}}function g(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function N(t,e,r){r=r.split("-")[0];var t=P(t),n={width:t.width,height:t.height},o=-1!==["right","left"].indexOf(r),i=o?"top":"left",a=o?"left":"top",p=o?"height":"width",o=o?"width":"height";return n[i]=e[i]+e[p]/2-t[p]/2,n[a]=r===a?e[a]-t[o]:e[g(a)],n}function w(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function I(t,r,e){var n,o;return(void 0===e?t:t.slice(0,(t=t,n="name",o=e,Array.prototype.findIndex?t.findIndex(function(t){return t[n]===o}):(e=w(t,function(t){return t[n]===o}),t.indexOf(e))))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&T(e)&&(r.offsets.popper=h(r.offsets.popper),r.offsets.reference=h(r.offsets.reference),r=e(r,t))}),r}function S(t,r){return t.some(function(t){var e=t.name;return t.enabled&&e===r})}function H(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var o=e[n],o=o?""+o+r:t;if(void 0!==document.body.style[o])return o}return null}function F(t){t=t.ownerDocument;return t?t.defaultView:window}function R(t,e,r,n){r.updateBound=n,F(t).addEventListener("resize",r.updateBound,{passive:!0});n=c(t);return function t(e,r,n,o){var i="BODY"===e.nodeName,e=i?e.ownerDocument.defaultView:e;e.addEventListener(r,n,{passive:!0}),i||t(c(e.parentNode),r,n,o),o.push(e)}(n,"scroll",r.updateBound,r.scrollParents),r.scrollElement=n,r.eventsEnabled=!0,r}function B(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,F(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function M(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function z(r,n){Object.keys(n).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&M(n[t])&&(e="px"),r.style[t]=n[t]+e})}function $(t,e,r){var n,o=w(t,function(t){return t.name===e}),t=!!o&&t.some(function(t){return t.name===r&&t.enabled&&t.order<o.order});return t||(n="`"+e+"`",console.warn("`"+r+"` modifier is required by "+n+" modifier in order to work, be sure to include it before "+n+"!")),t}function tt(t,e){e=!!(1<arguments.length&&void 0!==e)&&e,t=ft.indexOf(t),t=ft.slice(t+1).concat(ft.slice(0,t));return e?t.reverse():t}function et(t,p,s,e){var o=[0,0],n=-1!==["right","left"].indexOf(e),e=t.split(/(\+|\-)/).map(function(t){return t.trim()}),t=e.indexOf(w(e,function(t){return-1!==t.search(/,|\s/)})),r=(e[t]&&-1===e[t].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),/\s*,\s*|\s+/);return(-1===t?[e]:[e.slice(0,t).concat([e[t].split(r)[0]]),[e[t].split(r)[1]].concat(e.slice(t+1))]).map(function(t,e){var a=(1===e?!n:n)?"height":"width",r=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,r=!0,t):r?(t[t.length-1]+=e,r=!1,t):t.concat(e)},[]).map(function(t){return e=a,r=p,n=s,o=+(i=(t=t).match(/((?:\-|\+)?\d*\.?\d*)(.*)/))[1],i=i[2],o?0===i.indexOf("%")?h("%p"===i?r:n)[e]/100*o:"vh"===i||"vw"===i?("vh"===i?k(document.documentElement.clientHeight,window.innerHeight||0):k(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o:t;var e,r,n,o,i})}).forEach(function(r,n){r.forEach(function(t,e){M(t)&&(o[n]+=t*("-"===r[e-1]?-1:1))})}),o}function rt(t,e){function r(){Wt(function(){A=!1})}function o(t){var e,r,n,t=k=t,o=t.clientX,i=t.clientY;S.popperInstance&&(e=S.reference.getBoundingClientRect(),t=S.props.followCursor,r="horizontal"===t,n="vertical"===t,S.popperInstance.reference={getBoundingClientRect:function(){return{width:0,height:0,top:r?e.top:i,bottom:r?e.bottom:i,left:n?e.left:o,right:n?e.right:o}},clientWidth:0,clientHeight:0},S.popperInstance.scheduleUpdate())}function i(t){if(y(),!S.state.isVisible)if(S.props.target)(n=J((e=t).target,S.props.target))&&!n._tippy&&(r=S.props.content)&&(rt(n,_({},S.props,{content:r,target:"",showOnInit:!0})),i(e));else{if(T=!0,S.props.wait)return S.props.wait(S,t);h()&&(I.arrow&&(I.arrow.style.margin="0"),document.addEventListener("mousemove",o));n=K(S.props.delay,0,j.delay);n?E=setTimeout(function(){v()},n):v()}var e,r,n}function a(){if(y(),!S.state.isVisible)return n();T=!1;var t=K(S.props.delay,1,j.delay);t?O=setTimeout(function(){S.state.isVisible&&g()},t):g()}function n(){document.removeEventListener("mousemove",o),k=null}function p(){document.body.removeEventListener("mouseleave",a),document.removeEventListener("mousemove",D)}function s(t){S.state.isEnabled&&!u(t)&&(S.state.isVisible||(x=t),"click"===t.type&&!1!==S.props.hideOnClick&&S.state.isVisible?a():i(t))}function l(t){var e=St(t.target,function(t){return t._tippy}),r=J(t.target,V.POPPER)===S.popper,e=e===S.reference;r||e||_t(Q(S.popper),S.popper.getBoundingClientRect(),t,S.props)&&(p(),a())}function c(t){return u(t)?void 0:S.props.interactive?(document.body.addEventListener("mouseleave",a),void document.addEventListener("mousemove",D)):void a()}function H(t){if(t.target===S.reference){if(S.props.interactive){if(!t.relatedTarget)return;if(J(t.relatedTarget,V.POPPER))return}a()}}function d(t){J(t.target,S.props.target)&&i(t)}function f(t){J(t.target,S.props.target)&&a()}function u(t){var t=-1<t.type.indexOf("touch"),e=Zt&&Z&&S.props.touchHold&&!t,t=Z&&!S.props.touchHold&&t;return e||t}function m(){var e=S.popperChildren.tooltip,t=S.props.popperOptions,r=V["round"===S.props.arrowType?"ROUND_ARROW":"ARROW"],n=e.querySelector(r),r=_({placement:S.props.placement},t||{},{modifiers:_({},t?t.modifiers:{},{arrow:_({element:r},t&&t.modifiers?t.modifiers.arrow:{}),flip:_({enabled:S.props.flip,padding:S.props.distance+5,behavior:S.props.flipBehavior},t&&t.modifiers?t.modifiers.flip:{}),offset:_({offset:S.props.offset},t&&t.modifiers?t.modifiers.offset:{})}),onCreate:function(){e.style[Q(S.popper)]=jt(S.props.distance,j.distance),n&&S.props.arrowTransform&&Bt(n,S.props.arrowTransform)},onUpdate:function(){var t=e.style;t.top="",t.bottom="",t.left="",t.right="",t[Q(S.popper)]=jt(S.props.distance,j.distance),n&&S.props.arrowTransform&&Bt(n,S.props.arrowTransform)}}),t=new MutationObserver(function(){S.popperInstance.update()});return t.observe(S.popper,{childList:!0,subtree:!0}),w&&w.disconnect(),w=t,Y||(Y=!0,S.popper.addEventListener("mouseenter",function(t){S.props.interactive&&S.state.isVisible&&"mouseenter"===x.type&&i(t)}),S.popper.addEventListener("mouseleave",function(t){S.props.interactive&&"mouseenter"===x.type&&0===S.props.interactiveDebounce&&_t(Q(S.popper),S.popper.getBoundingClientRect(),t,S.props)&&a()})),new U(S.reference,S.popper,r)}function h(){return S.props.followCursor&&!Z&&"focus"!==x.type}function F(t,e){if(0===t)return e();function r(t){t.target===n&&(Vt(n,"remove",r),e())}var n=S.popperChildren.tooltip;Vt(n,"remove",L),Vt(n,"add",r),L=r}function b(t,e,r){S.reference.addEventListener(t,e),r.push({eventType:t,handler:e})}function R(){C=S.props.trigger.trim().split(" ").reduce(function(t,e){return"manual"===e||(S.props.target?"mouseenter"===e?(b("mouseover",d,t),b("mouseout",f,t)):"focus"===e?(b("focusin",d,t),b("focusout",f,t)):"click"===e&&b(e,d,t):(b(e,s,t),S.props.touchHold&&(b("touchstart",s,t),b("touchend",c,t)),"mouseenter"===e?b("mouseleave",c,t):"focus"===e&&b(Jt?"focusout":"blur",H,t))),t},[])}function B(){C.forEach(function(t){var e=t.eventType,t=t.handler;S.reference.removeEventListener(e,t)})}function y(){clearTimeout(E),clearTimeout(O)}function M(e){Gt(e,j);var t=S.props,r=Ut(S.reference,_({},S.props,e,{performance:!0}));r.performance=e.performance||t.performance,S.props=r,("trigger"in e||"touchHold"in e)&&(B(),R()),"interactiveDebounce"in e&&(p(),D=qt(l,e.interactiveDebounce)),Nt(S.popper,t,r),S.popperChildren=Dt(S.popper),S.popperInstance&&ot.some(function(t){return t in e})&&(S.popperInstance.destroy(),S.popperInstance=m(),S.state.isVisible||S.popperInstance.disableEventListeners(),S.props.followCursor)&&k&&o(k)}function v(){var t,e,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:K(S.props.duration,0,j.duration[0]);return S.state.isDestroyed||!S.state.isEnabled||Z&&!S.props.touch?void 0:S.reference.isVirtual||document.documentElement.contains(S.reference)?S.reference.hasAttribute("disabled")?void 0:A?void(A=!1):void(!1!==S.props.onShow(S)&&(S.popper.style.visibility="visible",S.state.isVisible=!0,G([S.popper,S.popperChildren.tooltip,S.popperChildren.backdrop],0),t=function(){S.state.isVisible&&(h()||S.popperInstance.update(),G([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],r),S.popperChildren.backdrop&&(S.popperChildren.content.style.transitionDelay=W(r/6)+"ms"),S.props.interactive&&S.reference.classList.add("tippy-active"),S.props.sticky&&(G([S.popper],Jt?0:S.props.updateDuration),function t(){S.popperInstance&&S.popperInstance.scheduleUpdate(),X?requestAnimationFrame(t):G([S.popper],0)}()),Mt([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],"visible"),F(r,function(){0===S.props.updateDuration&&S.popperChildren.tooltip.classList.add("tippy-notransition"),S.props.interactive&&-1<["focus","click"].indexOf(x.type)&&Ht(S.popper),S.reference.setAttribute("aria-describedby",S.popper.id),S.props.onShown(S)}))},S.popperInstance?(h()||S.popperInstance.scheduleUpdate(),S.props.livePlacement&&!h()&&S.popperInstance.enableEventListeners()):(S.popperInstance=m(),S.props.livePlacement||S.popperInstance.disableEventListeners()),S.popperInstance.reference=S.reference,h()&&(S.popperChildren.arrow&&(S.popperChildren.arrow.style.margin=""),e=K(S.props.delay,0,j.delay),x.type)&&o(e&&k?k:x),zt(S.popperInstance,t),S.props.appendTo.contains(S.popper)||(S.props.appendTo.appendChild(S.popper),X=!0))):z()}function g(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:K(S.props.duration,1,j.duration[1]);!S.state.isDestroyed&&S.state.isEnabled&&!1!==S.props.onHide(S)&&(0===S.props.updateDuration&&S.popperChildren.tooltip.classList.remove("tippy-notransition"),S.props.interactive&&S.reference.classList.remove("tippy-active"),S.popper.style.visibility="hidden",S.state.isVisible=!1,G([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],e),Mt([S.popperChildren.tooltip,S.popperChildren.backdrop,S.popperChildren.content],"hidden"),S.props.interactive&&!A&&-1<["focus","click"].indexOf(x.type)&&("focus"===x.type&&(A=!0),Ht(S.reference)),t=function(){T||n(),S.reference.removeAttribute("aria-describedby"),S.popperInstance.disableEventListeners(),S.props.appendTo.removeChild(S.popper),X=!1,S.props.onHidden(S)},F(e,function(){!S.state.isVisible&&S.props.appendTo.contains(S.popper)&&t()}))}function z(t){S.state.isDestroyed||(S.state.isVisible&&g(0),B(),S.reference.removeEventListener("click",r),delete S.reference._tippy,S.props.target&&t&&q(S.reference.querySelectorAll(S.props.target)).forEach(function(t){return t._tippy&&t._tippy.destroy()}),S.popperInstance&&S.popperInstance.destroy(),w&&w.disconnect(),S.state.isDestroyed=!0)}var w,x,k,E,O,T,L,C,A,Y,D,X,P,N,I,S,e=Ut(t,e);return!e.multiple&&t._tippy?null:(k=w=null,T=!(x={}),L=function(){},Y=A=!(C=[]),D=(O=E=0)<e.interactiveDebounce?qt(l,e.interactiveDebounce):l,X=!1,P=oe++,N=Pt(P,e),I=Dt(N),S={id:P,reference:t,popper:N,popperChildren:I,popperInstance:null,props:e,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1},clearDelayTimeouts:y,set:M,setContent:function(t){M({content:t})},show:v,hide:g,enable:function(){S.state.isEnabled=!0},disable:function(){S.state.isEnabled=!1},destroy:z},R(),t.addEventListener("click",r),e.lazy||(S.popperInstance=m(),S.popperInstance.disableEventListeners()),e.showOnInit&&setTimeout(i,20),!e.a11y||e.target||Yt(t)||t.setAttribute("tabindex","0"),t._tippy=S,N._tippy=S)}function r(t,e,r){Gt(e,j),ie||(p=ae,document.addEventListener("click",ee,p),document.addEventListener("touchstart",$t),window.addEventListener("blur",re),window.addEventListener("resize",ne),Zt||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints||document.addEventListener("pointerdown",$t),ie=!0);var n=_({},j,e);if(Xt(t)){var o=t,i,a={isVirtual:!0,attributes:o.attributes||{},setAttribute:function(t,e){o.attributes[t]=e},getAttribute:function(t){return o.attributes[t]},removeAttribute:function(t){delete o.attributes[t]},hasAttribute:function(t){return t in o.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){o.classList.classNames[t]=!0},remove:function(t){delete o.classList.classNames[t]},contains:function(t){return t in o.classList.classNames}}};for(i in a)o[i]=a[i]}var p=function(t){if(t instanceof Element||Xt(t))return[t];if(t instanceof NodeList)return q(t);if(Array.isArray(t))return t;try{return q(document.querySelectorAll(t))}catch(t){return[]}}(t),e=p[0],r=(r&&e?[e]:p).reduce(function(t,e){e=e&&rt(e,n);return e&&t.push(e),t},[]);return{targets:t,props:n,instances:r,destroyAll:function(){this.instances.forEach(function(t){t.destroy()}),this.instances=[]}}}for(var nt=Math.min,W=Math.round,x=Math.floor,k=Math.max,_=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},j={a11y:!0,content:"",placement:"top",livePlacement:!0,trigger:"mouseenter focus",hideOnClick:!0,animation:"shift-away",animateFill:!0,arrow:!1,delay:[0,20],duration:[325,275],interactive:!1,interactiveBorder:2,interactiveDebounce:0,theme:"dark",size:"regular",distance:10,offset:0,multiple:!1,followCursor:!1,inertia:!1,updateDuration:200,sticky:!1,appendTo:function(){return document.body},zIndex:9999,touchHold:!1,performance:!1,flip:!0,flipBehavior:"flip",arrowType:"sharp",arrowTransform:"",target:"",allowHTML:!0,showOnInit:!1,popperOptions:{},lazy:!0,touch:!0,wait:null,shouldPopperHideOnBlur:function(){return!0},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){}},ot=["placement","popperOptions","flip","flipBehavior","distance","offset"],t="undefined"!=typeof window&&"undefined"!=typeof document,it=["Edge","Trident","Firefox"],at=0,pt=0;pt<it.length;pt+=1)if(t&&0<=navigator.userAgent.indexOf(it[pt])){at=1;break}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=t&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},at))}},lt=t&&!(!window.MSInputMethodContext||!document.documentMode),ct=t&&/MSIE 10/.test(navigator.userAgent),dt=function(t,e,r){return e&&bt(t.prototype,e),r&&bt(t,r),t},O=Object.assign||function(t){for(var e,r=1;r<arguments.length;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ft=e.slice(3),ut="flip",mt="clockwise",ht="counterclockwise",U=(dt(a,[{key:"update",value:function(){return function(){var t;this.state.isDestroyed||((t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}}).offsets.reference=X(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=D(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=N(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=I(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t)))}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,S(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[H("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=R(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return B.call(this)}}]),a);function a(t,e){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this,i=a;if(!(o instanceof i))throw new TypeError("Cannot call a class as a function");this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=st(this.update.bind(this)),this.options=O({},a.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(O({},a.Defaults.modifiers,n.modifiers)).forEach(function(t){r.options.modifiers[t]=O({},a.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return O({name:t},r.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&T(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)}),this.update();o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}function bt(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}U.Utils=("undefined"==typeof window?global:window).PopperUtils,U.placements=e,U.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e,r,n,o=t.placement,i=o.split("-")[0],o=o.split("-")[1];return o&&(e=(r=t.offsets).reference,r=r.popper,n=(i=-1!==["bottom","top"].indexOf(i))?"width":"height",i={start:E({},i=i?"left":"top",e[i]),end:E({},i,e[i]+e[n]-r[n])},t.offsets.popper=O({},r,i[o])),t}},offset:{order:200,enabled:!0,fn:function(t,e){var e=e.offset,r=t.placement,n=(o=t.offsets).popper,o=o.reference,r=r.split("-")[0],e=M(+e)?[+e,0]:et(e,n,o,r);return"left"===r?(n.top+=e[0],n.left-=e[1]):"right"===r?(n.top+=e[0],n.left+=e[1]):"top"===r?(n.left+=e[0],n.top-=e[1]):"bottom"===r&&(n.left+=e[0],n.top+=e[1]),t.popper=n,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,n){var e=n.boundariesElement||u(t.instance.popper),r=(t.instance.reference===e&&(e=u(e)),H("transform")),o=t.instance.popper.style,i=o.top,a=o.left,p=o[r],s=(o.top="",o.left="",o[r]="",v(t.instance.popper,t.instance.reference,n.padding,e,t.positionFixed)),e=(o.top=i,o.left=a,o[r]=p,n.boundaries=s,n.priority),l=t.offsets.popper,c={primary:function(t){var e=l[t];return l[t]<s[t]&&!n.escapeWithReference&&(e=k(l[t],s[t])),E({},t,e)},secondary:function(t){var e="right"===t?"left":"top",r=l[e];return l[t]>s[t]&&!n.escapeWithReference&&(r=nt(l[e],s[t]-("right"===t?l.width:l.height))),E({},e,r)}};return e.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";l=O({},l,c[e](t))}),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,r=e.popper,e=e.reference,n=t.placement.split("-")[0],o=x,n=-1!==["top","bottom"].indexOf(n),i=n?"right":"bottom",a=n?"left":"top",n=n?"width":"height";return r[i]<o(e[a])&&(t.offsets.popper[a]=o(e[a])-r[n]),r[a]>o(e[i])&&(t.offsets.popper[a]=o(e[i])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){if($(t.instance.modifiers,"arrow","keepTogether")){e=e.element;if("string"==typeof e){if(!(e=t.instance.popper.querySelector(e)))return t}else if(!t.instance.popper.contains(e))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],n=t.offsets,o=n.popper,n=n.reference,r=-1!==["left","right"].indexOf(r),i=r?"height":"width",a=r?"Top":"Left",p=a.toLowerCase(),s=r?"left":"top",r=r?"bottom":"right",l=P(e)[i],r=(n[r]-l<o[p]&&(t.offsets.popper[p]-=o[p]-(n[r]-l)),n[p]+l>o[r]&&(t.offsets.popper[p]+=n[p]+l-o[r]),t.offsets.popper=h(t.offsets.popper),n[p]+n[i]/2-l/2),n=d(t.instance.popper),c=parseFloat(n["margin"+a],10),n=parseFloat(n["border"+a+"Width"],10),a=r-t.offsets.popper[p]-c-n,a=k(nt(o[i]-l,a),0);t.arrowElement=e,t.offsets.arrow=(E(r={},p,W(a)),E(r,s,""),r)}return t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(s,l){if(!(S(s.instance.modifiers,"inner")||s.flipped&&s.placement===s.originalPlacement)){var c=v(s.instance.popper,s.instance.reference,l.padding,l.boundariesElement,s.positionFixed),d=s.placement.split("-")[0],f=g(d),u=s.placement.split("-")[1]||"",m=[];switch(l.behavior){case ut:m=[d,f];break;case mt:m=tt(d);break;case ht:m=tt(d,!0);break;default:m=l.behavior}m.forEach(function(t,e){if(d!==t||m.length===e+1)return s;d=s.placement.split("-")[0],f=g(d);var t=s.offsets.popper,r=s.offsets.reference,n=x,r="left"===d&&n(t.right)>n(r.left)||"right"===d&&n(t.left)<n(r.right)||"top"===d&&n(t.bottom)>n(r.top)||"bottom"===d&&n(t.top)<n(r.bottom),o=n(t.left)<n(c.left),i=n(t.right)>n(c.right),a=n(t.top)<n(c.top),t=n(t.bottom)>n(c.bottom),n="left"===d&&o||"right"===d&&i||"top"===d&&a||"bottom"===d&&t,p=-1!==["top","bottom"].indexOf(d),o=!!l.flipVariations&&(p&&"start"===u&&o||p&&"end"===u&&i||!p&&"start"===u&&a||!p&&"end"===u&&t);(r||n||o)&&(s.flipped=!0,(r||n)&&(d=m[e+1]),o&&(u="end"===(i=u)?"start":"start"===i?"end":i),s.placement=d+(u?"-"+u:""),s.offsets.popper=O({},s.offsets.popper,N(s.instance.popper,s.offsets.reference,s.placement)),s=I(s.instance.modifiers,s,"flip"))})}return s},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,r=e.split("-")[0],n=t.offsets,o=n.popper,n=n.reference,i=-1!==["left","right"].indexOf(r),a=-1===["top","left"].indexOf(r);return o[i?"left":"top"]=n[r]-(a?o[i?"width":"height"]:0),t.placement=g(e),t.offsets.popper=h(o),t}},hide:{order:800,enabled:!0,fn:function(t){if($(t.instance.modifiers,"hide","preventOverflow")){var e=t.offsets.reference,r=w(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var r=e.x,n=e.y,o=t.offsets.popper,i=w(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration,e=(void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!"),void 0===i?e.gpuAcceleration:i),i=u(t.instance.popper),a=b(i),p={position:o.position},o={left:x(o.left),top:W(o.top),bottom:W(o.bottom),right:x(o.right)},r="bottom"===r?"top":"bottom",n="right"===n?"left":"right",s=H("transform"),l="bottom"==r?"HTML"===i.nodeName?-i.clientHeight+o.bottom:-a.height+o.bottom:o.top,i="right"==n?"HTML"===i.nodeName?-i.clientWidth+o.right:-a.width+o.right:o.left,o=(e&&s?(p[s]="translate3d("+i+"px, "+l+"px, 0)",p[r]=0,p[n]=0,p.willChange="transform"):(a="right"==n?-1:1,p[r]=l*("bottom"==r?-1:1),p[n]=i*a,p.willChange=r+", "+n),{"x-placement":t.placement});return t.attributes=O({},o,t.attributes),t.styles=O({},p,t.styles),t.arrowStyles=O({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return z(t.instance.popper,t.styles),e=t.instance.popper,r=t.attributes,Object.keys(r).forEach(function(t){!1===r[t]?e.removeAttribute(t):e.setAttribute(t,r[t])}),t.arrowElement&&Object.keys(t.arrowStyles).length&&z(t.arrowElement,t.arrowStyles),t;var e,r},onLoad:function(t,e,r,n,o){o=X(o,e,t,r.positionFixed),o=D(r.placement,o,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",o),z(e,{position:r.positionFixed?"fixed":"absolute"}),r},gpuAcceleration:void 0}}};function yt(t,e){e.content instanceof Element?(vt(t,""),t.appendChild(e.content)):t[e.allowHTML?"innerHTML":"textContent"]=e.content}function o(){return document.createElement("div")}function vt(t,e){t[At.x&&"innerHTML"]=e instanceof Element?e[At.x&&"innerHTML"]:e}function gt(t){var e=o();return"round"===t?(e.className="tippy-roundarrow",vt(e,'<svg viewBox="0 0 24 8" xmlns="http://www.w3.org/2000/svg"><path d="M3 8s2.021-.015 5.253-4.218C9.584 2.051 10.797 1.007 12 1c1.203-.007 2.416 1.035 3.761 2.782C19.012 8.005 21 8 21 8H3z"/></svg>')):e.className="tippy-arrow",e}function wt(){var t=o();return t.className="tippy-backdrop",t.setAttribute("data-state","hidden"),t}function xt(t,e){t.setAttribute("tabindex","-1"),e.setAttribute("data-interactive","")}function n(r){q(document.querySelectorAll(V.POPPER)).forEach(function(t){var e=t._tippy;!e||!0!==e.props.hideOnClick||r&&t===r.popper||e.hide()})}function kt(o){return Object.keys(j).reduce(function(t,e){var r,n=(o.getAttribute("data-tippy-"+e)||"").trim();return n&&(t[e]="true"===n||"false"!==n&&(r=n,isNaN(r)||isNaN(parseFloat(r))?"target"!==e&&"["===n[0]?JSON.parse(n):n:+n)),t},{})}function Et(t,e){return(e?t:{X:"Y",Y:"X"}[t])||""}function Ot(t,e,r,n){var o=e[0],e=e[1];return o||e?{scale:e?r?o+", "+e:e+", "+o:""+o,translate:e?r?n?o+"px, "+-e+"px":o+"px, "+e+"px":n?-e+"px, "+o+"px":e+"px, "+o+"px":n?-o+"px":o+"px"}[t]:""}function Tt(t,e){return(t=t.match(new RegExp(e+"([XY])")))?t[1]:""}function Lt(t,e){return(t=t.match(e))?t[1].split(",").map(parseFloat):[]}function Ct(){var t=performance.now();t-te<20&&(Z=!1,document.removeEventListener("mousemove",Ct),!Qt)&&document.body.classList.remove("tippy-iOS"),te=t}var V={POPPER:".tippy-popper",TOOLTIP:".tippy-tooltip",CONTENT:".tippy-content",BACKDROP:".tippy-backdrop",ARROW:".tippy-arrow",ROUND_ARROW:".tippy-roundarrow"},At={x:!0},p="undefined"!=typeof window,dt=p&&"MutationObserver"in window,q=function(t){return[].slice.call(t)},Yt=function(t){return!(t instanceof Element)||It.call(t,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!t.hasAttribute("disabled")},G=function(t,e){t.filter(Boolean).forEach(function(t){t.style.transitionDuration=e+"ms"})},Dt=function(e){function t(t){return e.querySelector(t)}return{tooltip:t(V.TOOLTIP),backdrop:t(V.BACKDROP),content:t(V.CONTENT),arrow:t(V.ARROW)||t(V.ROUND_ARROW)}},Xt=function(t){return"[object Object]"==={}.toString.call(t)},K=function(t,e,r){return Array.isArray(t)?null==(e=t[e])?r:e:t},Pt=function(t,e){var r=o(),n=(r.className="tippy-popper",r.setAttribute("role","tooltip"),r.id="tippy-"+t,r.style.zIndex=e.zIndex,o()),t=(n.className="tippy-tooltip",n.setAttribute("data-size",e.size),n.setAttribute("data-animation",e.animation),n.setAttribute("data-state","hidden"),e.theme.split(" ").forEach(function(t){n.classList.add(t+"-theme")}),o());return t.className="tippy-content",t.setAttribute("data-state","hidden"),e.interactive&&xt(r,n),e.arrow&&n.appendChild(gt(e.arrowType)),e.animateFill&&(n.appendChild(wt()),n.setAttribute("data-animatefill","")),e.inertia&&n.setAttribute("data-inertia",""),yt(t,e),n.appendChild(t),r.appendChild(n),r.addEventListener("focusout",function(t){t.relatedTarget&&r._tippy&&!St(t.relatedTarget,function(t){return t===r})&&t.relatedTarget!==r._tippy.reference&&r._tippy.props.shouldPopperHideOnBlur(t)&&r._tippy.hide()}),r},Nt=function(t,e,r){var n=Dt(t),o=n.tooltip,i=n.content,a=n.backdrop,n=n.arrow;t.style.zIndex=r.zIndex,o.setAttribute("data-size",r.size),o.setAttribute("data-animation",r.animation),e.content!==r.content&&yt(i,r),!e.animateFill&&r.animateFill?(o.appendChild(wt()),o.setAttribute("data-animatefill","")):e.animateFill&&!r.animateFill&&(o.removeChild(a),o.removeAttribute("data-animatefill")),!e.arrow&&r.arrow?o.appendChild(gt(r.arrowType)):e.arrow&&!r.arrow&&o.removeChild(n),e.arrow&&r.arrow&&e.arrowType!==r.arrowType&&o.replaceChild(gt(r.arrowType),n),!e.interactive&&r.interactive?xt(t,o):e.interactive&&!r.interactive&&(i=o,t.removeAttribute("tabindex"),i.removeAttribute("data-interactive")),!e.inertia&&r.inertia?o.setAttribute("data-inertia",""):e.inertia&&!r.inertia&&o.removeAttribute("data-inertia"),e.theme!==r.theme&&(e.theme.split(" ").forEach(function(t){o.classList.remove(t+"-theme")}),r.theme.split(" ").forEach(function(t){o.classList.add(t+"-theme")}))},It=function(){var t;if(p)return(t=Element.prototype).matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector}(),J=function(t,e){return(Element.prototype.closest||function(t){for(var e=this;e;){if(It.call(e,t))return e;e=e.parentElement}}).call(t,e)},St=function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}},Ht=function(t){var e=window.scrollX||window.pageXOffset,r=window.scrollY||window.pageYOffset;t.focus(),scroll(e,r)},Ft=/translateX?Y?\(([^)]+)\)/,Rt=/scaleX?Y?\(([^)]+)\)/,Bt=function(t,e){var r=Q(J(t,V.POPPER)),n="top"===r||"bottom"===r,r="right"===r||"bottom"===r,o={translate:{axis:Tt(e,"translate"),numbers:Lt(e,Ft)},scale:{axis:Tt(e,"scale"),numbers:Lt(e,Rt)}},e=e.replace(Ft,"translate"+Et(o.translate.axis,n)+"("+Ot("translate",o.translate.numbers,n,r)+")").replace(Rt,"scale"+Et(o.scale.axis,n)+"("+Ot("scale",o.scale.numbers,n,r)+")");t.style[void 0===document.body.style.transform?"webkitTransform":"transform"]=e},Mt=function(t,e){t.filter(Boolean).forEach(function(t){t.setAttribute("data-state",e)})},zt=function(t,e){var r=t.popper,n=t.options,o=n.onCreate,i=n.onUpdate;n.onCreate=n.onUpdate=function(){r.offsetHeight,e(),i(),n.onCreate=o,n.onUpdate=i}},Wt=function(t){setTimeout(t,1)},_t=function(t,e,r,n){var o,i,a,p;return!t||(p=r.clientX,r=r.clientY,o=n.interactiveBorder,n=n.distance,i=e.top-r>("top"===t?o+n:o),r=r-e.bottom>("bottom"===t?o+n:o),a=e.left-p>("left"===t?o+n:o),p=p-e.right>("right"===t?o+n:o),i)||r||a||p},jt=function(t,e){return-(t-e)+"px"},Q=function(t){t=t.getAttribute("x-placement");return t?t.split("-")[0]:""},Ut=function(t,e){var r=_({},e,e.performance?{}:kt(t));return r.arrow&&(r.animateFill=!1),"function"==typeof r.appendTo&&(r.appendTo=e.appendTo(t)),"function"==typeof r.content&&(r.content=e.content(t)),r},Vt=function(t,e,r){t[e+"EventListener"]("transitionend",r)},qt=function(r,n){var o;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){return r.apply(t,e)},n)}},Gt=function(t,e){for(var r in t||{})if(!(r in e))throw Error("[tippy]: `"+r+"` is not a valid option")},e=p?navigator:{},Kt=p?window:{},Jt=/MSIE |Trident\//.test(e.userAgent),Qt=/iPhone|iPad|iPod/.test(e.platform)&&!Kt.MSStream,Zt="ontouchstart"in Kt,Z=!1,$t=function(){Z||(Z=!0,Qt&&document.body.classList.add("tippy-iOS"),window.performance&&document.addEventListener("mousemove",Ct))},te=0,ee=function(t){t=t.target;if(!(t instanceof Element))return n();var e=J(t,V.POPPER);if(!(e&&e._tippy&&e._tippy.props.interactive)){e=St(t,function(t){return t._tippy&&t._tippy.reference===t});if(e){t=e._tippy,e=-1<t.props.trigger.indexOf("click");if(Z||e)return n(t);if(!0!==t.props.hideOnClick||e)return;t.clearDelayTimeouts()}n()}},re=function(){var t=document.activeElement;t&&t.blur&&t._tippy&&t.blur()},ne=function(){q(document.querySelectorAll(V.POPPER)).forEach(function(t){t=t._tippy;t.props.livePlacement||t.popperInstance.scheduleUpdate()})},oe=1,ie=!1,ae=!1;return r.version="3.0.6",r.defaults=j,r.one=function(t,e){return r(t,e,!0).instances[0]},r.setDefaults=function(t){j=_({},j,t),r.defaults=j},r.disableAnimations=function(){r.setDefaults({duration:0,updateDuration:0,animateFill:!1})},r.hideAllPoppers=n,r.useCapture=function(){ae=!0},p&&setTimeout(function(){q(document.querySelectorAll("[data-tippy]")).forEach(function(t){var e=t.getAttribute("data-tippy");e&&r(t,{content:e})})}),dt&&((e=document.createElement("style")).type="text/css",e.textContent='.tippy-iOS{cursor:pointer!important}.tippy-notransition{transition:none!important}.tippy-popper{-webkit-perspective:700px;perspective:700px;z-index:9999;outline:0;transition-timing-function:cubic-bezier(.165,.84,.44,1);pointer-events:none;line-height:1.4}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-8px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 6px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%);opacity:1}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) rotateX(0);transform:translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(60deg);transform:translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-8px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 6px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%);opacity:1}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) rotateX(0);transform:translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) rotateX(-60deg);transform:translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(0) scale(.5);transform:translateY(0) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-16px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) rotateY(0);transform:translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(-60deg);transform:translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-16px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) rotateY(0);transform:translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) rotateY(60deg);transform:translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{opacity:1;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{opacity:1;-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(0) scale(.5);transform:translateX(0) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:4px;font-size:.9rem;padding:.3rem .6rem;max-width:350px;text-align:center;will-change:transform;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#333}.tippy-tooltip[data-size=small]{padding:.2rem .4rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.4rem .8rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.53,2,.36,.85)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:24px;height:8px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;will-change:transform;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}@media (max-width:360px){.tippy-popper{max-width:96%;max-width:calc(100% - 20px)}}',document.head.insertBefore(e,document.head.firstChild)),r});
// Spectrum Colorpicker v1.8.0
// https://github.com/bgrins/spectrum
// Author: Brian Grinstead
// License: MIT
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):t(jQuery)}(function(Tt,Ot){"use strict";var qt={beforeShow:e,move:e,change:e,show:e,hide:e,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},Nt=[],jt=!!/msie/i.exec(window.navigator.userAgent),Et=((u=document.createElement("div").style).cssText="background-color:rgba(0,0,0,.5)",t(u.backgroundColor,"rgba")||t(u.backgroundColor,"hsla")),Lt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),Kt=function(){var t="";if(jt)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function t(t,e){return!!~(""+t).indexOf(e)}function Dt(t,e,r,n){for(var a=[],o=0;o<t.length;o++){var i,s,l,c=t[o];c?(s=(i=tinycolor(c)).toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",s+=tinycolor.equals(e,c)?" sp-thumb-active":"",c=i.toString(n.preferredFormat||"rgb"),l=Et?"background-color:"+i.toRgbString():"filter:"+i.toFilter(),a.push('<span title="'+c+'" data-color="'+i.toRgbString()+'" class="'+s+'"><span class="sp-thumb-inner" style="'+l+';" /></span>')):a.push(Tt("<div />").append(Tt('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",n.noColorSelectedText)).html())}return"<div class='sp-cf "+r+"'>"+a.join("")+"</div>"}function P(t,e){e=e,a=t,(e=Tt.extend({},qt,e)).callbacks={move:It(e.move,a),change:It(e.change,a),show:It(e.show,a),hide:It(e.hide,a),beforeShow:It(e.beforeShow,a)};var j,E,D,I,r,l=e,c=l.flat,z=l.showSelectionPalette,n=l.localStorageKey,a=l.theme,o=l.callbacks,B=(j=N,function(){var t=this,e=arguments;D&&clearTimeout(I),!D&&I||(I=setTimeout(function(){I=null,j.apply(t,e)},E))}),f=!(E=10),L=!1,h=0,u=0,d=0,K=0,V=0,$=0,W=0,i=0,s=0,p=0,g=1,X=[],b=[],Y={},m=l.selectionPalette.slice(0),G=l.maxSelectionSize,Q="sp-dragging",v=null,y=t.ownerDocument,w=(y.body,Tt(t)),J=!1,_=Tt(Kt,y).addClass(a),U=_.find(".sp-picker-container"),Z=_.find(".sp-color"),tt=_.find(".sp-dragger"),et=_.find(".sp-hue"),rt=_.find(".sp-slider"),nt=_.find(".sp-alpha-inner"),at=_.find(".sp-alpha"),ot=_.find(".sp-alpha-handle"),x=_.find(".sp-input"),it=_.find(".sp-palette"),st=_.find(".sp-initial"),e=_.find(".sp-cancel"),t=_.find(".sp-clear"),lt=_.find(".sp-choose"),ct=_.find(".sp-palette-toggle"),ft=w.is("input"),ht=ft&&"color"===w.attr("type")&&Bt(),ut=ft&&!c,k=ut?Tt(Lt).addClass(a).addClass(l.className).addClass(l.replacerClassName):Tt([]),dt=ut?k:w,S=k.find(".sp-preview-inner"),a=l.color||ft&&w.val(),C=!1,P=l.preferredFormat,pt=!l.showButtons||l.clickoutFiresChange,A=!a,M=l.allowEmpty&&!ht;function gt(){if(l.showPaletteOnly&&(l.showPalette=!0),ct.text(l.showPaletteOnly?l.togglePaletteMoreText:l.togglePaletteLessText),l.palette){X=l.palette.slice(0),b=Tt.isArray(X[0])?X:[X],Y={};for(var t=0;t<b.length;t++)for(var e=0;e<b[t].length;e++){var r=tinycolor(b[t][e]).toRgbString();Y[r]=!0}}_.toggleClass("sp-flat",c),_.toggleClass("sp-input-disabled",!l.showInput),_.toggleClass("sp-alpha-enabled",l.showAlpha),_.toggleClass("sp-clear-enabled",M),_.toggleClass("sp-buttons-disabled",!l.showButtons),_.toggleClass("sp-palette-buttons-disabled",!l.togglePaletteOnly),_.toggleClass("sp-palette-disabled",!l.showPalette),_.toggleClass("sp-palette-only",l.showPaletteOnly),_.toggleClass("sp-initial-disabled",!l.showInitial),_.addClass(l.className).addClass(l.containerClassName),N()}function bt(){if(n&&window.localStorage){try{var t=window.localStorage[n].split(",#");1<t.length&&(delete window.localStorage[n],Tt.each(t,function(t,e){mt(e)}))}catch(t){}try{m=window.localStorage[n].split(";")}catch(t){}}}function mt(t){if(z){t=tinycolor(t).toRgbString();if(!Y[t]&&-1===Tt.inArray(t,m))for(m.push(t);m.length>G;)m.shift();if(n&&window.localStorage)try{window.localStorage[n]=m.join(";")}catch(t){}}}function vt(){var r=F(),t=Tt.map(b,function(t,e){return Dt(t,r,"sp-palette-row sp-palette-row-"+e,l)});bt(),m&&t.push(Dt(function(){var t=[];if(l.showPalette)for(var e=0;e<m.length;e++){var r=tinycolor(m[e]).toRgbString();Y[r]||t.push(m[e])}return t.reverse().slice(0,l.maxSelectionSize)}(),r,"sp-palette-row sp-palette-row-selection",l)),it.html(t.join(""))}function yt(){var t,e;l.showInitial&&(t=C,e=F(),st.html(Dt([t,e],e,"sp-palette-row-initial",l)))}function wt(){(u<=0||h<=0||K<=0)&&N(),L=!0,_.addClass(Q),v=null,w.trigger("dragstart.spectrum",[F()])}function _t(){L=!1,_.removeClass(Q),w.trigger("dragstop.spectrum",[F()])}function xt(){var t=x.val();null!==t&&""!==t||!M?(t=tinycolor(t)).isValid()?(H(t),T(),q()):x.addClass("sp-validation-error"):(H(null),T(),q())}function kt(){(f?R:St)()}function St(){var t=Tt.Event("beforeShow.spectrum");if(f)N();else if(w.trigger(t,[F()]),!1!==o.beforeShow(F())&&!t.isDefaultPrevented()){for(var e=0;e<Nt.length;e++)Nt[e]&&Nt[e].hide();f=!0,Tt(y).on("keydown.spectrum",Ct),Tt(y).on("click.spectrum",Pt),Tt(window).on("resize.spectrum",B),k.addClass("sp-active"),_.removeClass("sp-hidden"),N(),O(),C=F(),yt(),o.show(C),w.trigger("show.spectrum",[C])}}function Ct(t){27===t.keyCode&&R()}function Pt(t){2==t.button||L||(pt?q(!0):At(),R())}function R(){f&&!c&&(f=!1,Tt(y).off("keydown.spectrum",Ct),Tt(y).off("click.spectrum",Pt),Tt(window).off("resize.spectrum",B),k.removeClass("sp-active"),_.addClass("sp-hidden"),o.hide(F()),w.trigger("hide.spectrum",[F()]))}function At(){H(C,!0),q(!0)}function H(t,e){var r;tinycolor.equals(t,F())?O():(!t&&M?A=!0:(A=!1,t=(r=tinycolor(t)).toHsv(),i=t.h%360/360,s=t.s,p=t.v,g=t.a),O(),r&&r.isValid()&&!e&&(P=l.preferredFormat||r.getFormat()))}function F(t){return t=t||{},M&&A?null:tinycolor.fromRatio({h:i,s:s,v:p,a:Math.round(1e3*g)/1e3},{format:t.format||P})}function T(){O(),o.move(F()),w.trigger("move.spectrum",[F()])}function O(){x.removeClass("sp-validation-error"),Mt();var t,e,r,n=tinycolor.fromRatio({h:i,s:1,v:1}),n=(Z.css("background-color",n.toHexString()),P),a=F({format:n=!(g<1)||0===g&&"name"===P||"hex"!==P&&"hex3"!==P&&"hex6"!==P&&"name"!==P?P:"rgb"}),o="";S.removeClass("sp-clear-display"),S.css("background-color","transparent"),!a&&M?S.addClass("sp-clear-display"):(t=a.toHexString(),e=a.toRgbString(),Et||1===a.alpha?S.css("background-color",e):(S.css("background-color","transparent"),S.css("filter",a.toFilter())),l.showAlpha&&((e=a.toRgb()).a=0,r="linear-gradient(left, "+(e=tinycolor(e).toRgbString())+", "+t+")",jt?nt.css("filter",tinycolor(e).toFilter({gradientType:1},t)):(nt.css("background","-webkit-"+r),nt.css("background","-moz-"+r),nt.css("background","-ms-"+r),nt.css("background","linear-gradient(to right, "+e+", "+t+")"))),o=a.toString(n)),l.showInput&&x.val(o),l.showPalette&&vt(),yt()}function Mt(){var t=s,e=p;M&&A?(ot.hide(),rt.hide(),tt.hide()):(ot.show(),rt.show(),tt.show(),t=t*h,e=u-e*u,t=Math.max(-d,Math.min(h-d,t-d)),e=Math.max(-d,Math.min(u-d,e-d)),tt.css({top:e+"px",left:t+"px"}),e=g*V,ot.css({left:e-$/2+"px"}),t=i*K,rt.css({top:t-W+"px"}))}function q(t){var e=F(),r="",n=!tinycolor.equals(e,C);e&&(r=e.toString(P),mt(e)),ft&&w.val(r),t&&n&&(o.change(e),w.trigger("change",[e]))}function N(){var t,e,r,n,a,o,i,s;f&&(h=Z.width(),u=Z.height(),d=tt.height(),et.width(),K=et.height(),W=rt.height(),V=at.width(),$=ot.width(),c||(_.css("position","absolute"),l.offset?_.offset(l.offset):_.offset((e=dt,r=(t=_).outerWidth(),n=t.outerHeight(),a=e.outerHeight(),t=t[0].ownerDocument,o=t.documentElement,i=o.clientWidth+Tt(t).scrollLeft(),o=o.clientHeight+Tt(t).scrollTop(),e=(t=e.offset()).left,s=t.top,s+=a,e-=Math.min(e,i<e+r&&r<i?Math.abs(e+r-i):0),{top:s-=Math.min(s,o<s+n&&n<o?Math.abs(+(n+a)):0),bottom:t.bottom,left:e,right:t.right,width:t.width,height:t.height}))),Mt(),l.showPalette&&vt(),w.trigger("reflow.spectrum"))}function Rt(){R(),J=!0,w.attr("disabled",!0),dt.addClass("sp-disabled")}function Ht(t){return(t.data&&t.data.ignore?(H(Tt(t.target).closest(".sp-thumb-el").data("color")),T):(H(Tt(t.target).closest(".sp-thumb-el").data("color")),T(),l.hideAfterPaletteSelect?(q(!0),R):q))(),!1}jt&&_.find("*:not(input)").attr("unselectable","on"),gt(),ut&&w.after(k).hide(),M||t.hide(),c?w.after(_).hide():(r=1!==(r="parent"===l.appendTo?w.parent():Tt(l.appendTo)).length?Tt("body"):r).append(_),bt(),dt.on("click.spectrum touchstart.spectrum",function(t){J||kt(),t.stopPropagation(),Tt(t.target).is("input")||t.preventDefault()}),!w.is(":disabled")&&!0!==l.disabled||Rt(),_.click(Vt),x.change(xt),x.on("paste",function(){setTimeout(xt,1)}),x.keydown(function(t){13==t.keyCode&&xt()}),e.text(l.cancelText),e.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),At(),R()}),t.attr("title",l.clearText),t.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),A=!0,T(),c&&q(!0)}),lt.text(l.chooseText),lt.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),jt&&x.is(":focus")&&x.trigger("change"),x.hasClass("sp-validation-error")||(q(!0),R())}),ct.text(l.showPaletteOnly?l.togglePaletteMoreText:l.togglePaletteLessText),ct.on("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),l.showPaletteOnly=!l.showPaletteOnly,l.showPaletteOnly||c||_.css("left","-="+(U.outerWidth(!0)+5)),gt()}),zt(at,function(t,e,r){g=t/V,A=!1,r.shiftKey&&(g=Math.round(10*g)/10),T()},wt,_t),zt(et,function(t,e){i=parseFloat(e/K),A=!1,l.showAlpha||(g=1),T()},wt,_t),zt(Z,function(t,e,r){r.shiftKey?v||(r=s*h,n=u-p*u,r=Math.abs(t-r)>Math.abs(e-n),v=r?"x":"y"):v=null;var n=!v||"x"===v,r=!v||"y"===v;n&&(s=parseFloat(t/h)),r&&(p=parseFloat((u-e)/u)),A=!1,l.showAlpha||(g=1),T()},wt,_t),a?(H(a),O(),P=l.preferredFormat||tinycolor(a).format,mt(a)):O(),c&&St(),r=jt?"mousedown.spectrum":"click.spectrum touchstart.spectrum",it.on(r,".sp-thumb-el",Ht),st.on(r,".sp-thumb-el:nth-child(1)",{ignore:!0},Ht);var Ft={show:St,hide:R,toggle:kt,reflow:N,option:function(t,e){return t===Ot?Tt.extend({},l):e===Ot?l[t]:(l[t]=e,"preferredFormat"===t&&(P=l.preferredFormat),void gt())},enable:function(){J=!1,w.attr("disabled",!1),dt.removeClass("sp-disabled")},disable:Rt,offset:function(t){l.offset=t,N()},set:function(t){H(t),q()},get:F,destroy:function(){w.show(),dt.off("click.spectrum touchstart.spectrum"),_.remove(),k.remove(),Nt[Ft.id]=null},container:_};return Ft.id=Nt.push(Ft)-1,Ft}function e(){}function Vt(t){t.stopPropagation()}function It(t,e){var r=Array.prototype.slice,n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}function zt(n,a,e,t){a=a||function(){},e=e||function(){},t=t||function(){};var o=document,i=!1,s={},l=0,c=0,f="ontouchstart"in window,r={};function h(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function u(t){if(i){if(jt&&o.documentMode<9&&!t.button)return d();var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=e&&e.pageX||t.pageX,e=e&&e.pageY||t.pageY,r=Math.max(0,Math.min(r-s.left,c)),e=Math.max(0,Math.min(e-s.top,l));f&&h(t),a.apply(n,[r,e,t])}}function d(){i&&(Tt(o).off(r),Tt(o.body).removeClass("sp-dragging"),setTimeout(function(){t.apply(n,arguments)},0)),i=!1}r.selectstart=h,r.dragstart=h,r["touchmove mousemove"]=u,r["touchend mouseup"]=d,Tt(n).on("touchstart mousedown",function(t){(t.which?3==t.which:2==t.button)||i||!1!==e.apply(n,arguments)&&(i=!0,l=Tt(n).height(),c=Tt(n).width(),s=Tt(n).offset(),Tt(o).on(r),Tt(o.body).addClass("sp-dragging"),u(t),h(t))})}function Bt(){return Tt.fn.spectrum.inputTypeColorSupport()}var o,i,n,s,a,c,f,r,l,h,u,d,p,g="spectrum.id";function b(t,e){var r;return e=e||{},(t=t||"")instanceof b?t:this instanceof b?(r=function(t){var e={r:0,g:0,b:0},r=1,n=!1,a=!1;"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(i,"").toLowerCase();var e,r=!1;if(l[t])t=l[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=p.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=p.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=p.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=p.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=p.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=p.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=p.hex8.exec(t))return{a:function(t){return k(t)/255}(e[1]),r:k(e[2]),g:k(e[3]),b:k(e[4]),format:r?"name":"hex8"};if(e=p.hex6.exec(t))return{r:k(e[1]),g:k(e[2]),b:k(e[3]),format:r?"name":"hex"};if(e=p.hex3.exec(t))return{r:k(e[1]+""+e[1]),g:k(e[2]+""+e[2]),b:k(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=function(t,e,r){return{r:255*_(t,255),g:255*_(e,255),b:255*_(r,255)}}(t.r,t.g,t.b),n=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=C(t.s),t.v=C(t.v),e=function(t,e,r){t=6*_(t,360),e=_(e,100),r=_(r,100);var n=s.floor(t),t=t-n,a=r*(1-e),o=r*(1-t*e),t=r*(1-(1-t)*e),e=n%6;return{r:255*[r,o,a,a,t,r][e],g:255*[t,r,r,o,a,a][e],b:255*[a,a,t,r,r,o][e]}}(t.h,t.s,t.v),n=!0,a="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=C(t.s),t.l=C(t.l),e=function(t,e,r){var n,a,o;function i(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}t=_(t,360),e=_(e,100),r=_(r,100),0===e?n=a=o=r:(n=i(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),r,t+1/3),a=i(e,r,t),o=i(e,r,t-1/3));return{r:255*n,g:255*a,b:255*o}}(t.h,t.s,t.l),n=!0,a="hsl"),t.hasOwnProperty("a"))&&(r=t.a);return r=z(r),{ok:n,format:t.format||a,r:c(255,f(e.r,0)),g:c(255,f(e.g,0)),b:c(255,f(e.b,0)),a:r}}(t),this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=a(1e3*this._a)/1e3,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=r.ok,void(this._tc_id=n++)):new b(t,e)}function m(t,e,r){t=_(t,255),e=_(e,255),r=_(r,255);var n,a=f(t,e,r),o=c(t,e,r),i=(a+o)/2;if(a==o)n=l=0;else{var s=a-o,l=.5<i?s/(2-a-o):s/(a+o);switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:l,l:i}}function v(t,e,r){t=_(t,255),e=_(e,255),r=_(r,255);var n,a=f(t,e,r),o=c(t,e,r),i=a,s=a-o,l=0===a?0:s/a;if(a==o)n=0;else{switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:l,v:i}}function y(t,e,r,n){t=[S(a(t).toString(16)),S(a(e).toString(16)),S(a(r).toString(16))];return n&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function w(t,e,r,n){return[S(Math.round(255*parseFloat(n)).toString(16)),S(a(t).toString(16)),S(a(e).toString(16)),S(a(r).toString(16))].join("")}function A(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s-=e/100,t.s=x(t.s),b(t)}function M(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s+=e/100,t.s=x(t.s),b(t)}function R(t){return b(t).desaturate(100)}function H(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l+=e/100,t.l=x(t.l),b(t)}function F(t,e){e=0===e?0:e||10;t=b(t).toRgb();return t.r=f(0,c(255,t.r-a(-e/100*255))),t.g=f(0,c(255,t.g-a(-e/100*255))),t.b=f(0,c(255,t.b-a(-e/100*255))),b(t)}function T(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l-=e/100,t.l=x(t.l),b(t)}function O(t,e){t=b(t).toHsl(),e=(a(t.h)+e)%360;return t.h=e<0?360+e:e,b(t)}function q(t){t=b(t).toHsl();return t.h=(t.h+180)%360,b(t)}function N(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+120)%360,s:e.s,l:e.l}),b({h:(r+240)%360,s:e.s,l:e.l})]}function j(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+90)%360,s:e.s,l:e.l}),b({h:(r+180)%360,s:e.s,l:e.l}),b({h:(r+270)%360,s:e.s,l:e.l})]}function E(t){var e=b(t).toHsl(),r=e.h;return[b(t),b({h:(r+72)%360,s:e.s,l:e.l}),b({h:(r+216)%360,s:e.s,l:e.l})]}function D(t,e,r){e=e||6,r=r||30;var n=b(t).toHsl(),a=360/r,o=[b(t)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,o.push(b(n));return o}function I(t,e){e=e||6;for(var t=b(t).toHsv(),r=t.h,n=t.s,a=t.v,o=[],i=1/e;e--;)o.push(b({h:r,s:n,v:a})),a=(a+i)%1;return o}function z(t){return t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t}function _(t,e){"string"==typeof(r=t)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(t="100%");var r="string"==typeof(r=t)&&-1!=r.indexOf("%");return t=c(e,f(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),s.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function x(t){return c(1,f(0,t))}function k(t){return parseInt(t,16)}function S(t){return 1==t.length?"0"+t:""+t}function C(t){return t=t<=1?100*t+"%":t}Tt.fn.spectrum=function(r,t){var n,a;return"string"==typeof r?(n=this,a=Array.prototype.slice.call(arguments,1),this.each(function(){var t=Nt[Tt(this).data(g)];if(t){var e=t[r];if(!e)throw new Error("Spectrum: no such method: '"+r+"'");"get"==r?n=t.get():"container"==r?n=t.container:"option"==r?n=t.option.apply(t,a):"destroy"==r?(t.destroy(),Tt(this).removeData(g)):e.apply(t,a)}}),n):this.spectrum("destroy").each(function(){var t=P(this,Tt.extend({},Tt(this).data(),r));Tt(this).data(g,t.id)})},Tt.fn.spectrum.load=!0,Tt.fn.spectrum.loadOpts={},Tt.fn.spectrum.draggable=zt,Tt.fn.spectrum.defaults=qt,Tt.fn.spectrum.inputTypeColorSupport=function t(){var e;return void 0===t._cachedResult&&(e=Tt("<input type='color'/>")[0],t._cachedResult="color"===e.type&&""!==e.value),t._cachedResult},Tt.spectrum={},Tt.spectrum.localization={},Tt.spectrum.palettes={},Tt.fn.spectrum.processNativeColorInputs=function(){var t=Tt("input[type=color]");t.length&&!Bt()&&t.spectrum({preferredFormat:"hex6"})},
// Brian Grinstead, MIT License
o=/^[\s,#]+/,i=/\s+$/,n=0,s=Math,a=s.round,c=s.min,f=s.max,r=s.random,b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=z(t),this._roundA=a(1e3*this._a)/1e3,this},toHsv:function(){var t=v(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=v(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),t=a(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+t+"%)":"hsva("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=m(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=m(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),t=a(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+t+"%)":"hsla("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return y(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return w(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*_(this._r,255))+"%",g:a(100*_(this._g,255))+"%",b:a(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*_(this._r,255))+"%, "+a(100*_(this._g,255))+"%, "+a(100*_(this._b,255))+"%)":"rgba("+a(100*_(this._r,255))+"%, "+a(100*_(this._g,255))+"%, "+a(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&h[y(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+w(this._r,this._g,this._b,this._a),r=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(r=t?b(t).toHex8String():r)+")"},toString:function(t){var e=!!t,r=(t=t||this._format,!1),n=this._a<1&&0<=this._a;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),(r="hsv"===t?this.toHsvString():r)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){t=t.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(H,arguments)},brighten:function(){return this._applyModification(F,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(M,arguments)},greyscale:function(){return this._applyModification(R,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(q,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},b.fromRatio=function(t,e){if("object"==typeof t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:C(t[r]));t=n}return b(t,e)},b.equals=function(t,e){return!(!t||!e)&&b(t).toRgbString()==b(e).toRgbString()},b.random=function(){return b.fromRatio({r:r(),g:r(),b:r()})},b.mix=function(t,e,r){r=0===r?0:r||50;var t=b(t).toRgb(),e=b(e).toRgb(),r=r/100,n=2*r-1,a=e.a-t.a,n=n*a==-1?n:(n+a)/(1+n*a),a=1-(n=(n+1)/2),n={r:e.r*n+t.r*a,g:e.g*n+t.g*a,b:e.b*n+t.b*a,a:e.a*r+t.a*(1-r)};return b(n)},b.readability=function(t,e){var t=b(t),e=b(e),r=t.toRgb(),n=e.toRgb(),t=t.getBrightness(),e=e.getBrightness(),r=Math.max(r.r,n.r)-Math.min(r.r,n.r)+Math.max(r.g,n.g)-Math.min(r.g,n.g)+Math.max(r.b,n.b)-Math.min(r.b,n.b);return{brightness:Math.abs(t-e),color:r}},b.isReadable=function(t,e){t=b.readability(t,e);return 125<t.brightness&&500<t.color},b.mostReadable=function(t,e){for(var r=null,n=0,a=!1,o=0;o<e.length;o++){var i=b.readability(t,e[o]),s=125<i.brightness&&500<i.color,i=i.brightness/125*3+i.color/500;(s&&!a||s&&a&&n<i||!s&&!a&&n<i)&&(a=s,n=i,r=b(e[o]))}return r},l=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},h=b.hexNames=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[t[e]]=e);return r}(l),d="[\\s|\\(]+("+(u="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",u="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",p={rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+u),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+u),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+u),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},window.tinycolor=b,Tt(function(){Tt.fn.spectrum.load&&Tt.fn.spectrum.processNativeColorInputs()})});
!function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).CKEDITOR={})}(this,function(e){"use strict";const B=
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function(){try{return navigator.userAgent.toLowerCase()}catch{return""}}(),m={isMac:D(B),isWindows:-1<B.indexOf("windows"),isGecko:!!B.match(/gecko\/\d+/),isSafari:-1<(t=B).indexOf(" applewebkit/")&&-1===t.indexOf("chrome"),isiOS:!!(t=B).match(/iphone|ipad/i)||D(t)&&0<navigator.maxTouchPoints,isAndroid:-1<B.indexOf("android"),isBlink:-1<(t=B).indexOf("chrome/")&&t.indexOf("edge/")<0,features:{isRegExpUnicodePropertySupported:function(){let e=!1;try{e=0==="".search(new RegExp("[\\p{L}]","u"))}catch{}return e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */()}};function D(e){return-1<e.indexOf("macintosh")}function F(t,i,r,s){r=r||function(e,t){return e===t};var t=Array.isArray(t)?t:Array.prototype.slice.call(t),i=Array.isArray(i)?i:Array.prototype.slice.call(i),t=function(e,t,i){var r=L(e,t,i);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var s=z(e,r),n=z(t,r),s=L(s,n,i),n=e.length-s,i=t.length-s;return{firstIndex:r,lastIndexOld:n,lastIndexNew:i}}(t,i,r);if(s){var r=t,s=i.length,{firstIndex:r,lastIndexOld:n,lastIndexNew:o}=r;if(-1===r)return Array(s).fill("equal");let e=[];return 0<r&&(e=e.concat(Array(r).fill("equal"))),0<o-r&&(e=e.concat(Array(o-r).fill("insert"))),0<n-r&&(e=e.concat(Array(n-r).fill("delete"))),e=o<s?e.concat(Array(s-o).fill("equal")):e}return n=i,r=[],{firstIndex:s,lastIndexOld:o,lastIndexNew:i}=s=t,0<i-s&&r.push({index:s,type:"insert",values:n.slice(s,i)}),0<o-s&&r.push({index:s+(i-s),type:"delete",howMany:o-s}),r}function L(t,i,r){for(let e=0;e<Math.max(t.length,i.length);e++)if(void 0===t[e]||void 0===i[e]||!r(t[e],i[e]))return e;return-1}function z(e,t){return e.slice(t).reverse()}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j(o,a,l){l=l||function(e,t){return e===t};var e=o.length,t=a.length;if(200<e||200<t||300<e+t)return j.fastDiff(o,a,l,!0);let h,c;c=t<e?(t=o,o=a,a=t,h="delete","insert"):(h="insert","delete");const d=o.length,u=a.length,i=u-d,m={},g={};function r(e){var t=(void 0!==g[e-1]?g[e-1]:-1)+1,i=void 0!==g[e+1]?g[e+1]:-1,r=i<t?-1:1;m[e+r]&&(m[e]=m[e+r].slice(0)),m[e]||(m[e]=[]),m[e].push(i<t?h:c);let s=Math.max(t,i),n=s-e;for(;n<d&&s<u&&l(o[n],a[s]);)n++,s++,m[e].push("equal");return s}let s=0,n;do{for(n=-s;n<i;n++)g[n]=r(n);for(n=i+s;n>i;n--)g[n]=r(n)}while(g[i]=r(i),s++,g[i]!==u);return m[i].slice(1)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H(){return function e(){e.called=!0}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */j.fastDiff=F;class W{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=H(),this.off=H()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $=new Array(256).fill("").map((e,t)=>("0"+t.toString(16)).slice(-2));function q(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+$[e>>0&255]+$[e>>8&255]+$[e>>16&255]+$[e>>24&255]+$[t>>0&255]+$[t>>8&255]+$[t>>16&255]+$[t>>24&255]+$[i>>0&255]+$[i>>8&255]+$[i>>16&255]+$[i>>24&255]+$[r>>0&255]+$[r>>8&255]+$[r>>16&255]+$[r>>24&255]}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const U={get(e="normal"){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const G="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class w extends Error{constructor(e,t,i){super(function(e,t){const i=new WeakSet,r=t?" "+JSON.stringify(t,(e,t)=>{if("object"==typeof t&&null!==t){if(i.has(t))return`[object ${t.constructor.name}]`;i.add(t)}return t}):"",s=K(e);return e+r+s}(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return"CKEditorError"===e}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;t=new w(e.message,t);throw t.stack=e.stack,t}}function c(e,t){var i;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */console.warn(...(t=t,i=K(e=e),t?[e,t,i]:[e,i]))}function K(e){return`
Read more: ${G}#error-`+e}const J=new Date(2023,6,11);/* istanbul ignore next -- @preserve */var t="object"==typeof window?window:global;/* istanbul ignore next -- @preserve */if(t.CKEDITOR_VERSION)throw new w("ckeditor-duplicated-modules",null);t.CKEDITOR_VERSION="38.1.1";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Z=Symbol("listeningTo"),Y=Symbol("emitterId"),X=Symbol("delegations"),Q=o(Object);function o(e){if(!e)return Q;class t extends e{on(e,t,i){this.listenTo(this,e,t,i)}once(e,i,t){let r=!1;this.listenTo(this,e,(e,...t)=>{r||(r=!0,e.off(),i.call(this,e,...t))},t)}off(e,t){this.stopListening(this,e,t)}listenTo(e,t,i,r={}){let s,n;this[Z]||(this[Z]={});var o=this[Z],a=(te(e)||ee(e),te(e));s=(s=o[a])||(o[a]={emitter:e,callbacks:{}}),(n=(n=s.callbacks[t])||(s.callbacks[t]=[])).push(i),o=this,a=t,t=i,i=r,(r=e)._addEventListener?r._addEventListener(a,t,i):o._addEventListener.call(r,a,t,i)}stopListening(e,t,i){var r=this[Z];let s=e&&te(e);var n=r&&s?r[s]:void 0,o=n&&t?n.callbacks[t]:void 0;if(!(!r||e&&!n||t&&!o))if(i)ne(this,e,t,i),-1!==o.indexOf(i)&&(1===o.length?delete n.callbacks[t]:ne(this,e,t,i));else if(o){for(;i=o.pop();)ne(this,e,t,i);delete n.callbacks[t]}else if(n){for(t in n.callbacks)this.stopListening(e,t);delete r[s]}else{for(s in r)this.stopListening(r[s].emitter);delete this[Z]}}fire(e,...t){try{var i=e instanceof W?e:new W(this,e),r=i.name,s=function e(t,i){let r;return t._events&&(r=t._events[i])&&r.callbacks.length?r.callbacks:-1<i.indexOf(":")?e(t,i.substr(0,i.lastIndexOf(":"))):null}(this,r);if(i.path.push(this),s){var n=[i,...t],s=Array.from(s);for(let e=0;e<s.length&&(s[e].callback.apply(this,n),i.off.called&&(delete i.off.called,this._removeEventListener(r,s[e].callback)),!i.stop.called);e++);}var o,a,l=this[X];return l&&(o=l.get(r),a=l.get("*"),o&&se(o,i,t),a)&&se(a,i,t),i.return}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}delegate(...e){return{to:(i,r)=>{this[X]||(this[X]=new Map),e.forEach(e=>{var t=this[X].get(e);t?t.set(i,r):this[X].set(e,new Map([[i,r]]))})}}}stopDelegating(e,t){var i;this[X]&&(e?t?(i=this[X].get(e))&&i.delete(t):this[X].delete(e):this[X].clear())}_addEventListener(e,t,i){var r=e,s=ie(this);if(!s[r]){let e=r,t=null;for(var n=[];""!==e&&!s[e];)s[e]={callbacks:[],childEvents:[]},n.push(s[e]),t&&s[e].childEvents.push(t),e=(t=e).substr(0,e.lastIndexOf(":"));if(""!==e){for(const a of n)a.callbacks=s[e].callbacks.slice();s[e].childEvents.push(t)}}var r=re(this,e),o={callback:t,priority:U.get(i.priority)};for(const l of r)!function(t,i){var r=U.get(i.priority);for(let e=0;e<t.length;e++)if(U.get(t[e].priority)<r)return t.splice(e,0,i);t.push(i)}(l,o)}_removeEventListener(e,t){for(const i of re(this,e))for(let e=0;e<i.length;e++)i[e].callback==t&&(i.splice(e,1),e--)}}return t}function ee(e,t){e[Y]||(e[Y]=t||q())}function te(e){return e[Y]}function ie(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function re(t,e){var i=ie(t)[e];if(!i)return[];let r=[i.callbacks];for(let e=0;e<i.childEvents.length;e++){var s=re(t,i.childEvents[e]);r=r.concat(s)}return r}function se(e,t,i){for(var[r,s]of e){s?"function"==typeof s&&(s=s(t.name)):s=t.name;s=new W(t.source,s);s.path=[...t.path],r.fire(s,...i)}}function ne(e,t,i,r){t._removeEventListener?t._removeEventListener(i,r):e._removeEventListener.call(t,i,r)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{o[e]=Q.prototype[e]});var t="object"==typeof global&&global&&global.Object===Object&&global,oe="object"==typeof self&&self&&self.Object===Object&&self;const ae=t||oe||Function("return this")();var oe=ae.Symbol,le=Object.prototype,he=le.hasOwnProperty,ce=le.toString,de=oe?oe.toStringTag:void 0;var ue=Object.prototype.toString;var me="[object Null]",ge="[object Undefined]",fe=oe?oe.toStringTag:void 0;function pe(e){{if(null==e)return void 0===e?ge:me;if(fe&&fe in Object(e)){var t=e,i=he.call(t,de),r=t[de];try{var s=!(t[de]=void 0)}catch{}var n=ce.call(t);return s&&(i?t[de]=r:delete t[de]),n}return ue.call(e)}}function ve(e){return null!=e&&"object"==typeof e}var we="[object Symbol]";function be(e){return"symbol"==typeof e||ve(e)&&pe(e)==we}function _e(e,t){for(var i=-1,r=null==e?0:e.length,s=Array(r);++i<r;)s[i]=t(e[i],i,e);return s}const ye=Array.isArray;var ke=1/0,le=oe?oe.prototype:void 0,Ae=le?le.toString:void 0;function Ee(e){var t;return"string"==typeof e?e:ye(e)?_e(e,Ee)+"":be(e)?Ae?Ae.call(e):"":"0"==(t=e+"")&&1/e==-ke?"-0":t}var Ce=/\s/;var Pe=/^\s+/;function xe(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&Ce.test(e.charAt(t)););return t}(e)+1).replace(Pe,"")}function y(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Te=NaN,Se=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Re=/^0o[0-7]+$/i,Ie=parseInt;function Ve(e){if("number"==typeof e)return e;if(be(e))return Te;if("string"!=typeof(e=y(e)?y(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=xe(e);var t=Oe.test(e);return t||Re.test(e)?Ie(e.slice(2),t?2:8):Se.test(e)?Te:+e}function Me(e){return e}var Ne="[object AsyncFunction]",Be="[object Function]",De="[object GeneratorFunction]",Fe="[object Proxy]";function Le(e){if(y(e))return(e=pe(e))==Be||e==De||e==Ne||e==Fe}const ze=ae["__core-js_shared__"];var je=(le=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"";var He=Function.prototype.toString;function We(e){if(null!=e){try{return He.call(e)}catch{}try{return e+""}catch{}}return""}var $e=/^\[object .+?Constructor\]$/,le=Function.prototype,i=Object.prototype,le=le.toString,i=i.hasOwnProperty,qe=RegExp("^"+le.call(i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ue(e){var t;return y(e)&&(t=e,!(je&&je in t))&&(Le(e)?qe:$e).test(We(e))}function Ge(e,t){t=t;e=null==(e=e)?void 0:e[t];return Ue(e)?e:void 0}var le=Ge(ae,"WeakMap"),Ke=Object.create;function Je(){}const Ze=function(e){if(!y(e))return{};if(Ke)return Ke(e);Je.prototype=e;e=new Je;return Je.prototype=void 0,e};function Ye(e,t){var i=-1,r=e.length;for(t=t||Array(r);++i<r;)t[i]=e[i];return t}var Xe=Date.now;const Qe=function(){try{var e=Ge(Object,"defineProperty");return e({},"",{}),e}catch{}}();var et,tt,it,i=Qe?function(e,t){return Qe(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:Me;et=i,it=tt=0;const rt=function(){var e=Xe(),t=16-(e-it);if(it=e,0<t){if(800<=++tt)return arguments[0]}else tt=0;return et.apply(void 0,arguments)};function st(e){return e!=e}function nt(e,t,i){if(t==t){for(var r=e,s=t,n=i-1,o=r.length;++n<o;)if(r[n]===s)return n}else for(var a=e,l=st,t=i,h=void 0,c=a.length,d=t+(h?1:-1);h?d--:++d<c;)if(l(a[d],d,a))return d;return-1}var ot=9007199254740991,at=/^(?:0|[1-9]\d*)$/;function lt(e,t){var i=typeof e;return(t=t??ot)&&("number"==i||"symbol"!=i&&at.test(e))&&-1<e&&e%1==0&&e<t}function ht(e,t,i){"__proto__"==t&&Qe?Qe(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function ct(e,t){return e===t||e!=e&&t!=t}var dt=Object.prototype.hasOwnProperty;function ut(e,t,i){var r=e[t];dt.call(e,t)&&ct(r,i)&&(void 0!==i||t in e)||ht(e,t,i)}function mt(e,t,i,r){var s=!i;i=i||{};for(var n=-1,o=t.length;++n<o;){var a=t[n],l=r?r(i[a],e[a],a,i,e):void 0;(s?ht:ut)(i,a,l=void 0===l?e[a]:l)}return i}var gt=Math.max;function ft(l,h,c){return h=gt(void 0===h?l.length-1:h,0),function(){for(var e=arguments,t=-1,i=gt(e.length-h,0),r=Array(i);++t<i;)r[t]=e[h+t];for(var t=-1,s=Array(h+1);++t<h;)s[t]=e[t];s[h]=c(r);var n=l,o=this,a=s;switch(a.length){case 0:return n.call(o);case 1:return n.call(o,a[0]);case 2:return n.call(o,a[0],a[1]);case 3:return n.call(o,a[0],a[1],a[2])}return n.apply(o,a)}}function pt(e,t){return rt(ft(e,t,Me),e+"")}var vt=9007199254740991;function wt(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=vt}function bt(e){return null!=e&&wt(e.length)&&!Le(e)}function _t(a){return pt(function(e,t){var i=-1,r=t.length,s=1<r?t[r-1]:void 0,n=2<r?t[2]:void 0,s=3<a.length&&"function"==typeof s?(r--,s):void 0;for(n&&function(e,t,i){var r;if(y(i))return("number"==(r=typeof t)?bt(i)&&lt(t,i.length):"string"==r&&t in i)&&ct(i[t],e)}(t[0],t[1],n)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&a(e,o,i,s)}return e})}var yt=Object.prototype;function kt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||yt)}function At(e){return ve(e)&&"[object Arguments]"==pe(e)}var i=Object.prototype,Et=i.hasOwnProperty,Ct=i.propertyIsEnumerable;const Pt=At(function(){return arguments}())?At:function(e){return ve(e)&&Et.call(e,"callee")&&!Ct.call(e,"callee")};var i="object"==typeof e&&e&&!e.nodeType&&e,xt=i&&"object"==typeof module&&module&&!module.nodeType&&module,xt=xt&&xt.exports===i?ae.Buffer:void 0;const Tt=(xt?xt.isBuffer:void 0)||function(){return!1};var r={};function St(t){return function(e){return t(e)}}r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var i="object"==typeof e&&e&&!e.nodeType&&e,Ot=i&&"object"==typeof module&&module&&!module.nodeType&&module,Rt=Ot&&Ot.exports===i&&t.process,xt=function(){try{return Ot&&Ot.require&&Ot.require("util").types||Rt&&Rt.binding&&Rt.binding("util")}catch{}}(),i=xt&&xt.isTypedArray;const It=i?St(i):function(e){return ve(e)&&wt(e.length)&&!!r[pe(e)]};var Vt=Object.prototype.hasOwnProperty;function Mt(e,t){var i,r=ye(e),s=!r&&Pt(e),n=!r&&!s&&Tt(e),o=!r&&!s&&!n&&It(e),a=r||s||n||o,l=a?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],h=l.length;for(i in e)!t&&!Vt.call(e,i)||a&&("length"==i||n&&("offset"==i||"parent"==i)||o&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||lt(i,h))||l.push(i);return l}function Nt(t,i){return function(e){return t(i(e))}}const Bt=Nt(Object.keys,Object);var Dt=Object.prototype.hasOwnProperty;function Ft(e){return(bt(e)?Mt:function(e){if(!kt(e))return Bt(e);var t,i=[];for(t in Object(e))Dt.call(e,t)&&"constructor"!=t&&i.push(t);return i})(e)}var Lt=Object.prototype.hasOwnProperty;function zt(e){if(y(e)){var t,i=kt(e),r=[];for(t in e)("constructor"!=t||!i&&Lt.call(e,t))&&r.push(t);return r}var s=e,n=[];if(null!=s)for(var o in Object(s))n.push(o);return n}function jt(e){return bt(e)?Mt(e,!0):zt(e)}const Ht=_t(function(e,t){mt(t,jt(t),e)});var Wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/;const qt=Ge(Object,"create");var Ut=Object.prototype.hasOwnProperty;var Gt=Object.prototype.hasOwnProperty;function Kt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function Jt(e,t){for(var i=e.length;i--;)if(ct(e[i][0],t))return i;return-1}Kt.prototype.clear=function(){this.__data__=qt?qt(null):{},this.size=0},Kt.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Kt.prototype.get=function(e){var t,i=this.__data__;return qt?"__lodash_hash_undefined__"===(t=i[e])?void 0:t:Ut.call(i,e)?i[e]:void 0},Kt.prototype.has=function(e){var t=this.__data__;return qt?void 0!==t[e]:Gt.call(t,e)},Kt.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=qt&&void 0===t?"__lodash_hash_undefined__":t,this};var Zt=Array.prototype.splice;function Yt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Yt.prototype.clear=function(){this.__data__=[],this.size=0},Yt.prototype.delete=function(e){var t=this.__data__;return!((e=Jt(t,e))<0||(e==t.length-1?t.pop():Zt.call(t,e,1),--this.size,0))},Yt.prototype.get=function(e){var t=this.__data__;return(e=Jt(t,e))<0?void 0:t[e][1]},Yt.prototype.has=function(e){return-1<Jt(this.__data__,e)},Yt.prototype.set=function(e,t){var i=this.__data__,r=Jt(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this};const Xt=Ge(ae,"Map");function Qt(e,t){var i,r,e=e.__data__;return("string"==(r=typeof(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?e["string"==typeof t?"string":"hash"]:e.map}function ei(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}ei.prototype.clear=function(){this.size=0,this.__data__={hash:new Kt,map:new(Xt||Yt),string:new Kt}},ei.prototype.delete=function(e){return e=Qt(this,e).delete(e),this.size-=e?1:0,e},ei.prototype.get=function(e){return Qt(this,e).get(e)},ei.prototype.has=function(e){return Qt(this,e).has(e)},ei.prototype.set=function(e,t){var i=Qt(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this};function ti(r,s){if("function"!=typeof r||null!=s&&"function"!=typeof s)throw new TypeError("Expected a function");function n(){var e=arguments,t=s?s.apply(this,e):e[0],i=n.cache;return i.has(t)?i.get(t):(e=r.apply(this,e),n.cache=i.set(t,e)||i,e)}return n.cache=new(ti.Cache||ei),n}ti.Cache=ei;var ii,ri=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,si=/\\(\\)?/g;ii=(t=ti(t=function(e){var s=[];return 46===e.charCodeAt(0)&&s.push(""),e.replace(ri,function(e,t,i,r){s.push(i?r.replace(si,"$1"):t||e)}),s},function(e){return 500===ii.size&&ii.clear(),e})).cache;const ni=t;function oi(e){return null==e?"":Ee(e)}function ai(e,t){return ye(e)?e:function(e,t){var i;if(!ye(e))return"number"==(i=typeof e)||"symbol"==i||"boolean"==i||null==e||be(e)||$t.test(e)||!Wt.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:ni(oi(e))}var li=1/0;function hi(e){var t;return"string"==typeof e||be(e)?e:"0"==(t=e+"")&&1/e==-li?"-0":t}function ci(e,t){for(var i=0,r=(t=ai(t,e)).length;null!=e&&i<r;)e=e[hi(t[i++])];return i&&i==r?e:void 0}function di(e,t,i){e=null==e?void 0:ci(e,t);return void 0===e?i:e}function ui(e,t){for(var i=-1,r=t.length,s=e.length;++i<r;)e[s+i]=t[i];return e}const mi=Nt(Object.getPrototypeOf,Object);var gi="[object Object]",i=Function.prototype,t=Object.prototype,fi=i.toString,pi=t.hasOwnProperty,vi=fi.call(Object);function wi(e){if(ve(e)&&pe(e)==gi)return null===(e=mi(e))||"function"==typeof(e=pi.call(e,"constructor")&&e.constructor)&&e instanceof e&&fi.call(e)==vi}function bi(e,t,i){var r=-1,s=e.length;(i=s<i?s:i)<0&&(i+=s),s=i<(t=t<0?s<-t?0:s+t:t)?0:i-t>>>0,t>>>=0;for(var n=Array(s);++r<s;)n[r]=e[r+t];return n}var _i=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function yi(e){return _i.test(e)}var ki,i="\\ud800-\\udfff",t="["+i+"]",Ai="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ei="\\ud83c[\\udffb-\\udfff]",i="[^"+i+"]",Ci="(?:\\ud83c[\\udde6-\\uddff]){2}",Pi="[\\ud800-\\udbff][\\udc00-\\udfff]",xi="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ti="[\\ufe0e\\ufe0f]?",Ti=Ti+xi+("(?:\\u200d(?:"+[i,Ci,Pi].join("|")+")"+Ti+xi+")*"),xi="(?:"+[i+Ai+"?",Ai,Ci,Pi,t].join("|")+")",Si=RegExp(Ei+"(?="+Ei+")|"+xi+Ti,"g");function Oi(e){return yi(e)?e.match(Si)||[]:e.split("")}ki="toUpperCase";const Ri=function(e){var t,i,r=yi(e=oi(e))?Oi(e):void 0,s=r?r[0]:e.charAt(0),n=r?(t=1,n=(r=r).length,i=void 0===i?n:i,(!t&&n<=i?r:bi(r,t,i)).join("")):e.slice(1);return s[ki]()+n};var Ii;Ii={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"};const Vi=function(e){return null==Ii?void 0:Ii[e]};var Mi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ni=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Bi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Di=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var i="\\ud800-\\udfff",Ai="\\u2700-\\u27bf",Ci="a-z\\xdf-\\xf6\\xf8-\\xff",Pi="A-Z\\xc0-\\xd6\\xd8-\\xde",t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ei="["+t+"]",xi="["+Ai+"]",Ti="["+Ci+"]",t="[^"+i+t+"\\d+"+Ai+Ci+Pi+"]",Ai="(?:\\ud83c[\\udde6-\\uddff]){2}",Ci="[\\ud800-\\udbff][\\udc00-\\udfff]",Pi="["+Pi+"]",Fi="(?:"+Ti+"|"+t+")",t="(?:"+Pi+"|"+t+")",Li="(?:['](?:d|ll|m|re|s|t|ve))?",zi="(?:['](?:D|LL|M|RE|S|T|VE))?",ji="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Hi="[\\ufe0e\\ufe0f]?",i=Hi+ji+("(?:\\u200d(?:"+["[^"+i+"]",Ai,Ci].join("|")+")"+Hi+ji+")*"),Hi="(?:"+[xi,Ai,Ci].join("|")+")"+i,Wi=RegExp([Pi+"?"+Ti+"+"+Li+"(?="+[Ei,Pi,"$"].join("|")+")",t+"+"+zi+"(?="+[Ei,Pi+Fi,"$"].join("|")+")",Pi+"?"+Fi+"+"+Li,Pi+"+"+zi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Hi].join("|"),"g");function $i(e,t,i){return e=oi(e),void 0===(t=i?void 0:t)?(i=e,Di.test(i)?e.match(Wi)||[]:e.match(Bi)||[]):e.match(t)||[]}var qi=RegExp("[']","g");function Ui(e){e=this.__data__=new Yt(e);this.size=e.size}Ui.prototype.clear=function(){this.__data__=new Yt,this.size=0},Ui.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},Ui.prototype.get=function(e){return this.__data__.get(e)},Ui.prototype.has=function(e){return this.__data__.has(e)},Ui.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Yt){var r=i.__data__;if(!Xt||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new ei(r)}return i.set(e,t),this.size=i.size,this};var ji="object"==typeof e&&e&&!e.nodeType&&e,xi=ji&&"object"==typeof module&&module&&!module.nodeType&&module,Ai=xi&&xi.exports===ji?ae.Buffer:void 0,Gi=Ai?Ai.allocUnsafe:void 0;function Ki(e,t){return t?e.slice():(t=e.length,t=Gi?Gi(t):new e.constructor(t),e.copy(t),t)}function Ji(){return[]}var Zi=Object.prototype.propertyIsEnumerable,Yi=Object.getOwnPropertySymbols;const Xi=Yi?function(t){if(null==t)return[];t=Object(t);for(var e=Yi(t),i=function(e){return Zi.call(t,e)},r=-1,s=null==e?0:e.length,n=0,o=[];++r<s;){var a=e[r];i(a,r,e)&&(o[n++]=a)}return o}:Ji;const Qi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ui(t,Xi(e)),e=mi(e);return t}:Ji;function er(e,t,i){t=t(e);return ye(e)?t:ui(t,i(e))}function tr(e){return er(e,Ft,Xi)}function ir(e){return er(e,jt,Qi)}var Ci=Ge(ae,"DataView"),i=Ge(ae,"Promise"),Ti=Ge(ae,"Set"),rr="[object Map]",sr="[object Promise]",nr="[object Set]",or="[object WeakMap]",ar="[object DataView]",lr=We(Ci),hr=We(Xt),cr=We(i),dr=We(Ti),ur=We(le),t=pe;const mr=t=Ci&&t(new Ci(new ArrayBuffer(1)))!=ar||Xt&&t(new Xt)!=rr||i&&t(i.resolve())!=sr||Ti&&t(new Ti)!=nr||le&&t(new le)!=or?function(e){var t=pe(e),e="[object Object]"==t?e.constructor:void 0,e=e?We(e):"";if(e)switch(e){case lr:return ar;case hr:return rr;case cr:return sr;case dr:return nr;case ur:return or}return t}:t;var gr=Object.prototype.hasOwnProperty;const fr=ae.Uint8Array;function pr(e){var t=new e.constructor(e.byteLength);return new fr(t).set(new fr(e)),t}var vr=/\w*$/;var Ei=oe?oe.prototype:void 0,wr=Ei?Ei.valueOf:void 0;function br(e,t){t=t?pr(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var _r="[object Boolean]",yr="[object Date]",kr="[object Map]",Ar="[object Number]",Er="[object RegExp]",Cr="[object Set]",Pr="[object String]",xr="[object Symbol]",Tr="[object ArrayBuffer]",Sr="[object DataView]",Or="[object Float32Array]",Rr="[object Float64Array]",Ir="[object Int8Array]",Vr="[object Int16Array]",Mr="[object Int32Array]",Nr="[object Uint8Array]",Br="[object Uint8ClampedArray]",Dr="[object Uint16Array]",Fr="[object Uint32Array]";function Lr(e,t,i){var r,s,n,o=e.constructor;switch(t){case Tr:return pr(e);case _r:case yr:return new o(+e);case Sr:return s=e,n=(n=i)?pr(s.buffer):s.buffer,new s.constructor(n,s.byteOffset,s.byteLength);case Or:case Rr:case Ir:case Vr:case Mr:case Nr:case Br:case Dr:case Fr:return br(e,i);case kr:return new o;case Ar:case Pr:return new o(e);case Er:return(s=new(n=e).constructor(n.source,vr.exec(n))).lastIndex=n.lastIndex,s;case Cr:return new o;case xr:return r=e,wr?Object(wr.call(r)):{}}}function zr(e){return"function"!=typeof e.constructor||kt(e)?{}:Ze(mi(e))}Fi=xt&&xt.isMap;const jr=Fi?St(Fi):function(e){return ve(e)&&"[object Map]"==mr(e)};Li=xt&&xt.isSet;const Hr=Li?St(Li):function(e){return ve(e)&&"[object Set]"==mr(e)};var Wr=1,$r=2,qr=4,Ur="[object Arguments]",Gr="[object Function]",Kr="[object GeneratorFunction]",Jr="[object Object]",k={};function Zr(i,r,s,e,t,n){var o,a=r&Wr,l=r&$r,h=r&qr;if(void 0===(o=s?t?s(i,e,t,n):s(i):o)){if(!y(i))return i;var c,d,u,e=ye(i);if(e){if(m=(g=i).length,u=new g.constructor(m),m&&"string"==typeof g[0]&&gr.call(g,"index")&&(u.index=g.index,u.input=g.input),o=u,!a)return Ye(i,o)}else{var m=mr(i),g=m==Gr||m==Kr;if(Tt(i))return Ki(i,a);if(m==Jr||m==Ur||g&&!t){if(o=l||g?{}:zr(i),!a)return l?(d=u=i,d=(c=o)&&mt(d,jt(d),c),mt(u,Qi(u),d)):(d=c=i,f=(f=o)&&mt(d,Ft(d),f),mt(c,Xi(c),f))}else{if(!k[m])return t?i:{};o=Lr(i,m,a)}}var f=(n=n||new Ui).get(i);if(f)return f;n.set(i,o),Hr(i)?i.forEach(function(e){o.add(Zr(e,r,s,e,i,n))}):jr(i)&&i.forEach(function(e,t){o.set(t,Zr(e,r,s,t,i,n))});for(var p=e?void 0:(h?l?ir:tr:l?jt:Ft)(i),v=p||i,w=function(e,t){p&&(e=i[t=e]),ut(o,t,Zr(e,r,s,t,i,n))},b=-1,_=null==v?0:v.length;++b<_&&!1!==w(v[b],b,v););}return o}k[Ur]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[Jr]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[Gr]=k["[object WeakMap]"]=!1;function Yr(e){return Zr(e,4)}var Xr=1,Qr=4;function es(e){return Zr(e,Xr|Qr)}var ts=1,is=4;function rs(e,t){return Zr(e,ts|is,t="function"==typeof t?t:void 0)}function ss(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new ei;++t<i;)this.add(e[t])}ss.prototype.add=ss.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ss.prototype.has=function(e){return this.__data__.has(e)};function ns(e,t,i,r,s,n){var o=1&i,a=e.length,l=t.length;if(a!=l&&!(o&&a<l))return!1;var l=n.get(e),h=n.get(t);if(l&&h)return l==t&&h==e;var c=-1,d=!0,u=2&i?new ss:void 0;for(n.set(e,t),n.set(t,e);++c<a;){var m,g=e[c],f=t[c];if(void 0!==(m=r?o?r(f,g,c,t,e,n):r(g,f,c,e,t,n):m)){if(m)continue;d=!1;break}if(u){if(!function(e,t){for(var i=-1,r=null==e?0:e.length;++i<r;)if(t(e[i],i,e))return 1}(t,function(e,t){return!u.has(t)&&(g===e||s(g,e,i,r,n))&&u.push(t)})){d=!1;break}}else if(g!==f&&!s(g,f,i,r,n)){d=!1;break}}return n.delete(e),n.delete(t),d}function os(e){var i=-1,r=Array(e.size);return e.forEach(function(e,t){r[++i]=[t,e]}),r}function as(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var Pi=oe?oe.prototype:void 0,ls=Pi?Pi.valueOf:void 0;var hs=Object.prototype.hasOwnProperty;var cs,ds=1,us="[object Arguments]",ms="[object Array]",gs="[object Object]",fs=Object.prototype.hasOwnProperty;function ps(e,t,i,r,s,n){var o=ye(e),a=ye(t),l=o?ms:mr(e),a=a?ms:mr(t),h=(l=l==us?gs:l)==gs,c=(a=a==us?gs:a)==gs,a=l==a;if(a&&Tt(e)){if(!Tt(t))return!1;h=!(o=!0)}if(a&&!h){n=n||new Ui;if(o||It(e))return ns(e,t,i,r,s,n);else{var d=e;var u=t;o=l;var m=i;var g=r;var f=s;var p=n;switch(o){case"[object DataView]":if(d.byteLength!=u.byteLength||d.byteOffset!=u.byteOffset)return!1;d=d.buffer,u=u.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=u.byteLength||!f(new fr(d),new fr(u)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ct(+d,+u);case"[object Error]":return d.name==u.name&&d.message==u.message;case"[object RegExp]":case"[object String]":return d==u+"";case"[object Map]":var v=os;case"[object Set]":v=v||as;if(d.size!=u.size&&!(1&m))return!1;var w=p.get(d);if(w)return w==u;m|=2,p.set(d,u);w=ns(v(d),v(u),m,g,f,p);return p.delete(d),w;case"[object Symbol]":if(ls)return ls.call(d)==ls.call(u)}return!1;return}}if(!(i&ds)){l=h&&fs.call(e,"__wrapped__"),o=c&&fs.call(t,"__wrapped__");if(l||o)return s(l?e.value():e,o?t.value():t,i,r,n=n||new Ui)}return a&&function(e,t,i,r,s,n){var o=1&i,a=tr(e),l=a.length;if(l!=tr(t).length&&!o)return!1;for(var h=l;h--;){var c=a[h];if(!(o?c in t:hs.call(t,c)))return!1}var d=n.get(e),u=n.get(t);if(d&&u)return d==t&&u==e;var m=!0;n.set(e,t),n.set(t,e);for(var g=o;++h<l;){var f,p=e[c=a[h]],v=t[c];if(!(void 0===(f=r?o?r(v,p,c,t,e,n):r(p,v,c,e,t,n):f)?p===v||s(p,v,i,r,n):f)){m=!1;break}g=g||"constructor"==c}return m&&!g&&(d=e.constructor)!=(u=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof d&&d instanceof d&&"function"==typeof u&&u instanceof u)&&(m=!1),n.delete(e),n.delete(t),m}(e,t,i,r,s,n=n||new Ui)}function vs(e,t,i,r,s){return e===t||(null==e||null==t||!ve(e)&&!ve(t)?e!=e&&t!=t:ps(e,t,i,r,vs,s))}const ws=function(e,t,i){for(var r=-1,s=Object(e),n=i(e),o=n.length;o--;){var a=n[cs?o:++r];if(!1===t(s[a],a,s))break}return e};const bs=function(){return ae.Date.now()};var _s=Math.max,ys=Math.min;function ks(r,i,e){var s,n,o,a,l,h,c=0,d=!1,u=!1,t=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function m(e){var t=s,i=n;return s=n=void 0,c=e,a=r.apply(i,t)}function g(e){var t=e-h;return void 0===h||i<=t||t<0||u&&o<=e-c}function f(){var e,t=bs();if(g(t))return p(t);l=setTimeout(f,(e=i-((t=t)-h),u?ys(e,o-(t-c)):e))}function p(e){return l=void 0,t&&s?m(e):(s=n=void 0,a)}function v(){var e=bs(),t=g(e);if(s=arguments,n=this,h=e,t){if(void 0===l)return c=e=h,l=setTimeout(f,i),d?m(e):a;if(u)return clearTimeout(l),l=setTimeout(f,i),m(h)}return void 0===l&&(l=setTimeout(f,i)),a}return i=Ve(i)||0,y(e)&&(d=!!e.leading,u="maxWait"in e,o=u?_s(Ve(e.maxWait)||0,i):o,t="trailing"in e?!!e.trailing:t),v.cancel=function(){void 0!==l&&clearTimeout(l),s=h=n=l=void(c=0)},v.flush=function(){return void 0===l?a:p(bs())},v}function As(e,t,i){(void 0===i||ct(e[t],i))&&(void 0!==i||t in e)||ht(e,t,i)}function Es(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Cs(e,t,i,r,s,n,o){var a,l,h,c=Es(e,i),d=Es(t,i),u=o.get(d);u||((t=void 0===(u=n?n(c,d,i+"",e,t,o):void 0))&&(a=!(h=ye(d))&&Tt(d),l=!h&&!a&&It(d),u=d,h||a||l?u=ye(c)?c:ve(h=c)&&bt(h)?Ye(c):a?Ki(d,!(t=!1)):l?br(d,!(t=!1)):[]:wi(d)||Pt(d)?(u=c,Pt(c)?u=mt(c,jt(c)):y(c)&&!Le(c)||(u=zr(d))):t=!1),t&&(o.set(d,u),s(u,d,r,n,o),o.delete(d))),As(e,i,u)}function Ps(r,s,n,o,a){r!==s&&ws(s,function(e,t){var i;a=a||new Ui,y(e)?Cs(r,s,t,n,Ps,o,a):(i=o?o(Es(r,t),e,t+"",r,s,a):void 0,As(r,t,i=void 0===i?e:i))},jt)}const xs=_t(function(e,t,i,r){Ps(e,t,i,r)});var Ts="[object String]";function Ss(e){return"string"==typeof e||!ye(e)&&ve(e)&&pe(e)==Ts}function Os(e){return ve(e)&&1===e.nodeType&&!wi(e)}function Rs(e,t){return vs(e,t)}const Is=_t(function(e,t,i){Ps(e,t,i)});function Vs(e,t){return t=ai(t,e),i=e,null==(e=(r=t).length<2?i:ci(i,bi(r,0,-1)))||delete e[hi((r=null==(i=t)?0:i.length)?i[r-1]:void 0)];var i,r}function Ms(e,t,i,r){for(var s=i-1,n=e.length;++s<n;)if(r(e[s],t))return s;return-1}var Ns,Bs=Array.prototype.splice;const Ds=pt(function(e,t){if(e&&e.length&&t&&t.length){var i=e,r=t,s=void 0,n=void 0,o=n?Ms:nt,a=-1,l=r.length,h=i;for(i===r&&(r=Ye(r)),s&&(h=_e(i,St(s)));++a<l;)for(var c=0,d=r[a],u=s?s(d):d;-1<(c=o(h,u,c,n));)h!==i&&Bs.call(h,c,1),Bs.call(i,c,1);return i}return e});function Fs(e,t,i){if(null!=e){var r=t,s=i,n=void 0;if(y(e))for(var o=-1,a=(r=ai(r,e)).length,l=a-1,h=e;null!=h&&++o<a;){var c,d=hi(r[o]),u=s;if("__proto__"===d||"constructor"===d||"prototype"===d)return;ut(h,d,u=o!=l&&(c=h[d],void 0===(u=n?n(c,d,h):void 0))?y(c)?c:lt(r[o+1])?[]:{}:u),h=h[d]}}}Ns=function(e,t,i){return e+(i?" ":"")+Ri(t)};const Ls=function(e){var t=$i(((e=oi(e=e))&&e.replace(Mi,Vi).replace(Ni,"")).replace(qi,"")),i=Ns,r="",e=void 0,s=-1,n=null==t?0:t.length;for(e&&n&&(r=t[++s]);++s<n;)r=i(r,t[s],s,t);return r};function zs(e,t,i){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return y(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),ks(e,t,{leading:r,maxWait:t,trailing:s})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const js=Symbol("observableProperties"),Hs=Symbol("boundObservables"),Ws=Symbol("boundProperties"),$s=Symbol("decoratedMethods"),qs=Symbol("decoratedOriginal"),Us=s(o());function s(e){if(!e)return Us;class t extends e{set(r,e){if(y(r))Object.keys(r).forEach(e=>{this.set(e,r[e])},this);else{Gs(this);const s=this[js];if(r in this&&!s.has(r))throw new w("observable-set-cannot-override",this);Object.defineProperty(this,r,{enumerable:!0,configurable:!0,get(){return s.get(r)},set(e){var t=s.get(r);let i=this.fire("set:"+r,r,e,t);t===(i=void 0===i?e:i)&&s.has(r)||(s.set(r,i),this.fire("change:"+r,r,i,t))}}),this[r]=e}}bind(...e){if(!e.length||!Zs(e))throw new w("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new w("observable-bind-duplicate-properties",this);Gs(this);const i=this[Ws],r=(e.forEach(e=>{if(i.has(e))throw new w("observable-bind-rebind",this)}),new Map);return e.forEach(e=>{var t={property:e,to:[]};i.set(e,t),r.set(e,t)}),{to:Ks,toMany:Js,_observable:this,_bindProperties:e,_to:[],_bindings:r}}unbind(...e){if(this[js]){const t=this[Ws],n=this[Hs];if(e.length){if(!Zs(e))throw new w("observable-unbind-wrong-properties",this);e.forEach(e=>{const s=t.get(e);s&&(s.to.forEach(([e,t])=>{var i=n.get(e),r=i[t];r.delete(s),r.size||delete i[t],Object.keys(i).length||(n.delete(e),this.stopListening(e,"change"))}),t.delete(e))})}else n.forEach((e,t)=>{this.stopListening(t,"change")}),n.clear(),t.clear()}}decorate(t){Gs(this);const i=this[t];if(!i)throw new w("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(e,t)=>{e.return=i.apply(this,t)}),this[t]=function(...e){return this.fire(t,e)},this[t][qs]=i,this[$s]||(this[$s]=[]),this[$s].push(t)}stopListening(e,t,i){if(!e&&this[$s]){for(const r of this[$s])this[r]=this[r][qs];delete this[$s]}super.stopListening(e,t,i)}}return t}function Gs(e){e[js]||(Object.defineProperty(e,js,{value:new Map}),Object.defineProperty(e,Hs,{value:new Map}),Object.defineProperty(e,Ws,{value:new Map}))}function Ks(...e){const t=function(...e){if(!e.length)throw new w("observable-bind-to-parse-error",null);const t={to:[]};let i;return"function"==typeof e[e.length-1]&&(t.callback=e.pop()),e.forEach(e=>{if("string"==typeof e)i.properties.push(e);else{if("object"!=typeof e)throw new w("observable-bind-to-parse-error",null);i={observable:e,properties:[]},t.to.push(i)}}),t}(...e),i=Array.from(this._bindings.keys()),r=i.length;if(!t.callback&&1<t.to.length)throw new w("observable-bind-to-no-callback",this);if(1<r&&t.callback)throw new w("observable-bind-to-extra-callback",this);t.to.forEach(e=>{if(e.properties.length&&e.properties.length!==r)throw new w("observable-bind-to-properties-length",this);e.properties.length||(e.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(i[0]).callback=t.callback),n=this._observable,this._to.forEach(i=>{const r=n[Hs];let s;r.get(i.observable)||n.listenTo(i.observable,"change",(e,t)=>{(s=r.get(i.observable)[t])&&s.forEach(e=>{Ys(n,e.property)})})});{var h=this;let l;h._bindings.forEach((o,a)=>{h._to.forEach(e=>{var t,i,r,s,n;l=e.properties[o.callback?0:h._bindProperties.indexOf(a)],o.to.push([e.observable,l]),t=h._observable,i=o,e=e.observable,r=l,t=t[Hs],s=t.get(e),(n=s||{})[r]||(n[r]=new Set),n[r].add(i),s||t.set(e,n)})})}var n;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */this._bindProperties.forEach(e=>{Ys(this._observable,e)})}function Js(e,t,i){if(1<this._bindings.size)throw new w("observable-bind-to-many-not-one-binding",this);this.to(...function(e,t){e=e.map(e=>[e,t]);return Array.prototype.concat.apply([],e)}(e,t),i)}function Zs(e){return e.every(e=>"string"==typeof e)}function Ys(e,t){var i=e[Ws].get(t);let r;r=i.callback?i.callback.apply(e,i.to.map(e=>e[0][e[1]])):(r=i.to[0])[0][r[1]],Object.prototype.hasOwnProperty.call(e,t)?e[t]=r:e.set(t,r)}function Xs(e){let t=0;for(const i of e)t++;return t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qs(t,i){var r=Math.min(t.length,i.length);for(let e=0;e<r;e++)if(t[e]!=i[e])return e;return t.length==i.length?"same":t.length<i.length?"prefix":"extension"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function en(e){return!(!e||!e[Symbol.iterator])}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{s[e]=Us.prototype[e]});
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tn{constructor(e,t){this._config={},t&&this.define(rn(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,r=!1){if(wi(t))this._setObjectToTarget(e,t,r);else{var s=t.split(".");t=s.pop();for(const n of s)wi(e[n])||(e[n]={}),e=e[n];wi(i)?(wi(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,i,r)):r&&typeof e[t]<"u"||(e[t]=i)}}_getFromSource(e,t){var i=t.split(".");t=i.pop();for(const r of i){if(!wi(e[r])){e=null;break}e=e[r]}return e?rn(e[t]):void 0}_setObjectToTarget(t,i,r){Object.keys(i).forEach(e=>{this._setToTarget(t,e,i[e],r)})}}function rn(e){return rs(e,sn)}function sn(e){return Os(e)?e:void 0}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nn(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function on(e){e=Object.prototype.toString.apply(e);return"[object Window]"==e||"[object global]"==e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const an=ln(o());function ln(e){if(!e)return an;class t extends e{listenTo(e,t,i,r={}){var s;nn(e)||on(e)?(s={capture:!!r.useCapture,passive:!!r.usePassive},s=this._getProxyEmitter(e,s)||new hn(e,s),this.listenTo(s,t,i,r)):super.listenTo(e,t,i,r)}stopListening(e,t,i){if(nn(e)||on(e))for(const r of this._getAllProxyEmitters(e))this.stopListening(r,t,i);else super.stopListening(e,t,i)}_getProxyEmitter(e,t){return i=this,e=cn(e,t),(i=i[Z])&&i[e]?i[e].emitter:null;var i}_getAllProxyEmitters(t){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(e=>this._getProxyEmitter(t,e)).filter(e=>!!e)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{ln[e]=an.prototype[e]});class hn extends o(){constructor(e,t){super(),ee(this,cn(e,t)),this._domNode=e,this._options=t}attach(e){var t;this._domListeners&&this._domListeners[e]||(t=this._createDomListener(e),this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t)}detach(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),o().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){o().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(t){const e=e=>{this.fire(t,e)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}}function cn(e,t){let i=(e=e)["data-ck-expando"]||(e["data-ck-expando"]=q());for(const r of Object.keys(t).sort())t[r]&&(i+="-"+r);return i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let dn;try{dn={window:window,document:document}}catch{/* istanbul ignore next -- @preserve */dn={window:{},document:{}}}const h=dn;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function un(e){var t=[];let i=e;for(;i&&i.nodeType!=Node.DOCUMENT_NODE;)t.unshift(i),i=i.parentNode;return t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function d(e){return"[object Text]"==Object.prototype.toString.call(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mn(e){return"[object Range]"==Object.prototype.toString.apply(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gn(e){e=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fn=["top","right","bottom","left","width","height"];class b{constructor(e){var t,i=mn(e);Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),wn(e)||i?i?(i=b.getDomRangeRects(e),pn(this,b.getBoundingRect(i))):pn(this,e.getBoundingClientRect()):on(e)?({innerWidth:i,innerHeight:t}=e,pn(this,{top:0,right:i,bottom:t,left:0,width:i,height:t})):pn(this,e)}clone(){return new b(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){e={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new b(e)}getIntersectionArea(e){e=this.getIntersection(e);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){var r=this._source;let s=this.clone();if(!vn(r)){let e=r,t=r.parentNode||r.commonAncestorContainer,i;for(;t&&!vn(t);){if(!(i=e instanceof HTMLElement&&"absolute"===bn(e)?e:i)||"relative"===bn(t)&&"visible"!==(n=t).ownerDocument.defaultView.getComputedStyle(n).overflow){var n=new b(t),o=s.getIntersection(n);if(!o)return null;o.getArea()<s.getArea()&&(s=o)}t=(e=t).parentNode}}return s}isEqual(e){for(const t of fn)if(this[t]!==e[t])return!1;return!0}contains(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e))}excludeScrollbarsAndBorders(){var e,t=this._source;let i,r,s;return on(t)?(i=t.innerWidth-t.document.documentElement.clientWidth,r=t.innerHeight-t.document.documentElement.clientHeight,s=t.getComputedStyle(t.document.documentElement).direction):(e=gn(t),i=t.offsetWidth-t.clientWidth-e.left-e.right,r=t.offsetHeight-t.clientHeight-e.top-e.bottom,s=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=e.left,this.top+=e.top,this.right-=e.right,this.bottom-=e.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top),this.width-=i,"ltr"===s?this.right-=i:this.left+=i,this.height-=r,this.bottom-=r,this}static getDomRangeRects(t){var i=[],r=Array.from(t.getClientRects());if(r.length)for(const e of r)i.push(new b(e));else{let e=t.startContainer;d(e)&&(e=e.parentNode);r=new b(e.getBoundingClientRect());r.right=r.left,r.width=0,i.push(r)}return i}static getBoundingRect(e){var t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const r of e)i++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return 0==i?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new b(t))}}function pn(e,t){for(const i of fn)e[i]=t[i]}function vn(e){return wn(e)&&e===e.ownerDocument.body}function wn(e){return null!==e&&"object"==typeof e&&1===e.nodeType&&"function"==typeof e.getBoundingClientRect}function bn(e){return e.ownerDocument.defaultView.getComputedStyle(e).position}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a{constructor(e,t){a._observerInstance||a._createObserver(),this._element=e,this._callback=t,a._addElementCallback(e,t),a._observerInstance.observe(e)}get element(){return this._element}destroy(){a._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){a._elementCallbacks||(a._elementCallbacks=new Map);let i=a._elementCallbacks.get(e);i||(i=new Set,a._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){var i=a._getElementCallbacks(e);i&&(i.delete(t),i.size||(a._elementCallbacks.delete(e),a._observerInstance.unobserve(e))),a._elementCallbacks&&!a._elementCallbacks.size&&(a._observerInstance=null,a._elementCallbacks=null)}static _getElementCallbacks(e){return a._elementCallbacks?a._elementCallbacks.get(e):null}static _createObserver(){a._observerInstance=new h.window.ResizeObserver(e=>{for(const i of e){var t=a._getElementCallbacks(i.target);if(t)for(const r of t)r(i)}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _n(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yn(t){return e=>e+t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kn(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function An(e,t,i){e.insertBefore(i,e.childNodes[t]||null)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function En(e){return e&&e.nodeType===Node.COMMENT_NODE}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cn(e){try{h.document.createAttribute(e)}catch{return}return 1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pn(e){return e&&e.getClientRects&&e.getClientRects().length}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xn({element:e,target:t,positions:i,limiter:r,fitInViewport:s,viewportOffsetConfig:n}){Le(t)&&(t=t()),Le(r)&&(r=r());var o=(o=e)&&o.parentNode&&o.offsetParent!==h.document.body?o.offsetParent:null,e=new b(e),t=new b(t);let a;var n=s&&(n=n,n=Object.assign({top:0,bottom:0,left:0,right:0},n),(l=new b(h.window)).top+=n.top,l.height-=n.top,l.bottom-=n.bottom,l.height-=n.bottom,l)||null,l={targetRect:t,elementRect:e,positionedElementAncestor:o,viewportRect:n};return a=(r||s)&&(t=r&&new b(r).getVisible(),Object.assign(l,{limiterRect:t,viewportRect:n}),function(e,t){var i=t["elementRect"],r=i.getArea(),i=e.map(e=>new Sn(e,t)).filter(e=>!!e.name);let s=0,n=null;for(const l of i){var{limiterIntersectionArea:o,viewportIntersectionArea:a}=l;if(o===r)return l;a=a**2+o**2;a>s&&(s=a,n=l)}return n}(i,l))||new Sn(i[0],l)}function Tn(e){var{scrollX:t,scrollY:i}=h.window;return e.clone().moveBy(t,i)}a._observerInstance=null,a._elementCallbacks=null;class Sn{constructor(e,t){var i,r,s,e=e(t.targetRect,t.elementRect,t.viewportRect);e&&({left:e,top:i,name:r,config:s}=e,this.name=r,this.config=s,this._positioningFunctionCorrdinates={left:e,top:i},this._options=t)}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){var e=this._options.limiterRect;if(e){var t=this._options.viewportRect;if(!t)return e.getIntersectionArea(this._rect);e=e.getIntersection(t);if(e)return e.getIntersectionArea(this._rect)}return 0}get viewportIntersectionArea(){var e=this._options.viewportRect;return e?e.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=Tn(this._rect),this._options.positionedElementAncestor&&(e=this._cachedAbsoluteRect,t=this._options.positionedElementAncestor,i=Tn(new b(t)),r=gn(t),n=s=0,s-=i.left,n-=i.top,s+=t.scrollLeft,n+=t.scrollTop,s-=r.left,n-=r.top,e.moveBy(s,n)),this._cachedAbsoluteRect);var e,t,i,r,s,n}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function On(e){var t=e.parentNode;t&&t.removeChild(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rn({target:t,viewportOffset:i=0,ancestorOffset:r=0,alignToTop:s,forceScroll:n}){var e,o=Bn(t);let a=o,l=null;for(i="number"==typeof(e=i)?{top:e,bottom:e,left:e,right:e}:e;a;){let e;e=a==o?Dn(t):Dn(l),d=c=h=w=v=p=f=g=m=u=void 0;for(var h,c,d,[{parent:u,getRect:m,alignToTop:g,forceScroll:f,ancestorOffset:p=0}]=[{parent:e,getRect:()=>Fn(t,a),alignToTop:s,ancestorOffset:r,forceScroll:n}],v=Bn(u),w=g&&f;u!=v.document.body;)c=m(),h=new b(u).excludeScrollbarsAndBorders(),d=h.contains(c),w?u.scrollTop-=h.top-c.top+p:d||(Vn(c,h)?u.scrollTop-=h.top-c.top+p:In(c,h)&&(u.scrollTop+=g?c.top-h.top-p:c.bottom-h.bottom+p)),d||(Mn(c,h)?u.scrollLeft-=h.left-c.left+p:Nn(c,h)&&(u.scrollLeft+=c.right-h.right+p)),u=u.parentNode;f=Fn(t,a);if(function({window:e,rect:t,alignToTop:i,forceScroll:r,viewportOffset:s}){const n=t.clone().moveBy(0,s.bottom),o=t.clone().moveBy(0,-s.top),a=new b(e).excludeScrollbarsAndBorders(),l=[o,n],h=i&&r,c=l.every(e=>a.contains(e));let{scrollX:d,scrollY:u}=e;var r=d,m=u;h?u-=a.top-t.top+s.top:c||(Vn(o,a)?u-=a.top-t.top+s.top:In(n,a)&&(u+=i?t.top-a.top-s.top:t.bottom-a.bottom+s.bottom)),c||(Mn(t,a)?d-=a.left-t.left+s.left:Nn(t,a)&&(d+=t.right-a.right+s.right)),d==r&&u===m||e.scrollTo(d,u)}({window:a,rect:f,viewportOffset:i,alignToTop:s,forceScroll:n}),a.parent!=a){if(l=a.frameElement,a=a.parent,!l)return}else a=null}}function In(e,t){return e.bottom>t.bottom}function Vn(e,t){return e.top<t.top}function Mn(e,t){return e.left<t.left}function Nn(e,t){return e.right>t.right}function Bn(e){return(mn(e)?e.startContainer:e).ownerDocument.defaultView}function Dn(t){if(mn(t)){let e=t.commonAncestorContainer;return e=d(e)?e.parentNode:e}return t.parentNode}function Fn(e,t){var i=Bn(e),r=new b(e);if(i!==t){let e=i;for(;e!=t;){var s=e.frameElement,s=new b(s).excludeScrollbarsAndBorders();r.moveBy(s.left,s.top),e=e.parent}}return r}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ln={ctrl:"",cmd:"",alt:"",shift:""},zn={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},g=function(){var t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){var i=String.fromCharCode(e);t[i.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;for(const e of"`-=[];',./\\")t[e]=e.charCodeAt(0);return t}(),jn=Object.fromEntries(Object.entries(g).map(([e,t])=>[t,e.charAt(0).toUpperCase()+e.slice(1)]));function Hn(e){let t;if("string"==typeof e){if(!(t=g[e.toLowerCase()]))throw new w("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?g.alt:0)+(e.ctrlKey?g.ctrl:0)+(e.shiftKey?g.shift:0)+(e.metaKey?g.cmd:0);return t}function Wn(e){return(e="string"==typeof e?e.split("+").map(e=>e.trim()):e).map(e=>{var t;return"string"==typeof e?(t=e).endsWith("!")?Hn(t.slice(0,-1)):(t=Hn(t),m.isMac&&t==g.ctrl?g.cmd:t):e}).reduce((e,t)=>t+e,0)}function $n(e){let r=Wn(e);return Object.entries(m.isMac?Ln:zn).reduce((e,[t,i])=>(r&g[t]&&(r&=~g[t],e+=i),e),"")+(r?jn[r]:"")}function qn(e,t){var i="ltr"===t;switch(e){case g.arrowleft:return i?"left":"right";case g.arrowright:return i?"right":"left";case g.arrowup:return"up";case g.arrowdown:return"down"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Un=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function Gn(e){return Un.includes(e)?"rtl":"ltr"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function u(e){return Array.isArray(e)?e:[e]}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */ /* istanbul ignore else -- @preserve */function Kn(e,t,i=1){if("number"!=typeof i)throw new w("translation-service-quantity-not-a-number",null,{quantity:i});var r,s=Object.keys(h.window.CKEDITOR_TRANSLATIONS).length,n=(1===s&&(e=Object.keys(h.window.CKEDITOR_TRANSLATIONS)[0]),t.id||t.string);return 0!==s&&(s=e,r=n,h.window.CKEDITOR_TRANSLATIONS[s])&&h.window.CKEDITOR_TRANSLATIONS[s].dictionary[r]?(s=h.window.CKEDITOR_TRANSLATIONS[e].dictionary,r=h.window.CKEDITOR_TRANSLATIONS[e].getPluralForm||(e=>1===e?0:1),"string"==typeof(e=s[n])?e:e[Number(r(i))]):1!==i?t.plural:t.string}h.window.CKEDITOR_TRANSLATIONS||(h.window.CKEDITOR_TRANSLATIONS={});
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jn{constructor({uiLanguage:e="en",contentLanguage:t}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Gn(this.uiLanguage),this.contentLanguageDirection=Gn(this.contentLanguage),this.t=(e,t)=>this._t(e,t)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=u(t);var i,r=(e="string"==typeof e?{string:e}:e).plural?t[0]:1,e=Kn(this.uiLanguage,e,r);return i=t,e.replace(/%(\d+)/g,(e,t)=>t<i.length?i[t]:e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zn extends o(){constructor(e={},t={}){super();var i=en(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new w("collection-add-item-invalid-index",this);let i=0;for(const n of e){var r=this._getItemIdBeforeAdding(n),s=t+i;this._items.splice(s,0,n),this._itemMap.set(r,n),this.fire("add",n,s),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new w("collection-get-invalid-arg",this);t=this._items[e]}return t||null}has(e){return("string"==typeof e||(e=e[this._idProperty]))&&this._itemMap.has(e)}getIndex(e){let t;return(t="string"==typeof e?this._itemMap.get(e):e)?this._items.indexOf(t):-1}remove(e){var[e,t]=this._remove(e);return this.fire("change",{added:[],removed:[e],index:t}),e}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var e=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new w("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(a){const l=this._bindToCollection,e=(e,i,r)=>{var s=l._bindToCollection==this,t=l._bindToInternalToExternalMap.get(i);if(s&&t)this._bindToExternalToInternalMap.set(i,t),this._bindToInternalToExternalMap.set(t,i);else{s=a(i);if(s){let t=r;for(const n of this._skippedIndexesFromExternal)r>n&&t--;for(const o of l._skippedIndexesFromExternal)t>=o&&t++;this._bindToExternalToInternalMap.set(i,s),this._bindToInternalToExternalMap.set(s,i),this.add(s,t);for(let e=0;e<l._skippedIndexesFromExternal.length;e++)t<=l._skippedIndexesFromExternal[e]&&l._skippedIndexesFromExternal[e]++}else this._skippedIndexesFromExternal.push(r)}};for(const t of l)e(0,t,l.getIndex(t));this.listenTo(l,"add",e),this.listenTo(l,"remove",(e,t,i)=>{t=this._bindToExternalToInternalMap.get(t);t&&this.remove(t),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((e,t)=>(i<t&&e.push(t-1),t<i&&e.push(t),e),[])})}_getItemIdBeforeAdding(e){var t=this._idProperty;let i;if(t in e){if("string"!=typeof(i=e[t]))throw new w("collection-add-invalid-id",this);if(this.get(i))throw new w("collection-add-item-already-exists",this)}else e[t]=i=q();return i}_remove(e){let t,i,r,s=!1;var n=this._idProperty;if("string"==typeof e?(i=e,r=this._itemMap.get(i),s=!r,r&&(t=this._items.indexOf(r))):"number"==typeof e?(t=e,r=this._items[t],s=!r,r&&(i=r[n])):(r=e,i=r[n],t=this._items.indexOf(r),s=-1==t||!this._itemMap.get(i)),s)throw new w("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);e=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(e),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yn(e){e=e.next();return e.done?null:e.value}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xn extends ln(s()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new w("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qn{constructor(){this._listener=new(ln())}listenTo(e){this._listener.listenTo(e,"keydown",(e,t)=>{this._listener.fire("_keydown:"+Hn(t),t)})}set(e,i,t={}){e=Wn(e),t=t.priority;this._listener.listenTo(this._listener,"_keydown:"+e,(e,t)=>{i(t,()=>{t.preventDefault(),t.stopPropagation(),e.stop()}),e.return=!0},{priority:t})}press(e){return!!this._listener.fire("_keydown:"+Hn(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eo(e){if(en(e))return new Map(e);var t=e,i=new Map;for(const r in t)i.set(r,t[r]);return i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function to(t,i){let r;function s(...e){s.cancel(),r=setTimeout(()=>t(...e),i)}return s.cancel=()=>{clearTimeout(r)},s}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function io(e,t){return!!(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&!!(i=e.charAt(t))&&1==i.length&&/[\udc00-\udfff]/.test(i);var i}function ro(e,t){return!!(e=e.charAt(t))&&1==e.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e)}zi=/\p{Regional_Indicator}{2}/u.source,Hi="(?:"+[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u].map(e=>e.source).join("|")+")",zi+=`|${Hi}(?:${Hi})*`;const so=new RegExp(zi,"ug");function no(e,t){e=String(e).matchAll(so);return Array.from(e).some(e=>e.index<t&&t<e.index+e[0].length)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n extends s(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",oo,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",oo),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function oo(e){e.return=!1,e.stop()}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l extends s(){constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",e=>{this.affectsData&&(t.isReadOnly||this._isEnabledBasedOnSelection&&!t.model.canEditAt(t.model.document.selection))&&(e.return=!1,e.stop())},{priority:"highest"}),this.on("execute",e=>{this.isEnabled||e.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",ao,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",ao),this.refresh())}execute(){}destroy(){this.stopListening()}}function ao(e){e.return=!1,e.stop()}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lo extends o(){constructor(e,t=[],i=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const n of t)n.pluginName&&this._availablePlugins.set(n.pluginName,n);this._contextPlugins=new Map;for(var[r,s]of i)this._contextPlugins.set(r,s),this._contextPlugins.set(s,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(const e of this._plugins)"function"==typeof e[0]&&(yield e)}get(t){var e=this._plugins.get(t);if(e)return e;{let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new w("plugincollection-plugin-not-loaded",this._context,{plugin:e})}}has(e){return this._plugins.has(e)}init(e,s=[],t=[]){const o=this,n=this._context;(function t(e,i=new Set){e.forEach(e=>{!a(e)||i.has(e)||(i.add(e),e.pluginName&&!o._availablePlugins.has(e.pluginName)&&o._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,i))})})(e),d(e);e=[...function i(e,r=new Set){return e.map(e=>a(e)?e:o._availablePlugins.get(e)).reduce((t,e)=>r.has(e)?t:(r.add(e),e.requires&&(d(e.requires,e),i(e.requires,r).forEach(e=>t.add(e))),t.add(e)),new Set)}(e.filter(e=>!h(e,s)))];!function(e,t){for(const n of t){if("function"!=typeof n)throw new w("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});var i=n.pluginName;if(!i)throw new w("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new w("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:i});var r=o._availablePlugins.get(i);if(!r)throw new w("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:i});var s=e.indexOf(r);if(-1===s){if(o._contextPlugins.has(r))return;throw new w("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:i})}if(r.requires&&r.requires.length)throw new w("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:i});e.splice(s,1,n),o._availablePlugins.set(i,n)}}(e,t);const i=e.map(e=>{var t=o._contextPlugins.get(e)||new e(n);return o._add(e,t),t});return r(i,"init").then(()=>r(i,"afterInit")).then(()=>i);function a(e){return"function"==typeof e}function l(e){return a(e)&&e.isContextPlugin}function h(t,e){return e.some(e=>e===t||c(t)===e||c(e)===t)}function c(e){return a(e)?e.pluginName||e.name:e}function d(e,r=null){e.map(e=>!a(e)&&o._availablePlugins.get(e)||e).forEach(e=>{var t=e,i=r;if(!a(t))throw i?new w("plugincollection-soft-required",n,{missingPlugin:t,requiredBy:c(i)}):new w("plugincollection-plugin-not-found",n,{plugin:t});i=e,t=r;if(l(t)&&!l(i))throw new w("plugincollection-context-required",n,{plugin:c(i),requiredBy:c(t)});i=e,t=r;if(t&&h(i,s))throw new w("plugincollection-required",n,{plugin:c(i),requiredBy:c(t)})})}function r(e,i){return e.reduce((e,t)=>!t[i]||o._contextPlugins.has(t)?e:e.then(t[i].bind(t)),Promise.resolve())}}destroy(){var e,t=[];for([,e]of this)"function"!=typeof e.destroy||this._contextPlugins.has(e)||t.push(e.destroy());return Promise.all(t)}_add(e,t){this._plugins.set(e,t);var i=e.pluginName;if(i){if(this._plugins.has(i))throw new w("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ho{constructor(e){this._contextOwner=null,this.config=new tn(e,this.constructor.defaultConfig);e=this.constructor.builtinPlugins,this.config.define("plugins",e),this.plugins=new lo(this,e),e=this.config.get("language")||{};this.locale=new Jn({uiLanguage:"string"==typeof e?e:e.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Zn}initPlugins(){var e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if("function"!=typeof i)throw new w("context-initplugins-constructor-only",null,{Plugin:i});if(!0!==i.isContextPlugin)throw new w("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new w("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){var e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(i){return new Promise(e=>{const t=new this(i);e(t.initPlugins().then(()=>t))})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const co=new WeakMap;function uo(e,t){var i,r,s,n,o,e=co.get(e),a=[];let l=!1;for([i,r]of e)r.isDirectHost&&(a.push(i),mo(t,i,r))&&(l=!0);for([s,n]of e)n.isDirectHost||!(o=function(e){if(e.childCount){e=e.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(s))||a.includes(o)||(n.hostElement=o,mo(t,s,n)&&(l=!0));return l}function mo(e,t,i){var{text:r,isDirectHost:s,hostElement:n}=i;let o=!1;return n.getAttribute("data-placeholder")!==r&&(e.setAttribute("data-placeholder",r,n),o=!0),(s||1==t.childCount)&&function(e,t){var i,r;if(e.isAttached()&&!Array.from(e.getChildren()).some(e=>!e.is("uiElement")))return r=(i=e.document).selection.anchor,(!i.isComposing||!r||r.parent!==e)&&(t||!i.isFocused||r&&r.parent!==e)}(n,i.keepOnFocus)?(r=e,!(s=n).hasClass("ck-placeholder")&&(r.addClass("ck-placeholder",s),1)&&(o=!0)):(t=e,(i=n).hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",i),1)&&(o=!0)),o}xi=class{is(){throw new Error("is() method is abstract")}};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let go=class extends o(xi){constructor(e){super(),this.document=e,this.parent=null}get index(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new w("view-node-not-found-in-parent",this);return e}get nextSibling(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){var e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){var t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){var i=this.getAncestors(t),r=e.getAncestors(t);let s=0;for(;i[s]==r[s]&&i[s];)s++;return 0===s?null:i[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),r=Qs(t,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<i[r]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){var e=Yr(this);return delete e.parent,e}},f=(go.prototype.is=function(e){return"node"===e||"view:node"===e},class Zv extends go{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Zv&&(this===e||this.data===e.data)}_clone(){return new Zv(this.document,this.data)}}),fo=(f.prototype.is=function(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e},class extends xi{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new w("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new w("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){var t=[];let i=e.includeSelf?this.textNode:this.parent;for(;null!==i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}});fo.prototype.is=function(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class po{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(var t of e)("string"==typeof t||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const i of e)for(const r of this._patterns){var t=vo(i,r);if(t)return{element:i,pattern:r,match:t}}return null}matchAll(...e){var t=[];for(const r of e)for(const s of this._patterns){var i=vo(r,s);i&&t.push({element:r,pattern:s,match:i})}return 0<t.length?t:null}getElementName(){var e,t;return 1!==this._patterns.length||(t=(e=this._patterns[0]).name,"function"==typeof e)||!t||t instanceof RegExp?null:t}}function vo(e,t){var i,r,s,n,o;return"function"==typeof t?t(e):(i={},t.name&&(i.name=(n=t.name,o=e.name,n instanceof RegExp?!!o.match(n):n===o),!i.name)||t.attributes&&(i.attributes=(n=t.attributes,s=e,o=new Set(s.getAttributeKeys()),wi(n)?(void 0!==n.style&&c("matcher-pattern-deprecated-attributes-style-key",n),void 0!==n.class&&c("matcher-pattern-deprecated-attributes-class-key",n)):(o.delete("style"),o.delete("class")),wo(n,o,e=>s.getAttribute(e))),!i.attributes)||t.classes&&(i.classes=wo(t.classes,e.getClassNames(),()=>{}),!i.classes)||t.styles&&(i.styles=wo(t.styles,(r=e).getStyleNames(!0),e=>r.getStyle(e)),!i.styles)?null:i)}function wo(e,t,n){e=e;const i=Array.isArray(e)?e.map(e=>wi(e)?(void 0!==e.key&&void 0!==e.value||c("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):wi(e)?Object.entries(e):[[e,!0]],o=Array.from(t),a=[];if(i.forEach(([r,s])=>{o.forEach(e=>{var t,i;i=e,(!0===(t=r)||t===i||t instanceof RegExp&&i.match(t))&&function(e,t,i){if(!0===e)return 1;i=i(t);return e===i||e instanceof RegExp&&String(i).match(e)}(s,e,n)&&a.push(e)})}),i.length&&!(a.length<i.length))return a}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bo{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){var e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){var t,i;this.clear();for([t,i]of Array.from(function(t){let i=null,r=0,s=0,n=null;var o=new Map;if(""!==t){";"!=t.charAt(t.length-1)&&(t+=";");for(let e=0;e<t.length;e++){var a=t.charAt(e);if(null===i)switch(a){case":":n||(n=t.substr(r,e-r),s=e+1);break;case'"':case"'":i=a;break;case";":var l=t.substr(s,e-s);n&&o.set(n.trim(),l.trim()),n=null,r=e+1}else a===i&&(i=null)}}return o}(e).entries()))this._styleProcessor.toNormalizedForm(t,i,this._styles)}has(t){var e;return!this.isEmpty&&(e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t),Array.isArray(e))}set(e,t){if(y(e))for(var[i,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){var t,i,r=yo(e);t=this._styles,i=r,null!=t&&Vs(t,i),delete this._styles[e],this._cleanEmptyObjectsOnPath(r)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(t){var e;if(!this.isEmpty)return this._styles[t]&&!y(this._styles[t])?this._styles[t]:(e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t),Array.isArray(e)?e[1]:void 0)}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([e])=>e)}clear(){this._styles={}}_getStylesEntries(){var e=[];for(const t of Object.keys(this._styles))e.push(...this._styleProcessor.getReducedForm(t,this._styles));return e}_cleanEmptyObjectsOnPath(e){var t,e=e.split(".");1<e.length&&(e=e.splice(0,e.length-1).join("."),t=di(this._styles,e))&&!Array.from(Object.keys(t)).length&&this.remove(e)}}class _o{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){var r,s;y(t)?ko(i,yo(e),t):this._normalizers.has(e)?({path:r,value:s}=this._normalizers.get(e)(t),ko(i,r,s)):ko(i,e,t)}getNormalized(e,t){if(!e)return Is({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){var i=this._extractors.get(e);if("string"==typeof i)return di(t,i);i=i(e,t);if(i)return i}return di(t,yo(e))}getReducedForm(e,t){t=this.getNormalized(e,t);return void 0===t?[]:this._reducers.has(e)?this._reducers.get(e)(t):[[e,t]]}getStyleNames(t){var e=Array.from(this._consumables.keys()).filter(e=>{e=this.getNormalized(e,t);return e&&"object"==typeof e?Object.keys(e).length:e}),e=new Set([...e,...Object.keys(t)]);return Array.from(e.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function yo(e){return e.replace("-",".")}function ko(e,t,i){let r=i;Fs(e,t,r=y(i)?Is({},di(e,t),i):r)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ao=class Yv extends go{constructor(e,t,i,r){super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=t,this._attrs=function(e){var t=eo(e);for(var[i,r]of t)null===r?t.delete(i):"string"!=typeof r&&t.set(i,String(r));return t}(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")&&(e=this._attrs.get("class"),Eo(this._classes,e),this._attrs.delete("class")),this._styles=new bo(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){0<this._classes.size&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),0<this._classes.size&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){var t;return"class"==e?0<this._classes.size?[...this._classes].join(" "):void 0:"style"==e?""==(t=this._styles.toString())?void 0:t:this._attrs.get(e)}hasAttribute(e){return"class"==e?0<this._classes.size:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Yv))return!1;if(this!==e){if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(var[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const r of this._classes)if(!e._classes.has(r))return!1;for(const s of this._styles.getStyleNames())if(!e._styles.has(s)||e._styles.getAsString(s)!==this._styles.getAsString(s))return!1}return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){var t=new po(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(e=>`${e[0]}="${e[1]}"`).sort().join(" ");return this.name+(""==e?"":` class="${e}"`)+(t?` style="${t}"`:"")+(""==i?"":" "+i)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){var t=[];if(e)for(const r of this.getChildren())t.push(r._clone(e));var i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;var r;r=this.document;for(const s of"string"==typeof(t=t)?[new f(r,t)]:(en(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new f(r,e):e instanceof fo?new f(r,e.data):e)))null!==s.parent&&s._remove(),s.parent=this,s.document=this.document,this._children.splice(e,0,s),e++,i++;return i}_removeChildren(t,i=1){this._fireChange("children",this);for(let e=t;e<t+i;e++)this._children[e].parent=null;return this._children.splice(t,i)}_setAttribute(e,t){t=String(t);this._fireChange("attributes",this),"class"==e?Eo(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange("attributes",this),"class"==e?0<this._classes.size&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of u(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of u(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),"string"!=typeof e?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of u(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};function Eo(t,e){e=e.split(/\s+/);t.clear(),e.forEach(e=>t.add(e))}Ao.prototype.is=function(e,t){return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Co extends Ao{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=Po}}function Po(){var e=[...this.getChildren()],t=e[this.childCount-1];if(!t||!t.is("element","br"))for(const i of e)if(!i.is("uiElement"))return null;return this.childCount}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Co.prototype.is=function(e,t){return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};class xo extends s(Co){constructor(t,e,i,r){super(t,e,i,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}xo.prototype.is=function(e,t){return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const To=Symbol("rootName");class So extends xo{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(To)}set rootName(e){this._setCustomProperty(To,e)}set _name(e){this.name=e}}So.prototype.is=function(e,t){return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Oo=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new w("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new w("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=p._createAt(e.startPosition):this._position=p._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;for(;i=this.position,!(t=this.next()).done&&e(t.value););t.done||(this._position=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let i=this.position.clone();var r=this.position,t=i.parent;if(null===t.parent&&i.offset===t.childCount)return{done:!0,value:void 0};if(t===this._boundaryEndParent&&i.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(t instanceof f){if(i.isAtEnd)return this._position=p._createAfter(t),this._next();s=t.data[i.offset]}else s=t.getChild(i.offset);if(s instanceof Ao){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(i))return{done:!0,value:void 0};i.offset++}else i=new p(s,0);return this._position=i,this._formatReturnValue("elementStart",s,r,i,1)}if(s instanceof f){if(this.singleCharacters)return i=new p(s,0),this._position=i,this._next();let e=s.data.length,t;return s==this._boundaryEndParent?(e=this.boundaries.end.offset,t=new fo(s,0,e),i=p._createAfter(t)):(t=new fo(s,0,s.data.length),i.offset++),this._position=i,this._formatReturnValue("text",t,r,i,e)}if("string"!=typeof s)return i=p._createAfter(t),this._position=i,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",t,r,i);{let e;e=this.singleCharacters?1:(t===this._boundaryEndParent?this.boundaries.end.offset:t.data.length)-i.offset;t=new fo(t,i.offset,e);return i.offset+=e,this._position=i,this._formatReturnValue("text",t,r,i,e)}}_previous(){let i=this.position.clone();var r=this.position,t=i.parent;if(null===t.parent&&0===i.offset)return{done:!0,value:void 0};if(t==this._boundaryStartParent&&i.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(t instanceof f){if(i.isAtStart)return this._position=p._createBefore(t),this._previous();s=t.data[i.offset-1]}else s=t.getChild(i.offset-1);if(s instanceof Ao)return this.shallow?(i.offset--,this._position=i,this._formatReturnValue("elementStart",s,r,i,1)):(i=new p(s,s.childCount),this._position=i,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,r,i));if(s instanceof f){if(this.singleCharacters)return i=new p(s,s.data.length),this._position=i,this._previous();let e=s.data.length,t;return s==this._boundaryStartParent?(n=this.boundaries.start.offset,t=new fo(s,n,s.data.length-n),e=t.data.length,i=p._createBefore(t)):(t=new fo(s,0,s.data.length),i.offset--),this._position=i,this._formatReturnValue("text",t,r,i,e)}if("string"!=typeof s)return i=p._createBefore(t),this._position=i,this._formatReturnValue("elementStart",t,r,i,1);{let e;e=this.singleCharacters?1:(n=t===this._boundaryStartParent?this.boundaries.start.offset:0,i.offset-n),i.offset-=e;var n=new fo(t,i.offset,e);return this._position=i,this._formatReturnValue("text",n,r,i,e)}}_formatReturnValue(e,t,i,r,s){return t instanceof fo&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=p._createAfter(t.textNode):(r=p._createAfter(t.textNode),this._position=r)),0===t.offsetInText)&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=p._createBefore(t.textNode):(r=p._createBefore(t.textNode),this._position=r)),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:r,length:s}}}},p=class Xv extends xi{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return!this.parent.is("$text")&&this.parent.getChild(this.offset)||null}get nodeBefore(){return!this.parent.is("$text")&&this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof xo);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){var t=Xv._createAt(this),e=t.offset+e;return t.offset=e<0?0:e,t}getLastMatchingPosition(e,t={}){t.startPosition=this;t=new Oo(t);return t.skip(e),t.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();let r=0;for(;t[r]==i[r]&&t[r];)r++;return 0===r?null:t[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return"before"==this.compareWith(e)}isAfter(e){return"after"==this.compareWith(e)}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[],r=(t.push(this.offset),i.push(e.offset),Qs(t,i));switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Oo(e)}clone(){return new Xv(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Xv)return new this(e.parent,e.offset);if("end"==t)t=e.is("$text")?e.data.length:e.childCount;else{if("before"==t)return this._createBefore(e);if("after"==t)return this._createAfter(e);if(0!==t&&!t)throw new w("view-createpositionat-offset-required",e)}return new Xv(e,t)}static _createAfter(e){if(e.is("$textProxy"))return new Xv(e.textNode,e.offsetInText+e.data.length);if(e.parent)return new Xv(e.parent,e.index+1);throw new w("view-position-after-root",e,{root:e})}static _createBefore(e){if(e.is("$textProxy"))return new Xv(e.textNode,e.offsetInText);if(e.parent)return new Xv(e.parent,e.index);throw new w("view-position-before-root",e,{root:e})}},v=(p.prototype.is=function(e){return"position"===e||"view:position"===e},class Qv extends xi{constructor(e,t=null){super(),this.start=e.clone(),this.end=(t||e).clone()}*[Symbol.iterator](){yield*new Oo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Ro,{direction:"backward"}),t=this.end.getLastMatchingPosition(Ro);return e.parent.is("$text")&&e.isAtStart&&(e=p._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=p._createAfter(t.parent)),new Qv(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Ro);if(e.isAfter(this.end)||e.isEqual(this.end))return new Qv(e,e);let t=this.end.getLastMatchingPosition(Ro,{direction:"backward"});var i=e.nodeAfter,r=t.nodeBefore;return i&&i.is("$text")&&(e=new p(i,0)),r&&r.is("$text")&&(t=new p(r,r.data.length)),new Qv(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),t=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&t}getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Qv(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Qv(e.end,this.end))):t.push(this.clone()),t}getIntersection(i){if(this.isIntersecting(i)){let e=this.start,t=this.end;return this.containsPosition(i.start)&&(e=i.start),this.containsPosition(i.end)&&(t=i.end),new Qv(e,t)}return null}getWalker(e={}){return e.boundaries=this,new Oo(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Qv(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;for(const t of new Oo(e))yield t.item}*getPositions(e={}){e.boundaries=this;e=new Oo(e);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,r){return new this(new p(e,t),new p(i,r))}static _createFromPositionAndShift(e,t){var i=e,e=e.getShiftedBy(t);return 0<t?new this(i,e):new this(e,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(p._createBefore(e),t)}});
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ro(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */v.prototype.is=function(e){return"range"===e||"view:range"===e};let Io=class e0 extends o(xi){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){var e;return this._ranges.length?(e=this._ranges[this._ranges.length-1],(this._lastRangeBackward?e.end:e.start).clone()):null}get focus(){var e;return this._ranges.length?(e=this._ranges[this._ranges.length-1],(this._lastRangeBackward?e.start:e.end).clone()):null}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(0!==this.rangeCount){if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let e=!1;for(const r of t._ranges)if(i.isEqual(r)){e=!0;break}if(!e)return!1}}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;var e=Xs(this.getRanges());if(e!=Xs(t.getRanges()))return!1;if(0!=e)for(var i of this.getRanges()){i=i.getTrimmed();let e=!1;for(var r of t.getRanges())if(r=r.getTrimmed(),i.start.isEqual(r.start)&&i.end.isEqual(r.end)){e=!0;break}if(!e)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[i,r,s]=t;if("object"==typeof r&&(s=r,r=void 0),null===i)this._setRanges([]),this._setFakeOptions(s);else if(i instanceof e0||i instanceof Vo)this._setRanges(i.getRanges(),i.isBackward),this._setFakeOptions({fake:i.isFake,label:i.fakeSelectionLabel});else{if(i instanceof v)this._setRanges([i],s&&s.backward);else if(i instanceof p)this._setRanges([new v(i)]);else if(i instanceof go){t=!!s&&!!s.backward;let e;if(void 0===r)throw new w("view-selection-setto-required-second-parameter",this);e="in"==r?v._createIn(i):"on"==r?v._createOn(i):new v(p._createAt(i,r)),this._setRanges([e],t)}else{if(!en(i))throw new w("view-selection-setto-not-selectable",this);this._setRanges(i,s&&s.backward)}this._setFakeOptions(s)}this.fire("change")}setFocus(e,t){if(null===this.anchor)throw new w("view-selection-setfocus-no-ranges",this);e=p._createAt(e,t);"same"!=e.compareWith(this.focus)&&(t=this.anchor,this._ranges.pop(),"before"==e.compareWith(t)?this._addRange(new v(e,t),!0):this._addRange(new v(t,e)),this.fire("change"))}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof v))throw new w("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new w("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new v(e.start,e.end))}},Vo=(Io.prototype.is=function(e){return"selection"===e||"view:selection"===e},class extends o(xi){constructor(...e){super(),this._selection=new Io,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}});Vo.prototype.is=function(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mo extends W{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const No=Symbol("bubbling contexts");function Bo(e){class t extends e{fire(e,...t){try{var i=e instanceof W?e:new W(this,e),r=zo(this);if(r.size){if(Do(i,"capturing",this),!Fo(r,"$capture",i,...t)){var s=i.startRange||this.selection.getFirstRange(),n=s?s.getContainedElement():null,o=!!n&&!!Lo(r,n);let e=n||function(e){if(!e)return null;var t=e.start.parent,e=e.end.parent,i=t.getPath(),r=e.getPath();return i.length>r.length?t:e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(s);if(Do(i,"atTarget",e),!o){if(Fo(r,"$text",i,...t))return i.return;Do(i,"bubbling",e)}for(;e;){if(e.is("rootElement")){if(Fo(r,"$root",i,...t))return i.return}else if(e.is("element")&&Fo(r,e.name,i,...t))return i.return;if(Fo(r,e,i,...t))return i.return;Do(i,"bubbling",e=e.parent)}Do(i,"bubbling",this),Fo(r,"$document",i,...t)}return i.return}}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}_addEventListener(t,i,r){var e=u(r.context||"$document"),s=zo(this);for(const n of e){let e=s.get(n);e||(e=new(o()),s.set(n,e)),this.listenTo(e,t,i,r)}}_removeEventListener(e,t){for(const i of zo(this).values())this.stopListening(i,e,t)}}return t}{const t0=Bo(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Bo[e]=t0.prototype[e]})}function Do(e,t,i){e instanceof Mo&&(e._eventPhase=t,e._currentTarget=i)}function Fo(e,t,i,...r){e="string"==typeof t?e.get(t):Lo(e,t);return e&&(e.fire(i,...r),i.stop.called)}function Lo(e,t){for(var[i,r]of e)if("function"==typeof i&&i(t))return r;return null}function zo(e){return e[No]||(e[No]=new Map),e[No]}let jo=class extends Bo(s()){constructor(e){super(),this._postFixers=new Set,this.selection=new Vo,this.roots=new Zn({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(t=i(e),t)break}while(t)}};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ho extends Ao{constructor(e,t,i,r){super(e,t,i,r),this._priority=10,this._id=null,this._clonesGroup=null,this.getFillerOffset=Wo}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new w("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){e=super._clone(e);return e._priority=this._priority,e._id=this._id,e}}function Wo(){if($o(this))return null;let e=this.parent;for(;e&&e.is("attributeElement");){if(1<$o(e))return null;e=e.parent}return!e||1<$o(e)?null:this.childCount}function $o(e){return Array.from(e.getChildren()).filter(e=>!e.is("uiElement")).length}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Ho.DEFAULT_PRIORITY=10,Ho.prototype.is=function(e,t){return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};class qo extends Ao{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=Uo}_insertChild(e,t){if(t&&(t instanceof go||0<Array.from(t).length))throw new w("view-emptyelement-cannot-add",[this,t]);return 0}}function Uo(){return null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */qo.prototype.is=function(e,t){return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};class Go extends Ao{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=Jo}_insertChild(e,t){if(t&&(t instanceof go||0<Array.from(t).length))throw new w("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){var t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}function Ko(t){t.document.on("arrowKey",(e,i)=>{var r=t.domConverter;if(i.keyCode==g.arrowright){var s=i.domTarget.ownerDocument.defaultView.getSelection(),n=1==s.rangeCount&&s.getRangeAt(0).collapsed;if(n||i.shiftKey){var i=s.focusNode,o=s.focusOffset,i=r.domPositionToView(i,o);if(null!==i){let t=!1;o=i.getLastMatchingPosition(e=>(e.item.is("uiElement")&&(t=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"))));t&&(i=r.viewPositionToDom(o),n?s.collapse(i.parent,i.offset):s.extend(i.parent,i.offset))}}}},{priority:"low"})}function Jo(){return null}Go.prototype.is=function(e,t){return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zo extends Ao{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=Yo}_insertChild(e,t){if(t&&(t instanceof go||0<Array.from(t).length))throw new w("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}function Yo(){return null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Zo.prototype.is=function(e,t){return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e};let Xo=class extends o(xi){constructor(e,t){super(),this._children=[],this._customProperties=new Map,this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;var r;r=this.document;for(const s of"string"==typeof(t=t)?[new f(r,t)]:(en(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new f(r,e):e instanceof fo?new f(r,e.data):e)))null!==s.parent&&s._remove(),s.parent=this,this._children.splice(e,0,s),e++,i++;return i}_removeChildren(t,i=1){this._fireChange("children",this);for(let e=t;e<t+i;e++)this._children[e].parent=null;return this._children.splice(t,i)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Xo.prototype.is=function(e){return"documentFragment"===e||"view:documentFragment"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qo{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new Xo(this.document,e)}createText(e){return new f(this.document,e)}createAttributeElement(e,t,i={}){e=new Ho(this.document,e,t);return"number"==typeof i.priority&&(e._priority=i.priority),i.id&&(e._id=i.id),i.renderUnsafeAttributes&&e._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),e}createContainerElement(e,t,i={},r={}){let s=null;wi(i)?r=i:s=i;i=new Co(this.document,e,t,s);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createEditableElement(e,t,i={}){e=new xo(this.document,e,t);return i.renderUnsafeAttributes&&e._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),e}createEmptyElement(e,t,i={}){e=new qo(this.document,e,t);return i.renderUnsafeAttributes&&e._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),e}createUIElement(e,t,i){e=new Go(this.document,e,t);return i&&(e.render=i),e}createRawElement(e,t,i,r={}){e=new Zo(this.document,e,t);return i&&(e.render=i),r.renderUnsafeAttributes&&e._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),e}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){wi(e)&&void 0===i?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof p?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){var t,i=e.parent;if(!i.is("containerElement"))throw new w("view-writer-break-non-container-element",this.document);if(i.parent)return e.isAtStart?p._createBefore(i):(e.isAtEnd||(t=i._clone(!1),this.insert(p._createAfter(i),t),e=new v(e,p._createAt(i,"end")),t=new p(t,0),this.move(e,t)),p._createAfter(i));throw new w("view-writer-break-root",this.document)}mergeAttributes(e){var t,i,r=e.offset,s=e.parent;return s.is("$text")?e:s.is("attributeElement")&&0===s.childCount?(t=s.parent,i=s.index,s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new p(t,i))):(t=s.getChild(r-1),i=s.getChild(r),t&&i?t.is("$text")&&i.is("$text")?ra(t,i):t.is("attributeElement")&&i.is("attributeElement")&&t.isSimilar(i)?(s=t.childCount,t._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new p(t,s))):e:e)}mergeContainers(e){var t,i=e.nodeBefore,e=e.nodeAfter;if(i&&e&&i.is("containerElement")&&e.is("containerElement"))return t=(t=i.getChild(i.childCount-1))instanceof f?p._createAt(t,"end"):p._createAt(i,"end"),this.move(v._createIn(e),p._createAt(i,"end")),this.remove(v._createOn(e)),t;throw new w("view-writer-merge-containers-invalid-position",this.document)}insert(e,t){var i,r;(function e(t,i){for(const r of t){if(!sa.some(e=>r instanceof e))throw new w("view-writer-insert-invalid-node-type",i);r.is("$text")||e(r.getChildren(),i)}})(t=en(t)?[...t]:[t],this.document);let s=null,n=e;for({nodes:i,breakAttributes:r}of t.reduce((e,t)=>{var i=e[e.length-1],r=!t.is("uiElement");return i&&i.breakAttributes==r?i.nodes.push(t):e.push({breakAttributes:r,nodes:[t]}),e},[])){var o=this._insertNodes(n,i,r);s=s||o.start,n=o.end}return s?new v(s,n):new v(e)}remove(e){e=e instanceof v?e:v._createOn(e);if(oa(e,this.document),e.isCollapsed)return new Xo(this.document);var{start:t,end:i}=this._breakAttributesRange(e,!0),r=t.parent,i=i.offset-t.offset,r=r._removeChildren(t.offset,i);for(const s of r)this._removeFromClonedElementsGroup(s);i=this.mergeAttributes(t);return e.start=i,e.end=i.clone(),new Xo(this.document,r)}clear(t,i){oa(t,this.document);for(const s of t.getWalker({direction:"backward",ignoreElementEnd:!0})){var r=s.item;let e;r.is("element")&&i.isSimilar(r)?e=v._createOn(r):!s.nextPosition.isAfter(t.start)&&r.is("$textProxy")&&(r=r.getAncestors().find(e=>e.is("element")&&i.isSimilar(e)))&&(e=v._createIn(r)),e&&(e.end.isAfter(t.end)&&(e.end=t.end),e.start.isBefore(t.start)&&(e.start=t.start),this.remove(e))}}move(e,t){let i;var r,s;return t.isAfter(e.end)?(s=(r=(t=this._breakAttributes(t,!0)).parent).childCount,e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=r.childCount-s):i=this.remove(e),this.insert(t,i)}wrap(t,i){if(!(i instanceof Ho))throw new w("view-writer-wrap-invalid-attribute",this.document);if(oa(t,this.document),t.isCollapsed){let e=t.start;e.parent.is("element")&&(r=e.parent,!Array.from(r.getChildren()).some(e=>!e.is("uiElement")))&&(e=e.getLastMatchingPosition(e=>e.item.is("uiElement"))),e=this._wrapPosition(e,i);r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(t.start)&&this.setSelection(e),new v(e)}return this._wrapRange(t,i);var r}unwrap(e,t){var i,r;if(t instanceof Ho)return oa(e,this.document),e.isCollapsed?e:({start:e,end:r}=this._breakAttributesRange(e,!0),i=e.parent,i=this._unwrapChildren(i,e.offset,r.offset,t),(e=this.mergeAttributes(i.start)).isEqual(i.start)||i.end.offset--,r=this.mergeAttributes(i.end),new v(e,r));throw new w("view-writer-unwrap-invalid-attribute",this.document)}rename(e,t){e=new Co(this.document,e,t.getAttributes());return this.insert(p._createAfter(t),e),this.move(v._createIn(t),p._createAt(e,0)),this.remove(v._createOn(t)),e}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return p._createAt(e,t)}createPositionAfter(e){return p._createAfter(e)}createPositionBefore(e){return p._createBefore(e)}createRange(e,t){return new v(e,t)}createRangeOn(e){return v._createOn(e)}createRangeIn(e){return v._createIn(e)}createSelection(...e){return new Io(...e)}createSlot(e="children"){if(this._slotFactory)return this._slotFactory(this,e);throw new w("view-writer-invalid-create-slot-context",this.document)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let r;if(!(r=i?ea(e):(e.parent.is("$text")?e.parent:e).parent))throw new w("view-writer-invalid-position-container",this.document);let s;s=i?this._breakAttributes(e,!0):e.parent.is("$text")?ia(e):e;i=r._insertChild(s.offset,t);for(const n of t)this._addToClonedElementsGroup(n);e=s.getShiftedBy(i),t=this.mergeAttributes(s),t.isEqual(s)||e.offset--,i=this.mergeAttributes(e);return new v(t,i)}_wrapChildren(e,t,i,r){let s=t;for(var n=[];s<i;){var o=e.getChild(s),a=o.is("$text"),l=o.is("attributeElement");l&&this._wrapAttributeElement(r,o)?n.push(new p(e,s)):a||!l||(a=o,(l=r).priority<a.priority)||!(l.priority>a.priority)&&l.getIdentity()<a.getIdentity()?(l=r._clone(),o._remove(),l._appendChild(o),e._insertChild(s,l),this._addToClonedElementsGroup(l),n.push(new p(e,s))):this._wrapChildren(o,0,o.childCount,r),s++}let h=0;for(const c of n)c.offset-=h,c.offset!=t&&(this.mergeAttributes(c).isEqual(c)||(h++,i--));return v._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,r){let s=t;for(var n=[];s<i;){var o,a,l=e.getChild(s);l.is("attributeElement")?l.isSimilar(r)?(o=l.getChildren(),a=l.childCount,l._remove(),e._insertChild(s,o),this._removeFromClonedElementsGroup(l),n.push(new p(e,s),new p(e,s+a)),s+=a,i+=a-1):(this._unwrapAttributeElement(r,l)?n.push(new p(e,s),new p(e,s+1)):this._unwrapChildren(l,0,l.childCount,r),s++):s++}let h=0;for(const c of n)c.offset-=h,c.offset!=t&&c.offset!=i&&(this.mergeAttributes(c).isEqual(c)||(h++,i--));return v._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){var{start:e,end:i}=this._breakAttributesRange(e,!0),r=e.parent,r=this._wrapChildren(r,e.offset,i.offset,t),e=this.mergeAttributes(r.start),i=(e.isEqual(r.start)||r.end.offset--,this.mergeAttributes(r.end));return new v(e,i)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return ta(e.clone());e.parent.is("$text")&&(e=ia(e));var i=this.createAttributeElement("_wrapPosition-fake-element"),e=(i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i),new v(e,e.getShiftedBy(1))),e=(this.wrap(e,t),new p(i.parent,i.index)),t=(i._remove(),e.nodeBefore),i=e.nodeAfter;return t instanceof f&&i instanceof f?ra(t,i):ta(e)}_wrapAttributeElement(e,t){if(!aa(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const r of e.getStyleNames())if(t.hasStyle(r)&&t.getStyle(r)!==e.getStyle(r))return!1;for(const s of e.getAttributeKeys())"class"===s||"style"===s||t.hasAttribute(s)||this.setAttribute(s,e.getAttribute(s),t);for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const o of e.getClassNames())t.hasClass(o)||this.addClass(o,t);return!0}_unwrapAttributeElement(e,t){if(!aa(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const r of e.getStyleNames())if(!t.hasStyle(r)||t.getStyle(r)!==e.getStyle(r))return!1;for(const s of e.getAttributeKeys())"class"!==s&&"style"!==s&&this.removeAttribute(s,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){var i=e.start,r=e.end;return oa(e,this.document),e.isCollapsed?(e=this._breakAttributes(e.start,t),new v(e,e)):(r=(e=this._breakAttributes(r,t)).parent.childCount,i=this._breakAttributes(i,t),e.offset+=e.parent.childCount-r,new v(i,e))}_breakAttributes(e,t=!1){var i,r,s=e.offset,n=e.parent;if(e.parent.is("emptyElement"))throw new w("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new w("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new w("view-writer-cannot-break-raw-element",this.document);return!t&&n.is("$text")&&na(n.parent)||na(n)?e.clone():n.is("$text")?this._breakAttributes(ia(e),t):s==n.childCount?(e=new p(n.parent,n.index+1),this._breakAttributes(e,t)):0===s?(e=new p(n.parent,n.index),this._breakAttributes(e,t)):(e=n.index+1,i=n._clone(),n.parent._insertChild(e,i),this._addToClonedElementsGroup(i),r=n.childCount-s,s=n._removeChildren(s,r),i._appendChild(s),r=new p(n.parent,e),this._breakAttributes(r,t))}_addToClonedElementsGroup(t){if(t.root.is("rootElement")){if(t.is("element"))for(const e of t.getChildren())this._addToClonedElementsGroup(e);var i=t.id;if(i){let e=this._cloneGroups.get(i);e||(e=new Set,this._cloneGroups.set(i,e)),e.add(t),t._clonesGroup=e}}}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const i of e.getChildren())this._removeFromClonedElementsGroup(i);var t=e.id;t&&(t=this._cloneGroups.get(t))&&t.delete(e)}}function ea(e){let t=e.parent;for(;!na(t);){if(!t)return;t=t.parent}return t}function ta(e){var t=e.nodeBefore;return t&&t.is("$text")?new p(t,t.data.length):(t=e.nodeAfter)&&t.is("$text")?new p(t,0):e}function ia(e){var t;return e.offset==e.parent.data.length?new p(e.parent.parent,e.parent.index+1):0===e.offset?new p(e.parent.parent,e.parent.index):(t=e.parent.data.slice(e.offset),e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new f(e.root.document,t)),new p(e.parent.parent,e.parent.index+1))}function ra(e,t){var i=e.data.length;return e._data+=t.data,t._remove(),new p(e,i)}const sa=[f,Ho,Co,qo,Zo,Go];function na(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function oa(e,t){var i=ea(e.start),e=ea(e.end);if(!i||!e||i!==e)throw new w("view-writer-invalid-range-container",t)}function aa(e,t){return null===e.id&&null===t.id}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const la=e=>e.createTextNode(""),ha=e=>{e=e.createElement("span");return e.dataset.ckeFiller="true",e.innerText="",e},ca=e=>{e=e.createElement("br");return e.dataset.ckeFiller="true",e},da=7,ua="".repeat(da);function ma(e){return d(e)&&e.data.substr(0,da)===ua}function ga(e){return e.data.length==da&&ma(e)}function fa(e){return ma(e)?e.data.slice(da):e.data}function pa(e,t){var i,r;t.keyCode==g.arrowleft&&1==(t=t.domTarget.ownerDocument.defaultView.getSelection()).rangeCount&&t.getRangeAt(0).collapsed&&(i=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset,ma(i))&&r<=da&&t.collapse(i,0)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class va extends s(){constructor(e,t){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),m.isBlink&&!m.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else if(this.domConverter.mapViewToDom(t))if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new w("view-renderer-unknown-type",this);this.markedChildren.add(t)}}render(){if(!this.isComposing||m.isAndroid){let e=null;var t,i=!(m.isBlink&&!m.isAndroid&&this.isSelecting);for(const r of this.markedChildren)this._updateChildrenMappings(r);i?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller))&&e.parent.is("$text")&&(e=p._createBefore(e.parent));for(const s of this.markedAttributes)this._updateAttrs(s);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const o of this.markedTexts)!this.markedChildren.has(o.parent)&&this.domConverter.mapViewToDom(o.parent)&&this._updateText(o,{inlineFillerPosition:e});i&&(e?(t=(i=this.domConverter.viewPositionToDom(e)).parent.ownerDocument,ma(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=wa(t,i.parent,i.offset)):this._inlineFiller=null),this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}}_updateChildrenMappings(e){if(this.domConverter.mapViewToDom(e)){var t=Array.from(this.domConverter.mapViewToDom(e).childNodes),i=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),r=this._diffNodeLists(t,i),r=this._findUpdateActions(r,t,i,ba);if(-1!==r.indexOf("update")){var s,n,o,a={equal:0,insert:0,delete:0};for(const l of r)"update"===l?(n=a.equal+a.delete,!(o=e.getChild(s=a.equal+a.insert))||o.is("uiElement")||o.is("rawElement")||this._updateElementMappings(o,t[n]),On(i[s]),a.equal++):a[l]++}}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){var e=this.selection.getFirstPosition();return e.parent.is("$text")?p._createBefore(e.parent):e}_isSelectionInInlineFiller(){var e;return!!(1==this.selection.rangeCount&&this.selection.isCollapsed&&(e=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(e))&&d(e.parent)&&ma(e.parent))}_removeInlineFiller(){var e=this._inlineFiller;if(!ma(e))throw new w("view-renderer-filler-was-lost",this);ga(e)?e.remove():e.data=e.data.substr(da),this._inlineFiller=null}_needsInlineFillerAtSelection(){var e,t,i;return!(1!=this.selection.rangeCount||!this.selection.isCollapsed||(i=(e=this.selection.getFirstPosition()).parent,t=e.offset,!(this.domConverter.mapViewToDom(i.root)&&i.is("element")&&function(e){if("false"==e.getAttribute("contenteditable"))return;e=e.findAncestor(e=>e.hasAttribute("contenteditable"));return!e||"true"==e.getAttribute("contenteditable")}(i)&&t!==i.getFillerOffset()))||(t=e.nodeBefore,i=e.nodeAfter,t instanceof f)||i instanceof f||m.isAndroid&&(t||i))}_updateText(e,t){var i=this.domConverter.findCorrespondingDomText(e);let r=this.domConverter.viewToDom(e).data;t=t.inlineFillerPosition;ya(i,r=t&&t.parent==e.parent&&t.offset==e.index?ua+r:r)}_updateAttrs(e){var t=this.domConverter.mapViewToDom(e);if(t){var i=Array.from(t.attributes).map(e=>e.name);for(const r of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,r,e.getAttribute(r),e);for(const s of i)e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(t,s)}}_updateChildren(t,i){var r=this.domConverter.mapViewToDom(t);if(r){if(m.isAndroid){let e=null;for(const a of Array.from(r.childNodes)){if(e&&d(e)&&d(a)){r.normalize();break}e=a}}var i=i.inlineFillerPosition,s=r.childNodes,n=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0})),t=(i&&i.parent===t&&wa(r.ownerDocument,n,i.offset),this._diffNodeLists(s,n)),i=this._findUpdateActions(t,s,n,_a);let e=0;var o=new Set;for(const l of i)"delete"===l?(o.add(s[e]),On(s[e])):"equal"!==l&&"update"!==l||e++;e=0;for(const h of i)"insert"===h?(An(r,e,n[e]),e++):"update"===h?(ya(s[e],n[e].data),e++):"equal"===h&&(this._markDescendantTextToSync(this.domConverter.domToView(n[e])),e++);for(const c of o)c.parentNode||this.domConverter.unbindDomElement(c)}}_diffNodeLists(e,t){return j(e=function(e,t){e=Array.from(e);return 0!=e.length&&t&&e[e.length-1]==t&&e.pop(),e}(e,this._fakeSelectionContainer),t,function(e,t,i){return t===i||(d(t)&&d(i)?t.data===i.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(i)))}.bind(null,this.domConverter))}_findUpdateActions(e,t,i,r){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;let s=[],n=[],o=[];var a={equal:0,insert:0,delete:0};for(const l of e)"insert"===l?o.push(i[a.equal+a.insert]):"delete"===l?n.push(t[a.equal+a.delete]):(s=s.concat(j(n,o,r).map(e=>"equal"===e?"update":e)),s.push("equal"),n=[],o=[]),a[l]++;return s.concat(j(n,o,r).map(e=>"equal"===e?"update":e))}_markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}_updateSelection(){var e;m.isBlink&&!m.isAndroid&&this.isSelecting&&!this.markedChildren.size||(0===this.selection.rangeCount?(this._removeDomSelection(),this._removeFakeSelection()):(e=this.domConverter.mapViewToDom(this.selection.editableElement),this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&m.isAndroid||this._updateDomSelection(e))))}_updateFakeSelection(e){var t=e.ownerDocument,i=(this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){e=e.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="",e}(t)),this._fakeSelectionContainer);this.domConverter.bindFakeSelection(i,this.selection),this._fakeSelectionNeedsUpdate(e)&&(i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"",e=t.getSelection(),t=t.createRange(),e.removeAllRanges(),t.selectNodeContents(i),e.addRange(t))}_updateDomSelection(e){var t,i,e=e.ownerDocument.defaultView.getSelection();this._domSelectionNeedsUpdate(e)&&(t=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus),e.collapse(t.parent,t.offset),e.extend(i.parent,i.offset),m.isGecko)&&(t=e,(i=(e=i).parent).nodeType==Node.ELEMENT_NODE)&&e.offset==i.childNodes.length-1&&(i=i.childNodes[e.offset])&&"BR"==i.tagName&&t.addRange(t.getRangeAt(0))}_domSelectionNeedsUpdate(e){return!this.domConverter.isDomSelectionCorrect(e)||!((e=e&&this.domConverter.domSelectionToView(e))&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(e){var t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const r of this.domDocuments){var e,t,i=r.getSelection();i.rangeCount&&(e=r.activeElement,t=this.domConverter.mapDomToView(e),e)&&t&&i.removeAllRanges()}}_removeFakeSelection(){var e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){var e;this.isFocused&&(e=this.selection.editableElement)&&this.domConverter.focus(e)}}function wa(e,t,i){var r=t instanceof Array?t:t.childNodes,s=r[i];return d(s)?s.data=ua+s.data:(s=e.createTextNode(ua),Array.isArray(t)?r.splice(i,0,s):An(t,i,s)),s}function ba(e,t){return nn(e)&&nn(t)&&!d(e)&&!d(t)&&!En(e)&&!En(t)&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}function _a(e,t){return nn(e)&&nn(t)&&d(e)&&d(t)}function ya(e,t){var i=e.data;if(i!=t)for(const r of F(i,t))"insert"===r.type?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ka=ca(h.document),Aa=la(h.document),Ea=ha(h.document),Ca="data-ck-unsafe-attribute-",Pa="data-ck-unsafe-element";class xa{constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new po,this._encounteredRawContentDomNodes=new WeakSet,this.document=e,this.renderingMode=i,this.blockFillerMode=t||("editing"===i?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument="editing"===this.renderingMode?h.document:h.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Io(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of Array.from(e.children))this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return"data"===this.renderingMode||!((e=e.toLowerCase()).startsWith("on")||"srcdoc"===e&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)||("img"!==i||"src"!==e&&"srcset"!==e)&&("source"!==i||"srcset"!==e)&&t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if("data"===this.renderingMode)e.innerHTML=t;else{for(var t=(new DOMParser).parseFromString(t,"text/html"),i=t.createDocumentFragment(),r=t.body.childNodes;0<r.length;)i.appendChild(r[0]);for(var s,n=t.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),o=[];s=n.nextNode();)o.push(s);for(const l of o){for(const h of l.getAttributeNames())this.setDomElementAttribute(l,h,l.getAttribute(h));var a=l.tagName.toLowerCase();this._shouldRenameElement(a)&&(Oa(a),l.replaceWith(this._createReplacementDomElement(a,l)))}for(;e.firstChild;)e.firstChild.remove();e.append(i)}}viewToDom(t,i={}){var e;if(t.is("$text"))return e=this._processDataFromViewText(t),this._domDocument.createTextNode(e);{if(this.mapViewToDom(t))return this.mapViewToDom(t);let e;if(t.is("documentFragment"))e=this._domDocument.createDocumentFragment(),i.bind&&this.bindDocumentFragments(e,t);else{if(t.is("uiElement"))return e="$comment"===t.name?this._domDocument.createComment(t.getCustomProperty("$rawContent")):t.render(this._domDocument,this),i.bind&&this.bindElements(e,t),e;e=this._shouldRenameElement(t.name)?(Oa(t.name),this._createReplacementDomElement(t.name)):t.hasAttribute("xmlns")?this._domDocument.createElementNS(t.getAttribute("xmlns"),t.name):this._domDocument.createElement(t.name),t.is("rawElement")&&t.render(e,this),i.bind&&this.bindElements(e,t);for(const r of t.getAttributeKeys())this.setDomElementAttribute(e,r,t.getAttribute(r),t)}if(!1!==i.withChildren)for(const s of this.viewChildrenToDom(t,i))e.appendChild(s);return e}}setDomElementAttribute(e,t,i,r){r=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);r||c("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),Cn(t)?(e.hasAttribute(t)&&!r?e.removeAttribute(t):e.hasAttribute(Ca+t)&&r&&e.removeAttribute(Ca+t),e.setAttribute(r?t:Ca+t,i)):c("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i})}removeDomElementAttribute(e,t){t!=Pa&&(e.removeAttribute(t),e.removeAttribute(Ca+t))}*viewChildrenToDom(e,t={}){var i=e.getFillerOffset&&e.getFillerOffset();let r=0;for(const n of e.getChildren()){i===r&&(yield this._getBlockFiller());var s=n.is("element")&&!!n.getCustomProperty("dataPipeline:transparentRendering")&&!Yn(n.getAttributes());s&&"data"==this.renderingMode?yield*this.viewChildrenToDom(n,t):(s&&c("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:n}),yield this.viewToDom(n,t)),r++}i===r&&(yield this._getBlockFiller())}viewRangeToDom(e){var t=this.viewPositionToDom(e.start),e=this.viewPositionToDom(e.end),i=this._domDocument.createRange();return i.setStart(t.parent,t.offset),i.setEnd(e.parent,e.offset),i}viewPositionToDom(r){var s=r.parent;if(s.is("$text")){var n=this.findCorrespondingDomText(s);if(!n)return null;let e=r.offset;return ma(n)&&(e+=da),{parent:n,offset:e}}{let e,t,i;if(0===r.offset){if(!(e=this.mapViewToDom(s)))return null;i=e.childNodes[0]}else{n=r.nodeBefore;if(!(t=n.is("$text")?this.findCorrespondingDomText(n):this.mapViewToDom(n)))return null;e=t.parentNode,i=t.nextSibling}return d(i)&&ma(i)?{parent:i,offset:da}:(s=t?kn(t)+1:0,{parent:e,offset:s})}}domToView(e,t={}){if(this.isBlockFiller(e))return null;var r=this.getHostViewElement(e);if(r)return r;if(En(e)&&t.skipComments)return null;if(d(e))return ga(e)||""===(r=this._processDataFromDomText(e))?null:new f(this.document,r);{if(this.mapDomToView(e))return this.mapDomToView(e);let i;if(this.isDocumentFragment(e))i=new Xo(this.document),t.bind&&this.bindDocumentFragments(e,i);else{i=this._createViewElement(e,t),t.bind&&this.bindElements(e,i);var s=e.attributes;if(s)for(let e=s.length,t=0;t<e;t++)i._setAttribute(s[t].name,s[t].value);if(this._isViewElementWithRawContent(i,t)||En(e))return r=En(e)?e.data:e.innerHTML,i._setCustomProperty("$rawContent",r),this._encounteredRawContentDomNodes.add(e),i}if(!1!==t.withChildren)for(const n of this.domChildrenToView(e,t))i._appendChild(n);return i}}*domChildrenToView(t,i){for(let e=0;e<t.childNodes.length;e++){var r=t.childNodes[e],r=this.domToView(r,i);null!==r&&(yield r)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;d(e)&&(e=e.parentNode);var i=this.fakeSelectionToView(e);if(i)return i}var i=this.isDomSelectionBackward(t),r=[];for(let e=0;e<t.rangeCount;e++){var s=t.getRangeAt(e),s=this.domRangeToView(s);s&&r.push(s)}return new Io(r,{backward:i})}domRangeToView(e){var t=this.domPositionToView(e.startContainer,e.startOffset),e=this.domPositionToView(e.endContainer,e.endOffset);return t&&e?new v(t,e):null}domPositionToView(t,i=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,kn(t));var r=this.mapDomToView(t);if(r&&(r.is("uiElement")||r.is("rawElement")))return p._createBefore(r);if(d(t)){if(ga(t))return this.domPositionToView(t.parentNode,kn(t));r=this.findCorrespondingViewText(t);let e=i;return r?(ma(t)&&(e=(e-=da)<0?0:e),new p(r,e)):null}if(0===i){r=this.mapDomToView(t);if(r)return new p(r,0)}else{r=t.childNodes[i-1];if(d(r)&&ga(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,kn(r));t=d(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(t&&t.parent)return new p(t.parent,t.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(!ga(e)){var t=this.getHostViewElement(e);if(t)return t;t=e.previousSibling;if(t){if(!this.isElement(t))return null;var t=this.mapDomToView(t);if(t)return(t=t.nextSibling)instanceof f?t:null}else{t=this.mapDomToView(e.parentNode);if(t)return(e=t.getChild(0))instanceof f?e:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){e=this.mapViewToDom(e);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:t,scrollY:i}=h.window,r=[];Ta(e,e=>{var{scrollLeft:e,scrollTop:t}=e;r.push([e,t])}),e.focus(),Ta(e,e=>{var[t,i]=r.shift();e.scrollLeft=t,e.scrollTop=i}),h.window.scrollTo(t,i)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(ka):!("BR"!==e.tagName||!Sa(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(Ea)||(e=e,t=this.blockElements,e.isEqualNode(Aa)&&Sa(e,t)&&1===e.parentNode.childNodes.length);var t}isDomSelectionBackward(e){if(e.isCollapsed)return!1;var t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}e=t.collapsed;return t.detach(),e}getHostViewElement(e){var t=un(e);for(t.pop();t.length;){var i=t.pop(),i=this._domToViewMapping.get(i);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return la(this._domDocument);case"markedNbsp":return ha(this._domDocument);case"br":return ca(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){return!(d(e)&&ma(e)&&t<da||this.isElement(e)&&ma(e.childNodes[t])||(t=this.mapDomToView(e))&&(t.is("uiElement")||t.is("rawElement")))}_processDataFromViewText(e){let t=e.data;var i;return e.getAncestors().some(e=>this.preElements.includes(e.name))?t:(" "==(t=" "==t.charAt(0)&&((i=this._getTouchingInlineViewNode(e,!1))&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)?""+t.substr(1):t).charAt(t.length-1)&&(e=(i=this._getTouchingInlineViewNode(e,!0))&&i.is("$textProxy")&&" "==i.data.charAt(0)," "!=t.charAt(t.length-2)&&i&&!e||(t=t.substr(0,t.length-1)+"")),t.replace(/ {2}/g," "))}_nodeEndsWithSpace(e){return!e.getAncestors().some(e=>this.preElements.includes(e.name))&&" "==(e=this._processDataFromViewText(e)).charAt(e.length-1)}_processDataFromDomText(e){let t=e.data;var i,r,s,n,o;return i=this.preElements,un(e).some(e=>e.tagName&&i.includes(e.tagName.toLowerCase()))?fa(e):(t=t.replace(/[ \n\t\r]{1,}/g," "),r=this._getTouchingInlineDomNode(e,!1),s=this._getTouchingInlineDomNode(e,!0),n=this._checkShouldLeftTrimDomText(e,r),e=this._checkShouldRightTrimDomText(e,s),n&&(t=t.replace(/^ /,"")),e&&(t=t.replace(/ $/,"")),t=(t=fa(new Text(t))).replace(/ \u00A0/g,"  "),e=s&&this.isElement(s)&&"BR"!=s.tagName,o=s&&d(s)&&" "==s.data.charAt(0),(/( |\u00A0)\u00A0$/.test(t)||!s||e||o)&&(t=t.replace(/\u00A0$/," ")),t=n||r&&this.isElement(r)&&"BR"!=r.tagName?t.replace(/^\u00A0/," "):t)}_checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?"BR"===t.tagName:!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))}_checkShouldRightTrimDomText(e,t){return!t&&!ma(e)}_getTouchingInlineViewNode(e,t){for(const i of new Oo({startPosition:t?p._createAfter(e):p._createBefore(e),direction:t?"forward":"backward"})){if(i.item.is("element")&&this.inlineObjectElements.includes(i.item.name))return i.item;if(i.item.is("containerElement"))return null;if(i.item.is("element","br"))return null;if(i.item.is("$textProxy"))return i.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;var i=t?"firstChild":"lastChild",r=t?"nextSibling":"previousSibling";let s=!0,n=e;do{if(!s&&n[i]?n=n[i]:s=n[r]?(n=n[r],!1):(n=n.parentNode,!0),!n||this._isBlockElement(n))return null}while(!d(n)&&"BR"!=n.tagName&&!this._isInlineObjectElement(n));return n}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){return En(e)?new Go(this.document,"$comment"):(t=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase(),new Ao(this.document,t))}_isViewElementWithRawContent(e,t){return!1!==t.withChildren&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){e=e.toLowerCase();return"editing"===this.renderingMode&&this.unsafeElements.includes(e)}_createReplacementDomElement(e,t){var i=this._domDocument.createElement("span");if(i.setAttribute(Pa,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const r of t.getAttributeNames())i.setAttribute(r,t.getAttribute(r))}return i}}function Ta(e,t){let i=e;for(;i;)t(i),i=i.parentElement}function Sa(e,t){e=e.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function Oa(e){"script"===e&&c("domconverter-unsafe-script-element-detected"),"style"===e&&c("domconverter-unsafe-style-element-detected")}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ra extends ln(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return!(!(e=e&&3===e.nodeType?e.parentNode:e)||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ia{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Ht(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Va extends Ra{constructor(){super(...arguments),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(e,t)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(t.target)&&this.onDomEvent(t)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Ia(this.view,t,i))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ma extends Va{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){var t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Hn(this)}};this.fire(e.type,e,t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Na extends Ra{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=ks(e=>{this.document.fire("selectionChangeDone",e)},200)}observe(){const i=this.document;i.on("arrowKey",(e,t)=>{i.selection.isFake&&this.isEnabled&&t.preventDefault()},{context:"$capture"}),i.on("arrowKey",(e,t)=>{i.selection.isFake&&this.isEnabled&&this._handleSelectionMove(t.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){var t=this.document.selection,i=new Io(t.getRanges(),{backward:t.isBackward,fake:!1}),e=(e!=g.arrowleft&&e!=g.arrowup||i.setTo(i.getFirstPosition()),e!=g.arrowright&&e!=g.arrowdown||i.setTo(i.getLastPosition()),{oldSelection:t,newSelection:i,domSelection:null});this.document.fire("selectionChange",e),this._fireSelectionChangeDoneDebounced(e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ba extends Ra{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0!==t.length){var i,r,s=this.domConverter,n=new Set,o=new Set;for(const d of t){var a=s.mapDomToView(d.target);!a||a.is("uiElement")||a.is("rawElement")||"childList"!==d.type||this._isBogusBrMutation(d)||o.add(a)}for(const u of t){var l=s.mapDomToView(u.target);l&&(l.is("uiElement")||l.is("rawElement"))||"characterData"!==u.type||((l=s.findCorrespondingViewText(u.target))&&!o.has(l.parent)?n.add(l):!l&&ma(u.target)&&o.add(s.mapDomToView(u.target.parentNode)))}let e=!1;for(const m of n)e=!0,this.renderer.markToSync("text",m);for(const g of o){var h=s.mapViewToDom(g),c=Array.from(g.getChildren()),h=Array.from(s.domChildrenToView(h,{withChildren:!1}));c=c,h=h,((r=void 0)===(r=(i="function"==typeof(i=Da)?i:void 0)?i(c,h):void 0)?vs(c,h,void 0,i):r)||(e=!0,this.renderer.markToSync("children",g))}e&&this.view.forceRender()}}_isBogusBrMutation(e){let t=null;return(t=null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length?this.domConverter.domToView(e.addedNodes[0],{withChildren:!1}):t)&&t.is("element","br")}}function Da(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fa extends Va{constructor(r){super(r),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const s=this.document;s.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),r.change(()=>{})},50)}),s.on("blur",(e,t)=>{var i=s.selection.editableElement;null!==i&&i!==t.target||(s.isFocused=!1,this._isFocusChanging=!1,r.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class La extends Ra{constructor(e){super(e),this.mutationObserver=e.getObserver(Ba),this.focusObserver=e.getObserver(Fa),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=ks(e=>{this.document.fire("selectionChangeDone",e)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ks(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const i=e.ownerDocument,t=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,i),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(e,"keydown",t,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",t,{priority:"highest",useCapture:!0}),this._documents.has(i)||(this.listenTo(i,"mouseup",t,{priority:"highest",useCapture:!0}),this.listenTo(i,"selectionchange",(e,t)=>{this.document.isComposing&&!m.isAndroid||(this._handleSelectionChange(t,i),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(i))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,t){var i;this.isEnabled&&(t=t.defaultView.getSelection(),this.checkShouldIgnoreEventFromTarget(t.anchorNode)||(this.mutationObserver.flush(),0==(i=this.domConverter.domSelectionToView(t)).rangeCount?this.view.hasDomSelection=!1:(this.view.hasDomSelection=!0,this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t)||(60<++this._loopbackCounter?this._reportInfiniteLoop():(this.focusObserver.flush(),this.selection.isSimilar(i)?this.view.forceRender():(i={oldSelection:this.selection,newSelection:i,domSelection:t},this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)))))))}_clearInfiniteLoop(){this._loopbackCounter=0}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class za extends Va{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ja{constructor(e,t={}){this._files=t.cacheFiles?Ha(e):null,this._native=e}get files(){return this._files||(this._files=Ha(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}function Ha(e){var t=Array.from(e.files||[]),e=Array.from(e.items||[]);return t.length?t:e.filter(e=>"file"===e.kind).map(e=>e.getAsFile())}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wa extends Va{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(i){const e=i.getTargetRanges(),r=this.view,s=r.document;let n=null,o=null,a=[];var t;if(i.dataTransfer&&(n=new ja(i.dataTransfer)),null!==i.data?o=i.data:n&&(o=n.getData("text/plain")),s.selection.isFake?a=Array.from(s.selection.getRanges()):e.length?a=e.map(e=>{var t=r.domConverter.domPositionToView(e.startContainer,e.startOffset),e=r.domConverter.domPositionToView(e.endContainer,e.endOffset);return t?r.createRange(t,e):e?r.createRange(e):void 0}).filter(e=>!!e):m.isAndroid&&(t=i.target.ownerDocument.defaultView.getSelection(),a=Array.from(r.domConverter.domSelectionToView(t).getRanges())),m.isAndroid&&"insertCompositionText"==i.inputType&&o&&o.endsWith(`
`))this.fire(i.type,i,{inputType:"insertParagraph",targetRanges:[r.createRange(a[0].end)]});else if("insertText"==i.inputType&&o&&o.includes(`
`)){var l=o.split(/\n{1,2}/g);let t=a;for(let e=0;e<l.length;e++){var h=l[e];""!=h&&(this.fire(i.type,i,{data:h,dataTransfer:n,targetRanges:t,inputType:i.inputType,isComposing:i.isComposing}),t=[s.selection.getFirstRange()]),e+1<l.length&&(this.fire(i.type,i,{inputType:"insertParagraph",targetRanges:t}),t=[s.selection.getFirstRange()])}}else this.fire(i.type,i,{data:o,dataTransfer:n,targetRanges:a,inputType:i.inputType,isComposing:i.isComposing})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $a extends Ra{constructor(e){super(e),this.document.on("keydown",(e,t)=>{var i;!this.isEnabled||(i=t.keyCode)!=g.arrowright&&i!=g.arrowleft&&i!=g.arrowup&&i!=g.arrowdown||(i=new Mo(this.document,"arrowKey",this.document.selection.getFirstRange()),this.document.fire(i,t),i.stop.called&&e.stop())})}observe(){}stopObserving(){}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qa extends Ra{constructor(e){super(e);const r=this.document;r.on("keydown",(e,t)=>{var i;this.isEnabled&&t.keyCode==g.tab&&!t.ctrlKey&&(i=new Mo(r,"tab",r.selection.getFirstRange()),r.fire(i,t),i.stop.called)&&e.stop()})}observe(){}stopObserving(){}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ua=class extends s(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new jo(e),this.domConverter=new xa(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new va(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Qo(this.document),this.addObserver(Ba),this.addObserver(Fa),this.addObserver(La),this.addObserver(Ma),this.addObserver(Na),this.addObserver(za),this.addObserver($a),this.addObserver(Wa),this.addObserver(qa),this.document.on("arrowKey",pa,{priority:"low"}),Ko(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();var r,s,n={};for({name:r,value:s}of Array.from(e.attributes))n[r]=s,"class"===r?this._writer.addClass(s.split(" "),i):this._writer.setAttribute(r,s,i);this._initialDomRootAttributes.set(e,n);const o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(e,t)=>this._renderer.markToSync("children",t)),i.on("change:attributes",(e,t)=>this._renderer.markToSync("attributes",t)),i.on("change:text",(e,t)=>this._renderer.markToSync("text",t)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const a of this._observers.values())a.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:e})=>t.removeAttribute(e));var i=this._initialDomRootAttributes.get(t);for(const r in i)t.setAttribute(r,i[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){var t=this._observers.get(e);if(!t){t=new e(this),this._observers.set(e,t);for(var[i,r]of this.domRoots)t.observe(r,i);t.enable()}return t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:r=20}={}){var s,n=this.document.selection.getFirstRange();n&&(s=es({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:r}),"number"==typeof i&&(i={top:i,bottom:i,left:i,right:i}),n={target:this.domConverter.viewRangeToDom(n),viewportOffset:i,ancestorOffset:r,alignToTop:e,forceScroll:t},this.fire("scrollToTheSelection",n,s),Rn(n))}focus(){var e;this.document.isFocused||(e=this.document.selection.editableElement)&&(this.domConverter.focus(e),this.forceRender())}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new w("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(Fa).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return p._createAt(e,t)}createPositionAfter(e){return p._createAfter(e)}createPositionBefore(e){return p._createBefore(e)}createRange(e,t){return new v(e,t)}createRangeOn(e){return v._createOn(e)}createRangeIn(e){return v._createIn(e)}createSelection(...e){return new Io(...e)}_disableRendering(e){0==(this._renderingDisabled=e)&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ga{is(){throw new Error("is() method is abstract")}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ka=class extends Ga{constructor(e){super(),this.parent=null,this._attrs=eo(e)}get document(){return null}get index(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new w("model-node-not-found-in-parent",this);return e}get startOffset(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new w("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){var e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){var t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){var i=this.getAncestors(t),r=e.getAncestors(t);let s=0;for(;i[s]==r[s]&&i[s];)s++;return 0===s?null:i[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),r=Qs(t,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<i[r]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){var e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((e,t)=>(e[t[0]]=t[1],e),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=eo(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Ka.prototype.is=function(e){return"node"===e||"model:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ja{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){e=this._nodes.indexOf(e);return-1==e?null:e}getNodeStartOffset(e){e=this.getNodeIndex(e);return null===e?null:this._nodes.slice(0,e).reduce((e,t)=>e+t.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;e=this._nodes[e];if(e)return this.getNodeStartOffset(e);throw new w("model-nodelist-index-out-of-bounds",this)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new w("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const s of t)if(!(s instanceof Ka))throw new w("model-nodelist-insertnodes-not-node",this);var i,r;this._nodes=(i=this._nodes,t=Array.from(t),e=e,r=0,1e4<Math.max(t.length,i.length)?i.slice(0,e).concat(t).concat(i.slice(e+r,i.length)):((i=Array.from(i)).splice(e,r,...t),i))}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let _=class i0 extends Ka{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){var e=super.toJSON();return e.data=this.data,e}_clone(){return new i0(this.data,this.getAttributes())}static fromJSON(e){return new i0(e.data,e.attributes)}};_.prototype.is=function(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Za extends Ga{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new w("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new w("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){var e=this.textNode.getPath();return 0<e.length&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){var t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Za.prototype.is=function(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A extends Ka{constructor(e,t,i){super(t),this._children=new Ja,this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){var e=super.toJSON();if(e.name=this.name,0<this._children.length){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){e=e?Array.from(this._children).map(e=>e._clone(!0)):void 0;return new A(this.name,this.getAttributes(),e)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){t="string"==typeof(t=t)?[new _(t)]:(en(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new _(e):e instanceof Za?new _(e.data,e.getAttributes()):e));for(const i of t)null!==i.parent&&i._remove(),i.parent=this;this._children._insertNodes(e,t)}_removeChildren(e,t=1){e=this._children._removeNodes(e,t);for(const i of e)i.parent=null;return e}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(A.fromJSON(i)):t.push(_.fromJSON(i))}return new A(e.name,e.attributes,t)}}A.prototype.is=function(e,t){return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ya{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new w("model-tree-walker-no-start-position",null);var t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new w("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=E._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,r,s;for(;r=this.position,s=this._visitedParent,{done:t,value:i}=this.next(),!t&&e(i););t||(this._position=r,this._visitedParent=s)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){var e=this.position,i=this.position.clone(),r=this._visitedParent;if(null===r.parent&&i.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&i.offset==this.boundaries.end.offset)return{done:!0,value:void 0};var s=Qa(i,r),s=s||el(i,r,s);if(s instanceof A){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(i))return{done:!0,value:void 0};i.offset++}else i.path.push(0),this._visitedParent=s;return Xa("elementStart",s,e,this._position=i,1)}if(s instanceof _){let t;if(this.singleCharacters)t=1;else{let e=s.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<e&&(e=this.boundaries.end.offset),t=e-i.offset}var n=i.offset-s.startOffset,s=new Za(s,n,t);return i.offset+=t,Xa("text",s,e,this._position=i,t)}return i.path.pop(),i.offset++,this._position=i,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():Xa("elementEnd",r,e,i)}_previous(){var e=this.position,i=this.position.clone(),r=this._visitedParent;if(null===r.parent&&0===i.offset)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&i.offset==this.boundaries.start.offset)return{done:!0,value:void 0};var s=i.parent,n=Qa(i,s),s=n||tl(i,s,n);if(s instanceof A)return i.offset--,this.shallow?Xa("elementStart",s,e,this._position=i,1):(i.path.push(s.maxOffset),this._position=i,this._visitedParent=s,this.ignoreElementEnd?this._previous():Xa("elementEnd",s,e,i));if(s instanceof _){let t;if(this.singleCharacters)t=1;else{let e=s.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>e&&(e=this.boundaries.start.offset),t=i.offset-e}n=i.offset-s.startOffset,s=new Za(s,n-t,t);return i.offset-=t,Xa("text",s,e,this._position=i,t)}return i.path.pop(),this._position=i,this._visitedParent=r.parent,Xa("elementStart",r,e,i,1)}}function Xa(e,t,i,r,s){return{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:r,length:s}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E extends Ga{constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new w("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new w("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(!(t=t.getChild(t.offsetToIndex(this.path[e]))))throw new w("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new w("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Qa(this,this.parent)}get nodeAfter(){var e=this.parent;return el(this,e,Qa(this,e))}get nodeBefore(){var e=this.parent;return tl(this,e,Qa(this,e))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";var t=Qs(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;t=new Ya(t);return t.skip(e),t.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){var e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){var t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){var t;return this.root!=e.root?[]:(e="string"==typeof(t=Qs(this.path,e.path))?Math.min(this.path.length,e.path.length):t,this.path.slice(0,e))}getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();let r=0;for(;t[r]==i[r]&&t[r];)r++;return 0===r?null:t[r-1]}getShiftedBy(e){var t=this.clone(),e=t.offset+e;return t.offset=e<0?0:e,t}isAfter(e){return"after"==this.compareWith(e)}isBefore(e){return"before"==this.compareWith(e)}isEqual(e){return"same"==this.compareWith(e)}isTouching(t){if(this.root!==t.root)return!1;var i=Math.min(this.path.length,t.path.length);for(let e=0;e<i;e++){var r=this.path[e]-t.path[e];if(r<-1||1<r)return!1;if(1==r)return il(t,this,e);if(-1==r)return il(this,t,e)}return this.path.length===t.path.length||(this.path.length>t.path.length?rl(this.path,i):rl(t.path,i))}hasSameParentAs(e){return this.root===e.root&&"same"==Qs(this.getParentPath(),e.getParentPath())}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=E._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){var t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){var t=e.movedRange;let i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?E._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){var i=E._createAt(this);if(this.root==e.root)if("same"==Qs(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if("prefix"==Qs(e.getParentPath(),this.getParentPath())){var r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;i.path[r]-=t}}return i}_getTransformedByInsertion(e,t){var i,r=E._createAt(this);return this.root==e.root&&("same"==Qs(e.getParentPath(),this.getParentPath())?(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(r.offset+=t):"prefix"==Qs(e.getParentPath(),this.getParentPath())&&(i=e.path.length-1,e.offset<=this.path[i])&&(r.path[i]+=t)),r}_getTransformedByMove(e,t,i){var r;return t=t._getTransformedByDeletion(e,i),e.isEqual(t)?E._createAt(this):null===(r=this._getTransformedByDeletion(e,i))||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):r._getTransformedByInsertion(t,i)}_getCombined(e,t){var i=e.path.length-1,t=E._createAt(t);return t.stickiness=this.stickiness,t.offset=t.offset+this.path[i]-e.offset,t.path=[...t.path,...this.path.slice(1+i)],t}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof E)return new E(e.root,e.path,e.stickiness);var r,s=e;if("end"==t)t=s.maxOffset;else{if("before"==t)return this._createBefore(s,i);if("after"==t)return this._createAfter(s,i);if(0!==t&&!t)throw new w("model-createpositionat-offset-required",[this,e])}if(s.is("element")||s.is("documentFragment"))return(r=s.getPath()).push(t),new this(s.root,r,i);throw new w("model-position-parent-incorrect",[this,e])}static _createAfter(e,t){if(e.parent)return this._createAt(e.parent,e.endOffset,t);throw new w("model-position-after-root",[this,e],{root:e})}static _createBefore(e,t){if(e.parent)return this._createAt(e.parent,e.startOffset,t);throw new w("model-position-before-root",e,{root:e})}static fromJSON(e,t){var i;if("$graveyard"===e.root)return(i=new E(t.graveyard,e.path)).stickiness=e.stickiness,i;if(t.getRoot(e.root))return new E(t.getRoot(e.root),e.path,e.stickiness);throw new w("model-position-fromjson-no-root",t,{rootName:e.root})}}function Qa(e,t){t=t.getChild(t.offsetToIndex(e.offset));return t&&t.is("$text")&&t.startOffset<e.offset?t:null}function el(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset))}function tl(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset)-1)}function il(e,t,i){return!(i+1===e.path.length||!rl(t.path,i+1)||!function(e,t){let i=e.parent,r=e.path.length-1,s=0;for(;r>=t;){if(e.path[r]+s!==i.maxOffset)return;s=1,r--,i=i.parent}return 1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(e,i+1))}function rl(e,t){for(;t<e.length;){if(0!==e[t])return!1;t++}return!0}E.prototype.is=function(e){return"position"===e||"model:position"===e};class O extends Ga{constructor(e,t){super(),this.start=E._createAt(e),this.end=t?E._createAt(t):E._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Ya({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Qs(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),t=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&t}containsItem(e){e=E._createBefore(e);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){var t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new O(this.start,e.start)),this.containsPosition(e.end)&&t.push(new O(e.end,this.end))):t.push(new O(this.start,this.end)),t}getIntersection(i){if(this.isIntersecting(i)){let e=this.start,t=this.end;return this.containsPosition(i.start)&&(e=i.start),this.containsPosition(i.end)&&(t=i.end),new O(e,t)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(!(i=i||(this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start))))return null;let r=this.start,s=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(s)&&(s=e.end),new O(r,s)}getMinimalFlatRanges(){var e=[],t=this.start.getCommonPath(this.end).length,i=E._createAt(this.start);let r=i.parent;for(;i.path.length>t+1;){var s=r.maxOffset-i.offset;0!=s&&e.push(new O(i,i.getShiftedBy(s))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){var n=this.end.path[i.path.length-1],o=n-i.offset;0!=o&&e.push(new O(i,i.getShiftedBy(o))),i.offset=n,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Ya(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;for(const t of new Ya(e))yield t.item}*getPositions(e={}){e.boundaries=this;e=new Ya(e);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new O(this.start,this.end)]}getTransformedByOperations(e){var i=[new O(this.start,this.end)];for(const n of e)for(let e=0;e<i.length;e++){var t=i[e].getTransformedByOperation(n);i.splice(e,1,...t),e+=t.length-1}for(let t=0;t<i.length;t++){var r=i[t];for(let e=t+1;e<i.length;e++){var s=i[e];(r.containsRange(s)||s.containsRange(r)||r.isEqual(s))&&i.splice(e,1)}}return i}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){var e,t;return!this.isCollapsed&&(e=this.start.nodeAfter,t=this.end.nodeBefore,e)&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){var i=e.sourcePosition,r=e.howMany,e=e.targetPosition;return this._getTransformedByMove(i,e,r,t)}_getTransformedBySplitOperation(e){var t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new O(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new O(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)&&(e.sourcePosition.isBefore(e.targetPosition)?(t=E._createAt(i)).offset=0:(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition)),new O(t,i)}_getTransformedByInsertion(e,t,i=!1){return i&&this.containsPosition(e)?[new O(this.start,e),new O(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))]:((i=new O(this.start,this.end)).start=i.start._getTransformedByInsertion(e,t),i.end=i.end._getTransformedByInsertion(e,t),[i])}_getTransformedByMove(e,t,i,r=!1){if(this.isCollapsed)return s=this.start._getTransformedByMove(e,t,i),[new O(s)];var s=O._createFromPositionAndShift(e,i),n=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!r&&(s.containsPosition(this.start)||s.containsPosition(this.end)))return a=this.start._getTransformedByMove(e,t,i),t=this.end._getTransformedByMove(e,t,i),[new O(a,t)];let o;var a=this.getDifference(s);let l=null;t=this.getIntersection(s);return 1==a.length?l=new O(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i)):2==a.length&&(l=new O(this.start,this.end._getTransformedByDeletion(e,i))),o=l?l._getTransformedByInsertion(n,i,null!==t||r):[],t&&(a=new O(t.start._getCombined(s.start,n),t.end._getCombined(s.start,n)),2==o.length?o.splice(1,0,a):o.push(a)),o}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return null==i&&null==r?null:(null==i&&(i=e),null==r&&(r=e),new O(i,r))}static _createFromPositionAndShift(e,t){var i=e,e=e.getShiftedBy(t);return 0<t?new this(i,e):new this(e,i)}static _createIn(e){return new this(E._createAt(e,0),E._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(E._createBefore(e),e.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new w("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();var e=t[0],i=(t.sort((e,t)=>e.start.isAfter(t.start)?1:-1),t.indexOf(e)),r=new this(e.start,e.end);if(0<i)for(let e=i-1;t[e].end.isEqual(r.start);e++)r.start=E._createAt(t[e].start);for(let e=i+1;e<t.length&&t[e].start.isEqual(r.end);e++)r.end=E._createAt(t[e].end);return r}static fromJSON(e,t){return new this(E.fromJSON(e.start,t),E.fromJSON(e.end,t))}}O.prototype.is=function(e){return"range"===e||"model:range"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sl extends o(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(!t.viewPosition){var i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new w("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)}},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{var i,r;t.modelPosition||(r=this.findMappedViewAncestor(t.viewPosition),i=this._viewToModelMapping.get(r),r=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,r),t.modelPosition=E._createAt(i,r))},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){var i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){var t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){var i=this._markerNameToElements.get(t)||new Set,r=(i.add(e),this._elementToMarkerNames.get(e)||new Set);r.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){var i=this._markerNameToElements.get(t),i=(i&&(i.delete(e),0==i.size)&&this._markerNameToElements.delete(t),this._elementToMarkerNames.get(e));i&&(i.delete(t),0==i.size)&&this._elementToMarkerNames.delete(e)}flushUnboundMarkerNames(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(var[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new O(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new v(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){e={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(e,t={}){e={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",e),e.viewPosition}markerNameToElements(e){e=this._markerNameToElements.get(e);if(!e)return null;var t=new Set;for(const i of e)if(i.is("attributeElement"))for(const r of i.getElementsWithSameId())t.add(r);else t.add(i);return t}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(t,i,e){if(e!=t)return this._toModelOffset(t.parent,t.index,e)+this._toModelOffset(t,i,t);if(t.is("$text"))return i;let r=0;for(let e=0;e<i;e++)r+=this.getModelLength(t.getChild(e));return r}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const i of t.getChildren())e+=this.getModelLength(i);return e}}findPositionIn(e,t){let i,r=0,s=0,n=0;if(e.is("$text"))return new p(e,t);for(;s<t;)i=e.getChild(n),r=this.getModelLength(i),s+=r,n++;return s==t?this._moveViewPositionToTextNode(new p(e,n)):this.findPositionIn(i,t-(s-r))}_moveViewPositionToTextNode(e){var t=e.nodeBefore,i=e.nodeAfter;return t instanceof f?new p(t,t.data.length):i instanceof f?new p(i,0):e}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nl{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=ol(t),e instanceof Za&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=ol(t),e instanceof Za&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=ol(t),e instanceof Za&&(e=this._getSymbolForTextProxy(e));var e=this._consumable.get(e);return void 0===e||void 0===(e=e.get(t))?null:e}revert(e,t){t=ol(t),e instanceof Za&&(e=this._getSymbolForTextProxy(e));var i=this.test(e,t);return!1===i?(this._consumable.get(e).set(t,!0),!0):!0!==i&&null}verifyAllConsumed(e){var t,i,r=[];for([t,i]of this._consumable)for(var[s,n]of i){var o=s.split(":")[0];n&&e==o&&r.push({event:s,item:t.name||t.description})}if(r.length)throw new w("conversion-model-consumable-not-consumed",null,{items:r})}_getSymbolForTextProxy(e){let t=null;var i=this._textProxyRegistry.get(e.startOffset);return t=(t=i&&(i=i.get(e.endOffset))?i.get(e.parent):t)||this._addSymbolForTextProxy(e)}_addSymbolForTextProxy(e){var t=e.startOffset,i=e.endOffset,r=e.parent,e=Symbol("$textProxy:"+e.data);let s,n;return(s=this._textProxyRegistry.get(t))||(s=new Map,this._textProxyRegistry.set(t,s)),(n=s.get(i))||(n=new Map,s.set(i,n)),n.set(r,e),e}}function ol(e){var t=e.split(":");return"insert"==t[0]?t[0]:"addMarker"==t[0]||"removeMarker"==t[0]?e:1<t.length?t[0]+":"+t[1]:t[0]}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class al extends o(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){var r=this._createConversionApi(i,e.getRefreshedItems());for(const n of e.getMarkersToRemove())this._convertMarkerRemove(n.name,n.range,r);for(const o of this._reduceChanges(e.getChanges()))"insert"===o.type?this._convertInsert(O._createFromPositionAndShift(o.position,o.length),r):"reinsert"===o.type?this._convertReinsert(O._createFromPositionAndShift(o.position,o.length),r):"remove"===o.type?this._convertRemove(o.position,o.length,o.name,r):this._convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,r);for(const a of r.mapper.flushUnboundMarkerNames()){var s=t.get(a).getRange();this._convertMarkerRemove(a,s,r),this._convertMarkerAdd(a,s,r)}for(const l of e.getMarkersToAdd())this._convertMarkerAdd(l.name,l.range,r);r.mapper.flushDeferredBindings(),r.consumable.verifyAllConsumed("insert")}convert(e,t,i,r={}){var s,n,o=this._createConversionApi(i,void 0,r);this._convertInsert(e,o);for([s,n]of t)this._convertMarkerAdd(s,n,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){var t=Array.from(t.getMarkersAtPosition(e.getFirstPosition())),r=this._createConversionApi(i);if(this._addConsumablesForSelection(r.consumable,e,t),this.fire("selection",{selection:e},r),e.isCollapsed){for(const o of t){var s=o.getRange();(function(e,t,i){const r=t.getRange(),s=Array.from(e.getAncestors());return s.shift(),s.reverse(),!s.some(e=>{if(r.containsItem(e))return!!i.toViewElement(e).getCustomProperty("addHighlight")})})(e.getFirstPosition(),o,r.mapper)&&(s={item:e,markerName:o.name,markerRange:s},r.consumable.test(e,"addMarker:"+o.name))&&this.fire("addMarker:"+o.name,s,r)}for(const a of e.getAttributeKeys()){var n={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};r.consumable.test(e,"attribute:"+n.attributeKey)&&this.fire(`attribute:${n.attributeKey}:$text`,n,r)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,Array.from(e));for(const r of Array.from(e.getWalker({shallow:!0})).map(ll))this._testAndFire("insert",r,t)}_convertRemove(e,t,i,r){this.fire("remove:"+i,{position:e,length:t},r)}_convertAttribute(e,t,i,r,s){this._addConsumablesForRange(s.consumable,e,"attribute:"+t);for(const o of e){var n={item:o.item,range:O._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:t,attributeOldValue:i,attributeNewValue:r};this._testAndFire("attribute:"+t,n,s)}}_convertReinsert(e,t){e=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,e);for(const i of e.map(ll))this._testAndFire("insert",{...i,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if("$graveyard"!=t.root.rootName){var r,s="addMarker:"+e;if(i.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},i),i.consumable.consume(t,s)){this._addConsumablesForRange(i.consumable,t,s);for(const n of t.getItems())i.consumable.test(n,s)&&(r={item:n,range:O._createOn(n),markerName:e,markerRange:t},this.fire(s,r,i))}}}_convertMarkerRemove(e,t,i){"$graveyard"!=t.root.rootName&&this.fire("removeMarker:"+e,{markerName:e,markerRange:t},i)}_reduceChanges(e){e={changes:e};return this.fire("reduceChanges",e),e.changes}_addConsumablesForInsert(e,t){for(const r of t){var i=r.item;if(null===e.test(i,"insert")){e.add(i,"insert");for(const s of i.getAttributeKeys())e.add(i,"attribute:"+s)}}return e}_addConsumablesForRange(e,t,i){for(const r of t.getItems())e.add(r,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const r of i)e.add(t,"addMarker:"+r.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,i){var e=function(e,t){t=t.item.is("element")?t.item.name:"$text";return e+":"+t}(e,t),r=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(i),n=s.get(r);if(n){if(n.has(e))return;n.add(e)}else s.set(r,new Set([e]));this.fire(e,t,i)}_testAndFireAddAttributes(e,t){var i={item:e,range:O._createOn(e)};for(const r of i.item.getAttributeKeys())i.attributeKey=r,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(r),this._testAndFire("attribute:"+r,i,t)}_createConversionApi(e,t=new Set,i={}){const r={...this._conversionApi,consumable:new nl,writer:e,options:i,convertItem:e=>this._convertInsert(O._createOn(e),r),convertChildren:e=>this._convertInsert(O._createIn(e),r,{doNotAddConsumables:!0}),convertAttributes:e=>this._testAndFireAddAttributes(e,r),canReuseView:e=>!t.has(r.mapper.toModelElement(e))};return this._firedEventsMap.set(r,new Map),r}}function ll(e){return{item:e.item,range:O._createFromPositionAndShift(e.previousPosition,e.length)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hl extends o(Ga){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){var e;return 0<this._ranges.length?(e=this._ranges[this._ranges.length-1],this._lastRangeBackward?e.end:e.start):null}get focus(){var e;return 0<this._ranges.length?(e=this._ranges[this._ranges.length-1],this._lastRangeBackward?e.start:e.end):null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0!==this.rangeCount){if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let e=!1;for(const r of t._ranges)if(i.isEqual(r)){e=!0;break}if(!e)return!1}}return!0}*getRanges(){for(const e of this._ranges)yield new O(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new O(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new O(e.start,e.end):null}getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null}setTo(...t){let[i,r,s]=t;if("object"==typeof r&&(s=r,r=void 0),null===i)this._setRanges([]);else if(i instanceof hl)this._setRanges(i.getRanges(),i.isBackward);else if(i&&"function"==typeof i.getRanges)this._setRanges(i.getRanges(),i.isBackward);else if(i instanceof O)this._setRanges([i],!!s&&!!s.backward);else if(i instanceof E)this._setRanges([new O(i)]);else if(i instanceof Ka){t=!!s&&!!s.backward;let e;if("in"==r)e=O._createIn(i);else if("on"==r)e=O._createOn(i);else{if(void 0===r)throw new w("model-selection-setto-required-second-parameter",[this,i]);e=new O(E._createAt(i,r))}this._setRanges([e],t)}else{if(!en(i))throw new w("model-selection-setto-not-selectable",[this,i]);this._setRanges(i,s&&!!s.backward)}}_setRanges(e,t=!1){var i=Array.from(e),r=i.some(t=>{if(t instanceof O)return this._ranges.every(e=>!e.isEqual(t));throw new w("model-selection-set-ranges-not-range",[this,e])});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(null===this.anchor)throw new w("model-selection-setfocus-no-ranges",[this,e]);e=E._createAt(e,t);"same"!=e.compareWith(this.focus)&&(t=this.anchor,this._ranges.length&&this._popRange(),"before"==e.compareWith(t)?(this._pushRange(new O(e,t)),this._lastRangeBackward=!0):(this._pushRange(new O(t,e)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0}))}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){var e,t,i,r=new WeakSet;for(const a of this.getRanges()){var s=dl(a.start,r);o=s,i=a,o&&(i.isCollapsed||o.isEmpty||!i.start.isTouching(E._createAt(o,o.maxOffset))&&ul(o,i))&&(yield s);for(const l of a.getWalker()){var n=l.item;"elementEnd"==l.type&&(e=n,t=a,cl(e,r))&&ul(e,t)&&(yield n)}var o=dl(a.end,r);i=o,s=a,i&&(s.isCollapsed||i.isEmpty||!s.end.isTouching(E._createAt(i,0))&&ul(i,s))&&(yield o)}}containsEntireContent(e=this.anchor.root){var t=E._createAt(e,0),e=E._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&e.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new O(e.start,e.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new w("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;0<this._ranges.length;)this._popRange()}_popRange(){this._ranges.pop()}}function cl(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e))&&!!e.parent}function dl(e,t){const i=e.parent.root.document.model.schema,r=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});let s=!1;e=r.find(e=>!s&&!(s=i.isLimit(e))&&cl(e,t));return r.forEach(e=>t.add(e)),e}function ul(e,t){e=function(e){var t=e.root.document.model.schema;let i=e.parent;for(;i;){if(t.isBlock(i))return i;i=i.parent}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(e);return!e||!t.containsRange(O._createOn(e),!0)}hl.prototype.is=function(e){return"selection"===e||"model:selection"===e};class ml extends o(O){constructor(e,t){super(e,t),function(){this.listenTo(this.root.document.model,"applyOperation",(e,t)=>{t=t[0];t.isDocumentOperation&&function(e){var t=this.getTransformedByOperation(e),t=O._createFromRanges(t),i=!t.isEqual(this),r=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(this,e);let s=null;i?("$graveyard"==t.root.rootName&&(s="remove"==e.type?e.sourcePosition:e.deletionPosition),i=this.toRange(),this.start=t.start,this.end=t.end,this.fire("change:range",i,{deletionPosition:s})):r&&this.fire("change:content",this.toRange(),{deletionPosition:s})}.call(this,t)},{priority:"low"})}.call(this)}detach(){this.stopListening()}toRange(){return new O(this.start,this.end)}static fromRange(e){return new ml(e.start,e.end)}}ml.prototype.is=function(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e};const gl="selection:";class fl extends o(Ga){constructor(e){super(),this._selection=new pl(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return gl+e}static _isStoreAttributeKey(e){return e.startsWith(gl)}}fl.prototype.is=function(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e};class pl extends hl{constructor(e){super(),this.markers=new Zn({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(e,t)=>{t=t[0];t.isDocumentOperation&&"marker"!=t.type&&"rename"!=t.type&&"noop"!=t.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange)&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1}))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(e,t,i,r)=>{this._updateMarker(t,r)}),this.listenTo(this._document,"change",(e,t)=>{var i=this._model,r=t;for(const s of i.document.differ.getChanges())if("insert"==s.type){const n=s.position.parent;s.length===n.maxOffset&&i.enqueueChange(r,e=>{for(const t of Array.from(n.getAttributeKeys()).filter(e=>e.startsWith(gl)))e.removeAttribute(t,n)})}})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length||1}get hasOwnRange(){return 0<this._ranges.length}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){this._setAttribute(e,t)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}removeAttribute(e){this._removeAttribute(e)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}overrideGravity(){var e=q();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new w("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){e=this._prepareRange(e);e&&this._ranges.push(e)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new w("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root!=this._document.graveyard){const r=ml.fromRange(e);return r.on("change:range",(e,t,i)=>{this._hasChangedRange=!0,r.root==this._document.graveyard&&(this._selectionRestorePosition=i.deletionPosition,i=this._ranges.indexOf(r),this._ranges.splice(i,1),r.detach())}),r}}updateMarkers(){if(this._observedMarkers.size){var t=[];let e=!1;for(const n of this._model.markers){var i=n.name.split(":",1)[0];if(this._observedMarkers.has(i)){var r=n.getRange();for(const o of this.getRanges())r.containsRange(o,!o.isCollapsed)&&t.push(n)}}var s=Array.from(this.markers);for(const a of t)this.markers.has(a)||(this.markers.add(a),e=!0);for(const l of Array.from(this.markers))t.includes(l)||(this.markers.remove(l),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}}_updateMarker(i,r){var e=i.name.split(":",1)[0];if(this._observedMarkers.has(e)){let t=!1;var e=Array.from(this.markers),s=this.markers.has(i);if(r){let e=!1;for(const n of this.getRanges())if(r.containsRange(n,!n.isCollapsed)){e=!0;break}e&&!s?(this.markers.add(i),t=!0):!e&&s&&(this.markers.remove(i),t=!0)}else s&&(this.markers.remove(i),t=!0);t&&this.fire("change:marker",{oldMarkers:e,directChange:!1})}}_updateAttributes(e){var t=eo(this._getSurroundingAttributes()),i=eo(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(var[r,s]of this._attributePriority)"low"==s&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(t);var n,o,a,l=[];for([n,o]of this.getAttributes())i.has(n)&&i.get(n)===o||l.push(n);for([a]of i)this.hasAttribute(a)||l.push(a);0<l.length&&this.fire("change:attribute",{attributeKeys:l,directChange:!1})}_setAttribute(e,t,i=!0){i=i?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(e))&&super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,i),!0)}_removeAttribute(e,t=!0){t=t?"normal":"low";return!("low"==t&&"normal"==this._attributePriority.get(e)||(this._attributePriority.set(e,t),!super.hasAttribute(e))||(this._attrs.delete(e),0))}_setAttributesTo(e){var t,i,r,s,n=new Set;for([t,i]of this.getAttributes())e.get(t)!==i&&this._removeAttribute(t,!1);for([r,s]of e)this._setAttribute(r,s,!1)&&n.add(r);return n}*getStoredAttributes(){var e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(gl)&&(yield[t.substr(gl.length),e.getAttribute(t)])}_getSurroundingAttributes(){var t=this.getFirstPosition(),i=this._model.schema;let r=null;if(this.isCollapsed){var s=t.textNode||t.nodeBefore,t=t.textNode||t.nodeAfter;if(r=(r=this.isGravityOverridden?r:vl(s,i))||vl(t,i),!this.isGravityOverridden&&!r){let e=s;for(;e&&!r;)e=e.previousSibling,r=vl(e,i)}if(!r){let e=t;for(;e&&!r;)e=e.nextSibling,r=vl(e,i)}r=r||this.getStoredAttributes()}else for(const e of this.getFirstRange()){if(e.item.is("element")&&i.isObject(e.item))break;if("text"==e.type){r=e.item.getAttributes();break}}return r}_fixGraveyardSelection(e){e=this._model.schema.getNearestSelectionRange(e);e&&this._pushRange(e)}}function vl(e,t){if(!e)return null;if(e instanceof Za||e instanceof _)return e.getAttributes();if(!t.isInline(e))return null;if(!t.isObject(e))return[];var i,r,s=[];for([i,r]of e.getAttributes())t.checkAttribute("$text",i)&&s.push([i,r]);return s}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wl{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bl extends wl{elementToElement(e){return this.add(function(t){const i=El(t.model),r=Cl(t.view,"container");return i.attributes.length&&(i.children=!0),e=>{var n,o;e.on("insert:"+i.name,([n,o=function(e,t,{preflight:i}={}){return i?t.test(e,"insert"):t.consume(e,"insert")}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */]=[r,Ol(i)],(e,t,i)=>{var r,s;o(t.item,i.consumable,{preflight:!0})&&(r=n(t.item,i,t))&&(o(t.item,i.consumable),s=i.mapper.toViewPosition(t.range.start),i.mapper.bindElements(t.item,r),i.writer.insert(s,r),i.convertAttributes(t.item),Rl(r,t.item.getChildren(),i,{reconversion:t.reconversion}))}),{priority:t.converterPriority||"normal"}),(i.children||i.attributes.length)&&e.on("reduceChanges",Sl(i),{priority:"low"})}}(e))}elementToStructure(e){return this.add(function(t){const i=El(t.model),r=Cl(t.view,"container");return i.children=!0,e=>{if(e._conversionApi.schema.checkChild(i.name,"$text"))throw new w("conversion-element-to-structure-disallowed-text",e,{elementName:i.name});var p,v;e.on("insert:"+i.name,(p=r,v=Ol(i),(e,t,i)=>{if(v(t.item,i.consumable,{preflight:!0})){var r,s,n,o=new Map,a=(i.writer._registerSlotFactory((r=t.item,s=o,n=i,(e,t)=>{e=e.createContainerElement("$slot");let i=null;if("children"===t)i=Array.from(r.getChildren());else{if("function"!=typeof t)throw new w("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:t});i=Array.from(r.getChildren()).filter(e=>t(e))}return s.set(e,i),e})),p(t.item,i,t));if(i.writer._clearSlotFactory(),a){var l=t.item,h=o,c=i,h=Array.from(h.values()).flat(),d=new Set(h);if(d.size!=h.length)throw new w("conversion-slot-filter-overlap",c.dispatcher,{element:l});if(d.size!=l.childCount)throw new w("conversion-slot-filter-incomplete",c.dispatcher,{element:l});v(t.item,i.consumable);h=i.mapper.toViewPosition(t.range.start);i.mapper.bindElements(t.item,a),i.writer.insert(h,a),i.convertAttributes(t.item);{var u=a,d=o,m=i,g={reconversion:t.reconversion};m.mapper.on("modelToViewPosition",f,{priority:"highest"});let r=null,s=null;for([r,s]of d)Rl(u,s,m,g),m.writer.move(m.writer.createRangeIn(r),m.writer.createPositionBefore(r)),m.writer.remove(r);function f(e,t){var i=t.modelPosition.nodeAfter,i=s.indexOf(i);i<0||(t.viewPosition=t.mapper.findPositionIn(r,i))}m.mapper.off("modelToViewPosition",f)}}}}),{priority:t.converterPriority||"normal"}),e.on("reduceChanges",Sl(i),{priority:"low"})}}(e))}attributeToElement(e){return this.add(function(t){let e=(t=es(t)).model,i="attribute:"+(e="string"==typeof e?{key:e}:e).key;if(e.name&&(i+=":"+e.name),e.values)for(const s of e.values)t.view[s]=Cl(t.view[s],"attribute");else t.view=Cl(t.view,"attribute");const r=Pl(t);return e=>{var o;e.on(i,(o=r,(t,i,r)=>{if(r.consumable.test(i.item,t.name)){var s=o(i.attributeOldValue,r,i),n=o(i.attributeNewValue,r,i);if(s||n){r.consumable.consume(i.item,t.name);var t=r.writer,e=t.document.selection;if(i.item instanceof hl||i.item instanceof fl)t.wrap(e.getFirstRange(),n);else{let e=r.mapper.toViewRange(i.range);null!==i.attributeOldValue&&s&&(e=t.unwrap(e,s)),null!==i.attributeNewValue&&n&&t.wrap(e,n)}}}}),{priority:t.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(t){let e=(t=es(t)).model,i="attribute:"+(e="string"==typeof e?{key:e}:e).key;if(e.name&&(i+=":"+e.name),e.values)for(const s of e.values)t.view[s]=xl(t.view[s]);else t.view=xl(t.view);const r=Pl(t);return e=>{var d;e.on(i,(d=r,(e,t,i)=>{if(i.consumable.test(t.item,e.name)){var r=d(t.attributeOldValue,i,t),s=d(t.attributeNewValue,i,t);if(r||s){i.consumable.consume(t.item,e.name);var n=i.mapper.toViewElement(t.item),o=i.writer;if(!n)throw new w("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(null!==t.attributeOldValue&&r)if("class"==r.key)for(const a of u(r.value))o.removeClass(a,n);else if("style"==r.key)for(const l of Object.keys(r.value))o.removeStyle(l,n);else o.removeAttribute(r.key,n);if(null!==t.attributeNewValue&&s)if("class"==s.key)for(const h of u(s.value))o.addClass(h,n);else if("style"==s.key)for(const c of Object.keys(s.value))o.setStyle(c,s.value[c],n);else o.setAttribute(s.key,s.value,n)}}}),{priority:t.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(t){const i=Cl(t.view,"ui");return e=>{var h;e.on("addMarker:"+t.model,(h=i,(e,t,i)=>{t.isOpening=!0;var r=h(t,i),s=(t.isOpening=!1,h(t,i));if(r&&s){var n=t.markerRange;if(!n.isCollapsed||i.consumable.consume(n,e.name)){for(const l of n)if(!i.consumable.consume(l.item,e.name))return;var o=i.mapper,a=i.writer;a.insert(o.toViewPosition(n.start),r),i.mapper.bindElementToMarker(r,t.markerName),n.isCollapsed||(a.insert(o.toViewPosition(n.end),s),i.mapper.bindElementToMarker(s,t.markerName)),e.stop()}}}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(e,t,i)=>{var r=i.mapper.markerNameToElements(t.markerName);if(r){for(const s of r)i.mapper.unbindElementFromMarkerName(s,t.markerName),i.writer.clear(i.writer.createRangeOn(s),s);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}},{priority:t.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add((t=e,e=>{var a,o,l;e.on("addMarker:"+t.model,(l=t.view,(e,t,i)=>{if(t.item&&(t.item instanceof hl||t.item instanceof fl||t.item.is("$textProxy"))){var r=Tl(l,t,i);if(r&&i.consumable.consume(t.item,e.name)){var e=i.writer,s=kl(e,r),r=e.document.selection;if(t.item instanceof hl||t.item instanceof fl)e.wrap(r.getFirstRange(),s);else{r=i.mapper.toViewRange(t.range);for(const n of e.wrap(r,s).getItems())if(n.is("attributeElement")&&n.isSimilar(s)){i.mapper.bindElementToMarker(n,t.markerName);break}}}}}),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,(o=t.view,(e,t,i)=>{if(t.item&&t.item instanceof A){var r=Tl(o,t,i);if(r&&i.consumable.test(t.item,e.name)){var s=i.mapper.toViewElement(t.item);if(s&&s.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const n of O._createIn(t.item))i.consumable.consume(n.item,e.name);s.getCustomProperty("addHighlight")(s,r,i.writer),i.mapper.bindElementToMarker(s,t.markerName)}}}}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(a=t.view,(e,t,i)=>{if(!t.markerRange.isCollapsed){var r=Tl(a,t,i);if(r){var s=kl(i.writer,r),n=i.mapper.markerNameToElements(t.markerName);if(n){for(const o of n)i.mapper.unbindElementFromMarkerName(o,t.markerName),o.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(o),s):o.getCustomProperty("removeHighlight")(o,r.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}}),{priority:t.converterPriority||"normal"})}));var t}markerToData(e){return this.add(function(t){const i=(t=es(t)).model;let r=t.view;return r=r||(e=>({group:i,name:e.substr(t.model.length+1)})),e=>{var a,n;e.on("addMarker:"+i,(n=r,(e,t,i)=>{var r,s=n(t.markerName,i);s&&(r=t.markerRange,i.consumable.consume(r,e.name))&&(Al(r,!1,i,t,s),Al(r,!0,i,t,s),e.stop())}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+i,(a=r,(e,t,r)=>{const s=a(t.markerName,r);if(s){var i=r.mapper.markerNameToElements(t.markerName);if(i){for(const o of i)r.mapper.unbindElementFromMarkerName(o,t.markerName),o.is("containerElement")?(n(`data-${s.group}-start-before`,o),n(`data-${s.group}-start-after`,o),n(`data-${s.group}-end-before`,o),n(`data-${s.group}-end-after`,o)):r.writer.clear(r.writer.createRangeOn(o),o);r.writer.clearClonedElementsGroup(t.markerName),e.stop()}}function n(e,t){var i;t.hasAttribute(e)&&((i=new Set(t.getAttribute(e).split(","))).delete(s.name),0==i.size?r.writer.removeAttribute(e,t):r.writer.setAttribute(e,Array.from(i).join(","),t))}}),{priority:t.converterPriority||"normal"})}}(e))}}function _l(){return(e,t,i)=>{i.consumable.consume(t.item,e.name)&&(e=i.writer,i=i.mapper.toViewPosition(t.range.start),t=e.createText(t.item.data),e.insert(i,t))}}function yl(){return(e,t,i)=>{i.convertAttributes(t.item),t.reconversion||!t.item.is("element")||t.item.isEmpty||i.convertChildren(t.item)}}function kl(e,t){e=e.createAttributeElement("span",t.attributes);return t.classes&&e._addClass(t.classes),"number"==typeof t.priority&&(e._priority=t.priority),e._id=t.id,e}function Al(e,i,r,s,n){var e=i?e.start:e.end,o=e.nodeAfter&&e.nodeAfter.is("element")?e.nodeAfter:null,a=e.nodeBefore&&e.nodeBefore.is("element")?e.nodeBefore:null;if(o||a){let e,t;t=i&&o||!i&&!a?(e=o,!0):(e=a,!1);var l,o=r.mapper.toViewElement(e);if(o)return a=o,o=i,c=t,d=r,l=s,o=`data-${(h=n).group}-${o?"start":"end"}-`+(c?"before":"after"),(c=a.hasAttribute(o)?a.getAttribute(o).split(","):[]).unshift(h.name),d.writer.setAttribute(o,c.join(","),a),void d.mapper.bindElementToMarker(a,l.markerName)}var h=r.mapper.toViewPosition(e),o=i,c=r,d=s,a=n;o=a.group+"-"+(o?"start":"end"),a=a.name?{name:a.name}:null,o=c.writer.createUIElement(o,a),c.writer.insert(h,o),c.mapper.bindElementToMarker(o,d.markerName)}function El(e){return(e="string"==typeof e?{name:e}:e).attributes?Array.isArray(e.attributes)||(e.attributes=[e.attributes]):e.attributes=[],e.children=!!e.children,e}function Cl(a,l){return"function"==typeof a?a:(e,t)=>{{var i=a,r=l;"string"==typeof i&&(i={name:i});let e;var s=t.writer,t=Object.assign({},i.attributes);if(e="container"==r?s.createContainerElement(i.name,t):"attribute"==r?(r={priority:i.priority||Ho.DEFAULT_PRIORITY},s.createAttributeElement(i.name,t,r)):s.createUIElement(i.name,t),i.styles)for(const n of Object.keys(i.styles))s.setStyle(n,i.styles[n],e);if(i.classes){r=i.classes;if("string"==typeof r)s.addClass(r,e);else for(const o of r)s.addClass(o,e)}return e}}}function Pl(s){return s.model.values?(e,t,i)=>{var r=s.view[e];return r?r(e,t,i):null}:s.view}function xl(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function Tl(e,t,i){i="function"==typeof e?e(t,i):e;return i?(i.priority||(i.priority=10),i.id||(i.id=t.markerName),i):null}function Sl(e){i=e;const l=(e,t)=>{if(e.is("element",i.name))if("attribute"==t.type){if(i.attributes.includes(t.attributeKey))return!0}else/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(i.children)return!0;return!1};var i;return(e,i)=>{var r=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const t of i.changes){var s="attribute"==t.type?t.range.start.nodeAfter:t.position.parent;if(s&&l(s,t)){if(!i.reconvertedElements.has(s)){i.reconvertedElements.add(s);var n=E._createBefore(s);let t=r.length;for(let e=r.length-1;0<=e;e--){var o=r[e],a=("attribute"==o.type?o.range.start:o.position).compareWith(n);if("before"==a||"remove"==o.type&&"same"==a)break;t=e}r.splice(t,0,{type:"remove",name:s.name,position:n,length:1},{type:"reinsert",name:s.name,position:n,length:1})}}else r.push(t)}i.changes=r}}function Ol(n){return(t,i,e={})=>{var r=["insert"];for(const s of n.attributes)t.hasAttribute(s)&&r.push("attribute:"+s);return!!r.every(e=>i.test(t,e))&&(e.preflight||r.forEach(e=>i.consume(t,e)),!0)}}function Rl(e,t,i,r){for(const s of t)!function(e,t,i,r){var{writer:s,mapper:n}=i;if(!r.reconversion)return;r=n.toViewElement(t);return r&&r.root!=e&&i.canReuseView(r)&&(s.move(s.createRangeOn(r),n.toViewPosition(E._createBefore(t))),1)}(e.root,s,i,r)&&i.convertItem(s)}function Il(e){var{schema:t,document:i}=e.model;for(const s of i.getRootNames()){var r=i.getRoot(s);if(r.isEmpty&&!t.checkChild(r,"$text")&&t.checkChild(r,"paragraph"))return e.insertElement("paragraph",r),!0}return!1}function Vl(e,t,i){e=i.createContext(e);return i.checkChild(e,"paragraph")&&i.checkChild(e.push("paragraph"),t)}function Ml(e,t){var i=t.createElement("paragraph");return t.insert(i,e),t.createPositionAt(i,0)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nl extends wl{elementToElement(e){return this.add(Dl(e))}elementToAttribute(e){return this.add(function(t){zl(t=es(t));const i=jl(t,!1),e=Fl(t.view),r=e?"element:"+e:"element";return e=>{e.on(r,i,{priority:t.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=es(t);let e=null;"string"!=typeof t.view&&!t.view.key||(e=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t=e.view.key;let i;{var r;i="class"==t||"style"==t?{["class"==t?"classes":"styles"]:e.view.value}:(r="u"<typeof e.view.value?/[\s\S]*/:e.view.value,{attributes:{[t]:r}})}return e.view.name&&(i.name=e.view.name),e.view=i,t}(t)),zl(t,e);const i=jl(t,!0);return e=>{e.on("element",i,{priority:t.converterPriority||"low"})}}(e))}elementToMarker(e){return this.add((t=function(i){return(e,t)=>{e="string"==typeof i?i:i(e,t);return t.writer.createElement("$marker",{"data-name":e})}}(e.model),Dl({...e,model:t})));var t}dataToMarker(e){return this.add(function(r){(r=es(r)).model||(r.model=e=>e?r.view+":"+e:r.view);const s={view:r.view,model:r.model},n=Ll(Hl(s,"start")),a=Ll(Hl(s,"end"));return e=>{e.on(`element:${r.view}-start`,n,{priority:r.converterPriority||"normal"}),e.on(`element:${r.view}-end`,a,{priority:r.converterPriority||"normal"});var o,t=U.low,i=U.highest,i=U.get(r.converterPriority)/i;e.on("element",(o=s,(e,s,n)=>{var t="data-"+o.view;function i(e,t){for(const r of t){var i=o.model(r,n),i=n.writer.createElement("$marker",{"data-name":i});n.writer.insert(i,e),s.modelCursor.isEqual(e)?s.modelCursor=s.modelCursor.getShiftedBy(1):s.modelCursor=s.modelCursor._getTransformedByInsertion(e,1),s.modelRange=s.modelRange._getTransformedByInsertion(e,1)[0]}}(n.consumable.test(s.viewItem,{attributes:t+"-end-after"})||n.consumable.test(s.viewItem,{attributes:t+"-start-after"})||n.consumable.test(s.viewItem,{attributes:t+"-end-before"})||n.consumable.test(s.viewItem,{attributes:t+"-start-before"}))&&(s.modelRange||Object.assign(s,n.convertChildren(s.viewItem,s.modelCursor)),n.consumable.consume(s.viewItem,{attributes:t+"-end-after"})&&i(s.modelRange.end,s.viewItem.getAttribute(t+"-end-after").split(",")),n.consumable.consume(s.viewItem,{attributes:t+"-start-after"})&&i(s.modelRange.end,s.viewItem.getAttribute(t+"-start-after").split(",")),n.consumable.consume(s.viewItem,{attributes:t+"-end-before"})&&i(s.modelRange.start,s.viewItem.getAttribute(t+"-end-before").split(",")),n.consumable.consume(s.viewItem,{attributes:t+"-start-before"}))&&i(s.modelRange.start,s.viewItem.getAttribute(t+"-start-before").split(","))}),{priority:t+i})}}(e))}}function Bl(){return(e,t,i)=>{var r;!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})&&({modelRange:i,modelCursor:r}=i.convertChildren(t.viewItem,t.modelCursor),t.modelRange=i,t.modelCursor=r)}}function Dl(t){const i=Ll(t=es(t)),e=Fl(t.view),r=e?"element:"+e:"element";return e=>{e.on(r,i,{priority:t.converterPriority||"normal"})}}function Fl(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function Ll(a){const l=new po(a.view);return(e,t,i)=>{var r,s,n,o=l.match(t.viewItem);o&&((o=o.match).name=!0,i.consumable.test(t.viewItem,o))&&(r=a.model,s=t.viewItem,n=i,s=r instanceof Function?r(s,n):n.writer.createElement(r))&&i.safeInsert(s,t.modelCursor)&&(i.consumable.consume(t.viewItem,o),i.convertChildren(t.viewItem,s),i.updateConversionResult(s,t))}}function zl(e,t=null){var i="object"!=typeof e.model?e.model:e.model.key,r="object"!=typeof e.model||"u"<typeof e.model.value?null===t||(e=>e.getAttribute(t)):e.model.value;e.model={key:i,value:r}}function jl(o,a){const l=new po(o.view);return(e,t,i)=>{var r,s,n;!t.modelRange&&a||(r=l.match(t.viewItem))&&(function(e,t){t="function"==typeof e?e(t):e;return!("object"==typeof t&&!Fl(t)||t.classes||t.attributes||t.styles)}(o.view,t.viewItem)?r.match.name=!0:delete r.match.name,i.consumable.test(t.viewItem,r.match))&&(s=o.model.key,null!==(n="function"==typeof o.model.value?o.model.value(t.viewItem,i):o.model.value)&&(t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),function(e,t,i,r){let s=!1;for(const n of Array.from(e.getItems({shallow:i})))r.schema.checkAttribute(n,t.key)&&(s=!0,!n.hasAttribute(t.key))&&r.writer.setAttribute(t.key,t.value,n);return s}(t.modelRange,{key:s,value:n},a,i))&&(i.consumable.test(t.viewItem,{name:!0})&&(r.match.name=!0),i.consumable.consume(t.viewItem,r.match)))}}function Hl(i,e){return{view:i.view+"-"+e,model:(e,t)=>{e=e.getAttribute("name"),e=i.model(e,t);return t.writer.createElement("$marker",{"data-name":e})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wl(l){l.document.registerPostFixer(t=>{{var i=l,r=i.document.selection,s=i.schema,n=[];let e=!1;for(const a of r.getRanges()){var o=$l(a,s);o&&!o.isEqual(a)?(n.push(o),e=!0):n.push(a)}return e&&t.setSelection(function(e){const t=[...e],i=new Set;let r=1;for(;r<t.length;){var s,n,o,a=t[r];for([s,n]of t.slice(0,r).entries())i.has(s)||(a.isEqual(n)?i.add(s):a.isIntersecting(n)&&(i.add(s),i.add(r),o=a.getJoined(n),t.push(o)));r++}return t.filter((e,t)=>!i.has(t))}(n),{backward:r.isBackward}),!1}})}function $l(e,t){return(e.isCollapsed?function(e,t){var e=e.start,i=t.getNearestSelectionRange(e);if(!i)return(r=e.getAncestors().reverse().find(e=>t.isObject(e)))?O._createOn(r):null;if(!i.isCollapsed)return i;var r=i.start;return e.isEqual(r)?null:new O(r)}:function(i,r){var{start:i,end:s}=i,n=r.checkChild(i,"$text"),o=r.checkChild(s,"$text"),a=r.getLimitElement(i),l=r.getLimitElement(s);if(a===l){if(n&&o)return null;if(function(e,t,i){e=e.nodeAfter&&!i.isLimit(e.nodeAfter)||i.checkChild(e,"$text"),i=t.nodeBefore&&!i.isLimit(t.nodeBefore)||i.checkChild(t,"$text");return e||i}(i,s,r))return n=i.nodeAfter&&r.isSelectable(i.nodeAfter)?null:r.getNearestSelectionRange(i,"forward"),o=s.nodeBefore&&r.isSelectable(s.nodeBefore)?null:r.getNearestSelectionRange(s,"backward"),n=n?n.start:i,o=o?o.end:s,new O(n,o)}n=a&&!a.is("rootElement"),o=l&&!l.is("rootElement");if(n||o){var h=i.nodeAfter&&s.nodeBefore&&i.nodeAfter.parent===s.nodeBefore.parent,n=n&&(!h||!Ul(i.nodeAfter,r)),o=o&&(!h||!Ul(s.nodeBefore,r));let e=i,t=s;return n&&(e=E._createBefore(ql(a,r))),o&&(t=E._createAfter(ql(l,r))),new O(e,t)}return null})(e,t)}function ql(e,t){let i=e,r=i;for(;t.isLimit(r)&&r.parent;)r=(i=r).parent;return i}function Ul(e,t){return e&&t.isSelectable(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gl extends s(){constructor(e,t){super(),this.model=e,this.view=new Ua(t),this.mapper=new sl,this.downcastDispatcher=new al({mapper:this.mapper,schema:e.schema});const i=this.model.document,r=i.selection,s=this.model.markers;var n,o,a,l,h;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(e=>{this.downcastDispatcher.convertChanges(i.differ,s,e),this.downcastDispatcher.convertSelection(r,s,e)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",(l=this.model,h=this.mapper,(e,t)=>{var t=t.newSelection,i=[];for(const s of t.getRanges())i.push(h.toModelRange(s));const r=l.createSelection(i,{backward:t.isBackward});r.isEqual(l.document.selection)||l.change(e=>{e.setSelection(r)})})),this.listenTo(this.view.document,"beforeinput",(n=this.mapper,o=this.model.schema,a=this.view,(e,t)=>{if(!a.document.isComposing||m.isAndroid)for(let e=0;e<t.targetRanges.length;e++){var i=t.targetRanges[e],i=n.toModelRange(i),r=$l(i,o);r&&!r.isEqual(i)&&(t.targetRanges[e]=n.toViewRange(r))}}),{priority:"high"}),this.downcastDispatcher.on("insert:$text",_l(),{priority:"lowest"}),this.downcastDispatcher.on("insert",yl(),{priority:"lowest"}),this.downcastDispatcher.on("remove",(e,t,i)=>{var r=i.mapper.toViewPosition(t.position),t=t.position.getShiftedBy(t.length),t=i.mapper.toViewPosition(t,{isPhantom:!0}),r=i.writer.createRange(r,t),t=i.writer.remove(r.getTrimmed());for(const s of i.writer.createRangeIn(t).getItems())i.mapper.unbindViewElement(s,{defer:!0})},{priority:"low"}),this.downcastDispatcher.on("selection",(e,t,i)=>{var r=i.writer;for(const s of r.document.selection.getRanges())s.isCollapsed&&s.end.parent.isAttached()&&i.writer.mergeAttributes(s.start);r.setSelection(null)},{priority:"high"}),this.downcastDispatcher.on("selection",(e,t,i)=>{t=t.selection;if(!t.isCollapsed&&i.consumable.consume(t,"selection")){var r=[];for(const s of t.getRanges())r.push(i.mapper.toViewRange(s));i.writer.setSelection(r,{backward:t.isBackward})}},{priority:"low"}),this.downcastDispatcher.on("selection",(e,t,i)=>{var r,t=t.selection;t.isCollapsed&&i.consumable.consume(t,"selection")&&(r=i.writer,t=t.getFirstPosition(),i=i.mapper.toViewPosition(t),t=r.breakAttributes(i),r.setSelection(t))},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(e=>{var t;return"$graveyard"==e.rootName?null:((t=new So(this.view.document,e.name)).rootName=e.rootName,this.mapper.bindElements(e,t),t)})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t="string"==typeof e?e:e.name,i=this.model.markers.get(t);if(!i)throw new w("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}class Kl{constructor(){this._consumables=new Map}add(e,t){let i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new Zl(e),this._consumables.set(e,i)),i.add(t))}test(e,t){var i=this._consumables.get(e);return void 0===i?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){var i=this._consumables.get(e);void 0!==i&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){var t={element:e,name:!0,attributes:[],classes:[],styles:[]};for(const i of e.getAttributeKeys())"style"!=i&&"class"!=i&&t.attributes.push(i);for(const r of e.getClassNames())t.classes.push(r);for(const s of e.getStyleNames())t.styles.push(s);return t}static createFrom(e,t){if(t=t||new Kl,e.is("$text"))t.add(e);else{e.is("element")&&t.add(e,Kl.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=Kl.createFrom(i,t)}return t}}const Jl=["attributes","classes","styles"];class Zl{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of Jl)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const i of Jl)if(i in e){var t=this._test(i,e[i]);if(!0!==t)return t}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of Jl)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of Jl)t in e&&this._revert(t,e[t])}_add(e,t){var t=ye(t)?t:[t],i=this._consumables[e];for(const r of t){if("attributes"===e&&("class"===r||"style"===r))throw new w("viewconsumable-invalid-attribute",this);if(i.set(r,!0),"styles"===e)for(const s of this.element.document.stylesProcessor.getRelatedStyles(r))i.set(s,!0)}}_test(e,t){var t=ye(t)?t:[t],i=this._consumables[e];for(const n of t)if("attributes"!==e||"class"!==n&&"style"!==n){var r=i.get(n);if(void 0===r)return null;if(!r)return!1}else{var r="class"==n?"classes":"styles",s=this._test(r,[...this._consumables[r].keys()]);if(!0!==s)return s}return!0}_consume(e,t){var t=ye(t)?t:[t],i=this._consumables[e];for(const s of t)if("attributes"!==e||"class"!==s&&"style"!==s){if(i.set(s,!1),"styles"==e)for(const n of this.element.document.stylesProcessor.getRelatedStyles(s))i.set(n,!1)}else{var r="class"==s?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}}_revert(e,t){var i,t=ye(t)?t:[t],r=this._consumables[e];for(const s of t)"attributes"!==e||"class"!==s&&"style"!==s?!1===r.get(s)&&r.set(s,!0):(i="class"==s?"classes":"styles",this._revert(i,[...this._consumables[i].keys()]))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yl extends s(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new Xl(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new Xl(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new w("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new w("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t="string"==typeof e?e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){e=this.getDefinition(e);return!(!e||!e.isBlock)}isLimit(e){e=this.getDefinition(e);return!(!e||!e.isLimit&&!e.isObject)}isObject(e){e=this.getDefinition(e);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(e){e=this.getDefinition(e);return!(!e||!e.isInline)}isSelectable(e){e=this.getDefinition(e);return!(!e||!e.isSelectable&&!e.isObject)}isContent(e){e=this.getDefinition(e);return!(!e||!e.isContent&&!e.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){e=this.getDefinition(e.last);return!!e&&e.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof E){var i=e.nodeBefore,r=e.nodeAfter;if(!(i instanceof A))throw new w("schema-check-merge-no-element-before",this);if(r instanceof A)return this.checkMerge(i,r);throw new w("schema-check-merge-no-element-after",this)}for(const s of t.getChildren())if(!this.checkChild(e,s))return!1;return!0}addChildCheck(r){this.on("checkChild",(e,[t,i])=>{i&&"boolean"==typeof(t=r(t,i))&&(e.stop(),e.return=t)},{priority:"high"})}addAttributeCheck(r){this.on("checkAttribute",(e,[t,i])=>{t=r(t,i);"boolean"==typeof t&&(e.stop(),e.return=t)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(t=e instanceof E?e.parent:(e instanceof O?[e]:Array.from(e.getRanges())).reduce((e,t)=>{t=t.getCommonAncestor();return e?e.getCommonAncestor(t,{includeSelf:!0}):t},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){var i;if(e.isCollapsed)return i=[...e.getFirstPosition().getAncestors(),new _("",e.getAttributes())],this.checkAttribute(i,t);for(const r of e.getRanges())for(const s of r)if(this.checkAttribute(s.item,t))return!0;return!1}*getValidRanges(e,t){for(const i of e=function*(e){for(const t of e)yield*t.getMinimalFlatRanges()}(e))yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new O(e);let i,r;var s=e.getAncestors().reverse().find(e=>this.isLimit(e))||e.root;"both"!=t&&"backward"!=t||(i=new Ya({boundaries:O._createIn(s),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(r=new Ya({boundaries:O._createIn(s),startPosition:e}));for(const a of function*(e,t){let i=!1;for(;!i;){var r;i=!0,!e||(r=e.next()).done||(i=!1,yield{walker:e,value:r.value}),!t||(r=t.next()).done||(i=!1,yield{walker:t,value:r.value})}}(i,r)){var n=a.walker==i?"elementEnd":"elementStart",o=a.value;if(o.type==n&&this.isObject(o.item))return O._createOn(o.item);if(this.checkChild(o.nextPosition,"$text"))return new O(o.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){var r,s,n=i.model;for([r,s]of Object.entries(t))n.schema.checkAttribute(e,r)&&i.setAttribute(r,s,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))th(this,i,t);else for(const r of O._createIn(i).getPositions())th(this,r.nodeBefore||r.parent,t)}getAttributesWithProperty(e,t,i){var r,s,n={};for([r,s]of e.getAttributes()){var o=this.getAttributeProperties(r);void 0===o[t]||void 0!==i&&i!==o[t]||(n[r]=s)}return n}createContext(e){return new Xl(e)}_clearCache(){this._compiledDefinitions=null}_compile(){var e={},t=this._sourceDefinitions,i=Object.keys(t);for(const y of i)e[y]=function(e,t){t={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(e,t){for(const i of e)for(const r of Object.keys(i).filter(e=>e.startsWith("is")))t[r]=!!i[r]}(e,t),Ql(e,t,"allowIn"),Ql(e,t,"allowContentOf"),Ql(e,t,"allowWhere"),Ql(e,t,"allowAttributes"),Ql(e,t,"allowAttributesOf"),Ql(e,t,"allowChildren"),Ql(e,t,"inheritTypesFrom"),function(e,t){for(const r of e){var i=r.inheritAllFrom;i&&(t.allowContentOf.push(i),t.allowWhere.push(i),t.allowAttributesOf.push(i),t.inheritTypesFrom.push(i))}}(e,t),t}(t[y],y);for(const k of i){r=void 0;s=void 0;n=void 0;o=void 0;var r=e;var s=k;var n=r[s];for(const A of n.allowChildren){var o=r[A];o&&o.allowIn.push(s)}n.allowChildren.length=0}for(const E of i)!function(e,t){for(const i of e[t].allowContentOf)e[i]&&function(e,t){const i=e[t];return function(t){return Object.keys(t).map(e=>t[e])}(e).filter(e=>e.allowIn.includes(i.name))}(e,i).forEach(e=>{e.allowIn.push(t)});delete e[t].allowContentOf}(e,E);for(const C of i){a=void 0;l=void 0;h=void 0;var a=e;var l=C;for(const P of a[l].allowWhere){var h=a[P];h&&(h=h.allowIn,a[l].allowIn.push(...h))}delete a[l].allowWhere}for(const x of i){{c=void 0;d=void 0;u=void 0;var c=e;var d=x;for(const T of c[d].allowAttributesOf){var u=c[T];u&&(u=u.allowAttributes,c[d].allowAttributes.push(...u))}delete c[d].allowAttributesOf}{m=void 0;g=void 0;f=void 0;p=void 0;var m=e;var g=x;var f=m[g];for(const S of f.inheritTypesFrom){var p=m[S];if(p)for(const O of Object.keys(p).filter(e=>e.startsWith("is")))O in f||(f[O]=p[O])}delete f.inheritTypesFrom}}for(const R of i){(function(t,e){var e=t[e],i=e.allowIn.filter(e=>t[e]);e.allowIn=Array.from(new Set(i))})(e,R);{v=void 0;w=void 0;b=void 0;var v=e;var w=R;var b=v[w];for(const I of b.allowIn)v[I].allowChildren.push(w)}{b=void 0;_=void 0;b=e;var _=R;b=b[_];b.allowAttributes=Array.from(new Set(b.allowAttributes))}}this._compiledDefinitions=e}_checkContextMatch(e,t,i=t.length-1){var r=t.getItem(i);return!!e.allowIn.includes(r.name)&&(0==i||(e=this.getDefinition(r),this._checkContextMatch(e,t,i-1)))}*_getValidRangesForRange(e,t){let i=e.start,r=e.start;for(const s of e.getItems({shallow:!0}))s.is("element")&&(yield*this._getValidRangesForRange(O._createIn(s),t)),this.checkAttribute(s,t)||(i.isEqual(r)||(yield new O(i,r)),i=E._createAfter(s)),r=E._createAfter(s);i.isEqual(r)||(yield new O(i,r))}}class Xl{constructor(e){if(e instanceof Xl)return e;let t;t="string"==typeof e?[e]:Array.isArray(e)?e:e.getAncestors({includeSelf:!0}),this._items=t.map(eh)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){e=new Xl([e]);return e._items=[...this._items,...e._items],e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Ql(e,t,i){for(const s of e){var r=s[i];"string"==typeof r?t[i].push(r):Array.isArray(r)&&t[i].push(...r)}}function eh(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute(e){return t.getAttribute(e)}}}function th(e,t,i){for(const r of t.getAttributeKeys())e.checkAttribute(t,r)||i.removeAttribute(r,t)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ih extends o(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(e,t)=>this._convertItem(e,t),convertChildren:(e,t)=>this._convertChildren(e,t),safeInsert:(e,t)=>this._safeInsert(e,t),updateConversionResult:(e,t)=>this._updateConversionResult(e,t),splitToAllowedParent:(e,t)=>this._splitToAllowedParent(e,t),getSplitParts:e=>this._getSplitParts(e),keepEmptyElement:e=>this._keepEmptyElement(e)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(e,t){let i;for(const n of new Xl(e)){var r={};for(const o of n.getAttributeKeys())r[o]=n.getAttribute(o);var s=t.createElement(n.name,r);i&&t.insert(s,i),i=E._createAt(s,0)}return i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=Kl.createFrom(e),this.conversionApi.store={};var i=this._convertItem(e,this._modelCursor)["modelRange"],r=t.createDocumentFragment();if(i){this._removeEmptyElements();for(const s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,r);r.markers=function(e,t){var i=new Set,r=new Map,e=O._createIn(e).getItems();for(const o of e)o.is("element","$marker")&&i.add(o);for(const a of i){var s=a.getAttribute("data-name"),n=t.createPositionBefore(a);r.has(s)?r.get(s).end=n.clone():r.set(s,new O(n.clone())),t.remove(a)}return r}(r,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(e,t){t={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire("element:"+e.name,t,this.conversionApi):e.is("$text")?this.fire("text",t,this.conversionApi):this.fire("documentFragment",t,this.conversionApi),!t.modelRange||t.modelRange instanceof O)return{modelRange:t.modelRange,modelCursor:t.modelCursor};throw new w("view-conversion-dispatcher-incorrect-result",this)}_convertChildren(e,t){let i=t.is("position")?t:E._createAt(t,0);var r=new O(i);for(const n of Array.from(e.getChildren())){var s=this._convertItem(n,i);s.modelRange instanceof O&&(r.end=s.modelRange.end,i=s.modelCursor)}return{modelRange:r,modelCursor:i}}_safeInsert(e,t){t=this._splitToAllowedParent(e,t);return!!t&&(this.conversionApi.writer.insert(e,t.position),!0)}_updateConversionResult(e,t){var i=this._getSplitParts(e),r=this.conversionApi.writer,i=(t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(i[i.length-1]))),this._cursorParents.get(e));t.modelCursor=i?r.createPositionAt(i,0):t.modelRange.end}_splitToAllowedParent(e,t){var{schema:i,writer:r}=this.conversionApi;let s=i.findAllowedParent(t,e);if(s){if(s===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(s)&&(s=null)}if(!s)return Vl(t,e,i)?{position:Ml(t,r)}:null;var n,o,i=this.conversionApi.writer.split(t,s),a=[];for(const l of i.range.getWalker())"elementEnd"==l.type?a.push(l.item):(n=a.pop(),o=l.item,this._registerSplitPair(n,o));r=i.range.end.parent;return this._cursorParents.set(e,r),{position:i.position,cursorParent:r}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);e=this._splitParts.get(e);this._splitParts.set(t,e),e.push(t)}_getSplitParts(e){let t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e]}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}class rh{getHtml(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sh{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new xa(e,{renderingMode:"data"}),this.htmlWriter=new rh}toData(e){e=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(e)}toView(e){e=this._toDom(e);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);for(var e=this.domParser.parseFromString(e,"text/html"),t=e.createDocumentFragment(),i=e.body.childNodes;0<i.length;)t.appendChild(i[0]);return t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nh extends o(){constructor(e,t){super(),this.model=e,this.mapper=new sl,this.downcastDispatcher=new al({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",_l(),{priority:"lowest"}),this.downcastDispatcher.on("insert",yl(),{priority:"lowest"}),this.upcastDispatcher=new ih({schema:e.schema}),this.viewDocument=new jo(t),this.stylesProcessor=t,this.htmlProcessor=new sh(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Qo(this.viewDocument),this.upcastDispatcher.on("text",(e,t,{schema:i,consumable:r,writer:s})=>{let n=t.modelCursor;if(r.test(t.viewItem)){if(!i.checkChild(n,"$text")){if(!Vl(n,"$text",i)||0==t.viewItem.data.trim().length)return;i=n.nodeBefore;n=Ml(n,s),i&&i.is("element","$marker")&&(s.move(s.createRangeOn(i),n),n=s.createPositionAfter(i))}r.consume(t.viewItem);i=s.createText(t.viewItem.data);s.insert(i,n),t.modelRange=s.createRange(n,n.getShiftedBy(i.offsetSize)),t.modelCursor=t.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",Bl(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",Bl(),{priority:"lowest"}),s().prototype.decorate.call(this,"init"),s().prototype.decorate.call(this,"set"),s().prototype.decorate.call(this,"get"),s().prototype.decorate.call(this,"toView"),s().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},Il)},{priority:"lowest"})}get(e={}){var{rootName:t="main",trim:i="empty"}=e;if(this._checkIfRootsExists([t]))return(t=this.model.document.getRoot(t)).isAttached()||c("datacontroller-get-detached-root",this),"empty"!==i||this.model.hasContent(t,{ignoreWhitespaces:!0})?this.stringify(t,e):"";throw new w("datacontroller-get-non-existent-root",this)}stringify(e,t={}){e=this.toView(e,t);return this.processor.toData(e)}toView(e,t={}){var i=this.viewDocument,r=this._viewWriter,s=(this.mapper.clearBindings(),O._createIn(e)),i=new Xo(i),e=(this.mapper.bindElements(e,i),e.is("documentFragment")?e.markers:function(e){var t=[],i=e.root.document;if(!i)return new Map;var r=O._createIn(e);for(const a of i.model.markers){var s=a.getRange(),n=s.isCollapsed,o=s.start.isEqual(r.start)||s.end.isEqual(r.end);n&&o?t.push([a.name,s]):(n=r.getIntersection(s))&&t.push([a.name,n])}return t.sort(([e,t],[i,r])=>{if("after"!==t.end.compareWith(r.start))return 1;if("before"!==t.start.compareWith(r.end))return-1;switch(t.start.compareWith(r.start)){case"before":return 1;case"after":return-1;default:switch(t.end.compareWith(r.end)){case"before":return 1;case"after":return-1;default:return i.localeCompare(e)}}}),new Map(t)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(e));return this.downcastDispatcher.convert(s,e,r,t),i}init(e){if(this.model.document.version)throw new w("datacontroller-init-document-not-empty",this);let r={};if("string"==typeof e?r.main=e:r=e,this._checkIfRootsExists(Object.keys(r)))return this.model.enqueueChange({isUndoable:!1},e=>{for(const i of Object.keys(r)){var t=this.model.document.getRoot(i);e.insert(this.parse(r[i],t),t,0)}}),Promise.resolve();throw new w("datacontroller-init-non-existent-root",this)}set(e,t={}){let r={};if("string"==typeof e?r.main=e:r=e,!this._checkIfRootsExists(Object.keys(r)))throw new w("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},e=>{e.setSelection(null),e.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const i of Object.keys(r)){var t=this.model.document.getRoot(i);e.remove(e.createRangeIn(t)),e.insert(this.parse(r[i],t),t,0)}})}parse(e,t="$root"){e=this.processor.toView(e);return this.toModel(e,t)}toModel(t,i="$root"){return this.model.change(e=>this.upcastDispatcher.convert(t,e,i))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}class oh{constructor(e,t){this._helpers=new Map,this._downcast=u(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=u(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){var i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new w("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(this._helpers.has(e))return this._helpers.get(e);throw new w("conversion-for-unknown-group",this)}elementToElement(e){this.for("downcast").elementToElement(e);for(var{model:t,view:i}of ah(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(var{model:t,view:i}of ah(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(var{model:t,view:i}of ah(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new w("conversion-group-exists",this);i=new(i?bl:Nl)(t);this._helpers.set(e,i)}}function*ah(e){if(e.model.values)for(const t of e.model.values)yield*lh({key:e.model.key,value:t},e.view[t],e.upcastAlso?e.upcastAlso[t]:void 0);else yield*lh(e.model,e.view,e.upcastAlso)}function*lh(e,t,i){if(yield{model:e,view:t},i)for(const r of u(i))yield{model:e,view:r}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hh{constructor(e){this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){var e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ch(e,t){var t=mh(t),i=t.reduce((e,t)=>e+t.offsetSize,0),r=e.parent,s=(fh(e),e.index);return r._insertChild(s,t),gh(r,s+t.length),gh(r,s),new O(e,e.getShiftedBy(i))}function dh(e){var t,i;if(e.isFlat)return t=e.start.parent,fh(e.start),fh(e.end),i=t._removeChildren(e.start.index,e.end.index-e.start.index),gh(t,e.start.index),i;throw new w("operation-utils-remove-range-not-flat",this)}function uh(e,t){if(!e.isFlat)throw new w("operation-utils-move-range-not-flat",this);var i=dh(e);ch(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),i)}function mh(e){const r=[];!function e(t){if("string"==typeof t)r.push(new _(t));else if(t instanceof Za)r.push(new _(t.data,t.getAttributes()));else if(t instanceof Ka)r.push(t);else if(en(t))for(const i of t)e(i)}(e);for(let e=1;e<r.length;e++){var t=r[e],i=r[e-1];t instanceof _&&i instanceof _&&ph(t,i)&&(r.splice(e-1,2,new _(i.data+t.data,i.getAttributes())),e--)}return r}function gh(e,t){var i=e.getChild(t-1),r=e.getChild(t);i&&r&&i.is("$text")&&r.is("$text")&&ph(i,r)&&(r=new _(i.data+r.data,i.getAttributes()),e._removeChildren(t-1,2),e._insertChild(t-1,r))}function fh(e){var t,i,r=e.textNode,s=e.parent;r&&(e=e.offset-r.startOffset,t=r.index,s._removeChildren(t,1),i=new _(r.data.substr(0,e),r.getAttributes()),e=new _(r.data.substr(e),r.getAttributes()),s._insertChild(t,[i,e]))}function ph(e,t){var e=e.getAttributes(),i=t.getAttributes();for(const r of e){if(r[1]!==t.getAttribute(r[0]))return;i.next()}return i.next().done}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C extends hh{constructor(e,t,i,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[O._createFromPositionAndShift(this.sourcePosition,this.howMany),O._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new C(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new C(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new w("move-operation-nodes-do-not-exist",this);if(e===t&&i<r&&r<i+this.howMany)throw new w("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Qs(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){e=this.sourcePosition.path.length-1;if(this.targetPosition.path[e]>=i&&this.targetPosition.path[e]<i+this.howMany)throw new w("move-operation-node-into-itself",this)}}_execute(){uh(O._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){var e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){var i=E.fromJSON(e.sourcePosition,t),t=E.fromJSON(e.targetPosition,t);return new this(i,e.howMany,t,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vh extends hh{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Ja(mh(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){var e=new Ja([...this.nodes].map(e=>e._clone(!0))),e=new vh(this.position,e,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){var e=this.position.root.document.graveyard,e=new E(e,[0]);return new C(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new w("insert-operation-position-invalid",this)}_execute(){var e=this.nodes;this.nodes=new Ja([...e].map(e=>e._clone(!0))),ch(this.position,e)}toJSON(){var e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){var i=[];for(const r of e.nodes)r.name?i.push(A.fromJSON(r)):i.push(_.fromJSON(r));t=new vh(E.fromJSON(e.position,t),i,e.baseVersion);return t.shouldReceiveAttributes=e.shouldReceiveAttributes,t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P extends hh{constructor(e,t,i,r,s){super(s),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){var e=this.insertionPosition.path.slice();return e.push(0),new E(this.insertionPosition.root,e)}get movedRange(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new O(this.splitPosition,e)}get affectedSelectable(){var e=[O._createFromPositionAndShift(this.splitPosition,0),O._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(O._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new P(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){var e=this.splitPosition.root.document.graveyard,e=new E(e,[0]);return new x(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){var e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new w("split-operation-position-invalid",this);if(!e.parent)throw new w("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new w("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new w("split-operation-graveyard-position-invalid",this)}_execute(){var e=this.splitPosition.parent,t=(this.graveyardPosition?uh(O._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition):(t=e._clone(),ch(this.insertionPosition,t)),new O(E._createAt(e,this.splitPosition.offset),E._createAt(e,e.maxOffset)));uh(t,this.moveTargetPosition)}toJSON(){var e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){var t=e.path.slice(0,-1);return t[t.length-1]++,new E(e.root,t,"toPrevious")}static fromJSON(e,t){var i=E.fromJSON(e.splitPosition,t),r=E.fromJSON(e.insertionPosition,t),t=e.graveyardPosition?E.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,r,t,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x extends hh{constructor(e,t,i,r,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new E(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new O(this.sourcePosition,e)}get affectedSelectable(){var e=this.sourcePosition.parent;return[O._createOn(e),O._createFromPositionAndShift(this.targetPosition,0),O._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new x(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),t=new E(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new P(e,this.howMany,t,this.graveyardPosition,this.baseVersion+1)}_validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new w("merge-operation-source-position-invalid",this);if(!t.parent)throw new w("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new w("merge-operation-how-many-invalid",this)}_execute(){var e=this.sourcePosition.parent;uh(O._createIn(e),this.targetPosition),uh(O._createOn(e),this.graveyardPosition)}toJSON(){var e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){var i=E.fromJSON(e.sourcePosition,t),r=E.fromJSON(e.targetPosition,t),t=E.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,r,t,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wh extends hh{constructor(e,t,i,r,s,n){super(n),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=s,this._markers=r}get type(){return"marker"}get affectedSelectable(){var e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new wh(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new wh(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){var e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new wh(e.name,e.oldRange?O.fromJSON(e.oldRange,t):null,e.newRange?O.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bh extends hh{constructor(e,t,i,r,s){super(s),this.range=e.clone(),this.key=t,this.oldValue=void 0===i?null:i,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new bh(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new bh(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){var e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new w("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Rs(e.getAttribute(this.key),this.oldValue))throw new w("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&e.hasAttribute(this.key))throw new w("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){if(!Rs(this.oldValue,this.newValue)){var e=this.range,t=this.key,i=this.newValue;fh(e.start),fh(e.end);for(const s of e.getItems({shallow:!0})){var r=s.is("$textProxy")?s.textNode:s;null!==i?r._setAttribute(t,i):r._removeAttribute(t),gh(r.parent,r.index)}gh(e.end.parent,e.end.index)}}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new bh(O.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _h extends hh{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new _h(this.baseVersion)}getReversed(){return new _h(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yh extends hh{constructor(e,t,i,r){super(r),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new yh(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new yh(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){var e=this.position.nodeAfter;if(!(e instanceof A))throw new w("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new w("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){var e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new yh(E.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kh extends hh{constructor(e,t,i,r,s){super(s),this.root=e,this.key=t,this.oldValue=void 0===i?null:i,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new kh(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new kh(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new w("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new w("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new w("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){var e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(t.getRoot(e.root))return new kh(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion);throw new w("rootattribute-operation-fromjson-no-root",this,{rootName:e.root})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ah extends hh{constructor(e,t,i,r,s){super(s),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=r,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Ah(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Ah(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_validate(){var e=this._document.getRoot(this.rootName);if(e.isAttached()&&this.isAdd)throw new w("root-operation-root-attached",this);if(!e.isAttached()&&!this.isAdd)throw new w("root-operation-root-detached",this)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){var e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new Ah(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Eh={};Eh[bh.className]=bh,Eh[vh.className]=vh,Eh[wh.className]=wh,Eh[C.className]=C,Eh[_h.className]=_h,Eh[hh.className]=hh,Eh[yh.className]=yh,Eh[kh.className]=kh,Eh[Ah.className]=Ah,Eh[P.className]=P,Eh[x.className]=x;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ch=new Map;function T(e,t,i){let r=Ch.get(e);r||(r=new Map,Ch.set(e,r)),r.set(t,i)}function Ph(e){return[e]}function xh(e,t,i={}){s=e.constructor,r=t.constructor;var r,s=(s=Ch.get(s))&&s.has(r)?s.get(r):Ph;try{return s(e=e.clone(),t,i)}catch(e){throw e}}class Th{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){var i=t?this.originalOperations.get(t):null;for(const r of e)this.originalOperations.set(r,i||r)}updateRelation(e,t){var i,r,s,n;e instanceof C?t instanceof x?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof C&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")):e instanceof P?t instanceof x?e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore"):t instanceof C&&(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"splitBefore"):(r=O._createFromPositionAndShift(t.sourcePosition,t.howMany),e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)&&(n=r.end.offset-e.splitPosition.offset,r=e.splitPosition.offset-r.start.offset,this._setRelation(e,t,{howMany:n,offset:r})))):e instanceof x?t instanceof x?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof P&&e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):e instanceof wh&&(n=e.newRange)&&(t instanceof C?(s=(r=O._createFromPositionAndShift(t.sourcePosition,t.howMany)).containsPosition(n.start)||r.start.isEqual(n.start),i=r.containsPosition(n.end)||r.end.isEqual(n.end),!s&&!i||r.containsRange(n)||this._setRelation(e,t,{side:s?"left":"right",path:(s?n.start:n.end).path.slice()})):t instanceof x&&(i=n.start.isEqual(t.targetPosition),r=n.start.isEqual(t.deletionPosition),s=n.end.isEqual(t.deletionPosition),n=n.end.isEqual(t.sourcePosition),i||r||s||n)&&this._setRelation(e,t,{wasInLeftElement:i,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:s,wasInRightElement:n}))}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){e=this.originalOperations.get(e);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(e,t){t=this.originalOperations.get(t),t=this._history.getUndoneOperation(t);return t&&(e=this.originalOperations.get(e),e=this._relations.get(e))&&e.get(t)||null}_setRelation(e,t,i){e=this.originalOperations.get(e),t=this.originalOperations.get(t);let r=this._relations.get(e);r||(r=new Map,this._relations.set(e,r)),r.set(t,i)}}function Sh(e,t){for(const i of e)i.baseVersion=t++}function Oh(t,i){for(let e=0;e<i;e++)t.push(new _h(0))}function Rh(e,t,i){var r=e.nodes.getNode(0).getAttribute(t);return r==i?null:(e=new O(e.position,e.position.getShiftedBy(e.howMany)),new bh(e,t,r,i,0))}function Ih(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function Vh(i,e){var r=[];for(let t=0;t<i.length;t++){var s=i[t],n=new C(s.start,s.end.offset-s.start.offset,e,0);r.push(n);for(let e=t+1;e<i.length;e++)i[e]=i[e]._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)[0];e=e._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)}return r}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */T(bh,bh,(t,e,i)=>{var r,s;return t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)?(r=t.range.getDifference(e.range).map(e=>new bh(e,t.key,t.oldValue,t.newValue,0)),(s=t.range.getIntersection(e.range))&&i.aIsStrong&&r.push(new bh(s,e.key,e.newValue,t.newValue,0)),0==r.length?[new _h(0)]:r):[t]}),T(bh,vh,(t,e)=>{var i,r;return t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)?(i=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new bh(e,t.key,t.oldValue,t.newValue,t.baseVersion)),e.shouldReceiveAttributes&&(r=Rh(e,t.key,t.oldValue))&&i.unshift(r),i):(t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t])}),T(bh,x,(t,e)=>{var i=[],e=(t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&i.push(O._createFromPositionAndShift(e.graveyardPosition,1)),t.range._getTransformedByMergeOperation(e));return e.isCollapsed||i.push(e),i.map(e=>new bh(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),T(bh,C,(t,e)=>function(e,t){var i=O._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=null,s=[];i.containsRange(e,!0)?r=e:e.start.hasSameParentAs(i.start)?(s=e.getDifference(i),r=e.getIntersection(i)):s=[e];var n=[];for(var o of s){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);var a=t.getMovedRangeStart(),l=o.start.hasSameParentAs(a),o=o._getTransformedByInsertion(a,t.howMany,l);n.push(...o)}return r&&n.push(r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),n}(t.range,e).map(e=>new bh(e,t.key,t.oldValue,t.newValue,t.baseVersion))),T(bh,P,(e,t)=>{var i;return e.range.end.isEqual(t.insertionPosition)?(t.graveyardPosition||e.range.end.offset++,[e]):e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)?((i=e.clone()).range=new O(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,i]):(e.range=e.range._getTransformedBySplitOperation(t),[e])}),T(vh,bh,(e,t)=>{var i=[e];return e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)&&(e=Rh(e,t.key,t.newValue))&&i.push(e),i}),T(vh,vh,(e,t,i)=>(e.position.isEqual(t.position)&&i.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e])),T(vh,C,(e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e])),T(vh,P,(e,t)=>(e.position=e.position._getTransformedBySplitOperation(t),[e])),T(vh,x,(e,t)=>(e.position=e.position._getTransformedByMergeOperation(t),[e])),T(wh,vh,(e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e])),T(wh,wh,(e,t,i)=>{if(e.name==t.name){if(!i.aIsStrong)return[new _h(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]}),T(wh,x,(e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e])),T(wh,C,(e,t,i)=>{if(e.oldRange&&(e.oldRange=O._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(i.abRelation){var r=O._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.end=r.end,e.newRange.start.path=i.abRelation.path,[e];if("right"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=r.start,e.newRange.end.path=i.abRelation.path,[e]}e.newRange=O._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]}),T(wh,P,(e,t,i)=>{if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){var r;if(i.abRelation)return r=e.newRange._getTransformedBySplitOperation(t),e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?e.newRange.start=E._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement&&(e.newRange.start=E._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement?e.newRange.end=E._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?e.newRange.end=E._createAt(t.insertionPosition):e.newRange.end=r.end,[e];e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]}),T(x,vh,(e,t)=>(e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e])),T(x,x,(e,t,i)=>{var r,s;return e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)?i.bWasUndone?((r=t.graveyardPosition.path.slice()).push(0),e.sourcePosition=new E(t.graveyardPosition.root,r),e.howMany=0,[e]):[new _h(0)]:!e.sourcePosition.isEqual(t.sourcePosition)||e.targetPosition.isEqual(t.targetPosition)||i.bWasUndone||"splitAtSource"==i.abRelation?(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&i.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]):(r="$graveyard"==e.targetPosition.root.rootName,(s="$graveyard"==t.targetPosition.root.rootName)&&!r||(!r||s)&&i.aIsStrong?(r=t.targetPosition._getTransformedByMergeOperation(t),s=e.targetPosition._getTransformedByMergeOperation(t),[new C(r,e.howMany,s,0)]):[new _h(0)])}),T(x,C,(e,t,i)=>{var r=O._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!i.bWasUndone&&!i.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition)?[new _h(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])}),T(x,P,(e,t,i)=>{if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition))&&(e.howMany=t.howMany),e.targetPosition.isEqual(t.splitPosition)){var r=0!=t.howMany,s=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(r||s||"mergeTargetNotMoved"==i.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==i.abRelation||0<e.sourcePosition.offset)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}),T(C,vh,(e,t)=>{var i=O._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]}),T(C,C,(e,t,i)=>{var r=O._createFromPositionAndShift(e.sourcePosition,e.howMany),s=O._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=i.aIsStrong,o=!i.aIsStrong;"insertBefore"==i.abRelation||"insertAfter"==i.baRelation?o=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(o=!1);let a;if(a=e.targetPosition.isEqual(t.targetPosition)&&o?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Ih(e,t)&&Ih(t,e))return[t.getReversed()];if(r.containsPosition(t.targetPosition)&&r.containsRange(s,!0))return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Vh([r],a);if(s.containsPosition(e.targetPosition)&&s.containsRange(r,!0))return r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),Vh([r],a);var l=Qs(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Vh([r],a);"remove"!=e.type||"remove"==t.type||i.aWasUndone||i.forceWeakRemove?"remove"==e.type||"remove"!=t.type||i.bWasUndone||i.forceWeakRemove||(n=!1):n=!0;var h=[];for(const d of r.getDifference(s)){d.start=d.start._getTransformedByDeletion(t.sourcePosition,t.howMany),d.end=d.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var c="same"==Qs(d.start.getParentPath(),t.getMovedRangeStart().getParentPath()),c=d._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,c);h.push(...c)}l=r.getIntersection(s);return null!==l&&n&&(l.start=l.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),l.end=l.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===h.length?h.push(l):1==h.length?s.start.isBefore(r.start)||s.start.isEqual(r.start)?h.unshift(l):h.push(l):h.splice(1,0,l)),0===h.length?[new _h(e.baseVersion)]:Vh(h,a)}),T(C,P,(e,t,i)=>{let r=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(r=e.targetPosition._getTransformedBySplitOperation(t));var s=O._createFromPositionAndShift(e.sourcePosition,e.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=r,[e];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let e=new O(t.splitPosition,s.end);return e=e._getTransformedBySplitOperation(t),Vh([new O(s.start,t.splitPosition),e],r)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==i.abRelation&&(r=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==i.abRelation&&(r=e.targetPosition);var n=[s._getTransformedBySplitOperation(t)];return t.graveyardPosition&&(s=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition),1<e.howMany)&&s&&!i.aWasUndone&&n.push(O._createFromPositionAndShift(t.insertionPosition,1)),Vh(n,r)}),T(C,x,(i,r,s)=>{var n=O._createFromPositionAndShift(i.sourcePosition,i.howMany);if(r.deletionPosition.hasSameParentAs(i.sourcePosition)&&n.containsPosition(r.sourcePosition))if("remove"!=i.type||s.forceWeakRemove){if(1==i.howMany)return s.bWasUndone?(i.sourcePosition=r.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(r),[i]):[new _h(0)]}else if(!s.aWasUndone){n=[];let e=r.graveyardPosition.clone(),t=r.targetPosition._getTransformedByMergeOperation(r);1<i.howMany&&(n.push(new C(i.sourcePosition,i.howMany-1,i.targetPosition,0)),e=e._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1),t=t._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1));var s=r.deletionPosition._getCombined(i.sourcePosition,i.targetPosition),o=new C(e,1,s,0),a=o.getMovedRangeStart().path.slice(),a=(a.push(0),new E(o.targetPosition.root,a)),s=(t=t._getTransformedByMove(e,s,1),new C(t,r.howMany,a,0));return n.push(o),n.push(s),n}a=O._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(r);return i.sourcePosition=a.start,i.howMany=a.end.offset-a.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(r),[i]}),T(yh,vh,(e,t)=>(e.position=e.position._getTransformedByInsertOperation(t),[e])),T(yh,x,(e,t)=>(e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext"):e.position=e.position._getTransformedByMergeOperation(t),[e])),T(yh,C,(e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e])),T(yh,yh,(e,t,i)=>{if(e.position.isEqual(t.position)){if(!i.aIsStrong)return[new _h(0)];e.oldName=t.newName}return[e]}),T(yh,P,(e,t)=>{return"same"!=Qs(e.position.path,t.splitPosition.getParentPath())||t.graveyardPosition?(e.position=e.position._getTransformedBySplitOperation(t),[e]):(t=new yh(e.position.getShiftedBy(1),e.oldName,e.newName,0),[e,t])}),T(kh,kh,(e,t,i)=>{if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue)return[new _h(0)];e.oldValue=t.newValue}return[e]}),T(Ah,Ah,(e,t,i)=>e.rootName!==t.rootName||e.isAdd!==t.isAdd||i.bWasUndone?[e]:[new _h(0)]),T(P,vh,(e,t)=>(e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e])),T(P,x,(e,t,i)=>{var r;return e.graveyardPosition||i.bWasUndone||!e.splitPosition.hasSameParentAs(t.sourcePosition)?(e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=P.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]):((i=t.graveyardPosition.path.slice()).push(0),r=new E(t.graveyardPosition.root,i),i=P.getInsertionPosition(new E(t.graveyardPosition.root,i)),r=new P(r,0,i,null,0),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=P.getInsertionPosition(e.splitPosition),e.graveyardPosition=r.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[r,e])}),T(P,C,(e,t,i)=>{var r=O._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var s=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&s)return s=e.splitPosition._getTransformedByMoveOperation(t),(o=(n=e.graveyardPosition._getTransformedByMoveOperation(t)).path.slice()).push(0),n=new E(n.root,o),[new C(s,e.howMany,n,0)];e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}var n,o=e.splitPosition.isEqual(t.targetPosition);return!o||"insertAtSource"!=i.baRelation&&"splitBefore"!=i.abRelation?o&&i.abRelation&&i.abRelation.howMany?({howMany:s,offset:n}=i.abRelation,e.howMany+=s,e.splitPosition=e.splitPosition.getShiftedBy(n)):e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)?(o=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset),e.howMany-=o,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=P.getInsertionPosition(e.splitPosition)):(t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=P.getInsertionPosition(e.splitPosition)):(e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=P.getInsertionPosition(e.splitPosition)),[e]}),T(P,P,(e,t,i)=>{if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new _h(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new _h(0)];if("splitBefore"==i.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}var r,s;return e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)?(s="$graveyard"==e.splitPosition.root.rootName,(r="$graveyard"==t.splitPosition.root.rootName)&&!s||(!s||r)&&i.aIsStrong?(s=[],t.howMany&&s.push(new C(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&s.push(new C(e.splitPosition,e.howMany,e.moveTargetPosition,0)),s):[new _h(0)]):(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.abRelation?(e.howMany++,[e]):t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.baRelation?((r=t.insertionPosition.path.slice()).push(0),s=new E(t.insertionPosition.root,r),[e,new C(e.insertionPosition,1,s,0)]):(e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=P.getInsertionPosition(e.splitPosition),[e]))});class Mh extends o(E){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new w("model-liveposition-root-not-rootelement",e);!function(){this.listenTo(this.root.document.model,"applyOperation",(e,t)=>{t=t[0];t.isDocumentOperation&&function(e){e=this.getTransformedByOperation(e);{var t;this.isEqual(e)||(t=this.toPosition(),this.path=e.path,this.root=e.root,this.fire("change",t))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */.call(this,t)},{priority:"low"})}.call(this)}detach(){this.stopListening()}toPosition(){return new E(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Mh.prototype.is=function(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e};class Nh{constructor(e={}){"string"==typeof e&&(e="transparent"===e?{isUndoable:!1}:{},c("batch-constructor-deprecated-string-type"));var{isUndoable:e=!0,isLocal:t=!0,isUndo:i=!1,isTyping:r=!1}=e;this.operations=[],this.isUndoable=e,this.isLocal=t,this.isUndo=i,this.isTyping=r}get type(){return c("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(null!==e.baseVersion)return e.baseVersion;return null}addOperation(e){return(e.batch=this).operations.push(e),e}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bh{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size&&0==this._changedRoots.size}bufferOperation(e){var t=e;switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const n of t.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break;case"remove":case"move":case"reinsert":if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;var i=this._isInInsertedElement(t.sourcePosition.parent),r=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),r||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break;case"rename":if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);i=O._createFromPositionAndShift(t.position,1);for(const o of this._markerCollection.getMarkersIntersectingRange(i)){var s=o.getData();this.bufferMarkerChange(o.name,s,s)}break;case"split":r=t.splitPosition.parent;this._isInInsertedElement(r)||this._markRemove(r,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break;case"merge":i=t.sourcePosition.parent,r=(this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1),t.graveyardPosition.parent),r=(this._markInsert(r,t.graveyardPosition.offset,1),t.targetPosition.parent);this._isInInsertedElement(r)||this._markInsert(r,t.targetPosition.offset,i.maxOffset);break;case"detachRoot":case"addRoot":this._bufferRootStateChange(t.rootName,t.isAdd);break;case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":r=t.root.rootName;this._bufferRootAttributeChange(r,t.key,t.oldValue,t.newValue)}this._cachedChanges=null}bufferMarkerChange(e,t,i){var r=this._changedMarkers.get(e);r?(r.newMarkerData=i,null==r.oldMarkerData.range&&null==i.range&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{newMarkerData:i,oldMarkerData:t})}getMarkersToRemove(){var e,t,i=[];for([e,t]of this._changedMarkers)null!=t.oldMarkerData.range&&i.push({name:e,range:t.oldMarkerData.range});return i}getMarkersToAdd(){var e,t,i=[];for([e,t]of this._changedMarkers)null!=t.newMarkerData.range&&i.push({name:e,range:t.newMarkerData.range});return i}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(0<this._changesInElement.size||0<this._changedRoots.size)return!0;for(var{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){var i=e.range&&!t.range,r=!e.range&&t.range,e=e.range&&t.range&&!e.range.isEqual(t.range);if(i||r||e)return!0}}return!1}getChanges(e={}){if(!this._cachedChanges){let r=[];for(const m of this._changesInElement.keys()){var s=this._changesInElement.get(m).sort((e,t)=>e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1),n=this._elementSnapshots.get(m),o=Dh(m.getChildren());let t=0,i=0;for(const g of function(t,e){var i=[];let r=0,s=0;for(const n of e){if(n.offset>r){for(let e=0;e<n.offset-r;e++)i.push("e");s+=n.offset-r}if("insert"==n.type){for(let e=0;e<n.howMany;e++)i.push("i");r=n.offset+n.howMany}else{if("remove"==n.type){for(let e=0;e<n.howMany;e++)i.push("r");r=n.offset}else i.push(..."a".repeat(n.howMany).split("")),r=n.offset+n.howMany;s+=n.howMany}}if(s<t)for(let e=0;e<t-s-r;e++)i.push("e");return i}(n.length,s))if("i"===g)r.push(this._getInsertDiff(m,t,o[t])),t++;else{if("r"===g)r.push(this._getRemoveDiff(m,t,n[i]));else{if("a"===g){var a,l=o[t].attributes,h=n[i].attributes;let e;e="$text"==o[t].name?new O(E._createAt(m,t),E._createAt(m,t+1)):(a=m.offsetToIndex(t),new O(E._createAt(m,t),E._createAt(m.getChild(a),0))),r.push(...this._getAttributesDiff(e,h,l))}t++}i++}}r.sort((e,t)=>e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1);for(let e=1,t=0;e<r.length;e++){var i=r[t],c=r[e],d="remove"==i.type&&"remove"==c.type&&"$text"==i.name&&"$text"==c.name&&i.position.isEqual(c.position),u="insert"==i.type&&"insert"==c.type&&"$text"==i.name&&"$text"==c.name&&i.position.parent==c.position.parent&&i.position.offset+i.length==c.position.offset,c="attribute"==i.type&&"attribute"==c.type&&i.position.parent==c.position.parent&&i.range.isFlat&&c.range.isFlat&&i.position.offset+i.length==c.position.offset&&i.attributeKey==c.attributeKey&&i.attributeOldValue==c.attributeOldValue&&i.attributeNewValue==c.attributeNewValue;d||u||c?(i.length++,c&&(i.range.end=i.range.end.getShiftedBy(1)),r[e]=null):t=e}for(const t of r=r.filter(e=>e))delete t.changeCount,"attribute"==t.type&&(delete t.position,delete t.length);this._changeCount=0,this._cachedChangesWithGraveyard=r,this._cachedChanges=r.filter(Fh)}return(e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges).slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{e={...e};return void 0!==e.state&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,t){var i;this._changedRoots.has(e)?void 0!==(i=this._changedRoots.get(e)).state?(delete i.state,void 0===i.attributes&&this._changedRoots.delete(e)):i.state=t?"attached":"detached":this._changedRoots.set(e,{name:e,state:t?"attached":"detached"})}_bufferRootAttributeChange(e,t,i,r){var s,n=this._changedRoots.get(e)||{name:e},o=n.attributes||{};o[t]?r===(s=o[t]).oldValue?delete o[t]:s.newValue=r:o[t]={oldValue:i,newValue:r},0===Object.entries(o).length?(delete n.attributes,void 0===n.state&&this._changedRoots.delete(e)):(n.attributes=o,this._changedRoots.set(e,n))}_refreshItem(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);e=O._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(e)){var t=i.getData();this.bufferMarkerChange(i.name,t,t)}this._cachedChanges=null}}_markInsert(e,t,i){t={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,t)}_markRemove(e,t,i){var r={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);var i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let e=0;e<i.length;e++)i[e].howMany<1&&(i.splice(e,1),e--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Dh(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const l of t){var i,r,s,n,o=e.offset+e.howMany,a=l.offset+l.howMany;"insert"==e.type&&("insert"==l.type&&(e.offset<=l.offset?l.offset+=e.howMany:e.offset<a&&(l.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==l.type&&e.offset<l.offset&&(l.offset+=e.howMany),"attribute"==l.type)&&(e.offset<=l.offset?l.offset+=e.howMany:e.offset<a&&(i=l.howMany,l.howMany=e.offset-l.offset,t.unshift({type:"attribute",offset:o,howMany:i-l.howMany,count:this._changeCount++}))),"remove"==e.type&&("insert"==l.type&&(o<=l.offset?l.offset-=e.howMany:o<=a?e.offset<l.offset?(i=o-l.offset,l.offset=e.offset,l.howMany-=i,e.nodesToHandle-=i):(l.howMany-=e.nodesToHandle,e.nodesToHandle=0):e.offset<=l.offset?(e.nodesToHandle-=l.howMany,l.howMany=0):e.offset<a&&(r=a-e.offset,l.howMany-=r,e.nodesToHandle-=r)),"remove"==l.type&&(o<=l.offset?l.offset-=e.howMany:e.offset<l.offset&&(e.nodesToHandle+=l.howMany,l.howMany=0)),"attribute"==l.type)&&(o<=l.offset?l.offset-=e.howMany:e.offset<l.offset?(r=o-l.offset,l.offset=e.offset,l.howMany-=r):e.offset<a&&(o<=a?(s=l.howMany,l.howMany=e.offset-l.offset,s=s-l.howMany-e.nodesToHandle,t.unshift({type:"attribute",offset:e.offset,howMany:s,count:this._changeCount++})):l.howMany-=a-e.offset)),"attribute"==e.type&&("insert"==l.type&&(e.offset<l.offset&&o>l.offset?(a<o&&(s={type:"attribute",offset:a,howMany:o-a,count:this._changeCount++},this._handleChange(s,t),t.push(s)),e.nodesToHandle=l.offset-e.offset,e.howMany=e.nodesToHandle):e.offset>=l.offset&&e.offset<a&&(a<o?(e.nodesToHandle=o-a,e.offset=a):e.nodesToHandle=0)),"remove"==l.type&&e.offset<l.offset&&o>l.offset&&(n={type:"attribute",offset:l.offset,howMany:o-l.offset,count:this._changeCount++},this._handleChange(n,t),t.push(n),e.nodesToHandle=l.offset-e.offset,e.howMany=e.nodesToHandle),"attribute"==l.type)&&(e.offset>=l.offset&&o<=a?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=l.offset&&a<=o&&(l.howMany=0))}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:E._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,i){return{type:"remove",position:E._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){var r,s,n,o,a=[];i=new Map(i);for([r,s]of t){var l=i.has(r)?i.get(r):null;l!==s&&a.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:s,attributeNewValue:l,changeCount:this._changeCount++}),i.delete(r)}for([n,o]of i)a.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:n,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return a}_isInInsertedElement(e){var t=e.parent;if(!t)return!1;var i=this._changesInElement.get(t),r=e.startOffset;if(i)for(const s of i)if("insert"==s.type&&r>=s.offset&&r<s.offset+s.howMany)return!0;return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){for(const r of new O(E._createAt(e,t),E._createAt(e,t+i)).getItems({shallow:!0}))r.is("element")&&(this._elementSnapshots.delete(r),this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}}function Dh(e){var t=[];for(const i of e)if(i.is("$text"))for(let e=0;e<i.data.length;e++)t.push({name:"$text",attributes:new Map(i.getAttributes())});else t.push({name:i.name,attributes:new Map(i.getAttributes())});return t}function Fh(e){var t="position"in e&&"$graveyard"==e.position.root.rootName,e="range"in e&&"$graveyard"==e.range.root.rootName;return!t&&!e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lh{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new w("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];var i,r,s=this._operations[0];void 0===e&&(e=s.baseVersion);let n=t-1;for([i,r]of this._gaps)e>i&&e<r&&(e=r),n>i&&n<r&&(n=i-1);if(n<s.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e),a=(void 0===o&&(o=0),this._baseVersionToOperationIndex.get(n));return void 0===a&&(a=this._operations.length-1),this._operations.slice(o,a+1)}getOperation(e){e=this._baseVersionToOperationIndex.get(e);if(void 0!==e)return this._operations[e]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zh extends A{constructor(e,t,i="main"){super(t),this._isAttached=!0,this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}zh.prototype.is=function(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jh="$graveyard";class Hh extends o(){constructor(e){super(),this.model=e,this.history=new Lh,this.selection=new fl(this),this.roots=new Zn({idProperty:"rootName"}),this.differ=new Bh(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",jh),this.listenTo(e,"applyOperation",(e,t)=>{t=t[0];t.isDocumentOperation&&this.differ.bufferOperation(t)},{priority:"high"}),this.listenTo(e,"applyOperation",(e,t)=>{t=t[0];t.isDocumentOperation&&this.history.addOperation(t)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(e,r,t,i,s)=>{i={...r.getData(),range:i};this.differ.bufferMarkerChange(r.name,s,i),null===t&&r.on("change",(e,t)=>{var i=r.getData();this.differ.bufferMarkerChange(r.name,{...i,range:t},i)})}),this.registerPostFixer(e=>{let t=!1;for(const i of this.roots)i.isAttached()||i.isEmpty||(e.remove(e.createRangeIn(i)),t=!0);for(const r of this.model.markers)r.getRange().root.isAttached()||(e.removeMarker(r),t=!0);return t})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(jh)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new w("model-document-createroot-name-exists",this,{name:t});e=new zh(this,e,t);return this.roots.add(e),e}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(t=!1){return Array.from(this.roots).filter(e=>e.rootName!=jh&&(t||e.isAttached())).map(e=>e.rootName)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){var e=Yr(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){var e=this._getDefaultRoot(),t=this.model,i=t.schema,e=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(e)||t.createRange(e)}_validateSelectionRange(e){return Wh(e.start)&&Wh(e.end)}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break}while(t)}}function Wh(e){var t,i=e.textNode;return!i||!io(t=i.data,e=e.offset-i.startOffset)&&!ro(t,e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $h extends o(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){e=e instanceof qh?e.name:e;return this._markers.has(e)}get(e){return this._markers.get(e)||null}_set(t,i,r=!1,s=!1){t=t instanceof qh?t.name:t;if(t.includes(","))throw new w("markercollection-incorrect-marker-name",this);var n=this._markers.get(t);if(n){var o=n.getData(),a=n.getRange();let e=!1;return a.isEqual(i)||(n._attachLiveRange(ml.fromRange(i)),e=!0),r!=n.managedUsingOperations&&(n._managedUsingOperations=r,e=!0),"boolean"==typeof s&&s!=n.affectsData&&(n._affectsData=s,e=!0),e&&this.fire("update:"+t,n,a,i,o),n}a=ml.fromRange(i),o=new qh(t,a,r,s);return this._markers.set(t,o),this.fire("update:"+t,o,null,i,{...o.getData(),range:null}),o}_remove(e){var e=e instanceof qh?e.name:e,t=this._markers.get(e);return!!t&&(this._markers.delete(e),this.fire("update:"+e,t,t.getRange(),null,t.getData()),this._destroyMarker(t),!0)}_refresh(e){var e=e instanceof qh?e.name:e,t=this._markers.get(e);if(!t)throw new w("markercollection-refresh-marker-not-exists",this);var i=t.getRange();this.fire("update:"+e,t,i,i,t.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)null!==t.getRange().getIntersection(e)&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class qh extends o(Ga){constructor(e,t,i,r){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(this._liveRange)return this._managedUsingOperations;throw new w("marker-destroyed",this)}get affectsData(){if(this._liveRange)return this._affectsData;throw new w("marker-destroyed",this)}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(this._liveRange)return this._liveRange.start.clone();throw new w("marker-destroyed",this)}getEnd(){if(this._liveRange)return this._liveRange.end.clone();throw new w("marker-destroyed",this)}getRange(){if(this._liveRange)return this._liveRange.toRange();throw new w("marker-destroyed",this)}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}qh.prototype.is=function(e){return"marker"===e||"model:marker"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uh extends hh{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){var e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new w("detach-operation-on-document-node",this)}_execute(){dh(O._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gh extends Ga{constructor(e){super(),this.markers=new Map,this._children=new Ja,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){var e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){var t=[];for(const i of e)i.name?t.push(A.fromJSON(i)):t.push(_.fromJSON(i));return new Gh(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){t="string"==typeof(t=t)?[new _(t)]:(en(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new _(e):e instanceof Za?new _(e.data,e.getAttributes()):e));for(const i of t)null!==i.parent&&i._remove(),i.parent=this;this._children._insertNodes(e,t)}_removeChildren(e,t=1){e=this._children._removeNodes(e,t);for(const i of e)i.parent=null;return e}}Gh.prototype.is=function(e){return"documentFragment"===e||"model:documentFragment"===e};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kh{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new _(e,t)}createElement(e,t){return new A(e,t)}createDocumentFragment(){return new Gh}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),!(e instanceof _&&""==e.data)){var r=E._createAt(t,i);if(e.parent){if(Xh(e.root,r.root))return void this.move(O._createOn(e),r);if(e.root.document)throw new w("model-writer-insert-forbidden-move",this);this.remove(e)}t=r.root.document?r.root.document.version:null,i=new vh(r,e,t);if(e instanceof _&&(i.shouldReceiveAttributes=!0),this.batch.addOperation(i),this.model.applyOperation(i),e instanceof Gh)for(var[s,n]of e.markers){var o=E._createAt(n.root,0),n={range:new O(n.start._getCombined(o,r),n.end._getCombined(o,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(s)?this.updateMarker(s,n):this.addMarker(s,n)}}}insertText(e,t,i,r){t instanceof Gh||t instanceof A||t instanceof E?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,r)}insertElement(e,t,i,r){t instanceof Gh||t instanceof A||t instanceof E?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Gh||t instanceof A?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Gh||t instanceof A?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof O)for(const r of i.getMinimalFlatRanges())Jh(this,e,t,r);else Zh(this,e,t,i)}setAttributes(e,t){for(var[i,r]of eo(e))this.setAttribute(i,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof O)for(const i of t.getMinimalFlatRanges())Jh(this,e,null,i);else Zh(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();var t=e=>{for(const t of e.getAttributeKeys())this.removeAttribute(t,e)};if(e instanceof O)for(const i of e.getItems())t(i);else t(e)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof O))throw new w("writer-move-invalid-range",this);if(!e.isFlat)throw new w("writer-move-range-not-flat",this);t=E._createAt(t,i);if(!t.isEqual(e.start)){if(this._addOperationForAffectedMarkers("move",e),!Xh(e.root,t.root))throw new w("writer-move-different-document",this);i=e.root.document?e.root.document.version:null,e=new C(e.start,e.end.offset-e.start.offset,t,i);this.batch.addOperation(e),this.model.applyOperation(e)}}remove(e){var t,i;this._assertWriterUsedCorrectly();for(const a of(e instanceof O?e:O._createOn(e)).getMinimalFlatRanges().reverse()){this._addOperationForAffectedMarkers("move",a);{r=void 0;s=void 0;n=void 0;o=void 0;t=void 0;i=void 0;var r=a.start;var s=a.end.offset-a.start.offset;var n=this.batch;var o=this.model;let e;e=r.root.document?(t=o.document,i=new E(t.graveyard,[0]),new C(r,s,i,t.version)):new Uh(r,s);n.addOperation(e),o.applyOperation(e)}}}merge(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof A))throw new w("writer-merge-no-element-before",this);if(!(i instanceof A))throw new w("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){var t=e.nodeBefore,e=e.nodeAfter;this.move(O._createIn(e),E._createAt(t,"end")),this.remove(e)}_merge(e){var t=E._createAt(e.nodeBefore,"end"),i=E._createAt(e.nodeAfter,0),r=e.root.document.graveyard,r=new E(r,[0]),s=e.root.document.version,i=new x(i,e.nodeAfter.maxOffset,t,r,s);this.batch.addOperation(i),this.model.applyOperation(i)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof A))throw new w("writer-rename-not-element-instance",this);var i=e.root.document?e.root.document.version:null,e=new yh(E._createBefore(e),e.name,t,i);this.batch.addOperation(e),this.model.applyOperation(e)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new w("writer-split-element-no-parent",this);if(t=t||i.parent,!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new w("writer-split-invalid-limit-element",this);let r,s;do{var n=i.root.document?i.root.document.version:null,o=i.maxOffset-e.offset,a=P.getInsertionPosition(e),o=new P(e,o,a,null,n);this.batch.addOperation(o),this.model.applyOperation(o),r||s||(r=i,s=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new O(E._createAt(r,"end"),E._createAt(s,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new w("writer-wrap-range-not-flat",this);t=t instanceof A?t:new A(t);if(0<t.childCount)throw new w("writer-wrap-element-not-empty",this);if(null!==t.parent)throw new w("writer-wrap-element-attached",this);this.insert(t,e.start);e=new O(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(e,E._createAt(t,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new w("writer-unwrap-element-no-parent",this);this.move(O._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new w("writer-addmarker-no-usingoperation",this);var i=t.usingOperation,r=t.range,t=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new w("writer-addmarker-marker-exists",this);if(r)return i?(Yh(this,e,null,r,t),this.model.markers.get(e)):this.model.markers._set(e,r,i,t);throw new w("writer-addmarker-no-range",this)}updateMarker(e,t){this._assertWriterUsedCorrectly();var e="string"==typeof e?e:e.name,i=this.model.markers.get(e);if(!i)throw new w("writer-updatemarker-marker-not-exists",this);if(t){var r="boolean"==typeof t.usingOperation,s="boolean"==typeof t.affectsData,n=(s?t:i).affectsData;if(!r&&!t.range&&!s)throw new w("writer-updatemarker-wrong-options",this);var s=i.getRange(),o=t.range||s;r&&t.usingOperation!==i.managedUsingOperations?t.usingOperation?Yh(this,e,null,o,n):(Yh(this,e,s,null,n),this.model.markers._set(e,o,void 0,n)):i.managedUsingOperations?Yh(this,e,s,o,n):this.model.markers._set(e,o,void 0,n)}else c("writer-updatemarker-reconvert-using-editingcontroller",{markerName:e}),this.model.markers._refresh(i)}removeMarker(e){this._assertWriterUsedCorrectly();e="string"==typeof e?e:e.name;if(!this.model.markers.has(e))throw new w("writer-removemarker-no-marker",this);var t=this.model.markers.get(e);t.managedUsingOperations?Yh(this,e,t.getRange(),null,t.affectsData):this.model.markers._remove(e)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();var i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new w("writer-addroot-root-exists",this);i=this.model.document,t=new Ah(e,t,!0,i,i.version);return this.batch.addOperation(t),this.model.applyOperation(t),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new w("writer-detachroot-no-root",this);for(const i of this.model.markers)i.getRange().root===t&&this.removeMarker(i);for(const r of t.getAttributeKeys())this.removeAttribute(r,t);this.remove(this.createRangeIn(t));e=this.model.document,e=new Ah(t.rootName,t.name,!1,e,e.version);this.batch.addOperation(e),this.model.applyOperation(e)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else for(var[i,r]of eo(e))this._setSelectionAttribute(i,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){var i,r=this.model.document.selection;r.isCollapsed&&r.anchor.parent.isEmpty&&(i=fl._getStoreAttributeKey(e),this.setAttribute(i,t,r.anchor.parent)),r._setAttribute(e,t)}_removeSelectionAttribute(e){var t,i=this.model.document.selection;i.isCollapsed&&i.anchor.parent.isEmpty&&(t=fl._getStoreAttributeKey(e),this.removeAttribute(t,i.anchor.parent)),i._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new w("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,i){for(const h of this.model.markers)if(h.managedUsingOperations){var r,s,n,o,a,l=h.getRange();let e=!1;(e="move"===t?(r=i).containsPosition(l.start)||r.start.isEqual(l.start)||r.containsPosition(l.end)||r.end.isEqual(l.end):(r=i.nodeBefore,a=i.nodeAfter,s=l.start.parent==r&&l.start.isAtEnd,n=l.end.parent==a&&0==l.end.offset,o=l.end.nodeAfter==a,a=l.start.nodeAfter==a,s||n||o||a))&&this.updateMarker(h.name,{range:l})}}}function Jh(i,r,s,e){const n=i.model,o=n.document;let a=e.start,l,h,t;for(const d of e.getWalker({shallow:!0}))t=d.item.getAttribute(r),l&&h!=t&&(h!=s&&c(),a=l),l=d.nextPosition,h=t;function c(){var e=new O(a,l),t=e.root.document?o.version:null,e=new bh(e,r,h,s,t);i.batch.addOperation(e),n.applyOperation(e)}l instanceof E&&l!=a&&h!=s&&c()}function Zh(e,t,i,r){var s,n=e.model,o=n.document,a=r.getAttribute(t);let l,h;a!=i&&(h=r.root===r?(s=r.document?o.version:null,new kh(r,t,a,i,s)):(s=(l=new O(E._createBefore(r),e.createPositionAfter(r))).root.document?o.version:null,new bh(l,t,a,i,s)),e.batch.addOperation(h),n.applyOperation(h))}function Yh(e,t,i,r,s){var n=e.model,o=n.document,t=new wh(t,i,r,n.markers,!!s,o.version);e.batch.addOperation(t),n.applyOperation(t)}function Xh(e,t){return e===t||e instanceof zh&&t instanceof zh}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qh(e,d,u={}){if(!d.isCollapsed){const m=d.getFirstRange();if("$graveyard"!=m.root.rootName){const g=e.schema;e.change(e=>{var t,i,r,s,n,o,a,l,h,c;!u.doNotResetEntireContent&&function(e,t){var i=e.getLimitElement(t);if(!t.containsEntireContent(i))return;t=t.getFirstRange();return t.start.parent!=t.end.parent&&e.checkChild(i,"paragraph")}(g,d)?(r=d,i=(t=e).model.schema.getLimitElement(r),t.remove(t.createRangeIn(i)),ic(t,t.createPositionAt(i,0),r)):(t={},[r,s]=(u.doNotAutoparagraph||(i=d.getSelectedElement())&&Object.assign(t,g.getAttributesWithProperty(i,"copyOnReplace",!0)),function(e){var t=e.root.document.model,i=e.start;let r=e.end;{var s;t.hasContent(e,{ignoreMarkers:!0})&&(s=function(e){var e=e.parent,t=e.root.document.model.schema,e=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const i of e){if(t.isLimit(i))return null;if(t.isBlock(i))return i}}(r))&&r.isTouching(t.createPositionAt(s,0))&&(s=t.createSelection(e),t.modifySelection(s,{direction:"backward"}),e=s.getLastPosition(),s=t.createRange(e,r),t.hasContent(s,{ignoreMarkers:!0})||(r=e))}return[Mh.fromPosition(i,"toPrevious"),Mh.fromPosition(r,"toNext")]}(m)),r.isTouching(s)||e.remove(e.createRange(r,s)),u.leaveUnmerged||(o=r,a=s,l=(n=e).model,tc(n.model.schema,o,a)&&([h,c]=function(e,t){var i=e.getAncestors(),r=t.getAncestors();let s=0;for(;i[s]&&i[s]==r[s];)s++;return[i[s],r[s]]}(o,a),h)&&c&&(!l.hasContent(h,{ignoreMarkers:!0})&&l.hasContent(c,{ignoreMarkers:!0})?function e(t,i,r,s){const n=i.parent,o=r.parent;if(n!=s&&o!=s){for(i=t.createPositionAfter(n),(r=t.createPositionBefore(o)).isEqual(i)||t.insert(n,r);i.parent.isEmpty;){const a=i.parent;i=t.createPositionBefore(a),t.remove(a)}r=t.createPositionBefore(o),ec(t,r),tc(t.model.schema,i,r)&&e(t,i,r,s)}}:function e(t,i,r,s){const n=i.parent,o=r.parent;if(n!=s&&o!=s){for(i=t.createPositionAfter(n),(r=t.createPositionBefore(o)).isEqual(i)||t.insert(o,i),t.merge(i);r.parent.isEmpty;){const a=r.parent;r=t.createPositionBefore(a),t.remove(a)}tc(t.model.schema,i,r)&&e(t,i,r,s)}})(n,o,a,h.parent),g.removeDisallowedAttributes(r.parent.getChildren(),e)),rc(e,d,r),u.doNotAutoparagraph||(l=g,c=r,n=l.checkChild(c,"$text"),l=l.checkChild(c,"paragraph"),n)||!l||ic(e,r,d,t),r.detach(),s.detach())})}}}function ec(e,t){var i=t.nodeBefore,r=t.nodeAfter;i.name!=r.name&&e.rename(i,r.name),e.clearAttributes(i),e.setAttributes(Object.fromEntries(r.getAttributes()),i),e.merge(t)}function tc(e,t,i){var r=t.parent,s=i.parent;return r!=s&&!e.isLimit(r)&&!e.isLimit(s)&&function(e,t,i){e=new O(e,t);for(const r of e.getWalker())if(i.isLimit(r.item))return!1;return!0}(t,i,e)}function ic(e,t,i,r={}){var s=e.createElement("paragraph");e.model.schema.setAllowedAttributes(s,r,e),e.insert(s,t),rc(e,i,e.createPositionAt(s,0))}function rc(e,t,i){t instanceof fl?e.setSelection(i):t.setTo(i)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sc(t,r){const i=[];Array.from(t.getItems({direction:"backward"})).map(e=>r.createRangeOn(e)).filter(e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))).forEach(e=>{i.push(e.start.parent),r.remove(e)}),i.forEach(e=>{let t=e;for(;t.parent&&t.isEmpty;){var i=r.createRangeOn(t);t=t.parent,r.remove(i)}})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nc{constructor(e,t,i){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){var t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){/* istanbul ignore if -- @preserve */if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new w("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?O._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new O(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){this.schema.isObject(e)?this._handleObject(e):this._checkAndAutoParagraphToAllowedPosition(e)||this._checkAndSplitToAllowedPosition(e)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}_insertPartialFragment(){var e;this._documentFragment.isEmpty||(e=Mh.fromPosition(this.position,"toNext"),this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach())}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new w("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Mh.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Mh.fromPosition(e,"toNext"))}_mergeOnLeft(){var e,t=this._firstNode;t instanceof A&&this._canMergeLeft(t)&&((t=Mh._createBefore(t)).stickiness="toNext",e=Mh.fromPosition(this.position,"toNext"),this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Mh._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Mh._createAt(t.nodeBefore,"end","toNext")),this.position=e.toPosition(),e.detach(),this._filterAttributesOf.push(this.position.parent),t.detach())}_mergeOnRight(){var e=this._lastNode;if(e instanceof A&&this._canMergeRight(e)){e=Mh._createAfter(e);/* istanbul ignore if -- @preserve */if(e.stickiness="toNext",!this.position.isEqual(e))throw new w("insertcontent-invalid-insertion-position",this);this.position=E._createAt(e.nodeBefore,"end");var t=Mh.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=Mh._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Mh._createAt(e.nodeBefore,0,"toPrevious")),this.position=t.toPosition(),t.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}}_canMergeLeft(e){var t=e.previousSibling;return t instanceof A&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){var t=e.nextSibling;return t instanceof A&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){var t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(!this.schema.checkChild(this.position.parent,e)){if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}return!0}_checkAndSplitToAllowedPosition(e){var t,i=this._getAllowedIn(this.position.parent,e);if(!i)return!1;for(i!=this.position.parent&&this._insertPartialFragment();i!=this.position.parent;)this.position.isAtStart?(t=this.position.parent,this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===i&&this.writer.remove(t)):this.position.isAtEnd?this.position=this.writer.createPositionAfter(this.position.parent):(t=this.writer.createPositionAfter(this.position.parent),this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter));return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oc(e,t,i="auto"){var r=e.getSelectedElement();return r&&t.schema.isObject(r)&&!t.schema.isInline(r)?"before"==i||"after"==i?t.createRange(t.createPositionAt(r,i)):t.createRangeOn(r):(i=Yn(e.getSelectedBlocks()))?i.isEmpty?t.createRange(t.createPositionAt(i,0)):(r=t.createPositionAfter(i),e.focus.isTouching(r)?t.createRange(r):t.createRange(t.createPositionBefore(i))):t.createRange(e.focus)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ac(a,l,e,h={}){if(!a.schema.isObject(l))throw new w("insertobject-element-not-an-object",a,{object:l});e=e||a.document.selection;let c=e;h.findOptimalPosition&&a.schema.isBlock(l)&&(c=a.createSelection(oc(e,a,h.findOptimalPosition)));const t=Yn(e.getSelectedBlocks()),d={};return t&&Object.assign(d,a.schema.getAttributesWithProperty(t,"copyOnReplace",!0)),a.change(t=>{c.isCollapsed||a.deleteContent(c,{doNotAutoparagraph:!0});let e=l;var i=c.anchor.parent,i=(!a.schema.checkChild(i,l)&&a.schema.checkChild(i,"paragraph")&&a.schema.checkChild("paragraph",l)&&(e=t.createElement("paragraph"),t.insert(l,e)),a.schema.setAllowedAttributes(e,d,t),a.insertContent(e,c));if(!i.isCollapsed&&h.setSelection){var r=l,s=h.setSelection,n=d,o=t.model;if("on"==s)t.setSelection(r,"on");else{if("after"!=s)throw new w("insertobject-invalid-place-parameter-value",o);let e=r.nextSibling;o.schema.isInline(r)?t.setSelection(r,"after"):(e&&o.schema.checkChild(e,"$text")||!o.schema.checkChild(r.parent,"paragraph")||(e=t.createElement("paragraph"),o.schema.setAllowedAttributes(e,n,t),o.insertContent(e,t.createPositionAfter(r))),e&&t.setSelection(e,0))}}return i})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lc=' ,.?!:;"-()';function hc(e,t,i={}){for(var r,s,n,o=e.schema,a="backward"!=i.direction,l=i.unit||"character",i=!!i.treatEmojiAsSingleUnit,h=t.focus,c=new Ya({boundaries:(r=a,s=(h=h).root,s=E._createAt(s,r?"end":0),r?new O(h,s):new O(s,h)),singleCharacters:!0,direction:a?"forward":"backward"}),d={walker:c,schema:o,isForward:a,unit:l,treatEmojiAsSingleUnit:i};n=c.next();){if(n.done)return;const u=function(e,t){var{isForward:i,walker:r,unit:s,schema:n,treatEmojiAsSingleUnit:o}=e,{type:t,item:a,nextPosition:l}=t;if("text"==t)return"word"===e.unit?function(e,t){let i=e.position.textNode;for(i=i||(t?e.position.nodeAfter:e.position.nodeBefore);i&&i.is("$text");){var r=e.position.offset-i.startOffset;if(function(e,t,i){return t===(i?e.offsetSize:0)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(i,r,t))i=t?e.position.nodeAfter:e.position.nodeBefore;else{if(function(e,t,i){t+=i?0:-1;return lc.includes(e.charAt(t))}(i.data,r,t))break;e.next()}}return e.position}(r,i):function(t,i,r){var s=t.position.textNode;if(s){var n=s.data;let e=t.position.offset-s.startOffset;for(;io(n,e)||"character"==i&&ro(n,e)||r&&no(n,e);)t.next(),e=t.position.offset-s.startOffset}return t.position}(r,s,o);{if(t==(i?"elementStart":"elementEnd"))return n.isSelectable(a)?E._createAt(a,i?"after":"before"):n.checkChild(l,"$text")?l:void 0;{if(!n.isLimit(a))return n.checkChild(l,"$text")?l:void 0;r.skip(()=>!0)}}}(d,n.value);if(u)return void(t instanceof fl?e.change(e=>{e.setSelectionFocus(u)}):t.setFocus(u))}}let cc=class extends s(){constructor(){super(),this.markers=new $h,this.document=new Hh(this),this.schema=new Yl,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if("$marker"===t.name)return!0}),Wl(this),this.document.registerPostFixer(Il),this.on("insertContent",(e,[t,i])=>{var x,T,S;e.return=(T=t,S=i,(x=this).change(i=>{var e=S||x.document.selection,t=(e.isCollapsed||x.deleteContent(e,{doNotAutoparagraph:!0}),new nc(x,i,e.anchor)),r=[];let s;if(T.is("documentFragment")){if(T.markers.size){var n,o,a,l,h,c=[];for([n,o]of T.markers){var{start:d,end:u}=o,m=d.isEqual(u);c.push({position:d,name:n,isCollapsed:m},{position:u,name:n,isCollapsed:m})}c.sort(({position:e},{position:t})=>e.isBefore(t)?1:-1);for({position:a,name:l,isCollapsed:h}of c){let e=null,t=null;var g=a.parent===T&&a.isAtStart,f=a.parent===T&&a.isAtEnd;g||f?h&&(t=g?"start":"end"):(e=i.createElement("$marker"),i.insert(e,a)),r.push({name:l,element:e,collapsed:t})}}s=T.getChildren()}else s=[T];t.handleNodes(s);let p=t.getSelectionRange();if(T.is("documentFragment")&&r.length){var v,w,b,_=p?ml.fromRange(p):null,y={};for(let e=r.length-1;0<=e;e--){var k,{name:A,element:E,collapsed:C}=r[e],P=!y[A];P&&(y[A]=[]),E?(k=i.createPositionAt(E,"before"),y[A].push(k),i.remove(E)):(k=t.getAffectedRange())?C?y[A].push(k[C]):y[A].push(P?k.start:k.end):C&&y[A].push(t.position)}for([v,[w,b]]of Object.entries(y))w&&b&&w.root===b.root&&i.addMarker(v,{usingOperation:!0,affectsData:!0,range:new O(w,b)});_&&(p=_.toRange(),_.detach())}/* istanbul ignore else -- @preserve */p&&(e instanceof fl?i.setSelection(p):e.setTo(p));_=t.getAffectedRange()||x.createRange(e.anchor);return t.destroy(),_}))}),this.on("insertObject",(e,[t,i,r])=>{e.return=ac(this,t,i,r)}),this.on("canEditAt",e=>{var t=!this.document.isReadOnly;(e.return=t)||e.stop()})}change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Nh,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}enqueueChange(e,t){try{e?"function"==typeof e?(t=e,e=new Nh):e instanceof Nh||(e=new Nh(e)):e=new Nh,this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...r){t=dc(t,i);return this.fire("insertContent",[e,t,i,...r])}insertObject(e,t,i,r,...s){t=dc(t,i);return this.fire("insertObject",[e,t,r,r,...s])}deleteContent(e,t){Qh(this,e,t)}modifySelection(e,t){hc(this,e,t)}getSelectedContent(e){return a=e,this.change(t=>{var i=t.createDocumentFragment(),r=a.getFirstRange();if(r&&!r.isCollapsed){var s=r.start.root,n=r.start.getCommonPath(r.end),s=s.getNodeByPath(n);let e;s=(e=r.start.parent==r.end.parent?r:t.createRange(t.createPositionAt(s,r.start.path[n.length]),t.createPositionAt(s,r.end.path[n.length]+1))).end.offset-e.start.offset;for(const o of e.getItems({shallow:!0}))o.is("$textProxy")?t.appendText(o.data,o.getAttributes(),i):t.append(t.cloneElement(o,!0),i);e!=r&&(n=r._getTransformedByMove(e.start,t.createPositionAt(i,0),s)[0],r=t.createRange(t.createPositionAt(i,0),n.start),sc(t.createRange(n.end,t.createPositionAt(i,"end")),t),sc(r,t))}return i});var a}hasContent(e,t={}){e=e instanceof O?e:O._createIn(e);if(!e.isCollapsed){var{ignoreWhitespaces:i=!1,ignoreMarkers:t=!1}=t;if(!t)for(const r of this.markers.getMarkersIntersectingRange(e))if(r.affectsData)return!0;for(const s of e.getItems())if(this.schema.isContent(s)){if(!s.is("$textProxy"))return!0;if(!i)return!0;if(-1!==s.data.search(/\S/))return!0}}return!1}canEditAt(e){e=dc(e);return this.fire("canEditAt",[e])}createPositionFromPath(e,t,i){return new E(e,t,i)}createPositionAt(e,t){return E._createAt(e,t)}createPositionAfter(e){return E._createAfter(e)}createPositionBefore(e){return E._createBefore(e)}createRange(e,t){return new O(e,t)}createRangeIn(e){return O._createIn(e)}createRangeOn(e){return O._createOn(e)}createSelection(...e){return new hl(...e)}createBatch(e){return new Nh(e)}createOperationFromJSON(e){return class{static fromJSON(e,t){return Eh[e.__className].fromJSON(e,t)}}.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){var e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){var t=this._pendingChanges[0].batch,i=(this._currentWriter=new Kh(this,t),this._pendingChanges[0].callback(this._currentWriter));e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function dc(e,t){if(e)return e instanceof hl||e instanceof fl?e:e instanceof Ka?t||0===t?new hl(e,t):e.is("rootElement")?new hl(e,"in"):new hl(e,"on"):new hl(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uc extends Va{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mc extends Va{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gc{constructor(e){this.document=e}createDocumentFragment(e){return new Xo(this.document,e)}createElement(e,t,i){return new Ao(this.document,e,t,i)}createText(e){return new f(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){var t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){var i=e.parent;return!!i&&(e=i.getChildIndex(e),this.removeChildren(e,1,i),this.insertChild(e,t,i),!0)}unwrapElement(e){var t,i=e.parent;i&&(t=i.getChildIndex(e),this.remove(e),this.insertChild(t,e.getChildren(),i))}rename(e,t){e=new Ao(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,e)?e:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){wi(e)&&void 0===i?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return p._createAt(e,t)}createPositionAfter(e){return p._createAfter(e)}createPositionBefore(e){return p._createBefore(e)}createRange(e,t){return new v(e,t)}createRangeOn(e){return v._createOn(e)}createRangeIn(e){return v._createIn(e)}createSelection(...e){return new Io(...e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fc{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){var i=this.get(e);if(i)return i.execute(...t);throw new w("commandcollection-command-not-found",this,{commandName:e})}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pc extends Qn{constructor(e){super(),this.editor=e}set(e,t,i={}){if("string"==typeof t){const r=t;t=(e,t)=>{this.editor.execute(r),t()}}super.set(e,t,i)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vc extends s(){constructor(e={}){super();var t=this.constructor,i=e.language||t.defaultConfig&&t.defaultConfig.language,i=(this._context=e.context||new ho({language:i}),this._context._addEditor(this,!e.context),Array.from(t.builtinPlugins||[])),e=(this.config=new tn(e,t.defaultConfig),this.config.define("plugins",i),this.config.define(this._context._getEditorConfig()),this.plugins=new lo(this,i,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new fc,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new cc,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly}),new _o);this.data=new nh(this.model,e),this.editing=new Gl(this.model,e),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new oh([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new pc(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return 0<this._readOnlyLocks.size}set isReadOnly(e){throw new w("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new w("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),1===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if("string"!=typeof e&&"symbol"!=typeof e)throw new w("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),0===this._readOnlyLocks.size)&&this.fire("change:isReadOnly","isReadOnly",!1,!0)}initPlugins(){var e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],e=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),i,e)}destroy(){let e=Promise.resolve();return(e="initializing"==this.state?new Promise(e=>this.once("ready",e)):e).then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(e){/* istanbul ignore next -- @preserve */w.rethrowUnexpectedError(e,this)}}focus(){this.editing.view.focus()}static create(){throw new Error("This is an abstract method.")}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wc(e){class t extends e{setData(e){this.data.set(e)}getData(e){return this.data.get(e)}}return t}ji=wc(Object);
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bc(e){class t extends e{updateSourceElement(e=this.data.get()){if(!this.sourceElement)throw new w("editor-missing-sourceelement",this);var t=this.config.get("updateSourceElementOnDestroy"),i=this.sourceElement instanceof HTMLTextAreaElement;_n(this.sourceElement,t||i?e:"")}}return t}wc.setData=ji.prototype.setData,wc.getData=ji.prototype.getData,bc.updateSourceElement=bc(Object).prototype.updateSourceElement;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const S={bold:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',importExport:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',paragraph:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _c{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=e=>{var t="error"in e?e.error:e.reason;t instanceof Error&&this._handleError(t,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(e=>e!==t)}_fire(e,...t){for(const i of this._listeners[e]||[])i.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){this._shouldReactToError(e)&&(this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()}),t=this._shouldRestart(),this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:t}),t?this._restart():(this.state="crashedPermanently",this._fire("stateChange")))}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&void 0!==e.context&&null!==e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yc(e,t=new Set){var i,r,s,n=[e],o=new Set;let a=0;for(;n.length>a;){var l=n[a++];if(!(o.has(l)||(i=l,s=r=void 0,r=Object.prototype.toString.call(i),"number"==(s=typeof i))||"boolean"==s||"string"==s||"symbol"==s||"function"==s||"[object Date]"===r||"[object RegExp]"===r||"[object Module]"===r||null==i||i._watchdogExcluded||i instanceof EventTarget||i instanceof Event||t.has(l)))if(o.add(l),Symbol.iterator in l)try{for(const h of l)n.push(h)}catch{}else for(const c in l)"defaultValue"!==c&&n.push(l[c])}return o}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kc(e,t,i=new Set){if(e===t&&"object"==typeof(r=e)&&null!==r)return!0;var r=yc(e,i),s=yc(t,i);
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */for(const n of r)if(s.has(n))return!0;return!1}class Ac extends _c{constructor(i,e={}){super(e),this._editor=null,this._throttledSave=zs(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),i&&(this._creator=(e,t)=>i.create(e,t)),this._destructor=e=>e.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{var e;return"string"==typeof this._elementOrData?this.create(this._data,this._config,this._config.context):(e=Object.assign({},this._config,{initialData:this._data}),this.create(this._elementOrData,e,e.context))}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=e,this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(e=>{(this._editor=e).model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=e.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();var e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){var e=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=e}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){var e={};for(const t of this._editor.model.document.getRootNames())e[t]=this._editor.data.get({rootName:t});return e}_isErrorComingFromThisItem(e){return kc(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return rs(e,(e,t)=>{if(Os(e)||"context"===t)return e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ec=Symbol("MainQueueId");class Cc{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){var i=e===Ec;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(Ec),this._queues.get(e)])).then(t),s=r.catch(()=>{});return this._queues.set(e,s),r.finally(()=>{this._activeActions--,this._queues.get(e)===s&&0===this._activeActions&&this._onEmptyCallbacks.forEach(e=>e())})}}function Pc(e){return Array.isArray(e)?e:[e]}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xc({emitter:e,activator:s,callback:n,contextElements:o}){e.listenTo(document,"mousedown",(e,t)=>{if(s()){var i="function"==typeof t.composedPath?t.composedPath():[];for(const r of"function"==typeof o?o():o)if(r.contains(t.target)||i.includes(r))return;n()}})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tc(e){class t extends e{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...e){super(...e),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Sc({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oc extends Zn{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(e,t,i)=>{this._renderViewIntoCollectionParent(t,i)}),this.on("remove",(e,t)=>{t.element&&this._parentElement&&t.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...s){if(s.length&&s.every(e=>"string"==typeof e))return{to:r=>{for(const e of this)for(const t of s)e.delegate(t).to(r);this.on("add",(e,t)=>{for(const i of s)t.delegate(i).to(r)}),this.on("remove",(e,t)=>{for(const i of s)t.stopDelegating(i,r)})}};throw new w("ui-viewcollection-delegate-wrong-events",this)}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R extends ln(s()){constructor(i){super(),this.element=null,this.isRendered=!1,this.locale=i,this.t=i&&i.t,this._viewCollections=new Zn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,t)=>{t.locale=i,t.t=i&&i.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate||(this._bindTemplate=Rc.bind(this,this))}createCollection(e){e=new Oc(e);return this._viewCollections.add(e),e}registerChild(e){for(const t of e=en(e)?e:[e])this._unboundChildren.add(t)}deregisterChild(e){for(const t of e=en(e)?e:[e])this._unboundChildren.remove(t)}setTemplate(e){this.template=new Rc(e)}extendTemplate(e){Rc.extend(this.template,e)}render(){if(this.isRendered)throw new w("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rc extends o(){constructor(e){super(),Object.assign(this,Fc(Dc(e))),this._isRendered=!1,this._revertData=null}render(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=Gc(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new w("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){yield*function*e(t){if(t.children)for(const i of t.children)Wc(i)?yield i:$c(i)&&(yield*e(i))}(this)}static bind(r,s){return{to(e,t){return new Vc({eventNameOrFunction:e,attribute:e,observable:r,emitter:s,callback:t})},if(e,t,i){return new Mc({observable:r,emitter:s,attribute:e,valueIfTrue:t,callback:i})}}}static extend(e,t){if(e._isRendered)throw new w("template-extend-render",[this,e]);!function t(i,r){if(r.attributes&&(i.attributes||(i.attributes={}),jc(i.attributes,r.attributes)),r.eventListeners&&(i.eventListeners||(i.eventListeners={}),jc(i.eventListeners,r.eventListeners)),r.text&&i.text.push(...r.text),r.children&&r.children.length){if(i.children.length!=r.children.length)throw new w("ui-template-extend-children-mismatch",i);let e=0;for(const s of r.children)t(i.children[e++],s)}}(e,Fc(Dc(t)))}_renderNode(e){let t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new w("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t=t||(e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Nc(this.text)?this._bindToObservable({schema:this.text,updater:(i=t,{set(e){i.textContent=e},remove(){i.textContent=""}}),data:e}):t.textContent=this.text.join(""),t;var i}_renderAttributes(e){if(this.attributes){var t=e.node,i=e.revertData;for(const a in this.attributes){var r,s=t.getAttribute(a),n=this.attributes[a],o=(i&&(i.attributes[a]=s),Uc(n)?n[0].ns:null);Nc(n)?(r=Uc(n)?n[0].value:n,i&&Kc(a)&&r.unshift(s),this._bindToObservable({schema:r,updater:function(t,i,r){return{set(e){t.setAttributeNS(r,i,e)},remove(){t.removeAttributeNS(r,i)}}}(t,a,o),data:e})):"style"==a&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],e):(i&&s&&Kc(a)&&n.unshift(s),Hc(r=n.map(e=>e&&(e.value||e)).reduce((e,t)=>e.concat(t),[]).reduce(zc,""))||t.setAttributeNS(o,a,r))}}}_renderStyleAttribute(e,t){var i=t.node;for(const s in e){var r=e[s];Nc(r)?this._bindToObservable({schema:[r],updater:function(t,i){return{set(e){t.style[i]=e},remove(){t.style[i]=null}}}(i,s),data:t}):i.style[s]=r}}_renderElementChildren(e){var t,i=e.node,r=e.intoFragment?document.createDocumentFragment():i,s=e.isApplying;let n=0;for(const o of this.children)if(qc(o)){if(!s){o.setParent(i);for(const a of o)r.appendChild(a.element)}}else Wc(o)?s||(o.isRendered||o.render(),r.appendChild(o.element)):nn(o)?r.appendChild(o):s?(t=Gc(),e.revertData.children.push(t),o._renderNode({intoFragment:!1,node:r.childNodes[n++],isApplying:!0,revertData:t})):r.appendChild(o.render());e.intoFragment&&i.appendChild(r)}_setUpListeners(r){if(this.eventListeners)for(const s in this.eventListeners){var e=this.eventListeners[s].map(e=>{var[t,i]=s.split("@");return e.activateDomEventListener(t,i,r)});r.revertData&&r.revertData.bindings.push(e)}}_bindToObservable({schema:t,updater:i,data:r}){var e=r.revertData,s=(Bc(t,i,r),t.filter(e=>!Hc(e)).filter(e=>e.observable).map(e=>e.activateAttributeListener(t,i,r)));e&&e.bindings.push(s)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const n of s)n();if(t.text)e.textContent=t.text;else{var i=e;for(const o in t.attributes){var r=t.attributes[o];null===r?i.removeAttribute(o):i.setAttribute(o,r)}for(let e=0;e<t.children.length;++e)this._revertTemplateFromNode(i.childNodes[e],t.children[e])}}}class Ic{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const r=()=>Bc(e,t,i);return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,r)}}}class Vc extends Ic{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,i,t){const r=(e,t)=>{i&&!t.target.matches(i)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(t):this.observable.fire(this.eventNameOrFunction,t))};return this.emitter.listenTo(t.node,e,r),()=>{this.emitter.stopListening(t.node,e,r)}}}class Mc extends Ic{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){return!Hc(super.getValue(e))&&(this.valueIfTrue||!0)}}function Nc(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Nc):e instanceof Ic)}function Bc(e,t,{node:i}){r=i;var r,i=e.map(e=>e instanceof Ic?e.getValue(r):e);let s;Hc(s=1==e.length&&e[0]instanceof Mc?i[0]:i.reduce(zc,""))?t.remove():t.set(s)}function Dc(e){return rs(e,e=>{if(e&&(e instanceof Ic||$c(e)||Wc(e)||qc(e)))return e})}function Fc(e){if("string"==typeof e?e={text:[e]}:e.text&&((r=e).text=u(r.text)),e.on&&(e.eventListeners=function(e){for(const t in e)Lc(e,t);return e}(e.on),delete e.on),!e.text){if(e.attributes){var t=e.attributes;for(const s in t)t[s].value&&(t[s].value=u(t[s].value)),Lc(t,s)}var i=[];if(e.children)if(qc(e.children))i.push(e.children);else for(const n of e.children)$c(n)||Wc(n)||nn(n)?i.push(n):i.push(new Rc(n));e.children=i}var r;return e}function Lc(e,t){e[t]=u(e[t])}function zc(e,t){return Hc(t)?e:Hc(e)?t:e+" "+t}function jc(e,t){for(const i in t)e[i]?e[i].push(...t[i]):e[i]=t[i]}function Hc(e){return!e&&0!==e}function Wc(e){return e instanceof R}function $c(e){return e instanceof Rc}function qc(e){return e instanceof Oc}function Uc(e){return y(e[0])&&e[0].ns}function Gc(){return{children:[],bindings:[],attributes:{}}}function Kc(e){return"class"==e||"style"==e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jc extends Oc{constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Rc({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t,i,r=[]){var s,n=i&&i.xmlns,o=n?e.createElementNS(n,t):e.createElement(t);for(const a in i)o.setAttribute(a,i[a]);for(s of r=!Ss(r)&&en(r)?r:[r])Ss(s)&&(s=e.createTextNode(s)),o.appendChild(s);return o}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zc extends R{constructor(){super();var e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon","ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){var e,t,i=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=i.getAttribute("viewBox");r&&(this.viewBox=r);for({name:e,value:t}of Array.from(i.attributes))Zc.presentationalAttributeNames.includes(e)&&this.element.setAttribute(e,t);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;0<i.childNodes.length;)this.element.appendChild(i.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}Zc.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I extends R{constructor(e){super(e),this._focusDelayed=null;var e=this.bindTemplate,t=q(),t=(this.set("ariaChecked",void 0),this.set("ariaLabel",void 0),this.set("ariaLabelledBy","ck-editor__aria-label_"+t),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._createLabelView(),this.iconView=new Zc,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),{tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",e=>!e),e.if("isVisible","ck-hidden",e=>!e),e.to("isOn",e=>e?"ck-on":"ck-off"),e.if("withText","ck-button_with-text"),e.if("withKeystroke","ck-button_with-keystroke")],role:e.to("role"),type:e.to("type",e=>e||"button"),tabindex:e.to("tabindex"),"aria-label":e.to("ariaLabel"),"aria-labelledby":e.to("ariaLabelledBy"),"aria-disabled":e.if("isEnabled",!0,e=>!e),"aria-checked":e.to("isOn"),"aria-pressed":e.to("isOn",e=>!!this.isToggleable&&String(!!e)),"data-cke-tooltip-text":e.to("_tooltipString"),"data-cke-tooltip-position":e.to("tooltipPosition")},children:this.children,on:{click:e.to(e=>{this.isEnabled?this.fire("execute"):e.preventDefault()})}});m.isSafari&&(this._focusDelayed||(this._focusDelayed=to(()=>this.focus(),0)),t.on.mousedown=e.to(()=>{this._focusDelayed()}),t.on.mouseup=e.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(t)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_createLabelView(){var e=new R,t=this.bindTemplate;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("labelStyle"),id:this.ariaLabelledBy},children:[{text:t.to("label")}]}),e}_createKeystrokeView(){var e=new R;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",e=>$n(e))}]}),e}_getTooltipString(e,t,i){return e?"string"==typeof e?e:(i=i&&$n(i),e instanceof Function?e(t,i):t+(i?` (${i})`:"")):""}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yc extends I{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){var e=new R;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xc(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:""+e.color}}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qc extends I{constructor(e){super(e);e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:e.to("color")},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ed extends R{constructor(e,t){super(e);e=t&&t.colorDefinitions?t.colorDefinitions:[],this.columns=t&&t.columns?t.columns:5,t={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Xn,this.keystrokes=new Qn,this.items.on("add",(e,t)=>{t.isOn=t.color===this.selectedColor}),e.forEach(e=>{var t=new Qc;t.set({color:e.color,label:e.label,tooltip:!0,hasBorder:e.options.hasBorder}),t.on("execute",()=>{this.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label})}),this.items.add(t)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:t}}),this.on("change:selectedColor",(e,t,i)=>{for(const r of this.items)r.isOn=r.color===i})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const l of this.items)this.focusTracker.add(l.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element);{var{keystrokeHandler:e,focusTracker:r,gridItems:s,numberOfColumns:t,uiLanguageDirection:i}={keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection};const h="number"==typeof t?()=>t:t;function n(i){return e=>{var t=s.find(e=>e.element===r.focusedElement),t=s.getIndex(t),t=i(t,s);s.get(t).focus(),e.stopPropagation(),e.preventDefault()}}function o(e,t){return e===t-1?0:e+1}function a(e,t){return 0===e?t-1:e-1}e.set("arrowright",n((e,t)=>("rtl"===i?a:o)(e,t.length))),e.set("arrowleft",n((e,t)=>("rtl"===i?o:a)(e,t.length))),e.set("arrowup",n((e,t)=>{let i=e-h();return i<0&&(i=e+h()*Math.floor(t.length/h()))>t.length-1&&(i-=h()),i})),e.set("arrowdown",n((e,t)=>{let i=e+h();return i=i>t.length-1?e%h():i}))}}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}function td(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}Ai={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const id=td(Ai);var rd={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function sd(e){var t,i,r,s,n,o,a=[],l=1;return"string"==typeof e?id[e]?(a=id[e].slice(),n="rgb"):"transparent"===e?(n="rgb",a=[l=0,0,0]):/^#[A-Fa-f0-9]+$/.test(e)?(s=e.slice(1),l=1,(o=s.length)<=4?(a=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===o&&(l=parseInt(s[3]+s[3],16)/255)):(a=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===o&&(l=parseInt(s[6]+s[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),n="rgb"):(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e))?(r="rgb"===(i=t[1]),n=s=i.replace(/a$/,""),o="cmyk"===s?4:"gray"===s?1:3,a=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(e,t){if(/%$/.test(e))return t===o?parseFloat(e)/100:"rgb"===s?255*parseFloat(e)/100:parseFloat(e);if("h"===s[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==rd[e])return rd[e]}return parseFloat(e)}),i===s&&a.push(1),l=r||void 0===a[o]?1:a[o],a=a.slice(0,o)):10<e.length&&/[0-9](?:\s|\/)/.test(e)&&(a=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),n=e.match(/([a-z])/gi).join("").toLowerCase()):isNaN(e)?Array.isArray(e)||e.length?(a=[e[0],e[1],e[2]],n="rgb",l=4===e.length?e[3]:1):e instanceof Object&&(a=null!=e.r||null!=e.red||null!=e.R?(n="rgb",[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),l=e.a||e.alpha||e.opacity||1,null!=e.opacity)&&(l/=100):(n="rgb",a=[e>>>16,(65280&e)>>>8,255&e]),{space:n,values:a,alpha:l}}const nd=Ai,od={};for(const r0 of Object.keys(nd))od[nd[r0]]=r0;const V={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Ci=V;for(const s0 of Object.keys(V)){if(!("channels"in V[s0]))throw new Error("missing channels property: "+s0);if(!("labels"in V[s0]))throw new Error("missing channel labels property: "+s0);if(V[s0].labels.length!==V[s0].channels)throw new Error("channel and label counts mismatch: "+s0);var{channels:ad,labels:ld}=V[s0];delete V[s0].channels,delete V[s0].labels,Object.defineProperty(V[s0],"channels",{value:ad}),Object.defineProperty(V[s0],"labels",{value:ld})}V.rgb.hsl=function(e){var t=e[0]/255,i=e[1]/255,e=e[2]/255,r=Math.min(t,i,e),s=Math.max(t,i,e),n=s-r;let o,a;s===r?o=0:t===s?o=(i-e)/n:i===s?o=2+(e-t)/n:e===s&&(o=4+(t-i)/n),(o=Math.min(60*o,360))<0&&(o+=360);e=(r+s)/2;return a=s===r?0:e<=.5?n/(s+r):n/(2-s-r),[o,100*a,100*e]},V.rgb.hsv=function(e){let t,i,r,s,n;function o(e){return(c-e)/6/d+.5}const a=e[0]/255,l=e[1]/255,h=e[2]/255,c=Math.max(a,l,h),d=c-Math.min(a,l,h);return 0==d?(s=0,n=0):(n=d/c,t=o(a),i=o(l),r=o(h),a===c?s=r-i:l===c?s=1/3+t-r:h===c&&(s=2/3+i-t),s<0?s+=1:1<s&&--s),[360*s,100*n,100*c]},V.rgb.hwb=function(e){var t=e[0],i=e[1],r=e[2];return[V.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(i,r))),100*(1-1/255*Math.max(t,Math.max(i,r)))]},V.rgb.cmyk=function(e){var t=e[0]/255,i=e[1]/255,e=e[2]/255,r=Math.min(1-t,1-i,1-e);return[100*((1-t-r)/(1-r)||0),100*((1-i-r)/(1-r)||0),100*((1-e-r)/(1-r)||0),100*r]},V.rgb.keyword=function(e){var t=od[e];if(t)return t;let i=1/0,r;for(const n of Object.keys(nd)){var s=nd[n],s=(e[0]-s[0])**2+(e[1]-s[1])**2+(e[2]-s[2])**2;s<i&&(i=s,r=n)}return r},V.keyword.rgb=function(e){return nd[e]},V.rgb.xyz=function(e){var t=e[0]/255,i=e[1]/255,e=e[2]/255;return[100*(.4124*(t=.04045<t?((.055+t)/1.055)**2.4:t/12.92)+.3576*(i=.04045<i?((.055+i)/1.055)**2.4:i/12.92)+.1805*(e=.04045<e?((.055+e)/1.055)**2.4:e/12.92)),100*(.2126*t+.7152*i+.0722*e),100*(.0193*t+.1192*i+.9505*e)]},V.rgb.lab=function(e){var e=V.rgb.xyz(e),t=e[0],i=e[1],e=e[2];return[116*(i=.008856<(i/=100)?i**(1/3):7.787*i+16/116)-16,500*((.008856<(t/=95.047)?t**(1/3):7.787*t+16/116)-i),200*(i-(.008856<(e/=108.883)?e**(1/3):7.787*e+16/116))]},V.hsl.rgb=function(e){var t=e[0]/360,i=e[1]/100,e=e[2]/100;let r,s,n;if(0==i)return[n=255*e,n,n];var o=2*e-(r=e<.5?e*(1+i):e+i-e*i),a=[0,0,0];for(let e=0;e<3;e++)(s=t+1/3*-(e-1))<0&&s++,1<s&&s--,n=6*s<1?o+6*(r-o)*s:2*s<1?r:3*s<2?o+(r-o)*(2/3-s)*6:o,a[e]=255*n;return a},V.hsl.hsv=function(e){var t=e[0],i=e[1]/100,e=e[2]/100,r=i,s=Math.max(e,.01),n=(r*=s<=1?s:2-s,((e*=2)+(i*=e<=1?e:2-e))/2);return[t,100*(0==e?2*r/(s+r):2*i/(e+i)),100*n]},V.hsv.rgb=function(e){var t=e[0]/60,i=e[1]/100,r=e[2]/100,e=Math.floor(t)%6,t=t-Math.floor(t),s=255*r*(1-i),n=255*r*(1-i*t),o=255*r*(1-i*(1-t));switch(r*=255,e){case 0:return[r,o,s];case 1:return[n,r,s];case 2:return[s,r,o];case 3:return[s,n,r];case 4:return[o,s,r];case 5:return[r,s,n]}},V.hsv.hsl=function(e){var t=e[0],i=e[1]/100,e=e[2]/100,r=Math.max(e,.01),e=(2-i)*e,s=(2-i)*r,i=i*r;return[t,100*((i/=s<=1?s:2-s)||0),100*(e/=2)]},V.hwb.rgb=function(e){var t=e[0]/360;let i=e[1]/100,r=e[2]/100;e=i+r;let s;1<e&&(i/=e,r/=e);var e=Math.floor(6*t),n=1-r,o=(s=6*t-e,1&e&&(s=1-s),i+s*(n-i));let a,l,h;switch(e){default:case 6:case 0:a=n,l=o,h=i;break;case 1:a=o,l=n,h=i;break;case 2:a=i,l=n,h=o;break;case 3:a=i,l=o,h=n;break;case 4:a=o,l=i,h=n;break;case 5:a=n,l=i,h=o}return[255*a,255*l,255*h]},V.cmyk.rgb=function(e){var t=e[0]/100,i=e[1]/100,r=e[2]/100,e=e[3]/100;return[255*(1-Math.min(1,t*(1-e)+e)),255*(1-Math.min(1,i*(1-e)+e)),255*(1-Math.min(1,r*(1-e)+e))]},V.xyz.rgb=function(e){var t=e[0]/100,i=e[1]/100,e=e[2]/100,r=3.2406*t+-1.5372*i+-.4986*e,s=-.9689*t+1.8758*i+.0415*e,t=.0557*t+-.204*i+1.057*e;return s=.0031308<s?1.055*s**(1/2.4)-.055:12.92*s,t=.0031308<t?1.055*t**(1/2.4)-.055:12.92*t,[255*Math.min(Math.max(0,.0031308<r?1.055*r**(1/2.4)-.055:12.92*r),1),255*Math.min(Math.max(0,s),1),255*Math.min(Math.max(0,t),1)]},V.xyz.lab=function(e){var t=e[0],i=e[1],e=e[2];return[116*(i=.008856<(i/=100)?i**(1/3):7.787*i+16/116)-16,500*((.008856<(t/=95.047)?t**(1/3):7.787*t+16/116)-i),200*(i-(.008856<(e/=108.883)?e**(1/3):7.787*e+16/116))]},V.lab.xyz=function(e){var t=(e[0]+16)/116,i=e[1]/500+t,e=t-e[2]/200,r=t**3,s=i**3,n=e**3;return t=.008856<r?r:(t-16/116)/7.787,i=.008856<s?s:(i-16/116)/7.787,e=.008856<n?n:(e-16/116)/7.787,[i*=95.047,t*=100,e*=108.883]},V.lab.lch=function(e){var t=e[0],i=e[1],e=e[2];let r;return(r=360*Math.atan2(e,i)/2/Math.PI)<0&&(r+=360),[t,Math.sqrt(i*i+e*e),r]},V.lch.lab=function(e){var t=e[0],i=e[1],e=e[2]/360*2*Math.PI;return[t,i*Math.cos(e),i*Math.sin(e)]},V.rgb.ansi16=function(e,t=null){var[i,r,s]=e,e=null===t?V.rgb.hsv(e)[2]:t;if(0===(e=Math.round(e/50)))return 30;let n=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(i/255));return 2===e&&(n+=60),n},V.hsv.ansi16=function(e){return V.rgb.ansi16(V.hsv.rgb(e),e[2])},V.rgb.ansi256=function(e){var t=e[0],i=e[1],e=e[2];return t===i&&i===e?t<8?16:248<t?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(e/255*5)},V.ansi16.rgb=function(e){let t=e%10;return 0===t||7===t?(50<e&&(t+=3.5),[t=t/10.5*255,t,t]):(e=.5*(1+~~(50<e)),[(1&t)*e*255,(t>>1&1)*e*255,(t>>2&1)*e*255])},V.ansi256.rgb=function(e){var t;return 232<=e?[t=10*(e-232)+8,t,t]:(e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255])},V.rgb.hex=function(e){e=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},V.hex.rgb=function(e){e=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];3===e[0].length&&(t=t.split("").map(e=>e+e).join(""));e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]},V.rgb.hcg=function(e){var t=e[0]/255,i=e[1]/255,e=e[2]/255,r=Math.max(Math.max(t,i),e),s=Math.min(Math.min(t,i),e),n=r-s;let o,a;return o=n<1?s/(1-n):0,[360*(a=(a=n<=0?0:r===t?(i-e)/n%6:r===i?2+(e-t)/n:4+(t-i)/n)/6%1),100*n,100*o]},V.hsl.hcg=function(e){var t=e[1]/100,i=e[2]/100,t=i<.5?2*t*i:2*t*(1-i);let r=t<1?(i-.5*t)/(1-t):0;return[e[0],100*t,100*r]},V.hsv.hcg=function(e){var t=e[1]/100,i=e[2]/100,t=t*i;let r=t<1?(i-t)/(1-t):0;return[e[0],100*t,100*r]},V.hcg.rgb=function(e){var t=e[0]/360,i=e[1]/100,e=e[2]/100;if(0==i)return[255*e,255*e,255*e];var r=[0,0,0],t=t%1*6,s=t%1,n=1-s;switch(Math.floor(t)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=n,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=n,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=n}return[255*(i*r[0]+(t=(1-i)*e)),255*(i*r[1]+t),255*(i*r[2]+t)]},V.hcg.hsv=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t);let r=0<i?t/i:0;return[e[0],100*r,100*i]},V.hcg.hsl=function(e){var t=e[1]/100,i=e[2]/100*(1-t)+.5*t;let r=0;return 0<i&&i<.5?r=t/(2*i):.5<=i&&i<1&&(r=t/(2*(1-i))),[e[0],100*r,100*i]},V.hcg.hwb=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t);return[e[0],100*(i-t),100*(1-i)]},V.hwb.hcg=function(e){var t=e[1]/100,i=1-e[2]/100,t=i-t;let r=t<1?(i-t)/(1-t):0;return[e[0],100*t,100*r]},V.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},V.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},V.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},V.gray.hsl=function(e){return[0,0,e[0]]},V.gray.hsv=V.gray.hsl,V.gray.hwb=function(e){return[0,100,e[0]]},V.gray.cmyk=function(e){return[0,0,0,e[0]]},V.gray.lab=function(e){return[e[0],0,0]},V.gray.hex=function(e){e=255&Math.round(e[0]/100*255),e=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(e.length)+e},V.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const hd=Ci;function cd(e){var i=function(){var i={},r=Object.keys(hd);for(let e=r.length,t=0;t<e;t++)i[r[t]]={distance:-1,parent:null};return i}(),r=[e];for(i[e].distance=0;r.length;){var s=r.pop(),n=Object.keys(hd[s]);for(let e=n.length,t=0;t<e;t++){var o=n[t],a=i[o];-1===a.distance&&(a.distance=i[s].distance+1,a.parent=s,r.unshift(o))}}return i}function dd(e,t){var i=[t[e].parent,e];let r=hd[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)i.unshift(t[s].parent),r=function(t,i){return function(e){return i(t(e))}}(hd[t[s].parent][s],r),s=t[s].parent;return r.conversion=i,r}const ud=Ci,md=function(e){var i=cd(e),r={},s=Object.keys(i);for(let e=s.length,t=0;t<e;t++){var n=s[t];null!==i[n].parent&&(r[n]=dd(n,i))}return r},gd={},fd=Object.keys(ud);function pd(i){function e(...e){var t=e[0];return null==t?t:(1<t.length&&(e=t),i(e))}return"conversion"in i&&(e.conversion=i.conversion),e}function vd(r){function e(...e){var t=e[0];if(null==t)return t;1<t.length&&(e=t);var i=r(e);if("object"==typeof i)for(let e=i.length,t=0;t<e;t++)i[t]=Math.round(i[t]);return i}return"conversion"in r&&(e.conversion=r.conversion),e}fd.forEach(i=>{gd[i]={},Object.defineProperty(gd[i],"channels",{value:ud[i].channels}),Object.defineProperty(gd[i],"labels",{value:ud[i].labels});const r=md(i);Object.keys(r).forEach(e=>{var t=r[e];gd[i][e]=vd(t),gd[i][e].raw=pd(t)})});i=gd;const wd=function(e,t){for(var i,r=0;r<t.length;r++){const s=t[r];if("string"!=typeof s&&!Array.isArray(s))for(const n in s)"default"===n||n in e||(i=Object.getOwnPropertyDescriptor(s,n))&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>s[n]})}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:td(i)},[i]);
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bd(e,t){if(!e)return"";var i=_d(e);if(!i)return"";if(i.space===t)return e;if(e=i,!Object.keys(wd).includes(e.space))return"";e=wd[i.space][t];if(!e)return"";var r=e("hex"===i.space?i.hexValue:i.values);switch(t){case"hex":return"#"+r;case"rgb":return`rgb( ${r[0]}, ${r[1]}, ${r[2]} )`;case"hsl":return`hsl( ${r[0]}, ${r[1]}%, ${r[2]}% )`;case"hwb":return`hwb( ${r[0]}, ${r[1]}, ${r[2]} )`;case"lab":return`lab( ${r[0]}% ${r[1]} ${r[2]} )`;case"lch":return`lch( ${r[0]}% ${r[1]} ${r[2]} )`;default:return""}}function _d(e){var t;return e.startsWith("#")?{space:"hex",values:(t=sd(e)).values,hexValue:e,alpha:t.alpha}:(t=sd(e)).space?t:null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yd extends R{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id="ck-editor__label_"+q();e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kd extends R{constructor(e,t){super(e);var e="ck-labeled-field-view-"+q(),i="ck-labeled-field-view-status-"+q(),t=(this.fieldView=t(this,e,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(e),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(e,t)=>e||t),this.bindTemplate);this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",t.to("class"),t.if("isEnabled","ck-disabled",e=>!e),t.if("isEmpty","ck-labeled-field-view_empty"),t.if("isFocused","ck-labeled-field-view_focused"),t.if("placeholder","ck-labeled-field-view_placeholder"),t.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){var t=new yd(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){var t=new R(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",e=>!e)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ad extends R{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new Xn,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0),this.set("inputMode","text");e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",e.if("isFocused","ck-input_focused"),e.if("isEmpty","ck-input-text_empty"),e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),inputmode:e.to("inputMode"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to((...e)=>{this.fire("input",...e),this._updateIsEmpty()}),change:e.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(e){this.element.value=e||0===e?e:""}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ed extends Ad{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cd extends R{constructor(e){super(e);e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",e=>"ck-dropdown__panel_"+e),e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:e.to(e=>{"input"!==e.target.tagName.toLocaleLowerCase()&&e.preventDefault()})}})}focus(){var e;this.children.length&&("function"==typeof(e=this.children.first).focus?e.focus():c("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this}))}focusLast(){var e;this.children.length&&("function"==typeof(e=this.children.last).focusLast?e.focusLast():e.focus())}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pd extends R{constructor(e,t,i){super(e);e=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.keystrokes=new Qn,this.focusTracker=new Xn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",e.to("class"),e.if("isEnabled","ck-disabled",e=>!e)],id:e.to("id"),"aria-describedby":e.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":e.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(e,t,i)=>{i&&("auto"===this.panelPosition?this.panelView.position=Pd._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);var e=(e,t)=>{this.isOpen&&(this.isOpen=!1,t())};this.keystrokes.set("arrowdown",(e,t)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,t())}),this.keystrokes.set("arrowright",(e,t)=>{this.isOpen&&t()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){var{south:e,north:t,southEast:i,southWest:r,northEast:s,northWest:n,southMiddleEast:o,southMiddleWest:a,northMiddleEast:l,northMiddleWest:h}=Pd.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[i,r,o,a,e,s,n,l,h,t]:[r,i,a,o,e,n,s,h,l,t]}}Pd.defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"})},Pd._getOptimalPosition=xn;const xd='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Td extends I{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",e=>String(e))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){var e=new Zc;return e.content=xd,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sd{constructor(t){if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const i in t.actions){let e=t.actions[i];for(const r of e="string"==typeof e?[e]:e)t.keystrokeHandler.set(r,(e,t)=>{this[i](),t()})}}get first(){return this.focusables.find(Od)||null}get last(){return this.focusables.filter(Od).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let i=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,t)=>{e=e.element===this.focusTracker.focusedElement;return e&&(i=t),e}),i)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(t){var i=this.current,r=this.focusables.length;if(r){if(null===i)return this[1===t?"first":"last"];let e=(i+r+t)%r;do{var s=this.focusables.get(e);if(Od(s))return s}while((e=(e+r+t)%r)!==i)}return null}}function Od(e){return!(!e.focus||!Pn(e.element))}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rd extends R{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Id extends R{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vd(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Md=S["threeVerticalDots"],Nd={alignLeft:S.alignLeft,bold:S.bold,importExport:S.importExport,paragraph:S.paragraph,plus:S.plus,text:S.text,threeVerticalDots:S.threeVerticalDots};class Bd extends R{constructor(e,t){super(e);var i,r=this.bindTemplate,s=this.t,t=(this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Xn,this.keystrokes=new Qn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new Dd(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection(),"rtl"===e.uiLanguageDirection),s=(this._focusCycler=new Sd({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[t?"arrowright":"arrowleft","arrowup"],focusNext:[t?"arrowleft":"arrowright","arrowdown"]}}),["ck","ck-toolbar",r.to("class"),r.if("isCompact","ck-toolbar_compact")]);this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":r.to("ariaLabel"),style:{maxWidth:r.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:(i=this).bindTemplate.to(e=>{e.target===i.element&&e.preventDefault()})}}),this._behavior=new(this.options.shouldGroupWhenFull?Ld:Fd)(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){const r=Vd(e),s=i||r.removeItems;return this._cleanItemsConfiguration(r.items,t,s).map(e=>y(e)?this._createNestedToolbarDropdown(e,t,s):"|"===e?new Rd:"-"===e?new Id:t.create(e)).filter(e=>!!e)}_cleanItemsConfiguration(e,r,s){e=e.filter((e,t,i)=>"|"===e||!(-1!==s.indexOf(e)||("-"===e?this.options.shouldGroupWhenFull&&(c("toolbarview-line-break-ignored-when-grouping-items",i),1):!y(e)&&!r.has(e)&&(c("toolbarview-item-unavailable",{item:e}),1))));return this._cleanSeparatorsAndLineBreaks(e)}_cleanSeparatorsAndLineBreaks(e){const r=e=>"-"!==e&&"|"!==e,t=e.length,i=e.findIndex(r);var s;return-1===i?[]:(s=t-e.slice().reverse().findIndex(r),e.slice(i,s).filter((e,t,i)=>!!r(e)||!(0<t&&i[t-1]===e)))}_createNestedToolbarDropdown(e,t,i){let{label:r,icon:s,items:n,tooltip:o=!0,withText:a=!1}=e;if(!(n=this._cleanItemsConfiguration(n,t,i)).length)return null;const l=this.locale,h=$d(l);return r||c("toolbarview-nested-toolbar-dropdown-missing-label",e),h.class="ck-toolbar__nested-toolbar-dropdown",h.buttonView.set({label:r,tooltip:o,withText:!!a}),!1!==s?h.buttonView.icon=Nd[s]||s||Md:h.buttonView.withText=!0,qd(h,()=>h.toolbarView._buildItemsFromConfig(n,t,i)),h}}class Dd extends R{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Fd{constructor(e){var t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(e=>e),e.focusables.bindTo(e.items).using(e=>e),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Ld{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),e.children.on("change",this._updateFocusCycleableItems.bind(this)),e.items.on("change",(e,t)=>{var i=t.index,r=Array.from(t.added);for(const n of t.removed)(i>=this.ungroupedItems.length?this.groupedItems:this.ungroupedItems).remove(n);for(let e=i;e<i+r.length;e++){var s=r[e-i];e>this.ungroupedItems.length?this.groupedItems.add(s,e-this.ungroupedItems.length):this.ungroupedItems.add(s,e)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(this.viewElement.ownerDocument.body.contains(this.viewElement))if(Pn(this.viewElement)){var t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}else this.shouldUpdateGroupingOnNextResize=!0}get _areItemsOverflowing(){var e,t,i,r;return!!this.ungroupedItems.length&&(r=this.viewElement,e=this.viewLocale.uiLanguageDirection,t=new b(r.lastChild),i=new b(r),this.cachedPadding||(r=h.window.getComputedStyle(r),this.cachedPadding=Number.parseInt(r["ltr"===e?"paddingRight":"paddingLeft"])),"ltr"===e?t.right>i.right-this.cachedPadding:t.left<i.left+this.cachedPadding)}_enableGroupingOnResize(){let t;this.resizeObserver=new a(this.viewElement,e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Rd),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){var e=this.viewLocale,t=e.t,i=$d(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",qd(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:Md}),i}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zd extends R{constructor(e){super(e);e=this.bindTemplate;this.items=this.createCollection(),this.focusTracker=new Xn,this.keystrokes=new Qn,this._focusCycler=new Sd({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:e.to("role"),"aria-label":e.to("ariaLabel")},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jd extends R{constructor(e){super(e);e=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",e.if("isVisible","ck-hidden",e=>!e)],role:"presentation"},children:this.children})}focus(){this.children.first.focus()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hd extends R{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wd extends R{constructor(e){super(e);e=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Qn,this.focusTracker=new Xn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",e.to("class"),e.if("isVisible","ck-hidden",e=>!e),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){var e=new I;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){var e=new I,t=e.bindTemplate;return e.icon=xd,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",e=>String(e))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $d(e,t=Td){var t=new t(e),i=new Cd(e),e=new Pd(e,t,i),r=(t.bind("isEnabled").to(e),(t instanceof Wd?t.arrowView:t).bind("isOn").to(e,"isOpen"),i=e),s=(r.on("render",()=>{xc({emitter:r,activator:()=>r.isOpen,callback:()=>{r.isOpen=!1},contextElements:[r.element]})}),i),n=(s.on("execute",e=>{e.source instanceof Yc||(s.isOpen=!1)}),i),o=(n.focusTracker.on("change:isFocused",(e,t,i)=>{n.isOpen&&!i&&(n.isOpen=!1)}),i),a=(o.keystrokes.set("arrowdown",(e,t)=>{o.isOpen&&(o.panelView.focus(),t())}),o.keystrokes.set("arrowup",(e,t)=>{o.isOpen&&(o.panelView.focusLast(),t())}),i),l=(a.on("change:isOpen",(e,t,i)=>{i||(i=a.panelView.element)&&i.contains(h.document.activeElement)&&a.buttonView.focus()}),i);return l.on("change:isOpen",(e,t,i)=>{i&&l.panelView.focus()},{priority:"low"}),e}function qd(e,t,i={}){e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),e.isOpen?Ud(e,t,i):e.once("change:isOpen",()=>Ud(e,t,i),{priority:"highest"}),i.enableActiveItemFocusOnDropdownOpen&&Jd(e,()=>e.toolbarView.items.find(e=>e.isOn))}function Ud(e,t,i){var r=e.locale,s=r.t,r=e.toolbarView=new Bd(r),t="function"==typeof t?t():t;r.ariaLabel=i.ariaLabel||s("Dropdown toolbar"),i.maxWidth&&(r.maxWidth=i.maxWidth),i.class&&(r.class=i.class),i.isCompact&&(r.isCompact=i.isCompact),i.isVertical&&(r.isVertical=!0),t instanceof Oc?r.items.bindTo(t).using(e=>e):r.items.addMany(t),e.panelView.children.add(r),r.items.delegate("execute").to(e)}function Gd(e,t,i={}){e.isOpen?Kd(e,t,i):e.once("change:isOpen",()=>Kd(e,t,i),{priority:"highest"}),Jd(e,()=>e.listView.items.find(e=>e instanceof jd&&e.children.first.isOn))}function Kd(e,t,i){const r=e.locale,s=e.listView=new zd(r),n="function"==typeof t?t():t;s.ariaLabel=i.ariaLabel,s.role=i.role,s.items.bindTo(n).using(t=>{if("separator"===t.type)return new Hd(r);if("button"!==t.type&&"switchbutton"!==t.type)return null;{var i=new jd(r);let e;return(e=new("button"===t.type?I:Yc)(r)).bind(...Object.keys(t.model)).to(t.model),e.delegate("execute").to(i),i.children.add(e),i}}),e.panelView.children.add(s),s.items.delegate("execute").to(e)}function Jd(t,i){t.on("change:isOpen",()=>{var e;t.isOpen&&(e=i())&&("function"==typeof e.focus?e.focus():c("ui-dropdown-focus-child-on-open-child-missing-focus",{view:e}))},{priority:U.low-10})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Zd(e,t,i){var r=new Ed(e.locale);return r.set({id:t,ariaDescribedById:i}),r.bind("isReadOnly").to(e,"isEnabled",e=>!e),r.bind("hasError").to(e,"errorText",e=>!!e),r.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused","placeholder").to(r),r}const Yd=(e,t=0,i=1)=>i<e?i:e<t?t:e,Xd=(e,t=0,i=Math.pow(10,t))=>Math.round(i*e)/i,Qd=e=>(e="#"===e[0]?e.substring(1):e).length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Xd(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?Xd(parseInt(e.substring(6,8),16)/255,2):1},eu=e=>{{var{r:e,g:t,b:i,a:r}=(({h:e,s:t,v:i,a:r})=>{e=e/360*6,t=t/100,i=i/100;const s=Math.floor(e),n=i*(1-t),o=i*(1-(e-s)*t),a=i*(1-(1-e+s)*t),l=s%6;return{r:Xd([i,o,n,n,a,i][l]*255),g:Xd([a,i,i,o,n,n][l]*255),b:Xd([n,n,a,i,i,o][l]*255),a:Xd(r,2)}})(e),s=r<1?iu(Xd(255*r)):"";return"#"+iu(e)+iu(t)+iu(i)+s}},tu=e=>{({h:e,s:r,v:s,a:t}=e),i=(200-r)*s/100;var t,i,{h:e,s:r,l:s}={h:Xd(e),s:Xd(0<i&&i<200?r*s/100/(i<=100?i:200-i)*100:0),l:Xd(i/2),a:Xd(t,2)};return`hsl(${e}, ${r}%, ${s}%)`},iu=e=>{e=e.toString(16);return e.length<2?"0"+e:e},ru=(e,t)=>{if(e!==t)for(const i in e)if(e[i]!==t[i])return!1;return!0},su={},nu=e=>{let t=su[e];return t||((t=document.createElement("template")).innerHTML=e,su[e]=t),t},ou=(e,t,i)=>{e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:i}))};let au=!1;const lu=e=>"touches"in e,hu=(e,t)=>{var t=lu(t)?t.touches[0]:t,i=e.el.getBoundingClientRect();ou(e.el,"move",e.getMove({x:Yd((t.pageX-(i.left+window.pageXOffset))/i.width),y:Yd((t.pageY-(i.top+window.pageYOffset))/i.height)}))};class cu{constructor(e,t,i,r){i=nu(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`),e.appendChild(i.content.cloneNode(!0)),i=e.querySelector(`[part=${t}]`);i.addEventListener("mousedown",this),i.addEventListener("touchstart",this),i.addEventListener("keydown",this),this.el=i,this.xy=r,this.nodes=[i.firstChild,i]}set dragging(e){e=e?document.addEventListener:document.removeEventListener;e(au?"touchmove":"mousemove",this),e(au?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":e.preventDefault(),r=e,au&&!lu(r)||(au=au||lu(r),0)||!au&&0!=e.button||(this.el.focus(),hu(this,e),this.dragging=!0);break;case"mousemove":case"touchmove":e.preventDefault(),hu(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":r=this,40<(i=(t=e).keyCode)||r.xy&&i<37||i<33||(t.preventDefault(),ou(r.el,"move",r.getMove({x:39===i?.01:37===i?-.01:34===i?.05:33===i?-.05:35===i?1:36===i?-1:0,y:40===i?.01:38===i?-.01:0},!0)))}var t,i,r}style(e){e.forEach((e,t)=>{for(const i in e)this.nodes[t].style.setProperty(i,e[i])})}}class du extends cu{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:e/360*100+"%",color:tu({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",""+Xd(e))}getMove(e,t){return{h:t?Yd(this.h+360*e.x,0,360):360*e.x}}}class uu extends cu{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:100-e.v+"%",left:e.s+"%",color:tu(e)},{"background-color":tu({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${Xd(e.s)}%, Brightness ${Xd(e.v)}%`)}getMove(e,t){return{s:t?Yd(this.hsva.s+100*e.x,0,100):100*e.x,v:t?Yd(this.hsva.v-100*e.y,0,100):Math.round(100-100*e.y)}}}const mu=Symbol("same"),gu=Symbol("color"),fu=Symbol("hsva"),pu=Symbol("update"),vu=Symbol("parts"),wu=Symbol("css"),bu=Symbol("sliders");class _u extends HTMLElement{static get observedAttributes(){return["color"]}get[wu](){return[':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',"[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}","[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}"]}get[bu](){return[uu,du]}get color(){return this[gu]}set color(e){var t;this[mu](e)||(t=this.colorModel.toHsva(e),this[pu](t),this[gu]=e)}constructor(){super();const e=nu(`<style>${this[wu].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[vu]=this[bu].map(e=>new e(t))}connectedCallback(){var e;this.hasOwnProperty("color")?(e=this.color,delete this.color,this.color=e):this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){i=this.colorModel.fromAttr(i);this[mu](i)||(this.color=i)}handleEvent(e){var t=this[fu],e={...t,...e.detail};this[pu](e);let i;ru(e,t)||this[mu](i=this.colorModel.fromHsva(e))||(this[gu]=i,ou(this,"color-changed",{value:i}))}[mu](e){return this.color&&this.colorModel.equal(e,this.color)}[pu](t){this[fu]=t,this[vu].forEach(e=>e.update(t))}}const yu={defaultColor:"#000",toHsva:e=>{{var{r:e,g:t,b:i,a:r}=Qd(e),s=Math.max(e,t,i),n=s-Math.min(e,t,i),o=n?s===e?(t-i)/n:s===t?2+(i-e)/n:4+(e-t)/n:0;return{h:Xd(60*(o<0?6+o:o)),s:Xd(s?n/s*100:0),v:Xd(s/255*100),a:r}}},fromHsva:({h:e,s:t,v:i})=>eu({h:e,s:t,v:i,a:1}),equal:(e,t)=>e.toLowerCase()===t.toLowerCase()||ru(Qd(e),Qd(t)),fromAttr:e=>e};class ku extends _u{get colorModel(){return yu}}customElements.define("hex-color-picker",class extends ku{});class Au extends R{constructor(e,t){super(e),this.set("color",""),this.set("_hexColor",""),this._format=t.format||"hsl",this.hexInputRow=this._createInputRow();e=this.createCollection();e.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:e}),this._debounceColorPickerEvent=ks(e=>{this.set("color",e)},150,{leading:!0}),this.on("set:color",(e,t,i)=>{e.return=bd(i,this._format)}),this.on("change:color",()=>{this._hexColor=Eu(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Eu(this.color)!=Eu(this._hexColor)&&(this.color=this._hexColor)})}render(){var e;super.render(),this.picker=h.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element&&(this.element.insertBefore(this.picker,this.hexInputRow.element),(e=document.createElement("style")).textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)),this.picker.addEventListener("color-changed",e=>{e=e.detail.value;this._debounceColorPickerEvent(e)})}focus(){/* istanbul ignore next -- @preserve */(m.isGecko||m.isiOS||m.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){var e=[...this.picker.shadowRoot.children].filter(e=>"slider"===e.getAttribute("role")).map(e=>new Cu(e));this.slidersView=this.createCollection(),e.forEach(e=>{this.slidersView.add(e)})}_createInputRow(){var e=new Pu,t=this._createColorInput();return new xu(this.locale,[e,t])}_createColorInput(){const t=new kd(this.locale,Zd),e=this.locale["t"];return t.set({label:e("HEX"),class:"color-picker-hex-input"}),t.fieldView.bind("value").to(this,"_hexColor",e=>t.isFocused?t.fieldView.value:e.startsWith("#")?e.substring(1):e),t.fieldView.on("input",()=>{var e=t.fieldView.element.value;e&&(e=(e=e.trim()).startsWith("#")?e.substring(1):e,[3,4,6,8].includes(e.length))&&/(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})/.test(e)&&this._debounceColorPickerEvent("#"+e)}),t}}function Eu(e){let t=(e=e)?(i=_d(e))?"hex"===i.space?i.hexValue:bd(e,"hex"):"#000":"";var i;return(t=4===(t=t||"#000").length?"#"+[t[1],t[1],t[2],t[2],t[3],t[3]].join(""):t).toLowerCase()}class Cu extends R{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class Pu extends R{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class xu extends R{constructor(e,t){super(e),this.children=this.createCollection(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tu{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(Su(e),{callback:t,originalName:e})}create(e){if(this.has(e))return this._components.get(Su(e)).callback(this.editor.locale);throw new w("componentfactory-item-missing",this,{name:e})}has(e){return this._components.has(Su(e))}}function Su(e){return String(e).toLowerCase()}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ou=yn("px"),Ru=h.document.body;class Iu extends R{constructor(e){super(e);e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",e=>"ck-balloon-panel_"+e),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Ou),left:e.to("left",Ou)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();var t=Iu.defaultPositions,t=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:Ru,fitInViewport:!0},e),e=Iu._getOptimalPosition(t),t=parseInt(e.left),i=parseInt(e.top),r=e.name,{withArrow:e=!0}=e.config||{};this.top=i,this.left=t,this.position=r,this.withArrow=e}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(r){this.attachTo(r);const s=Vu(r.target),n=r.limiter?Vu(r.limiter):Ru;this.listenTo(h.document,"scroll",(e,t)=>{var t=t.target,i=s&&t.contains(s),t=n&&t.contains(n);!i&&!t&&s&&n||this.attachTo(r)},{useCapture:!0}),this.listenTo(h.window,"resize",()=>{this.attachTo(r)})}_stopPinning(){this.stopListening(h.document,"scroll"),this.stopListening(h.window,"resize")}}function Vu(e){return Os(e)?e:mn(e)?e.commonAncestorContainer:"function"==typeof e?Vu(e()):null}function Mu(e={}){const{sideOffset:i=Iu.arrowSideOffset,heightOffset:r=Iu.arrowHeightOffset,stickyVerticalOffset:s=Iu.stickyVerticalOffset,config:n}=e;return{northWestArrowSouthWest:(e,t)=>({top:o(e,t),left:e.left-i,name:"arrow_sw",...n&&{config:n}}),northWestArrowSouthMiddleWest:(e,t)=>({top:o(e,t),left:e.left-.25*t.width-i,name:"arrow_smw",...n&&{config:n}}),northWestArrowSouth:(e,t)=>({top:o(e,t),left:e.left-t.width/2,name:"arrow_s",...n&&{config:n}}),northWestArrowSouthMiddleEast:(e,t)=>({top:o(e,t),left:e.left-.75*t.width+i,name:"arrow_sme",...n&&{config:n}}),northWestArrowSouthEast:(e,t)=>({top:o(e,t),left:e.left-t.width+i,name:"arrow_se",...n&&{config:n}}),northArrowSouthWest:(e,t)=>({top:o(e,t),left:e.left+e.width/2-i,name:"arrow_sw",...n&&{config:n}}),northArrowSouthMiddleWest:(e,t)=>({top:o(e,t),left:e.left+e.width/2-.25*t.width-i,name:"arrow_smw",...n&&{config:n}}),northArrowSouth:(e,t)=>({top:o(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s",...n&&{config:n}}),northArrowSouthMiddleEast:(e,t)=>({top:o(e,t),left:e.left+e.width/2-.75*t.width+i,name:"arrow_sme",...n&&{config:n}}),northArrowSouthEast:(e,t)=>({top:o(e,t),left:e.left+e.width/2-t.width+i,name:"arrow_se",...n&&{config:n}}),northEastArrowSouthWest:(e,t)=>({top:o(e,t),left:e.right-i,name:"arrow_sw",...n&&{config:n}}),northEastArrowSouthMiddleWest:(e,t)=>({top:o(e,t),left:e.right-.25*t.width-i,name:"arrow_smw",...n&&{config:n}}),northEastArrowSouth:(e,t)=>({top:o(e,t),left:e.right-t.width/2,name:"arrow_s",...n&&{config:n}}),northEastArrowSouthMiddleEast:(e,t)=>({top:o(e,t),left:e.right-.75*t.width+i,name:"arrow_sme",...n&&{config:n}}),northEastArrowSouthEast:(e,t)=>({top:o(e,t),left:e.right-t.width+i,name:"arrow_se",...n&&{config:n}}),southWestArrowNorthWest:e=>({top:a(e),left:e.left-i,name:"arrow_nw",...n&&{config:n}}),southWestArrowNorthMiddleWest:(e,t)=>({top:a(e),left:e.left-.25*t.width-i,name:"arrow_nmw",...n&&{config:n}}),southWestArrowNorth:(e,t)=>({top:a(e),left:e.left-t.width/2,name:"arrow_n",...n&&{config:n}}),southWestArrowNorthMiddleEast:(e,t)=>({top:a(e),left:e.left-.75*t.width+i,name:"arrow_nme",...n&&{config:n}}),southWestArrowNorthEast:(e,t)=>({top:a(e),left:e.left-t.width+i,name:"arrow_ne",...n&&{config:n}}),southArrowNorthWest:e=>({top:a(e),left:e.left+e.width/2-i,name:"arrow_nw",...n&&{config:n}}),southArrowNorthMiddleWest:(e,t)=>({top:a(e),left:e.left+e.width/2-.25*t.width-i,name:"arrow_nmw",...n&&{config:n}}),southArrowNorth:(e,t)=>({top:a(e),left:e.left+e.width/2-t.width/2,name:"arrow_n",...n&&{config:n}}),southArrowNorthMiddleEast:(e,t)=>({top:a(e),left:e.left+e.width/2-.75*t.width+i,name:"arrow_nme",...n&&{config:n}}),southArrowNorthEast:(e,t)=>({top:a(e),left:e.left+e.width/2-t.width+i,name:"arrow_ne",...n&&{config:n}}),southEastArrowNorthWest:e=>({top:a(e),left:e.right-i,name:"arrow_nw",...n&&{config:n}}),southEastArrowNorthMiddleWest:(e,t)=>({top:a(e),left:e.right-.25*t.width-i,name:"arrow_nmw",...n&&{config:n}}),southEastArrowNorth:(e,t)=>({top:a(e),left:e.right-t.width/2,name:"arrow_n",...n&&{config:n}}),southEastArrowNorthMiddleEast:(e,t)=>({top:a(e),left:e.right-.75*t.width+i,name:"arrow_nme",...n&&{config:n}}),southEastArrowNorthEast:(e,t)=>({top:a(e),left:e.right-t.width+i,name:"arrow_ne",...n&&{config:n}}),westArrowEast:(e,t)=>({top:e.top+e.height/2-t.height/2,left:e.left-t.width-r,name:"arrow_e",...n&&{config:n}}),eastArrowWest:(e,t)=>({top:e.top+e.height/2-t.height/2,left:e.right+r,name:"arrow_w",...n&&{config:n}}),viewportStickyNorth:(e,t,i)=>e.getIntersection(i)?{top:i.top+s,left:e.left+e.width/2-t.width/2,name:"arrowless",config:{withArrow:!1,...n}}:null};function o(e,t){return e.top-t.height-r}function a(e){return e.bottom+r}}Iu.arrowSideOffset=25,Iu.arrowHeightOffset=10,Iu.stickyVerticalOffset=20,Iu._getOptimalPosition=xn,Iu.defaultPositions=Mu();
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nu="ck-tooltip";class Bu extends ln(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,Bu._editors.add(e),Bu._instance)return Bu._instance;(Bu._instance=this).tooltipTextView=new R(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new Iu(e.locale),this.balloonPanelView.class=Nu,this.balloonPanelView.content.add(this.tooltipTextView),this._pinTooltipDebounced=ks(this._pinTooltip,600),this.listenTo(h.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(h.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(h.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(h.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(h.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){var t=e.ui.view&&e.ui.view.body;Bu._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Bu._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Bu._instance=null)}static getPositioningFunctions(e){var t=Bu.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onEnterOrFocus(e,{target:t}){t=Du(t);t&&t!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(t,{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){"mouseleave"===e.name?!Os(t)||this._currentElementWithTooltip&&t!==this._currentElementWithTooltip||(e=Du(t),i=Du(i),e&&e!==i&&this._unpinTooltip()):this._currentElementWithTooltip&&t!==this._currentElementWithTooltip||this._unpinTooltip()}_onScroll(e,{target:t}){!this._currentElementWithTooltip||t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip()}_pinTooltip(e,{text:t,position:i,cssClass:r}){var s=Yn(Bu._editors.values()).ui.view.body;s.has(this.balloonPanelView)||s.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.pin({target:e,positions:Bu.getPositioningFunctions(i)}),this._resizeObserver=new a(e,()=>{Pn(e)||this._unpinTooltip()}),this.balloonPanelView.class=[Nu,r].filter(e=>e).join(" ");for(const n of Bu._editors)this.listenTo(n.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Bu._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){Pn(this._currentElementWithTooltip)?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Bu.getPositioningFunctions(this._currentTooltipPosition)}):this._unpinTooltip()}}function Du(e){return Os(e)?e.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}Bu.defaultBalloonPositions=Mu({heightOffset:5,sideOffset:13}),Bu._editors=new Set,Bu._instance=null;const Fu=50,Lu=350,zu={top:-99999,left:-99999,name:"invalid",config:{withArrow:!1}};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ju extends ln(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=zs(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){var e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){var e=this.editor;/* istanbul ignore next -- @preserve */!!!e.config.get("ui.poweredBy.forceVisible")&&"VALID"===function(e){function t(e){return 40<=e.length&&e.length<=255?"VALID":"INVALID"}if(!e)return"INVALID";let i="";try{i=atob(e)}catch{return"INVALID"}var r=i.split("-"),s=r[0];if(!(r=r[1]))return t(e);try{atob(r)}catch{try{if(atob(s),!atob(s).length)return t(e)}catch{return t(e)}}if(s.length<40||255<s.length)return"INVALID";let n="";try{atob(s),n=atob(r)}catch{return"INVALID"}return 8!==n.length||(e=Number(n.substring(0,4)),s=Number(n.substring(4,6))-1,r=Number(n.substring(6,8)),(e=new Date(e,s,r))<J)||isNaN(Number(e))?"INVALID":"VALID"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(e.config.get("licenseKey"))||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(e,t,i)=>{this._updateLastFocusedEditableElement(),i?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(e,t,i)=>{this._updateLastFocusedEditableElement(),i&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){var e=this.editor,t=this._balloonView=new Iu,i=$u(e),i=new Hu(e.locale,i.label);t.content.add(i),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),e.ui.focusTracker.add(t.element),this._balloonView=t}_showBalloon(){var e;this._lastFocusedEditableElement&&(e=function(e,t){e=$u(e),e=("right"===e.side?function(e,i){return Wu(e,i,(e,t)=>e.left+e.width-t.width-i.horizontalOffset)}:function(e,t){return Wu(e,t,e=>e.left+t.horizontalOffset)})(t,e);return{target:t,positions:[e]}}(this.editor,this._lastFocusedEditableElement))&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const t=this.editor,e=t.ui.focusTracker.isFocused,i=t.ui.focusTracker.focusedElement;var r;e&&i?(r=Array.from(t.ui.getEditableElementsNames()).map(e=>t.ui.getEditableElement(e))).includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=r[0]:this._lastFocusedEditableElement=null}}class Hu extends R{constructor(e,t){super(e);var e=new Zc,i=this.bindTemplate;e.set({content:`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,isColorInherited:!1}),e.extendTemplate({attributes:{style:{width:"53px",height:"10px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],e],on:{dragstart:i.to(e=>e.preventDefault())}}]})}}function Wu(n,o,a){return(e,t)=>{var i=e.getVisible();if(!i||e.width<Lu||e.height<Fu)return zu;let r;r="inside"===o.position?e.bottom-t.height:e.bottom-t.height/2,r-=o.verticalOffset;e=a(e,t);if("inside"===o.position){var s=t.clone().moveTo(e,r);if(s.getIntersectionArea(i)<s.getArea())return zu}else{s=function(e){let t=e.parentElement;if(!t)return null;for(;"BODY"!=t.tagName;){var i=t.style.overflowY||h.window.getComputedStyle(t).overflowY;if("auto"===i||"scroll"===i)break;if(!(t=t.parentElement))return null}return t}(n);if(s){s=new b(s);if(i.bottom+t.height/2>s.bottom)return zu}}return{top:r,left:e,name:`position_${o.position}-side_`+o.side,config:{withArrow:!1}}}}function $u(e){var t=e.config.get("ui.poweredBy"),i=t&&t.position||"border";return{position:i,label:"Powered by",verticalOffset:"inside"===i?5:0,horizontalOffset:5,side:"ltr"===e.locale.contentLanguageDirection?"right":"left",...t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qu extends s(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];var t=e.editing.view;this.editor=e,this.componentFactory=new Tu(e),this.focusTracker=new Xn,this.tooltipManager=new Bu(e),this.poweredBy=new ju(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);var i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){var t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){var e=this.editor,t=e.config.get("ui.viewportOffset");return t||((t=e.config.get("toolbar.viewportTopOffset"))?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:t}):{top:0})}_initFocusTracking(){const r=this.editor,n=r.editing.view;let o,a;r.keystrokes.set("Alt+F10",(e,t)=>{var i=this.focusTracker.focusedElement,r=(Array.from(this._editableElementsMap.values()).includes(i)&&!Array.from(n.domRoots.values()).includes(i)&&(o=i),this._getCurrentFocusedToolbarDefinition());r&&a||(a=this._getFocusableCandidateToolbarDefinitions());for(let e=0;e<a.length;e++){var s=a.shift();if(a.push(s),s!==r&&this._focusFocusableCandidateToolbar(s)){r&&r.options.afterBlur&&r.options.afterBlur();break}}t()}),r.keystrokes.set("Esc",(e,t)=>{var i=this._getCurrentFocusedToolbarDefinition();i&&(o?(o.focus(),o=null):r.editing.view.focus(),i.options.afterBlur&&i.options.afterBlur(),t())})}_getFocusableCandidateToolbarDefinitions(){var e=[];for(const r of this._focusableToolbarDefinitions){var{toolbarView:t,options:i}=r;(Pn(t.element)||i.beforeFocus)&&e.push(r)}return e.sort((e,t)=>Uu(e)-Uu(t)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){var{toolbarView:e,options:{beforeFocus:t}}=e;return t&&t(),!!Pn(e.element)&&(e.focus(),!0)}_handleScrollToTheSelection(e,t){var i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}}function Uu(e){var{toolbarView:e,options:t}=e;let i=10;return Pn(e.element)&&i--,t.isContextual&&i--,i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gu extends R{constructor(e){super(e),this.body=new Jc(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ku extends R{constructor(e,t,i){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const n=this._editingView;function o(i){n.change(e=>{var t=n.document.getRoot(i.name);e.addClass(i.isFocused?"ck-focused":"ck-blurred",t),e.removeClass(i.isFocused?"ck-blurred":"ck-focused",t)})}(n.isRenderingInProgress?function r(s){n.once("change:isRenderingInProgress",(e,t,i)=>{(i?r:o)(s)})}:o)(this)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ju extends Ku{constructor(e,t,i,r={}){super(e,t,i);const s=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=r.label||(()=>s("Editor editing area: %0",this.name))}render(){super.render();const i=this._editingView;i.change(e=>{var t=i.document.getRoot(this.name);e.setAttribute("aria-label",this._generateLabel(this),t)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zu extends s(){constructor(e,t){super(),t&&Ht(this,t),e&&this.set(e)}}const Yu=yn("px");
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xu extends n{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{var e=this.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new w("contextualballoon-add-view-exist",[this,e]);var t,i=e.stackId||"main";this._idToStack.has(i)?(t=this._idToStack.get(i),e.singleViewMode&&this.showStack(i),t.set(e.view,e),this._viewToStack.set(e.view,t),t===this._visibleStack&&this._showView(e)):(this._idToStack.set(i,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(i)),this._numberOfStacks=this._idToStack.size,this._visibleStack&&!e.singleViewMode||this.showStack(i))}remove(e){if(!this.hasView(e))throw new w("contextualballoon-remove-view-not-exist",[this,e]);var t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?1<this._idToStack.size?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;e=this._idToStack.get(e);if(!e)throw new w("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}_createPanelView(){this._view=new Iu(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(e=>e[1]===t)[0]}_showNextStack(){var e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){var e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new Qu(this.editor.locale),r=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(e,t)=>!t&&1<e),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(e,t)=>{var i;return t<2?"":(i=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1,r("%0 of %1",[i,t]))}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new em(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(e,t)=>!t&&2<=e?Math.min(e-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class Qu extends R{constructor(e){super(e);var e=e.t,t=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Xn,this.buttonPrevView=this._createButtonView(e("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(e("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",t.to("isNavigationVisible",e=>e?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:t.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){var i=new I(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class em extends R{constructor(e,t){super(e);e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",e.to("numberOfPanels",e=>e?"":"ck-hidden")],style:{top:e.to("top",Yu),left:e.to("left",Yu),width:e.to("width",Yu),height:e.to("height",Yu)}},children:this.content}),this.on("change:numberOfPanels",(e,t,i,r)=>{r<i?this._addPanels(i-r):this._removePanels(r-i),this.updatePosition()})}_addPanels(e){for(;e--;){var t=new R;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){var t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){var e,t,i,r;this.numberOfPanels&&({top:e,left:t}=this._balloonPanelView,{width:i,height:r}=new b(this._balloonPanelView.element),Object.assign(this,{top:e,left:t,width:i,height:r}))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tm={colorPaletteIcon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>'};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class im extends qu{constructor(e,t){super(e),this.view=t,this._toolbarConfig=Vd(e.config.get("toolbar"))}get element(){return this.view.editable.element}init(){var e=this.editor,t=this.view,e=e.editing.view,i=t.editable,r=e.document.getRoot(),r=(i.name=r.rootName,t.render(),i.element);this.setEditableElement(i.name,r),i.bind("isFocused").to(this.focusTracker),e.attachDomRoot(r),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();var e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.editor,t=this.view,i=t.editable.element,r=t.toolbar;t.panel.bind("isVisible").to(this.focusTracker,"isFocused"),t.bind("viewportTopOffset").to(this,"viewportOffset",({top:e})=>e||0),t.listenTo(e.ui,"update",()=>{t.panel.isVisible&&t.panel.pin({target:i,positions:t.panelPositions})}),r.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(r)}_initPlaceholder(){var e=this.editor,t=e.editing.view,i=t.document.getRoot(),e=(e.sourceElement,e.config.get("placeholder"));if(e){e="string"==typeof e?e:e[i.rootName];if(e){var{view:r,element:t,text:i,isDirectHost:e,keepOnFocus:s}=[{view:t,element:i,text:e,isDirectHost:!1,keepOnFocus:!0}][0];const n=r.document;co.has(n)||(co.set(n,new Map),n.registerPostFixer(e=>uo(n,e)),n.on("change:isComposing",()=>{r.change(e=>uo(n,e))},{priority:"high"})),co.get(n).set(t,{text:i,isDirectHost:e,keepOnFocus:s,hostElement:e?t:null}),r.change(e=>uo(n,e))}}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rm=yn("px");class sm extends Gu{constructor(e,t,i,r={}){super(e);const s=e.t;this.toolbar=new Bd(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull,isFloating:!0}),this.set("viewportTopOffset",0),this.panel=new Iu(e),this.panelPositions=this._getPanelPositions(),this.panel.extendTemplate({attributes:{class:"ck-toolbar-container"}}),this.editable=new Ju(e,t,i,{label:e=>s("Rich Text Editor. Editing area: %0",e.name)}),this._resizeObserver=null}render(){if(super.render(),this.body.add(this.panel),this.registerChild(this.editable),this.panel.content.add(this.toolbar),this.toolbar.options.shouldGroupWhenFull){const e=this.editable.element;this._resizeObserver=new a(e,()=>{this.toolbar.maxWidth=rm(new b(e).width)})}}destroy(){super.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getPanelPositionTop(e,t){let i;return i=e.top>t.height+this.viewportTopOffset?e.top-t.height:e.bottom>t.height+this.viewportTopOffset+50?this.viewportTopOffset:e.bottom}_getPanelPositions(){var e=[(e,t)=>({top:this._getPanelPositionTop(e,t),left:e.left,name:"toolbar_west",config:{withArrow:!1}}),(e,t)=>({top:this._getPanelPositionTop(e,t),left:e.left+e.width-t.width,name:"toolbar_east",config:{withArrow:!1}})];return"ltr"===this.locale.uiLanguageDirection?e:e.reverse()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nm extends wc(bc(vc)){constructor(t,e={}){if(!om(t)&&void 0!==e.initialData)throw new w("editor-create-initial-data",null);if(super(e),void 0===this.config.get("initialData")&&this.config.set("initialData",om(e=t)?function(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}(e):e),this.model.document.createRoot(),om(t)){this.sourceElement=t,e=this;var i=t;if(i.ckeditorInstance)throw new w("editor-source-element-already-used",e);(i.ckeditorInstance=e).once("destroy",()=>{delete i.ckeditorInstance})}var t=!this.config.get("toolbar.shouldNotGroupWhenFull"),e=new sm(this.locale,this.editing.view,this.sourceElement,{shouldToolbarGroupWhenFull:t}),r=(this.ui=new im(this,e),this);if(!Le(r.updateSourceElement))throw new w("attachtoform-missing-elementapi-interface",r);t=r.sourceElement;if((e=t)&&"textarea"===e.tagName.toLowerCase()&&t.form){let e;const s=t.form,n=()=>r.updateSourceElement();Le(s.submit)&&(e=s.submit,s.submit=()=>{n(),e.apply(s)}),s.addEventListener("submit",n),r.on("destroy",()=>{s.removeEventListener("submit",n),e&&(s.submit=e)})}}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then(()=>{this.sourceElement&&this.updateSourceElement(e)})}static create(i,r={}){return new Promise(e=>{if(om(i)&&"TEXTAREA"===i.tagName)throw new w("editor-wrong-element",null);const t=new this(i,r);e(t.initPlugins().then(()=>t.ui.init()).then(()=>t.data.init(t.config.get("initialData"))).then(()=>t.fire("ready")).then(()=>t))})}}function om(e){return Os(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */nm.Context=ho,nm.EditorWatchdog=Ac,nm.ContextWatchdog=class extends _c{constructor(t,e={}){super(e),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new Cc,this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=e=>e.destroy(),this._actionQueues.onEmpty(()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(Ec,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){e=Pc(e);return Promise.all(e.map(s=>this._actionQueues.enqueue(s.id,()=>{if("destroyed"===this.state)throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if("editor"===s.type)return(r=new Ac(null,this._watchdogConfig)).setCreator(s.creator),r._setExcludedProperties(this._contextProps),s.destructor&&r.setDestructor(s.destructor),this._watchdogs.set(s.id,r),r.on("error",(e,{error:t,causesRestart:i})=>{this._fire("itemError",{itemId:s.id,error:t}),i&&this._actionQueues.enqueue(s.id,()=>new Promise(e=>{const t=()=>{r.off("restart",t),this._fire("itemRestart",{itemId:s.id}),e()};r.on("restart",t)}))}),r.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(e){e=Pc(e);return Promise.all(e.map(t=>this._actionQueues.enqueue(t,()=>{var e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))}destroy(){return this._actionQueues.enqueue(Ec,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Ec,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=yc(this._context),Promise.all(Array.from(this._watchdogs.values()).map(e=>(e._setExcludedProperties(this._contextProps),e.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(e=>e.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){var t=this._watchdogs.get(e);if(t)return t;throw new Error(`Item with the given id was not registered: ${e}.`)}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return kc(this._context,e.context)}};class am extends Va{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const n=this.document;function t(s){return(e,t)=>{t.preventDefault();var i=t.dropRange?[t.dropRange]:null,r=new W(n,s);n.fire(r,{dataTransfer:t.dataTransfer,method:e.name,targetRanges:i,target:t.target,domEvent:t.domEvent}),r.stop.called&&t.stopPropagation()}}this.listenTo(n,"paste",t("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",t("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",t("dragging"),{priority:"low"})}onDomEvent(e){var t="clipboardData"in e?e.clipboardData:e.dataTransfer,i="drop"==e.type||"paste"==e.type,t={dataTransfer:new ja(t,{cacheFiles:i})};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){var i=t.target.ownerDocument,r=t.clientX,s=t.clientY;let n;return i.caretRangeFromPoint&&i.caretRangeFromPoint(r,s)?n=i.caretRangeFromPoint(r,s):t.rangeParent&&((n=i.createRange()).setStart(t.rangeParent,t.rangeOffset),n.collapse(!0)),n?e.domConverter.domRangeToView(n):null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(this.view,e)),this.fire(e.type,e,t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lm=["figcaption","li"];
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hm extends n{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(am),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const i=this.editor,r=i.model,n=i.editing.view,e=n.document;this.listenTo(e,"clipboardInput",(e,t)=>{"paste"!=t.method||i.model.canEditAt(i.model.document.selection)||e.stop()},{priority:"highest"}),this.listenTo(e,"clipboardInput",(e,t)=>{var i=t.dataTransfer;let r;if(t.content)r=t.content;else{let e="";i.getData("text/html")?e=i.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>1==t.length?" ":t).replace(/<!--[\s\S]*?-->/g,""):i.getData("text/plain")&&(e=s=(s=(s=i.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||s.includes("<br>")?`<p>${s}</p>`:s),r=this.editor.data.htmlProcessor.toView(e)}var s=new W(this,"inputTransformation");this.fire(s,{content:r,dataTransfer:i,targetRanges:t.targetRanges,method:t.method}),s.stop.called&&e.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(e,t)=>{if(!t.content.isEmpty){const i=this.editor.data.toModel(t.content,"$clipboardHolder");0!=i.childCount&&(e.stop(),r.change(()=>{this.fire("contentInsertion",{content:i,method:t.method,dataTransfer:t.dataTransfer,targetRanges:t.targetRanges})}))}},{priority:"low"}),this.listenTo(this,"contentInsertion",(e,t)=>{t.resultRange=r.insertContent(t.content)},{priority:"low"})}_setupCopyCut(){const r=this.editor,s=r.model.document,n=r.editing.view.document,i=(e,t)=>{var i=t.dataTransfer,t=(t.preventDefault(),r.data.toView(r.model.getSelectedContent(s.selection)));n.fire("clipboardOutput",{dataTransfer:i,content:t,method:e.name})};this.listenTo(n,"copy",i,{priority:"low"}),this.listenTo(n,"cut",(e,t)=>{r.model.canEditAt(r.model.document.selection)?i(e,t):t.preventDefault()},{priority:"low"}),this.listenTo(n,"clipboardOutput",(e,t)=>{t.content.isEmpty||(t.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(t.content)),t.dataTransfer.setData("text/plain",function t(i){let r="";if(i.is("$text")||i.is("$textProxy"))r=i.data;else if(i.is("element","img")&&i.hasAttribute("alt"))r=i.getAttribute("alt");else if(i.is("element","br"))r=`
`;else{let e=null;for(const n of i.getChildren()){var s=t(n);e&&(e.is("containerElement")||n.is("containerElement"))&&(lm.includes(e.name)||lm.includes(n.name)?r+=`
`:r+=`

`),r+=s,e=n}}return r}(t.content))),"cut"==t.method&&r.model.deleteContent(s.selection)},{priority:"low"})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cm{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(e,t)=>{t.isLocal&&t.isUndoable&&t!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){this.isLocked&&!e||(this._batch=null,this._size=0)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dm extends l{constructor(e,t){super(e),this._buffer=new cm(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,r=e.text||"",s=r.length;let n=i.selection;if(e.selection?n=e.selection:e.range&&(n=t.createSelection(e.range)),t.canEditAt(n)){const o=e.resultRange;t.enqueueChange(this._buffer.batch,e=>{this._buffer.lock(),t.deleteContent(n),r&&t.insertContent(e.createText(r,i.selection.getAttributes()),n),o?e.setSelection(o):n.is("documentSelection")||e.setSelection(n),this._buffer.unlock(),this._buffer.input(s)})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const um=["insertText","insertReplacementText"];class mm extends Ra{constructor(n){super(n),m.isAndroid&&um.push("insertCompositionText");const o=n.document;o.on("beforeinput",(e,t)=>{var i,r,s;this.isEnabled&&({data:t,targetRanges:i,inputType:s,domEvent:r}=t,um.includes(s))&&(s=new W(o,"insertText"),o.fire(s,new Ia(n,r,{text:t,selection:n.createSelection(i)})),s.stop.called)&&e.stop()}),o.on("compositionend",(e,{data:t,domEvent:i})=>{this.isEnabled&&!m.isAndroid&&t&&o.fire("insertText",new Ia(n,i,{text:t,selection:o.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gm extends n{static get pluginName(){return"Input"}init(){const n=this.editor,o=n.model,a=n.editing.view,i=o.document.selection,r=(a.addObserver(mm),new dm(n,n.config.get("typing.undoStep")||20));n.commands.add("insertText",r),n.commands.add("input",r),this.listenTo(a.document,"insertText",(e,t)=>{a.document.isComposing||t.preventDefault();var{text:t,selection:i,resultRange:r}=t,i=Array.from(i.getRanges()).map(e=>n.editing.mapper.toModelRange(e));let s=t;m.isAndroid&&(t=Array.from(i[0].getItems()).reduce((e,t)=>e+(t.is("$textProxy")?t.data:""),""))&&(t.length<=s.length?s.startsWith(t)&&(s=s.substring(t.length),i[0].start=i[0].start.getShiftedBy(t.length)):t.startsWith(s)&&(i[0].start=i[0].start.getShiftedBy(s.length),s=""));t={text:s,selection:o.createSelection(i)};r&&(t.resultRange=n.editing.mapper.toModelRange(r)),n.execute("insertText",t)}),m.isAndroid?this.listenTo(a.document,"keydown",(e,t)=>{!i.isCollapsed&&229==t.keyCode&&a.document.isComposing&&fm(o,r)}):this.listenTo(a.document,"compositionstart",()=>{i.isCollapsed||fm(o,r)})}}function fm(e,t){t.isEnabled&&((t=t.buffer).lock(),e.enqueueChange(t.batch,()=>{e.deleteContent(e.document.selection)}),t.unlock())}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pm extends l{constructor(e,t){super(e),this.direction=t,this._buffer=new cm(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(s={}){const n=this.editor.model,o=n.document;n.enqueueChange(this._buffer.batch,e=>{this._buffer.lock();var i=e.createSelection(s.selection||o.selection);if(n.canEditAt(i)){var t=s.sequence||1,r=i.isCollapsed;if(i.isCollapsed&&n.modifySelection(i,{direction:this.direction,unit:s.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(t))this._replaceEntireContentWithParagraph(e);else if(this._shouldReplaceFirstBlockWithParagraph(i,t))this.editor.execute("paragraph",{selection:i});else if(!i.isCollapsed){let t=0;i.getFirstRange().getMinimalFlatRanges().forEach(e=>{t+=Xs(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(i,{doNotResetEntireContent:r,direction:this.direction}),this._buffer.input(t),e.setSelection(i),this._buffer.unlock()}}})}_shouldEntireContentBeReplacedWithParagraph(e){var t,i;return!(1<e||(i=(e=this.editor.model).document.selection,t=e.schema.getLimitElement(i),!(i.isCollapsed&&i.containsEntireContent(t)&&e.schema.checkChild(t,"paragraph")))||(i=t.getChild(0))&&i.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){var t=this.editor.model,i=t.document.selection,t=t.schema.getLimitElement(i),i=e.createElement("paragraph");e.remove(e.createRangeIn(t)),e.insert(i,t),e.setSelection(i,0)}_shouldReplaceFirstBlockWithParagraph(e,t){var i,r,s=this.editor.model;return!(1<t||"backward"!=this.direction||!e.isCollapsed||(t=e.getFirstPosition(),r=(i=s.schema.getLimitElement(t)).getChild(0),t.parent!=r)||!e.containsEntireContent(r)||!s.schema.checkChild(i,"paragraph")||"paragraph"==r.name)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vm="selection",wm="backward",bm="forward",_m={deleteContent:{unit:vm,direction:wm},deleteContentBackward:{unit:"codePoint",direction:wm},deleteWordBackward:{unit:"word",direction:wm},deleteHardLineBackward:{unit:vm,direction:wm},deleteSoftLineBackward:{unit:vm,direction:wm},deleteContentForward:{unit:"character",direction:bm},deleteWordForward:{unit:"word",direction:bm},deleteHardLineForward:{unit:vm,direction:bm},deleteSoftLineForward:{unit:vm,direction:bm}};class ym extends Ra{constructor(n){super(n);const o=n.document;let a=0;if(o.on("keydown",()=>{a++}),o.on("keyup",()=>{a=0}),o.on("beforeinput",(e,t)=>{var i,r,s;this.isEnabled&&({targetRanges:t,domEvent:i,inputType:s}=t,r=_m[s])&&((r={direction:r.direction,unit:r.unit,sequence:a}).unit==vm&&(r.selectionToRemove=n.createSelection(t[0])),"deleteContentBackward"===s&&(m.isAndroid&&(r.sequence=1),function(t){if(1==t.length&&!t[0].isCollapsed){var i,t=t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let e=0;for({nextPosition:i}of t){if(i.parent.is("$text")){var r=i.parent.data,s=i.offset;if(io(r,s)||ro(r,s)||no(r,s))continue}if(1<++e)return 1}}return}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t))&&(r.unit=vm,r.selectionToRemove=n.createSelection(t)),s=new Mo(o,"delete",t[0]),o.fire(s,new Ia(n,i,r)),s.stop.called)&&e.stop()}),m.isBlink){var l=this;const d=l.view,u=d.document;let n=null,o=!1;function h(e){return e==g.backspace||e==g.delete}function c(e){return e==g.backspace?wm:bm}u.on("keydown",(e,{keyCode:t})=>{n=t,o=!1}),u.on("keyup",(e,{keyCode:t,domEvent:i})=>{var r=u.selection,s=l.isEnabled&&t==n&&h(t)&&!r.isCollapsed&&!o;n=null,s&&(s=r.getFirstRange(),s=new Mo(u,"delete",s),t={unit:vm,direction:c(t),selectionToRemove:r},u.fire(s,new Ia(d,i,t)))}),u.on("beforeinput",(e,{inputType:t})=>{t=_m[t];h(n)&&t&&t.direction==c(n)&&(o=!0)},{priority:"high"}),u.on("beforeinput",(e,{inputType:t,data:i})=>{n==g.delete&&"insertText"==t&&""==i&&e.stop()},{priority:"high"})}}observe(){}stopObserving(){}}class km extends n{static get pluginName(){return"Delete"}init(){const n=this.editor,o=n.editing.view,a=o.document,e=n.model.document;o.addObserver(ym),this._undoOnBackspace=!1;var t=new pm(n,"forward");n.commands.add("deleteForward",t),n.commands.add("forwardDelete",t),n.commands.add("delete",new pm(n,"backward")),this.listenTo(a,"delete",(e,t)=>{a.isComposing||t.preventDefault();var{direction:t,sequence:i,selectionToRemove:r,unit:s}=t,t="forward"===t?"deleteForward":"delete",i={sequence:i};"selection"==s?(r=Array.from(r.getRanges()).map(e=>n.editing.mapper.toModelRange(e)),i.selection=n.model.createSelection(r)):i.unit=s,n.execute(t,i),o.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(a,"delete",(e,t)=>{this._undoOnBackspace&&"backward"==t.direction&&1==t.sequence&&"codePoint"==t.unit&&(this._undoOnBackspace=!1,n.execute("undo"),t.preventDefault(),e.stop())},{context:"$capture"}),this.listenTo(e,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Am extends n{static get requires(){return[gm,km]}static get pluginName(){return"Typing"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Em(e,i){let r=e.start;return{text:Array.from(e.getWalker({ignoreElementEnd:!1})).reduce((e,{item:t})=>t.is("$text")||t.is("$textProxy")?e+t.data:(r=i.createPositionAfter(t),""),""),range:i.createRange(r,e.end)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cm extends s(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(e,{directChange:t})=>{t&&(i.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))}),this.listenTo(i,"change:data",(e,t)=>{!t.isUndo&&t.isLocal&&this._evaluateTextBeforeSelection("data",{batch:t})})}_evaluateTextBeforeSelection(e,t={}){var i=this.model,r=i.document.selection,{text:r,range:i}=Em(i.createRange(i.createPositionAt(r.focus.parent,0),r.focus),i),s=this.testCallback(r);!s&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!s,s&&(t=Object.assign(t,{text:r,range:i}),"object"==typeof s&&Object.assign(t,s),this.fire("matched:"+e,t))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pm extends n{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,o=e.locale,a=t.document.selection;this.listenTo(i.document,"arrowKey",(t,i)=>{if(a.isCollapsed&&!i.shiftKey&&!i.altKey&&!i.ctrlKey){var r=i.keyCode==g.arrowright,s=i.keyCode==g.arrowleft;if(r||s){var n=o.contentLanguageDirection;let e=!1;!0===(e="ltr"===n&&r||"rtl"===n&&s?this._handleForwardMovement(i):this._handleBackwardMovement(i))&&t.stop()}}},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(a,"change:range",(e,t)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:!this._isGravityOverridden||!t.directChange&&Om(a.getFirstPosition(),this.attributes)||this._restoreGravity()})}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){var t=this.attributes,i=this.editor.model.document.selection,r=i.getFirstPosition();return!(this._isGravityOverridden||r.isAtStart&&xm(i,t)||!Om(r,t)||(Sm(e),this._overrideGravity(),0))}_handleBackwardMovement(e){var t=this.attributes,i=this.editor.model,r=i.document.selection,s=r.getFirstPosition();return this._isGravityOverridden?(Sm(e),this._restoreGravity(),Tm(i,t,s),!0):s.isAtStart?!!xm(r,t)&&(Sm(e),Tm(i,t,s),!0):!!function(e,t){e=e.getShiftedBy(-1);return Om(e,t)}(s,t)&&(s.isAtEnd&&!xm(r,t)&&Om(s,t)?(Sm(e),Tm(i,t,s),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function xm(e,t){for(const i of t)if(e.hasAttribute(i))return 1}function Tm(e,t,i){const r=i.nodeBefore;e.change(e=>{r?e.setSelectionAttribute(r.getAttributes()):e.removeSelectionAttribute(t)})}function Sm(e){e.preventDefault()}function Om(e,t){var{nodeBefore:i,nodeAfter:r}=e;for(const n of t){var s=i?i.getAttribute(n):void 0;if((r?r.getAttribute(n):void 0)!==s)return!0}return!1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rm(e,t,i,r){return r.createRange(Im(e,t,i,!0,r),Im(e,t,i,!1,r))}function Im(e,t,i,r,s){let n=e.textNode||(r?e.nodeBefore:e.nodeAfter),o=null;for(;n&&n.getAttribute(t)==i;)o=n,n=r?n.previousSibling:n.nextSibling;return o?s.createPositionAt(o,r?"before":"after"):e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*Vm(e,t){for(const i of t)i&&e.getAttributeProperties(i[0]).copyOnEnter&&(yield i)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mm extends l{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){var t=this.editor.model,i=t.document.selection,r=t.schema,s=i.isCollapsed,n=i.getFirstRange(),o=n.start.parent,a=n.end.parent;if(r.isLimit(o)||r.isLimit(a))s||o!=a||t.deleteContent(i);else{if(s)return r=Vm(e.model.schema,i.getAttributes()),Nm(e,n.start),e.setSelectionAttribute(r),!0;s=!(n.start.isAtStart&&n.end.isAtEnd),r=o==a;if(t.deleteContent(i,{leaveUnmerged:s}),s){if(r)return Nm(e,i.focus),!0;e.setSelection(a,0)}}return!1}}function Nm(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bm={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Dm extends Ra{constructor(n){super(n);const o=this.document;let a=!1;o.on("keydown",(e,t)=>{a=t.shiftKey}),o.on("beforeinput",(t,i)=>{if(this.isEnabled){let e=i.inputType;m.isSafari&&a&&"insertParagraph"==e&&(e="insertLineBreak");var r=i.domEvent,s=Bm[e];s&&(i=new Mo(o,"enter",i.targetRanges[0]),o.fire(i,new Ia(n,r,{isSoft:s.isSoft})),i.stop.called)&&t.stop()}})}observe(){}stopObserving(){}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fm extends n{static get pluginName(){return"Enter"}init(){const i=this.editor,r=i.editing.view,s=r.document;r.addObserver(Dm),i.commands.add("enter",new Mm(i)),this.listenTo(s,"enter",(e,t)=>{s.isComposing||t.preventDefault(),t.isSoft||(i.execute("enter"),r.scrollToTheSelection())},{priority:"low"})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lm extends l{execute(){const l=this.editor.model,h=l.document;l.change(e=>{var t,i,r,s,n,o,a;t=l,i=e,r=h.selection,s=r.isCollapsed,n=r.getFirstRange(),o=n.start.parent,a=n.end.parent,o=o==a,s?(s=Vm(t.schema,r.getAttributes()),zm(t,i,n.end),i.removeSelectionAttribute(r.getAttributeKeys()),i.setSelectionAttribute(s)):(s=!(n.start.isAtStart&&n.end.isAtEnd),t.deleteContent(r,{leaveUnmerged:s}),o?zm(t,i,r.focus):s&&i.setSelection(a,0)),this.fire("afterExecute",{writer:e})})}refresh(){var e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(1<t.rangeCount)return!1;var i=t.anchor;if(!i||!e.checkChild(i,"softBreak"))return!1;i=t.getFirstRange(),t=i.start.parent,i=i.end.parent;return!((jm(t,e)||jm(i,e))&&t!==i)}(e.schema,t.selection)}}function zm(e,t,i){var r=t.createElement("softBreak");e.insertContent(r,i),t.setSelection(r,"after")}function jm(e,t){return!e.is("rootElement")&&(t.isLimit(e)||jm(e.parent,t))}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hm extends n{static get pluginName(){return"ShiftEnter"}init(){const i=this.editor,e=i.model.schema,t=i.conversion,r=i.editing.view,s=r.document;e.register("softBreak",{allowWhere:"$text",isInline:!0}),t.for("upcast").elementToElement({model:"softBreak",view:"br"}),t.for("downcast").elementToElement({model:"softBreak",view:(e,{writer:t})=>t.createEmptyElement("br")}),r.addObserver(Dm),i.commands.add("shiftEnter",new Lm(i)),this.listenTo(s,"enter",(e,t)=>{s.isComposing||t.preventDefault(),t.isSoft&&(i.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wm extends o(){constructor(){super(...arguments),this._stack=[]}add(e,t){var i=this._stack,r=i[0],e=(this._insertDescriptor(e),i[0]);r===e||$m(r,e)||this.fire("change:top",{oldDescriptor:r,newDescriptor:e,writer:t})}remove(e,t){var i=this._stack,r=i[0],e=(this._removeDescriptor(e),i[0]);r===e||$m(r,e)||this.fire("change:top",{oldDescriptor:r,newDescriptor:e,writer:t})}_insertDescriptor(t){var i,r,s=this._stack,n=s.findIndex(e=>e.id===t.id);if(!$m(t,s[n])){-1<n&&s.splice(n,1);let e=0;for(;s[e]&&(i=s[e],r=t,i.priority>r.priority||!(i.priority<r.priority)&&qm(i.classes)>qm(r.classes));)e++;s.splice(e,0,t)}}_removeDescriptor(t){var e=this._stack,i=e.findIndex(e=>e.id===t);-1<i&&e.splice(i,1)}}function $m(e,t){return e&&t&&e.priority==t.priority&&qm(e.classes)==qm(t.classes)}function qm(e){return Array.isArray(e)?e.sort().join(","):e}const Um='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',Gm="ck-widget",Km="ck-widget_selected";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function M(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function Jm(e,t,i={}){if(e.is("containerElement")){t.setAttribute("contenteditable","false",e),t.addClass(Gm,e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=Ym,t.setCustomProperty("widgetLabel",[],e),i.label&&(a=i.label,e.getCustomProperty("widgetLabel").push(a)),i.hasSelectionHandle&&(a=e,s=(i=t).createUIElement("div",{class:"ck ck-widget__selection-handle"},function(e){var e=this.toDomElement(e),t=new Zc;return t.set("content",Um),t.render(),e.appendChild(t.element),e}),i.insert(i.createPositionAt(a,0),s),i.addClass(["ck-widget_with-selection-handle"],a));{var[r,s,n=function(e,t,i){if(t.classes&&i.addClass(u(t.classes),e),t.attributes)for(const r in t.attributes)i.setAttribute(r,t.attributes[r],e)},o=function(e,t,i){if(t.classes&&i.removeClass(u(t.classes),e),t.attributes)for(const r in t.attributes)i.removeAttribute(r,e)}]=[e,t];const l=new Wm;l.on("change:top",(e,t)=>{t.oldDescriptor&&o(r,t.oldDescriptor,t.writer),t.newDescriptor&&n(r,t.newDescriptor,t.writer)});s.setCustomProperty("addHighlight",(e,t,i)=>l.add(t,i),r),s.setCustomProperty("removeHighlight",(e,t,i)=>l.remove(t,i),r)}return e}throw new w("widget-to-widget-wrong-element-type",null,{element:e});var a;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */}function Zm(e,t){var i=e.getSelectedElement();if(i){var r=eg(e);if(r)return t.createRange(t.createPositionAt(i,r))}return oc(e,t)}function Ym(){return null}const Xm="widget-type-around";function Qm(e,t,i){return e&&M(e)&&!i.isInline(t)}function eg(e){return e.getAttribute(Xm)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tg=["before","after"],ig=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,rg="ck-widget__type-around_disabled";class sg extends n{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Fm,km]}init(){const r=this.editor,s=r.editing.view;this.on("change:isEnabled",(e,t,i)=>{s.change(e=>{for(const t of s.document.roots)i?e.removeClass(rg,t):e.addClass(rg,t)}),i||r.model.change(e=>{e.removeSelectionAttribute(Xm)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){var i=this.editor,r=i.editing.view,s=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:s}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,i,r){this.listenTo(e,t,(...e)=>{this.isEnabled&&i(...e)},r)}_insertParagraphAccordingToFakeCaretPosition(){var e=this.editor.model.document.selection,t=eg(e);return!!t&&(e=e.getSelectedElement(),this._insertParagraph(e,t),!0)}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,o=e.locale.t,l={before:o("Insert paragraph before block"),after:o("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(e,t,i)=>{var a,r,s=i.mapper.toViewElement(t.item);s&&Qm(s,t.item,n)&&(t=i.writer,a=l,i=s,r=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(e){var t,i,e=this.toDomElement(e),r=e,s=a;for(const o of tg){var n=new Rc({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+o],title:s[o],"aria-hidden":"true"},children:[r.ownerDocument.importNode(ig,!0)]});r.appendChild(n.render())}return t=e,i=new Rc({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}}),t.appendChild(i.render()),e}),t.insert(t.createPositionAt(i,"end"),r),s.getCustomProperty("widgetLabel").push(()=>this.isEnabled?o("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const r=this.editor,e=r.model,t=e.document.selection,n=e.schema,i=r.editing.view;function o(e){return"ck-widget_type-around_show-fake-caret_"+e}this._listenToIfEnabled(i.document,"arrowKey",(e,t)=>{this._handleArrowKeyPress(e,t)},{context:[M,"$text"],priority:"high"}),this._listenToIfEnabled(t,"change:range",(e,t)=>{t.directChange&&r.model.change(e=>{e.removeSelectionAttribute(Xm)})}),this._listenToIfEnabled(e.document,"change:data",()=>{var e=t.getSelectedElement();if(e&&Qm(r.editing.mapper.toViewElement(e),e,n))return;r.model.change(e=>{e.removeSelectionAttribute(Xm)})}),this._listenToIfEnabled(r.editing.downcastDispatcher,"selection",(e,t,i)=>{var r=i.writer,s=(this._currentFakeCaretModelElement&&(s=i.mapper.toViewElement(this._currentFakeCaretModelElement))&&(r.removeClass(tg.map(o),s),this._currentFakeCaretModelElement=null),t.selection.getSelectedElement());s&&Qm(i=i.mapper.toViewElement(s),s,n)&&(t=eg(t.selection))&&(r.addClass(o(t),i),this._currentFakeCaretModelElement=s)}),this._listenToIfEnabled(r.ui.focusTracker,"change:isFocused",(e,t,i)=>{i||r.model.change(e=>{e.removeSelectionAttribute(Xm)})})}_handleArrowKeyPress(e,t){var i=this.editor,r=i.model,s=r.document.selection,r=r.schema,n=i.editing.view,o=t.keyCode,a=(o=o,a=i.locale.contentLanguageDirection,"down"===(o=qn(o,a))||"right"===o),o=n.document.selection.getSelectedElement();let l;Qm(o,i.editing.mapper.toModelElement(o),r)?l=this._handleArrowKeyPressOnSelectedWidget(a):s.isCollapsed?l=this._handleArrowKeyPressWhenSelectionNextToAWidget(a):t.shiftKey||(l=this._handleArrowKeyPressWhenNonCollapsedSelection(a)),l&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor.model,i=e.document.selection,r=eg(i);return e.change(e=>r?r!==(t?"after":"before")&&(e.removeSelectionAttribute(Xm),!0):(e.setSelectionAttribute(Xm,t?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,i=e.model,r=i.schema,s=e.plugins.get("Widget"),n=s._getObjectElementNextToSelection(t),o=e.editing.mapper.toViewElement(n);return!!Qm(o,n,r)&&(i.change(e=>{s._setSelectionOverElement(n),e.setSelectionAttribute(Xm,t?"before":"after")}),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(t){const e=this.editor,i=e.model,r=i.schema,s=e.editing.mapper,n=i.document.selection,o=t?n.getLastPosition().nodeBefore:n.getFirstPosition().nodeAfter,a=s.toViewElement(o);return!!Qm(a,o,r)&&(i.change(e=>{e.setSelection(o,"on"),e.setSelectionAttribute(Xm,t?"after":"before")}),!0)}_enableInsertingParagraphsOnButtonClick(){const n=this.editor,o=n.editing.view;this._listenToIfEnabled(o.document,"mousedown",(e,t)=>{var i,r,s=t.domTarget.closest(".ck-widget__type-around__button");s&&(i=s.classList.contains("ck-widget__type-around__button_before")?"before":"after",s=s,r=o.domConverter,s=s.closest(".ck-widget"),r=r.mapDomToView(s),s=n.editing.mapper.toModelElement(r),this._insertParagraph(s,i),t.preventDefault(),e.stop())})}_enableInsertingParagraphsOnEnterKeypress(){const o=this.editor,a=o.model.document.selection,e=o.editing.view;this._listenToIfEnabled(e.document,"enter",(t,i)=>{if("atTarget"==t.eventPhase){var r=a.getSelectedElement(),s=o.editing.mapper.toViewElement(r),n=o.model.schema;let e;this._insertParagraphAccordingToFakeCaretPosition()?e=!0:Qm(s,r,n)&&(this._insertParagraph(r,i.isSoft?"before":"after"),e=!0),e&&(i.preventDefault(),t.stop())}},{context:M})}_enableInsertingParagraphsOnTypingKeystroke(){const i=this.editor.editing.view.document;this._listenToIfEnabled(i,"insertText",(e,t)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(t.selection=i.selection)},{priority:"high"}),m.isAndroid?this._listenToIfEnabled(i,"keydown",(e,t)=>{229==t.keyCode&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(i,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const l=this.editor,e=l.editing.view,h=l.model,c=h.schema;this._listenToIfEnabled(e.document,"delete",(e,t)=>{if("atTarget"==e.eventPhase){var i=eg(h.document.selection);if(i){const r=t.direction,s=h.document.selection.getSelectedElement(),n="before"===i,o="forward"==r;if(n==o)l.execute("delete",{selection:h.createSelection(s,"on")});else{const a=c.getNearestSelectionRange(h.createPositionAt(s,i),r);a&&(a.isCollapsed?(i=h.createSelection(a.start),h.modifySelection(i,{direction:r}),i.focus.isEqual(a.start)?(i=function(e,t){let i=t;for(const r of t.getAncestors({parentFirst:!0})){if(1<r.childCount||e.isLimit(r))break;i=r}return i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(c,a.start.parent),h.deleteContent(h.createSelection(i,"on"),{doNotAutoparagraph:!0})):h.change(e=>{e.setSelection(a),l.execute(o?"deleteForward":"delete")})):h.change(e=>{e.setSelection(a),l.execute(o?"deleteForward":"delete")}))}t.preventDefault(),e.stop()}}},{context:M})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,o=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(e,[r,t])=>{if(!t||t.is("documentSelection")){const s=eg(o);return s?(e.stop(),n.change(e=>{var t=o.getSelectedElement(),t=n.createPositionAt(t,s),t=e.createSelection(t),i=n.insertContent(r,t);return e.setSelection(t),i})):void 0}},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,s=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(e,t)=>{var[,i,r={}]=t;i&&!i.is("documentSelection")||(i=eg(s))&&(r.findOptimalPosition=i,t[3]=r)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(e,[t])=>{t&&!t.is("documentSelection")||eg(i)&&e.stop()},{priority:"high"})}}function ng(c){const d=c.model;return(e,t)=>{const i=t.keyCode==g.arrowup,r=t.keyCode==g.arrowdown,s=t.shiftKey,n=d.document.selection;if(i||r){const l=r;if(!s||(o=n,a=l,o.isCollapsed)||o.isBackward!=a){var o,a;const h=function(e,t,i){e=e.model;{var r;return i?(i=t.isCollapsed?t.focus:t.getLastPosition(),(r=og(e,i,"forward"))&&(r=e.createRange(i,r),r=ag(e.schema,r,"backward"))?e.createRange(i,r):null):(i=t.isCollapsed?t.focus:t.getFirstPosition(),(r=og(e,i,"backward"))&&(t=e.createRange(r,i),t=ag(e.schema,t,"forward"))?e.createRange(t,i):null)}}(c,n,l);if(h){if(h.isCollapsed){if(n.isCollapsed)return;if(s)return}(h.isCollapsed||function(e,t,i){var r=e.model,s=e.view.domConverter;i&&(i=r.createSelection(t.start),r.modifySelection(i),i.focus.isAtEnd||t.start.isEqual(i.focus)||(t=r.createRange(i.focus,t.end)));r=e.mapper.toViewRange(t),i=s.viewRangeToDom(r),e=b.getDomRangeRects(i);let n;for(const o of e)if(void 0===n)n=Math.round(o.bottom);else{if(Math.round(o.top)>=n)return;n=Math.max(n,Math.round(o.bottom))}return 1}(c,h,l))&&(d.change(e=>{var t,i=l?h.end:h.start;s?((t=d.createSelection(n.anchor)).setFocus(i),e.setSelection(t)):e.setSelection(i)}),e.stop(),t.preventDefault(),t.stopPropagation())}}}}}function og(e,t,i){var r,s,n,o=e.schema,a="forward"==i?"elementStart":"elementEnd";for({previousPosition:r,item:s,type:n}of e.createRangeIn(t.root).getWalker({startPosition:t,direction:i})){if(o.isLimit(s)&&!o.isInline(s))return r;if(n==a&&o.isBlock(s))return null}return null}function ag(e,t,i){var r,s="backward"==i?t.end:t.start;if(e.checkChild(s,"$text"))return s;for({nextPosition:r}of t.getWalker({direction:i}))if(e.checkChild(r,"$text"))return r;return null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lg extends n{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[sg,km]}init(){const n=this.editor,e=n.editing.view,t=e.document;this.editor.editing.downcastDispatcher.on("selection",(e,t,i)=>{var r,s=i.writer,t=t.selection;t.isCollapsed||(r=t.getSelectedElement())&&M(r=n.editing.mapper.toViewElement(r))&&i.consumable.consume(t,"selection")&&s.setSelection(s.createRangeOn(r),{fake:!0,label:r.getCustomProperty("widgetLabel").reduce((e,t)=>"function"==typeof t?e?e+". "+t():t():e?e+". "+t:t,"")})}),this.editor.editing.downcastDispatcher.on("selection",(e,t,i)=>{this._clearPreviouslySelectedWidgets(i.writer);var r,s,n=i.writer,i=n.document.selection;let o=null;for(const l of i.getRanges())for(const h of l){var a=h.item;!M(a)||(r=a,(s=o)&&Array.from(r.getAncestors()).includes(s))||(n.addClass(Km,a),this._previouslySelected.add(a),o=a)}},{priority:"low"}),e.addObserver(mc),this.listenTo(t,"mousedown",(...e)=>this._onMousedown(...e)),this.listenTo(t,"arrowKey",(...e)=>{this._handleSelectionChangeOnArrowKeyPress(...e)},{context:[M,"$text"]}),this.listenTo(t,"arrowKey",(...e)=>{this._preventDefaultOnArrowKeyPress(...e)},{context:"$root"}),this.listenTo(t,"arrowKey",ng(this.editor.editing),{context:"$text"}),this.listenTo(t,"delete",(e,t)=>{this._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop())},{context:"$root"})}_onMousedown(e,t){var i=this.editor,r=i.editing.view,s=r.document;let n=t.target;if(function(e){let t=e;for(;t;){if(t.is("editableElement")&&!t.is("rootElement"))return 1;if(M(t))return;t=t.parent}return}(n)){if((m.isSafari||m.isGecko)&&3<=t.domEvent.detail){const o=i.editing.mapper,a=n.is("attributeElement")?n.findAncestor(e=>!e.is("attributeElement")):n,l=o.toModelElement(a);t.preventDefault(),this.editor.model.change(e=>{e.setSelection(l,"in")})}}else(M(n)||(n=n.findAncestor(M)))&&(m.isAndroid&&t.preventDefault(),s.isFocused||r.focus(),t=i.editing.mapper.toModelElement(n),this._setSelectionOverElement(t))}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,r=this.editor.model,s=r.schema,n=r.document.selection,o=n.getSelectedElement(),a=qn(i,this.editor.locale.contentLanguageDirection),l="down"==a||"right"==a,h="up"==a||"down"==a;if(o&&s.isObject(o)){const d=l?n.getLastPosition():n.getFirstPosition(),u=s.getNearestSelectionRange(d,l?"forward":"backward");void(u&&(r.change(e=>{e.setSelection(u)}),t.preventDefault(),e.stop()))}else if(n.isCollapsed||t.shiftKey){var c;n.isCollapsed&&(c=this._getObjectElementNextToSelection(l))&&s.isObject(c)&&(s.isInline(c)&&h||(this._setSelectionOverElement(c),t.preventDefault(),e.stop()))}else{const m=n.getFirstPosition(),g=n.getLastPosition(),f=m.nodeAfter,p=g.nodeBefore;void((f&&s.isObject(f)||p&&s.isObject(p))&&(r.change(e=>{e.setSelection(l?g:m)}),t.preventDefault(),e.stop()))}}_preventDefaultOnArrowKeyPress(e,t){var i=this.editor.model,r=i.schema,i=i.document.selection.getSelectedElement();i&&r.isObject(i)&&(t.preventDefault(),e.stop())}_handleDelete(e){const r=this.editor.model.document.selection;if(this.editor.model.canEditAt(r)&&r.isCollapsed){const s=this._getObjectElementNextToSelection(e);return s?(this.editor.model.change(e=>{let t=r.anchor.parent;for(;t.isEmpty;){var i=t;t=i.parent,e.remove(i)}this._setSelectionOverElement(s)}),!0):void 0}}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(e){var t=this.editor.model,i=t.schema,r=t.document.selection,s=t.createSelection(r);return t.modifySelection(s,{direction:e?"forward":"backward"}),!s.isEqual(r)&&(t=e?s.focus.nodeBefore:s.focus.nodeAfter)&&i.isObject(t)?t:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(Km,t);this._previouslySelected.clear()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hg extends n{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[Xu]}static get pluginName(){return"WidgetToolbarRepository"}init(){const t=this.editor;var e;t.plugins.has("BalloonToolbar")&&(e=t.plugins.get("BalloonToolbar"),this.listenTo(e,"show",e=>{!function(e){e=e.getSelectedElement();return e&&M(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t.editing.view.document.selection)||e.stop()},{priority:"high"})),this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(t.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:r,balloonClassName:s="ck-toolbar-container"}){if(i.length){const n=this.editor,o=n.t,a=new Bd(n.locale);if(a.ariaLabel=t||o("Widget toolbar"),this._toolbarDefinitions.has(e))throw new w("widget-toolbar-duplicated",this,{toolbarId:e});const l={view:a,getRelatedElement:r,balloonClassName:s,itemsConfig:i,initialized:!1};n.ui.addToolbar(a,{isContextual:!0,beforeFocus:()=>{var e=r(n.editing.view.document.selection);e&&this._showToolbar(l,e)},afterBlur:()=>{this._hideToolbar(l)}}),this._toolbarDefinitions.set(e,l)}else c("widget-toolbar-no-items",{toolbarId:e})}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const n of this._toolbarDefinitions.values()){var r,s=n.getRelatedElement(this.editor.editing.view.document.selection);this.isEnabled&&s?this.editor.ui.focusTracker.isFocused?(r=s.getAncestors().length)>e&&(e=r,t=s,i=n):this._isToolbarVisible(n)&&this._hideToolbar(n):this._isToolbarInBalloon(n)&&this._hideToolbar(n)}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?cg(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:dg(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const t of this._toolbarDefinitions.values()){var e;this._isToolbarVisible(t)&&(e=t.getRelatedElement(this.editor.editing.view.document.selection),cg(this.editor,e))}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function cg(e,t){var i=e.plugins.get("ContextualBalloon"),e=dg(e,t);i.updatePosition(e)}function dg(e,t){var e=e.editing.view,i=Iu.defaultPositions;return{target:e.domConverter.mapViewToDom(t),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}class ug extends s(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){var r,s=new b(t),t=(this.activeHandlePosition=function(e){for(const t of["top-left","top-right","bottom-right","bottom-left"])if(e.classList.contains("ck-widget__resizer__handle-"+t))return t}(e),this._referenceCoordinates=(e=t,t=(t=this.activeHandlePosition).split("-"),r=(r={top:"bottom",bottom:"top",left:"right",right:"left"})[t[0]]+"-"+r[t[1]],t=new b(e),(r={x:"right"==(r=r.split("-"))[1]?t.right:t.left,y:"bottom"==r[0]?t.bottom:t.top}).x+=e.ownerDocument.defaultView.scrollX,r.y+=e.ownerDocument.defaultView.scrollY,r),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height,i.style.width);t&&t.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(t):this._originalWidthPercents=function(e,t){var i=e.parentElement;let r=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);let s=0,n=i;for(;isNaN(r);){if(n=n.parentElement,5<++s)return 0;r=parseFloat(i.ownerDocument.defaultView.getComputedStyle(n).width)}return t.width/r*100}(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mg extends R{constructor(){super();var e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",e=>e?"ck-orientation-"+e:"")],style:{display:e.if("_isVisible","none",e=>!e)}},children:[{text:e.to("_label")}]})}_bindToState(r,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(e,t)=>null!==e&&null!==t),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(e,t,i)=>"px"===r.unit?e+""+t:i+"%"),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(e,t,i)=>t<50||i<50?"above-center":e)}_dismiss(){this.unbind(),this._isVisible=!1}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gg extends s(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(e,t)=>e&&t),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",e=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),e.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(e=>{e.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(e=>{e.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const i=this,r=this._options.viewElement;this._options.editor.editing.view.change(e=>{var t=e.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(e){e=this.toDomElement(e);return i._appendHandles(e),i._appendSizeUI(e),e});e.insert(e.createPositionAt(r,"end"),t),e.addClass("ck-widget_with-resizer",r),this._viewResizerWrapper=t,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new ug(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const i=this._proposeNewSize(e);this._options.editor.editing.view.change(e=>{var t=this._options.unit||"%",t=("%"===t?i.widthPercents:i.width)+t;e.setStyle("width",t,this._options.viewElement)});var e=this._getHandleHost(),t=new b(e),r=Math.round(t.width),s=Math.round(t.height),e=new b(e);i.width=Math.round(e.width),i.height=Math.round(e.height),this.redraw(t),this.state.update({...i,handleHostWidth:r,handleHostHeight:s})}commit(){const e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){var i,r=this._domResizerWrapper;if((i=r)&&i.ownerDocument&&i.ownerDocument.contains(i)){const s=r.parentElement,n=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let t;"same"!==Qs(a,t=s.isSameNode(n)?[(i=e||new b(n)).width+"px",i.height+"px",void 0,void 0]:[n.offsetWidth+"px",n.offsetHeight+"px",n.offsetLeft+"px",n.offsetTop+"px"])&&this._options.editor.editing.view.change(e=>{e.setStyle({width:t[0],height:t[1],left:t[2],top:t[3]},o)})}}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(e=>{e.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){var t=this.state,e={x:e.pageX,y:e.pageY},i=!this._options.isCentered||this._options.isCentered(this),r={x:t._referenceCoordinates.x-(e.x+t.originalWidth),y:e.y-t.originalHeight-t._referenceCoordinates.y};i&&t.activeHandlePosition.endsWith("-right")&&(r.x=e.x-(t._referenceCoordinates.x+t.originalWidth)),i&&(r.x*=2);let s=Math.abs(t.originalWidth+r.x),n=Math.abs(t.originalHeight+r.y);return"width"==(s/t.aspectRatio>n?"width":"height")?n=s/t.aspectRatio:s=n*t.aspectRatio,{width:Math.round(s),height:Math.round(n),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*s*100)/100,100)}}_getResizeHost(){var e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){var e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){for(const t of["top-left","top-right","bottom-right","bottom-left"])e.appendChild(new Rc({tag:"div",attributes:{class:"ck-widget__resizer__handle ck-widget__resizer__handle-"+t}}).render())}_appendSizeUI(e){this._sizeView=new mg,this._sizeView.render(),e.appendChild(this._sizeView.element)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fg extends n{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){var e=this.editor.editing,t=h.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(mc),this._observer=new(ln()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=zs(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(var[e,t]of this._resizers)e.isAttached()||(this._resizers.delete(e),t.destroy())},{priority:"lowest"}),this._observer.listenTo(h.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{var e=i.getSelectedElement(),e=this.getResizerByViewElement(e)||null;e?this.select(e):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){var t=new gg(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const r=i.get("WidgetToolbarRepository");t.on("begin",()=>{r.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{r.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{r.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);i=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(i)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){var i=t.domTarget;gg.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer)&&(this._activeResizer.begin(i),e.stop(),t.preventDefault())}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pg extends n{static get pluginName(){return"DragDrop"}static get requires(){return[hm,lg]}init(){var e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=zs(e=>this._updateDropMarker(e),40),this._removeDropMarkerDelayed=to(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=to(()=>this._clearDraggableAttributes(),40),e.plugins.has("DragDropExperimental")?this.forceDisabled("DragDropExperimental"):(t.addObserver(am),t.addObserver(mc),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(e,t,i)=>{i?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(e,t,i)=>{i||this._finalizeDragging(!1)}),m.isAndroid&&this.forceDisabled("noAndroidSupport"))}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const s=this.editor,n=s.model,o=n.document,e=s.editing.view,a=e.document;this.listenTo(a,"dragstart",(e,t)=>{var i,r=o.selection;(!t.target||!t.target.is("editableElement"))&&((i=t.target?bg(t.target):null)?(i=s.editing.mapper.toModelElement(i),this._draggedRange=ml.fromRange(n.createRangeOn(i)),s.plugins.has("WidgetToolbarRepository")&&s.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")):a.selection.isCollapsed||(i=a.selection.getSelectedElement())&&M(i)||(this._draggedRange=ml.fromRange(r.getFirstRange())),this._draggedRange)?(this._draggingUid=q(),i=this.isEnabled&&s.model.canEditAt(this._draggedRange),t.dataTransfer.effectAllowed=i?"copyMove":"copy",t.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid),r=n.createSelection(this._draggedRange.toRange()),r=s.data.toView(n.getSelectedContent(r)),a.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:"dragstart"}),i||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")):t.preventDefault()},{priority:"low"}),this.listenTo(a,"dragend",(e,t)=>{this._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect)},{priority:"low"}),this.listenTo(a,"dragenter",()=>{this.isEnabled&&e.focus()}),this.listenTo(a,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(a,"dragging",(e,t)=>{var i;this.isEnabled&&(this._removeDropMarkerDelayed.cancel(),i=vg(s,t.targetRanges,t.target),s.model.canEditAt(i))?(this._draggedRange||(t.dataTransfer.dropEffect="copy"),m.isGecko||("copy"==t.dataTransfer.effectAllowed?t.dataTransfer.dropEffect="copy":["all","copyMove"].includes(t.dataTransfer.effectAllowed)&&(t.dataTransfer.dropEffect="move")),/* istanbul ignore else -- @preserve */i&&this._updateDropMarkerThrottled(i)):t.dataTransfer.dropEffect="none"},{priority:"low"})}_setupClipboardInputIntegration(){const r=this.editor,e=r.editing.view.document;this.listenTo(e,"clipboardInput",(e,t)=>{var i;"drop"==t.method&&(i=vg(r,t.targetRanges,t.target),this._removeDropMarker(),/* istanbul ignore if -- @preserve */!i||!r.model.canEditAt(i)||(this._draggedRange&&this._draggingUid!=t.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),"move"==wg(t.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(i,!0))?(this._finalizeDragging(!1),e.stop()):t.targetRanges=[r.editing.mapper.toViewRange(i)])},{priority:"high"})}_setupContentInsertionIntegration(){var e=this.editor.plugins.get(hm);e.on("contentInsertion",(e,t)=>{if(this.isEnabled&&"drop"===t.method){const i=t.targetRanges.map(e=>this.editor.editing.mapper.toModelRange(e));this.editor.model.change(e=>e.setSelection(i))}},{priority:"high"}),e.on("contentInsertion",(e,t)=>{var i;this.isEnabled&&"drop"===t.method&&(i="move"==wg(t.dataTransfer),t=!t.resultRange||!t.resultRange.isCollapsed,this._finalizeDragging(t&&i))},{priority:"lowest"})}_setupDraggableAttributeHandling(){const r=this.editor,s=r.editing.view,n=s.document;this.listenTo(n,"mousedown",(e,i)=>{if(!m.isAndroid&&i){this._clearDraggableAttributesDelayed.cancel();let t=bg(i.target);!m.isBlink||t||n.selection.isCollapsed||(i=n.selection.getSelectedElement())&&M(i)||(i=n.selection.editableElement)&&!i.isReadOnly&&(t=i),t&&(s.change(e=>{e.setAttribute("draggable","true",t)}),this._draggableElement=r.editing.mapper.toModelElement(t))}}),this.listenTo(n,"mouseup",()=>{m.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const i=this.editor;i.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),i.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:t})=>{if(i.model.schema.checkChild(e.markerRange.start,"$text"))return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(e){var t=this.toDomElement(e);return t.append("",e.createElement("span"),""),t})}})}_updateDropMarker(t){const e=this.editor,i=e.model.markers;e.model.change(e=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){var e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(e=>{e.removeMarker("drop-target")})}_finalizeDragging(e){var t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function vg(t,i,e){var r=t.model,s=t.editing.mapper;let n=null;var i=i?i[0].start:null;if(e.is("uiElement")&&(e=e.parent),n=function(e,t){var i=e.model,e=e.editing.mapper;if(M(t))return i.createRangeOn(e.toModelElement(t));if(!t.is("editableElement")){t=t.findAncestor(e=>M(e)||e.is("editableElement"));if(M(t))return i.createRangeOn(e.toModelElement(t))}return null}(t,e))return n;var e=function(e,t){var i=e.editing.mapper,e=e.editing.view,r=i.toModelElement(t);if(r)return r;r=e.createPositionBefore(t),e=i.findMappedViewAncestor(r);return i.toModelElement(e)}(t,e),s=i?s.toModelPosition(i):null;{if(s){if((n=function(e,t,i){e=e.model;if(!e.schema.checkChild(i,"$block"))return null;i=e.createPositionAt(i,0),i=t.path.slice(0,i.path.length),t=e.createPositionFromPath(t.root,i).nodeAfter;return t&&e.schema.isObject(t)?e.createRangeOn(t):null}(t,s,e))||(n=r.schema.getNearestSelectionRange(s,m.isGecko?"forward":"backward")))return n;{i=t,r=s.parent;var o=i.model;let e=r;for(;e;){if(o.schema.isObject(e))return o.createRangeOn(e);e=e.parent}/* istanbul ignore next -- @preserve */return null}}return s=(s=t).model,i=s.schema,s=s.createPositionAt(e,0),i.getNearestSelectionRange(s,"forward")}}function wg(e){return m.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function bg(e){return e.is("editableElement")?null:e.hasClass("ck-widget__selection-handle")?e.findAncestor(M):M(e)?e:(e=e.findAncestor(e=>M(e)||e.is("editableElement")),M(e)?e:null)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _g extends n{static get pluginName(){return"PastePlainText"}static get requires(){return[hm]}init(){const e=this.editor,s=e.model,t=e.editing.view,i=t.document,n=s.document.selection;let o=!1;t.addObserver(am),this.listenTo(i,"keydown",(e,t)=>{o=t.shiftKey}),e.plugins.get(hm).on("contentInsertion",(e,r)=>{(o||function(e,t){if(1<e.childCount)return;e=e.getChild(0);return!t.isObject(e)&&0==Array.from(e.getAttributeKeys()).length}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(r.content,s.schema))&&s.change(e=>{var t=Array.from(n.getAttributes()).filter(([e])=>s.schema.getAttributeProperties(e).isFormatting);n.isCollapsed||s.deleteContent(n,{doNotAutoparagraph:!0}),t.push(...n.getAttributes());for(const i of e.createRangeIn(r.content).getItems())i.is("$textProxy")&&e.setAttributes(t,i)})})}}class yg extends n{static get pluginName(){return"Clipboard"}static get requires(){return[hm,pg,_g]}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kg extends l{constructor(e){super(e),this.affectsData=!1}execute(){var e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Ag(e.schema,i))do{if(!(i=i.parent))return}while(!Ag(e.schema,i));e.change(e=>{e.setSelection(i,"in")})}}function Ag(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Eg=Wn("Ctrl+A");class Cg extends n{static get pluginName(){return"SelectAllEditing"}init(){const i=this.editor,e=i.editing.view.document;i.commands.add("selectAll",new kg(i)),this.listenTo(e,"keydown",(e,t)=>{Hn(t)===Eg&&(i.execute("selectAll"),t.preventDefault())})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pg extends n{static get pluginName(){return"SelectAllUI"}init(){const r=this.editor;r.ui.componentFactory.add("selectAll",e=>{var t=r.commands.get("selectAll"),i=new I(e),e=e.t;return i.set({label:e("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),i.bind("isEnabled").to(t,"isEnabled"),this.listenTo(i,"execute",()=>{r.execute("selectAll"),r.editing.view.focus()}),i})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xg extends n{static get requires(){return[Cg,Pg]}static get pluginName(){return"SelectAll"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tg extends l{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(e,t)=>{t[1]={...t[1]};t=t[1];t.batchType||(t.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(e,t)=>{t[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=0<this._stack.length}get createdBatches(){return this._createdBatches}addBatch(e){var t=this.editor.model.document.selection,t={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:t}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const r=this.editor.model,s=r.document,n=[],o=e.map(e=>e.getTransformedByOperations(i)),a=o.flat();for(const d of o){var l=d.filter(e=>e.root!=s.graveyard).filter(e=>{return t=e,!a.some(e=>e!==t&&e.containsRange(t,!0));var t;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */});if(l.length){{h=void 0;c=void 0;var h=l;h.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<h.length;e++){var c=h[e-1].getJoined(h[e],!0);c&&(e--,h.splice(e,2,c))}}n.push(l[0])}}n.length&&r.change(e=>{e.setSelection(n,{backward:t})})}_undo(e,t){var i=this.editor.model,r=i.document,e=(this._createdBatches.add(t),e.operations.slice().filter(e=>e.isDocumentOperation));e.reverse();for(const a of e){var s,n=a.baseVersion+1,n=Array.from(r.history.getOperations(n));for(s of function(t,i,r){t=t.slice(),i=i.slice();var s=new Th(r.document,r.useRelations,r.forceWeakRemove),e=(s.setOriginalOperations(t),s.setOriginalOperations(i),s.originalOperations);if(0!=t.length&&0!=i.length){var n=new WeakMap;for(const m of t)n.set(m,0);var o,a={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:i[i.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:i.length};let e=0;for(;e<t.length;){var l=t[e],h=n.get(l);if(h==i.length)e++;else{var c=i[h],d=xh(l,c,s.getContext(l,c,!0)),u=xh(c,l,s.getContext(c,l,!1));s.updateRelation(l,c),s.setOriginalOperations(d,l),s.setOriginalOperations(u,c);for(const g of d)n.set(g,h+u.length);t.splice(e,1,...d),i.splice(h,1,...u)}}r.padWithNoOps&&(r=t.length-a.originalOperationsACount,Oh(t,(o=i.length-a.originalOperationsBCount)-r),Oh(i,r-o)),Sh(t,a.nextBaseVersionB),Sh(i,a.nextBaseVersionA)}return{operationsA:t,operationsB:i,originalOperations:e}}([a.getReversed()],n,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA){var o=s.affectedSelectable;o&&!i.canEditAt(o)&&(s=new _h(s.baseVersion)),t.addOperation(s),i.applyOperation(s),r.history.setOperationAsUndone(a,s)}}}}class Sg extends Tg{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,i=this._stack.splice(e,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(i.batch,r);var e=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,e),this.fire("revert",i.batch,r)}),this.refresh()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Og extends Tg{execute(){const t=this._stack.pop(),i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{var e=t.batch.operations[t.batch.operations.length-1].baseVersion+1,e=this.editor.model.document.history.getOperations(e);this._restoreSelection(t.selection.ranges,t.selection.isBackward,e),this._undo(t.batch,i)}),this.refresh()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rg extends n{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){var e=this.editor;this._undoCommand=new Sg(e),this._redoCommand=new Og(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(e,t)=>{var i,r,t=t[0];t.isDocumentOperation&&(t=t.batch,i=this._redoCommand.createdBatches.has(t),r=this._undoCommand.createdBatches.has(t),this._batchRegistry.has(t)||(this._batchRegistry.add(t),t.isUndoable&&(i?this._undoCommand.addBatch(t):r||(this._undoCommand.addBatch(t),this._redoCommand.clearStack()))))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(e,t,i)=>{this._redoCommand.addBatch(i)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}const Ig='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Vg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mg extends n{static get pluginName(){return"UndoUI"}init(){var e=this.editor,t=e.locale,e=e.t,i="ltr"==t.uiLanguageDirection?Ig:Vg,t="ltr"==t.uiLanguageDirection?Vg:Ig;this._addButton("undo",e("Undo"),"CTRL+Z",i),this._addButton("redo",e("Redo"),"CTRL+Y",t)}_addButton(i,r,s,n){const o=this.editor;o.ui.componentFactory.add(i,e=>{var t=o.commands.get(i),e=new I(e);return e.set({label:r,icon:n,keystroke:s,tooltip:!0}),e.bind("isEnabled").to(t,"isEnabled"),this.listenTo(e,"execute",()=>{o.execute(i),o.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ng extends n{static get requires(){return[Rg,Mg]}static get pluginName(){return"Undo"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bg extends n{static get requires(){return[yg,Fm,xg,Hm,Am,Ng]}static get pluginName(){return"Essentials"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dg extends l{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){var e=this.editor.model,t=Yn(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&Fg(t,e.schema)}execute(e={}){const i=this.editor.model,t=i.document,r=e.selection||t.selection;i.canEditAt(r)&&i.change(e=>{for(const t of r.getSelectedBlocks())!t.is("element","paragraph")&&Fg(t,i.schema)&&e.rename(t,"paragraph")})}}function Fg(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lg extends l{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const r=this.editor.model,s=e.attributes;let n=e.position;r.canEditAt(n)&&r.change(e=>{var t=e.createElement("paragraph");if(s&&r.schema.setAllowedAttributes(t,s,e),!r.schema.checkChild(n.parent,t)){var i=r.schema.findAllowedParent(n,t);if(!i)return;n=e.split(n,i).position}r.insertContent(t,n),e.setSelection(t,"in")})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zg extends n{static get pluginName(){return"Paragraph"}init(){var e=this.editor,t=e.model;e.commands.add("paragraph",new Dg(e)),e.commands.add("insertParagraph",new Lg(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(e,{writer:t})=>!zg.paragraphLikeElements.has(e.name)||e.isEmpty?null:t.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}zg.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jg=["left","right","center","justify"];function Hg(e){return jg.includes(e)}function Wg(e,t){return"rtl"==t.contentLanguageDirection?"right"===e:"left"===e}function $g(r){var e=r.map(e=>{let t;return t="string"==typeof e?{name:e}:e}).filter(e=>{var t=jg.includes(e.name);return t||c("alignment-config-name-not-recognized",{option:e}),t}),t=e.filter(e=>!!e.className).length;if(t&&t<e.length)throw new w("alignment-config-classnames-are-missing",{configuredOptions:r});return e.forEach((t,e,i)=>{i=i.slice(e+1);if(i.some(e=>e.name==t.name))throw new w("alignment-config-name-already-defined",{option:t,configuredOptions:r});if(t.className&&i.some(e=>e.className==t.className))throw new w("alignment-config-classname-already-defined",{option:t,configuredOptions:r})}),e}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qg="alignment";class Ug extends l{refresh(){var e=this.editor.locale,t=Yn(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!t&&this._canBeAligned(t),this.isEnabled&&t.hasAttribute("alignment")?this.value=t.getAttribute("alignment"):this.value="rtl"===e.contentLanguageDirection?"right":"left"}execute(e={}){const t=this.editor,l=t.locale,i=t.model,h=i.document,c=e.value;i.change(e=>{var t=Array.from(h.selection.getSelectedBlocks()).filter(e=>this._canBeAligned(e)),i=t[0].getAttribute("alignment");if(Wg(c,l)||i===c||!c){var r=e;for(const o of t)r.removeAttribute(qg,o)}else{var i=t,s=e,n=c;for(const a of i)s.setAttribute(qg,n,a)}})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,qg)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gg extends n{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:jg.map(e=>({name:e}))})}init(){const e=this.editor,t=e.locale,i=e.model.schema,r=$g(e.config.get("alignment.options")).filter(e=>Hg(e.name)&&!Wg(e.name,t)),s=r.some(e=>!!e.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),s?e.conversion.attributeToAttribute(function(e){var t={};for(const i of e)t[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:e.map(e=>e.name)},view:t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(r)):e.conversion.for("downcast").attributeToAttribute(function(e){var t={};for(var{name:i}of e)t[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:e.map(e=>e.name)},view:t}}(r));for(const n of function(e){var t=[];for(var{name:i}of e)t.push({view:{key:"style",value:{"text-align":i}},model:{key:"alignment",value:i}});return t}(r))e.conversion.for("upcast").attributeToAttribute(n);for(const o of function(e){var t=[];for(var{name:i}of e)t.push({view:{key:"align",value:i},model:{key:"alignment",value:i}});return t}(r))e.conversion.for("upcast").attributeToAttribute(o);e.commands.add("alignment",new Ug(e))}}const Kg=new Map([["left",S.alignLeft],["right",S.alignRight],["center",S.alignCenter],["justify",S.alignJustify]]);class Jg extends n{get localizedOptionTitles(){var e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const s=this.editor,n=s.ui.componentFactory,o=s.t,a=$g(s.config.get("alignment.options"));a.map(e=>e.name).filter(Hg).forEach(e=>this._addButton(e)),n.add("alignment",e=>{var t=$d(e);qd(t,()=>a.map(e=>n.create("alignment:"+e.name)),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:o("Text alignment toolbar")}),t.buttonView.set({label:o("Text alignment"),tooltip:!0}),t.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const i="rtl"===e.contentLanguageDirection?Kg.get("right"):Kg.get("left"),r=s.commands.get("alignment");return t.buttonView.bind("icon").to(r,"value",e=>Kg.get(e)||i),t.bind("isEnabled").to(r,"isEnabled"),this.listenTo(t,"execute",()=>{s.editing.view.focus()}),t})}_addButton(i){const r=this.editor;r.ui.componentFactory.add("alignment:"+i,e=>{var t=r.commands.get("alignment"),e=new I(e);return e.set({label:this.localizedOptionTitles[i],icon:Kg.get(i),tooltip:!0,isToggleable:!0}),e.bind("isEnabled").to(t),e.bind("isOn").to(t,"value",e=>e===i),this.listenTo(e,"execute",()=>{r.execute("alignment",{value:i}),r.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zg extends n{static get requires(){return[Gg,Jg]}static get pluginName(){return"Alignment"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yg extends l{constructor(e,t){super(e),this.attributeKey=t}refresh(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,r=i.document.selection,s=void 0===e.forceValue?!this.value:e.forceValue;i.change(e=>{if(r.isCollapsed)s?e.setSelectionAttribute(this.attributeKey,!0):e.removeSelectionAttribute(this.attributeKey);else for(const t of i.schema.getValidRanges(r.getRanges(),this.attributeKey))s?e.setAttribute(this.attributeKey,s,t):e.removeAttribute(this.attributeKey,t)})}_getValueFromFirstAllowedNode(){var e=this.editor.model,t=e.schema,e=e.document.selection;if(e.isCollapsed)return e.hasAttribute(this.attributeKey);for(const i of e.getRanges())for(const r of i.getItems())if(t.checkAttribute(r,this.attributeKey))return r.hasAttribute(this.attributeKey);return!1}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Xg="bold";class Qg extends n{static get pluginName(){return"BoldEditing"}init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:Xg}),e.model.schema.setAttributeProperties(Xg,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Xg,view:"strong",upcastAlso:["b",e=>{e=e.getStyle("font-weight");return e&&("bold"==e||600<=Number(e))?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Xg,new Yg(e,Xg)),e.keystrokes.set("CTRL+B",Xg)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ef="bold";class tf extends n{static get pluginName(){return"BoldUI"}init(){const i=this.editor,r=i.t;i.ui.componentFactory.add(ef,e=>{var t=i.commands.get(ef),e=new I(e);return e.set({label:r("Bold"),icon:S.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),e.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(e,"execute",()=>{i.execute(ef),i.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rf extends n{static get requires(){return[Qg,tf]}static get pluginName(){return"Bold"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sf="italic";class nf extends n{static get pluginName(){return"ItalicEditing"}init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:sf}),e.model.schema.setAttributeProperties(sf,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:sf,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(sf,new Yg(e,sf)),e.keystrokes.set("CTRL+I",sf)}}const of="italic";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class af extends n{static get pluginName(){return"ItalicUI"}init(){const i=this.editor,r=i.t;i.ui.componentFactory.add(of,e=>{var t=i.commands.get(of),e=new I(e);return e.set({label:r("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),e.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(e,"execute",()=>{i.execute(of),i.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lf extends n{static get requires(){return[nf,af]}static get pluginName(){return"Italic"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hf="underline";class cf extends n{static get pluginName(){return"UnderlineEditing"}init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:hf}),e.model.schema.setAttributeProperties(hf,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:hf,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(hf,new Yg(e,hf)),e.keystrokes.set("CTRL+U","underline")}}const df="underline";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uf extends n{static get pluginName(){return"UnderlineUI"}init(){const i=this.editor,r=i.t;i.ui.componentFactory.add(df,e=>{var t=i.commands.get(df),e=new I(e);return e.set({label:r("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),e.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(e,"execute",()=>{i.execute(df),i.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mf extends n{static get requires(){return[cf,uf]}static get pluginName(){return"Underline"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gf extends l{constructor(e,t){super(e),this.modelElements=t}refresh(){const t=Yn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(e=>ff(t,e,this.editor.model.schema))}execute(e){const i=this.editor.model,r=i.document,s=e.value;i.change(e=>{for(const t of Array.from(r.selection.getSelectedBlocks()).filter(e=>ff(e,s,i.schema)))t.is("element",s)||e.rename(t,s)})}}function ff(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e)}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pf="paragraph";class vf extends n{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[zg]}init(){var e=this.editor,t=[];for(const i of e.config.get("heading.options"))"paragraph"!==i.model&&(e.model.schema.register(i.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(i),t.push(i.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new gf(e,t))}afterInit(){const r=this.editor,e=r.commands.get("enter"),s=r.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,t)=>{const i=r.model.document.selection.getFirstPosition().parent;s.some(e=>i.is("element",e.model))&&!i.is("element",pf)&&0===i.childCount&&t.writer.rename(i,pf)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:U.low+1})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wf extends n{static get pluginName(){return"HeadingUI"}init(){const l=this.editor,e=l.t,h=function(e){const t=e.t,i={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map(e=>{var t=i[e.title];return t&&t!=e.title&&(e.title=t),e})}(l),c=e("Choose heading"),d=e("Heading");l.ui.componentFactory.add("heading",e=>{const i={},t=new Zn,r=l.commands.get("heading"),s=l.commands.get("paragraph"),n=[r];for(const a of h){var o={type:"button",model:new Zu({label:a.title,class:a.class,role:"menuitemradio",withText:!0})};"paragraph"===a.model?(o.model.bind("isOn").to(s,"value"),o.model.set("commandName","paragraph"),n.push(s)):(o.model.bind("isOn").to(r,"value",e=>e===a.model),o.model.set({commandName:"heading",commandValue:a.model})),t.add(o),i[a.model]=a.title}e=$d(e);return Gd(e,t,{ariaLabel:d,role:"menu"}),e.buttonView.set({ariaLabel:d,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:d}),e.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),e.bind("isEnabled").toMany(n,"isEnabled",(...e)=>e.some(e=>e)),e.buttonView.bind("label").to(r,"value",s,"value",(e,t)=>{e=e||t&&"paragraph";return"boolean"!=typeof e&&i[e]?i[e]:c}),this.listenTo(e,"execute",e=>{var{commandName:e,commandValue:t}=e.source;l.execute(e,t?{value:t}:void 0),l.editing.view.focus()}),e})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bf extends n{static get requires(){return[vf,wf]}static get pluginName(){return"Heading"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _f extends l{constructor(e,t){super(e),this.attributeKey=t}refresh(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,r=i.document.selection,s=e.value,t=e.batch,n=e=>{if(r.isCollapsed)s?e.setSelectionAttribute(this.attributeKey,s):e.removeSelectionAttribute(this.attributeKey);else for(const t of i.schema.getValidRanges(r.getRanges(),this.attributeKey))s?e.setAttribute(this.attributeKey,s,t):e.removeAttribute(this.attributeKey,t)};t?i.enqueueChange(t,e=>{n(e)}):i.change(e=>{n(e)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yf extends s(Zn){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",0===this.length)})}add(t,e){return this.find(e=>e.color===t.color)?this:super.add(t,e)}hasColor(t){return!!this.find(e=>e.color===t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kf extends R{constructor(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:s,documentColorsCount:n,colorPickerLabel:o,colorPickerConfig:a}){super(e),this.items=this.createCollection(),this.focusTracker=new Xn,this.keystrokes=new Qn,this._focusables=new Oc,this._colorPickerConfig=a,this._focusCycler=new Sd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsPageView=new Af(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:s,documentColorsCount:n,colorPickerLabel:o,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerPageView=new Ef(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerConfig:a}),this.set("_isColorGridsPageVisible",!0),this.set("_isColorPickerPageVisible",!1),this.set("selectedColor",void 0),this.colorGridsPageView.bind("isVisible").to(this,"_isColorGridsPageVisible"),this.colorPickerPageView.bind("isVisible").to(this,"_isColorPickerPageVisible"),this.on("change:selectedColor",(e,t,i)=>{this.colorGridsPageView.set("selectedColor",i),this.colorPickerPageView.set("selectedColor",i)}),this.colorGridsPageView.on("change:selectedColor",(e,t,i)=>{this.set("selectedColor",i)}),this.colorPickerPageView.on("change:selectedColor",(e,t,i)=>{this.set("selectedColor",i)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendGrids(){this.items.length||(this.items.add(this.colorGridsPageView),this.colorGridsPageView.delegate("execute").to(this),this.colorGridsPageView.delegate("showColorPicker").to(this))}appendUI(){this.appendGrids(),this._colorPickerConfig&&this._appendColorPicker()}showColorPicker(){this.colorPickerPageView.colorPickerView&&(this.set("_isColorPickerPageVisible",!0),this.colorPickerPageView.focus(),this.set("_isColorGridsPageVisible",!1))}showColorGrids(){this.set("_isColorGridsPageVisible",!0),this.set("_isColorPickerPageVisible",!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsPageView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsPageView.updateSelectedColors()}_appendColorPicker(){2!==this.items.length&&(this.items.add(this.colorPickerPageView),this.colorGridsPageView.colorPickerButtonView&&this.colorGridsPageView.colorPickerButtonView.on("execute",()=>{this.showColorPicker()}),this.colorGridsPageView.addColorPickerButton(),this.colorPickerPageView.delegate("execute").to(this),this.colorPickerPageView.delegate("cancel").to(this))}}class Af extends R{constructor(e,{colors:t,columns:i,removeButtonLabel:r,documentColorsLabel:s,documentColorsCount:n,colorPickerLabel:o,focusTracker:a,focusables:l}){super(e);e=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=a,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new yf,this.documentColorsCount=n,this._focusables=l,this._removeButtonLabel=r,this._colorPickerLabel=o,this._documentColorsLabel=s,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-page-view",e.if("isVisible","ck-hidden",e=>!e)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){var i=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const n of i.getRootNames()){var s=i.getRoot(n);for(const o of e.createRangeIn(s).getItems())if(o.is("$textProxy")&&o.hasAttribute(t)&&(this._addColorToDocumentColors(o.getAttribute(t)),this.documentColors.length>=r))return}}updateSelectedColors(){var e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){var e,t;super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount&&(e=Rc.bind(this.documentColors,this.documentColors),(t=new yd(this.locale)).text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)),this._createColorPickerButton(),this._addColorTablesElementsToFocusTracker(),this.focus()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorTablesElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new I,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:tm.colorPaletteIcon,class:"ck-color-table__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("showColorPicker")})}_createRemoveColorButton(){var e=new I;return e.set({withText:!0,icon:S.eraser,label:this._removeButtonLabel}),e.class="ck-color-table__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){var e=new ed(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(e,t)=>{this.fire("execute",{value:t.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Rc.bind(this.documentColors,this.documentColors),r=new ed(this.locale,{columns:this.columns});return r.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),r.items.bindTo(this.documentColors).using(e=>{var t=new Qc;return t.set({color:e.color,hasBorder:e.options&&e.options.hasBorder}),e.label&&t.set({label:e.label,tooltip:!0}),t.on("execute",()=>{this.fire("execute",{value:e.color,source:"documentColorsGrid"})}),t}),this.documentColors.on("change:isEmpty",(e,t,i)=>{i&&(r.selectedColor=null)}),r}_addColorToDocumentColors(t){var e=this.colorDefinitions.find(e=>e.color===t);e?this.documentColors.add(Object.assign({},e)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}class Ef extends R{constructor(e,{focusTracker:t,focusables:i,keystrokes:r,colorPickerConfig:s}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=r,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._pickerConfig=s;var e=this.bindTemplate,{saveButtonView:t,cancelButtonView:r}=this._createActionButtons();this.saveButtonView=t,this.cancelButtonView=r,this.actionBarView=this._createActionBarView({saveButtonView:t,cancelButtonView:r}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-page-view",e.if("isVisible","ck-hidden",e=>!e)]},children:this.items})}render(){super.render();const r=new Au(this.locale,this._pickerConfig);this.colorPickerView=r,this.colorPickerView.render(),this.selectedColor&&(r.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(e,t,i)=>{r.color=i}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){var e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const e of this.colorPickerView.slidersView)this.focusTracker.add(e.element),this._focusables.add(e);this.focusTracker.add(this.colorPickerView.hexInputRow.children.get(1).element),this._focusables.add(this.colorPickerView.hexInputRow.children.get(1)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){var i=new R,r=this.createCollection();return r.add(e),r.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table_action-bar"]},children:r}),i}_createActionButtons(){var e=this.locale,t=e.t,i=new I(e),e=new I(e);return i.set({icon:S.check,class:"ck-button-save",withText:!1,label:t("Accept"),type:"button"}),e.set({icon:S.cancel,class:"ck-button-cancel",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.fire("execute",{source:"saveButton",value:this.selectedColor})}),e.on("execute",()=>{this.fire("cancel")}),{saveButtonView:i,cancelButtonView:e}}_executeUponColorChange(){this.colorPickerView.on("change:color",(e,t,i)=>{this.fire("execute",{value:i,source:"colorPicker"})})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cf="fontColor";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pf extends _f{constructor(e){super(e,Cf)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xf extends n{static get pluginName(){return"FontColorEditing"}constructor(e){var i,t;super(e),e.config.define(Cf,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Cf,value:(t="color",e=>e.getStyle(t).replace(/\s/g,""))}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Cf,value:e=>e.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Cf,view:(i="color",(e,{writer:t})=>t.createAttributeElement("span",{style:i+":"+e},{priority:7}))}),e.commands.add(Cf,new Pf(e)),e.model.schema.extend("$text",{allowAttributes:Cf}),e.model.schema.setAttributeProperties(Cf,{isFormatting:!0,copyOnEnter:!0})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tf extends n{constructor(e,{commandName:t,componentName:i,icon:r,dropdownLabel:s}){super(e),this.commandName=t,this.componentName=i,this.icon=r,this.dropdownLabel=s,this.columns=e.config.get(this.componentName+".columns"),this.colorTableView=void 0}init(){const d=this.editor,e=d.locale,u=e.t,m=d.commands.get(this.commandName),g=d.config.get(this.componentName),t=g.colors.map(Xc).filter(e=>!!e),f=function(e,t){const i=e.t,r={Black:i("Black"),"Dim grey":i("Dim grey"),Grey:i("Grey"),"Light grey":i("Light grey"),White:i("White"),Red:i("Red"),Orange:i("Orange"),Yellow:i("Yellow"),"Light green":i("Light green"),Green:i("Green"),Aquamarine:i("Aquamarine"),Turquoise:i("Turquoise"),"Light blue":i("Light blue"),Blue:i("Blue"),Purple:i("Purple")};return t.map(e=>{var t=r[e.label];return t&&t!=e.label&&(e.label=t),e})}(e,t),p=g.documentColors,v=!1!==g.colorPicker;d.ui.componentFactory.add(this.componentName,e=>{const r=$d(e);let s=!1;return this.colorTableView=({dropdownView:e,colors:t,columns:i,removeButtonLabel:n,colorPickerLabel:o,documentColorsLabel:a,documentColorsCount:l,colorPickerConfig:h}=[{dropdownView:r,colors:f.map(e=>({label:e.label,color:e.model,options:{hasBorder:e.hasBorder}})),columns:this.columns,removeButtonLabel:u("Remove color"),colorPickerLabel:u("Color picker"),documentColorsLabel:0!==p?u("Document colors"):"",documentColorsCount:void 0===p?this.columns:p,colorPickerConfig:v&&(g.colorPicker||{})}][0],c=e.locale,c=new kf(c,{colors:t,columns:i,removeButtonLabel:n,colorPickerLabel:o,documentColorsLabel:a,documentColorsCount:l,colorPickerConfig:h}),e.colorTableView=c,e.panelView.children.add(c),c),this.colorTableView.bind("selectedColor").to(m,"value"),r.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),r.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),r.bind("isEnabled").to(m),this.colorTableView.on("execute",(e,t)=>{r.isOpen&&d.execute(this.commandName,{value:t.value,batch:this._undoStepBatch}),"colorPicker"!==t.source&&d.editing.view.focus()}),this.colorTableView.on("showColorPicker",()=>{this._undoStepBatch=d.model.createBatch()}),this.colorTableView.on("cancel",()=>{this._undoStepBatch.operations.length&&(r.isOpen=!1,d.execute("undo",this._undoStepBatch)),d.editing.view.focus()}),r.on("change:isOpen",(e,t,i)=>{s||(s=!0,r.colorTableView.appendUI()),i?(0!==p&&this.colorTableView.updateDocumentColors(d.model,this.componentName),this.colorTableView.updateSelectedColors()):this.colorTableView.showColorGrids()}),Jd(r,()=>r.colorTableView.colorGridsPageView.staticColorsGrid.items.find(e=>e.isOn)),r;var t,i,n,o,a,l,h,c})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sf extends Tf{constructor(e){var t=e.locale.t;super(e,{commandName:Cf,componentName:Cf,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Of extends n{static get requires(){return[xf,Sf]}static get pluginName(){return"FontColor"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Rf(s,n){const t=(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&(e=t.attributeNewValue,r=i.writer,t=[...(i=i.mapper.toViewElement(t.item)).getChildren()].find(e=>e.getCustomProperty("media-content")),r.remove(t),t=s.getMediaViewElement(r,e,n),r.insert(r.createPositionAt(i,0),t))};return e=>{e.on("attribute:url:media",t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function If(e,t,i,r){return e.createContainerElement("figure",{class:"media"},[t.getMediaViewElement(e,i,r),e.createSlot()])}function Vf(e){e=e.getSelectedElement();return e&&e.is("element","media")?e:null}function Mf(t,i,r,s){t.change(e=>{e=e.createElement("media",{url:i});t.insertObject(e,r,null,{setSelection:"on",findOptimalPosition:s?"auto":void 0})})}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nf extends l{refresh(){var e=this.editor.model,t=e.document.selection,i=Vf(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=function(e){e=e.getSelectedElement();return!!e&&"media"===e.name}(t)||function(e,t){let i=Zm(e,t).start.parent;return i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent),t.schema.checkChild(i,"media")}(t,e)}execute(t){const e=this.editor.model,i=e.document.selection,r=Vf(i);r?e.change(e=>{e.setAttribute("url",t,r)}):Mf(e,t,i,!0)}}class Bf{constructor(e,t){const i=t.providers,r=t.extraProviders||[],s=new Set(t.removeProviders),n=i.concat(r).filter(e=>{var t=e.name;return t?!s.has(t):(c("media-embed-no-provider-name",{provider:e}),!1)});this.locale=e,this.providerDefinitions=n}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new Df(this.locale);e=e.trim();for(const r of this.providerDefinitions){var t=r.html;for(const s of u(r.url)){var i=this._getUrlMatches(e,s);if(i)return new Df(this.locale,e,i,t)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let r=e.replace(/^https?:\/\//,"");return(i=r.match(t))||(r=r.replace(/^www\./,""),i=r.match(t))?i:null}}class Df{constructor(e,t,i,r){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=r}getViewElement(e,t){var i={};let r;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const s=this._getPreviewHtml(t);r=e.createRawElement("div",i,(e,t)=>{t.setContentOf(e,s)})}else this.url&&(i.url=this.url),r=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){var e=new Zc,t=this._locale.t;return e.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',e.viewBox="0 0 64 42",new Rc({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ff extends n{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:e=>{var t=e[1],e=e[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${t}${e?"?start="+e:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Bf(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,r=e.t,i=e.conversion,s=e.config.get("mediaEmbed.previewsInData"),n=e.config.get("mediaEmbed.elementName"),o=this.registry;e.commands.add("mediaEmbed",new Nf(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),i.for("dataDowncast").elementToStructure({model:"media",view:(e,{writer:t})=>{e=e.getAttribute("url");return If(t,o,e,{elementName:n,renderMediaPreview:!!e&&s})}}),i.for("dataDowncast").add(Rf(o,{elementName:n,renderMediaPreview:s})),i.for("editingDowncast").elementToStructure({model:"media",view:(e,{writer:t})=>{var i,e=e.getAttribute("url"),e=If(t,o,e,{elementName:n,renderForEditingView:!0});return e=e,t=t,i=r("media widget"),t.setCustomProperty("media",!0,e),Jm(e,t,{label:i})}}),i.for("editingDowncast").add(Rf(o,{elementName:n,renderForEditingView:!0})),i.for("upcast").elementToElement({view:e=>["oembed",n].includes(e.name)&&e.getAttribute("url")?{name:!0}:null,model:(e,{writer:t})=>{e=e.getAttribute("url");return o.hasMedia(e)?t.createElement("media",{url:e}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(e,{writer:t})=>{e=e.getAttribute("data-oembed-url");return o.hasMedia(e)?t.createElement("media",{url:e}):null}}).add(e=>{e.on("element:figure",(e,t,i)=>{var r,s;i.consumable.consume(t.viewItem,{name:!0,classes:"media"})&&({modelRange:r,modelCursor:s}=i.convertChildren(t.viewItem,t.modelCursor),t.modelRange=r,t.modelCursor=s,Yn(r.getItems())||i.consumable.revert(t.viewItem,{name:!0,classes:"media"}))})})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Lf=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class zf extends n{static get requires(){return[yg,km,Ng]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,r=e.model.document,t=e.plugins.get("ClipboardPipeline");this.listenTo(t,"inputTransformation",()=>{const e=r.selection.getFirstRange(),t=Mh.fromPosition(e.start),i=(t.stickiness="toPrevious",Mh.fromPosition(e.end));i.stickiness="toNext",r.once("change:data",()=>{this._embedMediaBetweenPositions(t,i),t.detach(),i.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(h.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,r=i.plugins.get(Ff).registry,s=new ml(e,t),n=s.getWalker({ignoreElementEnd:!0});let o="";for(const a of n)a.item.is("$textProxy")&&(o+=a.item.data);(o=o.trim()).match(Lf)&&r.hasMedia(o)&&i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Mh.fromPosition(e),this._timeoutId=h.window.setTimeout(()=>{i.model.change(e=>{this._timeoutId=null,e.remove(s),s.detach();let t=null;"$graveyard"!==this._positionToInsert.root.rootName&&(t=this._positionToInsert),Mf(i.model,o,t,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(km).requestUndoOnBackspace()},100)):s.detach()}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jf extends R{constructor(e,t){super(t);t=t.t;this.focusTracker=new Xn,this.keystrokes=new Qn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(t("Save"),S.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",e=>!!e),this.cancelButtonView=this._createButton(t("Cancel"),S.cancel,"ck-button-cancel","cancel"),this._focusables=new Oc,this._focusCycler=new Sd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),Sc({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element);var e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){var e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new kd(this.locale,Zd),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}_createButton(e,t,i,r){var s=new I(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.extendTemplate({attributes:{class:i}}),r&&s.delegate("execute").to(this,r),s}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hf extends n{static get requires(){return[Ff]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed");e.ui.componentFactory.add("mediaEmbed",e=>{e=$d(e);return this._setUpDropdown(e,t),e})}_setUpDropdown(r,s){const n=this.editor,e=n.t,o=r.buttonView,a=n.plugins.get(Ff).registry;r.once("change:isOpen",()=>{const e=new(Tc(jf))((t=n.t,i=a,[e=>{if(!e.url.length)return t("The URL must not be empty.")},e=>{if(!i.hasMedia(e.url))return t("This media URL is not supported.")}]),n.locale);var t,i;r.panelView.children.add(e),o.on("open",()=>{e.disableCssTransitions(),e.url=s.value||"",e.urlInputView.fieldView.select(),e.enableCssTransitions()},{priority:"low"}),r.on("submit",()=>{e.isValid()&&(n.execute("mediaEmbed",e.url),n.editing.view.focus())}),r.on("change:isOpen",()=>e.resetFormStatus()),r.on("cancel",()=>{n.editing.view.focus()}),e.delegate("submit","cancel").to(r),e.urlInputView.fieldView.bind("value").to(s,"value"),e.urlInputView.bind("isEnabled").to(s,"isEnabled")}),r.bind("isEnabled").to(s),o.set({label:e("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wf extends n{static get requires(){return[Ff,Hf,zf,lg]}static get pluginName(){return"MediaEmbed"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $f(e,t,i,r){if(t){var s=e,n=r;if(t.attributes)for(var[o]of Object.entries(t.attributes))s.removeAttribute(o,n);if(t.styles)for(const a of Object.keys(t.styles))s.removeStyle(a,n);t.classes&&s.removeClass(t.classes,n)}i&&qf(e,i,r)}function qf(e,t,i){if(t.attributes)for(var[r,s]of Object.entries(t.attributes))e.setAttribute(r,s,i);t.styles&&e.setStyle(t.styles,i),t.classes&&e.addClass(t.classes,i)}function Uf(e,t,i,r,s){var n,o=t.getAttribute(i),a={};for(const l of["attributes","styles","classes"])l!=r?o&&o[l]&&(a[l]=o[l]):"classes"==r?(s(n=new Set(o&&o.classes||[])),n.size&&(a[l]=Array.from(n))):(s(n=new Map(Object.entries(o&&o[l]||{}))),n.size&&(a[l]=Object.fromEntries(n)));Object.keys(a).length?t.is("documentSelection")?e.setSelectionAttribute(i,a):e.setAttribute(i,a,t):o&&(t.is("documentSelection")?e.removeSelectionAttribute(i):e.removeAttribute(i,t))}function Gf(e){return`html${e=e,Ls(e).replace(/ /g,"")}Attributes`}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kf({model:i}){return(e,t)=>t.writer.createElement(i,{htmlContent:e.getCustomProperty("$rawContent")})}function Jf(e,i,t){return t.createRawElement(e,null,(e,t)=>{t.setContentOf(e,i.getAttribute("htmlContent"))})}function Zf({view:t,model:o},a){return e=>{e.on("element:"+t,(e,t,i)=>{var r,s=a.processViewAttributes(t.viewItem,i);if(s||i.consumable.test(t.viewItem,{name:!0})){s=s||{},i.consumable.consume(t.viewItem,{name:!0});for(const n of(t=t.modelRange?t:Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor))).modelRange.getItems())i.schema.checkAttribute(n,o)&&(r=function(e,t){var i=es(e);let r="attributes";for(r in t)"classes"==r?i[r]=Array.from(new Set([...e[r]||[],...t[r]])):i[r]={...e[r],...t[r]};return i}(s,n.getAttribute(o)||{}),i.writer.setAttribute(o,r,n))}},{priority:"low"})}}function Yf({view:t},s){return e=>{e.on("element:"+t,(e,t,i)=>{var r;t.modelRange&&!t.modelRange.isCollapsed&&(r=s.processViewAttributes(t.viewItem,i))&&i.writer.setAttribute(Gf(t.viewItem.name),r,t.modelRange)},{priority:"low"})}}function Xf({view:t,model:i}){return e=>{e.on(`attribute:${Gf(t)}:`+i,(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&({attributeOldValue:e,attributeNewValue:r}=t,$f(i.writer,e,r,i.mapper.toViewElement(t.item)))})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qf={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:"$text",allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref",attributeProperties:{copyOnEnter:!0}},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ep extends n{constructor(){super(...arguments),this._definitions=[]}static get pluginName(){return"DataSchema"}init(){for(const e of Qf.block)this.registerBlockElement(e);for(const t of Qf.inline)this.registerInlineElement(t)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){var i=new Set;for(const r of this._getMatchingViewDefinitions(e)){if(t)for(const s of this._getReferences(r.model))i.add(s);i.add(r)}return i}getDefinitionsForModel(t){return this._definitions.filter(e=>e.model==t)}_getMatchingViewDefinitions(i){return this._definitions.filter(e=>{return e.view&&(t=i,e=e.view,"string"==typeof t?t===e:t instanceof RegExp&&t.test(e));var t})}*_getReferences(t){var e,i=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"];for({modelSchema:e}of this._definitions.filter(e=>e.model==t))if(e)for(const r of i)for(const s of u(e[r]||[]))for(const n of this._definitions.filter(e=>e.model==s))s!==t&&(yield*this._getReferences(n.model),yield n)}_extendDefinition(t){var e=Array.from(this._definitions.entries()).filter(([,e])=>e.model==t.model);if(0==e.length)this._definitions.push(t);else for(var[i,r]of e)this._definitions[i]=xs({},r,t,(e,t)=>Array.isArray(e)?e.concat(t):void 0)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N extends n{constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new po,this._disallowedAttributes=new po,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[ep,lg]}loadAllowedConfig(e){for(const r of e){var t=r.name||/[\s\S]+/,i=sp(r);this.allowElement(t),i.forEach(e=>this.allowAttributes(e))}}loadDisallowedConfig(e){for(const r of e){var t=r.name||/[\s\S]+/,i=sp(r);0==i.length?this.disallowElement(t):i.forEach(e=>this.disallowAttributes(e))}}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){return tp(e,t,this._disallowedAttributes),tp(e,t,this._allowedAttributes)}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&"string"==typeof e.appliesToBlock)for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:U.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:U.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{var i=this.editor.model.schema;if(t.isObject&&!i.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else{if(!t.isInline)throw new w("data-filter-invalid-definition",null,t);this._registerInlineElement(t)}e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const l=this.editor.model;l.document.registerPostFixer(e=>{var t=l.document.differ.getChanges();let i=!1;var r=this._getCoupledAttributesMap();for(const o of t)if("attribute"==o.type&&null===o.attributeNewValue){var s=r.get(o.attributeKey);if(s)for(var{item:n}of o.range.getWalker({shallow:!0}))for(const a of s)n.hasAttribute(a)&&(e.removeAttribute(a,n),i=!0)}return i})}_registerAssociatedHtmlAttributesPostFixer(){const s=this.editor.model;s.document.registerPostFixer(e=>{let t=!1;for(const i of s.document.differ.getChanges())if("insert"===i.type&&"$text"!==i.name)for(const r of i.attributes.keys())r.startsWith("html")&&r.endsWith("Attributes")&&!s.schema.checkAttribute(i.name,r)&&(e.removeAttribute(r,i.position.nodeAfter),t=!0);return t})}_getCoupledAttributesMap(){if(!this._coupledAttributes){this._coupledAttributes=new Map;for(const t of this._allowedElements){var e;t.coupledAttribute&&t.model&&((e=this._coupledAttributes.get(t.coupledAttribute))?e.push(t.model):this._coupledAttributes.set(t.coupledAttribute,[t.model]))}}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?"register:"+e.view:"register",e)}_registerObjectElement(e){const t=this.editor,i=t.model.schema,r=t.conversion,{view:s,model:n}=e;i.register(n,e.modelSchema),/* istanbul ignore next: paranoid check -- @preserve */s&&(i.extend(e.model,{allowAttributes:[Gf(s),"htmlContent"]}),t.data.registerRawContentMatcher({name:s}),r.for("upcast").elementToElement({view:s,model:Kf(e),converterPriority:U.low+2}),r.for("upcast").add(Yf(e,this)),r.for("editingDowncast").elementToStructure({model:{name:n,attributes:[Gf(s)]},view:function(e,{view:s,isInline:n}){const o=e.t;return(e,{writer:t})=>{var i=o("HTML object"),r=Jf(s,e,t),e=e.getAttribute(Gf(s)),e=(t.addClass("html-object-embed__content",r),e&&qf(t,e,r),t.createContainerElement(n?"span":"div",{class:"html-object-embed","data-html-object-embed-label":i},r));return Jm(e,t,{label:i})}}(t,e)}),r.for("dataDowncast").elementToElement({model:n,view:(e,{writer:t})=>Jf(s,e,t)}),r.for("dataDowncast").add(Xf(e)))}_registerBlockElement(e){var t=this.editor,i=t.model.schema,t=t.conversion,{view:r,model:s}=e;if(!i.isRegistered(e.model)){if(i.register(e.model,e.modelSchema),!r)return;t.for("upcast").elementToElement({model:s,view:r,converterPriority:U.low+2}),t.for("downcast").elementToElement({model:s,view:r})}r&&(i.extend(e.model,{allowAttributes:Gf(r)}),t.for("upcast").add(Yf(e,this)),t.for("downcast").add(Xf(e)))}_registerInlineElement(e){var r,s,t=this.editor,i=t.model.schema,t=t.conversion,n=e.model;e.appliesToBlock||(i.extend("$text",{allowAttributes:n}),e.attributeProperties&&i.setAttributeProperties(n,e.attributeProperties),t.for("upcast").add(Zf(e,this)),t.for("downcast").attributeToElement({model:n,view:({priority:r,view:s}=[e][0],(e,t)=>{var i;if(e)return t=t["writer"],i=t.createAttributeElement(s,null,{priority:r}),qf(t,e,i),i})}))}}function tp(t,e,i){var{attributes:r,styles:e,classes:i}=function(e){const t={attributes:new Set,classes:new Set,styles:new Set};for(const i of e)for(const r in t)(i.match[r]||[]).forEach(e=>t[r].add(e));return t}(function(e,{consumable:t},i){var i=i.matchAll(e)||[],r=[];for(const s of i)(function(e,t,i){for(const s of["attributes","classes","styles"]){var r=i.match[s];if(r)for(const n of Array.from(r))e.test(t,{[s]:[n]})||Ds(r,n)}})(t,e,s),delete s.match.name,t.consume(e,s.match),r.push(s);return r}(t,e,i)),s={};if(r.size)for(const n of r)Cn(n)||r.delete(n);return r.size&&(s.attributes=ip(r,e=>t.getAttribute(e))),e.size&&(s.styles=ip(e,e=>t.getStyle(e))),i.size&&(s.classes=Array.from(i)),Object.keys(s).length?s:null}function ip(e,t){var i={};for(const r of e)void 0!==t(r)&&(i[r]=t(r));return i}function rp(e,i){const r=e["name"],t=e[i];return wi(t)?Object.entries(t).map(([e,t])=>({name:r,[i]:{[e]:t}})):Array.isArray(t)?t.map(e=>({name:r,[i]:[e]})):[e]}function sp(e){var{name:e,attributes:t,classes:i,styles:r}=e,s=[];return t&&s.push(...rp({name:e,attributes:t},"attributes")),i&&s.push(...rp({name:e,classes:i},"classes")),r&&s.push(...rp({name:e,styles:r},"styles")),s}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class np extends n{static get requires(){return[N]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(this.editor.plugins.has("CodeBlockEditing")){const r=this.editor.plugins.get(N);r.on("register:pre",(e,t)=>{var i,o;"codeBlock"===t.model&&(i=(t=this.editor).model.schema,t=t.conversion,i.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),t.for("upcast").add((o=r,e=>{e.on("element:code",(e,i,r)=>{var t=i.viewItem,s=t.parent;function n(e,t){e=o.processViewAttributes(e,r);e&&r.writer.setAttribute(t,e,i.modelRange)}s&&s.is("element","pre")&&(n(s,"htmlPreAttributes"),n(t,"htmlContentAttributes"))},{priority:"low"})})),t.for("downcast").add(e=>{e.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&({attributeOldValue:e,attributeNewValue:r}=t,t=i.mapper.toViewElement(t.item).parent,$f(i.writer,e,r,t))}),e.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&({attributeOldValue:e,attributeNewValue:r}=t,t=i.mapper.toViewElement(t.item),$f(i.writer,e,r,t))})}),e.stop())})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class op extends n{static get requires(){return[N]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(N).on("register",(e,t)=>{const i=t,r=this.editor,s=r.model.schema,n=r.conversion;if(i.paragraphLikeModel&&!s.isRegistered(i.model)&&!s.isRegistered(i.paragraphLikeModel)){const o={model:i.paragraphLikeModel,view:i.view};s.register(i.model,i.modelSchema),s.register(o.model,{inheritAllFrom:"$block"}),n.for("upcast").elementToElement({view:i.view,model:(e,{writer:t})=>this._hasBlockContent(e)?t.createElement(i.model):t.createElement(o.model),converterPriority:U.low+.5}),n.for("downcast").elementToElement({view:i.view,model:i.model}),this._addAttributeConversion(i),n.for("downcast").elementToElement({view:o.view,model:o.model}),this._addAttributeConversion(o),e.stop()}})}_hasBlockContent(e){var t=this.editor.editing.view,i=t.domConverter.blockElements;for(const r of t.createRangeIn(e).getItems())if(r.is("element")&&i.includes(r.name))return!0;return!1}_addAttributeConversion(e){var t=this.editor,i=t.conversion,r=t.plugins.get(N);t.model.schema.extend(e.model,{allowAttributes:Gf(e.view)}),i.for("upcast").add(Yf(e,r)),i.for("downcast").add(Xf(e))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ap extends n{static get requires(){return[ep,Fm]}static get pluginName(){return"HeadingElementSupport"}init(){var e,t=this.editor;t.plugins.has("HeadingEditing")&&(e=t.config.get("heading.options"),this.registerHeadingElements(t,e))}registerHeadingElements(e,t){var i=e.plugins.get(ep),r=[];for(const s of t)"model"in s&&"view"in s&&(i.registerBlockElement({view:s.view,model:s.model}),r.push(s.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lp(e,t,i){var r;for({item:r}of e.createRangeOn(t).getWalker())if(r.is("element",i))return r}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hp extends n{static get requires(){return[N]}static get pluginName(){return"ImageElementSupport"}init(){var e=this.editor;if(e.plugins.has("ImageInlineEditing")||e.plugins.has("ImageBlockEditing")){const i=e.model.schema,r=e.conversion,n=e.plugins.get(N);n.on("register:figure",()=>{var s;r.for("upcast").add((s=n,e=>{e.on("element:figure",(e,t,i)=>{var r=t.viewItem;t.modelRange&&r.hasClass("image")&&(r=s.processViewAttributes(r,i))&&i.writer.setAttribute("htmlFigureAttributes",r,t.modelRange)},{priority:"low"})}))}),n.on("register:img",(e,t)=>{var o;"imageBlock"!==t.model&&"imageInline"!==t.model||(i.isRegistered("imageBlock")&&i.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),i.isRegistered("imageInline")&&i.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),r.for("upcast").add((o=n,e=>{e.on("element:img",(e,i,r)=>{var t,s;function n(e,t){e=o.processViewAttributes(e,r);e&&r.writer.setAttribute(t,e,i.modelRange)}i.modelRange&&(t=(s=i.viewItem).parent,n(s,"htmlImgAttributes"),t.is("element","a"))&&(s=t,i.modelRange)&&i.modelRange.getContainedElement().is("element","imageBlock")&&n(s,"htmlLinkAttributes")},{priority:"low"})})),r.for("downcast").add(t=>{var e;function i(o,e){t.on(`attribute:${e}:imageBlock`,(e,t,i)=>{var r,s,n;i.consumable.test(t.item,e.name)&&({attributeOldValue:r,attributeNewValue:s}=t,n=i.mapper.toViewElement(t.item),n=lp(i.writer,n,o))&&($f(i.writer,r,s,n),i.consumable.consume(t.item,e.name))},{priority:"low"}),"a"===o&&t.on("attribute:linkHref:imageBlock",(e,t,i)=>{var r;i.consumable.consume(t.item,"attribute:htmlLinkAttributes:imageBlock")&&(r=i.mapper.toViewElement(t.item),r=lp(i.writer,r,"a"),qf(i.writer,t.item.getAttribute("htmlLinkAttributes"),r))},{priority:"low"})}e="htmlImgAttributes",t.on(`attribute:${e}:imageInline`,(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&({attributeOldValue:e,attributeNewValue:r}=t,t=i.mapper.toViewElement(t.item),$f(i.writer,e,r,t))},{priority:"low"}),i("img","htmlImgAttributes"),i("figure","htmlFigureAttributes"),i("a","htmlLinkAttributes")}),e.stop())})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cp extends n{static get requires(){return[N]}static get pluginName(){return"MediaEmbedElementSupport"}init(){var e=this.editor;if(e.plugins.has("MediaEmbed")&&!e.config.get("mediaEmbed.previewsInData")){const r=e.model.schema,n=e.conversion,o=this.editor.plugins.get(N),t=this.editor.plugins.get(ep),s=e.config.get("mediaEmbed.elementName");t.registerBlockElement({model:"media",view:s}),o.on("register:figure",()=>{var s;n.for("upcast").add((s=o,e=>{e.on("element:figure",(e,t,i)=>{var r=t.viewItem;t.modelRange&&r.hasClass("media")&&(r=s.processViewAttributes(r,i))&&i.writer.setAttribute("htmlFigureAttributes",r,t.modelRange)},{priority:"low"})}))}),o.on("register:"+s,(e,t)=>{var i;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */"media"===t.model&&(r.extend("media",{allowAttributes:[Gf(s),"htmlFigureAttributes"]}),n.for("upcast").add(function(n,o){const t=(e,t,i)=>{var r=t.viewItem,s=Gf(o);(r=n.processViewAttributes(r,i))&&i.writer.setAttribute(s,r,t.modelRange)};return e=>{e.on("element:"+o,t,{priority:"low"})}}(o,s)),n.for("dataDowncast").add((i=s,t=>{function e(s,e){t.on(`attribute:${e}:media`,(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&({attributeOldValue:e,attributeNewValue:r}=t,t=i.mapper.toViewElement(t.item),t=lp(i.writer,t,s),$f(i.writer,e,r,t))})}e(i,Gf(i)),e("figure","htmlFigureAttributes")})),e.stop())})}}}class dp extends n{static get requires(){return[N]}static get pluginName(){return"ScriptElementSupport"}init(){const n=this.editor.plugins.get(N);n.on("register:script",(e,t)=>{var i=this.editor,r=i.model.schema,s=i.conversion;r.register("htmlScript",t.modelSchema),r.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:Kf(t)}),s.for("upcast").add(Yf(t,n)),s.for("downcast").elementToElement({model:"htmlScript",view:(e,{writer:t})=>Jf("script",e,t)}),s.for("downcast").add(Xf(t)),e.stop()})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class up extends n{static get requires(){return[N]}static get pluginName(){return"TableElementSupport"}init(){const i=this.editor;if(i.plugins.has("TableEditing")){const r=i.model.schema,n=i.conversion,h=i.plugins.get(N),s=i.plugins.get("TableUtils");h.on("register:figure",()=>{var s;n.for("upcast").add((s=h,e=>{e.on("element:figure",(e,t,i)=>{var r=t.viewItem;t.modelRange&&r.hasClass("table")&&(r=s.processViewAttributes(r,i))&&i.writer.setAttribute("htmlFigureAttributes",r,t.modelRange)},{priority:"low"})}))}),h.on("register:table",(e,t)=>{var o,a,l;"table"===t.model&&(r.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add((l=h,e=>{e.on("element:table",(e,i,r)=>{if(i.modelRange){var t=i.viewItem;s(t,"htmlTableAttributes");for(const n of t.getChildren())n.is("element","thead")&&s(n,"htmlTheadAttributes"),n.is("element","tbody")&&s(n,"htmlTbodyAttributes")}function s(e,t){e=l.processViewAttributes(e,r);e&&r.writer.setAttribute(t,e,i.modelRange)}},{priority:"low"})})),n.for("downcast").add(t=>{function e(s,e){t.on(`attribute:${e}:table`,(e,t,i)=>{var r;i.consumable.test(t.item,e.name)&&(r=i.mapper.toViewElement(t.item),r=lp(i.writer,r,s))&&(i.consumable.consume(t.item,e.name),$f(i.writer,t.attributeOldValue,t.attributeNewValue,r))})}e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes")}),i.model.document.registerPostFixer((o=i.model,a=s,e=>{var t,i,r;let s=!1;for(const n of o.document.differ.getChanges())"attribute"==n.type&&"headingRows"==n.attributeKey&&(i=(t=n.range.start.nodeAfter).getAttribute("htmlTheadAttributes"),r=t.getAttribute("htmlTbodyAttributes"),i&&!n.attributeNewValue?(e.removeAttribute("htmlTheadAttributes",t),s=!0):r&&n.attributeNewValue==a.getRows(t)&&(e.removeAttribute("htmlTbodyAttributes",t),s=!0));return s})),e.stop())})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mp extends n{static get requires(){return[N]}static get pluginName(){return"StyleElementSupport"}init(){const n=this.editor.plugins.get(N);n.on("register:style",(e,t)=>{var i=this.editor,r=i.model.schema,s=i.conversion;r.register("htmlStyle",t.modelSchema),r.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),i.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:Kf(t)}),s.for("upcast").add(Yf(t,n)),s.for("downcast").elementToElement({model:"htmlStyle",view:(e,{writer:t})=>Jf("style",e,t)}),s.for("downcast").add(Xf(t)),e.stop()})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gp extends n{static get requires(){return[N]}static get pluginName(){return"DocumentListElementSupport"}init(){var e=this.editor;if(e.plugins.has("DocumentListEditing")){const i=e.model.schema,r=e.conversion,s=e.plugins.get(N),t=e.plugins.get("DocumentListEditing"),n=["ul","ol","li"];t.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:qf}),t.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:qf}),t.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:qf}),s.on("register",(e,t)=>{n.includes(t.view)&&(e.stop(),!i.checkAttribute("$block","htmlLiAttributes"))&&(t=n.map(e=>Gf(e)),i.extend("$block",{allowAttributes:t}),i.extend("$blockObject",{allowAttributes:t}),i.extend("$container",{allowAttributes:t}),r.for("upcast").add(e=>{e.on("element:ul",fp("htmlUlAttributes",s),{priority:"low"}),e.on("element:ol",fp("htmlOlAttributes",s),{priority:"low"}),e.on("element:li",fp("htmlLiAttributes",s),{priority:"low"})}))}),t.on("postFixer",(t,{listNodes:e,writer:i})=>{var r,s,n=[];for({node:r,previous:s}of e)if(s){var o=r.getAttribute("listIndent"),a=s.getAttribute("listIndent");let e=null;a<o?n[a]=s:o<a?(e=n[o],n.length=o):e=s,e&&(e.getAttribute("listType")==r.getAttribute("listType")&&(a=pp(e.getAttribute("listType")),o=e.getAttribute(a),!Rs(r.getAttribute(a),o))&&i.model.schema.checkAttribute(r,a)&&(i.setAttribute(a,o,r),t.return=!0),e.getAttribute("listItemId")==r.getAttribute("listItemId"))&&(a=e.getAttribute("htmlLiAttributes"),!Rs(r.getAttribute("htmlLiAttributes"),a))&&i.model.schema.checkAttribute(r,"htmlLiAttributes")&&(i.setAttribute("htmlLiAttributes",a,r),t.return=!0)}}),t.on("postFixer",(e,{listNodes:t,writer:i})=>{for(var{node:r}of t){var s=r.getAttribute("listType");"bulleted"===s&&r.getAttribute("htmlOlAttributes")&&(i.removeAttribute("htmlOlAttributes",r),e.return=!0),"numbered"===s&&r.getAttribute("htmlUlAttributes")&&(i.removeAttribute("htmlUlAttributes",r),e.return=!0)}})}}afterInit(){const s=this.editor;var e;s.commands.get("indentList")&&(e=s.commands.get("indentList"),this.listenTo(e,"afterExecute",(e,r)=>{s.model.change(e=>{for(const i of r){var t=pp(i.getAttribute("listType"));s.model.schema.checkAttribute(i,t)&&e.setAttribute(t,{},i)}})}))}}function fp(o,a){return(e,t,i)=>{var r=t.viewItem,s=(t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),a.processViewAttributes(r,i));for(const n of t.modelRange.getItems({shallow:!0}))!n.hasAttribute("listItemId")||n.hasAttribute(o)||i.writer.model.schema.checkAttribute(n,o)&&i.writer.setAttribute(o,s||{},n)}}function pp(e){return"bulleted"===e?"htmlUlAttributes":"htmlOlAttributes"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vp extends n{static get requires(){return[N,ep]}static get pluginName(){return"CustomElementSupport"}init(){const h=this.editor.plugins.get(N),c=this.editor.plugins.get(ep);h.on("register:$customElement",(e,n)=>{e.stop();const o=this.editor,t=o.model.schema,i=o.conversion,a=o.editing.view.domConverter.unsafeElements,l=o.data.htmlProcessor.domConverter.preElements;t.register(n.model,n.modelSchema),t.extend(n.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),i.for("upcast").elementToElement({view:/.*/,model:(e,t)=>{if("$comment"==e.name||!function(e){try{document.createElement(e)}catch{return}return 1}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(e.name)||c.getDefinitionsForView(e.name).size)return null;a.includes(e.name)||a.push(e.name),l.includes(e.name)||l.push(e.name);var i,r=t.writer.createElement(n.model,{htmlElementName:e.name}),s=h.processViewAttributes(e,t),s=(s&&t.writer.setAttribute("htmlCustomElementAttributes",s,r),new gc(e.document).createDocumentFragment(e)),s=o.data.processor.toData(s);t.writer.setAttribute("htmlContent",s,r);for({item:i}of o.editing.view.createRangeIn(e))t.consumable.consume(i,{name:!0});return r},converterPriority:"low"}),i.for("editingDowncast").elementToElement({model:{name:n.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(e,{writer:t})=>{var i=e.getAttribute("htmlElementName"),i=t.createRawElement(i);return e.hasAttribute("htmlCustomElementAttributes")&&qf(t,e.getAttribute("htmlCustomElementAttributes"),i),i}}),i.for("dataDowncast").elementToElement({model:{name:n.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(e,{writer:t})=>{const i=e.getAttribute("htmlElementName"),r=e.getAttribute("htmlContent"),s=t.createRawElement(i,null,(e,t)=>{t.setContentOf(e,r);var i=e.firstChild;for(i.remove();i.firstChild;)e.appendChild(i.firstChild)});return e.hasAttribute("htmlCustomElementAttributes")&&qf(t,e.getAttribute("htmlCustomElementAttributes"),s),s}})})}}class wp extends n{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[N,np,op,ap,hp,cp,dp,up,mp,gp,vp]}init(){var e=this.editor,t=e.plugins.get(N);t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),r=i.find(e=>e.isInline&&!i[0].isObject);return r?r.model:Gf(e)}addModelHtmlClass(e,i,r){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,r,n))Uf(e,t,n,"classes",e=>{for(const t of u(i))e.add(t)})})}removeModelHtmlClass(e,i,r){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,r,n))Uf(e,t,n,"classes",e=>{for(const t of u(i))e.delete(t)})})}setModelHtmlAttributes(e,r,i){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,i,n))Uf(e,t,n,"attributes",e=>{for(var[t,i]of Object.entries(r))e.set(t,i)})})}removeModelHtmlAttributes(e,i,r){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,r,n))Uf(e,t,n,"attributes",e=>{for(const t of u(i))e.delete(t)})})}setModelHtmlStyles(e,r,i){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,i,n))Uf(e,t,n,"styles",e=>{for(var[t,i]of Object.entries(r))e.set(t,i)})})}removeModelHtmlStyles(e,i,r){const s=this.editor.model,n=this.getGhsAttributeNameForElement(e);s.change(e=>{for(const t of bp(s,r,n))Uf(e,t,n,"styles",e=>{for(const t of u(i))e.delete(t)})})}}function*bp(e,t,i){if(t)if(Symbol.iterator in t||!t.is("documentSelection")||!t.isCollapsed)for(const o of(r=e,s=t,n=i,Symbol.iterator in s||!(s.is("node")||s.is("$text")||s.is("$textProxy"))?r.schema.getValidRanges(r.createSelection(s).getRanges(),n):r.schema.checkAttribute(s,n)?[r.createRangeOn(s)]:[]))yield*o.getItems({shallow:!0});else e.schema.checkAttributeInSelection(t,i)&&(yield t);var r,s,n;
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */}class _p{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(e=>this._definitions.add(e)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(e,t,i)=>{if(i.consumable.test(t.item,"attribute:linkHref")&&(t.item.is("selection")||i.schema.isInline(t.item))){var r=i.writer,s=r.document.selection;for(const o of this._definitions){var n=r.createAttributeElement("a",o.attributes,{priority:5});o.classes&&r.addClass(o.classes,n);for(const a in o.styles)r.setStyle(a,o.styles[a],n);r.setCustomProperty("link",!0,n),o.callback(t.attributeNewValue)?t.item.is("selection")?r.wrap(s.getFirstRange(),n):r.wrap(i.mapper.toViewRange(t.range),n):r.unwrap(i.mapper.toViewRange(t.range),n)}}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(e,t,{writer:i,mapper:r})=>{var r=r.toViewElement(t.item),s=Array.from(r.getChildren()).find(e=>e.is("element","a"));for(const c of this._definitions){var n=eo(c.attributes);if(c.callback(t.attributeNewValue)){for(var[o,a]of n)"class"===o?i.addClass(a,s):i.setAttribute(o,a,s);c.classes&&i.addClass(c.classes,s);for(const d in c.styles)i.setStyle(d,c.styles[d],s)}else{for(var[l,h]of n)"class"===l?i.removeClass(h,s):i.removeAttribute(l,s);c.classes&&i.removeClass(c.classes,s);for(const u in c.styles)i.removeStyle(u,s)}}})}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,kp=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,Ap=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Ep=/^((\w+:(\/{2,})?)|(\W))/i,Cp="Ctrl+K";function Pp(e,{writer:t}){e=t.createAttributeElement("a",{href:e},{priority:5});return t.setCustomProperty("link",!0,e),e}function xp(e){e=String(e);return e.replace(yp,"").match(kp)?e:"#"}function Tp(e,t){return e&&t.checkAttribute(e.name,"linkHref")}function Sp(e,t){i=e;var i=Ap.test(i)?"mailto:":t,t=!!i&&!Op(e);return e&&t?i+e:e}function Op(e){return Ep.test(e)}function Rp(e){window.open(e,"_blank","noopener")}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ip extends l{constructor(){super(...arguments),this.manualDecorators=new Zn,this.automaticDecorators=new _p}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||Yn(t.getSelectedBlocks());Tp(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(c,e={}){const d=this.editor.model,u=d.document.selection,m=[],g=[];for(const t in e)(e[t]?m:g).push(t);d.change(i=>{if(u.isCollapsed){var e=u.getFirstPosition();if(u.hasAttribute("linkHref")){var r=Vp(u);let t=Rm(e,"linkHref",u.getAttribute("linkHref"),d);u.getAttribute("linkHref")===r&&(t=this._updateLinkContent(d,i,t,c)),i.setAttribute("linkHref",c,t),m.forEach(e=>{i.setAttribute(e,!0,t)}),g.forEach(e=>{i.removeAttribute(e,t)}),i.setSelection(i.createPositionAfter(t.end.nodeBefore))}else if(""!==c){const o=eo(u.getAttributes());o.set("linkHref",c),m.forEach(e=>{o.set(e,!0)});r=d.insertContent(i.createText(c,o),e)["end"];i.setSelection(r)}["linkHref",...m,...g].forEach(e=>{i.removeSelectionAttribute(e)})}else{var e=d.schema.getValidRanges(u.getRanges(),"linkHref"),t=[];for(const a of u.getSelectedBlocks())d.schema.checkAttribute(a,"linkHref")&&t.push(i.createRangeOn(a));var s,n=t.slice();for(const l of e)this._isRangeToUpdate(l,t)&&n.push(l);for(const h of n){let t=h;1===n.length&&(s=Vp(u),u.getAttribute("linkHref")===s)&&(t=this._updateLinkContent(d,i,h,c),i.setSelection(i.createSelection(t))),i.setAttribute("linkHref",c,t),m.forEach(e=>{i.setAttribute(e,!0,t)}),g.forEach(e=>{i.removeAttribute(e,t)})}}})}_getDecoratorStateFromModel(e){var t=this.editor.model,i=t.document.selection,r=i.getSelectedElement();return(Tp(r,t.schema)?r:i).getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}_updateLinkContent(e,t,i,r){t=t.createText(r,{linkHref:r});return e.insertContent(t,i)}}function Vp(e){var t;return e.isCollapsed?(t=e.getFirstPosition()).textNode&&t.textNode.data:!(1<(t=Array.from(e.getFirstRange().getItems())).length)&&((e=t[0]).is("$text")||e.is("$textProxy"))?e.data:null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mp extends l{refresh(){var e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();Tp(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,r=this.editor.model,s=r.document.selection,n=e.commands.get("link");r.change(e=>{for(const t of s.isCollapsed?[Rm(s.getFirstPosition(),"linkHref",s.getAttribute("linkHref"),r)]:r.schema.getValidRanges(s.getRanges(),"linkHref"))if(e.removeAttribute("linkHref",t),n)for(const i of n.manualDecorators)e.removeAttribute(i.id,t)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Np extends s(){constructor({id:e,label:t,attributes:i,classes:r,styles:s,defaultValue:n}){super(),this.id=e,this.set("value",void 0),this.defaultValue=n,this.label=t,this.attributes=i,this.classes=r,this.styles=s}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bp="automatic",Dp=/^(https?:)?\/\//;class Fp extends n{static get pluginName(){return"LinkEditing"}static get requires(){return[Pm,gm,hm]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){var e=this.editor,t=(e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Pp}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(e,t)=>Pp(xp(e),t)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:e=>e.getAttribute("href")}}),e.commands.add("link",new Ip(e)),e.commands.add("unlink",new Mp(e)),function(e,t){const i={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach(e=>("label"in e&&i[e.label]&&(e.label=i[e.label]),e)),t}(e.t,function(e){var t=[];if(e)for(var[i,r]of Object.entries(e)){r=Object.assign({},r,{id:"link"+Ri(i)});t.push(r)}return t}(e.config.get("link.decorators"))));this._enableAutomaticDecorators(t.filter(e=>e.mode===Bp)),this._enableManualDecorators(t.filter(e=>"manual"===e.mode)),e.plugins.get(Pm).registerAttribute("linkHref");{var s=e,n="linkHref",o="a",a="ck-link_selected";const i=s.editing.view,l=new Set;i.document.registerPostFixer(e=>{var t=s.model.document.selection;let i=!1;if(t.hasAttribute(n)){t=Rm(t.getFirstPosition(),n,t.getAttribute(n),s.model);for(const r of s.editing.mapper.toViewRange(t).getItems())r.is("element",o)&&!r.hasClass(a)&&(e.addClass(a,r),l.add(r),i=!0)}return i}),s.conversion.for("editingDowncast").add(e=>{function t(){i.change(e=>{for(const t of l.values())e.removeClass(a,t),l.delete(t)})}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})})}this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){var t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:Bp,callback:e=>!!e&&Dp.test(e),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(e.length){const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(e=>{t.model.schema.extend("$text",{allowAttributes:e.id});const o=new Np(e);i.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(e,{writer:t,schema:i},{item:r})=>{if((r.is("selection")||i.isInline(r))&&e){var s=t.createAttributeElement("a",o.attributes,{priority:5});o.classes&&t.addClass(o.classes,s);for(const n in o.styles)t.setStyle(n,o.styles[n],s);return t.setCustomProperty("link",!0,s),s}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}}_enableLinkOpen(){const r=this.editor,e=r.editing.view.document;this.listenTo(e,"click",(t,i)=>{if(m.isMac?i.domEvent.metaKey:i.domEvent.ctrlKey){let e=i.domTarget;var r;(e="a"!=e.tagName.toLowerCase()?e.closest("a"):e)&&(r=e.getAttribute("href"))&&(t.stop(),i.preventDefault(),Rp(r))}},{context:"$capture"}),this.listenTo(e,"keydown",(e,t)=>{var i=r.commands.get("link").value;i&&t.keyCode===g.enter&&t.altKey&&(e.stop(),Rp(i))})}_enableInsertContentSelectionAttributesFixer(){const i=this.editor.model,r=i.document.selection;this.listenTo(i,"insertContent",()=>{var e=r.anchor.nodeBefore,t=r.anchor.nodeAfter;r.hasAttribute("linkHref")&&e&&e.hasAttribute("linkHref")&&(t&&t.hasAttribute("linkHref")||i.change(e=>{Lp(e,jp(i.schema))}))},{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,i=e.model;e.editing.view.addObserver(mc);let r=!1;this.listenTo(e.editing.view.document,"mousedown",()=>{r=!0}),this.listenTo(e.editing.view.document,"selectionChange",()=>{var e,t;r&&(r=!1,(t=i.document.selection).isCollapsed)&&t.hasAttribute("linkHref")&&(t=Rm(e=t.getFirstPosition(),"linkHref",t.getAttribute("linkHref"),i),e.isTouching(t.start)||e.isTouching(t.end))&&i.change(e=>{Lp(e,jp(i.schema))})})}_enableTypingOverLink(){const t=this.editor,e=t.editing.view;let s=null,i=!1;this.listenTo(e.document,"delete",()=>{i=!0},{priority:"high"}),this.listenTo(t.model,"deleteContent",()=>{var e=t.model.document.selection;e.isCollapsed||(i?i=!1:zp(t)&&function(e){var t=e.document.selection,i=t.getFirstPosition(),t=t.getLastPosition(),r=i.nodeAfter;if(!r||!r.is("$text")||!r.hasAttribute("linkHref"))return;var s=t.textNode||t.nodeBefore;return r===s||Rm(i,"linkHref",r.getAttribute("linkHref"),e).containsRange(e.createRange(i,t),!0)}(t.model)&&(s=e.getAttributes()))},{priority:"high"}),this.listenTo(t.model,"insertContent",(e,[r])=>{i=!1,zp(t)&&s&&(t.model.change(e=>{for(var[t,i]of s)e.setAttribute(t,i,r)}),s=null)},{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,i=e.model,r=i.document.selection,t=e.editing.view;let s=!1,n=!1;this.listenTo(t.document,"delete",(e,t)=>{n="backward"===t.direction},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{s=!1;var e=r.getFirstPosition(),t=r.getAttribute("linkHref");t&&(t=Rm(e,"linkHref",t,i),s=t.containsPosition(e)||t.end.isEqual(e))},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{n&&(n=!1,!s)&&e.model.enqueueChange(e=>{Lp(e,jp(i.schema))})},{priority:"low"})}_enableClipboardIntegration(){const e=this.editor,t=e.model,s=this.editor.config.get("link.defaultProtocol");s&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(e,r)=>{t.change(e=>{var t;for(const i of e.createRangeIn(r.content).getItems())i.hasAttribute("linkHref")&&(t=Sp(i.getAttribute("linkHref"),s),e.setAttribute("linkHref",t,i))})})}}function Lp(e,t){e.removeSelectionAttribute("linkHref");for(const i of t)e.removeSelectionAttribute(i)}function zp(e){return e.model.change(e=>e.batch).isTyping}function jp(e){return e.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hp extends R{constructor(e,t){super(e),this.focusTracker=new Xn,this.keystrokes=new Qn,this._focusables=new Oc;e=e.t,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(e("Save"),S.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("Cancel"),S.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new Sd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),e=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&e.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:e,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),Sc({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){var e=this.locale.t,t=new kd(this.locale,Zd);return t.label=e("Link URL"),t}_createButton(e,t,i,r){var s=new I(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.extendTemplate({attributes:{class:i}}),r&&s.delegate("execute").to(this,r),s}_createManualDecoratorSwitches(e){var t=this.createCollection();for(const i of e.manualDecorators){const r=new Yc(this.locale);r.set({name:i.id,label:i.label,withText:!0}),r.bind("isOn").toMany([i,e],"value",(e,t)=>void 0===t&&void 0===e?!!i.defaultValue:!!e),r.on("execute",()=>{i.set("value",!r.isOn)}),t.add(r)}return t}_createFormChildren(e){var t=this.createCollection();return t.add(this.urlInputView),e.length&&((e=new R).setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(e=>({tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(e)),t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wp extends R{constructor(e){super(e),this.focusTracker=new Xn,this.keystrokes=new Qn,this._focusables=new Oc;e=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(e("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(e("Edit link"),S.pencil,"edit"),this.set("href",void 0),this._focusCycler=new Sd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){var r=new I(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,i),r}_createPreviewButton(){const e=new I(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",e=>e&&xp(e)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",e=>e||i("This link has no URL")),e.bind("isEnabled").to(this,"href",e=>!!e),e.template.tag="a",e.template.eventListeners={},e}}const $p="link-ui";
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qp extends n{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[Xu]}static get pluginName(){return"LinkUI"}init(){var e=this.editor;e.editing.view.addObserver(uc),this._balloon=e.plugins.get(Xu),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:$p,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:$p,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new Wp(e.locale),i=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(e,t)=>{this._hideUI(),t()}),t.keystrokes.set(Cp,(e,t)=>{this._addFormView(),t()}),t}_createFormView(){const t=this.editor,e=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),r=new(Tc(Hp))(t.locale,e);return r.urlInputView.fieldView.bind("value").to(e,"value"),r.urlInputView.bind("isEnabled").to(e,"isEnabled"),r.saveButtonView.bind("isEnabled").to(e),this.listenTo(r,"submit",()=>{var e=r.urlInputView.fieldView.element["value"],e=Sp(e,i);t.execute("link",e,r.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(e,t)=>{this._closeFormView(),t()}),r}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),i=e.t;e.ui.componentFactory.add("link",e=>{e=new I(e);return e.isEnabled=!0,e.label=i("Link"),e.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',e.keystroke=Cp,e.tooltip=!0,e.isToggleable=!0,e.bind("isEnabled").to(t,"isEnabled"),e.bind("isOn").to(t,"value",e=>!!e),this.listenTo(e,"execute",()=>this._showUI(!0)),e})}_enableBalloonActivators(){const i=this.editor,e=i.editing.view.document;this.listenTo(e,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),i.keystrokes.set(Cp,(e,t)=>{t(),i.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),xc({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){var e;this.formView||this._createViews(),this._isFormInPanel||(e=this.editor.commands.get("link"),this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||"")}_closeFormView(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){var e;this._isUIInPanel&&(e=this.editor,this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),r=n();var s=()=>{var e=this._getSelectedLinkElement(),t=n();i&&!e||!i&&t!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=e,r=t};function n(){return t.selection.focus.getAncestors().reverse().find(e=>e.is("element"))}this.listenTo(e.ui,"update",s),this.listenTo(this._balloon,"change:visibleView",s)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){var e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=this.editor.model,i=t.document;let r;var s;return{target:r=e.markers.has($p)?(s=Array.from(this.editor.editing.mapper.markerNameToElements($p)),s=t.createRange(t.createPositionBefore(s[0]),t.createPositionAfter(s[s.length-1])),t.domConverter.viewRangeToDom(s)):()=>{var e=this._getSelectedLinkElement();return e?t.domConverter.mapViewToDom(e):t.domConverter.viewRangeToDom(i.selection.getFirstRange())}}}_getSelectedLinkElement(){var e,t=this.editor.editing.view,i=t.document.selection,r=i.getSelectedElement();return i.isCollapsed||r&&M(r)?Up(i.getFirstPosition()):(i=Up((r=i.getFirstRange().getTrimmed()).start),e=Up(r.end),i&&i==e&&t.createRangeIn(i).getTrimmed().isEqual(r)?i:null)}_showFakeVisualSelection(){const r=this.editor.model;r.change(e=>{var t,i=r.document.selection.getFirstRange();r.markers.has($p)?e.updateMarker($p,{range:i}):i.start.isAtEnd?(t=i.start.getLastMatchingPosition(({item:e})=>!r.schema.isContent(e),{boundaries:i}),e.addMarker($p,{usingOperation:!1,affectsData:!1,range:e.createRange(t,i.end)})):e.addMarker($p,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){var e=this.editor.model;e.markers.has($p)&&e.change(e=>{e.removeMarker($p)})}}function Up(e){return e.getAncestors().find(e=>{return(e=e).is("attributeElement")&&!!e.getCustomProperty("link")})||null}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Gp=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Kp extends n{static get requires(){return[km]}static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const s=this.editor,e=new Cm(s.model,e=>{var t;return 4<(t=e).length&&" "===t[t.length-1]&&" "!==t[t.length-2]&&(t=Jp(e.substr(0,e.length-1)))?{url:t}:void 0});e.on("matched:data",(e,t)=>{var{batch:t,range:i,url:r}=t;t.isTyping&&(i=(t=i.end.getShiftedBy(-1)).getShiftedBy(-r.length),i=s.model.createRange(i,t),this._applyAutoLink(r,i))}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{var e=t.document.selection.getFirstPosition();e.parent.previousSibling&&(e=t.createRangeIn(e.parent.previousSibling),this._checkAndApplyAutoLinkOnRange(e))})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{var e=t.document.selection.getFirstPosition(),e=t.createRange(t.createPositionAt(e.parent,0),e.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(e)})}_checkAndApplyAutoLinkOnRange(e){var t=this.editor.model,{text:e,range:i}=Em(e,t),e=Jp(e);e&&(t=t.createRange(i.end.getShiftedBy(-e.length),i.end),this._applyAutoLink(e,t))}_applyAutoLink(e,t){var i=this.editor.model,e=Sp(e,this.editor.config.get("link.defaultProtocol"));this.isEnabled&&i.schema.checkAttributeInSelection(i.createSelection(t),"linkHref")&&Op(e)&&!function(e){e=e.start.nodeAfter;return e&&e.hasAttribute("linkHref")}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */(t)&&this._persistAutoLink(e,t)}_persistAutoLink(t,i){const r=this.editor.model,s=this.editor.plugins.get("Delete");r.enqueueChange(e=>{e.setAttribute("linkHref",t,i),r.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function Jp(e){e=Gp.exec(e);return e?e[2]:null}class Zp extends n{static get requires(){return[Fp,qp,Kp]}static get pluginName(){return"Link"}}function Yp(e){return e.createContainerElement("figure",{class:"image"},[e.createEmptyElement("img"),e.createSlot("children")])}function Xp(e,i){const r=e.plugins.get("ImageUtils"),s=e.plugins.has("ImageInlineEditing")&&e.plugins.has("ImageBlockEditing");return e=>{return!r.isInlineImageView(e)||s&&("block"==e.getStyle("display")||e.findAncestor(r.isBlockImageView)?"imageBlock":"imageInline")!==i?null:(t={name:!0},e.hasAttribute("src")&&(t.attributes=["src"]),t);var t}}function Qp(e,t){t=Yn(t.getSelectedBlocks());return!t||e.isObject(t)||t.isEmpty&&"listItem"!=t.name?"imageBlock":"imageInline"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ev extends n{static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(t={},i=null,r=null){const e=this.editor,s=e.model,n=s.document.selection;r=tv(e,i||n,r);for(const o in t={...Object.fromEntries(n.getAttributes()),...t})s.schema.checkAttribute(r,o)||delete t[o];return s.change(e=>{e=e.createElement(r,t);return s.insertObject(e,i,null,{setSelection:"on",findOptimalPosition:i||"imageInline"==r?void 0:"auto"}),e.parent?e:null})}getClosestSelectedImageWidget(t){var i=t.getFirstPosition();if(i){t=t.getSelectedElement();if(t&&this.isImageWidget(t))return t;let e=i.parent;for(;e;){if(e.is("element")&&this.isImageWidget(e))return e;e=e.parent}}return null}getClosestSelectedImageElement(e){var t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){var e=this.editor.model.document.selection;return function(e,t){if("imageBlock"==tv(e,t,null)){var i=function(e,t){e=Zm(e,t).start.parent;return e.isEmpty&&!e.is("element","$root")?e.parent:e}(t,e.model);if(e.model.schema.checkChild(i,"imageBlock"))return!0}else if(e.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}(this.editor,e)&&[...e.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}toImageWidget(t,e,i){return e.setCustomProperty("image",!0,t),Jm(t,e,{label:()=>{var e=this.findViewImgElement(t).getAttribute("alt");return e?e+" "+i:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&M(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;var t;for({item:t}of this.editor.editing.view.createRangeIn(e))if(this.isInlineImageView(t))return t}}function tv(e,t,i){var r=e.model.schema,s=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?i||("inline"===s?"imageInline":"block"===s?"imageBlock":t.is("selection")?Qp(r,t):r.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iv extends l{refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,i=e.plugins.get("ImageUtils"),r=e.model,s=i.getClosestSelectedImageElement(r.document.selection);r.change(e=>{e.setAttribute("alt",t.newValue,s)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rv extends n{static get requires(){return[ev]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new iv(this.editor))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sv extends R{constructor(e){super(e);e=this.locale.t;this.focusTracker=new Xn,this.keystrokes=new Qn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(e("Save"),S.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("Cancel"),S.cancel,"ck-button-cancel","cancel"),this._focusables=new Oc,this._focusCycler=new Sd({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Sc({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,r){var s=new I(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.extendTemplate({attributes:{class:i}}),r&&s.delegate("execute").to(this,r),s}_createLabeledInputView(){var e=this.locale.t,t=new kd(this.locale,Zd);return t.label=e("Text alternative"),t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nv(e){var t=e.editing.view,i=Iu.defaultPositions,e=e.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(e.getClosestSelectedImageWidget(t.document.selection)),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ov extends n{static get requires(){return[Xu]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const i=this.editor,r=i.t;i.ui.componentFactory.add("imageTextAlternative",e=>{var t=i.commands.get("imageTextAlternative"),e=new I(e);return e.set({label:r("Change image text alternative"),icon:S.lowVision,tooltip:!0}),e.bind("isEnabled").to(t,"isEnabled"),e.bind("isOn").to(t,"value",e=>!!e),this.listenTo(e,"execute",()=>{this._showForm()}),e})}_createForm(){const i=this.editor,r=i.editing.view.document,s=i.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Tc(sv))(i.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{i.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(e,t)=>{this._hideForm(!0),t()}),this.listenTo(i.ui,"update",()=>{var e,t;s.getClosestSelectedImageWidget(r.selection)?this._isVisible&&(e=i,t=e.plugins.get("ContextualBalloon"),e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection))&&(e=nv(e),t.updatePosition(e)):this._hideForm(!0)}),xc({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){var e,t,i;this._isVisible||(this._form||this._createForm(),t=(e=this.editor).commands.get("imageTextAlternative"),i=this._form.labeledInput,this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:nv(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions())}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e)&&this.editor.editing.view.focus()}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class av extends n{static get requires(){return[rv,ov]}static get pluginName(){return"ImageTextAlternative"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lv(s,t){const i=(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&(e=i.writer,i=i.mapper.toViewElement(t.item),i=s.findViewImgElement(i),null===t.attributeNewValue?(r=t.attributeOldValue)&&r.data&&(e.removeAttribute("srcset",i),e.removeAttribute("sizes",i),r.width)&&e.removeAttribute("width",i):(r=t.attributeNewValue)&&r.data&&(e.setAttribute("srcset",r.data,i),e.setAttribute("sizes","100vw",i),r.width)&&e.setAttribute("width",r.width,i))};return e=>{e.on("attribute:srcset:"+t,i)}}function hv(r,t,i){const s=(e,t,i)=>{i.consumable.consume(t.item,e.name)&&(e=i.writer,i=i.mapper.toViewElement(t.item),i=r.findViewImgElement(i),e.setAttribute(t.attributeKey,t.attributeNewValue||"",i))};return e=>{e.on(`attribute:${i}:`+t,s)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cv extends Ra{observe(e){this.listenTo(e,"load",(e,t)=>{var i=t.target;this.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&this._fireEvents(t)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dv extends l{constructor(e){super(e);var t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||"block"===t&&c("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===t&&c("image-inline-plugin-required")}refresh(){var e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=u(e.source),r=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),n=Object.fromEntries(r.getAttributes());t.forEach((e,t)=>{var i=r.getSelectedElement();"string"==typeof e&&(e={src:e}),t&&i&&s.isImage(i)?(t=this.editor.model.createPositionAfter(i),s.insertImage({...e,...n},t)):s.insertImage({...e,...n})})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uv extends l{refresh(){var e=this.editor.plugins.get("ImageUtils"),t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(t),this.value=this.isEnabled?t.getAttribute("src"):null}execute(t){const i=this.editor.model.document.selection.getSelectedElement();this.editor.model.change(e=>{e.setAttribute("src",t.source,i),e.removeAttribute("srcset",i),e.removeAttribute("sizes",i)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mv extends n{static get requires(){return[ev]}static get pluginName(){return"ImageEditing"}init(){var e=this.editor,t=e.conversion,t=(e.editing.view.addObserver(cv),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:e=>{var t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}}),new dv(e)),i=new uv(e);e.commands.add("insertImage",t),e.commands.add("replaceImageSource",i),e.commands.add("imageInsert",t)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gv extends l{constructor(e,t){super(e),this._modelElementName=t}refresh(){var e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t)}execute(){const e=this.editor,o=this.editor.model,a=e.plugins.get("ImageUtils"),l=a.getClosestSelectedImageElement(o.document.selection),h=Object.fromEntries(l.getAttributes());return h.src||h.uploadId?o.change(e=>{var t=Array.from(o.markers).filter(e=>e.getRange().containsItem(l)),i=a.insertImage(h,o.createSelection(l,"on"),this._modelElementName);if(!i)return null;var r=e.createRangeOn(i);for(const n of t){var s=n.getRange(),s="$graveyard"!=s.root.rootName?s.getJoined(r,!0):r;e.updateMarker(n,{range:s})}return{oldElement:l,newElement:i}}):null}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fv extends n{static get requires(){return[mv,ev,hm]}static get pluginName(){return"ImageBlockEditing"}init(){var e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new gv(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,i=e.t,t=e.conversion,r=e.plugins.get("ImageUtils");t.for("dataDowncast").elementToStructure({model:"imageBlock",view:(e,{writer:t})=>Yp(t)}),t.for("editingDowncast").elementToStructure({model:"imageBlock",view:(e,{writer:t})=>r.toImageWidget(Yp(t),t,i("image widget"))}),t.for("downcast").add(hv(r,"imageBlock","src")).add(hv(r,"imageBlock","alt")).add(lv(r,"imageBlock")),t.for("upcast").elementToElement({view:Xp(e,"imageBlock"),model:(e,{writer:t})=>t.createElement("imageBlock",e.hasAttribute("src")?{src:e.getAttribute("src")}:void 0)}).add(function(s){const t=(e,t,i)=>{var r;i.consumable.test(t.viewItem,{name:!0,classes:"image"})&&(r=s.findViewImgElement(t.viewItem))&&i.consumable.test(r,{name:!0})&&(i.consumable.consume(t.viewItem,{name:!0,classes:"image"}),(r=Yn(i.convertItem(r,t.modelCursor).modelRange.getItems()))?(i.convertChildren(t.viewItem,r),i.updateConversionResult(r,t)):i.consumable.revert(t.viewItem,{name:!0,classes:"image"}))};return e=>{e.on("element:figure",t)}}(r))}_setupClipboardIntegration(){const a=this.editor,l=a.model,h=a.editing.view,c=a.plugins.get("ImageUtils"),e=a.plugins.get("ClipboardPipeline");this.listenTo(e,"inputTransformation",(e,t)=>{var i=Array.from(t.content.getChildren());let r;if(i.every(c.isInlineImageView)){r=t.targetRanges?a.editing.mapper.toModelRange(t.targetRanges[0]):l.document.selection.getFirstRange();var s=l.createSelection(r);if("imageBlock"===Qp(l.schema,s)){const n=new gc(h.document),o=i.map(e=>n.createElement("figure",{class:"image"},e));t.content=n.createDocumentFragment(o)}}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pv extends n{static get requires(){return[fv,lg,av]}static get pluginName(){return"ImageBlock"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vv extends n{static get requires(){return[mv,ev,hm]}static get pluginName(){return"ImageInlineEditing"}init(){var e=this.editor,t=e.model.schema;t.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((e,t)=>{if(e.endsWith("caption")&&"imageInline"===t.name)return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new gv(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,i=e.t,t=e.conversion,r=e.plugins.get("ImageUtils");t.for("dataDowncast").elementToElement({model:"imageInline",view:(e,{writer:t})=>t.createEmptyElement("img")}),t.for("editingDowncast").elementToStructure({model:"imageInline",view:(e,{writer:t})=>{return r.toImageWidget(t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img")),t,i("image widget"))}}),t.for("downcast").add(hv(r,"imageInline","src")).add(hv(r,"imageInline","alt")).add(lv(r,"imageInline")),t.for("upcast").elementToElement({view:Xp(e,"imageInline"),model:(e,{writer:t})=>t.createElement("imageInline",e.hasAttribute("src")?{src:e.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const a=this.editor,l=a.model,h=a.editing.view,c=a.plugins.get("ImageUtils"),e=a.plugins.get("ClipboardPipeline");this.listenTo(e,"inputTransformation",(e,t)=>{var i=Array.from(t.content.getChildren());let r;if(i.every(c.isBlockImageView)){r=t.targetRanges?a.editing.mapper.toModelRange(t.targetRanges[0]):l.document.selection.getFirstRange();var s=l.createSelection(r);if("imageInline"===Qp(l.schema,s)){const n=new gc(h.document),o=i.map(t=>1===t.childCount?(Array.from(t.getAttributes()).forEach(e=>n.setAttribute(...e,c.findViewImgElement(t))),t.getChild(0)):t);t.content=n.createDocumentFragment(o)}}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wv extends n{static get requires(){return[vv,lg,av]}static get pluginName(){return"ImageInline"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bv extends n{static get requires(){return[pv,wv]}static get pluginName(){return"Image"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _v extends l{refresh(){var e=this.editor,e=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!e,e&&e.hasAttribute("width")?this.value={width:e.getAttribute("width"),height:null}:this.value=null}execute(t){const e=this.editor,i=e.model,r=e.plugins.get("ImageUtils").getClosestSelectedImageElement(i.document.selection);this.value={width:t.width,height:null},r&&i.change(e=>{e.setAttribute("width",t.width,r)})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yv extends n{static get requires(){return[ev]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){var e=this.editor,t=new _v(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(t){var e=this.editor;e.conversion.for("downcast").add(e=>e.on("attribute:width:"+t,(e,t,i)=>{i.consumable.consume(t.item,e.name)&&(e=i.writer,i=i.mapper.toViewElement(t.item),null!==t.attributeNewValue?(e.setStyle("width",t.attributeNewValue,i),e.addClass("image_resized",i)):(e.removeStyle("width",i),e.removeClass("image_resized",i)))})),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:e=>e.getStyle("width")}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kv={small:S.objectSizeSmall,medium:S.objectSizeMedium,large:S.objectSizeLarge,original:S.objectSizeFull};class Av extends n{static get requires(){return[yv]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){var e=this.editor,t=e.config.get("image.resizeOptions"),e=e.commands.get("resizeImage");this.bind("isEnabled").to(e);for(const i of t)this._registerImageResizeButton(i);this._registerImageResizeDropdown(t)}_registerImageResizeButton(r){const s=this.editor,{name:e,value:t,icon:n}=r,o=t?t+this._resizeUnit:null;s.ui.componentFactory.add(e,e=>{var e=new I(e),t=s.commands.get("resizeImage"),i=this._getOptionLabelValue(r,!0);if(kv[n])return e.set({label:i,icon:kv[n],tooltip:i,isToggleable:!0}),e.bind("isEnabled").to(this),e.bind("isOn").to(t,"value",Ev(o)),this.listenTo(e,"execute",()=>{s.execute("resizeImage",{width:o})}),e;throw new w("imageresizebuttons-missing-icon",s,r)})}_registerImageResizeDropdown(n){const o=this.editor,a=o.t,l=n.find(e=>!e.value),e=e=>{const t=o.commands.get("resizeImage"),i=$d(e,Td),r=i.buttonView,s=a("Resize image");return r.set({tooltip:s,commandValue:l.value,icon:kv.medium,isToggleable:!0,label:this._getOptionLabelValue(l),withText:!0,class:"ck-resize-image-button",ariaLabel:s,ariaLabelledBy:void 0}),r.bind("label").to(t,"value",e=>e&&e.width?e.width:this._getOptionLabelValue(l)),i.bind("isEnabled").to(this),Gd(i,()=>this._getResizeDropdownListItemDefinitions(n,t),{ariaLabel:a("Image resize list"),role:"menu"}),this.listenTo(i,"execute",e=>{o.execute(e.source.commandName,{width:e.source.commandValue}),o.editing.view.focus()}),i};o.ui.componentFactory.add("resizeImage",e),o.ui.componentFactory.add("imageResize",e)}_getOptionLabelValue(e,t=!1){var i=this.editor.t;return e.label||(t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original"))}_getResizeDropdownListItemDefinitions(e,i){const r=new Zn;return e.map(e=>{var t=e.value?e.value+this._resizeUnit:null,e={type:"button",model:new Zu({commandName:"resizeImage",commandValue:t,label:this._getOptionLabelValue(e),role:"menuitemradio",withText:!0,icon:null})};e.model.bind("isOn").to(i,"value",Ev(t)),r.add(e)}),r}}function Ev(t){return e=>{return null===t&&e===t||null!==e&&e.width===t}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Cv=/(image|image-inline)/,Pv="image_resized";class xv extends n{static get requires(){return[fg]}static get pluginName(){return"ImageResizeHandles"}init(){var e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const o=this.editor,a=o.editing.view;a.addObserver(cv),this.listenTo(a.document,"imageLoaded",(e,t)=>{if(t.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img")){const i=o.editing.view.domConverter,r=i.domToView(t.target).findAncestor({classes:Cv});let e=this.editor.plugins.get(fg).getResizerByViewElement(r);if(e)e.redraw();else{const s=o.editing.mapper,n=s.toModelElement(r);(e=o.plugins.get(fg).attachTo({unit:o.config.get("image.resizeUnit"),modelElement:n,viewElement:r,editor:o,getHandleHost(e){return e.querySelector("img")},getResizeHost(){return i.mapViewToDom(s.toViewElement(n.parent))},isCentered(){var e=n.getAttribute("imageStyle");return!e||"block"==e||"alignCenter"==e},onCommit(e){a.change(e=>{e.removeClass(Pv,r)}),o.execute("resizeImage",{width:e})}})).on("updateSize",()=>{r.hasClass(Pv)||a.change(e=>{e.addClass(Pv,r)})}),e.bind("isEnabled").to(this)}}})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tv extends n{static get requires(){return[yv,xv,Av]}static get pluginName(){return"ImageResize"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sv extends l{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(e=>{if(e.isDefault)for(const t of e.modelElements)this._defaultStyles[t]=e.name;return[e.name,e]}))}refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1}execute(r={}){const e=this.editor,s=e.model,n=e.plugins.get("ImageUtils");s.change(e=>{var t=r.value;let i=n.getClosestSelectedImageElement(s.document.selection);t&&this.shouldConvertImageType(t,i)&&(this.editor.execute(n.isBlockImage(i)?"imageTypeInline":"imageTypeBlock"),i=n.getClosestSelectedImageElement(s.document.selection)),!t||this._styles.get(t).isDefault?e.removeAttribute("imageStyle",i):e.setAttribute("imageStyle",t,i)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:Ov,objectInline:Rv,objectLeft:Iv,objectRight:Vv,objectCenter:Mv,objectBlockLeft:Nv,objectBlockRight:Bv}=S,Dv={get inline(){return{name:"inline",title:"In line",icon:Rv,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:Iv,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:Nv,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:Mv,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Vv,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:Bv,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:Mv,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Vv,modelElements:["imageBlock"],className:"image-style-side"}}},Fv={full:Ov,left:Nv,right:Bv,center:Mv,inlineLeft:Iv,inlineRight:Vv,inline:Rv},Lv=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function zv(e){c("image-style-configuration-definition-invalid",e)}const jv={normalizeStyles:function(o){return(o.configuredStyles.options||[]).map(e=>{return"string"==typeof(e="string"==typeof(e=e)?Dv[e]?{...Dv[e]}:{name:e}:function(e,t){var i={...t};for(const r in e)Object.prototype.hasOwnProperty.call(t,r)||(i[r]=e[r]);return i}(Dv[e.name],e)).icon&&(e.icon=Fv[e.icon]||e.icon),e}).filter(e=>{var[e,{isBlockPluginLoaded:t,isInlinePluginLoaded:i}]=[e,o],{modelElements:r,name:s}=e;if(!r||!r.length||!s)return zv({style:e}),!1;{const n=[t?"imageBlock":null,i?"imageInline":null];if(!r.some(e=>n.includes(e)))return c("image-style-missing-dependency",{style:e,missingPlugins:r.map(e=>"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0})},getDefaultStylesConfiguration:function(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[...Lv]:[]},warnInvalidStyle:zv,DEFAULT_OPTIONS:Dv,DEFAULT_ICONS:Fv,DEFAULT_DROPDOWN_DEFINITIONS:Lv};
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hv(e,t){for(const i of t)if(i.name===e)return i}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wv extends n{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[ev]}init(){var{normalizeStyles:e,getDefaultStylesConfiguration:t}=jv,i=this.editor,r=i.plugins.has("ImageBlockEditing"),s=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(r,s)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:s}),this._setupConversion(r,s),this._setupPostFixer(),i.commands.add("imageStyle",new Sv(i,this.normalizedStyles))}_setupConversion(e,t){var s,i=this.editor,r=i.model.schema,n=(s=this.normalizedStyles,(e,t,i)=>{var r;i.consumable.consume(t.item,e.name)&&(e=Hv(t.attributeNewValue,s),r=Hv(t.attributeOldValue,s),t=i.mapper.toViewElement(t.item),i=i.writer,r&&i.removeClass(r.className,t),e)&&i.addClass(e.className,t)}),o=function(e){const o={imageInline:e.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:e.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,t,i)=>{if(t.modelRange){var r=t.viewItem,s=Yn(t.modelRange.getItems());if(s&&i.schema.checkAttribute(s,"imageStyle"))for(const n of o[s.name])i.consumable.consume(r,{classes:n.className})&&i.writer.setAttribute("imageStyle",n.name,s)}}}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",n),i.data.downcastDispatcher.on("attribute:imageStyle",n),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",o,{priority:"low"})),t&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",o,{priority:"low"}))}_setupPostFixer(){const e=this.editor,n=e.model.document,o=e.plugins.get(ev),a=new Map(this.normalizedStyles.map(e=>[e.name,e]));n.registerPostFixer(t=>{let i=!1;for(const s of n.differ.getChanges())if("insert"==s.type||"attribute"==s.type&&"imageStyle"==s.attributeKey){let e=("insert"==s.type?s.position:s.range.start).nodeAfter;if(e&&e.is("element","paragraph")&&0<e.childCount&&(e=e.getChild(0)),!o.isImage(e))continue;var r=e.getAttribute("imageStyle");if(!r)continue;r=a.get(r);r&&r.modelElements.includes(e.name)||(t.removeAttribute("imageStyle",e),i=!0)}return i})}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $v extends n{static get requires(){return[Wv]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){var e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){var e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=qv(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const r of i)this._createButton(r);for(const s of qv([...t.filter(y),...jv.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles))this._createDropdown(s,i)}_createDropdown(h,c){const d=this.editor.ui.componentFactory;d.add(h.name,e=>{let i;const{defaultItem:r,items:t,title:s}=h,n=t.filter(t=>c.find(({name:e})=>Uv(e)===t)).map(e=>{var t=d.create(e);return e===r&&(i=t),t}),o=(t.length!==n.length&&jv.warnInvalidStyle({dropdown:h}),$d(e,Wd)),a=o.buttonView,l=a.arrowView;return qd(o,n,{enableActiveItemFocusOnDropdownOpen:!0}),a.set({label:Gv(s,i.label),class:null,tooltip:!0}),l.unbind("label"),l.set({label:s}),a.bind("icon").toMany(n,"isOn",(...e)=>{e=e.findIndex(Me);return(e<0?i:n[e]).icon}),a.bind("label").toMany(n,"isOn",(...e)=>{e=e.findIndex(Me);return Gv(s,(e<0?i:n[e]).label)}),a.bind("isOn").toMany(n,"isOn",(...e)=>e.some(Me)),a.bind("class").toMany(n,"isOn",(...e)=>e.some(Me)?"ck-splitbutton_flatten":void 0),a.on("execute",()=>{n.some(({isOn:e})=>e)?o.isOpen=!o.isOpen:i.fire("execute")}),o.bind("isEnabled").toMany(n,"isEnabled",(...e)=>e.some(Me)),this.listenTo(o,"execute",()=>{this.editor.editing.view.focus()}),o})}_createButton(i){const r=i.name;this.editor.ui.componentFactory.add(Uv(r),e=>{var t=this.editor.commands.get("imageStyle"),e=new I(e);return e.set({label:i.title,icon:i.icon,tooltip:!0,isToggleable:!0}),e.bind("isEnabled").to(t,"isEnabled"),e.bind("isOn").to(t,"value",e=>e===r),e.on("execute",this._executeCommand.bind(this,r)),e})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function qv(e,t){for(const i of e)t[i.title]&&(i.title=t[i.title]);return e}function Uv(e){return"imageStyle:"+e}function Gv(e,t){return(e?e+": ":"")+t}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kv extends n{static get requires(){return[Wv,$v]}static get pluginName(){return"ImageStyle"}}
/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jv extends n{static get requires(){return[hg,ev]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(hg),r=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:(e.config.get("image.toolbar")||[]).map(e=>y(e)?e.name:e),getRelatedElement:e=>r.getClosestSelectedImageWidget(e)})}}e.Alignment=Zg,e.Bold=rf,e.ButtonView=I,e.Collection=Zn,e.Command=l,e.DropdownButtonView=Td,e.Essentials=Bg,e.FontColor=Of,e.GeneralHtmlSupport=wp,e.Heading=bf,e.Image=bv,e.ImageResize=Tv,e.ImageStyle=Kv,e.ImageToolbar=Jv,e.ImageUtils=ev,e.InlineEditor=nm,e.Italic=lf,e.Link=Zp,e.MediaEmbed=Wf,e.Model=Zu,e.Observer=Ra,e.Paragraph=zg,e.Plugin=n,e.Underline=mf,e.Undo=Ng,e.Widget=lg,e.WidgetResize=fg,e.WidgetToolbarRepository=hg,e.addListToDropdown=Gd,e.createDropdown=$d,e.findOptimalInsertionRange=Zm,e.isWidget=M,e.toWidget=Jm,e.viewToModelPositionOutsideModelElement=function(n,o){return(e,t)=>{var{mapper:i,viewPosition:r}=t,s=i.findMappedViewAncestor(r);o(s)&&(i=i.toModelElement(s),t.modelPosition=n.createPositionAt(i,r.isAtStart?"before":"after"))}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
/**
 * JS Object to manipulate and reorder a grid
 * @param {int} maxWidth max column width
 * @since 2.0.0
 */
function IndexedGrid(i){i=void 0!==i?i:12,this.grid=[],this.maxWidth=i}IndexedGrid.prototype.insertionSort=function(){for(var i=this.grid.length,r=1;r<i;r++){for(var t=this.grid[r],d=r-1;0<=d&&this.grid[d]>t;d--)this.grid[d+1]=this.grid[d];this.grid[d+1]=t}},IndexedGrid.prototype.setGrid=function(i,r,t,d){for(var h=0;h<d;h++)for(var o=0;o<t;o++)this.grid.push(i+o+(r+h)*this.maxWidth);this.insertionSort()},IndexedGrid.prototype.checkGrid=function(i){for(var r=0;this.grid[r]<i;){var t=this.grid[r];if(t+1!==this.grid[r+1])for(var d=t+1;d<this.grid[r+1];d++)this.grid.push(d);r++}this.insertionSort()},IndexedGrid.prototype.willFit=function(i,r){if(0==this.grid.length)return 0;for(var t=this.findHoles(),d=0,h=t.length;d<h;d++){var o=t[d],e=t[d]+1;if(void 0!==o&&void 0!==e)for(var s=this.grid[o]+1;s<this.grid[e];s++)if(this.searchFreeSpace(s,i,r))return s}for(var n=this.grid[this.grid.length-1]+1,f=Math.floor(n/this.maxWidth),a=Math.floor((n+(i-1))/this.maxWidth);f!==a;)n+=1,f=Math.floor(n/this.maxWidth),a=Math.floor((n+(i-1))/this.maxWidth);return n},IndexedGrid.prototype.findHoles=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)void 0!==this.grid[r+1]&&this.grid[r]+1===this.grid[r+1]||i.push(r);return i},IndexedGrid.prototype.searchFreeSpace=function(i,r,t){if(Math.floor(i/this.maxWidth)!==Math.floor((i+r-1)/this.maxWidth))return!1;for(var d=0;d<t;d++)for(var h=0;h<r;h++){var o=i+h+d*this.maxWidth;if(-1!==this.grid.indexOf(o))return!1}return!0},IndexedGrid.prototype.negativeGrid=function(){for(var i=[],r=0,t=this.grid.length;r<t;r++)if(this.grid[r]+1!==this.grid[r+1])for(var d=this.grid[r]+1;d<this.grid[r+1];d++)i.push(d);return i};
/**
 * Gradient Utilitis, mainlly to generate browser compatible CSS rules
 * @since 2.0.0
 */
var Rexbuilder_Gradient_Utils=function(){var g="ellipse";return{getMarkup:function(t,e,o,r){let i,n,l,c,a,p="";if("linear"==t)i=function(t,e){t="to "+("top left"==(i=(i=t).toLowerCase().trim())?"bottom right":"top"==i?"bottom":"top right"==i?"bottom left":"left"==i?"right":"right"==i?"left":"bottom left"==i?"top right":"bottom"!=i&&"bottom right"==i?"top left":"top")+", ";for(var o="",r=0;r<e.length;r++)o+=e[r].color+" "+e[r].position+"%, ";var i="linear-gradient("+t,i=(i+=o).slice(0,-2);return i+=")"}(e,o),n=function(t,e){"top left"==t&&(o="top left, "),"top"==t&&(o="top, "),"center"==t&&(o="top, "),"top right"==t&&(o="top right, "),"left"==t&&(o="left, "),"right"==t&&(o="right, "),"bottom left"==t&&(o="bottom left, "),"bottom"==t&&(o="bottom, "),"bottom right"==t&&(o="bottom right, ");for(var o,r="",i=0;i<e.length;i++)r+=e[i].color+" "+e[i].position+"%, ";return t="-moz-linear-gradient("+o,t=(t+=r).slice(0,-2),t+=")"}(e,o),l=function(t,e){"top left"==t&&(o="left top, right bottom, "),"top"==t&&(o="left top, left bottom, "),"center"==t&&(o="left top, left bottom, "),"top right"==t&&(o="right top, left bottom, "),"left"==t&&(o="left top, right top, "),"right"==t&&(o="right top, left top, "),"bottom left"==t&&(o="left bottom, right top, "),"bottom"==t&&(o="left bottom, left top, "),"bottom right"==t&&(o="right bottom, left top, ");for(var o,r="",i=0;i<e.length;i++)r+="color-stop("+e[i].position+", "+e[i].color+"), ";return t="-webkit-gradient(linear, "+o,t=(t+=r).slice(0,-2),t+=")"}(e,o);else{if("radial"!=t)return"";n=function(t,e,o){"top left"==t&&(r="left top"),"top center"==t&&(r="center top"),"top right"==t&&(r="right top"),"middle left"==t&&(r="left center"),"middle center"==t&&(r="center"),"center"==t&&(r="center"),"middle right"==t&&(r="right center"),"bottom left"==t&&(r="left bottom"),"bottom center"==t&&(r="center bottom"),"bottom right"==t&&(r="right bottom");for(var r,i="",n=0;n<e.length;n++)i+=e[n].color+" "+e[n].position+"%, ";return dispInputSize=o.toString().toLowerCase(),t="-moz-radial-gradient("+r+", "+g+" "+dispInputSize+", ",t=(t+=i).slice(0,-2),t+=")"}(e,o,r),i=function(t,e){"top left"==t&&(o="at left top"),"top center"==t&&(o="at center top"),"top right"==t&&(o="at right top"),"middle left"==t&&(o="at left center"),"middle center"==t&&(o="at center"),"center"==t&&(o="at center"),"middle right"==t&&(o="at right center"),"bottom left"==t&&(o="at left bottom"),"bottom center"==t&&(o="at center bottom"),"bottom right"==t&&(o="at right bottom");for(var o,r="",i=0;i<e.length;i++)r+=e[i].color+" "+e[i].position+"%, ";return t="radial-gradient("+g+" farthest-corner "+o+", ",t=(t+=r).slice(0,-2),t+=")"}(e,o),l=function(t,e){"top left"==t&&(o="left top"),"top center"==t&&(o="center top"),"top right"==t&&(o="right top"),"middle left"==t&&(o="left center"),"middle center"==t&&(o="center center"),"center"==t&&(o="center center"),"middle right"==t&&(o="right center"),"bottom left"==t&&(o="left bottom"),"bottom center"==t&&(o="center bottom"),"bottom right"==t&&(o="right bottom");for(var o,r="",i=0;i<e.length;i++)r+="color-stop("+e[i].position+", "+e[i].color+"), ";return t="-webkit-gradient(radial, "+o+", 0, "+o+", 100, ",t=(t+=r).slice(0,-2),t+=")"}(e,o)}return c=n.replace("-moz-","-webkit-"),a=n.replace("-moz-","-o-"),t="",(t+="background:"+(p=n.replace("-moz-","-ms-"))+";")+("background:"+n+";")+("background:"+a+";")+("background:"+l+";")+("background:"+c+";")+("background:"+i+";")+"-webkit-background-clip:text;-webkit-text-fill-color:transparent;"},getGradientValues:function(e){let o="",r="";var i=[];if(e){var n,l,c=/^(linear|radial)-gradient\(([a-zA-Z0-9]+),\s*([a-zA-Z0-9()\s\%\,\.]+)\)$/gm,a=/(rgba{0,1}\([0-9,\.\s]+\))\s*([0-9\.%]+)/gm;let t="";for(;null!==(n=c.exec(e));)n.index===c.lastIndex&&c.lastIndex++,o=n[1],r=n[2],t=n[3];for(;null!==(p=a.exec(t));){p.index===a.lastIndex&&a.lastIndex++;var p={color:p[1],position:p[2].replace("%","")};i.push(p)}r="135deg"===(l=r)?"top left":"315deg"===l?"bottom right":l}return{gradientType:o,direction:r,handlers:i,inputSize:"cover"}}}}(jQuery);
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.4
 */
var Rexbuilder_Live_Templates=function(l){"use strict";function i(t,o){switch(t){case"tmpl-tool-save":return'<div class="rex-modal__outside-footer"><div class="tool-button tool-button--inline tool-button--confirm tool-button--modal rex-modal-option tippy" data-tippy-content="Save" data-rex-option="save"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z016-Checked"></use></svg></i></span></div><div class="tool-button tool-button--inline tool-button--modal rex-modal-option tippy" data-rex-option="reset" data-tippy-content="Reset"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i></span></div></div>';case"tmpl-tool-close":return'<div class="tool-button tool-button--black tool-button--close rex-modal__close-button"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div>';case"tmpl-palette-item":return'<div class="palette-item"><div class="tool-button tool-button--deactivate palette-item__delete"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"tmpl-block-drag-handle":return'<div class="rexlive-block-drag-handle"></div>';case"tmpl-new-section":return'<section class="rexpansive_section empty-section'+((o=void 0!==o?o:{rexID:"",dimension:"full",dimensionClass:"center-disposition",layout:"fixed",sectionWidth:"100%",fullHeight:"false",blockDistance:20,rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20}).rowSeparatorTop<25?" ui-tools--near-top":"")+'" data-rexlive-section-id="'+o.rexID+'" data-rexlive-section-name=""> <div class="section-data" style="display: none;" data-section_name="" data-type="perfect-grid" data-color_bg_section="" data-color_bg_section_active="true"data-dimension="'+o.dimension+'" data-image_bg_section_active="true" data-image_bg_section="" data-id_image_bg_section=""data-video_bg_url_section="" data-video_bg_id_section="" data-video_bg_width_section="" data-video_bg_height_section="" data-video_bg_url_vimeo_section="" data-full_height="'+o.fullHeight+'"data-block_distance="'+o.blockDistance+'" data-layout="'+o.layout+'" data-responsive_background="" data-custom_classes=""data-section_width="'+o.sectionWidth+'" data-row_separator_top="'+o.rowSeparatorTop+'" data-row_separator_bottom="'+o.rowSeparatorBottom+'"data-row_separator_right="'+o.rowSeparatorRight+'" data-row_separator_left="'+o.rowSeparatorLeft+'" data-margin=""data-row_margin_top="" data-row_margin_bottom="" data-row_margin_right="" data-row_margin_left="" data-row_active_photoswipe=""data-row_overlay_color="" data-row_overlay_active="false" data-rexlive_section_id="'+o.rexID+'" data-row_edited_live="true"></div> <div class="responsive-overlay"> <div class="rex-row__dimension '+o.dimensionClass+'"> <div class="perfect-grid-gallery grid-stack grid-stack-row" data-separator="'+o.blockDistance+'" data-layout="'+o.layout+'"data-full-height="'+o.fullHeight+'" data-row-separator-top="'+o.rowSeparatorTop+'" data-row-separator-right="'+o.rowSeparatorRight+'"data-row-separator-bottom="'+o.rowSeparatorBottom+'" data-row-separator-left="'+o.rowSeparatorLeft+'"> <div class="perfect-grid-sizer"></div> </div> </div> </div> </section>';case"tmpl-toolbox-section":return'<div class="section-toolBox"><div class="tools"><div class="bl_d-flex bl_ai-c tools-area tool-area--side tool-area--left"><div class="switch-toggle switch-live switch-dimension"><input type="radio" class="edit-row-width" data-section_width="full" id="row-dimension-full-'+(o=void 0!==o?o:{rexID:"",dimension:"full",layout:"fixed"}).rexID+'" name="row-dimension-'+o.rexID+'" value="100%"'+("full"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.full+'" for="row-dimension-full-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B001-Full"></use></svg></i></span></label><input type="radio" class="edit-row-width" data-section_width="boxed" id="row-dimension-boxed-'+o.rexID+'" name="row-dimension-'+o.rexID+'" value="80%"'+("boxed"==o.dimension?" checked":"")+'><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.boxed+'" for="row-dimension-boxed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B002-Boxed"></use></svg></i></span></label></div><div class="switch-toggle switch-live" style="display:none;"><input type="radio" class="edit-row-layout" data-section_layout="fixed" id="row-layout-fixed-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="fixed"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid+'" for="row-layout-fixed-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label><input type="radio" class="edit-row-layout" data-section_layout="masonry" id="row-layout-masonry-'+o.rexID+'" name="row-layout-'+o.rexID+'" value="masonry"><label class="tippy" data-tippy-content="'+_plugin_frontend_settings.labels.masonry+'" for="row-layout-masonry-'+o.rexID+'"><span><i class="l-svg-icons"><svg><use xlink:href="#B010-Masonry"></use></svg></i></span></label></div><div class="bl_switch tippy" data-tippy-content="'+_plugin_frontend_settings.labels.grid_on_off+'"><label><input class="edit-row-layout-checkbox" type="checkbox"'+("fixed"==o.layout?" checked":"")+'><span class="lever"></span><span class="bl_switch__icon"><i class="l-svg-icons"><svg><use xlink:href="#B017-Grid-Layout"></use></svg></i></span></label></div><div class="tool-button tool-button--flat tool-button--inline collapse-grid tippy" data-tippy-content="'+_plugin_frontend_settings.labels.collapse+'"><i class="l-svg-icons"><svg><use xlink:href="#B006-Collapse"></use></svg></i></div></div><div class="bl_d-flex bl_ai-c tools-area tools-area--right-small tool-area--center"><div class="tool-button tool-button--flat tool-button--inline tool-button__image--flat add-new-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_image+'"><i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i></div><div class="tool-button tool-button--flat tool-button__text--flat add-new-block-text tool-button--inline tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_text+'"><i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i></div> <div class="tool-button tool-button--flat tool-button--inline tool-button__video--flat add-new-block-video tippy" data-tippy-content="'+_plugin_frontend_settings.labels.insert_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button-floating tool-button-floating--wide"> <div class="tool-button tool-button--flat active"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--section"> <div class="tool-button add-new-block-slider tool-button_list--item tool-button_list--section-item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tippy add-new-section tool-button_list--item tool-button_list--section-item" data-tippy-content="'+_plugin_frontend_settings.labels.insert_row+'" data-new-row-position="after"> <i class="l-svg-icons"><svg><use xlink:href="#B016-New-Adjacent-Row"></use></svg></i> </div> </div> </div> </div> <div class="bl_d-flex bl_ai-c bl_jc-fe tools-area tool-area--side"> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__fast-configuration"> <div class="tool-button tool-button--flat update-model-button tool-button--distance-fix--small locked tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <span class="unlocked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B015-UnClosed"></use></svg></i> </span> <span class="locked-icon"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-row-image-background tippy" data-tippy-content="" value=""> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--distance-fix tool-button--hide tool-button--opacity-preview tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-row-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button__video-fast tool-button--hide tool-button--distance-fix tool-button--model-hide tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--inline tool-button--flat edit-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--deactivate tool-button--double-icon deactivate-row-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="bl_d-iflex bl_ai-c row-toolBox__tools row-toolBox__standard-configuration"> <div class="tool-button tool-button--flat tool-button--inline builder-copy-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button tool-button--flat tool-button--inline builder-move-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.move_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i> </div> <div class="tool-button-floating tool-button--model-hide"> <div class="tool-button tool-button--flat tool-button--flat--distance-fix" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button builder-section-config tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.row_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-background-section tippy tool-button--hide"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--full tool-button_list--item edit-row-image-background tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-row-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tool-button--opacity-preview tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-row-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span><div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button edit-row-video-background tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button open-model tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.model+'"> <i class="l-svg-icons"><svg><use xlink:href="#B005-RexModel"></use></svg></i> </div> <div class="tool-button synch-section-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--flat tool-button--inline builder-delete-row tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_row+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="section-toolBoox__highlight"></div> <div class="section-block-noediting-ui"> <div class="no-editing--indicator bl_d-flex bl_jc-c bl_ai-c"> <span class="call-update-model-button"><i class="l-svg-icons"><svg><use xlink:href="#B014-Closed"></use></svg></i> </span> </div> </div>';case"tmpl-toolbox-block-wrap":return o=void 0!==o?o:{block_type:""},'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position'+("text"!==o.block_type?" tool-button--hide":"")+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("image"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image tippy"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+("video"==o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--black builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools" data-block_type="'+o.block_type+'"> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+("image"!=o.block_type?" tool-button--hide":"")+' tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--hide"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+("video"!=o.block_type?" tool-button--hide":"")+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div><div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-toolbox-block-wrap-clean":return'<div class="ui-focused-element-highlight"> <div class="rexlive-block-toolbox top-tools"> <div class="rexlive-top-block-tools">  <div class="bl_d-iflex bl_ai-c block-toolBox__editor-tools"> <div class="tool-button tool-button--inline edit-block-content'+(o.has_content?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.text+'"> <i class="l-svg-icons"><svg><use xlink:href="#B003-Text"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> </div> <div class="bl_d-iflex bl_ai-c block-toolBox__config-tools"> <div class="tool-button tool-button--inline tool-button--hide edit-block-gradient tippy" data-tippy-content="'+_plugin_frontend_settings.labels.gradient+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-accordion tippy" data-tippy-content="'+_plugin_frontend_settings.labels.accordion+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z010-Logo"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-slideshow tippy" data-tippy-content="'+_plugin_frontend_settings.labels.slideshow+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button tool-button--inline edit-block-content-position'+(o.has_content?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.content_position+'" style="margin-right:15px"> <i class="l-svg-icons"><svg><use xlink:href="#C005-Layout"></use></svg></i> </div> <div class="tool-button tool-button--inline builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button-floating block-toolBox__config-list"> <div class="tool-button" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list"> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.block_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_image?"":" tool-button--hide")+'"> <div class="tool-button tool-button--inline edit-block-image tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview tool-button_list--item'+(o.not_has_overlay?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> </div> <div class="tool-button--double-icon--wrap tool-button_list--item'+(o.not_has_video?" ":" tool-button--hide ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-edit-slider tippy" data-tippy-content="'+_plugin_frontend_settings.labels.rexslider+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-RexSlider"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button_list--item builder-copy-block tippy" data-tippy-content="'+_plugin_frontend_settings.labels.copy_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i> </div> <div class="tool-button synch-block-content tool-button--reset tool-button_list--item tippy" data-tippy-content="'+_plugin_frontend_settings.labels.synch_content+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i> </div> </div> </div> <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> <div class="tool-button builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="rexlive-block-toolbox bottom-tools"> <div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-bottom-block-tools bl_d-flex bl_jc-c"> <div class="bl_d-iflex bl_ai-c block-toolBox__fast-configuration"> <div class="tool-button--double-icon--wrap'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_image+'"> <div class="tool-button tool-button--inline edit-block-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-image-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button tool-button--inline tool-button--block-bottom--fix edit-block-image-position'+(o.not_has_image?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.image_settings+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> <div class="tool-button--double-icon--wrap tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_color+'"> <span class="edit-block-color-background tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-color-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap tool-button--opacity-preview'+(o.not_has_overlay?" tool-button--hide ":" tool-button--picker-preview ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.overlay+'"> <span class="edit-block-overlay-color tool-button tool-button--inline tool-button--empty tool-button--color"></span> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview"'+(o.not_has_overlay?"":' style="background-color:'+o.overlay+';"')+'></div> <div class="tool-button tool-button--inline tool-button--empty tool-button--color-preview-texture"></div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-overlay-color"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> <div class="tool-button--double-icon--wrap'+(o.not_has_video?" tool-button--hide ":" ")+'tippy" data-tippy-content="'+_plugin_frontend_settings.labels.background_video+'"> <div class="tool-button tool-button--centered edit-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button--inline tool-button--double-icon tool-button--deactivate deactivate-block-video-background"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div> </div> <div class="rexlive-block-toolbox mobile-tools"><div class="el-size-viewer tool-indicator"><span class="el-size-viewer__val"></span> <span class="el-size-viewer__um">PX</span></div> <div class="rexlive-mobile-block-tools bl_d-flex bl_jc-sb bl_ai-c">  <div class="tool-button tool-button--inline builder-delete-block waves-effect tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete_block+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div> </div> </div>';case"tmpl-rexbutton-tools-top":return'<div class="rex-button-tools-container"> <div class="tool-button rex-delete-button tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i> </div> </div>';case"tmpl-rexbutton-tools-bottom":return'<div class="rex-button-tools-container"> <div class="tool-button tool-button_list--item tippy rex-edit-button" data-tippy-content="'+_plugin_frontend_settings.labels.config+'"> <i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i> </div> </div>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-inline-svg-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-svg-color medium-editor-button-first"> <span class="meditor-color-picker"><span class="meditor-color-picker__placeholder">P</span></span> <span class="meditor-color-picker--preview"></span> </button> </li> <li> <button class="medium-editor-action me-svg-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-svg-inline"> <i class="fa fa-info-circle"></i> </button> </li> <li> <button class="medium-editor-action me-svg-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-image-edit":return'<ul id="" class="medium-editor-toolbar-actions"> <li> <button class="medium-editor-action me-image-align-left medium-editor-button-first"> <i class="fa fa-align-left"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-center"> <i class="fa fa-align-center"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-right"> <i class="fa fa-align-right"></i> </button> </li> <li> <button class="medium-editor-action me-image-align-none"> <i class="fa fa-align-justify"></i> </button> </li> <li> <button class="medium-editor-action me-image-inline-photoswipe"> <i class="l-svg-icons"><svg><use xlink:href="#Z007-Zoom"></use></svg></i> </button> </li> <li> <button class="medium-editor-action me-image-replace"> <i class="fa fa-pencil"></i> </button> </li> <li> <button class="medium-editor-action me-image-delete medium-editor-button-last"> <i class="fa fa-times"></i> </button> </li> </ul>';case"tmpl-me-insert-media-button":return'<input type="text" class="me-insert-embed__value"> <div class="tool-button-floating"> <div class="tool-button"> <i class="l-svg-icons"><svg><use xlink:href="#Z009-More"></use></svg></i> </div> <div class="tool-button_list tool-button_list--vertical_top"> <div class="tool-button tool-button_list--item me-insert-inline-svg"> <i class="l-svg-icons"><svg><use xlink:href="#C008-Star"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-embed"> <i class="l-svg-icons"><svg><use xlink:href="#Z006-Video"></use></svg></i> </div> <div class="tool-button tool-button_list--item me-insert-image"> <i class="l-svg-icons"><svg><use xlink:href="#Z002-Image-Full"></use></svg></i> </div> </div> </div>';case"wpcf7-form-tools":return'<div class="rexwpcf7-form-tools" contenteditable="false"><div class="tool-button tool-button--flat tool-button--add-big wpcf7-form-button wpcf7-add-new-row tippy" data-tippy-content="Add Row" data-operation="addRow"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="wpcf7-select-columns wpcf7-select-columns--bottom"><ul class="wpcf7-select-columns__list"><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div></div>';case"wpcf7-row-tools":return'<div class="rexwpcf7-row-tools" contenteditable="false"><div class="tool-button tool-button--blue rex-wpcf7-row-drag tippy" data-tippy-content="'+_plugin_frontend_settings.labels.drag+'" ><i class="l-svg-icons"><svg><use xlink:href="#B007-Move"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-wpcf7-row-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-wpcf7-row-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteRow" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-column-tools":return'<div contenteditable="false" class="rexwpcf7-column-tools">'+(o.name?'<div class="tool-button tool-button--pink rex-wpcf7-column-info tippy" data-tippy-content="'+o.name+'"><i class="l-svg-icons"><svg><use xlink:href="#Z015-Question-Mark-Sign"></use></svg></i></div>':"")+'<div class="tool-button tool-button--pink wpcf7-form-button rex-wpcf7-column-settings tippy" data-tippy-content="'+_plugin_frontend_settings.labels.settings+'" data-operation="columnSettings"><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button tool-button--pink wpcf7-form-button rex-wpcf7-column-clone tippy" data-tippy-content="'+_plugin_frontend_settings.labels.clone+'" data-operation="cloneColumn"><i class="l-svg-icons"><svg><use xlink:href="#Z004-Copy"></use></svg></i></div><div class="tool-button tool-button--pink tool-button--black wpcf7-form-button rex-wpcf7-column-delete tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-button-fix":return'<span class="wpcf7-form-control-wrap"></span>';case"rexelement-tools":return'<div contenteditable="false" class="rexelement-tools"><div class="wpcf7-select-columns wpcf7-select-columns--top"><ul class="wpcf7-select-columns__list"><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-1-column" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B041-One-Column"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-2-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B042-Two-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-3-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B043-Three-Columns"></use></svg></i></button></li><li><button type="button" class="wpcf7-form-button wpcf7-column-selector select-4-columns" data-operation="addSelectedColumns"><i class="l-svg-icons"><svg><use xlink:href="#B044-Four-Columns"></use></svg></i></button></li></ul></div><div class="tool-button tool-button--blue wpcf7-form-button rex-add-row tippy" data-tippy-content="Add Row" data-operation="addRowTop"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-edit-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels[o.settingsType]+'" data-operation="editElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z005-Setting"></use></svg></i></div><div class="tool-button tool-button--blue wpcf7-form-button rex-delete-element tippy" data-tippy-content="'+_plugin_frontend_settings.labels.delete+'" data-operation="deleteElement" ><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div></div>';case"wpcf7-plus-button-inside-row":return'<div class="tool-button tool-button--flat tool-button--add-big-pink wpcf7-form-button wpcf7-add-new-form-content" data-operation="addColumnContent"><i class="l-svg-icons"><svg><use xlink:href="#Z001-Plus"></use></svg></i></div>';case"tmpl-new-slider-element":return'<div class="rex-slider-element"></div>';case"slider-overlay":return'<div class="slider-overlay" style="background-color:'+o.overlayColor+'"></div>';case"slide-video":return'<div class="rex-slider-video-wrapper"></div>';case"slide-text":return'<div class="rex-slider-element-title"></div>';case"empty-paragraph":return"<p><br></p>";default:return""}}return{getTemplate:i,getParsedTemplate:function(t,o){return l.parseHTML(i(t,o))[0]}}}(jQuery,(window,document));
/**
 * Utilities functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Live_Utilities=function($){"use strict";var PLATFORM_IS_MAC=window.navigator.platform.match("Mac"),tippyCollection,_tooltips=function(){tippyCollection=tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},_addSpectrumCustomSaveButton=function(t){var e=$(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save"));t.spectrum("container").append(e),e.find(".rex-modal-option").on("click",function(e){switch(e.stopPropagation(),e.preventDefault(),this.getAttribute("data-rex-option")){case"save":t.spectrum("container").find(".sp-choose").trigger("click");break;case"reset":t.spectrum("set",t.attr("data-color-on-show")),t.spectrum("container").find(".sp-input").trigger("change")}})},_addSpectrumCustomCloseButton=function(t){var e=$(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close"));t.spectrum("container").append(e),e.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.attr("data-revert",!0),t.spectrum("container").find(".sp-cancel").trigger("click")})},_removeColorPicker=function(e){e.find(".tool-button--spectrum").remove()},_removeTextEditor=function(e){var t,i,o,e=e.find(".text-wrap");0!=e.length&&e.hasClass("medium-editor-element")&&(t=e.html(),i=$(document.createElement("div")),o=e.attr("style"),i.appendTo(e.parent()),i.addClass("text-wrap"),e.hasClass("rex-content-resizable")&&i.addClass("rex-content-resizable"),e.remove(),i.attr("style",o),i.html(t),i.find(".text-editor-span-fix").remove(),i.find(".medium-insert-buttons").remove()),i=t=e=void 0},_removeHandles=function(e){e.children(".ui-resizable-handle").each(function(e,t){$(t).remove()})},_hideAllTools=function(){Rexbuilder_Util_Editor.manageElement=!1,Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("focusedRow").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item").removeClass("focused"),Rexbuilder_Util.$rexContainer.find(".tool-button-floating--active").removeClass("tool-button-floating--active")},_getBackgroundUrlFromCss=function(e){return e.replace("url(","").replace(")","").replace(/\"/gi,"")},_generateElementNewIDs=function(e,t,i){var i="block_"+i+"_"+t,t=e.children(".rexbuilder-block-data"),o=Rexbuilder_Util.createBlockID();e.attr("data-rexbuilder-block-id",o),t.attr("data-rexbuilder_block_id",o),e.attr("id",i),t.attr("data-id",i),t.attr("id",i+"-builder-data")},_fixCopiedElementSlider=function(e){var t,i,o;e.hasClass("block-has-slider")&&(o=e.find(".text-wrap"),t=e.attr("data-rexbuilder-block-id"),i=o.children('.rex-slider-wrap[data-rex-slider-active="true"]'),o.children().remove(),e={sectionID:(o=e.parents(".rexpansive_section")).attr("data-rexlive-section-id"),modelNumber:void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",rexID:t},o=Rexbuilder_Live_Utilities.createSliderData(i),Rexbuilder_Live_Utilities.saveSliderOnDB(o,!0,t,e))},removeDeletedBlocks=function(e){e.children(".removing_block").each(function(){$(this).remove()})},_createSliderData=function($sliderWrapper){for(var auto_start="true"==$sliderWrapper.attr("data-rex-slider-animation").toString(),prev_next="1"==$sliderWrapper.attr("data-rex-slider-prev-next").toString(),dots="1"==$sliderWrapper.attr("data-rex-slider-dots").toString(),data={id:parseInt($sliderWrapper.attr("data-slider-id")),settings:{auto_start:auto_start,prev_next:prev_next,dots:dots},slides:[]},slides=$sliderWrapper.find(".rex-slider-element"),i=0;i<slides.length;i++){var $slide=$(slides[i]),slide={slide_image_id:"",slide_image_url:"",slide_url:"",slide_text:"",slide_video:"",slide_videoMp4Url:"",slide_video_audio:"",slide_video_type:""},backgroundImageUrl=(slide.slide_image_id=isNaN(parseInt($slide.attr("data-rex-slide-image-id")))?"":parseInt($slide.attr("data-rex-slide-image-id")),Rexbuilder_Live_Utilities.getBackgroundUrlFromCss($slide.css("background-image"))),$linkDiv=("none"!=backgroundImageUrl&&(slide.slide_image_url=backgroundImageUrl),$slide.children("a")),$textContent=(0!=$linkDiv.length&&(slide.slide_url=$linkDiv.attr("href")),$slide.find(".rex-slider-element-title")),$videoMp4Wrap=(0!=$textContent.length&&0!=$textContent.html().trim().length&&(slide.slide_text=$textContent.html()),$slide.find(".mp4-player")),$videoVimeoWrap=$slide.find(".vimeo-player"),$videoYoutubeWrap=$slide.find(".youtube-player"),$iframe,$ytpPlayer,elemData;0!=$videoMp4Wrap.length&&(slide.slide_video=parseInt($videoMp4Wrap.children(".rex-video-wrap").attr("data-rex-video-mp4-id")),slide.slide_videoMp4Url=$videoMp4Wrap.find("source").attr("src"),slide.slide_video_audio=0!=$videoMp4Wrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="mp4"),0!=$videoVimeoWrap.length&&($iframe=$videoVimeoWrap.find("iframe"),slide.slide_video=$iframe.attr("src").split("?")[0],slide.slide_video_audio=0!=$videoVimeoWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="vimeo"),0!=$videoYoutubeWrap.length&&($ytpPlayer=$videoYoutubeWrap.find(".rex-youtube-wrap"),elemData=jQuery.extend(!0,{},eval("("+$ytpPlayer.attr("data-property")+")")),slide.slide_video=elemData.videoURL,slide.slide_video_audio=0!=$videoYoutubeWrap.children(".rex-video-toggle-audio").length,slide.slide_video_type="youtube"),data.slides.push(slide)}return data},_saveSliderOnDB=function(e,t,i,o){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:uploadSliderFromLive",sliderInfo:{slider:e,newSlider:t,blockID:i,target:o}})},_getElementsPhotoswipe=function(e){var o=[];return e.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var t=$(t).children(".rexbuilder-block-data"),i={$data:t,photoswipe:!1};"true"==t.attr("data-photoswipe").toString()&&(i.photoswipe=!0),o.push(i)}),o},_fixToolsVisibility=function(e){"default"==e?(Rexbuilder_Util.$rexContainer.removeClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.parent().removeClass("rex-hide-responsive-tools")):(Rexbuilder_Util.$rexContainer.parent().addClass("rex-hide-responsive-tools"),Rexbuilder_Util.$rexContainer.addClass("rex-hide-responsive-tools"))},setEndOfContenteditable=function(e){var t,i;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(i=window.getSelection()).removeAllRanges(),i.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())},_updateModelSectionTools=function(e,t){var t=Rexbuilder_Util_Editor.rowAttrsObj(t[0]),i={idImage:void 0!==t.id_image_bg_section?t.id_image_bg_section:"",urlImage:void 0!==t.image_bg_section?t.image_bg_section:""},o=void 0!==t.color_bg_section?t.color_bg_section:"",r={active:void 0!==t.row_overlay_active?t.row_overlay_active:"",color:void 0!==t.row_overlay_color?t.row_overlay_color:""},d={typeVideo:""};void 0!==t.video_mp4_url&&""!=t.video_mp4_url?d.typeVideo="mp4":void 0!==t.video_bg_url_vimeo_section&&""!=t.video_bg_url_vimeo_section?d.typeVideo="vimeo":void 0!==t.video_bg_url_section&&""!=t.video_bg_url_section&&(d.typeVideo="youtube"),Rexbuilder_Section_Editor.updateSectionDimensionTool(e,t),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,t),""!==i.idImage?Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,i):Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e),-1===o.indexOf("gradient")?Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,o):Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,o),-1===r.color.indexOf("gradient")?(Rexbuilder_Dom_Util.updateSectionOverlay(e,r),Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,r)):(Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,r),Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,r)),Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,d),e.find(".perfect-grid-item").each(function(e,t){t=$(t);Rexbuilder_Live_Utilities.updateModelBlocksTools(t,t.find(".rexbuilder-block-data"))})},_updateModelBlocksTools=function(e,t){Rexbuilder_Util_Editor.blockAttrsObj(t[0]);e.removeClass("has-rs-animation")},addWindowListeners=function(){document.addEventListener("keydown",function(e){var t;(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&83==e.keyCode?(e.preventDefault(),t={eventName:"rexlive:savePageWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):"BODY"==e.target.nodeName&&(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode?(e.preventDefault(),t={eventName:"rexlive:undoWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):"BODY"==e.target.nodeName&&((PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(PLATFORM_IS_MAC?e.metaKey:e.ctrlKey)&&89==e.keyCode)?(e.preventDefault(),t={eventName:"rexlive:redoWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)):27!==e.keyCode||Rexbuilder_Util_Editor.editingGallery||(t={eventName:"rexlive:esc_pressed"},Rexbuilder_Util_Editor.sendParentIframeMessage(t))}),Rexbuilder_Util.$window.on("mousedown",function(e){Rexbuilder_Util_Editor.mouseDown=!0,Rexbuilder_Util_Editor.mouseUp=!1}),Rexbuilder_Util.$window.on("mouseup",function(e){Rexbuilder_Util_Editor.mouseDown=!1,Rexbuilder_Util_Editor.mouseUp=!0}),Rexbuilder_Util.$window[0].addEventListener("message",function(e){{var t;e.data.rexliveEvent&&((t=jQuery.Event(e.data.eventName)).settings={},jQuery.extend(t.settings,e.data),Rexbuilder_Util.$document.trigger(t))}},!1)},addDocumentListeners=function(){Rexbuilder_Util.$document.on("rexlive:changeLayout",function(e){e=e.settings;Rexbuilder_Util_Editor.undoStackArray=[],Rexbuilder_Util_Editor.redoStackArray=[],Rexbuilder_Util.chosenLayoutData=jQuery.extend(!0,{},e.layoutData),Rexbuilder_Util_Editor.changedLayout=!0,Rexbuilder_Util_Editor.clickedLayoutID=e.selectedLayoutName,Rexbuilder_Live_Utilities.fixToolsVisibility(e.selectedLayoutName)}),Rexbuilder_Util.$document.on("rexlive:startChangeLayout",function(e){Rexbuilder_Util_Editor.startLoading()}),Rexbuilder_Util.$document.on("rexlive:updateLayoutsDimensions",function(e){e=e.settings.data_to_send;$("#layout-avaiable-dimensions").text(JSON.stringify(e.layouts)),e.updateHeights&&(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.updateGridsHeights(),Rexbuilder_Util.windowIsResizing=!1)}),Rexbuilder_Util.$document.on("rexlive:undo",function(e){var t;0<Rexbuilder_Util_Editor.undoStackArray.length&&(Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),t=Rexbuilder_Util_Editor.undoStackArray.pop(),Rexbuilder_Dom_Util.performAction(t,!1),Rexbuilder_Util_Editor.redoStackArray.push(t)),Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:redo",function(e){var t;0<Rexbuilder_Util_Editor.redoStackArray.length&&(t=Rexbuilder_Util_Editor.redoStackArray.pop(),Rexbuilder_Dom_Util.performAction(t,!0),Rexbuilder_Util_Editor.undoStackArray.push(t)),Rexbuilder_Util_Editor.sendUndoRedoInformation()}),Rexbuilder_Util.$document.on("rexlive:updateSlider",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSliderStack(e.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:change_section_bg_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSectionBackgroundColorLive(e.data_to_send.sectionTarget,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_section_overlay_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateSectionOverlayColorLive(e.data_to_send.sectionTarget,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_bg_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateBlockBackgroundColorLive(e.data_to_send.target,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:change_block_overlay_color",function(e){e=e.settings;Rexbuilder_Dom_Util.updateBlockOverlayColorLive(e.data_to_send.target,e.data_to_send.color)}),Rexbuilder_Util.$document.on("rexlive:newSliderSavedOnDB",function(e){e=e.settings;Rexbuilder_CreateBlocks.createSlider(e.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:dropChanges",function(e){Rexbuilder_Util_Editor.startLoading();e=e.settings.data_to_send;Rexbuilder_Util_Editor.restorePageStartingState(e)}),Rexbuilder_Util.$document.on("rexlive:lockRows",function(e){Rexbuilder_Util_Editor.lockRows()}),Rexbuilder_Util.$document.on("rexlive:unlockRows",function(e){Rexbuilder_Util_Editor.releaseRows()}),Rexbuilder_Util.$document.on("rexlive:close_modal",function(e){Rexbuilder_Live_Utilities.hideAllTools();var t=Rexbuilder_Util.rexContainer.querySelector(".needs-refocus");t&&(Rexbuilder_Util.addClass(t,"focusedRow"),Rexbuilder_Util.removeClass(t,"needs-refocus"))}),Rexbuilder_Util.$document.on("rexlive:openCreateModelModal",function(e){e=e.settings.data_to_send;$(".rexpansive_section[data-rexlive-section-id="+e.sectionTarget.sectionID+"]").find(".open-model").trigger("click")}),Rexbuilder_Util.$document.on("rexlive:importButton",function(e){Rexbuilder_Rexbutton.fixImportedButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateButtonLive",function(e){Rexbuilder_Rexbutton.updateButtonLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_button",function(e){Rexbuilder_Rexbutton.removeSeparateButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_button",function(e){Rexbuilder_Rexbutton.separateRexButton(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_button",function(e){Rexbuilder_Rexbutton.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:importElement",function(e){Rexbuilder_Rexelement_Editor.fixImportedElement(e.settings.data)}),Rexbuilder_Util.$document.on("rexlive:completeImportElement",function(e){Rexbuilder_Rexelement_Editor.handleCompleteImportElement(e)}),Rexbuilder_Util.$document.on("rexlive:lock_synchronize_on_element",function(e){Rexbuilder_Rexelement_Editor.lockSynchronize(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:separate_rex_element",function(e){Rexbuilder_Rexelement_Editor.separateRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:refresh_separated_rex_element",function(e){Rexbuilder_Rexelement_Editor.refreshSeparatedRexElement(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:remove_separate_form",function(e){Rexbuilder_Rexwpcf7_Editor.removeSeparatedForm(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_add_field",function(e){Rexbuilder_Rexwpcf7_Editor.addField(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_form_span_data",function(e){Rexbuilder_Rexwpcf7.createFormSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateFormContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateFormContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:wpcf7_create_column_content_span_data",function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:updateColumnContentLive",function(e){Rexbuilder_Rexwpcf7_Editor.updateColumnContentLive(e.settings.data_to_send)}),Rexbuilder_Util.$document.on("rexlive:drag_drop_started",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!0}),Rexbuilder_Util.$document.on("rexlive:drag_drop_ended",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent=!1}),Rexbuilder_Util.$document.on("rexlive:set_container_margins",function(e){Rexbuilder_Util_Editor.updateContainerMargins(e.settings.data_to_send)})},addDnDEvents=function(){Rexbuilder_Util.$rexContainer.on("dragenter",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||e.stopPropagation()}),Rexbuilder_Util.$rexContainer.on("dragover",function(e){Rexbuilder_Util_Editor.dragAndDropFromParent||(e.preventDefault(),e.stopPropagation())}),Rexbuilder_Util.$rexContainer.on("drop",function(e){if(!Rexbuilder_Util_Editor.dragAndDropFromParent){e.preventDefault(),e.stopPropagation();var t,i,o=(e.isTrigger?triggerEvent:e).originalEvent.dataTransfer.getData("text/plain");try{o=JSON.parse(o)}catch(e){o=null}o&&(i=document.elementFromPoint(e.clientX,e.clientY),i=$(i),t=(o=(""!=o.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionID+'"][data-rexlive-model-number="'+o.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+o.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+o.rexID+'"]')).parents(".grid-stack-row"),0<(i=i.parents(".rexpansive_section").find(".grid-stack-row")).length)&&!i.is(t)&&(Rexbuilder_CreateBlocks.moveBlockToOtherSection(o,i),o.find(".builder-delete-block").first().trigger("click"))}})},addBuilderListeners=function(){addDocumentListeners(),addWindowListeners(),addDnDEvents()},load=function(){_tooltips()};return{launchTooltips:_tooltips,addSpectrumCustomSaveButton:_addSpectrumCustomSaveButton,addSpectrumCustomCloseButton:_addSpectrumCustomCloseButton,removeColorPicker:_removeColorPicker,removeTextEditor:_removeTextEditor,removeHandles:_removeHandles,hideAllTools:_hideAllTools,getBackgroundUrlFromCss:_getBackgroundUrlFromCss,generateElementNewIDs:_generateElementNewIDs,fixCopiedElementSlider:_fixCopiedElementSlider,removeDeletedBlocks:removeDeletedBlocks,createSliderData:_createSliderData,saveSliderOnDB:_saveSliderOnDB,getElementsPhotoswipe:_getElementsPhotoswipe,fixToolsVisibility:_fixToolsVisibility,setEndOfContenteditable:setEndOfContenteditable,updateModelSectionTools:_updateModelSectionTools,updateModelBlocksTools:_updateModelBlocksTools,addBuilderListeners:addBuilderListeners,load:load}}(jQuery);
!function(t,e){"use strict";t.RexEditedData=e()}("undefined"!=typeof window?window:this,function(){var l=["section_name","section_nav_label","color_bg_section","color_bg_section_active","image_bg_section_active","image_bg_section","image_width","image_height","id_image_bg_section","image_size","video_bg_id","video_mp4_url","video_bg_width_section","video_bg_height_section","video_bg_url_section","video_bg_url_vimeo_section","block_distance","row_separator_top","row_separator_bottom","row_separator_right","row_separator_left","margin","row_margin_top","row_margin_bottom","row_margin_right","row_margin_left","custom_classes","row_overlay_color","row_overlay_active","dimension","section_width"],c=["color_bg_block","color_bg_block_active","image_bg_url","image_width","image_height","id_image_bg","image_size","image_bg_elem_active","type_bg_image","video_bg_id","video_bg_width","video_bg_height","video_mp4_url","video_bg_url_youtube","video_bg_url_vimeo","video_has_audio","photoswipe","block_custom_class","block_padding","overlay_block_color","overlay_block_color_active","linkurl","block_flex_position","block_flex_img_position"];function t(){this.editedInfo=null,this.startData=null,arguments[0]&&(this.startData=arguments[0]),function(){if(!Array.isArray(this.startData)){var t,e=[];for(t in this.startData)e.push(this.startData[t]);this.startData=e}}.call(this),function(t){t=void 0!==t?t:this.startData;var e,i,o,r=[],a=t.length,s=0;for(e=0;e<a;e++){var n={};for(n.section_rex_id=t[e].section_rex_id,n.targets=[],s=t[e].targets.length,i=0;i<s;i++){var _={};if(_.name=t[e].targets[i].name,_.props={},"self"===_.name)for(o=0;o<l.length;o++)void 0===t[e].targets[i].props[l[o]]?_.props[l[o]]=!1:_.props[l[o]]=!0;else for(o=0;o<c.length;o++)void 0===t[e].targets[i].props[c[o]]?_.props[c[o]]=!1:_.props[c[o]]=!0;n.targets.push(_)}r.push(n)}this.editedInfo=r}.call(this)}function n(t){for(var e=this.editedInfo.length,i=0;i<e;i++)if(t===this.editedInfo[i].section_rex_id)return i;return!1}function _(t,e){for(var i=this.editedInfo[t].targets.length,o=0;o<i;o++)if(e===this.editedInfo[t].targets[o].name)return o;return!1}function i(t,e){e=_.call(this,t,e);return!1!==e&&this.editedInfo[t].targets[e].props}function r(t,e,i,o){o=void 0===o||o;t=n.call(this,t);!1!==t&&!1!==(e=_.call(this,t,e))&&(this.editedInfo[t].targets[e].props[i]=o)}function o(t,e,i){i=void 0===i||i;var o=n.call(this,t);if(!1!==o){var r,a,s=_.call(this,o,e);if(!1!==s)if("self"===e)for(a=l.length,r=0;r<a;r++)this.editedInfo[o].targets[s].props[l[r]]=i;else for(a=c.length,r=0;r<a;r++)this.editedInfo[o].targets[s].props[c[r]]=i}}return t.prototype.getSectionData=function(t){t=n.call(this,t);return!1!==t&&i.call(this,t,"self")},t.prototype.getBlockData=function(t,e){t=n.call(this,t);return!1!==t&&i.call(this,t,e)},t.prototype.addSectionData=function(t){var e=n.call(this,t);if(!1===e){var i={};for(z=0;z<l.length;z++)i[l[z]]=!1;this.editedInfo.push({section_rex_id:t,targets:[{name:"self",props:i}]})}},t.prototype.addBlockData=function(t,e){t=n.call(this,t);if(!1!==t){var i=_.call(this,t,e);if(!1===i){var o={};for(z=0;z<c.length;z++)o[c[z]]=!1;this.editedInfo[t].targets.push({name:e,props:o})}}},t.prototype.setSectionData=function(t,e,i){r.call(this,t,"self",e,i)},t.prototype.setBlockData=function(t,e,i,o){r.call(this,t,e,i,o)},t.prototype.setBulkSectionData=function(t,e){o.call(this,t,"self",e)},t.prototype.setBulkBlockData=function(t,e,i){o.call(this,t,e,i)},t.getTracePropsSection=function(){return l},t.getTracePropsBlock=function(){return c},t});
/**
 * Gradient palette color to append to Spectrum Picker.
 * With a button to open the gradient picker
 *
 * @since 2.0.0
 */
var Rexbuilder_Color_Palette=function(r){"use strict";var i,t=function(e,t){""!==e&&(i.$spicker.spectrum("set",e),t)&&i.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=r(".sp-rex-color-palette");(i={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,n;e.preventDefault(),null!==i.$spicker&&(e=i.$spicker.spectrum("get"),t=Rexbuilder_Util.createRandomID(4),e=e.toRgbString(),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:savePaletteColor",color_data:{color:e,ID:t}}),n=r(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-palette-item")),i.$add_color.before(n),n.css("background",e),n.attr("data-color-id",t),n.attr("data-color-value",e))}),i.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-color-value");e&&t(e,!0)}),i.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-color-id");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:deletePaletteColor",color_data:{ID:t}}),Rexbuilder_Color_Palette.deletePaletteItem(e)}),i.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),i.object){case"block":Rexbuilder_Block_Editor.openBlockBackgroundGradient(i.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openSectionBackgroundGradient(i.$spicker.parents(".rexpansive_section"))}i.$spicker.spectrum("hide")})},show:function(e){i.$spicker=e.$target,i.action=e.action,i.object=e.object,i.textSelection=void 0!==e.textSelection?e.textSelection:null;e=i.$spicker.spectrum("container").find(".sp-picker-container");i.$container.show().detach().appendTo(e)},hide:function(){i.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),i.$spicker=null,i.action=null,i.object=null,i.textSelection=null},deletePaletteItem:function(e){r(e).remove()}}}(jQuery);
/**
 * Gradient palette color to append to Spectrum Picker for an overlay.
 * With a button to open the gradient picker
 *
 * @since 2.0.0
 */
var Rexbuilder_Overlay_Palette=function(r){"use strict";var i,t=function(e,t){""!==e&&(i.$spicker.spectrum("set",e),t)&&i.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=r(".sp-rex-color-overlay-palette");(i={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,a;e.preventDefault(),null!==i.$spicker&&(e=i.$spicker.spectrum("get"),t=Rexbuilder_Util.createRandomID(4),e=e.toRgbString(),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:savePaletteOverlayColor",overlay_data:{overlay:e,ID:t}}),a=r(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-palette-item")),i.$add_color.before(a),a.css("background",e),a.attr("data-overlay-id",t),a.attr("data-overlay-value",e))}),i.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-overlay-value");e&&t(e,!0)}),i.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-overlay-id");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:deletePaletteOverlayColor",overlay_data:{ID:t}}),Rexbuilder_Overlay_Palette.deletePaletteItem(e)}),i.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),i.object){case"block":Rexbuilder_Block_Editor.openBlockOverlayGradient(i.$spicker.parents(".perfect-grid-item"));break;case"section":Rexbuilder_Section_Editor.openRowOverlayGradient(i.$spicker.parents(".rexpansive_section"))}i.$spicker.spectrum("hide")})},show:function(e){i.$spicker=e.$target,i.action=e.action,i.object=e.object;e=i.$spicker.spectrum("container").find(".sp-picker-container");i.$container.show().detach().appendTo(e)},hide:function(){i.$container.hide().detach().appendTo(Rexbuilder_Util.$rexContainer.parent()),i.$spicker=null,i.action=null,i.object=null},deletePaletteItem:function(e){r(e).remove()}}}(jQuery);
/**
 * Object that handles the live text editor inside the blocks
 * upgraded using CKEditor5 plugin
 * 
 * The plugin is bundled in the CKEDITOR global object
 *
 * @since 2.2.0
 */
var CKEditor_Handler=function(o){const t="text-wrap",i="perfect-grid-gallery",r="grid-stack-item",a="rexpansive_section",n="rex-model-section",s="item--me-focus",l="block-editing",d="alignment",c="left",u={IconInlineInserted:"iconInlineInserted"},m="icon_resized",g="builder-icon";var e=document.getElementById("builder-icons");const h=Array.prototype.slice.call(e.children),b="media_resized",v=/media/;function p(){var t=[];for(let e=0;e<h.length;e++){var i=h[e].id,i={withText:!1,label:i,class:g+"-"+i,icon:`<svg viewBox="${h[e].getAttribute("viewBox")}" xmlns="${h[e].getAttribute("xmlns")}">${h[e].innerHTML.trim()}</svg>`};t.push(i)}return t}function E(e){return void 0===e}function I(e){return E(e)||null===e}function w(e,t){for(var i=[];(e=e.parentNode)&&e!==document;)t&&!e.matches(t)||i.push(e);return i}class x{handleAction(e,t){throw new Error('Method "handleAction" not implemented')}}class C extends x{handleAction(e,t){e.currentState instanceof C&&"ACTIVATE"===t&&e.transitionTo(new T)}}class T extends x{handleAction(e,t){if(e.currentState instanceof T)switch(t){case"DEACTIVATE":e.transitionTo(new C);break;case"OPEN_WP_IMAGE_UPLOAD":e.transitionTo(new A);break;case"OPEN_HTML_EDITOR":e.transitionTo(new f);break;case"OPEN_TEXT_GRADIENT":e.transitionTo(new R);break;case"OPEN_REXBUTTON_EDITOR":e.transitionTo(new O)}}}class A extends x{handleAction(e,t){e.currentState instanceof A&&"ACTIVATE"===t&&e.transitionTo(new T)}}class f extends x{handleAction(e,t){e.currentState instanceof f&&"ACTIVATE"===t&&e.transitionTo(new T)}}class R extends x{handleAction(e,t){e.currentState instanceof R&&"ACTIVATE"===t&&e.transitionTo(new T)}}class O extends x{handleAction(e,t){e.currentState instanceof O&&"ACTIVATE"===t&&e.transitionTo(new T)}}class D{constructor(e){this.currentState=e}performAction(e){this.currentState.handleAction(this,e)}transitionTo(e){console.log("Transition to "+e.constructor.name),this.currentState=e}getCurrentState(){return this.currentState}}const k=new class{constructor(){this.stateMachine=new D(new C),this.editorInstance=null,this.isSectionModel=!1}getEditorInstance(){return this.editorInstance}getEditorInstanceSourceElement(){return this.editorInstance.sourceElement}setEditorInstance(e){this.editorInstance=e}clearEditorInstance(){this.editorInstance=null}setStateMachineContext(e,t){this.setEditorInstance(e),this.isSectionModel=t}clearStateMachineContext(){this.clearEditorInstance(),this.isSectionModel=!1}isEditorActive(){return this.stateMachine.getCurrentState()instanceof T}isEditorDeactive(){return this.stateMachine.getCurrentState()instanceof C}isWpImageUploadOpen(){return this.stateMachine.getCurrentState()instanceof A}isHTMLEditorOpen(){return this.stateMachine.getCurrentState()instanceof f}toActiveState(){this.stateMachine.performAction("ACTIVATE")}toDeactiveState(){this.stateMachine.performAction("DEACTIVATE")}toWpImageUploadOpen(){this.stateMachine.performAction("OPEN_WP_IMAGE_UPLOAD")}toWpImageUploadClose(){this.stateMachine.performAction("ACTIVATE")}toHTMLEditOpen(){this.stateMachine.performAction("OPEN_HTML_EDITOR")}toHTMLEditClose(){this.stateMachine.performAction("ACTIVATE")}toTextGradientOpen(){this.stateMachine.performAction("OPEN_TEXT_GRADIENT")}toTextGradientClose(){this.stateMachine.performAction("ACTIVATE")}toRexbuttonEditorOpen(){this.stateMachine.performAction("OPEN_REXBUTTON_EDITOR")}toRexbuttonEditorClose(){this.stateMachine.performAction("ACTIVATE")}};class V extends CKEDITOR.Plugin{init(){var e=this.editor;const t=e.model,a=t.document;e=e.commands.get("alignment");this._defineConverters(),e.on("execute",(e,r)=>{t.change(t=>{var i=Array.from(a.selection.getSelectedBlocks()).filter(e=>this._canBeAligned(e)),n=i[0].getAttribute("alignment");for(let e=0;e<r.length;e++){var o=r[e].value;o!==n&&c===o&&L(i,t,o)}})})}_defineConverters(){var e=this.editor,t={},t=(t[c]={key:"style",value:{"text-align":c}},{model:{key:d,values:[c]},view:t}),t=(e.conversion.for("downcast").attributeToAttribute(t),{view:{key:"style",value:{"text-align":c}},model:{key:d,value:c}});e.conversion.for("upcast").attributeToAttribute(t)}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,d)}}function L(e,t,i){for(const n of e)t.setAttribute(d,i,n)}class N extends CKEDITOR.Plugin{init(){var e=this.editor;this._defineSchema(),this._defineConverters(),e.ui.componentFactory.add("wpImageUpload",()=>{var e=new CKEDITOR.ButtonView;return e.set({tooltip:"WP Image Upload",withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 20 20"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"></path></svg>',class:"ckeditor-wp-image-upload"}),e.on("execute",()=>{Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openMEImageUploader",img_data:{}}),k.toWpImageUploadOpen()}),e})}_defineSchema(){this.editor.model.schema.extend("imageInline",{allowAttributes:["imageId"]})}_defineConverters(){this.editor.conversion.attributeToAttribute({view:"data-image-id",model:"imageId"})}}class H extends CKEDITOR.Plugin{init(){const i=this.editor;i.ui.componentFactory.add("wpImageEdit",e=>{var t=new CKEDITOR.ButtonView;return t.set({tooltip:"WP Image Edit",withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 20 20"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"></path></svg>'}),t.on("execute",()=>{var e=i.model.document.selection.getSelectedElement();if(!I(e)&&e.is("element","imageInline")){var n,o=e.getAttribute("htmlImgAttributes");let t=null,i="";for(let e=0;e<o.classes.length;e++)-1!==o.classes[e].indexOf("align")?i=o.classes[e]:-1!==o.classes[e].indexOf("wp-image")&&(n=o.classes[e].split("-"),t=parseInt(n[2]));e={image_id:t,width:parseInt(o.attributes.width),height:parseInt(o.attributes.height),align:i,imgInsideLink:!1};Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openMEImageUploader",img_data:e}),k.toWpImageUploadOpen()}}),t})}}class B extends CKEDITOR.Command{attributekey="photoswipe";refresh(){var e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute(this.attributekey)?this.value=!0:this.value=!1}execute(){var e=this.editor,t=e.model;const i=e.model.document.selection.getSelectedElement();i&&i.is("element","imageInline")&&t.change(e=>{this.value?e.removeAttribute(this.attributekey,i):e.setAttribute(this.attributekey,!0,i)})}}class W extends CKEDITOR.Plugin{init(){this._defineSchema(),this._defineConverters()}_defineSchema(){this.editor.model.schema.extend("imageInline",{allowAttributes:["photoswipe"]})}_defineConverters(){var e=this.editor,t=(e.conversion.attributeToAttribute({model:"photoswipe",view:"inline-photoswipe"}),new B(e));e.commands.add(t.attributekey,t)}}class U extends CKEDITOR.Plugin{init(){const i=this.editor,n=i.t;i.ui.componentFactory.add("photoswipe",e=>{var t=i.commands.get("photoswipe"),e=new CKEDITOR.ButtonView(e);return e.set({tooltip:n("Photoswipe"),withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 21 21"><path d="M14 12.586l7.014 7.014v1.385l-.03.03H19.6L12.586 14H0V0h14v12.586zM2 2v10h10V2H2zm6 4h2v2H8v2H6V8H4V6h2V4h2v2z" fill-rule="evenodd"></path></svg>'}),e.bind("isOn","isEnabled").to(t,"value","isEnabled"),e.on("execute",()=>{i.execute("photoswipe",!0),i.editing.view.focus()}),e})}}class F extends CKEDITOR.Plugin{static get requires(){return[W,U]}}class j extends CKEDITOR.Command{execute(e){const i=this.editor;var t=i.model.document.selection.getSelectedElement();let n="",o="",r=(t&&(n=t.getAttribute("size"),o=t.getAttribute("color")),Object.assign({},{name:"#"+e.iconId},_.isEmpty(n)?null:{size:n},_.isEmpty(o)?null:{color:o}));i.model.change(e=>{var t=e.createElement("iconInline",r);i.model.insertContent(t),e.setSelection(t,"on")})}}class G extends CKEDITOR.Command{refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e&&e.is("element","iconInline"),this.value=!0}execute(){var e=this.editor;const t=e.model.document.selection.getSelectedElement();e.model.change(e=>{e.remove(t)})}}class q extends CKEDITOR.Plugin{static get requires(){return[CKEDITOR.Widget]}init(){this._defineSchema(),this._defineConverters(),this.editor.commands.add("insertIconInline",new j(this.editor)),this.editor.commands.add("removeIconInline",new G(this.editor)),this.editor.editing.mapper.on("viewToModelPosition",CKEDITOR.viewToModelPositionOutsideModelElement(this.editor.model,e=>e.hasClass("l-svg-icons")))}_defineSchema(){this.editor.model.schema.register("iconInline",{inheritAllFrom:"$inlineObject",allowAttributes:["name","size","color"]})}_defineConverters(){var e=this.editor.conversion;e.for("upcast").add(e=>{e.on("element:i",(e,t,i)=>{var n,o,r,a,s,{consumable:i,writer:l,safeInsert:d,convertChildren:c,updateConversionResult:u}=i,m=t["viewItem"],g={name:"i",classes:"l-svg-icons",attributes:"style"},h={name:"svg",attributes:"style"},b={name:"use",attributes:["xlink:href"]};i.test(m,g)&&1===m.childCount&&(n=m.getChild(0)).is("element","svg")&&i.test(n,h)&&(o=n.getChild(0)).is("element","use")&&i.test(o,b)&&(s=I(s=m.getStyle())||I(s["font-size"])?"":s["font-size"],r=I(r=n.getStyle())||I(r.fill)?"":r.fill,a=o.getAttribute("xlink:href"),a=Object.assign({},{name:a},_.isEmpty(s)?null:{size:s},_.isEmpty(r)?null:{color:r}),d(s=l.createElement("iconInline",a),t.modelCursor))&&(i.consume(m,g),i.consume(n,h),i.consume(o,b),c(m,s),u(s,t))})}),e.for("editingDowncast").elementToStructure({model:"iconInline",view:(e,t)=>{var t=t["writer"],i=e.getAttribute("name"),e=e.getAttribute("color");const n=document.querySelector(i);i=Object.assign({},{class:"l-svg-icons"}),e=Object.assign({},_.isEmpty(e)?null:{style:"fill:"+e},{viewBox:n.getAttribute("viewBox")},{xmlns:n.getAttribute("xmlns")}),i=t.createContainerElement("i",i),e=t.createRawElement("svg",e,function(e){e.innerHTML=n.innerHTML});return t.insert(t.createPositionAt(i,0),e),CKEDITOR.toWidget(i,t)}}).attributeToAttribute({model:{name:"iconInline",key:"size"},view:e=>""===e?null:{name:"i",key:"style",value:{"font-size":e}}}).add(e=>{e.on("attribute:color",(e,t,i)=>{var n,t=t["item"];t.is("element","iconInline")&&(n=t.getAttribute("color"),"svg"===(i=i.mapper.toViewElement(t).getChild(0)).name)&&i._setStyle("fill",n)}),e.on("insert:iconInline",(e,t,i)=>{t=t.item;this.editor.editing.view.document.fire(u.IconInlineInserted,{iconInlineElement:t,conversionApi:i})})}),e.for("dataDowncast").elementToStructure({model:"iconInline",view:(e,t)=>{var t=t["writer"],i=e.getAttribute("name"),n=e.getAttribute("size"),e=e.getAttribute("color"),n=Object.assign({},{class:"l-svg-icons"},_.isEmpty(n)?null:{style:"font-size:"+n}),e=Object.assign({},_.isEmpty(e)?null:{style:"fill:"+e}),n=t.createContainerElement("i",n),e=t.createContainerElement("svg",e),i=t.createContainerElement("use",{"xlink:href":i});return t.insert(t.createPositionAt(n,0),e),t.insert(t.createPositionAt(e,0),i),t.insert(t.createPositionAt(i,0),t.createSlot()),n}})}}class $ extends CKEDITOR.Plugin{init(){const n=this.editor,o=n.t;n.ui.componentFactory.add("iconInline",e=>{var e=CKEDITOR.createDropdown(e),t=(e.buttonView.set({withText:!1,label:o("Add icon"),icon:'<svg viewBox="0 0 306 306" id="C008-Star" xmlns="http://www.w3.org/2000/svg"><path d="M153 230.775l94.35 68.85-35.7-112.2 94.35-66.3H191.25L153 6.375l-38.25 114.75H0l94.35 66.3-35.7 112.2z"></path></svg>',tooltip:!0}),e.class="ck-icon-inline-toolbar",p()),i=new CKEDITOR.Collection;for(let e=0;e<t.length;e++)i.add({type:"button",model:new CKEDITOR.Model(t[e])});return CKEDITOR.addListToDropdown(e,i),e.on("execute",e=>{var e=e.source.class;-1!==e.indexOf(g)&&(e=e.replace(g+"-",""),n.execute("insertIconInline",{iconId:e}),n.editing.view.focus())}),e})}}class X extends CKEDITOR.Plugin{static get requires(){return[q,$]}}class Q extends CKEDITOR.Plugin{init(){const i=this.editor;i.ui.componentFactory.add("inlineImageRemove",()=>{var e=new CKEDITOR.ButtonView;return e.set({tooltip:"Photoswipe",withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 100 100"><path d="M85.355 77.157L58.198 50l27.156-27.155a5.8 5.8 0 00.001-8.2 5.8 5.8 0 00-8.199 0L50 41.802 22.843 14.645a5.802 5.802 0 00-8.199 0 5.795 5.795 0 000 8.199l27.157 27.157-27.156 27.155a5.792 5.792 0 000 8.2 5.795 5.795 0 008.199 0l27.155-27.157 27.157 27.157a5.794 5.794 0 008.199 0 5.8 5.8 0 000-8.2z" fill-rule="nonzero"/></svg>'}),e.on("execute",()=>{const t=i.model.document.selection.getSelectedElement();I(t)||t.is("element","imageInline")&&i.model.change(e=>{e.remove(t)})}),e})}}function S(e){return e.map(e=>_.isObject(e)?e.name:e)}class J extends CKEDITOR.Plugin{static get requires(){return[CKEDITOR.WidgetToolbarRepository]}isIconInlineWidget(e){return CKEDITOR.isWidget(e)&&e.is("element","i")&&e.hasClass("l-svg-icons")}afterInit(){var e=this.editor,t=e.t;e.plugins.get(CKEDITOR.WidgetToolbarRepository).register("iconInline",{ariaLabel:t("Icon toolbar"),items:S(e.config.get("iconInline.toolbar")||[]),getRelatedElement:t=>{var i=t.getFirstPosition();if(i){t=t.getSelectedElement();if(t&&this.isIconInlineWidget(t))return t;let e=i.parent;for(;e;){if(e.is("element")&&this.isIconInlineWidget(e))return e;e=e.parent}}return null}})}}class Y extends CKEDITOR.Plugin{init(){const t=this.editor,i=t.t;t.ui.componentFactory.add("removeIconInline",e=>{e=new CKEDITOR.ButtonView(e);return e.set({tooltip:i("Remove Icon"),withText:!1,icon:'<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color"><path d="M85.355 77.157L58.198 50l27.156-27.155a5.8 5.8 0 00.001-8.2 5.8 5.8 0 00-8.199 0L50 41.802 22.843 14.645a5.802 5.802 0 00-8.199 0 5.795 5.795 0 000 8.199l27.157 27.157-27.156 27.155a5.792 5.792 0 000 8.2 5.795 5.795 0 008.199 0l27.155-27.157 27.157 27.157a5.794 5.794 0 008.199 0 5.8 5.8 0 000-8.2z" fill-rule="nonzero"></path></svg>'}),e.on("execute",()=>{t.execute("removeIconInline")}),e})}}class Z extends CKEDITOR.Command{refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e&&e.is("element","iconInline"),this.value=!0}execute(t){var e=this.editor;const i=e.model.document.selection.getSelectedElement();e.model.change(e=>{e.setAttribute("size",t.size,i)})}}class ee extends CKEDITOR.Plugin{init(){var e=this.editor,e=new Z(e);this._registerSchema(),this.editor.commands.add("resizeIconInline",e)}_registerSchema(){this.editor.plugins.has("IconInlineEditing")&&this.editor.model.schema.extend("iconInline",{allowAttributes:"width"})}_registerConverters(){this.editor.conversion.for("downcast").add(e=>{e.on("attribute:width:iconInline",(e,t,i)=>{i.consumable.consume(t.item,e.name)})})}}class te extends CKEDITOR.Plugin{init(){var e=this.editor.commands.get("resizeIconInline");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const l=this.editor,d=l.editing.view;this.listenTo(d.document,u.IconInlineInserted,(e,t)=>{var{iconInlineElement:t,conversionApi:i}=t;const n=l.editing.view.domConverter,o=i.mapper.toViewElement(t);let r=l.plugins.get(CKEDITOR.WidgetResize).getResizerByViewElement(o);if(r)r.redraw();else{const a=l.editing.mapper,s=a.toModelElement(o);(r=l.plugins.get(CKEDITOR.WidgetResize).attachTo({unit:"px",modelElement:s,viewElement:o,editor:l,getHandleHost(e){return e},getResizeHost(){return n.mapViewToDom(a.toViewElement(s.parent))},isCentered:()=>!0,onCommit(e){d.change(e=>{e.removeClass(m,o)}),l.execute("resizeIconInline",{size:e})}})).on("updateSize",()=>{I(r.state.proposedWidth)||l.execute("resizeIconInline",{size:r.state.proposedWidth+"px"}),o.hasClass(m)||d.change(e=>{e.addClass(m,o)})}),r.bind("isEnabled").to(this)}})}}class ie extends CKEDITOR.Plugin{static get requires(){return[ee,te]}}class ne extends CKEDITOR.Command{refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e&&e.is("element","iconInline"),this.value=!0}execute(t){var e=this.editor;const i=e.model.document.selection.getSelectedElement();e.model.change(e=>{I(t.color)?e.removeAttribute("color",i):e.setAttribute("color",t.color,i)})}}class oe extends CKEDITOR.Plugin{init(){const n=this.editor;this.editor.commands.add("colorIconInline",new ne(this.editor)),n.commands.get("fontColor").on("execute",(e,t)=>{var i;E(t[0].value)||(i=n.model.document.selection.getSelectedElement())&&i.is("element","iconInline")&&n.execute("colorIconInline",{color:t[0].value})})}}class re extends CKEDITOR.Command{execute(t){var e=this.editor;const i=e.model.document.selection.getSelectedElement();i&&i.is("element","media")&&e.model.change(e=>{e.setAttribute("width",t.width,i)})}}class ae extends CKEDITOR.Observer{observe(e){this.listenTo(e,"load",(e,t)=>{var i=t.target;this.checkShouldIgnoreEventFromTarget(i)||"IFRAME"==i.tagName&&this._fireEvents(t)},{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("iframeLoaded",e))}stopObserving(e){this.stopListening(e)}}class se extends CKEDITOR.Plugin{init(){var e=this.editor,t=new re(e);e.editing.view.addObserver(ae),this._registerSchema(),this._registerConverters(),this.editor.commands.add("mediaEmbedResize",t)}_registerSchema(){this.editor.plugins.has("MediaEmbedEditing")&&this.editor.model.schema.extend("media",{allowAttributes:"width"})}_registerConverters(){this.editor.conversion.for("downcast").add(e=>{e.on("attribute:width:media",(e,t,i)=>{i.consumable.consume(t.item,e.name)&&(e=i.writer,i=i.mapper.toViewElement(t.item),null!==t.attributeNewValue?(e.setStyle("width",t.attributeNewValue,i),e.addClass("media_resized",i)):(e.removeStyle("width",i),e.removeClass("media_resized",i)))})})}}class le extends CKEDITOR.Plugin{init(){var e=this.editor.commands.get("mediaEmbedResize");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const a=this.editor,s=a.editing.view;this.listenTo(s.document,"iframeLoaded",(e,t)=>{if(t.target.matches("figure.ck-widget iframe")){const i=a.editing.view.domConverter;const n=i.domToView(t.target).findAncestor({classes:v});let e=a.plugins.get(CKEDITOR.WidgetResize).getResizerByViewElement(n);if(e)e.redraw();else{const o=a.editing.mapper,r=o.toModelElement(n);(e=a.plugins.get(CKEDITOR.WidgetResize).attachTo({unit:"px",modelElement:r,viewElement:n,editor:a,getHandleHost(e){return e.querySelector("iframe")},getResizeHost(){return i.mapViewToDom(o.toViewElement(r.parent))},isCentered:()=>!0,onCommit(e){s.change(e=>{e.removeClass(b,n)}),a.execute("mediaEmbedResize",{width:e})}})).on("updateSize",()=>{n.hasClass(b)||s.change(e=>{e.addClass(b,n)})}),e.bind("isEnabled").to(this)}}})}}class de extends CKEDITOR.Plugin{static get requires(){return[se,le]}}class ce extends CKEDITOR.Plugin{init(){this.editor.conversion.for("upcast").elementToElement({view:{name:"iframe"},model:(e,t)=>{e=e.getAttribute("src"),t=t.writer;return t.createElement("media",{url:e})}})}}class ue extends CKEDITOR.Plugin{init(){const t=this.editor;t.t;t.ui.componentFactory.add("htmlEditing",e=>{e=new CKEDITOR.ButtonView(e);return e.set({tooltip:"Edit HTML",withText:!1,icon:'<svg viewBox="0 0 20 20" id="A008-Code" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M14 5.846V4l6 5.94L14 16v-2.03l4-4.03zM6 14.154V16l-6-5.94L6 4v2.03l-4 4.03zM8.508 20H6.5l5.02-20h1.98z"/></g></svg>'}),e.on("execute",()=>{var e={eventName:"rexlive:openHTMLEditor",htmlContent:t.data.get()};Rexbuilder_Util_Editor.sendParentIframeMessage(e),k.toHTMLEditOpen()}),e})}}class me extends CKEDITOR.Command{attributeKey="textgradient";refresh(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e){const i=this.editor.model;const n=i.document.selection,o=e.gradient;i.change(e=>{if(n.isCollapsed)o?e.setSelectionAttribute(this.attributeKey,o):e.removeSelectionAttribute(this.attributeKey);else for(const t of i.schema.getValidRanges(n.getRanges(),this.attributeKey))o?e.setAttribute(this.attributeKey,o,t):e.removeAttribute(this.attributeKey,t)})}_getValueFromFirstAllowedNode(){var e=this.editor.model,t=e.schema,e=e.document.selection;if(e.isCollapsed)return e.hasAttribute(this.attributeKey);for(const i of e.getRanges())for(const n of i.getItems())if(t.checkAttribute(n,this.attributeKey))return n.hasAttribute(this.attributeKey);return!1}}const y="textgradient";class ge extends CKEDITOR.Plugin{init(){this._defineSchema(),this._defineConverters()}_defineSchema(){var e=this.editor.model.schema;e.extend("$text",{allowAttributes:y}),e.setAttributeProperties(y,{isFormatting:!0,copyOnEnter:!0})}_defineConverters(){var e=this.editor,t=e.conversion;t.for("upcast").elementToAttribute({view:{name:"span",attributes:["data-gradient"],classes:["text-gradient"],styles:{background:/.+/}},model:{key:y,value:e=>e.getAttribute("data-gradient")}}),t.for("downcast").attributeToElement({model:y,view:(e,{writer:t})=>{var{gradientType:i,direction:n,handlers:o,inputSize:r}=Rexbuilder_Gradient_Utils.getGradientValues(e),i=Rexbuilder_Gradient_Utils.getMarkup(i,n,o,r);return t.createAttributeElement("span",{"data-gradient":e,class:["text-gradient"],style:i})}}),e.commands.add(y,new me(e))}}class he extends CKEDITOR.Plugin{init(){const o=this.editor;o.t;o.ui.componentFactory.add("textGradient",e=>{var t=o.commands.get(y),e=new CKEDITOR.ButtonView(e);return e.set({tooltip:"TextGradient",withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="enable-background:new 0 0 384 384" viewBox="0 0 384 384"><path d="M213.333 170.667H256v42.667h-42.667zM256 128h42.667v42.667H256z"/><path d="M341.333 0H42.667C19.2 0 0 19.2 0 42.667v298.667C0 364.8 19.2 384 42.667 384h298.667C364.8 384 384 364.8 384 341.333V42.667C384 19.2 364.8 0 341.333 0zM128 320H85.333v-42.667H128V320zm85.333 0h-42.667v-42.667h42.667V320zm85.334 0H256v-42.667h42.667V320zm42.666-149.333h-42.667v42.667h42.667V256h-42.667v-42.667H256V256h-42.667v-42.667h-42.667V256H128v-42.667H85.333V256H42.667v-42.667h42.667v-42.667H42.667v-128h298.667v128.001z"/><path d="M170.667 128h42.667v42.667h-42.667zM128 170.667h42.667v42.667H128zM85.333 128H128v42.667H85.333z"/></svg>'}),e.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(e,"execute",()=>{var e=k.editorInstance.sourceElement,t=w(e,"."+r).pop(),e=w(e,"."+a).pop(),t=t.getAttribute("data-rexbuilder-block-id"),i=e.getAttribute("data-rexlive-section-id"),e=void 0!==e.getAttribute("data-rexlive-model-number")?e.getAttribute("data-rexlive-model-number"):"",n=o.model.document.selection.getAttribute("textgradient"),n=E(n)?"null":n;Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editTextGradient",activeBlockData:{blockData:{gradient:n,target:{sectionID:i,modelNumber:e,rexID:t}}}}),k.toTextGradientOpen()}),e})}}class be extends CKEDITOR.Plugin{static get requires(){return[ge,he]}}class ve extends CKEDITOR.Command{attributekey="removeRexbutton";refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e&&e.is("element","rexbutton"),this.value=!0}execute(){var e=this.editor;const t=e.model.document.selection.getSelectedElement();e.model.change(e=>{e.remove(t)})}}class pe extends CKEDITOR.Command{attributekey="setAttributeRexbutton";refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e&&e.is("element","rexbutton"),this.value=!0}execute(o){const r=this.editor;const a=r.model.document.selection.getSelectedElement();r.model.change(e=>{let t={};for(const n of a.getAttributes())t[n[0]]=n[1];t={...t,...o},t=Object.fromEntries(Object.entries(t).filter(([,e])=>!I(e)));var i=e.createElement("rexbutton",t);r.model.insertContent(i),e.setSelection(i,"on")})}}class Ee extends CKEDITOR.Plugin{BUTTON_CONTAINER_CLASSNAME="rex-button-container";SEPARATE_CLASSNAME="rex-separate-button";POPUP_VIDEO_CLASSNAME="popup-video-button";static get requires(){return[CKEDITOR.Widget]}init(){this._defineSchema(),this._defineConverters(),this._defineCommands(),this.editor.editing.mapper.on("viewToModelPosition",CKEDITOR.viewToModelPositionOutsideModelElement(this.editor.model,e=>e.hasClass("rex-button-wrapper")))}_defineSchema(){this.editor.model.schema.register("rexbutton",{isInline:!0,isObject:!0,allowWhere:"$inlineObject",allowAttributes:["id","target","number","separate","label","color","size","hoverColor","backgroundColor","hoverBackgroundColor","borderColor","hoverBorderColor","borderWidth","borderRadius","width","height","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","name","href","popupVideo","class"]})}_defineConverters(){var e=this.editor;e.conversion.for("upcast").elementToElement({model:(e,{writer:t})=>{var i=e.getAttribute("data-rex-button-id"),n=parseInt(e.getAttribute("data-rex-button-number")),o=e.getChild(0),r=o.getAttribute("data-link-type"),a=o.getAttribute("data-link-target"),s=e.hasClass(this.SEPARATE_CLASSNAME),e=e.getChild(1),l=e.getClassNames(),i={id:i,number:n,target:r,href:a,separate:s,label:e.getChild(0).getChild(0).getChild(0).data,popupVideo:e.hasClass(this.POPUP_VIDEO_CLASSNAME)},n=o.getAttribute("data-button-name"),r=(I(n)||(i.name=n),o.getAttribute("data-text-size")),a=(I(r)||(i.size=r),o.getAttribute("data-text-color")),s=(I(a)||(i.color=a),o.getAttribute("data-text-color-hover")),e=(I(s)||(i.hoverColor=s),o.getAttribute("data-background-color")),n=(I(e)||(i.backgroundColor=e),o.getAttribute("data-background-color-hover")),r=(I(n)||(i.hoverBackgroundColor=n),o.getAttribute("data-border-color")),a=(I(r)||(i.borderColor=r),o.getAttribute("data-border-color-hover")),s=(I(a)||(i.hoverBorderColor=a),o.getAttribute("data-border-width")),e=(I(s)||(i.borderWidth=s),o.getAttribute("data-border-radius")),n=(I(e)||(i.borderRadius=e),o.getAttribute("data-button-width")),r=(I(n)||(i.width=n),o.getAttribute("data-button-height")),a=(I(r)||(i.height=r),o.getAttribute("data-margin-top")),s=(I(a)||isNaN(parseInt(a))||(i.marginTop=a),o.getAttribute("data-margin-right")),e=(I(s)||isNaN(parseInt(s))||(i.marginRight=s),o.getAttribute("data-margin-bottom")),n=(I(e)||isNaN(parseInt(e))||(i.marginBottom=e),o.getAttribute("data-margin-left")),r=(I(n)||isNaN(parseInt(n))||(i.marginLeft=n),o.getAttribute("data-padding-top")),a=(I(r)||isNaN(parseInt(r))||(i.paddingTop=r),o.getAttribute("data-padding-right")),s=(I(a)||isNaN(parseInt(a))||(i.paddingRight=a),o.getAttribute("data-padding-bottom")),e=(I(s)||isNaN(parseInt(s))||(i.paddingBottom=s),o.getAttribute("data-padding-left")),d=(I(e)||isNaN(parseInt(e))||(i.paddingLeft=e),[]);for(const c of l)this.BUTTON_CONTAINER_CLASSNAME!==c&&this.SEPARATE_CLASSNAME!==c&&this.POPUP_VIDEO_CLASSNAME!==c&&d.push(c);return 0!==d.length&&(i.class=d.join(" ")),t.createElement("rexbutton",i)},view:{name:"span",classes:["rex-button-wrapper"]}}),e.conversion.for("editingDowncast").elementToStructure({model:"rexbutton",view:(e,{writer:t})=>{e=this._createRexbuttonView(e,t);return CKEDITOR.toWidget(e,t)}}),e.conversion.for("dataDowncast").elementToStructure({model:"rexbutton",view:(e,{writer:t})=>this._createRexbuttonView(e,t,"data")})}_defineCommands(){var e=this.editor,t=new ve(e),t=(e.commands.add(t.attributekey,t),new pe(e));e.commands.add(t.attributekey,t)}_createRexbuttonView(e,t,i="editing"){var n=e.getAttribute("id"),o=e.getAttribute("number"),r=e.getAttribute("target"),a=e.getAttribute("href"),s=e.getAttribute("separate"),l=e.getAttribute("label"),d=e.getAttribute("popupVideo"),c=e.getAttribute("class"),u=["rex-button-wrapper"],s=(s&&u.push(this.SEPARATE_CLASSNAME),t.createContainerElement("span",{class:u.join(" "),"data-rex-button-id":n,"data-rex-button-number":o.toString()})),u={class:["rex-button-data"].join(" "),style:"display:none","data-link-target":a,"data-link-type":r},n=e.getAttribute("name"),o=(I(n)||(u["data-button-name"]=n),e.getAttribute("size")),n=(I(o)||(u["data-text-size"]=o),e.getAttribute("color")),o=(I(n)||(u["data-text-color"]=n),e.getAttribute("hoverColor")),n=(I(o)||(u["data-text-color-hover"]=o),e.getAttribute("backgroundColor")),o=(I(n)||(u["data-background-color"]=n),e.getAttribute("hoverBackgroundColor")),n=(I(o)||(u["data-background-color-hover"]=o),e.getAttribute("borderColor")),o=(I(n)||(u["data-border-color"]=n),e.getAttribute("hoverBorderColor")),n=(I(o)||(u["data-border-color-hover"]=o),e.getAttribute("borderWidth")),o=(I(n)||(u["data-border-width"]=n),e.getAttribute("borderRadius")),n=(I(o)||(u["data-border-radius"]=o),e.getAttribute("width")),o=(I(n)||(u["data-button-width"]=n),e.getAttribute("height")),n=(I(o)||(u["data-button-height"]=o),e.getAttribute("marginTop")),o=(I(n)||(u["data-margin-top"]=n),e.getAttribute("marginRight")),n=(I(o)||(u["data-margin-right"]=o),e.getAttribute("marginBottom")),o=(I(n)||(u["data-margin-bottom"]=n),e.getAttribute("marginLeft")),n=(I(o)||(u["data-margin-left"]=o),e.getAttribute("paddingTop")),o=(I(n)||(u["data-padding-top"]=n),e.getAttribute("paddingRight")),n=(I(o)||(u["data-padding-right"]=o),e.getAttribute("paddingBottom")),o=(I(n)||(u["data-padding-bottom"]=n),e.getAttribute("paddingLeft")),n=(I(o)||(u["data-padding-left"]=o),t.createEmptyElement("span",u)),e=[this.BUTTON_CONTAINER_CLASSNAME],o=(c&&e.push(...c.split(" ")),d&&e.push(this.POPUP_VIDEO_CLASSNAME),{href:a,target:r,class:e.join(" ")}),u=("editing"===i&&(o.style="pointer-events:none"),t.createContainerElement("a",o)),c=t.createContainerElement("span",{class:"rex-button-background"}),d=t.createContainerElement("span",{class:"rex-button-text"}),a=t.createText(l);return t.insert(t.createPositionAt(s,0),n),t.insert(t.createPositionAt(s,"end"),u),t.insert(t.createPositionAt(u,0),c),t.insert(t.createPositionAt(c,0),d),t.insert(t.createPositionAt(d,0),a),s}}class Ie extends CKEDITOR.Plugin{static get requires(){return[CKEDITOR.WidgetToolbarRepository]}isRexbuttonWidget(e){return CKEDITOR.isWidget(e)&&e.is("element","span")&&e.hasClass("rex-button-wrapper")}init(){const i=this.editor,n=i.t;i.ui.componentFactory.add("editRexbutton",e=>{var t=i.commands.get("setAttributeRexbutton"),e=new CKEDITOR.ButtonView(e);return e.set({tooltip:n("Rexbutton"),withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 20 20"><path d="M19.937 8.89c-.031-.282-.359-.493-.642-.493-.917 0-1.73-.538-2.071-1.37a2.227 2.227 0 01.56-2.473.555.555 0 00.06-.754 9.895 9.895 0 00-1.584-1.6.557.557 0 00-.76.062c-.596.66-1.667.905-2.495.56A2.221 2.221 0 0111.655.65a.555.555 0 00-.491-.584A9.984 9.984 0 008.914.06a.556.556 0 00-.495.572 2.225 2.225 0 01-1.37 2.133c-.817.334-1.88.091-2.475-.563a.558.558 0 00-.755-.064 9.933 9.933 0 00-1.617 1.6.556.556 0 00.06.76c.695.63.92 1.633.558 2.495-.345.822-1.198 1.352-2.175 1.352a.544.544 0 00-.578.49 10.017 10.017 0 00-.004 2.275c.031.282.369.491.655.491.871-.022 1.707.517 2.058 1.37.35.853.125 1.847-.56 2.474a.556.556 0 00-.06.753c.465.592.998 1.13 1.582 1.6.23.185.563.16.761-.06.598-.661 1.67-.906 2.493-.56a2.218 2.218 0 011.353 2.17.555.555 0 00.49.584 9.94 9.94 0 002.25.006.557.557 0 00.496-.572 2.223 2.223 0 011.368-2.133c.823-.336 1.882-.09 2.477.563a.559.559 0 00.754.064 9.956 9.956 0 001.618-1.6.555.555 0 00-.06-.76 2.216 2.216 0 01-.56-2.495 2.239 2.239 0 012.046-1.355l.124.003a.557.557 0 00.585-.49c.088-.752.09-1.517.004-2.274zm-9.921 4.467A3.34 3.34 0 016.68 10.02a3.34 3.34 0 013.336-3.335 3.34 3.34 0 013.335 3.335 3.34 3.34 0 01-3.335 3.336z" fill-rule="evenodd"></path></svg>'}),e.bind("isEnabled").to(t,"isEnabled"),e.on("execute",()=>{var e=i.model.document.selection.getSelectedElement();e&&e.is("element","rexbutton")&&(e=i.editing.mapper.toViewElement(e),e=i.editing.view.domConverter.viewToDom(e),e=o(e),e={eventName:"rexlive:openRexButtonEditor",buttonData:Rexbuilder_Rexbutton.generateButtonData(e)},Rexbuilder_Util_Editor.sendParentIframeMessage(e),k.toRexbuttonEditorOpen(),i.editing.view.focus())}),e}),i.ui.componentFactory.add("removeRexbutton",e=>{var t=i.commands.get("removeRexbutton"),e=new CKEDITOR.ButtonView(e);return e.set({tooltip:n("Rexbutton"),withText:!1,icon:'<svg xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color ck-button__icon" viewBox="0 0 100 100"><path d="M85.355 77.157L58.198 50l27.156-27.155a5.8 5.8 0 00.001-8.2 5.8 5.8 0 00-8.199 0L50 41.802 22.843 14.645a5.802 5.802 0 00-8.199 0 5.795 5.795 0 000 8.199l27.157 27.157-27.156 27.155a5.792 5.792 0 000 8.2 5.795 5.795 0 008.199 0l27.155-27.157 27.157 27.157a5.794 5.794 0 008.199 0 5.8 5.8 0 000-8.2z" fill-rule="nonzero"></path></svg>'}),e.bind("isEnabled").to(t,"isEnabled"),e.on("execute",()=>{i.execute("removeRexbutton"),i.editing.view.focus()}),e})}afterInit(){var e=this.editor,t=e.t;e.plugins.get(CKEDITOR.WidgetToolbarRepository).register("rexbutton",{ariaLabel:t("Rexbutton toolbar"),items:S(e.config.get("rexbutton.toolbar")||[]),getRelatedElement:t=>{var i=t.getFirstPosition();if(i){t=t.getSelectedElement();if(t&&this.isRexbuttonWidget(t))return t;let e=i.parent;for(;e;){if(e.is("element")&&this.isRexbuttonWidget(e))return e;e=e.parent}}return null}})}}class we extends CKEDITOR.Plugin{static get requires(){return[Ee,Ie]}}class xe extends CKEDITOR.Command{refresh(){var e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=Ce(i,t,e)}execute(){const t=this.editor.model;t.change(e=>{e=e.createElement("hr");t.insertObject(e,null,null,{setSelection:"after"})})}}function Ce(e,t,i){e=function(e,t){e=CKEDITOR.findOptimalInsertionRange(e,t),t=e.start.parent;return!t.isEmpty||t.is("element","$root")?t:t.parent}(e,i);return t.checkChild(e,"hr")}class Te extends CKEDITOR.Plugin{init(){var e=this.editor,t=e.model.schema;const o=e.t;var i=e.conversion;t.register("hr",{inheritAllFrom:"$blockObject",allowAttributes:["style"]}),i.for("dataDowncast").elementToElement({model:"hr",view:(e,{writer:t})=>{var e=e.getAttribute("style");return I(e)?t.createEmptyElement("hr"):(e=Object.entries(e).map(([e,t])=>e+":"+t).join(";"),t.createEmptyElement("hr",{style:e}))}}),i.for("editingDowncast").elementToStructure({model:"hr",view:(e,{writer:t})=>{var e=e.getAttribute("style");let i;i=I(e)?t.createEmptyElement("hr"):(e=Object.entries(e).map(([e,t])=>e+":"+t).join(";"),t.createEmptyElement("hr",{style:e}));var e=o("Horizontal line"),n=t.createContainerElement("div",null,i);return t.addClass("ck-horizontal-line",n),t.setCustomProperty("hr",!0,n),Ae(n,t,e)}}),i.for("upcast").elementToElement({view:"hr",model:(e,{writer:t})=>{e=e.getStyle();return I(e)?t.createElement("hr"):t.createElement("hr",{style:e})}}),e.commands.add("hr",new xe(e))}}function Ae(e,t,i){return t.setCustomProperty("hr",!0,e),CKEDITOR.toWidget(e,t,{label:i})}class fe extends CKEDITOR.Plugin{init(){const i=this.editor,n=i.t;i.ui.componentFactory.add("hr",e=>{var t=i.commands.get("hr"),e=new CKEDITOR.ButtonView(e);return e.set({label:n("Horizontal line"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',tooltip:!0}),e.bind("isEnabled").to(t,"isEnabled"),this.listenTo(e,"execute",()=>{i.execute("hr"),i.editing.view.focus()}),e})}}class Re extends CKEDITOR.Plugin{static get requires(){return[Te,fe,CKEDITOR.Widget]}}class _e extends CKEDITOR.Plugin{init(){var e=this.editor;e.t;e.ui.componentFactory.add("closeEditor",e=>{e=new CKEDITOR.ButtonView(e);return e.set({tooltip:"Close editor",withText:!1,icon:'<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="ck ck-icon ck-reset_all-excluded ck-icon_inherit-color"><path d="M85.355 77.157L58.198 50l27.156-27.155a5.8 5.8 0 00.001-8.2 5.8 5.8 0 00-8.199 0L50 41.802 22.843 14.645a5.802 5.802 0 00-8.199 0 5.795 5.795 0 000 8.199l27.157 27.157-27.156 27.155a5.792 5.792 0 000 8.2 5.795 5.795 0 008.199 0l27.155-27.157 27.157 27.157a5.794 5.794 0 008.199 0 5.8 5.8 0 000-8.2z" fill-rule="nonzero"></path></svg>'}),e.on("execute",()=>{var e;k.isEditorActive()&&(P(e=k.getEditorInstanceSourceElement()),M(e),z(e))}),e})}}function Oe(e){CKEDITOR.InlineEditor.create(e,{plugins:[CKEDITOR.Essentials,CKEDITOR.Paragraph,CKEDITOR.Alignment,CKEDITOR.Bold,CKEDITOR.Italic,CKEDITOR.Underline,CKEDITOR.Heading,CKEDITOR.FontColor,CKEDITOR.GeneralHtmlSupport,CKEDITOR.Link,CKEDITOR.Image,CKEDITOR.ImageResize,CKEDITOR.ImageStyle,CKEDITOR.ImageToolbar,CKEDITOR.Undo,CKEDITOR.MediaEmbed,V,N,H,F,Q,X,J,Y,ie,oe,de,ce,ue,be,we,Re,_e],toolbar:["heading","|","alignment","fontColor","textGradient","bold","italic","underline","|","link","wpImageUpload","iconInline","mediaEmbed","|","htmlEditing","|","undo","redo","|","hr","|","closeEditor"],heading:{options:[{model:"paragraph",title:"P",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"H1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"H2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"H3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"H4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"H5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"H6",class:"ck-heading_heading6"}]},fontColor:{colorPicker:{format:"hex"}},htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},link:{decorators:{openInNewTab:{mode:"manual",label:"Open in new tab",attributes:{target:"_blank",rel:"noopener norefferer"}}}},image:{toolbar:["imageStyle:block","imageStyle:side","|","imageTextAlternative","|","wpImageEdit","photoswipe","|","inlineImageRemove"]},iconInline:{toolbar:["fontColor","iconInline","removeIconInline"]},rexbutton:{toolbar:["editRexbutton","removeRexbutton"]},mediaEmbed:{previewsInData:!0},placeholder:"Type your text here"}).then(i=>{console.log("Editor was initialized",i),"undefined"!=typeof CKEditorInspector&&CKEditorInspector.attach(i);var e=w(i.sourceElement,"."+a).pop();k.setStateMachineContext(i,e.classList.contains(n)),k.toActiveState(),i.focus(),I(e=i.sourceElement)||(w(e,"."+r).pop().classList.add(s),w(e,"."+a).pop().classList.add(l)),i.model.change(e=>{e.setSelection(e.createPositionAt(i.model.document.getRoot(),"end"))}),k.editorInstance.ui.focusTracker.on("change:isFocused",function(e,t,i,n){i||k.isEditorActive()&&(P(i=k.getEditorInstanceSourceElement()),M(i),z(i))}),k.editorInstance.model.document.on("change:data",()=>{k.isEditorActive()&&K()}),k.editorInstance.editing.view.change(e=>{var t=i.editing.view.document.getRoot();e.removeClass("ck-editor__editable_inline",t)})}).catch(e=>{console.error(e.stack)})}function K(){var e={eventName:"rexlive:edited",modelEdited:k.isSectionModel};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function M(e){var t=w(e,"."+i)[0],t=o(t).data("plugin_perfectGridGalleryEditor");I(t)||(Rexbuilder_Block_Editor.updateTextTool(e),t.properties.gridstackInstance.enableMove(!0),Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}function P(e){I(e)||(w(e,"."+r).pop().classList.remove(s),w(e,"."+a).pop().classList.remove(l))}function z(e){const t=k.editorInstance.data.get();k.editorInstance.destroy().then(()=>{k.clearStateMachineContext(),e.innerHTML=t,k.toDeactiveState()})}return{init:function(){document.addEventListener("rexpansive:perfect-grid-gallery:block:dbclick",function(e){k.isEditorDeactive()&&(I(e=e.detail.block)?console.warn("[CKEditor_Handler/initListeners]: block element  is nil"):I(e=e.querySelector("."+t))?console.warn("[CKEditor_Handler/initListeners]: textWrap element is nil"):Oe(e))}),document.addEventListener("keydown",function(e){"Escape"===e.key&&k.isEditorActive()&&!I(k.editorInstance)&&(P(e=k.getEditorInstanceSourceElement()),M(e),z(e))})},load:function(){},handleEvent:function(e){switch(e.name){case"rexlive:ckeditor:inlineImageEdit":o=e.data,k.isEditorDeactive()||(k.editorInstance.focus(),k.editorInstance.model.change(e=>{var t=o.displayData.classes,t=(t.push(o.imgData.align),{src:o.imgData.urlImage,alt:o.displayData.alt,width:o.imgData.width,height:o.imgData.height,title:o.displayData.title,imageId:o.imgData.idImage.toString(),htmlImgAttributes:{classes:t}});k.editorInstance.execute("insertImage",{source:[t]}),k.toWpImageUploadClose()}));break;case"rexlive:ckeditor:inlineImageClose":k.toWpImageUploadClose();break;case"rexlive:ckeditor:saveHTMLContent":n=e.data,k.isEditorDeactive()||(k.editorInstance.data.set(n.customHTML,{batchType:{isUndoable:!0}}),K());break;case"rexlive:ckeditor:setTextGradient":i=e.data,k.isEditorDeactive()||k.editorInstance.model.change(()=>{k.editorInstance.execute("textgradient",{gradient:i.value})});break;case"rexlive:ckeditor:setAttributesRexbutton":t=e.data,k.isEditorDeactive()||k.editorInstance.model.change(()=>{k.editorInstance.execute("setAttributeRexbutton",t)});break;case"rexlive:ckeditor:closeModal":!function(e){switch(e){case"rex-text-gradient-editor":case"rex-html-text-editor":case"rex-button-model-choose":case"rex-button-editor":return 1;default:return}}(e.data.modal_id)||(k.editorInstance.focus(),k.toActiveState())}var t,i,n,o},getActiveEditorContent:function(){return k.isEditorDeactive()?"":k.editorInstance.data.get()}}}(jQuery);
var Rexbuilder_Section=function(E){"use strict";var d=!1;function t(t){var e=t.children(".section-data"),i=void 0!==t.attr("data-rex-collapse-grid")&&"true"==t.attr("data-rex-collapse-grid").toString(),o=Rexbuilder_Util.getGalleryInstance(t),r={layout:o.settings.galleryLayout,fullHeight:o.settings.fullHeight,singleHeight:o.properties.singleHeight},l={gridInstance:o,gridLayout:r,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:i};if(i){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0;for(var n,a,d,s=Rexbuilder_Util.getLayoutLiveSectionTargets(t),r=Rexbuilder_Util.getGridLayoutLive(t),u=("mobile"!==Rexbuilder_Util.activeLayout&&!Rexbuilder_Util.isMobile()||Rexbuilder_Util.applyDefaultBlocksDimentions(t,s,r),o.properties.gridstackInstance),i="true"==r.fullHeight.toString(),c="masonry"==r.layout?5:o.$element.outerWidth()/12,_={layout:r.layout,fullHeight:i,singleHeight:c},x=(o.element.setAttribute("data-layout",_.layout),o.element.setAttribute("data-full-height",_.fullHeight),e.attr("data-layout",_.layout),o.updateGridLayoutCollapse(_),o.batchGridstack(),Rexbuilder_Section_Editor.updateSectionLayoutTool(t),t[0]),m=1;m<s.length;m++)a=(n=x.querySelector('div[data-rexbuilder-block-id="'+s[m].name+'"]')).querySelector(".rexbuilder-block-data"),d={x:(d=s[m].props).gs_x,y:d.gs_y,w:d.gs_width,h:d.gs_height,startH:d.gs_start_h,gridstackInstance:u},Rexbuilder_Util.updateElementDimensions(n,a,d),o.updateSizeViewerText(n,d.w,d.h);o.commitGridstack(),o.removeCollapseElementsProperties(),"masonry"==_.layout?setTimeout(function(){o.updateBlocksHeight(),setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};o._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,l,t,o,_)},300,l,t,o,_):i?setTimeout(function(){o.properties.gridBlocksHeight=o._calculateGridHeight(),_.singleHeight=Rexbuilder_Util.globalViewport.height/o.properties.gridBlocksHeight,o.updateGridstackStyles(_.singleHeight),setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),o._fixImagesDimension(),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},100,l,t,o,_)},300,l,t,o,_):setTimeout(function(){var e={gridInstance:o,gridLayout:_,blockDisposition:o.createActionDataMoveBlocksGrid(),collapse:!1};o._fixImagesDimension(),Rexbuilder_Util_Editor.pushAction(t,"collapseSection",e,l),Rexbuilder_Util_Editor.updatingCollapsedGrid=!1},400,l,t,o,_)}else{t.removeClass("rex-block-grid");r=t.children(".section-data").attr("data-custom_classes");t.children(".section-data").attr("data-custom_classes",r.replace(/\s*rex-block-grid/,"")),o.collapseElementsProperties(),o.collapseElements(l),Rexbuilder_Section_Editor.updateSectionLayoutTool(t)}Rexbuilder_Util.editedDataInfo.setSectionData(t.attr("data-rexlive-section-id"),"collapse_grid"),Rexbuilder_Util.editedDataInfo.setSectionData(t.attr("data-rexlive-section-id"),"layout"),c={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")},Rexbuilder_Util_Editor.sendParentIframeMessage(c),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t)}function s(e){var t,e=E(e.currentTarget).parents(".rexpansive_section"),i=null,o=-1,r=-1,l=e.attr("data-rexlive-section-id"),n=null,a=("default"==Rexbuilder_Util.activeLayout&&(n=Rexbuilder_Util.getDefaultLayoutState(),i=Rexbuilder_Util.getPageCustomizationsDom(),e.hasClass("rex-model-section"))&&(o=parseInt(e.attr("data-rexlive-model-number")),r=parseInt(e.attr("data-rexlive-model-id"))),"undefined"!=typeof Rexbuilder_Rexwpcf7_Editor&&e.find(".rex-element-wrapper").has(".wpcf7-form").each(function(e,t){var t=E(t);0!==t.find(".wpcf7-form").length&&(t=t.attr("data-rex-element-id"),Rexbuilder_Rexwpcf7_Editor.removeFormInPage(t))}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),{show:!0,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=n?jQuery.extend(!0,[],n):null});if(Rexbuilder_Dom_Util.updateSectionVisibility(e,!1),null!=i){for(Rexbuilder_Dom_Util.fixModelNumbers(),t=0;t<i.length;t++){for(s=0;s<i[t].sections.length;s++)if(i[t].sections[s].section_is_model){if(i[t].sections[s].section_model_id==r&&i[t].sections[s].section_model_number==o){i[t].sections.splice(s,1);break}}else if(l==i[t].sections[s].section_rex_id){i[t].sections.splice(s,1);break}if(-1!=r)for(var d=1,s=0;s<i[t].sections.length;s++)i[t].sections[s].section_model_id==r&&(i[t].sections[s].section_model_number=d,d+=1)}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(i),s=0;s<n.length;s++)if(n[s].section_is_model){if(n[s].section_model_id==r&&n[s].section_model_number==o){n.splice(s,1);break}}else if(l==n[s].section_rex_id){n.splice(s,1);break}if(-1!=r){d=1;for(s=0;s<n.length;s++)n[s].section_model_id==r&&(n[s].section_model_number=d,d+=1)}Rexbuilder_Util.updateDefaultLayoutState({pageData:n})}0===Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)").length&&Rexbuilder_Util_Editor.activeAddSection();var u={show:!1,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=n?jQuery.extend(!0,[],n):null};Rexbuilder_Util_Editor.pushAction(e,"updateSectionVisibility",u,a);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})}function u(e){Rexbuilder_Util_Editor.sectionCopying=!0;var i,o=E(e.currentTarget).parents(".rexpansive_section"),e=o.clone(!1),t=null,r=("default"==Rexbuilder_Util.activeLayout&&(t=Rexbuilder_Util.getPageCustomizationsDom()),o.attr("data-rexlive-section-id")),l=-1,n=-1,a=(o.hasClass("rex-model-section")&&(l=o.attr("data-rexlive-model-id"),n=o.attr("data-rexlive-model-number")),-1);Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){t=E(t);return t.attr("data-rexlive-section-id")==r&&(!o.hasClass("rex-model-section")||t.attr("data-rexlive-model-id")==l&&t.attr("data-rexlive-model-number")==n)?(a=e+1,!1):void 0}),o.hasClass("rex-model-section")&&(Rexbuilder_Util_Editor.insertingModel=!0,i=e.attr("data-rexlive-model-id"),c=1,Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){E(t).attr("data-rexlive-model-id")==i&&(c+=1)}),e.attr("data-rexlive-model-number",c),d=e.find(".update-model-button"),Rexbuilder_Dom_Util.updateLockEditModel(d,!0)),Rexbuilder_Live_Utilities.removeColorPicker(e),Rexbuilder_Section.prepareSectionCopied(e),e.insertAfter(o),Rexbuilder_Section_Editor.listenNewRowDataChange(e.children(".section-data")[0]);e.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),e.find(".rexwpcf7-column-tools").remove(),e.find(".rex-element-wrapper").each(function(e,t){t=t.getAttribute("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.addMissingTools(t)}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();var d={show:!1,layoutsOrder:null!=t?jQuery.extend(!0,[],t):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(e,!0),null!=t){var s,u={section_rex_id:e.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0};for(e.hasClass("rex-model-section")&&(u.section_is_model=!0,u.section_model_id=e.attr("data-rexlive-model-id")),s=0;s<t.length;s++){if(u.section_is_model){for(var c=1,_=0;_<t[s].sections.length;_++)t[s].sections[_].section_model_id==u.section_model_id&&(c+=1);u.section_model_number=c}-1!=a?t[s].sections.splice(a,0,u):t[s].sections.push(u)}Rexbuilder_Util.updatePageCustomizationsDomOrder(t)}var x={show:!0,layoutsOrder:null!=t?jQuery.extend(!0,[],t):null};Rexbuilder_Util_Editor.pushAction(e,"updateSectionVisibility",x,d),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1;Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rexbuilder_Util.editedDataInfo.addSectionData(e.attr("data-rexlive-section-id")),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e,a)}function c(e){e=E(e.target).parents(".rexpansive_section");t(e)}function _(e){e=e.settings.data_to_send,e=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t(e)}function x(e){var t,i=e.settings.galleryEditorInstance,o=e.settings.reverseData,e=e.settings.$section;void 0!==o.collapse&&(t=i.createActionDataMoveBlocksGrid(),i={gridInstance:i,gridLayout:{layout:"masonry",fullHeight:!1,singleHeight:i.settings.cellHeightMasonry},blockDisposition:t,collapse:!0},Rexbuilder_Util_Editor.pushAction(e,"collapseSection",i,o))}function m(e){var t=Rexbuilder_Util.createSectionID(),i=E(this),o=i.attr("data-new-row-position"),r=null,l=("default"==Rexbuilder_Util.activeLayout&&(r=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section",{rexID:t,dimension:_plugin_frontend_settings.defaults.section.dimension,dimensionClass:_plugin_frontend_settings.defaults.section.dimensionClass,sectionWidth:_plugin_frontend_settings.defaults.section.sectionWidth,fullHeight:_plugin_frontend_settings.defaults.section.fullHeight,blockDistance:_plugin_frontend_settings.defaults.section.blockDistance,layout:_plugin_frontend_settings.defaults.section.layout,rowSeparatorTop:_plugin_frontend_settings.defaults.section.rowSeparatorTop,rowSeparatorBottom:_plugin_frontend_settings.defaults.section.rowSeparatorBottom,rowSeparatorRight:_plugin_frontend_settings.defaults.section.rowSeparatorRight,rowSeparatorLeft:_plugin_frontend_settings.defaults.section.rowSeparatorLeft}),n=E(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-section",l)),a=(n.children(".section-data").after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",l)),-1);switch(o){case"bottom":var d=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":d=i.parents(".rexpansive_section")}0!=d.length?(Rexbuilder_Util.$rexContainer.children("section:not(.removing_section)").each(function(e,t){E(t).is(d)&&(a=e+1)}),n.insertAfter(d)):n.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,n.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),n.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();l={show:!1,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(n,!0),null!=r){for(var s={section_rex_id:n.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0},u=0;u<r.length;u++)-1!==a?r[u].sections.splice(a,0,s):r[u].sections.push(s);Rexbuilder_Util.updatePageCustomizationsDomOrder(r)}o={show:!0,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};Rexbuilder_Util_Editor.pushAction(n,"updateSectionVisibility",o,l);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rexbuilder_Util.editedDataInfo.addSectionData(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}function b(e){var t=Rexbuilder_Util.createSectionID(),i=(e=e.settings.data_to_send).position,o=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),r=null,l=("default"==Rexbuilder_Util.activeLayout&&(r=Rexbuilder_Util.getPageCustomizationsDom()),tmpl.arg="section",{rexID:t,dimension:_plugin_frontend_settings.defaults.section.dimension,dimensionClass:_plugin_frontend_settings.defaults.section.dimensionClass,sectionWidth:_plugin_frontend_settings.defaults.section.sectionWidth,fullHeight:_plugin_frontend_settings.defaults.section.fullHeight,blockDistance:_plugin_frontend_settings.defaults.section.blockDistance,layout:_plugin_frontend_settings.defaults.section.layout,rowSeparatorTop:_plugin_frontend_settings.defaults.section.rowSeparatorTop,rowSeparatorBottom:_plugin_frontend_settings.defaults.section.rowSeparatorBottom,rowSeparatorRight:_plugin_frontend_settings.defaults.section.rowSeparatorRight,rowSeparatorLeft:_plugin_frontend_settings.defaults.section.rowSeparatorLeft}),n=Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-section",l),a=n.children(".section-data");switch(a.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",l)),i){case"bottom":var d=Rexbuilder_Util.$rexContainer.children("section:last");break;case"after":d=o}0!=d.length?n.insertAfter(d):n.appendTo(Rexbuilder_Util.$rexContainer),Rexbuilder_Section_Editor.listenNewRowDataChange(a[0]),Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,n.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),n.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Live_Utilities.launchTooltips();l={show:!1,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(n,!0),null!=r){for(var s={section_rex_id:n.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!0},u=0;u<r.length;u++)r[u].sections.push(s);Rexbuilder_Util.updatePageCustomizationsDomOrder(r)}i={show:!0,layoutsOrder:null!=r?jQuery.extend(!0,[],r):null},Rexbuilder_Util_Editor.pushAction(n,"updateSectionVisibility",i,l),e={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Editor.sendParentIframeMessage(e),Rexbuilder_Util.editedDataInfo.addSectionData(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(n)}function p(e){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var t,e=(b=e.settings.data_to_send).model,e=E.parseHTML(e),i=b.sectionTarget.modelNumber,o=-1,r=b.sectionTarget.sectionID,l=null,n=null,a=("default"==Rexbuilder_Util.activeLayout&&(l=Rexbuilder_Util.getDefaultLayoutState(),n=Rexbuilder_Util.getPageCustomizationsDom()),""!=i?(t=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"][data-rexlive-model-number="'+i+'"]'),o=parseInt(t.attr("data-rexlive-model-id"))):t=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+r+'"]'),1),e=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==b.modelID&&(a+=1)}),t.after(e),E(e)),d=e.attr("data-rexlive-section-id"),s={id:b.modelID,modelName:b.modelName,sectionID:d,$section:e,modelNumber:a,isModel:!0},u={id:s.id,names:b.customizationsNames},u=(Rexbuilder_Util.updateDivModelCustomizationsNames(u),{id:s.id,name:s.modelName,customizations:b.customizationsData}),u=(Rexbuilder_Util.updateModelsCustomizationsData(u),Rexbuilder_Dom_Util.updateSectionBecameModel(s),Rexbuilder_Section.prepareSectionCopied(e),e.children(".section-data")),s=(u.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section")),e.find(".update-model-button")),c=(Rexbuilder_Dom_Util.updateLockEditModel(s,!0),e.find(".grid-stack-row")),s=(c.perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(e,u),setTimeout(function(){c.children(".grid-stack-item").each(function(e,t){t=E(t).find(".rex-slider-wrap");0!=t.length&&RexSlider.initSlider(t)})},500,c),Rexbuilder_Util.$rexContainer.sortable("refresh"),{$sectionToHide:e,$sectionToShow:t,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null,stateDefault:null!=l?jQuery.extend(!0,[],l):null});if(Rexbuilder_Dom_Util.updateSectionVisibility(t,!1),Rexbuilder_Dom_Util.updateSectionVisibility(e,!0),null!=n){for(var _,x={section_rex_id:d,targets:[],section_is_model:!0,section_model_id:b.modelID,section_model_number:a,section_hide:!1,section_created_live:!0},m=0;m<n.length;m++){for(_=0;_<n[m].sections.length;_++)if(n[m].sections[_].section_is_model){if(n[m].sections[_].section_model_id==o&&n[m].sections[_].section_model_number==i)break}else if(r==n[m].sections[_].section_rex_id)break;n[m].sections[_].section_created_live?n[m].sections.splice(_,1,jQuery.extend(!0,{},x)):(x.section_created_live=!1,n[m].sections.splice(_,1),n[m].sections.push(jQuery.extend(!0,{},x))),x.section_created_live=!0}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(n),_=0;_<l.length;_++)if(l[_].section_is_model){if(l[_].section_model_id==o&&l[_].section_model_number==i)break}else if(r==l[_].section_rex_id)break;l.splice(_,1,x),Rexbuilder_Util.updateDefaultLayoutState({pageData:l,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var u={$sectionToHide:t,$sectionToShow:e,layoutsOrder:null!=n?jQuery.extend(!0,[],n):null,stateDefault:null!=l?jQuery.extend(!0,[],l):null},b=(Rexbuilder_Util_Editor.pushAction(e,"updateSectionModel",u,s),Rexbuilder_Util_Editor.sectionCopying=!1,{eventName:"rexlive:edited",modelEdited:Rexbuilder_Util_Editor.insertingModel=!1});Rexbuilder_Util_Editor.sendParentIframeMessage(b)}function g(e){var C;"default"==Rexbuilder_Util.activeLayout&&0!=(C=Rexbuilder_Util.$rexContainer.find(".import-model")).length&&(C.next().is("#textEditorToolbar")&&Rexbuilder_Util.$rexContainer.find(".rexpansive_section").eq(0).before(C.detach()),E.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_model_live",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:{ID:parseInt(C.attr("data-rex-model-id"))}},success:function(e){if(e.success){var i={model:e.data.model,modelName:e.data.name,modelID:e.data.id,customizationsData:e.data.customizations_data,customizationsNames:e.data.customizations_names},o=(Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0,1),t=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==i.modelID&&(o+=1)}),E.parseHTML(i.model)),r=(C.after(t),C.remove(),Rexbuilder_Util.getDefaultLayoutState()),l=Rexbuilder_Util.getPageCustomizationsDom(),t=E(t),n=t.attr("data-rexlive-section-id"),a=(t.attr("data-rexlive-model-number",o),{id:i.modelID,names:i.customizationsNames}),a=(Rexbuilder_Util.updateDivModelCustomizationsNames(a),{id:i.modelID,name:i.modelName,customizations:i.customizationsData}),a=(Rexbuilder_Util.updateModelsCustomizationsData(a),Rexbuilder_Section.prepareSectionCopied(t),t.children(".section-data")),d=(a.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section")),t.find(".update-model-button")),s=(Rexbuilder_Dom_Util.updateLockEditModel(d,!0),t.find(".grid-stack-row")),u=(s.perfectGridGalleryEditor({editorMode:!0}),d=e,U=(e=s).find(".rex-button-wrapper"),y="",D=d.data.rexButtonsHTML,S=D.length,U.each(function(e,t){var i=E(t);for(y=i.attr("data-rex-button-id"),h=0;h<S;h++)if(-1!==(R=D[h]).search(y)){i.replaceWith(R);break}}),(U=e.find(".rex-button-wrapper")).each(function(e,t){Rexbuilder_Rexbutton.endFixingButtonImported(E(t))}),s.find(".rex-element-wrapper").each(function(e,t){Rexbuilder_Rexelement_Editor.setupElement(E(t))}),Rexbuilder_Live_Utilities.updateModelSectionTools(t,a),setTimeout(function(){s.find(".grid-stack-item").each(function(e,t){t=E(t).find(".rex-slider-wrap");0!=t.length&&RexSlider.initSlider(t)})},500,s),Rexbuilder_Live_Utilities.launchTooltips(),Array.prototype.slice.call(s.get(0).getElementsByClassName("perfect-grid-item"))),c=u.length;for(p=0;p<c;p++){var _=E(u[p]).find(".grid-item-content"),x=u[p].querySelector(".rexbuilder-block-data"),m=x.getAttribute("data-image_bg_elem_active"),b=x.getAttribute("data-image_bg_block"),m=("true"==m&&""!==b&&(v={active:m,urlImage:b},Rexbuilder_Util.addClass(u[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-image").parentElement,"tool-button--hide"),Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(_,v),Rexbuilder_Block_Editor.updateBlockImagePositionTool(_,v)),x.getAttribute("data-color_bg_block")),b=("true"==x.getAttribute("data-color_bg_block_active")&&""!==m&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(_,m),x.getAttribute("data-overlay_block_color")),m=("true"==x.getAttribute("data-overlay_block_color_active")&&""!==b&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(_,b),x.getAttribute("data-video_bg_id")),_=x.getAttribute("data-video_bg_url"),b=x.getAttribute("data-video_bg_url_vimeo");""===m&&""===_&&""===b||(Rexbuilder_Util.addClass(u[p].querySelector(".rexlive-block-toolbox.top-tools .edit-block-video-background").parentElement,"tool-button--hide"),Rexbuilder_Util.removeClass(u[p].querySelector(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parentElement,"tool-button--hide")),Rexbuilder_Block_Editor.updateTextTool(u[p].querySelector(".text-wrap"))}Rexbuilder_Util.$rexContainer.sortable("refresh");d={show:!1,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null};if(Rexbuilder_Dom_Util.updateSectionVisibility(t,!0),null!=l){var p,g=0,f=(Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){t=E(t);if(t.attr("data-rexlive-model-id")==i.modelID&&t.attr("data-rexlive-model-number")==o)return g=e,!1}),{section_rex_id:n,targets:[],section_is_model:!0,section_model_id:i.modelID,section_model_number:o,section_hide:!1,section_created_live:!0});for(p=0;p<l.length;p++)l[p].sections.splice(g,0,jQuery.extend(!0,{},f));r.splice(g,0,jQuery.extend(!0,{},f)),Rexbuilder_Util.updatePageCustomizationsDomOrder(l),Rexbuilder_Util.updateDefaultLayoutState({pageData:r,modelsData:Rexbuilder_Util.getModelsCustomizations()})}var e={show:!0,layoutsOrder:null!=l?jQuery.extend(!0,[],l):null},v=(Rexbuilder_Util_Editor.pushAction(t,"updateSectionVisibility",e,d),Rexbuilder_Util_Editor.sectionCopying=!1,{eventName:"rexlive:edited",modelEdited:Rexbuilder_Util_Editor.insertingModel=!1});Rexbuilder_Util_Editor.sendParentIframeMessage(v)}var R,h,U,y,D,S},error:function(e){},complete:function(e){}}))}function f(e){var t,i=null;if(null!==(i="default"==Rexbuilder_Util.activeLayout?Rexbuilder_Util.getPageCustomizationsDom():i)){for(var o=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),r=[],l=0;l<o.length;l++)r.push(o[l].getAttribute("data-rexlive-section-id"));for(var n=0;n<i.length;n++){var a=(a=r.map(function(t){return i[n].sections.find(function(e){return e.section_rex_id===t})})).filter(function(e){return void 0!==e});i[n].sections=a}Rexbuilder_Util.updatePageCustomizationsDomOrder(i)}switch(d=!1,e.settings.data.initiator){case"savingProcess":t={eventName:"rexlive:savePageWithButton"},Rexbuilder_Util_Editor.sendParentIframeMessage(t);break;case"changeLayout":t={eventName:"rexlive:openChangeLayoutModal",dataObj:e.settings.data.dataObj},Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}return{init:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t=E(t);t.hasClass("rex-model-section")&&(t.addClass("rexlive-block-grid-editing"),t.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),t.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')),void 0===t.attr("id")&&t.attr("id",""),void 0===t.attr("data-rexlive-section-name")&&t.attr("data-rexlive-section-name","")});var r=[],l=[];Rexbuilder_Util.$rexContainer.sortable({iframeFix:!0,start:function(e,t){d=!1,Rexbuilder_Dom_Util.fixModelNumbers(),r=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(e,t){var t=E(t),i={rexID:t.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};t.hasClass("rex-model-section")&&(i.modelID=t.attr("data-rexlive-model-id"),i.modelNumber=t.attr("data-rexlive-model-number")),r.push(i)})},handle:".builder-move-row",stop:function(e,t){var e=E(e.target).parents(".rexpansive_section"),i={rexID:e.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1},o=(e.hasClass("rex-model-section")&&(i.modelID=e.attr("data-rexlive-model-id"),i.modelNumber=e.attr("data-rexlive-model-number")),l=[],Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section):not(.ui-sortable-placeholder)").each(function(e,t){var t=E(t),i={rexID:t.attr("data-rexlive-section-id"),modelID:-1,modelNumber:-1};t.hasClass("rex-model-section")&&(i.modelID=t.attr("data-rexlive-model-id"),i.modelNumber=t.attr("data-rexlive-model-number")),l.push(i)}),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(l),{sectionOrder:r,sectionMoved:i}),i=(Rexbuilder_Util.updateSectionOrderCustomLayouts(i,l),{sectionOrder:l,sectionMoved:i}),i=(Rexbuilder_Util_Editor.pushAction("document","updateSectionOrder",i,o),{eventName:"rexlive:sectionOrderStatus",isSectionOrderChanged:d=function(e,t){for(var i=0;i<e.length;i++)if(e[i].rexID!==t[i].rexID)return!0;return!1}(r,l)});Rexbuilder_Util_Editor.sendParentIframeMessage(i),d&&Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1}),Rex_Navigator.fixNavigatorItemOrder(e),Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t.style.zIndex=""})}});for(var e,t={rexID:"",dimension:"full",dimensionClass:"center-disposition",sectionWidth:"100%",fullHeight:"false",blockDistance:20,layout:"fixed",rowSeparatorTop:20,rowSeparatorBottom:20,rowSeparatorRight:20,rowSeparatorLeft:20},i=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),o=i.length,n=0;n<o;n++){a=(e=i[n]).getAttribute("data-rexlive-section-id"),t.rexID=a;var a=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",t);E(e).find(".section-data").after(a)}Rexbuilder_Util.$rexContainer.on("click",".builder-delete-row",s),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-row",u),Rexbuilder_Util.$rexContainer.on("click",".collapse-grid",c),Rexbuilder_Util.$document.on("click",".add-new-section",m),Rexbuilder_Util.$document.on("rexlive:collapse_row",_),Rexbuilder_Util.$document.on("rexlive:collapsingElementsEnded",x),Rexbuilder_Util.$document.on("rexlive:add_new_section_after",b),Rexbuilder_Util.$document.on("rexlive:applyModelSection",p),Rexbuilder_Util.$document.on("rexlive:importModels",g),Rexbuilder_Util.$document.on("rexlive:syncSectionOrderThroughLayouts",f)},prepareSectionCopied:function(e){var o,r,t=parseInt(e.attr("data-rexlive-section-number")),i=(Rexbuilder_Util.lastSectionNumber=Rexbuilder_Util.lastSectionNumber+1,e.attr("data-rexlive-section-number",Rexbuilder_Util.lastSectionNumber),e.find(".grid-stack-row")),l=(i.removeClass("grid-number-"+t),i.removeClass(function(e,t){return(t.match(/grid-stack-instance-\d+/g)||[]).join(" ")}),Rexbuilder_Live_Utilities.removeDeletedBlocks(i),Rexbuilder_Util_Editor.insertingModel||(o=Rexbuilder_Util.createSectionID(),e.attr("data-rexlive-section-id",o),e.attr("data-rexlive-section-name",""),e[0].querySelector(".section-data").setAttribute("data-rexlive_section_id",o),[].slice.call(e[0].getElementsByClassName("edit-row-width")).forEach(function(e,t){var i="row-dimension-"+e.getAttribute("data-section_width")+"-"+o;e.setAttribute("name","row-dimension-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)}),[].slice.call(e[0].getElementsByClassName("edit-row-layout")).forEach(function(e,t){var i="row-layout-"+e.getAttribute("data-section_layout")+"-"+o;e.setAttribute("name","row-layout-"+o),e.setAttribute("id",i),e.nextElementSibling.setAttribute("for",i)})),tmpl.arg="block",Rexbuilder_Live_Templates.getTemplate("tmpl-block-drag-handle"));i.find(".grid-stack-item").each(function(e,t){var i=E(t);Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.generateElementNewIDs(i,e,Rexbuilder_Util.lastSectionNumber),Rexbuilder_Live_Utilities.removeHandles(i),Rexbuilder_Live_Utilities.removeTextEditor(i),Rexbuilder_Util_Editor.insertingModel||Rexbuilder_Live_Utilities.fixCopiedElementSlider(i),0==i.find(".rexlive-block-toolbox").length&&(r=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",{block_type:""}),i.find(".grid-stack-item-content").after(r)),null===t.querySelector(".rexlive-block-drag-handle")&&t.querySelector(".grid-item-content").insertAdjacentHTML("beforebegin",l),Rexbuilder_CreateBlocks.sanitizeBlockContent(t)}),tmpl.arg="section"},showSectionToolBox:function(e){e.children(".section-toolBox").addClass("tool-box-active")},updateModelsHtmlLive:function(e){Rexbuilder_Util_Editor.sectionCopying=!0,Rexbuilder_Util_Editor.insertingModel=!0;var n=e.modelID,a=e.html,d=e.model_number,s=e.modelName;Rexbuilder_Util.$rexContainer.children(".rexpansive_section.rex-model-section:not(.removing_section)").each(function(e,t){var i,o,r,l=E(t);t.getAttribute("data-rexlive-model-id")==n&&t.getAttribute("data-rexlive-model-number")!=d&&(t=isNaN(parseInt(l.attr("data-rexlive-model-number")))?"":l.attr("data-rexlive-model-number"),i=1,Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){E(t).attr("data-rexlive-model-id")==n&&(i+=1)}),o=E.parseHTML(a),l.after(o),(o=E(o)).attr("data-rexlive-model-number",t),t={modelID:n,modelName:s,modelNumber:i,sectionID:o.attr("data-rexlive-section-id"),isModel:!0,$section:o},Rexbuilder_Dom_Util.updateSectionBecameModel(t),Rexbuilder_Section.prepareSectionCopied(o),t=o.children(".section-data"),r=o.attr("data-rexlive-section-id"),t.after(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-section",{rexID:r})),r=o.find(".update-model-button"),Rexbuilder_Dom_Util.updateLockEditModel(r,!0),o.find(".grid-stack-row").perfectGridGalleryEditor({editorMode:!0}),Rexbuilder_Live_Utilities.updateModelSectionTools(o,t),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.$rexContainer.sortable("refresh"),Rexbuilder_Dom_Util.updateSectionVisibility(l,!1),Rexbuilder_Dom_Util.updateSectionVisibility(o,!0))}),Rexbuilder_Util.$rexContainer.children(".rexpansive_section.removing_section.rex-model-section").each(function(e,t){E(t).attr("data-rexlive-model-number","")}),Rexbuilder_Util_Editor.sectionCopying=!1,Rexbuilder_Util_Editor.insertingModel=!1},fixSectionToolbox:function(e,t){e=e.find(".section-toolBox")[0];"mobile"===Rexbuilder_Util.activeLayout?(e.style.marginLeft="-"+t.left+"px",e.style.marginRight="-"+t.right+"px"):(e.style.marginLeft="",e.style.marginRight="")},fixBlockToolsAccordingToSeparator:function(e,t){25<t.top?e.removeClass("ui-tools--near-top"):e.addClass("ui-tools--near-top")},toggleGridCollapse:t,getIsSectionOrderChanged:function(){return d}}}(jQuery);
/**
 * Object that handles all the live events triggered on a row
 * To edit a selected row
 * @since 2.0.0
 */
var Rexbuilder_Section_Editor=function(c){"use strict";function a(){Rexbuilder_Util.$document.on("change",".edit-row-width",function(e){var t=c(e.target).parents(".rexpansive_section"),o=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e=e.target.value.trim().split(/(\d+)/),o={data_to_send:{sectionTarget:{sectionID:o,modelNumber:t},sectionWidth:{width:e[1],type:e[2]}},forged:!0},t=jQuery.Event("rexlive:set_section_width");t.settings=o,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("change",".edit-row-layout",function(e){var t=c(e.target).parents(".rexpansive_section"),t={data_to_send:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},layout:e.target.value},forged:!0},e=jQuery.Event("rexlive:set_gallery_layout");e.settings=t,Rexbuilder_Util.$document.trigger(e)}),Rexbuilder_Util.$document.on("change",".edit-row-layout-checkbox",function(e){var t=c(e.target).parents(".rexpansive_section"),t={data_to_send:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},layout:e.target.checked?"fixed":"masonry"},forged:!0},e=jQuery.Event("rexlive:set_gallery_layout");e.settings=t,Rexbuilder_Util.$document.trigger(e)}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-image-background",function(e){var t=c(this).parents(".rexpansive_section"),t={eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):""},idImage:this.getAttribute("value"),returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-image-background",function(e){var e=c(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),o=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",a=e.children(".section-data"),r=a.attr("data-id_image_bg_section");""!==r&&(t={data_to_send:{sectionTarget:{sectionID:t,modelNumber:o},active:!1,idImage:r,urlImage:a.attr("data-image_bg_section"),width:e.attr("data-background_image_width"),height:e.attr("data-background_image_height")}},(o=jQuery.Event("rexlive:apply_background_image_section")).settings=t,Rexbuilder_Util.$document.trigger(o),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:{image_bg_section:"",image_bg_section_active:!1}}))}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-color-background",function(e){e.stopPropagation(),function(e){y({data_to_send:{color:"",active:!1,sectionTarget:{sectionID:e.sectionID,modelNumber:e.modelNumber}}}),k({color_bg_section:"",color_bg_section_active:!1})}(w(c(e.target).parents(".rexpansive_section")))}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-overlay-color",function(e){e.stopPropagation(),function(e){R({data_to_send:{color:"",active:!1,sectionTarget:{sectionID:e.sectionID,modelNumber:e.modelNumber}}}),k({row_overlay_color:"",row_overlay_active:!1})}(w(c(e.target).parents(".rexpansive_section")))}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-video-background",function(e){e.preventDefault();var t=c(e.target).parents(".rexpansive_section"),o=t.attr("data-rexlive-section-id"),a=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",r=t.children(".section-data"),i=void 0===r.attr("data-video_mp4_url")?"":r.attr("data-video_mp4_url"),n=void 0===r.attr("data-video_bg_url_section")?"":r.attr("data-video_bg_url_section"),d=void 0===r.attr("data-video_bg_id_section")?"":r.attr("data-video_bg_id_section"),r=void 0===r.attr("data-video_bg_url_vimeo_section")?"":r.attr("data-video_bg_url_vimeo_section"),l=null,e=(0<c(e.target).parents(".row-toolBox__fast-configuration").length&&(l=Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}})),t.addClass("activeRowTools"),{eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:o,modelNumber:a},youtubeVideo:n,vimeoUrl:r,mp4Video:i,mp4VideoID:d}},mousePosition:l});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}),Rexbuilder_Util.$rexContainer.on("click",".deactivate-row-video-background",function(e){e.preventDefault();var e=c(e.target).parents(".rexpansive_section"),e={data_to_send:{sectionTarget:{sectionID:e.attr("data-rexlive-section-id"),modelNumber:void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):""},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:"",width:"",height:""}}},t=jQuery.Event("rexlive:update_section_background_video");t.settings=e,Rexbuilder_Util.$document.trigger(t);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:{video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}})}),Rexbuilder_Util.$rexContainer.on("click",".edit-row-color-background",e),Rexbuilder_Util.$rexContainer.on("click",".edit-row-overlay-color",t),Rexbuilder_Util.$rexContainer.on("click",".synch-section-content",function(e){e.preventDefault();var e=c(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:t,modelNumber:e,rexID:"self"}}})})}var r,i,n,d,l,s,u,_,g,v=c(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close")),b=c(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save")),m=null;function p(e){var t;n=!0,_.data_to_send.color=e?e.toRgbString():"",e=_,(t=jQuery.Event("rexlive:change_section_bg_color")).settings=e,Rexbuilder_Util.$document.trigger(t)}function f(e){n&&e&&(e=e.toRgbString(),_.data_to_send.color=e,_.data_to_send.active=!0,y(_),k({color_bg_section:e,color_bg_section_active:!0})),Rexbuilder_Live_Utilities.hideAllTools(),i.spectrum("set",""),m=s=l=null,n=!1}function x(e){var t;d=!0,g.data_to_send.active=!0,g.data_to_send.color=e?e.toRgbString():"",e=g,(t=jQuery.Event("rexlive:change_section_overlay")).settings=e,Rexbuilder_Util.$document.trigger(t)}function h(e){d&&e&&(e=e.toRgbString(),g.data_to_send.color=e,g.data_to_send.active=!0,R(g),k({row_overlay_color:g.data_to_send.color,row_overlay_active:!0})),Rexbuilder_Live_Utilities.hideAllTools(),r.spectrum("set",""),u=s=l=null,d=!1}function e(e){return e.preventDefault(),l=c(e.currentTarget).parents(".rexpansive_section"),s=l.children(".section-data"),_.data_to_send.sectionTarget.sectionID=l.attr("data-rexlive-section-id"),_.data_to_send.sectionTarget.modelNumber=void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",void 0!==s.attr("data-color_bg_section_active")&&s.attr("data-color_bg_section_active"),m=s.attr("data-color_bg_section")||null,l.addClass("activeRowTools"),c(e.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),n=!1,r.spectrum("set",m),r.spectrum("show"),r.spectrum("container").css("top",e.pageY+"px"),r.spectrum("container").css("left",e.pageX+"px"),o(r,e.currentTarget),!1}function t(e){return e.preventDefault(),l=c(e.currentTarget).parents(".rexpansive_section"),s=l.children(".section-data"),g.data_to_send.sectionTarget.sectionID=l.attr("data-rexlive-section-id"),g.data_to_send.sectionTarget.modelNumber=void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",JSON.parse(void 0!==s.attr("data-row_overlay_active")&&s.attr("data-row_overlay_active")),u=s.attr("data-row_overlay_color"),l.addClass("activeRowTools"),c(e.currentTarget).parents(".tool-button-floating").addClass("tool-button-floating--active"),d=!1,i.spectrum("set",u),i.spectrum("show"),i.spectrum("container").css("top",e.pageY+"px"),i.spectrum("container").css("left",e.pageX+"px"),o(i,e.currentTarget),!1}function o(e,t){var o=e.spectrum("container")[0],a=o.getBoundingClientRect(),r=a.top,t=(void 0!==t?t:e[0]).parentNode.getBoundingClientRect(),e=parseInt(o.style.left);r+a.height==t.top?o.style.top=parseInt(o.style.top)-10+"px":r==t.top+t.height&&(o.style.top=parseInt(o.style.top)+10+"px"),e+o.offsetWidth+15>=document.body.offsetWidth&&(e-o.offsetWidth<0?o.style.left="15px":o.style.left=e-o.offsetWidth+"px")}function w(e){return{sectionID:e.attr("data-rexlive-section-id"),modelNumber:void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):""}}function y(e){var t=jQuery.Event("rexlive:apply_background_color_section");t.settings=e,Rexbuilder_Util.$document.trigger(t)}function R(e){var t=jQuery.Event("rexlive:change_section_overlay");t.settings=e,Rexbuilder_Util.$document.trigger(t)}function k(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:updateTopToolbar",updateInfo:e})}return{init:function(){this.dataObserver=null,this.dataNodes=null,this.config={attributes:!0,childList:!1,subtree:!1,attributeFilter:["data-load","data-color_bg_section_active","data-color_bg_section","data-image_bg_section_active","data-id_image_bg_section","data-row_overlay_active","data-row_overlay_color","data-video_bg_url_section","data-video_bg_id_section","data-video_bg_url_vimeo_section"]},a(),r=c(document.getElementById("global-spectrum-row-background")),i=c(document.getElementById("global-spectrum-row-overlay")),d=n=!1,g={data_to_send:{color:s=l=null,active:!(_={data_to_send:{color:null,sectionTarget:{sectionID:"",modelNumber:""}}}),sectionTarget:{sectionID:"",modelNumber:""}}},r.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:r,object:"section",action:"background"})},move:p,hide:f}),i.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:i,object:"section",action:"overlay"})},move:x,hide:h});var e=v.clone(),t=(r.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),r.spectrum("set",m||""),r.spectrum("container").find(".sp-input").trigger("change"),r.spectrum("hide")}),(e=b.clone()).find(".rex-modal-option")),e=(r.spectrum("container").append(e),t.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":r.spectrum("hide");break;case"reset":r.spectrum("set",m||""),r.spectrum("container").find(".sp-input").trigger("change")}}),v.clone());i.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==u&&(i.spectrum("set",u),i.spectrum("container").find(".sp-input").trigger("change")),i.spectrum("hide")}),e=(t=b.clone()).find(".rex-modal-option"),i.spectrum("container").append(t),e.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":i.spectrum("hide");break;case"reset":i.spectrum("set",u||""),i.spectrum("container").find(".sp-input").trigger("change")}}),r.spectrum("container").draggable(),i.spectrum("container").draggable(),Rexbuilder_Section_Editor.dataNodes=Array.prototype.slice.call(document.getElementsByClassName("section-data")),Rexbuilder_Section_Editor.dataObserver=new MutationObserver(function(e,t){"false"!=e[0].target.getAttribute("data-color_bg_section_active")&&""!=e[0].target.getAttribute("data-color_bg_section")||"false"!=e[0].target.getAttribute("data-image_bg_section_active")&&""!=e[0].target.getAttribute("data-id_image_bg_section")||"false"!=e[0].target.getAttribute("data-row_overlay_active")&&""!=e[0].target.getAttribute("data-row_overlay_color")||""!=e[0].target.getAttribute("data-video_bg_url_section")||""!=e[0].target.getAttribute("data-video_bg_id_section")||""!=e[0].target.getAttribute("data-video_bg_url_vimeo_section")?Rexbuilder_Util.removeClass(e[0].target.parentNode,"rowTools__hide-fast-data"):Rexbuilder_Util.addClass(e[0].target.parentNode,"rowTools__hide-fast-data")});for(var o=0;o<Rexbuilder_Section_Editor.dataNodes.length;o++)Rexbuilder_Section_Editor.dataObserver.observe(Rexbuilder_Section_Editor.dataNodes[o],Rexbuilder_Section_Editor.config)},updateSectionDimensionTool:function(e,t){null===(t=void 0!==t?t:null)&&((t={}).dimension=e.find(".section-data").attr("data-dimension")),e.find(".edit-row-width[data-section_width="+t.dimension+"]").prop("checked",!0)},updateSectionLayoutTool:function(e,t){switch(null===(t=void 0!==t?t:null)&&((t={}).layout=e.find(".section-data").attr("data-layout")),t.layout){case"masonry":e.find(".edit-row-layout-checkbox").prop("checked",!1);break;case"fixed":e.find(".edit-row-layout-checkbox").prop("checked",!0)}},updateRowBackgroundImageTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");o.addClass("tool-button--image-preview").attr("value",t.idImage).css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide"),e.addClass("tool-button--hide")},resetRowBackgroundImageTool:function(e){var t=e.find(".row-toolBox__fast-configuration").find(".edit-row-image-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-image-background");t.removeClass("tool-button--image-preview").attr("value","").css("background-image","none").parent().addClass("tool-button--hide"),e.removeClass("tool-button--hide")},updateRowBackgroundColorTool:function(e,t){var o=""===t,a=e.find(".row-toolBox__fast-configuration .edit-row-color-background"),r=a.parent(),e=e.find(".row-toolBox__standard-configuration .edit-row-color-background").parent();(o?(e.removeClass("tool-button--hide"),r):(r.addClass("tool-button--picker-preview").removeClass("tool-button--hide"),a.siblings(".tool-button--color-preview").css("background-color",t),e)).addClass("tool-button--hide")},updateRowBackgroundGradientTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-color-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-color-background");(""!=t?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t),e):(e.parent().removeClass("tool-button--hide"),o)).parent().addClass("tool-button--hide")},updateRowOverlayColorTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration .edit-row-overlay-color"),a=o.parent(),e=e.find(".row-toolBox__standard-configuration .edit-row-overlay-color").parent(),r="true"===t.active.toString();(""===t.color||!r?(e.removeClass("tool-button--hide"),a):(a.addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background-color",t.color),e)).addClass("tool-button--hide")},updateRowOverlayColorToolLive:function(e,t){e=e.find(".edit-row-overlay-color");e.parent().addClass("tool-button--picker-preview"),e.siblings(".tool-button--color-preview").css("background-color",t)},updateRowOverlayGradientTool:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-overlay-color"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-overlay-color");("true"==t.active.toString()?(o.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),o.siblings(".tool-button--color-preview").css("background",t.color),e):(e.parent().removeClass("tool-button--hide"),o)).parent().addClass("tool-button--hide")},updateRowBackgroundVideo:function(e,t){var o=e.find(".row-toolBox__fast-configuration").find(".edit-row-video-background"),e=e.find(".row-toolBox__standard-configuration").find(".edit-row-video-background");""==t.typeVideo?(o.parent().addClass("tool-button--hide"),e.removeClass("tool-button--hide")):(o.parent().removeClass("tool-button--hide"),e.addClass("tool-button--hide"))},triggerRowDataChange:function(){for(var e=0;e<Rexbuilder_Section_Editor.dataNodes.length;e++)Rexbuilder_Section_Editor.dataNodes[e].setAttribute("data-load","true")},listenNewRowDataChange:function(e){Rexbuilder_Section_Editor.dataObserver.observe(e,Rexbuilder_Section_Editor.config),e.setAttribute("data-load","true")},openSectionBackgroundGradient:function(e){var t=(e=0===e.length?l:e).attr("data-rexlive-section-id"),o=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",e=e.children(".section-data").attr("data-color_bg_section");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editSectionBackgroundGradient",activeRowData:{gradient:e,sectionTarget:{sectionID:t,modelNumber:o}}})},openRowOverlayGradient:function(e){var t=(e=0===e.length?l:e).children(".section-data"),o=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",t={eventName:"rexlive:editRowOverlayGradient",activeRowData:{gradient:t.attr("data-row_overlay_color"),sectionTarget:{sectionID:o,modelNumber:e}}};Rexbuilder_Util_Editor.sendParentIframeMessage(t)}}}(jQuery);
var Rexbuilder_Block=function(i){"use strict";function r(e){e.preventDefault(),e.stopPropagation(),Rexbuilder_Util_Editor.removingBlocks=!0;var e=i(e.target).parents(".grid-stack-item"),t=e.parent().data().plugin_perfectGridGalleryEditor,r=t.$section,t=(t.deleteBlock(e),e.attr("data-rexlive-element-edited",!0),Rexbuilder_Util_Editor.removingBlocks=!1,0!==e.find(".wpcf7-form:not(.no-builder-form)").length&&(t=e.find(".rex-element-wrapper").attr("data-rex-element-id"),Rexbuilder_Rexwpcf7_Editor.removeFormInPage(t)),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),0===r.find(".perfect-grid-item").not(".rex-hide-element").length?r.addClass("empty-section"):r.removeClass("empty-section"),e.attr("data-rexbuilder-block-id")),e=(Rexbuilder_Util.$document.trigger("rexlive:deletedBlock",t),{eventName:"rexlive:edited",modelEdited:r.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function l(e){e.preventDefault(),e.stopPropagation();var e=i(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),r=e.attr("data-rexbuilder-block-id"),t={sectionID:t.attr("data-rexlive-section-id"),modelNumber:void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",rexID:r,sliderNumber:0},r=e.find('.rex-slider-wrap[data-rex-slider-active="true"]');0<r.length&&(t.sliderNumber=r.attr("data-rex-slider-number"),r=r.attr("data-slider-id"),e=e.attr("id"),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editSlider",sliderID:r,blockID:e,shortCodeSlider:'[RexSlider slider_id="'+r+'"]',target:t}))}function a(e){e.preventDefault(),e.stopPropagation(),Rexbuilder_Util_Editor.blockCopying=!0;e=i(e.currentTarget).parents(".grid-stack-item");Rexbuilder_CreateBlocks.createCopyBlock(e),Rexbuilder_Util_Editor.blockCopying=!1}function o(e){var t;e.querySelector(".ui-focused-element-highlight")||(t=function(e){var t,r={not_has_image:!1,not_has_overlay:!1,not_has_video:!1,has_content:!1,overlay:""};t=e.querySelector(".rexbuilder-block-data"),r.not_has_image=null===t.getAttribute("data-image_bg_elem_active")||"true"!=t.getAttribute("data-image_bg_elem_active")||""==t.getAttribute("data-id_image_bg_block"),r.not_has_overlay="true"!=t.getAttribute("data-overlay_block_color_active")||""==t.getAttribute("data-overlay_block_color"),r.not_has_video=!t.getAttribute("data-video_bg_id")&&!t.getAttribute("data-video_bg_url")&&!t.getAttribute("data-video_bg_url_vimeo"),0==(e=e.querySelector(".text-wrap")).childElementCount||1==e.childElementCount&&Rexbuilder_Util.hasClass(e.children[0],"text-editor-span-fix")?r.has_content=!1:r.has_content=!0;return r.overlay=null!==t.getAttribute("data-overlay_block_color")?t.getAttribute("data-overlay_block_color"):"",r}(e),t=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap-clean",t),e.querySelector(".rexbuilder-block-data").nextElementSibling.insertAdjacentHTML("afterend",t))}return{init:function(){for(var e=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".perfect-grid-item")),t=0;t<e.length;t++)o(e[t]);Rexbuilder_Util.$rexContainer.on("click",".builder-delete-block",r),Rexbuilder_Util.$rexContainer.on("click",".builder-edit-slider",l),Rexbuilder_Util.$rexContainer.on("click",".builder-copy-block",a)},addToolboxClean:o,addToolboxDirt:function(e){var t;e.querySelector(".ui-focused-element-highlight")||(t=Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap"),e.querySelector(".rexbuilder-block-data").nextElementSibling.insertAdjacentHTML("afterend",t))}}}(jQuery);
/**
 * Object that handles all the live events triggered on a block
 * To edit a selected block
 * @since 2.0.0
 */
var Rexbuilder_Block_Editor=function(v){"use strict";var o=v(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-close")),a=v(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-tool-save")),i=function(e){var t=(e=0===e.length?c:e).parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),e=e.children(".rexbuilder-block-data"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e={blockData:{gradient:e.attr("data-color_bg_block"),target:{sectionID:a,modelNumber:t,rexID:o}}},a=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockGradient",activeBlockData:e});Rexbuilder_Util_Editor.sendParentIframeMessage(a)};function u(e){return 0===e.childElementCount||!(""!==e.textContent.trim()||1!==e.childElementCount||!e.querySelector(".text-editor-span-fix"))||0===Array.prototype.slice.call(e.getElementsByTagName("img")).length+Array.prototype.slice.call(e.getElementsByTagName("svg")).length+Array.prototype.slice.call(e.getElementsByTagName("iframe")).length&&""===e.textContent.trim()}var r,l,d,n,c,s,t,b,m,g,p,x,_,k;function h(e){d=!0,_.data_to_send.active=!0,_.data_to_send.color=_.data_to_send.active&&e?e.toRgbString():"";e=jQuery.Event("rexlive:change_block_bg_color");e.settings=_,Rexbuilder_Util.$document.trigger(e)}function f(e){d&&e&&(m.hasClass("top-tools")&&(b.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),b.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),_.data_to_send.color=e.toRgbString(),(e=jQuery.Event("rexlive:apply_background_color_block")).settings=_,Rexbuilder_Util.$document.trigger(e)),Rexbuilder_Live_Utilities.hideAllTools(),r.spectrum("set",""),g=m=b=t=s=c=null,d=!1}function y(e){n=!0,k.data_to_send.active=!0,k.data_to_send.color=e?e.toRgbString():"",(e=p?jQuery.Event("rexlive:change_block_overlay_color"):jQuery.Event("rexlive:change_block_overlay")).settings=k,Rexbuilder_Util.$document.trigger(e)}function C(e){n&&e&&(k.data_to_send.active=!0,k.data_to_send.color=e.toRgbString(),m.hasClass("top-tools")&&(b.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),b.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),(e=jQuery.Event("rexlive:change_block_overlay")).settings=k,Rexbuilder_Util.$document.trigger(e)),Rexbuilder_Live_Utilities.hideAllTools(),l.spectrum("set",""),x=m=b=t=s=c=null,n=p=!1}function I(e){return e.preventDefault(),b=v(e.currentTarget),c=b.parents(".grid-stack-item"),s=c.children(".rexbuilder-block-data"),t=c.parents(".rexpansive_section"),m=b.parents(".rexlive-block-toolbox"),_.data_to_send.target.rexID=c.attr("data-rexbuilder-block-id"),_.data_to_send.target.sectionID=t.attr("data-rexlive-section-id"),_.data_to_send.target.modelNumber=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",s.attr("data-color_bg_block_active"),g=s.attr("data-color_bg_block"),Rexbuilder_Util_Editor.manageElement=!0,b.parents(".tool-button-floating").addClass("tool-button-floating--active"),d=!1,r.spectrum("set",g),r.spectrum("show"),r.spectrum("container").css("top",e.pageY+"px"),r.spectrum("container").css("left",e.pageX+"px"),E(r,e.currentTarget),!1}function w(e){return e.preventDefault(),b=v(e.currentTarget),c=b.parents(".grid-stack-item"),s=c.children(".rexbuilder-block-data"),t=c.parents(".rexpansive_section"),m=b.parents(".rexlive-block-toolbox"),k.data_to_send.target.rexID=c.attr("data-rexbuilder-block-id"),k.data_to_send.target.sectionID=t.attr("data-rexlive-section-id"),k.data_to_send.target.modelNumber=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",(p=!(c.hasClass("active-large-block-overlay")||c.hasClass("active-medium-block-overlay")||c.hasClass("active-small-block-overlay"))&&void 0!==s.attr("data-overlay_block_color_active")&&""!==s.attr("data-overlay_block_color_active")&&JSON.parse(s.attr("data-overlay_block_color_active")))||("default"==Rexbuilder_Util.activeLayout&&c.hasClass("active-large-block-overlay")&&(p=!0),"tablet"==Rexbuilder_Util.activeLayout&&c.hasClass("active-medium-block-overlay")&&(p=!0),"mobile"==Rexbuilder_Util.activeLayout&&c.hasClass("active-small-block-overlay")&&(p=!0)),x=s.attr("data-overlay_block_color"),Rexbuilder_Util_Editor.manageElement=!0,b.parents(".tool-button-floating").addClass("tool-button-floating--active"),n=!1,l.spectrum("set",x),l.spectrum("show"),l.spectrum("container").css("top",e.pageY+"px"),l.spectrum("container").css("left",e.pageX+"px"),E(l,e.currentTarget),!1}var E=function(e,t){var o=e.spectrum("container")[0],a=o.getBoundingClientRect(),i=a.top,t=(void 0!==t?t:e[0]).parentNode.getBoundingClientRect(),e=parseInt(o.style.left);i+a.height==t.top?o.style.top=parseInt(o.style.top)-10+"px":i==t.top+t.height&&(o.style.top=parseInt(o.style.top)+10+"px"),e+o.offsetWidth+15>=document.body.offsetWidth&&(e-o.offsetWidth<0?o.style.left="15px":o.style.left=e-o.offsetWidth+"px")};return{init:function(){Rexbuilder_Util.$document.on("click",".edit-block-image",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",r=t.children(".rexbuilder-block-data"),l=t.find(".grid-item-content"),d=u(t.find(".text-wrap").get(0)),n="",e=e.parents(".rexlive-block-toolbox"),e=(e.hasClass("bottom-tools")?n="bottom":e.hasClass("top-tools")&&(n="top"),void 0===r.attr("data-id_image_bg_block")?"":r.attr("data-id_image_bg_block")),c=void 0===r.attr("data-image_bg_block")?"":r.attr("data-image_bg_block"),s=void 0===l.attr("data-background_image_width")?"":l.attr("data-background_image_width"),l=void 0===l.attr("data-background_image_height")?"":l.attr("data-background_image_height"),t=(void 0!==r.attr("data-image_bg_elem_active")&&r.attr("data-image_bg_elem_active"),"fixed"==t.parents(".grid-stack-row").attr("data-layout")?"full":"natural"),t=(d||(t="full"),void 0===r.attr("data-type_bg_block")||""==r.attr("data-type_bg_block")?t:r.attr("data-type_bg_block")),b=void 0===r.attr("data-photoswipe")?"":r.attr("data-photoswipe"),r=void 0===r.attr("data-image_size")?"":r.attr("data-image_size");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openLiveImageUploader",live_uploader_data:{idImage:e,urlImage:c,width:s,height:l,typeBGimage:t,photoswipe:b,imageSize:r,active:!0,sectionTarget:{sectionID:i,modelNumber:o,rexID:a},returnEventName:"rexlive:apply_background_image_block",data_to_send:{idImage:e,urlImage:c,width:s,height:l,typeBGimage:t,photoswipe:b,imageSize:r,active:!0,updateBlockHeight:!!d,tools:n,sectionTarget:{sectionID:i,modelNumber:o,rexID:a}}}})}),Rexbuilder_Util.$document.on("click",".edit-block-video-background",function(e){var t=v(e.target),o=t.parents(".grid-stack-item"),a=o.parents(".rexpansive_section"),i=o.attr("data-rexbuilder-block-id"),r=a.attr("data-rexlive-section-id"),a=void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",l=o.children(".rexbuilder-block-data"),o=o.find(".grid-item-content"),d="",n=t.parents(".rexlive-block-toolbox"),n=(n.hasClass("bottom-tools")?d="bottom":n.hasClass("top-tools")&&(d="top"),void 0===l.attr("data-video_mp4_url")?"":l.attr("data-video_mp4_url")),c=void 0===l.attr("data-video_bg_id")?"":l.attr("data-video_bg_id"),s=void 0===l.attr("data-video_bg_url")?"":l.attr("data-video_bg_url"),l=void 0===l.attr("data-video_bg_url_vimeo")?"":l.attr("data-video_bg_url_vimeo"),b=o.children(".rex-video-wrap"),u="",m="",b=(0!=b.length&&(u=parseInt(b.attr("data-rex-video-width")),m=parseInt(b.attr("data-rex-video-height"))),""),o=0!=o.children(".rex-video-toggle-audio").length,t=(""!=c?b="mp4":""!=s?b="youtube":""!=l&&(b="vimeo"),Rexbuilder_Util_Editor.manageElement=!0,t.parents(".block-toolBox__fast-configuration").length),g=null,b={eventName:"rexlive:editBlockVideoBackground",activeBlockData:{bgVideo:{type:b,mp4Data:{idMp4:c,linkMp4:n,width:u,height:m},vimeoUrl:l,youtubeUrl:s,audio:o,target:{sectionID:r,modelNumber:a,rexID:i},tools:d}},mousePosition:g=0<t?Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}):g};Rexbuilder_Util_Editor.sendParentIframeMessage(b)}),Rexbuilder_Util.$document.on("click",".deactivate-block-image-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",r=e.parents(".rexlive-block-toolbox"),e=(r.hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),r.find(".edit-block-image-position").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-image").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{target:{sectionID:i,modelNumber:o,rexID:a},idImage:"",urlImage:"",width:"",height:"",typeBGimage:"",photoswipe:"",active:!1}}),r=jQuery.Event("rexlive:apply_background_image_block");r.settings=e,Rexbuilder_Util.$document.trigger(r)}),Rexbuilder_Util.$document.on("click",".deactivate-block-color-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{color:"",active:!1,target:{sectionID:i,modelNumber:o,rexID:a}}}),t=jQuery.Event("rexlive:apply_background_color_block");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".deactivate-block-overlay-color",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{color:"",active:!1,target:{sectionID:i,modelNumber:o,rexID:a}}}),t=jQuery.Event("rexlive:change_block_overlay");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".deactivate-block-video-background",function(e){var e=v(e.target),t=e.parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",e=(e.parents(".rexlive-block-toolbox").hasClass("bottom-tools")&&(e.parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),t.find(".rexlive-block-toolbox.top-tools").find(".edit-block-video-background").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),{data_to_send:{target:{sectionID:i,modelNumber:o,rexID:a},urlYoutube:"",urlVimeo:"",videoMp4:{idMp4:"",linkMp4:"",width:"",height:""},audio:"",typeVideo:""}}),t=jQuery.Event("rexlive:update_block_background_video");t.settings=e,Rexbuilder_Util.$document.trigger(t)}),Rexbuilder_Util.$document.on("click",".edit-block-content",function(e){var e=v(e.target).parents(".grid-stack-item"),t=jQuery.Event("dblclick");t.target=e.get(0),t.offsetY=0,e.parents(".perfect-grid-gallery").trigger(t)}),Rexbuilder_Util.$document.on("click",".edit-block-content-position",function(e){var t=v(e.target).parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),t=t.children(".rexbuilder-block-data"),i=o.attr("data-rexlive-section-id"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",t=(void 0===t.attr("data-block_flex_position")?"":t.attr("data-block_flex_position")).split(" "),i={flexPosition:{target:{sectionID:i,modelNumber:o,rexID:a},position:t[1]+"-"+t[0]}},o=(Rexbuilder_Util_Editor.manageElement=!0,Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}));Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockContentPosition",activeBlockData:i,mousePosition:o})}),Rexbuilder_Util.$document.on("click",".edit-block-accordion",function(e){var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=(e.children(".rexbuilder-block-data"),t.attr("data-rexlive-section-id")),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e=e.find(".rex-accordion"),i="",r="",l=e.hasClass("open")?"open":"close",d=e.hasClass("no-toggle")?"hide":"visible",n="",c=!1,s=e.find(".rex-accordion--toggle").clone(),s=(s.find(".rex-accordion--toggle-icon").remove(),0<e.length&&(i=s.html().trim(),r=e.find(".rex-accordion--content").html().trim(),n=e.find(".rex-accordion--toggle-icon").html().trim(),e.find(".rex-accordion--content").hasClass("rex-accordion--gallery"))&&(c=!0),{blockData:{target:{sectionID:a,modelNumber:t,rexID:o},accordion:{header:i,icon:n,content:r,state:l,toggle_state:d,is_gallery:c}}}),e=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockAccordion",activeBlockData:s});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}),Rexbuilder_Util.$document.on("click",".edit-block-slideshow",function(e){var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),a=(e.children(".rexbuilder-block-data"),t.attr("data-rexlive-section-id")),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",i=[],e=e.find(".rex-slideshow");0<e.length&&e.find(".rex-slideshow__slide").each(function(e,t){i.push(t.innerHTML)}),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockSlideshow",activeBlockData:{blockData:{target:{sectionID:a,modelNumber:t,rexID:o},slideshow:{slides:i}}}})}),Rexbuilder_Util.$document.on("rexlive:updateSlideshow",function(e){var e=e.settings.data_to_send,t=e.target,t=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]');t.find(".text-wrap.medium-editor-element").html(e.slideshow.slides)}),Rexbuilder_Util.$document.on("click",".edit-block-gradient",function(e){e=v(e.target).parents(".grid-stack-item");i(e)}),Rexbuilder_Util.$document.on("rexlive:updateAccordion",function(e){var e=e.settings.data_to_send,t=e.target,t=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),o=t.find(".text-wrap.medium-editor-element").find(".rex-accordion");0<o.length?o.replaceWith(e.accordion.complete):t.find(".text-wrap.medium-editor-element").html(e.accordion.complete),Rexbuilder_Util_Editor.builderEdited(!1)}),Rexbuilder_Util.$document.on("click",".edit-block-image-position",function(e){var t=v(e.target).parents(".grid-stack-item"),o=t.parents(".rexpansive_section"),a=t.attr("data-rexbuilder-block-id"),i=t.children(".rexbuilder-block-data"),r=o.attr("data-rexlive-section-id"),l=t.find(".grid-item-content"),o=void 0!==o.attr("data-rexlive-model-number")?o.attr("data-rexlive-model-number"):"",d=void 0===i.attr("data-id_image_bg_block")?"":i.attr("data-id_image_bg_block"),n=void 0===i.attr("data-image_bg_block")?"":i.attr("data-image_bg_block"),c=void 0===l.attr("data-background_image_width")?"":l.attr("data-background_image_width"),l=void 0===l.attr("data-background_image_height")?"":l.attr("data-background_image_height"),s=void 0===i.attr("data-image_bg_elem_active")||i.attr("data-image_bg_elem_active"),b="fixed"==t.parents(".grid-stack-row").attr("data-layout")?"full":"natural",d={idImage:d,imageUrl:n,width:c,height:l,typeBGimage:void 0===i.attr("data-type_bg_block")?b:i.attr("data-type_bg_block"),active:s,defaultTypeImage:b,photoswipe:void 0===i.attr("data-photoswipe")?"":i.attr("data-photoswipe"),target:{sectionID:r,modelNumber:o,rexID:a}},n=void 0===i.attr("data-block_flex_img_position")?"":i.attr("data-block_flex_img_position"),c=(n=""===n?"center middle":n).split(" "),l={imageBG:d,flexImgPosition:{target:{sectionID:r,modelNumber:o,rexID:a},position:c[1]+"-"+c[0]},sectionTarget:{sectionID:r,modelNumber:o},blockState:{rexID:a,x:parseInt(t.attr("data-gs-x")),y:parseInt(t.attr("data-gs-y")),w:parseInt(t.attr("data-gs-width")),h:parseInt(t.attr("data-gs-height"))}},s=(Rexbuilder_Util_Editor.manageElement=!0,Rexbuilder_Util_Editor.getMousePosition(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}));Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockImageSettings",activeBlockData:l,mousePosition:s})}),Rexbuilder_Util.$document.on("rexlive:SetcustomHTML",function(e){CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:saveHTMLContent",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:inlineImageEdit",function(e){CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:inlineImageEdit",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:inlineImageClose",function(e){CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:inlineImageClose"})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineVideoEditor",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineVideoEditor:Transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$document.on("rexlive:mediumEditor:inlineSVG",function(e){TextEditor.triggerMEEvent({name:"rexlive:mediumEditor:inlineSVG:transfer",data:e.settings.data_to_send,editable:null})}),Rexbuilder_Util.$rexContainer.on("click",".edit-block-color-background",I),Rexbuilder_Util.$rexContainer.on("click",".edit-block-overlay-color",w),Rexbuilder_Util.$rexContainer.on("click",".synch-block-content",function(e){e.preventDefault();var e=v(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),e=e.attr("data-rexbuilder-block-id"),o=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:reSynchContent",data:{targetInfo:{sectionID:o,modelNumber:t,rexID:e}}})}),r=v(document.getElementById("global-spectrum-block-background")),l=v(document.getElementById("global-spectrum-block-overlay")),s=c=null,k={data_to_send:{color:"",active:!(_={data_to_send:{color:"",active:n=d=!1,target:{sectionID:"",modelNumber:"",rexID:""}}}),target:{sectionID:"",modelNumber:"",rexID:""}}},r.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Color_Palette.show({$target:r,action:"background",object:"block"})},move:h,hide:f}),l.spectrum({color:"",showAlpha:!0,allowEmpty:!0,replacerClassName:"spectrum-placeholder",preferredFormat:"hex",showPalette:!1,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexbuilder_Overlay_Palette.show({$target:l,action:"overlay",object:"block"})},move:y,hide:C});var e=o.clone(),t=(r.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==g&&(r.spectrum("set",g),r.spectrum("container").find(".sp-input").trigger("change")),r.spectrum("hide")}),(e=a.clone()).find(".rex-modal-option")),e=(r.spectrum("container").append(e),t.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":r.spectrum("hide");break;case"reset":null!==g&&(r.spectrum("set",g),r.spectrum("container").find(".sp-input").trigger("change"))}}),o.clone());l.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),null!==x&&(l.spectrum("set",x),l.spectrum("container").find(".sp-input").trigger("change")),l.spectrum("hide")}),e=(t=a.clone()).find(".rex-modal-option"),l.spectrum("container").append(t),e.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":l.spectrum("hide");break;case"reset":null!==x&&(l.spectrum("set",x),l.spectrum("container").find(".sp-input").trigger("change"))}}),r.spectrum("container").draggable(),l.spectrum("container").draggable()},updateBlockBackgroundImageTool:function(e,t){e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image").addClass("tool-button--image-preview").css("background-image","url("+t.urlImage+")").parent().removeClass("tool-button--hide")},updateBlockImagePositionTool:function(e,t){e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-image-position").removeClass("tool-button--hide")},updateBlockBackgroundColorToolLive:function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockBackgroundColorTool:function(e,t,o){var a=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t&&o?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),a):(a.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockBackgroundGradientTool:function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-color-background"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-color-background");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayColorToolLive:function(e,t){var o=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.parents(".grid-stack-item").find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayColorTool:function(e,t,o){var a=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t&&o?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background-color",t),a):(a.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},updateBlockOverlayGradientTool:function(e,t){var o=e.find(".rexlive-block-toolbox.top-tools").find(".edit-block-overlay-color"),e=e.find(".rexlive-block-toolbox.bottom-tools").find(".edit-block-overlay-color");(""!=t?(e.parent().addClass("tool-button--picker-preview").removeClass("tool-button--hide"),e.siblings(".tool-button--color-preview").css("background",t),o):(o.parent().removeClass("tool-button--hide"),e)).parent().addClass("tool-button--hide")},openBlockBackgroundGradient:i,openBlockOverlayGradient:function(e){var t=(e=0===e.length?c:e).parents(".rexpansive_section"),o=e.attr("data-rexbuilder-block-id"),e=e.children(".rexbuilder-block-data"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",e={blockData:{gradient:e.attr("data-overlay_block_color"),target:{sectionID:a,modelNumber:t,rexID:o}}},a=(Rexbuilder_Util_Editor.manageElement=!0,{eventName:"rexlive:editBlockOverlayGradient",activeBlockData:e});Rexbuilder_Util_Editor.sendParentIframeMessage(a)},updateTextTool:function(e){var t=(o=v(e).parents(".grid-stack-item").find(".block-toolBox__editor-tools")).find(".edit-block-content"),o=o.find(".edit-block-content-position");u(e)?(t.removeClass("tool-button--hide"),o.addClass("tool-button--hide")):(t.addClass("tool-button--hide"),o.removeClass("tool-button--hide"))}}}(jQuery);
!function(g){"use strict";g(function(){var l=g(document);l.on("rexlive:set_row_fullHeight",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),i={fullHeight:i.attr("data-full-height"),galleryInstance:a},e=(a.updateFullHeight("true"==e.fullHeight.toString()),{fullHeight:e.fullHeight.toString(),galleryInstance:a});Rexbuilder_Util_Editor.pushAction(t,"updateSectionFullHeight",e,i),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:set_gallery_layout",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),o={collapse_grid:t.attr("data-rex-collapse-grid"),gridLayout:a.settings.galleryLayout,galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},a.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!0,t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionLayoutTool(t,e),Rexbuilder_Dom_Util.updateGridLayoutDomProperties(i,e.layout),a.updateGridLayout(e.layout,o)}),l.on("rexlive:galleryLayoutChanged",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={gridLayout:e.settings.layout,galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionLayout=!1,Rexbuilder_Util_Editor.pushAction(a,"updateSectionLayout",e,i)}),l.on("rexlive:set_row_separatos",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),o=a.createActionDataMoveBlocksGrid(),o={rowDistances:{gutter:parseInt(i.attr("data-separator")),top:parseInt(i.attr("data-row-separator-top")),bottom:parseInt(i.attr("data-row-separator-bottom")),right:parseInt(i.attr("data-row-separator-right")),left:parseInt(i.attr("data-row-separator-left"))},galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},o)};Rexbuilder_Util_Editor.updatingRowDistances=!0,Rexbuilder_Dom_Util.updateRowDistancesData(i,e.distances),a.updateRowDistances(e.distances,o),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"block_distance"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_top"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_right"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_separator_left"),Rexbuilder_Section.fixBlockToolsAccordingToSeparator(t,e.distances),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:rowDistancesApplied",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={rowDistances:jQuery.extend({},!0,e.settings.newDistances),galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingRowDistances=!1,Rexbuilder_Util_Editor.pushAction(a,"updateGridDistances",e,i)}),l.on("rexlive:set_section_margins",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=Rexbuilder_Util.getGalleryInstance(t),a=i.createActionDataMoveBlocksGrid(),o=parseInt(t.css("margin-top").split("px")[0]),d=parseInt(t.css("margin-right").split("px")[0]),r=parseInt(t.css("margin-bottom").split("px")[0]),l=parseInt(t.css("margin-left").split("px")[0]),o={marginsSection:{top:isNaN(o)?0:o,right:isNaN(d)?0:d,bottom:isNaN(r)?0:r,left:isNaN(l)?0:l},galleryInstance:i,singleWidth:i.properties.singleWidth,singleHeight:i.properties.singleHeight,blocksDisposition:g.extend(!0,{},a)};Rexbuilder_Util_Editor.updatingSectionMargins=!0,Rexbuilder_Dom_Util.updateSectionMarginsData(t,e.margins),i.updateRowSectionMargins(e.margins,o),Rexbuilder_Section.fixSectionToolbox(t,e.margins),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"margin"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_top"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_bottom"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_right"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_margin_left"),t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section"))}),l.on("rexlive:sectionMarginsApplied",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,a=e.settings.$section,e={marginsSection:jQuery.extend({},!0,e.settings.newMargins),galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())};Rexbuilder_Util_Editor.updatingSectionMargins=!1,Rexbuilder_Util_Editor.pushAction(a,"updateSectionMargins",e,i)}),l.on("rexlive:set_section_width",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.find(".grid-stack-row"),a=Rexbuilder_Util.getGalleryInstance(t),e=""+e.sectionWidth.width+e.sectionWidth.type,o=(Rexbuilder_Util_Editor.updatingSectionWidth=!0,"none"==i.parent().css("max-width")?"100%":i.parent().css("max-width")),i=i.parent().hasClass("full-disposition")?"full":"boxed",d=a.createActionDataMoveBlocksGrid(),o={section_width:o,dimension:i,galleryInstance:a,singleWidth:a.properties.singleWidth,singleHeight:a.properties.singleHeight,blocksDisposition:g.extend(!0,{},d)};Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Section_Editor.updateSectionDimensionTool(t,{dimension:"100%"==e?"full":"boxed"}),a.updateSectionWidthWrap(e,o),Rexbuilder_Dom_Util.updateSectionWidthData(t,{sectionWidth:e,widthType:"100%"==e?"full":"boxed"}),t.attr("data-rexlive-section-edited",!0)}),l.on("rexlive:sectionWidthApplyed",function(e){var t=e.settings.galleryEditorInstance,i=e.settings.reverseData,e=e.settings.$section,a="none"==t.$element.parent().css("max-width")?"100%":t.$element.parent().css("max-width"),o=t.$element.parent().hasClass("full-disposition")?"full":"boxed",a=(Rexbuilder_Util.editedDataInfo.setSectionData(e.attr("data-rexlive-section-id"),"dimension"),Rexbuilder_Util.editedDataInfo.setSectionData(e.attr("data-rexlive-section-id"),"section_width"),{section_width:a,dimension:o,galleryInstance:t,singleWidth:t.properties.singleWidth,singleHeight:t.properties.singleHeight,blocksDisposition:g.extend(!0,{},t.createActionDataMoveBlocksGrid())});Rexbuilder_Util_Editor.updatingSectionWidth=!1,Rexbuilder_Util_Editor.pushAction(e,"updateSectionWidth",a,i)}),l.on("rexlive:set_row_photoswipe",function(e){for(var t=e.settings.data_to_send,e=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]'),i=e.find(".grid-stack-row"),a={elements:Rexbuilder_Live_Utilities.getElementsPhotoswipe(i)},o=("true"==t.photoswipe.toString()?Rexbuilder_Dom_Util.enablePhotoswipeAllBlocksSection(e):"false"==t.photoswipe.toString()&&Rexbuilder_Dom_Util.removePhotoswipeAllBlocksSection(e),Array.prototype.slice.call(e.get(0).getElementsByClassName("perfect-grid-item"))),d=o.length,r=0;r<d;r++)Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionTarget.sectionID,o[r].getAttribute("data-rexbuilder-block-id"),"photoswipe");i=Rexbuilder_Live_Utilities.getElementsPhotoswipe(i);Rexbuilder_Util_Editor.pushAction(e,"updateSectionPhotoswipe",{elements:i},a),e.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(e.hasClass("rex-model-section"))}),l.on("rexlive:set_row_hold_grid",function(e){var t=e.settings.data_to_send,t=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]');t.attr("data-rex-collapse-grid")===e.settings.data_to_send.holdGrid&&t.find(".collapse-grid").trigger("click")}),l.on("rexlive:change_section_name",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i={sectionName:t.attr("data-rexlive-section-name")},a=(Rexbuilder_Dom_Util.updateSectionName(t,e.sectionName),{sectionName:e.sectionName});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"section_name"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionName",a,i)}),l.on("rexlive:change_section_nav_label",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i={sectionNavLabel:t.children(".section-data").attr("data-section_nav_label")},a=(Rexbuilder_Dom_Util.updateSectionNavLabel(t,e.sectionNavLabel),{sectionNavLabel:e.sectionNavLabel});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"section_nav_label"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionNavLabel",a,i)}),l.on("rexlive:apply_section_custom_classes",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data").attr("data-custom_classes"),i={$target:t,classes:(i=i.trim()).split(/\s+/)},a=(Rexbuilder_Dom_Util.updateCustomClasses(t,e.customClasses),{$target:t,classes:e.customClasses});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"custom_classes"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateCustomClasses",a,i)}),l.on("rexlive:update_blocks_sizes",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor.updateBlocksSizes(e.blocksState)}),l.on("rexlive:update_block_size",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]');t.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor.updateBlockSize(e.blockState)}),l.on("rexlive:SetCustomCSS",function(e){var e=e.settings.data_to_send,t={css:Rexbuilder_Util_Editor.$styleElement.text()},e=(Rexbuilder_Dom_Util.updateCustomCSS(e.customCSS),{css:e.customCSS});Rexbuilder_Util_Editor.pushAction("document","updateCustomCSS",e,t),Rexbuilder_Util_Editor.builderEdited(!1)}),l.on("rexlive:apply_background_color_section",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-color_bg_section"),active:i.attr("data-color_bg_section_active")},e=(Rexbuilder_Dom_Util.updateSectionBackgroundColor(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundColor",e,i)}),l.on("rexlive:updateSectionBackgroundGradient",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-color_bg_section"),active:i.attr("data-color_bg_section_active")},e=(Rexbuilder_Dom_Util.updateSectionBackgroundGradient(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"color_bg_section_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionBackgroundGradient",e,i)}),l.on("rexlive:updateSectionOverlayGradient",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-row_overlay_color"),active:i.attr("data-row_overlay_active")},a=(Rexbuilder_Dom_Util.updateSectionOverlayGradient(t,e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_active"),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlayGradient",a,i)}),l.on("rexlive:change_section_overlay",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),i={color:i.attr("data-row_overlay_color"),active:i.attr("data-row_overlay_active")},e=(Rexbuilder_Dom_Util.updateSectionOverlay(t,e),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_color"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"row_overlay_active"),{color:e.color,active:e.active});t.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionOverlay",e,i)}),l.on("rexlive:apply_background_image_section",function(e){var e=e.settings.data_to_send,t=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),i=t.children(".section-data"),a=void 0===i.attr("data-id_image_bg_section")?"":i.attr("data-id_image_bg_section"),o=void 0===i.attr("data-image_size")?"":i.attr("data-image_size"),d=void 0===i.attr("data-image_bg_section")?"":i.attr("data-image_bg_section"),r=void 0===t.attr("data-background_image_width")?"":t.attr("data-background_image_width"),l=void 0===t.attr("data-background_image_height")?"":t.attr("data-background_image_height"),i={active:void 0===i.attr("data-image_bg_section_active")||i.attr("data-image_bg_section_active"),idImage:a,image_size:o,urlImage:d,width:r,height:l},a=(Rexbuilder_Dom_Util.updateImageBG(t,e),{active:e.active,idImage:e.idImage,urlImage:e.urlImage,image_size:e.image_size,width:e.width,height:e.height});t.attr("data-rexlive-section-edited",!0),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_bg_section_active"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_width"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_height"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"id_image_bg_section"),Rexbuilder_Util.editedDataInfo.setSectionData(e.sectionTarget.sectionID,"image_size"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t),Rexbuilder_Util_Editor.builderEdited(t.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(t,"updateSectionImageBG",a,i)}),l.on("rexlive:update_section_background_video",function(e){var t=e.settings.data_to_send,e=""!=t.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"][data-rexlive-model-number="'+t.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionTarget.sectionID+'"]'),i=e.children(".section-data"),a=void 0===i.attr("data-video_mp4_url")?"":i.attr("data-video_mp4_url"),o=void 0===i.attr("data-video_bg_url_section")?"":i.attr("data-video_bg_url_section"),d=void 0===i.attr("data-video_bg_id_section")?"":i.attr("data-video_bg_id_section"),r=void 0===i.attr("data-video_bg_width_section")?"":i.attr("data-video_bg_width_section"),l=void 0===i.attr("data-video_bg_height_section")?"":i.attr("data-video_bg_height_section"),i=void 0===i.attr("data-video_bg_url_vimeo_section")?"":i.attr("data-video_bg_url_vimeo_section"),n="",d=(""!=d?n="mp4":""!=i?n="vimeo":""!=o&&(n="youtube"),{mp4Data:{idMp4:d,linkMp4:a,width:r,height:l},vimeoUrl:i,youtubeUrl:o,audio:!1,typeVideo:n}),a={mp4Data:{idMp4:t.videoMp4.idMp4,linkMp4:t.videoMp4.linkMp4,width:t.videoMp4.width,height:t.videoMp4.height},vimeoUrl:t.urlVimeo,youtubeUrl:t.urlYoutube,audio:!1,typeVideo:t.typeVideo},r=(Rexbuilder_Dom_Util.updateVideos(e,a),{mp4Data:{idMp4:t.videoMp4.idMp4,linkMp4:t.videoMp4.linkMp4,width:t.videoMp4.width,height:t.videoMp4.height},vimeoUrl:t.urlVimeo,youtubeUrl:t.urlYoutube,audio:!1,typeVideo:t.typeVideo});switch(r.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_id_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_mp4_url"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_width_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_height_section");break;case"youtube":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_section");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_vimeo_section");break;default:switch(n){case"mp4":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_id_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_mp4_url"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_width_section"),Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_height_section");break;case"youtube":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_section");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setSectionData(t.sectionTarget.sectionID,"video_bg_url_vimeo_section")}}e.attr("data-rexlive-section-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e),Rexbuilder_Util_Editor.builderEdited(e.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(e,"updateSectionVideoBG",r,d)}),l.on("rexlive:apply_background_color_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-color_bg_block"),active:void 0===a.attr("data-color_bg_elem_active")||a.attr("data-color_bg_elem_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockBackgroundColor(e),i.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block_active"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockBackgroundColor",e,a)}),l.on("rexlive:updateBlockBackgroundGradient",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-color_bg_block"),active:void 0===a.attr("data-color_bg_elem_active")||a.attr("data-color_bg_elem_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockBackgroundGradient(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"color_bg_block_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockBackgroundGradient",e,a)}),l.on("rexlive:updateBlockOverlayGradient",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:a.attr("data-overlay_block_color"),active:void 0===a.attr("data-overlay_block_color_active")||a.attr("data-overlay_block_color_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockOverlayGradient(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockOverlayGradient",e,a)}),l.on("rexlive:change_block_overlay",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,color:void 0!==a.attr("data-overlay_block_color")?a.attr("data-overlay_block_color"):"",active:void 0!==a.attr("data-overlay_block_color_active")&&a.attr("data-overlay_block_color_active")},e={$elem:i,color:e.color,active:e.active};Rexbuilder_Dom_Util.updateBlockOverlay(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"overlay_block_color_active"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockOverlay",e,a)}),l.on("rexlive:apply_background_image_block",function(e){var e=e.settings.data_to_send,t=(Rexbuilder_Util_Editor.updatingImageBg=!0,e.target),i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.get(0),o=i.find(".grid-item-content"),d=i.children(".rexbuilder-block-data"),r=i.parents(".rexpansive_section"),l=Rexbuilder_Util.getGalleryInstance(r),n=("top"===e.tools&&(i.find(".rexlive-block-toolbox.top-tools .edit-block-image").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),i.find(".rexlive-block-toolbox.bottom-tools .edit-block-image").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),void 0===d.attr("data-id_image_bg_block")?"":d.attr("data-id_image_bg_block")),s=void 0===d.attr("data-image_bg_block")?"":d.attr("data-image_bg_block"),c=void 0===o.attr("data-background_image_width")?"":o.attr("data-background_image_width"),u=void 0===o.attr("data-background_image_height")?"":o.attr("data-background_image_height"),_=void 0===d.attr("data-image_bg_elem_active")||d.attr("data-image_bg_elem_active"),b="true"==_.toString()?"fixed"==i.parents(".grid-stack-row").attr("data-layout")?"full":"natural":"",_={$itemContent:o,imageOpt:{active:_,idImage:n,urlImage:s,width:c,height:u,typeBGimage:void 0===d.attr("data-type_bg_block")?b:d.attr("data-type_bg_block"),photoswipe:void 0===d.attr("data-photoswipe")?"":d.attr("data-photoswipe")}},n={active:e.active,idImage:e.idImage,urlImage:e.urlImage,width:e.width,height:e.height,typeBGimage:e.typeBGimage,photoswipe:e.photoswipe},s=(Rexbuilder_Dom_Util.updateImageBG(o,n),"masonry"===l.settings.galleryLayout&&l.updateElementHeight(a),{$itemContent:o,imageOpt:n});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_bg_url"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"id_image_bg"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_size"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"image_bg_elem_active"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"type_bg_image"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r),Rexbuilder_Util_Editor.builderEdited(r.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(r,"updateBlockImageBG",s,_),Rexbuilder_Util_Editor.updatingImageBg=!1}),l.on("rexlive:apply_photoswipe_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,photoswipe:void 0===a.attr("data-photoswipe")?"":a.attr("data-photoswipe")},e={$elem:i,photoswipe:e.photoswipe};Rexbuilder_Dom_Util.updateBlockPhotoswipe(e),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"photoswipe"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockPhotoswipe",e,a)}),l.on("rexlive:update_block_background_video",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.find(".grid-item-content"),o=i.children(".rexbuilder-block-data"),d=i.parents(".rexpansive_section"),r=(Rexbuilder_Util.getGalleryInstance(d),("youtube"==e.typeVideo&&""!==e.urlYoutube||"vimeo"==e.typeVideo&&""!==e.urlVimeo||"mp4"==e.typeVideo&&""!==e.videoMp4.idMp4)&&"top"===e.tools&&(i.find(".rexlive-block-toolbox.top-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").addClass("tool-button--hide"),i.find(".rexlive-block-toolbox.bottom-tools .edit-block-video-background").parent(".tool-button--double-icon--wrap").removeClass("tool-button--hide")),void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url")),l=void 0===o.attr("data-video_bg_id")?"":o.attr("data-video_bg_id"),n=void 0===o.attr("data-video_bg_url")?"":o.attr("data-video_bg_url"),o=void 0===o.attr("data-video_bg_url_vimeo")?"":o.attr("data-video_bg_url_vimeo"),s=a.children(".rex-video-wrap"),c="",u="",s=(0!=s.length&&(c=parseInt(s.attr("data-rex-video-width")),u=parseInt(s.attr("data-rex-video-height"))),0!=a.children(".rex-video-toggle-audio").length),_="",l=(""!=l?_="mp4":""!=n?_="youtube":""!=o&&(_="vimeo"),{$itemContent:a,videoOpt:{mp4Data:{idMp4:l,linkMp4:r,width:c,height:u},vimeoUrl:o,youtubeUrl:n,audio:s,typeVideo:_}}),r={mp4Data:{idMp4:e.videoMp4.idMp4,linkMp4:e.videoMp4.linkMp4,width:e.videoMp4.width,height:e.videoMp4.height},vimeoUrl:e.urlVimeo,youtubeUrl:e.urlYoutube,audio:"true"==e.audio.toString(),typeVideo:e.typeVideo},c=(Rexbuilder_Dom_Util.updateVideos(a,r),{$itemContent:a,videoOpt:r});switch(i.attr("data-rexlive-element-edited",!0),s!==r.audio&&Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_has_audio"),e.typeVideo){case"mp4":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_id"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_mp4_url");break;case"youtube":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_youtube");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_vimeo");break;default:switch(_){case"mp4":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_id"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_width"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_height"),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_mp4_url");break;case"youtube":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_youtube");break;case"vimeo":Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"video_bg_url_vimeo")}}"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(d),Rexbuilder_Util_Editor.builderEdited(d.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(d,"updateBlockVideoBG",c,l)}),l.on("rexlive:apply_paddings_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),d=Rexbuilder_Util.getGalleryInstance(o),a=void 0===a.attr("data-block_padding")?"":a.attr("data-block_padding"),a={$elem:i,dataPadding:Rexbuilder_Util.getPaddingsDataString(a)},d=(Rexbuilder_Util_Editor.updatingPaddingBlock=!0,Rexbuilder_Dom_Util.updateBlockPaddings(i,e.paddings),"masonry"==d.settings.galleryLayout&&(d.updateElementHeight(i[0],!0),d.updateSizeViewerSizes(i[0])),Rexbuilder_Util_Editor.updatingPaddingBlock=!1,{$elem:i,dataPadding:e.paddings});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_padding"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockPadding",d,a)}),l.on("rexlive:apply_flex_position_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a=void 0===a.attr("data-block_flex_position")?"":a.attr("data-block_flex_position"),d={x:"",y:""},a=(""!=a&&(a=a.split(" "),d.x=a[0],d.y=a[1]),{$elem:i,dataPosition:d}),d=(Rexbuilder_Dom_Util.updateFlexPostition(i,e.position),{$elem:i,dataPosition:e.position});i.attr("data-rexlive-element-edited",!0),Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_flex_position"),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockFlexPosition",d,a)}),l.on("rexlive:apply_flex_image_position_block",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a=void 0===a.attr("data-block_flex_img_position")?"":a.attr("data-block_flex_img_position"),d={x:"",y:""},a=(""!=a&&(a=a.split(" "),d.x=a[0],d.y=a[1]),{$elem:i,dataPosition:d}),d=(Rexbuilder_Dom_Util.updateImageFlexPostition(i,e.position),{$elem:i,dataPosition:e.position});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_flex_img_position"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockImageFlexPosition",d,a)}),l.on("rexlive:apply_block_custom_classes",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$target:i,classes:(void 0===a.attr("data-block_custom_class")?"":a.attr("data-block_custom_class")).trim().split(/\s+/)},e=(Rexbuilder_Dom_Util.updateCustomClasses(i,e.customClasses),{$target:i,classes:e.customClasses});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"block_custom_class"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateCustomClasses",e,a)}),l.on("rexlive:apply_block_link_url",function(e){var e=e.settings.data_to_send,t=e.target,i=(""!=t.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"][data-rexlive-model-number="'+t.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+t.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+t.rexID+'"]'),a=i.children(".rexbuilder-block-data"),o=i.parents(".rexpansive_section"),a={$elem:i,url:void 0===a.attr("data-linkurl")?"":a.attr("data-linkurl")},e=(Rexbuilder_Dom_Util.updateBlockUrl(i,e.url),{$elem:i,url:e.url});Rexbuilder_Util.editedDataInfo.setBlockData(t.sectionID,t.rexID,"linkurl"),i.attr("data-rexlive-element-edited",!0),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(o),Rexbuilder_Util_Editor.builderEdited(o.hasClass("rex-model-section")),Rexbuilder_Util_Editor.pushAction(o,"updateBlockUrl",e,a)}),l.on("rexlive:setTextGradient",function(e){CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:setTextGradient",data:e.settings.data_to_send,editable:null})}),l.on("rexlive:close_modal",function(e){CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:closeModal",data:e.settings.data_to_send})}),l.on("rexlive:editModel",function(e){var e=e.settings.data_to_send,e=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),e=e.find(".update-model-button"),t={$button:e,lock:!0},i={$button:e,lock:!1};Rexbuilder_Dom_Util.updateLockEditModel(e,!1),Rexbuilder_Util.$rexContainer.addClass("editing-model"),Rexbuilder_Util_Editor.pushAction("document","updateLockButton",i,t)}),l.on("rexlive:modelBecameSection",function(e){var e=e.settings.data_to_send,t=null,i=null,a=("default"==Rexbuilder_Util.activeLayout&&(t=Rexbuilder_Util.getDefaultLayoutState(),i=Rexbuilder_Util.getPageCustomizationsDom()),e.sectionTarget.sectionID),o=e.modelID,d=e.sectionTarget.modelNumber,r=""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a+'"][data-rexlive-model-number="'+d+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+a+'"]'),l={modelID:o,modelName:e.modelName,modelNumber:d,sectionID:r.attr("data-rexlive-section-id"),isModel:!0,$section:r,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=t?jQuery.extend(!0,[],t):null},a=e.sectionTarget.sectionID,o=e.modelID,d=e.sectionTarget.modelNumber,e=Rexbuilder_Util.createSectionID();if(null!=i){for(var n,s={section_rex_id:e,targets:[],section_is_model:!1,section_model_id:-1,section_model_number:-1,section_hide:!1,section_created_live:!0},c=0;c<i.length;c++){for(n=0;n<i[c].sections.length;n++)if(i[c].sections[n].section_is_model){if(i[c].sections[n].section_model_id==o&&i[c].sections[n].section_model_number==d)break}else if(a==i[c].sections[n].section_rex_id)break;i[c].sections.splice(n,1,jQuery.extend(!0,{},s))}for(Rexbuilder_Util.updatePageCustomizationsDomOrder(i),n=0;n<t.length;n++)if(t[n].section_is_model){if(t[n].section_model_id==o&&t[n].section_model_number==d)break}else if(a==t[n].section_rex_id)break;s.targets=Rex_Save_Listeners.createTargets(r,"default"),t.splice(n,1,s),Rexbuilder_Util.updateDefaultLayoutState({pageData:t})}Rexbuilder_Dom_Util.updateSectionBecameModel({modelID:"",modelName:"",modelNumber:"",sectionID:e,isModel:!1,$section:r});e={modelID:"",modelName:"",modelNumber:"",sectionID:e,isModel:!1,$section:r,layoutsOrder:null!=i?jQuery.extend(!0,[],i):null,stateDefault:null!=t?jQuery.extend(!0,[],t):null};Rexbuilder_Util_Editor.pushAction(r,"sectionBecameModel",e,l)}),l.on("Buttons: rexlive:update_button_page",function(e){var e=e.settings.data_to_send,t={buttonProperties:jQuery.extend(!0,{},e.reverseButtonData)},i={buttonProperties:jQuery.extend(!0,{},e.actionButtonData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexbutton.updateButton(i),Rexbuilder_Util_Editor.pushAction("document","updateRexButton",i,t)}),l.on("rexlive:update_wcpf7_column_content_page",function(e){var e=e.settings.data_to_send,t={columnContentData:jQuery.extend(!0,{},e.reverseColumnContentData)},i={columnContentData:jQuery.extend(!0,{},e.actionColumnContentData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateColumnContent(i),Rexbuilder_Rexwpcf7_Editor.updateColumnContentShortcode(i),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7ColumnContent",i,t)}),l.on("rexlive:update_wcpf7_page",function(e){var e=e.settings.data_to_send,t={elementData:jQuery.extend(!0,{},e.reverseFormData)},i={elementData:jQuery.extend(!0,{},e.actionFormData)};e.needToSave&&Rexbuilder_Util_Editor.builderEdited(!1),Rexbuilder_Rexwpcf7.updateForm(i),Rexbuilder_Util_Editor.pushAction("document","updateRexWpcf7",i,t)}),l.on("rexlive:getCustomCss",function(){var e=g("#rexpansive-builder-style-inline-css").text().replace(/^\s+|\s+$/g,"");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openCssEditor",currentStyle:e})}),l.on("rexlive:apply_reSynchContent",function(e){if("default"!=Rexbuilder_Util.activeLayout){var i=e.settings.data.targetInfo,e=document.getElementById("rexbuilder-layout-data").querySelector('.customization-wrap[data-customization-name="default"]').querySelector('.section-targets[data-section-rex-id="'+i.sectionID+'"]').textContent,a=""!==e?JSON.parse(e):{};if("self"===i.rexID){Rexbuilder_Dom_Util.updateBulkSection(i,Rexbuilder_Util.editedDataInfo.getSectionData(i.sectionID),a),Rexbuilder_Util.editedDataInfo.setBulkSectionData(i.sectionID,!1);for(var t,e=(s=""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]')).find(".perfect-grid-gallery"),o=a.length,d=0;d<o;d++)if("self"===a[d].name){t=a[d].props;break}var r=e.data().plugin_perfectGridGalleryEditor,l=Rexbuilder_Util.isMobile()?"masonry":t.layout,n={layout:l,sectionTarget:{modelNumber:i.modelNumber,sectionID:i.sectionID}};Rexbuilder_Section_Editor.updateSectionLayoutTool(s,n),Rexbuilder_Dom_Util.updateGridLayoutDomProperties(e,n.layout),r.updateGridLayout(n.layout),a.forEach(function(e){var t;"self"!==e.name&&(e={sectionID:i.sectionID,modelNumber:i.modelNumber,rexID:e.name},0!==(t=s.find('.rex-hide-element[data-rexbuilder-block-id="'+e.rexID+'"]')).length&&Rexbuilder_Dom_Util.updateRemovingBlock(t,!1,r),Rexbuilder_Dom_Util.updateBulkBlock(e,Rexbuilder_Util.editedDataInfo.getBlockData(e.sectionID,e.rexID),a),Rexbuilder_Util.editedDataInfo.setBulkBlockData(e.sectionID,e.rexID,!1))}),s.children(".section-data").attr("data-dimension")!==t.dimension&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(s,{dimension:"100%"===t.section_width?"full":"boxed"}),r.updateSectionWidthWrap(t.section_width),r.updateGridstackWidth(),Rexbuilder_Dom_Util.updateSectionWidthData(s,{sectionWidth:t.section_width,widthType:"100%"===t.section_width?"full":"boxed"})),"masonry"!=l||t.collapse_grid||r.updateBlocksHeight(),(Rexbuilder_Util.isMobile()||t.collapse_grid)&&(r.collapseElementsProperties(),r.collapseElements()),Rexbuilder_Dom_Util.updateSectionFullHeight({galleryInstance:r,fullHeight:t.full_height}),Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:highlightRowSetData",editedData:t}),r._updateElementsSizeViewers()}else{Rexbuilder_Dom_Util.updateBulkBlock(i,Rexbuilder_Util.editedDataInfo.getBlockData(i.sectionID,i.rexID),a),Rexbuilder_Util.editedDataInfo.setBulkBlockData(i.sectionID,i.rexID,!1);var s,n=(s=(e=(""!=i.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"][data-rexlive-model-number="'+i.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+i.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+i.rexID+'"]')).parents(".rexpansive_section")).children(".section-data"),r=s.find(".grid-stack-row").data("plugin_perfectGridGalleryEditor"),l=e.get(0);"masonry"===n.attr("data-layout")&&"false"==s.attr("data-rex-collapse-grid")?r.updateElementHeight(l):!Rexbuilder_Util.isMobile()&&"true"!==s.attr("data-rex-collapse-grid")||(l.setAttribute("data-gs-width",12),l.setAttribute("data-gs-x",0),e=r.getBlockSizeOnCollapse(l),r.properties.gridstackInstance.update(l,parseInt(l.getAttribute("data-gs-x")),parseInt(l.getAttribute("data-gs-y")),e.width,e.height)),r.updateSizeViewerText(l)}Rexbuilder_Util_Editor.builderEdited(""!==i.modelNumber)}}),l.on("click",".builder-section-config",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.children(".section-data"),i=e.attr("data-rexlive-section-id"),a=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",o=e.find(".grid-stack-row"),d=o.data().plugin_perfectGridGalleryEditor.createActionDataMoveBlocksGrid().blocks.map(function(e){return{rexID:e.rexID,x:e.x,y:e.y,w:e.w,h:e.h}}),r=o.attr("data-layout"),l=o.attr("data-full-height"),n=o.parent().css("max-width"),s="100%"===n||"none"==n?"full":"boxed",c={gutter:parseInt(o.attr("data-separator")),top:parseInt(o.attr("data-row-separator-top")),bottom:parseInt(o.attr("data-row-separator-bottom")),right:parseInt(o.attr("data-row-separator-right")),left:parseInt(o.attr("data-row-separator-left"))},u={top:parseInt(e.css("margin-top").split("px")[0]),right:parseInt(e.css("margin-right").split("px")[0]),bottom:parseInt(e.css("margin-bottom").split("px")[0]),left:parseInt(e.css("margin-left").split("px")[0])},_=!0,b=[];if(o.children(".grid-stack-item:not(.removing_block)").each(function(e,t){var t=g(t),i=t.children(".rexbuilder-block-data"),t=Rexbuilder_Util_Editor.getTextWrapLength(t);""!=i.attr("data-image_bg_block")&&""!=i.attr("data-image_bg_block")&&0==t&&b.push(i)}),0<b.length)for(var x=0;x<b.length;x++)"true"!=b[x].attr("data-photoswipe").toString()&&(_=!1);else _=!1;o=e.attr("data-rexlive-section-name"),e=t.attr("data-custom_classes"),t=t.attr("data-section_nav_label");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:i,modelNumber:a},blocksState:d,activeLayout:r,fullHeight:l,section_width:n,dimension:s,rowDistances:c,marginsSection:u,photoswipe:_,sectionName:o,sectionNavLabel:void 0!==t?t:"",customClasses:e}})}),l.on("click",".add-new-block-image",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({sectionTarget:{sectionID:t,modelNumber:e},returnEventName:"rexlive:insert_image",eventName:"rexlive:openMediaUploader"})}),l.on("click",".add-new-block-video",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:t,modelNumber:e}})}),l.on("click",".add-new-block-slider",function(e){e.preventDefault();var e=g(e.target).parents(".rexpansive_section"),t=e.attr("data-rexlive-section-id"),e=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"";Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:addNewSlider",target:{sectionID:t,modelNumber:e}})}),l.on("click",".edit-background-section",function(e){e.preventDefault();var t,e=g(e.target).parents(".rexpansive_section"),i=e.attr("data-rexlive-section-id"),a=void 0!==e.attr("data-rexlive-model-number")?e.attr("data-rexlive-model-number"):"",o=e.children(".section-data"),d=void 0!==o.attr("data-color_bg_section")?o.attr("data-color_bg_section"):"",r=(""==d&&(d="rgba(0,0,0,0)"),void 0===o.attr("data-color_bg_section_active")||o.attr("data-color_bg_section_active")),l=void 0!==o.attr("data-row_overlay_color")?o.attr("data-row_overlay_color"):"",n=(""==l&&""==(l=void 0===o.attr("data-responsive_background")?"":o.attr("data-responsive_background"))&&(l="rgba(0,0,0,0)"),t=!(e.hasClass("active-large-overlay")||e.hasClass("active-medium-overlay")||e.hasClass("active-small-overlay"))&&void 0!==o.attr("data-row_overlay_active")&&o.attr("data-row_overlay_active"),e.find(".responsive-overlay")),n=(t||("default"==Rexbuilder_Util.activeLayout&&e.hasClass("active-large-overlay")&&(t=!0,e.removeClass("active-large-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-overlay",o),n.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&e.hasClass("active-medium-overlay")&&(t=!0,e.removeClass("active-medium-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-overlay",o),n.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&e.hasClass("active-small-overlay")&&(t=!0,e.removeClass("active-small-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-overlay",o),n.addClass("rex-active-overlay"))),void 0===o.attr("data-id_image_bg_section")?"":o.attr("data-id_image_bg_section")),s=void 0===o.attr("data-image_bg_section")?"":o.attr("data-image_bg_section"),c=void 0===e.attr("data-background_image_width")?"":e.attr("data-background_image_width"),e=void 0===e.attr("data-background_image_height")?"":e.attr("data-background_image_height"),u=void 0===o.attr("data-image_bg_section_active")||o.attr("data-image_bg_section_active"),_=void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url"),b=void 0===o.attr("data-video_bg_url_section")?"":o.attr("data-video_bg_url_section"),x=void 0===o.attr("data-video_bg_id_section")?"":o.attr("data-video_bg_id_section"),o=void 0===o.attr("data-video_bg_url_vimeo_section")?"":o.attr("data-video_bg_url_vimeo_section");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBackgroundSection",activeBG:{bgColor:{sectionTarget:{sectionID:i,modelNumber:a},color:d,active:r},imageBG:{sectionTarget:{sectionID:i,modelNumber:a},idImage:n,imageUrl:s,width:c,height:e,active:u},bgVideo:{sectionTarget:{sectionID:i,modelNumber:a},youtubeVideo:b,vimeoUrl:o,mp4Video:_,mp4VideoID:x},overlay:{sectionTarget:{sectionID:i,modelNumber:a},color:l,active:t}}})}),l.on("click",".builder-edit-block",function(e){e.preventDefault();var e=g(e.target).parents(".grid-stack-item"),t=e.parents(".rexpansive_section"),i=e.attr("data-rexbuilder-block-id"),a=t.attr("data-rexlive-section-id"),t=void 0!==t.attr("data-rexlive-model-number")?t.attr("data-rexlive-model-number"):"",o=e.children(".rexbuilder-block-data"),d=e.find(".grid-item-content"),r=e.find(".text-wrap"),l=o.attr("data-color_bg_block"),l={color:l=""==l?"rgba(0,0,0,0)":l,active:void 0!==o.attr("data-color_bg_elem_active")&&o.attr("data-color_bg_elem_active"),target:{sectionID:a,modelNumber:t,rexID:i}},n=void 0!==o.attr("data-overlay_block_color")?o.attr("data-overlay_block_color"):"",s=!(e.hasClass("active-large-block-overlay")||e.hasClass("active-medium-block-overlay")||e.hasClass("active-small-block-overlay"))&&void 0!==o.attr("data-overlay_block_color_active")&&o.attr("data-overlay_block_color_active"),c=e.find(".responsive-block-overlay"),c=(s||("default"==Rexbuilder_Util.activeLayout&&e.hasClass("active-large-block-overlay")&&(s=!0,e.removeClass("active-large-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-large-block-overlay",o),c.addClass("rex-active-overlay")),"tablet"==Rexbuilder_Util.activeLayout&&e.hasClass("active-medium-block-overlay")&&(s=!0,e.removeClass("active-medium-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-medium-block-overlay",o),c.addClass("rex-active-overlay")),"mobile"==Rexbuilder_Util.activeLayout&&e.hasClass("active-small-block-overlay")&&(s=!0,e.removeClass("active-small-block-overlay"),o.attr("data-row_overlay_active",!0),Rexbuilder_Util_Editor.removeCustomClass("active-small-block-overlay",o),c.addClass("rex-active-overlay"))),{color:n,active:s,target:{sectionID:a,modelNumber:t,rexID:i}}),n=void 0===o.attr("data-id_image_bg_block")?"":o.attr("data-id_image_bg_block"),s=void 0===o.attr("data-image_bg_block")?"":o.attr("data-image_bg_block"),u=void 0===d.attr("data-background_image_width")?"":d.attr("data-background_image_width"),_=void 0===d.attr("data-background_image_height")?"":d.attr("data-background_image_height"),b=void 0===o.attr("data-image_bg_elem_active")||o.attr("data-image_bg_elem_active"),x="fixed"==e.parents(".grid-stack-row").attr("data-layout")?"full":"natural";""!==r.text().trim()&&(x="full");var r={idImage:n,imageUrl:s,width:u,height:_,typeBGimage:void 0===o.attr("data-type_bg_block")?x:o.attr("data-type_bg_block"),active:b,defaultTypeImage:x,photoswipe:void 0===o.attr("data-photoswipe")?"":o.attr("data-photoswipe"),target:{sectionID:a,modelNumber:t,rexID:i}},n=void 0===o.attr("data-video_mp4_url")?"":o.attr("data-video_mp4_url"),s=void 0===o.attr("data-video_bg_id")?"":o.attr("data-video_bg_id"),u=void 0===o.attr("data-video_bg_url")?"":o.attr("data-video_bg_url"),_=void 0===o.attr("data-video_bg_url_vimeo")?"":o.attr("data-video_bg_url_vimeo"),b=d.children(".rex-video-wrap"),x="",m="",b=(0!=b.length&&(x=parseInt(b.attr("data-rex-video-width")),m=parseInt(b.attr("data-rex-video-height"))),""),b=(""!=s?b="mp4":""!=u?b="youtube":""!=_&&(b="vimeo"),{type:b,mp4Data:{idMp4:s,linkMp4:n,width:x,height:m},vimeoUrl:_,youtubeUrl:u,audio:0!=d.children(".rex-video-toggle-audio").length,target:{sectionID:a,modelNumber:t,rexID:i}}),s=void 0===o.attr("data-block_padding")?"":o.attr("data-block_padding"),n={target:{sectionID:a,modelNumber:t,rexID:i},paddings:Rexbuilder_Util.getPaddingsDataString(s)},x=void 0===o.attr("data-block_flex_position")?"":o.attr("data-block_flex_position"),m=(x=""===x?"left top":x).split(" "),_={target:{sectionID:a,modelNumber:t,rexID:i},position:m[1]+"-"+m[0]},u=void 0===o.attr("data-block_flex_img_position")?"":o.attr("data-block_flex_img_position"),d=(u=""===u?"center middle":u).split(" "),s={target:{sectionID:a,modelNumber:t,rexID:i},position:d[1]+"-"+d[0]},x=void 0===o.attr("data-block_custom_class")?"":o.attr("data-block_custom_class"),m=void 0===o.attr("data-linkurl")?"":o.attr("data-linkurl"),u={rexID:i,x:parseInt(e.attr("data-gs-x")),y:parseInt(e.attr("data-gs-y")),w:parseInt(e.attr("data-gs-width")),h:parseInt(e.attr("data-gs-height"))};Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:editBlockOptions",activeBlockData:{bgColor:l,imageBG:r,bgVideo:b,overlay:c,paddings:n,flexPosition:_,flexImgPosition:s,customClasses:{classes:x,target:{sectionID:a,modelNumber:t,rexID:i}},linkBlock:{link:m,target:{sectionID:a,modelNumber:t,rexID:i}},sectionTarget:{sectionID:a,modelNumber:t},blockState:u}})}),l.on("click",".open-model",function(e){Rexbuilder_Util_Editor.openingModel=!0;var t,i=g(e.target).parents(".rexpansive_section"),e=i.attr("data-rexlive-section-id"),a=void 0!==i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",o=Rexbuilder_Util.createSectionID(),o=Rex_Save_Listeners.createSectionProperties(i,"shortcode",o),d=Rexbuilder_Util.getSectionCustomLayouts(e),r=[];if(0!=d.length)for(t=0;t<d.length;t++)r.push(d[t].name),"default"==d[t].name&&(d[t].targets=Rex_Save_Listeners.createTargets(i,"default"));else r.push("default"),d.push({name:"default",targets:Rex_Save_Listeners.createTargets(i,"default")});var l,n=void 0!==i.attr("data-rexlive-model-id")?i.attr("data-rexlive-model-id"):"",s=[],c=!1,n=(Rexbuilder_Util.$rexContainer.find(".rexpansive_section.rex-model-section").each(function(e,t){var t=g(t),i=parseInt(t.attr("data-rexlive-model-id")),a=parseInt(t.attr("data-rexlive-model-number"));for(c=!1,l=0;l<s.length;l++)i==s[l].modelID&&a>s[l].number&&(s[l].number=a,c=!0);c||s.push({modelID:i,number:a})}),{eventName:"rexlive:openModalMenu",modelData:{modelID:n,sectionTarget:{sectionID:e,modelNumber:a},shortCode:o,layouts:d,layoutsNames:r,modelsNumbers:s}});Rexbuilder_Util_Editor.sendParentIframeMessage(n),Rexbuilder_Util_Editor.openingModel=!1}),l.on("click",".call-update-model-button",function(e){g(this).parents(".rexpansive_section").find(".update-model-button").trigger("click")}),l.on("click",".update-model-button",function(e){var t,i=g(this),a=i.parents(".rexpansive_section"),o=a.attr("data-rexlive-section-id"),d=void 0!==a.attr("data-rexlive-model-id")?a.attr("data-rexlive-model-id"):"",r=void 0!==a.attr("data-rexlive-model-name")?a.attr("data-rexlive-model-name"):"",a=void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"";i.hasClass("locked")?(t={eventName:"rexlive:editRemoveModal",modelData:{modelName:r,modelNumber:a,modelID:d,sectionTarget:{sectionID:o,modelNumber:a},layoutActive:Rexbuilder_Util.activeLayout}},Rexbuilder_Util_Editor.sendParentIframeMessage(t),Rexbuilder_Util_Editor.openingModel=!1):(t={eventName:"rexlive:saveAndCloseModel",modelData:{modelName:r,modelNumber:a,modelID:d,sectionTarget:{sectionID:o,modelNumber:a},layoutActive:Rexbuilder_Util.activeLayout}},Rexbuilder_Util_Editor.sendParentIframeMessage(t),i=jQuery.Event("rexlive:saveModel"),l.trigger(i))})})}(jQuery);
!function(){var m,b;function v(e,t){for(var a=Array.prototype.slice.call(arguments,2),i=e.split("."),d=i.pop(),l=0;l<i.length;l++)t=t[i[l]];return t[d].apply(t,a)}String.prototype.hashCode=function(){var e,t=0;if(0!==this.length)for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t};function i(e){e.preventDefault();var e=e.currentTarget.getAttribute("data-action"),t=this.querySelector(".builderlive-editable-field");switch(e){case"remove":t&&(t.setAttribute("data-editable-value",""),t.style.visibility="hidden");break;case"add":t&&g();case"edit":t&&g(t)}}var f=function(e,t){var a=document.createElement("span"),t=(a.setAttribute("class","builderlive-editable-media__wrapper"),a.innerHTML=tmpl("tmpl-editable-media-toolbar",{type:t}),a.querySelector('[data-action="remove"]')),t=(t&&t.addEventListener("click",i.bind(a)),a.querySelector('[data-action="add"]')),t=(t&&t.addEventListener("click",i.bind(a)),a.querySelector('[data-action="edit"]'));return t&&t.addEventListener("click",i.bind(a)),e.parentNode.insertBefore(a,e.parentNode.firstChild),a.appendChild(e)},p=function(){m=[].slice.call(document.getElementsByClassName("builderlive-editable-field"))},_=function(e){e.preventDefault(),g(e.currentTarget)},g=function(e,t){t=void 0!==t&&t;var a="",i="",d="";(e=void 0!==e?e:null)?(a="edit",i=e.getAttribute("data-editable-value"),d=e.getAttribute("data-editable-id")):a="add",Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:openPostEditMediaUploader",mediaData:{action:a,mediaId:i,fieldId:d,fromMediaListModal:t}})},d=function(e){e.stopPropagation()},h=function(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})};document.addEventListener("DOMContentLoaded",function(){p(),b=parseInt(document.getElementById("id-post").getAttribute("data-post-id"))}),window.addEventListener("message",function(e){var t,a,i,d,l,r,n,s,o,u,c;e.data.rexliveEvent&&("rexlive:savePage"===e.data.eventName&&(c=[],p(),m.forEach(function(e){var t,a=null===(a=e.getAttribute("data-editable-type"))?"text":a,i=e.getAttribute("data-editable-hash");switch(a){case"html":case"float":case"text":t=e.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":t=e.getAttribute("data-editable-value").hashCode()}if(t!=i){var i=e.getAttribute("data-editable-info"),d=e.getAttribute("data-editable-format"),l={prev_value:null,value:null,info:""!==i?JSON.parse(i):[],type:a};switch(a){case"media":l.value=e.getAttribute("data-editable-value");break;case"media_list":case"media_list_aggregate":l.prev_value=e.getAttribute("data-editable-prev-value"),l.value=e.getAttribute("data-editable-value");break;case"html":l.value=e.innerHTML.trim();break;case"float":var r,n=e.innerText.trim();null!==d&&(r=d.split("x"),n=(n=n.replace(r[1],"")).replace(r[2],".")),l.value=parseFloat(n);break;default:l.value=e.innerText.trim()}c.push(l)}}),0<(o=c).length)&&(o=function(e){var t,a=[];for(t in e)a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&").replace(/%20/g,"+")}({action:"rexlive_save_editable_fields",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,postID:b,fieldData:JSON.stringify(o)}),(t=new XMLHttpRequest).open("POST",_plugin_frontend_settings.rexajax.ajaxurl,!0),t.onload=function(){200<=t.status&&t.status<400&&JSON.parse(t.responseText).success&&m.forEach(function(e,t){var a=e.getAttribute("data-editable-type"),i=null;switch(null===a?"text":a){case"html":case"float":case"text":i=e.innerText.trim().hashCode();break;case"media":case"media_list":case"media_list_aggregate":i=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",i),e.setAttribute("data-editable-prev-value",e.getAttribute("data-editable-value"))})},t.onerror=function(){},t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(o)),"rexlive:liveMediaEdit"===e.data.eventName&&(o=e.data.data_to_send,(u=document.querySelector('.builderlive-editable-field[data-editable-id="'+o.media_data.fieldId+'"]')).setAttribute("data-editable-value",o.imgData[0].media_info.id),"img"===u.tagName.toLowerCase()?(u.setAttribute("src",o.imgData[0].display_info.src),u.removeAttribute("srcset")):u.style.backgroundImage="url("+o.imgData[0].display_info.src+")","undefined"!==o.media_data.fromMediaListModal&&o.media_data.fromMediaListModal&&(u={eventName:"rexlive:liveMediaEditFromListComplete",mediaData:{src:o.imgData[0].display_info.src,fieldId:o.media_data.fieldId}},Rexbuilder_Util_Editor.sendParentIframeMessage(u)),h()),"rexlive:liveMediaAdd"===e.data.eventName&&(u=e.data.data_to_send,s=document.querySelector(u.media_data.destinationSelector),a=v(u.media_data.tmplDataGeneration,window,u),i=tmpl(u.media_data.addTmplId,a),(n=document.createElement("DIV")).innerHTML=i,d=(n=-1!==(i=n.children[0]).className.indexOf("builderlive-editable-field")?i:i.querySelector(".builderlive-editable-field")).getAttribute("data-editable-type"),l="bl_"+d+"_"+document.getElementsByClassName("builderlive-editable-field").length,n.setAttribute("data-editable-id",l),f(n,d),n.addEventListener("click",_),s.appendChild(i),v(u.media_data.completeAddCallback,window,i,a),"undefined"!==u.media_data.fromMediaListModal&&u.media_data.fromMediaListModal&&(d={eventName:"rexlive:liveMediaAddFromListComplete",mediaData:{src:u.imgData[0].display_info.src,fieldId:l}},Rexbuilder_Util_Editor.sendParentIframeMessage(d)),h()),"rexlive:liveMediaOpenEdit"===e.data.eventName&&(r=document.querySelector('.builderlive-editable-field[data-editable-id="'+e.data.data_to_send.elId+'"]'))&&g(r,e.data.data_to_send.fromMediaListModal),"rexlive:liveMediaReorder"===e.data.eventName&&e.data.data_to_send&&(v(e.data.data_to_send.completeReorderCallback,window,e.data.data_to_send),h()),"rexlive:liveMediaDelete"===e.data.eventName)&&(r=document.querySelector('.builderlive-editable-field[data-editable-id="'+e.data.data_to_send.elId+'"]'))&&(n=r.getAttribute("data-editable-value"),r.setAttribute("data-editable-value",""),r.style.visibility="hidden",s={mediaListAggregateSelector:e.data.data_to_send.mediaListAggregateSelector,value:n},v(e.data.data_to_send.completeRemoveCallback,window,s),h())},!1),window.addEventListener("load",function(){m.forEach(function(e,t){var a=e.getAttribute("data-editable-type"),i=(e.setAttribute("data-editable-id","bl_"+(a=null===a?"text":a)+"_"+t),null);switch(a){case"html":case"float":case"text":i=e.innerText.trim().hashCode(),e.setAttribute("contenteditable",!0),e.addEventListener("click",d),e.addEventListener("input",h);break;case"media":case"media_list":f(e,a),i=e.getAttribute("data-editable-value").hashCode(),e.addEventListener("click",_);break;case"media_list_aggregate":i=e.getAttribute("data-editable-value").hashCode()}e.setAttribute("data-editable-hash",i)})})}();
!function(e){"use strict";function r(e,n){var t=/[^\w\-.:]/.test(e)?new Function(r.arg+",tmpl","var _e=tmpl.encode"+r.helper+",_s='"+e.replace(r.regexp,r.func)+"';return _s;"):r.cache[e]=r.cache[e]||r(r.load(e));return n?t(n,r):function(e){return t(e,r)}}r.cache={},r.load=function(e){return document.getElementById(e).innerHTML},r.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,r.func=function(e,n,t,r,c,u){return n?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[n]||"\\"+n:t?"="===t?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":c?"';":u?"_s+='":void 0},r.encReg=/[<>&"'\x00]/g,r.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},r.encode=function(e){return(null==e?"":""+e).replace(r.encReg,function(e){return r.encMap[e]||""})},r.arg="o",r.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof module&&module.exports?module.exports=r:e.tmpl=r}(this);
/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(m,z,t,_){var p={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[o](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){p.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){p.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(p.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(p.features)return p.features;var e,t,n=p.createEl().style,i="",o={};o.oldIE=document.all&&!document.addEventListener,o.touch="ontouchstart"in window,window.requestAnimationFrame&&(o.raf=window.requestAnimationFrame,o.caf=window.cancelAnimationFrame),o.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,o.pointerEvent||(e=navigator.userAgent,/iP(hone|od)/.test(navigator.platform)&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(o.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(o.isOldAndroid=!0),o.androidVersion=t),o.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var a,r,l,s=["transform","perspective","animationName"],c=["","webkit","Moz","ms","O"],u=0;u<4;u++){for(var i=c[u],d=0;d<3;d++)a=s[d],r=i+(i?a.charAt(0).toUpperCase()+a.slice(1):a),!o[a]&&r in n&&(o[a]=r);i&&!o.raf&&(i=i.toLowerCase(),o.raf=window[i+"RequestAnimationFrame"],o.raf)&&(o.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"])}return o.raf||(l=0,o.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),i=window.setTimeout(function(){e(t+n)},n);return l=t+n,i},o.caf=function(e){clearTimeout(e)}),o.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,p.features=o}},f=(p.detectFeatures(),p.features.oldIE&&(p.bind=function(e,t,n,i){t=t.split(" ");for(var o,a=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=r;e[a]("on"+o,n["oldIE"+o])}else e[a]("on"+o,n)}),this),N=25,h={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};p.extend(h,_);function e(){return{x:0,y:0}}function U(e,t){p.extend(f,t.publicMethods),Ge.push(e)}function H(e){var t=P();return t-1<e?e-t:e<0?t+e:e}function a(e,t){return Ke[e]||(Ke[e]=[]),Ke[e].push(t)}function Y(e,t,n,i){i===f.currItem.initialZoomLevel?n[e]=f.currItem.initialPosition[e]:(n[e]=Qe(e,i),n[e]>t.min[e]?n[e]=t.min[e]:n[e]<t.max[e]&&(n[e]=t.max[e]))}function W(e){var t="";h.escKey&&27===e.keyCode?t="close":h.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,f[t]())}function B(e){e&&(Ee||Ae||g||Te)&&(e.preventDefault(),e.stopPropagation())}function G(){f.setScrollOffset(0,p.getScrollY())}function X(e){var t;"mousedown"===e.type&&0<e.button||(Qt?e.preventDefault():Me&&"mousedown"===e.type||(kt(e,!0)&&e.preventDefault(),C("pointerDown"),pe&&((t=p.arraySearch(ht,e.pointerId,"id"))<0&&(t=ht.length),ht[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=Nt(e)).length,c=null,ct(),s&&1!==e||(s=Fe=!0,p.bind(window,ee,f),De=_e=Le=Te=ke=Ee=Se=Ae=!1,Ze=null,C("firstTouchStart",t),S(He,v),Ue.x=Ue.y=0,S(k,t[0]),S(ft,k),yt.x=b.x*Ye,xt=[{x:k.x,y:k.y}],Ie=be=D(),it(x,!0),Mt(),St()),!u&&1<e&&!g&&!ke&&(ne=x,u=Se=!(Ae=!1),Ue.y=Ue.x=0,S(He,v),S(E,t[0]),S(pt,t[1]),Pt(E,pt,Ct),It.x=Math.abs(Ct.x)-v.x,It.y=Math.abs(Ct.y)-v.y,Re=Tt(E,pt))))}function V(e){var t;e.preventDefault(),pe&&-1<(t=p.arraySearch(ht,e.pointerId,"id"))&&((t=ht[t]).x=e.pageX,t.y=e.pageY),s&&(t=Nt(e),Ze||Ee||u?c=t:R.x!==b.x*Ye?Ze="h":(e=Math.abs(t[0].x-k.x)-Math.abs(t[0].y-k.y),Math.abs(e)>=mt&&(Ze=0<e?"h":"v",c=t)))}function K(e){if(l.isOldAndroid){if(Me&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(Me),Me=setTimeout(function(){Me=0},600))}var t;C("pointerUp"),kt(e,!1)&&e.preventDefault(),pe&&-1<(a=p.arraySearch(ht,e.pointerId,"id"))&&(t=ht.splice(a,1)[0],navigator.msPointerEnabled&&(t.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],t.type)||(t.type=e.pointerType||"mouse"));var n=(a=Nt(e)).length;if(2===(n="mouseup"===e.type?0:n))return!(c=null);1===n&&S(ft,a[0]),0!==n||Ze||g||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),C("touchRelease",e,t));var i,o,a=-1;if(0===n&&(s=!1,p.unbind(window,ee,f),Mt(),u?a=0:-1!==bt&&(a=D()-bt)),bt=1===n?D():-1,e=-1!==a&&a<150?"zoom":"swipe",u&&n<2&&(u=!1,1===n&&(e="zoomPointerUp"),C("zoomGestureEnded")),c=null,Ee||Ae||g||Te)if(ct(),(Ce=Ce||Yt()).calculateSwipeSpeed("x"),Te)Ft()<h.verticalDragRange?f.close():(i=v.y,o=ze,ut("verticalDrag",0,1,300,p.easing.cubic.out,function(e){v.y=(f.currItem.initialPosition.y-i)*e+i,T((1-o)*e+o),M()}),C("onVerticalDrag",1));else{if((ke||g)&&0===n){if(Bt(e,Ce))return;e="zoomPointerUp"}if(!g)return"swipe"!==e?void Xt():void(!ke&&x>f.currItem.fitRatio&&Wt(Ce))}}var q,$,j,y,J,Q,ee,te,i,x,ne,ie,oe,ae,re,r,le,se,ce,ue,de,me,pe,o,fe,he,ye,xe,ge,ve,l,we,be,Ie,Ce,De,Te,Me,s,Se,Ae,Ee,Oe,ke,c,u,Re,d,Pe,g,Ze,Fe,Le,ze,_e,Ne,Ue=e(),He=e(),v=e(),w={},Ye=0,We={},b=e(),I=0,Be=!0,Ge=[],Xe={},Ve=!1,Ke={},C=function(e){var t=Ke[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(f,n)}},D=function(){return(new Date).getTime()},T=function(e){ze=e,f.bg.style.opacity=e*h.bgOpacity},qe=function(e,t,n,i,o){(!Ve||o&&o!==f.currItem)&&(i/=(o||f.currItem).fitRatio),e[me]=ie+t+"px, "+n+"px"+oe+" scale("+i+")"},M=function(e){Pe&&(e&&(x>f.currItem.fitRatio?Ve||(cn(f.currItem,!1,!0),Ve=!0):Ve&&(cn(f.currItem),Ve=!1)),qe(Pe,v.x,v.y,x))},$e=function(e){e.container&&qe(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},je=function(e,t){t[me]=ie+e+"px, 0px"+oe},Je=function(e,t){var n;!h.loop&&t&&(t=y+(b.x*Ye-e)/b.x,n=Math.round(e-R.x),t<0&&0<n||t>=P()-1&&n<0)&&(e=R.x+n*h.mainScrollEndFriction),R.x=e,je(e,J)},Qe=function(e,t){var n=It[e]-We[e];return He[e]+Ue[e]+n-t/ne*n},S=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},et=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},tt=null,nt=function(){tt&&(p.unbind(document,"mousemove",nt),p.addClass(m,"pswp--has_mouse"),h.mouseUsed=!0,C("mouseUsed")),tt=setTimeout(function(){tt=null},100)},it=function(e,t){e=ln(f.currItem,w,e);return t&&(d=e),e},ot=function(e){return(e=e||f.currItem).initialZoomLevel},at=function(e){return 0<(e=e||f.currItem).w?h.maxSpreadZoom:1},A={},rt=0,lt=function(e){A[e]&&(A[e].raf&&he(A[e].raf),rt--,delete A[e])},st=function(e){A[e]&&lt(e),A[e]||(rt++,A[e]={})},ct=function(){for(var e in A)A.hasOwnProperty(e)&&lt(e)},ut=function(e,t,n,i,o,a,r){function l(){A[e]&&(s=D()-c,i<=s?(lt(e),a(n),r&&r()):(a((n-t)*o(s/i)+t),A[e].raf=fe(l)))}var s,c=D();st(e);l()},_={shout:C,listen:a,viewportSize:w,options:h,isMainScrollAnimating:function(){return g},getZoomLevel:function(){return x},getCurrentIndex:function(){return y},isDragging:function(){return s},isZooming:function(){return u},setScrollOffset:function(e,t){We.x=e,ve=We.y=t,C("updateScrollOffset",We)},applyZoomPan:function(e,t,n,i){v.x=t,v.y=n,x=e,M(i)},init:function(){if(!q&&!$){f.framework=p,f.template=m,f.bg=p.getChildByClass(m,"pswp__bg"),ye=m.className,q=!0,l=p.detectFeatures(),fe=l.raf,he=l.caf,me=l.transform,ge=l.oldIE,f.scrollWrap=p.getChildByClass(m,"pswp__scroll-wrap"),f.container=p.getChildByClass(f.scrollWrap,"pswp__container"),J=f.container.style,f.itemHolders=r=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],r[0].el.style.display=r[2].el.style.display="none",me?(t=l.perspective&&!o,ie="translate"+(t?"3d(":"("),oe=l.perspective?", 0px)":")"):(me="left",p.addClass(m,"pswp--ie"),je=function(e,t){t.left=e+"px"},$e=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,t=t*e.h;n.width=i+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},M=function(){var e,t,n,i;Pe&&(e=Pe,n=(i=1<(t=f.currItem).fitRatio?1:t.fitRatio)*t.w,i=i*t.h,e.width=n+"px",e.height=i+"px",e.left=v.x+"px",e.top=v.y+"px")}),i={resize:f.updateSize,orientationchange:function(){clearTimeout(we),we=setTimeout(function(){w.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:G,keydown:W,click:B};var e,t=l.isOldIOSPhone||l.isOldAndroid||l.isMobileOpera;for(l.animationName&&l.transform&&!t||(h.showAnimationDuration=h.hideAnimationDuration=0),e=0;e<Ge.length;e++)f["init"+Ge[e]]();z&&(f.ui=new z(f,p)).init(),C("firstUpdate"),y=y||h.index||0,(isNaN(y)||y<0||y>=P())&&(y=0),f.currItem=en(y),(l.isOldIOSPhone||l.isOldAndroid)&&(Be=!1),m.setAttribute("aria-hidden","false"),h.modal&&(Be?m.style.position="fixed":(m.style.position="absolute",m.style.top=p.getScrollY()+"px")),void 0===ve&&(C("initialLayout"),ve=xe=p.getScrollY());var n="pswp--open ";for(h.mainClass&&(n+=h.mainClass+" "),h.showHideOpacity&&(n+="pswp--animate_opacity "),n=(n=(n+=o?"pswp--touch":"pswp--notouch")+(l.animationName?" pswp--css_animation":""))+(l.svg?" pswp--svg":""),p.addClass(m,n),f.updateSize(),Q=-1,I=null,e=0;e<3;e++)je((e+Q)*b.x,r[e].el.style);ge||p.bind(f.scrollWrap,te,f),a("initialZoomInEnd",function(){f.setContent(r[0],y-1),f.setContent(r[2],y+1),r[0].el.style.display=r[2].el.style.display="block",h.focus&&m.focus(),p.bind(document,"keydown",f),l.transform&&p.bind(f.scrollWrap,"click",f),h.mouseUsed||p.bind(document,"mousemove",nt),p.bind(window,"resize scroll orientationchange",f),C("bindEvents")}),f.setContent(r[1],y),f.updateCurrItem(),C("afterInit"),Be||(ae=setInterval(function(){rt||s||u||x!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),p.addClass(m,"pswp--visible")}var t},close:function(){q&&($=!(q=!1),C("close"),p.unbind(window,"resize scroll orientationchange",f),p.unbind(window,"scroll",i.scroll),p.unbind(document,"keydown",f),p.unbind(document,"mousemove",nt),l.transform&&p.unbind(f.scrollWrap,"click",f),s&&p.unbind(window,ee,f),clearTimeout(we),C("unbindEvents"),tn(f.currItem,null,!0,f.destroy))},destroy:function(){C("destroy"),$t&&clearTimeout($t),m.setAttribute("aria-hidden","true"),m.className=ye,ae&&clearInterval(ae),p.unbind(f.scrollWrap,te,f),p.unbind(window,"scroll",f),Mt(),ct(),Ke=null},panTo:function(e,t,n){n||(e>d.min.x?e=d.min.x:e<d.max.x&&(e=d.max.x),t>d.min.y?t=d.min.y:t<d.max.y&&(t=d.max.y)),v.x=e,v.y=t,M()},handleEvent:function(e){e=e||window.event,i[e.type]&&i[e.type](e)},goTo:function(e){var t=(e=H(e))-y;I=t,y=e,f.currItem=en(y),Ye-=t,Je(b.x*Ye),ct(),g=!1,f.updateCurrItem()},next:function(){f.goTo(y+1)},prev:function(){f.goTo(y-1)},updateCurrZoomItem:function(e){var t;e&&C("beforeChange",0),Pe=r[1].el.children.length&&(t=r[1].el.children[0],p.hasClass(t,"pswp__zoom-wrap"))?t.style:null,d=f.currItem.bounds,ne=x=f.currItem.initialZoomLevel,v.x=d.center.x,v.y=d.center.y,e&&C("afterChange")},invalidateCurrItems:function(){re=!0;for(var e=0;e<3;e++)r[e].item&&(r[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==I){var t,n=Math.abs(I);if(!(e&&n<2)){f.currItem=en(y),Ve=!1,C("beforeChange",I),3<=n&&(Q+=I+(0<I?-3:3),n=3);for(var i=0;i<n;i++)0<I?(t=r.shift(),r[2]=t,je((++Q+2)*b.x,t.el.style),f.setContent(t,y-n+i+1+1)):(t=r.pop(),r.unshift(t),je(--Q*b.x,t.el.style),f.setContent(t,y+n-i-1-1));Pe&&1===Math.abs(I)&&(e=en(le)).initialZoomLevel!==x&&(ln(e,w),cn(e),$e(e)),I=0,f.updateCurrZoomItem(),le=y,C("afterChange")}}},updateSize:function(e){if(!Be&&h.modal){var t=p.getScrollY();if(ve!==t&&(m.style.top=t+"px",ve=t),!e&&Xe.x===window.innerWidth&&Xe.y===window.innerHeight)return;Xe.x=window.innerWidth,Xe.y=window.innerHeight,m.style.height=Xe.y+"px"}if(w.x=f.scrollWrap.clientWidth,w.y=f.scrollWrap.clientHeight,G(),b.x=w.x+Math.round(w.x*h.spacing),b.y=w.y,Je(b.x*Ye),C("beforeResize"),void 0!==Q){for(var n,i,o,a=0;a<3;a++)n=r[a],je((a+Q)*b.x,n.el.style),o=y+a-1,h.loop&&2<P()&&(o=H(o)),(i=en(o))&&(re||i.needsUpdate||!i.bounds)?(f.cleanSlide(i),f.setContent(n,o),1===a&&(f.currItem=i,f.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=o&&f.setContent(n,o),i&&i.container&&(ln(i,w),cn(i),$e(i));re=!1}ne=x=f.currItem.initialZoomLevel,(d=f.currItem.bounds)&&(v.x=d.center.x,v.y=d.center.y,M(!0)),C("resize")},zoomTo:function(t,e,n,i,o){e&&(ne=x,It.x=Math.abs(e.x)-v.x,It.y=Math.abs(e.y)-v.y,S(He,v));function a(e){1===e?(x=t,v.x=r.x,v.y=r.y):(x=(t-l)*e+l,v.x=(r.x-s.x)*e+s.x,v.y=(r.y-s.y)*e+s.y),o&&o(e),M(1===e)}var e=it(t,!1),r={},l=(Y("x",e,r,t),Y("y",e,r,t),x),s={x:v.x,y:v.y};et(r);n?ut("customZoomTo",0,1,n,i||p.easing.sine.inOut,a):a(1)}},dt=30,mt=10,E={},pt={},O={},k={},ft={},ht=[],yt={},xt=[],gt={},vt=0,wt=e(),bt=0,R=e(),It=e(),Ct=e(),Dt=function(e,t){return e.x===t.x&&e.y===t.y},Tt=function(e,t){return gt.x=Math.abs(e.x-t.x),gt.y=Math.abs(e.y-t.y),Math.sqrt(gt.x*gt.x+gt.y*gt.y)},Mt=function(){Oe&&(he(Oe),Oe=null)},St=function(){s&&(Oe=fe(St),Ht())},At=function(){return!("fit"===h.scaleMode&&x===f.currItem.initialZoomLevel)},Et=function(e,t){return!(!e||e===document)&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:Et(e.parentNode,t))},Ot={},kt=function(e,t){return Ot.prevent=!Et(e.target,h.isClickableElement),C("preventDragEvent",e,t,Ot),Ot.prevent},Rt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Pt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Zt=function(e,t,n){var i;50<e-Ie&&((i=2<xt.length?xt.shift():{}).x=t,i.y=n,xt.push(i),Ie=e)},Ft=function(){var e=v.y-f.currItem.initialPosition.y;return 1-Math.abs(e/(w.y/2))},Lt={},zt={},_t=[],Nt=function(e){for(;0<_t.length;)_t.pop();return pe?(Ne=0,ht.forEach(function(e){0===Ne?_t[0]=e:1===Ne&&(_t[1]=e),Ne++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(_t[0]=Rt(e.touches[0],Lt),1<e.touches.length)&&(_t[1]=Rt(e.touches[1],zt)):(Lt.x=e.pageX,Lt.y=e.pageY,Lt.id="",_t[0]=Lt),_t},Ut=function(e,t){var n,i,o,a=v[e]+t[e],r=0<t[e],l=R.x+t.x,s=R.x-yt.x,c=a>d.min[e]||a<d.max[e]?h.panEndFriction:1,a=v[e]+t[e]*c;return!h.allowPanToNext&&x!==f.currItem.initialZoomLevel||(Pe?"h"!==Ze||"x"!==e||Ae||(r?(a>d.min[e]&&(c=h.panEndFriction,d.min[e],n=d.min[e]-He[e]),(n<=0||s<0)&&1<P()?(o=l,s<0&&l>yt.x&&(o=yt.x)):d.min.x!==d.max.x&&(i=a)):(a<d.max[e]&&(c=h.panEndFriction,d.max[e],n=He[e]-d.max[e]),(n<=0||0<s)&&1<P()?(o=l,0<s&&l<yt.x&&(o=yt.x)):d.min.x!==d.max.x&&(i=a))):o=l,"x"!==e)?void(g||ke||x>f.currItem.fitRatio&&(v[e]+=t[e]*c)):(void 0!==o&&(Je(o,!0),ke=o!==yt.x),d.min.x!==d.max.x&&(void 0!==i?v.x=i:ke||(v.x+=t.x*c)),void 0!==o)},Ht=function(){var e,t,n,i,o,a;c&&0!==(e=c.length)&&(S(E,c[0]),O.x=E.x-k.x,O.y=E.y-k.y,u&&1<e?(k.x=E.x,k.y=E.y,!O.x&&!O.y&&Dt(c[1],pt)||(S(pt,c[1]),Ae||(Ae=!0,C("zoomGestureStarted")),e=Tt(E,pt),(t=Gt(e))>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(_e=!0),n=1,i=ot(),o=at(),t<i?h.pinchToClose&&!_e&&ne<=f.currItem.initialZoomLevel?(T(a=1-(i-t)/(i/1.2)),C("onPinchClose",a),Le=!0):t=i-(n=1<(n=(i-t)/i)?1:n)*(i/3):o<t&&(t=o+(n=1<(n=(t-o)/(6*i))?1:n)*i),n<0&&(n=0),Pt(E,pt,wt),Ue.x+=wt.x-Ct.x,Ue.y+=wt.y-Ct.y,S(Ct,wt),v.x=Qe("x",t),v.y=Qe("y",t),De=x<t,x=t,M())):Ze&&(Fe&&(Fe=!1,Math.abs(O.x)>=mt&&(O.x-=c[0].x-ft.x),Math.abs(O.y)>=mt)&&(O.y-=c[0].y-ft.y),k.x=E.x,k.y=E.y,0===O.x&&0===O.y||("v"===Ze&&h.closeOnVerticalDrag&&!At()?(Ue.y+=O.y,v.y+=O.y,a=Ft(),Te=!0,C("onVerticalDrag",a),T(a),M()):(Zt(D(),E.x,E.y),Ee=!0,d=f.currItem.bounds,Ut("x",O)||(Ut("y",O),et(v),M())))))},Yt=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=(1<xt.length?(t=D()-Ie+50,xt[xt.length-2]):(t=D()-be,ft))[e],i.lastFlickOffset[e]=k[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),20<i.lastFlickDist[e]?i.lastFlickSpeed[e]=i.lastFlickOffset[e]/t:i.lastFlickSpeed[e]=0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(v[t]>d.min[t]?i.backAnimDestination[t]=d.min[t]:v[t]<d.max[t]&&(i.backAnimDestination[t]=d.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05)&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,ut("bounceZoomPan"+t,v[t],i.backAnimDestination[t],e||300,p.easing.sine.out,function(e){v[t]=e,M()})))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,v[e]+=i.distanceOffset[e])},panAnimLoop:function(){A.zoomPan&&(A.zoomPan.raf=fe(i.panAnimLoop),i.now=D(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),M(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05)&&i.speedDecelerationRatioAbs.y<.05&&(v.x=Math.round(v.x),v.y=Math.round(v.y),M(),lt("zoomPan"))}};return i},Wt=function(e){return e.calculateSwipeSpeed("y"),d=f.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(st("zoomPan"),e.lastNow=D(),void e.panAnimLoop())},Bt=function(e,t){var n,i,o;g||(vt=y),"swipe"===e&&(e=k.x-ft.x,a=t.lastFlickDist.x<10,dt<e&&(a||20<t.lastFlickOffset.x)?i=-1:e<-dt&&(a||t.lastFlickOffset.x<-20)&&(i=1)),i&&((y+=i)<0?(y=h.loop?P()-1:0,o=!0):y>=P()&&(y=h.loop?0:P()-1,o=!0),o&&!h.loop||(I+=i,Ye-=i,n=!0));var e=b.x*Ye,a=Math.abs(e-R.x),r=n||e>R.x==0<t.lastFlickSpeed.x?(r=0<Math.abs(t.lastFlickSpeed.x)?a/Math.abs(t.lastFlickSpeed.x):333,r=Math.min(r,400),Math.max(r,250)):333;return vt===y&&(n=!1),g=!0,C("mainScrollAnimStart"),ut("mainScroll",R.x,e,r,p.easing.cubic.out,Je,function(){ct(),g=!1,vt=-1,!n&&vt===y||f.updateCurrItem(),C("mainScrollAnimComplete")}),n&&f.updateCurrItem(!0),n},Gt=function(e){return 1/Re*e*ne},Xt=function(){var e=x,t=ot(),n=at();x<t?e=t:n<x&&(e=n);var i,o=ze;return Le&&!De&&!_e&&x<t?f.close():(Le&&(i=function(e){T((1-o)*e+o)}),f.zoomTo(e,0,200,p.easing.cubic.out,i)),!0};U("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,o){se=e+t,ce=e+n,ue=e+i,de=o?e+o:""}(pe=l.pointerEvent)&&l.touch&&(l.touch=!1),pe?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):l.touch?(e("touch","start","move","end","cancel"),o=!0):e("mouse","down","move","up"),ee=ce+" "+ue+" "+de,te=se,pe&&!o&&(o=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),f.likelyTouchDevice=o,i[se]=X,i[ce]=V,i[ue]=K,de&&(i[de]=i[ue]),l.touch&&(te+=" mousedown",ee+=" mousemove mouseup",i.mousedown=i[se],i.mousemove=i[ce],i.mouseup=i[ue]),o||(h.allowPanToNext=!1)}}});function Vt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=p.createEl("pswp__img","img");n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src}function Kt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=h.errorMsg.replace("%url%",e.src),1)}function qt(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&sn(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}}var $t,jt,Jt,Qt,en,P,tn=function(a,e,r,t){function l(){lt("initialZoom"),r?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(T(1),e&&(e.style.display="block"),p.addClass(m,"pswp--animated-in"),C("initialZoom"+(r?"OutEnd":"InEnd"))),t&&t(),Qt=!1}$t&&clearTimeout($t),Jt=Qt=!0,a.initialLayout?(s=a.initialLayout,a.initialLayout=null):s=h.getThumbBoundsFn&&h.getThumbBoundsFn(y);var s,c,u,d=r?h.hideAnimationDuration:h.showAnimationDuration;d&&s&&void 0!==s.x?(c=j,u=!f.currItem.src||f.currItem.loadError||h.showHideOpacity,a.miniImg&&(a.miniImg.style.webkitBackfaceVisibility="hidden"),r||(x=s.w/a.w,v.x=s.x,v.y=s.y-xe,f[u?"template":"bg"].style.opacity=.001,M()),st("initialZoom"),r&&!c&&p.removeClass(m,"pswp--animated-in"),u&&(r?p[(c?"remove":"add")+"Class"](m,"pswp--animate_opacity"):setTimeout(function(){p.addClass(m,"pswp--animate_opacity")},30)),$t=setTimeout(function(){var t,n,i,o,e;C("initialZoom"+(r?"Out":"In")),r?(t=s.w/a.w,n={x:v.x,y:v.y},i=x,o=ze,e=function(e){1===e?(x=t,v.x=s.x,v.y=s.y-ve):(x=(t-i)*e+i,v.x=(s.x-n.x)*e+n.x,v.y=(s.y-ve-n.y)*e+n.y),M(),u?m.style.opacity=1-e:T(o-e*o)},c?ut("initialZoom",0,1,d,p.easing.cubic.out,e,l):(e(1),$t=setTimeout(l,d+20))):(x=a.initialZoomLevel,S(v,a.initialPosition),M(),T(1),u?m.style.opacity=1:T(1),$t=setTimeout(l,d+20))},r?25:90)):(C("initialZoom"+(r?"Out":"In")),x=a.initialZoomLevel,S(v,a.initialPosition),M(),m.style.opacity=r?0:1,T(1),d?setTimeout(function(){l()},d):l())},Z={},nn=[],on={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return jt.length}},an=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},rn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((Z.x-t)/2),i.center.y=Math.round((Z.y-n)/2)+e.vGap.top,i.max.x=t>Z.x?Math.round(Z.x-t):i.center.x,i.max.y=n>Z.y?Math.round(Z.y-n)+e.vGap.top:i.center.y,i.min.x=t>Z.x?0:i.center.x,i.min.y=n>Z.y?e.vGap.top:i.center.y},ln=function(e,t,n){var i,o;return e.src&&!e.loadError?((i=!n)&&(e.vGap||(e.vGap={top:0,bottom:0}),C("parseVerticalMargin",e)),Z.x=t.x,Z.y=t.y-e.vGap.top-e.vGap.bottom,i&&(t=Z.x/e.w,o=Z.y/e.h,e.fitRatio=t<o?t:o,"orig"===(t=h.scaleMode)?n=1:"fit"===t&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds=an())),n?(rn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0):(e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=an(),e.initialPosition=e.bounds.center,e.bounds)},sn=function(e,t,n,i,o,a){t.loadError||i&&(t.imageAppended=!0,cn(t,i,t===f.currItem&&Ve),n.appendChild(i),a)&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500)},cn=function(e,t,n){var i;e.src&&(t=t||e.container.lastChild,i=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=n+"px"),t.style.width=i+"px",t.style.height=n+"px")};U("Controller",{publicMethods:{lazyLoadItem:function(e){e=H(e);var t=en(e);t&&(!t.loaded&&!t.loading||re)&&(C("gettingData",e,t),t.src)&&Vt(t)},initController:function(){p.extend(h,on,!0),f.items=jt=t,en=f.getItemAt,P=h.getNumItemsFn,h.loop,P()<3&&(h.loop=!1),a("beforeChange",function(e){for(var t=h.preload,n=null===e||0<=e,i=Math.min(t[0],P()),o=Math.min(t[1],P()),a=1;a<=(n?o:i);a++)f.lazyLoadItem(y+a);for(a=1;a<=(n?i:o);a++)f.lazyLoadItem(y-a)}),a("initialLayout",function(){f.currItem.initialLayout=h.getThumbBoundsFn&&h.getThumbBoundsFn(y)}),a("mainScrollAnimComplete",qt),a("initialZoomInEnd",qt),a("destroy",function(){for(var e,t=0;t<jt.length;t++)(e=jt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null})},getItemAt:function(e){return 0<=e&&void 0!==jt[e]&&jt[e]},allowProgressiveImg:function(){return h.forceProgressiveLoading||!o||h.mouseUsed||1200<screen.width},setContent:function(t,n){h.loop&&(n=H(n));var e=f.getItemAt(t.index);e&&(e.container=null);var i,o,a,e=f.getItemAt(n);e?(C("gettingData",n,e),t.index=n,o=(t.item=e).container=p.createEl("pswp__zoom-wrap"),!e.src&&e.html&&(e.html.tagName?o.appendChild(e.html):o.innerHTML=e.html),Kt(e),ln(e,w),!e.src||e.loadError||e.loaded?e.src&&!e.loadError&&((i=p.createEl("pswp__img","img")).style.opacity=1,i.src=e.src,cn(e,i),sn(n,e,o,i,!0)):(e.loadComplete=function(e){if(q){if(t&&t.index===n){if(Kt(e,!0))return e.loadComplete=e.img=null,ln(e,w),$e(e),void(t.index===y&&f.updateCurrZoomItem());e.imageAppended?!Qt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):l.transform&&(g||Qt)?nn.push({item:e,baseDiv:o,img:e.img,index:n,holder:t,clearPlaceholder:!0}):sn(n,e,o,e.img,g||Qt,!0)}e.loadComplete=null,e.img=null,C("imageLoadComplete",n,e)}},p.features.transform&&(a="pswp__img pswp__img--placeholder",a+=e.msrc?"":" pswp__img--placeholder--blank",a=p.createEl(a,e.msrc?"img":""),e.msrc&&(a.src=e.msrc),cn(e,a),o.appendChild(a),e.placeholder=a),e.loading||Vt(e),f.allowProgressiveImg()&&(!Jt&&l.transform?nn.push({item:e,baseDiv:o,img:e.img,index:n,holder:t}):sn(n,e,o,e.img,!0,!0))),Jt||n!==y?$e(e):(Pe=o.style,tn(e,i||e.img)),t.el.innerHTML="",t.el.appendChild(o)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function un(e,t,n){var i=document.createEvent("CustomEvent"),t={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,t),e.target.dispatchEvent(i)}var dn,F,mn={};U("Tap",{publicMethods:{initTap:function(){a("firstTouchStart",f.onTapStart),a("touchRelease",f.onTapRelease),a("destroy",function(){mn={},dn=null})},onTapStart:function(e){1<e.length&&(clearTimeout(dn),dn=null)},onTapRelease:function(e,t){var n,i,o;!t||Ee||Se||rt||(n=t,dn&&(clearTimeout(dn),dn=null,i=n,o=mn,Math.abs(i.x-o.x)<N)&&Math.abs(i.y-o.y)<N?C("doubleTap",n):"mouse"===t.type?un(e,t,"mouse"):"BUTTON"===e.target.tagName.toUpperCase()||p.hasClass(e.target,"pswp__single-tap")?un(e,t):(S(mn,n),dn=setTimeout(function(){un(e,t),dn=null},300)))}}}),U("DesktopZoom",{publicMethods:{initDesktopZoom:function(){ge||(o?a("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(e){F={};var t="wheel mousewheel DOMMouseScroll";a("bindEvents",function(){p.bind(m,t,f.handleMouseWheel)}),a("unbindEvents",function(){F&&p.unbind(m,t,f.handleMouseWheel)}),f.mouseZoomedIn=!1;function n(){f.mouseZoomedIn&&(p.removeClass(m,"pswp--zoomed-in"),f.mouseZoomedIn=!1),x<1?p.addClass(m,"pswp--zoom-allowed"):p.removeClass(m,"pswp--zoom-allowed"),o()}var i,o=function(){i&&(p.removeClass(m,"pswp--dragging"),i=!1)};a("resize",n),a("afterChange",n),a("pointerDown",function(){f.mouseZoomedIn&&(i=!0,p.addClass(m,"pswp--dragging"))}),a("pointerUp",o),e||n()},handleMouseWheel:function(e){if(x<=f.currItem.fitRatio)return h.modal&&(!h.closeOnScroll||rt||s?e.preventDefault():me&&2<Math.abs(e.deltaY)&&(j=!0,f.close())),!0;if(e.stopPropagation(),F.x=0,"deltaX"in e)1===e.deltaMode?(F.x=18*e.deltaX,F.y=18*e.deltaY):(F.x=e.deltaX,F.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(F.x=-.16*e.wheelDeltaX),e.wheelDeltaY?F.y=-.16*e.wheelDeltaY:F.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;F.y=e.detail}it(x,!0);var t=v.x-F.x,n=v.y-F.y;(h.modal||t<=d.min.x&&t>=d.max.x&&n<=d.min.y&&n>=d.max.y)&&e.preventDefault(),f.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:w.x/2+We.x,y:w.y/2+We.y};var t=h.getDoubleTapZoom(!0,f.currItem),n=x===t;f.mouseZoomedIn=!n,f.zoomTo(n?f.currItem.initialZoomLevel:t,e,333),p[(n?"remove":"add")+"Class"](m,"pswp--zoomed-in")}}});function pn(){hn&&clearTimeout(hn),xn&&clearTimeout(xn)}function fn(){var e=Mn(),t={};if(!(e.length<5)){var n,i=e.split("&");for(a=0;a<i.length;a++)!i[a]||(n=i[a].split("=")).length<2||(t[n[0]]=n[1]);if(h.galleryPIDs){for(var o=t.pid,a=t.pid=0;a<jt.length;a++)if(jt[a].pid===o){t.pid=a;break}}else t.pid=parseInt(t.pid,10)-1;t.pid<0&&(t.pid=0)}return t}var hn,yn,xn,gn,vn,wn,n,bn,In,Cn,L,Dn,Tn={history:!0,galleryUID:1},Mn=function(){return L.hash.substring(1)},Sn=function(){var e,t;xn&&clearTimeout(xn),rt||s?xn=setTimeout(Sn,500):(gn?clearTimeout(yn):gn=!0,t=y+1,(e=en(y)).hasOwnProperty("pid")&&(t=e.pid),e=n+"&gid="+h.galleryUID+"&pid="+t,bn||-1===L.hash.indexOf(e)&&(Cn=!0),t=L.href.split("#")[0]+"#"+e,Dn?"#"+e!==window.location.hash&&history[bn?"replaceState":"pushState"]("",document.title,t):bn?L.replace(t):L.hash=e,bn=!0,yn=setTimeout(function(){gn=!1},60))};U("History",{publicMethods:{initHistory:function(){var e,t;p.extend(h,Tn,!0),h.history&&(L=window.location,bn=In=Cn=!1,n=Mn(),Dn="pushState"in history,-1<n.indexOf("gid=")&&(n=(n=n.split("&gid=")[0]).split("?gid=")[0]),a("afterChange",f.updateURL),a("unbindEvents",function(){p.unbind(window,"hashchange",f.onHashChange)}),e=function(){wn=!0,In||(Cn?history.back():n?L.hash=n:Dn?history.pushState("",document.title,L.pathname+L.search):L.hash=""),pn()},a("unbindEvents",function(){j&&e()}),a("destroy",function(){wn||e()}),a("firstUpdate",function(){y=fn().pid}),-1<(t=n.indexOf("pid="))&&"&"===(n=n.substring(0,t)).slice(-1)&&(n=n.slice(0,-1)),setTimeout(function(){q&&p.bind(window,"hashchange",f.onHashChange)},40))},onHashChange:function(){return Mn()===n?(In=!0,void f.close()):void(gn||(vn=!0,f.goTo(fn().pid),vn=!1))},updateURL:function(){pn(),vn||(bn?hn=setTimeout(Sn,800):Sn())}}}),p.extend(f,_)}});
/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(o,s){function e(e){if(x)return!0;e=e||window.event,F.timeToIdle&&F.mouseUsed&&!v&&a();for(var t,n,o=(e.target||e.srcElement).getAttribute("class")||"",l=0;l<M.length;l++)(t=M[l]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),x=!0,e=s.features.isOldAndroid?600:30,setTimeout(function(){x=!1},e))}function n(){var e=1===F.getNumItemsFn();e!==E&&(y(m,"ui--one-slide",e),E=e)}function i(){y(g,"share-modal--hidden",R)}function l(){if((R=!R)?(s.removeClass(g,"pswp__share-modal--fade-in"),setTimeout(function(){R&&i()},300)):(i(),setTimeout(function(){R||s.addClass(g,"pswp__share-modal--fade-in")},30)),!R){for(var e,t,n,o,l="",r=0;r<F.shareButtons.length;r++)e=F.shareButtons[r],t=F.getImageURLForShare(e),n=F.getPageURLForShare(e),o=F.getTextForShare(e),l+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(o))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",F.parseShareButtonOut&&(l=F.parseShareButtonOut(e,l));g.children[0].innerHTML=l,g.children[0].onclick=P}}function r(e){for(var t=0;t<F.closeElClasses.length;t++)if(s.hasClass(e,"pswp__"+F.closeElClasses[t]))return!0}function a(){clearTimeout(k),z=0,v&&K.setIdle(!1)}function u(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(k),k=setTimeout(function(){K.setIdle(!0)},F.timeToIdleOutside))}function c(e){T!==e&&(y(C,"preloader--active",!e),T=e)}function p(e){var t,n=e.vGap;!o.likelyTouchDevice||F.mouseUsed||screen.width>F.fitControlsWidth?(t=F.barsSize,F.captionEl&&"auto"===t.bottom?(h||((h=s.createEl("pswp__caption pswp__caption--fake")).appendChild(s.createEl("pswp__caption__center")),m.insertBefore(h,f),s.addClass(m,"pswp__ui--fit")),F.addCaptionHTMLFn(e,h,!0)?(e=h.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function D(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){l=e[n],r=l.className;for(var o=0;o<M.length;o++)i=M[o],-1<r.indexOf("pswp__"+i.name)&&(F[i.option]?(s.removeClass(l,"pswp__element--disabled"),i.onInit&&i.onInit(l)):s.addClass(l,"pswp__element--disabled"))}}e(m.children);var l,r,i,t=s.getChildByClass(m,"pswp__top-bar");t&&e(t.children)}var d,m,f,h,t,w,g,b,v,_,C,T,I,E,F,x,S,k,K=this,L=!1,O=!0,R=!0,A={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return o.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return o.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=function(e,t,n){s[(n?"add":"remove")+"Class"](e,"pswp__"+t)},P=function(e){var t=(e=e||window.event).target||e.srcElement;return o.shout("shareLinkClick",e,t),!(!t.href||!t.hasAttribute("download")&&(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),R||l(),1))},z=0,M=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){g=e},onTap:function(){l()}},{name:"button--share",option:"shareEl",onInit:function(e){w=e},onTap:function(){l()}},{name:"button--zoom",option:"zoomEl",onTap:o.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){t=e}},{name:"button--close",option:"closeEl",onTap:o.close},{name:"button--arrow--left",option:"arrowEl",onTap:o.prev},{name:"button--arrow--right",option:"arrowEl",onTap:o.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){d.isFullscreen()?d.exit():d.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){C=e}}];K.init=function(){var t;s.extend(o.options,A,!0),F=o.options,m=s.getChildByClass(o.scrollWrap,"pswp__ui"),(_=o.listen)("onVerticalDrag",function(e){O&&e<.95?K.hideControls():!O&&.95<=e&&K.showControls()}),_("onPinchClose",function(e){O&&e<.9?(K.hideControls(),t=!0):t&&!O&&.9<e&&K.showControls()}),_("zoomGestureEnded",function(){(t=!1)&&!O&&K.showControls()}),_("beforeChange",K.update),_("doubleTap",function(e){var t=o.currItem.initialZoomLevel;o.getZoomLevel()!==t?o.zoomTo(t,e,333):o.zoomTo(F.getDoubleTapZoom(!1,o.currItem),e,333)}),_("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),_("bindEvents",function(){s.bind(m,"pswpTap click",e),s.bind(o.scrollWrap,"pswpTap",K.onGlobalTap),o.likelyTouchDevice||s.bind(o.scrollWrap,"mouseover",K.onMouseOver)}),_("unbindEvents",function(){R||l(),S&&clearInterval(S),s.unbind(document,"mouseout",u),s.unbind(document,"mousemove",a),s.unbind(m,"pswpTap click",e),s.unbind(o.scrollWrap,"pswpTap",K.onGlobalTap),s.unbind(o.scrollWrap,"mouseover",K.onMouseOver),d&&(s.unbind(document,d.eventK,K.updateFullscreen),d.isFullscreen()&&(F.hideAnimationDuration=0,d.exit()),d=null)}),_("destroy",function(){F.captionEl&&(h&&m.removeChild(h),s.removeClass(f,"pswp__caption--empty")),g&&(g.children[0].onclick=null),s.removeClass(m,"pswp__ui--over-close"),s.addClass(m,"pswp__ui--hidden"),K.setIdle(!1)}),F.showAnimationDuration||s.removeClass(m,"pswp__ui--hidden"),_("initialZoomIn",function(){F.showAnimationDuration&&s.removeClass(m,"pswp__ui--hidden")}),_("initialZoomOut",function(){s.addClass(m,"pswp__ui--hidden")}),_("parseVerticalMargin",p),D(),F.shareEl&&w&&g&&(R=!0),n(),F.timeToIdle&&_("mouseUsed",function(){s.bind(document,"mousemove",a),s.bind(document,"mouseout",u),S=setInterval(function(){2===++z&&K.setIdle(!0)},F.timeToIdle/2)}),F.fullscreenEl&&!s.features.isOldAndroid&&((d=d||K.getFullscreenAPI())?(s.bind(document,d.eventK,K.updateFullscreen),K.updateFullscreen(),s.addClass(o.template,"pswp--supports-fs")):s.removeClass(o.template,"pswp--supports-fs")),F.preloaderEl&&(c(!0),_("beforeChange",function(){clearTimeout(I),I=setTimeout(function(){o.currItem&&o.currItem.loading?o.allowProgressiveImg()&&(!o.currItem.img||o.currItem.img.naturalWidth)||c(!1):c(!0)},F.loadingIndicatorDelay)}),_("imageLoadComplete",function(e,t){o.currItem===t&&c(!0)}))},K.setIdle=function(e){y(m,"ui--idle",v=e)},K.update=function(){L=!(!O||!o.currItem||(K.updateIndexIndicator(),F.captionEl&&(F.addCaptionHTMLFn(o.currItem,f),y(f,"caption--empty",!o.currItem.title)),0)),R||l(),n()},K.updateFullscreen=function(e){e&&setTimeout(function(){o.setScrollOffset(0,s.getScrollY())},50),s[(d.isFullscreen()?"add":"remove")+"Class"](o.template,"pswp--fs")},K.updateIndexIndicator=function(){F.counterEl&&(t.innerHTML=o.getCurrentIndex()+1+F.indexIndicatorSep+F.getNumItemsFn())},K.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;if(!x)if(e.detail&&"mouse"===e.detail.pointerType)r(t)?o.close():s.hasClass(t,"pswp__img")&&(1===o.getZoomLevel()&&o.getZoomLevel()<=o.currItem.fitRatio?F.clickToCloseNonZoomable&&o.close():o.toggleDesktopZoom(e.detail.releasePoint));else if(F.tapToToggleControls&&(O?K.hideControls():K.showControls()),F.tapToClose&&(s.hasClass(t,"pswp__img")||r(t)))return void o.close()},K.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;y(m,"ui--over-close",r(e))},K.hideControls=function(){s.addClass(m,"pswp__ui--hidden"),O=!1},K.showControls=function(){O=!0,L||K.update(),s.removeClass(m,"pswp__ui--hidden")},K.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},K.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return b=F.closeOnScroll,F.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?o.template[this.enterK]():void o.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return F.closeOnScroll=b,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}});
/*jquery.mb.YTPlayer 02-02-2017
 _ jquery.mb.components 
 _ email: matteo@open-lab.com 
 _ Copyright (c) 2001-2017. Matteo Bicocchi (Pupunzi); 
 _ blog: http://pupunzi.open-lab.com 
 _ Open Lab s.r.l., Florence - Italy 
 */
function onYouTubeIframeAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}function uncamel(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function setUnit(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+jQuery/)?""+e+r:e}function setFilter(e,r,t){var a=uncamel(r),o=jQuery.browser.mozilla?"":jQuery.CSS.sfx;e[o+"filter"]=e[o+"filter"]||"",t=setUnit(t>jQuery.CSS.filters[r].max?jQuery.CSS.filters[r].max:t,jQuery.CSS.filters[r].unit),e[o+"filter"]+=a+"("+t+") ",delete e[r]}var ytp=ytp||{},getYTPVideoID=function(e){var r,t;return 0<e.indexOf("youtu.be")?r=(t=0<(r=e.substr(e.lastIndexOf("/")+1,e.length)).indexOf("?list=")?r.substr(r.lastIndexOf("="),r.length):null)?r.substr(0,r.lastIndexOf("?")):r:t=-1<e.indexOf("http")?(r=e.match(/[\\?&]v=([^&#]*)/)[1],0<e.indexOf("list=")?e.match(/[\\?&]list=([^&#]*)/)[1]:null):(r=15<e.length?null:e)?null:e,{videoID:r,playlistID:t}},nAgt=(!function(jQuery,ytp){jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"3.0.11",build:"6092",author:"Matteo Bicocchi (pupunzi)",apiKey:"",defaults:{containment:"body",ratio:"auto",videoURL:null,playlistURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:50,addRaster:!1,mask:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnBlur:!0,realfullscreen:!0,mobileFallbackImage:null,gaTrack:!0,optimizeDisplay:!0,anchor:"center,center",onReady:function(e){},onError:function(e,r){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},controlBar:null,loading:null,locationProtocol:"https:",filters:{grayscale:{value:0,unit:"%"},hue_rotate:{value:0,unit:"deg"},invert:{value:0,unit:"%"},opacity:{value:0,unit:"%"},saturate:{value:0,unit:"%"},sepia:{value:0,unit:"%"},brightness:{value:0,unit:"%"},contrast:{value:0,unit:"%"},blur:{value:0,unit:"px"}},buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer),property=(YTPlayer.loop=0,YTPlayer.opt={},YTPlayer.state={},YTPlayer.filters=jQuery.mbYTPlayer.filters,YTPlayer.filtersEnabled=!0,YTPlayer.id=YTPlayer.id||"YTP_"+(new Date).getTime(),$YTPlayer.addClass("mb_YTPlayer"),$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property")),isIframe=(void 0!==property&&void 0!==property.vol&&(property.vol=0===property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),YTPlayer.hasChanged||(YTPlayer.defaultOpt={},jQuery.extend(YTPlayer.defaultOpt,jQuery.mbYTPlayer.defaults,options)),"true"==YTPlayer.opt.loop&&(YTPlayer.opt.loop=9999),YTPlayer.isRetina=window.retina||1<window.devicePixelRatio,function(){var r=!1;try{self.location.href!=top.location.href&&(r=!0)}catch(e){r=!0}return r}),playerID=(YTPlayer.canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe()),YTPlayer.canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","ytp_"+(new Date).getTime()),"mbYTP_"+YTPlayer.id),playerVars=(YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0,YTPlayer.videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).videoID,YTPlayer.playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3",{modestbranding:1,autoplay:0,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations}),isPlayer,overlay,wrapper,playerBox,tag;document.createElement("video").canPlayType&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1),YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.defaultOpt.containment=YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground=YTPlayer.opt.containment.is("body"),YTPlayer.isBackground&&ytp.backgroundIsInited||(isPlayer=YTPlayer.opt.containment.is(jQuery(this)),YTPlayer.canPlayOnMobile=isPlayer&&0===jQuery(this).children().length,YTPlayer.isPlayer=!1,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide(),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay"),YTPlayer.isPlayer&&overlay.on("click",function(){$YTPlayer.YTPTogglePlay()}),wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID),wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({position:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.addClass("visible")}).on("mouseleave",function(){YTPlayer.controlBar&&YTPlayer.controlBar.length&&YTPlayer.controlBar.removeClass("visible")}),ytp.YTAPIReady?setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100):(jQuery("#YTAPI").remove(),tag=jQuery("<script><\/script>").attr({src:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/iframe_api?v="+jQuery.mbYTPlayer.version,id:"YTAPI"}),jQuery("head").prepend(tag)),jQuery.browser.mobile&&!YTPlayer.canPlayOnMobile?(YTPlayer.opt.mobileFallbackImage&&wrapper.css({backgroundImage:"url("+YTPlayer.opt.mobileFallbackImage+")",backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",opacity:1}),$YTPlayer.remove(),jQuery(document).trigger("YTPUnavailable")):(jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay=void 0===YTPlayer.opt.autoPlay?!!YTPlayer.isBackground:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol||100,jQuery.mbYTPlayer.getDataFromAPI(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){var h;YTPlayer.isInit||(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile?(YTPlayer.opt.containment.outerWidth()>jQuery(window).width()&&(YTPlayer.opt.containment.css({maxWidth:"100%"}),h=.563*YTPlayer.opt.containment.outerWidth(),YTPlayer.opt.containment.css({maxHeight:h})),new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),width:"100%",height:h,playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:1})}}})):new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){YTPlayer.player=e.target,YTPlayer.isReady||(YTPlayer.isReady=!(YTPlayer.isPlayer&&!YTPlayer.opt.autoPlay),YTPlayer.playerEl=YTPlayer.player.getIframe(),jQuery(YTPlayer.playerEl).unselectable(),$YTPlayer.optimizeDisplay(),jQuery(window).off("resize.YTP_"+YTPlayer.id).on("resize.YTP_"+YTPlayer.id,function(){$YTPlayer.optimizeDisplay()}),jQuery.mbYTPlayer.checkForState(YTPlayer))},onStateChange:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState(),eventType;if(YTPlayer.preventTrigger)YTPlayer.preventTrigger=!1;else{switch(YTPlayer.state=state,state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPPlay",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.hasData?YTPlayer.videoData.title:YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 5:eventType="YTPCued"}var YTPEvent=jQuery.Event(eventType);YTPEvent.time=YTPlayer.currentTime,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPEvent)}}},onPlaybackQualityChange:function(e){var e=e.target.getPlaybackQuality(),r=jQuery.Event("YTPQualityChange");r.quality=e,jQuery(YTPlayer).trigger(r)},onError:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList)&&jQuery(YTPlayer).playNext(),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}}))}))}),$YTPlayer.off("YTPTime.mask"),jQuery.mbYTPlayer.applyMask(YTPlayer)))})},getDataFromAPI:function(a){var e;a.videoData=jQuery.mbStorage.get("YTPlayer_data_"+a.videoID),jQuery(a).off("YTPData.YTPlayer").on("YTPData.YTPlayer",function(){var e;a.hasData&&a.isPlayer&&!a.opt.autoPlay&&(e=a.videoData.thumb_max||a.videoData.thumb_high||a.videoData.thumb_medium,a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+e+") center center",backgroundSize:"cover"}),a.opt.backgroundUrl=e)}),a.videoData?(setTimeout(function(){a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio,a.dataReceived=!0,jQuery(a).trigger("YTPChanged");var e,r=jQuery.Event("YTPData");for(e in r.prop={},a.videoData)r.prop[e]=a.videoData[e];jQuery(a).trigger(r)},500),a.hasData=!0):jQuery.mbYTPlayer.apiKey?jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//www.googleapis.com/youtube/v3/videos?id="+a.videoID+"&key="+jQuery.mbYTPlayer.apiKey+"&part=snippet",function(e){a.dataReceived=!0,jQuery(a).trigger("YTPChanged"),e=e.items[0].snippet,a.videoData={},a.videoData.id=a.videoID,a.videoData.channelTitle=e.channelTitle,a.videoData.title=e.title,a.videoData.description=e.description.length<400?e.description:e.description.substring(0,400)+" ...",a.videoData.aspectratio="auto"==a.opt.ratio?"16/9":a.opt.ratio,a.opt.ratio=a.videoData.aspectratio,a.videoData.thumb_max=e.thumbnails.maxres?e.thumbnails.maxres.url:null,a.videoData.thumb_high=e.thumbnails.high?e.thumbnails.high.url:null,a.videoData.thumb_medium=e.thumbnails.medium?e.thumbnails.medium.url:null,jQuery.mbStorage.set("YTPlayer_data_"+a.videoID,a.videoData),a.hasData=!0;var r,t=jQuery.Event("YTPData");for(r in t.prop={},a.videoData)t.prop[r]=a.videoData[r];jQuery(a).trigger(t)}):(setTimeout(function(){jQuery(a).trigger("YTPChanged")},50),a.isPlayer&&!a.opt.autoPlay&&(e=jQuery.mbYTPlayer.locationProtocol+"//i.ytimg.com/vi/"+a.videoID+"/hqdefault.jpg",a.opt.containment.css({background:"rgba(0,0,0,0.5) url("+e+") center center",backgroundSize:"cover"}),a.opt.backgroundUrl=e),a.videoData=null,a.opt.ratio="auto"==a.opt.ratio?"16/9":a.opt.ratio),!a.isPlayer||a.opt.autoPlay||jQuery.browser.mobile||(a.loading=jQuery("<div/>").addClass("loading").html("Loading").hide(),jQuery(a).append(a.loading),a.loading.fadeIn())},removeStoredData:function(){jQuery.mbStorage.remove()},getVideoData:function(){return this.get(0).videoData},getVideoID:function(){return this.get(0).videoID||!1},setVideoQuality:function(e){this.get(0).player.setPlaybackQuality(e)},playlist:function(e,r,t,a){var o=this.get(0);return o.isPlayList=!0,r&&(e=jQuery.shuffle(e)),o.videoID||(o.videos=e,o.videoCounter=0,o.videoLength=e.length,jQuery(o).data("property",e[0]),jQuery(o).mb_YTPlayer()),"function"==typeof t&&jQuery(o).one("YTPChanged",function(){t(o)}),jQuery(o).on("YTPEnd",function(){a=void 0===a||a,jQuery(o).playNext(a)}),this},playNext:function(e){var r=this.get(0);return r.checkForStartAt&&(clearTimeout(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter++,r.videoCounter>=r.videoLength&&e&&(r.videoCounter=0),r.videoCounter<r.videoLength?jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]):r.videoCounter--,this},playPrev:function(){var e=this.get(0);return e.checkForStartAt&&(clearInterval(e.checkForStartAt),clearInterval(e.getState)),e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e).YTPChangeMovie(e.videos[e.videoCounter]),this},playIndex:function(e){var r=this.get(0);return--e,r.checkForStartAt&&(clearInterval(r.checkForStartAt),clearInterval(r.getState)),r.videoCounter=e,r.videoCounter>=r.videoLength-1&&(r.videoCounter=r.videoLength-1),jQuery(r).YTPChangeMovie(r.videos[r.videoCounter]),this},changeMovie:function(e){var r=this.get(0);r.opt.startAt=0,r.opt.stopAt=0,r.opt.mask=!1,r.opt.mute=!0,r.hasData=!1,r.hasChanged=!0,r.player.loopTime=void 0,e&&jQuery.extend(r.opt,e),r.videoID=getYTPVideoID(r.opt.videoURL).videoID,"true"==r.opt.loop&&(r.opt.loop=9999),jQuery(r.playerEl).CSSAnimate({opacity:0},200,function(){var e=jQuery.Event("YTPChangeMovie");e.time=r.currentTime,e.videoId=r.videoID,jQuery(r).trigger(e),jQuery(r).YTPGetPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+r.videoID),1,r.opt.quality),jQuery(r).optimizeDisplay(),jQuery.mbYTPlayer.checkForState(r),jQuery.mbYTPlayer.getDataFromAPI(r)}),jQuery.mbYTPlayer.applyMask(r)},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);return ytp.YTAPIReady=!0,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null,e.isReady=!1,e.wrapper.remove(),jQuery("#controlBar_"+e.id).remove(),clearInterval(e.checkForStartAt),clearInterval(e.getState),this},fullscreen:function(real){function hideMouse(){YTPlayer.overlay.css({cursor:"none"})}function RunPrefixMethod(e,r){for(var t,a,o=["webkit","moz","ms","o",""],i=0;i<o.length&&!e[t];){if(t=r,""==o[i]&&(t=t.substr(0,1).toLowerCase()+t.substr(1)),"undefined"!=(a=typeof e[t=o[i]+t]))return o=[o[i]],"function"==a?e[t]():e[t];i++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0),controls=(void 0===real&&(real=YTPlayer.opt.realfullscreen),real=eval(real),jQuery("#controlBar_"+YTPlayer.id)),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper,fullscreenchange;return real&&(fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange",jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen")?(jQuery(YTPlayer).YTPSetVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).YTPSetVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("YTPFullscreen"),videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})),YTPlayer.isAlone?(jQuery(document).off("mousemove.YTPlayer"),clearTimeout(YTPlayer.hideCursor),YTPlayer.overlay.css({cursor:"auto"}),real?cancelFullscreen():(videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(jQuery(document).on("mousemove.YTPlayer",function(e){YTPlayer.overlay.css({cursor:"auto"}),clearTimeout(YTPlayer.hideCursor),jQuery(e.target).parents().is(".mb_YTPBar")||(YTPlayer.hideCursor=setTimeout(hideMouse,3e3))}),hideMouse(),real?(videoWrapper.css({opacity:0}),videoWrapper.addClass("YTPFullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({opacity:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0),this},toggleLoops:function(){var e=this.get(0),r=e.opt;return 1==r.loop?r.loop=0:(r.startAt?e.player.seekTo(r.startAt):e.player.playVideo(),r.loop=1),this},play:function(){var e=this.get(0);return e.isReady&&(e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},2e3),jQuery(e.playerEl).CSSAnimate({opacity:1},1e3),jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),e.state=1,jQuery(e).css("background-image","none")),this},togglePlay:function(e){var r=this.get(0);return 1==r.state?this.YTPPause():this.YTPPlay(),"function"==typeof e&&e(r.state),this},stop:function(){var e=this.get(0);return jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo(),this},pause:function(){var e=this.get(0);return e.player.pauseVideo(),e.state=2,this},seekTo:function(e){return this.get(0).player.seekTo(e,!0),this},setVolume:function(e){var r=this.get(0);return e||r.opt.vol||0!=r.player.getVolume()?!e&&0<r.player.getVolume()||e&&r.opt.vol==e?r.isMute?jQuery(r).YTPUnmute():jQuery(r).YTPMute():(r.opt.vol=e,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(e)):jQuery(r).YTPUnmute(),this},toggleVolume:function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).YTPUnmute(),!0):(jQuery(e).YTPMute(),!1)},mute:function(){var e,r=this.get(0);if(!r.isMute)return r.player.mute(),r.isMute=!0,r.player.setVolume(0),r.volumeBar&&r.volumeBar.length&&10<r.volumeBar.width()&&r.volumeBar.updateSliderVal(0),jQuery("#controlBar_"+r.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.unmute),jQuery(r).addClass("isMuted"),r.volumeBar&&r.volumeBar.length&&r.volumeBar.addClass("muted"),(e=jQuery.Event("YTPMuted")).time=r.currentTime,r.canTrigger&&jQuery(r).trigger(e),this},unmute:function(){var e,r=this.get(0);if(r.isMute)return r.player.unMute(),r.isMute=!1,r.player.setVolume(r.opt.vol),r.volumeBar&&r.volumeBar.length&&r.volumeBar.updateSliderVal(10<r.opt.vol?r.opt.vol:10),jQuery("#controlBar_"+r.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.mute),jQuery(r).removeClass("isMuted"),r.volumeBar&&r.volumeBar.length&&r.volumeBar.removeClass("muted"),(e=jQuery.Event("YTPUnmuted")).time=r.currentTime,r.canTrigger&&jQuery(r).trigger(e),this},applyFilter:function(e,r){return this.each(function(){this.filters[e].value=r,this.filtersEnabled&&jQuery(this).YTPEnableFilters()})},applyFilters:function(t){return this.each(function(){var e=this;if(e.isReady){for(var r in t)jQuery(e).YTPApplyFilter(r,t[r]);jQuery(e).trigger("YTPFiltersApplied")}else jQuery(e).on("YTPReady",function(){jQuery(e).YTPApplyFilters(t)})})},toggleFilter:function(e,r){return this.each(function(){this.filters[e].value?this.filters[e].value=0:this.filters[e].value=r,this.filtersEnabled&&jQuery(this).YTPEnableFilters()})},toggleFilters:function(r){return this.each(function(){var e=this;e.filtersEnabled?(jQuery(e).trigger("YTPDisableFilters"),jQuery(e).YTPDisableFilters()):(jQuery(e).YTPEnableFilters(),jQuery(e).trigger("YTPEnableFilters")),"function"==typeof r&&r(e.filtersEnabled)})},disableFilters:function(){return this.each(function(){var e=jQuery(this.playerEl);e.css("-webkit-filter",""),e.css("filter",""),this.filtersEnabled=!1})},enableFilters:function(){return this.each(function(){var e,r=this,t=jQuery(r.playerEl),a="";for(e in r.filters)r.filters[e].value&&(a+=e.replace("_","-")+"("+r.filters[e].value+r.filters[e].unit+") ");t.css("-webkit-filter",a),t.css("filter",a),r.filtersEnabled=!0})},removeFilter:function(r,t){return this.each(function(){if("function"==typeof r&&(t=r,r=null),r)jQuery(this).YTPApplyFilter(r,0),"function"==typeof t&&t(r);else for(var e in this.filters)jQuery(this).YTPApplyFilter(e,0),"function"==typeof t&&t(e)})},getFilters:function(){return this.get(0).filters},addMask:function(e){var r=this.get(0),t=r.overlay,a=(e=e||r.actualMask,jQuery("<img/>").attr("src",e).on("load",function(){t.CSSAnimate({opacity:0},500,function(){r.hasMask=!0,a.remove(),t.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"}),t.CSSAnimate({opacity:1},500)})}));return this},removeMask:function(){var e=this.get(0),r=e.overlay;return r.CSSAnimate({opacity:0},500,function(){e.hasMask=!1,r.css({backgroundImage:"",backgroundRepeat:"",backgroundPosition:"",backgroundSize:""}),r.CSSAnimate({opacity:1},500)}),this},applyMask:function(t){var a=jQuery(t);if(a.off("YTPTime.mask"),t.opt.mask)if("string"==typeof t.opt.mask)a.YTPAddMask(t.opt.mask),t.actualMask=t.opt.mask;else if("object"==typeof t.opt.mask){for(var e in t.opt.mask)t.opt.mask[e]&&jQuery("<img/>").attr("src",t.opt.mask[e]);t.opt.mask[0]&&a.YTPAddMask(t.opt.mask[0]),a.on("YTPTime.mask",function(e){for(var r in t.opt.mask)e.time==r&&(t.opt.mask[r]?(a.YTPAddMask(t.opt.mask[r]),t.actualMask=t.opt.mask[r]):a.YTPRemoveMask())})}},toggleMask:function(){var e=this.get(0),r=$(e);return e.hasMask?r.YTPRemoveMask():r.YTPAddMask(),this},manageProgress:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),t=r.find(".mb_YTPProgress"),a=r.find(".mb_YTPLoaded"),r=r.find(".mb_YTPseekbar"),t=t.outerWidth(),o=Math.floor(e.player.getCurrentTime()),i=Math.floor(e.player.getDuration()),t=o*t/i,e=100*e.player.getVideoLoadedFraction();return a.css({left:0,width:e+"%"}),r.css({left:0,width:t}),{totalTime:i,currentTime:o}},buildControls:function(YTPlayer){var data=YTPlayer.opt,buttonBar,playpause,MuteUnmute,volumeBar,idx,vURL,movieUrl,onlyVideo,progressBar,loadedBar,timeBar;data.showYTLogo=data.showYTLogo||data.printUrl,jQuery("#controlBar_"+YTPlayer.id).length||(YTPlayer.controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({whiteSpace:"noWrap",position:YTPlayer.isBackground?"fixed":"absolute",zIndex:YTPlayer.isBackground?1e4:1e3}).hide(),buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).YTPPause():jQuery(YTPlayer).YTPPlay()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).YTPUnmute():jQuery(YTPlayer).YTPMute()}),volumeBar=jQuery("<div/>").addClass("mb_YTPVolumeBar").css({display:"inline-block"}),YTPlayer.volumeBar=volumeBar,idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL||"",vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL),movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).YTPFullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({width:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0});e=Math.floor(YTPlayer.player.getDuration());YTPlayer.goto=timeBar.outerWidth()*e/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer.goto),!0),YTPlayer.controlBar.find(".mb_YTPLoaded").css({width:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute"),progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(volumeBar).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),YTPlayer.controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(YTPlayer.controlBar):(YTPlayer.controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(YTPlayer.controlBar)),volumeBar.simpleSlider({initialval:YTPlayer.opt.vol,scale:100,orientation:"h",callback:function(e){0==e.value?jQuery(YTPlayer).YTPMute():jQuery(YTPlayer).YTPUnmute(),YTPlayer.player.setVolume(e.value),YTPlayer.isMute||(YTPlayer.opt.vol=e.value)}}))},checkForState:function(YTPlayer){var interval=YTPlayer.opt.showControls?100:400;return clearInterval(YTPlayer.getState),jQuery.contains(document,YTPlayer)?(jQuery.mbYTPlayer.checkForStart(YTPlayer),void(YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).YTPManageProgress(),$YTPlayer=jQuery(YTPlayer),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt||1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0,YTPEvent,stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPEnd;if(YTPlayer.currentTime!=prog.currentTime&&(YTPEvent=jQuery.Event("YTPTime"),YTPEvent.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(YTPEvent)),YTPlayer.currentTime=prog.currentTime,YTPlayer.totalTime=YTPlayer.player.getDuration(),0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),YTPlayer.opt.showControls&&(prog.totalTime?YTPlayer.controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):YTPlayer.controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.YTPPlay()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.YTPPause())),YTPlayer.controlBar.length&&YTPlayer.controlBar.outerWidth()<=400&&!YTPlayer.isCompact?(YTPlayer.controlBar.addClass("compact"),YTPlayer.isCompact=!0,!YTPlayer.isMute&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol)):YTPlayer.controlBar.length&&400<YTPlayer.controlBar.outerWidth()&&YTPlayer.isCompact&&(YTPlayer.controlBar.removeClass("compact"),YTPlayer.isCompact=!1,!YTPlayer.isMute)&&YTPlayer.volumeBar&&YTPlayer.volumeBar.updateSliderVal(YTPlayer.opt.vol),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-1.5)<YTPlayer.player.getCurrentTime()||0<stopAt&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)&&!YTPlayer.isEnded){if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},1e3),YTPlayer.isPlayList){if(!data.loop||0<data.loop&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,clearInterval(YTPlayer.getState),YTPEnd=jQuery.Event("YTPEnd"),YTPEnd.time=YTPlayer.currentTime,void jQuery(YTPlayer).trigger(YTPEnd)}else if(!data.loop||0<data.loop&&YTPlayer.player.loopTime===data.loop-1)return YTPlayer.player.loopTime=void 0,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),void YTPlayer.wrapper.CSSAnimate({opacity:0},500,function(){YTPlayer.controlBar.length&&YTPlayer.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);var e=jQuery.Event("YTPEnd");e.time=YTPlayer.currentTime,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),YTPlayer.isBackground||YTPlayer.opt.containment.css({background:"rgba(0,0,0,0.5) url("+YTPlayer.opt.backgroundUrl+") center center",backgroundSize:"cover"})});YTPlayer.player.loopTime=YTPlayer.player.loopTime?++YTPlayer.player.loopTime:1,startAt=startAt||1,YTPlayer.preventTrigger=!0,YTPlayer.state=2,jQuery(YTPlayer).YTPPause(),YTPlayer.player.seekTo(startAt,!0),$YTPlayer.YTPPlay()}},interval))):(jQuery(YTPlayer).YTPPlayerDestroy(),clearInterval(YTPlayer.getState),void clearInterval(YTPlayer.checkForStartAt))},getTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.currentTime)},getTotalTime:function(){var e=this.get(0);return jQuery.mbYTPlayer.formatTime(e.totalTime)},checkForStart:function(r){var e,t,a=jQuery(r);jQuery.contains(document,r)?(r.preventTrigger=!0,r.state=2,jQuery(r).YTPPause(),jQuery(r).muteYTPVolume(),jQuery("#controlBar_"+r.id).remove(),r.controlBar=!1,r.opt.showControls&&jQuery.mbYTPlayer.buildControls(r),r.opt.addRaster?(e="dot"==r.opt.addRaster?"raster-dot":"raster",r.overlay.addClass(r.isRetina?e+" retina":e)):r.overlay.removeClass(function(e,r){var r=r.split(" "),t=[];return jQuery.each(r,function(e,r){/raster.*/.test(r)&&t.push(r)}),t.push("retina"),t.join(" ")}),t=r.opt.startAt||1,r.player.playVideo(),r.player.seekTo(t,!0),r.checkForStartAt=setInterval(function(){jQuery(r).YTPMute();var e=r.player.getVideoLoadedFraction()>=t/r.player.getDuration();0<r.player.getDuration()&&r.player.getCurrentTime()>=t&&e?(clearInterval(r.checkForStartAt),"function"==typeof r.opt.onReady&&r.opt.onReady(r),r.isReady=!0,(e=jQuery.Event("YTPReady")).time=r.currentTime,jQuery(r).trigger(e),r.preventTrigger=!0,r.state=2,jQuery(r).YTPPause(),r.opt.mute||jQuery(r).YTPUnmute(),r.canTrigger=!0,r.opt.autoPlay?((e=jQuery.Event("YTPStart")).time=r.currentTime,jQuery(r).trigger(e),a.css("background-image","none"),jQuery(r.playerEl).CSSAnimate({opacity:1},1e3),a.YTPPlay(),r.wrapper.CSSAnimate({opacity:r.isAlone?1:r.opt.opacity},1e3),jQuery.browser.safari&&(r.safariPlay=setInterval(function(){1!=r.state?a.YTPPlay():clearInterval(r.safariPlay)},10)),a.on("YTPReady",function(){a.YTPPlay()})):(r.player.pauseVideo(),r.isPlayer||(jQuery(r.playerEl).CSSAnimate({opacity:1},500),r.wrapper.CSSAnimate({opacity:r.isAlone?1:r.opt.opacity},500)),r.controlBar.length&&r.controlBar.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play)),r.isPlayer&&!r.opt.autoPlay&&r.loading&&r.loading.length&&(r.loading.html("Ready"),setTimeout(function(){r.loading.fadeOut()},100)),r.controlBar&&r.controlBar.length&&r.controlBar.slideDown(1e3)):jQuery.browser.safari&&(r.player.playVideo(),0<=t)&&r.player.seekTo(t,!0)},1)):jQuery(r).YTPPlayerDestroy()},setAnchor:function(e){this.optimizeDisplay(e)},getAnchor:function(){return this.get(0).opt.anchor},formatTime:function(e){var r=Math.floor(e/60),e=Math.floor(e-60*r);return(r<=9?"0"+r:r)+" : "+(e<=9?"0"+e:e)}},jQuery.fn.optimizeDisplay=function(e){var r=this.get(0),t=jQuery(r.playerEl),a={},o=(r.opt.anchor=e||r.opt.anchor,r.opt.anchor="undefined "!=typeof r.opt.anchor?r.opt.anchor:"center,center",r.opt.anchor.split(","));if(r.opt.optimizeDisplay){var i,e=r.isPlayer?0:80,n={},l=r.wrapper,s=(n.width=l.outerWidth(),n.height=l.outerHeight()+e,a.width=n.width,a.height="16/9"==r.opt.ratio?Math.ceil(a.width*(9/16)):Math.ceil(.75*a.width),a.marginTop=-(a.height-n.height)/2,a.marginLeft=0,a.height<n.height);for(i in s&&(a.height=n.height,a.width="16/9"==r.opt.ratio?Math.floor(a.height*(16/9)):Math.floor(a.height*(4/3)),a.marginTop=0,a.marginLeft=-(a.width-n.width)/2),o)if(o.hasOwnProperty(i))switch(o[i].replace(/ /g,"")){case"top":a.marginTop=s?-(a.height-n.height)/2:0;break;case"bottom":a.marginTop=s?0:-(a.height-n.height);break;case"left":a.marginLeft=0;break;case"right":a.marginLeft=s?-(a.width-n.width):0;break;default:n.width<a.width&&(a.marginLeft=-(a.width-n.width)/2)}}else a.width="100%",a.height="100%",a.marginTop=0,a.marginLeft=0;t.css({width:a.width,height:a.height,marginTop:a.marginTop,marginLeft:a.marginLeft,maxWidth:"initial"})},jQuery.shuffle=function(e){for(var r=e.slice(),t=r.length,a=t;a--;){var o=parseInt(Math.random()*t),i=r[a];r[a]=r[o],r[o]=i}return r},jQuery.fn.unselectable=function(){return this.each(function(){jQuery(this).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).attr("unselectable","on")})},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPGetPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.YTPGetVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.YTPChangeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.YTPPlayerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.YTPPlay=jQuery.mbYTPlayer.play,jQuery.fn.YTPTogglePlay=jQuery.mbYTPlayer.togglePlay,jQuery.fn.YTPStop=jQuery.mbYTPlayer.stop,jQuery.fn.YTPPause=jQuery.mbYTPlayer.pause,jQuery.fn.YTPSeekTo=jQuery.mbYTPlayer.seekTo,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.playlist,jQuery.fn.YTPPlayNext=jQuery.mbYTPlayer.playNext,jQuery.fn.YTPPlayPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.YTPPlayIndex=jQuery.mbYTPlayer.playIndex,jQuery.fn.YTPMute=jQuery.mbYTPlayer.mute,jQuery.fn.YTPUnmute=jQuery.mbYTPlayer.unmute,jQuery.fn.YTPToggleVolume=jQuery.mbYTPlayer.toggleVolume,jQuery.fn.YTPSetVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.YTPGetVideoData=jQuery.mbYTPlayer.getVideoData,jQuery.fn.YTPFullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.YTPToggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.YTPSetVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.YTPManageProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPApplyFilter=jQuery.mbYTPlayer.applyFilter,jQuery.fn.YTPApplyFilters=jQuery.mbYTPlayer.applyFilters,jQuery.fn.YTPToggleFilter=jQuery.mbYTPlayer.toggleFilter,jQuery.fn.YTPToggleFilters=jQuery.mbYTPlayer.toggleFilters,jQuery.fn.YTPRemoveFilter=jQuery.mbYTPlayer.removeFilter,jQuery.fn.YTPDisableFilters=jQuery.mbYTPlayer.disableFilters,jQuery.fn.YTPEnableFilters=jQuery.mbYTPlayer.enableFilters,jQuery.fn.YTPGetFilters=jQuery.mbYTPlayer.getFilters,jQuery.fn.YTPGetTime=jQuery.mbYTPlayer.getTime,jQuery.fn.YTPGetTotalTime=jQuery.mbYTPlayer.getTotalTime,jQuery.fn.YTPAddMask=jQuery.mbYTPlayer.addMask,jQuery.fn.YTPRemoveMask=jQuery.mbYTPlayer.removeMask,jQuery.fn.YTPToggleMask=jQuery.mbYTPlayer.toggleMask,jQuery.fn.YTPSetAnchor=jQuery.mbYTPlayer.setAnchor,jQuery.fn.YTPGetAnchor=jQuery.mbYTPlayer.getAnchor,jQuery.fn.mb_YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.play,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stop,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pause,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekTo,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.mute,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmute,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageProgress,jQuery.fn.YTPGetDataFromFeed=jQuery.mbYTPlayer.getVideoData}(jQuery,ytp),jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),jQuery.CSS={name:"mb.CSSAnimate",author:"Matteo Bicocchi",version:"2.0.0",transitionEnd:"transitionEnd",sfx:"",filters:{blur:{min:0,max:100,unit:"px"},brightness:{min:0,max:400,unit:"%"},contrast:{min:0,max:400,unit:"%"},grayscale:{min:0,max:100,unit:"%"},hueRotate:{min:0,max:360,unit:"deg"},invert:{min:0,max:100,unit:"%"},saturate:{min:0,max:400,unit:"%"},sepia:{min:0,max:100,unit:"%"}},normalizeCss:function(e){var r,t=jQuery.extend(!0,{},e);for(r in jQuery.browser.webkit||jQuery.browser.opera?jQuery.CSS.sfx="-webkit-":jQuery.browser.mozilla?jQuery.CSS.sfx="-moz-":jQuery.browser.msie&&(jQuery.CSS.sfx="-ms-"),t){"transform"===r&&(t[jQuery.CSS.sfx+"transform"]=t[r],delete t[r]),"transform-origin"===r&&(t[jQuery.CSS.sfx+"transform-origin"]=e[r],delete t[r]),"filter"!==r||jQuery.browser.mozilla||(t[jQuery.CSS.sfx+"filter"]=e[r],delete t[r]),"blur"===r&&setFilter(t,"blur",e[r]),"brightness"===r&&setFilter(t,"brightness",e[r]),"contrast"===r&&setFilter(t,"contrast",e[r]),"grayscale"===r&&setFilter(t,"grayscale",e[r]),"hueRotate"===r&&setFilter(t,"hueRotate",e[r]),"invert"===r&&setFilter(t,"invert",e[r]),"saturate"===r&&setFilter(t,"saturate",e[r]),"sepia"===r&&setFilter(t,"sepia",e[r]);var a="";"x"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateX("+setUnit(e[r],"px")+")",delete t[r]),"y"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateY("+setUnit(e[r],"px")+")",delete t[r]),"z"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" translateZ("+setUnit(e[r],"px")+")",delete t[r]),"rotate"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotate("+setUnit(e[r],"deg")+")",delete t[r]),"rotateX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateX("+setUnit(e[r],"deg")+")",delete t[r]),"rotateY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateY("+setUnit(e[r],"deg")+")",delete t[r]),"rotateZ"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" rotateZ("+setUnit(e[r],"deg")+")",delete t[r]),"scale"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scale("+setUnit(e[r],"")+")",delete t[r]),"scaleX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleX("+setUnit(e[r],"")+")",delete t[r]),"scaleY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleY("+setUnit(e[r],"")+")",delete t[r]),"scaleZ"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" scaleZ("+setUnit(e[r],"")+")",delete t[r]),"skew"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skew("+setUnit(e[r],"deg")+")",delete t[r]),"skewX"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skewX("+setUnit(e[r],"deg")+")",delete t[r]),"skewY"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" skewY("+setUnit(e[r],"deg")+")",delete t[r]),"perspective"===r&&(t[a=jQuery.CSS.sfx+"transform"]=t[a]||"",t[a]+=" perspective("+setUnit(e[r],"px")+")",delete t[r])}return t},getProp:function(e){var r,t=[];for(r in e)t.indexOf(r)<0&&t.push(uncamel(r));return t.join(",")},animate:function(s,u,y,c,p){return this.each(function(){function e(){t.called=!0,t.CSSAIsRunning=!1,a.off(jQuery.CSS.transitionEnd+"."+t.id),clearTimeout(t.timeout),a.css(jQuery.CSS.sfx+"transition",""),"function"==typeof p&&p.apply(t),"function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null)}var r,t=this,a=jQuery(this),o=(t.id=t.id||"CSSA_"+(new Date).getTime(),{type:"noEvent"});if(t.CSSAIsRunning&&t.eventType==o.type&&!jQuery.browser.msie&&jQuery.browser.version<=9)t.CSSqueue=function(){a.CSSAnimate(s,u,y,c,p)};else if(t.CSSqueue=null,t.eventType=o.type,0!==a.length&&s){if(s=jQuery.normalizeCss(s),t.CSSAIsRunning=!0,"function"==typeof u&&(p=u,u=jQuery.fx.speeds._default),"function"==typeof y&&(c=y,y=0),"string"==typeof y&&(p=y,y=0),"function"==typeof c&&(p=c,c="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof u)for(var i in jQuery.fx.speeds){if(u==i){u=jQuery.fx.speeds[i];break}u=jQuery.fx.speeds._default}if(u=u||jQuery.fx.speeds._default,"string"==typeof p&&(c=p,p=null),jQuery.support.CSStransition){var o={default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},o=(o[c]&&(c=o[c]),a.off(jQuery.CSS.transitionEnd+"."+t.id),jQuery.CSS.getProp(s)),n={};jQuery.extend(n,s),n[jQuery.CSS.sfx+"transition-property"]=o,n[jQuery.CSS.sfx+"transition-duration"]=u+"ms",n[jQuery.CSS.sfx+"transition-delay"]=y+"ms",n[jQuery.CSS.sfx+"transition-timing-function"]=c,setTimeout(function(){a.one(jQuery.CSS.transitionEnd+"."+t.id,e),a.css(n)},1),t.timeout=setTimeout(function(){return t.called||!p?(t.called=!1,void(t.CSSAIsRunning=!1)):(a.css(jQuery.CSS.sfx+"transition",""),p.apply(t),t.CSSAIsRunning=!1,void("function"==typeof t.CSSqueue&&(t.CSSqueue(),t.CSSqueue=null)))},u+y+10)}else{for(var l in s)"transform"===l&&delete s[l],"filter"===l&&delete s[l],"transform-origin"===l&&delete s[l],"auto"===s[l]&&delete s[l],"x"===l&&(r=s[l],s["left"]=r,delete s[l]),"y"===l&&(r=s[l],s["top"]=r,delete s[l]),"-ms-transform"!==l&&"-ms-filter"!==l||delete s[l];a.delay(y).animate(s,u,p)}}})}},jQuery.fn.CSSAnimate=jQuery.CSS.animate,jQuery.normalizeCss=jQuery.CSS.normalizeCss,jQuery.fn.css3=function(t){return this.each(function(){var e=jQuery(this),r=jQuery.normalizeCss(t);e.css(r)})},navigator.userAgent),nameOffset,verOffset,ix,start,end,nAgt=(jQuery.browser||(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,end=start+4,jQuery.browser.fullVersion=nAgt.substring(start,end)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase())&&(jQuery.browser.name=navigator.appName),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion),jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),navigator.userAgent),nameOffset,verOffset,ix,start,end;jQuery.browser||(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.androidStock=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("OPR"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4)):-1!=(verOffset=nAgt.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5)):-1!=nAgt.indexOf("Trident")||-1!=nAgt.indexOf("Edge")?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",start=nAgt.indexOf("rv:")+3,end=start+4,jQuery.browser.fullVersion=nAgt.substring(start,end)):-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1<nAgt.indexOf("mozilla/5.0")&&-1<nAgt.indexOf("android ")&&-1<nAgt.indexOf("applewebkit")&&!(-1<nAgt.indexOf("chrome"))?(verOffset=nAgt.indexOf("Chrome"),jQuery.browser.webkit=!0,jQuery.browser.androidStock=!0,jQuery.browser.name="androidStock",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))||-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase())&&(jQuery.browser.name=navigator.appName),-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion),jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&765<jQuery(window).width(),jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt),function(o){o.simpleSlider={defaults:{initialval:0,scale:100,orientation:"h",readonly:!1,callback:!1},events:{start:o.browser.mobile?"touchstart":"mousedown",end:o.browser.mobile?"touchend":"mouseup",move:o.browser.mobile?"touchmove":"mousemove"},init:function(a){return this.each(function(){var r=this,t=o(r),e=(t.addClass("simpleSlider"),r.opt={},o.extend(r.opt,o.simpleSlider.defaults,a),o.extend(r.opt,t.data()),"h"==r.opt.orientation?"horizontal":"vertical"),e=o("<div/>").addClass("level").addClass(e);t.prepend(e),r.level=e,t.css({cursor:"default"}),"auto"==r.opt.scale&&(r.opt.scale=o(r).outerWidth()),t.updateSliderVal(),r.opt.readonly||(t.on(o.simpleSlider.events.start,function(e){o.browser.mobile&&(e=e.changedTouches[0]),r.canSlide=!0,t.updateSliderVal(e),"h"==r.opt.orientation?t.css({cursor:"col-resize"}):t.css({cursor:"row-resize"}),e.preventDefault(),e.stopPropagation()}),o(document).on(o.simpleSlider.events.move,function(e){o.browser.mobile&&(e=e.changedTouches[0]),r.canSlide&&(o(document).css({cursor:"default"}),t.updateSliderVal(e),e.preventDefault(),e.stopPropagation())}).on(o.simpleSlider.events.end,function(){o(document).css({cursor:"auto"}),r.canSlide=!1,t.css({cursor:"auto"})}))})},updateSliderVal:function(e){var r,t,a=this.get(0);a.opt&&(a.opt.initialval="number"==typeof a.opt.initialval?a.opt.initialval:a.opt.initialval(a),r=o(a).outerWidth(),t=o(a).outerHeight(),a.x="object"==typeof e?e.clientX+document.body.scrollLeft-this.offset().left:"number"==typeof e?e*r/a.opt.scale:a.opt.initialval*r/a.opt.scale,a.y="object"==typeof e?e.clientY+document.body.scrollTop-this.offset().top:"number"==typeof e?(a.opt.scale-a.opt.initialval-e)*t/a.opt.scale:a.opt.initialval*t/a.opt.scale,a.y=this.outerHeight()-a.y,a.scaleX=a.x*a.opt.scale/r,a.scaleY=a.y*a.opt.scale/t,a.outOfRangeX=a.scaleX>a.opt.scale?a.scaleX-a.opt.scale:a.scaleX<0?a.scaleX:0,a.outOfRangeY=a.scaleY>a.opt.scale?a.scaleY-a.opt.scale:a.scaleY<0?a.scaleY:0,a.outOfRange="h"==a.opt.orientation?a.outOfRangeX:a.outOfRangeY,a.value=void 0!==e?"h"==a.opt.orientation?a.x>=this.outerWidth()?a.opt.scale:a.x<=0?0:a.scaleX:a.y>=this.outerHeight()?a.opt.scale:a.y<=0?0:a.scaleY:"h"==a.opt.orientation?a.scaleX:a.scaleY,"h"==a.opt.orientation?a.level.width(Math.floor(100*a.x/r)+"%"):a.level.height(Math.floor(100*a.y/t)),"function"==typeof a.opt.callback)&&a.opt.callback(a)}},o.fn.simpleSlider=o.simpleSlider.init,o.fn.updateSliderVal=o.simpleSlider.updateSliderVal}(jQuery),function(r){r.mbCookie={set:function(e,r,t,a){r=JSON.stringify(r),t=t||7,a=a?"; domain="+a:"";var o=new Date;o.setTime(o.getTime()+864e5*t),t="; expires="+o.toGMTString(),document.cookie=e+"="+r+t+"; path=/"+a},get:function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(r))return JSON.parse(o.substring(r.length,o.length))}return null},remove:function(e){r.mbCookie.set(e,"",-1)}},r.mbStorage={set:function(e,r){r=JSON.stringify(r),localStorage.setItem(e,r)},get:function(e){return localStorage[e]?JSON.parse(localStorage[e]):null},remove:function(e){e?localStorage.removeItem(e):localStorage.clear()}}}(jQuery);
/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).store=e()}(function(){var define,module,exports;return function r(o,i,u){function a(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=i[n]={exports:{}};o[n][0].call(t.exports,function(e){var t=o[n][1][e];return a(t||e)},t,t.exports,r,o,i,u)}return i[n].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)a(u[e]);return a}({1:[function(e,t,n){"use strict";var r=e("../src/store-engine"),o=e("../storages/all"),e=[e("../plugins/json2")];t.exports=r.createStore(o,e)},{"../plugins/json2":2,"../src/store-engine":4,"../storages/all":6}],2:[function(e,t,n){"use strict";t.exports=function(){return e("./lib/json2"),{}}},{"./lib/json2":3}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,u,a=gap,c=t[e];switch(c&&"object"===(void 0===c?"undefined":_typeof(c))&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),void 0===(c="function"==typeof rep?rep.call(t,e,c):c)?"undefined":_typeof(c)){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(c)){for(i=c.length,n=0;n<i;n+=1)u[n]=str(n,c)||"null";o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+a+"]":"["+u.join(",")+"]"}else{if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(o=str(r=rep[n],c))&&u.push(quote(r)+(gap?": ":":")+o);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o=str(r,c),o)&&u.push(quote(r)+(gap?": ":":")+o);o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+a+"}":"{"+u.join(",")+"}"}return gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=t)||"function"==typeof t||"object"===(void 0===t?"undefined":_typeof(t))&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"===(void 0===o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],4:[function(e,t,n){"use strict";function r(e,t,n){n=n||"",e&&!l(e)&&(e=[e]),t&&!l(t)&&(t=[t]);var r,o=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+o):null;if(/^[a-zA-Z0-9_\-]*$/.test(n))return(r=f({_namespacePrefix:o,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__",n=(e.write(t,t),e.read(t)===t);return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(r,e){var o=this[e];this[e]=function(){var n=u(arguments,0),e=this,t=[function(){if(o)return c(arguments,function(e,t){n[t]=e}),o.apply(e,n)}].concat(n);return r.apply(e,t)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(n){var r=this;if(l(n))c(n,function(e){r._addPlugin(e)});else if(!a(this.plugins,function(e){return n===e})){if(this.plugins.push(n),!p(n))throw new Error("Plugins must be function values that return objects");var e=n.call(this);if(!g(e))throw new Error("Plugins must return an object of function properties");c(e,function(e,t){if(!p(e))throw new Error("Bad plugin property: "+t+" from plugin "+n.name+". Plugins should only return functions.");r._assignPluginFnProp(e,t)})}},addStorage:function(e){(function(){var e="undefined"==typeof console?null:console;e&&(e.warn||e.log).apply(e,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},d,{plugins:[]})).raw={},c(r,function(e,t){p(e)&&(r.raw[t]=s(r,e))}),c(e,function(e){r._addStorage(e)}),c(t,function(e){r._addPlugin(e)}),r;throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes")}var e=e("./util"),u=e.slice,a=e.pluck,c=e.each,s=e.bind,f=e.create,l=e.isList,p=e.isFunction,g=e.isObject,d={version:"2.0.12",enabled:!(t.exports={createStore:r}),get:function(e,t){e=this.storage.read(this._namespacePrefix+e);return this._deserialize(e,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(n){var r=this;this.storage.each(function(e,t){n.call(r,r._deserialize(e),(t||"").replace(r._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return r.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return r(this.storage,this.plugins,e)}}},{"./util":5}],5:[function(e,s,t){!function(e){"use strict";function i(e,t){return Array.prototype.slice.call(e,t||0)}function u(e,n){t(e,function(e,t){return n(e,t),0})}function t(e,t){if(o(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function o(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var a,c=Object.assign||function(n,e,t,r){for(var o=1;o<arguments.length;o++)u(Object(arguments[o]),function(e,t){n[t]=e});return n},n=Object.create?function(e,t,n,r){var o=i(arguments,1);return c.apply(this,[Object.create(e)].concat(o))}:(a=function(){},function(e,t,n,r){var o=i(arguments,1);return a.prototype=e,c.apply(this,[new a].concat(o))}),r=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},e="undefined"!=typeof window?window:e;s.exports={assign:c,create:n,trim:r,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:i,each:u,map:function(e,n){var r=o(e)?[]:{};return t(e,function(e,t){return r[t]=n(e,t),0}),r},pluck:t,isList:o,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:e}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]},{"./cookieStorage":7,"./localStorage":8,"./memoryStorage":9,"./oldFF-globalStorage":10,"./oldIE-userDataStorage":11,"./sessionStorage":12}],7:[function(e,t,n){"use strict";function r(e){for(var t,n,r=c.cookie.split(/; ?/g),o=r.length-1;0<=o;o--)a(r[o])&&(t=r[o].split("="),n=unescape(t[0]),e(unescape(t[1]),n))}function o(e){e&&i(e)&&(c.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function i(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(c.cookie)}var e=e("../src/util"),u=e.Global,a=e.trim,c=(t.exports={name:"cookieStorage",read:function(e){return e&&i(e)?(e="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*",unescape(c.cookie.replace(new RegExp(e),"$1"))):null},write:function(e,t){e&&(c.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:r,remove:o,clearAll:function(){r(function(e,t){o(t)})}},u.document)},{"../src/util":5}],8:[function(e,t,n){"use strict";function r(){return i.localStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"localStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;0<=t;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}],9:[function(e,t,n){"use strict";t.exports={name:"memoryStorage",read:function(e){return r[e]},write:function(e,t){r[e]=t},each:function(e){for(var t in r)r.hasOwnProperty(t)&&e(r[t],t)},remove:function(e){delete r[e]},clearAll:function(e){r={}}};var r={}},{}],10:[function(e,t,n){"use strict";function r(e){for(var t=o.length-1;0<=t;t--){var n=o.key(t);e(o[n],n)}}var e=e("../src/util").Global,o=(t.exports={name:"oldFF-globalStorage",read:function(e){return o[e]},write:function(e,t){o[e]=t},each:r,remove:function(e){return o.removeItem(e)},clearAll:function(){r(function(e,t){delete o[e]})}},e.globalStorage)},{"../src/util":5}],11:[function(e,t,n){"use strict";function r(e){return e.replace(/^\d/,"___$&").replace(c,"___")}var e=e("../src/util").Global,o=(t.exports={name:"oldIE-userDataStorage",write:function(e,t){var n;a||(n=r(e),u(function(e){e.setAttribute(n,t),e.save(o)}))},read:function(e){var t,n;if(!a)return t=r(e),n=null,u(function(e){n=e.getAttribute(t)}),n},each:function(o){u(function(e){for(var t=e.XMLDocument.documentElement.attributes,n=t.length-1;0<=n;n--){var r=t[n];o(e.getAttribute(r.name),r.name)}})},remove:function(e){var t=r(e);u(function(e){e.removeAttribute(t),e.save(o)})},clearAll:function(){u(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var n=t.length-1;0<=n;n--)e.removeAttribute(t[n].name);e.save(o)})}},"storejs"),i=e.document,u=function(){if(!i||!i.documentElement||!i.documentElement.addBehavior)return null;var n,e,r;try{(e=new ActiveXObject("htmlfile")).open(),e.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),e.close(),n=e.w.frames[0].document,r=n.createElement("div")}catch(e){r=i.createElement("div"),n=i.body}return function(e){var t=[].slice.call(arguments,0);t.unshift(r),n.appendChild(r),r.addBehavior("#default#userData"),r.load(o),e.apply(this,t),n.removeChild(r)}}(),a=(e.navigator?e.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},{"../src/util":5}],12:[function(e,t,n){"use strict";function r(){return i.sessionStorage}function o(e){return r().getItem(e)}var i=e("../src/util").Global;t.exports={name:"sessionStorage",read:o,write:function(e,t){return r().setItem(e,t)},each:function(e){for(var t=r().length-1;0<=t;t--){var n=r().key(t);e(o(n),n)}},remove:function(e){return r().removeItem(e)},clearAll:function(){return r().clear()}}},{"../src/util":5}]},{},[1])(1)});
/**
 * HTML templates in string, much faster on Safari
 * @since  2.0.5
 */
var Rexbuilder_Public_Templates=function(){"use strict";function a(e,t){if("label-text-paragraph"===e)return'<div class="wpcf7-label-text__paragraph" contenteditable="false"></div>'}return{getTemplate:a,getParsedTemplate:function(e,t){return $.parseHTML(a(e))}}}();
var Rexbuilder_Util=function($){"use strict";var hasClass,addClass,removeClass,toggleClass;function rtimeOut(e,t){function i(){o()-s<t?a||r(i):e()}var a,o=Date.now,r=window.requestAnimationFrame,s=o();return r(i),{clear:function(){a=1}}}function rInterval(e,t){function i(){o()-s<t||(s+=t,e()),a||r(i)}var a,o=Date.now,r=window.requestAnimationFrame,s=o();return r(i),{clear:function(){a=1}}}var removeClass="classList"in document.documentElement?(hasClass=function(e,t){return e.classList.contains(t)},addClass=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(hasClass=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),toggleClass=function(e,t){(hasClass(e,t)?removeClass:addClass)(e,t)},editorMode=!1,windowIsResizing=!1,responsiveLayouts,defaultLayoutSections,$modelsCustomizationsDataDiv,$pageCustomizationsDataDiv,$liveDataContainer,$layoutsDomOrder,$defaultLayoutState,frontAvailableLayouts,startFrontLayout,changedFrontLayout,layoutSavedInfo,$usedIDSContainer,sectionIDSused,$usedBlocksIDsContainer,blocksIDsUsed,$rexbuilderLayoutData,$rexbuilderModelData,$availableLayoutNames,edlTimeouts=[],$bodyHtml;function handlingRowReadyEnd(e){edlTimeouts[e]=null,""===edlTimeouts.join("")&&(Rexbuilder_Util.playAllVideos(),e=jQuery.Event("rexlive:editDomLayoutEnd"),Rexbuilder_Util.$document.trigger(e),edlTimeouts=[])}var createRandomID=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},_createRandomNumericID=function(e){for(var t="",i="0123456789",a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return parseInt(t)},_storeNamesUsed=function(){sectionIDSused=0<$usedIDSContainer.length?JSON.parse($usedIDSContainer.text()):[]},_saveSectionNamesUsed=function(){$usedIDSContainer.text(JSON.stringify(sectionIDSused))},_getSectionNamesUsed=function(){return sectionIDSused},_addSectionID=function(e){for(var t=sectionIDSused.length-1;0<=t&&e!=sectionIDSused[t];t--);-1==t&&sectionIDSused.push(e)},_removeSectionID=function(e){for(var t=0,t=sectionIDSused.length-1;0<=t&&e!=sectionIDSused[t];t--);-1<t&&(sectionIDSused.splice(t,1),_saveSectionNamesUsed())},_createSectionID=function(){var e,t,i;do{if(t=!0,"self"==(e=createRandomID(4)))t=!1;else for(i=0;i<sectionIDSused.length;i++)if(e==sectionIDSused[i]){t=!1;break}}while(!t);return _addSectionID(e),e},_updateSectionsIDs=function(){if(Rexbuilder_Util.rexContainer)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=e[i].getAttribute("data-rexlive-section-id");null!==a&&""!==a||(a=_createSectionID(),e[i].setAttribute("data-rexlive-section-id",a),_fix_tools_ids(e[i],a))}},_fix_tools_ids=function(e,t){if(e)for(var i,a,o,r,s,n=[].slice.call(e.getElementsByClassName("tool-area--side tool-area--left")),l=n.length,d=0;d<l;d++){for(o=(a=[].slice.call(n[d].getElementsByClassName("edit-row-width"))).length,i=0;i<o;i++)a[i].setAttribute("id",a[i].getAttribute("id")+t),a[i].setAttribute("name",a[i].getAttribute("name")+t),a[i].nextElementSibling.setAttribute("for",a[i].nextElementSibling.getAttribute("for")+t);for(s=(r=[].slice.call(n[d].getElementsByClassName("edit-row-layout"))).length,i=0;i<s;i++)r[i].setAttribute("id",r[i].getAttribute("id")+t),r[i].setAttribute("name",r[i].getAttribute("name")+t),r[i].nextElementSibling.setAttribute("for",r[i].nextElementSibling.getAttribute("for")+t)}},_updateSectionsNumber=function(){var e=-1;if(Rexbuilder_Util.rexContainer){for(var t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length,a=0;a<i;a++)t[a].setAttribute("data-rexlive-section-number",a),e=a;Rexbuilder_Util.lastSectionNumber=e}};function _storeBlocksIDsUsed(){blocksIDsUsed=0<$usedBlocksIDsContainer.length?JSON.parse($usedBlocksIDsContainer.text()):[]}function saveBlocksIDsUsed(){$usedBlocksIDsContainer.text(JSON.stringify(blocksIDsUsed))}function updateBlocksIDsUsed(e){blocksIDsUsed=e,saveBlocksIDsUsed()}function getBlocksIDsUsed(){return blocksIDsUsed}function addBlockID(e){blocksIDsUsed.push(e),blocksIDsUsed=Rexbuilder_Util.removeArrayDuplicates(blocksIDsUsed)}function removeBlockID(e){for(var t=blocksIDsUsed.length-1;0<=t&&e!=blocksIDsUsed[t];t--);-1<t&&(blocksIDsUsed.splice(t,1),saveBlocksIDsUsed())}function createBlockID(){for(var e;!("self"!==(e=createRandomID(4))&&-1===blocksIDsUsed.indexOf(e)););return addBlockID(e),e}function _updateBlocksIDs(){if(Rexbuilder_Util.rexContainer)for(var e,t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-item")),i=0;i<t.length;i++)null!==(e=t[i].getAttribute("data-rexbuilder-block-id"))&&""!==e||(e=createBlockID(),t[i].setAttribute("data-rexbuilder-block-id",e))}var _findLayoutType=function(e){return"default"==e||"tablet"==e||"mobile"==e?"standard":"custom"},_findFrontLayout=function(){for(var e=Rexbuilder_Util.globalViewport.width,t=frontAvailableLayouts.length-1;0<=t;t--)if(e>=parseInt(frontAvailableLayouts[t].min)&&(""==frontAvailableLayouts[t].max||e<=parseInt(frontAvailableLayouts[t].max)))return frontAvailableLayouts[t].id},_getModelsCustomizations=function(){var o=[];return $modelsCustomizationsDataDiv.children(".model-customizations-container").each(function(e,t){var t=$(t),i=parseInt(t.attr("data-model-id")),a=[];t.children(".model-customization-data").each(function(e,t){var t=$(t),i=t.attr("data-model-layout-name"),t=JSON.parse(t.text());a.push({name:i,targets:t})}),o.push({id:i,customizations:a})}),o},_updateModelsCustomizationsData=function(e){var t,i,a=e.id,o=$modelsCustomizationsDataDiv.children('.model-customizations-container[data-model-id="'+a+'"]');for(0!=o.length?o.children(".model-customization-data").remove():((o=$(document.createElement("script"))).addClass("model-customizations-container"),o.attr("data-model-id",a),o.appendTo($modelsCustomizationsDataDiv[0])),t=0,i=e.customizations.length;t<i;t++){var r=$(document.createElement("script"));r.addClass("model-customization-data"),r.attr("data-model-layout-name",e.customizations[t].name),r.text(JSON.stringify(e.customizations[t].targets)),r.appendTo(o[0])}$modelsCustomizationsDataDiv.attr("data-empty-models-customizations",!1)},_updateDivModelCustomizationsNames=function(e){for(var t=$rexbuilderModelData.find(".available-models-customizations-names"),i=JSON.parse(t.text()),a=[],o=0,r=i.length;o<r;o++){var s=i[o];s.id!=e.id&&a.push(s)}a.push(e),t.text(JSON.stringify(a))},_getPageCustomizations=function(){var i=[],s={name:"default",sections:[]};return $pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="default"]').children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),t=""!=t.text()?JSON.parse(t.text()):[];s.sections.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,targets:t})}),i.push(s),$pageCustomizationsDataDiv.children('.customization-wrap:not([data-customization-name="default"])').each(function(e,t){var t=$(t),n={name:t.attr("data-customization-name"),sections:[]};t.children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),s=""!=t.text()?JSON.parse(t.text()):[],t=void 0!==t.attr("data-section-created-live")&&"1"==t.attr("data-section-created-live").toString();n.sections.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,section_created_live:t,targets:s})}),i.push(n)}),i},_createPageCustomizationsDataLive=function(e){var t,i;for($liveDataContainer.children().remove(),t=0,i=e.length;t<i;t++){var a=$(document.createElement("script"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($liveDataContainer[0])}},_updatePageCustomizationsData=function(e){var t,i,a=e.name,o=$pageCustomizationsDataDiv.children('.customization-wrap[data-customization-name="'+a+'"]');for(0!=o.length?o.children(".section-targets").remove():((o=$(document.createElement("script"))).addClass("customization-wrap"),o.attr("data-customization-name",a),o.appendTo($pageCustomizationsDataDiv[0])),t=0,i=e.sections.length;t<i;t++){var r=$(document.createElement("script"));r.addClass("section-targets"),r.attr("data-section-rex-id",e.sections[t].section_rex_id),r.attr("data-model-id",e.sections[t].section_model_id),r.attr("data-model-number",e.sections[t].section_model_number),r.attr("data-section-hide",e.sections[t].section_hide),r.attr("data-section-created-live","true"==e.sections[t].section_created_live.toString()&&"1"),""==e.sections[t].section_model_id&&r.text(JSON.stringify(e.sections[t].targets)),r.appendTo(o[0])}$pageCustomizationsDataDiv.removeAttr("data-empty-customizations")},_updatePageAvaiableLayoutsNames=function(e){$availableLayoutNames.text(JSON.stringify(e))},_getSectionCustomLayouts=function(e){for(var t,i,a=[],o=Rexbuilder_Util.getPageCustomizations(),r=0,s=o.length;r<s;r++){var n,l=o[r].name;if(null!=o[r].sections)for(t=0,i=o[r].sections.length;t<i;t++)o[r].sections[t].section_rex_id==e&&(n=jQuery.extend(!0,[],o[r].sections[t].targets),a.push({name:l,targets:n}))}return a},chooseLayout=function(){var e=$rexbuilderLayoutData,t=$rexbuilderModelData;if(Rexbuilder_Util.chosenLayoutData={min:0,max:"",id:"default",label:"My Desktop",type:"standard"},"true"==e.children(".layouts-data").attr("data-empty-customizations")||Rexbuilder_Util.editorMode&&Rexbuilder_Util.firstStart)return"default";for(var i,a,o,r,s,n,l,d,u,c=Rexbuilder_Util.globalViewport.width,_=document.getElementById("layout-avaiable-dimensions"),g=_?JSON.parse(_.textContent):[],_=t.children(".available-models-customizations-names"),m=0<_.length?JSON.parse(_.text()):[],t=e.children("#available-layouts-names"),p=0<t.length?JSON.parse(t.text()):[],b=[],f=0,h=g.length;f<h;f++){for(d=!1,i=0,o=m.length;i<o;i++)for(a=0,r=m[i].names.length;a<r;a++)g[f].id==m[i].names[a]&&(d=(u=g[f]).model=!0,b.push(u));if(!d)for(a=0,s=p.length;a<s;a++)g[f].id==p[a]&&(d=!((u=g[f]).model=!1),b.push(u))}for(f=0,n=b.length;f<n;f++)""==b[f].min&&(b[f].min=0);var v,x="",y=b.concat();for(y.sort((v="min",function(e,t){return e[v]>t[v]?1:t[v]>e[v]?-1:0})),f=0,l=y.length;f<l;f++)c>=y[f].min&&(""==y[f].max||c<=y[f].max)&&(x=y[f].id,Rexbuilder_Util.chosenLayoutData=y[f]);return x=""===x?"default":x},predictLayout=function(){var e=Rexbuilder_Util.globalViewport.width;return e<=767?"mobile":e<=1024?"tablet":"default"},_createEmptyTargets=function(e){for(var t=[],i=0,a=e.length;i<a;i++){var o={name:e[i].name,props:{}};"self"==e[i].name&&_isMobile()&&(o.props.collapse_grid=!0),t.push(o)}return t},_getDefaultPageLayout=function(e,t){for(var i,a,o,r,s,n,l,d=[],u=0,c=e.length;u<c;u++)if("default"==e[u].name){for(i=0,r=e[u].sections.length;i<r;i++)d.push(jQuery.extend(!0,{},e[u].sections[i]));break}for(u=0,s=d.length;u<s;u++)if("true"==d[u].section_is_model.toString())for(a=0,n=t.length;a<n;a++)if(t[a].id==d[u].section_model_id){for(o=0,l=t[a].customizations.length;o<l;o++)if("default"==t[a].customizations[o].name){d[u].targets=jQuery.extend(!0,[],t[a].customizations[o].targets);break}break}return d},_getDefaultModelsLayout=function(e){for(var t,i,a=[],o=0,r=e.length;o<r;o++)for(t=0,i=e[o].customizations.length;t<i;t++)if("default"==e[o].customizations[t].name){a.push({id:e[o].id,targets:e[o].customizations[t].targets});break}return a};function guessLayout(t){var e=document.getElementById("layout-avaiable-dimensions").textContent,i=(e=""!==e?JSON.parse(e):[]).filter(function(e){return e.id===t});if(!i)return"default";if("standard"===(i=i[0]).type)return"default";var a,o=$availableLayoutNames.text(),r=e.filter(function(e){return-1!==o.indexOf(e.id)}),s=r.length,n="";if(parseInt(i.min)<_plugin_frontend_settings.defaultSettings.collapseWidth){for(a=0;a<s;a++)if(parseInt(r[a].min)<_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){n=r[a].id;break}}else for(a=0;a<s;a++)if(parseInt(r[a].min)>=_plugin_frontend_settings.defaultSettings.collapseWidth&&parseInt(i.min)>=parseInt(r[a].min)&&(""===r[a].max||parseInt(i.min)<=parseInt(r[a].max))){n=r[a].id;break}return n=""===n?"default":n}var _getCustomLayoutSections=function(e,t,i,a){if("default"==a)return i;for(var o,r,s,n,l,d,u,c,_,g,m=[],p=!1,b=_getDefaultModelsLayout(t),f=0,h=e.length;f<h;f++)if(e[f].name==a){for(p=!0,o=0,n=e[f].sections.length;o<n;o++)m.push(jQuery.extend(!0,{},e[f].sections[o]));break}if(!p)for(f=0,l=i.length;f<l;f++){var v=jQuery.extend(!0,{},i[f]);v.targets=_createEmptyTargets(i[f].targets),v.sectionCleared=!0,m.push(v)}for(f=0,d=m.length;f<d;f++)if("true"==m[f].section_is_model.toString()){for(r=0,u=t.length;r<u;r++)if(t[r].id==m[f].section_model_id){for(g=!1,s=0,c=t[r].customizations.length;s<c;s++)if(t[r].customizations[s].name==a){g=!0,m[f].targets=jQuery.extend(!0,[],t[r].customizations[s].targets),m[f].defaultSection=!1,m[f].sectionCleared=!1;break}if(!g)for(s=0,_=b.length;s<_;s++)if(m[f].section_model_id==b[s].id){m[f].targets=_createEmptyTargets(b[s].targets),m[f].sectionCleared=!0;break}break}}else if(0==m[f].targets.length)for(o=0,l=i.length;o<l;o++)if(m[f].section_rex_id==i[o].section_rex_id){m[f].targets=_createEmptyTargets(i[o].targets),m[f].sectionCleared=!0;break}return m},_mergeSections=function(e,t){var i,a,o,r,s,n,l,d,u;if("default"!=Rexbuilder_Util.activeLayout){for(i=0,s=e.length;i<s;i++)for(e[i].sectionFounded=!1,e[i].defaultSection=!1,a=0,n=t.length;a<n;a++)if(e[i].section_rex_id==t[a].section_rex_id){e[i].sectionFounded=!0;var c,_,g,m=e[i],p=t[a];for((void 0===m.targets[0]||jQuery.isEmptyObject(m.targets[0].props)||void 0!==m.sectionCleared&&m.sectionCleared)&&(m.defaultSection=!0,m.targets=jQuery.extend(!0,[],p.targets)),o=0,l=m.targets.length;o<l;o++){for(u=!1,r=0,d=p.targets.length;r<d;r++)if(m.targets[o].name==p.targets[r].name){m.targets[o].notDisplay=!1,p.targets[r].oldElement=u=!0,1<=o&&jQuery.isEmptyObject(m.targets[o].props)&&"default"!=Rexbuilder_Util.activeLayout&&p.targets[0].props.layout!=m.targets[0].props.layout&&(_=parseFloat(p.targets[0].props.grid_cell_width),g=5,"masonry"==p.targets[0].props.layout?(m.targets[o].props.gs_y=Math.round(p.targets[r].props.gs_y*g/_),m.targets[o].props.gs_height=Math.round(p.targets[r].props.gs_height*g/_),m.targets[o].props.gs_start_h=Math.round(p.targets[r].props.gs_start_h*g/_)):(m.targets[o].props.gs_y=Math.round(p.targets[r].props.gs_y*_/g),m.targets[o].props.gs_height=Math.round(p.targets[r].props.gs_height*_/g),m.targets[o].props.gs_start_h=Math.round(p.targets[r].props.gs_start_h*_/g))),m.targets[o].props=Rexbuilder_Util.merge(p.targets[r].props,m.targets[o].props);break}u||(m.targets[o].notDisplay=!0)}for(r=0,d=p.targets.length;r<d;r++)void 0===p.targets[r].oldElement&&(c=jQuery.extend(!0,{},p.targets[r]),"default"!=Rexbuilder_Util.activeLayout&&p.targets[0].props.layout!=m.targets[0].props.layout&&(_=parseFloat(p.targets[0].props.grid_cell_width),g=5,"masonry"==p.targets[0].props.layout?(c.props.gs_y=Math.round(c.props.gs_y*g/_),c.props.gs_height=Math.round(c.props.gs_height*g/_),c.props.gs_start_h=Math.round(c.props.gs_start_h*g/_)):(c.props.gs_y=Math.round(c.props.gs_y*_/g),c.props.gs_height=Math.round(c.props.gs_height*_/g),c.props.gs_start_h=Math.round(c.props.gs_start_h*_/g))),m.targets.splice(1,0,c));break}if(0==e.length)for(i=0,s=(e=t).length;i<s;i++)e[i].defaultSection=!0}for(_createPageCustomizationsDataLive(e),i=0,s=e.length;i<s;i++)(e[i].sectionFounded||"default"==Rexbuilder_Util.activeLayout)&&("default"!=Rexbuilder_Util.activeLayout&&e[i].defaultSection||"default"==Rexbuilder_Util.activeLayout)&&_isMobile()&&(e[i].targets[0].props.collapse_grid=!0,e[i].targets[0].props.noMobileLayoutSaved=!0,e[i].targets[0].props.layout="masonry",e[i].targets[0].props.fullHeight=!1);return jQuery.extend(!0,{},e)};function _isMobile(){return Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth}var _cssPropertyValueSupported=function(e,t){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t};function clearSectionsEdited(){for(var e=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){e[i].setAttribute("data-rexlive-section-edited",!1),e[i].querySelector(".grid-stack-row").setAttribute("data-rexlive-layout-changed",!1);for(var a=Array.prototype.slice.call(e[i].getElementsByClassName("grid-stack-item")),o=a.length,r=0;r<o;r++)a[r].setAttribute("data-rexlive-element-edited",!1)}}var launchEditDomLayout=function(){var e=Rexbuilder_Util.chooseLayout();Rexbuilder_Util.edit_dom_layout(e)},edit_dom_layout=function(e){var t={collapse_needed:!1};if(e==Rexbuilder_Util.activeLayout&&"default"==e)_isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids();else if(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,"true"==$rexbuilderLayoutData.children(".layouts-customizations").attr("data-empty-customizations")&&"true"==$rexbuilderModelData.children(".models-customizations").attr("data-empty-models-customizations")){_isMobile()?Rexbuilder_Util.blockGridUnder768||(Rexbuilder_Util.collapseAllGrids(),t.collapse_needed=!0):Rexbuilder_Util.removeCollapsedGrids();var i=document.querySelector(".rexpansive_section.empty-section");if(i){i=[{section_rex_id:i.getAttribute("data-rexlive-section-id"),targets:[{name:"self",props:{}}]}];Rexbuilder_Util.editedDataInfo=new RexEditedData(i)}else{for(var a=Array.prototype.slice.call(document.getElementsByClassName("rexpansive_section")),o=a.length,r=[],s=0;s<o;s++){for(var n={},l=a[s].querySelector(".section-data"),d=(n.section_rex_id=a[s].getAttribute("data-rexlive-section-id"),n.targets=[],{name:"",props:{}}),u=(d.name="self",d.props.section_name=l.getAttribute("data-section_name"),d.props.section_nav_label=l.getAttribute("data-section_nav_label"),d.props.color_bg_section=l.getAttribute("data-color_bg_section"),d.props.color_bg_section_active=""!==d.props.color_bg_section,d.props.image_bg_section_active=l.getAttribute("data-image_bg_section_active"),d.props.image_bg_section=l.getAttribute("data-image_bg_section"),d.props.image_width=l.getAttribute("data-image_width"),d.props.image_height=l.getAttribute("data-image_height"),d.props.id_image_bg_section=l.getAttribute("data-id_image_bg_section"),d.props.image_size=l.getAttribute("data-image_size"),d.props.video_bg_id=l.getAttribute("data-video_bg_id_section"),d.props.video_mp4_url=l.getAttribute("data-video_mp4_url"),d.props.video_bg_width_section=l.getAttribute("data-video_bg_width_section"),d.props.video_bg_height_section=l.getAttribute("data-video_bg_height_section"),d.props.video_bg_url_section=l.getAttribute("data-video_bg_url_section"),d.props.video_bg_url_vimeo_section=l.getAttribute("data-video_bg_url_vimeo_section"),d.props.block_distance=l.getAttribute("data-block_distance"),d.props.row_separator_top=l.getAttribute("data-row_separator_top"),d.props.row_separator_bottom=l.getAttribute("data-row_separator_bottom"),d.props.row_separator_right=l.getAttribute("data-row_separator_right"),d.props.row_separator_left=l.getAttribute("data-row_separator_left"),d.props.margin=l.getAttribute("data-margin"),d.props.row_margin_top=l.getAttribute("data-row_margin_top"),d.props.row_margin_bottom=l.getAttribute("data-row_margin_bottom"),d.props.row_margin_right=l.getAttribute("data-row_margin_right"),d.props.row_margin_left=l.getAttribute("data-row_margin_left"),d.props.custom_classes=l.getAttribute("data-custom_classes"),d.props.row_overlay_color=l.getAttribute("data-row_overlay_color"),d.props.row_overlay_active=l.getAttribute("data-row_overlay_active"),n.targets.push(d),Array.prototype.slice.call(a[s].getElementsByClassName("rexbuilder-block-data"))),c=u.length,g=0;g<c;g++){var m={name:u[g].getAttribute("data-rexbuilder_block_id"),props:{color_bg_block:u[g].getAttribute("data-color_bg_block"),color_bg_block_active:u[g].getAttribute("data-color_bg_block_active"),image_bg_url:u[g].getAttribute("data-image_bg_url"),image_width:u[g].getAttribute("data-image_width"),image_height:u[g].getAttribute("data-image_height"),id_image_bg:u[g].getAttribute("data-id_image_bg"),image_size:u[g].getAttribute("data-image_size"),image_bg_elem_active:u[g].getAttribute("data-image_bg_elem_active"),type_bg_image:u[g].getAttribute("data-type_bg_image"),video_bg_id:u[g].getAttribute("data-video_bg_id"),video_bg_width:u[g].getAttribute("data-video_bg_width"),video_bg_height:u[g].getAttribute("data-video_bg_height"),video_mp4_url:u[g].getAttribute("data-video_mp4_url"),video_bg_url_youtube:u[g].getAttribute("data-video_bg_url_youtube"),video_bg_url_vimeo:u[g].getAttribute("data-video_bg_url_vimeo"),photoswipe:u[g].getAttribute("data-photoswipe"),block_custom_class:u[g].getAttribute("data-block_custom_class"),block_padding:u[g].getAttribute("data-block_padding"),overlay_block_color:u[g].getAttribute("data-overlay_block_color"),overlay_block_color_active:u[g].getAttribute("data-overlay_block_color_active"),linkurl:u[g].getAttribute("data-linkurl"),block_flex_position:u[g].getAttribute("data-block_flex_position"),block_flex_img_position:u[g].getAttribute("data-block_flex_img_position")}};n.targets.push(m)}r.push(n)}Rexbuilder_Util.editedDataInfo=new RexEditedData(r)}}else{for(var p,b,f=[],h=[],v=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),B=v.length,x=0;x<B;x++)Rexbuilder_Util.hasClass(v[x],"rex-model-section")&&f.push(parseInt(v[x].getAttribute("data-rexlive-model-id"))),p={rexID:v[x].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(v[x].getAttribute("data-rexlive-model-id")))?"":parseInt(v[x].getAttribute("data-rexlive-model-id"))},h.push(p);for(var y,D,i=_getPageCustomizations(),S=("default"==Rexbuilder_Util.activeLayout&&_saveCustomizationDomOrder(jQuery.extend(!0,[],i)),_getModelsCustomizations()),C=("true"==$defaultLayoutState.attr("data-empty-default-customization")?(y=Rexbuilder_Util.getDefaultPageLayout(i,S),_createDefaultLayoutState(y)):(_updateDefaultLayoutState({modelsData:S}),y=_getDefaultLayoutState()),Rexbuilder_Util.getCustomLayoutSections(i,S,y,e)),U=[],k=0;k<C;k++)if("true"==C[k].section_is_model.toString()){for(D=!1,b=0;b<U.length;b++)if(U[b].id==C[k].section_model_id){U[b].number=U[b].number+1,C[k].section_model_number=U[b].number,D=!0;break}D||(C[k].section_model_number=1,U.push({id:C[k].section_model_id,number:1}))}Rexbuilder_Util.clearSectionsEdited();var I,R,w,S=!1,i=("default"!==e&&"tablet"!==e&&"mobile"!==e&&null===document.querySelector('.customization-wrap[data-customization-name="'+e+'"]')&&(e!==(I=guessLayout(e))?(R=(R=i.filter(function(e){return I===e.name}))[0].sections,S=!0):R=C),null),A=(S&&(i=C.map(function(e){var t=e.targets.map(function(e){return{name:e.name,props:{}}});return _.merge(_.omit(e,"targets"),{targets:t})})),Rexbuilder_Util.editedDataInfo=new RexEditedData(i||C),_mergeSections(void 0===I?C:R,y)),L=(Rexbuilder_Util.removeCollapsedGrids(),Rexbuilder_Util.domUpdating=!0,[]);for(w in A){var N,z,E,P=A[w],V=P.section_rex_id;P.notInSection&&"default"!=e||(N={rexID:V,modelID:-1,modelNumber:-1},(z="true"==P.section_is_model.toString()?(z=P.section_model_id,E=P.section_model_number,N.modelID=z,N.modelNumber=E,Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+V+'"][data-rexlive-model-number="'+N.modelNumber+'"]')):Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+V+'"]'))&&!Rexbuilder_Util.hasClass(z,"removing_section")&&(void 0!==P.section_hide&&"true"==P.section_hide.toString()?Rexbuilder_Util.addClass(z,"rex-hide-section"):(Rexbuilder_Util.removeClass(z,"rex-hide-section"),E=$(z),V=_updateDOMelements(E,P.targets,!1,w),t.collapse_needed+=V),L.push(N)))}Rexbuilder_Dom_Util.fixSectionDomOrder(L,!0),Rexbuilder_Util.domUpdating=!1}return t},_updateDOMelements=function(e,t,i,a){var o=e.find(".grid-stack-row"),r=o.get(0),s=o.data(),n=s.plugin_perfectGridGalleryEditor,l=(t[0].props.gridEdited&&r.setAttribute("data-rexlive-layout-changed",!0),e.removeClass("empty-section"),!0);if(void 0!==s&&void 0!==n){for(var d,u=1,c=t.length;u<c;u++)null!==(p=r.querySelector('div[data-rexbuilder-block-id="'+t[u].name+'"]'))&&(l*=d=void 0!==t[u].props.hide&&"true"==t[u].props.hide.toString(),d?Rexbuilder_Util.hasClass(p,"rex-hide-element")||(Rexbuilder_Util.addClass(p,"rex-hide-element"),n.removeBlock(p)):Rexbuilder_Util.hasClass(p,"rex-hide-element")&&(Rexbuilder_Util.removeClass(p,"rex-hide-element"),n.reAddBlock($(p))));n.properties.gridstackInstance.batchUpdate()}l&&e.addClass("empty-section");var _,g,m,p,b,f,h=t.length;for(u=1;u<h;u++)if((!t[u].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(x=t[u].name,_=t[u].props,p=(x=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+x+'"]'))[0],g=x.children(".rexbuilder-block-data"),m=x.find(".grid-item-content"),0<x.length)){if(f=(b=[].slice.call(p.getElementsByTagName("img"))).length,!Rexbuilder_Util.editorMode&&0!==f)for(var v=0;v<f;v++)"true"===b[v].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(b[v]));var x={$elem:x,targetProps:_,$itemData:g,$itemContent:m,gridstackInstance:Rexbuilder_Util.editorMode?n.properties.gridstackInstance:null,positionAndSize:!0};Rexbuilder_Util.updateDOMSingleElement(x)}updateSection(e,o,t[0].props,i),Rexbuilder_Util.editorMode&&updateSectionTools(e,o,t[0].props,i);e=void 0!==t[0].props.collapse_grid&&("true"==t[0].props.collapse_grid.toString()||i);return void 0!==s&&void 0!==n&&void 0!==n.properties.gridstackInstance&&n.properties.gridstackInstance&&(Rexbuilder_Util.domUpdating=!0,n.properties.gridstackInstance.commit(),handlingGridstackCommitEnd(n,e,t,a)),e};function handlingGridstackCommitEnd(e,t,i,a){Rexbuilder_Util.domUpdating=!0,e.properties.gridstackInstance&&e.properties.gridstackInstance.batchUpdate(),e.fixBlockDomOrder(),e.saveStateGrid(),"masonry"!=e.settings.galleryLayout||t?"fixed"==e.settings.galleryLayout&&"true"==e.settings.fullHeight.toString()&&e.updateFullHeight():e.updateBlocksHeight(),i[0].props.collapse_grid&&(e.collapseElements(),e.collapseElementsProperties()),e.properties.gridstackInstance&&e.properties.gridstackInstance.commit();t=setTimeout(handlingRowReady.bind(null,e,a,i[0].props.collapse_grid),200);edlTimeouts.push(t)}function handlingRowReady(e,t,i){Rexbuilder_Util.domUpdating=!1,e.properties.dispositionBeforeCollapsing=e.createActionDataMoveBlocksGrid(),e._createFirstReverseStack(),e._fixImagesDimension(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers(),handlingRowReadyEnd(t),i||setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e.section),1500)}function updateDOMSingleElement(e){var t=e.$elem,i=t.get(0),a=e.targetProps,o=e.$itemData,r=o.get(0),s=e.$itemContent,n=e.gridstackInstance,l=e.positionAndSize||!1,e=e.collapseGrid||!1,i=(l&&(e&&(i.setAttribute("data-gs-width",12),i.setAttribute("data-width",12),r.setAttribute("data-gs_width",12),r.setAttribute("data-size_x",12),a.gs_width="12",a.size_x="12",i.setAttribute("data-gs-x",0),i.setAttribute("data-row",1),r.setAttribute("data-gs_x",0),r.setAttribute("data-row",1),a.gs_x="0",a.row="1"),l={x:i.getAttribute("data-gs-x"),y:i.getAttribute("data-gs-y"),w:i.getAttribute("data-gs-width"),h:i.getAttribute("data-gs-height"),startH:r.getAttribute("data-gs_start_h"),realFluid:r.getAttribute("data-element_real_fluid")},e={x:void 0===a.gs_x?l.x:a.gs_x,y:void 0===a.gs_y?l.y:a.gs_y,w:void 0===a.gs_width?l.w:a.gs_width,h:void 0===a.gs_height?l.h:a.gs_height,startH:void 0===a.gs_start_h?l.startH:a.gs_start_h,realFluid:void 0===a.element_real_fluid?l.realFluid:a.element_real_fluid,gridstackInstance:n},updateElementDimensions(t[0],o[0],e)),isNaN(parseInt(a.video_bg_id))?"":parseInt(a.video_bg_id)),r=void 0===a.video_bg_url_youtube?"":a.video_bg_url_youtube,l=void 0===a.video_bg_url_vimeo?"":a.video_bg_url_vimeo,n="",e=(""!=i?n="mp4":""!=l?n="vimeo":""!=r&&(n="youtube"),{mp4Data:{idMp4:i,linkMp4:void 0===a.video_mp4_url?"":a.video_mp4_url,width:isNaN(parseInt(a.video_bg_width))?"":parseInt(a.video_bg_width),height:isNaN(parseInt(a.video_bg_height))?"":parseInt(a.video_bg_height)},vimeoUrl:l,youtubeUrl:r,audio:void 0===a.video_has_audio?"":"1"==a.video_has_audio||"true"==a.video_has_audio.toString(),typeVideo:n}),i=(Rexbuilder_Dom_Util.updateVideos(s,e),void 0===a.image_bg_elem_active||"true"==a.image_bg_elem_active.toString()),l={active:i,idImage:!i||isNaN(parseInt(a.id_image_bg))?"":parseInt(a.id_image_bg),urlImage:i?a.image_bg_url:"",width:!i||isNaN(parseInt(a.image_width))?"":parseInt(a.image_width),height:!i||isNaN(parseInt(a.image_height))?"":parseInt(a.image_height),typeBGimage:i?a.type_bg_image:"",photoswipe:i?a.photoswipe:""},r=(Rexbuilder_Dom_Util.updateImageBG(s,l),{$elem:t,color:void 0!==a.color_bg_block?a.color_bg_block:"",active:void 0===a.color_bg_block_active||a.color_bg_block_active.toString()}),n=(-1===r.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockBackgroundColor(r):Rexbuilder_Dom_Util.updateBlockBackgroundGradient(r),{$elem:t,color:void 0!==a.overlay_block_color?a.overlay_block_color:"",active:void 0!==a.overlay_block_color_active&&a.overlay_block_color_active.toString()}),e=(-1===n.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateBlockOverlay(n):Rexbuilder_Dom_Util.updateBlockOverlayGradient(n),Rexbuilder_Dom_Util.updateBlockPaddings(t,_getPaddingsDataString(void 0!==a.block_padding?a.block_padding:"")),void 0===a.block_custom_class?"":a.block_custom_class),i=[],l=(""!=e&&(i=(e=e.trim()).split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(t,i),void 0!==a.block_flex_position?a.block_flex_position.split(" "):""),r={x:l[0],y:l[1]};Rexbuilder_Dom_Util.updateFlexPostition(t,r);n={x:(l=void 0!==a.block_flex_img_position?a.block_flex_img_position.split(" "):"")[0],y:l[1]},Rexbuilder_Dom_Util.updateImageFlexPostition(t,n),e=void 0===a.slider_dimension_ratio?"":a.slider_dimension_ratio,o.attr("data-slider_ratio",e),i=void 0===a.block_ratio?"":a.block_ratio,o.attr("data-block_ratio",i),r=void 0===a.block_dimensions_live_edited?"":a.block_dimensions_live_edited;o.attr("data-block_dimensions_live_edited",r);void 0!==a.hide&&"true"==a.hide.toString()?(t.hasClass("rex-hide-element")||t.addClass("rex-hide-element"),Rexbuilder_Util.stopBlockVideos(t)):(t.hasClass("rex-hide-element")&&t.removeClass("rex-hide-element"),Rexbuilder_Util.playBlockVideos(t));var d,u,c,l=void 0!==a.element_edited&&"true"==a.element_edited.toString();for(d in t.attr("data-rexlive-element-edited",l),a)switch(d){case"type":o.attr("data-type",a.type);break;case"size_x":t.attr("data-width",a.size_x);break;case"size_y":t.attr("data-height",a.size_y);break;case"row":t.attr("data-row",a.row);break;case"col":t.attr("data-col",a.col);break;case"photoswipe":Rexbuilder_Util.editorMode||(""===a.linkurl&&"true"==a.photoswipe?(Rexbuilder_Photoswipe.addElement(s,a.image_bg_url,parseInt(a.image_width),parseInt(a.image_height),a.image_size),t.parents(".rexpansive_section").addClass("photoswipe-gallery")):Rexbuilder_Photoswipe.removeElement(s)),o.attr("data-photoswipe",a.photoswipe);break;case"linkurl":Rexbuilder_Util.editorMode||(u=s.parents(".element-link"),""!=a.linkurl?0!=u.length?(u.attr("href",a.linkurl),u.attr("title",a.linkurl)):(c=s.parent(),tmpl.arg="link",c.append('<a class="element-link hovered" href="'+a.linkurl+'" title="'+a.linkurl+'"></a>'),c=c.children(".element-link"),s.detach().appendTo(c)):0!=u.length&&u.children().unwrap()),Rexbuilder_Dom_Util.updateBlockUrl(t,a.linkurl)}}var _getDefaultBlockMeasure=function(n){var l={defDefaultWidth:3,defDefaultHeight:4,defMobileWidth:12,defMobileHeight:null};return""!==(n=void 0!==n?n:"")&&$pageCustomizationsDataDiv.find(".customization-wrap").each(function(e,t){for(var i=$(t),a=t.getAttribute("data-customization-name"),o=JSON.parse(i.find(".section-targets[data-section-rex-id="+n+"]").text()),r=0,s=o.length;r<s;r++)if("self"===o[r].name){switch(o[r].props.layout){case"masonry":"mobile"==a?l.defMobileHeight=52:l.defDefaultHeight=Math.ceil(4*o[r].props.grid_cell_width/5);break;case"fixed":"mobile"==a?l.defMobileHeight=4:l.defDefaultHeight=4}break}}),l.defMobileHeight||(l.defMobileHeight=52),l},_updateModelsLive=function(e,t,i){Rexbuilder_Util.domUpdating=!0;for(var a,o=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),r=o.length,s=0;s<r;s++)o[s].getAttribute("data-rexlive-model-id")==e&&o[s].getAttribute("data-rexlive-model-number")!=i&&(a=$(o[s]),_updateDOMelements(a,t,!1));Rexbuilder_Util.domUpdating=!1},_saveCustomizationDomOrder=function(e){$layoutsDomOrder.children().remove();for(var t,i,a=[],o=0,r=e.length;o<r;o++){var s=document.createElement("script");for(Rexbuilder_Util.addClass(s,"layout-sections"),s.setAttribute("data-rex-layout-name",e[o].name),a=[],t=0,i=e[o].sections.length;t<i;t++)a.push(e[o].sections[t]);s.textContent=JSON.stringify(a),$(s).appendTo($layoutsDomOrder[0])}},_getPageDefaultDom=function(){var e=$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="default"]');return{name:"default",sections:JSON.parse(e.text())}},_getPageCustomizationsDom=function(){var i=[];return $layoutsDomOrder.children('.layout-sections:not([data-rex-layout-name="default"])').each(function(e,t){t=$(t);i.push({name:t.attr("data-rex-layout-name"),sections:JSON.parse(t.text())})}),i},_updatePageCustomizationsDomOrder=function(e){for(var t=0,i=e.length;t<i;t++)$layoutsDomOrder.children('.layout-sections[data-rex-layout-name="'+e[t].name+'"]').text(JSON.stringify(e[t].sections))},_getPageAvaiableLayoutsNames=function(){return JSON.parse($availableLayoutNames.text())},_getLayoutLiveSectionTargets=function(e){var i,a,o=[];return e.hasClass("rex-model-section")?(i=e.attr("data-rexlive-model-id"),$liveDataContainer.children().each(function(e,t){t=$(t);if(i==t.attr("data-model-id"))return o=JSON.parse(t.text()),!1})):(a=e.attr("data-rexlive-section-id"),$liveDataContainer.children().each(function(e,t){t=$(t);if(a==t.attr("data-section-rex-id"))return o=JSON.parse(t.text()),!1})),o},_applyDefaultBlocksDimentions=function(e,t,i){for(var a=_getDefaultLayoutState(),o=e.attr("data-rexlive-section-id"),r=0,s=a.length;r<s;r++)if(o==a[r].section_rex_id){var n=a[r].targets;i.layout=n[0].props.layout,i.fullHeight=n[0].props.full_height,i.collapsed=void 0!==n[0].props.collapsed&&n[0].props.collapsed;for(var l=1,d=t.length;l<d;l++)for(var u=0,c=n.length;u<c;u++){var _=t[l];_.name==n[u].name&&(_.props.gs_x=n[u].props.gs_x,_.props.gs_y=n[u].props.gs_y,_.props.gs_width=n[u].props.gs_width,_.props.gs_height=n[u].props.gs_height,_.props.gs_start_h=n[u].props.gs_start_h)}break}},_createDefaultLayoutState=function(e){var t,i;for($defaultLayoutState.children().remove(),t=0,i=e.length;t<i;t++){var a=$(document.createElement("script"));a.addClass("section-targets"),a.attr("data-section-rex-id",e[t].section_rex_id),a.attr("data-model-id",e[t].section_model_id),a.attr("data-model-number",e[t].section_model_number),a.attr("data-section-hide",e[t].section_hide),a.text(JSON.stringify(e[t].targets)),a.appendTo($defaultLayoutState[0])}$defaultLayoutState.removeAttr("data-empty-default-customization")},_updateDefaultLayoutState=function(e){var t,o,r,s,i,a,n=void 0===e.pageData?[]:e.pageData,l=void 0===e.modelsData?[]:e.modelsData;if(0==n.length)$defaultLayoutState.children(".section-targets").each(function(e,t){var i=$(t),a=isNaN(parseInt(i.attr("data-model-id")))?-1:parseInt(i.attr("data-model-id"));if(-1!=a)for(o=0;o<l.length;o++)if(a==l[o].id){for(r=0,s=l[o].customizations.length;r<s;r++)if("default"==l[o].customizations[r].name){i.text(JSON.stringify(l[o].customizations[r].targets));break}break}});else for($defaultLayoutState.children(".section-targets").remove(),t=0,i=n.length;t<i;t++){var d=$(document.createElement("script"));if(d.addClass("section-targets"),d.attr("data-section-rex-id",n[t].section_rex_id),d.attr("data-model-id",n[t].section_model_id),d.attr("data-model-number",n[t].section_model_number),d.attr("data-section-hide",n[t].section_hide),""==n[t].section_model_id||-1==n[t].section_model_id)d.text(JSON.stringify(n[t].targets));else if(-1!=n[t].section_model_id)for(o=0,a=l.length;o<a;o++)if(n[t].section_model_id==l[o].id){for(r=0,s=l[o].customizations.length;r<s;r++)if("default"==l[o].customizations[r].name){d.text(JSON.stringify(l[o].customizations[r].targets));break}break}d.appendTo($defaultLayoutState[0])}},_updateDefaultLayoutStateDOMOrder=function(e){for(var t,i,a,o,r=_getDefaultLayoutState(),s=[],n=0,l=(e=jQuery.extend(!0,[],e)).length;n<l;n++)if(-1!=e[n].modelID){for(o=!1,t=0,i=s.length;t<i;t++)if(s[t].id==e[n].modelID){s[t].number=s[t].number+1,e[n].modelNumber=s[t].number,o=!0;break}o||(s.push({id:e[n].modelID,number:1}),e[n].modelNumber=1)}var d,u=[];for(n=0,l=e.length;n<e;n++){for(t=0,a=r.length;t<a;t++)-1!=e[n].modelID?e[n].modelID==r[t].section_model_id&&e[n].modelNumber==r[t].section_model_number&&(d=r.splice(t,1)):e[n].rexID==r[t].section_rex_id&&(d=r.splice(t,1));u.push(d[0])}_updateDefaultLayoutState({pageData:u})},_updateDefaultLayoutStateSection=function(e,i){var a,t=e[0],o=(i=void 0===i?-1:i,Rexbuilder_Dom_Util.fixModelNumbers(),Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout)),r=!1;if(hasClass(t,"rex-model-section")){var s=t.getAttribute("data-rexlive-model-id"),n=t.getAttribute("data-rexlive-section-number"),l=(d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets"))).length;for(u=0;u<l;u++)s==d[u].getAttribute("data-model-id")&&(d[u].textContent=JSON.stringify(o),n==d[u].getAttribute("data-model-number"))&&(r=!0)}else{var d,u,c=t.getAttribute("data-rexlive-section-id"),l=(d=[].slice.call($defaultLayoutState[0].getElementsByClassName("section-targets"))).length;for(u=0;u<l;u++)c==d[u].getAttribute("data-section-rex-id")&&(d[u].textContent=JSON.stringify(o),r=!0)}r||((e={section_rex_id:t.getAttribute("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1}).section_hide=hasClass(t,"rex-hide-section"),hasClass(t,"rex-model-section")&&(e.section_is_model=!0,e.section_model_id=t.getAttribute("data-rexlive-model-id"),e.section_model_number=t.getAttribute("data-rexlive-model-number")),t=document.createElement("script"),addClass(t,"section-targets"),t.setAttribute("data-section-rex-id",e.section_rex_id),t.setAttribute("data-model-id",e.section_model_id),t.setAttribute("data-model-number",e.section_model_number),t.setAttribute("data-section-hide",e.section_hide),t.textContent=JSON.stringify(o),e=$(t),-1==i?e.appendTo($defaultLayoutState[0]):(i-=1,$defaultLayoutState.children(".section-targets").each(function(e,t){if(e==i)return a=$(t),!1}),a.after(e[0])))},_getDefaultLayoutState=function(){var s=[];return $defaultLayoutState.children(".section-targets").each(function(e,t){var t=$(t),i=t.attr("data-section-rex-id"),a=isNaN(parseInt(t.attr("data-model-id")))?-1:parseInt(t.attr("data-model-id")),o=isNaN(parseInt(t.attr("data-model-number")))?-1:parseInt(t.attr("data-model-number")),r=void 0!==t.attr("data-section-hide")&&"1"==t.attr("data-section-hide").toString(),t=""!=t.text()?JSON.parse(t.text()):[];s.push({section_rex_id:i,section_model_id:-1!=a?a:"",section_model_number:-1!=o?o:"",section_is_model:-1!=a,section_hide:r,targets:t})}),s},_updateSectionOrderCustomLayouts=function(e,t){for(var i,a,o,r,s,n,l=Rexbuilder_Util.getPageCustomizationsDom(),d=0,u=t.length;d<u;d++)if(t[d].rexID==e.rexID&&t[d].modelNumber==e.modelNumber&&t[d].modelID==e.modelID){a=d;break}for(d=0,r=l.length;d<r;d++){for(i=!1,o=0,s=l[d].sections.length;o<s;o++)if(l[d].sections[o].section_is_model){if(l[d].sections[o].section_model_id==e.modelID&&l[d].sections[o].section_model_number==e.modelNumber){void 0!==l[d].sections[o].section_created_live&&"true"==l[d].sections[o].section_created_live.toString()&&(i=!0);break}}else if(e.rexID==l[d].sections[o].section_rex_id){void 0!==l[d].sections[o].section_created_live&&"true"==l[d].sections[o].section_created_live.toString()&&(i=!0);break}i&&(n=l[d].sections.splice(o,1)[0],l[d].sections.splice(a,0,n))}Rexbuilder_Util.updatePageCustomizationsDomOrder(l)},_updateSectionStateLive=function(e){Rexbuilder_Dom_Util.fixModelNumbers();var i,a,t,o=Rex_Save_Listeners.createTargets(e,Rexbuilder_Util.activeLayout),r=!1;e.hasClass("rex-model-section")?(i=e.attr("data-rexlive-model-id"),$liveDataContainer.children().each(function(e,t){t=$(t);i==t.attr("data-model-id")&&(t.text(JSON.stringify(o)),r=!0)})):(a=e.attr("data-rexlive-section-id"),$liveDataContainer.children().each(function(e,t){t=$(t);a==t.attr("data-section-rex-id")&&(t.text(JSON.stringify(o)),r=!0)})),r||((t={section_rex_id:e.attr("data-rexlive-section-id"),section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1}).section_hide=e.hasClass("rex-hide-section"),e.hasClass("rex-model-section")&&(t.section_is_model=!0,t.section_model_id=e.attr("data-rexlive-model-id"),t.section_model_number=e.attr("data-rexlive-model-number")),(e=$(document.createElement("script"))).addClass("section-targets"),e.attr("data-section-rex-id",t.section_rex_id),e.attr("data-model-id",t.section_model_id),e.attr("data-model-number",t.section_model_number),e.attr("data-section-hide",t.section_hide),e.text(JSON.stringify(o)),e.appendTo($liveDataContainer[0]))},_getGridLayoutLive=function(e){var i,a,o,t={layout:"fixed",fullHeight:!1,collapsed:!1};return e.hasClass("rex-model-section")?(a=e.attr("data-rexlive-model-id"),$liveDataContainer.children(".section-targets").each(function(e,t){t=$(t);a==t.attr("data-model-id")&&(i=JSON.parse(t.text()))})):(o=e.attr("data-rexlive-section-id"),$liveDataContainer.children(".section-targets").each(function(e,t){t=$(t);o==t.attr("data-section-rex-id")&&(i=JSON.parse(t.text()))})),t.layout=i[0].props.layout,t.fullHeight=i[0].props.full_height,t.collapsed=i[0].props.collapse_grid,t},_getLayoutSectionTargets=function(e,t){t=void 0===t?"default":t;var i,a,o,r,s=[];if(e.hasClass("rex-model-section")){for(var n=e.attr("data-rexlive-model-id"),l=_getModelsCustomizations(),d=0,u=l.length;d<u;d++)if(l[d].id==n){for(i=0,a=l[d].customizations.length;i<a;i++)if(l[d].customizations[i].name==t){s=jQuery.extend(!0,[],l[d].customizations[i].targets);break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(d=0,o=_.length;d<o;d++)if(_[d].name==t&&void 0!==_[d].sections){for(i=0,r=_[d].sections.length;i<r;i++)if(_[d].sections[i].section_rex_id==c){s=jQuery.extend(!0,[],_[d].sections[i].targets);break}break}}return s},_getDefaultBlockProps=function(e,t){for(var i=_getLayoutSectionTargets(e,"default"),a={},o=1,r=i.length;o<r;o++)if(i[o].name==t){a=jQuery.extend(!0,{},i[o].props);break}return a},_getGridLayout=function(e,t){t=void 0===t?"default":t;var i,a,o,r,s={layout:"fixed",fullHeight:!1,collapsed:!1};if(e.hasClass("rex-model-section")){for(var n=e.attr("data-rexlive-model-id"),l=_getModelsCustomizations(),d=0,u=l.length;d<u;d++)if(l[d].id==n){for(i=0,a=l[d].customizations.length;i<a;i++)if(l[d].customizations[i].name==t){s.layout=l[d].customizations[i].targets[0].props.layout,s.fullHeight=l[d].customizations[i].targets[0].props.full_height,s.collapsed=l[d].customizations[i].targets[0].props.collapse_grid;break}break}}else{var c=e.attr("data-rexlive-section-id"),_=_getPageCustomizations();for(d=0,o=_.length;d<o;d++)if(_[d].name==t&&void 0!==_[d].sections&&null!==typeof _[d].sections){for(i=0,r=_[d].sections.length;i<r;i++)if(_[d].sections[i].section_rex_id==c){0!=_[d].sections[i].targets.length&&(s.layout=_[d].sections[i].targets[0].props.layout,s.fullHeight=_[d].sections[i].targets[0].props.full_height,s.collapsed=_[d].sections[i].targets[0].props.collapse_grid);break}break}}return s},_customizationExists=function(e){for(var t=!1,i=[],a=0,o=(i=""!=$availableLayoutNames.text()?JSON.parse($availableLayoutNames.text()):i).length;a<o;a++)if(i[a]==e){t=!0;break}return t},updateSection=function(e,t,i,a){var o=e.children(".section-data"),r=isNaN(parseInt(i.video_bg_id))?"":parseInt(i.video_bg_id),s=void 0===i.video_bg_url_section?"":i.video_bg_url_section,n=void 0===i.video_bg_url_vimeo_section?"":i.video_bg_url_vimeo_section,l="",d=(""!=r?l="mp4":""!=n?l="vimeo":""!=s&&(l="youtube"),"undefined"!==i.custom_classes&&-1!==i.custom_classes.indexOf("rex-video--with-audio")),r={mp4Data:{idMp4:r,linkMp4:void 0===i.video_mp4_url?"":i.video_mp4_url,width:void 0===i.video_bg_width_section?"":i.video_bg_width_section,height:void 0===i.video_bg_height_section?"":i.video_bg_height_section},vimeoUrl:n,youtubeUrl:s,audio:d,typeVideo:l},n=(Rexbuilder_Dom_Util.updateSectionVideoBackground(e,r),{active:void 0===i.image_bg_section_active||i.image_bg_section_active.toString(),idImage:isNaN(parseInt(i.id_image_bg_section))?"":parseInt(i.id_image_bg_section),urlImage:i.image_bg_section,width:parseInt(i.image_width),height:parseInt(i.image_height)}),s={color:i.row_overlay_color,active:void 0!==i.row_overlay_active&&i.row_overlay_active.toString()},d=(Rexbuilder_Dom_Util.updateImageBG(e,n),{color:void 0!==i.color_bg_section?i.color_bg_section:"",active:void 0===i.color_bg_section_active||i.color_bg_section_active.toString()}),l=(-1===d.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionBackgroundColor(e,d):Rexbuilder_Dom_Util.updateSectionBackgroundGradient(e,d),-1===s.color.indexOf("gradient")?Rexbuilder_Dom_Util.updateSectionOverlay(e,s):Rexbuilder_Dom_Util.updateSectionOverlayGradient(e,s),{top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)}),r=(Rexbuilder_Dom_Util.updateSectionMarginsData(e,l),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1,i.layout=o.attr("data-layout")),{gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:void 0!==i.collapse_grid&&("true"==i.collapse_grid.toString()||a),noMobileLayoutSaved:!!i.noMobileLayoutSaved}),n=(Rexbuilder_Dom_Util.updateRow(e,o,t,r),void 0===i.section_name?"":i.section_name),d=(Rexbuilder_Dom_Util.updateSectionName(e,n),e.attr("data-type",i.type),void 0===i.custom_classes?"":i.custom_classes),s=[],l=(""!=d&&(s=(d=d.trim()).split(/\s+/)),Rexbuilder_Dom_Util.updateCustomClasses(e,s),void 0!==i.section_edited&&"true"==i.section_edited.toString());e.attr("data-rexlive-section-edited",l)},updateSectionTools=function(e,t,i,a){var o={top:isNaN(parseInt(i.row_margin_top))?0:parseInt(i.row_margin_top),right:isNaN(parseInt(i.row_margin_right))?0:parseInt(i.row_margin_right),bottom:isNaN(parseInt(i.row_margin_bottom))?0:parseInt(i.row_margin_bottom),left:isNaN(parseInt(i.row_margin_left))?0:parseInt(i.row_margin_left)},o=(Rexbuilder_Section.fixSectionToolbox(e,o),-1!==i.custom_classes.indexOf("rex-block-grid")&&(i.collapse_grid=!1),{gutter:i.block_distance,top:i.row_separator_top,bottom:i.row_separator_bottom,right:i.row_separator_right,left:i.row_separator_left,full_height:i.full_height,layout:i.layout,section_width:i.section_width,dimension:i.dimension,collapse_grid:void 0!==i.collapse_grid&&("true"==i.collapse_grid.toString()||a)});Rexbuilder_Section.fixBlockToolsAccordingToSeparator(e,o)},updateElementDimensions=function(e,t,i){var a=parseInt(i.x),o=parseInt(i.y),r=parseInt(i.w),s=parseInt(i.h),n=parseInt(i.startH),l=(parseInt(i.increaseHeight),parseInt(i.realFluid));void 0!==i.gridstackInstance&&i.gridstackInstance?i.gridstackInstance.update(e,a,o,r,s):(e.setAttribute("data-gs-height",s),e.setAttribute("data-gs-width",r),e.setAttribute("data-gs-y",o),e.setAttribute("data-gs-x",a)),t.setAttribute("data-gs_start_h",n),t.setAttribute("data-gs_width",r),t.setAttribute("data-gs_height",s),t.setAttribute("data-gs_y",o),t.setAttribute("data-gs_x",a),t.setAttribute("data-element_real_fluid",l)},_detect_mobile=function(){"ontouchstart"in document.documentElement?Rexbuilder_Util.addClass(document.body,"touch"):Rexbuilder_Util.addClass(document.body,"no-touch")},_viewport=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},_merge=function(e,t){function i(e){for(var t in e)e.hasOwnProperty(t)&&("[object Object]"===Object.prototype.toString.call(e[t])?a[t]=merge(a[t],e[t]):a[t]=e[t])}var a={};return i(e),i(t),a},getYoutubeID=function(e){e=0<e.indexOf("youtu.be")?e.substr(e.lastIndexOf("/")+1,e.length):-1<e.indexOf("http")?e.match(/[\\?&]v=([^&#]*)/)[1]:15<e.length?null:e;return e},_checkPresentationPage=function(){return 0!==$(".rexpansive_portfolio_presentation").length},_checkStaticPresentationPage=function(){return 0!==$(".rexpansive-static-portfolio").length},_checkPost=function(){return 0!==$("#rex-article").length},_whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},_whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},doneResizing=function(){if(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.editorMode){if(!Rexbuilder_Util_Editor.changedLayout)return"default"===Rexbuilder_Util.chosenLayoutData.id&&_updateGridsHeights(),void(Rexbuilder_Util.windowIsResizing=!1);Rexbuilder_Util_Editor.changedLayout=!1,0===edit_dom_layout(Rexbuilder_Util_Editor.clickedLayoutID).collapse_needed?Rexbuilder_Util_Editor.endLoading():Rexbuilder_Util.$document.one("rexlive:collapsingElementsEnded",function(e){Rexbuilder_Util_Editor.endLoading()})}Rexbuilder_Util.windowIsResizing=!1,Rexbuilder_Util.loadWidth=Rexbuilder_Util.globalViewport.width},_set_initial_grids_state=function(e){if(e=void 0!==e?e:"default",Rexbuilder_Util.rexContainer)for(var t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),i=t.length,a=0;a<i;a++){for(var o=$(t[a]),r=o.find(".grid-stack-row").data().plugin_perfectGridGalleryEditor,s=Rexbuilder_Util.getSectionCustomLayouts(t[a].getAttribute("data-rexlive-section-id")),n=null,l=null,d=0;d<s.length;d++){if("default"===s[d].name&&(l=d),s[d].name===e){n=d;break}d==s.length-1&&(n=l)}for(var u,c=[],d=0,_=s[n].targets.length;d<_;d++)"self"!==s[n].targets[d].name&&((u={}).el=o.find(".perfect-grid-item[data-rexbuilder-block-id="+s[n].targets[d].name+"]"),u.x=parseInt(s[n].targets[d].props.gs_x),u.y=parseInt(s[n].targets[d].props.gs_y),u.width=parseInt(s[n].targets[d].props.gs_width),u.height=parseInt(s[n].targets[d].props.gs_height),c.push(u));r.set_grid_initial_state(c)}},_updateGridsHeights=function(){if(Rexbuilder_Util.rexContainer)for(var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("grid-stack-row")),i=t.length,a=0;a<i;a++){void 0!==(o=(e=$(t[a])).data().plugin_perfectGridGalleryEditor)&&(o.batchGridstack(),o._defineDynamicPrivateProperties(),o.updateGridstackStyles(),o.setFullWidthNaturalBackground(),o.setNaturalBackground(),o.updateBlocksHeight(),o.commitGridstack());var o=jQuery.Event("rexlive:updateGridsHeights");o.settings={$row:e},Rexbuilder_Util.$document.trigger(o)}},_stopBlockVideos=function(e){_stopVideo(e.find(".grid-item-content"))},_playBlockVideos=function(e){_playVideoFromBegin(e.find(".grid-item-content"))},_stopPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),e=e.find(".youtube-player");$.each(t,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(i,function(e,t){Rexbuilder_Util.stopVideo($(t))}),$.each(e,function(e,t){Rexbuilder_Util.stopVideo($(t))})},_playPluginsSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),e=e.find(".youtube-player");Rexbuilder_Util.editorMode&&$.each(t,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(i,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))}),$.each(e,function(e,t){Rexbuilder_Util.playVideoFromBegin($(t))})},_stopVideo=function(e){var t;e.hasClass("mp4-player")?((t=e.children(".rex-video-wrap").find("video")[0]).currentTime=0,t.pause()):e.hasClass("vimeo-player")?(t=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]))&&t.unload():e.hasClass("youtube-player")&&void 0!==e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPStop()},_fixVideosAudioSection=function(e){var t=e.find(".mp4-player"),i=e.find(".vimeo-player"),a=e.find(".youtube-player");Rexbuilder_Util.fixVideoAudio(e),$.each(t,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(i,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))}),$.each(a,function(e,t){Rexbuilder_Util.fixVideoAudio($(t))})},_fixYoutube=function(e){for(var t=[].slice.call(e.getElementsByClassName("rex-youtube-wrap")),i=t.length,a=0;a<i;a++){var o=$(t[a]),r=o.parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),s=o.YTPGetPlayer();void 0!==s&&(o.optimizeDisplay(),o.YTPPlay(),0==r.length||r.hasClass("user-has-muted")?(s.mute(),s.isMute=!0,s.setVolume(0)):o.YTPUnmute())}},_fixVideoAudio=function(e){var t,i=e.children("rex-video-toggle-audio");e.hasClass("mp4-player")?(t=e.children(".rex-video-wrap").find("video")[0],0==i.length||i.hasClass("user-has-muted")?$(t).prop("muted",!0):$(t).prop("muted",!1)):e.hasClass("vimeo-player")?(t=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]),0==i.length||i.hasClass("user-has-muted")?t&&t.setVolume(0):t.setVolume(1)):e.hasClass("youtube-player")&&void 0!==(e=(t=e.children(".rex-youtube-wrap")).YTPGetPlayer())&&(0==i.length||i.hasClass("user-has-muted")?(e.mute(),e.isMute=!0,e.setVolume(0)):t.YTPUnmute())},_playVideoFromBegin=function(e){var t=!1;if(e.hasClass("mp4-player")){var i=e.children(".rex-video-wrap").find("video")[0];i.currentTime=0,i.play(),t=!0}else if(e.hasClass("vimeo-player")){i=VimeoVideo.findVideo(e.children(".rex-video-vimeo-wrap").find("iframe")[0]);null!==i&&i.play(),t=!0}else if(e.hasClass("youtube-player")){i=e.children(".rex-youtube-wrap");if(0==i.length)return;if(void 0===i.YTPGetPlayer())return;i.YTPPlay(),t=!0}t&&setTimeout(Rexbuilder_Util.fixVideoAudio.bind(null,e),500)},setContainer=function(e){this.$rexContainer=e},_parents=function(e,t){for(;e.parentNode;){if(_matches(e,t))return e;e=e.parentNode}return null},_matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},_transitionEvent="",_animationEvent="";function _smoothScroll(e){$bodyHtml.animate({scrollTop:e.offset().top+_plugin_frontend_settings.scroll_animation_offset},600)}function getGalleryInstance(e){e=(e=e.is(".rexpansive_section")?e:e.parents(".rexpansive_section")).find(".grid-stack-row");return 0==e.length?null:e.data("plugin_perfectGridGalleryEditor")}var removeCollapsedGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=getGalleryInstance($(e[i]));Rexbuilder_Dom_Util.collapseGrid(a,!1,a.properties.dispositionBeforeCollapsing,a.properties.layoutBeforeCollapsing)}},collapseAllGrids=function(){if(Rexbuilder_Util.rexContainer&&Rexbuilder_Util.galleryPluginActive)for(var e=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),t=e.length,i=0;i<t;i++){var a=getGalleryInstance($(e[i]));a._defineDynamicPrivateProperties(),a.collapseElements()}};function startVideoPlugin(e){var t,i;e.hasClass("mp4-player")?(t=(i=e.find(".rex-video-wrap")).children(".rex-video-container").get(0),i.removeClass("removing-video-mp4"),t.play().catch(function(e){Rexbuilder_Util.displayError("An error occurred while trying to play the video."),console.error(e)})):e.hasClass("vimeo-player")?(i=e.children(".rex-video-vimeo-wrap").find("iframe")[0],VimeoVideo.addPlayer("1",i,{autoplay:!0,background:!0,loop:!0})):e.hasClass("youtube-player")&&void 0===e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPlayer()}var _destroyVideo=function(e,t){var i="";return e.hasClass("mp4-player")?(i="mp4",Rexbuilder_Dom_Util.removeMp4Video(e,t)):e.hasClass("vimeo-player")?(i="vimeo",Rexbuilder_Dom_Util.removeVimeoVideo(e,t)):e.hasClass("youtube-player")&&(i="youtube",Rexbuilder_Dom_Util.removeYoutubeVideo(e,t)),i},_pauseVideo=function(e){e.hasClass("mp4-player")?e.children(".rex-video-wrap").find("video")[0].pause():e.hasClass("vimeo-player")?VimeoVideo.findVideo(e.find(".rex-video-vimeo-wrap").find("iframe")[0]).pause():e.hasClass("youtube-player")&&void 0!==e.children(".rex-youtube-wrap").YTPGetPlayer()&&e.children(".rex-youtube-wrap").YTPPause()},_launchVideoPlugins=function(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){var ytVideos=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rex-youtube-wrap")),i,tot_ytVideos=ytVideos.length,$ytVideo,data_yt,url,id;if(jQuery.browser.mobile)for(i=0;i<tot_ytVideos;i++)data_yt=eval("("+ytVideos[i].getAttribute("data-property")+")"),url=data_yt.videoURL,id=getYoutubeID(url),ytVideos[i].style.backgroundImage="url(https://img.youtube.com/vi/"+id+"/0.jpg)",ytVideos[i].addEventListener("click",handleYtbVideoMobileClick);else for(i=0;i<tot_ytVideos;i++){if($ytVideo=$(ytVideos[i]),void 0===$ytVideo.YTPGetPlayer()&&!Rexbuilder_Util.hasClass(ytVideos[i],"youtube-player-launching"))return void $ytVideo.YTPlayer();Rexbuilder_Util.removeClass(ytVideos[i],"youtube-player-launching")}VimeoVideo.init()}};function handleYtbVideoMobileClick(ev){ev.preventDefault();var data_yt=eval("("+this.getAttribute("data-property")+")"),url=data_yt.videoURL;window.location.href=url}var _playAllVideos=function(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){var e,t=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("mp4-player")),i=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("vimeo-player")),a=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("youtube-player")),o=t.length,r=i.length,s=a.length;if(Rexbuilder_Util.editorMode)for(e=0;e<o;e++)Rexbuilder_Util.playVideo($(t[e]));for(e=0;e<r;e++)Rexbuilder_Util.playVideo($(i[e]));for(e=0;e<s;e++)Rexbuilder_Util.playVideo($(a[e]))}},_playVideo=function(e){var t,e=e[0];void 0!==e&&(Rexbuilder_Util.hasClass(e,"mp4-player")?(t=e.querySelector("video"))&&t.play():Rexbuilder_Util.hasClass(e,"vimeo-player")?(t=VimeoVideo.findVideo(e.querySelector("iframe")))&&t.play():Rexbuilder_Util.hasClass(e,"youtube-player")&&(t=e.querySelector(".rex-youtube-wrap"))&&void 0!==(e=$(t)).YTPGetPlayer()&&e.YTPPlay())},_getPaddingsDataString=function(e){var t,i={top:"5",right:"5",bottom:"5",left:"5",type:"px"};return""!=e&&(e=e.split(/;/gm),i.top=parseInt(e[0].split(/\D+/gm)[0]),i.right=parseInt(e[1].split(/\D+/gm)[0]),i.bottom=parseInt(e[2].split(/\D+/gm)[0]),i.left=parseInt(e[3].split(/\D+/gm)[0]),t="",t=-1!=e[0].indexOf("%")?"%":"px",i.type=t),i},_paddingsToString=function(e){var t="";return(t+=""+e.top+e.type+";")+(""+e.right+e.type+";")+(""+e.bottom+e.type+";")+(""+e.left+e.type+";")},getCoord=function(e,t){return{x:e%(t=void 0!==t?t:12),y:Math.floor(e/t)}},_diffStrings=function(e,t){t=void 0!==t?t:" ";for(var i,a=e.join(" ").split(t),o={},r=[],s=0,n=a.length;s<n;s++)o[a[s]]=void 0!==o[a[s]]?o[a[s]]+1:1;for(i in o)1===o[i]&&r.push(i);return r};function handleLayoutChange(e){for(var t,i,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),o=a.length,r=(Rexbuilder_Util.rexContainer.setAttribute("data-rex-layout-selected",e),Rexbuilder_Util.activeLayout=e,[]),s=[],n=0;n<o;n++)Rexbuilder_Util.hasClass(a[n],"rex-model-section")&&r.push(parseInt(a[n].getAttribute("data-rexlive-model-id"))),t={rexID:a[n].getAttribute("data-rexlive-section-id"),modelID:isNaN(parseInt(a[n].getAttribute("data-rexlive-model-id")))?"":parseInt(a[n].getAttribute("data-rexlive-model-id"))},s.push(t);for(var l,d,u=Rexbuilder_Util.getPageCustomizations(),c=("default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.saveCustomizationDomOrder(jQuery.extend(!0,[],u)),Rexbuilder_Util.getModelsCustomizations()),_=("true"==$defaultLayoutState.attr("data-empty-default-customization")?(l=Rexbuilder_Util.getDefaultPageLayout(u,c),_createDefaultLayoutState(l)):(Rexbuilder_Util.updateDefaultLayoutState({modelsData:c}),l=Rexbuilder_Util.getDefaultLayoutState()),Rexbuilder_Util.getCustomLayoutSections(u,c,l,e)),g=[],m=0;m<_;m++)if("true"==_[m].section_is_model.toString()){for(d=!1,i=0;i<g.length;i++)if(g[i].id==_[m].section_model_id){g[i].number=g[i].number+1,_[m].section_model_number=g[i].number,d=!0;break}d||(_[m].section_model_number=1,g.push({id:_[m].section_model_id,number:1}))}Rexbuilder_Util.clearSectionsEdited();var p,b,f,h=_mergeSections(_,l),v=(Rexbuilder_Util.domUpdating=!0,[]);for(p in h)h[p].notInSection&&"default"!=e||(b={rexID:h[p].section_rex_id,modelID:-1,modelNumber:-1},(f="true"==h[p].section_is_model.toString()?(b.modelID=h[p].section_model_id,b.modelNumber=h[p].section_model_number,Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+h[p].section_rex_id+'"][data-rexlive-model-number="'+b.modelNumber+'"]')):Rexbuilder_Util.rexContainer.querySelector('section[data-rexlive-section-id="'+h[p].section_rex_id+'"]'))&&!Rexbuilder_Util.hasClass(f,"removing_section")&&(void 0!==h[p].section_hide&&"true"==h[p].section_hide.toString()?Rexbuilder_Util.addClass(f,"rex-hide-section"):(Rexbuilder_Util.removeClass(f,"rex-hide-section"),updateRexGrid(f,h[p].targets,!1,p)),v.push(b)));Rexbuilder_Dom_Util.fixSectionDomOrder(v,!0),Rexbuilder_Util.domUpdating=!1}function updateRexGrid(e,t,i){var a=$(e),o=a.find(".grid-stack-row"),r=t[0].props.collapse_grid;-1!==t[0].props.custom_classes.indexOf("rex-block-grid")&&(r=!1),e.querySelector(".section-data").setAttribute("data-collapse-grid",r),t[0].props.gridEdited&&o.attr("data-rexlive-layout-changed",!0);for(var s,n,l,d,u,c,_=t.length,g=1;g<_;g++){var m=o.children('div[data-rexbuilder-block-id="'+t[g].name+'"]');void 0!==t[g].props.hide&&"true"==t[g].props.hide.toString()?m.hasClass("rex-hide-element")||m.addClass("rex-hide-element"):m.hasClass("rex-hide-element")&&m.removeClass("rex-hide-element")}for(g=1;g<_;g++)if((!t[g].notDisplay||"default"==Rexbuilder_Util.activeLayout)&&(d=t[g].name,s=t[g].props,d=(m=o.find('.perfect-grid-item[data-rexbuilder-block-id="'+d+'"]'))[0],n=m.children(".rexbuilder-block-data"),l=m.find(".grid-item-content"),0<m.length)){if(c=(u=[].slice.call(d.getElementsByTagName("img"))).length,!Rexbuilder_Util.editorMode&&0!==c)for(var p=0;p<c;p++)"true"===u[p].getAttribute("inline-photoswipe")&&Rexbuilder_Photoswipe.addElementFromInline($(u[p]));Rexbuilder_Util.updateDOMSingleElement({$elem:m,targetProps:s,$itemData:n,$itemContent:l,gridstackInstance:null,positionAndSize:!0,collapseGrid:r})}updateSection(a,o,t[0].props,i)}function removeArrayDuplicates(e){return e.filter(function(e,t,i){return i.indexOf(e)===t})}function isOrIsChild(e,t){return!!e.matches(t)||0!==$(e).parents(t).length}function displayError(e,t){"string"!=typeof e&&(e=e.toString()),/^\[Rexpansive\]/.test(e)||(e="[Rexpansive] "+e),console.error(e),t&&"string"==typeof t&&alert(t)}function displayAjaxError(e,t,i){"string"!=typeof t&&(t=t.toString()),/^\[Rexpansive\]/.test(t)||(t="[Rexpansive] "+t),console.error(t,{status:e.response.status,message:e.textStatus,errorThrown:e.errorThrown}),i&&"string"==typeof i&&alert(i)}var init=function(){this.globalViewport=Rexbuilder_Util.viewport(),this.firstStart=!0,this.isIframe=window.location!==window.parent.location,_plugin_frontend_settings.scroll_animation_offset=0,Rexbuilder_Util.changedFrontLayout=!1,_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing?this.editorMode=!0:this.editorMode=!1,this._transitionEvent=_whichTransitionEvent(),this._animationEvent=_whichAnimationEvent(),this.$window=$(window),this.$document=$(document),this.$body=$("body"),$bodyHtml=$("body, html"),this.galleryPluginActive=!1,_detect_mobile(),$rexbuilderLayoutData=$(document.getElementById("rexbuilder-layout-data")),$rexbuilderModelData=$(document.getElementById("rexbuilder-model-data")),$availableLayoutNames=$(document.getElementById("available-layouts-names"));var e=$(document.getElementById("layout-avaiable-dimensions")),t=(frontAvailableLayouts=0<e.length?JSON.parse(e.text()):[],$availableLayoutNames.text()),e=(layoutSavedInfo=frontAvailableLayouts.filter(function(e){return-1!==t.indexOf(e.id)}),this.editorMode||(Rexbuilder_Util.startFrontLayout=_findFrontLayout()),$modelsCustomizationsDataDiv=$("#rexbuilder-model-data").children(".models-customizations").eq(0),$pageCustomizationsDataDiv=$rexbuilderLayoutData.children(".layouts-customizations").eq(0),$liveDataContainer=$("#rexbuilder-layout-data-live"),$layoutsDomOrder=$("#rexbuilder-layouts-sections-order"),$defaultLayoutState=$("#rexbuilder-default-layout-state"),$usedIDSContainer=$("#sections-ids-used"),_storeNamesUsed(),$usedBlocksIDsContainer=$("#blocks-ids-used"),_storeBlocksIDsUsed(),this.$rexContainer=$(".rex-container"),this.rexContainer=this.$rexContainer[0],0===this.$rexContainer.length&&console.warn("[Rexpansive] No rexContainer detected! This may cause problems."),this.backendEdited=!1,0<Rexbuilder_Util.$rexContainer.length&&"true"==Rexbuilder_Util.$rexContainer.attr("data-backend-edited").toString()&&(Rexbuilder_Util.$rexContainer.addClass("backend-edited"),this.backendEdited=!0),this.lastSectionNumber=-1,this.activeLayout="",this.domUpdating=!1,this.$rexContainer.children(".rexpansive_section").eq(0).attr("data-rex-collapse-grid"));this.blockGridUnder768=void 0!==e&&"false"==e.toString(),this.chosenLayoutData=null,this.loadWidth=Rexbuilder_Util.globalViewport.width,_updateSectionsIDs(),_updateBlocksIDs(),Rexbuilder_Dom_Util.fixModelNumbers(),_updateSectionsNumber(),this.firstStart=!1};return{init:init,viewport:_viewport,getYoutubeID:getYoutubeID,transitionEvent:_transitionEvent,animationEvent:_animationEvent,checkPresentationPage:_checkPresentationPage,checkStaticPresentationPage:_checkStaticPresentationPage,editorMode:editorMode,windowIsResizing:windowIsResizing,launchVideoPlugins:_launchVideoPlugins,stopPluginsSection:_stopPluginsSection,playPluginsSection:_playPluginsSection,stopBlockVideos:_stopBlockVideos,playBlockVideos:_playBlockVideos,chooseLayout:chooseLayout,predictLayout:predictLayout,setContainer:setContainer,createRandomID:createRandomID,createRandomNumericID:_createRandomNumericID,responsiveLayouts:responsiveLayouts,defaultLayoutSections:defaultLayoutSections,launchEditDomLayout:launchEditDomLayout,edit_dom_layout:edit_dom_layout,smoothScroll:_smoothScroll,getGalleryInstance:getGalleryInstance,removeCollapsedGrids:removeCollapsedGrids,collapseAllGrids:collapseAllGrids,stopVideo:_stopVideo,playVideoFromBegin:_playVideoFromBegin,pauseVideo:_pauseVideo,playVideo:_playVideo,destroyVideo:_destroyVideo,startVideoPlugin:startVideoPlugin,getPaddingsDataString:_getPaddingsDataString,paddingsToString:_paddingsToString,playAllVideos:_playAllVideos,findLayoutType:_findLayoutType,updateModelsLive:_updateModelsLive,getLayoutSectionTargets:_getLayoutSectionTargets,updateElementDimensions:updateElementDimensions,getGridLayout:_getGridLayout,customizationExists:_customizationExists,getDefaultBlockProps:_getDefaultBlockProps,fixVideosAudioSection:_fixVideosAudioSection,fixVideoAudio:_fixVideoAudio,fixYoutube:_fixYoutube,saveCustomizationDomOrder:_saveCustomizationDomOrder,getDefaultPageLayout:_getDefaultPageLayout,getModelsCustomizations:_getModelsCustomizations,updateModelsCustomizationsData:_updateModelsCustomizationsData,getPageCustomizations:_getPageCustomizations,updatePageCustomizationsData:_updatePageCustomizationsData,updatePageAvaiableLayoutsNames:_updatePageAvaiableLayoutsNames,getPageAvaiableLayoutsNames:_getPageAvaiableLayoutsNames,updateDivModelCustomizationsNames:_updateDivModelCustomizationsNames,getSectionCustomLayouts:_getSectionCustomLayouts,getLayoutLiveSectionTargets:_getLayoutLiveSectionTargets,getGridLayoutLive:_getGridLayoutLive,getCustomLayoutSections:_getCustomLayoutSections,updateSectionStateLive:_updateSectionStateLive,updatePageCustomizationsDomOrder:_updatePageCustomizationsDomOrder,getPageDefaultDom:_getPageDefaultDom,getPageCustomizationsDom:_getPageCustomizationsDom,updateDefaultLayoutState:_updateDefaultLayoutState,updateDefaultLayoutStateSection:_updateDefaultLayoutStateSection,updateDefaultLayoutStateDOMOrder:_updateDefaultLayoutStateDOMOrder,getDefaultLayoutState:_getDefaultLayoutState,updateSectionOrderCustomLayouts:_updateSectionOrderCustomLayouts,updateGridsHeights:_updateGridsHeights,updateDOMSingleElement:updateDOMSingleElement,getDefaultBlockMeasure:_getDefaultBlockMeasure,doneResizing:doneResizing,getCoord:getCoord,diffStrings:_diffStrings,applyDefaultBlocksDimentions:_applyDefaultBlocksDimentions,isMobile:_isMobile,cssPropertyValueSupported:_cssPropertyValueSupported,changedFrontLayout:changedFrontLayout,startFrontLayout:startFrontLayout,findFrontLayout:_findFrontLayout,parents:_parents,rtimeOut:rtimeOut,rInterval:rInterval,merge:_merge,handleLayoutChange:handleLayoutChange,removeArrayDuplicates:removeArrayDuplicates,isOrIsChild:isOrIsChild,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,createSectionID:_createSectionID,addSectionID:_addSectionID,removeSectionID:_removeSectionID,saveSectionNamesUsed:_saveSectionNamesUsed,getSectionNamesUsed:_getSectionNamesUsed,createBlockID:createBlockID,addBlockID:addBlockID,removeBlockID:removeBlockID,saveBlocksIDsUsed:saveBlocksIDsUsed,updateBlocksIDsUsed:updateBlocksIDsUsed,getBlocksIDsUsed:getBlocksIDsUsed,clearSectionsEdited:clearSectionsEdited,displayError:displayError,displayAjaxError:displayAjaxError}}(jQuery);
var Rexbuilder_Photoswipe=function(u){"use strict";function c(e){if(e=e||window.event,!(0<u(e.target).parents(".perfect-grid-item").find(".element-link").length||"a"===e.target.tagName.toUpperCase())){var t=e.target,r=p(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var i,t=u(r).parents(g)[0],n=Array.prototype.slice.call(t.getElementsByClassName("pswp-figure")),l=n.length,a=0,s=0;s<l;s++)if(1===n[s].nodeType){if(n[s]===r){i=a;break}a++}return 0<=i&&w(i,t),!1}}}var g="",f=function(e){for(var t,r,i,n=u(e).find(".pswp-figure").get(),l=n.length,a=[],s=0;s<l;s++)1===(t=n[s]).nodeType&&(i=(r=t.children[0]).getAttribute("data-size").replace("px","").split("x"),i={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},1<t.children.length&&(i.title=t.children[1].innerHTML),0<r.children.length&&(i.msrc=r.children[0].getAttribute("data-thumburl")),i.pid=s,i.el=t,a.push(i));return a},p=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))},h=function(){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"popUpContent:pswpOpened"})},m=function(){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"popUpContent:pswpClosed"})},w=function(e,t,r,i){var n,l,a=document.querySelectorAll(".pswp")[0],s=f(t),p={galleryUID:t.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=s[e].el.getElementsByClassName("pswp-item-thumb")[0],e=s[e].el.getElementsByClassName("rex-custom-scrollbar")[0],r=window.pageYOffset||document.documentElement.scrollTop,e=e.getBoundingClientRect();return"natural"==t.getAttribute("data-thumb-image-type")?{x:e.left,y:e.top+r,w:e.width}:null},galleryPIDs:!0,closeOnScroll:!1,showHideOpacity:!0};if(i)if(p.galleryPIDs){for(var o=0,d=s.length;o<d;o++)if(s[o].pid==e){p.index=o;break}}else p.index=parseInt(e,10)-1;else p.index=parseInt(e,10);Rexbuilder_Util.hasClass(t,"split-scrollable")?(n=u(t).find(".pswp-figure").eq(e).parents(".opacity-block").find(".pswp-figure").get(),i=u(t).find(".pswp-figure").eq(e).get(0),p.index=n.indexOf(i),s=s.filter(function(e){for(var t=0;t<n.length;t++)if(e.el===n[t])return!0;return!1})):0!==Array.prototype.slice.call(t.getElementsByClassName("block-has-slider")).length&&(i=Rexbuilder_Util.parents(s[e].el,".perfect-grid-item"),l=!1,i&&Rexbuilder_Util.hasClass(i,"block-has-slider")&&(l=!0),s=s.filter(function(e){e=Rexbuilder_Util.parents(e.el,".perfect-grid-item");return!e||(Rexbuilder_Util.hasClass(e,"block-has-slider")?!!l:!l)})),isNaN(p.index)||(r&&(p.showAnimationDuration=0),(t=new PhotoSwipe(a,PhotoSwipeUI_Default,s,p)).init(),Rexbuilder_Util.isIframe&&(h(),t.listen("close",m)))};return{init:function(e){g=e;for(var t=document.querySelectorAll(e),r=t.length,i=0;i<r;i++)t[i].setAttribute("data-pswp-uid",i+1),t[i].onclick=c;for(var n,l,a,s,p=t,o=p.length,d=0,u=0;d<o;d++)for(l=(n=Array.prototype.slice.call(p[d].querySelectorAll(".rex-slider-element"))).length,u=0;u<l;u++)a=n[u].querySelector(".pswp-item"),s=n[u].querySelector(".slider-overlay"),a&&s&&a.appendChild(s);e=function(){var e=window.location.hash.substring(1),t={};if(!(e.length<5)){for(var r,i=e.split("&"),n=0;n<i.length;n++)i[n]&&((r=i[n].split("=")).length<2||(t[r[0]]=r[1]));t.gid&&(t.gid=parseInt(t.gid,10))}return t}();e.pid&&e.gid&&w(e.pid,t[e.gid-1],!0,!0)},addElement:function(e,t,r,i,n){var l;e.parents(".grid-stack-item").hasClass("block-has-slider")||(tmpl.arg="image",l=e.parents(".grid-stack-item-content"),0==e.parents(".pswp-figure").length&&(e.parent().prepend(tmpl("tmpl-photoswipe-block",{link:t,width:r,height:i,type:n})),t=l.find(".pswp-item"),e.detach().appendTo(t)))},addElementFromInline:function(e){var t="alignone";void 0!==e.attr("class")&&(t=e.attr("class").split(" ")[1]),tmpl.arg="image",e.before(tmpl("tmpl-photoswipe-block-inline",{link:e.attr("src"),width:e.css("width"),height:e.css("height"),type:"natural",align:t}));t=e.parents(".text-wrap").find(".pswp-item").filter(function(e){return 3==u(this).children().length});e.detach().appendTo(t)},removeElement:function(e){var t,r=e.parents(".pswp-figure");0!=r.length&&(t=r.parent(),e.detach().appendTo(t),r.remove())},init_inline_pswp:function(e){var t,e=e.target,r=e.getAttribute("data-inline-pswp-info");void 0!==r&&""!==r&&(t=document.querySelectorAll(".pswp")[0],r=JSON.parse(r),e={galleryUID:e.getAttribute("data-pswp-uid"),closeOnScroll:!1,showHideOpacity:!0},new PhotoSwipe(t,PhotoSwipeUI_Default,r,e).init())}}}(jQuery);
/**
 * Util functions on RexLive
 * @since 2.0.0
 */
var Rexbuilder_Util_Editor=function(d){var n=null;function o(){var e={eventName:"rexlive:undoRedoStackChange",stacks:{undo:Rexbuilder_Util_Editor.undoStackArray.length,redo:Rexbuilder_Util_Editor.redoStackArray.length}};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function l(e){var t={sectionID:"",targetID:"",modelNumber:""},i=e.is("section")?e:e.parents(".rexpansive_section"),e=e.parents(".grid-stack-item");return t.sectionID=i.attr("data-rexlive-section-id"),i.hasClass("rex-model-section")&&(t.modelNumber=i.attr("data-rexlive-model-number")),0!=e.length?t.targetID=e.attr("data-rexbuilder-block-id"):t.targetID="self",t}function r(e,t){var i;""!=e&&(i="",i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),e=a(e),e=new RegExp("(\\s"+e+"\\s|^"+e+"\\s|\\s"+e+"$|^"+e+"$)","g"),i=(i=i.replace(e," ")).trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i))}var a=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};function s(e){for(var t,i=document.createElement("div").style,r=Rexbuilder_Util_Editor.getPrefixedValues(e),n=0;n<r.length&&(t=r[n],i.backgroundImage=t,i.backgroundImage!=t);n++);return i.backgroundImage}var u=function(e){var t={};if(void 0!==e)for(var i=e.attributes,r=0;r<i.length;r++)"class"!==i[r].name&&"style"!==i[r].name&&(t[i[r].name.replace("data-","")]=i[r].value);return t},c=function(e){var t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").removeClass("highLightRow").filter(".focusedRow"),i=d(e);0!=t.length&&!i.is(t)||(i.addClass("highLightRow"),Rexbuilder_Util_Editor.visibleRow=e,Rexbuilder_Util_Editor.visibleRowInfo={sectionID:e.getAttribute("data-rexlive-section-id"),modelNumber:void 0!==e.getAttribute("data-rexlive-model-number")?e.getAttribute("data-rexlive-model-number"):"",modelEditing:void 0!==e.getAttribute("data-rexlive-model-editing")?e.getAttribute("data-rexlive-model-editing"):""},t={},i=i.find(".section-data")[0],(t=u(i)).collapse=e.getAttribute("data-rex-collapse-grid"),i={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:t},Rexbuilder_Util_Editor.sendParentIframeMessage(i))},x=function(e,t,i){i=t=0;var r=e.offset().top,e=e.height(),n=d(window).scrollTop();return!(r+t<n&&n<r+e+i)};function m(){var e=d(window).height(),o=.8*e,l=.3*e,a=null;return Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(e,t){var i=d(t),r=i.offset().top,i=i.height(),n=d(window).scrollTop();if(r-o<n&&n<r+i-l)return a=t,!1}),a}function _(){var e,t,i,r=m();null!==(r=n?n:r)&&Rexbuilder_Util_Editor.visibleRow!==r&&c(r),r=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.highLightRow"),t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.focusedRow"),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first(),0<r.length?x(r)?r.is(i)?e={eventName:"rexlive:hideTopFastTools"}:0<t.length?r.is(t)&&(e={eventName:"rexlive:hideTopFastTools"}):e={eventName:"rexlive:viewTopFastTools"}:0<t.length&&!r.is(t)||(e={eventName:"rexlive:viewTopFastTools"}):e={eventName:"rexlive:hideTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(e)}return{init:function(){this.elementIsResizing=!1,this.elementIsDragging=!1,this.sectionCopying=!1,this.blockCopying=!1,this.editingGallery=!1,this.editingElement=!1,this.editedElement=null,this.manageElement=!1,this.editedGallery=null,this.editedTextWrap=null,this.activateElementFocus=!1,this.mouseDownEvent=null,this.mouseUpEvent=null,this.mouseDown=!1,this.mouseUp=!1,this.mousePosition=null,this.mouseClickObject=null,this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexbuilder_Util.globalViewport,this.elementDraggingTriggered=!1,this.focusedElement=null,this.hasResized=!1,this.changedLayout=!1,this.clickedLayoutID="",this.undoActive=!1,this.redoActive=!1,this.updatingGridstack=!1,this.addingNewBlocks=!1,this.removingBlocks=!1,this.updatingImageBg=!1,this.updatingPaddingBlock=!1,this.updatingCollapsedGrid=!1,this.updatingSectionWidth=!1,this.updatingSectionLayout=!1,this.savingPage=!1,this.savingModel=!1,this.openingModel=!1,this.insertingModel=!1,this.visibleRow=null,this.visibleRowInfo={},this.scrollbarsActive=!1,this.dragAndDropFromParent=!1,this.undoStackArray=[],this.redoStackArray=[],this.needToSave=!0,this.$styleElement=d("#rexpansive-builder-style-inline-css")},load:function(){var e,t,i;Rexbuilder_Util_Editor.visibleRow=m(),e=null!==Rexbuilder_Util_Editor.visibleRow,t={},e&&(i=d(Rexbuilder_Util_Editor.visibleRow).find(".section-data")[0],(t=u(i)).collapse=Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rex-collapse-grid")),Rexbuilder_Util_Editor.visibleRowInfo={sectionID:e?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-section-id"):null,modelNumber:e?void 0!==Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-number"):"":null,modelEditing:e?void 0!==Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing")?Rexbuilder_Util_Editor.visibleRow.getAttribute("data-rexlive-model-editing"):"":null},i={eventName:"rexlive:traceVisibleRow",sectionTarget:Rexbuilder_Util_Editor.visibleRowInfo,rowInfo:t},Rexbuilder_Util_Editor.sendParentIframeMessage(i),d(Rexbuilder_Util_Editor.visibleRow).addClass("highLightRow"),Rexbuilder_Util.$rexContainer.on("mouseenter",".rexpansive_section",function(e){var t=d(n=this);t.hasClass("highLightRow")||c(this),t=x(t)?{eventName:"rexlive:hideTopFastTools"}:{eventName:"rexlive:viewTopFastTools"},Rexbuilder_Util_Editor.sendParentIframeMessage(t)}),Rexbuilder_Util.$rexContainer.on("mouseleave",".rexpansive_section",function(e){var t=m(),t=(null!==t&&Rexbuilder_Util_Editor.visibleRow!==t&&c(t),d(t)),i=Rexbuilder_Util.$rexContainer.find(".rexpansive_section").first();n=null,t.is(i)||Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:viewTopFastTools"})}),Rexbuilder_Util.$window.on("scroll",_),"1"==(e=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(removing_section)")).length&&e.hasClass("empty-section")?(Rexbuilder_Util.$rexContainer.parent().addClass("add-new-section--hide"),e.addClass("activeRowTools")):Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),0==Rexbuilder_Util_Editor.$styleElement.length&&(t=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css",i.id="rexpansive-builder-style-inline-css",i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),t.appendChild(i))},activeAddSection:function(e){e=void 0!==e?e:null,Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),e&&e.removeClass("activeRowTools")},endEditingElement:function(){var e=Rexbuilder_Util_Editor.editedGallery;e&&clearTimeout(e.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.editedTextWrap&&Rexbuilder_Util_Editor.editedTextWrap.blur(),e&&e.focusElementEditing(Rexbuilder_Util_Editor.editedElement),Rexbuilder_Util_Editor.editingGallery=!1,Rexbuilder_Util_Editor.editedGallery=null,Rexbuilder_Util_Editor.editingElement=!1,Rexbuilder_Util_Editor.editedElement=null,Rexbuilder_Util_Editor.editedTextWrap=null},startEditingElement:function(){var e,t;Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editingGallery&&(e=Rexbuilder_Util_Editor.editedGallery,t=Rexbuilder_Util_Editor.editedElement,e.unFocusElementEditing(t),e.properties.elementStartingH=parseInt(t.attr("data-gs-height")))},sendParentIframeMessage:function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),window.parent.postMessage(t,"*")},addCustomClass:function(e,t){var i;""!=e&&(r(e,t),i="",i=t.parent().is("section")?t.attr("data-custom_classes"):t.attr("data-block_custom_class"),i=(i+=" "+e).trim(),t.parent().is("section")?t.attr("data-custom_classes",i):t.attr("data-block_custom_class",i))},removeCustomClass:r,escapeRegExp:a,pushAction:function(e,t,i,r){e={sectionID:(e="document"!==e?l(e):{sectionID:"",targetID:"",modelNumber:-1}).sectionID,targetID:e.targetID,modelNumber:e.modelNumber,actionName:t,performActionData:i,reverseActionData:r};Rexbuilder_Util_Editor.undoStackArray.push(e),Rexbuilder_Util_Editor.redoStackArray=[],o()},getIDs:l,getStacks:function(){return{undo:Rexbuilder_Util_Editor.undoStackArray,redo:Rexbuilder_Util_Editor.redoStackArray}},getTextWrapLength:function(e){var t,e=e.find(".text-wrap"),i=0,r=0;return e.hasClass("medium-editor-element")?((t=e.clone(!1)).children(".medium-insert-buttons").remove(),0!=(i=t.text().trim().length)&&(e.hasClass("medium-editor-element")&&!e.hasClass("medium-editor-placeholder")||0!=e.parents(".pswp-item").length)&&(r=e.innerHeight())):0!=(i=e.text().trim().length)&&(r=e.innerHeight()),0==r?0:i},rowAttrsObj:u,blockAttrsObj:u,startLoading:function(e){(e=void 0===e||e)&&(Rexbuilder_Util.$rexContainer.parent().addClass("rexbuilder-live-content--loading"),Rexbuilder_Util.$rexContainer.addClass("fade-out").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","0").removeClass("fade-out");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:animateContentsFadeOutEnd"})}))},endLoading:function(e){(e=void 0===e||e)&&Rexbuilder_Util.$rexContainer.addClass("fade-in").one(Rexbuilder_Util._animationEvent,function(){Rexbuilder_Util.$rexContainer.css("opacity","").removeClass("fade-in"),Rexbuilder_Util.$rexContainer.parent().removeClass("rexbuilder-live-content--loading");Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:animateContentsEnd"})})},builderEdited:function(e){Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:e=void 0!==e&&e})},getMousePosition:function(e,t){var i={};return void 0!==e.clientX&&void 0!==e.clientY&&void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==t?i={x:(e=e.target.getBoundingClientRect()).left+t.offset.w/2,y:e.top+Rexbuilder_Util_Editor.mousePositionFrameYOffset}:null!==Rexbuilder_Util_Editor.mousePosition&&null!==Rexbuilder_Util_Editor.mouseClickObject?(i={x:Rexbuilder_Util_Editor.mousePosition.client.x-Rexbuilder_Util_Editor.mousePosition.offset.x+Rexbuilder_Util_Editor.mouseClickObject.offset.w/2,y:Rexbuilder_Util_Editor.mousePosition.client.y-Rexbuilder_Util_Editor.mousePosition.offset.y+Rexbuilder_Util_Editor.mousePositionFrameYOffset},Rexbuilder_Util_Editor.mousePosition=null,Rexbuilder_Util_Editor.mouseClickObject=null):i={x:Rexbuilder_Util_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Editor.viewportMeasurement.height/2},i},lockRows:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){t=d(t);t.wrap("<div></div>"),t.parent().attr("style","position:relative;"),t.parent().append('<div class="rexpansive-lock-section"></div>')})},lockRowsLight:function(e){var t=Rexbuilder_Util.$rexContainer.children(".rexpansive_section");null!==e&&t.not(e),t.addClass("rexpansive-lock-section--light")},releaseRows:function(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(e,t){t=d(t);t.siblings().each(function(e,t){t=d(t);t.hasClass("rexpansive-lock-section")&&t.remove()}),t.unwrap()})},releaseRowsLight:function(){Rexbuilder_Util.$rexContainer.children(".rexpansive_section").removeClass("rexpansive-lock-section--light").removeClass("rexpansive-lock-section--overlay"),Rexbuilder_Util.$rexContainer.find(".grid-stack-item--drag-to-row").removeClass("grid-stack-item--drag-to-row"),Rexbuilder_Util.$rexContainer.find(".drag-to-section-simulator").remove()},getGradientSafeValue:s,getPrefixedValues:function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],i=[],r=0;r<t.length;r++)i.push(t[r]+e);return i},synchGradient:function(){d(".text-gradient").each(function(e,t){var i=t.getAttribute("data-gradient"),i=s(i),t=d(t);t.css("background",i),t.css("-webkit-background-clip","text"),t.css("-webkit-text-fill-color","transparent")})},updateBlockContainerHeight:function(e,t,i){var r=Rexbuilder_Util.getGalleryInstance(e),e=e.parents(".grid-stack-item").get(0);this.needToSave=t=t||!0,r.updateElementHeight(e,void 0,i),this.needToSave=!0},updateContainerMargins:function(e){var t=Rexbuilder_Util.$rexContainer.parents(".rexbuilder-live-content").eq(0);0<e.distances.vals.top?t.addClass("fix-tools-first-row"):t.removeClass("fix-tools-first-row"),t.css("margin-top",e.distances.vals.top)},sendUndoRedoInformation:o,restorePageStartingState:function(e){var t,i,r="default"===e.selected;if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")&&(t=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0),Rexbuilder_Dom_Util.updateLockEditModel(t,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model")),r){for(var n=Rexbuilder_Util_Editor.undoStackArray.length,o=0;o<n;o++)Rexbuilder_Util.$document.trigger("rexlive:undo");t="default",r=d("#rexbuilder-layout-data"),i=d("#rexbuilder-default-layout-state"),r.find('.customization-wrap[data-customization-name="'+t+'"] .section-targets').get().map(function(e){return{sectionID:e.getAttribute("data-section-rex-id"),data:e.innerText}}).forEach(function(e){i.find('[data-section-rex-id="'+e.sectionID+'"]').text(e.data)})}r={eventName:"rexlive:restoreStateEnded",buttonData:e.buttonData},Rexbuilder_Util_Editor.sendParentIframeMessage(r)},isJQuery:function(e){return e instanceof jQuery}}}(jQuery);
/**
 * Attaching handlers on events that creates blocks
 * of text, image, video ...
 * Contains utility function to handle the moving of blocks
 * between rows
 * @since 2.0.0
 */
var Rexbuilder_CreateBlocks=function(L,E){"use strict";function e(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();for(var e=L(e.target).parents(".rexpansive_section"),t=Rexbuilder_Util.getGalleryInstance(e),i=new IndexedGrid(12),r=t.getGridstackNodes(),a=0;a<r.length;a++)i.setGrid(r[a].x,r[a].y,r[a].width,r[a].height);var d,l=i.findHoles(),o=i.negativeGrid(),l=s(l,o);2<l.w&&2<l.h&&(n=l.w,d=l.h);var o=t.createNewBlock(t.settings.galleryLayout,n,d,"text")[0],l=(Rexbuilder_Live_Utilities.launchTooltips(),jQuery.Event("dblclick")),n=(l.target=o,l.offsetY=0,t.$element.trigger(l),Rexbuilder_Util.editedDataInfo.addBlockData(e.attr("data-rexlive-section-id"),o.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e),{eventName:"rexlive:edited",modelEdited:e.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(n)}function t(e){var t,i,r=!1,a=!1,d=void 0!==(e=e.settings.data_to_send).addBlockButton&&"true"==e.addBlockButton.toString()?(r=!0,e.$section):void 0!==e.addBlockElement&&"true"==e.addBlockElement.toString()?(a=!0,e.$section):""!=e.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"][data-rexlive-model-number="'+e.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionTarget.sectionID+'"]'),l=Rexbuilder_Util.getGalleryInstance(d),o=(r?(t=4,s=100,s=Math.ceil(s/l.properties.singleHeight)):a&&(t=(o=d.width()/Rexbuilder_Util.globalViewport.width*100)<=50?12:o<=75?6:4,s=Math.ceil(100/l.properties.singleHeight)),l.createNewBlock(l.settings.galleryLayout,t,s,"text")),n=o[0],s=(Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.editedDataInfo.addBlockData(e.sectionTarget.sectionID,n.getAttribute("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(d),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(d),void 0!==e.mousePosition&&(i=(u=l.properties.gridstackInstance).getCellFromPixel({left:e.mousePosition.x,top:e.mousePosition.y},!0),t=Math.max(0,i.x-Math.round(t/2)),i=Math.max(0,i.y-Math.round(s/2)),u.move(n,t=1/0!==t?t:0,i=1/0!==i?i:0)),null),u=(r?(s=jQuery.Event("rexlive:completeImportButton")).settings={$buttonWrapper:e.$buttonWrapper,$blockAdded:o}:a&&((s=jQuery.Event("rexlive:completeImportElement")).settings={$elementWrapper:e.$elementWrapper,$elementAdded:o,formFieldsString:e.formFieldsString}),s&&Rexbuilder_Util.$document.trigger(s),jQuery.Event("dblclick")),e=(u.target=n,u.offsetY=0,l.$element.trigger(u),{eventName:"rexlive:edited",modelEdited:d.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function i(e){for(var e=""!=(m=e.settings.data_to_send).sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+m.sectionTarget.sectionID+'"][data-rexlive-model-number="'+m.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+m.sectionTarget.sectionID+'"]'),t=Rexbuilder_Util.getGalleryInstance(e),i=m.media,r=t.properties.wrapWidth,a=t.properties.singleWidth,d=t.settings.cellHeightMasonry,l=0;l<i.length;l++){var o,n=i[l].media_info.id,s=i[l].display_info.src,u=i[l].display_info.size,c=i[l].display_info.width,p=i[l].display_info.height,b=1,x=1,b=r<c?6:Math.max(Math.round(6*c/r),1);x=Math.max(Math.round(p*b/c),1);s={idImage:n,urlImage:s,sizeImage:u,width:c,height:p,typeBGimage:"fixed"==t.settings.galleryLayout?(o=t.createNewBlock("fixed",b,x,"image"),"full"):(n=t.properties.gutter,x=b*a<c?p*b*a/c:p+n,x=Math.max(Math.round(x/d),1),o=t.createNewBlock("masonry",b,x,"image"),"natural"),active:"true"},u=(Rexbuilder_Dom_Util.updateImageBG(o.find(".grid-item-content"),s),o[0]);Rexbuilder_Util.editedDataInfo.addBlockData(m.sectionTarget.sectionID,u.getAttribute("data-rexbuilder-block-id"))}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(e);var m={eventName:"rexlive:edited",modelEdited:e.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(m)}function r(e){if(void 0!==(b=e.settings.data_to_send).typeVideo){var t=""!=b.sectionTarget.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+b.sectionTarget.sectionID+'"][data-rexlive-model-number="'+b.sectionTarget.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+b.sectionTarget.sectionID+'"]'),i=Rexbuilder_Util.getGalleryInstance(t),r=void 0===b.hasAudio?"":b.hasAudio,e=void 0===b.urlYoutube?"":b.urlYoutube,a=void 0===b.urlVimeo?"":b.urlVimeo,d=void 0===b.videoMp4?"":b.videoMp4,l="";if(0!=d.length?l="mp4":""!=a?l="vimeo":""!=e&&(l="youtube"),0==d.length){var o=(c=T(i,3,3,"video")).find(".grid-item-content"),n={mp4Data:{idMp4:"",linkMp4:"",width:"",height:""},vimeoUrl:a,youtubeUrl:e,audio:r,typeVideo:l},s=(Rexbuilder_Dom_Util.updateVideos(o,n),c[0]);Rexbuilder_Util.editedDataInfo.addBlockData(b.sectionTarget.sectionID,s.getAttribute("data-rexbuilder-block-id"))}else for(var u=0;u<d.length;u++){var c,o=(c=T(i,3,3,"video")).find(".grid-item-content"),p=d[u].videoUrl,n={mp4Data:{idMp4:d[u].videoID,linkMp4:p,width:d[u].width,height:d[u].height},vimeoUrl:"",youtubeUrl:"",audio:r,typeVideo:l},s=(Rexbuilder_Dom_Util.updateVideos(o,n),c[0]);Rexbuilder_Util.editedDataInfo.addBlockData(b.sectionTarget.sectionID,s.getAttribute("data-rexbuilder-block-id"))}}Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(t),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(t);var b={eventName:"rexlive:edited",modelEdited:t.hasClass("rex-model-section")};Rexbuilder_Util_Editor.sendParentIframeMessage(b)}function a(e){var t=d(e.settings.data_to_send),i=""!=e.settings.data_to_send.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"][data-rexlive-model-number="'+e.settings.data_to_send.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.settings.data_to_send.target.sectionID+'"]'),e=(Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.editedDataInfo.addBlockData(e.settings.data_to_send.target.sectionID,t.attr("data-rexbuilder-block-id")),Rexbuilder_Util.updateSectionStateLive(i),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(i),{eventName:"rexlive:edited",modelEdited:i.hasClass("rex-model-section")});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}function s(e,t){for(var i=0,r=0,a=0;a<e.length;a++){for(var d=t.indexOf(e[a]+1),l=d;l<t.length&&t[++l]+1==t[l+1];);if(!((i=t[l]-t[d]+1)<=2)){for(r=0;;)if(r++,-1===t.indexOf(t[d]+12*r)||-1===t.indexOf(t[l]+12*r))break;if(!(r<=2))break}}return{w:i,h:r}}function d(e,t,i){for(var r,a,d,l,o,n,s,i=void 0===i?(Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1,Rexbuilder_Dom_Util.lastSliderNumber):i,u=e.slides,c={id:e.id,settings:e.settings,numberSlides:u.length},t=(void 0===t?(a=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]'),r=Rexbuilder_Util.getGalleryInstance(a),(a=(r=void 0===e.target.rexID?T(r,12,4,"rexslider"):a.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]')).find(".text-wrap")).children().remove()):a=(r=t).find(".text-wrap"),r.children(".rexbuilder-block-data")),p=(r.addClass("block-has-slider"),r.find(".block-toolBox__editor-tools").find(".edit-block-content").addClass("tool-button--hide"),t.attr("data-type","rexslider"),d=a,c=c,tmpl.arg="slider",c=L(tmpl("tmpl-new-slider-wrap",{id:c.id,animation:!!c.settings.auto_start||0,dots:c.settings.dots?1:0,prevnext:c.settings.prev_next?1:0,numberSlides:c.numberSlides})),d.append(c[0]),c),b="true"==t.attr("data-overlay_block_color_active"),x="",m=(b&&(x=a.parents(".responsive-block-overlay").css("background-color")),e.settings.natural_blur),_=L(Rexbuilder_Live_Templates.getParsedTemplate("tmpl-new-slider-element")),v=L(Rexbuilder_Live_Templates.getParsedTemplate("slide-video")),g=L(Rexbuilder_Live_Templates.getParsedTemplate("slide-text")),f=0;f<u.length;f++){var h,R,k,U,y=_.clone(),D=u[f],I="none"!==D.slide_image_url,B=0!==D.slide_text.trim().length,S=""!==D.slide_video_type;if(b&&(R=h=void 0,h=y,R=x,R=L(Rexbuilder_Live_Templates.getParsedTemplate("slider-overlay",{overlayColor:R})),h.append(R.clone())),I&&(m?(h=y,R=void 0,I=(I=D).slide_image_url,R=function(e){var t=E.createElement("div");return t.className="natural-blur-effect blur-slide",t.style.backgroundImage="url("+e+")",t}(I),I=function(e){var t=E.createElement("img");return t.className="natural-slide",t.src=e,t}(I),h.addClass("natural-slide__wrap"),h.append(R),h.append(I)):(I=y,k=void 0,k=(U=D).slide_image_url,U=D.slide_image_id,I.css("background-image","url("+k+")"),I.attr("data-rex-slide-image-id",U))),B&&(I=k=void 0,k=y,I=(I=D).slide_text,k.append(g.clone()),k.find(".rex-slider-element-title").html(I)),y.appendTo(p[0]),""!=D.slide_url&&(tmpl.arg="link",U=L(tmpl("tmpl-new-slider-element-link",{url:D.slide_url})),y.children(".rex-slider-element-title").detach().appendTo(U[0]),y.append(U[0])),S){y.append(v.clone());var w=y.find(".rex-slider-video-wrapper"),B=D.slide_video_type,I="true"==D.slide_video_audio.toString();switch(B){case"mp4":n=w,s=D,tmpl.arg="video",n.prepend(tmpl("tmpl-video-mp4",{url:s.slide_videoMp4Url})),n.addClass("mp4-player"),n.children(".rex-video-wrap").attr("data-rex-video-mp4-id",s.slide_video);break;case"vimeo":n=w,s=D,tmpl.arg="video",n.prepend(tmpl("tmpl-video-vimeo",{url:s.slide_video})),n.addClass("vimeo-player");break;case"youtube":l=w,o=D,tmpl.arg="video",l.prepend(tmpl("tmpl-video-youtube",{url:o.slide_video,audio:!1})),l.addClass("youtube-player")}I&&w.append(tmpl("tmpl-video-toggle-audio"))}}return p.attr("data-rex-slider-number",i),RexSlider.initSlider(p),r}function T(e,t,i,r){r=void 0!==r?r:"";var a=e.properties.singleWidth;return a="fixed"==e.settings.galleryLayout?e.createNewBlock("fixed",t,i,r):(i=Math.max(Math.round(i*a/e.settings.cellHeightMasonry),1),e.createNewBlock("masonry",t,i,r))}function x(e){e=e.querySelector(".text-wrap"),l(e)}var l=function(e){if(e)for(var t,i=[].slice.call(e.getElementsByClassName("rex-button-wrapper")),r=i.length,a=0;a<r;a++)Rexbuilder_Util.hasClass(i[a],"rex-separate-button")?(i[a].setAttribute("data-rex-button-id",Rexbuilder_Util.createBlockID()),i[a].setAttribute("data-rex-button-number","1")):(t=i[a].getAttribute("data-rex-button-id"),t=[].slice.call(E.querySelectorAll('.rex-button-wrapper[data-rex-button-id="'+t+'"]')),i[a].setAttribute("data-rex-button-number",t.length+1),(t=i[a].querySelector(".rex-button-data"))&&t.removeAttribute("data-synchronize"))};return{init:function(){Rexbuilder_Util.$document.on("click",".add-new-block-text",e),Rexbuilder_Util.$document.on("rexlive:insert_new_text_block",t),Rexbuilder_Util.$document.on("rexlive:insert_image",i),Rexbuilder_Util.$document.on("rexlive:insert_video",r),Rexbuilder_Util.$document.on("rexlive:insert_new_slider",a)},createSlider:d,createCopyBlock:function(e){var t=e.parents(".grid-stack-row"),i=t.data().plugin_perfectGridGalleryEditor,t=t.data("gridstack"),r=e.parents(".rexpansive_section"),a=e.clone(!1),d=a.children(".rexbuilder-block-data"),l=(i._removeHandles(a),Rexbuilder_Util.createBlockID()),o=(i.properties.lastIDBlock=i.properties.lastIDBlock+1,"block_"+i.properties.sectionNumber+"_"+i.properties.lastIDBlock),d=(a.attr("data-rexbuilder-block-id",l),d.attr("data-rexbuilder_block_id",l),a.attr("id",o),d.attr("data-id",o),d.attr("id",o+"-builder-data"),x(a[0]),parseInt(a.attr("data-gs-width"))),n=parseInt(a.attr("data-gs-height")),s=a.find(".grid-item-content"),u=Rexbuilder_Util.destroyVideo(s,!1),c=(Rexbuilder_Live_Utilities.removeTextEditor(a),Rexbuilder_Live_Utilities.removeColorPicker(a),i._prepareElement(a[0]),i.unFocusElementEditing(a),{targetElement:a,hasToBeRemoved:!0,galleryInstance:i,blocksDisposition:L.extend(!0,{},i.properties.reverseDataGridDisposition)}),p=(t.addWidget(a[0],0,0,d,n,!0,1,500,1),parseInt(a.attr("data-gs-x"))),b=parseInt(a.attr("data-gs-y")),p=(t.batchUpdate(),t.update(a[0],p,b,d,n),t.commit(),a.find(".rexwpcf7-column-tools").remove(),a.find(".rex-element-wrapper").each(function(e,t){t=t.getAttribute("data-rex-element-id");Rexbuilder_Rexwpcf7_Editor.addMissingTools(t)}),Rexbuilder_Rexbutton.refreshNumbers(),Rexbuilder_Rexbutton.updateButtonListInPage(),i._createFirstReverseStack(),i.properties.numberBlocksVisibileOnGrid=i.properties.numberBlocksVisibileOnGrid+1,{targetElement:a,hasToBeRemoved:!1,galleryInstance:i,blocksDisposition:L.extend(!0,{},i.properties.reverseDataGridDisposition)}),b=(Rexbuilder_Util_Editor.pushAction(i.$element,"updateBlockVisibility",p,c),a.removeAttr("data-gs-auto-position"),""!=u&&s.addClass(u+"-player"),Rexbuilder_Util.startVideoPlugin(s),a.find(".text-wrap"));e.hasClass("block-has-slider")&&(d=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),b.children().remove(),n={sectionID:r.attr("data-rexlive-section-id"),modelNumber:void 0!==r.attr("data-rexlive-model-number")?r.attr("data-rexlive-model-number"):"",rexID:l},t=Rexbuilder_Live_Utilities.createSliderData(d),Rexbuilder_Live_Utilities.saveSliderOnDB(t,!0,o,n)),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(r),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(r);Rexbuilder_Util_Editor.sendParentIframeMessage({eventName:"rexlive:edited",modelEdited:!1})},insertHTMLBlock:function(e,t,i,r){var a,d,l,o,n,s,u,c,p,b,x,m;i=void 0===i||i,r=void 0===r||r,t.length<=0||(a=t.data().plugin_perfectGridGalleryEditor,d=t.data("gridstack"),l=t.parents(".rexpansive_section"),x=(o=e).children(".rexbuilder-block-data"),a._removeHandles(o),a.properties.lastIDBlock=a.properties.lastIDBlock+1,n="block_"+a.properties.sectionNumber+"_"+a.properties.lastIDBlock,""===(s=o.attr("data-rexbuilder-block-id"))&&(s=Rexbuilder_Util.createBlockID(),o.attr("data-rexbuilder-block-id",s),x.attr("data-rexbuilder_block_id",s)),""===o.attr("id")&&(o.attr("id",n),x.attr("data-id",n),x.attr("id",n+"-builder-data")),o.appendTo(t.eq(0)),Rexbuilder_Block.addToolboxClean(o.get(0)),x=parseInt(o.attr("data-gs-x")),t=parseInt(o.attr("data-gs-y")),m=parseInt(o.attr("data-gs-width")),u=parseInt(o.attr("data-gs-height")),c=o.find(".grid-item-content"),p=Rexbuilder_Util.destroyVideo(c,!1),Rexbuilder_Live_Utilities.removeTextEditor(o),Rexbuilder_Live_Utilities.removeColorPicker(o),a._prepareElement(o[0]),a.unFocusElementEditing(o),b={targetElement:o,hasToBeRemoved:!0,galleryInstance:a,blocksDisposition:L.extend(!0,{},a.properties.reverseDataGridDisposition)},r&&"masonry"===a.settings.galleryLayout&&(u=Math.floor(u*a.properties.singleWidth/a.properties.singleHeight)),d.addWidget(o[0],0,0,m,u,!0,1,500,1),i&&(d.batchUpdate(),d.update(o[0],x,t,m,u),d.commit()),a._updateElementsSizeViewers(),a._createFirstReverseStack(),a.properties.numberBlocksVisibileOnGrid=a.properties.numberBlocksVisibileOnGrid+1,r={targetElement:o,hasToBeRemoved:!1,galleryInstance:a,blocksDisposition:L.extend(!0,{},a.properties.reverseDataGridDisposition)},Rexbuilder_Util_Editor.pushAction(a.$element,"updateBlockVisibility",r,b),o.removeAttr("data-gs-auto-position"),""!=p&&c.addClass(p+"-player"),Rexbuilder_Util.startVideoPlugin(c),i=o.find(".text-wrap"),e.hasClass("block-has-slider")&&(x=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),i.children().remove(),t={sectionID:l.attr("data-rexlive-section-id"),modelNumber:void 0!==l.attr("data-rexlive-model-number")?l.attr("data-rexlive-model-number"):"",rexID:s},m=Rexbuilder_Live_Utilities.createSliderData(x),Rexbuilder_Live_Utilities.saveSliderOnDB(m,!0,n,t)),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(l),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(l))},moveBlockToOtherSection:function(e,t){var i=t.data().plugin_perfectGridGalleryEditor,r=t.data("gridstack"),a=e.parents(".rexpansive_section"),d=a.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor,l=d.settings.galleryLayout,o=i.settings.galleryLayout,n=e.clone(!1),s=n.children(".rexbuilder-block-data"),u=(i._removeHandles(n),Rexbuilder_Util.createBlockID()),c=(i.properties.lastIDBlock=i.properties.lastIDBlock+1,"block_"+i.properties.sectionNumber+"_"+i.properties.lastIDBlock),s=(n.attr("data-rexbuilder-block-id",u),s.attr("data-rexbuilder_block_id",u),n.attr("id",c),s.attr("data-id",c),s.attr("id",c+"-builder-data"),n.appendTo(t.eq(0)),parseInt(n.attr("data-gs-width"))),p=parseInt(n.attr("data-gs-height"));if(l!==o)switch(o){case"fixed":p=Math.floor(5*p/i.properties.singleHeight);break;case"masonry":p=Math.floor(p*d.properties.singleHeight/5)}var t=n.find(".grid-item-content"),l=Rexbuilder_Util.destroyVideo(t,!1),o=(Rexbuilder_Live_Utilities.removeTextEditor(n),Rexbuilder_Live_Utilities.removeColorPicker(n),i._prepareElement(n[0]),i.unFocusElementEditing(n),{targetElement:n,hasToBeRemoved:!0,galleryInstance:i,blocksDisposition:L.extend(!0,{},i.properties.reverseDataGridDisposition)}),b=(r.addWidget(n[0],0,0,s,p,!0,1,500,1),i._updateElementsSizeViewers(),parseInt(n.attr("data-gs-x"))),x=parseInt(n.attr("data-gs-y")),b=(r.batchUpdate(),r.update(n[0],b,x,s,p),r.commit(),i._createFirstReverseStack(),i.properties.numberBlocksVisibileOnGrid=i.properties.numberBlocksVisibileOnGrid+1,{targetElement:n,hasToBeRemoved:!1,galleryInstance:i,blocksDisposition:L.extend(!0,{},i.properties.reverseDataGridDisposition)}),x=(Rexbuilder_Util_Editor.pushAction(i.$element,"updateBlockVisibility",b,o),n.removeAttr("data-gs-auto-position"),""!=l&&t.addClass(l+"-player"),Rexbuilder_Util.startVideoPlugin(t),n.find(".text-wrap"));e.hasClass("block-has-slider")&&(s=e.find(".text-wrap").children('.rex-slider-wrap[data-rex-slider-active="true"]'),x.children().remove(),r={sectionID:a.attr("data-rexlive-section-id"),modelNumber:void 0!==a.attr("data-rexlive-model-number")?a.attr("data-rexlive-model-number"):"",rexID:u},b=Rexbuilder_Live_Utilities.createSliderData(s),Rexbuilder_Live_Utilities.saveSliderOnDB(b,!0,c,r)),Rexbuilder_Live_Utilities.launchTooltips(),Rexbuilder_Util.updateSectionStateLive(a),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(a)},sanitizeBlockContent:x}}(jQuery,(window,document));
var Rexbuilder_Dom_Util=function($){"use strict";var _updateSlider=function(e){var t=e.textWrap,i=e.sliderNumberToActive,a=(t.children('.rex-slider-wrap:not([data-rex-slider-number="'+e.sliderNumberToActive+'"])').each(function(e,t){var i=$(t);t.style.display="none",t.setAttribute("data-rex-slider-active",!1),RexSlider.destroySliderPlugins(i)}),t.children('.rex-slider-wrap[data-rex-slider-number="'+i+'"]'));0==a.length?void 0!==e.newSliderData&&(t=t.parents(".grid-stack-item"),Rexbuilder_CreateBlocks.createSlider(e.newSliderData,t,i)):(a[0].style.display="",RexSlider.initSlider(a))},_updateSliderStack=function(e){var t=""!=e.target.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"][data-rexlive-model-number="'+e.target.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.target.sectionID+'"]'),i=t.find('div [data-rexbuilder-block-id="'+e.target.rexID+'"]').find(".text-wrap"),a=i.find('.rex-slider-wrap[data-rex-slider-number="'+e.target.sliderNumber+'"]'),a={textWrap:i,sliderNumberToActive:parseInt(a.attr("data-rex-slider-number"))},i=(Rexbuilder_Dom_Util.lastSliderNumber=Rexbuilder_Dom_Util.lastSliderNumber+1,{textWrap:i,sliderNumberToActive:Rexbuilder_Dom_Util.lastSliderNumber,newSliderData:e});_updateSlider(i),Rexbuilder_Util_Editor.pushAction(t,"updateSlider",i,a)},_updateRow=function(e,t,i,a){var o=parseInt(a.gutter),r=parseInt(a.top),d=parseInt(a.right),l=parseInt(a.bottom),n=parseInt(a.left),o={gutter:isNaN(o)?20:o,top:isNaN(r)?20:r,right:isNaN(d)?20:d,bottom:isNaN(l)?20:l,left:isNaN(n)?20:n},r=o.gutter,d=o.top,l=o.right,n=o.bottom,o=o.left,s=void 0===a.layout?"fixed":a.layout,c=void 0!==a.full_height&&"masonry"!=s&&a.full_height,u=void 0===a.section_width?"100%":""+a.section_width,p=void 0===a.dimension?"full":a.dimension,_=!Rexbuilder_Util.editorMode&&a.collapse_grid,g=i.parent(),m=g[0],g=("full"==p?(g.removeClass("center-disposition"),g.addClass("full-disposition"),m.style.maxWidth="100%"):(g.removeClass("full-disposition"),g.addClass("center-disposition"),m.style.maxWidth=u),i.attr("data-separator",r),i.attr("data-row-separator-top",d),i.attr("data-row-separator-right",l),i.attr("data-row-separator-bottom",n),i.attr("data-row-separator-left",o),i.attr("data-layout",s),i.attr("data-full-height",c),t.attr("data-section_width",u),t.attr("data-dimension",p),t.attr("data-no-mobile-layout",a.noMobileLayoutSaved),t.attr("data-responsive_collapse",_),t.attr("data-layout",s),e.attr("data-rex-collapse-grid",_),i.data());void 0!==g&&void 0!==(m=g.plugin_perfectGridGalleryEditor)&&m.updateGridSettingsChangeLayout(a),Rexbuilder_Util.editorMode&&(Rexbuilder_Section_Editor.updateSectionDimensionTool(e,a),Rexbuilder_Section_Editor.updateSectionLayoutTool(e,a))},_updateImageBG=function(e,t){var i,a;e.hasClass("rexpansive_section")?(i=e.children(".section-data"),""==t.idImage||"true"!=t.active.toString()?(_resetImageSection(e,i),Rexbuilder_Util.editorMode||e.removeClass("section-w-image")):(_updateImageSection(e,i,t),Rexbuilder_Util.editorMode||e.addClass("section-w-image"))):e.hasClass("grid-item-content")&&(a=(i=e.parents(".grid-stack-item")).children(".rexbuilder-block-data"),""==t.idImage||"true"!=t.active.toString()?(_resetImageBlock(e,a,t),Rexbuilder_Util.editorMode||i.removeClass("block-w-image")):(Rexbuilder_Util.editorMode||i.addClass("block-w-image"),_updateImageBlock(e,a,t)))},_updateImageSection=function(e,t,i){"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundImageTool(e,i),i.idImage!=parseInt(t.attr("data-id_image_bg_section"))&&(e=e[0],Rexbuilder_Util.editorMode?e.style.backgroundImage="url("+i.urlImage+")":e.setAttribute("data-src",i.urlImage),e.setAttribute("data-background_image_width",i.width),e.setAttribute("data-background_image_height",i.height),t.attr("data-image_size",i.image_size),t.attr("data-id_image_bg_section",i.idImage),t.attr("data-image_bg_section",i.urlImage),t.attr("data-image_bg_section_active",i.active))},_updateBlockPhotoswipe=function(e){e.$elem.children(".rexbuilder-block-data").attr("data-photoswipe",e.photoswipe)},_updateImageBlock=function(e,t,i){t.attr("data-id_image_bg_block",i.idImage),t.attr("data-type_bg_block",i.typeBGimage),t.attr("data-image_bg_block",i.urlImage),t.attr("data-image_size",i.sizeImage),t.attr("data-image_bg_elem_active",i.active),"full"==i.typeBGimage?_addImageFullBgBlock(e,i):"natural"==i.typeBGimage&&_addImageNaturalBgBlock(e,i),/(youtube|vimeo|mp4)-player/.test(e.get(0).className)&&_moveImageBeforeVideo(e),e.attr("data-background_image_width",i.width),e.attr("data-background_image_height",i.height),"undefined"!=typeof Rexbuilder_Block_Editor&&(Rexbuilder_Block_Editor.updateBlockBackgroundImageTool(e,i),Rexbuilder_Block_Editor.updateBlockImagePositionTool(e,i))},_addImageNaturalBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".responsive-block-overlay"),o=(0==i.length?(o=document.createElement("div"),(i=$(o)).addClass("rex-image-wrapper"),i.insertBefore(a[0])):i.hasClass("full-image-background")&&(i.detach().insertBefore(a[0]),i.removeClass("full-image-background")),i[0]);i.addClass("natural-image-background"),Rexbuilder_Util.editorMode?o.style.backgroundImage="url("+t.urlImage+")":o.setAttribute("data-src",t.urlImage);a=e.parents(".grid-stack-item")[0];a&&(a.offsetWidth<t.width?i.addClass("small-width"):i.removeClass("small-width"))},_removeImageBlock=function(e){e=e.find(".rex-image-wrapper");0!=e.length&&e.remove()},_addImageFullBgBlock=function(e,t){var i=e.find(".rex-image-wrapper"),e=e.find(".responsive-block-overlay"),a=(0==i.length?(a=document.createElement("div"),(i=$(a)).addClass("rex-image-wrapper"),i.insertBefore(e[0])):i.hasClass("natural-image-background")&&(i.detach().insertBefore(e[0]),i.removeClass("natural-image-background"),i.removeClass("small-width")),i[0]);i.addClass("full-image-background"),Rexbuilder_Util.editorMode?a.style.backgroundImage="url("+t.urlImage+")":a.setAttribute("data-src",t.urlImage)},_resetImageSection=function(e,t){var i=e[0];t.attr("data-image_bg_section",""),t.attr("data-id_image_bg_section",""),t.data("data-image_size",""),i.setAttribute("data-background_image_width",""),i.setAttribute("data-background_image_height",""),i.style.backgroundImage="","undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.resetRowBackgroundImageTool(e)};function _resetImageBlock(e,t,i){t.attr("data-id_image_bg_block",""),t.attr("data-type_bg_block",""),t.attr("data-image_bg_block",""),t.attr("data-image_size",""),e.parents(".grid-stack-item").hasClass("block-has-slider")?t.attr("data-photoswipe",i.photoswipe):t.attr("data-photoswipe",""),t.attr("data-image_bg_elem_active",""),_removeImageBlock(e),e.attr("data-background_image_width",""),e.attr("data-background_image_height","");i=e.parents(".grid-stack-item").get(0);i&&Rexbuilder_Util.editorMode&&(t=i.querySelector(".deactivate-block-image-background"),$(t).parents(".tool-button--double-icon--wrap").addClass("tool-button--hide"),Rexbuilder_Util.addClass(i.querySelector(".rexlive-block-toolbox.bottom-tools .edit-block-image-position"),"tool-button--hide"),$(i).find(".rexlive-block-toolbox.top-tools .edit-block-image").parents(".tool-button--double-icon--wrap").removeClass("tool-button--hide"))}var _removeYoutubeVideo=function($target,removeFromDom){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio"),videoID,elemData,videoID,wasSlide,hadAudio,youTubeTemplate,$toggle;0!=$ytpWrapper.length&&(removeFromDom=void 0===removeFromDom||removeFromDom,$target.removeClass("youtube-player"),removeFromDom?(void 0!==$ytpWrapper.YTPGetPlayer()&&$ytpWrapper.YTPPlayerDestroy(),$ytpWrapper.remove(),0!=$toggleAudio.length&&$toggleAudio.remove()):(void 0!==$ytpWrapper.YTPGetPlayer()?(videoID=$ytpWrapper.YTPGetVideoID(),$ytpWrapper.YTPPlayerDestroy()):(elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),videoID=elemData.videoURL),wasSlide=0!=$ytpWrapper.parents(".rex-slider-element").length,hadAudio=0!=$toggleAudio.length,wasSlide&&(hadAudio=0!=$ytpWrapper.children(".rex-video-toggle-audio").length),$ytpWrapper.remove(),tmpl.arg="video",youTubeTemplate='<div class="rex-youtube-wrap" data-property="{videoURL:\''+videoID+"',containment:'self',startAt:0,mute:"+!1+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>',_insertBlockVideoToDOM($target,youTubeTemplate),hadAudio&&wasSlide&&($toggle=$('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'),$toggle.addClass("removing-toggle-audio"),$toggle.appendTo($target.children(".rex-youtube-wrap")[0]))))},_removeVimeoVideo=function(e,t){var i,a=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");0!=a.length&&(i=a.children("iframe")[0],t=void 0===t||t,e.removeClass("vimeo-player"),t?(VimeoVideo.removePlayer(i),a.remove(),0!=o.length&&o.remove()):((e=VimeoVideo.findVideo(i))&&e.unload(),0!=o.length&&o.addClass("removing-toggle-audio")))},_removeMp4Video=function(e,t){var i,a=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio");0!=a.length&&(t=void 0===t||t,(i=a.find("video")[0]).pause(),i.currentTime=0,e.removeClass("mp4-player"),t?(a.remove(),0!=o.length&&o.remove()):(a.addClass("removing-video-mp4"),0!=o.length&&o.addClass("removing-toggle-audio")))},_addMp4Video=function(e,t,i){var a=e.children(".rex-video-wrap"),o=e.children(".rex-video-toggle-audio"),r=a.find("source"),r=Rexbuilder_Util.editorMode?r.attr("src"):r.attr("data-src");0!=a.length&&r!=t.linkMp4||0==a.length?(_removeMp4Video(e,!0),e.addClass("mp4-player"),tmpl.arg="video",r='<div class="rex-video-wrap intrinsic-ignore" data-rex-video-width="'+t.width+'" data-rex-video-height="'+t.height+'"><video width="'+t.width+'" height="'+t.height+'" class="rex-video-container" preload autoplay loop muted><source type="video/mp4" src="'+t.linkMp4+'"></video></div>',e.is("section")?(t="",t=Rexbuilder_Util.editorMode?".section-toolBox":".section-data",e.children(t).after(r)):_insertBlockVideoToDOM(e,r)):0!=a.length&&(a.removeClass("removing-video-mp4"),Rexbuilder_Util.editorMode)&&a.find("video")[0].play(),0==o.length?i&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):i?o.removeClass("removing-toggle-audio"):o.remove()},_addYoutubeVideo=function($target,urlYoutube,hasAudio){var $ytpWrapper=$target.children(".rex-youtube-wrap"),$toggleAudio=$target.children(".rex-video-toggle-audio"),elemData,activeUrl,videoID,urlID,youTubeTemplate;0!=$ytpWrapper.length?(elemData=jQuery.extend(!0,{},eval("("+$ytpWrapper.attr("data-property")+")")),activeUrl=elemData.videoURL,videoID=Rexbuilder_Util.getYoutubeID(activeUrl),urlID=Rexbuilder_Util.getYoutubeID(urlYoutube),videoID!=urlID?void 0===$ytpWrapper.YTPGetPlayer()?($ytpWrapper.attr("data-property","{videoURL:'"+urlYoutube+"',containment:'self',startAt:0,mute:'"+!hasAudio+"',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"),$ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer()):(_removeYoutubeVideo($target,!0),setTimeout(function(){tmpl.arg="video";_insertBlockVideoToDOM($target,'<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>'),$target.children(".rex-youtube-wrap").YTPlayer();var e=$target.children(".rex-video-toggle-audio");0==e.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?e.removeClass("removing-toggle-audio"):e.remove()},1e3,$target,urlYoutube,hasAudio)):void 0===$ytpWrapper.YTPGetPlayer()&&($ytpWrapper.addClass("youtube-player-launching"),$ytpWrapper.YTPlayer())):(tmpl.arg="video",youTubeTemplate='<div class="rex-youtube-wrap" data-property="{videoURL:\''+urlYoutube+"',containment:'self',startAt:0,mute:"+!hasAudio+',autoPlay:true,loop:true,opacity:1,showControls:false, showYTLogo:false}"></div>',_insertBlockVideoToDOM($target,youTubeTemplate),$target.children(".rex-youtube-wrap").YTPlayer()),$target.addClass("youtube-player"),0==$toggleAudio.length?hasAudio&&$target.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):hasAudio?$toggleAudio.removeClass("removing-toggle-audio"):$toggleAudio.remove()},_addVimeoVideo=function(e,t,i){var a=e.children(".rex-video-vimeo-wrap"),o=e.children(".rex-video-toggle-audio");e.addClass("vimeo-player"),""==t?_removeVimeoVideo(e,!0):0!=a.length&&a.children("iframe").attr("src").split("?")[0]!=t||0==a.length?(_removeVimeoVideo(e,!0),tmpl.arg="video",_insertBlockVideoToDOM(e,'<div class="rex-video-vimeo-wrap rex-video-vimeo-wrap--block"><iframe src="'+(t+="?autoplay=1&loop=1&title=0&byline=0&portrait=0&autopause=0&muted="+("true"==i.toString()?"0":"1")+"&background=1")+'" width="640" height="360" frameborder="0" allow="autoplay"  webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'),t=e.children(".rex-video-vimeo-wrap").find("iframe")[0],VimeoVideo.addPlayer("1",t)):0!=a.length&&null!=(t=VimeoVideo.findVideo(a.find("iframe")[0]))&&t.play(),0==o.length?i&&e.append('<div class="rex-video-toggle-audio"><div class="rex-video-toggle-audio-shadow"></div></div>'):i?o.removeClass("removing-toggle-audio"):o.remove()},_updateBlockVideoTools=function(e,t){var i=e.find(".rexlive-block-toolbox.top-tools .edit-block-video-background"),e=e.find(".rexlive-block-toolbox.bottom-tools .edit-block-video-background");t?(i.parent().removeClass("tool-button--hide"),e.parent().addClass("tool-button--hide")):(i.parent().addClass("tool-button--hide"),e.parent().removeClass("tool-button--hide"))},_updateVideos=function(e,t){var i,a,o,r="";if(e.hasClass("rexpansive_section"))i=e.children(".section-data"),r="section";else if(e.hasClass("grid-item-content"))a=(o=e.parents(".grid-stack-item")).children(".rexbuilder-block-data"),r="block";else{if(!e.hasClass("rex-slider-video-wrapper"))return;r="slide"}var d=t.typeVideo;""==d?(_removeMp4Video(e,!0),_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0)):"mp4"==d?(_removeYoutubeVideo(e,!0),_removeVimeoVideo(e,!0),_addMp4Video(e,t.mp4Data,t.audio)):"vimeo"==d?(_removeYoutubeVideo(e,!0),_removeMp4Video(e,!0),_addVimeoVideo(e,t.vimeoUrl,t.audio)):"youtube"==d&&(_removeVimeoVideo(e,!0),_removeMp4Video(e,!0),_addYoutubeVideo(e,t.youtubeUrl,t.audio)),"section"==r?(i.attr("data-video_mp4_url",t.mp4Data.linkMp4),i.attr("data-video_bg_id_section",t.mp4Data.idMp4),i.attr("data-video_bg_width_section",t.mp4Data.width),i.attr("data-video_bg_height_section",t.mp4Data.height),i.attr("data-video_bg_url_section",t.youtubeUrl),i.attr("data-video_bg_url_vimeo_section",t.vimeoUrl),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundVideo(e,t),"mp4"==d?e.addClass("section-w-html-video"):e.removeClass("section-w-html-video")):"block"==r&&(a.attr("data-video_mp4_url",t.mp4Data.linkMp4),a.attr("data-video_bg_id",t.mp4Data.idMp4),a.attr("data-video_bg_width",t.mp4Data.width),a.attr("data-video_bg_height",t.mp4Data.height),a.attr("data-video_bg_url",t.youtubeUrl),a.attr("data-video_bg_url_vimeo",t.vimeoUrl),a.attr("data-video_has_audio",t.audio),"mp4"==d?o.addClass("block-w-html-video"):o.removeClass("block-w-html-video"),Rexbuilder_Util.editorMode)&&_updateBlockVideoTools(o,""===d)},_updateBlockPaddings=function(e,t){e.children(".rexbuilder-block-data").attr("data-block_padding",Rexbuilder_Util.paddingsToString(t));var e=e.find(".text-wrap");0!=e.length&&((e=e[0]).style.paddingTop=""+t.top+t.type,e.style.paddingRight=""+t.right+t.type,e.style.paddingBottom=""+t.bottom+t.type,e.style.paddingLeft=""+t.left+t.type)},_updateBlocksLayout=function(e){var t,i,a,o,r,d,l=e.blocks,n=e.gridstackInstance;if(!(l.length<=0)){e=$(e.blocks[0].elem).parents(".rexpansive_section");for(Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.batchUpdate(),t=0;t<l.length;t++)i=l[t].x,a=l[t].y,o=l[t].w,r=l[t].h,d=l[t].elem,n.update(d,i,a,o,r);Rexbuilder_Util_Editor.updatingGridstack||n.grid&&n.commit(),setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e[0]),1500)}},_collapseGrid=function(e,t,i,a){Rexbuilder_Util_Editor.updatingCollapsedGrid=!0,t?e.collapseElementsProperties():e.removeCollapseElementsProperties(),e.updateGridLayoutCollapse(a),_updateBlocksLayout(i),setTimeout(function(){Rexbuilder_Util_Editor.updatingCollapsedGrid=!1,e._fixImagesDimension(),e._createFirstReverseStack(),Rexbuilder_Util.editorMode&&e._updateElementsSizeViewers()},200)},updateRemovingBlock=function(e,t,i){t?(i.removeBlock(e.get(0)),Rexbuilder_Util.stopBlockVideos(e)):(i.reAddBlock(e),Rexbuilder_Util.playBlockVideos(e)),0==i.properties.numberBlocksVisibileOnGrid?e.parents(".rexpansive_section").addClass("empty-section"):e.parents(".rexpansive_section").removeClass("empty-section")},_updateSectionName=function(e,t){var i;null!==t&&(e.attr("data-rexlive-section-name",t),""!==t)&&void 0!==t&&(i=t.replace(/\s/gm,""),Rex_Navigator.updateNavigatorItem(e,i,t))},_updateSectionNavLabel=function(e,t){e.children(".section-data").attr("data-section_nav_label",t)},_fixSectionDomOrder=function(e,t,i){for(var a,o,r,d=[],l=[].slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")),n=l.length,s=0;s<n;s++){var c=$(l[s]),c={rexID:l[s].getAttribute("data-rexlive-section-id"),section_is_model:Rexbuilder_Util.hasClass(l[s],"rex-model-section"),section_model_id:l[s].getAttribute("data-rexlive-model-id"),section_model_number:l[s].getAttribute("data-rexlive-model-number"),$section:c.detach()};d.push(c)}for(o=0;o<e.length;o++){for(r=0;r<d.length;r++)if(d[r].rexID==e[o].rexID){if(!d[r].section_is_model){a=d[r].$section;break}if(d[r].section_model_number==e[o].modelNumber){a=d[r].$section;break}}Rexbuilder_Util.$rexContainer.append(a),d.splice(r,1)}for(r=0;r<d.length;r++)Rexbuilder_Util.$rexContainer.append(d[r].$section);"default"==Rexbuilder_Util.activeLayout&&(Rexbuilder_Util.updateDefaultLayoutStateDOMOrder(e),void 0!==i)&&Rexbuilder_Util.updateSectionOrderCustomLayouts(i,e)};function _enablePhotoswipeAllBlocksSection(e){for(var t,i,a,o,r,d=e.get(0).querySelectorAll(".grid-stack-item:not(.removing_block)"),l=d.length,n=0;n<l;n++)i=(t=d[n]).querySelector(".rexbuilder-block-data"),a=Rexbuilder_Util.hasClass(t,"block-has-slider"),o=0!==Rexbuilder_Util_Editor.getTextWrapLength($(t)),r=""!==i.getAttribute("data-image_bg_block"),t.setAttribute("data-rexlive-element-edited",!0),(r&&!o||a)&&i.setAttribute("data-photoswipe",!0)}function _removePhotoswipeAllBlocksSection(e){for(var t,i=e.get(0).querySelectorAll(".grid-stack-item:not(.removing_block)"),a=i.length,o=0;o<a;o++)t=i[o].querySelector(".rexbuilder-block-data"),i[o].setAttribute("data-rexlive-element-edited",!0),t.setAttribute("data-photoswipe",!1)}var _updateSectionPhotoswipe=function(e){for(var t=0;t<e.length;t++)e[t].$data.attr("data-photoswipe",e[t].photoswipe)},_updateCustomClasses=function(e,t){for(var i,a="",o=(a=(a=void 0===(a=e.is("section")?(i=e.children(".section-data")).attr("data-custom_classes"):(i=e.children(".rexbuilder-block-data")).attr("data-block_custom_class"))?"":a).trim()).split(/\s+/),r=0;r<o.length;r++)Rexbuilder_Util_Editor.removeCustomClass(o[r],i),e.removeClass(o[r]);for(r=0;r<t.length;r++)Rexbuilder_Util_Editor.addCustomClass(t[r],i),e.addClass(t[r])},_updateBlockUrl=function(e,t){e.children(".rexbuilder-block-data").attr("data-linkurl",t)},_updateFlexPostition=function(e,t){var i;e.hasClass("block-has-slider")||(e.removeClass("rex-flex-top rex-flex-middle rex-flex-bottom rex-flex-left rex-flex-center rex-flex-right"),(i=e.children(".rexbuilder-block-data")).attr("data-block_flex_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-"+t.x),e.addClass("rex-flex-"+t.y),i.attr("data-block_flex_position",t.x+" "+t.y)))},_updateImageFlexPostition=function(e,t){var i;e.hasClass("block-has-slider")||(e.removeClass("rex-flex-img-top rex-flex-img-middle rex-flex-img-bottom rex-flex-img-left rex-flex-img-center rex-flex-img-right"),(i=e.children(".rexbuilder-block-data")).attr("data-block_flex_img_position",""),""!=t.x&&""!=t.y&&(e.addClass("rex-flex-img-"+t.x),e.addClass("rex-flex-img-"+t.y),i.attr("data-block_flex_img_position",t.x+" "+t.y)))},_updateCustomCSS=function(e){var t=document.getElementById("rexpansive-builder-style-inline-css");t&&(t.textContent=e)},_updateSectionVideoBackground=function(e,t){_updateVideos(e,t)};function _updateSectionBackgroundColorLive(e,t){var i=""!=e.modelNumber,a=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]');_setBackgroundColor(a=i?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):a,t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(a,t)}function updateSectionBackgroundColor(e,t){var i=e.children(".section-data"),a=t.color,t=t.active;_setBackgroundColor(e,a),i.attr("data-color_bg_section",a),i.attr("data-color_bg_section_active",t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundColorTool(e,a)}var _updateSectionBackgroundGradient=function(e,t){var i=e.children(".section-data"),a=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);e[0].style.background=a,i.attr("data-color_bg_section",t.color),i.attr("data-color_bg_section_active",t.active),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowBackgroundGradientTool(e,a)},_updateBlockBackgroundColorLive=function(e,t){var i,a;a=(i=""!=e.modelNumber?(i='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',a='div[data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content',Rexbuilder_Util.$rexContainer.find(i).find(a)):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .grid-item-content'))[0],-1!==getComputedStyle(a).background.indexOf("linear-gradient")&&(a.style.background=""),a.style.backgroundColor=t,"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorToolLive(i,t)},_updateBlockBackgroundColor=function(e){var t=e.$elem,i=t.find(".grid-item-content")[0],a=t.children(".rexbuilder-block-data");-1!==getComputedStyle(i).background.indexOf("linear-gradient")&&(i.style.background=""),i.style.backgroundColor=e.color,a.attr("data-color_bg_block",e.color),a.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundColorTool(t,e.color,e.active)},_updateBlockBackgroundGradient=function(e){var t=e.$elem,i=t.find(".grid-item-content")[0],a=t.children(".rexbuilder-block-data"),o=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);i.style.background=o,a.attr("data-color_bg_block",e.color),a.attr("data-color_bg_elem_active",e.active),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockBackgroundGradientTool(t,o)};function updateSectionOverlayColorLive(e,t){e=""!==e.modelNumber?Rexbuilder_Util.$rexContainer.find('.rexpansive_section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('.rexpansive_section[data-rexlive-section-id="'+e.sectionID+'"]');_setBackgroundColor(e.children(".responsive-overlay"),t),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorToolLive(e,t)}var updateSectionOverlay=function(e,t){var i=e.children(".responsive-overlay"),a=e.children(".section-data");_setBackgroundColor(i,t.color),a.attr("data-row_overlay_color",t.color),a.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?i.addClass("rex-active-overlay"):i.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayColorTool(e,t)},_updateSectionOverlayGradient=function(e,t){var i=e.children(".section-data"),a=e.children(".responsive-overlay"),o=a[0],r=Rexbuilder_Util_Editor.getGradientSafeValue(t.color);o.style.background=r,i.attr("data-row_overlay_color",t.color),i.attr("data-row_overlay_active",t.active),"true"==t.active.toString()?a.addClass("rex-active-overlay"):a.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Section_Editor&&Rexbuilder_Section_Editor.updateRowOverlayGradientTool(e,{active:t.active,color:r})},_updateBlockOverlayColorLive=function(e,t){var i,a;""!=e.modelNumber?(i='section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]',a='div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay',-1!==(i=Rexbuilder_Util.$rexContainer.find(i).find(a)).css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t)):(i=Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]').find('div [data-rexbuilder-block-id="'+e.rexID+'"] .responsive-block-overlay'),a=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .slider-overlay'),-1!==i.css("background").indexOf("linear-gradient")&&i.css("background",""),i.css("background-color",t),0===a.length?(e=Rexbuilder_Util.$rexContainer.find('[data-rexbuilder-block-id="'+e.rexID+'"] .rex-slider-element'),""!==t&&e.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')):a.css("background-color",t)),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorToolLive(i,t)},_updateBlockOverlay=function(e){var t=e.color,i=e.active,e=e.$elem,a=e.children(".rexbuilder-block-data"),o=e.find(".responsive-block-overlay"),r=o[0],d=o.find(".slider-overlay");-1!==getComputedStyle(r).background.indexOf("linear-gradient")&&(r.style.background=""),r.style.backgroundColor=t,0===d.length?(r=e.find(".rex-slider-element"),""!==t&&r.append('<div class="slider-overlay" style="background-color:'+t+'"></div>')):d.css("background-color",t),a.attr("data-overlay_block_color",t),a.attr("data-overlay_block_color_active",i),"true"==i.toString()?o.addClass("rex-active-overlay"):o.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayColorTool(e,t,i)},_updateBlockOverlayGradient=function(e){var t=e.color,i=e.active,a=e.$elem,o=a.children(".rexbuilder-block-data"),r=a.find(".responsive-block-overlay"),e=Rexbuilder_Util_Editor.getGradientSafeValue(e.color);r[0].style.background=e,o.attr("data-overlay_block_color",t),o.attr("data-overlay_block_color_active",i),"true"==i.toString()?r.addClass("rex-active-overlay"):r.removeClass("rex-active-overlay"),"undefined"!=typeof Rexbuilder_Block_Editor&&Rexbuilder_Block_Editor.updateBlockOverlayGradientTool(a,e)},_updateSectionBackgroundImage=function(e,t){_updateImageBG(e,t)},_updateSectionVisibility=function(e,t,i,a){t?("default"==Rexbuilder_Util.activeLayout&&(e.removeClass("removing_section"),Rexbuilder_Util.addSectionID(e.attr("data-rexlive-section-id"))),e.removeClass("rex-hide-section"),Rexbuilder_Util.playPluginsSection(e)):(Rexbuilder_Util.stopPluginsSection(e),"default"==Rexbuilder_Util.activeLayout&&(e.addClass("removing_section"),Rexbuilder_Util.removeSectionID(e.attr("data-rexlive-section-id"))),e.addClass("rex-hide-section")),void 0!==i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),void 0!==a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},_updateModelVisibility=function(e){var t=e.$sectionToHide,i=e.$sectionToShow,a=e.layoutsOrder,e=e.defaultStateSections;_updateSectionVisibility(t,!1),_updateSectionVisibility(i,!0),void 0!==a&&null!=a&&Rexbuilder_Util.updatePageCustomizationsDomOrder(a),void 0!==e&&null!=e&&Rexbuilder_Util.updateDefaultLayoutState({pageData:e})},_updateSectionBecameModel=function(e){var t=e.$section,i=e.layoutsOrder,a=e.defaultStateSections;e.isModel?(t.addClass("rex-model-section"),t.addClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),0==t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&t.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==t.find(".rexpansive-block-section-toolbox").length&&t.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>')):(t.removeClass("rex-model-section"),t.removeClass("rexlive-block-grid-editing"),t.attr("data-rexlive-model-editing","false"),t.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),t.find(".rexpansive-block-section-toolbox").remove()),t.attr("data-rexlive-model-id",e.modelID),t.attr("data-rexlive-model-name",e.modelName),t.attr("data-rexlive-model-number",e.modelNumber),t.attr("data-rexlive-section-id",e.sectionID),void 0!==i&&null!=i&&Rexbuilder_Util.updatePageCustomizationsDomOrder(i),void 0!==a&&null!=a&&Rexbuilder_Util.updateDefaultLayoutState({pageData:a})},updateLockEditModel=function(e,t){var i=e.parents(".rexpansive_section");t?(i.addClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","false"),0==i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").length&&i.find(".grid-stack-row").parent().prepend('<div class="rexpansive-block-grid"></div>'),0==i.find(".rexpansive-block-section-toolbox").length&&i.find(".section-toolBox").parent().prepend('<div class="rexpansive-block-section-toolbox"></div>'),e.removeClass("unlocked"),e.addClass("locked")):(e.addClass("unlocked"),e.removeClass("locked"),i.removeClass("rexlive-block-grid-editing"),i.attr("data-rexlive-model-editing","true"),i.find(".grid-stack-row").parent().children(".rexpansive-block-grid").remove(),i.find(".rexpansive-block-section-toolbox").remove())},_fixModelNumbers=function(){var e=[];if(Rexbuilder_Util.rexContainer)for(var t=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),i=t.length,a=0;a<i;a++)if(Rexbuilder_Util.hasClass(t[a],"rex-model-section")){for(var o,r=t[a].getAttribute("data-rexlive-model-id"),d=!1,l=0;l<e.length;l++)e[l].id==r&&(e[l].number=e[l].number+1,t[a].setAttribute("data-rexlive-model-number",e[l].number),d=!0);d||(e.push(o={id:r,number:1}),t[a].setAttribute("data-rexlive-model-number",o.number))}},_updateSectionWidthData=function(e,t){e=e.children(".section-data");e.attr("data-section_width",t.sectionWidth),e.attr("data-dimension",t.widthType)},_updateSectionWidth=function(e,t){var i=t.section_width,a=t.dimension,o=t.galleryInstance;_updateSectionWidthData(e,{sectionWidth:i,widthType:a}),o.updateSectionWidthWrap(i),Rexbuilder_Util_Editor.updatingGridstack=!0,o.batchGridstack(),o.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),o.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateRowDistancesData=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-separator",t.gutter),e.attr("data-row-separator-top",t.top),e.attr("data-row-separator-right",t.right),e.attr("data-row-separator-bottom",t.bottom),e.attr("data-row-separator-left",t.left),i.attr("data-block_distance",t.gutter),i.attr("data-row_separator_top",t.top),i.attr("data-row_separator_right",t.right),i.attr("data-row_separator_bottom",t.bottom),i.attr("data-row_separator_left",t.left)},_updateRowDistances=function(e,t){var i=t.rowDistances,e=e.find(".grid-stack-row"),a=t.galleryInstance;_updateRowDistancesData(e,i),a.updateRowDistances(i),Rexbuilder_Util_Editor.updatingGridstack=!0,a.batchGridstack(),a.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),a.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateSectionMarginsData=function(e,t){e=e[0];e.style.marginTop=t.top+"px",e.style.marginRight=t.right+"px",e.style.marginBottom=t.bottom+"px",e.style.marginLeft=t.left+"px"},_updateSectionMargins=function(e,t){_updateSectionMarginsData(e,t.marginsSection);e=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,e.batchGridstack(),e.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),e.commitGridstack(),Rexbuilder_Util_Editor.updatingGridstack=!1},_updateGridLayoutDomProperties=function(e,t){var i=e.parents(".rexpansive_section").children(".section-data");e.attr("data-layout",t),e.attr("data-full-height",!1),i.attr("data-layout",t),i.attr("data-full_height",!1)},_updateSectionLayout=function(e,t){_updateGridLayoutDomProperties(e,t.gridLayout);e=t.galleryInstance;Rexbuilder_Util_Editor.updatingGridstack=!0,e.settings.galleryLayout=t.gridLayout,e.batchGridstack(),e.updateFloatingElementsGridstack(),e.updateGridstackGridSizes(t.singleWidth,t.singleHeight),_updateBlocksLayout(t.blocksDisposition),e.commitGridstack(),e._updateElementsSizeViewers(),Rexbuilder_Section_Editor.updateSectionLayoutTool(e.$section,{layout:t.gridLayout}),Rexbuilder_Util_Editor.updatingGridstack=!1};function updateSectionFullHeight(e){e.galleryInstance.updateFullHeight("true"==e.fullHeight.toString())}function _updateBulkSection(e,t,i){for(var a,o=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]'),r=i.length,d=0;d<r;d++)if("self"===i[d].name){a=i[d].props;break}var l,n=!1,s=!1,c=!1,u=!1,p=!1,_=!1,g=!1,m=o.find(".perfect-grid-gallery").data().plugin_perfectGridGalleryEditor;for(l in t)if(t[l])switch(l){case"section_name":_updateSectionName(o,a.section_name);break;case"section_nav_label":_updateSectionNavLabel(o,a.section_nav_label);break;case"color_bg_section":case"color_bg_section_active":n||(updateSectionBackgroundColor(o,{color:a.color_bg_section,active:a.color_bg_section_active}),n=!0);break;case"image_bg_section_active":case"image_bg_section":case"image_width":case"image_height":case"id_image_bg_section":case"image_size":s||(_updateSectionBackgroundImage(o,{width:a.image_width,height:a.image_height,image_size:a.image_size,idImage:a.id_image_bg_section,urlImage:a.image_bg_section,active:a.image_bg_section_active}),s=!0);break;case"video_bg_id_section":case"video_mp4_url":case"video_bg_width_section":case"video_bg_height_section":c||(_updateSectionVideoBackground(o,{typeVideo:"mp4",mp4Data:{linkMp4:a.video_mp4_url,idMp4:a.video_bg_id_section,width:a.video_bg_width_section,height:a.video_bg_height_section},youtubeUrl:"",vimeoUrl:""}),c=!0);break;case"video_bg_url_section":_updateSectionVideoBackground(o,{typeVideo:"youtube",mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:a.video_bg_url_section,vimeoUrl:""});break;case"video_bg_url_vimeo_section":_updateSectionVideoBackground(o,{typeVideo:"vimeo",mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:"",vimeoUrl:a.video_bg_url_vimeo_section});break;case"block_distance":case"row_separator_top":case"row_separator_bottom":case"row_separator_right":case"row_separator_left":u||(_updateRowDistances(o,{rowDistances:{gutter:a.block_distance,top:a.row_separator_top,right:a.row_separator_right,bottom:a.row_separator_bottom,left:a.row_separator_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),u=!0);break;case"margin":case"row_margin_top":case"row_margin_bottom":case"row_margin_right":case"row_margin_left":p||(_updateSectionMargins(o,{marginsSection:{top:a.row_margin_top,bottom:a.row_margin_bottom,right:a.row_margin_right,left:a.row_margin_left},galleryInstance:m,singleWidth:m.properties.singleWidth,singleHeight:m.properties.singleHeight,blocksDisposition:$.extend(!0,{},m.createActionDataMoveBlocksGrid())}),p=!0);break;case"custom_classes":var b=a.custom_classes.trim().split(/\s+/);_updateCustomClasses(o,b),g=!0;break;case"row_overlay_color":case"row_overlay_active":_||(updateSectionOverlay(o,{color:a.row_overlay_color,active:a.row_overlay_active}),_=!0)}g&&"default"!==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<768&&-1!==a.custom_classes.indexOf("rex-block-grid")&&o.find(".collapse-grid").trigger("click")}function updateBulkBlock(e,t,i){for(var a,o,r=(""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]')).find('div [data-rexbuilder-block-id="'+e.rexID+'"]'),d=r.get(0),l=d.querySelector(".rexbuilder-block-data"),n=r.parents(".rexpansive_section"),s=n.children(".section-data"),c=n.find(".grid-stack-row").data("plugin_perfectGridGalleryEditor"),u=i.length,p=0;p<u;p++)if(e.rexID===i[p].name){a=i[p].props;break}for(p=0;p<u;p++)if("self"===i[p].name){o=i[p].props;break}var n=parseInt(a.gs_width),g=parseInt(a.gs_height),m=parseInt(a.gs_x),b=parseInt(a.gs_y);if(Rexbuilder_Util.isMobile()&&"fixed"===o.layout)g=Math.floor(a.gs_height*c.properties.singleWidth/5),b=Math.floor(a.gs_y*c.properties.singleWidth/5);else if(o.layout!==s.attr("data-layout"))switch(s.attr("data-layout")){case"fixed":g=Math.floor(5*a.gs_height/c.properties.singleWidth),b=Math.floor(5*a.gs_y/c.properties.singleWidth);break;case"masonry":g=Math.floor(a.gs_height*c.properties.singleWidth/5),b=Math.floor(a.gs_y*c.properties.singleWidth/5)}l.setAttribute("data-gs_width",n),l.setAttribute("data-gs_height",g),l.setAttribute("data-gs_start_h",g),l.setAttribute("data-gs_x",m),l.setAttribute("data-gs_y",b),l.setAttribute("data-element_real_fluid",a.element_real_fluid),c.properties.gridstackInstance.update(d,m,b,n,g);var v,k=!1,x=!1,h=!1,f=!1;for(v in t)if(t[v])switch(v){case"color_bg_block":case"color_bg_block_active":k||(_updateBlockBackgroundColor({$elem:r,color:a.color_bg_block,active:a.color_bg_block_active}),k=!0);break;case"image_bg_url":case"image_width":case"image_height":case"id_image_bg":case"image_size":case"image_bg_elem_active":case"type_bg_image":x||(_updateImageBG(r.find(".grid-item-content"),{width:a.image_width,height:a.image_height,sizeImage:a.image_size,idImage:a.id_image_bg,urlImage:a.image_bg_url,active:a.image_bg_elem_active,typeBGimage:a.type_bg_image}),x=!0);break;case"video_bg_id":case"video_bg_width":case"video_bg_height":case"video_mp4_url":case"video_bg_url_youtube":case"video_bg_url_vimeo":case"video_has_audio":if(!f){var y=null;if(""!==a.video_mp4_url?y="mp4":""!==a.video_bg_url_youtube?y="youtube":""!==a.video_bg_url_vimeo&&(y="vimeo"),y){var B={typeVideo:y,mp4Data:{linkMp4:"",idMp4:"",width:"",height:""},youtubeUrl:"",vimeoUrl:"",audio:"true"===a.video_has_audio};switch(y){case"mp4":B=_.assign(B,{mp4Data:{linkMp4:a.video_mp4_url,idMp4:a.video_bg_id,width:a.video_bg_width,height:a.video_bg_height}});break;case"youtube":B=_.assign(B,{youtubeUrl:a.video_bg_url_youtube});break;case"vimeo":B=_.assign(B,{vimeoUrl:a.video_bg_url_vimeo})}_updateVideos(r.find(".grid-item-content"),B),f=!0}}break;case"photoswipe":_updateBlockPhotoswipe({$elem:r,photoswipe:a.photoswipe});break;case"block_custom_class":y=a.block_custom_class.trim().split(/\s+/);_updateCustomClasses(r,y);break;case"block_padding":var S=-1!==a.block_padding.indexOf("px")?"px":-1!==a.block_padding.indexOf("%")?"%":"",w=a.block_padding.replace(/px|%/g,"").split(";");_updateBlockPaddings(r,{top:w[0],right:w[1],bottom:w[2],left:w[3],type:S});break;case"overlay_block_color":case"overlay_block_color_active":h||(_updateBlockOverlay({$elem:r,color:a.overlay_block_color,active:a.overlay_block_color_active}),h=!0);break;case"linkurl":_updateBlockUrl(r,a.linkurl);break;case"block_flex_position":var C=a.block_flex_position.split(" ");_updateFlexPostition(r,{x:C[0],y:C[1]});break;case"block_flex_img_position":C=a.block_flex_img_position.split(" ");_updateImageFlexPostition(r,{x:C[0],y:C[1]})}}function htmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}var _updateRexButton=function(e){Rexbuilder_Rexbutton.updateButton(e)},_performAction=function(e,t){t?(i=e.performActionData,Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!0):(i=e.reverseActionData,Rexbuilder_Util_Editor.redoActive=!1,Rexbuilder_Util_Editor.undoActive=!0);var i,a,o,r=(a=""!=e.modelNumber?Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"][data-rexlive-model-number="'+e.modelNumber+'"]'):Rexbuilder_Util.$rexContainer.find('section[data-rexlive-section-id="'+e.sectionID+'"]')).find(".grid-stack-row");switch(void 0!==r.data()&&(o=r.data().plugin_perfectGridGalleryEditor),e.actionName){case"updateSectionLayout":_updateSectionLayout(r,i);break;case"updateSectionFullHeight":updateSectionFullHeight(i);break;case"updateSectionBlocksDisposition":void 0!==o&&(_updateBlocksLayout(i),setTimeout(o._updateElementsSizeViewers(),200));break;case"updateBlockVisibility":void 0!==o&&updateRemovingBlock(i.targetElement,i.hasToBeRemoved,i.galleryInstance);break;case"updateSlider":_updateSlider(i);break;case"updateSectionName":_updateSectionName(a,i.sectionName);break;case"updateSectionPhotoswipe":_updateSectionPhotoswipe(i.elements);break;case"collapseSection":_collapseGrid(i.gridInstance,i.collapse,i.blockDisposition,i.gridLayout);break;case"updateCustomClasses":_updateCustomClasses(i.$target,i.classes);break;case"updateCustomCSS":_updateCustomCSS(i.css);break;case"updateSectionBackgroundColor":updateSectionBackgroundColor(a,i);break;case"updateSectionOverlay":updateSectionOverlay(a,i);break;case"updateSectionImageBG":_updateImageBG(a,i);break;case"updateSectionVideoBG":Rexbuilder_Dom_Util.updateVideos(a,i);break;case"updateBlockBackgroundColor":_updateBlockBackgroundColor(i);break;case"updateBlockBackgroundGradient":_updateBlockBackgroundGradient(i);break;case"updateBlockOverlayGradient":_updateBlockOverlayGradient(i);break;case"updateBlockOverlay":_updateBlockOverlay(i);break;case"updateBlockImageBG":Rexbuilder_Util_Editor.updatingImageBg=!0,_updateImageBG(i.$itemContent,i.imageOpt),void 0!==o&&"masonry"==o.settings.galleryLayout&&o.updateElementHeight(i.$itemContent.parents(".grid-stack-item").get(0)),Rexbuilder_Util_Editor.updatingImageBg=!1;break;case"updateBlockPhotoswipe":_updateBlockPhotoswipe(i);break;case"updateBlockPadding":Rexbuilder_Util_Editor.updatingPaddingBlock=!0,_updateBlockPaddings(i.$elem,i.dataPadding),void 0!==o&&"masonry"==o.settings.galleryLayout&&o.updateElementHeight(i.$elem[0],!0),Rexbuilder_Util_Editor.updatingPaddingBlock=!1;break;case"updateBlockVideoBG":Rexbuilder_Dom_Util.updateVideos(i.$itemContent,i.videoOpt);break;case"updateBlockFlexPosition":_updateFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockImageFlexPosition":_updateImageFlexPostition(i.$elem,i.dataPosition);break;case"updateBlockUrl":_updateBlockUrl(i.$elem,i.url);break;case"updateSectionVisibility":_updateSectionVisibility(a,i.show,i.layoutsOrder,i.stateDefault);break;case"updateSectionModel":_updateModelVisibility(i);break;case"sectionBecameModel":_updateSectionBecameModel(i);break;case"updateSectionOrder":_fixSectionDomOrder(i.sectionOrder,!1,i.sectionMoved);break;case"updateLockButton":updateLockEditModel(i.$button,i.lock);break;case"updateSectionWidth":_updateSectionWidth(a,i);break;case"updateGridDistances":_updateRowDistances(a,i);break;case"updateSectionMargins":_updateSectionMargins(a,i);break;case"updateRexButton":_updateRexButton(i)}Rexbuilder_Util_Editor.undoActive=!1,Rexbuilder_Util_Editor.redoActive=!1};function _setBackgroundColor(e,t){-1!==e.css("background").indexOf("linear-gradient")&&e.css("background",""),e.css("background-color",t)}function _insertBlockVideoToDOM(e,t){var i=e.find(".rex-image-wrapper"),a=e.find(".rexlive-block-drag-handle"),o=0!==i.length,r=0!==a.length;o?i.after(t):r?a.after(t):e.prepend(t)}function _moveImageBeforeVideo(e){var t=e.find(".rex-image-wrapper"),e=e.find(".rex-youtube-wrap, .rex-video-vimeo-wrap, .rex-video-wrap");t.insertBefore(e)}var init=function(){this.lastSliderNumber=0};return{init:init,updateRow:_updateRow,updateSectionMargins:_updateSectionMargins,updateSectionMarginsData:_updateSectionMarginsData,updateImageBG:_updateImageBG,updateBlockPhotoswipe:_updateBlockPhotoswipe,performAction:_performAction,addYoutubeVideo:_addYoutubeVideo,removeYoutubeVideo:_removeYoutubeVideo,addVimeoVideo:_addVimeoVideo,removeVimeoVideo:_removeVimeoVideo,addMp4Video:_addMp4Video,removeMp4Video:_removeMp4Video,updateSlider:_updateSlider,updateSliderStack:_updateSliderStack,updateSectionName:_updateSectionName,updateSectionNavLabel:_updateSectionNavLabel,enablePhotoswipeAllBlocksSection:_enablePhotoswipeAllBlocksSection,removePhotoswipeAllBlocksSection:_removePhotoswipeAllBlocksSection,updateCustomClasses:_updateCustomClasses,collapseGrid:_collapseGrid,updateCustomCSS:_updateCustomCSS,updateSectionVideoBackground:_updateSectionVideoBackground,updateSectionBackgroundImage:_updateSectionBackgroundImage,updateSectionBackgroundColor:updateSectionBackgroundColor,updateSectionBackgroundColorLive:_updateSectionBackgroundColorLive,updateSectionBackgroundGradient:_updateSectionBackgroundGradient,updateSectionOverlay:updateSectionOverlay,updateSectionOverlayColorLive:updateSectionOverlayColorLive,updateSectionOverlayGradient:_updateSectionOverlayGradient,updateBlockBackgroundColor:_updateBlockBackgroundColor,updateBlockBackgroundColorLive:_updateBlockBackgroundColorLive,updateBlockBackgroundGradient:_updateBlockBackgroundGradient,updateBlockOverlayColorLive:_updateBlockOverlayColorLive,updateBlockOverlay:_updateBlockOverlay,updateBlockOverlayGradient:_updateBlockOverlayGradient,updateVideos:_updateVideos,updateBlockPaddings:_updateBlockPaddings,updateFlexPostition:_updateFlexPostition,updateImageFlexPostition:_updateImageFlexPostition,updateBlockUrl:_updateBlockUrl,updateSectionVisibility:_updateSectionVisibility,fixSectionDomOrder:_fixSectionDomOrder,updateSectionBecameModel:_updateSectionBecameModel,updateLockEditModel:updateLockEditModel,fixModelNumbers:_fixModelNumbers,updateSectionWidthData:_updateSectionWidthData,updateSectionWidth:_updateSectionWidth,updateRowDistancesData:_updateRowDistancesData,updateGridLayoutDomProperties:_updateGridLayoutDomProperties,htmlToElement:htmlToElement,updateBulkSection:_updateBulkSection,updateBulkBlock:updateBulkBlock,updateRemovingBlock:updateRemovingBlock,updateSectionFullHeight:updateSectionFullHeight}}(jQuery);
/**
 Values to insert on "wp_options" to work with rexbuttons
 Data are in form
 "option_name"
 "option_value"


_rex_buttons_ids

[\"9UEc\"]


_rex_buttons_styles

[{\"rexID\":\"9UEc\",\"buttonName\":\"Rex Funny v23\",\"rules\":{\"element\":{\"text_color\":\"rgb(111, 115, 181)\",\"font_size\":\"px\",\"background_color\":\"rgb(0, 238, 255)\",\"button_height\":\"px\",\"button_width\":\"\",\"border_color\":\"rgb(165, 0, 255)\",\"border_width\":\"px\",\"border_radius\":\"px\",\"margin_top\":\"px\",\"margin_bottom\":\"px\",\"margin_right\":\"px\",\"margin_left\":\"px\",\"padding_top\":\"px\",\"padding_bottom\":\"px\",\"padding_right\":\"px\",\"padding_left\":\"px\"},\"hover\":{\"background_color\":\"rgb(165, 0, 146)\",\"text_color\":\"rgb(0, 60, 255)\",\"border_color\":\"rgb(0, 255, 15)\"}}}]


_rex_button_9UEc_css

.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container{font-size: 12px;color: rgb(111, 115, 181);min-height: 70px;min-width: 100px;margin-top: 20px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-text{padding-top: 20px;padding-right: 20px;padding-bottom: 20px;padding-left: 20px;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background{background-color: rgb(0, 238, 255);border-color: rgb(165, 0, 255);border-width: 5px;border-radius: 10px;border-style: solid;}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-background:hover{background-color: rgb(165, 0, 146);border-color: rgb(0, 255, 15);}.rex-button-wrapper[data-rex-button-id=\"9UEc\"] .rex-button-container:hover{color: rgb(0, 60, 255);}

_rex_button_9UEc_html

<span class=\"rex-button-wrapper\" data-rex-button-id=\"9UEc\"><span class=\"rex-button-data\" style=\"display:none;\" data-text-color=\"rgb(111, 115, 181)\" data-text-size=\"px\" data-background-color=\"rgb(0, 238, 255)\" data-background-color-hover=\"rgb(165, 0, 146)\" data-border-color-hover=\"rgb(0, 255, 15)\" data-text-color-hover=\"rgb(0, 60, 255)\" data-border-width=\"px\" data-border-color=\"rgb(165, 0, 255)\" data-border-radius=\"px\" data-button-height=\"px\" data-button-width=\"\" data-margin-top=\"px\" data-margin-bottom=\"px\" data-margin-left=\"px\" data-margin-right=\"px\" data-padding-left=\"px\" data-padding-right=\"px\" data-padding-top=\"px\" data-padding-bottom=\"px\" data-link-target=\"#\" data-link-type=\"_blank\" data-button-name=\"Rex Funny v23\"></span><a href=\"#\" class=\"rex-button-container\" target=\"_blank\"><span class=\"rex-button-background\"><span class=\"rex-button-text\">Learn More</span></span></a></span>


 */
var Rexbuilder_Rexbutton=function(b){var n,i,s;function a(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container"){switch(e){case"font-size":n.cssRules[o].style.fontSize=r;break;case"color":n.cssRules[o].style.color=r;break;case"min-height":n.cssRules[o].style.minHeight=r;break;case"min-width":n.cssRules[o].style.minWidth=r;break;case"margin-top":n.cssRules[o].style.marginTop=r;break;case"margin-bottom":n.cssRules[o].style.marginBottom=r;break;case"margin-left":n.cssRules[o].style.marginLeft=r;break;case"margin-right":n.cssRules[o].style.marginRight=r}break}}function d(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background"){switch(e){case"border-width":n.cssRules[o].style.borderWidth=r,n.cssRules[o].style.borderTopWidth=r,n.cssRules[o].style.borderLeftWidth=r,n.cssRules[o].style.borderRightWidth=r,n.cssRules[o].style.borderBottomWidth=r,n.cssRules[o].style.borderTop=r+" "+n.cssRules[o].style.borderTopStyle+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=r+" "+n.cssRules[o].style.borderLeftStyle+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=r+" "+n.cssRules[o].style.borderRightStyle+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=r+" "+n.cssRules[o].style.borderBottomStyle+" "+n.cssRules[o].style.borderBottomColor;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor;break;case"border-radius":n.cssRules[o].style.borderRadius=r,n.cssRules[o].style.borderTopLeftRadius=r,n.cssRules[o].style.borderTopRightRadius=r,n.cssRules[o].style.borderBottomLeftRadius=r,n.cssRules[o].style.borderBottomRightRadius=r,n.cssRules[o].style.webkitBorderRadius=r,n.cssRules[o].style.webkitBorderTopLeftRadius=r,n.cssRules[o].style.webkitBorderTopRightRadius=r,n.cssRules[o].style.webkitBorderBottomLeftRadius=r,n.cssRules[o].style.webkitBorderBottomRightRadius=r;break;case"background-color":n.cssRules[o].style.backgroundColor=r}break}}function l(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-text'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-text")switch(e){case"padding-left":n.cssRules[o].style.paddingLeft=r;break;case"padding-right":n.cssRules[o].style.paddingRight=r;break;case"padding-top":n.cssRules[o].style.paddingTop=r;break;case"padding-bottom":n.cssRules[o].style.paddingBottom=r}}function u(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-container:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-container:hover"){"color"===e&&(n.cssRules[o].style.color=r);break}}function p(t,e,r){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+t+'"] .rex-button-background:hover'||n.cssRules[o].selectorText=="[data-rex-button-id='"+t+"'].rex-button-wrapper .rex-button-background:hover"){switch(e){case"background-color":n.cssRules[o].style.backgroundColor=r;break;case"border-color":n.cssRules[o].style.borderColor=r,n.cssRules[o].style.borderTopColor=r,n.cssRules[o].style.borderLeftColor=r,n.cssRules[o].style.borderRightColor=r,n.cssRules[o].style.borderBottomColor=r;break;case"border-style":n.cssRules[o].style.borderStyle=r,n.cssRules[o].style.borderTopStyle=r,n.cssRules[o].style.borderLeftStyle=r,n.cssRules[o].style.borderRightStyle=r,n.cssRules[o].style.borderBottomStyle=r,n.cssRules[o].style.borderTop=n.cssRules[o].style.borderTopWidth+" "+r+" "+n.cssRules[o].style.borderTopColor,n.cssRules[o].style.borderLeft=n.cssRules[o].style.borderLeftWidth+" "+r+" "+n.cssRules[o].style.borderLeftColor,n.cssRules[o].style.borderRight=n.cssRules[o].style.borderRightWidth+" "+r+" "+n.cssRules[o].style.borderRightColor,n.cssRules[o].style.borderBottom=n.cssRules[o].style.borderBottomWidth+" "+r+" "+n.cssRules[o].style.borderBottomColor}break}}var g=function(t){for(var e=t.attr("data-rex-button-id"),r=!1,o=0;o<i.length;o++)if(i[o].id==e){r=!0;break}r||c(t),_(),R(),h(t);t=t.parents(".text-wrap");Rexbuilder_Util_Editor.updateBlockContainerHeight(t),Rexbuilder_Util_Editor.builderEdited(!1)},c=function(t){var e;0!=t.find(".rex-button-data").eq(0).length&&(e=(t=o(t,!0)).buttonInfo.buttonTarget.button_id,r(e,t.buttonInfo))},r=function(t,e){var r,o,a="",a=(a=(a=(a=(a=(a=(a=(a+="color: "+e.text_color+";")+("font-size: "+(isNaN(parseInt(e.font_size.replace("px","")))?s:e).font_size+";"))+("min-height: "+(isNaN(parseInt(e.button_height.replace("px","")))?s.dimensions.height:e.button_height)+";"))+("min-width: "+(isNaN(parseInt(e.button_width.replace("px","")))?s.dimensions.width:e.button_width)+";"))+("margin-top: "+(isNaN(parseInt(e.margin_top.replace("px","")))?s.margins.top:e.margin_top)+";"))+("margin-right: "+(isNaN(parseInt(e.margin_right.replace("px","")))?s.margins.right:e.margin_right)+";"))+("margin-bottom: "+(isNaN(parseInt(e.margin_bottom.replace("px","")))?s.margins.bottom:e.margin_bottom)+";"),r=isNaN(parseInt(e.margin_left.replace("px","")))?s.margins.left:e.margin_left,o=t,r=a+="margin-left: "+r+";","insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-container{'+r+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-container{'+r+"}",n.cssRules.length),""),a=(a=(a=(a=a+("border-color: "+e.border_color+";")+"border-style: solid;")+("border-width: "+(isNaN(parseInt(e.border_width.replace("px","")))?s.border.width:e.border_width)+";"))+("border-radius: "+(isNaN(parseInt(e.border_radius.replace("px","")))?s.border.radius:e.border_radius)+";")+("background-color: "+e.background_color+";"),o=t,r=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-background{'+r+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-background{'+r+"}",n.cssRules.length),""),a=(a=(a+="padding-top: "+(isNaN(parseInt(e.padding_top.replace("px","")))?s.paddings.top:e.padding_top)+";")+("padding-right: "+(isNaN(parseInt(e.padding_right.replace("px","")))?s.paddings.right:e.padding_right)+";"))+("padding-bottom: "+(isNaN(parseInt(e.padding_bottom.replace("px","")))?s.paddings.bottom:e.padding_bottom)+";"),a=(o=isNaN(parseInt(e.padding_left.replace("px","")))?s.paddings.left:e.padding_left,r=t,o=a+="padding-left: "+o+";","insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-text{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-text{'+o+"}",n.cssRules.length),""),a=(a=(a+="background-color: "+e.hover_color+";")+("border-color: "+e.hover_border+";"),r=t,o=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-background:hover{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-background:hover{'+o+"}",n.cssRules.length),"");a+="color: "+e.hover_text+";",r=t,o=a,"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-container:hover{'+o+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+r+'"] .rex-button-container:hover{'+o+"}",n.cssRules.length)};function x(t){let e={id:t.buttonTarget.button_id,target:t.link_type,number:t.buttonTarget.button_number,href:t.link_target,separate:t.separate,label:t.text,popupVideo:!1,class:t.classes};t.separate&&(e={...e,size:t.font_size,color:t.text_color,hoverColor:t.hover_text,backgroundColor:t.background_color,hoverBackgroundColor:t.hover_color,borderColor:t.border_color,hoverBorderColor:t.hover_border,borderWidth:t.border_width,borderRadius:t.border_radius,width:t.button_width,height:t.button_height,marginTop:t.margin_top,marginRight:t.margin_right,marginBottom:t.margin_bottom,marginLeft:t.margin_left,paddingTop:t.padding_top,paddingRight:t.padding_right,paddingBottom:t.padding_bottom,paddingLeft:t.padding_left,name:t.buttonTarget.button_name}),CKEditor_Handler.handleEvent({name:"rexlive:ckeditor:setAttributesRexbutton",data:e,editable:null})}var h=function(t){t=t.find(".rex-button-data").eq(0);t.removeAttr("data-text-color"),t.removeAttr("data-text-size"),t.removeAttr("data-background-color"),t.removeAttr("data-background-color-hover"),t.removeAttr("data-border-color-hover"),t.removeAttr("data-text-color-hover"),t.removeAttr("data-border-width"),t.removeAttr("data-border-color"),t.removeAttr("data-border-radius"),t.removeAttr("data-button-height"),t.removeAttr("data-button-width"),t.removeAttr("data-margin-top"),t.removeAttr("data-margin-bottom"),t.removeAttr("data-margin-left"),t.removeAttr("data-margin-right"),t.removeAttr("data-padding-top"),t.removeAttr("data-padding-bottom"),t.removeAttr("data-padding-left"),t.removeAttr("data-padding-right"),t.removeAttr("data-button-name")},o=function(t,e){e=void 0!==e&&"true"==e.toString();var r={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_border:"",hover_text:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:""}},o=t.find(".rex-button-data").eq(0),a=(r.buttonTarget.button_id=t.attr("data-rex-button-id"),r.buttonTarget.button_number=parseInt(t.attr("data-rex-button-number")),o[0]),n=!1;return t.hasClass("rex-separate-button")||e?(r.font_size=a.getAttribute("data-text-size")?a.getAttribute("data-text-size").toString():"",r.text_color=a.getAttribute("data-text-color")?a.getAttribute("data-text-color").toString():"",r.button_height=a.getAttribute("data-button-height")?a.getAttribute("data-button-height").toString():"",r.button_width=a.getAttribute("data-button-width")?a.getAttribute("data-button-width").toString():"",r.margin_top=a.getAttribute("data-margin-top")?a.getAttribute("data-margin-top").toString():"",r.margin_bottom=a.getAttribute("data-margin-bottom")?a.getAttribute("data-margin-bottom").toString():"",r.margin_right=a.getAttribute("data-margin-right")?a.getAttribute("data-margin-right").toString():"",r.margin_left=a.getAttribute("data-margin-left")?a.getAttribute("data-margin-left").toString():"",r.border_color=a.getAttribute("data-border-color")?a.getAttribute("data-border-color").toString():"",r.border_width=a.getAttribute("data-border-width")?a.getAttribute("data-border-width").toString():"",r.border_radius=a.getAttribute("data-border-radius")?a.getAttribute("data-border-radius").toString():"",r.background_color=a.getAttribute("data-background-color")?a.getAttribute("data-background-color").toString():"",r.padding_top=a.getAttribute("data-padding-top")?a.getAttribute("data-padding-top").toString():"",r.padding_bottom=a.getAttribute("data-padding-bottom")?a.getAttribute("data-padding-bottom").toString():"",r.padding_right=a.getAttribute("data-padding-right")?a.getAttribute("data-padding-right").toString():"",r.padding_left=a.getAttribute("data-padding-left")?a.getAttribute("data-padding-left").toString():"",r.hover_color=a.getAttribute("data-background-color-hover")?a.getAttribute("data-background-color-hover").toString():"",r.hover_border=a.getAttribute("data-border-color-hover")?a.getAttribute("data-border-color-hover").toString():"",r.hover_text=a.getAttribute("data-text-color-hover")?a.getAttribute("data-text-color-hover").toString():"",r.buttonTarget.button_name=a.getAttribute("data-button-name")?a.getAttribute("data-button-name").toString():"",n=!0):r.synchronize=void 0!==o.attr("data-synchronize")&&o.attr("data-synchronize").toString(),r.text=t.find(".rex-button-text").eq(0).text(),r.link_target=o.attr("data-link-target"),r.link_type=o.attr("data-link-type"),r.classes=t.find("a.rex-button-container").eq(0).attr("class").replace("rex-button-container","").replace(/\s/,""),{separateButton:n,buttonInfo:r}};function m(t){t=t||!1;var e=[];if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){for(var r,o,a,n,i,s,d,l=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section")),u=l.length,b=0,p=0,g=0;b<u;b++)if(r=l[b],t||!Rexbuilder_Util.hasClass(r,"removing_section"))for(n=(o=Array.prototype.slice.call(r.querySelectorAll(".perfect-grid-item"))).length,p=0;p<n;p++)if(a=o[p],t||!Rexbuilder_Util.hasClass(a,"removing_block"))for(d=(i=Array.prototype.slice.call(a.querySelectorAll(".rex-button-wrapper"))).length,g=0;g<d;g++)s=i[g],e.push(s.getAttribute("data-rex-button-id"));e=Rexbuilder_Util.removeArrayDuplicates(e)}return e}function _(){var t=m(!0),e={};if(t.forEach(function(t){e[t]={occurrencies:0}}),Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer)for(var r,o,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),n=a.length,i=0;i<n;i++)o=(r=a[i]).getAttribute("data-rex-button-id"),e[o].occurrencies++,r.setAttribute("data-rex-button-number",e[o].occurrencies)}function R(){if(i=[],Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer)for(var t,e,r,o=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rex-button-wrapper")),a=0;a<o.length;a++)e=(t=o[a]).getAttribute("data-rex-button-id"),r=parseInt(t.getAttribute("data-rex-button-number")),i.push({id:e,number:r}),Rexbuilder_Util.hasClass(t,"rex-separate-button")&&!function(t){for(var e=0;e<n.cssRules.length;e++)if(-1!==n.cssRules[e].selectorText.indexOf(t))return 1}(e)&&c(b(t)),i[a].number<r&&(i[a].number=r)}return{init:function(){var t,e;n=null,i=[],s={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},this.$buttonsStyle=b("#rexpansive-builder-rexbutton-style-inline-css"),0==Rexbuilder_Rexbutton.$buttonsStyle.length&&(t=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css",e.id="rexpansive-builder-rexbutton-style-inline-css",e.dataset.rexName="buttons-style",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e));for(var r=0;r<document.styleSheets.length;r++)"rexpansive-builder-rexbutton-style-inline-css"==document.styleSheets[r].ownerNode.id&&(n=document.styleSheets[r]);_(),R(),Rexbuilder_Util.$document.on("rexlive:completeImportButton",function(t){var t=t.settings,e=t.$blockAdded,t=t.$buttonWrapper;t.detach().prependTo(e.find(".text-wrap").eq(0)),t.wrap('<p class="rex-buttons-paragraph"></p>'),g(t)})},getActiveStyleSheet:function(){return n},fixImportedButton:function(t){var e,r=Rexbuilder_Util.$rexContainer.find(".rex-loading-button .rex-button-wrapper"),o=(r.unwrap(),r.parents(".rex-buttons-paragraph").eq(0)),a=r.parents(".text-wrap").eq(0),n=r.parents(".grid-stack-row").eq(0),i=r.parents(".rexpansive_section").eq(0),s=jQuery.extend(!0,{},t.buttonDimensions),d=(n.find(".button-list__element__tools").remove(),r.find(".rex-button-data").eq(0)),l={top:parseInt(d.attr("data-margin-top").replace("px","")),bottom:parseInt(d.attr("data-margin-bottom").replace("px","")),left:parseInt(d.attr("data-margin-left").replace("px","")),right:parseInt(d.attr("data-margin-right").replace("px",""))},d=(l.top=isNaN(l.top)?0:l.top,l.bottom=isNaN(l.bottom)?0:l.bottom,l.left=isNaN(l.left)?0:l.left,l.right=isNaN(l.right)?0:l.right,{top:parseInt(d.attr("data-padding-top").replace("px","")),bottom:parseInt(d.attr("data-padding-bottom").replace("px","")),left:parseInt(d.attr("data-padding-left").replace("px","")),right:parseInt(d.attr("data-padding-right").replace("px",""))});switch(d.top=isNaN(d.top)?0:d.top,d.bottom=isNaN(d.bottom)?0:d.bottom,d.left=isNaN(d.left)?0:d.left,d.right=isNaN(d.right)?0:d.right,s.height=s.height+l.top+l.bottom+d.top+d.bottom,s.width=s.width+l.left+l.right+d.left+d.right,0==a.length?0!=n.length?"inside-row":"inside-new-row":0!=o.length?"inside-paragraph":"inside-block"){case"inside-block":r.wrap('<p class="rex-buttons-paragraph"></p>'),g(r);break;case"inside-paragraph":g(r),function(t){Rexbuilder_Util_Editor.isJQuery(t)||(t=b(t));return 0!==t.next("p").length}(o)||(u=o,Rexbuilder_Util_Editor.isJQuery(u)&&(u=u.get(0)),e=Rexbuilder_Live_Templates.getTemplate("empty-paragraph"),u.insertAdjacentHTML("afterend",e));break;case"inside-row":var u=jQuery.Event("rexlive:insert_new_text_block");u.settings={data_to_send:{$buttonWrapper:r,$section:i,addBlockButton:!0,mousePosition:t.mousePosition,blockDimensions:{w:s.width,h:s.height},sectionTarget:{sectionID:i.attr("data-rexlive-section-id"),modelNumber:void 0!==i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(u)}},getButtonsInPage:function(){return i},updateButtonLive:function(t){switch(t.propertyType){case"text":l(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"container":a(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"background":d(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"backgroundHover":case"borderHover":p(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"textHover":u(t.buttonTarget.button_id,t.propertyName,t.newValue);break;case"button":var e=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t.buttonTarget.button_id+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]');switch(t.propertyName){case"link_target":e.find("a.rex-button-container").eq(0).attr("href",t.newValue);break;case"link_type":e.find("a.rex-button-container").eq(0).attr("target",t.newValue);break;case"button_label":e.find(".rex-button-text").eq(0).text(t.newValue);break;case"button_class":e.find("a.rex-button-container").eq(0).attr("class","").addClass("rex-button-container").addClass(t.newValue);break;case"button_name":e.find(".rex-button-data").eq(0).attr("data-button-name",t.newValue)}}},lockSynchronize:function(t){var e=t.buttonTarget.button_id;Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]').find(".rex-button-data").attr("data-synchronize",!0)},updateButton:function(t){var t=t.buttonProperties,e=t.buttonTarget.button_id,r=(isNaN(parseInt(t.font_size.replace("px","")))?s:t).font_size,r=(a(e,"font-size",r),a(e,"color",t.text_color),r=isNaN(parseInt(t.button_height.replace("px","")))?s.dimensions.height:t.button_height,a(e,"min-height",r),r=isNaN(parseInt(t.button_width.replace("px","")))?s.dimensions.width:t.button_width,a(e,"min-width",r),r=isNaN(parseInt(t.margin_top.replace("px","")))?s.margins.top:t.margin_top,a(e,"margin-top",r),r=isNaN(parseInt(t.margin_right.replace("px","")))?s.margins.right:t.margin_right,a(e,"margin-right",r),r=isNaN(parseInt(t.margin_bottom.replace("px","")))?s.margins.bottom:t.margin_bottom,a(e,"margin-bottom",r),r=isNaN(parseInt(t.margin_left.replace("px","")))?s.margins.left:t.margin_left,a(e,"margin-left",r),d(e,"border-color",t.border_color),r=isNaN(parseInt(t.border_width.replace("px","")))?s.border.width:t.border_width,d(e,"border-width",r),r=isNaN(parseInt(t.border_radius.replace("px","")))?s.border.radius:t.border_radius,d(e,"border-radius",r),d(e,"background-color",t.background_color),r=isNaN(parseInt(t.padding_top.replace("px","")))?s.paddings.top:t.padding_top,l(e,"padding-top",r),r=isNaN(parseInt(t.padding_right.replace("px","")))?s.paddings.right:t.padding_right,l(e,"padding-right",r),r=isNaN(parseInt(t.padding_bottom.replace("px","")))?s.paddings.bottom:t.padding_bottom,l(e,"padding-bottom",r),r=isNaN(parseInt(t.padding_left.replace("px","")))?s.paddings.left:t.padding_left,l(e,"padding-left",r),p(e,"background-color",t.hover_color),p(e,"border-color",t.hover_border),u(e,"color",t.hover_text),Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+e+'"][data-rex-button-number="'+t.buttonTarget.button_number+'"]')),e=r.find(".rex-button-data").eq(0),o=r.find(".rex-button-container").eq(0);r.find(".rex-button-text").eq(0).text(t.text),r.find("a.rex-button-container").eq(0).attr("href",t.link_target),r.find("a.rex-button-container").eq(0).attr("target",t.link_type),e.attr("data-link-target",t.link_target),e.attr("data-link-type",t.link_type),t.separate=r.hasClass("rex-separate-button"),t.popup_video=o.hasClass("popup-video-button"),x(t)},removeSeparateButton:function(t){t=t.buttonTarget.button_id,t=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+t+'"]');t.removeClass("rex-separate-button"),h(t)},separateRexButton:function(t){var e=t.buttonData,t=t.newID,r=e.buttonTarget.button_id,o=Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"][data-rex-button-number="'+e.buttonTarget.button_number+'"]');if(o.addClass("rex-separate-button"),o.attr("data-rex-button-id",t),o.attr("data-rex-button-number",1),i.push({id:t,number:1}),0==Rexbuilder_Util.$rexContainer.find('.rex-button-wrapper[data-rex-button-id="'+r+'"]').length){for(var a=0;a<i.length&&i[a].id!=r;a++);a!=i.length&&i.splice(a,1)}e.separate=!0,e.buttonTarget.button_id=t,e.buttonTarget.button_number=1,e.popup_video=!1,x(e),c(o)},generateButtonData:o,endFixingButtonImported:g,updateButtonListInPage:R,findIDsInPage:m,refreshNumbers:_,updateButtonContainerRule:a,updateButtonBackgroundRule:d,updateButtonBackgroundHoverRule:p,updateContainerHoverRule:u}}(jQuery);
var Rexbuilder_Rexelement=function(n){"use strict";var i=[],_={background_color:"rgb(0, 0, 0, 0)",border_color:"rgb(0, 0, 0, 1)",border_width:"2px",margin_top:"5px",margin_left:"5px",margin_right:"5px",margin_bottom:"5px",error_message_color:"rgb(0, 0, 0, 1)",error_message_font_size:"15px",send_message_color:"rgb(0, 0, 0, 1)",send_message_font_size:"15px",columns:{padding_top:"15px",padding_left:"15px",padding_right:"15px",padding_bottom:"15px"},content:{background_color:"rgb(255, 255, 255, 1)",background_color_hover:"rgb(255, 255, 255, 1)",text_color:"rgb(0, 0, 0, 1)",text_color_hover:"rgb(0, 0, 0, 1)",border_color:"rgb(0, 0, 0, 1)",border_color_hover:"rgb(0, 0, 0, 1)",width:"200px",height:"50px",font_size:"15px",border_width:"1px",border_radius:"0px"},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}};function r(e){0!==e.find(".wpcf7-form").length&&(Rexbuilder_Rexwpcf7.refreshFormStyle(e.find(".wpcf7-form"),!0),e.find(".wpcf7-column").each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(n(t))}))}return{init:function(){var o;Rexbuilder_Util.$document.find("form").get().filter(function(e){return 0===n(e).parents(".rex-element-wrapper").length}).forEach(function(e){Rexbuilder_Util.addClass(e,"no-builder-form")}),Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){var t=n(t),r=t.attr("data-rex-element-id"),t=parseInt(t.attr("data-rex-element-number"));for(o=0;o<i.length;o++)if(i[o].id==r){0;break}!1||i.push({id:parseInt(r),number:t}),i[o].number<t&&(i[o].number=t)})},addStyles:function(){Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){t=n(t);!t.hasClass("rex-separate-element")&&0!==e&&i[e].id==i[e-1].id||r(t)})},addElementStyle:r,generateElementData:function(e){var t,r,o,n,i=e.get(0),c={},d=i.querySelector(".rex-element-data").dataset,i={element_id:e.attr("data-rex-element-id"),element_number:parseInt(e.attr("data-rex-element-number")),is_separated:Rexbuilder_Util.hasClass(i,"rex-separate-form"),form_title:i.querySelector(".string-shortcode").getAttribute("shortcode").match(/title\=\"(.*)\"/)[1]},e=e.find(".wpcf7-form"),e={background_color:d.wpcf7BackgroundColor||e.css("background-color"),border_color:d.wpcf7BorderColor||e.css("border-color"),border_width:d.wpcf7BorderWidth||e.css("border-width"),margin_top:d.wpcf7MarginTop||e.css("margin-top"),margin_left:d.wpcf7MarginLeft||e.css("margin-left"),margin_right:d.wpcf7MarginRight||e.css("margin-right"),margin_bottom:d.wpcf7MarginBottom||e.css("margin-bottom"),error_message_color:d.wpcf7ErrorMessageColor||_.error_message_color,error_message_font_size:d.wpcf7ErrorMessageFontSize||_.error_message_font_size,send_message_color:d.wpcf7SendMessageColor||_.send_message_color,send_message_font_size:d.wpcf7SendMessageFontSize||_.send_message_font_size},a={width:d.wpcf7ContentWidth||_.content.width,height:d.wpcf7ContentHeight||_.content.height,font_size:d.wpcf7ContentFontSize||_.content.font_size,border_width:d.wpcf7ContentBorderWidth||_.content.border_width,border_radius:d.wpcf7ContentBorderRadius||_.content.border_radius,text_color:d.wpcf7ContentTextColor||_.content.text_color,background_color:d.wpcf7ContentBackgroundColor||_.content.background_color,border_color:d.wpcf7ContentBorderColor||_.content.border_color,text_color_hover:d.wpcf7ContentTextColorHover||_.content.text_color_hover,background_color_hover:d.wpcf7ContentBackgroundColorHover||_.content.background_color_hover,border_color_hover:d.wpcf7ContentBorderColorHover||_.content.border_color_hover},l={padding_top:d.wpcf7ColumnsPaddingTop||_.columns.padding_top,padding_left:d.wpcf7ColumnsPaddingLeft||_.columns.padding_left,padding_right:d.wpcf7ColumnsPaddingRight||_.columns.padding_right,padding_bottom:d.wpcf7ColumnsPaddingBottom||_.columns.padding_bottom};function s(e,t,r){return e===r[0]}return e.content=a,e.columns=l,e.options_different=(a=i.element_id,a=Rexbuilder_Util.rexContainer.querySelector('.rex-element-wrapper[data-rex-element-id="'+a+'"]'),l=a.querySelector(".rex-element-data"),a=Array.prototype.slice.call(a.querySelectorAll(".rex-wpcf7-column-content-data")),t=new Array(l.getAttribute("data-wpcf7-content-width")),r=new Array(l.getAttribute("data-wpcf7-content-height")),o=new Array(l.getAttribute("data-wpcf7-content-text-color")),n=new Array(l.getAttribute("data-wpcf7-content-font-size")),a.forEach(function(e){t.push(e.getAttribute("data-wpcf7-input-width")),r.push(e.getAttribute("data-wpcf7-input-height")),o.push(e.getAttribute("data-text-color")),n.push(e.getAttribute("data-wpcf7-font-size"))}),(l={}).width=!t.every(s),l.height=!r.every(s),l.text_color=!o.every(s),l.font_size=!n.every(s),l),c.synchronize=d.synchronize||!1,c.synchronize=d.synchronize||!1,c.element_target=i,c.wpcf7_data=e,c}}}(jQuery);
var Rexbuilder_Rexelement_Editor=function(C){"use strict";var o=[];function l(e){var t=e.element_target.element_id;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"][data-rex-element-number="'+e.element_target.element_number+'"]').find(".rex-element-data").attr("data-synchronize",!0)}function s(e,_){e.get(0);var t=0!==e.find(".wpcf7").length,r=e.attr("data-rex-element-id"),n=!1;e.attr("data-rex-element-number",1);for(var a=0;a<o.length;a++)if(o[a].id==r){o[a].number+=1,e.attr("data-rex-element-number",o[a].number),n=!0;break}n||o.push({id:r,number:1});var l,b,i,h,g,v,d=e.parents(".text-wrap");t&&(t=0===e.find(".wpcf7-rows").length,l=r,t?((t=e.find(".wpcf7-form")).children().not(".wpcf7-response-output").not(t.children().first()).wrapAll('<div class="wpcf7-rows ui-sortable"></div>'),b=t.find(".wpcf7-rows"),t.find("[type=url]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=tel]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=date]").parents(".wpcf7-form-control-wrap").remove(),t.find("[type=range]").parents(".wpcf7-form-control-wrap").remove(),t.find(".wpcf7-checkbox").parents(".wpcf7-form-control-wrap").remove(),t.find(".wpcf7-quiz-label").parents(".wpcf7-form-control-wrap").remove(),_=_.replace(/\[(url|tel|date|checkbox|quiz|range)\*?[^\]]+\]/g,""),t=b.children().filter(function(e,t){t=C(t);return 0!=t.find(".wpcf7-form-control-wrap").length||0!=t.find(".wpcf7-form-control").length||t.is(".wpcf7-form-control-wrap")||t.is(".wpcf7-form-control")}),i=C(),t.each(function(e,t){var r,n,t=C(t);0!==t.find(".wpcf7-form-control-wrap").length?0!==(t=t.find(".wpcf7-form-control-wrap")).parent("label").length&&(r=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),(n=t.parent("label")).contents().wrapAll(r),n.append(t),t=n.addClass("wpcf7-label-text")):0!==t.find(".wpcf7-form-control").length&&(t=t.find(".wpcf7-form-control")),i=i.add(t)}),b.empty(),h=[],g=[],v=C(document.createElement("div")).addClass("wpcf7-rows ui-sortable"),i.each(function(e,t){var r,n,a,l,i=C(t),d=C(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",e+1),o=C(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),c=C(document.createElement("span")).addClass("wpcf7-column-content").append(t),o=(o.append(c),d.append(o),v.append(d),C(document.createElement("div")).addClass("wpcf7-row wpcf7-row__1-column").attr("wpcf7-row-number",e+1)),d=C(document.createElement("div")).addClass("wpcf7-column").attr("wpcf7-column-number","1"),t=C(document.createElement("span")).addClass("wpcf7-column-content").append(t),t=(d.append(t),o.append(d),b.append(o),c.append(i[0].outerHTML),0!=(i=i.is("label")?void 0===i.find(".wpcf7-form-control-wrap")?i.find(".wpcf7-form-control"):i.find(".wpcf7-form-control-wrap"):i).find("[type=text]").length),d=0!=i.find(".wpcf7-email").length,o=0!=i.find(".wpcf7-number").length,p=0!=i.find(".wpcf7-textarea").length,s=0!=i.find(".wpcf7-select").length,f=0!=i.find(".wpcf7-radio").length,m=0!=i.find(".wpcf7-acceptance").length,u=0!=i.find(".wpcf7-file").length,x=i.is(".wpcf7-submit"),w=Rexbuilder_Util.createRandomNumericID(3);h[e]=w,g[e]=/\[[\w]+[^\]]+\]/.exec(_)[0],t?(a="text-"+h[e],(r=i.find(".wpcf7-text")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[text\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):d?(a="email-"+h[e],(r=i.find(".wpcf7-email")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[email\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):o?(a="number-"+h[e],(r=i.find(".wpcf7-number")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[number\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):p?(a="textarea-"+h[e],(r=i.find(".wpcf7-textarea")).addClass(a),i.addClass(a),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[textarea\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):s?(a="menu-"+h[e],(r=i.find(".wpcf7-select")).addClass(a),i.addClass(a),r.prepend('<option value="" disabled selected>Select something</option>'),r.attr("size",""),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[select\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):f?(a="radio-"+h[e],n=i.find("[type=radio]").attr("name"),i.addClass(a),i.removeClass(n),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[radio\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):m?(a="acceptance-"+h[e],n=i.find("[type=checkbox]").attr("name"),i.addClass(a),i.removeClass(n),g[e]=/\[acceptance\*?[^(\])]+\][^(\])]+\]/.exec(_)[0],_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[acceptance\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):u?(a="file-"+h[e],n=i.find("[type=file]").attr("name"),i.append('<div class="wpcf7-file-caption">Your text here</div>'),i.addClass(a),i.removeClass(n),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[file\*? [^(\s|\])]+/,l.exec(g[e])[0]+" class:"+a),g[e]=g[e].replace("]",']<div class="wpcf7-file-caption">Your text here</div>'),c.find(".wpcf7-form-control-wrap").replaceWith(g[e])):x&&(i.addClass(a="submit-"+w),_=_.replace(g[e],""),g[e]=g[e].replace(l=/\[submit/,l.exec(g[e])[0]+" class:"+a),c.find(".wpcf7-form-control").replaceWith(g[e])),/\]/.test(g[e])||(g[e]+="]")}),Rexbuilder_Rexwpcf7_Editor.addFormInPage(l,v),v.find(".wpcf7-column").each(function(e){Rexbuilder_Rexwpcf7_Editor.createColumnContentSpanData({editPoint:{element_id:l,row_number:e+1,column_number:1}})}),e=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+l+'"]').eq(0),Rexbuilder_Rexelement.addElementStyle(e),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Util_Editor.updateBlockContainerHeight(d),e.removeClass("importing-element")):Rexbuilder_Rexwpcf7_Editor.updateDBFormsInPage(r,!0),Rexbuilder_Rexwpcf7_Editor.wrapButtons(),Rexbuilder_Rexwpcf7_Editor.setRowsSortable(),Rexbuilder_Rexwpcf7_Editor.addMissingTools(l),c()),Rexbuilder_Live_Utilities.launchTooltips()}function c(){for(var e=Rexbuilder_Live_Templates.getTemplate("rexelement-tools",{settingsType:"form_settings"}),t=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),r=0;r<t.length;r++)t[r].querySelector(".rexelement-tools")||t[r].insertAdjacentHTML("afterbegin",e)}return{init:function(){var n;c(),Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").each(function(e,t){var t=C(t),r=t.attr("data-rex-element-id"),t=parseInt(t.attr("data-rex-element-number"));for(n=0;n<o.length;n++)if(o[n].id==r){0;break}!1||o.push({id:parseInt(r),number:t}),o[n].number<t&&(o[n].number=t)})},fixImportedElement:function(l){var i=Rexbuilder_Util.$rexContainer.find(".rex-loading-element .rex-element-wrapper"),e=i.attr("data-rex-element-id"),d=i.parents(".text-wrap").eq(0),o=i.parents(".grid-stack-row").eq(0),c=i.parents(".rexpansive_section").eq(0),p="inside-block",t="inside-block"===p,r=(0==d.length&&0!==o.length&&(p="inside-row"),i.addClass("importing-element"),i.detach(),o.find(".element-list-preview"));t?r.replaceWith('<div class="form-replacer"></div>'):r.remove(),C.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:e},success:function(e){if(e.success){var t=C.parseHTML(e.data.shortcode_transformed),r=e.data.form_content.toString().trim(),n=C('<div class="rex-element-container"></div>'),t=(n.append(t),i.append(n),e.data.shortcode),n=C('<span class="string-shortcode"></span>').get(0),t=(n.setAttribute("shortcode",t),i.prepend(n),i.find(".rex-element-data")),n=C.parseHTML(e.data.element_data_html[0]);switch(t.attr("data-synchronize",!1),null!==n&&(t.remove(),e=C(n),i.prepend(e),e.attr("data-synchronize",!1)),p){case"inside-block":i.wrap('<span class="rex-elements-paragraph"></span>'),o.find(".form-replacer").replaceWith(i),s(i,r),Rexbuilder_Util_Editor.updateBlockContainerHeight(d);break;case"inside-row":var a=jQuery.Event("rexlive:insert_new_text_block");a.settings={data_to_send:{$elementWrapper:i,$section:c,addBlockElement:!0,mousePosition:l.mousePosition,formFieldsString:r,sectionTarget:{sectionID:c.attr("data-rexlive-section-id"),modelNumber:void 0!==c.attr("data-rexlive-model-number")?c.attr("data-rexlive-model-number"):""}}},Rexbuilder_Util.$document.trigger(a)}}},error:function(e){}})},setupElement:s,handleCompleteImportElement:function(e){var t=(e=e.settings).$elementAdded,r=e.$elementWrapper,e=e.formFieldsString;r.detach().prependTo(t.find(".text-wrap").eq(0)),r.wrap('<span class="rex-elements-paragraph"></span>'),s(r,e)},lockSynchronize:l,separateRexElement:function(e){var t=e.elementData,e=e.newID,r=t.element_target.element_id;if((t=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"][data-rex-element-number="'+t.element_target.element_number+'"]')).addClass("rex-separate-form"),t.attr("data-rex-element-id",e),t.attr("data-rex-element-number",1),o.push({id:e,number:1}),0===Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]').length){for(var n=0;n<o.length&&o[n].id!=r;n++);n!=o.length&&o.splice(n,1)}Rexbuilder_Rexwpcf7_Editor.removeFormInPage(r)},refreshSeparatedRexElement:function(e){var t=e.elementID.toString(),r=e.oldElementID.toString(),n=e.elementData,a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]'),r=(e=a.find(".string-shortcode")).attr("shortcode").toString().replace(r,t);e.attr("shortcode",r),C.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_transform_element_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,elementID:t},success:function(e){var t,r;e.success&&(t=e.data.form_content.toString().trim(),(r=a.find(".rex-element-container")).empty(),e=C.parseHTML(e.data.shortcode_transformed),r.append(e),l(n),s(a,t),Rexbuilder_Util_Editor.builderEdited(!1))},error:function(e){}})}}}(jQuery);
var Rexbuilder_Rexwpcf7=function(f){"use strict";var n=null,i={wpcf7_required_field:!1,wpcf7_email:!1,wpcf7_only_numbers:!1,wpcf7_default_check:!1,wpcf7_placeholder:"Placeholder",wpcf7_file_max_dimensions:"25mb",wpcf7_button:{text_color_hover:"rgba(255,255,255,1)",background_color_hover:"rgba(86,86,86,1)",border_color_hover:"rgba(255,255,255,1)"},placeholder_color:"rgba(0,0,0,1)",placeholder_hover_color:"rgba(0,0,0,1)",text_color_focus:"rgba(0,0,0,1)"},s=["wpcf7-validation-errors","wpcf7-aborted","wpcf7-acceptance-missing","wpcf7-spam-blocked","wpcf7-mail-sent-ng"],d=["wpcf7-mail-sent-ok"];function u(t){for(var e=0;e<n.cssRules.length;e++)if(n.cssRules[e].selectorText==t)return 1}function b(t){var e={};return t.split(";").forEach(function(t){t=t.split(":");2===t.length&&(e[t[0]]=t[1].trim())}),e}function p(t,e){var o='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',r=o+"{"+e+"}";if(u(o)){var c,l=b(e);for(c in l)l.hasOwnProperty(c)&&a(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function _(t,e,o){var e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,r=e+"{"+o+"}";if(u(e)){var c,l=b(o);for(c in l)l.hasOwnProperty(c)&&R(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function g(t,e){var o='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',r=o+"{"+e+"}";if(u(o)){var c,l=b(e);for(c in l)l.hasOwnProperty(c)&&y(t,c,l[c])}else"insertRule"in n?n.insertRule(r,n.cssRules.length):"addRule"in n&&n.addRule(r,n.cssRules.length)}function w(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r,o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&F(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function m(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&E(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function h(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&O(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function x(t,e,o,r,c){e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover::placeholder",o=e+"{"+c+"}";if(u(e)){var l,a=b(c);for(l in a)a.hasOwnProperty(l)&&P(t,l,a[l])}else"insertRule"in n?n.insertRule(o,n.cssRules.length):"addRule"in n&&n.addRule(o,n.cssRules.length)}function a(t,e,o){for(var r=0;r<n.cssRules.length;r++)if(n.cssRules[r].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form'||n.cssRules[r].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form'){switch(e){case"margin-top":n.cssRules[r].style.marginTop=o;break;case"margin-bottom":n.cssRules[r].style.marginBottom=o;break;case"margin-left":n.cssRules[r].style.marginLeft=o;break;case"margin-right":n.cssRules[r].style.marginRight=o;break;case"border-width":n.cssRules[r].style.borderWidth=o,n.cssRules[r].style.borderTopWidth=o,n.cssRules[r].style.borderLeftWidth=o,n.cssRules[r].style.borderRightWidth=o,n.cssRules[r].style.borderBottomWidth=o,n.cssRules[r].style.borderTop=o+" "+n.cssRules[r].style.borderTopStyle+" "+n.cssRules[r].style.borderTopColor,n.cssRules[r].style.borderLeft=o+" "+n.cssRules[r].style.borderLeftStyle+" "+n.cssRules[r].style.borderLeftColor,n.cssRules[r].style.borderRight=o+" "+n.cssRules[r].style.borderRightStyle+" "+n.cssRules[r].style.borderRightColor,n.cssRules[r].style.borderBottom=o+" "+n.cssRules[r].style.borderBottomStyle+" "+n.cssRules[r].style.borderBottomColor;break;case"border-color":n.cssRules[r].style.borderColor=o,n.cssRules[r].style.borderTopColor=o,n.cssRules[r].style.borderLeftColor=o,n.cssRules[r].style.borderRightColor=o,n.cssRules[r].style.borderBottomColor=o;break;case"border-style":n.cssRules[r].style.borderStyle=o,n.cssRules[r].style.borderTopStyle=o,n.cssRules[r].style.borderLeftStyle=o,n.cssRules[r].style.borderRightStyle=o,n.cssRules[r].style.borderBottomStyle=o,n.cssRules[r].style.borderTop=n.cssRules[r].style.borderTopWidth+" "+o+" "+n.cssRules[r].style.borderTopColor,n.cssRules[r].style.borderLeft=n.cssRules[r].style.borderLeftWidth+" "+o+" "+n.cssRules[r].style.borderLeftColor,n.cssRules[r].style.borderRight=n.cssRules[r].style.borderRightWidth+" "+o+" "+n.cssRules[r].style.borderRightColor,n.cssRules[r].style.borderBottom=n.cssRules[r].style.borderBottomWidth+" "+o+" "+n.cssRules[r].style.borderBottomColor;break;case"border-radius":n.cssRules[r].style.borderRadius=o,n.cssRules[r].style.borderTopLeftRadius=o,n.cssRules[r].style.borderTopRightRadius=o,n.cssRules[r].style.borderBottomLeftRadius=o,n.cssRules[r].style.borderBottomRightRadius=o,n.cssRules[r].style.webkitBorderRadius=o,n.cssRules[r].style.webkitBorderTopLeftRadius=o,n.cssRules[r].style.webkitBorderTopRightRadius=o,n.cssRules[r].style.webkitBorderBottomLeftRadius=o,n.cssRules[r].style.webkitBorderBottomRightRadius=o;break;case"background-color":n.cssRules[r].style.backgroundColor=o}break}}function R(t,e,o,r){for(var c='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .'+e,l='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form',a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText==c||n.cssRules[a].selectorText==l){switch(o){case"text-color":n.cssRules[a].style.color=r;break;case"border-color":n.cssRules[a].style.borderColor=r;break;case"font-size":n.cssRules[a].style.fontSize=r}break}}function y(t,e,o){for(var r='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form .wpcf7-column',c='[data-rex-element-id="'+t+'"].rex-element-wrapper .wpcf7-form .wpcf7-column',l=0;l<n.cssRules.length;l++)if(n.cssRules[l].selectorText==r||n.cssRules[l].selectorText==c){switch(e){case"padding-top":n.cssRules[l].style.paddingTop=o;break;case"padding-left":n.cssRules[l].style.paddingLeft=o;break;case"padding-right":n.cssRules[l].style.paddingRight=o;break;case"padding-bottom":n.cssRules[l].style.paddingBottom=o}break}}function F(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r||n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r){switch(c){case"float":n.cssRules[a].style.float=l;break;case"width":n.cssRules[a].style.width=l;break;case"height":n.cssRules[a].style.height=l;break;case"text-color":n.cssRules[a].style.color=l;break;case"font-size":n.cssRules[a].style.fontSize=l;break;case"margin-top":n.cssRules[a].style.marginTop=l;break;case"margin-bottom":n.cssRules[a].style.marginBottom=l;break;case"margin-left":n.cssRules[a].style.marginLeft=l;break;case"margin-right":n.cssRules[a].style.marginRight=l;break;case"padding-top":n.cssRules[a].style.paddingTop=l;break;case"padding-bottom":n.cssRules[a].style.paddingBottom=l;break;case"padding-left":n.cssRules[a].style.paddingLeft=l;break;case"padding-right":n.cssRules[a].style.paddingRight=l;break;case"border-width":n.cssRules[a].style.borderWidth=l,n.cssRules[a].style.borderTopWidth=l,n.cssRules[a].style.borderLeftWidth=l,n.cssRules[a].style.borderRightWidth=l,n.cssRules[a].style.borderBottomWidth=l,n.cssRules[a].style.borderTop=l+" "+n.cssRules[a].style.borderTopStyle+" "+n.cssRules[a].style.borderTopColor,n.cssRules[a].style.borderLeft=l+" "+n.cssRules[a].style.borderLeftStyle+" "+n.cssRules[a].style.borderLeftColor,n.cssRules[a].style.borderRight=l+" "+n.cssRules[a].style.borderRightStyle+" "+n.cssRules[a].style.borderRightColor,n.cssRules[a].style.borderBottom=l+" "+n.cssRules[a].style.borderBottomStyle+" "+n.cssRules[a].style.borderBottomColor;break;case"border-color":n.cssRules[a].style.borderColor=l,n.cssRules[a].style.borderTopColor=l,n.cssRules[a].style.borderLeftColor=l,n.cssRules[a].style.borderRightColor=l,n.cssRules[a].style.borderBottomColor=l;break;case"border-top-color":n.cssRules[a].style.borderTopColor=l;break;case"border-right-color":n.cssRules[a].style.borderRightColor=l;break;case"border-bottom-color":n.cssRules[a].style.borderBottomColor=l;break;case"border-left-color":n.cssRules[a].style.borderLeftColor=l;break;case"border-style":n.cssRules[a].style.borderStyle=l,n.cssRules[a].style.borderTopStyle=l,n.cssRules[a].style.borderLeftStyle=l,n.cssRules[a].style.borderRightStyle=l,n.cssRules[a].style.borderBottomStyle=l,n.cssRules[a].style.borderTop=n.cssRules[a].style.borderTopWidth+" "+l+" "+n.cssRules[a].style.borderTopColor,n.cssRules[a].style.borderLeft=n.cssRules[a].style.borderLeftWidth+" "+l+" "+n.cssRules[a].style.borderLeftColor,n.cssRules[a].style.borderRight=n.cssRules[a].style.borderRightWidth+" "+l+" "+n.cssRules[a].style.borderRightColor,n.cssRules[a].style.borderBottom=n.cssRules[a].style.borderBottomWidth+" "+l+" "+n.cssRules[a].style.borderBottomColor;break;case"border-radius":n.cssRules[a].style.borderRadius=l,n.cssRules[a].style.borderTopLeftRadius=l,n.cssRules[a].style.borderTopRightRadius=l,n.cssRules[a].style.borderBottomLeftRadius=l,n.cssRules[a].style.borderBottomRightRadius=l,n.cssRules[a].style.webkitBorderRadius=l,n.cssRules[a].style.webkitBorderTopLeftRadius=l,n.cssRules[a].style.webkitBorderTopRightRadius=l,n.cssRules[a].style.webkitBorderBottomLeftRadius=l,n.cssRules[a].style.webkitBorderBottomRightRadius=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l}break}}function E(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":focus"){"text-color"===c&&(n.cssRules[a].style.color=l);break}}function O(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":hover"){switch(c){case"text-color":n.cssRules[a].style.color=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l;break;case"border-color":n.cssRules[a].style.borderColor=l}break}}function P(t,e,o,r,c,l){for(var a=0;a<n.cssRules.length;a++)if(n.cssRules[a].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover::placeholder"||n.cssRules[a].selectorText=='[data-rex-element-id="'+t+'"].rex-element-wrapper .'+r+":hover::placeholder"){switch(c){case"text-color":n.cssRules[a].style.color=l;break;case"background-color":n.cssRules[a].style.backgroundColor=l;break;case"border-color":n.cssRules[a].style.borderColor=l}break}}function k(t,e,o,r){for(var c='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r,l=0;l<n.cssRules.length;l++)if(n.cssRules[l].selectorText==c){n.deleteRule(l);break}}function v(t,e,o,r){for(var c=0;c<n.cssRules.length;c++)if(n.cssRules[c].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":hover"){n.deleteRule(c);break}}function C(t,e,o,r){for(var c=0;c<n.cssRules.length;c++)if(n.cssRules[c].selectorText=='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-row[wpcf7-row-number="'+e+'"] .wpcf7-column[wpcf7-column-number="'+o+'"] .'+r+":focus"){n.deleteRule(c);break}}function A(t){var e,o=t.elementData.wpcf7_data,r=t.elementData.element_target.element_id,t=(a(r,"background-color",o.background_color),a(r,"border-color",o.border_color),a(r,"border-width",o.border_width),a(r,"margin-top",o.margin_top),a(r,"margin-left",o.margin_left),a(r,"margin-right",o.margin_right),a(r,"margin-bottom",o.margin_bottom),s.forEach(function(t){R(r,t,"text-color",o.error_message_color),R(r,t,"border-color",o.error_message_color),R(r,t,"font-size",o.error_message_font_size)}),d.forEach(function(t){R(r,t,"text-color",o.send_message_color),R(r,t,"border-color",o.send_message_color),R(r,t,"font-size",o.send_message_font_size)}),y(r,"padding-top",o.columns.padding_top),y(r,"padding-left",o.columns.padding_left),y(r,"padding-right",o.columns.padding_right),y(r,"padding-bottom",o.columns.padding_bottom),c(t.elementData),Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+r+'"]'));e=o,t.each(function(){var t=f(this).find(".rex-element-data").eq(0);t.attr("data-wpcf7-background-color",e.background_color),t.attr("data-wpcf7-border-color",e.border_color),t.attr("data-wpcf7-border-width",e.border_width),t.attr("data-wpcf7-margin-top",e.margin_top),t.attr("data-wpcf7-margin-left",e.margin_left),t.attr("data-wpcf7-margin-right",e.margin_right),t.attr("data-wpcf7-margin-bottom",e.margin_bottom),t.attr("data-wpcf7-error-message-color",e.error_message_color),t.attr("data-wpcf7-error-message-font-size",e.error_message_font_size),t.attr("data-wpcf7-send-message-color",e.send_message_color),t.attr("data-wpcf7-send-message-font-size",e.send_message_font_size),t.attr("data-wpcf7-columns-padding-top",e.columns.padding_top),t.attr("data-wpcf7-columns-padding-left",e.columns.padding_left),t.attr("data-wpcf7-columns-padding-right",e.columns.padding_right),t.attr("data-wpcf7-columns-padding-bottom",e.columns.padding_bottom),t.attr("data-wpcf7-content-width",e.content.width),t.attr("data-wpcf7-content-height",e.content.height),t.attr("data-wpcf7-content-font-size",e.content.font_size),t.attr("data-wpcf7-content-border-width",e.content.border_width),t.attr("data-wpcf7-content-border-radius",e.content.border_radius),t.attr("data-wpcf7-content-text-color",e.content.text_color),t.attr("data-wpcf7-content-text-color-hover",e.content.text_color_hover),t.attr("data-wpcf7-content-background-color",e.content.background_color),t.attr("data-wpcf7-content-background-color-hover",e.content.background_color_hover),t.attr("data-wpcf7-content-border-color",e.content.border_color),t.attr("data-wpcf7-content-border-color-hover",e.content.border_color_hover)})}function c(t){var r=t,t=r.element_target.element_id,c=r.wpcf7_data.options_different;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-column').not(".with-button").each(function(t,e){var e=f(e),o=0!==e.find(".rex-wpcf7-column-content-data").length,e=z(e,o),o=e.input_type;"file"!=o&&"radio"!=o&&"acceptance"!=o&&(e.background_color=r.wpcf7_data.content.background_color,e.background_color_hover=r.wpcf7_data.content.background_color_hover,e.border_color=r.wpcf7_data.content.border_color,e.border_color_hover=r.wpcf7_data.content.border_color_hover,e.border_width=r.wpcf7_data.content.border_width,e.border_radius=r.wpcf7_data.content.border_radius),c.width||(e.input_width=r.wpcf7_data.content.width),c.height||(e.input_height=r.wpcf7_data.content.height),c.font_size||(e.font_size=r.wpcf7_data.content.font_size),c.text_color||(e.text_color=r.wpcf7_data.content.text_color),e.text_color_hover=r.wpcf7_data.content.text_color_hover,S({columnContentData:e})})}function o(t,e){e=void 0!==e&&e;var o,r,c,l,a,t=t.parents(".rex-element-wrapper");0!==t.find(".rex-element-data").length&&(c=(t=Rexbuilder_Rexelement.generateElementData(t)).element_target.element_id,r=t.wpcf7_data,o=c,c="",c=(c=(c=(c=(c=(c=(c="background-color: "+(r=r).background_color+";border-style: solid;")+"border-color: "+r.border_color+";")+"border-width: "+r.border_width+";")+"margin-top: "+r.margin_top+";")+"margin-left: "+r.margin_left+";")+"margin-right: "+r.margin_right+";")+"margin-bottom: "+r.margin_bottom+";",p(o,c),l="",l=(l+="color:"+r.error_message_color+";")+"font-size:"+r.error_message_font_size+";",s.forEach(function(t){_(o,t,l)}),a="",a=(a+="color:"+r.send_message_color+";")+"font-size:"+r.send_message_font_size+";",d.forEach(function(t){_(o,t,a)}),c="",c=(c=(c=(c+="padding-top: "+r.columns.padding_top+";")+"padding-left: "+r.columns.padding_left+";")+"padding-right: "+r.columns.padding_right+";")+"padding-bottom: "+r.columns.padding_bottom+";",g(o,c),e)&&A({elementData:{element_target:t.element_target,synchronize:t.synchronize,wpcf7_data:t.wpcf7_data}})}function l(t){q(t),e(t)}function e(t){if(t.get(0).querySelector(".rex-wpcf7-column-content-data")){var e,o,r,t=z(t,!0),c=t.target.element_id,l=t.target.row_number,a=t.target.column_number,n=t.field_class,s=t.input_type;switch(s){case"text":case"email":case"number":case"textarea":case"select":r="wpcf7-"+s;break;case"acceptance":r="wpcf7-form-control-wrap";break;case"file":case"submit":r=n;break;case"radio":r="wpcf7-form-control-wrap."+n}var i="";-1===["select","submit"].indexOf(s)&&(i+="color: "+t.text_color_focus+";",m(c,l,a,r,i)),"file"==s&&(i="",i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i+="font-size: "+t.wpcf7_button.font_size+";")+"height: "+t.wpcf7_button.height+";")+"width: "+t.wpcf7_button.width+";")+"border-width: "+t.wpcf7_button.border_width+";")+"border-radius: "+t.wpcf7_button.border_radius+";border-style: solid;")+"margin-top: "+t.wpcf7_button.margin_top+";")+"margin-right: "+t.wpcf7_button.margin_right+";")+"margin-bottom: "+t.wpcf7_button.margin_bottom+";")+"margin-left: "+t.wpcf7_button.margin_left+";")+"padding-top: "+t.wpcf7_button.padding_top+";")+"padding-right: "+t.wpcf7_button.padding_right+";")+"padding-bottom: "+t.wpcf7_button.padding_bottom+";")+"padding-left: "+t.wpcf7_button.padding_left+";")+"color: "+t.wpcf7_button.text_color+";")+"background-color: "+t.wpcf7_button.background_color+";")+"border-color: "+t.wpcf7_button.border_color+";",e="",e=(e=(e+="color: "+t.wpcf7_button.text_color_hover+";")+"background-color: "+t.wpcf7_button.background_color_hover+";")+"border-color: "+t.wpcf7_button.border_color_hover+";",w(c,l,a,r+" label",i),h(c,l,a,r+" label",e)),"submit"==s?(i="",i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i+="font-size: "+t.wpcf7_button.font_size+";")+"height: "+t.wpcf7_button.height+";")+"width: "+t.wpcf7_button.width+";")+"border-width: "+t.wpcf7_button.border_width+";")+"border-radius: "+t.wpcf7_button.border_radius+";border-style: solid;")+"margin-top: "+t.wpcf7_button.margin_top+";")+"margin-right: "+t.wpcf7_button.margin_right+";")+"margin-bottom: "+t.wpcf7_button.margin_bottom+";")+"margin-left: "+t.wpcf7_button.margin_left+";")+"padding-top: "+t.wpcf7_button.padding_top+";")+"padding-right: "+t.wpcf7_button.padding_right+";")+"padding-bottom: "+t.wpcf7_button.padding_bottom+";")+"padding-left: "+t.wpcf7_button.padding_left+";")+"color: "+t.wpcf7_button.text_color+";")+"background-color: "+t.wpcf7_button.background_color+";")+"border-color: "+t.wpcf7_button.border_color+";",e="",e=(e=(e+="color: "+t.wpcf7_button.text_color_hover+";")+"background-color: "+t.wpcf7_button.background_color_hover+";")+"border-color: "+t.wpcf7_button.border_color_hover+";",w(c,l,a,r,i),h(c,l,a,r,e)):(e=i="","file"===s?i+="display: block;":(i=(i=(i=(i+="background-color: "+t.background_color+";")+"border-color: "+t.border_color+";")+"border-width: "+t.border_width+";")+"border-radius: "+t.border_radius+";",e=(e+="background-color: "+t.background_color_hover+";")+"border-color: "+t.border_color_hover+";",-1===["radio","acceptance"].indexOf(s)&&(i+="border-style: solid;")),o="","radio"===s&&(o+="font-size: "+t.font_size+";",w(c,l,a,r+" .wpcf7-radio-label",o+="cursor:pointer;")),"acceptance"===s&&(o+="font-size: "+t.font_size+";",w(c,l,a,r+" .wpcf7-list-item-label",o+="cursor:pointer;"),w(c,l,a,r+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color:"+t.text_color+";"),o="border-bottom-color:"+t.text_color+";",o+="border-right-color:"+t.text_color+";",w(c,l,a,r+" :checked ~ .wpcf7-list-item-label::before",o)),i=(i+="color: "+t.text_color+";")+"width: "+D(s,c,l,a,t.input_width)+";","acceptance"!==s&&(i+="height: "+t.input_height+";"),i+="font-size: "+t.font_size+";",w(c,l,a,r,i),e+="color: "+t.text_color_hover+";",h(c,l,a,r,e),"text"!=s&&"email"!=s&&"number"!=s&&"textarea"!=s||(o="",o+="color:"+t.placeholder_color+";",w(c,l,a,r+"::placeholder",o),i="",i+="color:"+t.placeholder_hover_color+";",x(c,l,a,r,i)))}}function S(t){var e,t=t.columnContentData,o=t.target.element_id,r=t.target.row_number,c=t.target.column_number,l=t.input_type,a=t.field_class,n=t.wpcf7_button.height,s=t.wpcf7_button.width,i=t.wpcf7_button.border_width,d=t.wpcf7_button.border_radius,f=t.wpcf7_button.margin_top,u=t.wpcf7_button.margin_right,b=t.wpcf7_button.margin_bottom,p=t.wpcf7_button.margin_left,_=t.wpcf7_button.padding_top,g=t.wpcf7_button.padding_right,w=t.wpcf7_button.padding_bottom,m=t.wpcf7_button.padding_left,h=t.wpcf7_button.font_size,x=t.background_color,R=t.background_color_hover,y=t.text_color,k=t.text_color_hover,v=t.text_color_focus,C=t.palceholder_color,A=t.palceholder_color_hover,S=t.border_color,z=t.border_color_hover,T=t.wpcf7_button.text_color,q=t.wpcf7_button.text_color_hover,B=t.wpcf7_button.background_color,L=t.wpcf7_button.background_color_hover,U=t.wpcf7_button.border_color,W=t.wpcf7_button.border_color_hover;switch(l){case"text":case"email":case"number":case"textarea":case"select":e="wpcf7-"+l;break;case"acceptance":e="wpcf7-form-control-wrap";break;case"submit":case"file":e=a;break;case"radio":e="wpcf7-form-control-wrap."+a}"radio"===l&&F(o,r,c,e+" .wpcf7-radio-label","font-size",t.font_size),"acceptance"===l&&(F(o,r,c,e+" .wpcf7-list-item-label","font-size",t.font_size),F(o,r,c,e+" :not(:checked) ~ .wpcf7-list-item-label::before","border-color",t.text_color),F(o,r,c,e+" :checked ~ .wpcf7-list-item-label::before","border-bottom-color",t.text_color),F(o,r,c,e+" :checked ~ .wpcf7-list-item-label::before","border-right-color",t.text_color)),"text"!=l&&"email"!=l&&"number"!=l&&"textarea"!=l||(F(o,r,c,e+"::placeholder","text-color",C),P(o,r,c,e,"text-color",A)),"submit"!=l?(E(o,r,c,e,"text-color",v),O(o,r,c,e,"color",k),O(o,r,c,e,"background-color",R),O(o,r,c,e,"border-color",z),F(o,r,c,e,"width",D(l,o,r,c,t.input_width)),"acceptance"!==l&&F(o,r,c,e,"height",t.input_height),F(o,r,c,e,"font-size",t.font_size),F(o,r,c,e,"border-width",t.border_width),F(o,r,c,e,"border-radius",t.border_radius),F(o,r,c,e,"text-color",y),F(o,r,c,e,"background-color",x),F(o,r,c,e,"border-color",S),"file"==l&&(F(o,r,c,e+" label","height",n),F(o,r,c,e+" label","width",s),F(o,r,c,e+" label","border-width",i),F(o,r,c,e+" label","border-radius",d),F(o,r,c,e+" label","margin-top",f),F(o,r,c,e+" label","margin-right",u),F(o,r,c,e+" label","margin-bottom",b),F(o,r,c,e+" label","margin-left",p),F(o,r,c,e+" label","padding-top",_),F(o,r,c,e+" label","padding-right",g),F(o,r,c,e+" label","padding-bottom",w),F(o,r,c,e+" label","padding-left",m),F(o,r,c,e+" label","font-size",h),F(o,r,c,e+" label","text-color",T),F(o,r,c,e+" label","background-color",B),F(o,r,c,e+" label","border-color",U),O(o,r,c,e+" label","text-color",q),O(o,r,c,e+" label","background-color",L),O(o,r,c,e+" label","border-color",W))):(F(o,r,c,e,"height",n),F(o,r,c,e,"width",s),F(o,r,c,e,"border-width",i),F(o,r,c,e,"border-radius",d),F(o,r,c,e,"margin-top",f),F(o,r,c,e,"margin-right",u),F(o,r,c,e,"margin-bottom",b),F(o,r,c,e,"margin-left",p),F(o,r,c,e,"padding-top",_),F(o,r,c,e,"padding-right",g),F(o,r,c,e,"padding-bottom",w),F(o,r,c,e,"padding-left",m),F(o,r,c,e,"font-size",h),F(o,r,c,e,"text-color",T),F(o,r,c,e,"background-color",B),F(o,r,c,e,"border-color",U),O(o,r,c,e,"text-color",q),O(o,r,c,e,"background-color",L),O(o,r,c,e,"border-color",W)),N(o,t)}function z(t,e){var o,r={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",label_text:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}},c=(r.target.element_id=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),r.target.row_number=t.parents(".wpcf7-row").attr("wpcf7-row-number"),r.target.column_number=t.attr("wpcf7-column-number"),/([a-z]+\-[\d]+)(-rexclone-([\d]+))?/),l=t.find(".wpcf7-form-control"),a=(r.field_class=null,0!==l.length&&(l=(l=(l=l.get(0).className.match(c))||t.find(".wpcf7-form-control-wrap").get(0).className.match(c))||t.find("[type=checkbox]").get(0).className.match(c),r.field_class=l[0]),r.input_type=/[a-z]+/.exec(r.field_class)[0],r.input_type="menu"==r.input_type?"select":r.input_type,r.input_type);switch(a){case"text":case"email":case"number":case"textarea":case"select":o="wpcf7-"+a;break;case"acceptance":o="wpcf7-form-control-wrap";break;case"submit":case"file":o=r.field_class;break;case"radio":o="wpcf7-form-control-wrap."+r.field_class}-1!==["text","email","number","textarea"].indexOf(a)&&(r.label_text=t.find(".wpcf7-label-text__paragraph").html()),"acceptance"==a&&(r.text=t.find(".wpcf7-list-item-label").html()),"file"==a&&(r.text=t.find(".wpcf7-file-caption").html());c=t.find(".wpcf7-select").eq(0).find("option");if(0!=c.length&&c.each(function(t,e){""===e.value||e.getAttribute("disabled")||r.wpcf7_list_fields.push(e.textContent)}),0!==t.find(".wpcf7-radio").length&&(l=0===(l=t.find(".wpcf7-radio").eq(0).find(".wpcf7-radio-label")).length?t.find(".wpcf7-radio").eq(0).find(".wpcf7-list-item-label"):l).each(function(t,e){r.wpcf7_list_fields.push(e.textContent)}),e){c=t.find(".rex-wpcf7-column-content-data").eq(0)[0],l=0!==t.find(".wpcf7-validates-as-required").length,e=(l||0!==t.find(".wpcf7-acceptance").length&&(l=0===t.find(".wpcf7-acceptance.optional")),r.wpcf7_required_field=c.getAttribute("data-wpcf7-required-field")?"true"===c.getAttribute("data-wpcf7-required-field"):l,0!==t.find(".wpcf7-validates-as-email").length),l=(r.wpcf7_email=c.getAttribute("data-wpcf7-email")?"true"===c.getAttribute("data-wpcf7-email").toString():e,0!==t.find(".wpcf7-validates-as-number").length),e=(r.wpcf7_only_numbers=c.getAttribute("data-wpcf7-only-numbers")?"true"===c.getAttribute("data-wpcf7-only-numbers").toString():l,void 0!==t.find(".wpcf7-acceptance [type=checkbox]").prop("checked"));if(r.wpcf7_default_check=c.getAttribute("data-wpcf7-default-check")?"true"===c.getAttribute("data-wpcf7-default-check").toString():e,-1!==["text","email","number","textarea"].indexOf(a)?c.hasAttribute("data-wpcf7-placeholder")&&c.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=c.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control").attr("placeholder")||"":-1!==["select"].indexOf(a)&&(c.getAttribute("data-wpcf7-placeholder")?r.wpcf7_placeholder=c.getAttribute("data-wpcf7-placeholder"):r.wpcf7_placeholder=t.find(".wpcf7-form-control [disabled]").text()||""),r.wpcf7_file_max_dimensions=c.getAttribute("data-wpcf7-file-max-dimensions")?c.getAttribute("data-wpcf7-file-max-dimensions").toString():i.wpcf7_file_max_dimensions,"file"===a)if(c.getAttribute("data-wpcf7-file-types"))r.wpcf7_list_fields=c.getAttribute("data-wpcf7-file-types").toString().split(",");else{for(var n=t.find("[type=file]").attr("accept").toString().split(","),s=0;s<n.length;s++)n[s]=n[s].replace(".","");r.wpcf7_list_fields=n}r.input_width=c.getAttribute("data-wpcf7-input-width")?c.getAttribute("data-wpcf7-input-width").toString():t.find("."+o).css("width"),r.input_height=c.getAttribute("data-wpcf7-input-height")?c.getAttribute("data-wpcf7-input-height").toString():t.find("."+o).css("height"),r.font_size=c.getAttribute("data-wpcf7-font-size")?c.getAttribute("data-wpcf7-font-size").toString():t.find("."+o).css("font-size"),r.background_color=c.getAttribute("data-background-color")?c.getAttribute("data-background-color").toString():t.find("."+o).css("background-color"),r.text_color=c.getAttribute("data-text-color")?c.getAttribute("data-text-color").toString():t.find("."+o).css("color"),r.text_color_focus=c.getAttribute("data-text-color-focus")?c.getAttribute("data-text-color-focus").toString():i.text_color_focus,r.select_color_after_selection=c.getAttribute("data-select-color-after-selection")?c.getAttribute("data-select-color-after-selection").toString():"",r.placeholder_color=c.getAttribute("data-placeholder-color")?c.getAttribute("data-placeholder-color").toString():i.placeholder_color,r.placeholder_hover_color=c.getAttribute("data-placeholder-hover-color")?c.getAttribute("data-placeholder-hover-color").toString():i.placeholder_hover_color,r.border_width=c.getAttribute("data-wpcf7-border-width")?c.getAttribute("data-wpcf7-border-width").toString():t.find("."+o).css("border-width"),r.border_radius=c.getAttribute("data-wpcf7-border-radius")?c.getAttribute("data-wpcf7-border-radius").toString():t.find("."+o).css("border-radius"),r.background_color_hover=c.getAttribute("data-background-color-hover")?c.getAttribute("data-background-color-hover").toString():"",r.text_color_hover=c.getAttribute("data-text-color-hover")?c.getAttribute("data-text-color-hover").toString():"",r.border_color=c.getAttribute("data-border-color")?c.getAttribute("data-border-color").toString():t.find("."+o).css("border-color"),r.border_color_hover=c.getAttribute("data-border-color-hover")?c.getAttribute("data-border-color-hover").toString():"",c.getAttribute("data-button-text")?r.wpcf7_button.text=c.getAttribute("data-button-text").toString():"file"==a?r.wpcf7_button.text="Choose a file":"submit"==a&&(r.wpcf7_button.text=t.find("[type=submit]").val()),c.getAttribute("data-button-text-font-size")?r.wpcf7_button.font_size=c.getAttribute("data-button-text-font-size").toString():"file"==a?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==a&&(r.wpcf7_button.font_size=t.find("."+o).css("font-size")),/\d+\.\d+/.test(r.wpcf7_button.font_size)&&(r.wpcf7_button.font_size=/\d+/.exec(r.wpcf7_button.font_size)[0]+"px"),c.getAttribute("data-button-height")?r.wpcf7_button.height=c.getAttribute("data-button-height").toString():"file"==a?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==a&&(r.wpcf7_button.height=t.find("."+o).css("height")),c.getAttribute("data-button-width")?r.wpcf7_button.width=c.getAttribute("data-button-width").toString():"file"==a?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==a&&(r.wpcf7_button.width=t.find("."+o).css("width")),c.getAttribute("data-button-border-width")?r.wpcf7_button.border_width=c.getAttribute("data-button-border-width").toString():"file"==a?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==a&&(r.wpcf7_button.border_width=t.find("."+o).css("border-width")),c.getAttribute("data-button-border-radius")?r.wpcf7_button.border_radius=c.getAttribute("data-button-border-radius").toString():"file"==a?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==a&&(r.wpcf7_button.border_radius=t.find("."+o).css("border-radius")),c.getAttribute("data-button-margin-top")?r.wpcf7_button.margin_top=c.getAttribute("data-button-margin-top").toString():"file"==a?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==a&&(r.wpcf7_button.margin_top=t.find("."+o).css("margin-top")),c.getAttribute("data-button-margin-right")?r.wpcf7_button.margin_right=c.getAttribute("data-button-margin-right").toString():"file"==a?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==a&&(r.wpcf7_button.margin_right=t.find("."+o).css("margin-right")),c.getAttribute("data-button-margin-bottom")?r.wpcf7_button.margin_bottom=c.getAttribute("data-button-margin-bottom").toString():"file"==a?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==a&&(r.wpcf7_button.margin_bottom=t.find("."+o).css("margin-bottom")),c.getAttribute("data-button-margin-left")?r.wpcf7_button.margin_left=c.getAttribute("data-button-margin-left").toString():"file"==a?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==a&&(r.wpcf7_button.margin_left=t.find("."+o).css("margin-left")),c.getAttribute("data-button-padding-top")?r.wpcf7_button.padding_top=c.getAttribute("data-button-padding-top").toString():"file"==a?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==a&&(r.wpcf7_button.padding_top=t.find("."+o).css("padding-top")),c.getAttribute("data-button-padding-right")?r.wpcf7_button.padding_right=c.getAttribute("data-button-padding-right").toString():"file"==a?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==a&&(r.wpcf7_button.padding_right=t.find("."+o).css("padding-right")),c.getAttribute("data-button-padding-bottom")?r.wpcf7_button.padding_bottom=c.getAttribute("data-button-padding-bottom").toString():"file"==a?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==a&&(r.wpcf7_button.padding_bottom=t.find("."+o).css("padding-bottom")),c.getAttribute("data-button-padding-left")?r.wpcf7_button.padding_left=c.getAttribute("data-button-padding-left").toString():"file"==a?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==a&&(r.wpcf7_button.padding_left=t.find("."+o).css("padding-left")),c.getAttribute("data-button-text-color")?r.wpcf7_button.text_color=c.getAttribute("data-button-text-color").toString():"file"==a?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==a&&(r.wpcf7_button.text_color=t.find("."+o).css("color")),r.wpcf7_button.text_color_hover=c.getAttribute("data-button-text-color-hover")?c.getAttribute("data-button-text-color-hover").toString():i.wpcf7_button.text_color_hover,c.getAttribute("data-button-background-color")?r.wpcf7_button.background_color=c.getAttribute("data-button-background-color").toString():"file"==a?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==a&&(r.wpcf7_button.background_color=t.find("."+o).css("background-color")),r.wpcf7_button.background_color_hover=c.getAttribute("data-button-background-color-hover")?c.getAttribute("data-button-background-color-hover").toString():i.wpcf7_button.background_color_hover,c.getAttribute("data-button-border-color")?r.wpcf7_button.border_color=c.getAttribute("data-button-border-color").toString():"file"==a?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==a&&(r.wpcf7_button.border_color=t.find("."+o).css("border-color")),r.wpcf7_button.border_color_hover=c.getAttribute("data-button-border-color-hover")?c.getAttribute("data-button-border-color-hover").toString():i.wpcf7_button.border_color_hover}else r.wpcf7_required_field=i.wpcf7_required_field,r.wpcf7_only_numbers=i.wpcf7_only_numbers,r.wpcf7_default_check=i.wpcf7_default_check,r.wpcf7_placeholder=i.wpcf7_placeholder,r.wpcf7_file_max_dimensions=i.wpcf7_file_max_dimensions,"file"==a&&(r.wpcf7_list_fields=["png","jpg","jpeg","pdf"]),r.input_width=t.find("."+o).css("width"),r.input_height=t.find("."+o).css("height"),r.font_size=i.font_size,r.background_color=t.find("."+o).css("background-color"),r.text_color=t.find("."+o).css("color"),r.text_color_focus=i.text_color_focus,"file"==a?r.wpcf7_button.text="Choose a file":"submit"==a&&(r.wpcf7_button.text="Send"),"file"==a?r.wpcf7_button.font_size=t.find("."+r.field_class+" label").eq(0).css("font-size"):"submit"==a&&(r.wpcf7_button.font_size=t.find("."+o).css("font-size")),"file"==a?r.wpcf7_button.height=t.find("."+r.field_class+" label").eq(0).css("height"):"submit"==a&&(r.wpcf7_button.height=t.find("."+o).css("height")),"file"==a?r.wpcf7_button.width=t.find("."+r.field_class+" label").eq(0).css("width"):"submit"==a&&(r.wpcf7_button.width=t.find("."+o).css("width")),"file"==a?r.wpcf7_button.border_width=t.find("."+r.field_class+" label").eq(0).css("border-width"):"submit"==a&&(r.wpcf7_button.border_width=t.find("."+o).css("border-width")),"file"==a?r.wpcf7_button.border_radius=t.find("."+r.field_class+" label").eq(0).css("border-radius"):"submit"==a&&(r.wpcf7_button.border_radius=t.find("."+o).css("border-radius")),"file"==a?r.wpcf7_button.margin_top=t.find("."+r.field_class+" label").eq(0).css("margin-top"):"submit"==a&&(r.wpcf7_button.margin_top=t.find("."+o).css("margin-top")),"file"==a?r.wpcf7_button.margin_right=t.find("."+r.field_class+" label").eq(0).css("margin-right"):"submit"==a&&(r.wpcf7_button.margin_right=t.find("."+o).css("margin-right")),"file"==a?r.wpcf7_button.margin_bottom=t.find("."+r.field_class+" label").eq(0).css("margin-bottom"):"submit"==a&&(r.wpcf7_button.margin_bottom=t.find("."+o).css("margin-bottom")),"file"==a?r.wpcf7_button.margin_left=t.find("."+r.field_class+" label").eq(0).css("margin-left"):"submit"==a&&(r.wpcf7_button.margin_left=t.find("."+o).css("margin-left")),"file"==a?r.wpcf7_button.padding_top=t.find("."+r.field_class+" label").eq(0).css("padding-top"):"submit"==a&&(r.wpcf7_button.padding_top=t.find("."+o).css("padding-top")),"file"==a?r.wpcf7_button.padding_right=t.find("."+r.field_class+" label").eq(0).css("padding-right"):"submit"==a&&(r.wpcf7_button.padding_right=t.find("."+o).css("padding-right")),"file"==a?r.wpcf7_button.padding_bottom=t.find("."+r.field_class+" label").eq(0).css("padding-bottom"):"submit"==a&&(r.wpcf7_button.padding_bottom=t.find("."+o).css("padding-bottom")),"file"==a?r.wpcf7_button.padding_left=t.find("."+r.field_class+" label").eq(0).css("padding-left"):"submit"==a&&(r.wpcf7_button.padding_left=t.find("."+o).css("padding-left")),"file"==a?r.wpcf7_button.text_color=t.find("."+r.field_class+" label").eq(0).css("color"):"submit"==a&&(r.wpcf7_button.text_color=t.find("."+o).css("color")),r.wpcf7_button.text_color_hover=i.wpcf7_button.text_color_hover,"file"==a?r.wpcf7_button.background_color=t.find("."+r.field_class+" label").eq(0).css("background-color"):"submit"==a&&(r.wpcf7_button.background_color=t.find("."+o).css("background-color")),r.wpcf7_button.background_color_hover=i.wpcf7_button.background_color_hover,"file"==a?r.wpcf7_button.border_color=t.find("."+r.field_class+" label").eq(0).css("border-color"):"submit"==a&&(r.wpcf7_button.border_color=t.find("."+o).css("border-color")),r.wpcf7_button.border_color_hover=i.wpcf7_button.border_color_hover;return r}function r(){Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-column").each(function(t,e){var o,r=f(e),c={text:0!=r.find("[type=text]").length,email:0!=r.find(".wpcf7-email").length,number:0!=r.find(".wpcf7-number").length,textarea:0!=r.find(".wpcf7-textarea").length,select:0!=r.find(".wpcf7-select").length,radio:0!=r.find(".wpcf7-radio").length,acceptance:0!=r.find(".wpcf7-acceptance").length,file:0!=r.find(".wpcf7-file").length,submit:0!=r.find(".wpcf7-submit").length},l="";for(o in c)if(1==c[o]){l=o;break}var a=null;switch(l){case"text":case"email":case"number":case"textarea":(a=r.find(".wpcf7-"+l)).attr("size","");var n,s=a,i=s.parents(".wpcf7-column-content").children("label");0!==i.length?1===i.length&&i.addClass("wpcf7-label-text"):(i=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),d=s.parents(".wpcf7-form-control-wrap").get(0),n=document.createElement("label"),Rexbuilder_Util.addClass(n,"wpcf7-label-text"),n.insertAdjacentHTML("afterbegin",i),d.parentNode.insertBefore(n,d),n.appendChild(d),Rexbuilder_Util.editorMode&&(i=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph"),n=s.parents(".rex-element-wrapper").attr("data-rex-element-id"),d=s.parents(".wpcf7-row").attr("wpcf7-row-number"),s=s.parents(".wpcf7-column").attr("wpcf7-column-number"),(n=Rexbuilder_Rexwpcf7_Editor.retrieveFormsInPage()[n].find('[wpcf7-row-number="'+d+'"] [wpcf7-column-number="'+s+'"] .wpcf7-column-content').get(0)).innerHTML='<label class="wpcf7-label-text">'+i+n.textContent+"</label>"));break;case"select":var d="";""==(a=r.find(".wpcf7-select")).find("option").eq(0).val()?((s=a.find("option").eq(0)).attr("disabled",""),s.attr("selected",""),d=s.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),s.text(d),""===s.text()&&(s.text("Select something"),a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))):(i=f("<option value disabled selected></option>"),a.prepend(i),d=a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder"),i.text(d),""===i.text()&&(i.text("Select something"),a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-wpcf7-placeholder","Select something"))),a.on("change",function(){var t=a.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-select-color-after-selection");a.css("color",t)})}}),t(),T()}function t(){if(Rexbuilder_Util.rexContainer&&void 0!==Rexbuilder_Util.rexContainer){for(var t,e,o,r=Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-radio"),c=r.length,l=0;l<c;l++)(o=(e=r[l]).className.match(/radio-\d+/))&&(o=o[0],Rexbuilder_Util.removeClass(e,o),t=e.querySelector("[type=radio]").name,e=e.parentNode,Rexbuilder_Util.addClass(e,o),Rexbuilder_Util.removeClass(e,t));Rexbuilder_Util.$rexContainer.find('.wpcf7 input[type="radio"]').each(function(t,e){var o,r,e=f(e),c=(e.addClass("with-gap"),e.attr("id","wpcf7-radio-"+(t+1)),e.siblings(".wpcf7-list-item-label"));0!==c.length?(o=c.text(),c.empty(),(r=f(document.createElement("label"))).addClass("wpcf7-radio-label"),r.attr("for",e.attr("id")),r.text(o),r.insertAfter(c),c.removeClass("wpcf7-list-item-label")):e.siblings(".wpcf7-radio-label").attr("for","wpcf7-radio-"+(t+1))})}}function T(){Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .wpcf7 .wpcf7-form-control-wrap").has(".wpcf7-file").each(function(t,e){var e=f(e),o=(0===e.find(".wpcf7-file-caption").length&&e.siblings(".wpcf7-file-caption").detach().appendTo(e),e.find("[type=file]")),r=o.get(0).className,r=/file-\w+/gm.exec(r),r=(r&&(r=r[0],o.removeClass(r),o.parents(".wpcf7-form-control-wrap").addClass(r)),o.attr("id","wpcf7-file-"+(t+1)),o.siblings("label").remove(),f('<label for="'+o.attr("id")+'"></label>')),t=(r.insertAfter(o),void 0!==e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text")?(t=e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text"),r.text(t)):(r.text("Choose a file"),e.parents(".wpcf7-column").find(".rex-wpcf7-column-content-data").attr("data-button-text","Choose a file")),o.parents(".wpcf7-column")),r=z(t,!0);N(r.target.element_id,r),l(t)})}function q(t){var e=t.parents(".rex-element-wrapper").attr("data-rex-element-id"),o=t.parents(".wpcf7-row").attr("wpcf7-row-number"),r=t.attr("wpcf7-column-number");if(0===t.find(".wpcf7-add-new-form-content").length&&0==t.parents("#rex-wpcf7-tools").length){var c,l=(null===(l=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control").get(0).classList))&&null===(l=/[a-z]+\-[0-9]+/.exec(t.find(".wpcf7-form-control-wrap").get(0).classList))?/[a-z]+\-[0-9]+/.exec(t.find("[type=checkbox]").get(0).classList):l)[0],a=/[a-z]+/.exec(l)[0];switch(a="menu"==a?"select":a){case"text":case"email":case"number":case"textarea":case"select":c="wpcf7-"+a;break;case"acceptance":c="wpcf7-form-control-wrap";break;case"submit":c=l;break;case"file":k(e,o,r,(c=l)+" label"),v(e,o,r,c+" label");break;case"radio":c="wpcf7-form-control-wrap."+l}k(e,o,r,c),v(e,o,r,c),C(e,o,r,c)}}function N(t,e){var o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-form"),r=e.target.row_number,c=e.target.column_number,l=e.input_type;o.each(function(){var t=f(this).find('.wpcf7-row[wpcf7-row-number="'+r+'"]').find('.wpcf7-column[wpcf7-column-number="'+c+'"]').find(".rex-wpcf7-column-content-data");"submit"!==l&&"radio"!==l&&t.attr("data-wpcf7-required-field",e.wpcf7_required_field),"text"!==l&&"email"!==l&&"number"!==l||(t.attr("data-wpcf7-email",e.wpcf7_email),t.attr("data-wpcf7-only-numbers",e.wpcf7_only_numbers)),"acceptance"===l&&t.attr("data-wpcf7-default-check",e.wpcf7_default_check),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l&&"select"!==l||t.attr("data-wpcf7-placeholder",e.wpcf7_placeholder),"file"===l&&(t.attr("data-wpcf7-file-max-dimensions",e.wpcf7_file_max_dimensions),t.attr("data-wpcf7-file-types",e.wpcf7_list_fields)),"file"!=l&&"radio"!=l&&"acceptance"!=l&&(t.attr("data-wpcf7-border-width",e.border_width),t.attr("data-wpcf7-border-radius",e.border_radius),t.attr("data-background-color",e.background_color),t.attr("data-background-color-hover",e.background_color_hover),t.attr("data-border-color",e.border_color),t.attr("data-border-color-hover",e.border_color_hover)),t.attr("data-wpcf7-input-width",e.input_width),t.attr("data-wpcf7-input-height",e.input_height),t.attr("data-wpcf7-font-size",e.font_size),t.attr("data-text-color",e.text_color),t.attr("data-text-color-hover",e.text_color_hover),t.attr("data-text-color-focus",e.text_color_focus),"select"===l&&t.attr("data-select-color-after-selection",e.select_color_after_selection),"text"!==l&&"email"!==l&&"number"!==l&&"textarea"!==l||(t.attr("data-placeholder-color",e.placeholder_color),t.attr("data-placeholder-hover-color",e.placeholder_hover_color)),"file"!==l&&"submit"!==l||(t.attr("data-button-text",e.wpcf7_button.text),t.attr("data-button-text-font-size",e.wpcf7_button.font_size),t.attr("data-button-height",e.wpcf7_button.height),t.attr("data-button-width",e.wpcf7_button.width),t.attr("data-button-border-width",e.wpcf7_button.border_width),t.attr("data-button-border-radius",e.wpcf7_button.border_radius),t.attr("data-button-margin-top",e.wpcf7_button.margin_top),t.attr("data-button-margin-right",e.wpcf7_button.margin_right),t.attr("data-button-margin-bottom",e.wpcf7_button.margin_bottom),t.attr("data-button-margin-left",e.wpcf7_button.margin_left),t.attr("data-button-padding-top",e.wpcf7_button.padding_top),t.attr("data-button-padding-right",e.wpcf7_button.padding_right),t.attr("data-button-padding-bottom",e.wpcf7_button.padding_bottom),t.attr("data-button-padding-left",e.wpcf7_button.padding_left),t.attr("data-button-text-color",e.wpcf7_button.text_color),t.attr("data-button-text-color-hover",e.wpcf7_button.text_color_hover),t.attr("data-button-background-color",e.wpcf7_button.background_color),t.attr("data-button-background-color-hover",e.wpcf7_button.background_color_hover),t.attr("data-button-border-color",e.wpcf7_button.border_color),t.attr("data-button-border-color-hover",e.wpcf7_button.border_color_hover))}),Rexbuilder_Util.editorMode&&Rexbuilder_Rexwpcf7_Editor.updateSpanDataInDB(t,e)}function D(t,e,o,r,c){var l=-1!==["text","email","number","textarea","select"].indexOf(t)&&/\%/.test(c);return Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-row[wpcf7-row-number="'+o+'"] .wpcf7-column[wpcf7-column-number="'+r+'"] .wpcf7-form-control-wrap')).forEach(function(t){t.style.width=l?c:""}),l?"100%":c}return{init:function(){var t,e;this.$rexFormsStyle=f("#rexpansive-builder-rexwpcf7-style-inline-css"),0===Rexbuilder_Rexwpcf7.$rexFormsStyle.length&&(t=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css",e.id="rexpansive-builder-rexwpcf7-style-inline-css",e.dataset.rexName="rexwpcf7-style",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e));for(var o=0;o<document.styleSheets.length;o++)"rexpansive-builder-rexwpcf7-style-inline-css"==document.styleSheets[o].ownerNode.id&&(n=document.styleSheets[o]);Rexbuilder_Util.editorMode||r(),Rexbuilder_Rexelement.addStyles(),Rexbuilder_Util.$rexContainer.find(".wpcf7-form:not(.no-builder-form) .wpcf7-radio").each(function(t,o){f(o).find(".wpcf7-list-item").click(function(t){t.preventDefault();t=f(t.target).parents(".wpcf7-list-item");t.hasClass("selected")||(f(o).find(".wpcf7-list-item").each(function(t,e){f(e).removeClass("selected"),f(o).find("input").prop("checked",!1)}),t.addClass("selected"),t.find("input").prop("checked",!0))})}),Rexbuilder_Util.editorMode||document.addEventListener("wpcf7submit",function(t){var e,t=t.target,t=f(t).parents(".perfect-grid-gallery");0!==t.length&&(e=RexGrid.data(t.get(0)))&&setTimeout(function(){e.endResize()},200)}),Rexbuilder_Util.editorMode||f(".wpcf7-column.with-button").each(function(t,e){Rexbuilder_Util.removeClass(e,"with-button"),Rexbuilder_Util.addClass(e,"column-empty"),e.innerHTML=""})},guessWidthToSet:D,addFormStyle:o,refreshFormStyle:function(t,e){o(t,e)},addColumnContentStyle:e,removeColumnContentStyle:q,refreshColumnContentStyle:l,fixInputs:r,fixWpcf7RadioButtons:t,fixWpcf7Files:T,generateColumnContentData:z,updateForm:A,updateFormContent:c,updateColumnContent:S,addFormRule:p,addFormMessageRule:_,addFormColumnsRule:g,addColumnContentRule:w,addColumnContentFocusRule:m,addColumnContentHoverRule:h,addColumnContentPlaceholderHoverRule:x,updateFormRule:a,updateFormMessageRule:R,updateFormColumnsRule:y,updateColumnContentRule:F,updateColumnContentFocusRule:E,updateColumnContentHoverRule:O,updateColumnContentPlaceholderHoverRule:P,removeFormRule:function(t){for(var e='.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7-form',o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText==e){n.deleteRule(o);break}},removeColumnContentRule:k,removeColumnContentHoverRule:v,removeColumnContentFocusRule:C}}(jQuery);
var Rexbuilder_Rexwpcf7_Editor=function(F){"use strict";var k,M,w=[],m={};function i(e,t,a,r){var n,c,e=function(e){var t=/(-rexclone-)(\d+)$/,a=e.querySelector(".wpcf7-form-control:not(.wpcf7-acceptance):not(.wpcf7-radio)"),r=null;if(a){if(a.matches(".wpcf7-submit"))return null}else(r=e.querySelector(".wpcf7-form-control").className.match(/wpcf7-(radio|acceptance)/))&&(r=r[1],a=e.querySelector('[type="'+("acceptance"===r?"checkbox":"radio")+'"]'));e=a.getAttribute("name");var n,a=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('[name^="'+e.replace(t,"")+'"]')),c=1;a.forEach(function(e){(n=e.getAttribute("name").match(t))&&(c=parseInt(n[2])>c?parseInt(n[2]):c)}),c++,a=t.test(e)?e.replace(t,"-rexclone-"+c):e+"-rexclone-"+c;return{inputType:r,oldName:e,newName:a}}(e);e&&((c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"] .wpcf7 .wpcf7-row[wpcf7-row-number="'+a+'"] .wpcf7-column[wpcf7-column-number="'+r+'"]')).find(".rex-wpcf7-column-info").attr("data-tippy-content",e.newName),"radio"!==e.inputType&&((n=c.find(".wpcf7-form-control-wrap").get(0)).className=n.className.replace(e.oldName,e.newName)),(e.inputType?c.find('[type="'+("acceptance"===e.inputType?"checkbox":"radio")+'"]'):c.find(".wpcf7-form-control")).attr("name",e.newName),n=t,c={newRowNumber:a,newColumnNumber:r,oldName:e.oldName,newName:e.newName},t=c.newRowNumber,a=c.newColumnNumber,r=c.oldName,c=c.newName,n=k[n].find('.wpcf7-row[wpcf7-row-number="'+t+'"] .wpcf7-column[wpcf7-column-number="'+a+'"] .wpcf7-column-content').get(0),-1!==(t=n.innerHTML).indexOf(r)?n.innerHTML=t.replace(r,c):console.error("Something went wrong when cloning fields!"))}function $(e){var t,a,r,n,c=e.target.element_id,o=e.target.row_number,l=e.target.column_number,i=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+"\"] .wpcf7-row[wpcf7-row-number='"+o+"'] .wpcf7-column[wpcf7-column-number='"+l+"']"),p=e.content.field_class,f=e.content.input_type,d=e.propertyName,s=e.propertyType,u=e.newValue,w=e.content.wpcf7_required_field,m=e.content.wpcf7_only_numbers,b=e.content.wpcf7_email;switch(f="text"===f?m?"number":b?"email":"text":f){case"text":case"email":case"number":case"textarea":case"select":t="wpcf7-"+f;break;case"acceptance":t="wpcf7-form-control-wrap";break;case"submit":case"file":t=p;break;case"radio":t="wpcf7-form-control-wrap."+p}switch(s){case"background-color":case"border-width":case"border-radius":case"border-color":"file"!=f&&"radio"!=f&&"acceptance"!=f&&Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u);break;case"font-size":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u),Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" .wpcf7-radio-label",d,u),Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" .wpcf7-list-item-label",d,u);break;case"width":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,Rexbuilder_Rexwpcf7.guessWidthToSet(f,c,o,l,u));break;case"height":case"text-color":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u),"acceptance"===f&&[{property:"border-color",selector:t+" :not(:checked) ~ .wpcf7-list-item-label::before"},{property:"border-bottom-color",selector:t+" :checked ~ .wpcf7-list-item-label::before"},{property:"border-right-color",selector:t+" :checked ~ .wpcf7-list-item-label::before"}].forEach(function(e){Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,e.selector,e.property,u)});break;case"placeholder-color":Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+"::placeholder",d,u);break;case"select-color":/color\:/.test(i.find(".wpcf7-select").attr("style"))&&i.find(".wpcf7-select").css("color",u);break;case"button-text":"file"===f?i.find("label").text(u):"submit"===f&&i.find("[type=submit]").val(u);break;case"button-width":case"button-height":case"button-border-width":case"button-border-radius":case"button-margin-top":case"button-margin-right":case"button-margin-bottom":case"button-margin-left":case"button-padding-top":case"button-padding-right":case"button-padding-bottom":case"button-padding-left":case"button-font-size":case"button-text-color":case"button-background-color":case"button-border-color":"file"==f?Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t+" label",d,u):Rexbuilder_Rexwpcf7.updateColumnContentRule(c,o,l,t,d,u);break;case"background-color-hover":case"border-color-hover":"file"!=f&&"radio"!=f&&"acceptance"!=f&&Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"text-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"placeholder-color-hover":Rexbuilder_Rexwpcf7.updateColumnContentPlaceholderHoverRule(c,o,l,t,d,u);break;case"text-focus":Rexbuilder_Rexwpcf7.updateColumnContentFocusRule(c,o,l,t,d,u);break;case"button-text-color-hover":case"button-background-color-hover":case"button-border-color-hover":"file"==f?Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t+" label",d,u):Rexbuilder_Rexwpcf7.updateColumnContentHoverRule(c,o,l,t,d,u);break;case"wpcf7-required":if(w)switch(f){case"text":case"email":case"number":case"select":case"file":case"textarea":i.find(".wpcf7-"+f).addClass("wpcf7-validates-as-required"),i.find(".wpcf7-"+f).attr("aria-required","true");break;case"acceptance":i.find(".wpcf7-acceptance").removeClass("optional")}else switch(f){case"text":case"email":case"number":case"select":case"file":case"textarea":i.find(".wpcf7-"+f).removeClass("wpcf7-validates-as-required"),i.find(".wpcf7-"+f).removeAttr("aria-required");break;case"acceptance":i.find(".wpcf7-acceptance").addClass("optional")}break;case"wpcf7-email":b?(a=(r=i.find(".wpcf7-form-control")).attr("type"),H=new RegExp(a+"-[\\d]+").exec(r[0].classList)[0],n="email-"+/[0-9]+/.exec(H)[0],r.attr("type","email"),r.removeClass(H).removeClass("wpcf7-"+a).removeClass("wpcf7-validates-as-number"),r.addClass(n).addClass("wpcf7-email").addClass("wpcf7-validates-as-email"),f="email"):(f=m?"number":"text",r=i.find(".wpcf7-email"),H=/email-[\d]+/.exec(r[0].classList)[0],n=f+"-"+/[0-9]+/.exec(H)[0],r.attr("type",f),r.removeClass(H).removeClass("wpcf7-email").removeClass("wpcf7-validates-as-email"),r.addClass(n).addClass("wpcf7-"+f),"number"===f&&r.addClass("wpcf7-validates-as-number")),i.each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(F(t))});break;case"wpcf7-only-numbers":m?(a=(r=i.find(".wpcf7-form-control")).attr("type"),H=new RegExp(a+"-[\\d]+").exec(r[0].classList)[0],n="number-"+/[0-9]+/.exec(H)[0],r.attr("type","number"),r.removeClass(H).removeClass("wpcf7-"+a).removeClass("wpcf7-validates-as-email"),r.addClass(n).addClass("wpcf7-number").addClass("wpcf7-validates-as-number"),f="number"):(f=b?"email":"text",r=i.find(".wpcf7-number"),H=/number-[\d]+/.exec(r[0].classList)[0],n=f+"-"+/[0-9]+/.exec(H)[0],r.attr("type",f),r.removeClass(H).removeClass("wpcf7-number").removeClass("wpcf7-validates-as-number"),r.addClass(n).addClass("wpcf7-"+f),"email"===f&&r.addClass("wpcf7-validates-as-email")),i.each(function(e,t){Rexbuilder_Rexwpcf7.refreshColumnContentStyle(F(t))});break;case"wpcf7-placeholder":switch(f){case"text":case"email":case"number":case"textarea":i.find(".wpcf7-"+f).attr("placeholder",u);break;case"select":i.find(".wpcf7-"+f+" option[disabled]").text(u)}break;case"wpcf7-default-check":i.find(".wpcf7-acceptance input[type='checkbox']").prop("checked",u);break;case"wpcf7-label-text-editor":u=u.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),i.find(".wpcf7-label-text__paragraph").html(u);break;case"wpcf7-text-editor":switch(u=u.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),f){case"acceptance":i.find(".wpcf7-list-item-label").html(u);break;case"file":i.find(".wpcf7-file-caption").html(u)}break;case"wpcf7-file-dimensions":break;case"wpcf7-list":var x,c=i.parents(".rex-element-wrapper").eq(0).attr("data-rex-element-id"),_=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+'"]').length;switch(f){case"select":i.get().forEach(function(a){u.fields.forEach(function(e,t){(x=a.querySelectorAll(".wpcf7-select option:not([disabled])")[t]).setAttribute("value",e),x.innerText=e})});break;case"radio":var h=u.fields,g=u.type,v=h.length;switch(g){case"resetting":var C=i[0].querySelectorAll(".wpcf7-list-item").length;if(C<v)for(var R=0;R<v-C;R++)$({target:e.target,content:e.content,propertyType:"wpcf7-list-add",propertyName:void 0,newValue:void 0});else if(v<C)for(R=0;R<C-v;R++)$({target:e.target,content:e.content,propertyType:"wpcf7-list-remove",propertyName:void 0,newValue:C-1-R});case"sorting":for(R=0;R<_;R++){var y=i.eq(R).find(".wpcf7-radio .wpcf7-list-item");y.removeClass("first").removeClass("last"),y.first().addClass("first"),y.last().addClass("last")}case"writing":for(R=0;R<_;R++)for(R=0;R<v;R++)i.eq(R).find(".wpcf7-radio .wpcf7-list-item").eq(R).find("input").val(h[R]).end().find(".wpcf7-radio-label").text(h[R])}for(R=0;R<_;R++)for(R=0;R<v;R++)i.find(".wpcf7-radio .wpcf7-list-item").removeClass("first").removeClass("last"),i.find(".wpcf7-radio .wpcf7-list-item").eq(R).find("input").val(h[R]),i.find(".wpcf7-radio .wpcf7-list-item").eq(R).find(".wpcf7-radio-label").text(h[R]);i.find(".wpcf7-radio .wpcf7-list-item").eq(0).addClass("first"),i.find(".wpcf7-radio .wpcf7-list-item").eq(v-1).addClass("last");break;case"file":u.fields=u.fields.map(function(e){return"."+e}),i.find(".wpcf7-file").attr("accept",u.fields)}break;case"wpcf7-list-add":switch(f){case"select":var k=F(document.createElement("option"));k.attr("value",""),i.find(".wpcf7-select").append(k);break;case"radio":var k=0==i.find(".wpcf7-radio .wpcf7-list-item").length,T=i.find(".wpcf7-radio");k?(k=tmpl("tmpl-rexwpcf7-new-radio-field",{}),T.append(k)):(k=i.find(".wpcf7-radio .wpcf7-list-item.last").eq(0).clone(),i.find(".wpcf7-radio .wpcf7-list-item.last").removeClass("last"),k.find(".wpcf7-radio-label").text(""),k.find("[type='radio']").val(""),k.addClass("last"),k.removeClass("first"),T.append(k)),Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":i.find(".wpcf7-file").attr("accept",i.find(".wpcf7-file").attr("accept")+",")}break;case"wpcf7-list-remove":var S=parseInt(u);switch(f){case"select":for(var A=i.find(".wpcf7-select").length,R=0;R<A;R++)i.find(".wpcf7-select").eq(R).find("option").eq(S).remove();break;case"radio":for(var I=i.length,R=0;R<I;R++)for(var q=F(i[R].querySelectorAll(".wpcf7-radio")),L=F(q[0].querySelectorAll(".wpcf7-list-item")[S-1]),U=L.hasClass("first"),N=L.hasClass("last"),E=(L.remove(),U&&N||(U&&(L=q.find(".wpcf7-list-item").first().addClass("first")),N&&(L=q.find(".wpcf7-list-item").last().addClass("last"))),q.find(".wpcf7-list-item")),R=0;R<E.length;R++){var H=/wpcf7-radio\-[0-9]+/.exec(E.find("[type='radio']")[R].id)[0];F(E.find("[type='radio']")[R]).removeClass(H)}Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons();break;case"file":var j=i.find(".wpcf7-file").attr("accept").split(",");j.splice(u-1,1),i.find(".wpcf7-file").attr("accept",j)}}M.updateHeight()}function u(e){var e=e.editPoint,t=e.element_id,a=e.row_number,e=e.column_number,r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').find(".wpcf7-row[wpcf7-row-number='"+a+"']").find(".wpcf7-column[wpcf7-column-number='"+e+"']"),t=k[t].find(".wpcf7-row[wpcf7-row-number='"+a+"']").find(".wpcf7-column[wpcf7-column-number='"+e+"']"),a=F(document.createElement("span")),e=(a.addClass("rex-wpcf7-column-content-data"),0!=r.find(".wpcf7-radio").length),n=0!=r.find(".wpcf7-acceptance").length,c=0!=r.find(".wpcf7-file").length,o=0!=r.find(".wpcf7-submit").length,l=r.parents(".rex-element-wrapper").find(".rex-element-data"),e=(e||n||c||o||(a.attr("data-background-color",l.attr("data-wpcf7-content-background-color")),a.attr("data-border-color",l.attr("data-wpcf7-content-border-color")),a.attr("data-wpcf7-border-width",l.attr("data-wpcf7-content-border-width")),a.attr("data-background-color-hover",l.attr("data-wpcf7-content-background-color-hover")),a.attr("data-border-color-hover",l.attr("data-wpcf7-content-border-color-hover"))),o||(a.attr("data-wpcf7-input-width",l.attr("data-wpcf7-content-width")),a.attr("data-wpcf7-input-height",l.attr("data-wpcf7-content-height")),a.attr("data-text-color",l.attr("data-wpcf7-content-text-color")),a.attr("data-wpcf7-font-size",l.attr("data-wpcf7-content-font-size")),a.attr("data-text-color-hover",l.attr("data-wpcf7-content-text-color-hover"))),a.clone());r.prepend(a),0===t.find(".wpcf7-column-content").length&&(n=t.html(),c=F('<span class="wpcf7-column-content">'+n+"</div>"),t.empty().append(c)),t.prepend(e)}function T(e,t){var a,r;k&&(e=k[e],r=t.target.row_number,a=t.target.column_number,e=e.find('.wpcf7-row[wpcf7-row-number="'+r+'"]').find('.wpcf7-column[wpcf7-column-number="'+a+'"]').find(".rex-wpcf7-column-content-data"),"submit"!==(r=t.input_type)&&"radio"!==r&&e.attr("data-wpcf7-required-field",t.wpcf7_required_field),"text"!==r&&"email"!==r&&"number"!==r||(e.attr("data-wpcf7-email",t.wpcf7_email),e.attr("data-wpcf7-only-numbers",t.wpcf7_only_numbers)),"acceptance"===r&&e.attr("data-wpcf7-default-check",t.wpcf7_default_check),"text"!==r&&"email"!==r&&"number"!==r&&"textarea"!==r&&"select"!==r||e.attr("data-wpcf7-placeholder",t.wpcf7_placeholder),"file"===r&&(e.attr("data-wpcf7-file-max-dimensions",t.wpcf7_file_max_dimensions),e.attr("data-wpcf7-file-types",t.wpcf7_list_fields)),"file"!=r&&"radio"!=r&&"acceptance"!=r&&(e.attr("data-wpcf7-border-width",t.border_width),e.attr("data-wpcf7-border-radius",t.border_radius),e.attr("data-background-color",t.background_color),e.attr("data-background-color-hover",t.background_color_hover),e.attr("data-border-color",t.border_color),e.attr("data-border-color-hover",t.border_color_hover)),e.attr("data-wpcf7-input-width",t.input_width),e.attr("data-wpcf7-input-height",t.input_height),e.attr("data-wpcf7-font-size",t.font_size),e.attr("data-text-color",t.text_color),e.attr("data-text-color-hover",t.text_color_hover),e.attr("data-text-color-focus",t.text_color_focus),"select"===r&&e.attr("data-select-color-after-selection",t.select_color_after_selection),"text"!==r&&"email"!==r&&"number"!==r&&"textarea"!==r||(e.attr("data-placeholder-color",t.placeholder_color),e.attr("data-placeholder-hover-color",t.placeholder_hover_color)),"file"!==r&&"submit"!==r||(e.attr("data-button-text",t.wpcf7_button.text),e.attr("data-button-text-font-size",t.wpcf7_button.font_size),e.attr("data-button-height",t.wpcf7_button.height),e.attr("data-button-width",t.wpcf7_button.width),e.attr("data-button-border-width",t.wpcf7_button.border_width),e.attr("data-button-border-radius",t.wpcf7_button.border_radius),e.attr("data-button-margin-top",t.wpcf7_button.margin_top),e.attr("data-button-margin-right",t.wpcf7_button.margin_right),e.attr("data-button-margin-bottom",t.wpcf7_button.margin_bottom),e.attr("data-button-margin-left",t.wpcf7_button.margin_left),e.attr("data-button-padding-top",t.wpcf7_button.padding_top),e.attr("data-button-padding-right",t.wpcf7_button.padding_right),e.attr("data-button-padding-bottom",t.wpcf7_button.padding_bottom),e.attr("data-button-padding-left",t.wpcf7_button.padding_left),e.attr("data-button-text-color",t.wpcf7_button.text_color),e.attr("data-button-text-color-hover",t.wpcf7_button.text_color_hover),e.attr("data-button-background-color",t.wpcf7_button.background_color),e.attr("data-button-background-color-hover",t.wpcf7_button.background_color_hover),e.attr("data-button-border-color",t.wpcf7_button.border_color),e.attr("data-button-border-color-hover",t.wpcf7_button.border_color_hover)))}function p(e){e.each(function(e,t){F(t).find(".wpcf7-row").each(function(e,t){F(t).attr("wpcf7-row-number",e+1)})})}function f(e){e.each(function(e,t){F(t).find(".wpcf7-row").each(function(e,t){F(t).attr("wpcf7-row-number",e+1)})}),e.find(".wpcf7-row").each(function(e){F(this).find(".wpcf7-column").each(function(){var e=F(this);Rexbuilder_Rexwpcf7.refreshColumnContentStyle(e)})})}function b(){var o=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper");o.find(".wpcf7-rows").addClass("ui-sortable").sortable({direction:"vertical",handle:".rex-wpcf7-row-drag",cursor:"pointer",update:function(e,t){var a=t.item.parents(".rex-element-wrapper").attr("data-rex-element-id"),r=parseInt(t.item.attr("wpcf7-row-number")),t=(f(o.find(".wpcf7-form")),parseInt(t.item.attr("wpcf7-row-number"))),n=k[a].find(".wpcf7-row[wpcf7-row-number='"+r+"']"),c=k[a].find(".wpcf7-row[wpcf7-row-number='"+t+"']");r<t?n.insertAfter(c):n.insertBefore(c),p(k[a]),Rexbuilder_Util_Editor.builderEdited(!1)}})}function x(){F(".wpcf7-form:not(.no-builder-form) .wpcf7-submit:not(.wrapped)").each(function(e,t){Rexbuilder_Util.addClass(t,"wrapped"),F(t).wrap(Rexbuilder_Live_Templates.getTemplate("wpcf7-button-fix"))})}function _(e){for(var t,a,r,n,c=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),o=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),l=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-form:not(.no-builder-form)')),i=0,p=0,f=0;f<l.length;f++)for(l[f].querySelector(".rexwpcf7-form-tools")||l[f].querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",c),t=Array.prototype.slice.call(l[f].getElementsByClassName("wpcf7-row")),i=0;i<t.length;i++)for((a=t[i]).querySelector(".rexwpcf7-row-tools")||a.insertAdjacentHTML("afterbegin",o),r=Array.prototype.slice.call(a.getElementsByClassName("wpcf7-form-control")),p=0;p<r.length;p++)0===F(r[p]).siblings(".rexwpcf7-column-tools").length&&(n=h(r[p]),n=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:n}),r[p].insertAdjacentHTML("afterend",n))}function h(e){var t=e.className.match(/wpcf7-email/);if(t)return e.getAttribute("name");if(t=e.className.match(/wpcf7-(text|number|textarea|select|submit|acceptance|radio|file)/))switch(t=t[1]){case"text":case"number":case"textarea":case"select":case"file":return e.getAttribute("name");case"acceptance":t="checkbox";case"radio":return e.querySelector('[type="'+t+'"]').getAttribute("name");default:return null}}return{init:function(){var t;k={},x(),t=Rexbuilder_Live_Templates.getTemplate("wpcf7-form-tools"),Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")).forEach(function(e){e.querySelector(".wpcf7-rows").insertAdjacentHTML("afterend",t)});for(var e,a=Rexbuilder_Live_Templates.getTemplate("wpcf7-row-tools"),r=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),n=0,c=0;n<r.length;n++)for(e=Array.prototype.slice.call(r[n].querySelectorAll(".wpcf7-row")),c=0;c<e.length;c++)e[c].insertAdjacentHTML("afterbegin",a);for(var o,l,i=Array.prototype.slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".wpcf7-form:not(.no-builder-form)")),p=0,f=0;f<i.length;f++)for(o=Array.prototype.slice.call(i[f].querySelectorAll(".wpcf7-form-control")),p=0;p<o.length;p++)l=h(o[p]),l=Rexbuilder_Live_Templates.getTemplate("wpcf7-column-tools",{name:l}),o[p].insertAdjacentHTML("afterend",l);var d=Rexbuilder_Util.$rexContainer.find(".rex-element-wrapper").has(".wpcf7-form:not(.no-builder-form)");if(0!==d.length){w=[],d.each(function(){w.push(F(this).attr("data-rex-element-id"))}),m={};for(var s=0;s<w.length;s++){var u=w[s];m[u]=m[u]?m[u]+1:1}w=Rexbuilder_Util.removeArrayDuplicates(w),F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:w},success:function(e){if(e.success){for(var t=0;t<w.length;t++)k[w[t]]=F(F.parseHTML(e.data.html_forms[t][0]));b(),Rexbuilder_Rexwpcf7.fixInputs(),Rexbuilder_Rexelement.addStyles()}}})}},retrieveFormsInPage:function(){return k},setCf7EditorInstance:function(e){M=e},addMissingTools:_,wrapButtons:x,updateFormInDB:function(e){var t,a;void 0!==k[e]&&(t=k[e][0].outerHTML,a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').eq(0).find(".rex-element-data")[0].outerHTML,F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_save_changes",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:e,new_form_string:t,element_data_string:a},success:function(e){e.success},error:function(e){}}))},updateSpanDataInDB:T,setRowsSortable:b,removeSeparatedForm:function(e){var t=e.formTarget,e=e.newName,t=Rexbuilder_Util.rexContainer.querySelector('.rex-element-wrapper[data-rex-element-id="'+t.element_id+'"]'),a=(Rexbuilder_Util.removeClass(t,"rex-separate-form"),(a=t.querySelector(".string-shortcode").getAttribute("shortcode")).replace(/title\=\".*\"/,'title="'+e+'"'));t.querySelector(".string-shortcode").setAttribute("shortcode",a)},addField:function(e){var t,a,r,n=e.insertionPoint,c=n.formID,e=e.fieldType,o=Rexbuilder_Util.createRandomNumericID(3),l=n.row_number,i=n.column_number,p=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+c+'"] .wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]'),f=k[c].find('.wpcf7-row[wpcf7-row-number="'+l+'"] .wpcf7-column[wpcf7-column-number="'+i+'"]'),f=(p.empty().removeClass("with-button"),f.empty().removeClass("with-button"),F(document.createElement("span")).addClass("wpcf7-column-content")),d=(p.append(f),p.find(".wpcf7-column-content")),s=Rexbuilder_Public_Templates.getTemplate("label-text-paragraph");switch(e){case"text":t='<label class="wpcf7-label-text">'+s+"[text text-"+o+" class:text-"+o+"]</label>",d.prepend('<label class="wpcf7-label-text">'+s+'<span class="wpcf7-form-control-wrap text-'+o+'"><input type="text" name="text-'+o+'" value="" class="wpcf7-form-control wpcf7-text text-'+o+'" aria-invalid="false"></span></label>');break;case"textarea":t='<label class="wpcf7-label-text">'+s+"[textarea textarea-"+o+" class:textarea-"+o+"]</label>",d.prepend('<label class="wpcf7-label-text">'+s+'<span class="wpcf7-form-control-wrap textarea-'+o+'"><textarea name="textarea-'+o+'" class="wpcf7-form-control wpcf7-textarea textarea-'+o+'" aria-invalid="false"></textarea></span></label>');break;case"menu":t="[select menu-"+o+" class:menu-"+o+' "Field 1" "Field 2"]',d.prepend('<span class="wpcf7-form-control-wrap menu-'+o+'"><select name="menu-'+o+'" class="wpcf7-form-control wpcf7-select menu-'+o+'" aria-invalid="false"><option value="" disabled selected>Select something</option><option value="Field 1">Field 1</option><option value="Field 2">Field 2</option></select></span>');break;case"radiobuttons":t="[radio radio-"+o+' default:1  "Option 1" "Option 2" ]',d.prepend('<span class="wpcf7-form-control-wrap radio-'+o+'"><span class="wpcf7-form-control wpcf7-radio"><span class="wpcf7-list-item first"><input type="radio" name="radio-'+o+'" value="Option 1" checked="checked" class="with-gap" id="wpcf7-radio-1"><span class="wpcf7-list-item-label">Option 1</span></span><span class="wpcf7-list-item last"><input type="radio" name="radio-'+o+'" value="Option 2" class="with-gap" id="wpcf7-radio-2"><span class="wpcf7-list-item-label">Option 2</span></span></span></span>');break;case"acceptance":t="[acceptance acceptance-"+o+" optional]<p>Your text</p>[/acceptance]",d.prepend('<span class="wpcf7-form-control-wrap acceptance-'+o+'"><span class="wpcf7-form-control wpcf7-acceptance optional"><span class="wpcf7-list-item"><label><input type="checkbox" name="acceptance-'+o+'" value="1" aria-invalid="false"><span class="wpcf7-list-item-label"><p>Your text</p></span></label></span></span></span>');break;case"file":t="[file file-"+o+" filetypes: limit:]<div class='wpcf7-file-caption'>Your text here</div>",d.prepend('<span class="wpcf7-form-control-wrap file-'+o+'"><input type="file" name="file-'+o+'" class="wpcf7-form-control wpcf7-file" accept=".jpg,.jpeg,.png,.gif" aria-invalid="false" id="wpcf7-file-2"><label for="wpcf7-file-2">Choose file</label><div class="wpcf7-file-caption">Your text here</div></span>');break;case"submit":t="[submit class:submit-"+o+' "Send"]',d.prepend('<span class="wpcf7-form-control-wrap"><input type="submit" value="Send" class="wpcf7-form-control wpcf7-submit submit-'+o+' wrapped"></span>')}f=t,a=(e=n).formID,r=n.row_number,e=n.column_number,k[a].find('.wpcf7-row[wpcf7-row-number="'+r+'"] .wpcf7-column[wpcf7-column-number="'+e+'"]').removeClass("with-button").append(f),u({editPoint:{element_id:c,row_number:l,column_number:i}}),_(c),Rexbuilder_Rexwpcf7.fixWpcf7Files(),Rexbuilder_Rexwpcf7.fixWpcf7RadioButtons(),Rexbuilder_Rexwpcf7.addColumnContentStyle(p),Rexbuilder_Live_Utilities.launchTooltips(),M.updateHeight()},addNewRow:function(e,t){var a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),r=F(document.createElement("div")),n=parseInt(a.find(".wpcf7-row").last().attr("wpcf7-row-number"))+1;switch(t){case 1:r.addClass("wpcf7-row wpcf7-row__1-column");break;case 2:r.addClass("wpcf7-row wpcf7-row__2-columns");break;case 3:r.addClass("wpcf7-row wpcf7-row__3-columns");break;case 4:r.addClass("wpcf7-row wpcf7-row__4-columns")}r.attr("wpcf7-row-number",n);for(var c=[],o=0;o<t;o++){c[o]=F(document.createElement("div")),c[o].addClass("wpcf7-column with-button"),c[o].attr("wpcf7-column-number",o+1);var l=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row");c[o].append(l),r.append(c[o])}a.each(function(){var e=r.clone();F(this).find(".wpcf7-rows").append(e)}),_(e),a=r,n=k[n=e].find(".wpcf7-row").last(),a.insertAfter(n)},addRow:function(a,e,t){var r=(n=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+a+'"]').find(".wpcf7-form")).find('.wpcf7-row[wpcf7-row-number="'+t+'"]'),r=(e.insertAfter(r),f(n),a),n=t,n=(r=k[r],(n=r.find('.wpcf7-row[wpcf7-row-number="'+n+'"]')).clone().insertAfter(n),p(r),x(),Array.prototype.slice.call(e.get(0).getElementsByClassName("wpcf7-column"))),c=t+1;n.forEach(function(e,t){Rexbuilder_Util.hasClass(e,"with-button")||(i(e,a,c,t+1),Rexbuilder_Rexwpcf7.addColumnContentStyle(F(e)))})},addClonedColumnRow:function(e,a,t){var r,n,c,o=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form"),l=o.find('.wpcf7-row[wpcf7-row-number="'+t+'"]'),l=(F(l[0]).clone(!1).insertAfter(l),f(o),t+1);o.find('.wpcf7-row[wpcf7-row-number="'+l+'"]').each(function(e,t){F(t).find(".wpcf7-column").each(function(e,t){e+1!==a?(F(t).empty(),e=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),F(t).append(e).addClass("with-button")):r=t})}),n=a,o=t,t=k[t=e],(c=t.find('.wpcf7-row[wpcf7-row-number="'+o+'"]')).clone().insertAfter(c),p(t),c=o+1,t.find('.wpcf7-row[wpcf7-row-number="'+c+'"]').find(".wpcf7-column").each(function(e,t){e+1!=n&&(F(t).empty(),e=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),F(t).append(e).addClass("with-button"))}),x(),i(r,e,l,a)},deleteRow:function(e,t){(a=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form")).find('.wpcf7-row[wpcf7-row-number="'+t+'"]').remove(),f(a);var a=e,e=t;(a=k[a]).find('.wpcf7-row[wpcf7-row-number="'+e+'"]').remove(),p(a)},deleteColumnContent:function(e,t,a){var r=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"]').find(".wpcf7-form").find('.wpcf7-row[wpcf7-row-number="'+t+'"] .wpcf7-column[wpcf7-column-number="'+a+'"]'),n=(Rexbuilder_Rexwpcf7.removeColumnContentStyle(r),r.empty(),Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row")),r=(r.append(n).addClass("with-button"),e),n=t,e=a;(r=k[r].find('.wpcf7-row[wpcf7-row-number="'+n+'"]').find('.wpcf7-column[wpcf7-column-number="'+e+'"]')).empty(),n=Rexbuilder_Live_Templates.getTemplate("wpcf7-plus-button-inside-row"),r.append(n).addClass("with-button")},updateFormLive:function(e){var t=e.element_target.element_id,a=e.propertyType,r=e.propertyName,n=e.newValue,c=Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+t+'"]').parents(".text-wrap");switch(a){case"background":case"border":case"border-width":case"margin":Rexbuilder_Rexwpcf7.updateFormRule(t,r,n),c.each(function(e,t){Rexbuilder_Util_Editor.updateBlockContainerHeight(F(t))});break;case"validation-error":Rexbuilder_Rexwpcf7.updateFormMessageRule(t,"wpcf7-validation-errors",r,n);break;case"send-message":Rexbuilder_Rexwpcf7.updateFormMessageRule(t,"wpcf7-mail-sent-ok",r,n);break;case"columns-padding":Rexbuilder_Rexwpcf7.updateFormColumnsRule(t,r,n),c.each(function(e,t){Rexbuilder_Util_Editor.updateBlockContainerHeight(F(t))})}M.updateHeight()},updateFormContentLive:function(r){var e=r.element_target.element_id;Rexbuilder_Util.$rexContainer.find('.rex-element-wrapper[data-rex-element-id="'+e+'"] .wpcf7-column').not(".with-button").each(function(e,t){var t=F(t),a=0!=t.find(".rex-wpcf7-column-content-data").length,t=Rexbuilder_Rexwpcf7.generateColumnContentData(t,a);"submit"!=t.input_type&&$({target:t.target,content:t,propertyType:r.propertyType,propertyName:r.propertyName,newValue:r.newValue})}),M.updateHeight()},updateColumnContentLive:$,updateColumnContentShortcode:function(e){var t,a,r=(e=e.columnContentData).target.element_id,n=e.target.row_number,c=e.target.column_number,o=e.input_type,n=k[r].find('.wpcf7-row[wpcf7-row-number="'+n+'"] .wpcf7-column[wpcf7-column-number="'+c+'"]'),c=(void 0===(g=n.find(".wpcf7-column-content").html())&&(g=n.html()),"true"==String(e.wpcf7_required_field)),l="true"==String(e.wpcf7_email),i="true"==String(e.wpcf7_only_numbers),p="true"==String(e.wpcf7_default_check),f=e.wpcf7_placeholder,d=e.label_text,s=e.text,u=e.wpcf7_list_fields,w=e.wpcf7_file_max_dimensions,m=e.wpcf7_button.text;if(-1!==["text","email","number","select","file","textarea","acceptance"].indexOf(o)&&((b=g.match(/\[(textarea|email|number|select|file|text)\*?|(optional)/))?(t=b[0],a=b[1],(b=b[2])?c&&(g=g.replace(" "+b,"")):g=g.replace(t,"["+a+(c?"*":""))):c||(g=g.replace(/\]/," optional]"))),-1!==["text","email","number"].indexOf(o)){var b=l?"email":i?"number":"text";if(b!==o)try{var x=g.match(/\[(text|email|number)/),_=/(text|email|number)(-\d+)/,h=g.match(_),g=g.replace(x[0],"["+b).replace(new RegExp(_,"g"),b+h[2])}catch(e){console.error("Error while changing the field type to "+b+". Error:",e)}}if(-1!==["text","email","number","textarea"].indexOf(o))try{var v=F(F.parseHTML(g));v.contents().get(0).innerHTML=d,g=v.get(0).outerHTML}catch(e){console.error("Error while changing the label text. Error:",e)}if("acceptance"==o&&(/default\:on/.test(g)?p||(g=g.replace("default:on","")):p&&(g=g.replace(/\[[a-z]+ [a-z]+\-[0-9]+ /,/\[[a-z]+ [a-z]+\-[0-9]+ /.exec(g)+"default:on "))),-1!==["text","email","number","textarea"].indexOf(o)&&(t=/placeholder/.test(g),""===f?t&&(g=g.replace(/\splaceholder \".+\"/,"")):(a=g.match(/\[.+(\"|\')(.+)(\"|\')\]/),c='placeholder "'+f+'"',t||a?t?g=g.replace(/placeholder \".+\"/,c):a&&(g=(g=g.replace(a[1]+a[2]+a[3],"")).replace("]"," "+c+"]")):g=g.replace("]"," "+c+"]"))),"acceptance"==o&&(g=(g=g.replace(/\][\s\S]+\[/,"]"+s+"[")).replace(/<p>\s<\/p>/g,"")),"select"==o||"radio"==o)for(var C in g=g.replace(/\s[\"\'][\s\S]+[\"\']/,""),u)g=g.replace("]"," '"+u[C]+"']");if("file"==o&&(g=g.replace(/limit\:[\w]*/,"limit:"+w)),"file"===o){for(var R="filetypes:",y=0;y<u.length;y++)u[y]=u[y].toLowerCase(),R+=u[y],y!=u.length-1&&(R+="|");g=g.replace(/filetypes\:[\w\|]*/,R)}"file"==o&&((l=F(F.parseHTML(g)[1])).empty(),l.append(s),g=g.replace(/\][\s\S]*/,"]"+l[0].outerHTML)),"submit"==o&&(g=g.replace(/[\"\'][\s\S]*[\"\']/,'"'+m+'"')),(i=n.find(".wpcf7-column-content")).empty(),i.append(g),T(r,e)},addFormInPage:function(e,t){k[e]=t,m[e]=m[e]?m[e]+1:1,w.push(e),w=Rexbuilder_Util.removeArrayDuplicates(w)},removeFormInPage:function(e){1===m[e]?(delete k[e],delete m[e],w.splice(w.indexOf(e),1)):--m[e]},updateDBFormsInPage:function(r,n){var c=Rexbuilder_Util.$rexContainer.find(".rexpansive_section:not(.removing_section) .grid-stack-item:not(.removing_block) .rex-element-wrapper").has(".wpcf7-form");if(0!==c.length){w=[],c.each(function(e,t){w.push(t.getAttribute("data-rex-element-id"))}),m={};for(var e=0;e<w.length;e++){var t=w[e];m[t]=m[t]?m[t]+1:1}w=Rexbuilder_Util.removeArrayDuplicates(w),F.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_wpcf7_get_forms",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,form_id:w},success:function(e){if(e.success){for(var t=0;t<w.length;t++)k[w[t]]=F(F.parseHTML(e.data.html_forms[t][0])),n&&w[t]==r&&Rexbuilder_Rexelement.addElementStyle(c.filter('[data-rex-element-id="'+r+'"]'));Rexbuilder_Rexwpcf7.fixInputs();var a=Rexbuilder_Util.$rexContainer.find(".importing-element");0!==a.length&&(Rexbuilder_Util_Editor.updateBlockContainerHeight(a.parents(".text-wrap")),a.removeClass("importing-element"))}}})}},getIDsInPage:function(){return w},fixBlocksHeight:function(){var e,t=document.getElementById("rex-wpcf7-tools");null!==t&&(e=parseInt(F(t).parents(".grid-stack-item").attr("data-gs-height")),e--,F(t).parents(".grid-stack-item").attr("data-gs-height",e))},createColumnContentSpanData:u}}(jQuery);
var Rex_Save_Listeners=function(ie){"use strict";function k(e){var t={name:e,sections:[]};return t.sections=i(e),t}function x(e,t,i,a){for(var o,r,l,u,_=[],d=0;d<e.customizations.length;d++)e.customizations[d].name!=i&&(u=e.customizations[d],_.push(u));var n,s={name:i,targets:a=void 0!==a?a:m(t,i)};if("default"==i)for(d=0;d<_.length;d++)for(void 0!==_[d].targets&&null!=_[d].targets&&0!=_[d].targets.length||(_[d].targets=[],_[d].targets.push({name:"self",props:{}})),o=1;o<s.targets.length;o++){for(l=!1,r=1;r<_[d].targets.length;r++)if(s.targets[o].name==_[d].targets[r].name){l=!0;break}l||(n={name:s.targets[o].name,props:{}},_[d].targets.splice(1,0,n))}return _.push(s),e.customizations=_,e}var i=function(a){var o=[];return Rexbuilder_Util.$rexContainer.children(".rexpansive_section:not(.removing_section)").each(function(e,t){var t=ie(t),i={section_rex_id:t.attr("data-rexlive-section-id"),targets:[],section_is_model:!1,section_model_id:"",section_model_number:-1,section_hide:!1,section_created_live:!1};i.section_hide=t.hasClass("rex-hide-section"),t.hasClass("rex-model-section")?(i.section_is_model=!0,i.section_model_id=t.attr("data-rexlive-model-id"),i.section_model_number=t.attr("data-rexlive-model-number")):i.targets=m(t,a),o.push(i)}),o},g=function(e){return"true"==e.getAttribute("data-rexlive-section-edited")},b=function(e){return"true"==e.getAttribute("data-rexlive-layout-changed")},v=function(e){return"true"==e.getAttribute("data-rexlive-element-edited")},m=function(e,t){var i,a,o,r=e[0],l=[],u={name:"self",props:{}},_=r.querySelector(".grid-stack-row"),d=ie(_),n=b(_),e=("default"!=t&&!g(r)||(u.props=w(e,"customLayout",null)),"true"==r.getAttribute("data-rex-collapse-grid")&&(u.props.collapse_grid=!0,!n&&Rexbuilder_Util.isMobile()?n=!(u.props.pickDefaultSizeCollapse=!0):u.props.pickDefaultSizeCollapse=!1),n?(u.props.gridEdited=!0,u.props.full_height=_.getAttribute("data-full-height"),u.props.layout=_.getAttribute("data-layout")):u.props.gridEdited=!1,l.push(u),d.data().plugin_perfectGridGalleryEditor),s=e.getElementsTopBottom(),c=s.length;for(e.updateAllElementsProperties(),i=0;i<c;i++)Rexbuilder_Util.hasClass(s[i],"removing_block")||(a={name:s[i].getAttribute("data-rexbuilder-block-id"),props:{}},o=v(s[i]),("default"==t||n||o)&&(a.props=G(s[i],"customLayout",_)),"default"!=t&&n&&!o&&p(a.props),l.push(a));return l},p=function(e){for(var t in e)switch(t){case"rex_id":case"size_x":case"size_y":case"row":case"col":case"gs_start_h":case"gs_width":case"gs_height":case"gs_y":case"gs_x":case"block_dimensions_live_edited":case"element_real_fluid":case"hide":case"photoswipe":break;case"element_edited":e.element_edited=!1;break;default:e[t]=void 0}};function ae(e){return e.classList.contains("ck")?CKEditor_Handler.getActiveEditorContent():e.innerHTML.trim()}function L(){var t,i,a,o,r,l,u,_,d,n,e=[].slice.call(Rexbuilder_Util.rexContainer.querySelectorAll(".rexpansive_section:not(.removing_section)")),s=document.getElementById("rexbuilder-layout-data"),c=_plugin_frontend_settings.specialEffects;return e.forEach(function(e){if((r=e.getAttribute("data-rexlive-section-id"))&&[].slice.call(s.querySelectorAll('[data-section-rex-id="'+r+'"]')).forEach(function(e){if(""!==e.innerText)for(l=JSON.parse(e.innerText),u=0,_=l.length;u<_;u++)for(d=0,n=c.length;d<n;d++)void 0!==l[u].props.custom_classes&&-1!==l[u].props.custom_classes.indexOf(c[d].condition)&&(c[d].active=!0),void 0!==l[u].props.block_custom_class&&-1!==l[u].props.block_custom_class.indexOf(c[d].condition)&&(c[d].active=!0)}),(r=e.querySelector(".section-data"))&&(o=r.getAttribute("data-custom_classes")))for(d=0,n=c.length;d<n;d++)-1!==o.indexOf(c[d].condition)&&(c[d].active=!0);[].slice.call(e.querySelectorAll(".grid-stack-item:not(.removing_block)")).forEach(function(e){if((i=e.querySelector(".rexbuilder-block-data"))&&(a=i.getAttribute("data-block_custom_class")))for(d=0,n=c.length;d<n;d++)-1!==a.indexOf(c[d].condition)&&(c[d].active=!0);if(t=e.querySelector(".text-wrap"))for(d=0,n=c.length;d<n;d++)-1!==t.innerHTML.indexOf(c[d].condition)&&(c[d].active=!0)})}),c}var G=function(e,t,i){i=void 0!==i?i:e.parentNode();var a,o,r,l,u,_,d,n,s,c,g,b,x,v,m,p,f,y,h,R,A,U="",k="",L="0",w=1,D=!1,j="",z=e.querySelector(".grid-item-content"),S=e.querySelector(".rexbuilder-block-data"),N=e.querySelector(".rex-video-wrap"),P=e.id,E=e.getAttribute("data-rexbuilder-block-id"),C=""==S.getAttribute("data-type")?"text":S.getAttribute("data-type"),I=e.getAttribute("data-width"),O=e.getAttribute("data-height"),B=e.getAttribute("data-row"),q=e.getAttribute("data-col"),M=e.getAttribute("data-gs-height"),J=e.getAttribute("data-gs-width"),$=e.getAttribute("data-gs-height"),H=e.getAttribute("data-gs-y"),G=e.getAttribute("data-gs-x"),F=null==S.getAttribute("data-color_bg_block")?"":S.getAttribute("data-color_bg_block"),W=null==S.getAttribute("data-color_bg_elem_active")||S.getAttribute("data-color_bg_elem_active"),Q=null===S.getAttribute("data-id_image_bg_block")?"":S.getAttribute("data-id_image_bg_block"),K=null===S.getAttribute("data-image_bg_block")?"":S.getAttribute("data-image_bg_block"),V=isNaN(parseInt(z.getAttribute("data-background_image_width")))?"":parseInt(z.getAttribute("data-background_image_width")),X=isNaN(parseInt(z.getAttribute("data-background_image_height")))?"":parseInt(z.getAttribute("data-background_image_height")),T="fixed"==i.getAttribute("data-layout")?"full":"natural",T=null==S.getAttribute("data-type_bg_block")?T:S.getAttribute("data-type_bg_block"),Y=null==S.getAttribute("data-image_size")?"full":S.getAttribute("data-image_size"),Z=null===S.getAttribute("data-photoswipe")?"":S.getAttribute("data-photoswipe"),ee=null==S.getAttribute("data-image_bg_elem_active")||S.getAttribute("data-image_bg_elem_active"),te=null===S.getAttribute("data-video_bg_id")?"":S.getAttribute("data-video_bg_id"),D=(N&&(U=""==S.getAttribute("data-video_bg_width")||null===S.getAttribute("data-video_bg_width")?N.getAttribute("data-rex-video-width"):S.getAttribute("data-video_bg_width"),k=""==S.getAttribute("data-video_bg_height")||null===S.getAttribute("data-video_bg_height")?N.getAttribute("data-rex-video-height"):S.getAttribute("data-video_bg_height")),N=null===S.getAttribute("data-video_mp4_url")?"":S.getAttribute("data-video_mp4_url"),a=null===S.getAttribute("data-video_bg_url")?"":S.getAttribute("data-video_bg_url"),o=null===S.getAttribute("data-video_bg_url_vimeo")?"":S.getAttribute("data-video_bg_url_vimeo"),L=null!==S.getAttribute("data-video_has_audio")&&S.getAttribute("data-video_has_audio"),r=null===S.getAttribute("data-linkurl")?"":S.getAttribute("data-linkurl"),l=null===S.getAttribute("data-block_custom_class")?"":S.getAttribute("data-block_custom_class"),u=null===S.getAttribute("data-block_padding")?"":S.getAttribute("data-block_padding"),_=null==S.getAttribute("data-overlay_block_color")?"":S.getAttribute("data-overlay_block_color"),d=null!=S.getAttribute("data-overlay_block_color_active")&&S.getAttribute("data-overlay_block_color_active"),n=null===S.getAttribute("data-zak_background")?"":S.getAttribute("data-zak_background"),s=null===S.getAttribute("data-zak_side")?"":S.getAttribute("data-zak_side"),c=null===S.getAttribute("data-zak_title")?"":S.getAttribute("data-zak_title"),g=null===S.getAttribute("data-zak_icon")?"":S.getAttribute("data-zak_icon"),b=null===S.getAttribute("data-zak_foreground")?"":S.getAttribute("data-zak_foreground"),x=null===S.getAttribute("data-block_animation")?"fadeInUpBig":S.getAttribute("data-block_animation"),v=null===S.getAttribute("data-block_has_scrollbar")?"false":S.getAttribute("data-block_has_scrollbar"),"masonry"!=i.getAttribute("data-layout")||null===S.getAttribute("data-block_dimensions_live_edited")?"":S.getAttribute("data-block_dimensions_live_edited"),m=null==S.getAttribute("data-block_flex_position")?"":S.getAttribute("data-block_flex_position"),p=null==S.getAttribute("data-block_flex_img_position")?"":S.getAttribute("data-block_flex_img_position"),f=(e.offsetHeight/e.offsetWidth).toFixed(3),w=Rexbuilder_Util.hasClass(e,"block-has-slider")?f:"",S.setAttribute("data-slider_ratio",w),Rexbuilder_Util.hasClass(e,"rex-hide-element")),S=parseInt(S.getAttribute("data-element_real_fluid")),S=isNaN(S)?0:S;return"shortcode"==t?(z=z.querySelector(".text-wrap"),Rexbuilder_Util.hasClass(e,"block-has-slider")?j='[RexSlider slider_id="'+(R=(e=z.querySelector('.rex-slider-wrap[data-rex-slider-active="true"]'))?parseInt(e.getAttribute("data-slider-id")):R)+'"]':(R=(e=z.cloneNode(!0)).querySelector(".medium-insert-buttons"),z=e.querySelector(".text-editor-span-fix"),y=e.querySelector(".ui-sortable"),A=e.querySelector(".ui-sortable-handle"),h=e.querySelector("figure"),R&&R.parentNode.removeChild(R),z&&z.parentNode.removeChild(z),y&&Rexbuilder_Util.removeClass(y,"ui-sortable"),A&&Rexbuilder_Util.removeClass(y,"ui-sortable-handle"),h&&(h.removeAttribute("style"),h.removeAttribute("class")),Array.prototype.slice.call(e.getElementsByClassName("rex-elements-paragraph")).forEach(function(e){var t=e.querySelector(".rex-element-wrapper").getAttribute("data-rex-element-id"),i=e.querySelector(".string-shortcode").getAttribute("shortcode");e.outerHTML='[RexFormWrapper id="'+t+'"]'+i+"[/RexFormWrapper]"}),""==e.textContent.trim()?j=0<e.getElementsByTagName("iframe").length||0<e.getElementsByTagName("img").length||0<e.getElementsByTagName("i").length||0<e.getElementsByTagName("form").length||0<e.getElementsByTagName("hr").length?ae(e):"":(j=ae(e),Array.prototype.slice.call(e.getElementsByClassName("rex-button-data")).forEach(function(e){e.removeAttribute("data-synchronize")}))),'[RexpansiveBlock id="'+P+'" rexbuilder_block_id="'+E+'" type="'+C+'" size_x="'+I+'" size_y="'+O+'" row="'+B+'" col="'+q+'" gs_start_h="'+M+'" gs_width="'+J+'" gs_height="'+$+'" gs_y="'+H+'" gs_x="'+G+'" element_real_fluid="'+S+'" color_bg_block="'+F+'" color_bg_block_active="'+W+'" image_bg_block="'+K+'" id_image_bg_block="'+Q+'" image_bg_elem_active="'+ee+'" video_bg_id="'+te+'" video_bg_width="'+U+'" video_bg_height="'+k+'" video_mp4_url="'+N+'" video_bg_url="'+a+'" video_bg_url_vimeo="'+o+'" type_bg_block="'+T+'" image_size="'+Y+'" photoswipe="'+Z+'" linkurl="'+r+'" block_custom_class="'+l+'" block_padding="'+u+'" overlay_block_color="'+_+'" overlay_block_color_active="'+d+'"'+(""!==n?' zak_background="'+n+'"':"")+(""!==s?' zak_side="'+s+'"':"")+(""!==c?' zak_title="'+c+'"':"")+(""!==g?' zak_icon="'+g+'"':"")+(""!==b?' zak_foreground="'+b+'"':"")+' block_animation="'+x+'" video_has_audio="'+("true"==L.toString()?"1":"0")+'" block_has_scrollbar="'+v+'" block_flex_position="'+m+'" block_flex_img_position="'+p+'"]'+j+"[/RexpansiveBlock]"):"customLayout"==t?(R=ie(i).parents(".rexpansive_section").attr("data-rexlive-section-id"),z=Rexbuilder_Util.editedDataInfo.getBlockData(R,E),(A={}).hide=D,"default"==Rexbuilder_Util.activeLayout?A.element_edited=!1:A.element_edited=!0,A.rexbuilder_block_id=E,A.type=C,A.size_x=I,A.size_y=O,A.row=B,A.col=q,A.gs_start_h=M,A.gs_width=J,A.gs_height=$,A.gs_y=H,A.gs_x=G,A.element_real_fluid=S,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.color_bg_block)&&(A.color_bg_block=F),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.color_bg_block_active)&&(A.color_bg_block_active=W),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_bg_url)&&(A.image_bg_url=K),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_width)&&(A.image_width=V),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_height)&&(A.image_height=X),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.id_image_bg)&&(A.id_image_bg=Q),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_size)&&(A.image_size=Y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.image_bg_elem_active)&&(A.image_bg_elem_active=ee),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.type_bg_image)&&(A.type_bg_image=T),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_id)&&(A.video_bg_id=te),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_width)&&(A.video_bg_width=U),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_height)&&(A.video_bg_height=k),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_mp4_url)&&(A.video_mp4_url=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_url_youtube)&&(A.video_bg_url_youtube=a),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.video_bg_url_vimeo)&&(A.video_bg_url_vimeo=o),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.photoswipe)&&(A.photoswipe=Z),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_custom_class)&&(A.block_custom_class=l),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_padding)&&(A.block_padding=u),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.overlay_block_color)&&(A.overlay_block_color=_),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.overlay_block_color_active)&&(A.overlay_block_color_active=d),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.linkurl)&&(A.linkurl=r),""!==n&&(A.zak_background=n),""!==s&&(A.zak_side=s),""!==c&&(A.zak_title=c),""!==g&&(A.zak_icon=g),""!==b&&(A.zak_foreground=b),A.block_animation=x,A.video_has_audio=L,A.block_has_scrollbar=v,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_flex_position)&&(A.block_flex_position=m),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&z&&z.block_flex_img_position)&&(A.block_flex_img_position=p),A.slider_dimension_ratio=w,A.block_ratio=f,A):void 0},w=function(e,t,i){var a,o="",r="",l="",u="",_="",d="",n=e[0],s=e.find(".grid-stack-row"),c=s[0],g=n.querySelector(".section-data"),b=n.querySelector(".rex-video-wrap"),x=s.data().plugin_perfectGridGalleryEditor,v=n.getAttribute("data-rexlive-section-name"),m=null===g.getAttribute("data-section_nav_label")?"":g.getAttribute("data-section_nav_label"),p=null===g.getAttribute("data-type")?"perfect-grid":g.getAttribute("data-type"),f=null==g.getAttribute("data-color_bg_section")?"":g.getAttribute("data-color_bg_section"),y=null==g.getAttribute("data-color_bg_section_active")||g.getAttribute("data-color_bg_section_active"),h=null===g.getAttribute("data-margin")?"":g.getAttribute("data-margin"),R=null===g.getAttribute("data-image_bg_section")?"":g.getAttribute("data-image_bg_section"),D=null===n.getAttribute("data-background_image_width")||isNaN(parseInt(n.getAttribute("data-background_image_width")))?"":parseInt(n.getAttribute("data-background_image_width")),P=null===n.getAttribute("data-background_image_height")||isNaN(parseInt(n.getAttribute("data-background_image_height")))?"":parseInt(n.getAttribute("data-background_image_height")),A=null==g.getAttribute("data-image_size")?"full":g.getAttribute("data-image_size"),U=null===g.getAttribute("data-id_image_bg_section")?"":g.getAttribute("data-id_image_bg_section"),O=null==g.getAttribute("data-image_bg_section_active")||g.getAttribute("data-image_bg_section_active"),B=null===g.getAttribute("data-video_mp4_url")?"":g.getAttribute("data-video_mp4_url"),q=null===g.getAttribute("data-video_bg_url_section")?"":g.getAttribute("data-video_bg_url_section"),M=null===g.getAttribute("data-video_bg_id_section")?"":g.getAttribute("data-video_bg_id_section"),l=(b&&(o=""==g.getAttribute("data-video_bg_width_section")||null===g.getAttribute("data-video_bg_width_section")?b.getAttribute("data-rex-video-width"):g.getAttribute("data-video_bg_width_section"),r=""==g.getAttribute("data-video_bg_height_section")||null===g.getAttribute("data-video_bg_height_section")?b.getAttribute("data-rex-video-height"):g.getAttribute("data-video_bg_height_section")),null===g.getAttribute("data-video_bg_url_vimeo_section")?"":g.getAttribute("data-video_bg_url_vimeo_section")),b=null===c.getAttribute("data-full-height")?"":c.getAttribute("data-full-height"),J=null===c.getAttribute("data-layout")?"":c.getAttribute("data-layout"),$=null===g.getAttribute("data-custom_classes")?"":g.getAttribute("data-custom_classes"),H="100%"===(s=s.parent().css("max-width"))||"none"==s?"full":"boxed",k=parseInt(c.getAttribute("data-separator")),L=parseInt(c.getAttribute("data-row-separator-top")),w=parseInt(c.getAttribute("data-row-separator-right")),j=parseInt(c.getAttribute("data-row-separator-bottom")),z=parseInt(c.getAttribute("data-row-separator-left")),k={gutter:isNaN(k)?"":k,top:isNaN(L)?"":L,right:isNaN(w)?"":w,bottom:isNaN(j)?"":j,left:isNaN(z)?"":z},L=k.gutter,w=k.top,j=k.right,z=k.bottom,k=k.left,S=getComputedStyle(n),N=parseInt(S["margin-top"].replace("px","")),E=parseInt(S["margin-right"].replace("px","")),C=parseInt(S["margin-bottom"].replace("px","")),S=parseInt(S["margin-left"].replace("px","")),N={top:isNaN(N)?"":N,right:isNaN(E)?"":E,bottom:isNaN(C)?"":C,left:isNaN(S)?"":S},E=N.top,C=N.right,S=N.bottom,N=N.left,I=null==g.getAttribute("data-row_active_photoswipe")?"0":g.getAttribute("data-row_active_photoswipe"),T=null===g.getAttribute("data-responsive_background")?"":g.getAttribute("data-responsive_background");return""==(u=null==g.getAttribute("data-row_overlay_color")?"":g.getAttribute("data-row_overlay_color"))&&(u=T),g=null!=g.getAttribute("data-row_overlay_active")&&g.getAttribute("data-row_overlay_active"),_=null==i?null==n.getAttribute("data-rexlive-section-id")?"":n.getAttribute("data-rexlive-section-id"):i,i=null!=n.getAttribute("data-rex-collapse-grid")&&"true"==n.getAttribute("data-rex-collapse-grid").toString(),a=null==n.getAttribute("data-rexlive-model-id")?"":n.getAttribute("data-rexlive-model-id"),n=null==n.getAttribute("data-rexlive-model-name")?"":n.getAttribute("data-rexlive-model-name"),e=Rexbuilder_Util.getGalleryInstance(e).properties.singleWidth,"shortcode"==t?(d='[RexpansiveSection section_name="'+v+'" section_nav_label="'+m+'" type="'+p+'" color_bg_section="'+f+'" color_bg_section_active="'+y+'" dimension="'+H+'" image_bg_section_active="'+O+'" image_bg_section="'+R+'" id_image_bg_section="'+U+'" image_size="'+A+'" video_bg_url_section="'+q+'" video_bg_id_section="'+M+'" video_bg_width_section="'+o+'" video_bg_height_section="'+r+'" video_bg_url_vimeo_section="'+l+'" full_height="'+b+'" block_distance="'+L+'" layout="'+J+'" responsive_background="'+T+'" custom_classes="'+$+'" section_width="'+s+'" row_separator_top="'+w+'" row_separator_bottom="'+z+'" row_separator_right="'+j+'" row_separator_left="'+k+'" margin="'+h+'" row_margin_top="'+E+'" row_margin_bottom="'+S+'" row_margin_right="'+C+'" row_margin_left="'+N+'" row_active_photoswipe="'+I+'" row_overlay_color="'+u+'" row_overlay_active="'+g+'" rexlive_section_id="'+_+'" rexlive_model_id="'+a+'" rexlive_model_name="'+n+'" row_edited_live="true"]',x.updateAllElementsProperties(),x.getElementsTopBottom().forEach(function(e){Rexbuilder_Util.hasClass(e,"removing_block")||(d+=G(e,"shortcode",c))}),d=d+F(x)+"[/RexpansiveSection]"):"customLayout"==t?(T=Rexbuilder_Util.editedDataInfo.getSectionData(_),(I={}).collapse_grid=i,I.grid_cell_width=e,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.section_name)&&(I.section_name=v),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.section_nav_label)&&(I.section_nav_label=m),I.type=p,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.color_bg_section)&&(I.color_bg_section=f),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.color_bg_section_active)&&(I.color_bg_section_active=y),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.dimension)&&(I.dimension=H),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.margin)&&(I.margin=h),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.image_bg_section_active)&&(I.image_bg_section_active=O),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.image_bg_section)&&(I.image_bg_section=R),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.image_width)&&(I.image_width=D),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.image_height)&&(I.image_height=P),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.id_image_bg_section)&&(I.id_image_bg_section=U),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.image_size)&&(I.image_size=A),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_bg_id)&&(I.video_bg_id=M),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_bg_width_section)&&(I.video_bg_width_section=o),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_bg_height_section)&&(I.video_bg_height_section=r),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_mp4_url)&&(I.video_mp4_url=B),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_bg_url_section)&&(I.video_bg_url_section=q),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.video_bg_url_vimeo_section)&&(I.video_bg_url_vimeo_section=l),I.full_height=b,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.block_distance)&&(I.block_distance=L),I.layout=J,("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.custom_classes)&&(I.custom_classes=$),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.section_width)&&(I.section_width=s),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_separator_top)&&(I.row_separator_top=w),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_separator_bottom)&&(I.row_separator_bottom=z),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_separator_right)&&(I.row_separator_right=j),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_separator_left)&&(I.row_separator_left=k),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_margin_top)&&(I.row_margin_top=E),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_margin_bottom)&&(I.row_margin_bottom=S),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_margin_right)&&(I.row_margin_right=C),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_margin_left)&&(I.row_margin_left=N),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_overlay_color)&&(I.row_overlay_color=u),("default"===Rexbuilder_Util.activeLayout||"default"!==Rexbuilder_Util.activeLayout&&T&&T.row_overlay_active)&&(I.row_overlay_active=g),I.rexlive_model_id=a,I.rexlive_model_name=n,I.section_edited=!0,I):void 0},F=function(e){for(var t,i,a="",o=e.getLastID(),r=e.getRowNumber(),l=e.fillEmptySpaces(),u=0;u<l.length;u++)a+=(t=o+=1,i=l[u],'[RexpansiveBlock id="block_'+r+"_"+t+'" type="empty" col="'+(i.x+1)+'" row="'+(i.y+1)+'" size_x="'+i.w+'" size_y="'+i.h+'" color_bg_block="" image_bg_block="" id_image_bg_block="" type_bg_block="" photoswipe="" linkurl="" empty_block_backend_fix="'+!0+'"][/RexpansiveBlock]');return a};return{init:function(){Rexbuilder_Util.$document.on("rexlive:savePage",function(e){var t,i,a,o,r,l=e.settings.data_to_send,u=(Rexbuilder_Util_Editor.savingPage=!0,parseInt(ie("#id-post").attr("data-post-id"))),e=Rexbuilder_Util.activeLayout,_=("undefined"!=typeof Rexbuilder_Rexwpcf7&&((_=Rexbuilder_Rexwpcf7_Editor.getIDsInPage()).forEach(function(e){Rexbuilder_Rexwpcf7_Editor.updateFormInDB(e)}),0!==_.length)&&Rexbuilder_Rexwpcf7_Editor.fixBlocksHeight(),ie("#rexpansive-builder-style-inline-css").text().trim()),d=L(),n=(Rexbuilder_Dom_Util.fixModelNumbers(),k(e)),s=Rexbuilder_Util.getPageAvaiableLayoutsNames(),c=!1;for(U=0,r=s.length;U<r;U++)if(s[U]==n.name){c=!0;break}c||s.push(n.name),Rexbuilder_Util.updatePageAvaiableLayoutsNames(s),Rexbuilder_Util.updatePageCustomizationsData(n);var g=Rexbuilder_Rexbutton.findIDsInPage(!1),b=[];if(b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_buttons_in_page",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,ids:JSON.stringify(g)},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_layouts",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,names:s},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_css",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,custom_css:_},success:function(e){e.success},error:function(e){}})),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_custom_effects",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,custom_effects:d},success:function(e){e.success},error:function(e){}})),"default"==e){var x,v,m,p="",f=(Rexbuilder_Util.updateDefaultLayoutState({pageData:n.sections,modelsData:Rexbuilder_Util.getModelsCustomizations()}),Rexbuilder_Util.$rexContainer.find(".rexpansive_section").each(function(){var e=ie(this);e.hasClass("removing_section")||(e.hasClass("rex-model-section")?p+="[RexModel id="+e.attr("data-rexlive-model-id")+"][/RexModel]":p+=w(e,"shortcode",null))}),[]);for(U=0,v=(f=Rexbuilder_Util.getPageCustomizationsDom()).length;U<v;U++)for(var y,h=function(e){for(var t=[],i,a,o,r,i=0,o=e.length;i<o;i++)if(e[i].section_is_model.toString()=="true"){var l=e[i].section_model_id;for(a=0,r=t.length;a<r;a++)if(t[a].id==l){t[a].number=t[a].number+1;break}if(a==r){var u={id:l,number:1};t.push(u)}}return t}(f[U].sections),R=0,A=n.sections.length;R<A;R++)for(t=0,m=f[U].sections.length;t<m;t++)if(n.sections[R].section_rex_id==f[U].sections[t].section_rex_id){if("true"==f[U].sections[t].section_is_model.toString())for(i=0;i<h.length;i++)h[i].id==f[U].sections[t].section_model_id&&(parseInt(n.sections[R].section_model_number),h[i].number);if("true"!=f[U].sections[t].section_is_model.toString())for(void 0!==f[U].sections[t].targets&&0!=f[U].sections[t].targets.length||(f[U].sections[t].targets=[],f[U].sections[t].targets.push({name:"self",props:{}})),a=1;a<n.sections[R].targets.length;a++){for(x=!1,o=1;o<f[U].sections[t].targets.length;o++)n.sections[R].targets[a].name==f[U].sections[t].targets[o].name&&(x=!0);x||(y={name:n.sections[R].targets[a].name,props:{}},f[U].sections[t].targets.splice(1,0,y))}}f.push(n);for(var U=0;U<f.length;U++)Rexbuilder_Util.updatePageCustomizationsData(f[U]),Rexbuilder_Util.updatePageCustomizationsDomOrder(f[U]),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,sections:JSON.stringify(f[U].sections),layout_name:f[U].name},success:function(e){e.success},error:function(e){}}));b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_shortcode",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,clean_post:"",rex_shortcode:p},success:function(e){e.success&&(Rexbuilder_Util.$rexContainer.removeClass("backend-edited"),Rexbuilder_Util.backendEdited=!1)},error:function(e){}}));g=Rexbuilder_Util.getSectionNamesUsed();Rexbuilder_Util.saveSectionNamesUsed(),b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_sections_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,ids_used:JSON.stringify(g)},success:function(e){e.success},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while saving sections IDs")}})),b.push(ie.ajax({type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_get_blocks_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce},success:function(e){e.success?(Rexbuilder_Util.updateBlocksIDsUsed(JSON.parse(e.data.currentIDsUsed)),Array.prototype.slice.call(Rexbuilder_Util.rexContainer.getElementsByClassName("rexpansive_section")).forEach(function(i){Array.prototype.slice.call(i.getElementsByClassName("grid-stack-item")).forEach(function(e){var t;Rexbuilder_Util.hasClass(i,"removing_section")?Rexbuilder_Util.removeBlockID(e.getAttribute("data-rexbuilder-block-id")):(t=Rexbuilder_Util.hasClass(e,"removing_block"),Rexbuilder_Util[t?"removeBlockID":"addBlockID"](e.getAttribute("data-rexbuilder-block-id")))})}),Rexbuilder_Util.saveBlocksIDsUsed(),ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_blocks_rexids",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,ids_used:JSON.stringify(Rexbuilder_Util.getBlocksIDsUsed())},success:function(e){e.success||this.error(e,e.data[0].message,e.data[0].code)},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while saving blocks IDs")}})):this.error(e,e.data[0].message,e.data[0].code)},error:function(e,t,i){Rexbuilder_Util.displayAjaxError({response:e,textStatus:t,errorThrown:i},"Error while getting blocks IDs")}}))}else b.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_layout",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:u,sections:JSON.stringify(n.sections),layout_name:n.name},success:function(e){e.success},error:function(e){}}));ie.when.apply(ie,b).then(function(){Rexbuilder_Util_Editor.savingPage=!1;var e={eventName:"rexlive:savePageEnded",buttonData:l.buttonData,dataSaved:"page"};Rexbuilder_Util_Editor.sendParentIframeMessage(e)}).fail(function(){}).always(function(){})}),Rexbuilder_Util.$document.on("rexlive:saveModel",function(t){if(Rexbuilder_Util.$rexContainer.hasClass("editing-model")){for(var e=[],i=(Rexbuilder_Util_Editor.savingModel=!0,Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0).parents(".rexpansive_section")),a=Rexbuilder_Util.activeLayout,o=void 0!==i.attr("data-rexlive-model-id")?i.attr("data-rexlive-model-id"):"",r=void 0!==i.attr("data-rexlive-model-name")?i.attr("data-rexlive-model-name"):"",l=void 0!==i.attr("data-rexlive-model-number")?i.attr("data-rexlive-model-number"):"",u=Rexbuilder_Util.getModelsCustomizations(),_={},d=0;d<u.length;d++){var n=u[d];n.id==o&&(_=n)}jQuery.isEmptyObject(_)&&(_.id=o,_.name=r,_.customizations=[]);var s=x(_,i,a),c=(Rexbuilder_Util.updateModelsCustomizationsData(s),[]);for(d=0;d<s.customizations.length;d++)c.push(s.customizations[d].name);if(Rexbuilder_Util.updateDivModelCustomizationsNames({modelID:o,names:c}),e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_avaiable_model_layouts_names",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,post_id_to_update:o,names:c},success:function(e){e.success},error:function(e){}})),"default"!=a){for(d=0;d<s.customizations.length;d++)if(s.customizations[d].name==a){Rexbuilder_Util.updateModelsLive(o,m(i,"default"),l),e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:s.id,model_name:s.customizations.name,targets:JSON.stringify(s.customizations[d].targets),layout_name:s.customizations[d].name},success:function(e){e.success},error:function(e){}}));break}}else{var g={model_id:o,post_title:r,post_content:w(i,"shortcode")},b={modelName:r,model_number:i.attr("data-rexlive-model-number"),html:"",modelID:o};for(e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_edit_model_shortcode_builder",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_data:g},success:function(e){e.success&&(b.html=e.data.model_html,Rexbuilder_Section.updateModelsHtmlLive(b))},error:function(e){},complete:function(e){}})),d=0;d<s.customizations.length;d++)e.push(ie.ajax({type:"POST",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rexlive_save_customization_model",nonce_param:_plugin_frontend_settings.rexajax.rexnonce,model_id_to_update:s.id,model_name:s.customizations.name,targets:JSON.stringify(s.customizations[d].targets),layout_name:s.customizations[d].name},success:function(e){e.success},error:function(e){}}))}ie.when.apply(ie,e).then(function(){var e=Rexbuilder_Util.$rexContainer.find(".rex-model-section .update-model-button.unlocked").eq(0),e=(Rexbuilder_Dom_Util.updateLockEditModel(e,!0),Rexbuilder_Util.$rexContainer.removeClass("editing-model"),Rexbuilder_Util_Editor.savingModel=!1,{eventName:"rexlive:savePageEnded",dataSaved:"model",buttonData:void 0!==t.settings?t.settings.data_to_send.buttonData:""});Rexbuilder_Util_Editor.sendParentIframeMessage(e)}).fail(function(){}).always(function(){})}})},createSectionProperties:w,createTargets:m,createBlockProperties:G,createCustomization:k,updateModel:x,_checkSpecialEffects:L}}(jQuery);
/*! jQuery UI - v1.12.1 - 2017-10-08
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/selectmenu.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(k){function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},k.extend(this._defaults,this.regional[""]),this.regional.en=k.extend(!0,{},this.regional[""]),this.regional["en-US"]=k.extend(!0,{},this.regional.en),this.dpDiv=i(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",e,function(){k(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",e,o)}function o(){k.datepicker._isDisabledDatepicker((p.inline?p.dpDiv.parent():p.input)[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))}function h(t,e){for(var i in k.extend(t,e),e)null==e[i]&&(t[i]=e[i])}function e(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}k.ui=k.ui||{},k.ui.version="1.12.1";var W,E,F,s,x,C,n,a,r,l,c,R,L,B=0,Y=Array.prototype.slice;function j(t,e,i){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?i/100:1)]}function D(t,e){return parseInt(k.css(t,e),10)||0}k.cleanData=(L=k.cleanData,function(t){for(var e,i,s=0;null!=(i=t[s]);s++)try{(e=k._data(i,"events"))&&e.remove&&k(i).triggerHandler("remove")}catch(t){}L(t)}),k.widget=function(t,i,e){var s,n,o,a={},r=t.split(".")[0],h=r+"-"+(t=t.split(".")[1]);return e||(e=i,i=k.Widget),k.isArray(e)&&(e=k.extend.apply(null,[{}].concat(e))),k.expr[":"][h.toLowerCase()]=function(t){return!!k.data(t,h)},k[r]=k[r]||{},s=k[r][t],n=k[r][t]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new n(t,e)},k.extend(n,s,{version:e.version,_proto:k.extend({},e),_childConstructors:[]}),(o=new i).options=k.widget.extend({},o.options),k.each(e,function(e,s){return k.isFunction(s)?void(a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=s.apply(this,arguments),this._super=e,this._superApply=i,t}):void(a[e]=s);function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}}),n.prototype=k.widget.extend(o,{widgetEventPrefix:s&&o.widgetEventPrefix||t},a,{constructor:n,namespace:r,widgetName:t,widgetFullName:h}),s?(k.each(s._childConstructors,function(t,e){var i=e.prototype;k.widget(i.namespace+"."+i.widgetName,n,e._proto)}),delete s._childConstructors):i._childConstructors.push(n),k.widget.bridge(t,n),n},k.widget.extend=function(t){for(var e,i,s=Y.call(arguments,1),n=0,o=s.length;n<o;n++)for(e in s[n])i=s[n][e],s[n].hasOwnProperty(e)&&void 0!==i&&(t[e]=k.isPlainObject(i)?k.isPlainObject(t[e])?k.widget.extend({},t[e],i):k.widget.extend({},i):i);return t},k.widget.bridge=function(o,e){var a=e.prototype.widgetFullName||o;k.fn[o]=function(i){var t="string"==typeof i,s=Y.call(arguments,1),n=this;return t?this.length||"instance"!==i?this.each(function(){var t,e=k.data(this,a);return"instance"===i?(n=e,!1):e?k.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,s))!==e&&void 0!==t?(n=t&&t.jquery?n.pushStack(t.get()):t,!1):void 0:k.error("no such method '"+i+"' for "+o+" widget instance"):k.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(s.length&&(i=k.widget.extend.apply(null,[i].concat(s))),this.each(function(){var t=k.data(this,a);t?(t.option(i||{}),t._init&&t._init()):k.data(this,a,new e(i,this))})),n}},k.Widget=function(){},k.Widget._childConstructors=[],k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,e){e=k(e||this.defaultElement||this)[0],this.element=k(e),this.uuid=B++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=k(),this.hoverable=k(),this.focusable=k(),this.classesElementLookup={},e!==this&&(k.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=k(e.style?e.ownerDocument:e.document||e),this.window=k(this.document[0].defaultView||this.document[0].parentWindow)),this.options=k.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:k.noop,_create:k.noop,_init:k.noop,destroy:function(){var i=this;this._destroy(),k.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:k.noop,widget:function(){return this.element},option:function(t,e){var i,s,n,o=t;if(0===arguments.length)return k.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(s=o[t]=k.widget.extend({},this.options[t]),n=0;i.length-1>n;n++)s[i[n]]=s[i[n]]||{},s=s[i[n]];if(t=i.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,i,s;for(e in t)s=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&s&&s.length&&(i=k(s.get()),this._removeClass(s,e),i.addClass(this._classes({element:i,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(n){function t(t,e){for(var i,s=0;t.length>s;s++)i=a.classesElementLookup[t[s]]||k(),i=n.add?k(k.unique(i.get().concat(n.element.get()))):k(i.not(n.element).get()),a.classesElementLookup[t[s]]=i,o.push(t[s]),e&&n.classes[t[s]]&&o.push(n.classes[t[s]])}var o=[],a=this;return n=k.extend({element:this.element,classes:this.options.classes||{}},n),this._on(n.element,{remove:"_untrackClassesElement"}),n.keys&&t(n.keys.match(/\S+/g)||[],!0),n.extra&&t(n.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(i){var s=this;k.each(s.classesElementLookup,function(t,e){-1!==k.inArray(i.target,e)&&(s.classesElementLookup[t]=k(e.not(i.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){var n="string"==typeof t||null===t,e={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s="boolean"==typeof s?s:i};return e.element.toggleClass(this._classes(e),s),this},_on:function(n,o,t){var a,r=this;"boolean"!=typeof n&&(t=o,o=n,n=!1),t?(o=a=k(o),this.bindings=this.bindings.add(o)):(t=o,o=this.element,a=this.widget()),k.each(t,function(t,e){function i(){return n||!0!==r.options.disabled&&!k(this).hasClass("ui-state-disabled")?("string"==typeof e?r[e]:e).apply(r,arguments):void 0}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||k.guid++);var t=t.match(/^([\w:-]*)\s*(.*)$/),s=t[1]+r.eventNamespace,t=t[2];t?a.on(s,t,i):o.on(s,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e).off(e),this.bindings=k(this.bindings.not(t).get()),this.focusable=k(this.focusable.not(t).get()),this.hoverable=k(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(k(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(k(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(k(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var s,n,o=this.options[t];if(i=i||{},(e=k.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],n=e.originalEvent)for(s in n)s in e||(e[s]=n[s]);return this.element.trigger(e,i),!(k.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},k.each({show:"fadeIn",hide:"fadeOut"},function(o,a){k.Widget.prototype["_"+o]=function(e,t,i){var s=(t="string"==typeof t?{effect:t}:t)?!0!==t&&"number"!=typeof t&&t.effect||a:o,n=!k.isEmptyObject(t="number"==typeof(t=t||{})?{duration:t}:t);t.complete=i,t.delay&&e.delay(t.delay),n&&k.effects&&k.effects.effect[s]?e[o](t):s!==o&&e[s]?e[s](t.duration,t.easing,i):e.queue(function(t){k(this)[o](),i&&i.call(e[0]),t()})}}),k.widget,x=Math.max,C=Math.abs,n=/left|center|right/,a=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,R=k.fn.position,k.position={scrollbarWidth:function(){var t,e,i;return void 0!==s?s:(i=(e=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>")).children()[0],k("body").append(e),t=i.offsetWidth,e.css("overflow","scroll"),t===(i=i.offsetWidth)&&(i=e[0].clientWidth),e.remove(),s=t-i)},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),e="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?k.position.scrollbarWidth():0,height:e?k.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=k(t||window),i=k.isWindow(e[0]),s=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:i,isDocument:s,offset:!i&&!s?k(t).offset():{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}},k.fn.position=function(u){if(!u||!u.of)return R.apply(this,arguments);u=k.extend({},u);var d,p,f,g,m,t,_=k(u.of),v=k.position.getWithinInfo(u.within),b=k.position.getScrollInfo(v),y=(u.collision||"flip").split(" "),w={},e=9===(e=(t=_)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:k.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};return _[0].preventDefault&&(u.at="left top"),p=e.width,f=e.height,m=k.extend({},g=e.offset),k.each(["my","at"],function(){var t,e,i=(u[this]||"").split(" ");(i=1===i.length?n.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]:i)[0]=n.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",t=r.exec(i[0]),e=r.exec(i[1]),w[this]=[t?t[0]:0,e?e[0]:0],u[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===u.at[0]?m.left+=p:"center"===u.at[0]&&(m.left+=p/2),"bottom"===u.at[1]?m.top+=f:"center"===u.at[1]&&(m.top+=f/2),d=j(w.at,p,f),m.left+=d[0],m.top+=d[1],this.each(function(){var i,t,a=k(this),r=a.outerWidth(),h=a.outerHeight(),e=D(this,"marginLeft"),s=D(this,"marginTop"),n=r+e+D(this,"marginRight")+b.width,o=h+s+D(this,"marginBottom")+b.height,l=k.extend({},m),c=j(w.my,a.outerWidth(),a.outerHeight());"right"===u.my[0]?l.left-=r:"center"===u.my[0]&&(l.left-=r/2),"bottom"===u.my[1]?l.top-=h:"center"===u.my[1]&&(l.top-=h/2),l.left+=c[0],l.top+=c[1],i={marginLeft:e,marginTop:s},k.each(["left","top"],function(t,e){k.ui.position[y[t]]&&k.ui.position[y[t]][e](l,{targetWidth:p,targetHeight:f,elemWidth:r,elemHeight:h,collisionPosition:i,collisionWidth:n,collisionHeight:o,offset:[d[0]+c[0],d[1]+c[1]],my:u.my,at:u.at,within:v,elem:a})}),u.using&&(t=function(t){var e=g.left-l.left,i=e+p-r,s=g.top-l.top,n=s+f-h,o={target:{element:_,left:g.left,top:g.top,width:p,height:f},element:{element:a,left:l.left,top:l.top,width:r,height:h},horizontal:i<0?"left":0<e?"right":"center",vertical:n<0?"top":0<s?"bottom":"middle"};p<r&&p>C(e+i)&&(o.horizontal="center"),f<h&&f>C(s+n)&&(o.vertical="middle"),o.important=x(C(e),C(i))>x(C(s),C(n))?"horizontal":"vertical",u.using.call(this,t,o)}),a.offset(k.extend(l,{using:t}))})},k.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,s=s.width,o=t.left-e.collisionPosition.marginLeft,a=n-o,r=o+e.collisionWidth-s-n;e.collisionWidth>s?0<a&&r<=0?(i=t.left+a+e.collisionWidth-s-n,t.left+=a-i):t.left=!(0<r&&a<=0)&&r<a?n+s-e.collisionWidth:n:0<a?t.left+=a:0<r?t.left-=r:t.left=x(t.left-o,t.left)},top:function(t,e){var i,s=e.within,s=s.isWindow?s.scrollTop:s.offset.top,n=e.within.height,o=t.top-e.collisionPosition.marginTop,a=s-o,r=o+e.collisionHeight-n-s;e.collisionHeight>n?0<a&&r<=0?(i=t.top+a+e.collisionHeight-n-s,t.top+=a-i):t.top=!(0<r&&a<=0)&&r<a?s+n-e.collisionHeight:s:0<a?t.top+=a:0<r?t.top-=r:t.top=x(t.top-o,t.top)}},flip:{left:function(t,e){var i=e.within,s=i.offset.left+i.scrollLeft,n=i.width,i=i.isWindow?i.scrollLeft:i.offset.left,o=t.left-e.collisionPosition.marginLeft,a=o-i,o=o+e.collisionWidth-n-i,r="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,l=-2*e.offset[0];a<0?((n=t.left+r+h+l+e.collisionWidth-n-s)<0||C(a)>n)&&(t.left+=r+h+l):0<o&&(0<(s=t.left-e.collisionPosition.marginLeft+r+h+l-i)||o>C(s))&&(t.left+=r+h+l)},top:function(t,e){var i=e.within,s=i.offset.top+i.scrollTop,n=i.height,i=i.isWindow?i.scrollTop:i.offset.top,o=t.top-e.collisionPosition.marginTop,a=o-i,o=o+e.collisionHeight-n-i,r="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,l=-2*e.offset[1];a<0?((n=t.top+r+h+l+e.collisionHeight-n-s)<0||C(a)>n)&&(t.top+=r+h+l):0<o&&(0<(s=t.top-e.collisionPosition.marginTop+r+h+l-i)||o>C(s))&&(t.top+=r+h+l)}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,arguments),k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments),k.ui.position.fit.top.apply(this,arguments)}}},k.ui.position,k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(e){return function(t){return!!k.data(t,e)}}):function(t,e,i){return!!k.data(t,i[3])}}),k.fn.extend({disableSelection:(F="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(F+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),k.ui.focusable=function(t,e){var i,s,n,o=t.nodeName.toLowerCase();return"area"===o?(n=(i=t.parentNode).name,!(!t.href||!n||"map"!==i.nodeName.toLowerCase())&&0<(i=k("img[usemap='#"+n+"']")).length&&i.is(":visible")):(/^(input|select|textarea|button|object)$/.test(o)?(s=!t.disabled)&&(n=k(t).closest("fieldset")[0])&&(s=!n.disabled):s="a"===o&&t.href||e,s&&k(t).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"hidden"!==e}(k(t)))},k.extend(k.expr[":"],{focusable:function(t){return k.ui.focusable(t,null!=k.attr(t,"tabindex"))}}),k.ui.focusable,k.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):k(this[0].form)},k.ui.formResetMixin={_formResetHandler:function(){var e=k(this);setTimeout(function(){var t=e.data("ui-form-reset-instances");k.each(t,function(){this.refresh()})})},_bindFormResetHandler:function(){var t;this.form=this.element.form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var t;this.form.length&&((t=this.form.data("ui-form-reset-instances")).splice(k.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},"1.7"===k.fn.jquery.substring(0,3)&&(k.each(["Width","Height"],function(t,i){function s(t,e,i,s){return k.each(n,function(){e-=parseFloat(k.css(t,"padding"+this))||0,i&&(e-=parseFloat(k.css(t,"border"+this+"Width"))||0),s&&(e-=parseFloat(k.css(t,"margin"+this))||0)}),e}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};k.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){k(this).css(o,s(this,t)+"px")})},k.fn["outer"+i]=function(t,e){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){k(this).css(o,s(this,t,!0,e)+"px")})}}),k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},k.ui.escapeSelector=(E=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(t){return t.replace(E,"\\$1")}),k.fn.labels=function(){var t,e,i;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),(t=this.attr("id"))&&(i=(i=this.eq(0).parents().last()).add((i.length?i:this).siblings()),t="label[for='"+k.ui.escapeSelector(t)+"']",e=e.add(i.find(t).addBack(t))),this.pushStack(e))},k.fn.scrollParent=function(t){var e=this.css("position"),i="absolute"===e,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var t=k(this);return(!i||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&t.length?t:k(this[0].ownerDocument||document)},k.extend(k.expr[":"],{tabbable:function(t){var e=k.attr(t,"tabindex"),i=null!=e;return(!i||0<=e)&&k.ui.focusable(t,i)}}),k.fn.extend({uniqueId:(W=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++W)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&k(this).removeAttr("id")})}}),k.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var u=!1,d=(k(document).on("mouseup",function(){u=!1}),k.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){return!0===k.data(t.target,e.widgetName+".preventClickEvent")?(k.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){var e,i,s;if(!u)return this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),i=1===(this._mouseDownEvent=t).which,s=!("string"!=typeof(e=this).options.cancel||!t.target.nodeName)&&k(t.target).closest(this.options.cancel).length,i&&!s&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===k.data(t.target,this.widgetName+".preventClickEvent")&&k.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0)),!0},_mouseMove:function(t){if(this._mouseMoved){if(k.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&k.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),k.ui.plugin={add:function(t,e,i){var s,n=k.ui[t].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([e,i[s]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},k.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}return i=(i=i||e.body).nodeName?i:e.body},k.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&k(t).trigger("blur")},k.widget("ui.draggable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<k(t.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(t),!this.handle)||(this._blurActiveElement(t),this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=k(this);return k("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=k.ui.safeActiveElement(this.document[0]);k(t.target).closest(e).length||k.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),k.ui.ddmanager&&(k.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===k(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),k.ui.ddmanager&&!e.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),k.ui.ddmanager&&k.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){e=this._uiHash();if(!1===this._trigger("drag",t,e))return this._mouseUp(new k.Event("mouseup",t)),!1;this.position=e.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,i=!1;return k.ui.ddmanager&&!this.options.dropBehaviour&&(i=k.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||k.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?k(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),k.ui.ddmanager&&k.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),k.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new k.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!k(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=k.isFunction(e.helper),t=i?k(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return t.parents("body").length||t.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),i&&t[0]===this.element[0]&&this._setPositionRelative(),t[0]===this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=k.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t,e;return"relative"!==this.cssPosition?{top:0,left:0}:(t=this.element.position(),e=this._isRootNode(this.scrollParent[0]),{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())})},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e=this.options,i=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[k(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,k(window).scrollLeft()+k(window).width()-this.helperProportions.width-this.margins.left,k(window).scrollTop()+(k(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,k(i).width()-this.helperProportions.width-this.margins.left,(k(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),void((e=(i=k(e.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*t,left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*t}},_generatePosition:function(t,e){var i,s=this.options,n=this._isRootNode(this.scrollParent[0]),o=t.pageX,a=t.pageY;return n&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),{top:(a=e&&(this.containment&&(i=this.relativeContainer?(e=this.relativeContainer.offset(),[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(o=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(a=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(o=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3])&&(a=i[3]+this.offset.click.top),s.grid&&(e=s.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,a=!i||e-this.offset.click.top>=i[1]||e-this.offset.click.top>i[3]?e:e-this.offset.click.top>=i[1]?e-s.grid[1]:e+s.grid[1],t=s.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,o=!i||t-this.offset.click.left>=i[0]||t-this.offset.click.left>i[2]?t:t-this.offset.click.left>=i[0]?t-s.grid[0]:t+s.grid[0]),"y"===s.axis&&(o=this.originalPageX),"x"===s.axis)?this.originalPageY:a)-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,e,i){return i=i||this._uiHash(),k.ui.plugin.call(this,t,[e,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),k.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),k.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var s=k.extend({},t,{item:i.element});i.sortables=[],k(i.options.connectToSortable).each(function(){var t=k(this).sortable("instance");t&&!t.options.disabled&&(i.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,s))})},stop:function(e,t,i){var s=k.extend({},t,{item:i.element});i.cancelHelperRemoval=!1,k.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(i,s,n){k.each(n.sortables,function(){var t=!1,e=this;e.positionAbs=n.positionAbs,e.helperProportions=n.helperProportions,e.offset.click=n.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,k.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,t=this!==e&&this._intersectsWith(this.containerCache)&&k.contains(e.element[0],this.element[0])?!1:t})),t?(e.isOver||(e.isOver=1,n._parent=s.helper.parent(),e.currentItem=s.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return s.helper[0]},i.target=e.currentItem[0],e._mouseCapture(i,!0),e._mouseStart(i,!0,!0),e.offset.click.top=n.offset.click.top,e.offset.click.left=n.offset.click.left,e.offset.parent.left-=n.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=n.offset.parent.top-e.offset.parent.top,n._trigger("toSortable",i),n.dropped=e.element,k.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,e.fromOutside=n),e.currentItem&&(e._mouseDrag(i),s.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",i,e._uiHash(e)),e._mouseStop(i,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),s.helper.appendTo(n._parent),n._refreshOffsets(i),s.position=n._generatePosition(i,!0),n._trigger("fromSortable",i),n.dropped=!1,k.each(n.sortables,function(){this.refreshPositions()}))})}}),k.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var s=k("body"),i=i.options;s.css("cursor")&&(i._cursor=s.css("cursor")),s.css("cursor",i.cursor)},stop:function(t,e,i){i=i.options;i._cursor&&k("body").css("cursor",i._cursor)}}),k.ui.plugin.add("draggable","opacity",{start:function(t,e,i){e=k(e.helper),i=i.options;e.css("opacity")&&(i._opacity=e.css("opacity")),e.css("opacity",i.opacity)},stop:function(t,e,i){i=i.options;i._opacity&&k(e.helper).css("opacity",i._opacity)}}),k.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,e,i){var s=i.options,n=!1,o=i.scrollParentNotHidden[0],a=i.document[0];o!==a&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<s.scrollSensitivity?o.scrollTop=n=o.scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=n=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<s.scrollSensitivity?o.scrollLeft=n=o.scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=n=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-k(a).scrollTop()<s.scrollSensitivity?n=k(a).scrollTop(k(a).scrollTop()-s.scrollSpeed):k(window).height()-(t.pageY-k(a).scrollTop())<s.scrollSensitivity&&(n=k(a).scrollTop(k(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-k(a).scrollLeft()<s.scrollSensitivity?n=k(a).scrollLeft(k(a).scrollLeft()-s.scrollSpeed):k(window).width()-(t.pageX-k(a).scrollLeft())<s.scrollSensitivity&&(n=k(a).scrollLeft(k(a).scrollLeft()+s.scrollSpeed)))),!1!==n&&k.ui.ddmanager&&!s.dropBehaviour&&k.ui.ddmanager.prepareOffsets(i,t)}}),k.ui.plugin.add("draggable","snap",{start:function(t,e,i){var s=i.options;i.snapElements=[],k(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var t=k(this),e=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,i){for(var s,n,o,a,r,h,l,c,u,d=i.options,p=d.snapTolerance,f=e.offset.left,g=f+i.helperProportions.width,m=e.offset.top,_=m+i.helperProportions.height,v=i.snapElements.length-1;0<=v;v--)h=(r=i.snapElements[v].left-i.margins.left)+i.snapElements[v].width,c=(l=i.snapElements[v].top-i.margins.top)+i.snapElements[v].height,g<r-p||h+p<f||_<l-p||c+p<m||!k.contains(i.snapElements[v].item.ownerDocument,i.snapElements[v].item)?(i.snapElements[v].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,k.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=!1):("inner"!==d.snapMode&&(s=p>=Math.abs(l-_),n=p>=Math.abs(c-m),o=p>=Math.abs(r-g),a=p>=Math.abs(h-f),s&&(e.position.top=i._convertPositionTo("relative",{top:l-i.helperProportions.height,left:0}).top),n&&(e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.left=i._convertPositionTo("relative",{top:0,left:r-i.helperProportions.width}).left),a)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:h}).left),u=s||n||o||a,"outer"!==d.snapMode&&(s=p>=Math.abs(l-m),n=p>=Math.abs(c-_),o=p>=Math.abs(r-f),a=p>=Math.abs(h-g),s&&(e.position.top=i._convertPositionTo("relative",{top:l,left:0}).top),n&&(e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(e.position.left=i._convertPositionTo("relative",{top:0,left:r}).left),a)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left),!i.snapElements[v].snapping&&(s||n||o||a||u)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,k.extend(i._uiHash(),{snapItem:i.snapElements[v].item})),i.snapElements[v].snapping=s||n||o||a||u)}}),k.ui.plugin.add("draggable","stack",{start:function(t,e,i){var s,i=i.options,i=k.makeArray(k(i.stack)).sort(function(t,e){return(parseInt(k(t).css("zIndex"),10)||0)-(parseInt(k(e).css("zIndex"),10)||0)});i.length&&(s=parseInt(k(i[0]).css("zIndex"),10)||0,k(i).each(function(t){k(this).css("zIndex",s+t)}),this.css("zIndex",s+i.length))}}),k.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){e=k(e.helper),i=i.options;e.css("zIndex")&&(i._zIndex=e.css("zIndex")),e.css("zIndex",i.zIndex)},stop:function(t,e,i){i=i.options;i._zIndex&&k(e.helper).css("zIndex",i._zIndex)}}),k.ui.draggable,k.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=k.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t=t||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){k.ui.ddmanager.droppables[t]=k.ui.ddmanager.droppables[t]||[],k.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=k.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){var i;"accept"===t?this.accept=k.isFunction(e)?e:function(t){return t.is(e)}:"scope"===t&&(i=k.ui.ddmanager.droppables[this.options.scope],this._splice(i),this._addToManager(e)),this._super(t,e)},_activate:function(t){var e=k.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=k.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=k.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var i=t||k.ui.ddmanager.current,s=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=k(this).droppable("instance");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&d(i,k.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)?!(s=!0):void 0}),s)||!this.accept.call(this.element[0],i.currentItem||i.element))&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element)},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),k.ui.intersect=function(t,e,i,s){if(!e.offset)return!1;var n=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,a=n+t.helperProportions.width,r=o+t.helperProportions.height,h=e.offset.left,l=e.offset.top,c=h+e.proportions().width,u=l+e.proportions().height;switch(i){case"fit":return h<=n&&a<=c&&l<=o&&r<=u;case"intersect":return n+t.helperProportions.width/2>h&&c>a-t.helperProportions.width/2&&o+t.helperProportions.height/2>l&&u>r-t.helperProportions.height/2;case"pointer":return q(s.pageY,l,e.proportions().height)&&q(s.pageX,h,e.proportions().width);case"touch":return(l<=o&&o<=u||l<=r&&r<=u||o<l&&u<r)&&(h<=n&&n<=c||h<=a&&a<=c||n<h&&c<a);default:return!1}});function q(t,e,i){return e<=t&&t<e+i}!(k.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,s,n=k.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;n.length>i;i++)if(!(n[i].options.disabled||t&&!n[i].accept.call(n[i].element[0],t.currentItem||t.element))){for(s=0;a.length>s;s++)if(a[s]===n[i].element[0]){n[i].proportions().height=0;continue t}n[i].visible="none"!==n[i].element.css("display"),n[i].visible&&("mousedown"===o&&n[i]._activate.call(n[i],e),n[i].offset=n[i].element.offset(),n[i].proportions({width:n[i].element[0].offsetWidth,height:n[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return k.each((k.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&d(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled)&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e))}),i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)})},drag:function(n,o){n.options.refreshPositions&&k.ui.ddmanager.prepareOffsets(n,o),k.each(k.ui.ddmanager.droppables[n.options.scope]||[],function(){var t,e,i,s;this.options.disabled||this.greedyChild||!this.visible||(s=!(s=d(n,this,this.options.tolerance,o))&&this.isover?"isout":s&&!this.isover?"isover":null)&&(this.options.greedy&&(e=this.options.scope,(i=this.element.parents(":data(ui-droppable)").filter(function(){return k(this).droppable("instance").options.scope===e})).length)&&((t=k(i[0]).droppable("instance")).greedyChild="isover"===s),t&&"isover"===s&&(t.isover=!1,t.isout=!0,t._out.call(t,o)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,o),t)&&"isout"===s&&(t.isout=!1,t.isover=!0,t._over.call(t,o))})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||k.ui.ddmanager.prepareOffsets(t,e)}})!==k.uiBackCompat&&k.widget("ui.droppable",k.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),k.ui.droppable,k.widget("ui.resizable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){var i;return"hidden"!==k(t).css("overflow")&&(i=!1,0<t[e=e&&"left"===e?"scrollLeft":"scrollTop"]||(t[e]=1,i=0<t[e],t[e]=0,i))},_create:function(){var t,e=this.options,i=this;this._addClass("ui-resizable"),k.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(k("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),e.autoHide&&k(this.element).on("mouseenter",function(){e.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){e.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){k(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(t,e){"handles"===(this._super(t,e),t)&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var t,e,i,s,n,o=this.options,a=this;if(this.handles=o.handles||(k(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=k(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},e=0;i.length>e;e++)s="ui-resizable-"+(t=k.trim(i[e])),n=k("<div>"),this._addClass(n,"ui-resizable-handle "+s),n.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(n);this._renderAxis=function(t){var e,i,s;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=k(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=k(this.handles[e],this.element),s=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,i,s=!1;for(e in this.handles)i=k(this.handles[e])[0],i!==t.target&&!k.contains(i,t.target)||(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var e,i,s=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(e+=k(s.containment).scrollLeft()||0,i+=k(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=k(".ui-resizable-"+this.axis).css("cursor"),k("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e=this.originalMousePosition,i=this.axis,s=t.pageX-e.left||0,e=t.pageY-e.top||0,i=this._change[i];return this._updatePrevProperties(),i&&(i=i.apply(this,[t,s,e]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),k.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,s,n=this.options,o=this;return this._helper&&(i=(e=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:o.sizeDiff.height,e=e?0:o.sizeDiff.width,e={width:o.helper.width()-e,height:o.helper.height()-i},i=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,s=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(k.extend(e,{top:s,left:i})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper)&&!n.animate&&this._proportionallyResize(),k("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n=this.options,n={minWidth:this._isNumber(n.minWidth)?n.minWidth:0,maxWidth:this._isNumber(n.maxWidth)?n.maxWidth:1/0,minHeight:this._isNumber(n.minHeight)?n.minHeight:0,maxHeight:this._isNumber(n.maxHeight)?n.maxHeight:1/0};(this._aspectRatio||t)&&(t=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,s=n.maxWidth/this.aspectRatio,n.minWidth<t&&(n.minWidth=t),n.minHeight<i&&(n.minHeight=i),e<n.maxWidth&&(n.maxWidth=e),s<n.maxHeight)&&(n.maxHeight=s),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),i=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&i&&(t.top=h-e.minHeight),n&&i&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||k("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return k.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return k.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return k.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return k.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){k.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),k.ui.plugin.add("resizable","animate",{stop:function(e){var i=k(this).resizable("instance"),t=i.options,s=i._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),o=n&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,n=n?0:i.sizeDiff.width,n={width:i.size.width-n,height:i.size.height-o},o=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,a=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(k.extend(n,a&&o?{top:a,left:o}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&k(s[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),k.ui.plugin.add("resizable","containment",{start:function(){var i,s,t,e,n=k(this).resizable("instance"),o=n.options,a=n.element,o=o.containment,a=o instanceof k?o.get(0):/parent/.test(o)?a.parent().get(0):o;a&&(n.containerElement=k(a),/document/.test(o)||o===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:k(document),left:0,top:0,width:k(document).width(),height:k(document).height()||document.body.parentNode.scrollHeight}):(i=k(a),s=[],k(["Top","Right","Left","Bottom"]).each(function(t,e){s[t]=n._num(i.css("padding"+e))}),n.containerOffset=i.offset(),n.containerPosition=i.position(),n.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},o=n.containerOffset,e=n.containerSize.height,t=n.containerSize.width,t=n._hasScroll(a,"left")?a.scrollWidth:t,e=n._hasScroll(a)?a.scrollHeight:e,n.parentData={element:a,left:o.left,top:o.top,width:t,height:e}))},resize:function(t){var e=k(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.position,t=e._aspectRatio||t.shiftKey,o={top:0,left:0},a=e.containerElement,r=!0;a[0]!==document&&/static/.test(a.css("position"))&&(o=s),n.left<(e._helper?s.left:0)&&(e.size.width=e.size.width+(e._helper?e.position.left-s.left:e.position.left-o.left),t&&(e.size.height=e.size.width/e.aspectRatio,r=!1),e.position.left=i.helper?s.left:0),n.top<(e._helper?s.top:0)&&(e.size.height=e.size.height+(e._helper?e.position.top-s.top:e.position.top),t&&(e.size.width=e.size.height*e.aspectRatio,r=!1),e.position.top=e._helper?s.top:0),a=e.containerElement.get(0)===e.element.parent().get(0),i=/relative|absolute/.test(e.containerElement.css("position")),a&&i?(e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top):(e.offset.left=e.element.offset().left,e.offset.top=e.element.offset().top),n=Math.abs(e.sizeDiff.width+(e._helper?e.offset.left-o.left:e.offset.left-s.left)),a=Math.abs(e.sizeDiff.height+(e._helper?e.offset.top-o.top:e.offset.top-s.top)),n+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-n,t)&&(e.size.height=e.size.width/e.aspectRatio,r=!1),a+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-a,t)&&(e.size.width=e.size.height*e.aspectRatio,r=!1),r||(e.position.left=e.prevPosition.left,e.position.top=e.prevPosition.top,e.size.width=e.prevSize.width,e.size.height=e.prevSize.height)},stop:function(){var t=k(this).resizable("instance"),e=t.options,i=t.containerOffset,s=t.containerPosition,n=t.containerElement,o=k(t.helper),a=o.offset(),r=o.outerWidth()-t.sizeDiff.width,o=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(n.css("position"))&&k(this).css({left:a.left-s.left-i.left,width:r,height:o}),t._helper&&!e.animate&&/static/.test(n.css("position"))&&k(this).css({left:a.left-s.left-i.left,width:r,height:o})}}),k.ui.plugin.add("resizable","alsoResize",{start:function(){var t=k(this).resizable("instance").options;k(t.alsoResize).each(function(){var t=k(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var e=k(this).resizable("instance"),s=e.options,n=e.originalSize,o=e.originalPosition,a={height:e.size.height-n.height||0,width:e.size.width-n.width||0,top:e.position.top-o.top||0,left:e.position.left-o.left||0};k(s.alsoResize).each(function(){var t=k(this),s=k(this).data("ui-resizable-alsoresize"),n={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];k.each(e,function(t,e){var i=(s[e]||0)+(a[e]||0);i&&0<=i&&(n[e]=i||null)}),t.css(n)})},stop:function(){k(this).removeData("ui-resizable-alsoresize")}}),k.ui.plugin.add("resizable","ghost",{start:function(){var t=k(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==k.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=k(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=k(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),k.ui.plugin.add("resizable","grid",{resize:function(){var t,e=k(this).resizable("instance"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,a=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,s=Math.round((s.height-n.height)/l)*l,u=n.width+c,d=n.height+s,p=i.maxWidth&&u>i.maxWidth,f=i.maxHeight&&d>i.maxHeight,g=i.minWidth&&i.minWidth>u,m=i.minHeight&&i.minHeight>d;i.grid=r,g&&(u+=h),m&&(d+=l),p&&(u-=h),f&&(d-=l),/^(se|s|e)$/.test(a)?(e.size.width=u,e.size.height=d):/^(ne)$/.test(a)?(e.size.width=u,e.size.height=d,e.position.top=o.top-s):/^(sw)$/.test(a)?(e.size.width=u,e.size.height=d,e.position.left=o.left-c):((d-l<=0||u-h<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<d-l?(e.size.height=d,e.position.top=o.top-s):(d=l-t.height,e.size.height=d,e.position.top=o.top+n.height-d),0<u-h?(e.size.width=u,e.position.left=o.left-c):(u=h-t.width,e.size.width=u,e.position.left=o.left+n.width-u))}}),k.ui.resizable,k.widget("ui.selectable",k.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var i=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){i.elementPos=k(i.element[0]).offset(),i.selectees=k(i.options.filter,i.element[0]),i._addClass(i.selectees,"ui-selectee"),i.selectees.each(function(){var t=k(this),e=t.offset(),e={left:e.left-i.elementPos.left,top:e.top-i.elementPos.top};k.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=k("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var s=this,t=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=k(this.element[0]).offset(),this.options.disabled||(this.selectees=k(t.filter,this.element[0]),this._trigger("start",i),k(t.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=k.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(s._removeClass(t.$element,"ui-selected"),t.selected=!1,s._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,s._trigger("unselecting",i,{unselecting:t.element}))}),k(i.target).parents().addBack().each(function(){var t,e=k.data(this,"selectable-item");return e?(t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),s._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?s._trigger("selecting",i,{selecting:e.element}):s._trigger("unselecting",i,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(s){var t,n,o,a,r,h,l;if(this.dragged=!0,!this.options.disabled)return o=(n=this).options,a=this.opos[0],r=this.opos[1],h=s.pageX,l=s.pageY,h<a&&(t=h,h=a,a=t),l<r&&(t=l,l=r,r=t),this.helper.css({left:a,top:r,width:h-a,height:l-r}),this.selectees.each(function(){var t=k.data(this,"selectable-item"),e=!1,i={};t&&t.element!==n.element[0]&&(i.left=t.left+n.elementPos.left,i.right=t.right+n.elementPos.left,i.top=t.top+n.elementPos.top,i.bottom=t.bottom+n.elementPos.top,"touch"===o.tolerance?e=!(h<i.left||i.right<a||l<i.top||i.bottom<r):"fit"===o.tolerance&&(e=a<i.left&&i.right<h&&r<i.top&&i.bottom<l),e?(t.selected&&(n._removeClass(t.$element,"ui-selected"),t.selected=!1),t.unselecting&&(n._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1),t.selecting||(n._addClass(t.$element,"ui-selecting"),t.selecting=!0,n._trigger("selecting",s,{selecting:t.element}))):(t.selecting&&((s.metaKey||s.ctrlKey)&&t.startselected?(n._removeClass(t.$element,"ui-selecting"),t.selecting=!1,n._addClass(t.$element,"ui-selected"),t.selected=!0):(n._removeClass(t.$element,"ui-selecting"),t.selecting=!1,t.startselected&&(n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0),n._trigger("unselecting",s,{unselecting:t.element}))),!t.selected||s.metaKey||s.ctrlKey||t.startselected||(n._removeClass(t.$element,"ui-selected"),t.selected=!1,n._addClass(t.$element,"ui-unselecting"),t.unselecting=!0,n._trigger("unselecting",s,{unselecting:t.element}))))}),!1},_mouseStop:function(e){var i=this;return this.dragged=!1,k(".ui-unselecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");i._removeClass(t.$element,"ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),k(".ui-selecting",this.element[0]).each(function(){var t=k.data(this,"selectable-item");i._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),k.widget("ui.sortable",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),k.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var i=null,s=!1,n=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),k(t.target).parents().each(function(){return k.data(this,n.widgetName+"-item")===n?(i=k(this),!1):void 0}),!(i=k.data(t.target,n.widgetName+"-item")===n?k(t.target):i))||(this.options.handle&&!e&&(k(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(s=!0)}),!s)||(this.currentItem=i,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,e,i){var s,n,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},k.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",o.cursor),this.storedStylesheet=k("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(n)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return k.ui.ddmanager&&(k.ui.ddmanager.current=this),k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i,s,n,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a)&&k.ui.ddmanager&&!o.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(s=(i=this.items[e]).item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==s&&!k.contains(this.placeholder[0],s)&&("semi-dynamic"!==this.options.type||!k.contains(this.element[0],s))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),k.ui.ddmanager&&k.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){var i,s,n,o;if(t)return k.ui.ddmanager&&!this.options.dropBehaviour&&k.ui.ddmanager.drop(this,t),this.options.revert?(s=(i=this).placeholder.offset(),o={},(n=this.options.axis)&&"x"!==n||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,k(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})):this._clear(t,e),!1},cancel:function(){if(this.dragging){this._mouseUp(new k.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),k.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?k(this.domPosition.prev).after(this.currentItem):k(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},k(t).each(function(){var t=(k(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(k(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,l="x"===this.options.axis||r<s+l&&s+l<h,c="y"===this.options.axis||o<e+c&&e+c<a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?l&&c:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),t="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width);return!!(e&&t)&&(e=this._getDragVerticalDirection(),t=this._getDragHorizontalDirection(),this.floating?"right"===t||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),t=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&t||"left"===s&&!t:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){a.push(this)}var i,s,n,o,a=[],r=[],h=this._connectWith();if(h&&t)for(i=h.length-1;0<=i;i--)for(s=(n=k(h[i],this.document[0])).length-1;0<=s;s--)(o=k.data(n[s],this.widgetFullName))&&o!==this&&!o.options.disabled&&r.push([k.isFunction(o.options.items)?o.options.items.call(o.element):k(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(r.push([k.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):k(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;0<=i;i--)r[i][0].each(e);return k(a)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=k.grep(this.items,function(t){for(var e=0;i.length>e;e++)if(i[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,i,s,n,o,a,r,h,l=this.items,c=[[k.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):k(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(e=u.length-1;0<=e;e--)for(i=(s=k(u[e],this.document[0])).length-1;0<=i;i--)(n=k.data(s[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&(c.push([k.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):k(n.options.items,n.element),n]),this.containers.push(n));for(e=c.length-1;0<=e;e--)for(o=c[e][1],h=(a=c[e][i=0]).length;i<h;i++)(r=k(a[i])).data(this.widgetName+"-item",o),l.push({item:r,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,i,s,n;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(i=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?k(this.options.toleranceElement,i.item):i.item,t||(i.width=s.outerWidth(),i.height=s.outerHeight()),n=s.offset(),i.left=n.left,i.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)n=this.containers[e].element.offset(),this.containers[e].containerCache.left=n.left,this.containers[e].containerCache.top=n.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(i){var s,n=(i=i||this).options;n.placeholder&&n.placeholder.constructor!==String||(s=n.placeholder,n.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=k("<"+t+">",i.document[0]);return i._addClass(e,"ui-sortable-placeholder",s||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===t?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),k("<tr>",i.document[0]).appendTo(e)):"tr"===t?i._createTrPlaceholder(i.currentItem,e):"img"===t&&e.attr("src",i.currentItem.attr("src")),s||e.css("visibility","hidden"),e},update:function(t,e){s&&!n.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width())||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10))}}),i.placeholder=k(n.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),n.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){k("<td>&#160;</td>",i.document[0]).attr("colspan",k(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){for(var e,i,s,n,o,a,r,h,l,c=null,u=null,d=this.containers.length-1;0<=d;d--)if(!k.contains(this.currentItem[0],this.containers[d].element[0]))if(this._intersectsWith(this.containers[d].containerCache)){if(c&&k.contains(this.containers[d].element[0],c.element[0]))continue;c=this.containers[d],u=d}else this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",t,this._uiHash(this)),this.containers[d].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(i=1e4,s=null,n=(h=c.floating||this._isFloating(this.currentItem))?"left":"top",o=h?"width":"height",l=h?"pageX":"pageY",e=this.items.length-1;0<=e;e--)k.contains(this.containers[u].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(a=this.items[e].item.offset()[n],r=!1,t[l]-a>this.items[e][o]/2&&(r=!0),i>Math.abs(t[l]-a))&&(i=Math.abs(t[l]-a),s=this.items[e],this.direction=r?"up":"down");(s||this.options.dropOnEmpty)&&(this.currentContainer===this.containers[u]?this.currentContainer.containerCache.over||(this.containers[u]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1):(s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[u].element,!0),this._trigger("change",t,this._uiHash()),this.containers[u]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",t,this._uiHash(this)),this.containers[u].containerCache.over=1))}},_createHelper:function(t){var e=this.options,t=k.isFunction(e.helper)?k(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return t.parents("body").length||k("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),t[0].style.width&&!e.forceHelperSize||t.width(this.currentItem.width()),t[0].style.height&&!e.forceHelperSize||t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=k.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t;return"relative"===this.cssPosition?{top:(t=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=k(i.containment)[0],i=k(i.containment).offset(),e="hidden"!==k(t).css("overflow"),this.containment=[i.left+(parseInt(k(t).css("borderLeftWidth"),10)||0)+(parseInt(k(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(k(t).css("borderTopWidth"),10)||0)+(parseInt(k(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(k(t).css("borderLeftWidth"),10)||0)-(parseInt(k(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(k(t).css("borderTopWidth"),10)||0)-(parseInt(k(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*t,left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*t}},_generatePosition:function(t){var e=this.options,i=t.pageX,s=t.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3])&&(s=this.containment[3]+this.offset.click.top),e.grid)&&(t=this.originalPageY+Math.round((s-this.originalPageY)/e.grid[1])*e.grid[1],s=!this.containment||t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-e.grid[1]:t+e.grid[1],t=this.originalPageX+Math.round((i-this.originalPageX)/e.grid[0])*e.grid[0],i=!this.containment||t-this.offset.click.left>=this.containment[0]&&t-this.offset.click.left<=this.containment[2]?t:t-this.offset.click.left>=this.containment[0]?t-e.grid[0]:t+e.grid[0]),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(e,i,s){return function(t){s._trigger(e,t,i._uiHash(i))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this===this.currentContainer||e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))),s=this.containers.length-1;0<=s;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===k.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||k([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),k.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=k(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():k()}},_createIcons:function(){var t,e=this.options.icons;e&&(t=k("<span>"),this._addClass(t,"ui-accordion-header-icon","ui-icon "+e.header),t.prependTo(this.headers),t=this.active.children(".ui-accordion-header-icon"),this._removeClass(t,e.header)._addClass(t,null,e.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),void("icons"===t&&(this._destroyIcons(),e)&&this._createIcons()))},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=k.ui.keyCode,i=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:n=this.headers[(s+1)%i];break;case e.LEFT:case e.UP:n=this.headers[(s-1+i)%i];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:n=this.headers[0];break;case e.END:n=this.headers[i-1]}n&&(k(t.target).attr("tabIndex",-1),k(n).attr("tabIndex",0),k(n).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===k.ui.keyCode.UP&&t.ctrlKey&&k(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=k()):!1===t.active?this._activate(0):this.active.length&&!k.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=k()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var i,t=this.options,e=t.heightStyle,s=this.element.parent();this.active=this._findActive(t.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var t=k(this),e=t.uniqueId().attr("id"),i=t.next(),s=i.uniqueId().attr("id");t.attr("aria-controls",s),i.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(i=s.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=k(this).outerHeight(!0)}),this.headers.next().each(function(){k(this).height(Math.max(0,i-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.headers.next().each(function(){var t=k(this).is(":visible");t||k(this).show(),i=Math.max(i,k(this).css("height","").height()),t||k(this).hide()}).height(i))},_activate:function(t){t=this._findActive(t)[0];t!==this.active[0]&&(t=t||this.active[0],this._eventHandler({target:t,currentTarget:t,preventDefault:k.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):k()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&k.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,i=this.active,s=k(t.currentTarget),n=s[0]===i[0],o=n&&e.collapsible,a=o?k():s.next(),r=i.next(),r={oldHeader:i,oldPanel:r,newHeader:o?k():s,newPanel:a};t.preventDefault(),n&&!e.collapsible||!1===this._trigger("beforeActivate",t,r)||(e.active=!o&&this.headers.index(s),this.active=n?k():s,this._toggle(r),this._removeClass(i,"ui-accordion-header-active","ui-state-active"),e.icons&&(a=i.children(".ui-accordion-header-icon"),this._removeClass(a,null,e.icons.activeHeader)._addClass(a,null,e.icons.header)),n)||(this._removeClass(s,"ui-accordion-header-collapsed")._addClass(s,"ui-accordion-header-active","ui-state-active"),e.icons&&(t=s.children(".ui-accordion-header-icon"),this._removeClass(t,null,e.icons.header)._addClass(t,null,e.icons.activeHeader)),this._addClass(s.next(),"ui-accordion-content-active"))},_toggle:function(t){var e=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=i,this.options.animate?this._animate(e,i,t):(i.hide(),e.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(k(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,i,e){function s(){o._toggleComplete(e)}var n,o=this,a=0,r=t.css("box-sizing"),h=t.length&&(!i.length||t.index()<i.index()),l=this.options.animate||{},h=h&&l.down||l,c=(c="string"==typeof h?h:c)||h.easing||l.easing,u=(u="number"==typeof h?h:u)||h.duration||l.duration;return i.length?t.length?(n=t.show().outerHeight(),i.animate(this.hideProps,{duration:u,easing:c,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:u,easing:c,complete:s,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===r&&(a+=e.now):"content"!==o.options.heightStyle&&(e.now=Math.round(n-i.outerHeight()-a),a=0)}})):i.animate(this.hideProps,u,c,s):t.animate(this.showProps,u,c,s)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),k.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=k(t.target),i=k(k.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active)&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer))},"mouseenter .ui-menu-item":function(t){var e,i;this.previousFilter||(e=k(t.target).closest(".ui-menu-item"),i=k(t.currentTarget),e[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i)))},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(t){this._delay(function(){k.contains(this.element[0],k.ui.safeActiveElement(this.document[0]))||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each(function(){var t=k(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var e,i,s,n=!0;switch(t.keyCode){case k.ui.keyCode.PAGE_UP:this.previousPage(t);break;case k.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case k.ui.keyCode.HOME:this._move("first","first",t);break;case k.ui.keyCode.END:this._move("last","last",t);break;case k.ui.keyCode.UP:this.previous(t);break;case k.ui.keyCode.DOWN:this.next(t);break;case k.ui.keyCode.LEFT:this.collapse(t);break;case k.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case k.ui.keyCode.ENTER:case k.ui.keyCode.SPACE:this._activate(t);break;case k.ui.keyCode.ESCAPE:this.collapse(t);break;default:e=this.previousFilter||"",s=n=!1,i=96<=t.keyCode&&t.keyCode<=105?""+(t.keyCode-96):String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),i===e?s=!0:i=e+i,e=this._filterMenuItems(i),(e=s&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}n&&t.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,e,s=this,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),t=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=k(this),e=t.prev(),i=k("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+n),e.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",e.attr("id"))}),this._addClass(t,"ui-menu","ui-widget ui-widget-content ui-front"),(t=i.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=k(this);s._isDivider(t)&&s._addClass(t,"ui-menu-divider","ui-widget-content")}),e=(i=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(e,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!k.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){var i;"icons"===t&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,i,s;this._hasScroll()&&(e=parseFloat(k.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(k.css(this.activeMenu[0],"paddingTop"))||0,e=t.offset().top-this.activeMenu.offset().top-e-i,i=this.activeMenu.scrollTop(),s=this.activeMenu.height(),t=t.outerHeight(),e<0?this.activeMenu.scrollTop(i+e):s<e+t&&this.activeMenu.scrollTop(i+e-s+t))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=k.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var t=i?this.element:k(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this._removeClass(t.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=t},this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!k(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;(s=this.active?"first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0):s)&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(t){var e,i,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=k(this)).offset().top-i-s<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var e,i,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=k(this)).offset().top-i+s}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||k(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),e=RegExp("^"+t,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return e.test(k.trim(k(this).children(".ui-menu-item-wrapper").text()))})}}),k.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var i,s,n,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,t="input"===t;this.isMultiLine=e||!t&&this._isContentEditable(this.element),this.valueMethod=this.element[e||t?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))s=n=i=!0;else{s=n=i=!1;var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:i=!0,this._move("nextPage",t);break;case e.UP:i=!0,this._keyEvent("previous",t);break;case e.DOWN:i=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(i=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:s=!0,this._searchTimeout(t)}}},keypress:function(t){if(i)i=!1,this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault();else if(!s){var e=k.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=k("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==k.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,e){var i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent)&&/^mouse/.test(t.originalEvent.type)?(this.menu.blur(),void this.document.one("mousemove",function(){k(t.target).trigger(t.originalEvent)})):(i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),void((e=e.item.attr("aria-label")||i.value)&&k.trim(e).length&&(this.liveRegion.children().hide(),k("<div>").text(e).appendTo(this.liveRegion))))},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==k.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=k("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var e=this.menu.element[0];return t.target===this.element[0]||t.target===e||k.contains(e,t.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t=(t=(t=t&&(t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)))&&t[0]?t:this.element.closest(".ui-front, dialog")).length?t:this.document[0].body},_initSource:function(){var i,s,n=this;k.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(k.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(t,e){n.xhr&&n.xhr.abort(),n.xhr=k.ajax({url:s,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(s){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),i=s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;t&&(e||i)||(this.selectedItem=null,this.search(null,s))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return k.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:k.map(t,function(t){return"string"==typeof t?{label:t,value:t}:k.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(k.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var s=this;k.each(t,function(t,e){s._renderItemData(i,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return k("<li>").append(k("<div>").text(e.label)).appendTo(t)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){var e;return!!t.length&&("inherit"===(e=t.prop("contentEditable"))?this._isContentEditable(t.parent()):"true"===e)}}),k.extend(k.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=RegExp(k.ui.autocomplete.escapeRegex(e),"i");return k.grep(t,function(t){return i.test(t.label||t.value||t)})}}),k.widget("ui.autocomplete",k.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),k("<div>").text(e).appendTo(this.liveRegion))}}),k.ui.autocomplete;var K,p,f,g,U,V,$,X,G,Q,J,Z,tt,m,_,v,et,it,b,y,w,I,T,P,st=/ui-corner-([a-z]){2,6}/g,M=(k.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,a=[];k.each(this.options.items,function(s,t){var e,n;return t?"controlgroupLabel"===s?((e=o.element.find(t)).each(function(){var t=k(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(e,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(e.get()))):void(k.fn[s]&&(n=o["_"+s+"Options"]?o["_"+s+"Options"]("middle"):{classes:{}},o.element.find(t).each(function(){var t=k(this),e=t[s]("instance"),i=k.widget.extend({},n);"button"===s&&t.parent(".ui-spinner").length||((e=e||t[s]()[s]("instance"))&&(i.classes=o._resolveClassesValues(i.classes,e)),t[s](i),i=t[s]("widget"),k.data(i[0],"ui-controlgroup-data",e||t[s]("instance")),a.push(i[0]))}))):void 0}),this.childWidgets=k(k.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each(function(){var t=k(this).data("ui-controlgroup-data");t&&t[e]&&t[e]()})},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label;this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){t=this._buildSimpleOptions(t,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(i,s){var n={};return k.each(i,function(t){var e=s.options.classes[t]||"",e=k.trim(e.replace(st,""));n[t]=(e+" "+i[t]).replace(/\s+/g," ")}),n},_setOption:function(t,e){return"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"===t?void this._callChildMethod(e?"disable":"enable"):void this.refresh()},refresh:function(){var n,o=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),n=this.childWidgets,(n=this.options.onlyVisible?n.filter(":visible"):n).length&&(k.each(["first","last"],function(t,e){var i,s=n[e]().data("ui-controlgroup-data");s&&o["_"+s.widgetName+"Options"]?((i=o["_"+s.widgetName+"Options"](1===n.length?"only":e)).classes=o._resolveClassesValues(i.classes,s),s.element[s.widgetName](i)):o._updateCornerClass(n[e](),e)}),this._callChildMethod("refresh"))}}),k.widget("ui.checkboxradio",[k.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,e=this,i=this._super()||{};return this._readType(),t=this.element.labels(),this.label=k(t[t.length-1]),this.label.length||k.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){e.originalLabel+=3===this.nodeType?k(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(i.disabled=t),i},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon)&&this._addClass(this.icon,null,"ui-state-hover"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||k.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,e="input[name='"+k.ui.escapeSelector(t)+"']";return t?(this.form.length?k(this.form[0].elements).filter(e):k(e).filter(function(){return 0===k(this).form().length})).not(this.element):k([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=k(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return"label"!==t||e?(this._super(t,e),"disabled"===t?(this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e)):void this.refresh()):void 0},_updateIcon:function(t){var e="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=k("<span>"),this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(e+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):e+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",e),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),(t=this.iconSpace?t.not(this.iconSpace[0]):t).remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),k.ui.checkboxradio,k.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===k.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,e){var t="iconPosition"!==t,i=t?this.options.iconPosition:e,s="top"===i||"bottom"===i;this.icon?t&&this._removeClass(this.icon,null,this.options.icon):(this.icon=k("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),t&&this._addClass(this.icon,null,e),this._attachIcon(i),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=k("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(i))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=(void 0===t.showLabel?this.options:t).showLabel,i=(void 0===t.icon?this.options:t).icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace)&&this.iconSpace.remove()),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),this.element[0].disabled=e)&&this.element.blur()},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==k.uiBackCompat&&(k.widget("ui.button",k.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){return"text"===t?void this._super("showLabel",e):("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),k.fn.button=(K=k.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?K.apply(this,arguments):(k.ui.checkboxradio||k.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),k.fn.buttonset=function(){return k.ui.controlgroup||k.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),k.ui.button,k.extend(k.ui,{datepicker:{version:"1.12.1"}}),k.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return h(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var i,s=t.nodeName.toLowerCase(),n="div"===s||"span"===s;t.id||(this.uuid+=1,t.id="dp"+this.uuid),(i=this._newInst(k(t),n)).settings=k.extend({},e||{}),"input"===s?this._connectDatepicker(t,i):n&&this._inlineDatepicker(t,i)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?i(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var i=k(t);e.append=k([]),e.trigger=k([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(e),k.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,s=this._get(e,"appendText"),n=this._get(e,"isRTL");e.append&&e.append.remove(),s&&(e.append=k("<span class='"+this._appendClass+"'>"+s+"</span>"),t[n?"before":"after"](e.append)),t.off("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(s=this._get(e,"showOn"))&&"both"!==s||t.on("focus",this._showDatepicker),"button"!==s&&"both"!==s||(s=this._get(e,"buttonText"),i=this._get(e,"buttonImage"),e.trigger=k(this._get(e,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:i,alt:s,title:s}):k("<button type='button'></button>").addClass(this._triggerClass).html(i?k("<img/>").attr({src:i,alt:s,title:s}):s)),t[n?"before":"after"](e.trigger),e.trigger.on("click",function(){return k.datepicker._datepickerShowing&&k.datepicker._lastInput===t[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==t[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){var e,i,s,n,o,a;this._get(t,"autoSize")&&!t.inline&&(o=new Date(2009,11,20),(a=this._get(t,"dateFormat")).match(/[DM]/)&&(o.setMonth((e=function(t){for(n=s=i=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s})(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length))},_inlineDatepicker:function(t,e){var i=k(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv),k.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var o,a=this._dialogInst;return a||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),k("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},k.data(this._dialogInput[0],"datepicker",a)),h(a.settings,s||{}),e=e&&e.constructor===Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,s=document.documentElement.clientHeight,e=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+e,s/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),k.blockUI&&k.blockUI(this.dpDiv),k.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(t){var e,i=k(t),s=k.data(t,"datepicker");i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),k.removeData(t,"datepicker"),"input"===e?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||i.removeClass(this.markerClassName).empty(),p===s)&&(p=null)},_enableDatepicker:function(e){var t,i=k(e),s=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((s=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,i=k(e),s=k.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((s=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(t)for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return k.data(t,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s,n,o,a,r=this._getInst(t);return 2===arguments.length&&"string"==typeof e?"defaults"===e?k.extend({},k.datepicker._defaults):r?"all"===e?k.extend({},r.settings):this._get(r,e):null:(s=e||{},"string"==typeof e&&((s={})[e]=i),void(r&&(this._curInst===r&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(r,"min"),a=this._getMinMaxDate(r,"max"),h(r.settings,s),null!==o&&void 0!==s.dateFormat&&void 0===s.minDate&&(r.settings.minDate=this._formatDate(r,o)),null!==a&&void 0!==s.dateFormat&&void 0===s.maxDate&&(r.settings.maxDate=this._formatDate(r,a)),"disabled"in s&&(s.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(k(t),r),this._autoSize(r),this._setDate(r,n),this._updateAlternate(r),this._updateDatepicker(r))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){t=this._getInst(t);t&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){t=this._getInst(t);t&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){t=this._getInst(t);return t&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(t){var e,i,s=k.datepicker._getInst(t.target),n=!0,o=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,k.datepicker._datepickerShowing)switch(t.keyCode){case 9:k.datepicker._hideDatepicker(),n=!1;break;case 13:return(i=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",s.dpDiv))[0]&&k.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),(i=k.datepicker._get(s,"onSelect"))?(e=k.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[e,s])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(s,"stepBigMonths"):-k.datepicker._get(s,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(s,"stepBigMonths"):+k.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&k.datepicker._clearDate(t.target),n=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&k.datepicker._gotoToday(t.target),n=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?1:-1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(s,"stepBigMonths"):-k.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,-7,"D"),n=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,o?-1:1,"D"),n=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(s,"stepBigMonths"):+k.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,7,"D"),n=t.ctrlKey||t.metaKey;break;default:n=!1}else 36===t.keyCode&&t.ctrlKey?k.datepicker._showDatepicker(this):n=!1;n&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i=k.datepicker._getInst(t.target);return k.datepicker._get(i,"constrainInput")?(i=k.datepicker._possibleChars(k.datepicker._get(i,"dateFormat")),e=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||e<" "||!i||-1<i.indexOf(e)):void 0},_doKeyUp:function(t){t=k.datepicker._getInst(t.target);if(t.input.val()!==t.lastVal)try{k.datepicker.parseDate(k.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,k.datepicker._getFormatConfig(t))&&(k.datepicker._setDateFromField(t),k.datepicker._updateAlternate(t),k.datepicker._updateDatepicker(t))}catch(t){}return!0},_showDatepicker:function(t){var e,i,s,n;"input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=k("input",t.parentNode)[0]),k.datepicker._isDisabledDatepicker(t)||k.datepicker._lastInput===t||(n=k.datepicker._getInst(t),k.datepicker._curInst&&k.datepicker._curInst!==n&&(k.datepicker._curInst.dpDiv.stop(!0,!0),n)&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0]),!1!==(i=(i=k.datepicker._get(n,"beforeShow"))?i.apply(t,[t,n]):{})&&(h(n.settings,i),n.lastVal=null,k.datepicker._lastInput=t,k.datepicker._setDateFromField(n),k.datepicker._inDialog&&(t.value=""),k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(t),k.datepicker._pos[1]+=t.offsetHeight),e=!1,k(t).parents().each(function(){return!(e|="fixed"===k(this).css("position"))}),i={left:k.datepicker._pos[0],top:k.datepicker._pos[1]},k.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),k.datepicker._updateDatepicker(n),i=k.datepicker._checkOffset(n,i,e),n.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":e?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),n.inline||(i=k.datepicker._get(n,"showAnim"),s=k.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(e=parseInt(t.css("zIndex"),10),!isNaN(e))&&0!==e)return e;t=t.parent()}return 0}(k(t))+1),k.datepicker._datepickerShowing=!0,k.effects&&k.effects.effect[i]?n.dpDiv.show(i,k.datepicker._get(n,"showOptions"),s):n.dpDiv[i||"show"](i?s:null),k.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),k.datepicker._curInst=n)))},_updateDatepicker:function(t){this.maxRows=4,(p=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,i=this._getNumberOfMonths(t),s=i[1],n=t.dpDiv.find("."+this._dayOverClass+" a");0<n.length&&o.apply(n.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<s&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===k.datepicker._curInst&&k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:k(document).scrollLeft()),h=document.documentElement.clientHeight+(i?0:k(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-o:0,e.left-=i&&e.left===t.input.offset().left?k(document).scrollLeft():0,e.top-=i&&e.top===t.input.offset().top+a?k(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&s<r?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>h&&n<h?Math.abs(n+a):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||k.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=k(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,i,s=this._curInst;!s||t&&s!==k.data(t,"datepicker")||this._datepickerShowing&&(t=this._get(s,"showAnim"),i=this._get(s,"duration"),e=function(){k.datepicker._tidyDialog(s)},k.effects&&(k.effects.effect[t]||k.effects[t])?s.dpDiv.hide(t,k.datepicker._get(s,"showOptions"),i,e):s.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,e),t||e(),this._datepickerShowing=!1,(i=this._get(s,"onClose"))&&i.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI)&&(k.unblockUI(),k("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){var e;k.datepicker._curInst&&(t=k(t.target),e=k.datepicker._getInst(t[0]),!(t[0].id===k.datepicker._mainDivId||0!==t.parents("#"+k.datepicker._mainDivId).length||t.hasClass(k.datepicker.markerClassName)||t.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)||t.hasClass(k.datepicker.markerClassName)&&k.datepicker._curInst!==e)&&k.datepicker._hideDatepicker()},_adjustDate:function(t,e,i){var t=k(t),s=this._getInst(t[0]);this._isDisabledDatepicker(t[0])||(this._adjustInstDate(s,e+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(t){var e,t=k(t),i=this._getInst(t[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(t,e,i){var t=k(t),s=this._getInst(t[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(t)},_selectDay:function(t,e,i,s){var n=k(t);k(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=k("a",s).html(),n.selectedMonth=n.currentMonth=e,n.selectedYear=n.currentYear=i,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){t=k(t);this._selectDate(t,"")},_selectDate:function(t,e){var i,t=k(t),t=this._getInst(t[0]);e=null!=e?e:this._formatDate(t),t.input&&t.input.val(e),this._updateAlternate(t),(i=this._get(t,"onSelect"))?i.apply(t.input?t.input[0]:null,[e,t]):t.input&&t.input.trigger("change"),t.inline?this._updateDatepicker(t):(this._hideDatepicker(),this._lastInput=t.input[0],"object"!=typeof t.input[0]&&t.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var e,i,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),e=this._getDate(t),i=this.formatDate(i,e,this._getFormatConfig(t)),k(s).val(i))},noWeekends:function(t){t=t.getDay();return[0<t&&t<6,""]},iso8601Week:function(t){var e,t=new Date(t.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},parseDate:function(e,n,t){if(null==e||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?""+n:n+""))return null;function i(t){var e=b(t),e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,t=RegExp("^\\d{"+("y"===t?e:1)+","+e+"}");if(e=n.substring(h).match(t))return h+=e[0].length,parseInt(e[0],10);throw"Missing number at position "+h}function s(t,e,i){var s=-1,t=k.map(b(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(k.each(t,function(t,e){var i=e[1];return n.substr(h,i.length).toLowerCase()===i.toLowerCase()?(s=e[0],h+=i.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+h}function o(){if(n.charAt(h)!==e.charAt(y))throw"Unexpected literal at position "+h;h++}for(var a,r,h=0,l=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,u=(t?t.dayNames:null)||this._defaults.dayNames,d=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,p=(t?t.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,m=-1,_=-1,v=!1,b=function(t){t=e.length>y+1&&e.charAt(y+1)===t;return t&&y++,t},y=0;e.length>y;y++)if(v)"'"!==e.charAt(y)||b("'")?o():v=!1;else switch(e.charAt(y)){case"d":m=i("d");break;case"D":s("D",c,u);break;case"o":_=i("o");break;case"m":g=i("m");break;case"M":g=s("M",d,p);break;case"y":f=i("y");break;case"@":f=(r=new Date(i("@"))).getFullYear(),g=r.getMonth()+1,m=r.getDate();break;case"!":f=(r=new Date((i("!")-this._ticksTo1970)/1e4)).getFullYear(),g=r.getMonth()+1,m=r.getDate();break;case"'":b("'")?o():v=!0;break;default:o()}if(n.length>h&&(t=n.substr(h),!/^\s+/.test(t)))throw"Extra/unparsed characters found in date: "+t;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=l?0:-100)),-1<_)for(g=1,m=_;!(m<=(a=this._getDaysInMonth(f,g-1)));)g++,m-=a;if((r=this._daylightSavingAdjust(new Date(f,g-1,m))).getFullYear()!==f||r.getMonth()+1!==g||r.getDate()!==m)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";function s(t,e,i){var s=""+e;if(c(t))for(;i>s.length;)s="0"+s;return s}function n(t,e,i,s){return(c(t)?s:i)[e]}var o,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,h=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,l=(i?i.monthNames:null)||this._defaults.monthNames,c=function(t){t=e.length>o+1&&e.charAt(o+1)===t;return t&&o++,t},u="",d=!1;if(t)for(o=0;e.length>o;o++)if(d)"'"!==e.charAt(o)||c("'")?u+=e.charAt(o):d=!1;else switch(e.charAt(o)){case"d":u+=s("d",t.getDate(),2);break;case"D":u+=n("D",t.getDay(),a,r);break;case"o":u+=s("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=s("m",t.getMonth()+1,2);break;case"M":u+=n("M",t.getMonth(),h,l);break;case"y":u+=c("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":c("'")?u+="'":d=!0;break;default:u+=e.charAt(o)}return u},_possibleChars:function(e){function t(t){return(t=e.length>n+1&&e.charAt(n+1)===t)&&n++,t}for(var i="",s=!1,n=0;e.length>n;n++)if(s)"'"!==e.charAt(n)||t("'")?i+=e.charAt(n):s=!1;else switch(e.charAt(n)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":t("'")?i+="'":s=!0;break;default:i+=e.charAt(n)}return i},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(t){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(r,t,e){var i,s=null==t||""===t?e:"string"==typeof t?function(t){try{return k.datepicker.parseDate(k.datepicker._get(r,"dateFormat"),t,k.datepicker._getFormatConfig(r))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?k.datepicker._getDate(r):null)||new Date,i=e.getFullYear(),s=e.getMonth(),n=e.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(t);a;){switch(a[2]||"d"){case"d":case"D":n+=parseInt(a[1],10);break;case"w":case"W":n+=7*parseInt(a[1],10);break;case"m":case"M":s+=parseInt(a[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),n=Math.min(n,k.datepicker._getDaysInMonth(i,s))}a=o.exec(t)}return new Date(i,s,n)}(t):"number"==typeof t?isNaN(t)?e:(s=t,(i=new Date).setDate(i.getDate()+s),i):new Date(t.getTime());return(s=s&&"Invalid Date"==""+s?e:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){k.datepicker._adjustDate(i,-e,"M")},next:function(){k.datepicker._adjustDate(i,+e,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(i)},selectDay:function(){return k.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return k.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return k.datepicker._selectMonthYear(i,this,"Y"),!1}};k(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,W,E,F,R,a,r,L,h,l,c,u,d,p,f,g,m,_,B,v,b,y,w,Y,j,k,x,C,D=new Date,q=this._daylightSavingAdjust(new Date(D.getFullYear(),D.getMonth(),D.getDate())),I=this._get(t,"isRTL"),D=this._get(t,"showButtonPanel"),T=this._get(t,"hideIfNoPrevNext"),P=this._get(t,"navigationAsDateFormat"),M=this._getNumberOfMonths(t),S=this._get(t,"showCurrentAtPos"),H=this._get(t,"stepMonths"),K=1!==M[0]||1!==M[1],U=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),z=this._getMinMaxDate(t,"min"),O=this._getMinMaxDate(t,"max"),A=t.drawMonth-S,N=t.drawYear;if(A<0&&(A+=12,N--),O)for(e=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth()-M[0]*M[1]+1,O.getDate())),e=z&&e<z?z:e;this._daylightSavingAdjust(new Date(N,A,1))>e;)--A<0&&(A=11,N--);for(t.drawMonth=A,t.drawYear=N,S=this._get(t,"prevText"),S=P?this.formatDate(S,this._daylightSavingAdjust(new Date(N,A-H,1)),this._getFormatConfig(t)):S,i=this._canAdjustMonth(t,-1,N,A)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"e":"w")+"'>"+S+"</span></a>":T?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"e":"w")+"'>"+S+"</span></a>",S=this._get(t,"nextText"),S=P?this.formatDate(S,this._daylightSavingAdjust(new Date(N,A+H,1)),this._getFormatConfig(t)):S,s=this._canAdjustMonth(t,1,N,A)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"w":"e")+"'>"+S+"</span></a>":T?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+S+"'><span class='ui-icon ui-icon-circle-triangle-"+(I?"w":"e")+"'>"+S+"</span></a>",H=this._get(t,"currentText"),T=this._get(t,"gotoCurrent")&&t.currentDay?U:q,H=P?this.formatDate(H,T,this._getFormatConfig(t)):H,S=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",P=D?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(I?S:"")+(this._isInRange(t,T)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+H+"</button>":"")+(I?"":S)+"</div>":"",n=parseInt(this._get(t,"firstDay"),10),n=isNaN(n)?0:n,o=this._get(t,"showWeek"),W=this._get(t,"dayNames"),E=this._get(t,"dayNamesMin"),F=this._get(t,"monthNames"),R=this._get(t,"monthNamesShort"),a=this._get(t,"beforeShowDay"),r=this._get(t,"showOtherMonths"),L=this._get(t,"selectOtherMonths"),h=this._getDefaultDate(t),l="",u=0;M[0]>u;u++){for(d="",this.maxRows=4,p=0;M[1]>p;p++){if(f=this._daylightSavingAdjust(new Date(N,A,t.selectedDay)),g=" ui-corner-all",m="",K){if(m+="<div class='ui-datepicker-group",1<M[1])switch(p){case 0:m+=" ui-datepicker-group-first",g=" ui-corner-"+(I?"right":"left");break;case M[1]-1:m+=" ui-datepicker-group-last",g=" ui-corner-"+(I?"left":"right");break;default:m+=" ui-datepicker-group-middle",g=""}m+="'>"}for(m+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+g+"'>"+(/all|left/.test(g)&&0===u?I?s:i:"")+(/all|right/.test(g)&&0===u?I?i:s:"")+this._generateMonthYearHeader(t,A,N,z,O,0<u||0<p,F,R)+"</div><table class='ui-datepicker-calendar'><thead><tr>",_=o?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",c=0;c<7;c++)_+="<th scope='col'"+(5<=(c+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+W[B=(c+n)%7]+"'>"+E[B]+"</span></th>";for(m+=_+"</tr></thead><tbody>",b=this._getDaysInMonth(N,A),N===t.selectedYear&&A===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,b)),v=(this._getFirstDayOfMonth(N,A)-n+7)%7,b=Math.ceil((v+b)/7),y=K&&this.maxRows>b?this.maxRows:b,this.maxRows=y,w=this._daylightSavingAdjust(new Date(N,A,1-v)),Y=0;Y<y;Y++){for(m+="<tr>",j=o?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(w)+"</td>":"",c=0;c<7;c++)k=a?a.apply(t.input?t.input[0]:null,[w]):[!0,""],C=(x=w.getMonth()!==A)&&!L||!k[0]||z&&w<z||O&&O<w,j+="<td class='"+(5<=(c+n+6)%7?" ui-datepicker-week-end":"")+(x?" ui-datepicker-other-month":"")+(w.getTime()===f.getTime()&&A===t.selectedMonth&&t._keyEvent||h.getTime()===w.getTime()&&h.getTime()===f.getTime()?" "+this._dayOverClass:"")+(C?" "+this._unselectableClass+" ui-state-disabled":"")+(x&&!r?"":" "+k[1]+(w.getTime()===U.getTime()?" "+this._currentClass:"")+(w.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(x&&!r||!k[2]?"":" title='"+k[2].replace(/'/g,"&#39;")+"'")+(C?"":" data-handler='selectDay' data-event='click' data-month='"+w.getMonth()+"' data-year='"+w.getFullYear()+"'")+">"+(x&&!r?"&#xa0;":C?"<span class='ui-state-default'>"+w.getDate()+"</span>":"<a class='ui-state-default"+(w.getTime()===q.getTime()?" ui-state-highlight":"")+(w.getTime()===U.getTime()?" ui-state-active":"")+(x?" ui-priority-secondary":"")+"' href='#'>"+w.getDate()+"</a>")+"</td>",w.setDate(w.getDate()+1),w=this._daylightSavingAdjust(w);m+=j+"</tr>"}11<++A&&(A=0,N++),d+=m+="</tbody></table>"+(K?"</div>"+(0<M[0]&&p===M[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}l+=d}return l+=P,t._keyEvent=!1,l},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),_=this._get(t,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",b="";if(o||!g)b+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(b+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");b+="</select>"}if(_||(v+=b+(!o&&g&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!m)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(a=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=(d=function(t){t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(t)?u:t})(a[0]),f=Math.max(p,d(a[1]||"")),p=s?Math.max(p,s.getFullYear()):p,f=n?Math.min(f,n.getFullYear()):f,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=f;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",v+=t.yearshtml,t.yearshtml=null}return v+=this._get(t,"yearSuffix"),_&&(v+=(!o&&g&&m?"":"&#xa0;")+b),v+"</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),e=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,e)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),t=this._getMinMaxDate(t,"max"),i=i&&e<i?i:e;return t&&t<i?t:i},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){t=this._get(t,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),i=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(t,i)},_isInRange:function(t,e){var i,s=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),o=null,a=null,t=this._get(t,"yearRange");return t&&(t=t.split(":"),i=(new Date).getFullYear(),o=parseInt(t[0],10),a=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(o+=i),t[1].match(/[+\-].*/))&&(a+=i),(!s||e.getTime()>=s.getTime())&&(!n||e.getTime()<=n.getTime())&&(!o||e.getFullYear()>=o)&&(!a||a>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),k.fn.datepicker=function(t){if(!this.length)return this;k.datepicker.initialized||(k(document).on("mousedown",k.datepicker._checkExternalClick),k.datepicker.initialized=!0),0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&("isDisabled"===t||"getDate"===t||"widget"===t)||"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this].concat(e)):k.datepicker._attachDatepicker(this,t)})},k.datepicker=new t,k.datepicker.initialized=!1,k.datepicker.uuid=(new Date).getTime(),k.datepicker.version="1.12.1",k.datepicker,k.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=k(this).css(t).offset().top;e<0&&k(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&k.fn.draggable&&this._makeDraggable(),this.options.resizable&&k.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?k(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:k.noop,enable:k.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||k.ui.safeBlur(k.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!1,s=this.uiDialog.siblings(".ui-front:visible").map(function(){return+k(this).css("z-index")}).get(),s=Math.max.apply(null,s);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!e&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=k(k.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=(t=(t=(t=(t=t||this.element.find("[autofocus]")).length?t:this.element.find(":tabbable")).length?t:this.uiDialogButtonPane.find(":tabbable")).length?t:this.uiDialogTitlebarClose.filter(":tabbable")).length?t:this.uiDialog).eq(0).trigger("focus")},_keepFocus:function(t){function e(){var t=k.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||k.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=k("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){var e,i,s;this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===k.ui.keyCode.ESCAPE?(t.preventDefault(),this.close(t)):t.keyCode!==k.ui.keyCode.TAB||t.isDefaultPrevented()||(e=this.uiDialog.find(":tabbable"),i=e.filter(":first"),s=e.filter(":last"),t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){s.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault()))},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=k("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){k(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=k("<button type='button'></button>").button({label:k("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=k("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=k("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=k("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var s=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),k.isEmptyObject(t)||k.isArray(t)&&!t.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(k.each(t,function(t,e){var i;e=k.isFunction(e)?{click:e,text:t}:e,e=k.extend({type:"button"},e),i=e.click,t={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text},delete e.click,delete e.icon,delete e.iconPosition,delete e.showLabel,delete e.icons,"boolean"==typeof e.text&&delete e.text,k("<button></button>",e).button(t).appendTo(s.uiButtonSet).on("click",function(){i.apply(s.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function n(t){return{position:t.position,offset:t.offset}}var o=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){o._addClass(k(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,n(e))},drag:function(t,e){o._trigger("drag",t,n(e))},stop:function(t,e){var i=e.offset.left-o.document.scrollLeft(),s=e.offset.top-o.document.scrollTop();a.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=s?"+":"")+s,of:o.window},o._removeClass(k(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,n(e))}})},_makeResizable:function(){function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var o=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:t,start:function(t,e){o._addClass(k(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",t,n(e))},resize:function(t,e){o._trigger("resize",t,n(e))},stop:function(t,e){var i=o.uiDialog.offset(),s=i.left-o.document.scrollLeft(),i=i.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=s?"+":"")+s+" top"+(0<=i?"+":"")+i,of:o.window},o._removeClass(k(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",t,n(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=k(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=k.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||this.document.data("ui-dialog-instances",t=[]),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};k.each(t,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(t,e){var i,s=this.uiDialog;"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:k("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!e&&s.draggable("destroy"),!i)&&e&&this._makeDraggable(),"position"===t&&this._position(),"resizable"===t&&((i=s.is(":data(ui-resizable)"))&&!e&&s.resizable("destroy"),i&&"string"==typeof e&&s.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t)&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=k(this);return k("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!k(t.target).closest(".ui-dialog").length||!!k(t.target).closest(".ui-datepicker").length},_createOverlay:function(){var e;this.options.modal&&(e=!0,this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=k("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var t;this.options.modal&&this.overlay&&((t=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",t):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==k.uiBackCompat&&k.widget("ui.dialog",k.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),k.ui.dialog,k.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=k("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),void this._refreshValue())},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(e.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=k("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),k.widget("ui.selectmenu",[k.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=k()},_drawButton:function(){var t,e=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=k("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=k("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e._rendered||e._refreshMenu()})},_drawMenu:function(){var i=this;this.menu=k("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=k("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){e=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&e.index!==i.focusIndex&&(i._trigger("focus",t,{item:e}),i.isOpen||i._select(e,t)),i.focusIndex=e.index,i.button.attr("aria-activedescendant",i.menuItems.eq(e.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t)))},_position:function(){this.menuWrap.position(k.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var e=k("<span>");return this._setText(e,t.label),this._addClass(e,"ui-selectmenu-text"),e},_renderMenu:function(s,t){var n=this,o="";k.each(t,function(t,e){var i;e.optgroup!==o&&(i=k("<li>",{text:e.optgroup}),n._addClass(i,"ui-selectmenu-optgroup","ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),i.appendTo(s),o=e.optgroup),n._renderItemData(s,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var i=k("<li>"),s=k("<div>",{title:e.element.attr("title")});return e.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(s,e.label),i.append(s).appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var i,s=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),s+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?i["first"===t?"prevAll":"nextAll"](s).eq(-1):i[t+"All"](s).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){!this.isOpen||k(t.target).closest(".ui-selectmenu-menu, #"+k.ui.escapeSelector(this.ids.button)).length||this.close(t)}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case k.ui.keyCode.TAB:case k.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case k.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case k.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case k.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case k.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case k.ui.keyCode.LEFT:this._move("prev",t);break;case k.ui.keyCode.RIGHT:this._move("next",t);break;case k.ui.keyCode.HOME:case k.ui.keyCode.PAGE_UP:this._move("first",t);break;case k.ui.keyCode.END:case k.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent("li");e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==i&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){t=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(t,e){var i;"icons"===t&&(i=this.button.find("span.ui-icon"),this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"width"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option("disabled",t),this.button.attr("aria-disabled",t),this._toggleClass(this.button,null,"ui-state-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t=(t=(t=t&&(t.jquery||t.nodeType?k(t):this.document.find(t).eq(0)))&&t[0]?t:this.element.closest(".ui-front, dialog")).length?t:this.document[0].body},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return!1===t?void this.button.css("width",""):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(t))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop("disabled"),t},_parseOptions:function(t){var i=this,s=[];t.each(function(t,e){s.push(i._parseOption(k(e),t))}),this.items=s},_parseOption:function(t,e){var i=t.parent("optgroup");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||t.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),k.widget("ui.slider",k.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e=this.options,i=this.element.find(".ui-slider-handle"),s=[],n=e.values&&e.values.length||1;for(i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;t<n;t++)s.push("<span tabindex='0'></span>");this.handles=i.add(k(s.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){k(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:k.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=k("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,o,e,a,r=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(i-r.values(t));(e<s||s===e&&(t===r._lastChangedValue||r.values(t)===h.min))&&(s=e,n=k(this),o=t)}),!1!==this._start(t,o))&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(n,null,"ui-state-active"),n.trigger("focus"),e=n.offset(),a=!k(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-e.left-n.width()/2,top:t.pageY-e.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0)},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=t/e;return(t=1<t?1:t)<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),t=this._valueMin()+t*e,this._trimAlignValue(t)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,n=this.value(),o=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),n=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),o[e]=i),i!==n&&!1!==this._trigger("slide",t,this._uiHash(e,i,o))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,s,n;if(1<arguments.length)this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!k.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,s=t,n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(s[n]),this._change(null,n);this._refreshValue()}},_setOption:function(t,e){var i,s=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),k.isArray(this.options.values)&&(s=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=s-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){var e,i;return this._valueMin()>=t?this._valueMin():t>=this._valueMax()?this._valueMax():(e=0<this.options.step?this.options.step:1,i=t-(t=(t-this._valueMin())%e),2*Math.abs(t)>=e&&(i+=0<t?e:-e),parseFloat(i.toFixed(5)))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return t=null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var t=""+t,e=t.indexOf(".");return-1===e?0:t.length-e-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,t,s,n,o=this.options.range,a=this.options,r=this,h=!this._animateOff&&a.animate,l={};this._hasMultipleValues()?this.handles.each(function(t){i=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,l["horizontal"===r.orientation?"left":"bottom"]=i+"%",k(this).stop(1,1)[h?"animate":"css"](l,a.animate),!0===r.options.range&&("horizontal"===r.orientation?(0===t&&r.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===t&&r.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===t&&r.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===t&&r.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(t=this.value(),s=this._valueMin(),n=this._valueMax(),i=n!==s?(t-s)/(n-s)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](l,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(t){var e,i,s,n=k(t.target).data("ui-slider-handle-index");switch(t.keyCode){case k.ui.keyCode.HOME:case k.ui.keyCode.END:case k.ui.keyCode.PAGE_UP:case k.ui.keyCode.PAGE_DOWN:case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(k(t.target),null,"ui-state-active"),!1===this._start(t,n)))return}switch(s=this.options.step,e=i=this._hasMultipleValues()?this.values(n):this.value(),t.keyCode){case k.ui.keyCode.HOME:i=this._valueMin();break;case k.ui.keyCode.END:i=this._valueMax();break;case k.ui.keyCode.PAGE_UP:i=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:if(e===this._valueMax())return;i=this._trimAlignValue(e+s);break;case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(e===this._valueMin())return;i=this._trimAlignValue(e-s)}this._slide(t,n,i)},keyup:function(t){var e=k(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),this._removeClass(k(t.target),null,"ui-state-active"))}}}),k.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var s=this._super(),n=this.element;return k.each(["min","max","step"],function(t,e){var i=n.attr(e);null!=i&&i.length&&(s[e]=i)}),s},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){function e(){this.element[0]!==k.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i=this.element[0]===k.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();t.preventDefault(),e.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,e.call(this)}),!1!==this._start(t)&&this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return k(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,k(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var e=this.options,i=k.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,e.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?k.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return t=null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var t=""+t,e=t.indexOf(".");return-1===e?0:t.length-e-1},_adjustValue:function(t){var e=this.options,i=null!==e.min?e.min:0,s=t-i;return t=i+Math.round(s/e.step)*e.step,t=parseFloat(t.toFixed(this._precision())),null!==e.max&&t>e.max?e.max:null!==e.min&&e.min>t?e.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i;return"culture"===t||"numberFormat"===t?(i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i))):("max"!==t&&"min"!==t&&"step"!==t||"string"!=typeof e||(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,e.down)),void this._super(t,e))},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:e(function(t){this._super(t)}),_parse:function(t){return""===(t="string"==typeof t&&""!==t?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t:t)||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),!1!==k.uiBackCompat&&k.widget("ui.spinner",k.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),k.ui.spinner,k.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(f=/#.*$/,function(t){var e=t.href.replace(f,""),i=location.href.replace(f,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return 1<t.hash.length&&e===i}),_create:function(){var e=this,t=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,t.collapsible),this._processTabs(),t.active=this._initialActive(),k.isArray(t.disabled)&&(t.disabled=k.unique(t.disabled.concat(k.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(t.active):k(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var i=this.options.active,t=this.options.collapsible,s=location.hash.substring(1);return!1!==(i=null===i&&(s&&this.tabs.each(function(t,e){return k(e).attr("aria-controls")===s?(i=t,!1):void 0}),null===(i=null===i?this.tabs.index(this.tabs.filter(".ui-tabs-active")):i)||-1===i)?!!this.tabs.length&&0:i)&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!t&&0),i=!t&&!1===i&&this.anchors.length?0:i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):k()}},_tabKeydown:function(t){var e=k(k.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(e),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:i++;break;case k.ui.keyCode.UP:case k.ui.keyCode.LEFT:s=!1,i--;break;case k.ui.keyCode.END:i=this.anchors.length-1;break;case k.ui.keyCode.HOME:i=0;break;case k.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case k.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,s),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===k.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===k.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===k.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){for(var i=this.tabs.length-1;-1!==k.inArray(t=(t=i<t?0:t)<0?i:t,this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){return"active"===t?void this._activate(e):(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=k.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!k.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=k()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=k()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var h=this,t=this.tabs,e=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){k(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){k(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return k("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=k(),this.anchors.each(function(t,e){var i,s,n,o=k(e).uniqueId().attr("id"),a=k(e).closest("li"),r=a.attr("aria-controls");h._isLocal(e)?(n=(i=e.hash).substring(1),s=h.element.find(h._sanitizeSelector(i))):(n=a.attr("aria-controls")||k({}).uniqueId()[0].id,(s=h.element.find(i="#"+n)).length||(s=h._createPanel(n)).insertAfter(h.panels[t-1]||h.tablist),s.attr("aria-live","polite")),s.length&&(h.panels=h.panels.add(s)),r&&a.data("ui-tabs-aria-controls",r),a.attr({"aria-controls":n,"aria-labelledby":o}),s.attr("aria-labelledby",o)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return k("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var e,i;for(k.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),i=0;e=this.tabs[i];i++)e=k(e),!0===t||-1!==k.inArray(i,t)?(e.attr("aria-disabled","true"),this._addClass(e,null,"ui-state-disabled")):(e.removeAttr("aria-disabled"),this._removeClass(e,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var i={};t&&k.each(t.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,e=this.element.parent();"fill"===t?(i=e.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=k(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=k(this).outerHeight(!0)}),this.panels.each(function(){k(this).height(Math.max(0,i-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,k(this).height("").height())}).height(i))},_eventHandler:function(t){var e=this.options,i=this.active,s=k(t.currentTarget).closest("li"),n=s[0]===i[0],o=n&&e.collapsible,a=o?k():this._getPanelForTab(s),r=i.length?this._getPanelForTab(i):k(),i={oldTab:i,oldPanel:r,newTab:o?k():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||n&&!e.collapsible||!1===this._trigger("beforeActivate",t,i)||(e.active=!o&&this.tabs.index(s),this.active=n?k():s,this.xhr&&this.xhr.abort(),r.length||a.length||k.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,i))},_toggle:function(t,e){function i(){n.running=!1,n._trigger("activate",t,e)}function s(){n._addClass(e.newTab.closest("li"),"ui-tabs-active","ui-state-active"),o.length&&n.options.show?n._show(o,n.options.show,i):(o.show(),i())}var n=this,o=e.newPanel,a=e.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s()}):(this._removeClass(e.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a.hide(),s()),a.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&a.length?e.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===k(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var t=this._findActive(t);t[0]!==this.active[0]&&(t=(t=t.length?t:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:t,currentTarget:t,preventDefault:k.noop}))},_findActive:function(t){return!1===t?k():this.tabs.eq(t)},_getIndex:function(t){return t="string"==typeof t?this.anchors.index(this.anchors.filter("[href$='"+k.ui.escapeSelector(t)+"']")):t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){k.data(this,"ui-tabs-destroy")?k(this).remove():k(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var t=k(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var t=this.options.disabled;!1!==t&&(t=void 0!==i&&(i=this._getIndex(i),k.isArray(t)?k.map(t,function(t){return t!==i?t:null}):k.map(this.tabs,function(t,e){return e!==i?e:null})),this._setOptionDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==k.inArray(t,e))return;e=k.isArray(e)?k.merge([t],e).sort():[t]}this._setOptionDisabled(e)}},load:function(t,s){t=this._getIndex(t);function n(t,e){"abort"===e&&o.panels.stop(!1,!0),o._removeClass(i,"ui-tabs-loading"),a.removeAttr("aria-busy"),t===o.xhr&&delete o.xhr}var o=this,i=this.tabs.eq(t),t=i.find(".ui-tabs-anchor"),a=this._getPanelForTab(i),r={tab:i,panel:a};this._isLocal(t[0])||(this.xhr=k.ajax(this._ajaxSettings(t,s,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done(function(t,e,i){setTimeout(function(){a.html(t),o._trigger("load",s,r),n(i,e)},1)}).fail(function(t,e){setTimeout(function(){n(t,e)},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,e){return n._trigger("beforeLoad",i,k.extend({jqXHR:t,ajaxSettings:e},s))}}},_getPanelForTab:function(t){t=k(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+t))}}),!1!==k.uiBackCompat&&k.widget("ui.tabs",k.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),k.ui.tabs,k.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=k(this).attr("title")||"";return k("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",k.trim(i.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),e=k.inArray(e,i);-1!==e&&i.splice(e,1),t.removeData("ui-tooltip-id"),(i=k.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=k("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=k([])},_setOption:function(t,e){var i=this;this._super(t,e),"content"===t&&k.each(this.tooltips,function(t,e){i._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var s=this;k.each(this.tooltips,function(t,e){var i=k.Event("blur");i.target=i.currentTarget=e.element[0],s.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=k(this);return t.is("[title]")?t.data("ui-tooltip-title",t.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var t=k(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=k([])},open:function(t){var i=this,e=k(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=k(this);e.data("ui-tooltip-open")&&((t=k.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),e.attr("title")&&(e.uniqueId(),i.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,i){var t=this.options.content,s=this,n=i?i.type:null;return"string"==typeof t||t.nodeType||t.jquery?this._open(i,e,t):void((t=t.call(e[0],function(t){s._delay(function(){e.data("ui-tooltip-open")&&(i&&(i.type=n),this._open(i,e,t))})}))&&this._open(i,e,t))},_open:function(t,e,i){function s(t){r.of=t,n.is(":hidden")||n.position(r)}var n,o,a,r=k.extend({},this.options.position);i&&((a=this._find(e))?a.tooltip.find(".ui-tooltip-content").html(i):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),a=this._tooltip(e),n=a.tooltip,this._addDescribedBy(e,n.attr("id")),n.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),(a=k("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:s}),s(t)):n.position(k.extend({of:e},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){n.is(":visible")&&(s(r.of),clearInterval(o))},k.fx.interval)),this._trigger("open",t,{tooltip:n})))},_registerCloseHandlers:function(t,e){var i={keyup:function(t){t.keyCode===k.ui.keyCode.ESCAPE&&((t=k.Event(t)).currentTarget=e[0],this.close(t,!0))}};e[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(e).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,e,i)},close:function(t){var e,i=this,s=k(t?t.currentTarget:this.element),n=this._find(s);return n?(e=n.tooltip,void(n.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),n.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){i._removeTooltip(k(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&k.each(this.parents,function(t,e){k(e.element).attr("title",e.title),delete i.parents[t]}),n.closing=!0,this._trigger("close",t,{tooltip:e}),n.hiding)||(n.closing=!1))):void s.removeData("ui-tooltip-open")},_tooltip:function(t){var e=k("<div>").attr("role","tooltip"),i=k("<div>").appendTo(e),s=e.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(e,"ui-tooltip","ui-widget ui-widget-content"),e.appendTo(this._appendTo(t)),this.tooltips[s]={element:t,tooltip:e}},_find:function(t){t=t.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){t=t.closest(".ui-front, dialog");return t=t.length?t:this.document[0].body},_destroy:function(){var s=this;k.each(this.tooltips,function(t,e){var i=k.Event("blur"),e=e.element;i.target=i.currentTarget=e[0],s.close(i,!0),k("#"+t).remove(),e.data("ui-tooltip-title")&&(e.attr("title")||e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==k.uiBackCompat&&k.widget("ui.tooltip",k.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),k.ui.tooltip,"ui-effects-"),S="ui-effects-style",H="ui-effects-animated",nt=k;function z(t,e,i,s){return t={effect:t=k.isPlainObject(t)?(e=t).effect:t},k.isFunction(e=null==e?{}:e)&&(s=e,i=null,e={}),"number"!=typeof e&&!k.fx.speeds[e]||(s=i,i=e,e={}),k.isFunction(i)&&(s=i,i=null),e&&k.extend(t,e),i=i||e.duration,t.duration=k.fx.off?0:"number"==typeof i?i:i in k.fx.speeds?k.fx.speeds[i]:k.fx.speeds._default,t.complete=s||e.complete,t}function O(t){return!t||"number"==typeof t||k.fx.speeds[t]||"string"==typeof t&&!k.effects.effect[t]||k.isFunction(t)||"object"==typeof t&&!t.effect}function ot(t,e){var i=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}function at(t){var e,i,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[e=s[i]]&&(n[k.camelCase(e)]=s[e]);else for(e in s)"string"==typeof s[e]&&(n[e]=s[e]);return n}function A(t,e,i){var s=w[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:t<0?0:t>s.max?s.max:t)}function rt(s){var n=b(),o=n._rgba=[];return s=s.toLowerCase(),P(it,function(t,e){var i=e.re.exec(s),i=i&&e.parse(i),e=e.space||"rgba";return i?(i=n[e](i),n[y[e].cache]=i[y[e].cache],o=n._rgba=i._rgba,!1):_}),o.length?("0,0,0,0"===o.join()&&m.extend(o,v.transparent),n):v[s]}function N(t,e,i){return 6*(i=(i+1)%1)<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+6*(e-t)*(2/3-i):t}k.effects={effect:{}},et=/^([\-+])=\s*(\d+\.?\d*)/,it=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],b=(m=nt).Color=function(t,e,i,s){return new m.Color.fn.parse(t,e,i,s)},y={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},w={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},I=b.support={},T=m("<p>")[0],P=m.each,T.style.cssText="background-color:rgba(1,1,1,.5)",I.rgba=-1<T.style.backgroundColor.indexOf("rgba"),P(y,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),(b.fn=m.extend(b.prototype,{parse:function(n,t,e,i){if(n===_)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=m(n).css(t),t=_);var o=this,s=m.type(n),a=this._rgba=[];return t!==_&&(n=[n,t,e,i],s="array"),"string"===s?this.parse(rt(n)||v._default):"array"===s?(P(y.rgba.props,function(t,e){a[e.idx]=A(n[e.idx],e)}),this):"object"===s?(n instanceof b?P(y,function(t,e){n[e.cache]&&(o[e.cache]=n[e.cache].slice())}):P(y,function(t,i){var s=i.cache;P(i.props,function(t,e){if(!o[s]&&i.to){if("alpha"===t||null==n[t])return;o[s]=i.to(o._rgba)}o[s][e.idx]=A(n[t],e,!0)}),o[s]&&m.inArray(null,o[s].slice(0,3))<0&&(o[s][3]=1,i.from)&&(o._rgba=i.from(o[s]))}),this):_},is:function(t){var n=b(t),o=!0,a=this;return P(y,function(t,e){var i,s=n[e.cache];return s&&(i=a[e.cache]||e.to&&e.to(a._rgba)||[],P(e.props,function(t,e){return null!=s[e.idx]?o=s[e.idx]===i[e.idx]:_})),o}),o},_space:function(){var i=[],s=this;return P(y,function(t,e){s[e.cache]&&i.push(t)}),i.pop()},transition:function(t,a){var t=(l=b(t))._space(),e=y[t],i=0===this.alpha()?b("transparent"):this,r=i[e.cache]||e.to(i._rgba),h=r.slice(),l=l[e.cache];return P(e.props,function(t,e){var i=e.idx,s=r[i],n=l[i],o=w[e.type]||{};null!==n&&(null===s?h[i]=n:(o.mod&&(n-s>o.mod/2?s+=o.mod:s-n>o.mod/2&&(s-=o.mod)),h[i]=A((n-s)*a+s,e)))}),this[t](h)},blend:function(t){var e,i,s;return 1===this._rgba[3]?this:(e=this._rgba.slice(),i=e.pop(),s=b(t)._rgba,b(m.map(e,function(t,e){return(1-i)*s[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=m.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=m.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),t=e&&e<3?Math.round(100*t)+"%":t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+m.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=b.fn,y.hsla.to=function(t){var e,i,s,n,o,a,r,h;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/255,i=t[1]/255,s=t[2]/255,t=t[3],r=.5*(h=(n=Math.max(e,i,s))+(o=Math.min(e,i,s))),h=0==(a=n-o)?0:r<=.5?a/h:a/(2-h),[Math.round(o===n?0:e===n?60*(i-s)/a+360:i===n?60*(s-e)/a+120:60*(e-i)/a+240)%360,h,r,null==t?1:t])},y.hsla.from=function(t){var e,i,s;return null==t[0]||null==t[1]||null==t[2]?[null,null,null,t[3]]:(e=t[0]/360,s=t[1],i=t[2],t=t[3],s=2*i-(i=i<=.5?i*(1+s):i+s-i*s),[Math.round(255*N(s,i,e+1/3)),Math.round(255*N(s,i,e)),Math.round(255*N(s,i,e-1/3)),t])},P(y,function(r,t){var o=t.props,a=t.cache,h=t.to,l=t.from;b.fn[r]=function(t){var e,i,s,n;return h&&!this[a]&&(this[a]=h(this._rgba)),t===_?this[a].slice():(i=m.type(t),s="array"===i||"object"===i?t:arguments,n=this[a].slice(),P(o,function(t,e){t=s["object"===i?t:e.idx];null==t&&(t=n[e.idx]),n[e.idx]=A(t,e)}),l?((e=b(l(n)))[a]=n,e):b(n))},P(o,function(o,a){b.fn[o]||(b.fn[o]=function(t){var e=m.type(t),i="alpha"===o?this._hsla?"hsla":"rgba":r,s=this[i](),n=s[a.idx];return"undefined"===e?n:("function"===e&&(t=t.call(this,n),e=m.type(t)),null==t&&a.empty?this:("string"===e&&(e=et.exec(t))&&(t=n+parseFloat(e[2])*("+"===e[1]?1:-1)),s[a.idx]=t,this[i](s)))})})}),(b.hook=function(t){t=t.split(" ");P(t,function(t,o){m.cssHooks[o]={set:function(t,e){var i,s,n="";if("transparent"!==e&&("string"!==m.type(e)||(i=rt(e)))){if(e=b(i||e),!I.rgba&&1!==e._rgba[3]){for(s="backgroundColor"===o?t.parentNode:t;(""===n||"transparent"===n)&&s&&s.style;)try{n=m.css(s,"backgroundColor"),s=s.parentNode}catch(t){}e=e.blend(n&&"transparent"!==n?n:"_default")}e=e.toRgbaString()}try{t.style[o]=e}catch(t){}}},m.fx.step[o]=function(t){t.colorInit||(t.start=b(t.elem,o),t.end=b(t.end),t.colorInit=!0),m.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),m.cssHooks.borderColor={expand:function(i){var s={};return P(["Top","Right","Bottom","Left"],function(t,e){s["border"+e+"Color"]=i}),s}},v=m.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},Z=["add","remove","toggle"],tt={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){k.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(nt.style(t.elem,e,t.end),t.setAttr=!0)}}),k.fn.addBack||(k.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),k.effects.animateClass=function(n,t,e,i){var o=k.speed(t,e,i);return this.queue(function(){var i=k(this),t=i.attr("class")||"",e=(e=o.children?i.find("*").addBack():i).map(function(){return{el:k(this),start:at(this)}}),s=function(){k.each(Z,function(t,e){n[e]&&i[e+"Class"](n[e])})};s(),e=e.map(function(){return this.end=at(this.el[0]),this.diff=function(t,e){var i,s,n={};for(i in e)s=e[i],t[i]===s||tt[i]||!k.fx.step[i]&&isNaN(parseFloat(s))||(n[i]=s);return n}(this.start,this.end),this}),i.attr("class",t),e=e.map(function(){var t=this,e=k.Deferred(),i=k.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,i),e.promise()}),k.when.apply(k,e.get()).done(function(){s(),k.each(arguments,function(){var e=this.el;k.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(i[0])})})},k.fn.extend({addClass:(J=k.fn.addClass,function(t,e,i,s){return e?k.effects.animateClass.call(this,{add:t},e,i,s):J.apply(this,arguments)}),removeClass:(Q=k.fn.removeClass,function(t,e,i,s){return 1<arguments.length?k.effects.animateClass.call(this,{remove:t},e,i,s):Q.apply(this,arguments)}),toggleClass:(G=k.fn.toggleClass,function(t,e,i,s,n){return"boolean"==typeof e||void 0===e?i?k.effects.animateClass.call(this,e?{add:t}:{remove:t},i,s,n):G.apply(this,arguments):k.effects.animateClass.call(this,{toggle:t},e,i,s)}),switchClass:function(t,e,i,s,n){return k.effects.animateClass.call(this,{add:e,remove:t},i,s,n)}}),k.expr&&k.expr.filters&&k.expr.filters.animated&&(k.expr.filters.animated=(X=k.expr.filters.animated,function(t){return!!k(t).data(H)||X(t)})),!1!==k.uiBackCompat&&k.extend(k.effects,{save:function(t,e){for(var i=0,s=e.length;i<s;i++)null!==e[i]&&t.data(M+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;s<n;s++)null!==e[s]&&(i=t.data(M+e[s]),t.css(e[s],i))},setMode:function(t,e){return e="toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var s={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:i.width(),height:i.height()},n=document.activeElement;try{n.id}catch(t){n=document.body}return i.wrap(t),i[0]!==n&&!k.contains(i[0],n)||k(n).trigger("focus"),t=i.parent(),"static"===i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(k.extend(s,{position:i.css("position"),zIndex:i.css("z-index")}),k.each(["top","left","bottom","right"],function(t,e){s[e]=i.css(e),isNaN(parseInt(s[e],10))&&(s[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),i.css(e),t.css(s).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]===e||k.contains(t[0],e))&&k(e).trigger("focus"),t}}),k.extend(k.effects,{version:"1.12.1",define:function(t,e,i){return i||(i=e,e="effect"),k.effects.effect[t]=i,k.effects.effect[t].mode=e,i},scaledDimensions:function(t,e,i){var s;return 0===e?{height:0,width:0,outerHeight:0,outerWidth:0}:(s="horizontal"!==i?(e||100)/100:1,i="vertical"!==i?(e||100)/100:1,{height:t.height()*i,width:t.width()*s,outerHeight:t.outerHeight()*i,outerWidth:t.outerWidth()*s})},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();1<e&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(S,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(S)||"",t.removeData(S)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),e=(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(t){var e,i=t.css("position"),s=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(i)&&(i="absolute",e=k("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(M+"placeholder",e)),t.css({position:i,left:s.left,top:s.top}),e},removePlaceholder:function(t){var e=M+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(t){k.effects.restoreStyle(t),k.effects.removePlaceholder(t)},setTransition:function(s,t,n,o){return o=o||{},k.each(t,function(t,e){var i=s.cssUnit(e);0<i[0]&&(o[e]=i[0]*n+i[1])}),o}}),k.fn.extend({effect:function(){function t(t){function e(){k.isFunction(r)&&r.call(i[0]),k.isFunction(t)&&t()}var i=k(this);s.mode=l.shift(),!1===k.uiBackCompat||o?"none"===s.mode?(i[h](),e()):n.call(i[0],s,function(){i.removeData(H),k.effects.cleanUp(i),"hide"===s.mode&&i.hide(),e()}):(i.is(":hidden")?"hide"===h:"show"===h)?(i[h](),e()):n.call(i[0],s,e)}function e(t){var e=k(this),i=k.effects.mode(e,h)||o;e.data(H,!0),l.push(i),o&&("show"===i||i===o&&"hide"===i)&&e.show(),o&&"none"===i||k.effects.saveStyle(e),k.isFunction(t)&&t()}var s=z.apply(this,arguments),n=k.effects.effect[s.effect],o=n.mode,i=s.queue,a=i||"fx",r=s.complete,h=s.mode,l=[];return k.fx.off||!n?h?this[h](s.duration,r):this.each(function(){r&&r.call(this)}):!1===i?this.each(e).each(t):this.queue(a,e).queue(a,t)},show:($=k.fn.show,function(t){var e;return O(t)?$.apply(this,arguments):((e=z.apply(this,arguments)).mode="show",this.effect.call(this,e))}),hide:(V=k.fn.hide,function(t){var e;return O(t)?V.apply(this,arguments):((e=z.apply(this,arguments)).mode="hide",this.effect.call(this,e))}),toggle:(U=k.fn.toggle,function(t){var e;return O(t)||"boolean"==typeof t?U.apply(this,arguments):((e=z.apply(this,arguments)).mode="toggle",this.effect.call(this,e))}),cssUnit:function(t){var i=this.css(t),s=[];return k.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):ot(this.css("clip"),this)},transfer:function(t,e){var i=k(this),s=k(t.to),n="fixed"===s.css("position"),o=k("body"),a=n?o.scrollTop():0,o=n?o.scrollLeft():0,r=s.offset(),r={top:r.top-a,left:r.left-o,height:s.innerHeight(),width:s.innerWidth()},s=i.offset(),h=k("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:s.top-a,left:s.left-o,height:i.innerHeight(),width:i.innerWidth(),position:n?"fixed":"absolute"}).animate(r,t.duration,t.easing,function(){h.remove(),k.isFunction(e)&&e()})}}),k.fx.step.clip=function(t){t.clipInit||(t.start=k(t.elem).cssClip(),"string"==typeof t.end&&(t.end=ot(t.end,t.elem)),t.clipInit=!0),k(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},g={},k.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){g[t]=function(t){return Math.pow(t,e+2)}}),k.extend(g,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),k.each(g,function(t,e){k.easing["easeIn"+t]=e,k.easing["easeOut"+t]=function(t){return 1-e(1-t)},k.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}});k.effects;k.effects.define("blind","hide",function(t,e){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},s=k(this),n=t.direction||"up",o=s.cssClip(),a={clip:k.extend({},o)},r=k.effects.createPlaceholder(s);a.clip[i[n][0]]=a.clip[i[n][1]],"show"===t.mode&&(s.cssClip(a.clip),r&&r.css(k.effects.clipToBox(a)),a.clip=o),r&&r.animate(k.effects.clipToBox(a),t.duration,t.easing),s.animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("bounce",function(t,e){var i,s,n=k(this),o=t.mode,a="hide"===o,o="show"===o,r=t.direction||"up",h=t.distance,l=t.times||5,c=2*l+(o||a?1:0),u=t.duration/c,d=t.easing,p="up"===r||"down"===r?"top":"left",f="up"===r||"left"===r,g=0,t=n.queue().length;for(k.effects.createPlaceholder(n),r=n.css(p),h=h||n["top"==p?"outerHeight":"outerWidth"]()/3,o&&((s={opacity:1})[p]=r,n.css("opacity",0).css(p,f?2*-h:2*h).animate(s,u,d)),a&&(h/=Math.pow(2,l-1)),(s={})[p]=r;g<l;g++)(i={})[p]=(f?"-=":"+=")+h,n.animate(i,u,d).animate(s,u,d),h=a?2*h:h/2;a&&((i={opacity:0})[p]=(f?"-=":"+=")+h,n.animate(i,u,d)),n.queue(e),k.effects.unshift(n,t,1+c)}),k.effects.define("clip","hide",function(t,e){var i={},s=k(this),n=t.direction||"vertical",o="both"===n,a=o||"horizontal"===n,o=o||"vertical"===n,n=s.cssClip();i.clip={top:o?(n.bottom-n.top)/2:n.top,right:a?(n.right-n.left)/2:n.right,bottom:o?(n.bottom-n.top)/2:n.bottom,left:a?(n.right-n.left)/2:n.left},k.effects.createPlaceholder(s),"show"===t.mode&&(s.cssClip(i.clip),i.clip=n),s.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("drop","hide",function(t,e){var i,s=k(this),n="show"===t.mode,o=t.direction||"left",a="up"===o||"down"===o?"top":"left",o="up"===o||"left"===o?"-=":"+=",r="+="==o?"-=":"+=",h={opacity:0};k.effects.createPlaceholder(s),i=t.distance||s["top"==a?"outerHeight":"outerWidth"](!0)/2,h[a]=o+i,n&&(s.css(h),h[a]=r+i,h.opacity=1),s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("explode","hide",function(t,e){function i(){g.push(this),g.length===h*l&&(c.css({visibility:"visible"}),k(g).remove(),e())}for(var s,n,o,a,r,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,l=h,c=k(this),u="show"===t.mode,d=c.show().css("visibility","hidden").offset(),p=Math.ceil(c.outerWidth()/l),f=Math.ceil(c.outerHeight()/h),g=[],m=0;m<h;m++)for(o=d.top+m*f,r=m-(h-1)/2,s=0;s<l;s++)n=d.left+s*p,a=s-(l-1)/2,c.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*p,top:-m*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:f,left:n+(u?a*p:0),top:o+(u?r*f:0),opacity:u?0:1}).animate({left:n+(u?0:a*p),top:o+(u?0:r*f),opacity:u?1:0},t.duration||500,t.easing,i)}),k.effects.define("fade","toggle",function(t,e){var i="show"===t.mode;k(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("fold","hide",function(e,t){var i=k(this),s=e.mode,n="show"===s,s="hide"===s,o=e.size||15,a=/([0-9]+)%/.exec(o),r=!!e.horizFirst?["right","bottom"]:["bottom","right"],h=e.duration/2,l=k.effects.createPlaceholder(i),c=i.cssClip(),u={clip:k.extend({},c)},d={clip:k.extend({},c)},p=[c[r[0]],c[r[1]]],f=i.queue().length;a&&(o=parseInt(a[1],10)/100*p[s?0:1]),u.clip[r[0]]=o,d.clip[r[0]]=o,d.clip[r[1]]=0,n&&(i.cssClip(d.clip),l&&l.css(k.effects.clipToBox(d)),d.clip=c),i.queue(function(t){l&&l.animate(k.effects.clipToBox(u),h,e.easing).animate(k.effects.clipToBox(d),h,e.easing),t()}).animate(u,h,e.easing).animate(d,h,e.easing).queue(t),k.effects.unshift(i,f,4)}),k.effects.define("highlight","show",function(t,e){var i=k(this),s={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(s.opacity=0),k.effects.saveStyle(i),i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),k.effects.define("size",function(s,e){var n,i=k(this),t=["fontSize"],o=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],a=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=s.mode,h="effect"!==r,l=s.scale||"both",c=s.origin||["middle","center"],u=i.css("position"),d=i.position(),p=k.effects.scaledDimensions(i),f=s.from||p,g=s.to||k.effects.scaledDimensions(i,0);k.effects.createPlaceholder(i),"show"===r&&(r=f,f=g,g=r),n={from:{y:f.height/p.height,x:f.width/p.width},to:{y:g.height/p.height,x:g.width/p.width}},"box"!==l&&"both"!==l||(n.from.y!==n.to.y&&(f=k.effects.setTransition(i,o,n.from.y,f),g=k.effects.setTransition(i,o,n.to.y,g)),n.from.x===n.to.x)||(f=k.effects.setTransition(i,a,n.from.x,f),g=k.effects.setTransition(i,a,n.to.x,g)),"content"!==l&&"both"!==l||n.from.y===n.to.y||(f=k.effects.setTransition(i,t,n.from.y,f),g=k.effects.setTransition(i,t,n.to.y,g)),c&&(r=k.effects.getBaseline(c,p),f.top=(p.outerHeight-f.outerHeight)*r.y+d.top,f.left=(p.outerWidth-f.outerWidth)*r.x+d.left,g.top=(p.outerHeight-g.outerHeight)*r.y+d.top,g.left=(p.outerWidth-g.outerWidth)*r.x+d.left),i.css(f),"content"!==l&&"both"!==l||(o=o.concat(["marginTop","marginBottom"]).concat(t),a=a.concat(["marginLeft","marginRight"]),i.find("*[width]").each(function(){var t=k(this),e=k.effects.scaledDimensions(t),i={height:e.height*n.from.y,width:e.width*n.from.x,outerHeight:e.outerHeight*n.from.y,outerWidth:e.outerWidth*n.from.x},e={height:e.height*n.to.y,width:e.width*n.to.x,outerHeight:e.height*n.to.y,outerWidth:e.width*n.to.x};n.from.y!==n.to.y&&(i=k.effects.setTransition(t,o,n.from.y,i),e=k.effects.setTransition(t,o,n.to.y,e)),n.from.x!==n.to.x&&(i=k.effects.setTransition(t,a,n.from.x,i),e=k.effects.setTransition(t,a,n.to.x,e)),h&&k.effects.saveStyle(t),t.css(i),t.animate(e,s.duration,s.easing,function(){h&&k.effects.restoreStyle(t)})})),i.animate(g,{queue:!1,duration:s.duration,easing:s.easing,complete:function(){var t=i.offset();0===g.opacity&&i.css("opacity",f.opacity),h||(i.css("position","static"===u?"relative":u).offset(t),k.effects.saveStyle(i)),e()}})}),k.effects.define("scale",function(t,e){var i=k(this),s=t.mode,s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"effect"!==s?0:100),i=k.extend(!0,{from:k.effects.scaledDimensions(i),to:k.effects.scaledDimensions(i,s,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(i.from.opacity=1,i.to.opacity=0),k.effects.effect.size.call(this,i,e)}),k.effects.define("puff","hide",function(t,e){t=k.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});k.effects.effect.scale.call(this,t,e)}),k.effects.define("pulsate","show",function(t,e){var i=k(this),s=t.mode,n="show"===s,o=2*(t.times||5)+(n||"hide"===s?1:0),a=t.duration/o,r=0,h=1,s=i.queue().length;for(!n&&i.is(":visible")||(i.css("opacity",0).show(),r=1);h<o;h++)i.animate({opacity:r},a,t.easing),r=1-r;i.animate({opacity:r},a,t.easing),i.queue(e),k.effects.unshift(i,s,1+o)}),k.effects.define("shake",function(t,e){var i=1,s=k(this),n=t.direction||"left",o=t.distance||20,a=t.times||3,r=2*a+1,h=Math.round(t.duration/r),l="up"===n||"down"===n?"top":"left",n="up"===n||"left"===n,c={},u={},d={},p=s.queue().length;for(k.effects.createPlaceholder(s),c[l]=(n?"-=":"+=")+o,u[l]=(n?"+=":"-=")+2*o,d[l]=(n?"-=":"+=")+2*o,s.animate(c,h,t.easing);i<a;i++)s.animate(u,h,t.easing).animate(d,h,t.easing);s.animate(u,h,t.easing).animate(c,h/2,t.easing).queue(e),k.effects.unshift(s,p,1+r)}),k.effects.define("slide","show",function(t,e){var i,s,n=k(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=t.mode,r=t.direction||"left",h="up"===r||"down"===r?"top":"left",l="up"===r||"left"===r,c=t.distance||n["top"==h?"outerHeight":"outerWidth"](!0),u={};k.effects.createPlaceholder(n),i=n.cssClip(),s=n.position()[h],u[h]=(l?-1:1)*c+s,u.clip=n.cssClip(),u.clip[o[r][1]]=u.clip[o[r][0]],"show"===a&&(n.cssClip(u.clip),n.css(h,u[h]),u.clip=i,u[h]=s),n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:e})}),!1!==k.uiBackCompat&&k.effects.define("transfer",function(t,e){k(this).transfer(t,e)})});
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){var o,e,u,n;function c(o,t){var e,u;1<o.originalEvent.touches.length||(o.preventDefault(),e=o.originalEvent.changedTouches[0],(u=document.createEvent("MouseEvents")).initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(u))}t.support.touch="ontouchend"in document,t.support.touch&&(o=t.ui.mouse.prototype,e=o._mouseInit,u=o._mouseDestroy,o._touchStart=function(o){!n&&this._mouseCapture(o.originalEvent.changedTouches[0])&&(n=!0,this._touchMoved=!1,c(o,"mouseover"),c(o,"mousemove"),c(o,"mousedown"))},o._touchMove=function(o){n&&(this._touchMoved=!0,c(o,"mousemove"))},o._touchEnd=function(o){n&&(c(o,"mouseup"),c(o,"mouseout"),this._touchMoved||c(o,"click"),n=!1)},o._mouseInit=function(){var o=this;o.element.bind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),e.call(o)},o._mouseDestroy=function(){var o=this;o.element.unbind({touchstart:t.proxy(o,"_touchStart"),touchmove:t.proxy(o,"_touchMove"),touchend:t.proxy(o,"_touchEnd")}),u.call(o)})}(jQuery);
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
!function(){function Wo(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function li(n,t,r,e){for(var u=-1,o=null==n?0:n.length;++u<o;){var i=n[u];t(e,i,r(i),n)}return e}function Bo(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function si(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Lo(n,t){for(var r=-1,e=null==n?0:n.length,u=0,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[u++]=i)}return o}function Uo(n,t){return!(null==n||!n.length)&&-1<No(n,t,0)}function Co(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function Do(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function Mo(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function To(n,t,r,e){var u=-1,o=null==n?0:n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function hi(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function $o(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function pi(n,e,t){var u;return t(n,function(n,t,r){if(e(n,t,r))return u=t,!1}),u}function Fo(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function No(n,t,r){if(t==t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=Fo(n,gi,r);return n}function _i(n,t,r,e){--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function gi(n){return n!=n}function di(n,t){var r=null==n?0:n.length;return r?Zo(n,t)/r:ri}function Po(t){return function(n){return null==n?ni:n[t]}}function n(t){return function(n){return null==t?ni:t[n]}}function vi(n,e,u,o,t){return t(n,function(n,t,r){u=o?(o=!1,n):e(u,n,t,r)}),u}function Zo(n,t){for(var r,e=-1,u=n.length;++e<u;){var o=t(n[e]);o!==ni&&(r=r===ni?o:r+o)}return r}function qo(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function Vo(t){return function(n){return t(n)}}function Ko(t,n){return Do(n,function(n){return t[n]})}function Go(n,t){return n.has(t)}function yi(n,t){for(var r=-1,e=n.length;++r<e&&-1<No(t,n[r],0););return r}function bi(n,t){for(var r=n.length;r--&&-1<No(t,n[r],0););return r}function xi(n){return"\\"+o[n]}function Ho(n){var r=-1,e=Array(n.size);return n.forEach(function(n,t){e[++r]=[t,n]}),e}function ji(t,r){return function(n){return t(r(n))}}function Jo(n,t){for(var r=-1,e=n.length,u=0,o=[];++r<e;){var i=n[r];i!==t&&"__lodash_placeholder__"!==i||(n[r]="__lodash_placeholder__",o[u++]=r)}return o}function Yo(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Qo(n){if(oi.test(n)){for(var t=u.lastIndex=0;u.test(n);)++t;n=t}else n=f(n);return n}function Xo(n){return oi.test(n)?n.match(u)||[]:n.split("")}var ni,ti=1/0,ri=NaN,wi=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],mi=/\b__p\+='';/g,Ai=/\b(__p\+=)''\+/g,Ei=/(__e\(.*?\)|\b__t\))\+'';/g,ki=/&(?:amp|lt|gt|quot|#39);/g,Si=/[&<>"']/g,Oi=RegExp(ki.source),Ii=RegExp(Si.source),Ri=/<%-([\s\S]+?)%>/g,zi=/<%([\s\S]+?)%>/g,Wi=/<%=([\s\S]+?)%>/g,Bi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Li=/^\w*$/,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ei=/[\\^$.*+?()[\]{}|]/g,Ci=RegExp(ei.source),Di=/^\s+|\s+$/g,Mi=/^\s+/,Ti=/\s+$/,$i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fi=/\{\n\/\* \[wrapped with (.+)\] \*/,Ni=/,? & /,Pi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zi=/\\(\\)?/g,qi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vi=/\w*$/,Ki=/^[-+]0x[0-9a-f]+$/i,Gi=/^0b[01]+$/i,Hi=/^\[object .+?Constructor\]$/,Ji=/^0o[0-7]+$/i,Yi=/^(?:0|[1-9]\d*)$/,Qi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui=/($^)/,Xi=/['\n\r\u2028\u2029\\]/g,t="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",r="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+t,nf=RegExp("[']","g"),tf=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),u=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+t,"g"),rf=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",r].join("|"),"g"),oi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ef=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uf="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),ii={},fi=(ii["[object Float32Array]"]=ii["[object Float64Array]"]=ii["[object Int8Array]"]=ii["[object Int16Array]"]=ii["[object Int32Array]"]=ii["[object Uint8Array]"]=ii["[object Uint8ClampedArray]"]=ii["[object Uint16Array]"]=ii["[object Uint32Array]"]=!0,ii["[object Arguments]"]=ii["[object Array]"]=ii["[object ArrayBuffer]"]=ii["[object Boolean]"]=ii["[object DataView]"]=ii["[object Date]"]=ii["[object Error]"]=ii["[object Function]"]=ii["[object Map]"]=ii["[object Number]"]=ii["[object Object]"]=ii["[object RegExp]"]=ii["[object Set]"]=ii["[object String]"]=ii["[object WeakMap]"]=!1,{}),o=(fi["[object Arguments]"]=fi["[object Array]"]=fi["[object ArrayBuffer]"]=fi["[object DataView]"]=fi["[object Boolean]"]=fi["[object Date]"]=fi["[object Float32Array]"]=fi["[object Float64Array]"]=fi["[object Int8Array]"]=fi["[object Int16Array]"]=fi["[object Int32Array]"]=fi["[object Map]"]=fi["[object Number]"]=fi["[object Object]"]=fi["[object RegExp]"]=fi["[object Set]"]=fi["[object String]"]=fi["[object Symbol]"]=fi["[object Uint8Array]"]=fi["[object Uint8ClampedArray]"]=fi["[object Uint16Array]"]=fi["[object Uint32Array]"]=!0,fi["[object Error]"]=fi["[object Function]"]=fi["[object WeakMap]"]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),of=parseFloat,ff=parseInt,t="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,ci=t||r||Function("return this")(),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,e=r&&"object"==typeof module&&module&&!module.nodeType&&module,cf=e&&e.exports===r,i=cf&&t.process,t=function(){try{var n=e&&e.f&&e.f("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}(),af=t&&t.isArrayBuffer,lf=t&&t.isDate,sf=t&&t.isMap,hf=t&&t.isRegExp,pf=t&&t.isSet,_f=t&&t.isTypedArray,f=Po("length"),gf=n({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),df=n({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),vf=n({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ai=function u(n){function p(n){if(j(n)&&!D(n)&&!(n instanceof g)){if(n instanceof _)return n;if(B.call(n,"__wrapped__"))return Yt(n)}return new _(n)}function o(){}function _(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ni}function g(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function M(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function T(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function $(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function F(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new $;++t<r;)this.add(n[t])}function d(n){this.size=(this.__data__=new T(n)).size}function N(n,t){var r,e=D(n),u=!e&&Lu(n),o=!e&&!u&&Cu(n),i=!e&&!u&&!o&&$u(n),f=(u=(e=e||u||o||i)?qo(n.length,Vr):[]).length;for(r in n)!t&&!B.call(n,r)||e&&("length"==r||o&&("offset"==r||"parent"==r)||i&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Tt(r,f))||u.push(r);return u}function P(n){var t=n.length;return t?n[zn(0,t-1)]:ni}function Z(n,t,r){(r===ni||y(n[t],r))&&(r!==ni||t in n)||H(n,t,r)}function q(n,t,r){var e=n[t];B.call(n,t)&&y(e,r)&&(r!==ni||t in n)||H(n,t,r)}function V(n,t){for(var r=n.length;r--;)if(y(n[r][0],t))return r;return-1}function K(n,e,u,o){return Ze(n,function(n,t,r){e(o,n,u(n),r)}),o}function G(n,t){return n&&tt(t,S(t),n)}function H(n,t,r){"__proto__"==t&&pe?pe(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function J(n,t){for(var r=-1,e=t.length,u=R(e),o=null==n;++r<e;)u[r]=o?ni:Sr(n,t[r]);return u}function Y(n,t,r){return n=n==n&&(r!==ni&&(n=n<=r?n:r),t!==ni)?t<=n?n:t:n}function v(r,e,u,n,t,o){var i,f,c,a,l,s=1&e,h=2&e,p=4&e;if((i=u?t?u(r,n,t,o):u(r):i)===ni){if(!x(r))return r;if(n=D(r)){if(_=(g=r).length,a=new g.constructor(_),_&&"string"==typeof g[0]&&B.call(g,"index")&&(a.index=g.index,a.input=g.input),i=a,!s)return E(r,i)}else{var _=C(r),g="[object Function]"==_||"[object GeneratorFunction]"==_;if(Cu(r))return Hn(r,s);if("[object Object]"==_||"[object Arguments]"==_||g&&!t){if(i=h||g?{}:Dt(r),!s)return h?(c=a=r,c=(f=i)&&tt(c,O(c),f),tt(a,Xe(a),c)):(c=G(i,f=r),tt(f,Qe(f),c))}else{if(!fi[_])return t?r:{};i=function(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Jn(n);case"[object Boolean]":case"[object Date]":return new e(+n);case"[object DataView]":return t=r?Jn(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yn(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return(t=new n.constructor(n.source,Vi.exec(n))).lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return Me?z(Me.call(n)):{}}}(r,_,s)}}if(t=(o=o||new d).get(r))return t;o.set(r,i),Tu(r)?r.forEach(function(n){i.add(v(n,e,u,n,r,o))}):Du(r)?r.forEach(function(n,t){i.set(t,v(n,e,u,t,r,o))}):(h=p?h?Rt:It:h?O:S,Bo((l=n?ni:h(r))||r,function(n,t){l&&(n=r[t=n]),q(i,t,v(n,e,u,t,r,o))}))}return i}function Q(n,t,r){var e=r.length;if(null==n)return!e;for(n=z(n);e--;){var u=r[e],o=t[u],i=n[u];if(i===ni&&!(u in n)||!o(i))return!1}return!0}function X(n,t,r){if("function"!=typeof n)throw new W("Expected a function");return ru(function(){n.apply(ni,r)},t)}function nn(n,t,r,e){var u=-1,o=Uo,i=!0,f=n.length,c=[],a=t.length;if(f){r&&(t=Do(t,Vo(r))),e?(o=Co,i=!1):200<=t.length&&(o=Go,i=!1,t=new F(t));n:for(;++u<f;){var l=n[u],s=null==r?l:r(l),l=e||0!==l?l:0;if(i&&s==s){for(var h=a;h--;)if(t[h]===s)continue n;c.push(l)}else o(t,s,e)||c.push(l)}}return c}function tn(n,e){var u=!0;return Ze(n,function(n,t,r){return u=!!e(n,t,r)}),u}function rn(n,t,r){for(var e=-1,u=n.length;++e<u;){var o,i,f=n[e],c=t(f);null!=c&&(o===ni?c==c&&!w(c):r(c,o))&&(o=c,i=f)}return i}function en(n,e){var u=[];return Ze(n,function(n,t,r){e(n,t,r)&&u.push(n)}),u}function c(n,t,r,e,u){var o=-1,i=n.length;for(r=r||Mt,u=u||[];++o<i;){var f=n[o];0<t&&r(f)?1<t?c(f,t-1,r,e,u):Mo(u,f):e||(u[u.length]=f)}return u}function un(n,t){return n&&Ve(n,t,S)}function on(n,t){return n&&Ke(n,t,S)}function fn(t,n){return Lo(n,function(n){return vr(t[n])})}function cn(n,t){for(var r=0,e=(t=Kn(t,n)).length;null!=n&&r<e;)n=n[Gt(t[r++])];return r&&r==e?n:ni}function an(n,t,r){return t=t(n),D(n)?t:Mo(t,r(n))}function r(n){if(null==n)n=n===ni?"[object Undefined]":"[object Null]";else if(he&&he in z(n)){var t=B.call(n,he),r=n[he];try{n[he]=ni;var e=!0}catch(n){}var u=Xr.call(n);e&&(t?n[he]=r:delete n[he]),n=u}else n=Xr.call(n);return n}function ln(n,t){return t<n}function sn(n,t){return null!=n&&B.call(n,t)}function hn(n,t){return null!=n&&t in z(n)}function pn(n,t,r){for(var e=r?Co:Uo,u=n[0].length,o=n.length,i=o,f=R(o),c=1/0,a=[];i--;){var l=n[i];i&&t&&(l=Do(l,Vo(t))),c=U(l.length,c),f[i]=!r&&(t||120<=u&&120<=l.length)?new F(i&&l):ni}var l=n[0],s=-1,h=f[0];n:for(;++s<u&&a.length<c;){var p=l[s],_=t?t(p):p,p=r||0!==p?p:0;if(h?!Go(h,_):!e(a,_,r)){for(i=o;--i;){var g=f[i];if(g?!Go(g,_):!e(n[i],_,r))continue n}h&&h.push(_),a.push(p)}}return a}function _n(n,t,r){return null==(t=null==(n=(t=Kn(t,n)).length<2?n:cn(n,i(t,0,-1)))?n:n[Gt(e(t))])?ni:Wo(t,n,r)}function gn(n){return j(n)&&"[object Arguments]"==r(n)}function dn(n,t,r,e,u){if(n===t)t=!0;else if(null==n||null==t||!j(n)&&!j(t))t=n!=n&&t!=t;else n:{var o=D(n),i=D(t),f=o?"[object Array]":C(n),c=i?"[object Array]":C(t),a="[object Object]"==(f="[object Arguments]"==f?"[object Object]":f),i="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c);if((c=f==c)&&Cu(n)){if(!Cu(t)){t=!1;break n}a=!(o=!0)}if(c&&!a)u=u||new d,t=o||$u(n)?St(n,t,r,e,dn,u):function(n,t,r,e,u,o,i){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":if(n.byteLength==t.byteLength&&o(new ue(n),new ue(t)))return!0;break;case"[object Boolean]":case"[object Date]":case"[object Number]":return y(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=Ho;case"[object Set]":if(f=f||Yo,n.size==t.size||1&e)return(r=i.get(n))?r==t:(e|=2,i.set(n,t),t=St(f(n),f(t),e,u,o,i),i.delete(n),t);break;case"[object Symbol]":if(Me)return Me.call(n)==Me.call(t)}return!1}(n,t,f,r,e,dn,u);else if(1&r||(o=a&&B.call(n,"__wrapped__"),f=i&&B.call(t,"__wrapped__"),!o&&!f))if(c)t:if(u=u||new d,o=1&r,(i=(f=It(n)).length)==(c=It(t).length)||o){for(a=i;a--;){var l=f[a];if(!(o?l in t:B.call(t,l))){t=!1;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=!0,u.set(n,t),u.set(t,n);for(var s=o;++a<i;){var h,p=n[l=f[a]],_=t[l];if((h=e?o?e(_,p,l,t,n,u):e(p,_,l,n,t,u):h)===ni?p!==_&&!dn(p,_,r,e,u):!h){c=!1;break}s=s||"constructor"==l}c&&!s&&(r=n.constructor)!=(e=t.constructor)&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(c=!1),u.delete(n),u.delete(t),t=c}}else t=!1;else t=!1;else t=dn(n=o?n.value():n,t=f?t.value():t,r,e,u=u||new d)}return t}function vn(n,t,r,e){var u=r.length,o=u,i=!e;if(null==n)return!o;for(n=z(n);u--;){var f=r[u];if(i&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<o;){var c,a=(f=r[u])[0],l=n[a],s=f[1];if(i&&f[2]){if(l===ni&&!(a in n))return!1}else if(f=new d,(c=e?e(l,s,a,n,t,f):c)===ni?!dn(s,l,3,e,f):!c)return!1}return!0}function yn(n){return!(!x(n)||Qr&&Qr in n)&&(vr(n)?re:Hi).test(Ht(n))}function bn(n){return"function"==typeof n?n:null==n?I:"object"==typeof n?D(n)?An(n[0],n[1]):mn(n):Mr(n)}function xn(n){if(!Nt(n))return we(n);var t,r=[];for(t in z(n))B.call(n,t)&&"constructor"!=t&&r.push(t);return r}function jn(n,t){return n<t}function wn(n,e){var u=-1,o=h(n)?R(n.length):[];return Ze(n,function(n,t,r){o[++u]=e(n,t,r)}),o}function mn(t){var r=Lt(t);return 1==r.length&&r[0][2]?Pt(r[0][0],r[0][1]):function(n){return n===t||vn(n,t,r)}}function An(r,e){return $t(r)&&e==e&&!x(e)?Pt(Gt(r),e):function(n){var t=Sr(n,r);return t===ni&&t===e?Or(n,r):dn(e,t,3)}}function En(l,s,h,p,_){l!==s&&Ve(s,function(n,t){var r,e,u,o,i,f,c,a;x(n)?(r=_=_||new d,e="__proto__"==t?ni:l[t],u="__proto__"==t?ni:s[t],(a=r.get(u))||((o=(a=p?p(e,u,t+"",l,s,r):ni)===ni)&&(f=!(i=D(u))&&Cu(u),c=!i&&!f&&$u(u),a=u,i||f||c?a=D(e)?e:b(e)?E(e):f?Hn(u,!(o=!1)):c?Yn(u,!(o=!1)):[]:jr(u)||Lu(u)?Lu(a=e)?a=kr(e):(!x(e)||h&&vr(e))&&(a=Dt(u)):o=!1),o&&(r.set(u,a),En(a,u,h,p,r),r.delete(u))),Z(l,t,a)):(r=p?p("__proto__"==t?ni:l[t],n,t+"",l,s,_):ni,Z(l,t,r=r===ni?n:r))},O)}function kn(n,t){var r=n.length;if(r)return Tt(t+=t<0?r:0,r)?n[t]:ni}function Sn(n,r,c){var e=-1,t=(r=Do(r.length?r:[I],Vo(l())),n=wn(n,function(t){return{a:Do(r,function(n){return n(t)}),b:++e,c:t}})),n=function(n,t){n:{for(var r=-1,e=n.a,u=t.a,o=e.length,i=c.length;++r<o;){var f=Qn(e[r],u[r]);if(f){r=i<=r?f:f*("desc"==c[r]?-1:1);break n}}r=n.b-t.b}return r},u=t.length;for(t.sort(n);u--;)t[u]=t[u].c;return t}function On(n,t,r){for(var e=-1,u=t.length,o={};++e<u;){var i=t[e],f=cn(n,i);r(f,i)&&Bn(o,Kn(i,n),f)}return o}function In(n,t,r,e){var u=e?_i:No,o=-1,i=t.length,f=n;for(n===t&&(t=E(t)),r&&(f=Do(n,Vo(r)));++o<i;)for(var c=0,a=t[o],a=r?r(a):a;-1<(c=u(f,a,c,e));)f!==n&&ae.call(f,c,1),ae.call(n,c,1);return n}function Rn(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u,o=t[r];r!=e&&o===u||(Tt(u=o)?ae.call(n,o,1):$n(n,o))}}function zn(n,t){return n+ye(Ee()*(t-n+1))}function Wn(n,t){var r="";if(!(!n||t<1||9007199254740991<t))for(;t%2&&(r+=n),(t=ye(t/2))&&(n+=n),t;);return r}function f(n,t){return eu(Zt(n,t,I),n+"")}function Bn(n,t,r,e){if(x(n))for(var u=-1,o=(t=Kn(t,n)).length,i=o-1,f=n;null!=f&&++u<o;){var c,a=Gt(t[u]),l=r;q(f,a,l=u!=i&&(c=f[a],(l=e?e(c,a,f):ni)===ni)?x(c)?c:Tt(t[u+1])?[]:{}:l),f=f[a]}return n}function i(n,t,r){var e=-1,u=n.length;for((r=u<r?u:r)<0&&(r+=u),u=r<(t=t<0?u<-t?0:u+t:t)?0:r-t>>>0,t>>>=0,r=R(u);++e<u;)r[e]=n[e+t];return r}function Ln(n,e){var u;return Ze(n,function(n,t,r){return!(u=e(n,t,r))}),!!u}function Un(n,t,r){var e=0,u=null==n?e:n.length;if("number"==typeof t&&t==t&&u<=2147483647){for(;e<u;){var o=e+u>>>1,i=n[o];null!==i&&!w(i)&&(r?i<=t:i<t)?e=1+o:u=o}return u}return Cn(n,t,I,r)}function Cn(n,t,r,e){t=r(t);for(var u=0,o=null==n?0:n.length,i=t!=t,f=null===t,c=w(t),a=t===ni;u<o;){var l=ye((u+o)/2),s=r(n[l]),h=s!==ni,p=null===s,_=s==s,g=w(s);(i?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!g):!p&&!g&&(e?s<=t:s<t))?u=l+1:o=l}return U(o,4294967294)}function Dn(n,t){for(var r=-1,e=n.length,u=0,o=[];++r<e;){var i,f=n[r],c=t?t(f):f;r&&y(c,i)||(i=c,o[u++]=0===f?0:f)}return o}function Mn(n){return"number"==typeof n?n:w(n)?ri:+n}function a(n){var t;return"string"==typeof n?n:D(n)?Do(n,a)+"":w(n)?Te?Te.call(n):"":"0"==(t=n+"")&&1/n==-ti?"-0":t}function Tn(n,t,r){var e=-1,u=Uo,o=n.length,i=!0,f=[],c=f;if(r)i=!1,u=Co;else if(200<=o){if(u=t?null:Je(n))return Yo(u);i=!1,u=Go,c=new F}else c=t?[]:f;n:for(;++e<o;){var a=n[e],l=t?t(a):a,a=r||0!==a?a:0;if(i&&l==l){for(var s=c.length;s--;)if(c[s]===l)continue n;t&&c.push(l),f.push(a)}else u(c,l,r)||(c!==f&&c.push(l),f.push(a))}return f}function $n(n,t){return null==(n=(t=Kn(t,n)).length<2?n:cn(n,i(t,0,-1)))||delete n[Gt(e(t))]}function Fn(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?i(n,e?0:o,e?o+1:u):i(n,e?o+1:0,e?u:o)}function Nn(n,t){var r=n;return To(t,function(n,t){return t.func.apply(t.thisArg,Mo([n],t.args))},r=n instanceof g?n.value():r)}function Pn(n,t,r){var e=n.length;if(e<2)return e?Tn(n[0]):[];for(var u=-1,o=R(e);++u<e;)for(var i=n[u],f=-1;++f<e;)f!=u&&(o[u]=nn(o[u]||i,n[f],t,r));return Tn(c(o,1),t,r)}function Zn(n,t,r){for(var e=-1,u=n.length,o=t.length,i={};++e<u;)r(i,n[e],e<o?t[e]:ni);return i}function qn(n){return b(n)?n:[]}function Vn(n){return"function"==typeof n?n:I}function Kn(n,t){return D(n)?n:$t(n,t)?[n]:uu(k(n))}function Gn(n,t,r){var e=n.length;return r=r===ni?e:r,!t&&e<=r?n:i(n,t,r)}function Hn(n,t){return t?n.slice():(t=n.length,t=oe?oe(t):new n.constructor(t),n.copy(t),t)}function Jn(n){var t=new n.constructor(n.byteLength);return new ue(t).set(new ue(n)),t}function Yn(n,t){return new n.constructor(t?Jn(n.buffer):n.buffer,n.byteOffset,n.length)}function Qn(n,t){if(n!==t){var r=n!==ni,e=null===n,u=n==n,o=w(n),i=t!==ni,f=null===t,c=t==t,a=w(t);if(!f&&!a&&!o&&t<n||o&&i&&c&&!f&&!a||e&&i&&c||!r&&c||!u)return 1;if(!e&&!o&&!a&&n<t||a&&r&&u&&!e&&!o||f&&r&&u||!i&&u||!c)return-1}return 0}function Xn(n,t,r,e){var u=-1,o=n.length,i=r.length,f=-1,c=t.length,a=L(o-i,0),l=R(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<i;)(e||u<o)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l}function nt(n,t,r,e){var u=-1,o=n.length,i=-1,f=r.length,c=-1,a=t.length,l=L(o-f,0),s=R(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++i<f;)(e||u<o)&&(s[l+r[i]]=n[u++]);return s}function E(n,t){var r=-1,e=n.length;for(t=t||R(e);++r<e;)t[r]=n[r];return t}function tt(n,t,r,e){var u=!r;r=r||{};for(var o=-1,i=t.length;++o<i;){var f=t[o],c=e?e(r[f],n[f],f,r,n):ni;(u?H:q)(r,f,c=c===ni?n[f]:c)}return r}function rt(u,o){return function(n,t){var r=D(n)?li:K,e=o?o():{};return r(n,u,l(t,2),e)}}function et(i){return f(function(n,t){var r=-1,e=t.length,u=1<e?t[e-1]:ni,o=2<e?t[2]:ni,u=3<i.length&&"function"==typeof u?(e--,u):ni;for(o&&s(t[0],t[1],o)&&(u=e<3?ni:u,e=1),n=z(n);++r<e;)(o=t[r])&&i(n,o,r,u);return n})}function ut(o,i){return function(n,t){if(null!=n){if(!h(n))return o(n,t);for(var r=n.length,e=i?r:-1,u=z(n);(i?e--:++e<r)&&!1!==t(u[e],e,u););}return n}}function ot(f){return function(n,t,r){for(var e=-1,u=z(n),o=(r=r(n)).length;o--;){var i=r[f?o:++e];if(!1===t(u[i],i,u))break}return n}}function it(e){return function(n){n=k(n);var t=oi.test(n)?Xo(n):ni,r=t?t[0]:n.charAt(0);return n=t?Gn(t,1).join(""):n.slice(1),r[e]()+n}}function ft(t){return function(n){return To(Br(Wr(n).replace(nf,"")),t,"")}}function ct(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=$e(r.prototype);return x(n=r.apply(t,n))?n:t}}function at(o,i,f){var c=ct(o);return function n(){for(var t=arguments.length,r=R(t),e=t,u=Wt(n);e--;)r[e]=arguments[e];return(t-=(e=t<3&&r[0]!==u&&r[t-1]!==u?[]:Jo(r,u)).length)<f?xt(o,i,ht,n.placeholder,ni,r,e,ni,ni,f-t):Wo(this&&this!==ci&&this instanceof n?c:o,this,r)}}function lt(o){return function(n,t,r){var e,u=z(n);return h(n)||(e=l(t,3),n=S(n),t=function(n){return e(u[n],n,u)}),-1<(t=o(n,t,r))?u[e?n[t]:t]:ni}}function st(f){return Ot(function(e){var u=e.length,n=u,t=_.prototype.thru;for(f&&e.reverse();n--;){if("function"!=typeof(r=e[n]))throw new W("Expected a function");t&&!i&&"wrapper"==zt(r)&&(i=new _([],!0))}for(n=i?n:u;++n<u;)var r,o="wrapper"==(t=zt(r=e[n]))?Ye(r):ni,i=o&&Ft(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?i[zt(o[0])].apply(i,o[3]):1==r.length&&Ft(r)?i[t]():i.thru(r);return function(){var n=(r=arguments)[0];if(i&&1==r.length&&D(n))return i.plant(n).value();for(var t=0,r=u?e[t].apply(this,r):n;++t<u;)r=e[t].call(this,r);return r}})}function ht(a,l,s,h,p,_,g,d,v,y){var b=128&l,x=1&l,j=2&l,w=24&l,m=512&l,A=j?ni:ct(a);return function n(){for(var t=arguments.length,r=R(t),e=t;e--;)r[e]=arguments[e];if(w)for(var u=Wt(n),e=r.length,o=0;e--;)r[e]===u&&++o;if(h&&(r=Xn(r,h,p,w)),_&&(r=nt(r,_,g,w)),t-=o,w&&t<y)return u=Jo(r,u),xt(a,l,ht,n.placeholder,s,r,u,d,v,y-t);if(u=x?s:this,e=j?u[a]:a,t=r.length,d){o=r.length;for(var i=U(d.length,o),f=E(r);i--;){var c=d[i];r[i]=Tt(c,o)?f[c]:ni}}else m&&1<t&&r.reverse();return b&&v<t&&(r.length=v),(e=this&&this!==ci&&this instanceof n?A||ct(e):e).apply(u,r)}}function pt(r,i){return function(n,t){return n=n,e=r,u=i(t),o={},un(n,function(n,t,r){e(o,u(n),t,r)}),o;var e,u,o}}function _t(e,u){return function(n,t){var r;if(n===ni&&t===ni)return u;if(n!==ni&&(r=n),t!==ni){if(r===ni)return t;t=("string"==typeof n||"string"==typeof t?(n=a(n),a):(n=Mn(n),Mn))(t),r=e(n,t)}return r}}function gt(e){return Ot(function(n){return n=Do(n,Vo(l())),f(function(t){var r=this;return e(n,function(n){return Wo(n,r,t)})})})}function dt(n,t){var r=(t=t===ni?" ":a(t)).length;return r<2?r?Wn(t,n):t:(r=Wn(t,ve(n/Qo(t))),oi.test(t)?Gn(Xo(r),0,n).join(""):r.slice(0,n))}function vt(f,n,c,a){var l=1&n,s=ct(f);return function n(){for(var t=-1,r=arguments.length,e=-1,u=a.length,o=R(u+r),i=this&&this!==ci&&this instanceof n?s:f;++e<u;)o[e]=a[e];for(;r--;)o[e++]=arguments[++t];return Wo(i,l?c:this,o)}}function yt(o){return function(n,t,r){r&&"number"!=typeof r&&s(n,t,r)&&(t=r=ni),n=Ar(n),t===ni?(t=n,n=0):t=Ar(t),r=r===ni?n<t?1:-1:Ar(r);var e=-1;t=L(ve((t-n)/(r||1)),0);for(var u=R(t);t--;)u[o?t:++e]=n,n+=r;return u}}function bt(r){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=A(n),t=A(t)),r(n,t)}}function xt(n,t,r,e,u,o,i,f,c,a){var l=8&t;return 4&(t=(t|(l?32:64))&~(l?64:32))||(t&=-4),r=r.apply(ni,u=[n,t,u,l?o:ni,l?i:ni,o=l?ni:o,i=l?ni:i,f,c,a]),Ft(n)&&tu(r,u),r.placeholder=e,qt(r,n,t)}function jt(n){var e=Zr[n];return function(n,t){var r;return n=A(n),(t=null==t?0:U(m(t),292))?(r=(k(n)+"e").split("e"),+((r=(k(r=e(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))):e(n)}}function wt(o){return function(n){var t,r,e,u=C(n);return"[object Map]"==u?Ho(n):"[object Set]"==u?(u=n,r=-1,e=Array(u.size),u.forEach(function(n){e[++r]=[n,n]}),e):Do(o(t=n),function(n){return[n,t[n]]})}}function mt(n,t,r,e,u,o,i,f){var c,a,l,s,h,p,_,g,d=2&t;if(d||"function"==typeof n)return(c=e?e.length:0)||(t&=-97,e=u=ni),i=i===ni?i:L(m(i),0),f=f===ni?f:m(f),c-=u?u.length:0,64&t&&(a=e,l=u,e=u=ni),s=d?ni:Ye(n),o=[n,t,r,e,u,a,l,o,i,f],s&&(r=o[1],n=s[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&o[7].length<=s[8]||384==n&&s[7].length<=s[8]&&8==r,t<131||e)&&(1&n&&(o[2]=s[2],t|=1&r?0:4),(r=s[3])&&(e=o[3],o[3]=e?Xn(e,r,s[4]):r,o[4]=e?Jo(o[3],"__lodash_placeholder__"):s[4]),(r=s[5])&&(e=o[5],o[5]=e?nt(e,r,s[6]):r,o[6]=e?Jo(o[5],"__lodash_placeholder__"):s[6]),(r=s[7])&&(o[7]=r),128&n&&(o[8]=null==o[8]?s[8]:U(o[8],s[8])),null==o[9]&&(o[9]=s[9]),o[0]=s[0],o[1]=t),n=o[0],t=o[1],r=o[2],e=o[3],u=o[4],!(f=o[9]=o[9]===ni?d?0:n.length:L(o[9]-c,0))&&24&t&&(t&=-25),qt((s?Ge:tu)(t&&1!=t?8==t||16==t?at(n,t,f):32!=t&&33!=t||u.length?ht.apply(ni,o):vt(n,t,r,e):(p=r,_=1&t,g=ct(h=n),function n(){return(this&&this!==ci&&this instanceof n?g:h).apply(_?p:this,arguments)}),o),n,t);throw new W("Expected a function")}function At(n,t,r,e){return n===ni||y(n,Gr[r])&&!B.call(e,r)?t:n}function Et(n,t,r,e,u,o){return x(n)&&x(t)&&(o.set(t,n),En(n,t,ni,Et,o),o.delete(t)),n}function kt(n){return jr(n)?ni:n}function St(n,t,r,e,u,o){var i=1&r,f=n.length;if(f!=(c=t.length)&&!(i&&f<c))return!1;if((c=o.get(n))&&o.get(t))return c==t;var c=-1,a=!0,l=2&r?new F:ni;for(o.set(n,t),o.set(t,n);++c<f;){var s,h=n[c],p=t[c];if((s=e?i?e(p,h,c,t,n,o):e(h,p,c,n,t,o):s)!==ni){if(s)continue;a=!1;break}if(l){if(!$o(t,function(n,t){return!Go(l,t)&&(h===n||u(h,n,r,e,o))&&l.push(t)})){a=!1;break}}else if(h!==p&&!u(h,p,r,e,o)){a=!1;break}}return o.delete(n),o.delete(t),a}function Ot(n){return eu(Zt(n,ni,nr),n+"")}function It(n){return an(n,S,Qe)}function Rt(n){return an(n,O,Xe)}function zt(n){for(var t=n.name+"",r=We[t],e=B.call(We,t)?r.length:0;e--;){var u=r[e],o=u.func;if(null==o||o==n)return u.name}return t}function Wt(n){return(B.call(p,"placeholder")?p:n).placeholder}function l(){var n=(n=p.iteratee||Ur)===Ur?bn:n;return arguments.length?n(arguments[0],arguments[1]):n}function Bt(n,t){var n=n.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Lt(n){for(var t=S(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u==u&&!x(u)]}return t}function Ut(n,t){n=null==n?ni:n[t];return yn(n)?n:ni}function Ct(n,t,r){for(var e=-1,u=(t=Kn(t,n)).length,o=!1;++e<u;){var i=Gt(t[e]);if(!(o=null!=n&&r(n,i)))break;n=n[i]}return o||++e!=u?o:!!(u=null==n?0:n.length)&&br(u)&&Tt(i,u)&&(D(n)||Lu(n))}function Dt(n){return"function"!=typeof n.constructor||Nt(n)?{}:$e(ie(n))}function Mt(n){return D(n)||Lu(n)||!!(le&&n&&n[le])}function Tt(n,t){var r=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Yi.test(n))&&-1<n&&0==n%1&&n<t}function s(n,t,r){var e;return!!x(r)&&!!("number"==(e=typeof t)?h(r)&&Tt(t,r.length):"string"==e&&t in r)&&y(r[t],n)}function $t(n,t){var r;if(!D(n))return"number"==(r=typeof n)||"symbol"==r||"boolean"==r||null==n||w(n)||Li.test(n)||!Bi.test(n)||null!=t&&n in z(t)}function Ft(n){var t=zt(n),r=p[t];return"function"==typeof r&&t in g.prototype&&(n===r||(t=Ye(r))&&n===t[0])}function Nt(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||Gr)}function Pt(t,r){return function(n){return null!=n&&n[t]===r&&(r!==ni||t in z(n))}}function Zt(u,o,i){return o=L(o===ni?u.length-1:o,0),function(){for(var n=arguments,t=-1,r=L(n.length-o,0),e=R(r);++t<r;)e[t]=n[o+t];for(t=-1,r=R(o+1);++t<o;)r[t]=n[t];return r[o]=i(e),Wo(u,this,r)}}function qt(n,t,r){var e=t+"";t=eu;var u=Jt,o=(o=e.match(Fi))?o[1].split(Ni):[];return(u=(r=u(o,r)).length)&&(r[o=u-1]=(1<u?"& ":"")+r[o],r=r.join(2<u?", ":" "),e=e.replace($i,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Vt(r){var e=0,u=0;return function(){var n=me(),t=16-(n-u);if(u=n,0<t){if(800<=++e)return arguments[0]}else e=0;return r.apply(ni,arguments)}}function Kt(n,t){var r=-1,e=(u=n.length)-1;for(t=t===ni?u:t;++r<t;){var u,o=n[u=zn(r,e)];n[u]=n[r],n[r]=o}return n.length=t,n}function Gt(n){var t;return"string"==typeof n||w(n)?n:"0"==(t=n+"")&&1/n==-ti?"-0":t}function Ht(n){if(null==n)return"";try{return Jr.call(n)}catch(n){}return n+""}function Jt(r,e){return Bo(wi,function(n){var t="_."+n[0];e&n[1]&&!Uo(r,t)&&r.push(t)}),r.sort()}function Yt(n){var t;return n instanceof g?n.clone():((t=new _(n.__wrapped__,n.__chain__)).__actions__=E(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t)}function Qt(n,t,r){var e=null==n?0:n.length;return e?((r=null==r?0:m(r))<0&&(r=L(e+r,0)),Fo(n,l(t,3),r)):-1}function Xt(n,t,r){var e,u=null==n?0:n.length;return u?(e=u-1,r!==ni&&(e=m(r),e=r<0?L(u+e,0):U(e,u-1)),Fo(n,l(t,3),e,!0)):-1}function nr(n){return null!=n&&n.length?c(n,1):[]}function tr(n){return n&&n.length?n[0]:ni}function e(n){var t=null==n?0:n.length;return t?n[t-1]:ni}function rr(n,t){return n&&n.length&&t&&t.length?In(n,t):n}function er(n){return null==n?n:ke.call(n)}function ur(t){var r;return t&&t.length?(r=0,t=Lo(t,function(n){if(b(n))return r=L(n.length,r),!0}),qo(r,function(n){return Do(t,Po(n))})):[]}function or(n,t){return n&&n.length?(n=ur(n),null==t?n:Do(n,function(n){return Wo(t,ni,n)})):[]}function ir(n){return(n=p(n)).__chain__=!0,n}function fr(n,t){return t(n)}function cr(n,t){return(D(n)?Bo:Ze)(n,l(t,3))}function ar(n,t){return(D(n)?function(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}:qe)(n,l(t,3))}function lr(n,t){return(D(n)?Do:wn)(n,l(t,3))}function sr(n,t,r){return t=r?ni:t,t=n&&null==t?n.length:t,mt(n,128,ni,ni,ni,ni,t)}function hr(n,t){var r;if("function"!=typeof t)throw new W("Expected a function");return n=m(n),function(){return 0<--n&&(r=t.apply(this,arguments)),n<=1&&(t=ni),r}}function pr(e,u,n){function r(n){var t=c,r=a;return c=a=ni,_=n,s=e.apply(r,t)}function o(n){var t=n-p;return n-=_,p===ni||u<=t||t<0||d&&l<=n}function i(){if(o(r=Au()))return f(r);var n=ru,t=r-_,r=u-(r-p);t=d?U(r,l-t):r,h=n(i,t)}function f(n){return h=ni,v&&c?r(n):(c=a=ni,s)}function t(){var n=Au(),t=o(n);if(c=arguments,a=this,p=n,t){if(h===ni)return _=n=p,h=ru(i,u),g?r(n):s;if(d)return h=ru(i,u),r(p)}return h===ni&&(h=ru(i,u)),s}var c,a,l,s,h,p,_=0,g=!1,d=!1,v=!0;if("function"!=typeof e)throw new W("Expected a function");return u=A(u)||0,x(n)&&(g=!!n.leading,l=(d="maxWait"in n)?L(A(n.maxWait)||0,u):l,v="trailing"in n?!!n.trailing:v),t.cancel=function(){h!==ni&&He(h),_=0,c=p=a=h=ni},t.flush=function(){return h===ni?s:f(Au())},t}function _r(e,u){function o(){var n=arguments,t=u?u.apply(this,n):n[0],r=o.cache;return r.has(t)?r.get(t):(n=e.apply(this,n),o.cache=r.set(t,n)||r,n)}if("function"!=typeof e||null!=u&&"function"!=typeof u)throw new W("Expected a function");return o.cache=new(_r.Cache||$),o}function gr(t){if("function"!=typeof t)throw new W("Expected a function");return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function y(n,t){return n===t||n!=n&&t!=t}function h(n){return null!=n&&br(n.length)&&!vr(n)}function b(n){return j(n)&&h(n)}function dr(n){var t;return!!j(n)&&("[object Error]"==(t=r(n))||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!jr(n))}function vr(n){return!!x(n)&&("[object Function]"==(n=r(n))||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function yr(n){return"number"==typeof n&&n==m(n)}function br(n){return"number"==typeof n&&-1<n&&0==n%1&&n<=9007199254740991}function x(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function j(n){return null!=n&&"object"==typeof n}function xr(n){return"number"==typeof n||j(n)&&"[object Number]"==r(n)}function jr(n){return!(!j(n)||"[object Object]"!=r(n))&&(null===(n=ie(n))||"function"==typeof(n=B.call(n,"constructor")&&n.constructor)&&n instanceof n&&Jr.call(n)==ne)}function wr(n){return"string"==typeof n||!D(n)&&j(n)&&"[object String]"==r(n)}function w(n){return"symbol"==typeof n||j(n)&&"[object Symbol]"==r(n)}function mr(n){if(!n)return[];if(h(n))return(wr(n)?Xo:E)(n);if(se&&n[se]){n=n[se]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return("[object Map]"==(t=C(n))?Ho:"[object Set]"==t?Yo:Rr)(n)}function Ar(n){return n?(n=A(n))===ti||n===-ti?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function m(n){var t=(n=Ar(n))%1;return n==n?t?n-t:n:0}function Er(n){return n?Y(m(n),0,4294967295):0}function A(n){if("number"==typeof n)return n;if(w(n))return ri;if("string"!=typeof(n=x(n)?x(n="function"==typeof n.valueOf?n.valueOf():n)?n+"":n:n))return 0===n?n:+n;n=n.replace(Di,"");var t=Gi.test(n);return t||Ji.test(n)?ff(n.slice(2),t?2:8):Ki.test(n)?ri:+n}function kr(n){return tt(n,O(n))}function k(n){return null==n?"":a(n)}function Sr(n,t,r){return(n=null==n?ni:cn(n,t))===ni?r:n}function Or(n,t){return null!=n&&Ct(n,t,hn)}function S(n){return(h(n)?N:xn)(n)}function O(n){if(h(n))n=N(n,!0);else if(x(n)){var t,r=Nt(n),e=[];for(t in n)("constructor"!=t||!r&&B.call(n,t))&&e.push(t);n=e}else{if(t=[],null!=n)for(r in z(n))t.push(r);n=t}return n}function Ir(n,r){var t;return null==n?{}:(t=Do(Rt(n),function(n){return[n]}),r=l(r),On(n,t,function(n,t){return r(n,t[0])}))}function Rr(n){return null==n?[]:Ko(n,S(n))}function zr(n){return ho(k(n).toLowerCase())}function Wr(n){return(n=k(n))&&n.replace(Qi,gf).replace(tf,"")}function Br(n,t,r){return n=k(n),(t=r?ni:t)===ni?ef.test(n)?n.match(rf)||[]:n.match(Pi)||[]:n.match(t)||[]}function Lr(n){return function(){return n}}function I(n){return n}function Ur(n){return bn("function"==typeof n?n:v(n,1))}function Cr(e,t,n){var r=S(t),u=fn(t,r),o=(null!=n||x(t)&&(u.length||!r.length)||(n=t,t=e,e=this,u=fn(t,S(t))),!(x(n)&&"chain"in n&&!n.chain)),i=vr(e);return Bo(u,function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var n,t=this.__chain__;return o||t?(((n=e(this.__wrapped__)).__actions__=E(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n):r.apply(e,Mo([this.value()],arguments))})}),e}function Dr(){}function Mr(n){return $t(n)?Po(Gt(n)):(t=n,function(n){return cn(n,t)});var t}function Tr(){return[]}function $r(){return!1}var R=(n=null==n?ci:ai.defaults(ci.Object(),n,ai.pick(ci,uf))).Array,Fr=n.Date,Nr=n.Error,Pr=n.Function,Zr=n.Math,z=n.Object,qr=n.RegExp,Vr=n.String,W=n.TypeError,Kr=R.prototype,Gr=z.prototype,Hr=n["__core-js_shared__"],Jr=Pr.prototype.toString,B=Gr.hasOwnProperty,Yr=0,Qr=(ee=/[^.]+$/.exec(Hr&&Hr.keys&&Hr.keys.IE_PROTO||""))?"Symbol(src)_1."+ee:"",Xr=Gr.toString,ne=Jr.call(z),te=ci._,re=qr("^"+Jr.call(B).replace(ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=cf?n.Buffer:ni,t=n.Symbol,ue=n.Uint8Array,oe=ee?ee.g:ni,ie=ji(z.getPrototypeOf,z),fe=z.create,ce=Gr.propertyIsEnumerable,ae=Kr.splice,le=t?t.isConcatSpreadable:ni,se=t?t.iterator:ni,he=t?t.toStringTag:ni,pe=function(){try{var n=Ut(z,"defineProperty");return n({},"",{}),n}catch(n){}}(),_e=n.clearTimeout!==ci.clearTimeout&&n.clearTimeout,ge=Fr&&Fr.now!==ci.Date.now&&Fr.now,de=n.setTimeout!==ci.setTimeout&&n.setTimeout,ve=Zr.ceil,ye=Zr.floor,be=z.getOwnPropertySymbols,ee=ee?ee.isBuffer:ni,xe=n.isFinite,je=Kr.join,we=ji(z.keys,z),L=Zr.max,U=Zr.min,me=Fr.now,Ae=n.parseInt,Ee=Zr.random,ke=Kr.reverse,Fr=Ut(n,"DataView"),Se=Ut(n,"Map"),Oe=Ut(n,"Promise"),Ie=Ut(n,"Set"),n=Ut(n,"WeakMap"),Re=Ut(z,"create"),ze=n&&new n,We={},Be=Ht(Fr),Le=Ht(Se),Ue=Ht(Oe),Ce=Ht(Ie),De=Ht(n),t=t?t.prototype:ni,Me=t?t.valueOf:ni,Te=t?t.toString:ni,$e=function(n){return x(n)?fe?fe(n):(Fe.prototype=n,n=new Fe,Fe.prototype=ni,n):{}};function Fe(){}p.templateSettings={escape:Ri,evaluate:zi,interpolate:Wi,variable:"",imports:{_:p}},(p.prototype=o.prototype).constructor=p,(_.prototype=$e(o.prototype)).constructor=_,(g.prototype=$e(o.prototype)).constructor=g,M.prototype.clear=function(){this.__data__=Re?Re(null):{},this.size=0},M.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],this.size-=n?1:0,n},M.prototype.get=function(n){var t=this.__data__;return Re?"__lodash_hash_undefined__"===(n=t[n])?ni:n:B.call(t,n)?t[n]:ni},M.prototype.has=function(n){var t=this.__data__;return Re?t[n]!==ni:B.call(t,n)},M.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Re&&t===ni?"__lodash_hash_undefined__":t,this},T.prototype.clear=function(){this.__data__=[],this.size=0},T.prototype.delete=function(n){var t=this.__data__;return!((n=V(t,n))<0||(n==t.length-1?t.pop():ae.call(t,n,1),--this.size,0))},T.prototype.get=function(n){var t=this.__data__;return(n=V(t,n))<0?ni:t[n][1]},T.prototype.has=function(n){return-1<V(this.__data__,n)},T.prototype.set=function(n,t){var r=this.__data__,e=V(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},$.prototype.clear=function(){this.size=0,this.__data__={hash:new M,map:new(Se||T),string:new M}},$.prototype.delete=function(n){return n=Bt(this,n).delete(n),this.size-=n?1:0,n},$.prototype.get=function(n){return Bt(this,n).get(n)},$.prototype.has=function(n){return Bt(this,n).has(n)},$.prototype.set=function(n,t){var r=Bt(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},F.prototype.add=F.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},F.prototype.has=function(n){return this.__data__.has(n)},d.prototype.clear=function(){this.__data__=new T,this.size=0},d.prototype.delete=function(n){var t=this.__data__;return n=t.delete(n),this.size=t.size,n},d.prototype.get=function(n){return this.__data__.get(n)},d.prototype.has=function(n){return this.__data__.has(n)},d.prototype.set=function(n,t){var r=this.__data__;if(r instanceof T){var e=r.__data__;if(!Se||e.length<199)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new $(e)}return r.set(n,t),this.size=r.size,this};var Ne,Pe,Ze=ut(un),qe=ut(on,!0),Ve=ot(),Ke=ot(!0),Ge=ze?function(n,t){return ze.set(n,t),n}:I,t=pe?function(n,t){return pe(n,"toString",{configurable:!0,enumerable:!1,value:Lr(t),writable:!0})}:I,He=_e||function(n){return ci.clearTimeout(n)},Je=Ie&&1/Yo(new Ie([,-0]))[1]==ti?function(n){return new Ie(n)}:Dr,Ye=ze?function(n){return ze.get(n)}:Dr,Qe=be?function(t){return null==t?[]:(t=z(t),Lo(be(t),function(n){return ce.call(t,n)}))}:Tr,Xe=be?function(n){for(var t=[];n;)Mo(t,Qe(n)),n=ie(n);return t}:Tr,C=r,nu=((Fr&&"[object DataView]"!=C(new Fr(new ArrayBuffer(1)))||Se&&"[object Map]"!=C(new Se)||Oe&&"[object Promise]"!=C(Oe.resolve())||Ie&&"[object Set]"!=C(new Ie)||n&&"[object WeakMap]"!=C(new n))&&(C=function(n){var t=r(n);if(n=(n="[object Object]"==t?n.constructor:ni)?Ht(n):"")switch(n){case Be:return"[object DataView]";case Le:return"[object Map]";case Ue:return"[object Promise]";case Ce:return"[object Set]";case De:return"[object WeakMap]"}return t}),Hr?vr:$r),tu=Vt(Ge),ru=de||function(n,t){return ci.setTimeout(n,t)},eu=Vt(t),uu=(Ne=(_e=_r(function(n){var u=[];return 46===n.charCodeAt(0)&&u.push(""),n.replace(Ui,function(n,t,r,e){u.push(r?e.replace(Zi,"$1"):t||n)}),u},function(n){return 500===Ne.size&&Ne.clear(),n})).cache,_e),Fr=f(function(n,t){return b(n)?nn(n,c(t,1,b,!0)):[]}),Oe=f(function(n,t){var r=e(t);return b(r)&&(r=ni),b(n)?nn(n,c(t,1,b,!0),l(r,2)):[]}),n=f(function(n,t){var r=e(t);return b(r)&&(r=ni),b(n)?nn(n,c(t,1,b,!0),ni,r):[]}),Hr=f(function(n){var t=Do(n,qn);return t.length&&t[0]===n[0]?pn(t):[]}),de=f(function(n){var t=e(n),r=Do(n,qn);return t===e(r)?t=ni:r.pop(),r.length&&r[0]===n[0]?pn(r,l(t,2)):[]}),t=f(function(n){var t=e(n),r=Do(n,qn);return(t="function"==typeof t?t:ni)&&r.pop(),r.length&&r[0]===n[0]?pn(r,ni,t):[]}),_e=f(rr),ou=Ot(function(n,t){var r=null==n?0:n.length,e=J(n,t);return Rn(n,Do(t,function(n){return Tt(n,r)?+n:n}).sort(Qn)),e}),iu=f(function(n){return Tn(c(n,1,b,!0))}),fu=f(function(n){var t=e(n);return b(t)&&(t=ni),Tn(c(n,1,b,!0),l(t,2))}),cu=f(function(n){var t="function"==typeof(t=e(n))?t:ni;return Tn(c(n,1,b,!0),ni,t)}),au=f(function(n,t){return b(n)?nn(n,t):[]}),lu=f(function(n){return Pn(Lo(n,b))}),su=f(function(n){var t=e(n);return b(t)&&(t=ni),Pn(Lo(n,b),l(t,2))}),hu=f(function(n){var t="function"==typeof(t=e(n))?t:ni;return Pn(Lo(n,b),ni,t)}),pu=f(ur),_u=f(function(n){var t="function"==typeof(t=1<(t=n.length)?n[t-1]:ni)?(n.pop(),t):ni;return or(n,t)}),gu=Ot(function(t){function n(n){return J(n,t)}var r=t.length,e=r?t[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof g&&Tt(e)?((u=u.slice(e,+e+(r?1:0))).__actions__.push({func:fr,args:[n],thisArg:ni}),new _(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(ni),n})):this.thru(n)}),du=rt(function(n,t,r){B.call(n,r)?++n[r]:H(n,r,1)}),vu=lt(Qt),yu=lt(Xt),bu=rt(function(n,t,r){B.call(n,r)?n[r].push(t):H(n,r,[t])}),xu=f(function(n,t,r){var e=-1,u="function"==typeof t,o=h(n)?R(n.length):[];return Ze(n,function(n){o[++e]=u?Wo(t,n,r):_n(n,t,r)}),o}),ju=rt(function(n,t,r){H(n,r,t)}),wu=rt(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),mu=f(function(n,t){var r;return null==n?[]:(1<(r=t.length)&&s(n,t[0],t[1])?t=[]:2<r&&s(t[0],t[1],t[2])&&(t=[t[0]]),Sn(n,c(t,1),[]))}),Au=ge||function(){return ci.Date.now()},Eu=f(function(n,t,r){var e,u=1;return r.length&&(e=Jo(r,Wt(Eu)),u|=32),mt(n,u,t,r,e)}),ku=f(function(n,t,r){var e,u=3;return r.length&&(e=Jo(r,Wt(ku)),u|=32),mt(t,u,n,r,e)}),ge=f(function(n,t){return X(n,1,t)}),Su=f(function(n,t,r){return X(n,A(t)||0,r)}),Ou=(_r.Cache=$,f(function(e,u){var o=(u=1==u.length&&D(u[0])?Do(u[0],Vo(l())):Do(c(u,1),Vo(l()))).length;return f(function(n){for(var t=-1,r=U(n.length,o);++t<r;)n[t]=u[t].call(this,n[t]);return Wo(e,this,n)})})),Iu=f(function(n,t){return mt(n,32,ni,t,Jo(t,Wt(Iu)))}),Ru=f(function(n,t){return mt(n,64,ni,t,Jo(t,Wt(Ru)))}),zu=Ot(function(n,t){return mt(n,256,ni,ni,ni,t)}),Wu=bt(ln),Bu=bt(function(n,t){return t<=n}),Lu=gn(function(){return arguments}())?gn:function(n){return j(n)&&B.call(n,"callee")&&!ce.call(n,"callee")},D=R.isArray,Uu=af?Vo(af):function(n){return j(n)&&"[object ArrayBuffer]"==r(n)},Cu=ee||$r,ee=lf?Vo(lf):function(n){return j(n)&&"[object Date]"==r(n)},Du=sf?Vo(sf):function(n){return j(n)&&"[object Map]"==C(n)},Mu=hf?Vo(hf):function(n){return j(n)&&"[object RegExp]"==r(n)},Tu=pf?Vo(pf):function(n){return j(n)&&"[object Set]"==C(n)},$u=_f?Vo(_f):function(n){return j(n)&&br(n.length)&&!!ii[r(n)]},Fu=bt(jn),Nu=bt(function(n,t){return n<=t}),Pu=et(function(n,t){if(Nt(t)||h(t))tt(t,S(t),n);else for(var r in t)B.call(t,r)&&q(n,r,t[r])}),Zu=et(function(n,t){tt(t,O(t),n)}),qu=et(function(n,t,r,e){tt(t,O(t),n,e)}),Vu=et(function(n,t,r,e){tt(t,S(t),n,e)}),Ku=Ot(J),Gu=f(function(n,t){n=z(n);var r=-1,e=t.length,u=2<e?t[2]:ni;for(u&&s(t[0],t[1],u)&&(e=1);++r<e;)for(var o=O(u=t[r]),i=-1,f=o.length;++i<f;){var c=o[i],a=n[c];(a===ni||y(a,Gr[c])&&!B.call(n,c))&&(n[c]=u[c])}return n}),Hu=f(function(n){return n.push(ni,Et),Wo(no,ni,n)}),Ju=pt(function(n,t,r){n[t=null!=t&&"function"!=typeof t.toString?Xr.call(t):t]=r},Lr(I)),Yu=pt(function(n,t,r){null!=t&&"function"!=typeof t.toString&&(t=Xr.call(t)),B.call(n,t)?n[t].push(r):n[t]=[r]},l),Qu=f(_n),Xu=et(function(n,t,r){En(n,t,r)}),no=et(function(n,t,r,e){En(n,t,r,e)}),to=Ot(function(t,n){var r={};if(null!=t){var e=!1;n=Do(n,function(n){return n=Kn(n,t),e=e||1<n.length,n}),tt(t,Rt(t),r),e&&(r=v(r,7,kt));for(var u=n.length;u--;)$n(r,n[u])}return r}),ro=Ot(function(n,t){return null==n?{}:On(r=n,t,function(n,t){return Or(r,t)});var r}),eo=wt(S),uo=wt(O),oo=ft(function(n,t,r){return t=t.toLowerCase(),n+(r?zr(t):t)}),io=ft(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),fo=ft(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),co=it("toLowerCase"),ao=ft(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),lo=ft(function(n,t,r){return n+(r?" ":"")+ho(t)}),so=ft(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),ho=it("toUpperCase"),po=f(function(n,t){try{return Wo(n,ni,t)}catch(n){return dr(n)?n:new Nr(n)}}),_o=Ot(function(t,n){return Bo(n,function(n){n=Gt(n),H(t,n,Eu(t[n],t))}),t}),go=st(),vo=st(!0),yo=f(function(t,r){return function(n){return _n(n,t,r)}}),bo=f(function(t,r){return function(n){return _n(t,n,r)}}),xo=gt(Do),jo=gt(si),wo=gt($o),mo=yt(),Ao=yt(!0),Eo=_t(function(n,t){return n+t},0),ko=jt("ceil"),So=_t(function(n,t){return n/t},1),Oo=jt("floor"),Io=_t(function(n,t){return n*t},1),Ro=jt("round"),zo=_t(function(n,t){return n-t},0);return p.after=function(n,t){if("function"!=typeof t)throw new W("Expected a function");return n=m(n),function(){if(--n<1)return t.apply(this,arguments)}},p.ary=sr,p.assign=Pu,p.assignIn=Zu,p.assignInWith=qu,p.assignWith=Vu,p.at=Ku,p.before=hr,p.bind=Eu,p.bindAll=_o,p.bindKey=ku,p.castArray=function(){var n;return arguments.length?D(n=arguments[0])?n:[n]:[]},p.chain=ir,p.chunk=function(n,t,r){if(t=(r?s(n,t,r):t===ni)?1:L(m(t),0),!(r=null==n?0:n.length)||t<1)return[];for(var e=0,u=0,o=R(ve(r/t));e<r;)o[u++]=i(n,e,e+=t);return o},p.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var o=n[t];o&&(u[e++]=o)}return u},p.concat=function(){var n=arguments.length;if(!n)return[];for(var t=R(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return Mo(D(r)?E(r):[r],c(t,1))},p.cond=function(e){var u=null==e?0:e.length,t=l();return e=u?Do(e,function(n){if("function"!=typeof n[1])throw new W("Expected a function");return[t(n[0]),n[1]]}):[],f(function(n){for(var t=-1;++t<u;){var r=e[t];if(Wo(r[0],this,n))return Wo(r[1],this,n)}})},p.conforms=function(n){return t=v(n,1),r=S(t),function(n){return Q(n,t,r)};var t,r},p.constant=Lr,p.countBy=du,p.create=function(n,t){n=$e(n);return null==t?n:G(n,t)},p.curry=function n(t,r,e){return(t=mt(t,8,ni,ni,ni,ni,ni,r=e?ni:r)).placeholder=n.placeholder,t},p.curryRight=function n(t,r,e){return(t=mt(t,16,ni,ni,ni,ni,ni,r=e?ni:r)).placeholder=n.placeholder,t},p.debounce=pr,p.defaults=Gu,p.defaultsDeep=Hu,p.defer=ge,p.delay=Su,p.difference=Fr,p.differenceBy=Oe,p.differenceWith=n,p.drop=function(n,t,r){var e=null==n?0:n.length;return e?i(n,(t=r||t===ni?1:m(t))<0?0:t,e):[]},p.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?i(n,0,(t=e-(t=r||t===ni?1:m(t)))<0?0:t):[]},p.dropRightWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!0,!0):[]},p.dropWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!0):[]},p.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&"number"!=typeof r&&s(n,t,r)&&(r=0,e=u),u=n.length,(r=m(r))<0&&(r=u<-r?0:u+r),(e=e===ni||u<e?u:m(e))<0&&(e+=u),e=e<r?0:Er(e);r<e;)n[r++]=t;return n},p.filter=function(n,t){return(D(n)?Lo:en)(n,l(t,3))},p.flatMap=function(n,t){return c(lr(n,t),1)},p.flatMapDeep=function(n,t){return c(lr(n,t),ti)},p.flatMapDepth=function(n,t,r){return r=r===ni?1:m(r),c(lr(n,t),r)},p.flatten=nr,p.flattenDeep=function(n){return null!=n&&n.length?c(n,ti):[]},p.flattenDepth=function(n,t){return null!=n&&n.length?c(n,t=t===ni?1:m(t)):[]},p.flip=function(n){return mt(n,512)},p.flow=go,p.flowRight=vo,p.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},p.functions=function(n){return null==n?[]:fn(n,S(n))},p.functionsIn=function(n){return null==n?[]:fn(n,O(n))},p.groupBy=bu,p.initial=function(n){return null!=n&&n.length?i(n,0,-1):[]},p.intersection=Hr,p.intersectionBy=de,p.intersectionWith=t,p.invert=Ju,p.invertBy=Yu,p.invokeMap=xu,p.iteratee=Ur,p.keyBy=ju,p.keys=S,p.keysIn=O,p.map=lr,p.mapKeys=function(n,e){var u={};return e=l(e,3),un(n,function(n,t,r){H(u,e(n,t,r),n)}),u},p.mapValues=function(n,e){var u={};return e=l(e,3),un(n,function(n,t,r){H(u,t,e(n,t,r))}),u},p.matches=function(n){return mn(v(n,1))},p.matchesProperty=function(n,t){return An(n,v(t,1))},p.memoize=_r,p.merge=Xu,p.mergeWith=no,p.method=yo,p.methodOf=bo,p.mixin=Cr,p.negate=gr,p.nthArg=function(t){return t=m(t),f(function(n){return kn(n,t)})},p.omit=to,p.omitBy=function(n,t){return Ir(n,gr(l(t)))},p.once=function(n){return hr(2,n)},p.orderBy=function(n,t,r,e){return null==n?[]:Sn(n,t=D(t)?t:null==t?[]:[t],r=D(r=e?ni:r)?r:null==r?[]:[r])},p.over=xo,p.overArgs=Ou,p.overEvery=jo,p.overSome=wo,p.partial=Iu,p.partialRight=Ru,p.partition=wu,p.pick=ro,p.pickBy=Ir,p.property=Mr,p.propertyOf=function(t){return function(n){return null==t?ni:cn(t,n)}},p.pull=_e,p.pullAll=rr,p.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?In(n,t,l(r,2)):n},p.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?In(n,t,ni,r):n},p.pullAt=ou,p.range=mo,p.rangeRight=Ao,p.rearg=zu,p.reject=function(n,t){return(D(n)?Lo:en)(n,gr(l(t,3)))},p.remove=function(n,t){var r=[];if(n&&n.length){var e=-1,u=[],o=n.length;for(t=l(t,3);++e<o;){var i=n[e];t(i,e,n)&&(r.push(i),u.push(e))}Rn(n,u)}return r},p.rest=function(n,t){if("function"!=typeof n)throw new W("Expected a function");return f(n,t=t===ni?t:m(t))},p.reverse=er,p.sampleSize=function(n,t,r){return t=(r?s(n,t,r):t===ni)?1:m(t),(D(n)?function(n,t){return Kt(E(n),Y(t,0,n.length))}:function(n,t){return Kt(n=Rr(n),Y(t,0,n.length))})(n,t)},p.set=function(n,t,r){return null==n?n:Bn(n,t,r)},p.setWith=function(n,t,r,e){return e="function"==typeof e?e:ni,null==n?n:Bn(n,t,r,e)},p.shuffle=function(n){return(D(n)?function(n){return Kt(E(n))}:function(n){return Kt(Rr(n))})(n)},p.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r=r&&"number"!=typeof r&&s(n,t,r)?(t=0,e):(t=null==t?0:m(t),r===ni?e:m(r)),i(n,t,r)):[]},p.sortBy=mu,p.sortedUniq=function(n){return n&&n.length?Dn(n):[]},p.sortedUniqBy=function(n,t){return n&&n.length?Dn(n,l(t,2)):[]},p.split=function(n,t,r){return r&&"number"!=typeof r&&s(n,t,r)&&(t=r=ni),(r=r===ni?4294967295:r>>>0)?(n=k(n))&&("string"==typeof t||null!=t&&!Mu(t))&&!(t=a(t))&&oi.test(n)?Gn(Xo(n),0,r):n.split(t,r):[]},p.spread=function(r,e){if("function"!=typeof r)throw new W("Expected a function");return e=null==e?0:L(m(e),0),f(function(n){var t=n[e];return n=Gn(n,0,e),t&&Mo(n,t),Wo(r,this,n)})},p.tail=function(n){var t=null==n?0:n.length;return t?i(n,1,t):[]},p.take=function(n,t,r){return n&&n.length?i(n,0,(t=r||t===ni?1:m(t))<0?0:t):[]},p.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?i(n,(t=e-(t=r||t===ni?1:m(t)))<0?0:t,e):[]},p.takeRightWhile=function(n,t){return n&&n.length?Fn(n,l(t,3),!1,!0):[]},p.takeWhile=function(n,t){return n&&n.length?Fn(n,l(t,3)):[]},p.tap=function(n,t){return t(n),n},p.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new W("Expected a function");return x(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),pr(n,t,{leading:e,maxWait:t,trailing:u})},p.thru=fr,p.toArray=mr,p.toPairs=eo,p.toPairsIn=uo,p.toPath=function(n){return D(n)?Do(n,Gt):w(n)?[n]:E(uu(k(n)))},p.toPlainObject=kr,p.transform=function(n,e,u){var t,r=D(n),o=r||Cu(n)||$u(n);return e=l(e,4),null==u&&(t=n&&n.constructor,u=o?r?new t:[]:x(n)&&vr(t)?$e(ie(n)):{}),(o?Bo:un)(n,function(n,t,r){return e(u,n,t,r)}),u},p.unary=function(n){return sr(n,1)},p.union=iu,p.unionBy=fu,p.unionWith=cu,p.uniq=function(n){return n&&n.length?Tn(n):[]},p.uniqBy=function(n,t){return n&&n.length?Tn(n,l(t,2)):[]},p.uniqWith=function(n,t){return t="function"==typeof t?t:ni,n&&n.length?Tn(n,ni,t):[]},p.unset=function(n,t){return null==n||$n(n,t)},p.unzip=ur,p.unzipWith=or,p.update=function(n,t,r){return null==n?n:Bn(n,t,Vn(r)(cn(n,t)),void 0)},p.updateWith=function(n,t,r,e){return e="function"==typeof e?e:ni,n=null!=n?Bn(n,t,Vn(r)(cn(n,t)),e):n},p.values=Rr,p.valuesIn=function(n){return null==n?[]:Ko(n,O(n))},p.without=au,p.words=Br,p.wrap=function(n,t){return Iu(Vn(t),n)},p.xor=lu,p.xorBy=su,p.xorWith=hu,p.zip=pu,p.zipObject=function(n,t){return Zn(n||[],t||[],q)},p.zipObjectDeep=function(n,t){return Zn(n||[],t||[],Bn)},p.zipWith=_u,p.entries=eo,p.entriesIn=uo,p.extend=Zu,p.extendWith=qu,Cr(p,p),p.add=Eo,p.attempt=po,p.camelCase=oo,p.capitalize=zr,p.ceil=ko,p.clamp=function(n,t,r){return r===ni&&(r=t,t=ni),r!==ni&&(r=(r=A(r))==r?r:0),t!==ni&&(t=(t=A(t))==t?t:0),Y(A(n),t,r)},p.clone=function(n){return v(n,4)},p.cloneDeep=function(n){return v(n,5)},p.cloneDeepWith=function(n,t){return v(n,5,t="function"==typeof t?t:ni)},p.cloneWith=function(n,t){return v(n,4,t="function"==typeof t?t:ni)},p.conformsTo=function(n,t){return null==t||Q(n,t,S(t))},p.deburr=Wr,p.defaultTo=function(n,t){return null==n||n!=n?t:n},p.divide=So,p.endsWith=function(n,t,r){n=k(n),t=a(t);var e=n.length,e=r=r===ni?e:Y(m(r),0,e);return 0<=(r-=t.length)&&n.slice(r,e)==t},p.eq=y,p.escape=function(n){return(n=k(n))&&Ii.test(n)?n.replace(Si,df):n},p.escapeRegExp=function(n){return(n=k(n))&&Ci.test(n)?n.replace(ei,"\\$&"):n},p.every=function(n,t,r){return(D(n)?si:tn)(n,l(t=r&&s(n,t,r)?ni:t,3))},p.find=vu,p.findIndex=Qt,p.findKey=function(n,t){return pi(n,l(t,3),un)},p.findLast=yu,p.findLastIndex=Xt,p.findLastKey=function(n,t){return pi(n,l(t,3),on)},p.floor=Oo,p.forEach=cr,p.forEachRight=ar,p.forIn=function(n,t){return null==n?n:Ve(n,l(t,3),O)},p.forInRight=function(n,t){return null==n?n:Ke(n,l(t,3),O)},p.forOwn=function(n,t){return n&&un(n,l(t,3))},p.forOwnRight=function(n,t){return n&&on(n,l(t,3))},p.get=Sr,p.gt=Wu,p.gte=Bu,p.has=function(n,t){return null!=n&&Ct(n,t,sn)},p.hasIn=Or,p.head=tr,p.identity=I,p.includes=function(n,t,r,e){return n=h(n)?n:Rr(n),r=r&&!e?m(r):0,e=n.length,r<0&&(r=L(e+r,0)),wr(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<No(n,t,r)},p.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?No(n,t,r=(r=null==r?0:m(r))<0?L(e+r,0):r):-1},p.inRange=function(n,t,r){return t=Ar(t),r===ni?(r=t,t=0):r=Ar(r),(n=A(n))>=U(t,r)&&n<L(t,r)},p.invoke=Qu,p.isArguments=Lu,p.isArray=D,p.isArrayBuffer=Uu,p.isArrayLike=h,p.isArrayLikeObject=b,p.isBoolean=function(n){return!0===n||!1===n||j(n)&&"[object Boolean]"==r(n)},p.isBuffer=Cu,p.isDate=ee,p.isElement=function(n){return j(n)&&1===n.nodeType&&!jr(n)},p.isEmpty=function(n){if(null!=n){if(h(n)&&(D(n)||"string"==typeof n||"function"==typeof n.splice||Cu(n)||$u(n)||Lu(n)))return!n.length;var t,r=C(n);if("[object Map]"==r||"[object Set]"==r)return!n.size;if(Nt(n))return!xn(n).length;for(t in n)if(B.call(n,t))return!1}return!0},p.isEqual=function(n,t){return dn(n,t)},p.isEqualWith=function(n,t,r){var e=(r="function"==typeof r?r:ni)?r(n,t):ni;return e===ni?dn(n,t,ni,r):!!e},p.isError=dr,p.isFinite=function(n){return"number"==typeof n&&xe(n)},p.isFunction=vr,p.isInteger=yr,p.isLength=br,p.isMap=Du,p.isMatch=function(n,t){return n===t||vn(n,t,Lt(t))},p.isMatchWith=function(n,t,r){return r="function"==typeof r?r:ni,vn(n,t,Lt(t),r)},p.isNaN=function(n){return xr(n)&&n!=+n},p.isNative=function(n){if(nu(n))throw new Nr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yn(n)},p.isNil=function(n){return null==n},p.isNull=function(n){return null===n},p.isNumber=xr,p.isObject=x,p.isObjectLike=j,p.isPlainObject=jr,p.isRegExp=Mu,p.isSafeInteger=function(n){return yr(n)&&-9007199254740991<=n&&n<=9007199254740991},p.isSet=Tu,p.isString=wr,p.isSymbol=w,p.isTypedArray=$u,p.isUndefined=function(n){return n===ni},p.isWeakMap=function(n){return j(n)&&"[object WeakMap]"==C(n)},p.isWeakSet=function(n){return j(n)&&"[object WeakSet]"==r(n)},p.join=function(n,t){return null==n?"":je.call(n,t)},p.kebabCase=io,p.last=e,p.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==ni&&(u=(u=m(r))<0?L(e+u,0):U(u,e-1)),t==t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=Fo(n,gi,u,!0);return n},p.lowerCase=fo,p.lowerFirst=co,p.lt=Fu,p.lte=Nu,p.max=function(n){return n&&n.length?rn(n,I,ln):ni},p.maxBy=function(n,t){return n&&n.length?rn(n,l(t,2),ln):ni},p.mean=function(n){return di(n,I)},p.meanBy=function(n,t){return di(n,l(t,2))},p.min=function(n){return n&&n.length?rn(n,I,jn):ni},p.minBy=function(n,t){return n&&n.length?rn(n,l(t,2),jn):ni},p.stubArray=Tr,p.stubFalse=$r,p.stubObject=function(){return{}},p.stubString=function(){return""},p.stubTrue=function(){return!0},p.multiply=Io,p.nth=function(n,t){return n&&n.length?kn(n,m(t)):ni},p.noConflict=function(){return ci._===this&&(ci._=te),this},p.noop=Dr,p.now=Au,p.pad=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return!t||t<=e?n:dt(ye(t=(t-e)/2),r)+n+dt(ve(t),r)},p.padEnd=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return t&&e<t?n+dt(t-e,r):n},p.padStart=function(n,t,r){n=k(n);var e=(t=m(t))?Qo(n):0;return t&&e<t?dt(t-e,r)+n:n},p.parseInt=function(n,t,r){return t=r||null==t?0:t&&+t,Ae(k(n).replace(Mi,""),t||0)},p.random=function(n,t,r){var e;return r&&"boolean"!=typeof r&&s(n,t,r)&&(t=r=ni),r===ni&&("boolean"==typeof t?(r=t,t=ni):"boolean"==typeof n&&(r=n,n=ni)),n===ni&&t===ni?(n=0,t=1):(n=Ar(n),t===ni?(t=n,n=0):t=Ar(t)),t<n&&(e=n,n=t,t=e),r||n%1||t%1?(r=Ee(),U(n+r*(t-n+of("1e-"+((r+"").length-1))),t)):zn(n,t)},p.reduce=function(n,t,r){var e=D(n)?To:vi,u=arguments.length<3;return e(n,l(t,4),r,u,Ze)},p.reduceRight=function(n,t,r){var e=D(n)?hi:vi,u=arguments.length<3;return e(n,l(t,4),r,u,qe)},p.repeat=function(n,t,r){return t=(r?s(n,t,r):t===ni)?1:m(t),Wn(k(n),t)},p.replace=function(){var n=arguments,t=k(n[0]);return n.length<3?t:t.replace(n[1],n[2])},p.result=function(n,t,r){var e=-1,u=(t=Kn(t,n)).length;for(u||(u=1,n=ni);++e<u;){var o=null==n?ni:n[Gt(t[e])];o===ni&&(e=u,o=r),n=vr(o)?o.call(n):o}return n},p.round=Ro,p.runInContext=u,p.sample=function(n){return(D(n)?P:function(n){return P(Rr(n))})(n)},p.size=function(n){var t;return null==n?0:h(n)?wr(n)?Qo(n):n.length:"[object Map]"==(t=C(n))||"[object Set]"==t?n.size:xn(n).length},p.snakeCase=ao,p.some=function(n,t,r){return(D(n)?$o:Ln)(n,l(t=r&&s(n,t,r)?ni:t,3))},p.sortedIndex=function(n,t){return Un(n,t)},p.sortedIndexBy=function(n,t,r){return Cn(n,t,l(r,2))},p.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Un(n,t);if(e<r&&y(n[e],t))return e}return-1},p.sortedLastIndex=function(n,t){return Un(n,t,!0)},p.sortedLastIndexBy=function(n,t,r){return Cn(n,t,l(r,2),!0)},p.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Un(n,t,!0)-1;if(y(n[r],t))return r}return-1},p.startCase=lo,p.startsWith=function(n,t,r){return n=k(n),r=null==r?0:Y(m(r),0,n.length),t=a(t),n.slice(r,r+t.length)==t},p.subtract=zo,p.sum=function(n){return n&&n.length?Zo(n,I):0},p.sumBy=function(n,t){return n&&n.length?Zo(n,l(t,2)):0},p.template=function(i,n,t){var r=p.templateSettings;t&&s(i,n,t)&&(n=ni),i=k(i),n=qu({},n,r,At);var f,c,e=S(t=qu({},n.imports,r.imports,At)),u=Ko(t,e),a=0,l=(t=n.interpolate||ui,"__p+='"),o=(t=qr((n.escape||ui).source+"|"+t.source+"|"+(t===Wi?qi:ui).source+"|"+(n.evaluate||ui).source+"|$","g"),"sourceURL"in n?"//# sourceURL="+n.sourceURL+"\n":"");if(i.replace(t,function(n,t,r,e,u,o){return r=r||e,l+=i.slice(a,o).replace(Xi,xi),t&&(f=!0,l+="'+__e("+t+")+'"),u&&(c=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),a=o+n.length,n}),l+="';",(n=n.variable)||(l="with(obj){"+l+"}"),l=(c?l.replace(mi,""):l).replace(Ai,"$1").replace(Ei,"$1;"),l="function("+(n||"obj")+"){"+(n?"":"obj||(obj={});")+"var __t,__p=''"+(f?",__e=_.escape":"")+(c?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",(n=po(function(){return Pr(e,o+"return "+l).apply(ni,u)})).source=l,dr(n))throw n;return n},p.times=function(n,t){if((n=m(n))<1||9007199254740991<n)return[];var r=4294967295,e=U(n,4294967295);for(n-=4294967295,e=qo(e,t=l(t));++r<n;)t(r);return e},p.toFinite=Ar,p.toInteger=m,p.toLength=Er,p.toLower=function(n){return k(n).toLowerCase()},p.toNumber=A,p.toSafeInteger=function(n){return n?Y(m(n),-9007199254740991,9007199254740991):0===n?n:0},p.toString=k,p.toUpper=function(n){return k(n).toUpperCase()},p.trim=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Di,""):n&&(t=a(t))?Gn(n=Xo(n),t=yi(n,r=Xo(t)),r=bi(n,r)+1).join(""):n},p.trimEnd=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Ti,""):n&&(t=a(t))?Gn(n=Xo(n),0,t=bi(n,Xo(t))+1).join(""):n},p.trimStart=function(n,t,r){return(n=k(n))&&(r||t===ni)?n.replace(Mi,""):n&&(t=a(t))?Gn(n=Xo(n),t=yi(n,Xo(t))).join(""):n},p.truncate=function(n,t){var r,e,u=30,o="...",t=(x(t)&&(r="separator"in t?t.separator:r,u="length"in t?m(t.length):u,o="omission"in t?a(t.omission):o),(n=k(n)).length);if((t=oi.test(n)?(e=Xo(n)).length:t)<=u)return n;if((t=u-Qo(o))<1)return o;if(u=e?Gn(e,0,t).join(""):n.slice(0,t),r!==ni)if(e&&(t+=u.length-t),Mu(r)){if(n.slice(t).search(r)){var i=u;for((r=r.global?r:qr(r.source,k(Vi.exec(r))+"g")).lastIndex=0;e=r.exec(i);)var f=e.index;u=u.slice(0,f===ni?t:f)}}else n.indexOf(a(r),t)!=t&&-1<(r=u.lastIndexOf(r))&&(u=u.slice(0,r));return u+o},p.unescape=function(n){return(n=k(n))&&Oi.test(n)?n.replace(ki,vf):n},p.uniqueId=function(n){var t=++Yr;return k(n)+t},p.upperCase=so,p.upperFirst=ho,p.each=cr,p.eachRight=ar,p.first=tr,Cr(p,(Pe={},un(p,function(n,t){B.call(p.prototype,t)||(Pe[t]=n)}),Pe),{chain:!1}),p.VERSION="4.17.10",Bo("bind bindKey curry curryRight partial partialRight".split(" "),function(n){p[n].placeholder=p}),Bo(["drop","take"],function(r,e){g.prototype[r]=function(n){n=n===ni?1:L(m(n),0);var t=this.__filtered__&&!e?new g(this):this.clone();return t.__filtered__?t.__takeCount__=U(n,t.__takeCount__):t.__views__.push({size:U(n,4294967295),type:r+(t.__dir__<0?"Right":"")}),t},g.prototype[r+"Right"]=function(n){return this.reverse()[r](n).reverse()}}),Bo(["filter","map","takeWhile"],function(n,t){var r=t+1,e=1==r||3==r;g.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:l(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),Bo(["head","last"],function(n,t){var r="take"+(t?"Right":"");g.prototype[n]=function(){return this[r](1).value()[0]}}),Bo(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");g.prototype[n]=function(){return this.__filtered__?new g(this):this[r](1)}}),g.prototype.compact=function(){return this.filter(I)},g.prototype.find=function(n){return this.filter(n).head()},g.prototype.findLast=function(n){return this.reverse().find(n)},g.prototype.invokeMap=f(function(t,r){return"function"==typeof t?new g(this):this.map(function(n){return _n(n,t,r)})}),g.prototype.reject=function(n){return this.filter(gr(l(n)))},g.prototype.slice=function(n,t){n=m(n);var r=this;return r.__filtered__&&(0<n||t<0)?new g(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),r=t!==ni?(t=m(t))<0?r.dropRight(-t):r.take(t-n):r)},g.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},g.prototype.toArray=function(){return this.take(4294967295)},un(g.prototype,function(c,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),s=p[l?"take"+("last"==n?"Right":""):n],h=l||/^find/.test(n);s&&(p.prototype[n]=function(){function n(n){return n=s.apply(p,Mo([n],r)),l&&i?n[0]:n}var t=this.__wrapped__,r=l?[1]:arguments,e=t instanceof g,u=r[0],o=e||D(t),i=(o&&a&&"function"==typeof u&&1!=u.length&&(e=o=!1),this.__chain__),f=!!this.__actions__.length,u=h&&!i,e=e&&!f;return!h&&o?(t=e?t:new g(this),(t=c.apply(t,r)).__actions__.push({func:fr,args:[n],thisArg:ni}),new _(t,i)):u&&e?c.apply(this,r):(t=this.thru(n),u?l?t.value()[0]:t.value():t)})}),Bo("pop push shift sort splice unshift".split(" "),function(n){var r=Kr[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:pop|shift)$/.test(n);p.prototype[n]=function(){var n,t=arguments;return u&&!this.__chain__?(n=this.value(),r.apply(D(n)?n:[],t)):this[e](function(n){return r.apply(D(n)?n:[],t)})}}),un(g.prototype,function(n,t){var r,e=p[t];e&&(r=e.name+"",(We[r]||(We[r]=[])).push({name:t,func:e}))}),We[ht(ni,2).name]=[{name:"wrapper",func:ni}],g.prototype.clone=function(){var n=new g(this.__wrapped__);return n.__actions__=E(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=E(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=E(this.__views__),n},g.prototype.reverse=function(){var n;return this.__filtered__?((n=new g(this)).__dir__=-1,n.__filtered__=!0):(n=this.clone()).__dir__*=-1,n},g.prototype.value=function(){for(var n=this.__wrapped__.value(),t=this.__dir__,r=D(n),e=t<0,u=r?n.length:0,o=u,i=this.__views__,f=0,c=-1,a=i.length;++c<a;){var l=i[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":o-=s;break;case"take":o=U(o,f+s);break;case"takeRight":f=L(f,o-s)}}if(i=(o={start:f,end:o}).start,o=(f=o.end)-i,i=e?f:i-1,c=(f=this.__iteratees__).length,a=0,l=U(o,this.__takeCount__),!r||!e&&u==o&&l==o)return Nn(n,this.__actions__);r=[];n:for(;o--&&a<l;){for(e=-1,u=n[i+=t];++e<c;){var s=(h=f[e]).type,h=(0,h.iteratee)(u);if(2==s)u=h;else if(!h){if(1==s)continue n;break n}}r[a++]=u}return r},p.prototype.at=gu,p.prototype.chain=function(){return ir(this)},p.prototype.commit=function(){return new _(this.value(),this.__chain__)},p.prototype.next=function(){this.__values__===ni&&(this.__values__=mr(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?ni:this.__values__[this.__index__++]}},p.prototype.plant=function(n){for(var t,r=this;r instanceof o;)var e=Yt(r),u=(e.__index__=0,e.__values__=ni,t?u.__wrapped__=e:t=e,e),r=r.__wrapped__;return u.__wrapped__=n,t},p.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof g?((n=(n=this.__actions__.length?new g(this):n).reverse()).__actions__.push({func:fr,args:[er],thisArg:ni}),new _(n,this.__chain__)):this.thru(er)},p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=function(){return Nn(this.__wrapped__,this.__actions__)},p.prototype.first=p.prototype.head,se&&(p.prototype[se]=function(){return this}),p}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ci._=ai,define(function(){return ai})):e?((e.exports=ai)._=ai,r._=ai):ci._=ai}.call(this);
/**
 * gridstack.js 0.4.0
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2018 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(t){if("function"==typeof define&&define.amd)define(["jquery","lodash"],t);else{if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(t){}try{_=require("lodash")}catch(t){}}t(jQuery,_)}}(function(g,h){function t(t,e,i){function o(){return console.warn("gridstack.js: Function `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+i+"`. It will be **completely** removed in v1.0."),t.apply(this,arguments)}return o.prototype=t.prototype,o}function l(t,e){console.warn("gridstack.js: Option `"+t+"` is deprecated as of v0.2.5 and has been replaced with `"+e+"`. It will be **completely** removed in v1.0.")}var e=window,c={isIntercepted:function(t,e){return!(t.x+t.width<=e.x||e.x+e.width<=t.x||t.y+t.height<=e.y||e.y+e.height<=t.y)},sort:function(t,e,i){return i=i||h.chain(t).map(function(t){return t.x+t.width}).max().value(),e=-1!=e?1:-1,h.sortBy(t,[function(t){return e*(t.x+t.y*i)}])},createStylesheet:function(t){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.setAttribute("data-gs-style-id",t),e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet},removeStylesheet:function(t){g("STYLE[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(t,e,i,o){"function"==typeof t.insertRule?t.insertRule(e+"{"+i+"}",o):"function"==typeof t.addRule&&t.addRule(e,i,o)},toBool:function(t){return"boolean"==typeof t?t:"string"==typeof t?!(""===(t=t.toLowerCase())||"no"==t||"false"==t||"0"==t):Boolean(t)},_collisionNodeCheck:function(t){return t!=this.node&&c.isIntercepted(t,this.nn)},_didCollide:function(t){return c.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},t)},_isAddNodeIntercepted:function(t){return c.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},t)},parseHeight:function(t){var e="px";if(t&&h.isString(t)){var i=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!i)throw new Error("Invalid height");e=i[2]||"px",t=parseFloat(i[1])}return{height:t,unit:e}},removePositioningStyles:function(t){t=t[0].style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")},getScrollParent:function(t){t=null==t?null:t.scrollHeight>t.clientHeight?t:c.getScrollParent(t.parentNode);return t},updateScrollPosition:function(t,e,i){var o,a,s,r,n=t.getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight;(n.top<0||n.bottom>d)&&(o=n.bottom-d,a=n.top,r=(s=c.getScrollParent(t)).scrollTop,null!=s)&&(n.top<0&&i<0?t.offsetHeight>d?s.scrollTop+=i:s.scrollTop+=Math.abs(a)>Math.abs(i)?i:a:0<i&&(t.offsetHeight>d?s.scrollTop+=i:s.scrollTop+=i<o?i:o),e.position.top+=s.scrollTop-r)}};function p(t){this.grid=t}c.is_intercepted=t(c.isIntercepted,"is_intercepted","isIntercepted"),c.create_stylesheet=t(c.createStylesheet,"create_stylesheet","createStylesheet"),c.remove_stylesheet=t(c.removeStylesheet,"remove_stylesheet","removeStylesheet"),c.insert_css_rule=t(c.insertCSSRule,"insert_css_rule","insertCSSRule"),p.registeredPlugins=[],p.registerPlugin=function(t){p.registeredPlugins.push(t)},p.prototype.resizable=function(t,e){return this},p.prototype.draggable=function(t,e){return this},p.prototype.droppable=function(t,e){return this},p.prototype.isDroppable=function(t){return!1},p.prototype.on=function(t,e,i){return this};function _(t,e,i,o,a){this.width=t,this.float=i||!1,this.height=o||0,this.nodes=a||[],this.onchange=e||function(){},this._updateCounter=0,this._float=this.float,this._addedNodes=[],this._removedNodes=[]}function i(t,e){var i,o,a,s,r,n,d=this,t=(e=e||{},this.container=g(t),void 0!==e.handle_class&&(e.handleClass=e.handle_class,l("handle_class","handleClass")),void 0!==e.item_class&&(e.itemClass=e.item_class,l("item_class","itemClass")),void 0!==e.placeholder_class&&(e.placeholderClass=e.placeholder_class,l("placeholder_class","placeholderClass")),void 0!==e.placeholder_text&&(e.placeholderText=e.placeholder_text,l("placeholder_text","placeholderText")),void 0!==e.cell_height&&(e.cellHeight=e.cell_height,l("cell_height","cellHeight")),void 0!==e.vertical_margin&&(e.verticalMargin=e.vertical_margin,l("vertical_margin","verticalMargin")),void 0!==e.min_width&&(e.minWidth=e.min_width,l("min_width","minWidth")),void 0!==e.static_grid&&(e.staticGrid=e.static_grid,l("static_grid","staticGrid")),void 0!==e.is_nested&&(e.isNested=e.is_nested,l("is_nested","isNested")),void 0!==e.always_show_resize_handle&&(e.alwaysShowResizeHandle=e.always_show_resize_handle,l("always_show_resize_handle","alwaysShowResizeHandle")),e.itemClass=e.itemClass||"grid-stack-item",0<this.container.closest("."+e.itemClass).length);this.opts=h.defaults(e||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:e.alwaysShowResizeHandle||!1,resizable:h.defaults(e.resizable||{},{autoHide:!e.alwaysShowResizeHandle,handles:"se"}),draggable:h.defaults(e.draggable||{},{handle:(e.handleClass?"."+e.handleClass:e.handle||"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:e.disableDrag||!1,disableResize:e.disableResize||!1,rtl:"auto",removable:!1,removableOptions:h.defaults(e.removableOptions||{},{accept:"."+e.itemClass}),removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",disableOneColumnMode:e.disableOneColumnMode||!1,oneColumnModeClass:e.oneColumnModeClass||"grid-stack-one-column-mode",ddPlugin:null}),!1===this.opts.ddPlugin?this.opts.ddPlugin=p:null===this.opts.ddPlugin&&(this.opts.ddPlugin=h.first(p.registeredPlugins)||p),this.dd=new this.opts.ddPlugin(this),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.container.css("direction")),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=t,(o="auto"===this.opts.cellHeight)?d.cellHeight(d.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),t&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new _(this.opts.width,function(t,e){e=void 0===e||e;var i=0;h.each(this.nodes,function(t){i=Math.max(i,t.y+t.height)}),h.each(t,function(t){e&&null===t._id?t.el&&t.el.remove():t.el.attr("data-gs-x",t.x).attr("data-gs-y",t.y).attr("data-gs-width",t.width).attr("data-gs-height",t.height)}),d._updateStyles(i+10)},this.opts.float,this.opts.height),this.opts.auto&&(a=[],(s=this).container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,e){e=g(e),a.push({el:e,i:parseInt(e.attr("data-gs-x"))+parseInt(e.attr("data-gs-y"))*s.opts.width})}),h.chain(a).sortBy(function(t){return t.i}).each(function(t){d._prepareElement(t.el)}).value()),this.setAnimation(this.opts.animate),this.placeholder=g('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=h.throttle(function(){d.cellHeight(d.cellWidth(),!1)},100),this.onResizeHandler=function(){o&&d._updateHeightsOnResize(),d._isOneColumnMode()&&!d.opts.disableOneColumnMode?i||(d.container.addClass(d.opts.oneColumnModeClass),i=!0,d.grid._sortNodes(),h.each(d.grid.nodes,function(t){d.container.append(t.el),d.opts.staticGrid||(d.dd.draggable(t.el,"disable"),d.dd.resizable(t.el,"disable"),t.el.trigger("resize"))})):i&&(d.container.removeClass(d.opts.oneColumnModeClass),i=!1,d.opts.staticGrid||h.each(d.grid.nodes,function(t){t.noMove||d.opts.disableDrag||d.dd.draggable(t.el,"enable"),t.noResize||d.opts.disableResize||d.dd.resizable(t.el,"enable"),t.el.trigger("resize")}))},g(window).resize(this.onResizeHandler),this.onResizeHandler(),d.opts.staticGrid||"string"!=typeof d.opts.removable||(e=g(d.opts.removable),this.dd.isDroppable(e)||this.dd.droppable(e,d.opts.removableOptions),this.dd.on(e,"dropover",function(t,e){e=g(e.draggable);e.data("_gridstack_node")._grid===d&&(e.data("inTrashZone",!0),d._setupRemovingTimeout(e))}).on(e,"dropout",function(t,e){e=g(e.draggable);e.data("_gridstack_node")._grid===d&&(e.data("inTrashZone",!1),d._clearRemovingTimeout(e))})),!d.opts.staticGrid&&d.opts.acceptWidgets&&(r=null,n=function(t,e){var i=r,o=i.data("_gridstack_node"),t=d.getCellFromPixel({left:t.pageX,top:t.pageY},!0),a=Math.max(0,t.x),t=Math.max(0,t.y);o._added||(o._added=!0,o.el=i,o.autoPosition=!0,o.x=a,o.y=t,d.grid.cleanNodes(),d.grid.beginUpdate(o),d.grid.addNode(o),d.container.append(d.placeholder),d.placeholder.attr("data-gs-x",o.x).attr("data-gs-y",o.y).attr("data-gs-width",o.width).attr("data-gs-height",o.height).show(),o.el=d.placeholder,o._beforeDragX=o.x,o._beforeDragY=o.y,d._updateContainerHeight()),d.grid.canMoveNode(o,a,t)&&(d.grid.moveNode(o,a,t),d._updateContainerHeight())},this.dd.droppable(d.container,{accept:function(t){var e=(t=g(t)).data("_gridstack_node");return(!e||e._grid!==d)&&t.is(!0===d.opts.acceptWidgets?".grid-stack-item":d.opts.acceptWidgets)}}).on(d.container,"dropover",function(t,e){d.container.offset();var e=g(e.draggable),i=d.cellWidth(),o=d.cellHeight(),a=e.data("_gridstack_node"),i=a?a.width:Math.ceil(e.outerWidth()/i),o=a?a.height:Math.ceil(e.outerHeight()/o),i=(r=e,d.grid._prepareNode({width:i,height:o,_added:!1,_temporary:!0}));e.data("_gridstack_node",i),e.data("_gridstack_node_orig",a),e.on("drag",n)}).on(d.container,"dropout",function(t,e){var i,e=g(e.draggable);e.data("_gridstack_node")&&(e.unbind("drag",n),(i=e.data("_gridstack_node")).el=null,d.grid.removeNode(i),d.placeholder.detach(),d._updateContainerHeight(),e.data("_gridstack_node",e.data("_gridstack_node_orig")))}).on(d.container,"drop",function(t,e){d.placeholder.detach();var i=g(e.draggable).data("_gridstack_node"),o=(i._grid=d,g(e.draggable).clone(!1)),a=(o.data("_gridstack_node",i),g(e.draggable).data("_gridstack_node_orig"));void 0!==a&&void 0!==a._grid&&a._grid._triggerRemoveEvent(),g(e.helper).remove(),i.el=o,d.placeholder.hide(),c.removePositioningStyles(o),o.find("div.ui-resizable-handle").remove(),o.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).addClass(d.opts.itemClass).enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",n),d.container.append(o),d._prepareElementsByNode(o,i),d._updateContainerHeight(),d.grid._addedNodes.push(i),d._triggerAddEvent(),d._triggerChangeEvent(),d.grid.endUpdate(),g(e.draggable).unbind("drag",n),g(e.draggable).removeData("_gridstack_node"),g(e.draggable).removeData("_gridstack_node_orig")}))}var s=0;_.prototype.batchUpdate=function(){this._updateCounter=1,this.float=!0},_.prototype.commit=function(){0!==this._updateCounter&&(this._updateCounter=0,this.float=this._float,this._packNodes(),this._notify())},_.prototype.getNodeDataByDOMEl=function(e){return h.find(this.nodes,function(t){return e.get(0)===t.el.get(0)})},_.prototype._fixCollisions=function(t){this._sortNodes(-1);var e=t,i=Boolean(h.find(this.nodes,function(t){return t.locked}));for(this.float||i||(e={x:0,y:t.y,width:this.width,height:t.height});;){var o=h.find(this.nodes,h.bind(c._collisionNodeCheck,{node:t,nn:e}));if(void 0===o)return;this.moveNode(o,o.x,t.y+t.height,o.width,o.height,!0)}},_.prototype.isAreaEmpty=function(t,e,i,o){var a={x:t||0,y:e||0,width:i||1,height:o||1},t=h.find(this.nodes,h.bind(function(t){return c.isIntercepted(t,a)},this));return null==t},_.prototype._sortNodes=function(t){this.nodes=c.sort(this.nodes,t,this.width)},_.prototype._packNodes=function(){this._sortNodes(),this.float?h.each(this.nodes,h.bind(function(t,e){if(!t._updating&&void 0!==t._origY&&t.y!=t._origY)for(var i=t.y;i>=t._origY;)h.chain(this.nodes).take(e).find(h.bind(c._didCollide,{n:t,newY:i})).value()||(t._dirty=!0,t.y=i),--i},this)):h.each(this.nodes,h.bind(function(t,e){if(!t.locked)for(;0<t.y;){var i=t.y-1,o=0===e;if(!(o=0<e?void 0===h.chain(this.nodes).take(e).find(h.bind(c._didCollide,{n:t,newY:i})).value():o))break;t._dirty=t.y!=i,t.y=i}},this))},_.prototype._prepareNode=function(t,e){return(t=h.defaults(t||{},{width:1,height:1,x:0,y:0})).x=parseInt(""+t.x),t.y=parseInt(""+t.y),t.width=parseInt(""+t.width),t.height=parseInt(""+t.height),t.autoPosition=t.autoPosition||!1,t.noResize=t.noResize||!1,t.noMove=t.noMove||!1,t.width>this.width?t.width=this.width:t.width<1&&(t.width=1),t.height<1&&(t.height=1),t.x<0&&(t.x=0),t.x+t.width>this.width&&(e?t.width=this.width-t.x:t.x=this.width-t.width),t.y<0&&(t.y=0),t},_.prototype._notify=function(){var t,e=Array.prototype.slice.call(arguments,0);e[0]=void 0===e[0]?[]:[e[0]],e[1]=void 0===e[1]||e[1],this._updateCounter||(t=e[0].concat(this.getDirtyNodes()),this.onchange(t,e[1]))},_.prototype.cleanNodes=function(){this._updateCounter||h.each(this.nodes,function(t){t._dirty=!1})},_.prototype.getDirtyNodes=function(){return h.filter(this.nodes,function(t){return t._dirty})},_.prototype.addNode=function(t,e){if(void 0!==(t=this._prepareNode(t)).maxWidth&&(t.width=Math.min(t.width,t.maxWidth)),void 0!==t.maxHeight&&(t.height=Math.min(t.height,t.maxHeight)),void 0!==t.minWidth&&(t.width=Math.max(t.width,t.minWidth)),void 0!==t.minHeight&&(t.height=Math.max(t.height,t.minHeight)),t._id=++s,t._dirty=!0,t.autoPosition){this._sortNodes();for(var i=0;;++i){var o=i%this.width,a=Math.floor(i/this.width);if(!(o+t.width>this.width)&&!h.find(this.nodes,h.bind(c._isAddNodeIntercepted,{x:o,y:a,node:t}))){t.x=o,t.y=a;break}}}return this.nodes.push(t),void 0!==e&&e&&this._addedNodes.push(h.clone(t)),this._fixCollisions(t),this._packNodes(),this._notify(),t},_.prototype.removeNode=function(t,e){e=void 0===e||e,this._removedNodes.push(h.clone(t)),t._id=null,this.nodes=h.without(this.nodes,t),this._packNodes(),this._notify(t,e)},_.prototype.canMoveNode=function(e,t,i,o,a){if(!this.isNodeChangedPosition(e,t,i,o,a))return!1;var s,r=Boolean(h.find(this.nodes,function(t){return t.locked}));if(!this.height&&!r)return!0;var n=new _(this.width,null,this.float,0,h.map(this.nodes,function(t){return t==e?s=g.extend({},t):g.extend({},t)}));if(void 0===s)return!0;n.moveNode(s,t,i,o,a);t=!0;return r&&(t&=!Boolean(h.find(n.nodes,function(t){return t!=s&&Boolean(t.locked)&&Boolean(t._dirty)}))),this.height&&(t&=n.getGridHeight()<=this.height),t},_.prototype.canBePlacedWithRespectToHeight=function(t){var e;return!this.height||((e=new _(this.width,null,this.float,0,h.map(this.nodes,function(t){return g.extend({},t)}))).addNode(t),e.getGridHeight()<=this.height)},_.prototype.isNodeChangedPosition=function(t,e,i,o,a){return"number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(a=Math.min(a,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight)),t.x!=e||t.y!=i||t.width!=o||t.height!=a},_.prototype.moveNode=function(t,e,i,o,a,s){var r;return this.isNodeChangedPosition(t,e,i,o,a)&&("number"!=typeof e&&(e=t.x),"number"!=typeof i&&(i=t.y),"number"!=typeof o&&(o=t.width),"number"!=typeof a&&(a=t.height),void 0!==t.maxWidth&&(o=Math.min(o,t.maxWidth)),void 0!==t.maxHeight&&(a=Math.min(a,t.maxHeight)),void 0!==t.minWidth&&(o=Math.max(o,t.minWidth)),void 0!==t.minHeight&&(a=Math.max(a,t.minHeight)),t.x==e&&t.y==i&&t.width==o&&t.height==a||(r=t.width!=o,t._dirty=!0,t.x=e,t.y=i,t.width=o,t.height=a,t.lastTriedX=e,t.lastTriedY=i,t.lastTriedWidth=o,t.lastTriedHeight=a,t=this._prepareNode(t,r),this._fixCollisions(t),s)||(this._packNodes(),this._notify())),t},_.prototype.getGridHeight=function(){return h.reduce(this.nodes,function(t,e){return Math.max(t,e.y+e.height)},0)},_.prototype.beginUpdate=function(t){h.each(this.nodes,function(t){t._origY=t.y}),t._updating=!0},_.prototype.endUpdate=function(){h.each(this.nodes,function(t){t._origY=t.y});var t=h.find(this.nodes,function(t){return t._updating});t&&(t._updating=!1)};return i.prototype._triggerChangeEvent=function(t){var e=this.grid.getDirtyNodes(),i=!1,o=[];e&&e.length&&(o.push(e),i=!0),!i&&!0!==t||this.container.trigger("change",o)},i.prototype._triggerAddEvent=function(){this.grid._addedNodes&&0<this.grid._addedNodes.length&&(this.container.trigger("added",[h.map(this.grid._addedNodes,h.clone)]),this.grid._addedNodes=[])},i.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&0<this.grid._removedNodes.length&&(this.container.trigger("removed",[h.map(this.grid._removedNodes,h.clone)]),this.grid._removedNodes=[])},i.prototype._initStyles=function(){this._stylesId&&c.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=c.createStylesheet(this._stylesId),null!==this._styles&&(this._styles._max=0)},i.prototype._updateStyles=function(t){if(null!==this._styles&&void 0!==this._styles){var e,i="."+this.opts._class+" ."+this.opts.itemClass,o=this;if(void 0===t&&(t=this._styles._max),this._initStyles(),this._updateContainerHeight(),this.opts.cellHeight&&!(0!==this._styles._max&&t<=this._styles._max)&&(e=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(t,e){return t&&e?"calc("+(o.opts.cellHeight*t+o.opts.cellHeightUnit)+" + "+(o.opts.verticalMargin*e+o.opts.verticalMarginUnit)+")":o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit}:function(t,e){return o.opts.cellHeight*t+o.opts.verticalMargin*e+o.opts.cellHeightUnit},0===this._styles._max&&c.insertCSSRule(this._styles,i,"min-height: "+e(1,0)+";",0),t>this._styles._max)){for(var a=this._styles._max;a<t;++a)c.insertCSSRule(this._styles,i+'[data-gs-height="'+(a+1)+'"]',"height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-min-height="'+(a+1)+'"]',"min-height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-max-height="'+(a+1)+'"]',"max-height: "+e(a+1,a)+";",a),c.insertCSSRule(this._styles,i+'[data-gs-y="'+a+'"]',"top: "+e(a,a)+";",a);this._styles._max=t}}},i.prototype._updateContainerHeight=function(){var t,e;this.grid._updateCounter||(t=this.grid.getGridHeight(),0<(e=parseInt(this.container.css("min-height")))&&t<(e=(e+this.opts.verticalMargin)/(this.cellHeight()+this.opts.verticalMargin))&&(t=e),this.container.attr("data-gs-current-height",t),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",t*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(t*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(t*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",t*this.opts.cellHeight+this.opts.cellHeightUnit)))},i.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},i.prototype._setupRemovingTimeout=function(t){var e=g(t).data("_gridstack_node");!e._removeTimeout&&this.opts.removable&&(e._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),e._isAboutToRemove=!0},this.opts.removeTimeout))},i.prototype._clearRemovingTimeout=function(t){var e=g(t).data("_gridstack_node");e._removeTimeout&&(clearTimeout(e._removeTimeout),e._removeTimeout=null,t.removeClass("grid-stack-item-removing"),e._isAboutToRemove=!1)},i.prototype._prepareElementsByNode=function(n,d){function t(t,e){var i,o,a=Math.round(e.position.left/h),s=Math.floor((e.position.top+l/2)/l);if("drag"!=t.type&&(i=Math.round(e.size.width/h),o=Math.round(e.size.height/l)),"drag"==t.type){var r=e.position.top-d._prevYPix;d._prevYPix=e.position.top,c.updateScrollPosition(n[0],e,r),n.data("inTrashZone")||a<0||a>=p.grid.width||s<0||!p.grid.float&&s>p.grid.getGridHeight()?d._temporaryRemoved||(!0===p.opts.removable&&p._setupRemovingTimeout(n),a=d._beforeDragX,s=d._beforeDragY,p.placeholder.detach(),p.placeholder.hide(),p.grid.removeNode(d),p._updateContainerHeight(),d._temporaryRemoved=!0):(p._clearRemovingTimeout(n),d._temporaryRemoved&&(p.grid.addNode(d),p.placeholder.attr("data-gs-x",a).attr("data-gs-y",s).attr("data-gs-width",i).attr("data-gs-height",o).show(),p.container.append(p.placeholder),d.el=p.placeholder,d._temporaryRemoved=!1))}else if("resize"==t.type&&a<0)return;e=void 0!==i?i:d.lastTriedWidth,r=void 0!==o?o:d.lastTriedHeight,!p.grid.canMoveNode(d,a,s,i,o)||d.lastTriedX===a&&d.lastTriedY===s&&d.lastTriedWidth===e&&d.lastTriedHeight===r||(d.lastTriedX=a,d.lastTriedY=s,d.lastTriedWidth=i,d.lastTriedHeight=o,p.grid.moveNode(d,a,s,i,o),p._updateContainerHeight())}function e(t,e){p.container.append(p.placeholder);var i=g(this),o=(p.grid.cleanNodes(),p.grid.beginUpdate(d),h=p.cellWidth(),Math.ceil(i.outerHeight()/i.attr("data-gs-height")));l=p.container.height()/parseInt(p.container.attr("data-gs-current-height")),p.placeholder.attr("data-gs-x",i.attr("data-gs-x")).attr("data-gs-y",i.attr("data-gs-y")).attr("data-gs-width",i.attr("data-gs-width")).attr("data-gs-height",i.attr("data-gs-height")).show(),d.el=p.placeholder,d._beforeDragX=d.x,d._beforeDragY=d.y,d._prevYPix=e.position.top,p.dd.resizable(n,"option","minWidth",h*(d.minWidth||1)),p.dd.resizable(n,"option","minHeight",o*(d.minHeight||1)),"resizestart"==t.type&&i.find(".grid-stack-item").trigger("resizestart")}function i(t,e){var i,o=g(this);o.data("_gridstack_node")&&(i=!1,p.placeholder.detach(),d.el=o,p.placeholder.hide(),d._isAboutToRemove?(i=!0,n.data("_gridstack_node")._grid._triggerRemoveEvent(),n.removeData("_gridstack_node"),n.remove()):(p._clearRemovingTimeout(n),d._temporaryRemoved?(c.removePositioningStyles(o),o.attr("data-gs-x",d._beforeDragX).attr("data-gs-y",d._beforeDragY).attr("data-gs-width",d.width).attr("data-gs-height",d.height),d.x=d._beforeDragX,d.y=d._beforeDragY,d._temporaryRemoved=!1,p.grid.addNode(d)):(c.removePositioningStyles(o),o.attr("data-gs-x",d.x).attr("data-gs-y",d.y).attr("data-gs-width",d.width).attr("data-gs-height",d.height))),p._updateContainerHeight(),p._triggerChangeEvent(i),p.grid.endUpdate(),(i=o.find(".grid-stack")).length&&"resizestop"==t.type&&(i.each(function(t,e){g(e).data("gridstack").onResizeHandler()}),o.find(".grid-stack-item").trigger("resizestop"),o.find(".grid-stack-item").trigger("gsresizestop")),"resizestop"==t.type)&&p.container.trigger("gsresizestop",o)}var h,l,p=this;this.dd.draggable(n,{start:e,stop:i,drag:t}).resizable(n,{start:e,stop:i,resize:t}),(d.noMove||this._isOneColumnMode()&&!p.opts.disableOneColumnMode||this.opts.disableDrag||this.opts.staticGrid)&&this.dd.draggable(n,"disable"),(d.noResize||this._isOneColumnMode()&&!p.opts.disableOneColumnMode||this.opts.disableResize||this.opts.staticGrid)&&this.dd.resizable(n,"disable"),n.attr("data-gs-locked",d.locked?"yes":null)},i.prototype._prepareElement=function(t,e){e=void 0!==e&&e;(t=g(t)).addClass(this.opts.itemClass);e=this.grid.addNode({x:parseInt(t.attr("data-gs-x"),10),y:parseInt(t.attr("data-gs-y"),10),width:t.attr("data-gs-width"),height:t.attr("data-gs-height"),maxWidth:t.attr("data-gs-max-width"),minWidth:t.attr("data-gs-min-width"),maxHeight:t.attr("data-gs-max-height"),minHeight:t.attr("data-gs-min-height"),autoPosition:c.toBool(t.attr("data-gs-auto-position")),noResize:c.toBool(t.attr("data-gs-no-resize")),noMove:c.toBool(t.attr("data-gs-no-move")),locked:c.toBool(t.attr("data-gs-locked")),resizeHandles:t.attr("data-gs-resize-handles"),el:t,id:t.attr("data-gs-id"),_grid:this},e);t.data("_gridstack_node",e),this._prepareElementsByNode(t,e)},i.prototype.setAnimation=function(t){t?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},i.prototype.addWidget=function(t,e,i,o,a,s,r,n,d,h,l){return t=g(t),void 0!==e&&t.attr("data-gs-x",e),void 0!==i&&t.attr("data-gs-y",i),void 0!==o&&t.attr("data-gs-width",o),void 0!==a&&t.attr("data-gs-height",a),void 0!==s&&t.attr("data-gs-auto-position",s?"yes":null),void 0!==r&&t.attr("data-gs-min-width",r),void 0!==n&&t.attr("data-gs-max-width",n),void 0!==d&&t.attr("data-gs-min-height",d),void 0!==h&&t.attr("data-gs-max-height",h),void 0!==l&&t.attr("data-gs-id",l),this.container.append(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},i.prototype.makeWidget=function(t){return t=g(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},i.prototype.willItFit=function(t,e,i,o,a){return this.grid.canBePlacedWithRespectToHeight({x:t,y:e,width:i,height:o,autoPosition:a})},i.prototype.removeWidget=function(t,e){e=void 0===e||e;var i=(i=(t=g(t)).data("_gridstack_node"))||this.grid.getNodeDataByDOMEl(t);this.grid.removeNode(i,e),t.removeData("_gridstack_node"),this._updateContainerHeight(),e&&t.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},i.prototype.removeAll=function(e){h.each(this.grid.nodes,h.bind(function(t){this.removeWidget(t.el,e)},this)),this.grid.nodes=[],this._updateContainerHeight()},i.prototype.destroy=function(t){g(window).off("resize",this.onResizeHandler),this.disable(),void 0===t||t?this.container.remove():(this.removeAll(!1),this.container.removeData("gridstack")),c.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},i.prototype.resizable=function(t,o){var a=this;return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.noResize=!o,i.noResize||a._isOneColumnMode()&&!a.opts.disableOneColumnMode?a.dd.resizable(e,"disable"):a.dd.resizable(e,"enable"))}),this},i.prototype.movable=function(t,o){var a=this;return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.noMove=!o,i.noMove||a._isOneColumnMode()&&!a.opts.disableOneColumnMode?(a.dd.draggable(e,"disable"),e.removeClass("ui-draggable-handle")):(a.dd.draggable(e,"enable"),e.addClass("ui-draggable-handle")))}),this},i.prototype.enableMove=function(t,e){this.movable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableDrag=!t)},i.prototype.enableResize=function(t,e){this.resizable(this.container.children("."+this.opts.itemClass),t),e&&(this.opts.disableResize=!t)},i.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},i.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},i.prototype.locked=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null!=i&&(i.locked=o||!1,e.attr("data-gs-locked",i.locked?"yes":null))}),this},i.prototype.maxHeight=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.maxHeight=o||!1,e.attr("data-gs-max-height",o))}),this},i.prototype.minHeight=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.minHeight=o||!1,e.attr("data-gs-min-height",o))}),this},i.prototype.maxWidth=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.maxWidth=o||!1,e.attr("data-gs-max-width",o))}),this},i.prototype.minWidth=function(t,o){return(t=g(t)).each(function(t,e){var i=(e=g(e)).data("_gridstack_node");null==i||isNaN(o)||(i.minWidth=o||!1,e.attr("data-gs-min-width",o))}),this},i.prototype._updateElement=function(t,e){var i,o=(t=g(t).first()).data("_gridstack_node");null!=o&&((i=this).grid.cleanNodes(),i.grid.beginUpdate(o),e.call(this,t,o),i._updateContainerHeight(),i._triggerChangeEvent(),i.grid.endUpdate())},i.prototype.resize=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.width,o=null!=o?o:e.height,this.grid.moveNode(e,e.x,e.y,i,o)})},i.prototype.move=function(t,i,o){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,this.grid.moveNode(e,i,o,e.width,e.height)})},i.prototype.update=function(t,i,o,a,s){this._updateElement(t,function(t,e){i=null!=i?i:e.x,o=null!=o?o:e.y,a=null!=a?a:e.width,s=null!=s?s:e.height,this.grid.moveNode(e,i,o,a,s)})},i.prototype.verticalMargin=function(t,e){if(void 0===t)return this.opts.verticalMargin;t=c.parseHeight(t);this.opts.verticalMarginUnit===t.unit&&this.opts.height===t.height||(this.opts.verticalMarginUnit=t.unit,this.opts.verticalMargin=t.height,e)||this._updateStyles()},i.prototype.cellHeight=function(t,e){if(void 0===t)return this.opts.cellHeight||(i=this.container.children("."+this.opts.itemClass).first(),Math.ceil(i.outerHeight()/i.attr("data-gs-height")));var i=c.parseHeight(t);this.opts.cellHeightUnit===i.unit&&this.opts.cellHeight===i.height||(this.opts.cellHeightUnit=i.unit,this.opts.cellHeight=i.height,e)||this._updateStyles()},i.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},i.prototype.getCellFromPixel=function(t,e){var e=void 0!==e&&e?this.container.offset():this.container.position(),i=t.left-e.left,t=t.top-e.top,e=Math.floor(this.container.width()/this.opts.width),o=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(i/e),y:Math.floor(t/o)}},i.prototype.batchUpdate=function(){this.grid.batchUpdate()},i.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},i.prototype.isAreaEmpty=function(t,e,i,o){return this.grid.isAreaEmpty(t,e,i,o)},i.prototype.setStatic=function(t){this.opts.staticGrid=!0===t,this.enableMove(!t),this.enableResize(!t),this._setStaticClass()},i.prototype._setStaticClass=function(){var t="grid-stack-static";!0===this.opts.staticGrid?this.container.addClass(t):this.container.removeClass(t)},i.prototype._updateNodeWidths=function(t,e){this.grid._sortNodes(),this.grid.batchUpdate();for(var i,o=0;o<this.grid.nodes.length;o++)i=this.grid.nodes[o],this.update(i.el,Math.round(i.x*e/t),void 0,Math.round(i.width*e/t),void 0);this.grid.commit()},i.prototype.setGridWidth=function(t,e){this.container.removeClass("grid-stack-"+this.opts.width),!0!==e&&this._updateNodeWidths(this.opts.width,t),this.opts.width=t,this.grid.width=t,this.container.addClass("grid-stack-"+t)},_.prototype.batch_update=t(_.prototype.batchUpdate),_.prototype._fix_collisions=t(_.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),_.prototype.is_area_empty=t(_.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),_.prototype._sort_nodes=t(_.prototype._sortNodes,"_sort_nodes","_sortNodes"),_.prototype._pack_nodes=t(_.prototype._packNodes,"_pack_nodes","_packNodes"),_.prototype._prepare_node=t(_.prototype._prepareNode,"_prepare_node","_prepareNode"),_.prototype.clean_nodes=t(_.prototype.cleanNodes,"clean_nodes","cleanNodes"),_.prototype.get_dirty_nodes=t(_.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),_.prototype.add_node=t(_.prototype.addNode,"add_node","addNode, "),_.prototype.remove_node=t(_.prototype.removeNode,"remove_node","removeNode"),_.prototype.can_move_node=t(_.prototype.canMoveNode,"can_move_node","canMoveNode"),_.prototype.move_node=t(_.prototype.moveNode,"move_node","moveNode"),_.prototype.get_grid_height=t(_.prototype.getGridHeight,"get_grid_height","getGridHeight"),_.prototype.begin_update=t(_.prototype.beginUpdate,"begin_update","beginUpdate"),_.prototype.end_update=t(_.prototype.endUpdate,"end_update","endUpdate"),_.prototype.can_be_placed_with_respect_to_height=t(_.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),i.prototype._trigger_change_event=t(i.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),i.prototype._init_styles=t(i.prototype._initStyles,"_init_styles","_initStyles"),i.prototype._update_styles=t(i.prototype._updateStyles,"_update_styles","_updateStyles"),i.prototype._update_container_height=t(i.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),i.prototype._is_one_column_mode=t(i.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),i.prototype._prepare_element=t(i.prototype._prepareElement,"_prepare_element","_prepareElement"),i.prototype.set_animation=t(i.prototype.setAnimation,"set_animation","setAnimation"),i.prototype.add_widget=t(i.prototype.addWidget,"add_widget","addWidget"),i.prototype.make_widget=t(i.prototype.makeWidget,"make_widget","makeWidget"),i.prototype.will_it_fit=t(i.prototype.willItFit,"will_it_fit","willItFit"),i.prototype.remove_widget=t(i.prototype.removeWidget,"remove_widget","removeWidget"),i.prototype.remove_all=t(i.prototype.removeAll,"remove_all","removeAll"),i.prototype.min_height=t(i.prototype.minHeight,"min_height","minHeight"),i.prototype.min_width=t(i.prototype.minWidth,"min_width","minWidth"),i.prototype._update_element=t(i.prototype._updateElement,"_update_element","_updateElement"),i.prototype.cell_height=t(i.prototype.cellHeight,"cell_height","cellHeight"),i.prototype.cell_width=t(i.prototype.cellWidth,"cell_width","cellWidth"),i.prototype.get_cell_from_pixel=t(i.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),i.prototype.batch_update=t(i.prototype.batchUpdate,"batch_update","batchUpdate"),i.prototype.is_area_empty=t(i.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),i.prototype.set_static=t(i.prototype.setStatic,"set_static","setStatic"),i.prototype._set_static_class=t(i.prototype._setStaticClass,"_set_static_class","_setStaticClass"),e.GridStackUI=i,e.GridStackUI.Utils=c,e.GridStackUI.Engine=_,e.GridStackUI.GridStackDragDropPlugin=p,g.fn.gridstack=function(e){return this.each(function(){var t=g(this);t.data("gridstack")||t.data("gridstack",new i(this,e))})},e.GridStackUI});
/**
 * gridstack.js 1.0.0-dev
 * http://troolee.github.io/gridstack.js/
 * (c) 2014-2017 Pavel Reznikov, Dylan Weiss
 * gridstack.js may be freely distributed under the MIT license.
 * @preserve
*/
!function(e){if("function"==typeof define&&define.amd)define(["jquery","lodash","gridstack","jquery-ui/data","jquery-ui/disable-selection","jquery-ui/focusable","jquery-ui/form","jquery-ui/ie","jquery-ui/keycode","jquery-ui/labels","jquery-ui/jquery-1-7","jquery-ui/plugin","jquery-ui/safe-active-element","jquery-ui/safe-blur","jquery-ui/scroll-parent","jquery-ui/tabbable","jquery-ui/unique-id","jquery-ui/version","jquery-ui/widget","jquery-ui/widgets/mouse","jquery-ui/widgets/draggable","jquery-ui/widgets/droppable","jquery-ui/widgets/resizable"],e);else{if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(e){}try{_=require("lodash")}catch(e){}try{GridStackUI=require("gridstack")}catch(e){}}e(jQuery,_,GridStackUI)}}(function(u,a,r){window;function e(e){r.GridStackDragDropPlugin.call(this,e)}return r.GridStackDragDropPlugin.registerPlugin(e),((e.prototype=Object.create(r.GridStackDragDropPlugin.prototype)).constructor=e).prototype.resizable=function(e,r){var t,i;return e=u(e),"disable"===r||"enable"===r?e.resizable(r):"option"===r?(i=arguments[2],t=arguments[3],e.resizable(r,i,t)):(i=e.data("gs-resize-handles")?e.data("gs-resize-handles"):this.grid.opts.resizable.handles,e.resizable(a.extend({},this.grid.opts.resizable,{handles:i},{start:r.start||function(){},stop:r.stop||function(){},resize:r.resize||function(){}}))),this},e.prototype.draggable=function(e,r){return e=u(e),"disable"===r||"enable"===r?e.draggable(r):e.draggable(a.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:r.start||function(){},stop:r.stop||function(){},drag:r.drag||function(){}})),this},e.prototype.droppable=function(e,r){return(e=u(e)).droppable(r),this},e.prototype.isDroppable=function(e,r){return e=u(e),Boolean(e.data("droppable"))},e.prototype.on=function(e,r,t){return u(e).on(r,t),this},e});
var Rex_Navigator=function(u){"use strict";var a,o,i,r,e,d=function(){var e,t;r.each(function(){e=u(this),null!==this.getAttribute("id")&&""!=this.getAttribute("id")&&(t=document.querySelector('.vertical-nav a[href="#'+this.getAttribute("id")+'"]'))&&(t=t.getAttribute("data-number")-1,e.offset().top-Rexbuilder_Util.globalViewport.height/2<Rexbuilder_Util.$window.scrollTop()&&e.offset().top+e.height()-Rexbuilder_Util.globalViewport.height/2>Rexbuilder_Util.$window.scrollTop()?i.eq(t).addClass("is-selected"):i.eq(t).removeClass("is-selected"))})};function s(){r=Rexbuilder_Util.$rexContainer.children(".rexpansive_section"),(e=r.get()).length,(e=e.filter(function(e){return e.getAttribute("id")&&""!==e.getAttribute("id")})).length,t(),n(),a&&d()}var t=function(){i=Rexbuilder_Util.$document.find(".vertical-nav a")},n=function(){o=Rexbuilder_Util.$document.find(".touch .vertical-nav a")},c={};function v(){for(var e=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]")),t=0;t<e.length;t++){var i=e[t].getAttribute("href"),r=e[t].getBoundingClientRect();c[i]=r}}return{init:function(){var r,e=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),i=(0!=e.length&&e.hasClass("nav-editor-mode-disable")&&(r=e,Rexbuilder_Util.$rexContainer.children(".rexpansive_section").each(function(e,t){var i,t=u(t).attr("data-rexlive-section-name");""!=t&&(i=t.replace(/ /gm,""),tmpl.arg="navigator",t=tmpl("tmpl-navigator-item",{sectionName:t,sectionID:i,number:e+1}),r.children("ul").append(t))})),(a=document.querySelector(".vertical-nav"))&&(Rexbuilder_Util.$window.on("scroll",function(){d()}),Rexbuilder_Util.$document.on("click",".vertical-nav a",function(e){e.preventDefault();e=u(e.target),e=(e=e.is("a")?e:e.parents("a")).attr("href"),e=Rexbuilder_Util.$rexContainer.children(e);Rexbuilder_Util.smoothScroll(e)}),Rexbuilder_Util.$document.on("click",".touch .vertical-nav a",function(){o.find(".rex-label").removeClass("fadeInAndOut"),u(this).find(".rex-label").addClass("fadeInAndOut"),Rexbuilder_Util.$document.find(".touch .vertical-nav").removeClass("open")})),s(),v(),document.getElementById("vertical-nav-label")),t=Array.prototype.slice.call(document.querySelectorAll(".vertical-nav-link[href]"));if(null!==i)for(var n=i.getAttribute("data-nav-position")||"right",l=0;l<t.length;l++)t[l].addEventListener("mouseenter",function(e){var t=e.target.getAttribute("href"),e=e.target.getAttribute("data-section_nav_label"),e=(e?i.innerHTML=e:i.innerText=t.replace("#","").replace(/\-/g," "),i.style.display="inline",i.style.opacity="1",i.style.top=c[t].top+c[t].height/2-i.offsetHeight/2+"px",1.5*c[t].width+"px");"right"===n?i.style.right=e:i.style.left=e}),t[l].addEventListener("mouseleave",function(e){i.style.display="none",i.style.opacity="0"})},updateNavigator:s,updateNavigatorItem:function(e,t,i){var r=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]');if(""!=t){if(""==e.attr("id")){var n=Rexbuilder_Util.$rexContainer.children(".rexpansive_section").length,l=Rexbuilder_Util.$rexContainer.children('.rexpansive_section[id=""]').length,a=e,o="";do{if(""!=(o=(a=a.next()).attr("id")))break}while(0!=a.length);n=n-l+1,l=(tmpl.arg="navigator",tmpl("tmpl-navigator-item",{sectionName:i,sectionID:t,number:n}));""==o||null==o?r.children("ul").append(l):u(l).insertBefore(r.find('li a[href="#'+o+'"]').parent())}else{var d,c=e.attr("id");(d=r.find('li a[href="#'+c+'"]')).attr("href","#"+t),d.find(".label").text(i)}e.attr("id",t),e.attr("href","#"+t)}else""!=e.attr("id")&&(c=e.attr("id"),(d=r.find('li a[href="#'+c+'"]').parent()).remove(),e.attr("id",""),e.removeAttr("href"));s()},fixNavigatorItemOrder:function(e){if(null!=e.attr("id")&&""!=e.attr("id")){var t=e.attr("id"),i=Rexbuilder_Util.$document.find('nav[class*="vertical-nav"]'),t=i.find('li a[href="#'+t+'"]').parent(),r=e,n="";do{if(""!=(n=(r=r.next()).attr("id")))break}while(0!=r.length);""==n||null==n?i.children("ul").append(t[0]):t.insertBefore(i.find('li a[href="#'+n+'"]').parent())}},getNavigationDotsPosition:v}}(jQuery);
/*!
 * Flickity PACKAGED v2.3.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */
!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";var i=Array.prototype.slice,n=t.console,d=void 0===n?function(){}:function(t){n.error(t)};function s(l,h,c){(c=c||e||t.jQuery)&&(h.prototype.option||(h.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[l]=function(t){var e,n,s,o,r,a;return"string"==typeof t?(e=i.call(arguments,1),s=e,r="$()."+l+'("'+(n=t)+'")',(e=this).each(function(t,e){var i,e=c.data(e,l);e?(i=e[n])&&"_"!=n.charAt(0)?(i=i.apply(e,s),o=void 0===o?i:o):d(r+" is not a valid method"):d(l+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:e):(a=t,this.each(function(t,e){var i=c.data(e,l);i?(i.option(a),i._init()):(i=new h(e,a),c.data(e,l,i))}),this)},o(c))}function o(t){t&&!t.bridget&&(t.bridget=s)}return o(e||t.jQuery),s}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){var i;if(t&&e)return-1==(i=(i=this._events=this._events||{})[t]=i[t]||[]).indexOf(e)&&i.push(e),this},e.once=function(t,e){var i;if(t&&e)return this.on(t,e),((i=this._onceEvents=this._onceEvents||{})[t]=i[t]||{})[e]=!0,this},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s];n&&n[o]&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */
function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function m(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}var e="undefined"==typeof console?function(){}:function(t){console.error(t)},v=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],y=v.length;function b(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var E,S=!1;function C(t){if(S||(S=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(h=document.body||document.documentElement).appendChild(c),o=b(c),E=200==Math.round(m(o.width)),C.isBoxSizeOuter=E,h.removeChild(c)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=b(t);if("none"==e.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<y;n++)i[v[n]]=0;return i}for(var s={},o=(s.width=t.offsetWidth,s.height=t.offsetHeight,s.isBorderBox="border-box"==e.boxSizing),r=0;r<y;r++){var a=v[r],l=e[a],l=parseFloat(l);s[a]=isNaN(l)?0:l}var h=s.paddingLeft+s.paddingRight,c=s.paddingTop+s.paddingBottom,t=s.marginLeft+s.marginRight,d=s.marginTop+s.marginBottom,u=s.borderLeftWidth+s.borderRightWidth,p=s.borderTopWidth+s.borderBottomWidth,f=o&&E,g=m(e.width),g=(!1!==g&&(s.width=g+(f?0:h+u)),m(e.height));return!1!==g&&(s.height=g+(f?0:c+p)),s.innerWidth=s.width-(h+u),s.innerHeight=s.height-(c+p),s.outerWidth=s.width+t,s.outerHeight=s.height+d,s}}return C}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,o){var l={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice,h=(l.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},l.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},l.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,o(t,e))return t},l.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.filterFindElements=function(t,n){t=l.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(n){o(t,n)&&s.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)s.push(e[i])}else s.push(t)}),s},l.debounceMethod=function(t,e,n){n=n||100;var s=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o],e=(clearTimeout(t),arguments),i=this;this[o]=setTimeout(function(){s.apply(i,e),delete i[o]},n)}},l.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},l.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()},i.console);return l.htmlInit=function(r,a){l.docReady(function(){var t=l.toDashed(a),n="data-"+t,e=document.querySelectorAll("["+n+"]"),t=document.querySelectorAll(".js-"+t),e=l.makeArray(e).concat(l.makeArray(t)),s=n+"-options",o=i.jQuery;e.forEach(function(t){var e=t.getAttribute(n)||t.getAttribute(s);try{i=e&&JSON.parse(e)}catch(e){return void(h&&h.error("Error parsing "+n+" on "+t.className+": "+e))}var i=new r(t,i);o&&o.data(t,a,i)})})},l}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(0,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0,this.element.style[this.parent.originSide]=0},n.destroy=function(){this.unselect(),this.element.style.position="";var t=this.parent.originSide;this.element.style[t]="",this.element.style.transform="",this.element.removeAttribute("aria-hidden")},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e="left"===this.parent.originSide?1:-1,t=this.parent.options.percentPosition?t*e*(this.parent.size.innerWidth/this.size.width):t*e;this.element.style.transform="translateX("+this.parent.getPositionValue(t)+")"},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){var e;this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length&&(this.x=t.x,e=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=t.size[e])},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),e=e?e.size[t]:0,t=this.outerWidth-(this.firstMargin+e);this.target=this.x+this.firstMargin+t*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.cells.forEach(function(t){t.select()})},e.unselect=function(){this.cells.forEach(function(t){t.unselect()})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(t){return e(0,t)}):"object"==typeof module&&module.exports?module.exports=e(0,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(0,t.fizzyUIUtils))}(window,function(t,e){var i={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var t,e=this.x;this.integratePhysics(),this.positionSlider(),this.settle(e),this.isAnimating&&(t=this,requestAnimationFrame(function(){t.animate()}))},positionSlider:function(){var t=this.x;this.options.wrapAround&&1<this.cells.length&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),this.setTranslateX(t,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(t,e){t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;t=this.getPositionValue(t);this.slider.style.transform=e?"translate3d("+t+",0,0)":"translateX("+t+")"},dispatchScrollEvent:function(){var t,e=this.slides[0];e&&(t=(e=-this.x-e.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[t,e]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},settle:function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(t){var e=this.cursorPosition+t,e=(this._shiftCells(this.beforeShiftCells,e,-1),this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition));this._shiftCells(this.afterShiftCells,e,1)},_shiftCells:function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n];s.wrapShift(0<e?i:0),e-=s.size.outerWidth}},_unshiftCells:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(t){this.velocity+=t},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var t;this.isDraggable&&this.isPointerDown&&(t=this.dragX-this.x-this.velocity,this.applyForce(t))},applySelectedAttraction:function(){var t;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(t=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(t))}};return i}),function(r,a){var t;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(t,e,i,n,s,o){return a(r,t,e,i,n,s,o)}):"object"==typeof module&&module.exports?module.exports=a(r,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(t=r.Flickity,r.Flickity=a(r,r.EvEmitter,r.getSize,r.fizzyUIUtils,t.Cell,t.Slide,t.animatePrototype))}(window,function(n,t,e,r,i,a,s){var o=n.jQuery,l=n.getComputedStyle,h=n.console;function c(t,e){for(t=r.makeArray(t);t.length;)e.appendChild(t.shift())}var d=0,u={};function p(t,e){var i,n=r.getQueryElement(t);if(n){if(this.element=n,this.element.flickityGUID)return(i=u[this.element.flickityGUID])&&i.option(e),i;o&&(this.$element=o(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(e),this._create()}else h&&h.error("Bad element for Flickity: "+(n||t))}p.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},p.createMethods=[];var f=p.prototype,g=(r.extend(f,t.prototype),f._create=function(){var t,e=this.guid=++d;for(t in this.element.flickityGUID=e,(u[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var i=this.options.on[t];this.on(t,i)}p.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(t){r.extend(this.options,t)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},f._filterFindCellElements=function(t){return r.filterFindElements(t,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(t){return this._filterFindCellElements(t).map(function(t){return new i(t,this)},this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(t){this.maxCellHeight=(t=t||0)&&this.maxCellHeight||0;for(var e,i=0,n=(0<t&&(i=(e=this.cells[t-1]).x+e.size.outerWidth),this.cells.length),s=t;s<n;s++){var o=this.cells[s];o.setPosition(i),i+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=i,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(t){t.forEach(function(t){t.getSize()})},f.updateSlides=function(){var n,s,o;this.slides=[],this.cells.length&&(n=new a(this),this.slides.push(n),s="left"==this.originSide?"marginRight":"marginLeft",o=this._getCanCellFit(),this.cells.forEach(function(t,e){var i;n.cells.length&&(i=n.outerWidth-n.firstMargin+(t.size.outerWidth-t.size[s]),o.call(this,e,i)||(n.updateTarget(),n=new a(this),this.slides.push(n))),n.addCell(t)},this),n.updateTarget(),this.updateSelectedSlide())},f._getCanCellFit=function(){var e,i,t=this.options.groupCells;return t?"number"==typeof t?(e=parseInt(t,10),function(t){return t%e!=0}):(t="string"==typeof t&&t.match(/^(\d+)%$/),i=t?parseInt(t[1],10)/100:1,function(t,e){return e<=(this.size.innerWidth+1)*i}):function(){return!1}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=e(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign},{center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}});return f.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){var t;this.options.setGallerySize&&(t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=t+"px")},f._getWrapShiftCells=function(){var t,e;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),t=this.cursorPosition,e=this.cells.length-1,this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1))},f._getGapCells=function(t,e,i){for(var n=[];0<t;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},f._containSlides=function(){var t,e,i,n,s,o;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(t=(e=this.options.rightToLeft)?"marginRight":"marginLeft",e=e?"marginLeft":"marginRight",i=this.slideableWidth-this.getLastCell().size[e],n=i<this.size.innerWidth,s=this.cursorPosition+this.cells[0].size[t],o=i-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(t){n?t.target=i*this.cellAlign:(t.target=Math.max(t.target,s),t.target=Math.min(t.target,o))},this))},f.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;this.emitEvent(t,n),o&&this.$element&&(n=t+=this.options.namespaceJQueryEvents?".flickity":"",e&&((e=new o.Event(e)).type=t,n=e),this.$element.trigger(n,i))},f.select=function(t,e,i){this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=r.modulo(t,this.slides.length)),this.slides[t])&&(e=this.selectedIndex,this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=e&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect"))},f._wrapSelect=function(t){var e=this.slides.length;if(!(this.options.wrapAround&&1<e))return t;var i=r.modulo(t,e),n=Math.abs(i-this.selectedIndex),s=Math.abs(i+e-this.selectedIndex),i=Math.abs(i-e-this.selectedIndex);!this.isDragSelect&&s<n?t+=e:!this.isDragSelect&&i<n&&(t-=e),t<0?this.x-=this.slideableWidth:e<=t&&(this.x+=this.slideableWidth)},f.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},f.next=function(t,e){this.select(this.selectedIndex+1,t,e)},f.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),(this.selectedSlide=t).select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var t=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(t&&"string"==typeof t)if(this.queryCell(t))return void this.selectCell(t,!1,!0);var e=0;t&&this.slides[t]&&(e=t),this.select(e,!1,!0)}},f.selectCell=function(t,e,i){var t=this.queryCell(t);t&&(t=this.getCellSlideIndex(t),this.select(t,e,i))},f.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++)if(-1!=this.slides[e].cells.indexOf(t))return e},f.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},f.getCells=function(t){t=r.makeArray(t);var e=[];return t.forEach(function(t){t=this.getCell(t);t&&e.push(t)},this),e},f.getCellElements=function(){return this.cells.map(function(t){return t.element})},f.getParentCell=function(t){var e=this.getCell(t);return e||(t=r.getParent(t,".flickity-slider > *"),this.getCell(t))},f.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(i<=1+2*t)return this.getCellElements();for(var n=[],s=e-t;s<=e+t;s++){var o=this.options.wrapAround?r.modulo(s,i):s,o=this.slides[o];o&&(n=n.concat(o.getCellElements()))}return n},f.queryCell=function(t){if("number"==typeof t)return this.cells[t];if("string"==typeof t){if(t.match(/^[#.]?[\d/]/))return;t=this.element.querySelector(t)}return this.getCell(t)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(t){"touchstart"!=t.type&&t.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},r.debounceMethod(p,"onresize",150),f.resize=function(){var t;!this.isActive||this.isAnimating||this.isDragging||(this.getSize(),this.options.wrapAround&&(this.x=r.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),t=this.selectedElements&&this.selectedElements[0],this.selectCell(t,!1,!0))},f.watchCSS=function(){this.options.watchCSS&&(-1!=l(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;this.options.accessibility&&!e&&(e=p.keyboardHandlers[t.keyCode])&&e.call(this)},p.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},f.focus=function(){var t=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=t&&n.scrollTo(n.pageXOffset,t)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),o&&this.$element&&o.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete u[this.guid]},r.extend(f,s),p.data=function(t){t=(t=r.getQueryElement(t))&&t.flickityGUID;return t&&u[t]},r.htmlInit(p,"flickity"),o&&o.bridget&&o.bridget("flickity",p),p.setJQuery=function(t){o=t},p.Cell=i,p.Slide=a,p}),
/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */
function(e,i){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.Unipointer=i(e,e.EvEmitter)}(window,function(n,t){function e(){}var t=e.prototype=Object.create(t.prototype),i=(t.bindStartEvent=function(t){this._bindStartEvent(t,!0)},t.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},t._bindStartEvent=function(t,e){var e=(e=void 0===e||e)?"addEventListener":"removeEventListener",i="mousedown";"ontouchstart"in n?i="touchstart":n.PointerEvent&&(i="pointerdown"),t[e](i,this)},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},t.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},t.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},t.onpointerdown=function(t){this._pointerDown(t,t)},t._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},t.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},{mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]});return t._bindPostStartEvents=function(t){t&&((t=i[t.type]).forEach(function(t){n.addEventListener(t,this)},this),this._boundPointerEvents=t)},t._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(t){n.removeEventListener(t,this)},this),delete this._boundPointerEvents)},t.onmousemove=function(t){this._pointerMove(t,t)},t.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},t.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},t._pointerMove=function(t,e){this.pointerMove(t,e)},t.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},t.onmouseup=function(t){this._pointerUp(t,t)},t.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},t.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},t._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},t.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},t._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},t._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},t.pointerDone=function(){},t.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},t.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},t._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},t.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},e.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},e}),
/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */
function(e,i){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("unipointer")):e.Unidragger=i(e,e.Unipointer)}(window,function(o,t){function e(){}var i=e.prototype=Object.create(t.prototype),n=(i.bindHandles=function(){this._bindHandles(!0)},i.unbindHandles=function(){this._bindHandles(!1)},i._bindHandles=function(t){for(var e=(t=void 0===t||t)?"addEventListener":"removeEventListener",i=t?this._touchActionValue:"",n=0;n<this.handles.length;n++){var s=this.handles[n];this._bindStartEvent(s,t),s[e]("click",this),o.PointerEvent&&(s.style.touchAction=i)}},i._touchActionValue="none",i.pointerDown=function(t,e){this.okayPointerDown(t)&&(this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))},{TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0}),s={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return i.okayPointerDown=function(t){var e=n[t.target.nodeName],t=s[t.target.type],e=!e||t;return e||this._pointerReset(),e},i.pointerDownBlur=function(){var t=document.activeElement;t&&t.blur&&t!=document.body&&t.blur()},i.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},i._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},i.hasDragStarted=function(t){return 3<Math.abs(t.x)||3<Math.abs(t.y)},i.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},i._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},i._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},i.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},i._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},i.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},i._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},i.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},i.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},i._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},i.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},e.getPointerPoint=t.getPointerPoint,e}),function(n,s){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(t,e,i){return s(n,t,e,i)}):"object"==typeof module&&module.exports?module.exports=s(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=s(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)}(window,function(i,t,e,o){o.extend(t.defaults,{draggable:">1",dragThreshold:3}),t.createMethods.push("_createDrag");var n=t.prototype,s=(o.extend(n,e.prototype),n._touchActionValue="pan-y",n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(t,e){this.isDraggable?this.okayPointerDown(t)&&(this._pointerDownPreventDefault(t),this.pointerDownFocus(t),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=r(),i.addEventListener("scroll",this),this._pointerDownDefault(t,e)):this._pointerDownDefault(t,e)},n._pointerDownDefault=function(t,e){this.pointerDownPointer={pageX:e.pageX,pageY:e.pageY},this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])},{INPUT:!0,TEXTAREA:!0,SELECT:!0});function r(){return{x:i.pageXOffset,y:i.pageYOffset}}return n.pointerDownFocus=function(t){s[t.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=s[t.target.nodeName];e||i||n||t.preventDefault()},n.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},n.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},n.pointerDone=function(){i.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(t,e){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),i.removeEventListener("scroll",this),this.dispatchEvent("dragStart",t,[e]))},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},n.dragMove=function(t,e,i){var n,s;this.isDraggable&&(t.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(i.x%=this.slideableWidth),n=this.dragStartPosition+i.x*n,!this.options.wrapAround&&this.slides.length&&(n=(n=(s=Math.max(-this.slides[0].target,this.dragStartPosition))<n?.5*(n+s):n)<(s=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(n+s):n),this.dragX=n,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i]))},n.dragEnd=function(t,e){var i,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),i=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e]))},n.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),t=this._getClosestResting(t,e,-1);return(i.distance<t.distance?i:t).index},n._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(s=e,null!==(e=this.getSlideDistance(-t,n+=i)));)e=Math.abs(e);return{distance:s,index:n-i}},n.getSlideDistance=function(t,e){var i=this.slides.length,n=this.options.wrapAround&&1<i,s=n?o.modulo(e,i):e,s=this.slides[s];return s?(n=n?this.slideableWidth*Math.floor(e/i):0,t-(s.target+n)):null},n.dragEndBoostSelect=function(){var t,e;return void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime?0:(t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX,0<t&&0<e?1:t<0&&e<0?-1:0)},n.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,i=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,i])},n.onscroll=function(){var t=r(),e=this.pointerDownScroll.x-t.x,t=this.pointerDownScroll.y-t.y;(3<Math.abs(e)||3<Math.abs(t))&&this._pointerDone()},t}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";var s="http://www.w3.org/2000/svg";function o(t,e){this.direction=t,this.parent=e,this._create()}(o.prototype=Object.create(i.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var t=this.parent.options.rightToLeft?1:-1,t=(this.isLeft=this.direction==t,this.element=document.createElement("button")),e=(t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next"),this.createSVG());t.appendChild(e),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var t=document.createElementNS(s,"svg"),e=(t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100"),document.createElementNS(s,"path")),i="string"!=typeof(i=this.parent.options.arrowShape)?"M "+i.x0+",50 L "+i.x1+","+(i.y1+50)+" L "+i.x2+","+(i.y2+50)+" L "+i.x3+",50  L "+i.x2+","+(50-i.y2)+" L "+i.x1+","+(50-i.y1)+" Z":i;return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){var t;this.isEnabled&&(this.parent.uiChange(),t=this.isPrevious?"previous":"next",this.parent[t]())},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var t=this.parent.slides;this.parent.options.wrapAround&&1<t.length?this.enable():(t=t.length?t.length-1:0,t=this.isPrevious?0:t,this[this.parent.selectedIndex==t?"disable":"enable"]())},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");i=e.prototype;return i._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},i.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},i.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=o,e}),function(t,n){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(t,e,i){return n(0,t,e,i)}):"object"==typeof module&&module.exports?module.exports=n(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):n(0,t.Flickity,t.Unipointer,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}(s.prototype=Object.create(i.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;0<t?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){this.dots.splice(this.dots.length-t,t).forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=s.prototype.onClick=function(t){var t=t.target;"LI"==t.nodeName&&(this.parent.uiChange(),t=this.dots.indexOf(t),this.parent.select(t))},s.prototype.destroy=function(){this.deactivate(),this.allOff()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");i=e.prototype;return i._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},i.activatePageDots=function(){this.pageDots.activate()},i.updateSelectedPageDots=function(){this.pageDots.updateSelected()},i.updatePageDots=function(){this.pageDots.setDots()},i.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(t.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var t,e;"playing"==this.state&&(t="number"==typeof(t=this.parent.options.autoPlay)?t:3e3,(e=this).clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");t=i.prototype;return t._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},t.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},t.playPlayer=function(){this.player.play()},t.stopPlayer=function(){this.player.stop()},t.pausePlayer=function(){this.player.pause()},t.unpausePlayer=function(){this.player.unpause()},t.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},t.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},t.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,n){var i=e.prototype;return i.insert=function(t,e){var i,n,s,o,r,t=this._makeCells(t);t&&t.length&&(i=this.cells.length,e=void 0===e?i:e,r=t,n=document.createDocumentFragment(),r.forEach(function(t){n.appendChild(t.element)}),r=n,(s=e==i)?this.slider.appendChild(r):(o=this.cells[e].element,this.slider.insertBefore(r,o)),0===e?this.cells=t.concat(this.cells):s?this.cells=this.cells.concat(t):(r=this.cells.splice(e,i-e),this.cells=this.cells.concat(t).concat(r)),this._sizeCells(t),this.cellChange(e,!0))},i.append=function(t){this.insert(t,this.cells.length)},i.prepend=function(t){this.insert(t,0)},i.remove=function(t){var i,t=this.getCells(t);t&&t.length&&(i=this.cells.length-1,t.forEach(function(t){t.remove();var e=this.cells.indexOf(t);i=Math.min(e,i),n.removeFrom(this.cells,t)},this),this.cellChange(i,!0))},i.cellSizeChange=function(t){var t=this.getCell(t);t&&(t.getSize(),t=this.cells.indexOf(t),this.cellChange(t))},i.cellChange=function(t,e){var i=this.selectedElement,i=(this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize(),this.getCell(i));i&&(this.selectedIndex=this.getCellSlideIndex(i)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,i){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./flickity"),require("fizzy-ui-utils")):i(0,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,s){"use strict";e.createMethods.push("_createLazyload");var i=e.prototype;function n(t,e){this.img=t,this.flickity=e,this.load()}return i._createLazyload=function(){this.on("select",this.lazyLoad)},i.lazyLoad=function(){var e,t=this.options.lazyLoad;t&&(t=this.getAdjacentCellElements("number"==typeof t?t:0),e=[],t.forEach(function(t){t=function(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),i=t.getAttribute("data-flickity-lazyload-src"),n=t.getAttribute("data-flickity-lazyload-srcset");if(e||i||n)return[t]}e=t.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return s.makeArray(e)}(t);e=e.concat(t)}),e.forEach(function(t){new n(t,this)},this))},n.prototype.handleEvent=s.handleEvent,n.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},n.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},n.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},n.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),i=i&&i.element;this.flickity.cellSizeChange(i),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,i)},e.LazyLoader=n,e}),
/*!
 * Flickity v2.3.0
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2021 Metafizzy
 */
function(t){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}((window,function(t){return t})),
/*!
 * Flickity asNavFor v2.0.2
 * enable asNavFor for Flickity
 */
function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(i,n){i.createMethods.push("_createAsNavFor");var t=i.prototype;return t._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t,e=this.options.asNavFor;e&&(t=this,setTimeout(function(){t.setNavCompanion(e)}))},t.setNavCompanion=function(t){t=n.getQueryElement(t);var e,t=i.data(t);t&&t!=this&&(this.navCompanion=t,(e=this).onNavCompanionSelect=function(){e.navCompanionSelect()},t.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},t.navCompanionSelect=function(t){var e,i,n=this.navCompanion&&this.navCompanion.selectedCells;n&&(e=n[0],e=this.navCompanion.cells.indexOf(e),n=e+n.length-1,i=Math.floor((i=this.navCompanion.cellAlign,(n-e)*i+e)),this.selectCell(i,!1,t),this.removeNavSelectedElements(),i>=this.cells.length||(t=this.cells.slice(e,1+n),this.navSelectedElements=t.map(function(t){return t.element}),this.changeNavSelectedClass("add")))},t.changeNavSelectedClass=function(e){this.navSelectedElements.forEach(function(t){t.classList[e]("is-nav-selected")})},t.activateAsNavFor=function(){this.navCompanionSelect(!0)},t.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},t.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},t.deactivateAsNavFor=function(){this.removeNavSelectedElements()},t.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},i}),
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){var o=e.jQuery,r=e.console;function a(t,e){for(var i in e)t[i]=e[i];return t}var l=Array.prototype.slice;function h(t,e,i){if(!(this instanceof h))return new h(t,e,i);var n,s=t;(s="string"==typeof t?document.querySelectorAll(t):s)?(this.elements=(n=s,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=a({},this.options),"function"==typeof e?i=e:a(this.options,e),i&&this.on("always",i),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):r.error("Bad element for imagesLoaded "+(s||t))}(h.prototype=Object.create(t.prototype)).options={},h.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},h.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background)for(var o=t.querySelectorAll(this.options.background),n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}};var c={1:!0,9:!0,11:!0};function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}return h.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},h.prototype.addImage=function(t){t=new i(t);this.images.push(t)},h.prototype.addBackground=function(t,e){t=new n(t,e);this.images.push(t)},h.prototype.check=function(){var n=this;function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},h.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+i,t,e)},h.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(h.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((o=t).fn.imagesLoaded=function(t,e){return new h(this,t,e).jqDeferred.promise(o(this))})})(),h}),
/*!
 * Flickity imagesLoaded v2.0.0
 * enables imagesLoaded option for Flickity
 */
function(t,i){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("flickity"),require("imagesloaded")):t.Flickity=i(0,t.Flickity,t.imagesLoaded)}(window,function(t,e,n){"use strict";e.createMethods.push("_createImagesLoaded");var i=e.prototype;return i._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},i.imagesLoaded=function(){var i;this.options.imagesLoaded&&n((i=this).slider).on("progress",function(t,e){e=i.getParentCell(e.img),i.cellSizeChange(e&&e.element),i.options.freeScroll||i.positionSliderAtSelected()})},e});
var RexSlider=function(s){"use strict";var e=".rex-slider-wrap",o=".flickity-page-dots.rex-slider__custom-nav",t=".rexpansive_section",i=".rex-box-slider-wrap";function c(e){var t=this,i=this.element.getAttribute("data-custom-autoplay-timer")?this.element.getAttribute("data-custom-autoplay-timer"):9e3;t.customAutoplayInterval&&t.customAutoplayInterval.clear(),t.customAutoplayInterval=Rexbuilder_Util.rtimeOut(function(){t.playPlayer()},i),t.pausePlayer()}function r(e){void 0!==e.data("flickity")&&e.flickity("destroy"),e.find(".rex-slider-video-wrapper").each(function(e,t){Rexbuilder_Util.destroyVideo(s(t),!1)})}var a=function(e){var t=s(e),i={cellAlign:"center",prevNextButtons:!0,pageDots:!0,cellSelector:".rex-box-slider-element",selectedAttraction:.018,friction:.3,initialIndex:null!==e.getAttribute("data-rex-box-slider-initialIndex")?parseInt(e.getAttribute("data-rex-box-slider-initialIndex")):0,setGallerySize:!1,arrowShape:"m 38.79662,40.087413 0,0 c -0.387529,0 -0.757576,-0.154429 -1.031468,-0.425408 L 1.2470862,3.1322842 c -0.56818177,-0.5681815 -0.56818177,-1.4918411 0,-2.060023 0.5681819,-0.56818197 1.4918415,-0.56818197 2.0600234,0 L 38.793706,36.570513 74.294872,1.0722612 c 0.568182,-0.56818197 1.491842,-0.56818197 2.060023,0 0.568182,0.5681819 0.568182,1.4918415 0,2.060023 L 39.825175,39.659091 c -0.273893,0.273893 -0.641026,0.428322 -1.028555,0.428322 l 0,0 0,0 z"},e=e.getAttribute("data-rex-slider-animation");null!==e&&"true"==e&&(i.autoPlay=!0),t.flickity(i),t.flickity("stopPlayer"),t.on("dragStart.flickity",function(){s(this).addClass("is-dragging")}),t.on("dragEnd.flickity",function(){s(this).removeClass("is-dragging")})};return{init:function(){0<s(e,t).length&&s(e,t).each(function(e,t){RexSlider.initSlider(s(t)),s(t).attr("data-rex-slider-number",e),Rexbuilder_Dom_Util.lastSliderNumber=e}),0<s(i,t).length&&s(i,t).each(function(e,t){a(t)})},initSlider:function(r){var e=r.get(0),t={cellAlign:"left",prevNextButtons:!1,pageDots:!1,cellSelector:".rex-slider-element",selectedAttraction:.018,friction:.3,wrapAround:_plugin_frontend_settings.slider.wrapAround,arrowShape:_plugin_frontend_settings.slider.arrowShape},i=r.parents(".block-has-slider"),a=(t.setGallerySize=void 0!==r.attr("data-set-gallery-size")&&JSON.parse(r.attr("data-set-gallery-size")),t.wrapAround=void 0!==r.attr("data-wrap-around")?JSON.parse(r.attr("data-wrap-around")):t.wrapAround,r.attr("data-rex-slider-animation")),a=(void 0!==a&&"true"==a.toString()?t.autoPlay=_plugin_frontend_settings.slider.autoPlay:t.autoPlay=!1,r.attr("data-rex-slider-prev-next")),a=(void 0!==a&&"1"==a.toString()&&(t.prevNextButtons=!0),r.attr("data-rex-slider-dots")),a=(void 0!==a&&"1"==a.toString()&&(t.pageDots=!0),r.attr("data-rexlider-lazyload")),a=(void 0!==a&&"0"!==a.toString()&&(t.bgLazyLoad=parseInt(a),t.lazyLoad=parseInt(a)),r.hasClass("rex-slider--bottom-interface")&&i.addClass("block-has-slider--navigator"),r.find(".rex-slider-element").each(function(e,t){t=s(t).find(".rex-slider-video-wrapper");Rexbuilder_Util.startVideoPlugin(t)}),!1!==t.autoPlay);t.prevNextButtons&&a&&(t.pauseAutoPlayOnHover=!1),r.flickity(t),r.flickity("stopPlayer");var l=Array.prototype.slice.call(e.getElementsByClassName("rex-slide--video"));if(r.on("dragStart.flickity",function(){Rexbuilder_Util.addClass(this,"is-dragging")}),r.on("dragEnd.flickity",function(){Rexbuilder_Util.removeClass(this,"is-dragging")}),0!==l.length&&r.on("select.flickity",function(e,t){for(var i=0;i<l.length;i++)Rexbuilder_Util.pauseVideo(s(l[i].querySelector(".rex-slider-video-wrapper")));Rexbuilder_Util.hasClass(Flickity.data(e.target).selectedCell.element,"rex-slide--video")&&Rexbuilder_Util.playVideo(s(e.target.querySelector(".rex-slider-video-wrapper")))}),t.autoPlay&&r.flickity("playPlayer"),a){var n=r.data("flickity");if(n.customAutoplayInterval=null,t.prevNextButtons&&(n.prevButton.element.addEventListener("click",c.bind(n)),n.nextButton.element.addEventListener("click",c.bind(n))),t.pageDots)for(var d=0;d<n.pageDots.dots.length;d++)n.pageDots.dots[d].addEventListener("click",c.bind(n));n.$element.on("dragEnd.flickity",c.bind(n))}r.attr("data-rex-slider-active",!0),r.find(o).children().first().addClass("is-selected"),r.find(o).on("click",".dot",function(e){var t=s(this),i=t.index();t.addClass("is-selected").siblings(".dot").removeClass("is-selected"),r.flickity("select",i)}),r.find(".flickity-page-dots.rex-slider__custom-nav__preview-slide").find(".rex-slider__b-label-image--item").hover(function(e){e=parseInt(e.currentTarget.getAttribute("data-nav-index"));r.flickity("select",e)})},startAutoPlay:function(){s(e,t).length&&s(e,t).each(function(e,t){t=Flickity.data(t);t&&t.autoPlay&&t.playPlayer()})},destroy:function(){0<s(e,t).length&&s(e,t).each(function(e,t){r(s(t))}),0<s(i,t).length&&s(i,t).each(function(e,t){r(s(t))})},destroySliderPlugins:r}}(jQuery);
/*
 *  TextFill
 */
!function(r,e,t,n){"use strict";var a="textFill",i={maxFontSize:100,textAlignment:"center",fontFamily:"sans-serif",fontWeight:"bold",relative:!1,relativeWrap:""};function h(t,e){this.element=t,this.$element=r(t),this.settings=r.extend({},i,e),this._defaults=i,this._name=a,this.properties={canvas:null,text:"",ctx:null,img:null,background:null,lines:null,wrap:null},this.init()}r.extend(h.prototype,{init:function(){this._defineSettings(),this._defineProperties(),this._attachImage();var t=this;r(e).on("resize",function(){t._resizeCanvas(),t._drawText()})},_defineSettings:function(){this.settings.maxFontSize=parseInt(this.element.dataset.maxFontSize||this.element.getAttribute("data-max-font-size")||this.settings.maxFontSize),this.settings.textAlignment=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.textAlign||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-text-align")||this.settings.textAlignment,this.settings.relativeWrap=this.element.getAttribute("data-relative-wrap")||this.settings.relativeWrap},_defineProperties:function(){this.properties.canvas=this.element.getElementsByClassName("text-fill-canvas")[0],this.properties.text=this.properties.canvas.textContent,this.properties.ctx=this.properties.canvas.getContext("2d"),this.properties.img=t.createElement("img"),this.properties.background=this.element.getElementsByClassName("text-fill-canvas-background")[0].dataset.backSrc||this.element.getElementsByClassName("text-fill-canvas-background")[0].getAttribute("data-back-src"),this.settings.relative&&""!==this.settings.relativeWrap&&(this.properties.wrap=r(this.element).parents(this.settings.relativeWrap)[0],void 0===this.properties.wrap)&&(this.settings.relative=!1)},_attachImage:function(){this.properties.img.src=this.properties.background;var t=this;this.properties.img.onload=function(){t._resizeCanvas(),t._drawText(),t.$element.trigger("textfill-render-complete")}},_drawText:function(){var t,e=this._calcFontSize(this.settings.maxFontSize);switch(this.properties.ctx.font=this.settings.fontWeight+" "+e+"px "+this.settings.fontFamily,this.properties.rows=this._numRows(this.properties.ctx,this.properties.text,(this.properties.relative?this.properties.wrap:this.element).offsetWidth-20),this.properties.canvas.height=this.properties.ctx.height=this.properties.rows*e,this.properties.ctx.clearRect(0,0,this.properties.canvas.width,this.properties.canvas.height),this.properties.ctx.font=this.settings.fontWeight+" "+e+"px "+this.settings.fontFamily,this.properties.ctx.fillStyle=this.properties.ctx.createPattern(this.properties.img,"repeat"),this.properties.ctx.textAlign=this.settings.textAlignment,this.properties.ctx.textBaseline="middle",this.settings.textAlignment){case"left":t=0;break;case"right":t=this.properties.canvas.width;break;default:t=this.properties.canvas.width/2}this._wrapText(this.properties.ctx,this.properties.text,t,e/2,(this.properties.relative?this.properties.wrap:this.element).offsetWidth-20,e)},_calcFontSize:function(t){var e=this.settings.maxFontSize/1e3;return this.properties.relative?this.properties.wrap.offsetWidth*e:this.element.offsetWidth*e},_wrapText:function(t,e,i,s,r,n){for(var a=e.split(" "),h=(t.measureText(a).width,""),p=0;p<a.length;p++){var o=h+a[p]+" ";r<t.measureText(o).width&&0<p?(t.fillText(h,i,s),h=a[p]+" ",s+=n):h=o}h=h.trim(),t.fillText(h,i,s)},_numRows:function(t,e,i){for(var s=new Array,r=e.split(" "),n=1,a=0;a<r.length;a++)s.unshift(" "),s.unshift(r[a]),i<this._partialTextLenght(t,s)&&(s.splice(1,s.length),n++);return n<=r.length?n:r.length},_partialTextLenght:function(t,e){for(var i=0,s=0;s<e.length;s++)i+=t.measureText(e[s]).width;return i},_resizeCanvas:function(){this.properties.canvas.width=this.properties.ctx.canvas.width=Math.floor((this.properties.relative?this.properties.wrap:this.element).offsetWidth),this.properties.canvas.height=this.properties.ctx.canvas.height=this._calcFontSize(this.settings.maxFontSize+50)},_calcSlope:function(t,e){return(e[1]-t[1])/(e[0]-t[0])}}),r.fn[a]=function(e){var i,s=arguments;return e===n||"object"==typeof e?this.each(function(){r.data(this,"plugin_"+a)||r.data(this,"plugin_"+a,new h(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=r.data(this,"plugin_"+a);t instanceof h&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(s,1))),"destroy"===e&&r.data(this,"plugin_"+a,null)}),i!==n?i:this):void 0}}(jQuery,window,document);
var VimeoVideo=function(t){"use strict";function e(e){var n=e;0<o.length&&o.each(function(e,i){var o=t(i).attr("data-vimeo-video-mute"),i=t(i).find("iframe")[0];"undefined"!=typeof Vimeo&&n.addPlayer(o,i)})}var i=null,o=null;return{init:function(){this.blockVideos=[],i=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--section"),o=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--block"),0<i.length&&i.each(function(e,i){var o,i=t(i).find("iframe")[0];"undefined"!=typeof Vimeo&&(o=new Vimeo.Player(i)).ready().then(function(){o.setVolume(0)})}),e(this)},findVideo:function(e){if(void 0!==this.blockVideos)for(var i=0,o=this.blockVideos.length;i<o;i++)if(this.blockVideos[i].el===e)return this.blockVideos[i].player;return null},initBlockVideos:e,addPlayer:function(e,i,o){var n;void 0!==this.blockVideos&&(n=void 0!==o?new Vimeo.Player(i,o):new Vimeo.Player(i),"1"==e&&n.ready().then(function(){n.setVolume(0)}),o={el:i,player:n},this.blockVideos.push(o))},removePlayer:function(e){for(var i=!1,o=this.blockVideos.length,n=0;n<o;n++)if(this.blockVideos[n].el===e){this.blockVideos[n].player.destroy().then(function(){}).catch(function(e){}),i=!0;break}i&&this.blockVideos.splice(n,1)}}}(jQuery);
/*
 *  rexAccordion - v1.0.0
 *
 *  Made by NEWEB di Simone Forgiarini
 */
!function(i,t){"use strict";var l="rexAccordion",c={selectors:{self:".rex-accordion",toggle:".rex-accordion--toggle",content:".rex-accordion--content"},duration:150,durationOpen:null,durationClose:null,noToggleClass:"no-toggle"};function o(t,e){this.element=t,this.$element=i(t),this.settings=i.extend({},c,e),this._defaults=c,this._name=l,null==this.settings.durationOpen&&(this.settings.durationOpen=this.settings.duration),null==this.settings.durationClose&&(this.settings.durationClose=this.settings.duration);var t=this.$element.find(this.settings.selectors.toggle),e=this.$element.find(this.settings.selectors.content),s=this,n=[],o=(t.each(function(t,e){i(e).closest(s.settings.selectors.self).is(s.$element)&&n.push(e)}),[]);e.each(function(t,e){i(e).closest(s.settings.selectors.self).is(s.$element)&&o.push(e)}),this.properties={$toggle:i(n),$content:i(o)},this.init()}i.extend(o.prototype,{init:function(){var s=this;"function"==typeof this.settings.onSetup&&this.settings.onSetup.call(this),this.updateState(),this.properties.$toggle.each(function(e,t){i(t).on("click",function(t){i(t.target).hasClass(s.settings.noToggleClass)||0!==i(t.target).parents("."+s.settings.noToggleClass).length||s._handle_click(e)})})},updateState:function(){this.$element.hasClass("close")&&this.close_all(),this.$element.hasClass("open")&&this.open_all()},_handle_click:function(n){var o=this;1==this.properties.$toggle.length?this.$element.hasClass("open")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):this.$element.hasClass("close")&&(this.$element.addClass("open").removeClass("close"),this.properties.$content.slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):1<this.properties.$toggle.length&&(this.$element.hasClass("open")?"open"==this.properties.$content.eq(n).attr("data-item-status")?(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(n).slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")):(this.$element.addClass("close").removeClass("close"),this.properties.$content.not(n).slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.eq(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")):this.$element.hasClass("close")&&("close"==this.properties.$content.eq(n).attr("data-item-status")?(this.$element.addClass("open").removeClass("close"),this.properties.$content.eq(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}})):(this.$element.addClass("close").removeClass("open"),this.properties.$content.eq(n).slideUp({duration:this.settings.duration,start:function(t){"function"==typeof o.settings.close.startClbk&&o.settings.close.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.close.progressClbk&&o.settings.close.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.close.completeClbk&&o.settings.close.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close"),this.properties.$content.not(n).slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof o.settings.open.startClbk&&o.settings.open.startClbk.call(this,o,n)},progress:function(t,e,s){"function"==typeof o.settings.open.progressClbk&&o.settings.open.progressClbk.call(this,o,e,n)},complete:function(){"function"==typeof o.settings.open.completeClbk&&o.settings.open.completeClbk.call(this,o,n),o.$element.trigger("rex_accordion:open")}}))).attr("data-item-status","open"))},open_single_accordion:function(){var n=this;this.$element.addClass("open").removeClass("close"),this.properties.$content.slideDown({duration:this.settings.durationOpen,start:function(t){"function"==typeof n.settings.open.startClbk&&n.settings.open.startClbk.call(this,n)},progress:function(t,e,s){"function"==typeof n.settings.open.progressClbk&&n.settings.open.progressClbk.call(this,n,e)},complete:function(){"function"==typeof n.settings.open.completeClbk&&n.settings.open.completeClbk.call(this,n),n.$element.trigger("rex_accordion:open")}}).attr("data-item-status","open")},close_single_accordion:function(){var n=this;this.$element.addClass("close").removeClass("open"),this.properties.$content.slideUp({duration:this.settings.durationClose,start:function(t){"function"==typeof n.settings.close.startClbk&&n.settings.close.startClbk.call(this,n)},progress:function(t,e,s){"function"==typeof n.settings.close.progressClbk&&n.settings.close.progressClbk.call(this,n,e)},complete:function(){"function"==typeof n.settings.close.completeClbk&&n.settings.close.completeClbk.call(this,n),n.$element.trigger("rex_accordion:close")}}).attr("data-item-status","close")},open_all:function(){this.properties.$content.attr("data-item-status","open"),this.properties.$content.css("display","block"),this.$element.hasClass("close")&&this.$element.addClass("open").removeClass("close")},close_all:function(){this.properties.$content.attr("data-item-status","close"),this.properties.$content.css("display","none"),this.$element.hasClass("open")&&this.$element.addClass("close").removeClass("open")},getState:function(){return this.properties.$content.attr("data-item-status")}}),i.fn[l]=function(e){var s,n=arguments;return e===t||"object"==typeof e?this.each(function(){i.data(this,"plugin_"+l)||i.data(this,"plugin_"+l,new o(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=i.data(this,"plugin_"+l);t instanceof o&&"function"==typeof t[e]&&(s=t[e].apply(t,Array.prototype.slice.call(n,1))),"destroy"===e&&i.data(this,"plugin_"+l,null)}),s!==t?s:this):void 0}}(jQuery,(window,void document));
!function(){"use strict";jQuery.fn.reverse=[].reverse}();
/*
 *  Perfect Grid Gallery Editor
 *  @since 2.0.0
 */
!function(A,f,u,a,_){"use strict";var x,y,s="perfectGridGalleryEditor",i={itemSelector:".perfect-grid-item",gridItemWidth:.0833333333,numberCol:12,gridSizerSelector:".perfect-grid-sizer",galleryLayout:"fixed",separator:20,fullHeight:"false",gridParentWrap:".rexpansive_section",mobilePadding:"false",cellHeightMasonry:5,scrollbarWrapClass:".rexlive-custom-scrollbar",editorMode:!1},k="classList"in u.documentElement?(x=function(t,e){return t.classList.contains(e)},y=function(t,e){t.classList.add(e)},function(t,e){t.classList.remove(e)}):(x=function(t,e){return new RegExp("\\b"+e+"\\b").test(t.className)},y=function(t,e){x(t,e)||(t.className+=" "+e)},function(t,e){t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")});function t(t){return t%2==0}function R(t){var e,i,r,s,a;return 0===t.length?0:(i=t[e=0],r=t.parents(".perfect-grid-item").hasClass("block-has-slider"),(a=(s=i.cloneNode(!0)).querySelector(".text-editor-span-fix"))&&a.parentNode.removeChild(a),r||0===s.textContent.trim().length&&0===s.childElementCount||(!x(i,"medium-editor-placeholder")||0<s.childElementCount||0!=t.parents(".pswp-item").length)&&(e=i.offsetHeight),e)}function o(t,e){for(var i,r,s=t[0],a=s.getAttribute("data-rexbuilder-block-id"),o=e.split(", "),l=o.length,n=0;n<l;n++)i=u.createElement("span"),y(i,"circle-handle"),y(i,"circle-handle-"+o[n]),i.setAttribute("data-axis",o[n]),r=u.createElement("div"),y(r,"ui-resizable-handle"),y(r,"ui-resizable-"+o[n]),r.setAttribute("data-axis",o[n]),"DIV"===s.tagName.toUpperCase()&&""!==a&&r.setAttribute("id","_handle_"+o[n]),i=A(i),r=A(r),i.appendTo(r),r.appendTo(t)}function e(t){this.batchGridstack(),this.updateCollapsedBlocksHeight(),this.commitGridstack(),setTimeout(function(t){this._updateElementsSizeViewers(),this._createFirstReverseStack(),this._fixImagesDimension();var e=this.$section;{var i;setTimeout(Rexbuilder_Util.fixYoutube.bind(null,e[0]),1500),Rexbuilder_Util.windowIsResizing||Rexbuilder_Util.domUpdating||((i=jQuery.Event("rexlive:collapsingElementsEnded")).settings={galleryEditorInstance:this,$section:e,reverseData:t},A(u).trigger(i))}}.bind(this,t),500),this.properties.collapsingElements=!1}var l=function(){var t,e=u.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(e.style[t]!==_)return i[t]}();function r(t,e){void 0!==e&&(Rexbuilder_Util_Editor.elementIsDragging=!0,e.helper.eq(0).find(".text-wrap").blur())}function n(t){Rexbuilder_Util_Editor.elementDraggingTriggered||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=t.currentTarget.getAttribute("data-rexbuilder-block-id")&&(Rexbuilder_Util_Editor.activateElementFocus=!1,Rexbuilder_Util_Editor.endEditingElement(),Rexbuilder_Util_Editor.activateElementFocus=!0)}function d(t,e){this.element=t,this.$element=A(t),this.settings=A.extend({},i,e),this._defaults=i,this._name=s,this.properties={halfSeparator:0,halfSeparatorTop:0,halfSeparatorRight:0,halfSeparatorBottom:0,halfSeparatorLeft:0,halfSeparatorElementTop:0,halfSeparatorElementRight:0,halfSeparatorElementBottom:0,halfSeparatorElementLeft:0,gridTopSeparator:null,gridRightSeparator:null,gridBottomSeparator:null,gridLeftSeparator:null,wrapWidth:0,singleWidth:0,singleHeight:0,paddingTopBottom:!1,setMobilePadding:!1,setDesktopPadding:!1,gutter:0,elementStartingH:0,resizeHandle:"",sectionNumber:null,gridstackInstance:null,gridstackInstanceID:null,serializedData:[],firstStartGrid:!1,gridBlocksHeight:0,editedFromBackend:!1,oneColumModeActive:!1,oldLayout:"",oldCellHeight:0,blocksBottomTop:null,updatingSectionSameGrid:!1,blocksDimensions:[],reverseDataGridDisposition:{},collapsingElements:!1,lastIDBlock:0,numberBlocksVisibileOnGrid:0,beforeCollapseWasFixed:!1,dispositionBeforeCollapsing:{},layoutBeforeCollapsing:{},initialStateGrid:null,mirrorStateGrid:null,fullWidthNaturalBackground:!1,naturalBackground:!1,isGridLocked:!1},this.$section=this.$element.parents(this._defaults.gridParentWrap),this.section=this.$section[0],this.init()}A.extend(d.prototype,{init:function(){"true"!=this.$section.children(".section-data").attr("data-row_edited_live")&&(this.properties.editedFromBackend=!0),this.properties.firstStartGrid=!0,this._setGridID(),this._updateBlocksRexID(),this._countBlocks(),this.clearStateGrid(),this._defineDataSettings(),this._setGutter(),this._defineHalfSeparatorProperties(),this._defineRowSeparator(),this._defineFullWidthNaturalBackground(),this._defineNaturalBackground(),this._setGridPadding(),this._defineDynamicPrivateProperties(),this._prepareElements(),this._launchGridStack(),this.$element.on("change",function(t,e){this.element!=t.target||Rexbuilder_Util_Editor.undoActive||Rexbuilder_Util_Editor.redoActive||Rexbuilder_Util_Editor.updatingRowDistances||Rexbuilder_Util_Editor.updatingSectionMargins||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util.domUpdating||Rexbuilder_Util.windowIsResizing||this.properties.collapsingElements||Rexbuilder_Util_Editor.addingNewBlocks||Rexbuilder_Util_Editor.removingBlocks||Rexbuilder_Util_Editor.updatingImageBg||Rexbuilder_Util_Editor.updatingPaddingBlock||Rexbuilder_Util_Editor.updatingCollapsedGrid||Rexbuilder_Util_Editor.openingModel||Rexbuilder_Util_Editor.blockCopying||Rexbuilder_Util_Editor.savingPage||Rexbuilder_Util_Editor.savingModel||!Rexbuilder_Util_Editor.needToSave||(e={eventName:"rexlive:edited",modelEdited:this.$section.hasClass("rex-model-section")},Rexbuilder_Util_Editor.sendParentIframeMessage(e),"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.updateDefaultLayoutStateSection(this.$section),t=this.createActionDataMoveBlocksGrid(),this.$element.attr("data-rexlive-layout-changed",!0),Rexbuilder_Util_Editor.pushAction(this.$section,"updateSectionBlocksDisposition",A.extend(!0,{},t),A.extend(!0,{},this.properties.reverseDataGridDisposition)),this.properties.reverseDataGridDisposition=t)}.bind(this)),this.$element.on("dblclick",".perfect-grid-item",function(t){var e,i,r;return"default"===Rexbuilder_Util.activeLayout&&!t.currentTarget.classList.contains("block-has-slider")&&void((!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=t.currentTarget.getAttribute("rexbuilder-block-id"))&&(e=(r=A(t.currentTarget)).find(".text-wrap"),Rexbuilder_Util_Editor.editingElement=!0,Rexbuilder_Util_Editor.editedElement=r,Rexbuilder_Util_Editor.editedTextWrap=e,Rexbuilder_Util_Editor.editingGallery=!0,Rexbuilder_Util_Editor.editedGallery=this,e.is(":focus")||("begin"==(x(t.currentTarget,"rex-flex-top")?"end":x(t.currentTarget,"rex-flex-middle")?(r=t.currentTarget.getAttribute("data-gs-height")?parseInt(t.currentTarget.getAttribute("data-gs-height"))*this.properties.singleHeight-this.properties.gutter:r.innerHeight(),i=e.innerHeight(),t.offsetY<r/2-i/2?"begin":"end"):x(t.currentTarget,"rex-flex-bottom")?"begin":"end")?e.focus():Rexbuilder_Live_Utilities.setEndOfContenteditable(e[0])),r=new CustomEvent("rexpansive:perfect-grid-gallery:block:dbclick",{detail:{block:t.currentTarget}}),u.dispatchEvent(r),Rexbuilder_Util_Editor.startEditingElement()))}.bind(this)),this.$element.on("click",".perfect-grid-item",n),this._updateElementsSizeViewers(),this._linkResizeEvents(),this._linkDragEvents(),this._linkDnDEvents(),this._createFirstReverseStack(),this._updatePlaceholderPosition(),this.saveStateGrid();var t=this.section.getAttribute("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(null===t||"true"==t.toString())&&this.collapseElements(),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady(),this.properties.firstStartGrid=!1},_launchGridStack:function(){this.$element.gridstack({auto:!1,autoHide:!1,animate:!0,acceptWidgets:!1,alwaysShowResizeHandle:!0,disableOneColumnMode:!0,cellHeight:this.properties.singleHeight,draggable:{containment:this.element,handle:".rexlive-block-drag-handle",scroll:!1},float:"masonry"!=this.settings.galleryLayout,resizable:{minWidth:this.properties.singleWidth,minHeight:this.properties.singleHeight,handles:{e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw"}},verticalMargin:0,width:this.settings.numberCol}),this.$element.addClass("gridActive"),this.setGridstackIstanceNumber(),this.properties.gridstackInstance=this.$element.data("gridstack"),this.makeWidgets();for(var t=this.properties.gridstackInstance,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)x(e[r],"rex-hide-element")&&t.removeWidget(e[r],!1);for(Rexbuilder_Util.domUpdating||void 0!==Rexbuilder_Util_Editor.sectionCopying&&!1!==Rexbuilder_Util_Editor.sectionCopying||this.updateBlocksHeight(),r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data");this.updateElementDataHeightProperties(s,parseInt(e[r].getAttribute("data-gs-height")))}},makeWidgets:function(){var t=Array.prototype.slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0;if(0!==t){for(this.properties.gridstackInstance.batchUpdate(),i=0;i<e;i++)this.properties.gridstackInstance.makeWidget(t[i]);this.properties.gridstackInstance.commit()}},triggerGalleryReady:function(){var t=jQuery.Event("rexlive:galleryReady");t.gallery=this,t.galleryID=this.properties.sectionNumber,A(u).trigger(t)},reInitGridFront:function(t){this.settings.galleryLayout=(t=void 0!==t?t:{}).galleryLayout,this._prepareElements(),this._launchGridStack();var e=this.$section.attr("data-rex-collapse-grid");this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:t.galleryLayout,fullHeight:t.fullHeight,singleHeight:this.properties.singleHeight},"default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.defaultSettings.collapseWidth&&(void 0===e||"true"==e.toString())&&this.collapseElements(),this.fix_natural_image_blocks(),this.save_grid_state(),this.triggerGalleryReady()},createActionDataMoveBlocksGrid:function(t,e){t=void 0!==t?t:null,e=void 0!==e&&e;for(var i=[],r=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder), .grid-stack-item:not(.removing_block)")),s=r.length,a=0,a=0;a<s;a++){var o=r[a].getAttribute("data-rexbuilder-block-id"),l=parseInt(r[a].getAttribute("data-gs-x")),n=parseInt(r[a].getAttribute("data-gs-y")),d=parseInt(r[a].getAttribute("data-gs-width")),p=parseInt(r[a].getAttribute("data-gs-height")),h={rexID:o,elem:r[a],x:l,y:n,w:d,h:p};switch(t){case"masonry":h.h=Math.floor(h.h*this.properties.singleWidth/5),h.y=Math.floor(h.y*this.properties.singleWidth/5);break;case"fixed":h.h=Math.floor(5*h.h/this.properties.singleWidth),h.y=Math.floor(5*h.y/this.properties.singleWidth)}e&&(h.w=12,h.x=0),i.push(h)}return{gridstackInstance:this.properties.gridstackInstance,blocks:i,cellHeight:this.properties.singleHeight}},_createFirstReverseStack:function(){this.properties.reverseDataGridDisposition=this.createActionDataMoveBlocksGrid()},clearStateGrid:function(){for(var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)t=e[r].getAttribute("data-rexbuilder-block-id"),store.remove(t),store.remove(t+"_noEdits")},saveStateGrid:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++){var r=t[i].getAttribute("data-rexbuilder-block-id"),s=parseInt(t[i].getAttribute("data-gs-x")),a=parseInt(t[i].getAttribute("data-gs-y")),o=parseInt(t[i].getAttribute("data-gs-width")),l=parseInt(t[i].getAttribute("data-gs-height"));store.set(r,{properties:[{x:s},{y:a},{w:o},{h:l}]}),store.set(r+"_noEdits",{properties:[{x:s},{y:a},{w:o},{h:l}]})}},updateGridSettingsChangeLayout:function(t){this.properties.firstStartGrid=!0,this.$element.removeClass("grid-number-"+this.properties.sectionNumber),this.settings.fullHeight=void 0!==t.full_height&&t.full_height.toString(),this.properties.elementStartingH=0,this.properties.resizeHandle="",this.properties.firstStartGrid=!1,this.properties.editedFromBackend=!1,this.properties.oneColumModeActive=!1,this.properties.updatingSectionSameGrid=!1,this.properties.blocksBottomTop=null,this.settings.galleryLayout=t.layout;var e=parseInt(t.gutter),i=parseInt(t.top),r=parseInt(t.right),s=parseInt(t.bottom),t=parseInt(t.left),e={gutter:isNaN(e)?20:e,top:isNaN(i)?20:i,right:isNaN(r)?20:r,bottom:isNaN(s)?20:s,left:isNaN(t)?20:t};this._setGridID(),this.updateGridDistance(e),this.updateFloatingElementsGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.clearStateGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.removeCollapseElementsProperties()},updateGridLayout:function(t,i){var r;this.settings.galleryLayout!==t&&(this._saveBlocksPosition(),this.removeCollapseElementsProperties(),this.properties.oldCellHeight=this.properties.singleHeight,this.properties.oldLayout=this.settings.galleryLayout,this.settings.galleryLayout=t,this.settings.fullHeight="false",this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),this.updateLayoutBlocksHeight(),this.updateFloatingElementsGridstack(),this.commitGridstack(),void 0!==i)&&(r=this,setTimeout(function(){var t=r,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:galleryLayoutChanged"));e.settings={galleryEditorInstance:t,$section:r.$section,reverseData:i},r.properties.oldLayout="",r.properties.oldCellHeight=r.properties.singleHeight,A(u).trigger(e)},300,i,r))},updateFloatingElementsGridstack:function(){var t=this.properties.gridstackInstance;t&&("masonry"==this.settings.galleryLayout?(t.grid._float=!1,t.grid.float=!1):(t.grid._float=!0,t.grid.float=!0))},updateGridstack:function(t){this.batchGridstack(),this._defineDynamicPrivateProperties(),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(),this.commitGridstack()},updateGridstackWidth:function(){this.batchGridstack(),this._defineDynamicPrivateProperties(),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!1,this.properties.gridstackInstance.grid.float=!1),this.updateGridstackStyles(),Rexbuilder_Util.domUpdating||this.updateBlocksHeight(!0),"fixed"===this.settings.galleryLayout&&(this.properties.gridstackInstance.grid._float=!0,this.properties.gridstackInstance.grid.float=!0),this.commitGridstack()},updateSectionWidthWrap:function(t,i){var r,e=this.$element.parent();"100%"==t?(e.removeClass("center-disposition"),e.addClass("full-disposition")):(e.removeClass("full-disposition"),e.addClass("center-disposition")),e.css("max-width",t),void 0!==i&&(this.updateGridstackWidth(),r=this,setTimeout(function(){var t=r,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:sectionWidthApplyed"));e.settings={galleryEditorInstance:t,$section:r.$section,reverseData:i},A(u).trigger(e)},300,i,r))},updateRowDistances:function(i,r){var s;this.updateGridDistance(i),void 0!==r&&((s=this).updateGridstack(),setTimeout(function(){var t=s,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:rowDistancesApplied"));e.settings={galleryEditorInstance:t,$section:s.$section,newDistances:i,reverseData:r},A(u).trigger(e)},300,r,s,i))},updateRowSectionMargins:function(i,r){var s;void 0!==r&&((s=this).updateGridstack(),setTimeout(function(){var t=s,e=(t._updateElementsSizeViewers(),jQuery.Event("rexlive:sectionMarginsApplied"));e.settings={galleryEditorInstance:t,$section:s.$section,newMargins:i,reverseData:r},A(u).trigger(e)},300,r,s,i))},updateGridDistance:function(t){this.properties.gutter=parseInt(t.gutter),this.properties.gridTopSeparator=parseInt(t.top),this.properties.gridRightSeparator=parseInt(t.right),this.properties.gridBottomSeparator=parseInt(t.bottom),this.properties.gridLeftSeparator=parseInt(t.left),this._setGutter(),this._defineHalfSeparatorProperties(),this.properties.setDesktopPadding=!1,this._setGridPadding();for(var e,i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)e=A(i[s]),this._updateElementPadding(e.find(".grid-stack-item-content")),this._updateHandlersPosition(e);this._updatePlaceholderPosition()},refreshGrid:function(){this._defineDynamicPrivateProperties(),this._setGridPadding(),this._fixHeightAllElements()},_countBlocks:function(){for(var t=0,i=0,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=e.length,s=0,s=0;s<r;s++){for(var a,t=s,o=/\d+$/gm,l=e[s].getAttribute("id");null!==(a=o.exec(l));)a.i===o.lastIndex&&o.lastIndex++,A.each(a,function(t,e){i=parseInt(e)});t<i&&(t=i)}this.properties.numberBlocksVisibileOnGrid=t,this.properties.lastIDBlock=t},getLastID:function(){return this.properties.lastIDBlock},getRowNumber:function(){return this.properties.sectionNumber},_setGridID:function(){this.properties.sectionNumber=parseInt(this.section.getAttribute("data-rexlive-section-number")),y(this.element,"grid-number-"+this.properties.sectionNumber)},_updateBlocksRexID:function(){for(var t,e,i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)(i[s].getAttribute("data-rexbuilder-block-id")===_||""==i[s].getAttribute("data-rexbuilder-block-id"))&&(t=Rexbuilder_Util.createBlockID(),i[s].setAttribute("data-rexbuilder-block-id",t),e=i[s].querySelector(".rexbuilder-block-data"))&&e.setAttribute("data-rexbuilder_block_id",t)},saveGrid:function(){var i="masonry"==this.settings.galleryLayout?this.properties.singleHeight/this.properties.singleWidth:1;this.serializedData=a.map(this.$element.children(".grid-stack-item"),function(t){var e=A(t).data("_gridstack_node");return{id:t.id,x:e.x,y:Math.round(e.y*i),width:e.width,height:Math.round(e.height*i)}},this)},getGridData:function(){return JSON.stringify(this.serializedData,null,"    ")},getGridstackNodes:function(){return this.properties.gridstackInstance.grid.nodes},getElementBottomTop:function(){for(var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)x(i[s],"removing_block")||((t=i[s]).x=parseInt(i[s].attributes["data-gs-x"].value),t.y=parseInt(i[s].attributes["data-gs-y"].value),t.w=parseInt(i[s].attributes["data-gs-width"].value),t.h=parseInt(i[s].attributes["data-gs-height"].value),t.xw=t.x+t.w,t.yh=t.y+t.h,e.push(t));return a.sortBy(e,[function(t){return t.yh},function(t){return t.xw}]).reverse()},getElementsTopBottom:function(){for(var t,e=[],i=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)x(i[s],"removing_block")||((t=i[s]).x=parseInt(i[s].getAttribute("data-gs-x")),t.y=parseInt(i[s].getAttribute("data-gs-y")),e.push(t));return a.sortBy(e,[function(t){return t.y},function(t){return t.x}])},batchGridstack:function(){null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.batchUpdate()},commitGridstack:function(){Rexbuilder_Util.domUpdating||null!==this.properties.gridstackInstance&&this.properties.gridstackInstance.commit()},updateFullHeight:function(t){var e;t=void 0===t||"true"==t.toString(),this.properties.gridBlocksHeight=parseInt(this.element.getAttribute("data-gs-current-height")),this.properties.gridBlocksHeight=0===this.properties.gridBlocksHeight?1:this.properties.gridBlocksHeight,t?"fixed"==this.settings.galleryLayout&&(e=Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):e="fixed"==this.settings.galleryLayout?this.properties.singleWidth:this.properties.singleHeight,"masonry"!==this.settings.galleryLayout&&(this.updateGridstackStyles(e),this.$element.attr("data-full-height",t))},updateGridstackStyles:function(t){void 0!==t&&(this.properties.singleHeight=t),0!==this.properties.singleHeight&&null!==this.element.offsetParent&&null!==this.properties.gridstackInstance&&((t=this.properties.gridstackInstance).cellHeight(this.properties.singleHeight),t._initStyles(),t._updateStyles(this.properties.singleHeight))},updateGridstackGridSizes:function(t,e){this.properties.singleHeight=e,this.properties.singleWidth=t;t=this.properties.gridstackInstance;t.cellHeight(e),t._initStyles(),t._updateStyles(this.properties.singleHeight)},restoreBackup:function(){var t;this.$element.children(".grid-stack-item").each(function(){A(t=this).attr({"data-gs-x":t.attributes["data-col"].value-1,"data-gs-y":t.attributes["data-row"].value-1,"data-gs-width":t.attributes["data-width"].value,"data-gs-height":t.attributes["data-height"].value})})},destroyGridstack:function(){var t;null!==this.properties.gridstackInstance&&(this.properties.gridstackInstance.destroy(!1),this.$element.children(".grid-stack-item").each(function(){(t=A(this)).draggable("destroy"),t.resizable("destroy")}),k(this.element,"grid-stack-instance-"+this.properties.gridstackInstanceID),x(this.element,"grid-stack-one-column-mode")&&k(this.element,"grid-stack-one-column-mode"),this.properties.gridstackInstance=null)},getGridWidth:function(){return this.properties.wrapWidth},setGridWidth:function(t){this.$element.outerWidth(t)},getSingleWidth:function(){return this.properties.singleWidth},getSeparator:function(){return this.properties.gutter},getSectionNumber:function(){return this.properties.sectionNumber},setProperty:function(t){this.properties[t[0]]=t[1]},fillEmptySpaces:function(){for(var t,e,i,r=this.settings.numberCol,s=this._calculateGridHeight(),a=this.properties.gridstackInstance,o=[],l=1;l<=s;l++)for(g=1;g<=r;g++)if(a.isAreaEmpty(g-1,l-1,1,1)){for(t=0,0,e=g,i=l;e<=r&&a.isAreaEmpty(e-1,i-1,1,1);)t=e,e++;for(d=e-g,i++,e=g;i<=s;){for(;e<=t&&a.isAreaEmpty(e-1,i-1,1,1);)e++;if(e-1!=t)break;i++,e=g}var n=i-l,d={el:u.createElement("div"),x:g-1,y:l-1,w:d,h:n};a.addWidget(d.el,d.x,d.y,d.w,d.h,!1),o.push(d)}for(var p=this.properties.singleWidth,h=o.length,g=0;g<h;g++)a.removeWidget(o[g].el,!0),"masonry"==this.settings.galleryLayout&&(o[g].y=Math.floor(o[g].y*this.properties.singleHeight/p)+1,o[g].h=Math.round(o[g].h*this.properties.singleHeight/p));return o},removeBlock:function(t){this.properties.numberBlocksVisibileOnGrid--,this.properties.gridstackInstance.removeWidget(t,!1),"default"==Rexbuilder_Util.activeLayout&&y(t,"removing_block"),y(t,"rex-hide-element")},reAddBlock:function(t){var e,i,r,s;this.properties.numberBlocksVisibileOnGrid++,e=parseInt(t.attr("data-gs-x")),i=parseInt(t.attr("data-gs-y")),r=parseInt(t.attr("data-gs-width")),s=parseInt(t.attr("data-gs-height")),"default"==Rexbuilder_Util.activeLayout&&t.removeClass("removing_block"),t.removeClass("rex-hide-element"),t.draggable("destroy"),t.resizable("destroy"),t.children(".ui-resizable-handle").remove(),o(t,"e, s, w, se, sw"),this._updateHandlersPosition(t),this.properties.gridstackInstance.addWidget(t[0],e,i,r,s,!1,1,500,1)},deleteBlock:function(t){var e={targetElement:t,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)},t=(this.removeBlock(t.get(0)),this._createFirstReverseStack(),Rexbuilder_Util.stopBlockVideos(t),0==this.properties.numberBlocksVisibileOnGrid?this.$section.addClass("empty-section"):(this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide")),{targetElement:t,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)});Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",t,e)},createNewBlock:function(t,e,i,r){r=void 0!==r?r:"",Rexbuilder_Util_Editor.addingNewBlocks=!0;e=void 0===e?"text"==r?12:6:parseInt(e),i="masonry"==t?void 0===i?Math.round(4*this.properties.singleWidth/this.settings.cellHeightMasonry):parseInt(i):void 0===i?4:parseInt(i),e=parseInt(e),i=parseInt(i);var t=this.createBlock(0,0,e,i,r),r={targetElement:t,hasToBeRemoved:!0,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)},s=(this.properties.gridstackInstance.addWidget(t[0],0,0,e,i,!0,1,500,1),t.filter(".insert-block-animation").one(l,function(t){this.classList.remove("insert-block-animation")}),parseInt(t.attr("data-gs-x"))),a=parseInt(t.attr("data-gs-y")),s=(this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.update(t[0],s,a,e,i),this.properties.gridstackInstance.commit(),this._createFirstReverseStack(),{targetElement:t,hasToBeRemoved:!1,galleryInstance:this,blocksDisposition:A.extend(!0,{},this.properties.reverseDataGridDisposition)});return Rexbuilder_Util_Editor.pushAction(this.$element,"updateBlockVisibility",s,r),Rexbuilder_Util_Editor.addingNewBlocks=!1,t.removeAttr("data-gs-auto-position"),t.data("gs-height",parseInt(t.attr("data-gs-height"))),t.data("gs-width",parseInt(t.attr("data-gs-width"))),t.data("gs-y",parseInt(t.attr("data-gs-y"))),t.data("gs-x",parseInt(t.attr("data-gs-x"))),t},createBlock:function(t,e,i,r,s){s=void 0!==s?s:"",this.properties.numberBlocksVisibileOnGrid++,this.$section.removeClass("empty-section").removeClass("activeRowTools"),Rexbuilder_Util.$rexContainer.parent().removeClass("add-new-section--hide"),this.properties.lastIDBlock=this.properties.lastIDBlock+1;var a=this.properties.lastIDBlock,o=Rexbuilder_Util.createBlockID(),o=(tmpl.arg="block",tmpl("tmpl-new-block",{rexID:o,id:this.properties.sectionNumber+"_"+a,gsWidth:i,gsHeight:r,gsX:t,gsY:e,backendHeight:r,backendWidth:i,backendX:t+1,backendY:e+1,block_type:s,defaultPadding:{data:_plugin_frontend_settings.defaults.block.padding,style:_plugin_frontend_settings.defaults.block.padding.replaceAll(";"," ").trim()}})),a=A(o),t=(a.append(Rexbuilder_Live_Templates.getTemplate("tmpl-toolbox-block-wrap",{block_type:s})),a[0]);return this._prepareElement(t),this.updateSizeViewerText(t,i,r),a},updateAllElementsProperties:function(){this.properties.editedFromBackend=!1;var t=[].slice.call(this.element.querySelectorAll(".grid-stack-item:not(.grid-stack-placeholder)")),e=t.length,i=0;if(this.properties.updatingSectionSameGrid)for(this.properties.updatingSectionSameGrid=!1,i=0;i<e;i++)this.updateElementAllProperties(t[i]),void 0!==store.get(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits")&&store.remove(t[i].getAttribute("data-rexbuilder-block-id")+"_noEdits");for(i=0;i<e;i++)this.updateElementAllProperties(t[i])},updateElementAllProperties:function(t){var e=this.properties.singleWidth,i=t.querySelector(".rexbuilder-block-data"),r=parseInt(t.getAttribute("data-gs-x")),r=(t.setAttribute("data-col",r+=1),i.setAttribute("data-col",r),r="masonry"==this.settings.galleryLayout?Math.floor(parseInt(t.getAttribute("data-gs-y"))*this.properties.singleHeight/e):parseInt(t.getAttribute("data-gs-y")),t.setAttribute("data-row",r+=1),i.setAttribute("data-row",r),parseInt(t.getAttribute("data-gs-width"))),s=t.getAttribute("data-width"),s=(t.setAttribute("data-width",r),k(t,"w"+s),y(t,"w"+r),i.setAttribute("data-size_x",r),t.getAttribute("data-height")),r="masonry"==this.settings.galleryLayout?Math.round(parseInt(t.getAttribute("data-gs-height"))*this.properties.singleHeight/e):parseInt(t.getAttribute("data-gs-height"));t.setAttribute("data-height",r),this.updateElementDataHeightProperties(i,parseInt(t.getAttribute("data-gs-height"))),k(t,"h"+s),y(t,"h"+r),i.setAttribute("data-size_y",r)},_defineDataSettings:function(){this.element.getAttribute("data-separator")&&(this.properties.gutter=parseInt(this.element.getAttribute("data-separator"))),this.element.getAttribute("data-layout")&&(this.settings.galleryLayout=this.element.getAttribute("data-layout").toString()),this.element.getAttribute("data-full-height")&&(this.settings.fullHeight=this.element.getAttribute("data-full-height").toString()),this.element.getAttribute("data-mobile-padding")&&(this.settings.mobilePadding=this.element.getAttribute("data-mobile-padding").toString())},_defineDynamicPrivateProperties:function(){var t=this.element.offsetWidth,e=this.section.getAttribute("data-rex-collapse-grid");if(e&&("default"==Rexbuilder_Util.activeLayout&&Rexbuilder_Util.globalViewport.width<=_plugin_frontend_settings.defaultSettings.collapseWidth&&"true"==e.toString()||"true"==e.toString())?this.properties.oneColumModeActive=!0:this.properties.oneColumModeActive=!1,this.properties.wrapWidth=t,this.properties.singleWidth=t*this.settings.gridItemWidth,!this.settings.editorMode&&this.properties.fullWidthNaturalBackground)this._setFullWidthNaturalBackground(),this._setElementsToHeight("12");else if(!this.settings.editorMode&&this.properties.naturalBackground)this._setNaturalBackground(),this._setElementsToHeight("12");else if("masonry"==this.settings.galleryLayout)this.properties.singleHeight=this.settings.cellHeightMasonry;else{e=this.properties.singleHeight,t="true"==this.settings.fullHeight.toString()?(this.properties.gridBlocksHeight=this._calculateGridHeight(),Rexbuilder_Util.globalViewport.height/this.properties.gridBlocksHeight):this.properties.singleWidth;if(e==t)return!1;this.properties.singleHeight=t}return!0},setFullWidthNaturalBackground:function(){!this.settings.editorMode&&this.properties.fullWidthNaturalBackground&&(this._setFullWidthNaturalBackground(),this._setElementsToHeight("12"))},_setFullWidthNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");null!==t&&null!==e&&""!==t&&""!==e&&(e=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t),this.section.style.minHeight=e+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(e-this.properties.gutter)/5:this.properties.singleHeight=(e-this.properties.gutter)/12)},setNaturalBackground:function(){!this.settings.editorMode&&this.properties.naturalBackground&&(this._setNaturalBackground(),this._setElementsToHeight("12"))},_setNaturalBackground:function(){var t=this.section.getAttribute("data-background_image_width"),e=this.section.getAttribute("data-background_image_height");null!==t&&null!==e&&""!==t&&""!==e&&(t=Math.ceil((this.properties.gutter+this.properties.wrapWidth)*parseInt(e))/parseInt(t),this.section.style.minHeight=(t=e<t?e:t)+"px","masonry"==this.settings.galleryLayout?this.properties.singleHeight=(t-this.properties.gutter)/5:this.properties.singleHeight=(t-this.properties.gutter)/12)},_setElementsToHeight:function(t){for(var e=[].slice.call(this.element.getElementsByClassName("perfect-grid-item")),i=e.length,r=0,r=0;r<i;r++)e[r].setAttribute("data-gs-min-height",t)},_calculateGridHeight:function(){for(var t,e=0,i=[].slice.call(this.element.querySelectorAll(".grid-stack-item")),r=i.length,s=0,s=0;s<r;s++)-1===i[s].className.indexOf("removing_block")&&e<(t=parseInt(i[s].getAttribute("data-gs-height"))+parseInt(i[s].getAttribute("data-gs-y")))&&(e=t);return e},_defineHalfSeparatorProperties:function(){t(this.properties.gutter)?(this.properties.halfSeparatorTop=this.properties.gutter/2,this.properties.halfSeparatorRight=this.properties.gutter/2,this.properties.halfSeparatorBottom=this.properties.gutter/2,this.properties.halfSeparatorLeft=this.properties.gutter/2):(this.properties.halfSeparatorTop=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorRight=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorBottom=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorLeft=Math.floor(this.properties.gutter/2)),this.properties.paddingTopBottom=-1!==this.section.className.indexOf("distance-block-top-bottom")},_defineRowSeparator:function(){this.properties.gridTopSeparator=this.element.getAttribute("data-row-separator-top")?parseInt(this.element.getAttribute("data-row-separator-top")):null,this.properties.gridRightSeparator=this.element.getAttribute("data-row-separator-right")?parseInt(this.element.getAttribute("data-row-separator-right")):null,this.properties.gridBottomSeparator=this.element.getAttribute("data-row-separator-bottom")?parseInt(this.element.getAttribute("data-row-separator-bottom")):null,this.properties.gridLeftSeparator=this.element.getAttribute("data-row-separator-left")?parseInt(this.element.getAttribute("data-row-separator-left")):null},_defineFullWidthNaturalBackground:function(){x(this.section,"full-width-natural-background")&&(this.properties.fullWidthNaturalBackground=!0)},_defineNaturalBackground:function(){x(this.section,"natural-background")&&(this.properties.naturalBackground=!0)},_setGutter:function(){t(this.properties.gutter)?(this.properties.halfSeparatorElementTop=this.properties.gutter/2,this.properties.halfSeparatorElementRight=this.properties.gutter/2,this.properties.halfSeparatorElementBottom=this.properties.gutter/2,this.properties.halfSeparatorElementLeft=this.properties.gutter/2):(this.properties.halfSeparatorElementTop=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementRight=Math.floor(this.properties.gutter/2),this.properties.halfSeparatorElementBottom=Math.ceil(this.properties.gutter/2),this.properties.halfSeparatorElementLeft=Math.ceil(this.properties.gutter/2))},_fixHeightGrid:function(){var t=this.element;this.$element.outerHeight(t.attributes["data-gs-current-height"].value*this.properties.singleWidth)},_updateElementPadding:function(t){t.css({"padding-left":this.properties.halfSeparatorElementLeft,"padding-right":this.properties.halfSeparatorElementRight,"padding-top":this.properties.halfSeparatorElementTop,"padding-bottom":this.properties.halfSeparatorElementBottom})},_updateHandlersPosition:function(t){t.find(".ui-focused-element-highlight").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-e").css({top:this.properties.halfSeparatorElementTop,right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-se").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom}),t.find(".ui-resizable-s").css({right:this.properties.halfSeparatorElementRight,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-sw").css({bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft}),t.find(".ui-resizable-w").css({top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom,left:this.properties.halfSeparatorElementLeft})},_updatePlaceholderPosition:function(){this.properties.gridstackInstance.placeholder.children(".placeholder-content").css({left:this.properties.halfSeparatorElementLeft,right:this.properties.halfSeparatorElementRight,top:this.properties.halfSeparatorElementTop,bottom:this.properties.halfSeparatorElementBottom})},_saveBlocksPosition:function(){var t,e,i,r,s,a=this;this.$element.children(".grid-stack-item").each(function(){r=A(this),s=r.attr("data-rexbuilder-block-id"),t=parseInt(r.attr("data-gs-x")),e=parseInt(r.attr("data-gs-y")),i=parseInt(r.attr("data-gs-width")),r=parseInt(r.attr("data-gs-height")),store.set(s,{properties:[{x:t},{y:e},{w:i},{h:r}]}),Rexbuilder_Util_Editor.updatingSectionLayout&&!a.properties.updatingSectionSameGrid&&store.set(s+"_noEdits",{properties:[{x:t},{y:e},{w:i},{h:r}]})})},_restoreBlocksPosition:function(){var s,a=this.properties.gridstackInstance;this.$element.children(".grid-stack-item").each(function(){var t,e,i,r;s=A(this),r=Rexbuilder_Util_Editor.updatingSectionLayout&&void 0!==store.get(s.attr("data-rexbuilder-block-id")+"_noEdits")?store.get(s.attr("data-rexbuilder-block-id")+"_noEdits"):store.get(s.attr("data-rexbuilder-block-id")),t=parseInt(r.properties[0].x),e=parseInt(r.properties[1].y),i=parseInt(r.properties[2].w),r=parseInt(r.properties[3].h),a.update(this,t,e,i,r)})},createResizePlaceHolder:function(t){var e=t[0],i=u.createElement("div"),r=A(i),t=(t.parent().append(i),r.addClass("resizePlaceHolder"),r.addClass("w"+parseInt(e.attributes["data-width"].value)),parseInt(e.attributes["data-row"].value-1)*this.properties.singleWidth),i=parseInt(e.attributes["data-col"].value-1)*this.properties.singleWidth;return r.css("transform","translate("+i+"px, "+t+"px)"),r.css("position","absolute"),r},updateResizePlaceHolder:function(t,e){var i=e[0],r=this.properties.singleWidth,i=(parseInt(i.attributes["data-width"].value),Math.round(parseInt(e.outerWidth())/r)),e=(i<=0&&(i=1),t.removeClass(),t.addClass("resizePlaceHolder w"+i),Math.round(parseInt(e.outerHeight())/r));e<=0&&(e=1),t.css("width",i*r+"px"),t.css("height",e*r+"px")},_prepareElements:function(){var t,e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0;if(this.properties.editedFromBackend&&(void 0===Rexbuilder_Util_Editor.sectionCopying||!1===Rexbuilder_Util_Editor.sectionCopying))for(r=0;r<i;r++)e[r].setAttribute("data-gs-x",parseInt(e[r].getAttribute("data-col"))-1),e[r].setAttribute("data-gs-y",parseInt(e[r].getAttribute("data-row"))-1),e[r].setAttribute("data-gs-width",e[r].getAttribute("data-width")),e[r].setAttribute("data-gs-height",e[r].getAttribute("data-height"));for(r=0;r<i;r++)this._prepareElement(e[r]),null===(t=e[r].querySelector(".rexbuilder-block-data")).getAttribute("data-gs_start_h")&&t.setAttribute("data-gs_start_h",parseInt(e[r].getAttribute("data-gs-height")))},_prepareElement:function(t){var e=A(t);this._prepareElementEditing(e),this._updateElementPadding(e.find(".grid-stack-item-content")),this._updateHandlersPosition(e),this._fixImageSize(t)},updateElementDataHeightProperties:function(t,e){"masonry"==this.settings.galleryLayout?t.setAttribute("data-block_height_masonry",e):t.setAttribute("data-block_height_fixed",e),t.setAttribute("data-gs_start_h",e),t.setAttribute("data-block_height_calculated",e)},_prepareElementEditing:function(t){var e,i;o(t,"e, s, w, se, sw"),t.find(".grid-item-content").prepend('<div class="rexlive-block-drag-handle"></div>'),t.attr({"data-gs-min-width":1,"data-gs-min-height":1,"data-gs-max-width":500}),null===t[0].querySelector(".rex-slider-wrap")&&(0==(e=t.find(".text-wrap")).length?(i=u.createElement("div"),y(i,"text-wrap"),t.find(".rex-custom-scrollbar").append(i)):0==e.children(".text-editor-span-fix").length&&((i=u.createElement("span")).style.display="none",y(i,"text-editor-span-fix"),e.append(i))),this.addElementListeners(t)},_fixImagesDimension:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++)this._fixImageSize(t[i])},_fixImageSize:function(t){var e,i,r=t.querySelector(".grid-item-content");null!==r&&null!==(e=r.querySelector(".rex-image-wrapper"))&&x(e,"natural-image-background")&&-1!=(i=isNaN(parseInt(r.getAttribute("data-background_image_width")))?-1:parseInt(r.getAttribute("data-background_image_width")))&&(t.offsetWidth<i?y:k)(e,"small-width")},_removeHandles:function(t){t.children(".ui-resizable-handle").each(function(){A(this).remove()})},addElementListeners:function(s){var a=this,e=s.find(".rexlive-block-drag-handle"),t=(s.find(".text-wrap"),e[0]);s.on("mousedown",function(i){var r=A(i.target);"default"==Rexbuilder_Util.activeLayout||0!=r.parents(".tool-button").length||r.hasClass("ui-resizable-handle")||0!=r.parents(".ui-resizable-handle").length?0==r.parents(".tool-button").length&&(Rexbuilder_Util_Editor.mouseDownEvent=i,!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&i.target!=t&&(clearTimeout(this.downTimer),this.downTimer=setTimeout(function(){e.addClass("drag-up"),s.addClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.mouseDownEvent&&(Rexbuilder_Util_Editor.mouseDownEvent.target=t,Rexbuilder_Util_Editor.mouseDownEvent.toElement=t,Rexbuilder_Util_Editor.elementDraggingTriggered=!0,s.trigger(Rexbuilder_Util_Editor.mouseDownEvent))},125),clearTimeout(a.doubleDownTimer),a.doubleDownTimer=setTimeout(function(){var t,e;Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.editingElement||s.hasClass("ui-resizable-resizing")||s.hasClass("ui-draggable-dragging")||r.hasClass("ui-resizable-handle")||r.hasClass("circle-handle")||1!==i.which||(s.trigger("mouseup"),t=tmpl("tmpl-tool-drag",{}),(t=A(t)).css("position","absolute"),t.css("zIndex",20),s.append(t),e=s[0].getBoundingClientRect(),t.css("left",i.clientX-e.left-t[0].offsetWidth/2),t.css("top",i.clientY-e.top-t[0].offsetHeight/2),s.addClass("grid-stack-item--drag-to-row"),a.properties.isGridLocked=!0,a.$section.addClass("rexpansive-lock-section--overlay"))},1500)):(e.addClass("drag-up"),s.addClass("ui-draggable--drag-up"),i.target=t,i.toElement=t)}),s.on("mouseup",function(t){t=A(t.target),"default"==Rexbuilder_Util.activeLayout||0!=t.parents(".tool-button").length||t.hasClass("ui-resizable-handle")||0!=t.parents(".ui-resizable-handle").length?0==t.parents(".tool-button").length&&(Rexbuilder_Util_Editor.elementDraggingTriggered&&(e.removeClass("drag-up"),s.removeClass("ui-draggable--drag-up"),Rexbuilder_Util_Editor.elementDraggingTriggered=!1),clearTimeout(this.downTimer),clearTimeout(a.doubleDownTimer),Rexbuilder_Util_Editor.mouseDownEvent=null):(e.removeClass("drag-up"),s.removeClass("ui-draggable--drag-up")),a.properties.isGridLocked&&(Rexbuilder_Util_Editor.releaseRowsLight(),a.properties.isGridLocked=!1)}),s.on("mouseenter",function(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=s,a.focusElement(Rexbuilder_Util_Editor.focusedElement))}),s.on("mouseleave",function(t){(!(Rexbuilder_Util_Editor.editingElement||Rexbuilder_Util_Editor.elementIsResizing||Rexbuilder_Util_Editor.elementIsDragging||Rexbuilder_Util_Editor.manageElement)||Rexbuilder_Util_Editor.editingElement&&Rexbuilder_Util_Editor.editedElement.data("rexbuilder-block-id")!=s.data("rexbuilder-block-id"))&&(Rexbuilder_Util_Editor.focusedElement=s,a.unFocusElement(Rexbuilder_Util_Editor.focusedElement))})},unFocusElementEditing:function(t){0<t.length&&t.removeClass("focused")},focusElementEditing:function(t){for(var e=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),i=e.length,r=0,r=0;r<i;r++)k(e[r],"focused");0<t.length&&t.addClass("focused")},focusElement:function(t){t&&0<t.length&&t.addClass("focused"),this.$section.addClass("focusedRow")},unFocusElement:function(t){0<t.length&&t.removeClass("focused"),this.$section.removeClass("focusedRow")},_updateElementsSizeViewers:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,i=0;i<e;i++)this.updateSizeViewerSizes(t[i]),this.checkBlockDimension(t[i])},updateSizeViewerText:function(t,e,i,r,s){r=void 0!==r?r:t.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),s=void 0!==s?s:t.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),e!==_&&i!==_||(e=parseInt(t.getAttribute("data-gs-width")),i=parseInt(t.getAttribute("data-gs-height")),"masonry"==this.settings.galleryLayout&&(i=Math.round(i*this.properties.singleHeight)-this.properties.gutter));t=e+" x "+i,e=e+"x"+i;r&&(r.textContent=t),s&&(s.textContent=e)},updateBlocksSizes:function(t){if(void 0!==t){this.properties.gridstackInstance.batchUpdate();for(var e=0;e<t.length;e++){var i=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t[e].rexID+'"]');this.properties.gridstackInstance.update(i,t[e].x,t[e].y,t[e].w,t[e].h),this.updateSizeViewerText(i,t[e].w,t[e].h)}this.properties.gridstackInstance.commit()}},updateBlockSize:function(t){this.properties.gridstackInstance.batchUpdate();var e=this.element.querySelector(this.settings.itemSelector+'[data-rexbuilder-block-id="'+t.rexID+'"]');this.properties.gridstackInstance.update(e,t.x,t.y,t.w,t.h),this.updateSizeViewerSizes(e),this.properties.gridstackInstance.commit()},updateSizeViewerSizes:function(t){this.updateSizeViewerText(t,t.getAttribute("data-gs-width"),this.calculateHeightSizeViewer(t))},calculateHeightSizeViewer:function(t){t=parseInt(t.getAttribute("data-gs-height"));return"masonry"==this.settings.galleryLayout?t*this.properties.singleHeight-this.properties.gutter:t},checkBlockDimension:function(t,e){((e=void 0!==e?e:parseInt(t.getAttribute("data-gs-width"))*this.properties.singleWidth)<190?y:k)(t,"ui-tools--view-mobile"),(e<100?y:k)(t,"ui-hide-mobile-size-viewer")},_linkResizeEvents:function(){var i,r,s,a,o,l,n,p,d,h,g,u,c,m,b=this;b.$element.on("resizestart",function(t,e){e.element.is("span")||(b.properties.resizeHandle=A(t.toElement).attr("data-axis"),t.target,h=t.target.querySelector(".grid-item-content"),t.target.querySelector(".grid-item-content-wrap"),p=t.target.querySelector(".text-wrap"),d=A(p),c=t.target.querySelector(".bottom-tools .el-size-viewer .el-size-viewer__val"),m=t.target.querySelector(".mobile-tools .el-size-viewer .el-size-viewer__val"),x(t.target,"block-has-slider"),r=isNaN(parseInt(h.getAttribute("data-background_image_width")))?0:parseInt(h.getAttribute("data-background_image_width")),s=isNaN(parseInt(h.getAttribute("data-background_image_height")))?0:parseInt(h.getAttribute("data-background_image_height")),g=h.querySelector(".rex-image-wrapper"),u=null!==g&&x(g,"natural-image-background"),Rexbuilder_Util_Editor.elementIsResizing=!0,i=parseInt(t.target.getAttribute("data-gs-x")),"e"==b.properties.resizeHandle||"se"==b.properties.resizeHandle?t.target.setAttribute("data-gs-max-width",b.settings.numberCol-i):"w"!=b.properties.resizeHandle&&"sw"!=b.properties.resizeHandle||parseInt(t.target.getAttribute("data-gs-width")),a=o=0,n="masonry"==b.settings.galleryLayout?1:b.properties.singleWidth)}).on("resize",function(t,e){var i=e.element;i.is("span")||(u&&(e.size.width<r?y:k)(g,"small-width"),b.updateSizeViewerText(t.target,Math.round(e.size.width/b.properties.singleWidth),Math.round(e.size.height/n)-("masonry"===b.settings.galleryLayout?b.properties.gutter:0),c,m),e.originalSize.width!==e.size.width&&b.checkBlockDimension(t.target,e.size.width),e=i.hasClass("fit-natural-bg-image"),"masonry"==b.settings.galleryLayout&&u&&(l=t.target.offsetWidth,a=l<r||e?s*(l-b.properties.gutter)/r:s,a=isNaN(a)?0:a),o=R(d),l=Math.max(o,a),"masonry"==b.settings.galleryLayout?b.properties.gridstackInstance.minHeight(t.target,Math.round((l+b.properties.gutter)/b.properties.singleHeight)):b.properties.gridstackInstance.minHeight(t.target,Math.ceil((l+b.properties.gutter)/b.properties.singleWidth)))}).on("gsresizestop",function(t,e){var i,r,s,a,o,l,n;function d(){o()-n<s?a||l(d):r()}Rexbuilder_Util_Editor.elementIsResizing&&("masonry"==b.settings.galleryLayout&&(e.setAttribute("data-height",Math.round(e.getAttribute("data-gs-height")/b.properties.singleWidth)),e.querySelector(".rexbuilder-block-data").setAttribute("data-element_real_fluid",e.getAttribute("data-gs-min-height")==e.getAttribute("data-gs-height")?1:0)),b.updateAllElementsProperties(),b.updateSizeViewerText(e,_,_,c,m),b.checkBlockDimension(e),e.setAttribute("data-gs-max-width",500),clearTimeout(b.doubleDownTimer),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util_Editor.elementIsResizing=!1,b.$element.attr('data-rexlive-layout-changed="true"'),b.removeCollapseElementsProperties(),i=b.$section,b.properties.gridstackInstance.minHeight(e,1),b.properties.gridstackInstance.batchUpdate(),b.properties.gridstackInstance.commit(),m=c=h=p=null,Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_start_h"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_width"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_height"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_x"),Rexbuilder_Util.editedDataInfo.setBlockData(b.$section.attr("data-rexlive-section-id"),e.getAttribute("data-rexbuilder-block-id"),"gs_y"),r=Rexbuilder_Util.fixYoutube.bind(null,i[0]),s=1500,o=Date.now,l=f.requestAnimationFrame,n=o(),l(d))})},_linkDragEvents:function(){this.$element.on("dragstart",r).on("dragstop",function(t,e){void 0!==e&&(this.updateAllElementsProperties(),Rexbuilder_Util_Editor.elementIsDragging=!1,Rexbuilder_Util.editedDataInfo.setBlockData(this.$section.attr("data-rexlive-section-id"),e.helper.attr("data-rexbuilder-block-id"),"gs_x"),Rexbuilder_Util.editedDataInfo.setBlockData(this.$section.attr("data-rexlive-section-id"),e.helper.attr("data-rexbuilder-block-id"),"gs_y"),clearTimeout(this.doubleDownTimer))}.bind(this))},_linkDnDEvents:function(){var s,a=this,i=!0,r=function(t){var e=A(u).scrollTop();A(u).scrollTop(e+t),i||setTimeout(function(){r(t)},20)};a.$element.on("dragstart",".drag-to-section",function(t){var e,i,r;Rexbuilder_Util_Editor.dragAndDropFromParent||(a.properties.isGridLocked||setTimeout(function(){Rexbuilder_Util_Editor.lockRowsLight(a.$section),a.properties.isGridLocked=!0},100),t.originalEvent.dataTransfer.effectAllowed="all",e=A(this).parents(".grid-stack-item"),(s=e.clone(!1)).find(".rexbuilder-block-data").remove(),s.find(".ui-resizable-handle").remove(),s.find(".rexlive-block-toolbox").remove(),s.find(".grid-stack-item-content").css("height","100%"),A("body").append(s),s.css("position","fixed"),s.css("left",t.clientX),s.css("top",t.clientY),s.css("width",e.width()),s.css("height",e.height()),s.css("transform","scale(0.5)"),s.css("transformOrigin","top left"),e=e.attr("data-rexbuilder-block-id"),i=a.$section.attr("data-rexlive-section-id"),r=void 0!==a.$section.attr("data-rexlive-model-number")?a.$section.attr("data-rexlive-model-number"):"",t.originalEvent.dataTransfer.setData("text/plain",JSON.stringify({sectionID:i,modelNumber:r,rexID:e})))}),a.$element.on("drag",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(s.css("left",t.clientX+5),s.css("top",t.clientY+5),s.css("zIndex",3e3),i=!0,event.clientY<150&&(i=!1,r(-1)),event.clientY>Rexbuilder_Util_Editor.viewportMeasurement.height-150&&(i=!1,r(1)))}),a.$element.on("dragend",".drag-to-section",function(t){Rexbuilder_Util_Editor.dragAndDropFromParent||(a.properties.isGridLocked&&(Rexbuilder_Util_Editor.releaseRowsLight(),a.properties.isGridLocked=!1),i=!0,s.css("zIndex",-3e3),s.css("left",t.clientX+5),s.css("top",t.clientY+5),s.remove(),s=null)})},setGridstackIstanceNumber:function(){for(var t,e=this.$element.attr("class").split(/\s+/),i=0,r=e.length;i<r;i++)(t=e[i].split("-"))[2]!=_&&"instance"==t[2]&&(this.properties.gridstackInstanceID=t[3])},updateLayoutBlocksHeight:function(){var t=this.properties.gridstackInstance;if("null"!=typeof t&&(this.properties.blocksBottomTop=this.getElementBottomTop(),!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.batchGridstack();for(var e=[].slice.call(this.properties.blocksBottomTop),i=e.length,r=0,r=0;r<i;r++){var s=e[r].querySelector(".rexbuilder-block-data"),a=this.getBlockSizeOnLayoutChange(e[r]);Rexbuilder_Util_Editor.elementIsResizing=!0,this.updateElementDataHeightProperties(s,a.height),this.resizeBlock(e[r],a.width,a.height),Rexbuilder_Util_Editor.elementIsResizing=!1}Rexbuilder_Util.windowIsResizing||this.commitGridstack()}},updateBlocksHeight:function(t){var e=this.properties.gridstackInstance;if("null"!=typeof e&&(!this.properties.updatingSectionSameGrid||Rexbuilder_Util.windowIsResizing)){this.properties.blocksBottomTop=this.getElementBottomTop();for(var i=[].slice.call(this.properties.blocksBottomTop),r=i.length,s=0,s=0;s<r;s++)Rexbuilder_Util.backendEdited||Rexbuilder_Util_Editor.updatingSectionLayout||Rexbuilder_Util_Editor.updatingCollapsedGrid||this.properties.firstStartGrid?x(i[s],"rex-hide-element")||x(i[s],"removing_block")||x(i[s],"block-has-slider")||this.updateElementHeight(i[s]):this.properties.collapsingElements||this.updateElementHeight(i[s],!1,t);Rexbuilder_Util.windowIsResizing}},getBlockSizeOnLayoutChange:function(t){var e,i=t.querySelector(".rexbuilder-block-data"),r=t.querySelector(".text-wrap"),s=t.querySelector(".rex-image-wrapper"),a=t.querySelector(".grid-item-content"),i=(parseInt(i.getAttribute("data-element_real_fluid")),i.getAttribute("data-type_bg_block")),o=parseInt(t.getAttribute("data-gs-width")),l=0,n=!1,d=parseInt(t.getAttribute("data-gs-height"))*this.properties.oldCellHeight,l=Math.round(d/this.properties.singleHeight);return r&&0<r.innerText.trim().length&&0<r.childElementCount&&(n=!0,e=r.offsetHeight+this.properties.gutter),!n&&s&&"masonry"===this.settings.galleryLayout&&"natural"===i&&(r=parseInt(a.getAttribute("data-background_image_width")),n=parseInt(a.getAttribute("data-background_image_height")),(t.offsetWidth<r?(e=n*o*this.properties.singleWidth/r,y):(e=n+this.properties.gutter,k))(s,"small-width")),{width:o,height:l=d<e?Math.round(e/this.properties.singleHeight):l}},getBlockSizeOnCollapse:function(t){var e=t.querySelector(".rexbuilder-block-data"),i=t.querySelector(".text-wrap"),r=t.querySelector(".rex-image-wrapper"),s=t.querySelector(".grid-item-content"),a=-1!==t.className.indexOf("block-has-slider"),o=(s.className.indexOf("empty-content"),-1!==s.className.indexOf("youtube-player")),l=0!==[].slice.call(t.getElementsByClassName("rex-video-wrap")).length,n=-1!==s.className.indexOf("vimeo-player"),d=(parseInt(e.getAttribute("data-element_real_fluid")),e.getAttribute("data-type_bg_block"),parseInt(t.getAttribute("data-gs-width"))),p=!1,h=null,g=parseInt(t.getAttribute("data-gs-height"))*this.properties.singleHeight,s=(Math.round(g/this.properties.singleHeight),i&&0<i.innerText.trim().length&&0<i.childElementCount&&(p=!0,h=i.offsetHeight+this.properties.gutter),!p&&r&&(g=parseInt(s.getAttribute("data-background_image_width")),i=parseInt(s.getAttribute("data-background_image_height")),(t.offsetWidth<g?(h=i*(d*this.properties.singleWidth-this.properties.gutter)/g,h+=this.properties.gutter,y):(h=i+this.properties.gutter,k))(r,"small-width")),!p&&(o||l||n)&&(h=Math.round(d*this.properties.singleWidth*.75)),parseFloat(e.getAttribute("data-slider_ratio")));return a&&!isNaN(s)&&(h=isNaN(s)?d*this.properties.singleWidth*.75:d*this.properties.singleWidth*s),{width:d,height:Math.round(h/this.properties.singleHeight)}},updateElementHeight:function(t,e,i,r){e=void 0!==e&&e,r=void 0!==r?r:0,i=void 0!==i&&i,this.properties.oneColumModeActive||(Rexbuilder_Util_Editor.elementIsResizing=!0);var s=t.querySelector(".rexbuilder-block-data"),a=parseInt(s.getAttribute("data-gs_start_h")),o=(parseInt(s.getAttribute("data-gs_start_h")),this.properties.singleWidth),o=this.properties.oneColumModeActive?this.element.offsetWidth*this.settings.gridItemWidth:o,l=this.properties.gutter,n=t.querySelector(".text-wrap"),n=A(n),d=parseInt(t.getAttribute("data-gs-width")),p=parseInt(t.getAttribute("data-gs-height")),h=p*this.properties.singleHeight-l,g=parseInt(s.getAttribute("data-element_real_fluid")),u=0,c=0,m=0,b=0,f=!1,_=s.getAttribute("data-type_bg_block"),x=t.querySelector(".grid-item-content"),y=null,k=!1,v=!1,E=!1,I=!1,S=!1,w=!1;if(x&&(y=x.querySelector(".rex-image-wrapper"),k=-1!==t.className.indexOf("block-has-slider"),w=-1!==t.className.indexOf("fit-natural-bg-image"),v=-1!==x.className.indexOf("empty-content"),E=-1!==x.className.indexOf("youtube-player"),I=-1!==x.className.indexOf("mp4-player"),S=-1!==x.className.indexOf("vimeo-player")),!k){if(n=R(n),this.properties.oneColumModeActive&&(d=12),0==n&&(null!==y&&(y=parseInt(x.getAttribute("data-background_image_width")),x=parseInt(x.getAttribute("data-background_image_height")),u=this.properties.singleWidth*t.getAttribute("data-gs-width")<y||w?x*(d*o-l)/y:x),(E||I||S)&&(c=p*this.properties.singleHeight),k&&(b=p*this.properties.singleHeight),0==c)&&0==u&&0==b&&(Rexbuilder_Util_Editor.updatingSectionLayout||v||this.properties.firstStartGrid||k)&&(m=this.properties.editedFromBackend&&"masonry"==this.settings.galleryLayout?Math.round(o*a):this.properties.oneColumModeActive&&this.properties.beforeCollapseWasFixed?a*this.properties.singleWidth:a*this.properties.singleHeight),k||0!=u||0!=c||0!=n||(f=!0),w=a*this.properties.singleHeight-l,y=k||E||S||I||!("full"===_&&0===n||""===_&&0===n)||this.properties.oneColumModeActive?(a=e?w:0,Math.max(a,u,c,m,n,b)):w,this.properties.oneColumModeActive&&!Rexbuilder_Util.windowIsResizing)return{height:y,empty:f};0!=r&&(y=d*o*r),x=!1,0!==n?("fixed"===this.settings.galleryLayout&&!i||1!==g&&"masonry"===this.settings.galleryLayout)&&y<=h&&(x=!0):0!==u?("fixed"===this.settings.galleryLayout||"masonry"===this.settings.galleryLayout&&("natural"===_&&1!==g||"full"===_)&&y<=h)&&(x=!0):0!==c&&"masonry"===this.settings.galleryLayout&&(x=!0),x||(p="fixed"==this.settings.galleryLayout&&(f||E||I||S)?Math.round((y+l)/this.properties.singleHeight):Math.ceil((y+l)/this.properties.singleHeight),this.updateElementDataHeightProperties(s,p),this.resizeBlock(t,d,p))}Rexbuilder_Util_Editor.elementIsResizing=!1},resizeBlock:function(t,e,i){var r,s,a;isNaN(i)||null!=(r=this.properties.gridstackInstance)&&(0!=this.properties.oldCellHeight&&this.properties.oldCellHeight!=this.properties.singleHeight&&"masonry"==this.properties.oldLayout?(s=(a=store.get(t.getAttribute("data-rexbuilder-block-id"))).properties[0].x,a=Math.round(parseInt(a.properties[1].y)*this.properties.oldCellHeight/this.properties.singleHeight),r.update(t,s,a,e,i)):r.resize(t,e,i))},_setParentGridPadding:function(){var t=this.$element.parent();(Rexbuilder_Util.globalViewport.width>=_plugin_frontend_settings.defaultSettings.collapseWidth&&!this.properties.setDesktopPadding||!this.properties.setDesktopPadding&&!this.properties.setMobilePadding&&"true"==this.$section.attr("data-rex-collapse-grid"))&&(this.properties.setDesktopPadding=!0,"true"==this.$section.attr("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?t.css("padding-top",this.properties.gridTopSeparator-this.properties.halfSeparatorTop):t.css("padding-top",this.properties.halfSeparatorTop),null!==this.properties.gridBottomSeparator?t.css("padding-bottom",this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom):t.css("padding-bottom",this.properties.halfSeparatorBottom),this.properties.paddingTopBottom||(null!==this.properties.gridLeftSeparator?t.css("padding-left",this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft):t.css("padding-left",this.properties.halfSeparatorLeft),null!==this.properties.gridRightSeparator?t.css("padding-right",this.properties.gridRightSeparator-this.properties.halfSeparatorRight):t.css("padding-right",this.properties.halfSeparatorRight)))},_setGridPadding:function(){this.properties.setDesktopPadding&&(this.properties.setDesktopPadding||this.properties.setMobilePadding||"true"!=this.section.getAttribute("data-rex-collapse-grid"))||(this.properties.setDesktopPadding=!0,"true"==this.section.getAttribute("data-rex-collapse-grid")?this.properties.setMobilePadding=!0:this.properties.setMobilePadding=!1,null!==this.properties.gridTopSeparator?this.element.style.marginTop=this.properties.gridTopSeparator-this.properties.halfSeparatorTop+"px":this.element.style.marginTop=this.properties.halfSeparatorTop+"px",null!==this.properties.gridBottomSeparator?this.element.style.marginBottom=this.properties.gridBottomSeparator-this.properties.halfSeparatorBottom+"px":this.element.style.marginBottom=this.properties.halfSeparatorBottom+"px",this.properties.paddingTopBottom)||(null!==this.properties.gridLeftSeparator?this.element.style.marginLeft=this.properties.gridLeftSeparator-this.properties.halfSeparatorLeft+"px":this.element.style.marginLeft=this.properties.halfSeparatorLeft+"px",null!==this.properties.gridRightSeparator?this.element.style.marginRight=this.properties.gridRightSeparator-this.properties.halfSeparatorRight+"px":this.element.style.marginRight=this.properties.halfSeparatorRight+"px")},collapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!0),this.$section.find(".collapse-grid").addClass("grid-collapsed"),this.properties.oneColumModeActive=!0},removeCollapseElementsProperties:function(){this.section.setAttribute("data-rex-collapse-grid",!1),this.$section.find(".collapse-grid").removeClass("grid-collapsed"),this.properties.oneColumModeActive=!1},updateGridLayoutCollapse:function(t){this.settings.galleryLayout=t.layout,this.settings.fullHeight=t.fullHeight,this.properties.singleHeight=t.singleHeight,this.element.setAttribute("data-full-height",t.fullHeight),this.element.setAttribute("data-layout",t.layout),this.$section.children(".section-data").attr("data-full_height",t.fullHeight),this.$section.children(".section-data").attr("data-layout",t.layout),this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack()},changeGridToMasonry:function(){this.settings.galleryLayout="masonry",this.settings.fullHeight=!1,this.properties.singleHeight=this.settings.cellHeightMasonry,this.batchGridstack(),this.updateGridstackStyles(),this.updateFloatingElementsGridstack(),this.commitGridstack(),this.element.setAttribute("data-layout","masonry"),this.element.setAttribute("data-full-height","false"),this.$section.children(".section-data").attr("data-layout","masonry"),this.$section.children(".section-data").attr("data-full_height","false")},collapseElements:function(t){t=void 0===t?{}:t,this.properties.dispositionBeforeCollapsing=this.createActionDataMoveBlocksGrid(),this.properties.layoutBeforeCollapsing={layout:this.settings.galleryLayout,fullHeight:this.settings.fullHeight,singleHeight:this.properties.singleHeight},this.fixBlockDomOrder(),this._saveBlocksPosition(),this.collapseElementsProperties(),this.properties.collapsingElements=!0,"fixed"==this.settings.galleryLayout&&(this.properties.beforeCollapseWasFixed=!0,this.changeGridToMasonry()),this.batchGridstack(),this.updateBlocksWidth(),this.commitGridstack(),setTimeout(e.bind(this,t),500)},updateBlocksWidth:function(){for(var t=this.getElementsTopBottom(),e=0,i=t.length,r=0;r<i;r++)this.properties.gridstackInstance.update(t[r],0,e,12,parseInt(t[r].getAttribute("data-gs-height"))),e+=parseInt(t[r].getAttribute("data-gs-height"))},updateCollapsedBlocksHeight:function(){for(var t=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),e=t.length,i=0,r=t.reverse(),i=0;i<e;i++){var s=this.getBlockSizeOnCollapse(r[i]);this.properties.gridstackInstance.resize(r[i],s.width,s.height)}},fixBlockDomOrder:function(){var t,e,i,r,s=this.getElementsTopBottom(),a=[],o=[],l=s.length;for(g=0;g<l;g++){var n={rexID:A(s[g]).attr("data-rexbuilder-block-id"),added:!1};a.push(n)}var d,p=[].slice.call(this.element.getElementsByClassName("grid-stack-item")),h=p.length,g=0;for(g=0;g<h;g++)d={rexID:p[g].getAttribute("data-rexbuilder-block-id"),element:A(p[g]).detach()},o.push(d);for(g=0,i=a.length;g<i;g++){for(e=0,r=o.length;e<r;e++)if(o[e].rexID==a[g].rexID){t=o[e].element;break}this.$element.append(t),o.splice(e,1)}},filter:function(t){for(var e=[],i=this.properties.initialStateGrid.length,r=0;r<i;r++)e.push(this.properties.initialStateGrid[r].el);var s=A(e).map(function(){return this.toArray()}),a=s.filter(t.filter),o=s.not(t.filter),l=this;if(a.each(function(t,e){"0"===e.style.opacity?A(e).velocity({scale:1,opacity:1},{duration:200,begin:function(t){t[0].style.display=""}}):(e.style.opacity=1,e.style.display="")}),o.each(function(t,e){"0"!==e.style.opacity?A(e).velocity({scale:0,opacity:0},{duration:200,complete:function(t){t[0].style.display="none"}}):(e.style.opacity=0,e.style.display="none")}),this.properties.gridstackInstance.batchUpdate(),this.properties.gridstackInstance.removeAll(!1),"*"===t.filter){s.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),autoPosition:e.getAttribute("data-gs-auto-position"),minWidth:e.getAttribute("data-gs-min-width"),maxWidth:e.getAttribute("data-gs-max-width"),minHeight:e.getAttribute("data-gs-min-height"),maxHeight:e.getAttribute("data-gs-max-height"),id:e.getAttribute("data-gs-id")};l.properties.gridstackInstance.addWidget(e,i.x,i.y,i.width,i.height,i.autoPosition,i.minWidth,i.maxWidth,i.minHeight,i.maxHeight,i.id)});for(var r=0,n=this.properties.initialStateGrid.length;r<n;r++){var d=this.properties.initialStateGrid[r].el[0];this.properties.gridstackInstance.update(d,this.properties.initialStateGrid[r].x,this.properties.initialStateGrid[r].y)}}else this.properties.mirrorStateGrid=[],a.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))},i=l.placeElMirror(i);l.properties.mirrorStateGrid.push({x:i.x,y:i.y,el:e,width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height"))})}),a.each(function(t,e){var i={x:parseInt(e.getAttribute("data-gs-x")),y:parseInt(e.getAttribute("data-gs-y")),width:parseInt(e.getAttribute("data-gs-width")),height:parseInt(e.getAttribute("data-gs-height")),el:e};l.properties.gridstackInstance.addWidget(e,i.x,i.y)}),a.each(function(t,e){l.properties.gridstackInstance.update(e,l.properties.mirrorStateGrid[t].x,l.properties.mirrorStateGrid[t].y)});this.properties.gridstackInstance.commit();o=jQuery.Event("rexlive:galleryFiltered");o.settings={galleryEditorInstance:this},A(u).trigger(o)},placeElMirror:function(t){for(var e={x:0,y:0},i=0;;++i){var r=i%this.properties.gridstackInstance.grid.width,s=Math.floor(i/this.properties.gridstackInstance.grid.width);if(!(r+t.width>this.properties.gridstackInstance.grid.width)&&!a.find(this.properties.mirrorStateGrid,a.bind(GridStackUI.Utils._isAddNodeIntercepted,{x:r,y:s,node:t}))){e.x=r,e.y=s;break}}return e},get_pixel_position:function(t){var e={left:"0",top:"0"};return e.left=this.properties.gridstackInstance.cellWidth()*t.x+"px",e.top=this.properties.gridstackInstance.cellHeight()*t.y+this.properties.gridstackInstance.opts.verticalMargin*t.y+"px",e},save_grid_state:function(){this.properties.initialStateGrid=this.properties.gridstackInstance.grid.nodes},fix_natural_image_blocks:function(){for(var t,e=[].slice.call(this.element.getElementsByClassName("rex-image-wrapper")),i=e.length,r=0,r=0;r<i;r++)x(e[r],"natural-image-background")&&(t=A(e[r]),t=parseInt(t.parents(".grid-item-content").attr("data-background_image_width")),e[r].offsetWidth,t>e[r].offsetWidth)&&y(e[r],"small-width")},set_grid_initial_state:function(t){this.properties.initialStateGrid=t},merge_grid_initial_state:function(t){this.properties.initialStateGrid=this.properties.initialStateGrid.concat(t)},_getCoord:function(t,e){return{x:t%e,y:Math.floor(t/e)}},destroyGridGallery:function(){this.destroyGridstack(),this.clearStateGrid(),this.$element.removeClass("grid-number-"+this.properties.sectionNumber)},_check_parent_class:function(t){return x(this.section,t)}}),A.fn[s]=function(e){var i,r=arguments;return e===_||"object"==typeof e?this.each(function(){A.data(this,"plugin_"+s)||A.data(this,"plugin_"+s,new d(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=A.data(this,"plugin_"+s);t instanceof d&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(r,1))),"destroy"===e&&A.data(this,"plugin_"+s,null)}),i!==_?i:this):void 0}}(jQuery,window,document,_);
/*
 * anime.js v3.1.0
 * (c) 2019 Julian Garnier
 * Released under the MIT license
 * animejs.com
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var i={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},M={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},S=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],l={CSS:{},springs:{}};function C(n,e,t){return Math.min(Math.max(n,e),t)}function s(n,e){return-1<n.indexOf(e)}function o(n,e){return n.apply(null,e)}var w={arr:function(n){return Array.isArray(n)},obj:function(n){return s(Object.prototype.toString.call(n),"Object")},pth:function(n){return w.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||w.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return w.hex(n)||w.rgb(n)||w.hsl(n)},key:function(n){return!i.hasOwnProperty(n)&&!M.hasOwnProperty(n)&&"targets"!==n&&"keyframes"!==n}};function d(n){n=/\(([^)]+)\)/.exec(n);return n?n[1].split(",").map(function(n){return parseFloat(n)}):[]}function u(r,t){var n=d(r),e=C(w.und(n[0])?1:n[0],.1,100),a=C(w.und(n[1])?100:n[1],.1,100),o=C(w.und(n[2])?10:n[2],.1,100),n=C(w.und(n[3])?0:n[3],.1,100),u=Math.sqrt(a/e),i=o/(2*Math.sqrt(a*e)),c=i<1?u*Math.sqrt(1-i*i):0,s=i<1?(i*u-n)/c:-n+u;function f(n){var e=t?t*n/1e3:n,e=i<1?Math.exp(-e*i*u)*(+Math.cos(c*e)+s*Math.sin(c*e)):(1+s*e)*Math.exp(-e*u);return 0===n||1===n?n:1-e}return t?f:function(){var n=l.springs[r];if(n)return n;for(var e=0,t=0;;)if(1===f(e+=1/6)){if(16<=++t)break}else t=0;n=e*(1/6)*1e3;return l.springs[r]=n}}function q(e){return void 0===e&&(e=10),function(n){return Math.round(n*e)*(1/e)}}function $(b,e,M,t){if(0<=b&&b<=1&&0<=M&&M<=1){var x=new Float32Array(11);if(b!==e||M!==t)for(var n=0;n<11;++n)x[n]=k(.1*n,b,M);return function(n){return b===e&&M===t||0===n||1===n?n:k(function(n){for(var e=0,t=1;10!==t&&x[t]<=n;++t)e+=.1;var r=e+(n-x[--t])/(x[t+1]-x[t])*.1,a=O(r,b,M);if(.001<=a){for(var o=n,u=r,i=b,c=M,s=0;s<4;++s){var f=O(u,i,c);if(0===f)return u;u-=(k(u,i,c)-o)/f}return u}if(0===a)return r;for(var l,d,p=n,h=e,g=e+.1,m=b,v=M,y=0;0<(l=k(d=h+(g-h)/2,m,v)-p)?g=d:h=d,1e-7<Math.abs(l)&&++y<10;);return d}(n),e,t)}}}e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,t=4;n<((e=Math.pow(2,--t))-1)/11;);return 1/Math.pow(4,3-t)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===e&&(e=.5);var t=C(n=void 0===n?1:n,1,10),r=C(e,.1,2);return function(n){return 0===n||1===n?n:-t*Math.pow(2,10*(n-1))*Math.sin((n-1-r/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){t[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}}});var e,t,c=e;function r(n,e){return 1-3*e+3*n}function k(n,e,t){return((r(e,t)*n+(3*t-6*e))*n+3*e)*n}function O(n,e,t){return 3*r(e,t)*n*n+2*(3*t-6*e)*n+3*e}function B(n,e){if(w.fnc(n))return n;var t=n.split("(")[0],r=c[t],a=d(n);switch(t){case"spring":return u(n,e);case"cubicBezier":return o($,a);case"steps":return o(q,a);default:return o(r,a)}}function a(n){try{return document.querySelectorAll(n)}catch(n){}}function P(n,e){for(var t,r=n.length,a=2<=arguments.length?e:void 0,o=[],u=0;u<r;u++)u in n&&(t=n[u],e.call(a,t,u,n))&&o.push(t);return o}function f(n){return n.reduce(function(n,e){return n.concat(w.arr(e)?f(e):e)},[])}function p(n){return w.arr(n)?n:(n=w.str(n)?a(n)||n:n)instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n]}function h(n,e){return n.some(function(n){return n===e})}function g(n){var e,t={};for(e in n)t[e]=n[e];return t}function x(n,e){var t,r=g(n);for(t in n)r[t]=(e.hasOwnProperty(t)?e:n)[t];return r}function I(n,e){var t,r=g(n);for(t in e)r[t]=(w.und(n[t])?e:n)[t];return r}function T(n){n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(n)return n[1]}function m(n,e){return w.fnc(n)?n(e.target,e.id,e.total):n}function v(n,e){return n.getAttribute(e)}function y(n,e,t){var r,a,o;return h([t,"deg","rad","turn"],T(e))?e:(r=l.CSS[e+t],w.und(r)?(a=document.createElement(n.tagName),(n=n.parentNode&&n.parentNode!==document?n.parentNode:document.body).appendChild(a),a.style.position="absolute",a.style.width=100+t,o=100/a.offsetWidth,n.removeChild(a),n=o*parseFloat(e),l.CSS[e+t]=n):r)}function b(n,e,t){var r;if(e in n.style)return r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0",t?y(n,e,t):e}function D(n,e){return w.dom(n)&&!w.inp(n)&&(v(n,e)||w.svg(n)&&n[e])?"attribute":w.dom(n)&&h(S,e)?"transform":w.dom(n)&&"transform"!==e&&b(n,e)?"css":null!=n[e]?"object":void 0}function X(n){if(w.dom(n)){for(var e,t=n.style.transform||"",r=/(\w+)\(([^)]*)\)/g,a=new Map;e=r.exec(t);)a.set(e[1],e[2]);return a}}function E(n,e,t,r){switch(D(n,e)){case"transform":return a=n,u=r,i=t,c=s(o=e,"scale")?1:0+(s(c=o,"translate")||"perspective"===c?"px":s(c,"rotate")||s(c,"skew")?"deg":void 0),c=X(a).get(o)||c,u&&(u.transforms.list.set(o,c),u.transforms.last=o),i?y(a,c,i):c;case"css":return b(n,e,t);case"attribute":return v(n,e);default:return n[e]||0}var a,o,u,i,c}function F(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=T(n)||0,a=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return a+o+r;case"-":return a-o+r;case"*":return a*o+r}}function Y(n,e){var t,r,a,o,u,i,c;return w.col(n)?(i=n,w.rgb(i)?(o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(u=i))?"rgba("+o[1]+",1)":u:w.hex(i)?(o=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,t,r){return e+e+t+t+r+r}),u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o),"rgba("+parseInt(u[1],16)+","+parseInt(u[2],16)+","+parseInt(u[3],16)+",1)"):w.hsl(i)?(o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(o=i)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(o),u=parseInt(o[1],10)/360,i=parseInt(o[2],10)/100,c=parseInt(o[3],10)/100,o=o[4]||1,0==i?t=r=a=c:(t=s(i=2*c-(c=c<.5?c*(1+i):c+i-c*i),c,u+1/3),r=s(i,c,u),a=s(i,c,u-1/3)),"rgba("+255*t+","+255*r+","+255*a+","+o+")"):void 0):/\s/g.test(n)?n:(c=(i=T(n))?n.substr(0,n.length-i.length):n,e?c+e:c);function s(n,e,t){return t<0&&(t+=1),1<t&&--t,t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}}function N(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Z(n){for(var e,t=n.points,r=0,a=0;a<t.numberOfItems;a++){var o=t.getItem(a);0<a&&(r+=N(e,o)),e=o}return r}function Q(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return 2*Math.PI*v(n,"r");case"rect":return 2*v(e=n,"width")+2*v(e,"height");case"line":return N({x:v(e=n,"x1"),y:v(e,"y1")},{x:v(e,"x2"),y:v(e,"y2")});case"polyline":return Z(n);case"polygon":return e=n.points,Z(n)+N(e.getItem(e.numberOfItems-1),e.getItem(0))}var e}function V(e,n){var n=n||{},t=n.el||function(){for(var n=e.parentNode;w.svg(n)&&w.svg(n.parentNode);)n=n.parentNode;return n}(),r=t.getBoundingClientRect(),a=v(t,"viewBox"),o=r.width,r=r.height,n=n.viewBox||(a?a.split(" "):[0,0,o,r]);return{el:t,viewBox:n,x:+n[0],y:+n[1],w:o/n[2],h:r/n[3]}}function z(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Y(w.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:w.str(n)||e?r.split(t):[]}}function H(n){return P(n?f(w.arr(n)?n.map(p):p(n)):[],function(n,e,t){return t.indexOf(n)===e})}function G(n){var t=H(n);return t.map(function(n,e){return{target:n,id:e,total:t.length,transforms:{list:X(n)}}})}function R(n,e){var t,r=[],a=e.keyframes;for(t in e=a?I(function(e){for(var t=P(f(e.map(function(n){return Object.keys(n)})),function(n){return w.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),a={},n=0;n<t.length;n++)!function(n){var r=t[n];a[r]=e.map(function(n){var e,t={};for(e in n)w.key(e)?e==r&&(t.value=n[e]):t[e]=n[e];return t})}(n);return a}(a),e):e)w.key(t)&&r.push({name:t,tweens:function(n,t){var e,r=g(t),a=(/^spring/.test(r.easing)&&(r.duration=u(r.easing)),w.arr(n)&&(2!==(e=n.length)||w.obj(n[0])?w.fnc(t.duration)||(r.duration=t.duration/e):n={value:n}),w.arr(n)?n:[n]);return a.map(function(n,e){n=w.obj(n)&&!w.pth(n)?n:{value:n};return w.und(n.delay)&&(n.delay=e?0:t.delay),w.und(n.endDelay)&&(n.endDelay=e===a.length-1?t.endDelay:0),n}).map(function(n){return I(n,r)})}(e[t],n)});return r}var W={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,a){var o;r.list.set(e,t),e!==r.last&&!a||(o="",r.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o)}};function J(n,u){G(n).forEach(function(n){for(var e in u){var t=m(u[e],n),r=n.target,a=T(t),o=E(r,e,a,n),t=F(Y(t,a||T(o)),o),a=D(r,e);W[a](r,e,t,n.transforms,!0)}})}function K(n,e){return P(f(n.map(function(o){return e.map(function(n){var e,t,i,c,s,r=o,a=D(r.target,n.name);if(a)return c=r,t=(e=(i=n).tweens.map(function(n){var n=function(n,e){var t,r={};for(t in n){var a=m(n[t],e);w.arr(a)&&1===(a=a.map(function(n){return m(n,e)})).length&&(a=a[0]),r[t]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,c),e=n.value,t=w.arr(e)?e[1]:e,r=T(t),a=E(c.target,i.name,r,c),o=s?s.to.original:a,u=w.arr(e)?e[0]:o,a=T(u)||T(a),r=r||a;return w.und(t)&&(t=o),n.from=z(u,r),n.to=z(F(t,u),r),n.start=s?s.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=B(n.easing,n.duration),n.isPath=w.pth(e),n.isColor=w.col(n.from.original),n.isColor&&(n.round=1),s=n}))[e.length-1],{type:a,property:n.name,animatable:r,tweens:e,duration:t.end,delay:e[0].delay,endDelay:t.endDelay}})})),function(n){return!w.und(n)})}function U(n,e){function t(n){return n.timelineOffset||0}var r=n.length,a={};return a.duration=r?Math.max.apply(Math,n.map(function(n){return t(n)+n.duration})):e.duration,a.delay=r?Math.min.apply(Math,n.map(function(n){return t(n)+n.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,n.map(function(n){return t(n)+n.duration-n.endDelay})):e.endDelay,a}var A,_=0,L=[],n=[],nn=en;function en(){A=requestAnimationFrame(tn)}function tn(n){var e=L.length;if(e){for(var t=0;t<e;){var r,a=L[t];a.paused?-1<(r=L.indexOf(a))&&(L.splice(r,1),e=L.length):a.tick(n),t++}en()}else A=cancelAnimationFrame(A)}function j(n){var c,s=0,f=0,l=0,d=0,p=null;function h(n){var e=window.Promise&&new Promise(function(n){return p=n});n.finished=e}e=x(i,n=n=void 0===n?{}:n),t=R(r=x(M,n),n),r=U(t=K(n=G(n.targets),t),r),a=_,_++;var e,t,r,a,k=I(e,{id:a,children:[],animatables:n,animations:t,duration:r.duration,delay:r.delay,endDelay:r.endDelay});function g(){var n=k.direction;"alternate"!==n&&(k.direction="normal"!==n?"normal":"reverse"),k.reversed=!k.reversed,c.forEach(function(n){return n.reversed=k.reversed})}function m(n){return k.reversed?k.duration-n:n}function o(){s=0,f=m(k.currentTime)*(1/j.speed)}function v(n,e){e&&e.seek(n-e.timelineOffset)}function y(e){for(var n=0,t=k.animations,r=t.length;n<r;){var a=t[n],o=a.animatable,u=a.tweens,i=u.length-1,c=u[i];i&&(c=P(u,function(n){return e<n.end})[0]||c);for(var i=C(e-c.start-c.delay,0,c.duration)/c.duration,s=isNaN(i)?1:c.easing(i),f=c.to.strings,l=c.round,d=[],p=c.to.numbers.length,h=void 0,g=0;g<p;g++){var m=void 0,v=c.to.numbers[g],y=c.from.numbers[g]||0,m=c.isPath?function(e,t){function n(n){return e.el.getPointAtLength(1<=t+(n=void 0===n?0:n)?t+n:0)}var r=V(e.el,e.svg),a=n(),o=n(-1),u=n(1);switch(e.property){case"x":return(a.x-r.x)*r.w;case"y":return(a.y-r.y)*r.h;case"angle":return 180*Math.atan2(u.y-o.y,u.x-o.x)/Math.PI}}(c.value,s*v):y+s*(v-y);!l||c.isColor&&2<g||(m=Math.round(m*l)/l),d.push(m)}var b=f.length;if(b)for(var h=f[0],M=0;M<b;M++){f[M];var x=f[M+1],w=d[M];isNaN(w)||(h+=x?w+x:w+" ")}else h=d[0];W[a.type](o.target,a.property,h,o.transforms),a.currentValue=h,n++}}function b(n){k[n]&&!k.passThrough&&k[n](k)}function u(n){var e=k.duration,t=k.delay,r=e-k.endDelay,a=m(n);if(k.progress=C(a/e*100,0,100),k.reversePlayback=a<k.currentTime,c){var o=a;if(k.reversePlayback)for(var u=d;u--;)v(o,c[u]);else for(var i=0;i<d;i++)v(o,c[i])}!k.began&&0<k.currentTime&&(k.began=!0,b("begin")),!k.loopBegan&&0<k.currentTime&&(k.loopBegan=!0,b("loopBegin")),a<=t&&0!==k.currentTime&&y(0),(r<=a&&k.currentTime!==e||!e)&&y(e),t<a&&a<r?(k.changeBegan||(k.changeBegan=!0,k.changeCompleted=!1,b("changeBegin")),b("change"),y(a)):k.changeBegan&&(k.changeCompleted=!0,k.changeBegan=!1,b("changeComplete")),k.currentTime=C(a,0,e),k.began&&b("update"),e<=n&&(f=0,k.remaining&&!0!==k.remaining&&k.remaining--,k.remaining?(s=l,b("loopComplete"),k.loopBegan=!1,"alternate"===k.direction&&g()):(k.paused=!0,k.completed||(k.completed=!0,b("loopComplete"),b("complete"),!k.passThrough&&"Promise"in window&&(p(),h(k)))))}return h(k),k.reset=function(){var n=k.direction;k.passThrough=!1,k.currentTime=0,k.progress=0,k.paused=!0,k.began=!1,k.loopBegan=!1,k.changeBegan=!1,k.completed=!1,k.changeCompleted=!1,k.reversePlayback=!1,k.reversed="reverse"===n,k.remaining=k.loop,c=k.children;for(var e=d=c.length;e--;)k.children[e].reset();(k.reversed&&!0!==k.loop||"alternate"===n&&1===k.loop)&&k.remaining++,y(k.reversed?k.duration:0)},k.set=function(n,e){return J(n,e),k},k.tick=function(n){u(((l=n)+(f-(s=s||l)))*j.speed)},k.seek=function(n){u(m(n))},k.pause=function(){k.paused=!0,o()},k.play=function(){k.paused&&(k.completed&&k.reset(),k.paused=!1,L.push(k),o(),A||nn())},k.reverse=function(){g(),o()},k.restart=function(){k.reset(),k.play()},k.reset(),k.autoplay&&k.play(),k}function rn(n,e){for(var t=e.length;t--;)h(n,e[t].animatable.target)&&e.splice(t,1)}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(L.forEach(function(n){return n.pause()}),n=L.slice(0),j.running=L=[]):n.forEach(function(n){return n.play()})}),j.version="3.1.0",j.speed=1,j.running=L,j.remove=function(n){for(var e=H(n),t=L.length;t--;){var r=L[t],a=r.animations,o=r.children;rn(e,a);for(var u=o.length;u--;){var i=o[u],c=i.animations;rn(e,c),c.length||i.children.length||o.splice(u,1)}a.length||o.length||r.pause()}},j.get=E,j.set=J,j.convertPx=y,j.path=function(n,e){var t=w.str(n)?a(n)[0]:n,r=e||100;return function(n){return{property:n,el:t,svg:V(t),totalLength:Q(t)*(r/100)}}},j.setDashoffset=function(n){var e=Q(n);return n.setAttribute("stroke-dasharray",e),e},j.stagger=function(n,e){var i=(e=void 0===e?{}:e).direction||"normal",c=e.easing?B(e.easing):null,s=e.grid,f=e.axis,l=e.from||0,d="first"===l,p="center"===l,h="last"===l,g=w.arr(n),m=g?parseFloat(n[0]):parseFloat(n),v=g?parseFloat(n[1]):0,y=T(g?n[1]:n)||0,b=e.start||0+(g?m:0),M=[],x=0;return function(n,e,t){if(d&&(l=0),p&&(l=(t-1)/2),h&&(l=t-1),!M.length){for(var r,a,o,u=0;u<t;u++)s?(r=p?(s[0]-1)/2:l%s[0],a=p?(s[1]-1)/2:Math.floor(l/s[0]),r=r-u%s[0],a=a-Math.floor(u/s[0]),o=Math.sqrt(r*r+a*a),"x"===f&&(o=-r),M.push(o="y"===f?-a:o)):M.push(Math.abs(l-u)),x=Math.max.apply(Math,M);c&&(M=M.map(function(n){return c(n/x)*x})),"reverse"===i&&(M=M.map(function(n){return f?n<0?-1*n:-n:Math.abs(x-n)}))}return b+(g?(v-m)/x:m)*(Math.round(100*M[e])/100)+y}},j.timeline=function(u){var i=j(u=void 0===u?{}:u);return i.duration=0,i.add=function(n,e){var t=L.indexOf(i),r=i.children;function a(n){n.passThrough=!0}-1<t&&L.splice(t,1);for(var o=0;o<r.length;o++)a(r[o]);t=I(n,x(M,u)),t.targets=t.targets||u.targets,n=i.duration,t.autoplay=!1,t.direction=i.direction,t.timelineOffset=w.und(e)?n:F(e,n),a(i),i.seek(t.timelineOffset),e=j(t),a(e),r.push(e),n=U(r,u);return i.delay=n.delay,i.endDelay=n.endDelay,i.duration=n.duration,i.seek(0),i.reset(),i.autoplay&&i.play(),i},i},j.easing=B,j.penner=c,j.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},j});
// var lodash = _.noConflict();
var Rexbuilder_App=function(L){"use strict";function b(){Rexbuilder_Util.$document.on("YTPStart",function(e){var t=(e=L(e.target)).parents(".youtube-player").eq(0).children(".rex-video-toggle-audio"),i=e.YTPGetPlayer();void 0!==i&&(e.optimizeDisplay(),0==t.length||t.hasClass("user-has-muted")?(i.mute(),i.isMute=!0,i.setVolume(0)):e.YTPUnmute())}),Rexbuilder_Util.$document.on("click",".YTPOverlay",function(e){0<(e=L(e.target).parents(".rex-youtube-wrap")).length&&(1==e[0].state?e.YTPPause():e.YTPPlay())}),Rexbuilder_Util.$document.on("click",".block-has-slider",function(e){var t,i=(r=L(this).find(".grid-item-content")).children(".rex-youtube-wrap"),n=r.children(".rex-video-vimeo-wrap--block"),r=r.children(".rex-video-wrap");0<i.length&&(1==i[0].state?i.YTPPause():i.YTPPlay()),0<n.length&&(t=VimeoVideo.findVideo(n.find("iframe")[0]))&&t.getPaused().then(function(e){e?t.play():t.pause()}).catch(function(e){}),0<r.length&&((i=r.find(".rex-video-container").get(0)).paused?i.play():i.pause())}),Rexbuilder_Util.$document.on("click",".rex-video-toggle-audio",function(e){e.stopPropagation();var t,i=L(this),e=i.parents(".youtube-player").eq(0).children(".rex-youtube-wrap"),n=i.parents(".mp4-player").eq(0).find(".rex-video-container"),r=i.parents(".vimeo-player").eq(0).find(".rex-video-vimeo-wrap--block");0<e.length&&(e.get(0).player.isMuted()?(e.YTPUnmute(),i.removeClass("user-has-muted")):(e.YTPMute(),i.addClass("user-has-muted"))),0<n.length&&(n.prop("muted")?(n.prop("muted",!1),i.removeClass("user-has-muted")):(n.prop("muted",!0),i.addClass("user-has-muted"))),0<r.length&&(t=VimeoVideo.findVideo(r.find("iframe")[0]))&&t.getVolume().then(function(e){0==e?(t.setVolume(1),i.removeClass("user-has-muted")):(t.setVolume(0),i.addClass("user-has-muted"))}).catch(function(e){})}),Rexbuilder_Util.$document.on("click",".rex-video__controls .pause",function(e){var t=(e=L(e.currentTarget)).parent().children(".play"),i=e.parents(".rexpansive_section");e.removeClass("video-tool--view"),t.addClass("video-tool--view"),Rexbuilder_Util.pauseVideo(i)}),Rexbuilder_Util.$document.on("click",".rex-video__controls .play",function(e){var t=(e=L(e.currentTarget)).parent().children(".pause"),i=e.parents(".rexpansive_section");e.removeClass("video-tool--view"),t.addClass("video-tool--view"),Rexbuilder_Util.playVideo(i)}),Rexbuilder_Util.$document.on("click",".sticky-video-controls",function(e){L(e.currentTarget).parent().find(".video-tool--view").click()})}var r=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),A="undefined"!=typeof SplitScrollable,T="undefined"!=typeof StickySection,y=null,v=null,e=null,t=null,R=[],i={},U=[];function n(){var e=this.iframeContainer.contentDocument.querySelector(".rexbuilder-live-content");e.parentElement.removeChild(e),this.iframeContainer.contentDocument.body.insertBefore(e,this.iframeContainer.contentDocument.body.firstChild)}var $=function(){if("undefined"!=typeof DistanceAccordion)for(var e=document.getElementsByClassName("distance-accordion-toggle"),t=0,i=e.length;t<i;t++)new DistanceAccordion(e[t])},M=function(){if("undefined"!=typeof PopUpContent)for(var e=[].slice.call(document.getElementsByClassName("popup-content-button")),t=e.length,i=0,i=0;i<t;i++)null===PopUpContent.data(e[i])&&new PopUpContent(e[i],{contentRetrieveMethod:"iframe",getPopUpContentComplete:n,ajaxSettings:{type:"GET",dataType:"json",url:_plugin_frontend_settings.rexajax.ajaxurl,data:{action:"rex_get_popup_content",nonce_param:_plugin_frontend_settings.rexajax.rexnonce}}})};function F(){if("undefined"!=typeof PopUpContent&&!Rexbuilder_Util.isIframe){window.addEventListener("message",l,!1),document.addEventListener("popUpContent:open",function(){var e;for(e=0;e<i.length;e++)i[e].options.autoPlay&&i[e].pausePlayer()}),document.addEventListener("popUpContent:close",function(){var e;for(e=0;e<i.length;e++)i[e].options.autoPlay&&i[e].unpausePlayer()});for(var e=Array.prototype.slice.call(document.getElementsByClassName("rex-slider-wrap")),t=e.length,i=[],n=0;n<t;n++){var r=Flickity.data(e[n]);r&&i.push(r)}}}function l(e){if(e.data.rexliveEvent)switch(e.data.eventName){case"popUpContent:pswpOpened":Rexbuilder_Util.addClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:pswpClosed":Rexbuilder_Util.removeClass(document.body,"popup-content--active--pswp-open");break;case"popUpContent:changePage":""!==e.data.href&&(window.location=e.data.href)}}function V(){var e,t,i=this.element.querySelector(".perfect-grid-gallery"),n=u(i);if(n.instance){for(o(this,n.instance),a(this,n.instance),e=0;e<this.totScrollEls;e++)this.scrollEls[e].style.height="";for(e=0;e<this.totOpacityEls;e++)this.opacityEls[e].style.top="";for(e=0;e<n.instance.gridBlocksTotal;e++){for(t=0;t<this.totScrollEls;t++)if(this.scrollEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setHeight=!1;break}for(t=0;t<this.totOpacityEls;t++)if(this.opacityEls[t]===n.instance.gridBlocks[e].el){n.instance.gridBlocks[e].setTop=!1;break}}i.style.height="",n.instance.properties.gridHeightSettable=!1}}function o(t,e){t.scrollEls=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.scrollElsClass)}).map(function(e){return e.el}),t.scrollElsToWatch=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.scrollElsClass)}).map(function(e){return e.el.querySelector("."+t.options.scrollElsToWatchClass)});for(var i=0,n=0,r=0;i<e.gridBlocksTotal;i++)for(n=0;n<t.totScrollEls;n++)if(t.scrollEls[n]===e.gridBlocks[i].el){t.scrollEls[n].style.WebKitBoxOrdinalGroup=r+1,t.scrollEls[n].style.MozFlexOrder=r,t.scrollEls[n].style.OOrder=r,t.scrollEls[n].style.MSOrder=r,t.scrollEls[n].style.order=r,t.scrollElsToWatch[n].setAttribute("data-scroll-el-index",r),r++;break}}function a(t,e){t.opacityEls=e.gridBlocks.filter(function(e){return Rexbuilder_Util.hasClass(e.el,t.options.opacityElsClass)}).map(function(e){return e.el})}var C=function(e){if("undefined"!=typeof Odometer){var t,i,n,r=e.innerText;if(null!==e.getAttribute("data-yearly-inc")&&""!==_plugin_frontend_settings.sitedate&&(t=new Date(_plugin_frontend_settings.sitedate),i=(new Date).getFullYear()-t.getFullYear(),n=e.getAttribute("data-yearly-inc"),r=parseInt(r)+parseInt(n)*i),null!==e.getAttribute("data-montly-inc")&&""!==_plugin_frontend_settings.sitedate&&(t=new Date(_plugin_frontend_settings.sitedate),i=(new Date).getMonth()-t.getMonth(),n=e.getAttribute("data-montly-inc"),r=parseInt(r)+parseInt(n)*i),e.setAttribute("data-final-value",r),null==(l=e.getAttribute("data-start-value")))for(var l="",o=0,a=e.innerText.length;o<a;o++)l+="1";return new Odometer({el:e,value:l,format:_plugin_frontend_settings.odometer.format,theme:_plugin_frontend_settings.odometer.theme})}};function k(){e=Rexbuilder_Util.$rexContainer.find(".perfect-grid-item .rex-accordion"),i={onSetup:function(){var e,t,i;Rexbuilder_Util.editorMode||(e=(i=this.$element.parents(".perfect-grid-gallery")).find(".perfect-grid-item"),i=i.get(0),t=this.$element.parents(".perfect-grid-item").get(0),i=u(i),this.caching={$blocks:e,block:t,$block:L(t),rexGridInstance:i})}},Rexbuilder_Util.editorMode?(i.open={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=e.properties.$content.parents(".grid-stack").data("gridstack");i.resize(t,null,Math.round(e.element.parentElement.offsetHeight/i.opts.cellHeight))}},i.close={progressClbk:function(e){var t=e.properties.$content.parents(".grid-stack-item")[0],i=t.children[0].getAttribute("data-gs_start_h");e.properties.$content.parents(".grid-stack").data("gridstack").resize(t,null,Math.round(parseInt(i)))}}):(i.open={startClbk:function(e){e.caching.$blocks.addClass("accordion-animate-block")},progressClbk:function(e){e.caching.rexGridInstance&&e.caching.rexGridInstance.instance.reCalcBlockHeight(e.caching.block)}},i.close={progressClbk:function(e){e.caching.rexGridInstance&&e.caching.rexGridInstance.instance.reCalcBlockHeight(e.caching.block)},completeClbk:function(e){e.caching.$block.one(Rexbuilder_Util._transitionEvent,function(){e.caching.$blocks.removeClass("accordion-animate-block")})}}),e.rexAccordion(i)}function w(){t=Rexbuilder_Util.$rexContainer.find(".rexpansive_section.rex-accordion"),Rexbuilder_Util.editorMode||t.each(function(e,t){var i=L(t);i.find(".perfect-grid-item").removeClass("rs-animation"),i.rexAccordion({onSetup:function(){this.caching={rexGridInstance:u(t.querySelector(".perfect-grid-gallery"))}},open:{progressClbk:function(e){e=e.element.querySelector(".perfect-grid-gallery");RexGrid.data(e).endResize()},completeClbk:function(e){e.caching.rexGridInstance.instance.section.classList.add("open_complete")}},close:{startClbk:function(e){e=e.element.getAttribute("href"),e=Rexbuilder_Util.rexContainer.querySelector(`a[href="${e}"`),e.classList.add("close"),e.classList.remove("open"),e=L(e).offset().top;e<document.documentElement.scrollTop&&L("html, body").animate({scrollTop:e},150)},progressClbk:function(e){e=e.element.querySelector(".perfect-grid-gallery");RexGrid.data(e).endResize()},completeClbk:function(e){e.$element.removeClass("open_complete")}}}),i.on("rexclassic:smooth_link_complete",function(e,t){L(this).rexAccordion("open_single_accordion")})})}function E(){Rexbuilder_Util.$document.find(".rex-accordion").not(t).not(e).rexAccordion({open:{},close:{}})}function s(){for(var e=0;e<U.length;e++)Rexbuilder_Util.removeClass(U[e].section,"empty-section"),(0===U[e].gridBlocksTotal||U[e].section.getElementsByClassName("rex-hide-element").length===U[e].gridBlocksTotal)&&Rexbuilder_Util.addClass(U[e].section,"empty-section")}function d(){if(!Rexbuilder_Util.editorMode){for(var e=Array.prototype.slice.call(document.getElementsByClassName("disable-grid")),t=e.length,i=0;i<t;i++){for(var n=!e[i].classList.contains("disable-grid--no-set-height"),r=e[i].querySelector(".perfect-grid-gallery"),l=Array.prototype.slice.call(e[i].getElementsByClassName("grid-stack-item")),o=l.length,a=[],s=0;s<o;s++)a.push(l[s].style.height);if(I(r),Rexbuilder_Util.addClass(e[i],"disabled"),L(r).find(".rex-animate-lazy-loaded-resource .rex-image-wrapper").addClass("rex-image-wrapper--lazy-show"),n)for(s=0;s<o;s++)l[s].style.height=a[s]}if(Rexbuilder_Photoswipe.init(".photoswipe-gallery"),Rexbuilder_Util.$rexContainer.find(".inline-pswp-gallery").on("click",Rexbuilder_Photoswipe.init_inline_pswp),L(".rex-effect-distortion").each(function(e,t){var i=L(t);1==_plugin_frontend_settings.animations?i.one("rs-animation-complete",function(){i.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}):i.rexEffect({effect:{name:"distortion",properties:{startDelay:2500}}})}),L(".rex-effect-distortion-section").each(function(e,t){var i=L(t);1==_plugin_frontend_settings.animations?i.one("rs-scrolled-complete",function(){i.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}):i.rexEffect({effect:{name:"distortion-section",properties:{startDelay:2500}}})}),L("[class*=border-space-animated-]").each(function(e,t){var i=L(t);i.addClass("border-space-animated"),1==_plugin_frontend_settings.animations&&768<Rexbuilder_Util.globalViewport.width?i.one("rs-animation-complete",function(){i.addClass("border-active")}):i.parents(".rexpansive_section").one("rs-scrolled-complete",function(){i.addClass("border-active")})}),T){var d,c,u=!(Rexbuilder_Util.cssPropertyValueSupported("position","sticky")||Rexbuilder_Util.cssPropertyValueSupported("position","-webkit-sticky")),p=Array.prototype.slice.call(document.getElementsByClassName("sticky-section")),f=p.length,g=0,m="";for(StickySection.destroyHandlers(),g=0;g<f;g++)if(d=p[g],null!==StickySection.data(d)&&StickySection.data(d).destroy(),Rexbuilder_Util.hasClass(d,"mp4-player")?m=".rex-video-wrap":""===d.style.backgroundImage&&!Rexbuilder_Util.hasClass(d,"section-w-image")||(m=".sticky-background-simulator"),c="true"===d.querySelector(".section-data").getAttribute("data-row_overlay_active"),new StickySection(d,{borderAnimation:!0,stickyJS:u,stickyElementSelector:m,overlayAnimation:c}),"undefined"!=typeof RevealOpacityOnScroll&&_plugin_frontend_settings.stickySection.revealContentOnScroll)for(var x=RexGrid.data(d.querySelector(".perfect-grid-gallery")),_=0;_<x.gridBlocksTotal;_++){Rexbuilder_Util.removeClass(x.gridBlocks[_].el,"has-rs-animation"),Rexbuilder_Util.removeClass(x.gridBlocks[_].el,"rs-animation");var h=x.gridBlocks[_].el.querySelector(".text-wrap");new RevealOpacityOnScroll(h,{offset:1,transition:!1})}}if(L(document.getElementsByClassName("rex-element--animated")).rexScrolled({callback:function(e){e.addEventListener(Rexbuilder_Util._transitionEvent,P),Rexbuilder_Util.addClass(e,"run-animation")}}),1==_plugin_frontend_settings.animations&&Rexbuilder_Util.$rexContainer.imagesLoaded({background:!0},function(){L(document.querySelectorAll(".rs-animation:not(.deactivate-rexpansive-animation)")).rexScrollify({mobile:!1})}),$(),M(),"undefined"!=typeof PopUpVideo)for(var b=[].slice.call(document.getElementsByClassName("popup-video-button")),y=b.length,v=0,v=0;v<y;v++)""!==b[v].href&&new PopUpVideo(b[v],{closeOnEnd:_plugin_frontend_settings.popUpVideo.closeOnEnd});if(A&&!(Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth))for(var R=Array.prototype.slice.call(document.getElementsByClassName("split-scrollable")),U=R.length,C=0;C<U;C++)null===SplitScrollable.data(R[C])&&new SplitScrollable(R[C],{scrollElsToWatchClass:"text-wrap",initializeComplete:V});if("undefined"!=typeof ParticleSwarm)for(var k=Array.prototype.slice.call(document.getElementsByClassName("particle-swarm")),w=k.length,E=0;E<w;E++){var S=document.createElement("canvas");k[E].insertBefore(S,k[E].firstChild),new ParticleSwarm(S)}if("undefined"!=typeof RexIndicator){var B=Array.prototype.slice.call(document.getElementsByClassName("rex-indicator__placeholder"));for(let e=0;e<B.length;e++)new RexIndicator(B[e])}F()}function P(e){Rexbuilder_Util.removeClass(this,"rex-element--animated"),this.removeEventListener(Rexbuilder_Util._transitionEvent,P)}}var c=[];function S(e){void 0!==c[e]&&c[e].forEach(function(e){e.call()})}function u(e){for(var t=e.getAttribute("data-rex-grid-id"),i=0,n=U.length,i=0;i<n;i++)if(t===U[i].properties.id&&e===U[i].element)return{instance:U[i],index:i};return null}function I(e){e=u(e);null!==e&&(e.instance.destroy(),U.splice(e.index,1))}return{init:function(){if(Rexbuilder_Util.init(),Rexbuilder_Dom_Util.init(),y=Rexbuilder_Util.$rexContainer.find(".rexpansive_section"),v=Rexbuilder_Util.$rexContainer.find(".grid-stack-row"),S("builder_before_launch_grids"),0!==v.length)if(Rexbuilder_Util.editorMode)v.perfectGridGalleryEditor({editorMode:Rexbuilder_Util.editorMode});else{for(var e=Rexbuilder_Util.chooseLayout(),t=(Rexbuilder_Util.handleLayoutChange(e),Array.prototype.slice.call(document.getElementsByClassName("perfect-grid-gallery"))),i=t.length,n=0,n=0;n<i;n++){var r=new RexGrid(t[n]);U.push(r)}for(n=0;n<i;n++)T&&Rexbuilder_Util.hasClass(U[n].section,"sticky-section")&&StickySection.prepare(U[n].section);window.FastLoad.init()}if(Rexbuilder_Rexbutton.init(),Rexbuilder_Rexelement.init(),Rexbuilder_Rexwpcf7.init(),Rexbuilder_Util.editorMode)Rex_Save_Listeners.init(),Rexbuilder_Rexelement_Editor.init(),Rexbuilder_Rexwpcf7_Editor.init(),Rexbuilder_CreateBlocks.init(),Rexbuilder_Util_Editor.init(),Rexbuilder_Color_Palette.init(),Rexbuilder_Overlay_Palette.init(),Rexbuilder_Section.init(),Rexbuilder_Section_Editor.init(),Rexbuilder_Block.init(),Rexbuilder_Block_Editor.init(),Rexbuilder_Live_Utilities.addBuilderListeners(),CKEditor_Handler.init(),Rexbuilder_Section_Editor.triggerRowDataChange();else for(var l,o,a=[].slice.call(document.getElementsByClassName("rex-button-wrapper")),s=a.length,d=0,d=0;d<s;d++)a[d].querySelector(".rex-button-container")||((l=document.createElement("span")).className="rex-button-container",(o=a[d].querySelector(".rex-button-background")).parentNode.insertBefore(l,o),l.appendChild(o));if(Rex_Navigator.init(),Rexbuilder_Util.editorMode||"undefined"!=typeof Rexbuilder_FormFixes&&Rexbuilder_FormFixes.init(),Rexbuilder_Util.editorMode&&Rexbuilder_Util.launchEditDomLayout(),!Rexbuilder_Util.editorMode){y.each(function(e,t){0===t.getElementsByClassName("pswp-figure").length&&Rexbuilder_Util.removeClass(t,"photoswipe-gallery")});for(var c=[].slice.call(document.getElementsByClassName("rex-num-spin")),u=c.length,p=0;p<u;p++){var f=C(c[p]);f&&(R.push(f),Rexbuilder_Util.hasClass(c[p],"rex-num-spin__block-scrolled")?L(c[p]).parents(".perfect-grid-item").one("rs-scrolled-complete",{el:c[p]},function(e){e.data.el.innerHTML=e.data.el.getAttribute("data-final-value")}):Rexbuilder_Util.hasClass(c[p],"rex-num-spin__stopped")||L(c[p]).rexScrolled({callback:function(e){e.innerHTML=e.getAttribute("data-final-value")}}))}e=Rexbuilder_Util.$body.find(".rex-slideshow");0<e.length&&e.rexSlideshow()}if(1==_plugin_frontend_settings.native_scroll_animation){for(var g=['[href="#"]',".no-smoothing",".vertical-nav-link",".rex-vertical-nav-link",".woocommerce-review-link",".distance-accordion-toggle"],m=Rexbuilder_Util.$body.find('a[href*="#"]'),x=0,_=g.length;x<_;x++)m=m.not(g[x]);(m=m.not(h)).on("click",function(e){if(!(Rexbuilder_Util.editorMode&&e.currentTarget.matches(".rex-button-container")||location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")||location.hostname!=this.hostname)){e=L(this.hash);if((e=e.length?e:Rexbuilder_Util.$rexContainer.find("[name="+this.hash.slice(1)+"]")).length)return Rexbuilder_Util.smoothScroll(e),!1}});var h=function(e){return 0!=L(this).parents(".woocommerce-tabs").length}}Rexbuilder_Util.editorMode||Rexbuilder_Util.$body.find(".open-accordion-section").on("click",function(e){this.classList.contains("open")?(e.preventDefault(),e.stopImmediatePropagation(),L(this.getAttribute("href")).rexAccordion("close_single_accordion")):(this.classList.toggle("close"),this.classList.toggle("open"))}),b(),Rexbuilder_Util.editorMode&&(Rexbuilder_Util.$document.on("rexlive:editDomLayoutEnd",RexSlider.init),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),w(),k(),E())},load:function(){if(Rexbuilder_Util.editorMode)CKEditor_Handler.load(),Rexbuilder_Util_Editor.load(),Rexbuilder_Live_Utilities.load();else{for(var e=U.length,t=0;t<e;t++)U[t].fixAfterLoad();RexSlider.init(),Rexbuilder_Util.launchVideoPlugins(),Rexbuilder_Util.playAllVideos(),w(),k(),E()}var i,n;0!==(n=L(".text-fill-container-canvas")).length&&(n.textFill({relative:!0,relativeWrap:".perfect-grid-item",fontFamily:_plugin_frontend_settings.textFill.font_family,fontWeight:_plugin_frontend_settings.textFill.font_weight}),n.on("textfill-render-complete",function(){Rexbuilder_Util.$window.resize()})),RexSlider.startAutoPlay(),s(),d(),Rexbuilder_Util.galleryPluginActive=!0,r&&!Rexbuilder_Util.editorMode&&"navigate"!==(n=performance.getEntriesByType("navigation")[0].type)&&"prerender"!==n&&void 0!==(i=store.get("scrollPosition"))&&setTimeout(function(){window.scrollTo(0,i)},0)},handleLiveResize:function(){Rexbuilder_Util_Editor.elementIsResizing||(Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.loadWidth!==Rexbuilder_Util.globalViewport.width&&Rexbuilder_Util.doneResizing())},handleFrontEndResize:function(){for(var e=Rexbuilder_Util.findFrontLayout(),t=U.length,i=(Rexbuilder_Util.startFrontLayout!=e&&(Rexbuilder_Util.changedFrontLayout=!0,Rexbuilder_Util.startFrontLayout=e),Rexbuilder_Util.changedFrontLayout&&(S("builder_before_layout_change"),e=Rexbuilder_Util.chooseLayout(),Rexbuilder_Util.handleLayoutChange(e)),RexGrid.updateViewportSize(),0),n=0,r=null;i<t;i++){if((r=A?SplitScrollable.data(U[i].section):r)&&Rexbuilder_Util.changedFrontLayout&&Rexbuilder_Util.globalViewport.width<_plugin_frontend_settings.splitScrollable.minViewportWidth)for(r.destroy(),U[i].properties.gridHeightSettable=!(r=null),n=0;n<U[i].gridBlocksTotal;n++)U[i].gridBlocks[n].setHeight=!0,U[i].gridBlocks[n].setTop=!0;Rexbuilder_Util.changedFrontLayout&&U[i].endChangeLayout(),U[i].endResize(),r&&(Rexbuilder_Util.changedFrontLayout&&(o(r,U[i]),a(r,U[i]),r.refreshScrollableIndex()),r.callFixStickyHeight()),T&&Rexbuilder_Util.changedFrontLayout&&StickySection.data(U[i].section)&&StickySection.prepare(U[i].section)}Rexbuilder_Util.changedFrontLayout&&(window.FastLoad.destroy(),window.FastLoad.init(),s(),Rexbuilder_Util.editorMode||"undefined"!=typeof RexIndicator&&RexIndicator.destroyAll(),d()),Rex_Navigator.getNavigationDotsPosition(),Rexbuilder_Util.changedFrontLayout=!1},addAction:function(e,t){void 0===c[e]&&(c[e]=[]),c[e].push(t)},getRexGridInstance:u,destroyRexGridInstance:I}}(jQuery);
!function(){"use strict";var i,e=!1;function t(){var e;return window.matchMedia("(orientation: portrait)").matches&&(e="portrait"),(e=window.matchMedia("(orientation: landscape)").matches?"landscape":e)!=i&&(i=e,1)}(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(e=!0),t(),document.addEventListener("DOMContentLoaded",Rexbuilder_App.init),window.addEventListener("load",Rexbuilder_App.load);var o,a,n,r,d=Rexbuilder_Util.editorMode?1e3:100,l=(window.addEventListener("resize",(o=function(){Rexbuilder_Util.globalViewport=Rexbuilder_Util.viewport(),Rexbuilder_Util.editorMode?Rexbuilder_App.handleLiveResize():(e&&t()||!e)&&Rexbuilder_App.handleFrontEndResize()},a=d,function(){var e=this,i=arguments,t=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||o.apply(e,i)},a),t&&o.apply(e,i)})),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));window.addEventListener("beforeunload",function(){l&&!Rexbuilder_Util.editorMode&&store.set("scrollPosition",window.pageYOffset||document.documentElement.scrollTop)})}();