var Rexbuilder_Util=function(t){"use strict";var i=t(window),e=0,n=!1,o=!1,r=function(){"ontouchstart"in document.documentElement?document.documentElement.className+=" touch":document.documentElement.className+=" no-touch"},a=function(){var t=window,i="inner";return"innerWidth"in window||(i="client",t=document.documentElement||document.body),{width:t[i+"Width"],height:t[i+"Height"]}},s=function(t){var i;return i=t.indexOf("youtu.be")>0?t.substr(t.lastIndexOf("/")+1,t.length):t.indexOf("http")>-1?t.match(/[\\?&]v=([^&#]*)/)[1]:t.length>15?null:t},d=function(t){for(var i=window.location.search.substring(1),e=i.split("&"),n=0;n<e.length;n++){var o=e[n].split("=");if(o[0]==t)return o[1]}return!1},l=function(){return 0!==t(".rexpansive_portfolio_presentation").length},c=function(){return 0!==t(".rexpansive-static-portfolio").length},u=function(){return 0!==t("#rex-article").length},m=function(){var t,i=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in e)if(void 0!==i.style[t])return e[t]},f=function(){var t,i=document.createElement("fakeelement"),e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in e)if(void 0!==i.style[t])return e[t]},h=function(){function i(){console.log("window resized"),Rexbuilder_Util.windowIsResizing=!0,Rexbuilder_Util.$rexContainer.find(".grid-stack-row").each(function(){var i=t(this).data().plugin_perfectGridGalleryEditor;if(void 0!==i){var e=i.$element.data("gridstack");i._defineDynamicPrivateProperties(),"masonry"==i.settings.galleryLayout?i._calculateBlockHeightMasonry():(e.cellHeight(i.properties.singleHeight),e._initStyles(),e._updateStyles(i.properties.singleHeight)),i.updateAllScrollbars(),i=void 0,e=void 0}}),Rexbuilder_Util.windowIsResizing=!1,n=!0}var e,n=!0;Rexbuilder_Util.$window.on("resize",function(o){Rexbuilder_Util_Editor.elementIsResizing||(o.preventDefault(),o.stopImmediatePropagation(),o.stopPropagation(),Rexbuilder_Util.windowIsResizing=!0,n&&(Rexbuilder_Util.$rexContainer.find(".grid-stack-row").each(function(){var i=t(this).data().plugin_perfectGridGalleryEditor;void 0!==i&&i.removeScrollbars()}),n=!1),clearTimeout(e),e=setTimeout(i,1e3))})},g="",w="",v=600,p=function(){this.$window=t(window),this.$body=t("body"),this.$rexContainer=t(".rex-container"),r(),this._transitionEvent=m(),this._animationEvent=f(),this.scrollbarProperties={className:"os-theme-dark",autoUpdate:!1}};return{init:p,viewport:a,getYoutubeID:s,transitionEvent:g,animationEvent:w,getQueryVariable:d,checkPresentationPage:l,checkStaticPresentationPage:c,checkPost:u,$window:i,scroll_timing:v,fixSectionWidth:e,editorMode:n,windowIsResizing:o,addWindowListeners:h}}(jQuery);
var RexSlider=function(e){"use strict";var t=".rex-slider-wrap",i=".rex-slider-element",n=".rex-container .rexpansive_section",r=".rex-box-slider-wrap",a=".rex-box-slider-element",l=function(){e(t,n).length&&e(t,n).each(function(t,n){var r={cellAlign:"left",prevNextButtons:!1,pageDots:!1,cellSelector:i,selectedAttraction:.018,friction:.3,wrapAround:!0,setGallerySize:!1,adaptiveHeight:!0,arrowShape:"M 71.080084,1.034481 C 71.763642,0.34482599 72.61809,-1.250001e-8 73.557983,-1.250001e-8 c 0.939893,0 1.794341,0.34482600250001 2.477899,1.03448101250001 1.367117,1.37931 1.367117,3.620689 0,5 L 32.459031,49.999998 76.035882,93.965515 c 1.367117,1.379311 1.367117,3.62069 0,5 -1.367117,1.379315 -3.588681,1.379315 -4.955798,0 L 25.025333,52.499998 c -1.367117,-1.37931 -1.367117,-3.62069 0,-5 l 46.054751,-46.465517 0,0 z"},a=e(n).attr("data-rex-slider-animation");"undefined"!=typeof a&&"true"==a&&(r.autoPlay=!0);var l=e(n).attr("data-rex-slider-prev-next");"undefined"!=typeof l&&"1"==l&&(r.prevNextButtons=!0);var d=e(n).attr("data-rex-slider-dots");"undefined"!=typeof d&&"1"==d&&(r.pageDots=!0),e(n).flickity(r),e(n).flickity("stopPlayer"),Rexbuilder_Util.$window.on("resize",function(){e(n).data("flickity")&&e(n).flickity("resize")}),e(n).on("dragStart.flickity",function(){e(this).addClass("is-dragging")}),e(n).on("dragEnd.flickity",function(){e(this).removeClass("is-dragging")}),e(n).on("select.flickity",function(){var t=e(this).find(".rex-slider-element.is-selected .youtube-player");if(t.length){var i=t[0].state;1!=i&&t.YTPPlay()}})}),e(r,n).length&&e(r,n).each(function(t,i){var n={cellAlign:"center",prevNextButtons:!0,pageDots:!0,cellSelector:a,selectedAttraction:.018,friction:.3,initialIndex:"undefined"!=typeof e(i).attr("data-rex-box-slider-initialIndex")?parseInt(e(i).attr("data-rex-box-slider-initialIndex")):0,setGallerySize:!1,arrowShape:"m 38.79662,40.087413 0,0 c -0.387529,0 -0.757576,-0.154429 -1.031468,-0.425408 L 1.2470862,3.1322842 c -0.56818177,-0.5681815 -0.56818177,-1.4918411 0,-2.060023 0.5681819,-0.56818197 1.4918415,-0.56818197 2.0600234,0 L 38.793706,36.570513 74.294872,1.0722612 c 0.568182,-0.56818197 1.491842,-0.56818197 2.060023,0 0.568182,0.5681819 0.568182,1.4918415 0,2.060023 L 39.825175,39.659091 c -0.273893,0.273893 -0.641026,0.428322 -1.028555,0.428322 l 0,0 0,0 z"},r=e(i).attr("data-rex-slider-animation");"undefined"!=typeof r&&"true"==r&&(n.autoPlay=!0),e(i).flickity(n),e(i).flickity("stopPlayer"),Rexbuilder_Util.$window.on("resize",function(){e(i).flickity("resize")}),e(i).on("dragStart.flickity",function(){e(this).addClass("is-dragging")}),e(i).on("dragEnd.flickity",function(){e(this).removeClass("is-dragging")})})},d=function(){e(t,n).length&&e(t,n).each(function(t,i){"undefined"!=typeof e(i).data("flickity")&&e(i).flickity("destroy")}),e(r,n).length&&e(r,n).each(function(t,i){"undefined"!=typeof e(i).data("flickity")&&e(i).flickity("destroy")})},o=function(){l()},c=function(){e(t,n).length&&e(t,n).each(function(t,i){var n=e(i).attr("data-rex-slider-animation");"undefined"!=typeof n&&"true"==n&&e(i).flickity("playPlayer")})};return{init:o,startAutoPlay:c,destroy:d}}(jQuery);
/**
 * JS object to fix CF7 forms if user wants some materialize style
 */
var Rexbuilder_FormFixes=function(e){"use strict";var c,n=function(){c=Rexbuilder_Util.$rexContainer.find(".wpcf7-form")},i=function(){c.each(function(c,n){var i=e(n);i.hasClass("rxcf7-custom-checkbox")&&(i.find(".wpcf7-checkbox").each(function(c,n){e(n).find("label").length>0&&e(n).find("input[type=checkbox]").after('<span class="rex-checkbox__indicator"></span>')}),i.find(".wpcf7-acceptance").each(function(c,n){e(n).find("label").length>0&&e(n).find("input[type=checkbox]").after('<span class="rex-checkbox__indicator"></span>')})),i.hasClass("rxcf7-custom-loader")&&i.find(".ajax-loader").append('<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>')})},t=function(){console.log("actol"),document.addEventListener("wpcf7submit",function(c){var n=e(c.srcElement).parents(".perfect-grid-gallery");n.length>0&&setTimeout(function(){n.perfectGridGallery("refreshGrid")},200)},!1)},a=function(){n(),t(),i()};return{init:a}}(jQuery);
var VimeoVideo=function(e){"use strict";var i=null,n=null,o=function(){i=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--section"),n=Rexbuilder_Util.$rexContainer.find(".rex-video-vimeo-wrap--block")},t=function(){i.length>0&&i.each(function(i,n){var o=e(n).find("iframe")[0];if("undefined"!=typeof Vimeo){var t=new Vimeo.Player(o);t.ready().then(function(){t.setVolume(0)})}})},r=function(i){var o=i;n.length>0&&n.each(function(i,n){var t=e(n).attr("data-vimeo-video-mute"),r=e(n).find("iframe")[0];if("undefined"!=typeof Vimeo){var l=new Vimeo.Player(r);if("1"==t)l.ready().then(function(){l.setVolume(0)});else{var a={el:r,player:l};o.blockVideos.push(a)}}})},l=function(e){for(var i=0;i<this.blockVideos.length;i++)if(this.blockVideos[i].el===e)return this.blockVideos[i].player;return null},a=function(){this.blockVideos=[],o(),t(),r(this)};return{init:a,findVideo:l}}(jQuery);
var lodash=_.noConflict();!function($){"use strict";var $window=$(window),_detect_mobile=function(){"ontouchstart"in document.documentElement?document.documentElement.className+=" touch":document.documentElement.className+=" no-touch"},getYotubeID=function(e){var t;return t=e.indexOf("youtu.be")>0?e.substr(e.lastIndexOf("/")+1,e.length):e.indexOf("http")>-1?e.match(/[\\?&]v=([^&#]*)/)[1]:e.length>15?null:e};$window.load(function(){var e=Rexbuilder_Util.$rexContainer.find(".text-fill-container-canvas");e.length>0&&(e.textFill({relative:!0,relativeWrap:".perfect-grid-item",fontFamily:_plugin_frontend_settings.textFill.font_family,fontWeight:_plugin_frontend_settings.textFill.font_weight}),e.on("textfill-render-complete",function(){$window.resize()})),RexSlider.startAutoPlay(),"undefined"!=typeof _plugin_frontend_settings&&1==_plugin_frontend_settings.animations&&Rexbuilder_Util.$rexContainer.find(".rs-animation").rexScrollify({mobile:!1})}),$(function(){function updateNavigation(){contentSections.each(function(){var e=$(this);if("undefined"!=typeof e.attr("id")&&""!=e.attr("id")){var t=Rexbuilder_Util.$rexContainer.find('.vertical-nav a[href="#'+e.attr("id")+'"]').data("number")-1;e.offset().top-$window.height()/2<$window.scrollTop()&&e.offset().top+e.height()-$window.height()/2>$window.scrollTop()?navigationItems.eq(t).addClass("is-selected"):navigationItems.eq(t).removeClass("is-selected")}})}function smoothScroll(e){$("body,html").animate({scrollTop:e.offset().top},600)}var $selectedPageLayout;if(_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing)$selectedPageLayout=$(".rexbuilder-editor-active-layout");else{var w=$window.width(),$resposiveData=$("#rexbuilder-layout-data"),$responsiveLayoutAvaible=JSON.parse($resposiveData.children(".available-layouts").text()),selectedLayout="";$.each($responsiveLayoutAvaible,function(e,t){""==t[1]&&(t[1]="0")});var ordered=lodash.sortBy($responsiveLayoutAvaible,[function(e){return parseInt(e[1])}]);$.each(ordered,function(e,t){w>t[1]&&(""!=t[2]?w<t[2]&&(selectedLayout="rex-layout-"+t[0]):selectedLayout="rex-layout-"+t[0])}),""===selectedLayout&&(selectedLayout="rex-layout-mydesktop"),$selectedPageLayout=$("."+selectedLayout),0==$selectedPageLayout.length&&($selectedPageLayout=$(".rex-layout-mydesktop")),console.log(selectedLayout)}if($selectedPageLayout.addClass("rex-container"),$selectedPageLayout.css("display","block"),Rexbuilder_Util.init(),_plugin_frontend_settings.user.logged&&_plugin_frontend_settings.user.editing?Rexbuilder_Util.editorMode=!0:(Rexbuilder_Util.editorMode=!1,Rexbuilder_Util_Editor.init()),Rexbuilder_Section.init(),_detect_mobile(),Rexbuilder_Util.editorMode&&Rexbuilder_Util_Editor.addBlockToolboxListeners(),Rexbuilder_Util_Editor.addWindowListeners(),Rexbuilder_Util.addWindowListeners(),Rexbuilder_Util.$rexContainer.find(".grid-stack-row").perfectGridGalleryEditor(),Rexbuilder_Util.editorMode||initPhotoSwipeFromDOM(".photoswipe-gallery"),RexSlider.init(),VimeoVideo.init(),jQuery.browser.mobile?Rexbuilder_Util.$rexContainer.find(".youtube-player").each(function(i,el){var $this=$(el),data_yt=eval("("+$this.attr("data-property")+")"),url=data_yt.videoURL,id=getYotubeID(url);$this.css("background-image","url(http://img.youtube.com/vi/"+id+"/0.jpg)"),$this.click(function(e){e.preventDefault(),window.location.href=url})}):(Rexbuilder_Util.$rexContainer.find(".youtube-player").YTPlayer(),Rexbuilder_Util.$rexContainer.find(".youtube-player").on("YTPReady",function(){$(this).optimizeDisplay()})),$(document).on("click",".perfect-grid-item",function(){if(!$(this).hasClass("block-has-slider")){var e=$(this).find(".youtube-player"),t=$(this).find(".rex-video-container");if(e.length>0){var i=e[0].state;1==i?e.YTPPause():e.YTPPlay()}t.length>0&&(t.get(0).paused?t.get(0).play():t.get(0).pause())}}),Rexbuilder_Util.$rexContainer.find(".perfect-grid-item").on("click",".rex-video-toggle-audio",function(e){e.stopPropagation();var t=$(this).parents(".youtube-player"),i=$(this).parents(".mp4-player").find(".rex-video-container"),n=$(this).parents(".vimeo-player").find(".rex-video-vimeo-wrap--block"),o=$(this);if(t.length>0){var r=t.get(0).player.isMuted();r?(t.YTPUnmute(),$(this).removeClass("user-has-muted")):(t.YTPMute(),$(this).addClass("user-has-muted"))}if(i.length>0&&(i.prop("muted")?(i.prop("muted",!1),$(this).removeClass("user-has-muted")):(i.prop("muted",!0),$(this).addClass("user-has-muted"))),n.length>0){var a=VimeoVideo.findVideo(n.find("iframe")[0]);a&&a.getVolume().then(function(e){0==e?(a.setVolume(1),o.removeClass("user-has-muted")):(a.setVolume(0),o.addClass("user-has-muted"))})["catch"](function(e){})}}),1==_plugin_frontend_settings.native_scroll_animation){for(var excluded_links=['[href="#"]',".no-smoothing",".vertical-nav-link",".rex-vertical-nav-link",".woocommerce-review-link"],$linksToSmooth=Rexbuilder_Util.$body.find('a[href*="#"]'),i=0;i<excluded_links.length;i++)$linksToSmooth=$linksToSmooth.not(excluded_links[i]);$linksToSmooth=$linksToSmooth.not(_filterLinksToSmooth),$linksToSmooth.click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:Rexbuilder_Util.$rexContainer.find("[name="+this.hash.slice(1)+"]"),e.length)return smoothScroll(e),!1}})}var contentSections=Rexbuilder_Util.$rexContainer.find(".rexpansive_section"),navigationItems=Rexbuilder_Util.$rexContainer.find(".vertical-nav a");updateNavigation(),$window.on("scroll",function(){updateNavigation()}),navigationItems.on("click",function(e){e.preventDefault(),smoothScroll($(this.hash))}),Rexbuilder_Util.$rexContainer.find(".touch .rex-nav-trigger").on("click",function(){Rexbuilder_Util.$rexContainer.find(".touch .vertical-nav").toggleClass("open")});var $touch_navigation_links=Rexbuilder_Util.$rexContainer.find(".touch .vertical-nav a");$touch_navigation_links.on("click",function(){$touch_navigation_links.find(".rex-label").removeClass("fadeInAndOut"),$(this).find(".rex-label").addClass("fadeInAndOut"),Rexbuilder_Util.$rexContainer.find(".touch .vertical-nav").removeClass("open")});var _filterLinksToSmooth=function(e){return 0!=$(this).parents(".woocommerce-tabs").length}});var initPhotoSwipeFromDOM=function(e){for(var t=function(e){for(var t,i,n,o,r=$(e).find(".pswp-figure").get(),a=r.length,l=[],s=0;s<a;s++)t=r[s],1===t.nodeType&&(i=t.children[0],n=i.getAttribute("data-size").split("x"),o={src:i.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},t.children.length>1&&(o.title=t.children[1].innerHTML),i.children.length>0&&(o.msrc=i.children[0].getAttribute("data-thumburl")),o.el=t,l.push(o));return l},i=function u(e,t){return e&&(t(e)?e:u(e.parentNode,t))},n=function(t){if(t=t||window.event,!($(t.target).parents(".perfect-grid-item").find(".element-link").length>0||$(t.target).is("a"))){t.preventDefault?t.preventDefault():t.returnValue=!1;var n=t.target||t.srcElement,o=i(n,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(o){for(var a,l=$(o).parents(e)[0],s=$(l).find(".pswp-figure").get(),d=s.length,u=0,c=0;c<d;c++)if(1===s[c].nodeType){if(s[c]===o){a=u;break}u++}return a>=0&&r(a,l),!1}}},o=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},r=function(e,i,n,o){var r,a,l,s=document.querySelectorAll(".pswp")[0];if(l=t(i),a={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByClassName("pswp-item-thumb")[0],i=l[e].el.getElementsByClassName("rex-custom-scrollbar")[0],n=window.pageYOffset||document.documentElement.scrollTop,o=i.getBoundingClientRect(),r=t.getAttribute("data-thumb-image-type");return"natural"==r?{x:o.left,y:o.top+n,w:o.width}:null},closeOnScroll:!1,showHideOpacity:!0},o)if(a.galleryPIDs){for(var d=0;d<l.length;d++)if(l[d].pid==e){a.index=d;break}}else a.index=parseInt(e,10)-1;else a.index=parseInt(e,10);isNaN(a.index)||(n&&(a.showAnimationDuration=0),r=new PhotoSwipe(s,PhotoSwipeUI_Default,l,a),r.init())},a=Rexbuilder_Util.$rexContainer.find(e),l=0,s=a.length;l<s;l++)a[l].setAttribute("data-pswp-uid",l+1),a[l].onclick=n;var d=o();d.pid&&d.gid&&r(d.pid,a[d.gid-1],!0,!0)},rexpansiveSections=document.getElementsByClassName("rexpansive_section"),index=0;for(index=0;index<rexpansiveSections.length;index++){var thisSection=rexpansiveSections[index],pswchilds=thisSection.getElementsByClassName("pswp-figure");0===pswchilds.length&&$(thisSection).removeClass("photoswipe-gallery")}}(jQuery);