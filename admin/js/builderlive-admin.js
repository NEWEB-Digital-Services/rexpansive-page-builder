var RexButtonDragDrop=(dragDropInstances=function(m){function v(e){this.dragoverqueue=[],this.context=e,this.cursorMoving=null}var d,c={x:10,y:10},s={x:50,y:50},_=!1,t=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"].join(",");function e(e){v.call(this,e)}function o(e){v.call(this,e)}function n(e){v.call(this,e)}return v.getMouseBearingsPercentage=function(e,t,o){return t=t||e.get(0).getBoundingClientRect(),{xPercentage:(o.xCoord-t.left)/(t.right-t.left)*100,yPercentage:(o.yCoord-t.top)/(t.bottom-t.top)*100}},v.checkVoidElement=function(e){return e.is(t)},v.calculateDistance=function(e,t,o){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-o,2))},v.findNearestElement=function(e,_,u){var p=null,e=e.children(":not(.drop-marker,[data-dragcontext-marker])");if(!(e.length<=0))return e.each(function(e,t){if(!m(t).is(".drop-marker")){var o,t=t.getBoundingClientRect(),n=0,r=null,a="",i=t.left,l=t.right,d=t.top,t=t.bottom,c=null,s=null;if(d<u&&u<t?c=_<i&&u<l?{x:i,y:u,position:"before"}:{x:l,y:u,position:"after"}:i<_&&_<l?c=u<d&&u<t?{x:_,y:d,position:"before"}:{x:_,y:t,position:"after"}:_<i&&_<l?(c={x:i,y:d,position:"before"},s={x:i,y:t,position:"after"}):i<_&&l<_?(c={x:l,y:d,position:"before"},s={x:l,y:t,position:"after"}):u<d&&u<t?(c={x:i,y:d,position:"before"},s={x:l,y:d,position:"after"}):d<u&&t<u&&(c={x:i,y:t,position:"before"},s={x:l,y:t,position:"after"}),a=((o=v.calculateDistance(c,_,u))<(r=null!==s?v.calculateDistance(s,_,u):r)||null===r?(n=o,c):(n=r,s)).position,null!==p&&p.distance<n)return!0;p={el:this,distance:n,xPosition1:i,xPosition2:l,yPosition1:d,yPosition2:t,position:a}}}),null!==p&&(e=p.position,{$el:m(p.el),position:e})},v.getElementName=function(e){return e.prop("tagName")},v.checkIfInline=function(e){var t=e.css("display");return-1!==["inline","inline-block","inline-flex"].indexOf(t)&&!e.is("br")},v.getContextMarker=function(){return m("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>")},v.prototype.removeAllPlaceholders=function(){Array.prototype.slice.call(this.context.querySelectorAll(".drop-marker")).forEach(function(e){e.parentNode.removeChild(e)})},v.prototype.addContainerContextMarker=function(e,t){var o=v.getContextMarker();switch(this.clearContainerContextMarker(),e.is("html,body")&&(t="inside",e=m(this.context.body)),t){case"inside":this.positionContextMarker(o,e),e.hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=v.getElementName(e);Array.prototype.slice.call(o.get(0).querySelectorAll("[data-dragcontext-marker-text]")).forEach(function(e){e.innerHTML=n}),0!==this.context.querySelectorAll("[data-sh-parent-marker]").length&&m(this.context.body).find("[data-sh-parent-marker]").first().before(o);break;case"sibling":this.positionContextMarker(o,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");n=v.getElementName(e.parent());Array.prototype.slice.call(o.get(0).querySelectorAll("[data-dragcontext-marker-text]")).forEach(function(e){e.innerHTML=n}),o.get(0).setAttribute("data-dragcontext-marker",n.toLowerCase()),0!==this.context.querySelectorAll("[data-sh-parent-marker]").length&&m(this.context.body).find("[data-sh-parent-marker]").first().before(o)}},v.prototype.positionContextMarker=function(e,t){t=t.get(0).getBoundingClientRect();e.css({height:t.height+4+"px",width:t.width+4+"px",top:t.top+m(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollTop()-2+"px",left:t.left+m(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollLeft()-2+"px"}),t.top+this.context.body.scrollTop<24&&e.find("[data-dragcontext-marker-text]").css("top","0px")},v.prototype.clearContainerContextMarker=function(){Array.prototype.slice.call(this.context.querySelectorAll("[data-dragcontext-marker]")).forEach(function(e){e.parentNode.removeChild(e)})},v.prototype.decideBeforeAfter=function(e,t,o){var n=v.checkIfInline(e),r=e.is("td,th"),o=(t=o?v.getMouseBearingsPercentage(e,null,o):t).yPercentage;(o=n?t.xPercentage:o)<50?r?this.prependPlaceholder(e):this.placeBefore(e):r?this.appendPlaceholder(e):this.placeAfter(e)},v.prototype.appendPlaceholder=function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},v.prototype.prependPlaceholder=function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t)},v.prototype.placeBefore=function(e){var t=v.checkIfInline(e),o=this.getPlaceHolder();t?o.addClass("vertical").css("height",e.innerHeight()+"px"):o.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",o)},v.prototype.placeAfter=function(e){var t=this.getPlaceHolder();v.checkIfInline(e)?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},v.prototype.addEntryToDragOverQueue=function(e,t,o){this.dragoverqueue.push([e,t,o])},v.prototype.processDragOverQueue=function(){var e,t,o;this.cursorMoving&&(o=this.dragoverqueue.pop(),this.dragoverqueue=[],o)&&3===o.length&&(e=o[0],t=o[1],o=o[2],this.orchestrateDragDrop(e,t,o))},v.prototype.checkIfCursorMoves=function(e,t,o,n){this.cursorMoving=!(e===o&&t===n)},v.prototype.addPlaceHolder=function(e,t,o){throw new Error("Must be implemented by subclass!")},v.prototype.findValidParent=function(e,t){throw new Error("Must be implemented by subclass!")},v.prototype.getPlaceHolder=function(){throw new Error("Must be implemented by subclass!")},v.prototype.orchestrateDragDrop=function(e,t,o){throw new Error("Must be implemented by subclass!")},v.prototype.reOrchestrate=function(e,t,o){e=e.parents(".grid-stack-item").find(".text-wrap");0!==e.length&&(this.removeAllPlaceholders(),this.orchestrateDragDrop(e,t,o))},e.prototype=Object.create(v.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,enumerable:!1,writable:!0}),e.prototype.addPlaceHolder=function(e,t,o){switch(o=o||this.getPlaceHolder(),this.removeAllPlaceholders(),t){case"before":e.hasClass("grid-stack-row")?e.prepend(o):e.before(o);break;case"after":e.hasClass("grid-stack-row")?e.append(o):e.after(o);break;case"inside-prepend":e.prepend(o);break;case"inside-append":e.append(o)}},e.prototype.getPlaceHolder=function(){return m('<div class="drop-marker drop-marker--rex-button"></div>')},e.prototype.findValidParent=function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(n.left-o.left))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"right":for(;;){o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(n.right-o.right))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"top":for(;;){o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(n.top-o.top))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"bottom":for(;;){var r,o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(n.bottom-o.bottom))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}}},e.prototype.orchestrateDragDrop=function(e,t,o){if(!e||0==e.length||!t||!o)return!1;var n,r,a=(e=e.is("html")?e.find("body"):e).hasClass("rex-button-wrapper");if(d=v.getMouseBearingsPercentage(e,t,o),!a&&0==e.parents(".rex-button-wrapper").length||(e=a?e:e.parents(".rex-button-wrapper").eq(0),s=m.extend(!0,{},c),_=!0,c.x=50,c.y=50),d.xPercentage>c.x&&d.xPercentage<100-c.x&&d.yPercentage>c.y&&d.yPercentage<100-c.y){var a=e.clone(),i=a.get(0),l=i.querySelector(".drop-marker");if(l&&l.parentNode.removeChild(l),""!==i.innerHTML||v.checkVoidElement(a))0===i.children.length?this.decideBeforeAfter(e,d):1!==i.children.length||a.hasClass("rex-buttons-paragraph")?(l=v.findNearestElement(e,o.xCoord,o.yCoord),this.decideBeforeAfter(l.$el,d,o)):(i=e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),this.decideBeforeAfter(i,d));else if(d.yPercentage<90)return void this.appendPlaceholder(e)}else d.xPercentage<=c.x||d.yPercentage<=c.y?(n=null,(n=d.yPercentage<=d.xPercentage?this.findValidParent(e,"top"):this.findValidParent(e,"left")).is("body,html")&&(r=this.context.body,n=m(r).children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.decideBeforeAfter(n,d,o)):(d.xPercentage>=100-c.x||d.yPercentage>=100-c.y)&&(n=null,(n=d.yPercentage>=d.xPercentage?this.findValidParent(e,"bottom"):this.findValidParent(e,"right")).is("body,html")&&(r=this.context.body,n=m(r).children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.decideBeforeAfter(n,d,o));_&&(c.x=s.x,c.y=s.y,_=!1),e.hasClass("rex-buttons-paragraph")||e.hasClass("text-wrap")||e.hasClass("rex-button-wrapper")||e.is(e.parents(".text-wrap").children())||this.reOrchestrate(e,t,o)},o.prototype=Object.create(v.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0}),o.prototype.addPlaceHolder=function(e,t,o){e.hasClass("rex-container")&&(t="before"==t?"inside-prepend":"inside-append"),o=o||this.getPlaceHolder();switch(this.removeAllPlaceholders(),t){case"before":e.before(o),0;break;case"after":e.after(o),0;break;case"inside-prepend":e.prepend(o),0;break;case"inside-append":e.append(o),0}},o.prototype.getPlaceHolder=function(){return m('<div class="drop-marker drop-marker--view"><div class="drop-marker--ruler"></div></div>')},o.prototype.findValidParent=function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent().get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(n.left-o.left))return e;e=e.parent()}break;case"right":for(;;){o=e.get(0).getBoundingClientRect(),n=e.parent().get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(n.right-o.right))return e;e=e.parent()}break;case"top":for(var r=null,a=0;a<e.parents().length;a++){o=e.get(0).getBoundingClientRect(),n=e.parent().get(0).getBoundingClientRect();if(e.is("body"))break;if(e.hasClass("rex-container")){r=e;break}if(0!=Math.abs(n.top-o.top)){r=e;break}e=e.parent()}return r;case"bottom":for(r=null,a=0;a<e.parents().length;a++){o=e.get(0).getBoundingClientRect(),n=e.parent().get(0).getBoundingClientRect();if(e.is("body"))break;if(e.hasClass("rex-container")){r=e;break}if(0!=Math.abs(n.bottom-o.bottom)){r=e;break}e=e.parent()}return r}},o.prototype.orchestrateDragDrop=function(e,t,o){if(!e||0==e.length||!t||!o)return!1;var n,r=JSON.parse(JSON.stringify(s));e.is("html")&&(e=e.find("body")),(d=v.getMouseBearingsPercentage(e,t,o)).yPercentage<=r.y?(n=this.findValidParent(e,"top"))&&(n.is("body,html")&&(n=m(this.context.body).children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.decideBeforeAfter(n,d,o)):d.yPercentage>=100-r.y&&(n=this.findValidParent(e,"bottom"))&&(n.is("body,html")&&(n=m(this.context.body).children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.decideBeforeAfter(n,d,o))},n.prototype=Object.create(v.prototype),Object.defineProperty(n.prototype,"constructor",{value:n,enumerable:!1,writable:!0}),n.prototype.addPlaceHolder=e.prototype.addPlaceHolder,n.prototype.getPlaceHolder=function(){return m('<div class="drop-marker drop-marker--rex-wpcf7"></div>')},n.prototype.findValidParent=function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(n.left-o.left))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"right":for(;;){o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(n.right-o.right))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"top":for(;;){o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(n.top-o.top))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"bottom":for(;;){var r,o=e.get(0).getBoundingClientRect(),n=(r=e.parent()).get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||r.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(n.bottom-o.bottom))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}}},n.prototype.orchestrateDragDrop=function(e,t,o){if(!e||0==e.length||!t||!o)return!1;if(e.is("html")&&(e=e.find("body")),d=v.getMouseBearingsPercentage(e,t,o),!e.hasClass("rex-element-wrapper")&&0==e.parents(".rex-element-wrapper").length||(e=e.hasClass("rex-element-wrapper")?e:e.parents(".rex-element-wrapper").eq(0),s=jQuery.extend(!0,{},c),_=!0,c.x=50,c.y=50),d.xPercentage>c.x&&d.xPercentage<100-c.x&&d.yPercentage>c.y&&d.yPercentage<100-c.y){var n=e.clone();if(n.find(".drop-marker").remove(),""!=n.html()||v.checkVoidElement(n))0==n.children().length?this.decideBeforeAfter(e,d):1!=n.children().length||n.hasClass("rex-elements-paragraph")?(n=v.findNearestElement(e,o.xCoord,o.yCoord),this.decideBeforeAfter(n.$el,d,o)):this.decideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),d);else if(d.yPercentage<90)return this.appendPlaceholder(e)}else{var r;d.xPercentage<=c.x||d.yPercentage<=c.y?((r=d.yPercentage<=d.xPercentage?this.findValidParent(e,"top"):this.findValidParent(e,"left")).is("body,html")&&(r=m(this.context.body).children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.decideBeforeAfter(r,d,o)):(d.xPercentage>=100-c.x||d.yPercentage>=100-c.y)&&(r=null,(r=d.yPercentage>=d.xPercentage?this.findValidParent(e,"bottom"):this.findValidParent(e,"right")).is("body,html")&&(r=m(this.context.body).children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.decideBeforeAfter(r,d,o))}_&&(c.x=s.x,c.y=s.y,_=!1),e.hasClass("rex-elements-paragraph")||e.hasClass("text-wrap")||e.hasClass("rex-element-wrapper")||e.is(e.parents(".text-wrap").children())||this.reOrchestrate(e,t,o)},{RexButtonDragDrop:e,RexModelDragDrop:o,RexWpcf7DragDrop:n}}(jQuery)).RexButtonDragDrop,RexModelDragDrop=dragDropInstances.RexModelDragDrop,RexWpcf7DragDrop=dragDropInstances.RexWpcf7DragDrop,dragDropInstances=null,Rexbuilder_Admin_Templates=function(o){"use strict";function n(e,t){switch(e){case"tmpl-tool-save":return'<div class="rex-modal__outside-footer"><div class="tool-button tool-button--inline tool-button--confirm tool-button--modal rex-modal-option tippy" data-tippy-content="Save" data-rex-option="save"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z016-Checked"></use></svg></i></span></div><div class="tool-button tool-button--inline tool-button--modal rex-modal-option tippy" data-rex-option="reset" data-tippy-content="Reset"><span class="rex-button btn-save--wrap"><i class="l-svg-icons"><svg><use xlink:href="#Z014-Refresh"></use></svg></i></span></div></div>';case"tmpl-tool-close":return'<div class="tool-button tool-button--black tool-button--close rex-modal__close-button"><i class="l-svg-icons"><svg><use xlink:href="#Z003-Close"></use></svg></i></div>'}}return{getTemplate:n,getParsedTemplate:function(e,t){return o.parseHTML(n(e))}}}(jQuery,(window,document)),Rexlive_MediaUploader=function(){"use strict";var i,r,l,d,o,n,a;return{openInsertImageBlocksMediaUploader:function(a){var e;setUserSetting("imgsize","full"),i?(i.state("insert-image").set("liveTarget",a.sectionTarget),i.state("insert-image").set("eventName",a.returnEventName)):(e=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),liveTarget:a.sectionTarget,eventName:a.returnEventName,type:"image"},wp.media.controller.Library.prototype.defaults)}),(i=wp.media({button:{text:"Select"},state:"insert-image",states:[new e]})).on("open",function(){var t=i.state("insert-image").get("selection");t.each(function(e){void 0!==e&&((e=wp.media.attachment(e.attributes.id)).fetch(),t.remove(e?[e]:[]))})}),i.on("close",function(){setUserSetting("imgsize","full")}),i.on("select",function(){var o=i.state("insert-image"),e=o.get("liveTarget"),t=o.get("eventName"),n=o.get("selection"),r={eventName:t,data_to_send:{info:a,media:[],sectionTarget:e}};n&&(n.each(function(e){var t=o.display(e).toJSON(),e=e.toJSON(),t=(wp.media.view.settings.captions||delete e.caption,{media_info:e,display_info:wp.media.string.props(t,e)});r.data_to_send.media.push(t)}),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r))})),i.open()},openEditImageMediaUploader:function(e,t,o){setUserSetting("imgsize","full"),o=void 0!==o?o:null,r?(r.state("upload-image-bg").set("$data",e),r.state("upload-image-bg").set("$preview",t),r.state("upload-image-bg").set("image_id",o)):(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-image-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:o},wp.media.controller.Library.prototype.defaults)}),(r=wp.media({button:{text:"Select"},state:"upload-image-bg",states:[new t]})).on("close",function(){setUserSetting("imgsize","full"),0==r.state("upload-image-bg").get("selection").length&&e.val()}),r.on("select",function(){var n=r.state("upload-image-bg"),e=n.get("selection");e&&e.each(function(e){var t=n.display(e).toJSON(),e=e.toJSON(),o=(wp.media.view.settings.captions||delete e.caption,t=wp.media.string.props(t,e),r.state("upload-image-bg").get("$data"));o.val(e.id),o.attr("data-rex-image-bg-url",t.src),o.attr("data-rex-image-width",t.width),o.attr("data-rex-image-height",t.height),r.state("upload-image-bg").get("$preview").css("backgroundImage","url("+e.url+")"),r.state("upload-image-bg").get("$preview").children().css("display","none"),0!=o.parents("#rex-edit-background-section").length?Background_Section_Image_Modal.updateImageBackground():0!=o.parents("#block-edit-image-bg").length?Background_Block_Image_Modal.updateImageBackground():0!=o.parents("#block-edit-image-setting-bg").length&&Background_Block_Image_Setting.updateImageBackground()})}),r.on("open",function(){var t,o=r.state("upload-image-bg").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),r.state("upload-image-bg").get("image_id"));e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[]))})),r.open()},openImageLiveMediaUploader:function(e){setUserSetting("imgsize",void 0!==e.imageSize&&""!==e.imageSize?e.imageSize:"full"),l?l.state("live-image").set("liveTarget",e.sectionTarget).set("selected_image",e.idImage).set("eventName",e.returnEventName).set("data_to_send",e.data_to_send):(e=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image",title:"Edit Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),liveTarget:e.sectionTarget,eventName:e.returnEventName,data_to_send:e.data_to_send,selected_image:e.idImage,type:"image"},wp.media.controller.Library.prototype.defaults)}),(l=wp.media({button:{text:"Select"},state:"live-image",states:[new e]})).on("open",function(){var t,o=l.state("live-image").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),l.state("live-image").get("selected_image"));l.state("live-image").get("data_to_send");e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[]))}),l.on("select",function(){var o=l.state("live-image"),e=o.get("liveTarget"),t=o.get("eventName"),n=o.get("data_to_send"),r=o.get("selection"),a={eventName:t,data_to_send:{sectionTarget:e,target:e}};r&&(r.each(function(e){var t=o.display(e).toJSON(),e=e.toJSON();wp.media.view.settings.captions||delete e.caption,t=wp.media.string.props(t,e),a.data_to_send.idImage=e.id,a.data_to_send.urlImage=t.src,a.data_to_send.image_size=t.size,a.data_to_send.width=t.width,a.data_to_send.height=t.height,void 0!==n.photoswipe&&(a.data_to_send.photoswipe=n.photoswipe),void 0!==n.active&&(a.data_to_send.active=n.active),void 0!==n.typeBGimage&&(a.data_to_send.typeBGimage=n.typeBGimage)}),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:a.data_to_send.active,image_bg_section:a.data_to_send.urlImage,id_image_bg_section:a.data_to_send.idImage}),Rexbuilder_Util_Admin_Editor.updateBkgrImgTool(),a.data_to_send.tools=n.tools,a.data_to_send.updateBlockHeight=n.updateBlockHeight,Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a))}),l.on("close",function(){setUserSetting("imgsize","full")})),l.open()},openImageMEMediaUploader:function(e){setUserSetting("imgsize","full"),d?d.state("me-image").set("inlineImgData",e):(e=wp.media.controller.Library.extend({defaults:_.defaults({id:"me-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",inlineImgData:e},wp.media.controller.Library.prototype.defaults)}),(d=wp.media({button:{text:"Select"},state:"me-image",states:[new e]})).on("select",function(){var o=d.state("me-image"),n=o.get("inlineImgData"),e=o.get("selection"),r={},a={};e&&(e.each(function(e){var t=o.display(e).toJSON(),e=e.toJSON();wp.media.view.settings.captions||delete e.caption,t=wp.media.string.props(t,e),a=t,r.idImage=e.id,r.urlImage=t.src,void 0===n.width?r.width=t.width:r.width="string"==typeof n?n.width.replace("px",""):n.width,void 0===n.height?r.height=t.height:r.height="string"==typeof n?n.height.replace("px",""):n.height,void 0===n.align?r.align="alignnone":r.align=n.align,void 0!==n.imgInsideLink&&!0===n.imgInsideLink?a.previousLink=!0:a.previousLink=!1}),e={eventName:"rexlive:inlineImageEdit",data_to_send:{imgData:r,displayData:a}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e))}),d.on("close",function(){setUserSetting("imgsize","full")}),d.on("open",function(){var t,o=d.state("me-image").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),d.state("me-image").get("inlineImgData")),n=null;(n=void 0!==e?void 0!==e.image_id?e.image_id:null:n)&&((t=wp.media.attachment(n)).fetch(),o.add(t?[t]:[]))})),d.open()},openInsertVideoBlocksMediaUploader:function(e){var t;o||(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-video",title:"Insert Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"video"}),type:"video"},wp.media.controller.Library.prototype.defaults)}),(o=wp.media({button:{text:"Select"},state:"insert-video",states:[new t]})).on("close",function(){}),o.on("select",function(){var n=o.state("insert-video"),e=n.get("selection"),r=[];e&&(e.each(function(e){var t={videoID:-1,videoUrl:"",width:"",height:""},o=n.display(e).toJSON(),e=e.toJSON();wp.media.view.settings.captions||delete e.caption,wp.media.string.props(o,e),t.videoID=e.id,t.videoUrl=e.url,t.width=e.width,t.height=e.height,r.push(t)}),Insert_Video_Modal.updateMp4VideoModal(r))}),o.on("open",function(){var t=o.state("insert-video").get("selection");t.each(function(e){void 0!==e&&((e=wp.media.attachment(e.attributes.id)).fetch(),t.remove(e?[e]:[]))})})),o.open()},openMediaUploaderVideo:function(e,t){t=void 0!==t?t:null,n?(n.state("upload-video-bg").set("$data",e),n.state("upload-video-bg").set("video_id",t)):(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-video-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:e,video_id:t},wp.media.controller.Library.prototype.defaults)}),(n=wp.media({button:{text:"Select"},state:"upload-video-bg",states:[new t]})).on("close",function(){0==n.state("upload-video-bg").get("selection").length&&e.val()}),n.on("select",function(){var o=n.state("upload-video-bg"),e=o.get("selection");e&&e.each(function(e){var t=o.display(e).toJSON(),e=e.toJSON(),t=(wp.media.view.settings.captions||delete e.caption,wp.media.string.props(t,e),n.state("upload-video-bg").get("$data"));t.val(e.id),t.attr("data-rex-video-bg-url",e.url),t.attr("data-rex-video-bg-width",e.width),t.attr("data-rex-video-bg-height",e.height),0!=t.parents("#video-section-editor-wrapper").length?(Section_Video_Background_Modal.updateVideoBackground(),Section_Video_Background_Modal.updateVideoMp4Link(e.url)):0!=t.parents("#video-block-editor-wrapper").length&&(Block_Video_Background_Modal.updateVideoBackground(),Block_Video_Background_Modal.updateVideoMp4Link(e.url))})}),n.on("open",function(){var t,o=n.state("upload-video-bg").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),n.state("upload-video-bg").get("video_id"));e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[]))})),n.open()},openMediaUploaderAccordionGallery:function(e){a?a.state("accordion-gallery").set("gallery_data",e):(e=wp.media.controller.Library.extend({defaults:_.defaults({id:"accordion-gallery",title:"Accordion Gallery",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),type:"image",gallery_data:e},wp.media.controller.Library.prototype.defaults)}),(a=wp.media({button:{text:"Select"},state:"accordion-gallery",states:[new e]})).on("close",function(){}),a.on("select",function(){var o,n=a.state("accordion-gallery"),e=n.get("selection");e&&((o=a.state("accordion-gallery").get("gallery_data")).modal_info.$accordion_preview_gallery.empty(),e.each(function(e){var t=n.display(e).toJSON(),e=e.toJSON(),t=(wp.media.view.settings.captions||delete e.caption,wp.media.string.props(t,e));o.modal_info.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:e.id,preview:e.url,url:t.src,size:t.size}))}))}),a.on("open",function(){var t,o=a.state("accordion-gallery").get("selection"),e=(o.each(function(e){void 0!==e&&((t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[]))}),a.state("accordion-gallery").get("gallery_data"));if(0<e.image_info.length)for(var n=0;n<e.image_info.length;n++)(t=wp.media.attachment(e.image_info[n].id)).fetch(),o.add(t?[t]:[])})),a.open()}}}(jQuery),Rexlive_RexSlider_TextEditor=function(a){"use strict";var e,i,t,n,l;return{init:function(){e=a("#rexeditor-modal"),i=e.parent(".rex-modal-wrap"),t=a("#rexeditor-close"),n=a("#editor-cancel"),l=a("#editor-save"),t.on("click",function(e){e.preventDefault(),l.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"]),tinyMCE.triggerSave()}),n.on("click",function(e){e.preventDefault(),n.val(""),l.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"])}),l.on("click",function(e){e.preventDefault(),"new-block"==n.val()&&(Rexpansive_Builder_Admin_Utilities.createNewTextBlock(),Rexpansive_Builder_Admin_Utilities.launchTooltips()),tinyMCE.triggerSave();tinyMCE.get("rexbuilder_editor");var t=a("#rexbuilder_editor").val(),o=a(a(this).val());switch(o.attr("data-block_type")){case"image":o.find(".element-preview .backend-image-preview").empty().append(t.replace(/'/gi,"’"));break;case"slide":o.find("textarea[name=rex-slider--slide-text]").text(t.replace(/'/gi,"’")),""!=t?o.find(".rex-slider__slide-edit[value=text]").addClass("rex-slider__slide-edit__field-active-notice"):o.find(".rex-slider__slide-edit[value=text]").removeClass("rex-slider__slide-edit__field-active-notice");break;case"empty":o.attr("data-block_type","text").removeClass("empty").addClass("text").find(".element-preview").empty().append(t.replace(/'/gi,"’"));break;default:o.find(".element-preview").empty().append(t.replace(/'/gi,"’"))}o.find(".data-text-content").text(t.replace(/'/gi,"’")),n.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"]),a(document).trigger("rexbuilder:block_content_edit",o)}),this.$text_editor=e,this.$text_editor_modal_wrap=i},openTextEditor:function(e,t,o,n){o=void 0!==o&&o,n=void 0!==n?n:[];var r=tinyMCE.get("rexbuilder_editor");null!=e&&l.val(e),null==r?(a("#rexbuilder_editor").val(t),a("#rexbuilder_editor").text(t)):(r.setContent(t),r.save({no_events:!0})),Rexlive_Modals_Utils.openModal(i,o,n)}}}(jQuery),Rexlive_Ajax_Calls=function(r){"use strict";return{save_process_ended:function(){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_process_ended",nonce_param:live_editor_obj.rexnonce,post_ID:document.getElementById("post_ID").value},success:function(e){e.success},error:function(e){}})},savePaletteColor:function(e){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_color",nonce_param:live_editor_obj.rexnonce,data:e},success:function(e){e.success},error:function(e){}})},deletePaletteColor:function(e,t){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_color",nonce_param:live_editor_obj.rexnonce,data:e},success:function(e){e.success&&void 0!==t&&"function"==typeof t.success.callback&&t.success.callback.call(this,t.success.args)},error:function(e){void 0!==t&&"function"==typeof t.error.callback&&t.error.callback.call(this,t.error.args)}})},savePaletteOverlayColor:function(e){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:e},success:function(e){e.success},error:function(e){}})},deletePaletteOverlayColor:function(e,t){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:e},success:function(e){e.success&&void 0!==t&&"function"==typeof t.success.callback&&t.success.callback.call(this,t.success.args)},error:function(e){void 0!==t&&"function"==typeof t.error.callback&&t.error.callback.call(this,t.error.args)}})},savePaletteColorGradient:function(n){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:n},success:function(e){e.success&&r(".palette-list__gradient").each(function(e,t){var t=r(t),o=tmpl("tmpl-palette-item",{}),o=r(o);t.find(".palette__add-gradient").before(o),o.css("background",n.gradient_preview),o.attr("data-gradient-id",n.ID),o.attr("data-gradient-value",n.gradient)})},error:function(e){}})},deletePaletteColorGradient:function(t){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&r(".palette-list__gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(e,t){r(t).remove()})},error:function(e){}})},savePaletteOverlayGradient:function(n){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:n},success:function(e){e.success&&r(".palette-list__overlay-gradient").each(function(e,t){var t=r(t),o=tmpl("tmpl-palette-item",{}),o=r(o);t.find(".palette__add-gradient").before(o),o.css("background",n.gradient_preview),o.attr("data-gradient-id",n.ID),o.attr("data-gradient-value",n.gradient)})},error:function(e){}})},deletePaletteOverlayGradient:function(t){r.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&r(".palette-list__overlay-gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(e,t){r(t).remove()})},error:function(e){}})}}}(jQuery),Rexlive_Color_Palette=function(n){"use strict";var r,t=function(e,t){""!==e&&(r.$spicker.spectrum("set",e),t)&&r.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=n(".sp-rex-color-palette");(r={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,o;e.preventDefault(),null!==r.$spicker&&(e=r.$spicker.spectrum("get"),t=Rexbuilder_Util_Admin_Editor.createRandomID(4),e=e.toRgbString(),Rexlive_Ajax_Calls.savePaletteColor({color:e,ID:t}),o=tmpl("tmpl-palette-item",{}),o=n(o),r.$add_color.before(o),o.css("background",e),o.attr("data-color-id",t),o.attr("data-color-value",e))}),r.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-color-value");e&&t(e,!0)}),r.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-color-id");Rexlive_Ajax_Calls.deletePaletteColor({ID:t}),Rexlive_Color_Palette.deletePaletteItem(e)}),r.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),r.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowColorPaletteModal()}r.$spicker.spectrum("hide")})},show:function(e){r.$spicker=e.$target,r.action=e.action,r.object=e.object;e=r.$spicker.spectrum("container").find(".sp-picker-container");r.$container.show().detach().appendTo(e)},hide:function(){r.$container.hide().detach().appendTo(n("#wpwrap")),r.$spicker=null,r.action=null,r.object=null},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),Rexlive_Overlay_Palette=function(n){"use strict";var r,t=function(e,t){""!==e&&(r.$spicker.spectrum("set",e),t)&&r.$spicker.spectrum("container").find(".sp-input").trigger("change")};return{init:function(){var e=n(".sp-rex-color-overlay-palette");(r={$spicker:null,object:null,action:null,$container:e,$add_color:e.find(".palette__add-color"),$palette_list:e.find(".palette-list"),$open_gradient_palette:e.find(".palette__open-gradient")}).$add_color.on("click",function(e){var t,o;e.preventDefault(),null!==r.$spicker&&(e=r.$spicker.spectrum("get"),t=Rexbuilder_Util_Admin_Editor.createRandomID(4),e=e.toRgbString(),Rexlive_Ajax_Calls.savePaletteOverlayColor({overlay:e,ID:t}),o=tmpl("tmpl-palette-item",{}),o=n(o),r.$add_color.before(o),o.css("background",e),o.attr("data-overlay-id",t),o.attr("data-overlay-value",e))}),r.$container.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-overlay-value");e&&t(e,!0)}),r.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var e=this.parentElement,t=e.getAttribute("data-overlay-id");Rexlive_Ajax_Calls.deletePaletteOverlayColor({ID:t}),Rexlive_Overlay_Palette.deletePaletteItem(e)}),r.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),r.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowOverlayPaletteModal()}r.$spicker.spectrum("hide")})},show:function(e){r.$spicker=e.$target,r.action=e.action,r.object=e.object;e=r.$spicker.spectrum("container").find(".sp-picker-container");r.$container.show().detach().appendTo(e)},hide:function(){r.$container.hide().detach().appendTo(n("#wpwrap")),r.$spicker=null,r.action=null,r.object=null},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),Rexlive_Modals_Utils=function(a){"use strict";function i(e){e.css("height","auto"),e.css("width","auto")}function l(e,t){var o;null!=t?(o=e.actual("height"),e.css("left",t.x-Rexlive_Base_Settings.viewport().width/2+"px"),o<t.y?(e.addClass("rex-modal__bottom-arrow--active"),e.css("top",t.y-o+n.y+"px")):(e.addClass("rex-modal__top-arrow--active"),e.css("top",t.y+n.y+"px"))):(e.css("left","0px"),e.css("top","50px"))}var d,n,o=function(e,t,o){if(o=void 0!==o?o:[],(t=void 0!==t&&t)||e.hasClass("rex-in--up")||(a("body").removeClass("rex-modal-open"),d.hide()),e.removeClass("rex-modal--active").fadeOut({duration:300}),e.hasClass("rex-in--up")&&e.removeClass("rex-in--up"),e.children().removeClass("rex-modal__bottom-arrow--active").removeClass("rex-modal__top-arrow--active"),o.length)for(var n=0;n<o.length;n++)e.find(".rex-modal").removeClass(o[n]);Rexlive_Base_Settings.$document.trigger("rexlive:modal_closed",[{$modal:e}]),e.trigger("rexlive:this_modal_closed");Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:close_modal"}),i(e.find(".rex-modal"))},t=function(){var e;Rexbuilder_Util_Admin_Editor.$body.hasClass("rex-modal-open")&&0<(e=Rexbuilder_Util_Admin_Editor.$body.find(".rex-modal--active")).length&&e.each(function(e,t){o(a(t))})};return{init:function(){d=a(".lean-overlay"),a(".rex-modal-draggable").each(function(e,t){a(t).draggable({cancel:"input,textarea,button,select,option,.rex-check-icon, .input-field, .rex-slider__slide-edit, #rex-css-ace-editor, #rex-html-ace-editor, label, .no-draggable",stop:function(e,t){i(a(this))}})}),n={x:0,y:-20},Rexlive_Base_Settings.$document.on("click",".rex-modal-wrap",function(e){e.target===this&&o(a(this))}),Rexlive_Base_Settings.$document.on("keydown",function(e){27===e.keyCode&&t()})},openModal:function(e,t,o,n){if(o=void 0!==o?o:[],n=void 0!==n&&n,(t=void 0!==t&&t)?e.addClass("rex-in--up"):(a("body").addClass("rex-modal-open"),d.show()),e.addClass("rex-modal--active").fadeIn({duration:300}),o.length)for(var r=0;r<o.length;r++)e.find(".rex-modal").addClass(o[r]);n&&l(e.find(".rex-modal"),{x:100,y:0}),i(e.find(".rex-modal"))},closeModal:o,resetModalDimensions:i,close_focus_modal:t,positionModal:l}}(jQuery),Insert_Video_Modal=function(o){"use strict";var l,d,c,s=function(){Rexlive_Modals_Utils.closeModal(l.$self.parent(".rex-modal-wrap"))},t=function(){l.$youTubeWrap.removeClass("selected"),l.$vimeoWrap.removeClass("selected"),l.$mp4Wrap.removeClass("selected"),l.$radioChooseYoutube.prop("checked",!1),l.$radioChooseVimeo.prop("checked",!1),l.$radioChooseMp4.prop("checked",!1)},n=function(){l.$youTubeWrap.addClass("selected"),l.$radioChooseYoutube.prop("checked",!0),l.$linkYoutube.trigger("focus")},r=function(){l.$vimeoWrap.addClass("selected"),l.$radioChooseVimeo.prop("checked",!0),l.$linkVimeo.trigger("focus")},a=function(){l.$mp4Wrap.addClass("selected"),l.$radioChooseMp4.prop("checked",!0)};return{init:function(){var e=o("#rex-insert-new-video-block");l={$self:e,$close_modal_btn:e.find(".rex-modal__close-button"),$linkYoutube:e.find("#rex-insert-youtube-url"),$linkVimeo:e.find("#rex-insert-vimeo-url"),$linkMp4:e.find("#rex-insert-mp4-url"),$audioYoutube:e.find("#rex-new-block-video-youtube-audio"),$audioVimeo:e.find("#rex-new-block-video-vimeo-audio"),$audioMp4:e.find("#rex-new-block-video-mp4-audio"),$radioChooseYoutube:e.find("#rex-choose-youtube-video"),$radioChooseVimeo:e.find("#rex-choose-vimeo-video"),$radioChooseMp4:e.find("#rex-choose-mp4-video"),$youTubeWrap:e.find("#insert-video-block-wrap-1"),$vimeoWrap:e.find("#insert-video-block-wrap-2"),$mp4Wrap:e.find("#insert-video-block-wrap-3")},d=null,l.$self.find(".input-field").click(function(e){e.preventDefault(),t();e=o(e.target);switch((e=e.is("div")?e:e.parents(".input-field")).attr("data-rex-video-type")){case"youtube":n();break;case"vimeo":r();break;case"mp4":a()}}),l.$close_modal_btn.click(function(e){e.preventDefault(),s()}),l.$self.find(".set-video-audio-btn").click(function(e){e.preventDefault();var e=o(e.target).parents(".set-video-audio-btn").find(".video-audio-checkbox"),t=e.prop("checked");e.prop("checked",!t)}),l.$self.find(".rex-video-type-select").click(function(e){e.preventDefault(),t();e=o(e.target);0!=e.parents(".youtube-insert-wrap").length?n():0!=e.parents(".vimeo-insert-wrap").length?r():0!=e.parents(".mp4-insert-wrap").length&&a()}),l.$self.find("#rex-upload-mp4-video").click(function(e){Rexlive_MediaUploader.openInsertVideoBlocksMediaUploader()}),l.$self.find("#rex-insert-video-block-save").click(function(e){var t,o,n,r,a,i=l.$self.find(".video-insert-wrap.selected"),i=(i.hasClass("youtube-insert-wrap")?(t="youtube",o=l.$linkYoutube.val(),a=l.$audioYoutube.prop("checked")):i.hasClass("vimeo-insert-wrap")?(t="vimeo",n=l.$linkVimeo.val(),a=l.$audioVimeo.prop("checked")):i.hasClass("mp4-insert-wrap")&&(t="mp4",r=d,a=l.$audioMp4.prop("checked")),{eventName:"rexlive:insert_video",data_to_send:{urlYoutube:o,urlVimeo:n,videoMp4:r,hasAudio:a=void 0!==a&&"checked"==a,typeVideo:t,sectionTarget:c}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i),s()})},openVideoModal:function(e){l.$linkVimeo.val(""),l.$linkYoutube.val(""),l.$linkMp4.val("").next("label").removeClass("active"),t(),c=e.sectionTarget,Rexlive_Modals_Utils.openModal(l.$self.parent(".rex-modal-wrap"))},updateMp4VideoModal:function(e){d=e,l.$linkMp4.val(e[0].videoUrl).next("label").addClass("active"),l.$linkMp4.trigger("focus")}}}(jQuery),LayoutGrid_Modal=function(o){"use strict";function t(){return{layout:1==n.$choose_layout.prop("checked")?"fixed":"masonry"}}var n,r,a=function(){n.$section_layout_typeWrap.each(function(e,t){o(t).removeClass("selected"),o(t).find("input").prop("checked",!1)})},i=function(){var e=t(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.layout}),Rexbuilder_Util_Admin_Editor.updateLayoutTool(),Rexbuilder_Util_Admin_Editor.updateLayoutCheckboxTool(),{eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:r,layout:e.layout}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){n={$section_layout_typeWrap:e.find(".rexlive-layout-type"),$section_layout_types_wrap:e.find(".rex-edit-layout-wrap"),$choose_layout:e.find(".builder-edit-row-layout-checkbox")},Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-layout-type",function(e){e.preventDefault(),a();e=o(e.target).parents(".rexlive-layout-type");e.addClass("selected"),e.find("input").prop("checked",!0),i()}),n.$choose_layout.on("change",function(e){i()})},getData:t,updateLayoutModal:function(e){r=e.sectionTarget,e=e.activeLayout,n.$choose_layout.prop("checked","fixed"==e)},applySectionLayout:i,clearLayoutModal:function(){a()}}}(jQuery),Section_Width_Modal=function(r){"use strict";function a(){l.$section_width_type_wrap.each(function(e,t){r(t).removeClass("selected"),r(t).find("input").prop("checked",!1)}),l.$section_boxed_width_input.val("")}function i(e){p(),l.$section_boxed_width_input.val(e.sectionWidth),(e=l.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+e.dimension+'"]')).addClass("selected"),e.find("input").prop("checked",!0)}function o(){var e=l.$section_boxed_width_input.val(),t=l.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type"),e=(_=!1,Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e+t,dimension:"100%"===e+t?"full":"boxed"}),Rexbuilder_Util_Admin_Editor.updateWidthTool(),{eventName:"rexlive:set_section_width",data_to_send:{sectionWidth:{width:e,type:t},sectionTarget:s}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)}var l,d,c,s,_=!1,n=20,u=320,p=function(){l.$section_boxed_width_wrap.children().each(function(e,t){r(t).removeClass("selected"),r(t).find("input").prop("checked",!1)})},m=function(){return{width:l.$section_boxed_width_input.val(),type:l.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type")}};function t(e){e.preventDefault(),_=!0;var t="full"==l.$section_width_type.children(".selected").attr("data-rex-section-width"),e=r(e.target).parents(".boxed-width-type-wrap"),o=e.prop("checked"),n=(p(),e.addClass("selected"),e.find("input").prop("checked",!0),"%"===e.attr("data-rex-section-width-type")?c.boxed:c.boxedPixels);o||i(n),t&&"px"==e.attr("data-rex-section-width-type")&&(a(),(o=l.$section_width_type.children('[data-rex-section-width="boxed"]')).addClass("selected"),o.find("input").prop("checked",!0),l.$section_boxed_width_input.val(c.boxed.sectionWidth)),h()}function v(e){e.preventDefault(),a(),_=!0;var e=r(e.target).parents(".rexlive-section-width"),e=(e.addClass("selected"),e.find("input").prop("checked",!0),e.attr("data-rex-section-width")),t=e!==d.type;i(t?"boxed"===e?c.boxed:c.full:d),o()}function f(e){e.stopPropagation();e=e.target;0===r(e).parents(".section-set-width").length&&!e.matches(".section-set-width")&&_&&(l.$section_width_type_wrap.filter('[data-rex-section-width="full"]').removeClass("selected"),l.$section_width_type_wrap.filter('[data-rex-section-width="boxed"]').addClass("selected").find("input").prop("checked",!0),h(),o())}function g(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&e.preventDefault()}function b(e){var t=r(e.target);if(_=!0,-1!==r.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40)return 8==e.keyCode?void 0:(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0))),void((48<=e.keyCode&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&h()));(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur()}function h(){var e=m(),t="px"===e.type?u:n;e.width<t&&l.$section_boxed_width_input.val(t)}return{init:function(e){e=e.find(".section-width-wrapper");l={$self:e,$section_width_type_wrap:e.find(".rexlive-section-width"),$section_width_type:e.find(".rex-edit-row-width"),$section_full:e.find("#section-full-modal"),$section_boxed:e.find("#section-boxed-modal"),$section_boxed_width_input:e.find(".section-set-boxed-width"),$section_boxed_width_type:e.find(".section-width-type"),$section_boxed_width_wrap:e.find(".section-set-boxed-width-wrap")},c={boxed:{type:"boxed",dimension:"%",sectionWidth:"80"},boxedPixels:{type:"boxed",dimension:"px",sectionWidth:"320"},full:{type:"full",dimension:"%",sectionWidth:"100"}},d={dimension:"",sectionWidth:"",widthType:""},Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .boxed-width-type-wrap",t),Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-section-width",v),Rexlive_Base_Settings.$document.get(0).addEventListener("click",f),l.$section_boxed_width_input.keyup(g),l.$section_boxed_width_input.keydown(b)},resetOldWidthData:function(){d.dimension="",d.sectionWidth="",d.widthType=""},getData:m,clearSectionWidth:a,updateSectionWidth:function(e){a(),s=e.sectionTarget;var t=e.dimension,e=e.section_width,o="%",n="100",e=("full"!=t&&(n=parseInt(e),-1==e.indexOf("%"))&&(o="px"),d.type=t,d.sectionWidth=n,d.dimension=o,l.$section_boxed_width_input.val(n),l.$section_width_type.children('[data-rex-section-width="'+t+'"]')),n=(e.addClass("selected"),e.find("input").prop("checked",!0),l.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+o+'"]'));n.addClass("selected"),n.find("input").prop("checked",!0)},applySectionWidth:o}}(jQuery),GridSeparators_Modal=function(o){"use strict";function t(){a.$block_gutter.val(i.gutter),a.$row_separator_top.val(i.top),a.$row_separator_right.val(i.right),a.$row_separator_bottom.val(i.bottom),a.$row_separator_left.val(i.left)}function n(){var e=parseInt(a.$block_gutter.val()),t=parseInt(a.$row_separator_top.val()),o=parseInt(a.$row_separator_right.val()),n=parseInt(a.$row_separator_bottom.val()),r=parseInt(a.$row_separator_left.val());return{gutter:isNaN(e)?i.gutter:e,top:isNaN(t)?i.top:t,right:isNaN(o)?i.right:o,bottom:isNaN(n)?i.bottom:n,left:isNaN(r)?i.left:r}}function r(){var e=n(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({block_distance:e.gutter,row_separator_top:e.top,row_separator_right:e.right,row_separator_bottom:e.bottom,row_separator_left:e.left}),{eventName:"rexlive:set_row_separatos",data_to_send:{distances:n(),sectionTarget:l}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)}var a,i,l,d=function(e){e.keydown(function(e){var t=o(e.target);-1!==o.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},c=function(e){e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),r())})};return{init:function(e){a={$self:e,$block_gutter:e.find(".section-set-block-gutter"),$row_separator_top:e.find("#row-separator-top"),$row_separator_right:e.find("#row-separator-right"),$row_separator_bottom:e.find("#row-separator-bottom"),$row_separator_left:e.find("#row-separator-left")},i={gutter:20,top:20,right:20,bottom:20,left:20},t(),d(a.$block_gutter),d(a.$row_separator_top),d(a.$row_separator_right),d(a.$row_separator_bottom),d(a.$row_separator_left),c(a.$block_gutter),c(a.$row_separator_top),c(a.$row_separator_right),c(a.$row_separator_bottom),c(a.$row_separator_left)},updateDistances:function(e){l=e.sectionTarget;var e=e.rowDistances,t=(isNaN(e.gutter)?i:e).gutter,o=(isNaN(e.top)?i:e).top,n=(isNaN(e.right)?i:e).right,r=(isNaN(e.bottom)?i:e).bottom,e=(isNaN(e.left)?i:e).left;a.$block_gutter.val(t),a.$row_separator_top.val(o),a.$row_separator_right.val(n),a.$row_separator_bottom.val(r),a.$row_separator_left.val(e)},applyRowDistances:r,resetDistances:t,getData:n}}(jQuery),Block_Photoswipe_Setting=function(){"use strict";var t,o,n;function r(){o.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"}function a(){t.$checkboxPhotoswipe.prop("checked",!1)}function i(){var e={eventName:"rexlive:apply_photoswipe_block",data_to_send:{photoswipe:!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),r()}return{init:function(e){e=e.find(".background_set_image"),t={$is_photoswipe:e.find("#bg-set-photoswipe"),$checkboxPhotoswipe:e.find("#background_photoswipe")},o={imagePswpActive:!1},n=null,t.$is_photoswipe.click(function(e){e.preventDefault(),!0===t.$checkboxPhotoswipe.prop("checked")?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),i()})},updatePhotoswipeModal:function(e){a(),n=e.target,t.$checkboxPhotoswipe.prop("checked","true"==e.photoswipe.toString()),r()},resetPhotoswipeModal:a,updateBlockPhotoswipe:i}}(jQuery),SectionMargins_Modal=function(o){"use strict";function t(){a.$row_margin_top.val(i.top),a.$row_margin_right.val(i.right),a.$row_margin_bottom.val(i.bottom),a.$row_margin_left.val(i.left)}function n(){var e=parseInt(a.$row_margin_top.val()),t=parseInt(a.$row_margin_right.val()),o=parseInt(a.$row_margin_bottom.val()),n=parseInt(a.$row_margin_left.val());return{top:isNaN(e)?i.top:e,right:isNaN(t)?i.right:t,bottom:isNaN(o)?i.bottom:o,left:isNaN(n)?i.left:n}}function r(){var e=n(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_margin_top:e.top,row_margin_bottom:e.bottom,row_margin_right:e.right,row_margin_left:e.left}),{eventName:"rexlive:set_section_margins",data_to_send:{margins:e,sectionTarget:l}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)}var a,i,l,d=function(e){e.keydown(function(e){var t=o(e.target);-1!==o.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||"-"==e.key?(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val()-1)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},c=function(e){e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),r())})};return{init:function(e){a={$row_margin_top:e.find("#row-margin-top"),$row_margin_right:e.find("#row-margin-right"),$row_margin_bottom:e.find("#row-margin-bottom"),$row_margin_left:e.find("#row-margin-left")},i={top:0,right:0,bottom:0,left:0},t(),d(a.$row_margin_top),d(a.$row_margin_right),d(a.$row_margin_bottom),d(a.$row_margin_left),c(a.$row_margin_top),c(a.$row_margin_right),c(a.$row_margin_bottom),c(a.$row_margin_left)},updateMargins:function(e){l=e.sectionTarget;var e=e.marginsSection,t=(isNaN(e.top)?i:e).top,o=(isNaN(e.right)?i:e).right,n=(isNaN(e.bottom)?i:e).bottom,e=(isNaN(e.left)?i:e).left;a.$row_margin_top.val(t),a.$row_margin_right.val(o),a.$row_margin_bottom.val(n),a.$row_margin_left.val(e)},applySectionMargins:r,resetMargins:t,getData:n}}(jQuery),PhotoSwipe_Modal=function(){"use strict";function t(){n.$section_active_photoswipe.prop("checked",r)}function o(){return!0===n.$section_active_photoswipe.prop("checked")?"true":"false"}var n,r,a,i=function(){var e=o(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_active_photoswipe:e}),{eventName:"rexlive:set_row_photoswipe",data_to_send:{sectionTarget:a,photoswipe:e}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){n={$section_active_photoswipe:e.find("#section-active-photoswipe")},r=!1,t(),n.$section_active_photoswipe.click(function(e){i()})},updatePhotoswipe:function(e){a=e.sectionTarget,n.$section_active_photoswipe.prop("checked",e.photoswipe)},applyPhotoswipeSetting:i,resetPhotoswipe:t,getData:o}}(jQuery),Hold_Grid_Modal=function(){"use strict";function t(){o.$element.prop("checked",r)}function n(){return o.$element.prop("checked")}var o,r,a,i=function(){var e=n(),t=Section_CustomClasses_Modal.getData(),o={sectionTarget:a,customClasses:""};e?o.customClasses=t+" rex-block-grid":(t=t.replace(/\s*rex-block-grid/,""),o.customClasses=t),o.customClasses=o.customClasses.trim(),Section_CustomClasses_Modal.update(o),Section_CustomClasses_Modal.apply(),"default"!==Rexbuilder_Util_Admin_Editor.getActiveLayout()&&Rexbuilder_Util_Admin_Editor.activeWidth<768&&(t={eventName:"rexlive:set_row_hold_grid",data_to_send:{sectionTarget:a,holdGrid:e}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t))};return{init:function(e){o={$element:e.find("#rx-hold-grid")},r=!1,t(),o.$element.click(i)},getData:n,apply:i,update:function(e){a=e.sectionTarget;var t=!1;-1!==e.customClasses.indexOf("rex-block-grid")&&(t=!0),o.$element.prop("checked",t)},reset:t}}(jQuery),Section_NavLabel_Modal=function(){"use strict";function t(){n.$section_label.val(r)}function o(){return n.$section_label.val()}var n,r,a,i=function(){var e=o(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_nav_label:e}),{eventName:"rexlive:change_section_nav_label",data_to_send:{sectionTarget:a,sectionNavLabel:e}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){n={$section_label:e.find("#section-nav-label")},r="",t(),n.$section_label.keyup(function(e){i()})},updateSectionNavLabel:function(e){a=e.sectionTarget,n.$section_label.val(e.sectionNavLabel),""!==e.sectionNavLabel?n.$section_label.siblings("label, .prefix").addClass("active"):n.$section_label.siblings("label, .prefix").removeClass("active")},applySectionNavLabel:i,resetSectionNavLabel:t,getData:o}}(jQuery),FullHeight_Modal=function(){"use strict";var t,o,n;function r(){t.$is_full.prop("checked",o)}function a(){var e=!0===t.$is_full.prop("checked")?"true":"false",e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({full_height:e}),{eventName:"rexlive:set_row_fullHeight",data_to_send:{sectionTarget:n,fullHeight:e}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)}return{init:function(e){t={$is_full:e.find("#section-is-full")},o=!1,r(),t.$is_full.click(function(){a()})},update:function(e){n=e.sectionTarget,t.$is_full.prop("checked","true"==e.fullHeight),"masonry"===e.activeLayout?t.$is_full.prop("disabled",!0):t.$is_full.prop("disabled",!1)},apply:a,reset:r}}(jQuery),SectionName_Modal=function(){"use strict";function t(){n.$section_id.val(r)}function o(){return n.$section_id.val()}var n,r,a,i=function(){var e=o(),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_name:e}),{eventName:"rexlive:change_section_name",data_to_send:{sectionTarget:a,sectionName:e}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){n={$section_id:e.find("#sectionid-container")},r="",t(),n.$section_id.keyup(function(e){i()})},updateSectionName:function(e){a=e.sectionTarget,n.$section_id.val(e.sectionName),""!=e.sectionName?n.$section_id.focus():n.$section_id.blur()},applySectionName:i,resetSectionName:t,getData:o}}(jQuery),Rexlive_Top_Tools=function(){"use strict";return{init:function(){Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-toolbox__toggle-wrap .close-toolbox").on("click",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.toggleClass("toolbox--closed")})}}}(jQuery),Section_CustomClasses_Modal=function(){"use strict";function e(){}function t(){var e=o.$classes.val();return e+=n}var o,n,r,a=function(){var e=t().trim().split(/\s+/),e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({custom_classes:e}),{eventName:"rexlive:apply_section_custom_classes",data_to_send:{sectionTarget:r,customClasses:e}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){(o={$classes:e.find("#section-set-custom-class")}).$classes.blur(a)},getData:t,update:function(e){r=e.sectionTarget;e=e.customClasses;n="",-1!==e.indexOf("active-large-overlay")&&(n+=" active-large-overlay",e=e.replace("active-large-overlay","")),-1!==e.indexOf("active-medium-overlay")&&(n+=" active-medium-overlay",e=e.replace("active-medium-overlay","")),-1!==e.indexOf("active-small-overlay")&&(n+=" active-small-overlay",e=e.replace("active-small-overlay","")),-1!==e.indexOf("rex-block-grid")&&(n+=" rex-block-grid",e=e.replace("rex-block-grid","")),""==e?o.$classes.siblings("label, .prefix").removeClass("active"):o.$classes.siblings("label, .prefix").addClass("active"),o.$classes.val(e)},reset:e,apply:a}}(jQuery),Section_Modal=function(t){"use strict";function o(){LayoutGrid_Modal.clearLayoutModal(),Section_Width_Modal.clearSectionWidth(),GridSeparators_Modal.resetDistances(),SectionMargins_Modal.resetMargins(),PhotoSwipe_Modal.resetPhotoswipe(),Hold_Grid_Modal.reset(),FullHeight_Modal.reset(),SectionName_Modal.resetSectionName(),Section_NavLabel_Modal.resetSectionNavLabel(),Section_CustomClasses_Modal.reset()}var n,r,a=function(e){e&&i(),Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap")),setTimeout(function(){o()},300),r=null},i=function(){r&&l(r),d();var e={eventName:"rexlive:update_blocks_sizes",data_to_send:{sectionTarget:r.sectionTarget,blocksState:r.blocksState}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},l=function(e){LayoutGrid_Modal.updateLayoutModal(e),Section_Width_Modal.updateSectionWidth(e),GridSeparators_Modal.updateDistances(e),SectionMargins_Modal.updateMargins(e),PhotoSwipe_Modal.updatePhotoswipe(e),Hold_Grid_Modal.update(e),FullHeight_Modal.update(e),SectionName_Modal.updateSectionName(e),Section_NavLabel_Modal.updateSectionNavLabel(e),Section_CustomClasses_Modal.update(e)},d=function(){LayoutGrid_Modal.applySectionLayout(),Section_Width_Modal.applySectionWidth(),GridSeparators_Modal.applyRowDistances(),SectionMargins_Modal.applySectionMargins(),PhotoSwipe_Modal.applyPhotoswipeSetting(),Hold_Grid_Modal.apply(),FullHeight_Modal.apply(),SectionName_Modal.applySectionName(),Section_NavLabel_Modal.applySectionNavLabel(),Section_CustomClasses_Modal.apply()};return{init:function(){var e=t("#modal-background-responsive-set");(n={$self:e,$options_buttons:e.find(".rex-modal-option"),$close_button:e.find(".rex-modal__close-button")}).$close_button.click(function(e){e.preventDefault(),a(!0)}),n.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":a(!1);break;case"reset":i()}}),LayoutGrid_Modal.init(e),Section_Width_Modal.init(e),GridSeparators_Modal.init(e),SectionMargins_Modal.init(e),PhotoSwipe_Modal.init(e),Hold_Grid_Modal.init(e),FullHeight_Modal.init(e),SectionName_Modal.init(e),Section_NavLabel_Modal.init(e),Section_CustomClasses_Modal.init(e)},openSectionModal:function(e,t){r=e,o(),l(e),Rexlive_Modals_Utils.positionModal(n.$self,t),Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap"))}}}(jQuery),Background_Section_Color_Modal=function(o){"use strict";var n,r,a,t,i,l=function(){var e=!0===n.$color_active.prop("checked"),e={eventName:"rexlive:apply_background_color_section",data_to_send:{color:(a=e)?r:"",active:a,sectionTarget:t}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){var t,e=e.find("#background-section-set-color");n={$color_active:e.find("#color-section-active"),$color_active_wrapper:e.find(".bg-color-section-active-wrapper"),$color_runtime_value:e.find("#background-section-color-runtime"),$color_value:e.find("#background-section-color"),$color_preview_icon:e.find("#background-section-preview-icon"),$color_palette_wrap:e.find("#bg-section-color-palette"),$color_palette_buttons:e.find("#bg-section-color-palette .bg-palette-selector")},a=!0,i={eventName:"rexlive:change_section_bg_color",data_to_send:{color:null,sectionTarget:{}}},n.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){t=!1},move:function(e){n.$color_preview_icon.hide(),i.data_to_send.color=a?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i),t=!0},change:function(e){n.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){t&&(r=e.toRgbString()),n.$color_runtime_value.val(r),l()},cancelText:"",chooseText:""}),e=tmpl("tmpl-tool-close",{}),e=o(e),n.$color_value.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),n.$color_value.spectrum("hide")}),n.$color_palette_buttons.on("click",function(e){var t=o(e.currentTarget).find(".bg-palette-value").val();o(e.currentTarget).addClass("palette-color-active"),n.$color_preview_icon.hide(),n.$color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),n.$color_value.spectrum("set",t),n.$color_runtime_value.val(t),r=t,l()}),o(".block-background-color-picker .sp-choose").on("click",function(){n.$color_preview_icon.hide(),n.$color_runtime_value.val(n.$color_value.spectrum("get"))}),n.$color_preview_icon.on("click",function(){return n.$color_value.spectrum("show"),!1}),n.$color_active_wrapper.click(function(e){e.preventDefault();e=!0===n.$color_active.prop("checked");r=e?(n.$color_active.prop("checked",!1),""):(n.$color_active.prop("checked",!0),n.$color_runtime_value.val()),l()})},updateColorModal:function(e){t=e.sectionTarget,i.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(n.$color_runtime_value.val(e.color),n.$color_preview_icon.hide(),n.$color_value.spectrum("set",e.color)):(n.$color_runtime_value.val(""),n.$color_preview_icon.show(),n.$color_value.spectrum("set","")),r=e.color,(a="true"==e.active.toString())?n.$color_active.prop("checked",!0):n.$color_active.prop("checked",!1)}}}(jQuery),Overlay_Color_Section_Modal=function(o){"use strict";var n,r,t,a,i=function(){var e=!0===n.$overlay_active.prop("checked"),e={eventName:"rexlive:change_section_overlay",data_to_send:{color:r,active:e,sectionTarget:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){n={$overlay_active:e.find("#overlay-section-active"),$overlay_active_wrapper:e.find(".overlay-active-wrapper"),$overlay_color_value:e.find("#overlay-color-row-value"),$overlay_color_preview_icon:e.find("#overlay-row-preview-icon"),$overlay_color_palette_buttons:e.find("#bg-overlay-row-color-palette .bg-palette-selector")},t={eventName:"rexlive:change_section_overlay_color",data_to_send:{color:null,sectionTarget:{}}},n.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){n.$overlay_color_preview_icon.hide(),t.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},change:function(e){n.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){r=e.toRgbString(),i()},cancelText:"",chooseText:""}),e=tmpl("tmpl-tool-close",{}),e=o(e),n.$overlay_color_value.spectrum("container").append(e),e.on("click",function(e){e.preventDefault(),n.$overlay_color_value.spectrum("hide")}),n.$overlay_color_palette_buttons.on("click",function(e){var t=o(e.currentTarget).find(".bg-palette-value").val();o(e.currentTarget).addClass("palette-color-active"),n.$overlay_color_preview_icon.hide(),n.$overlay_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),n.$overlay_color_value.spectrum("set",t),r=t,i()}),o(".block-overlay-color-picker .sp-choose").on("click",function(){n.$overlay_color_preview_icon.hide()}),n.$overlay_color_preview_icon.on("click",function(){return n.$overlay_color_value.spectrum("show"),!1}),n.$overlay_active_wrapper.click(function(e){e.preventDefault(),!0===n.$overlay_active.prop("checked")?n.$overlay_active.prop("checked",!1):n.$overlay_active.prop("checked",!0),i()})},updateOverlayModal:function(e){a=e.sectionTarget,t.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(n.$overlay_color_value.val(e.color),n.$overlay_color_preview_icon.hide(),n.$overlay_color_value.spectrum("set",e.color),r=e.color):(n.$overlay_color_value.val(""),n.$overlay_color_preview_icon.show()),"true"==e.active.toString()?n.$overlay_active.prop("checked",!0):n.$overlay_active.prop("checked",!1)}}}(jQuery),Background_Section_Image_Modal=function(){"use strict";var r,a,i,t=function(){var e=!0===r.$image_active.prop("checked"),e=(a=e,r.$image_url.val()),t=void 0===r.$image_url.attr("data-rex-image-bg-url")?"":r.$image_url.attr("data-rex-image-bg-url"),o=void 0===r.$image_url.attr("data-rex-image-width")?"":r.$image_url.attr("data-rex-image-width"),n=void 0===r.$image_url.attr("data-rex-image-height")?"":r.$image_url.attr("data-rex-image-height"),e={eventName:"rexlive:apply_background_image_section",data_to_send:{idImage:a?e:"",urlImage:a?t:"",width:a?o:"",height:a?n:"",active:a,sectionTarget:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){e=e.find("#section-edit-image-bg");r={$image_upload_wrap:e.find("#bg-section-set-img-wrap"),$image_active:e.find("#image-section-active"),$image_active_wrapper:e.find(".bg-image-section-active-wrapper"),$image_preview:e.find("#bg-section-img-preview"),$image_preview_icon:e.find("#bg-section-img-preview i"),$image_url:e.find("#background-section-url"),$image_id:e.find("#background-section-up-img")},a=!0,r.$image_active_wrapper.click(function(e){e.preventDefault();e=!0===r.$image_active.prop("checked");e?r.$image_active.prop("checked",!1):r.$image_active.prop("checked",!0),a=e,t()}),r.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(r.$image_url,r.$image_preview,r.$image_url.val())})},updateImageModal:function(e){i=e.sectionTarget,r.$image_url.val(e.idImage),""!=e.idImage&&(r.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),r.$image_preview.children().css("display","none"),r.$image_url.attr("data-rex-image-bg-url",e.imageUrl),r.$image_url.attr("data-rex-image-width",e.width),r.$image_url.attr("data-rex-image-height",e.height)),(a="true"==e.active.toString())?r.$image_active.prop("checked",!0):r.$image_active.prop("checked",!1)},resetImageModal:function(){r.$image_url.val(""),r.$image_preview.css("backgroundImage",""),r.$image_preview.children().css("display","block"),r.$image_url.attr("data-rex-image-bg-url",""),r.$image_url.attr("data-rex-image-width",""),r.$image_url.attr("data-rex-image-height",""),a=!0,r.$image_active.prop("checked",!0)},updateImageBackground:t}}(jQuery),Section_Video_Background_Modal=function(t){"use strict";function o(){a.$youTubeWrap.removeClass("selected"),a.$vimeoWrap.removeClass("selected"),a.$mp4Wrap.removeClass("selected"),a.$checkboxChooseYoutube.prop("checked",!1),a.$checkboxChooseVimeo.prop("checked",!1),a.$checkboxChooseMp4.prop("checked",!1),a.$checkboxChooseYoutube.prop("disabled",!1),a.$checkboxChooseVimeo.prop("disabled",!1),a.$checkboxChooseMp4.prop("disabled",!1),a.$linkYoutube.next("label").removeClass("active"),a.$linkVimeo.next("label").removeClass("active"),a.$linkMp4Preview.next("label").removeClass("active"),n="",a.$linkVimeo.val(""),a.$linkYoutube.val(""),a.$linkMp4.val(""),a.$linkMp4Preview.val("").next("label").removeClass("active")}var a,n,i,r,l=function(e){e&&d(),Rexlive_Modals_Utils.closeModal(a.$self.parent(".rex-modal-wrap")),r=null},d=function(){r&&c(r.bgVideo),p()},c=function(e){o(),i=e.sectionTarget,""!=e.mp4VideoID?(n="mp4",a.$linkVimeo.val(""),a.$linkYoutube.val(""),a.$linkMp4.val(e.mp4VideoID),a.$linkMp4.attr("data-rex-video-bg-url",e.mp4Video),a.$linkMp4Preview.val(e.mp4Video).next("label").addClass("active"),u()):""!=e.vimeoUrl?(n="vimeo",a.$linkVimeo.val(e.vimeoUrl),a.$linkYoutube.val(""),a.$linkMp4.val(""),a.$linkMp4.attr("data-rex-video-bg-url",""),a.$linkMp4Preview.val("").next("label").removeClass("active"),_()):""!=e.youtubeVideo&&(n="youtube",a.$linkVimeo.val(""),a.$linkYoutube.val(e.youtubeVideo),a.$linkMp4.val(""),a.$linkMp4.attr("data-rex-video-bg-url",""),a.$linkMp4Preview.val("").next("label").removeClass("active"),s())},s=function(){n=a.$youTubeWrap.hasClass("selected")?(a.$youTubeWrap.removeClass("selected"),a.$checkboxChooseYoutube.prop("checked",!1),a.$checkboxChooseVimeo.prop("disabled",!1),a.$checkboxChooseMp4.prop("disabled",!1),a.$linkYoutube.prop("disabled",!1),a.$linkVimeo.prop("disabled",!1),""===a.$linkYoutube.val()&&a.$linkYoutube.next("label").removeClass("active"),""):(a.$checkboxChooseYoutube.prop("checked",!0),a.$checkboxChooseVimeo.prop("disabled",!0),a.$checkboxChooseMp4.prop("disabled",!0),a.$youTubeWrap.addClass("selected"),a.$linkYoutube.next("label").addClass("active"),a.$linkVimeo.prop("disabled",!0),"youtube"),a.$vimeoWrap.removeClass("selected"),a.$mp4Wrap.removeClass("selected")},_=function(){n=a.$vimeoWrap.hasClass("selected")?(a.$vimeoWrap.removeClass("selected"),a.$checkboxChooseVimeo.prop("checked",!1),a.$checkboxChooseYoutube.prop("disabled",!1),a.$checkboxChooseMp4.prop("disabled",!1),a.$linkYoutube.prop("disabled",!1),a.$linkVimeo.prop("disabled",!1),""===a.$linkVimeo.val()&&a.$linkVimeo.next("label").removeClass("active"),""):(a.$checkboxChooseVimeo.prop("checked",!0),a.$checkboxChooseYoutube.prop("disabled",!0),a.$checkboxChooseMp4.prop("disabled",!0),a.$vimeoWrap.addClass("selected"),a.$linkVimeo.next("label").addClass("active"),a.$linkYoutube.prop("disabled",!0),"vimeo"),a.$youTubeWrap.removeClass("selected"),a.$mp4Wrap.removeClass("selected")},u=function(){n=a.$mp4Wrap.hasClass("selected")?(a.$mp4Wrap.removeClass("selected"),a.$checkboxChooseMp4.prop("checked",!1),a.$checkboxChooseYoutube.prop("disabled",!1),a.$checkboxChooseVimeo.prop("disabled",!1),a.$linkYoutube.prop("disabled",!1),a.$linkVimeo.prop("disabled",!1),""===a.$linkMp4Preview.val()&&a.$linkMp4Preview.next("label").removeClass("active"),""):(a.$checkboxChooseMp4.prop("checked",!0),a.$checkboxChooseYoutube.prop("disabled",!0),a.$checkboxChooseVimeo.prop("disabled",!0),a.$mp4Wrap.addClass("selected"),a.$linkMp4Preview.next("label").addClass("active"),a.$linkYoutube.prop("disabled",!0),a.$linkVimeo.prop("disabled",!0),"mp4"),a.$youTubeWrap.removeClass("selected"),a.$vimeoWrap.removeClass("selected")},p=function(){var e="",t=a.$linkYoutube.val(),o=a.$linkVimeo.val(),n={linkMp4:void 0===a.$linkMp4.attr("data-rex-video-bg-url")?"":a.$linkMp4.attr("data-rex-video-bg-url"),idMp4:a.$linkMp4.val(),width:a.$linkMp4.attr("data-rex-video-bg-width"),height:a.$linkMp4.attr("data-rex-video-bg-height")},r=a.$self.find(".video-insert-wrap.selected"),r=(r.hasClass("youtube-insert-wrap")?e="youtube":r.hasClass("vimeo-insert-wrap")?e="vimeo":r.hasClass("mp4-insert-wrap")&&(e="mp4"),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:""==e||"youtube"!=e?"":t,video_bg_id_section:""==e||"mp4"!=e?"":n.idMp4,video_bg_url_vimeo_section:""==e||"vimeo"!=e?"":o,video_mp4_url:""==e||"mp4"!=e?"":n.linkMp4}),Rexbuilder_Util_Admin_Editor.updateBkgrVidTool(),{eventName:"rexlive:update_section_background_video",data_to_send:{urlYoutube:""==e||"youtube"!=e?"":t,urlVimeo:""==e||"vimeo"!=e?"":o,videoMp4:""==e||"mp4"!=e?{linkMp4:"",idMp4:""}:n,typeVideo:e,sectionTarget:i}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)};return{init:function(){var e=t("#video-section-editor-wrapper");a={$self:e,$linkYoutube:e.find("#rex-youtube-video-section"),$linkVimeo:e.find("#rex-vimeo-video-section"),$linkMp4:e.find("#video-section-mp4-url"),$linkMp4Preview:e.find("#rex-mp4-video-section-preview"),$checkboxChooseYoutube:e.find("#rex-choose-youtube-video-section"),$checkboxChooseVimeo:e.find("#rex-choose-vimeo-video-section"),$checkboxChooseMp4:e.find("#rex-choose-mp4-video-section"),$chooseVideoWrapper:e.find(".rex-video-type-select"),$uploadMp4:e.find("#rex-upload-mp4-video-section"),$youTubeWrap:e.find("#edit-video-row-wrap-1"),$vimeoWrap:e.find("#edit-video-row-wrap-2"),$mp4Wrap:e.find("#edit-video-row-wrap-3"),$options_buttons:e.find(".rex-modal-option"),$close_button:e.find(".rex-modal__close-button")},n="",a.$chooseVideoWrapper.click(function(e){e.preventDefault();e=t(e.target);!e.hasClass("youtube-insert-wrap")&&0==e.parents(".youtube-insert-wrap").length||"youtube"!=n&&""!=n?!e.hasClass("vimeo-insert-wrap")&&0==e.parents(".vimeo-insert-wrap").length||"vimeo"!=n&&""!=n?!e.hasClass("mp4-insert-wrap")&&(0==e.parents(".mp4-insert-wrap").length||e.is("i"))||"mp4"!=n&&""!=n||(u(),p()):(_(),p()):(s(),p())}),a.$uploadMp4.click(function(){a.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(a.$linkMp4,a.$linkMp4.val())}),a.$close_button.on("click",function(e){e.preventDefault(),l(!0)}),a.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":l(!1);break;case"reset":d()}})},clearVideoModal:o,updateVideoModal:c,updateVideoBackground:p,openSectionVideoBackgroundModal:function(e,t){c((r=e).bgVideo),Rexlive_Modals_Utils.positionModal(a.$self,t),Rexlive_Modals_Utils.openModal(a.$self.parent(".rex-modal-wrap"))},updateVideoMp4Link:function(e){a.$linkMp4Preview.val(e).next("label").addClass("active")}}}(jQuery),Rexlive_Section_Background_Gradient=function(n){"use strict";var r,t,o=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},a=function(e,t){var o;t=void 0!==t&&t,""!==(e=void 0!==e?e:"")&&-1!==e.indexOf("gradient")?(r.gpicker.setValue(e,{silent:t}),e=r.gpicker.getType(),o=r.gpicker.getDirection(),r.$gradient_type.find("option[value="+e+"]").prop("selected",!0),r.$gradient_angle.find("option[value="+o+"]").prop("selected",!0)):(r.gpicker.setValue("",{silent:t}),r.$gradient_type.val(""),r.$gradient_angle.val(""))},i=function(){var e={eventName:"rexlive:updateSectionBackgroundGradient",data_to_send:{sectionTarget:t,color:r.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(){var e=n("#rex-section-background-gradient-editor"),t="#gp-section-background-gradient";(r={$self:e,$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button"),$gpicker:e.find(t),gpicker_selector:t,gpicker:null,$gradient_type:e.find("#section-background-gradient-type"),$gradient_angle:e.find("#section-background-gradient-angle"),$palette_list:e.find(".palette-list"),$add_palette:e.find(".palette__add-gradient")}).gpicker=new Grapick({el:r.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),r.gpicker.setColorPicker(function(t){var e=t.getEl().querySelector("#colorpicker"),o=n(e);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default sp-draggable sp-meditor",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}});Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o,function(){var e=o.attr("data-color-on-show");e&&(t.setColor(e,0),o.spectrum("set",e))}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)}),r.$close_button.on("click",function(e){e.preventDefault(),o()}),r.$gradient_type.on("change",function(e){r.gpicker.setType(this.value)}),r.$gradient_angle.on("change",function(e){r.gpicker.setDirection(this.value)}),r.gpicker.on("change",function(e){i()}),r.$add_palette.on("click",function(e){e.preventDefault();var e=r.gpicker.getValue(),t=r.gpicker.getSafeValue(),o=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:e,gradient_preview:t,ID:o})}),r.$self.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-gradient-value");a(e,!1)}),r.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();e=this.parentElement.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:e})}),r.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},openModal:function(e){t=e.sectionTarget,a(e.gradient,!0),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),Rexlive_Section_Overlay_Gradient=function(n){"use strict";var r,t,o=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},a=function(e,t){var o;t=void 0!==t&&t,""!==(e=void 0!==e?e:"")&&-1!==e.indexOf("gradient")?(r.gpicker.setValue(e,{silent:t}),e=r.gpicker.getType(),o=r.gpicker.getDirection(),r.$gradient_type.find("option[value="+e+"]").prop("selected",!0),r.$gradient_angle.find("option[value="+o+"]").prop("selected",!0)):(r.gpicker.setValue("",{silent:t}),r.$gradient_type.val(""),r.$gradient_angle.val(""))},i=function(){var e={eventName:"rexlive:updateSectionOverlayGradient",data_to_send:{sectionTarget:t,color:r.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(){var e=n("#rex-section-overlay-gradient-editor"),t="#gp-section-overlay-gradient";(r={$self:e,$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button"),$gpicker:e.find(t),gpicker_selector:t,gpicker:null,$gradient_type:e.find("#section-overlay-gradient-type"),$gradient_angle:e.find("#section-overlay-gradient-angle"),$palette_list:e.find(".palette-list"),$add_palette:e.find(".palette__add-gradient")}).gpicker=new Grapick({el:r.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),r.gpicker.setColorPicker(function(t){var e=t.getEl().querySelector("#colorpicker"),o=n(e);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default sp-draggable sp-meditor",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}});Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o,function(){var e=o.attr("data-color-on-show");e&&(t.setColor(e,0),o.spectrum("set",e))}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)}),r.$close_button.on("click",function(e){e.preventDefault(),o()}),r.$gradient_type.on("change",function(e){r.gpicker.setType(this.value)}),r.$gradient_angle.on("change",function(e){r.gpicker.setDirection(this.value)}),r.gpicker.on("change",function(e){i()}),r.$add_palette.on("click",function(e){e.preventDefault();var e=r.gpicker.getValue(),t=r.gpicker.getSafeValue(),o=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:e,gradient_preview:t,ID:o})}),r.$self.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-gradient-value");a(e,!1)}),r.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();e=this.parentElement.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:e})}),r.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},openModal:function(e){t=e.sectionTarget,a(e.gradient,!0),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),SectionBackground_Modal=function(t){"use strict";var o,n=function(){Background_Section_Image_Modal.resetImageModal(),Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=t("#rex-edit-background-section");o={$self:e,$close_button:e.find(".rex-modal__close-button")},Background_Section_Color_Modal.init(e),Background_Section_Image_Modal.init(e),Overlay_Color_Section_Modal.init(e),o.$close_button.click(function(e){e.preventDefault(),n()})},openSectionBackgroundModal:function(e){Background_Section_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_Section_Modal.updateOverlayModal(e.overlay),Background_Section_Image_Modal.updateImageModal(e.imageBG),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))}}}(jQuery),CssEditor_Modal=function(t){"use strict";function o(e){void 0===e||""==e.trim()?r.setValue(a):r.setValue(e),r.clearSelection()}var n,r,a,i,l=function(){Rexlive_Modals_Utils.closeModal(n.$modal_wrap),i=null},d=function(){null!==i&&o(i)};return{init:function(){var e=t("#rex-css-editor");n={$self:e,$modal_wrap:null,$save_button:e.find("#css-editor-save"),$cancel_button:e.find("#css-editor-cancel"),$options_buttons:e.find(".rex-modal-option"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#open-css-editor")},r=ace.edit("rex-css-ace-editor"),n.$modal_wrap=e.parent(".rex-modal-wrap"),r.setTheme("ace/theme/monokai"),r.getSession().setMode("ace/mode/css"),r.on("change",function(e){Rexbuilder_Util_Admin_Editor.deactiveSavePageButton()}),a="",n.$save_button.on("click",function(e){e.preventDefault();var t={eventName:"rexlive:SetCustomCSS",data_to_send:{customCSS:r.getValue()}};n.$self.addClass("setting-saving"),setTimeout(function(){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),l(),n.$self.removeClass("setting-saving")},800)}),n.$cancel_button.on("click",function(e){l()}),n.$open_button.on("click",function(e){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:getCustomCss"})}),n.$options_buttons.on("click",function(e){e.preventDefault(),"reset"===this.getAttribute("data-rex-option")&&d()})},openModal:function(e){o(i=e),Rexlive_Modals_Utils.openModal(n.$modal_wrap)}}}(jQuery),HtmlEditor_Modal=function(t){"use strict";function o(e){void 0===e||""==e.trim()?r.setValue(a):r.setValue(e),r.clearSelection()}var n,r,a,i,l=function(){Rexlive_Modals_Utils.closeModal(n.$modal_wrap),i=null},d=function(){null!==i&&o(i)},c=function(){var e=r.getValue();Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:SetcustomHTML",data_to_send:{customHTML:e}})};return{init:function(){var e=t("#rex-html-text-editor");(n={$self:e,$modal_wrap:null,$save_button:e.find(".rex-modal__save-button"),$close_button:e.find(".rex-modal__close-button"),$options_buttons:e.find(".rex-modal-option"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#test-html-editor")}).$modal_wrap=e.parent(".rex-modal-wrap"),(r=ace.edit("rex-html-ace-editor")).setTheme("ace/theme/monokai"),r.getSession().setMode("ace/mode/html"),r.getSession().setUseWrapMode(!0),r.getSession().setTabSize(2),a="",n.$save_button.on("click",function(e){e.preventDefault(),c(),l()}),n.$close_button.on("click",function(e){l()}),n.$options_buttons.on("click",function(e){e.preventDefault(),"reset"===this.getAttribute("data-rex-option")&&d()})},openModal:function(e){o(i=e),Rexlive_Modals_Utils.openModal(n.$modal_wrap)}}}(jQuery),Background_Block_Color_Modal=function(r){"use strict";var a,i,l,t,d,c,s=function(){var e=!0===a.$color_active.prop("checked"),e={eventName:"rexlive:apply_background_color_block",data_to_send:{color:(l=e)?i:"",active:l,target:t}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){var t,o,n,e=e.find("#background-block-set-color");a={$color_active:e.find("#color-block-active"),$color_active_wrapper:e.find(".bg-color-block-active-wrapper"),$color_runtime_value:e.find("#background-block-color-runtime"),$color_value:e.find("#background-block-color"),$color_preview_icon:e.find("#background-block-preview-icon"),$color_palette_wrap:e.find("#bg-block-color-palette"),$color_palette_buttons:e.find("#bg-block-color-palette .bg-palette-selector")},l=!0,d={eventName:"rexlive:change_block_bg_color",data_to_send:{color:null,target:{}}},a.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){t=!1},move:function(e){a.$color_preview_icon.hide(),d.data_to_send.color=l?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),t=!0},change:function(e){a.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){t&&(i=e.toRgbString()),a.$color_runtime_value.val(i),s()},cancelText:"",chooseText:""}),e=tmpl("tmpl-tool-close",{}),e=r(e),a.$color_value.spectrum("container").append(e),o=tmpl("tmpl-tool-save",{}),o=r(o),n=o.find(".rex-modal-option"),a.$color_value.spectrum("container").append(o),e.on("click",function(e){e.preventDefault(),null!==c.color&&(a.$color_value.spectrum("set",c.color),a.$color_value.spectrum("container").find(".sp-input").trigger("change")),a.$color_value.spectrum("hide")}),n.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":a.$color_value.spectrum("hide");break;case"reset":null!==c.color&&(a.$color_value.spectrum("set",c.color),a.$color_value.spectrum("container").find(".sp-input").trigger("change"))}}),a.$color_palette_buttons.on("click",function(e){var t=r(e.currentTarget).find(".bg-palette-value").val();r(e.currentTarget).addClass("palette-color-active"),a.$color_preview_icon.hide(),a.$color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),a.$color_value.spectrum("set",t),a.$color_runtime_value.val(t),i=t,s()}),r(".block-background-color-picker .sp-choose").on("click",function(){a.$color_preview_icon.hide(),a.$color_runtime_value.val(a.$color_value.spectrum("get"))}),a.$color_preview_icon.on("click",function(){return a.$color_value.spectrum("show"),!1}),a.$color_active_wrapper.click(function(e){e.preventDefault();e=!0===a.$color_active.prop("checked");i=e?(a.$color_active.prop("checked",!1),""):(a.$color_active.prop("checked",!0),a.$color_runtime_value.val()),s()})},updateColorModal:function(e){t=e.target,d.data_to_send.target=e.target,""!=e.color?(a.$color_runtime_value.val(e.color),a.$color_preview_icon.hide(),a.$color_value.spectrum("set",e.color)):(a.$color_runtime_value.val(""),a.$color_preview_icon.show(),a.$color_value.spectrum("set","")),i=e.color,(l="true"==e.active.toString())?a.$color_active.prop("checked",!0):a.$color_active.prop("checked",!1),c=e},applyBackgroundColor:s}}(jQuery),Overlay_Color_block_Modal=function(n){"use strict";var r,a,t,i,l;var d=function(){var e=!0===r.$overlay_active.prop("checked"),e={eventName:"rexlive:change_block_overlay",data_to_send:{color:a,active:e,target:t}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};function o(e){r.$overlay_color_value.val(e),r.$overlay_color_preview_icon.hide(),r.$overlay_color_value.spectrum("set",e)}return{init:function(e){var t,o,e=e.find("#bg-overlay-block-set-color");r={$overlay_active:e.find("#overlay-block-active"),$overlay_active_wrapper:e.find(".overlay-active-wrapper"),$overlay_color_value:e.find("#overlay-color-block-value"),$overlay_color_preview_icon:e.find("#overlay-block-preview-icon"),$overlay_color_palette_buttons:e.find("#bg-overlay-block-color-palette .bg-palette-selector")},i={eventName:"rexlive:change_block_overlay_color",data_to_send:{color:null,target:{}}},r.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){r.$overlay_color_preview_icon.hide(),i.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)},change:function(e){r.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){a=e.toRgbString(),d()},cancelText:"",chooseText:""}),e=tmpl("tmpl-tool-close",{}),e=n(e),r.$overlay_color_value.spectrum("container").append(e),t=tmpl("tmpl-tool-save",{}),t=n(t),o=t.find(".rex-modal-option"),r.$overlay_color_value.spectrum("container").append(t),e.on("click",function(e){e.preventDefault(),r.$overlay_color_value.spectrum("hide")}),o.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":r.$overlay_color_value.spectrum("hide");break;case"reset":null!==l.color&&(r.$overlay_color_value.spectrum("set",l.color),r.$overlay_color_value.spectrum("container").find(".sp-input").trigger("change"))}}),r.$overlay_color_palette_buttons.on("click",function(e){var t=n(e.currentTarget).find(".bg-palette-value").val();n(e.currentTarget).addClass("palette-color-active"),r.$overlay_color_preview_icon.hide(),r.$overlay_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),r.$overlay_color_value.spectrum("set",t),a=t,d()}),n(".block-overlay-color-picker .sp-choose").on("click",function(){r.$overlay_color_preview_icon.hide()}),r.$overlay_color_preview_icon.on("click",function(){return r.$overlay_color_value.spectrum("show"),!1}),r.$overlay_active_wrapper.click(function(e){e.preventDefault(),!0===r.$overlay_active.prop("checked")?r.$overlay_active.prop("checked",!1):r.$overlay_active.prop("checked",!0),d()})},updateOverlayModal:function(e){t=e.target,i.data_to_send.target=e.target,a=""!==e.color?(o(e.color),e.color):(o("rgba(0, 0, 0, 0)"),""),r.$overlay_active.prop("checked","true"==e.active.toString()),l=e},applyOverlay:d}}(jQuery),Background_Block_Image_Modal=function(o){"use strict";function n(){l.$image_url.val(""),l.$image_preview.css("backgroundImage",""),l.$image_preview.children().css("display","block"),l.$image_url.attr("data-rex-image-bg-url",""),l.$image_url.attr("data-rex-image-width",""),l.$image_url.attr("data-rex-image-height",""),d=!0,l.$image_active.prop("checked",!0),l.$image_type_typeWrap.removeClass("selected")}function i(){s.imageActive=l.$image_active.prop("checked"),s.imageId=l.$image_url.val(),s.imageType=l.$image_type_types_wrap.children(".selected").attr("data-rex-type-image")}var l,d,c,s,t=function(){var e=!0===l.$image_active.prop("checked"),e=(d=e,l.$image_url.val()),t=void 0===l.$image_url.attr("data-rex-image-bg-url")?"":l.$image_url.attr("data-rex-image-bg-url"),o=void 0===l.$image_url.attr("data-rex-image-width")?"":l.$image_url.attr("data-rex-image-width"),n=void 0===l.$image_url.attr("data-rex-image-height")?"":l.$image_url.attr("data-rex-image-height"),r=l.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),a=s.imageType!==r||s.imageId!==e,e={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:d?e:"",urlImage:d?t:"",width:d?o:"",height:d?n:"",typeBGimage:d?r:"",active:d,updateBlockHeight:a,target:c}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),i()},r=function(){l.$image_type_typeWrap.each(function(e,t){o(t).removeClass("selected"),o(t).find("input").prop("checked",!1)})};return{init:function(e){e=e.find(".background_set_image");l={$image_upload_wrap:e.find("#bg-block-set-img-wrap"),$image_active:e.find("#image-block-active"),$image_active_wrapper:e.find(".bg-image-block-active-wrapper"),$image_preview:e.find("#bg-block-img-preview"),$image_preview_icon:e.find("#bg-block-img-preview i"),$image_url:e.find("#background-block-url"),$image_id:e.find("#background-block-up-img"),$image_type_typeWrap:e.find(".rex-background-image-type-wrap"),$image_type_types_wrap:e.find("#bg-set-img-type")},s={imageActive:!1,imageId:null,imageType:null,imagePositon:null,imagePswpActive:!1},d=!0,l.$image_active_wrapper.click(function(e){e.preventDefault();e=!0===l.$image_active.prop("checked");e?l.$image_active.prop("checked",!1):l.$image_active.prop("checked",!0),d=e,t()}),l.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(l.$image_url,l.$image_preview,l.$image_url.val())}),l.$image_type_typeWrap.click(function(e){e.preventDefault();e=o(e.target).parents(".rex-background-image-type-wrap");e.hasClass("selected")||(r(),e.addClass("selected"),e.find("input").prop("checked",!0),t())})},updateImageModal:function(e){var t;n(),c=e.target,l.$image_url.val(e.idImage),""!=e.idImage&&(l.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),l.$image_preview.children().css("display","none"),l.$image_url.attr("data-rex-image-bg-url",e.imageUrl),l.$image_url.attr("data-rex-image-width",e.width),l.$image_url.attr("data-rex-image-height",e.height)),t=""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage,(t=l.$image_type_types_wrap.children('[data-rex-type-image="'+t+'"]')).addClass("selected"),t.find("input").prop("checked",!0),(d="true"==e.active.toString())?l.$image_active.prop("checked",!0):l.$image_active.prop("checked",!1),i()},resetImageModal:n,updateImageBackground:t}}(jQuery),Background_Block_Image_Setting=function(o){"use strict";function n(){l.$image_url.val(""),l.$image_preview.css("backgroundImage",""),l.$image_preview.children().css("display","block"),l.$image_url.attr("data-rex-image-bg-url",""),l.$image_url.attr("data-rex-image-width",""),l.$image_url.attr("data-rex-image-height",""),d=!0,l.$image_active.prop("checked",!0),l.$image_type_typeWrap.removeClass("selected")}function i(){s.imageActive=l.$image_active.prop("checked"),s.imageId=l.$image_url.val(),s.imageType=l.$image_type_types_wrap.children(".selected").attr("data-rex-type-image")}var l,d,c,s,t=function(){var e=!0===l.$image_active.prop("checked"),e=(d=e,l.$image_url.val()),t=void 0===l.$image_url.attr("data-rex-image-bg-url")?"":l.$image_url.attr("data-rex-image-bg-url"),o=void 0===l.$image_url.attr("data-rex-image-width")?"":l.$image_url.attr("data-rex-image-width"),n=void 0===l.$image_url.attr("data-rex-image-height")?"":l.$image_url.attr("data-rex-image-height"),r=l.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),a=s.imageType!==r||s.imageId!==e,e={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:d?e:"",urlImage:d?t:"",width:d?o:"",height:d?n:"",typeBGimage:d?r:"",active:d,updateBlockHeight:a,target:c}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),i()},r=function(){l.$image_type_typeWrap.each(function(e,t){o(t).removeClass("selected"),o(t).find("input").prop("checked",!1)})};return{init:function(e){e=e.find(".background_set_image");l={$image_upload_wrap:e.find("#bg-block-set-img-wrap"),$image_active:e.find("#image-block-active"),$image_active_wrapper:e.find(".bg-image-block-active-wrapper"),$image_preview:e.find("#bg-block-img-preview"),$image_preview_icon:e.find("#bg-block-img-preview i"),$image_url:e.find("#background-block-url"),$image_id:e.find("#background-block-up-img"),$image_type_typeWrap:e.find(".rex-background-image-type-wrap"),$image_type_types_wrap:e.find("#bg-set-img-type")},s={imageActive:!1,imageId:null,imageType:null,imagePositon:null},d=!0,l.$image_active_wrapper.click(function(e){e.preventDefault();e=!0===l.$image_active.prop("checked");e?l.$image_active.prop("checked",!1):l.$image_active.prop("checked",!0),d=e,t()}),l.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(l.$image_url,l.$image_preview,l.$image_url.val())}),l.$image_type_typeWrap.click(function(e){e.preventDefault();e=o(e.target).parents(".rex-background-image-type-wrap");e.hasClass("selected")||(r(),e.addClass("selected"),e.find("input").prop("checked",!0),t())})},updateImageModal:function(e){var t;n(),c=e.target,l.$image_url.val(e.idImage),""!=e.idImage&&(l.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),l.$image_preview.children().css("display","none"),l.$image_url.attr("data-rex-image-bg-url",e.imageUrl),l.$image_url.attr("data-rex-image-width",e.width),l.$image_url.attr("data-rex-image-height",e.height)),t=""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage,(t=l.$image_type_types_wrap.children('[data-rex-type-image="'+t+'"]')).addClass("selected"),t.find("input").prop("checked",!0),(d="true"==e.active.toString())?l.$image_active.prop("checked",!0):l.$image_active.prop("checked",!1),i()},resetImageModal:n,updateImageBackground:t}}(jQuery),Block_Video_Background_Modal=function(o){"use strict";function n(e){t(),"mp4"==e.type?(r="mp4",i.$linkVimeo.val(""),i.$linkYoutube.val(""),i.$linkMp4.val(e.mp4Data.idMp4),i.$linkMp4.attr("data-rex-video-bg-url",e.mp4Data.linkMp4),i.$linkMp4.attr("data-rex-video-bg-width",e.mp4Data.width),i.$linkMp4.attr("data-rex-video-bg-height",e.mp4Data.height),i.$linkMp4Preview.val(e.mp4Data.linkMp4).next("label"),i.$audioMp4.prop("checked","true"==e.audio.toString()),u()):"vimeo"==e.type?(r="vimeo",i.$linkVimeo.val(e.vimeoUrl),i.$linkYoutube.val(""),i.$linkMp4.val(""),i.$linkMp4.attr("data-rex-video-bg-url",""),i.$linkMp4Preview.val("").next("label").removeClass("active"),i.$audioVimeo.prop("checked","true"==e.audio.toString()),_()):"youtube"==e.type&&(r="youtube",i.$linkVimeo.val(""),i.$linkYoutube.val(e.youtubeUrl),i.$linkMp4.val(""),i.$linkMp4.attr("data-rex-video-bg-url",""),i.$linkMp4Preview.val("").next("label").removeClass("active"),i.$audioYoutube.prop("checked","true"==e.audio.toString()),s()),""==e.youtubeUrl?i.$linkYoutubeLabel.removeClass("active"):i.$linkYoutubeLabel.addClass("active"),""==e.vimeoUrl?i.$linkVimeoLabel.removeClass("active"):i.$linkVimeoLabel.addClass("active"),""==e.mp4Data.linkMp4?i.$linkMp4PreviewLabel.removeClass("active"):i.$linkMp4PreviewLabel.addClass("active"),l=e.target}function t(){i.$youTubeWrap.removeClass("selected"),i.$vimeoWrap.removeClass("selected"),i.$mp4Wrap.removeClass("selected"),i.$checkboxChooseYoutube.prop("checked",!1),i.$checkboxChooseVimeo.prop("checked",!1),i.$checkboxChooseMp4.prop("checked",!1),i.$checkboxChooseYoutube.prop("disabled",!1),i.$checkboxChooseVimeo.prop("disabled",!1),i.$checkboxChooseMp4.prop("disabled",!1),r="",i.$linkVimeo.val(""),i.$linkYoutube.val(""),i.$linkMp4.val(""),i.$linkMp4Preview.val("").next("label").removeClass("active")}var i,r,l,a,d=function(){a&&n(a.bgVideo),p();a.sectionTarget,a.blocksState},c=function(e){e&&d(),i.$self.attr("data-block_tools",""),Rexlive_Modals_Utils.closeModal(i.$self.parent(".rex-modal-wrap")),a=null},s=function(){r=i.$youTubeWrap.hasClass("selected")?(i.$youTubeWrap.removeClass("selected"),i.$checkboxChooseYoutube.prop("checked",!1),i.$checkboxChooseVimeo.prop("disabled",!1),i.$checkboxChooseMp4.prop("disabled",!1),i.$linkYoutube.prop("disabled",!1),i.$linkVimeo.prop("disabled",!1),""===i.$linkYoutube.val()&&i.$linkYoutube.next("label").removeClass("active"),i.$linkYoutube.trigger("blur"),""):(i.$checkboxChooseYoutube.prop("checked",!0),i.$checkboxChooseVimeo.prop("disabled",!0),i.$checkboxChooseMp4.prop("disabled",!0),i.$youTubeWrap.addClass("selected"),i.$linkVimeo.prop("disabled",!0),i.$linkYoutube.trigger("focus"),"youtube"),i.$vimeoWrap.removeClass("selected"),i.$mp4Wrap.removeClass("selected")},_=function(){r=i.$vimeoWrap.hasClass("selected")?(i.$vimeoWrap.removeClass("selected"),i.$checkboxChooseVimeo.prop("checked",!1),i.$checkboxChooseYoutube.prop("disabled",!1),i.$checkboxChooseMp4.prop("disabled",!1),i.$linkYoutube.prop("disabled",!1),i.$linkVimeo.prop("disabled",!1),""===i.$linkVimeo.val()&&i.$linkVimeo.next("label").removeClass("active"),i.$linkVimeo.trigger("blur"),""):(i.$checkboxChooseVimeo.prop("checked",!0),i.$checkboxChooseYoutube.prop("disabled",!0),i.$checkboxChooseMp4.prop("disabled",!0),i.$vimeoWrap.addClass("selected"),i.$linkYoutube.prop("disabled",!0),i.$linkVimeo.trigger("focus"),"vimeo"),i.$youTubeWrap.removeClass("selected"),i.$mp4Wrap.removeClass("selected")},u=function(){r=i.$mp4Wrap.hasClass("selected")?(i.$mp4Wrap.removeClass("selected"),i.$checkboxChooseMp4.prop("checked",!1),i.$checkboxChooseYoutube.prop("disabled",!1),i.$checkboxChooseVimeo.prop("disabled",!1),i.$linkYoutube.prop("disabled",!1),i.$linkVimeo.prop("disabled",!1),""===i.$linkMp4Preview.val()&&i.$linkMp4Preview.next("label").removeClass("active"),""):(i.$checkboxChooseMp4.prop("checked",!0),i.$checkboxChooseYoutube.prop("disabled",!0),i.$checkboxChooseVimeo.prop("disabled",!0),i.$mp4Wrap.addClass("selected"),i.$linkYoutube.prop("disabled",!0),i.$linkVimeo.prop("disabled",!0),"mp4"),i.$youTubeWrap.removeClass("selected"),i.$vimeoWrap.removeClass("selected")},p=function(){var e="",t="",o=i.$linkYoutube.val(),n=i.$linkVimeo.val(),r={linkMp4:void 0===i.$linkMp4.attr("data-rex-video-bg-url")?"":i.$linkMp4.attr("data-rex-video-bg-url"),width:void 0===i.$linkMp4.attr("data-rex-video-bg-width")?"":i.$linkMp4.attr("data-rex-video-bg-width"),height:void 0===i.$linkMp4.attr("data-rex-video-bg-height")?"":i.$linkMp4.attr("data-rex-video-bg-height"),idMp4:i.$linkMp4.val()},a=i.$self.find(".video-insert-wrap.selected"),a=(a.hasClass("youtube-insert-wrap")?(e="youtube",t=!0===i.$audioYoutube.prop("checked")?"true":"false"):a.hasClass("vimeo-insert-wrap")?(e="vimeo",t=!0===i.$audioVimeo.prop("checked")?"true":"false"):a.hasClass("mp4-insert-wrap")&&(e="mp4",t=!0===i.$audioMp4.prop("checked")?"true":"false"),{eventName:"rexlive:update_block_background_video",data_to_send:{target:l,urlYoutube:""==e||"youtube"!=e?"":o,urlVimeo:""==e||"vimeo"!=e?"":n,videoMp4:""==e||"mp4"!=e?{linkMp4:"",idMp4:"",width:"",height:""}:r,audio:""==e?"":t,typeVideo:e,tols:i.$self.attr("data-block_tools")}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)};return{init:function(e){var t=o("#video-block-editor-wrapper");i={$self:t,$youTubeWrap:t.find("#edit-video-block-wrap-1"),$vimeoWrap:t.find("#edit-video-block-wrap-2"),$mp4Wrap:t.find("#edit-video-block-wrap-3"),$chooseVideoWrapper:t.find(".rex-video-type-select"),$linkYoutube:t.find("#rex-youtube-video-block"),$linkYoutubeFocus:t.find("#rex-youtube-video-block"),$linkYoutubeLabel:t.find("#rex-youtube-video-block-label"),$linkVimeo:t.find("#rex-vimeo-video-block"),$linkVimeoLabel:t.find("#rex-vimeo-video-block-label"),$linkMp4:t.find("#video-block-mp4-url"),$linkMp4Preview:t.find("#rex-mp4-video-block-preview"),$linkMp4PreviewLabel:t.find("#rex-mp4-video-block-preview-label"),$checkboxChooseYoutube:t.find("#rex-choose-youtube-video-block"),$checkboxChooseVimeo:t.find("#rex-choose-vimeo-video-block"),$checkboxChooseMp4:t.find("#rex-choose-mp4-video-block"),$uploadMp4:t.find("#rex-upload-mp4-video-block i"),$audioYoutube:t.find("#rex-edit-block-video-youtube-audio"),$audioVimeo:t.find("#rex-edit-block-video-vimeo-audio"),$audioMp4:t.find("#rex-edit-block-video-mp4-audio"),$options_buttons:t.find(".rex-modal-option"),$close_button:t.find(".rex-modal__close-button")},r="",i.$chooseVideoWrapper.click(function(e){e.preventDefault();e=o(e.target);!e.hasClass("youtube-insert-wrap")&&0==e.parents(".youtube-insert-wrap").length||"youtube"!=r&&""!=r?!e.hasClass("vimeo-insert-wrap")&&0==e.parents(".vimeo-insert-wrap").length||"vimeo"!=r&&""!=r?!e.hasClass("mp4-insert-wrap")&&(0==e.parents(".mp4-insert-wrap").length||e.is("i"))||"mp4"!=r&&""!=r||(u(),p()):(_(),p()):(s(),p())}),i.$uploadMp4.click(function(){i.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(i.$linkMp4,i.$linkMp4.val())}),i.$self.find(".set-video-audio-btn").click(function(e){e.preventDefault();var e=o(e.target).parents(".set-video-audio-btn").find(".video-audio-checkbox"),t=e.prop("checked");e.prop("checked",!t),p()}),i.$close_button.on("click",function(e){e.preventDefault(),c(!0)}),i.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":c(!1);break;case"reset":d()}})},clearVideoModal:t,updateVideoModal:n,updateVideoBackground:p,openBlockVideoBackgroundModal:function(e,t){n((a=e).bgVideo),i.$self.attr("data-block_tools",e.bgVideo.tools),Rexlive_Modals_Utils.positionModal(i.$self,t),Rexlive_Modals_Utils.openModal(i.$self.parent(".rex-modal-wrap")),""==e.youtubeUrl?i.$linkYoutube.blur():i.$linkYoutube.focus(),""==e.vimeoUrl?i.$linkVimeo.blur():i.$linkVimeo.focus(),""==e.mp4Data?i.$linkMp4Preview.blur():i.$linkMp4Preview.focus()},updateVideoMp4Link:function(e){}}}(jQuery),Block_Content_Positions_Modal=function(){"use strict";function t(){o.$positions.prop("checked",!1)}var o,n,r,a,i=function(e){e&&l(),Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap")),a=null},l=function(){a&&d(a.flexPosition),c()},d=function(e){r=e.target,t();e=""==e.position?n:e.position;o.$positions.filter('[value="'+e+'"]').prop("checked",!0)},c=function(){var e=o.$positions.filter(":checked").val(),t=e.split("-")[0],e={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:e.split("-")[1],y:t},target:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){o={$self:e,$positions:e.find(".content-position"),$options_buttons:e.find(".rex-modal-option"),$close_button:e.find(".rex-modal__close-button")},n="",o.$close_button.on("click",function(e){e.preventDefault(),i(!0)}),o.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":i(!1);break;case"reset":l()}}),o.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){c()},50)})},updatePosition:d,resetPosition:t,openBlockContentPositionModal:function(e,t){d((a=e).flexPosition),Rexlive_Modals_Utils.positionModal(o.$self,t),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},closeBlockContentPositionModal:i}}(jQuery),Block_Content_Positions_Setting=function(){"use strict";function t(e){i=e.target,o(),e=""==e.position?a:e.position,r.$positions.filter('[value="'+e+'"]').prop("checked",!0)}function o(){r.$positions.prop("checked",!1)}function n(){var e,t=r.$positions.filter(":checked").val();void 0!==t&&(e=t.split("-")[0],t={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:t.split("-")[1],y:e},target:i}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t))}var r,a,i,l=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))};return{init:function(e){r={$self:e,$positions:e.find(".content-position"),$close_button:e.find(".rex-modal__close-button")},a="",r.$close_button.on("click",function(e){e.preventDefault(),l()}),r.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){n()},50)})},updatePosition:t,resetPosition:o,openBlockContentPositionModal:function(e){t(e.flexPosition),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},closeBlockContentPositionModal:l,applyBlockPosition:n}}(jQuery),Block_Image_Positions_Modal=function(){"use strict";function e(e){a=e.target,t(),e=""==e.position?r:e.position,n.$positions.filter('[value="'+e+'"]').prop("checked",!0)}function t(){n.$positions.prop("checked",!1)}function o(){var e,t=n.$positions.filter(":checked").val();void 0!==t&&(e=t.split("-")[0],t={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:t.split("-")[1],y:e},target:a}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t))}var n,r,a;return{init:function(e){e=e.find("#rex-block-image-position-editor");n={$self:e,$positions:e.find(".image-position")},r="",n.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){o()},50)})},updatePosition:e,resetPosition:t,applyBlockPosition:o}}(jQuery),Block_Image_Positions_Setting=function(){"use strict";function e(e){a=e.target,t(),e=""==e.position?r:e.position,n.$positions.filter('[value="'+e+'"]').prop("checked",!0)}function t(){n.$positions.prop("checked",!1)}function o(){var e=(t=n.$positions.filter(":checked").val()).split("-")[0],t={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:t.split("-")[1],y:e},target:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}var n,r,a;return{init:function(e){e=e.find("#rex-block-image-position-setting");n={$self:e,$positions:e.find(".image-position")},r="",n.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){o()},50)})},updatePosition:e,resetPosition:t,applyBlockPosition:o}}(jQuery),BlockPaddings_Modal=function(o){"use strict";function t(){a.$block_padding_top.val(i.top),a.$block_padding_right.val(i.right),a.$block_padding_bottom.val(i.bottom),a.$block_padding_left.val(i.left)}var a,i,l,d=function(){a.$padding_type_typeWrap.each(function(e,t){o(t).removeClass("selected"),o(t).find("input").prop("checked",!1)})},n=function(){var e=parseInt(a.$block_padding_top.val()),t=parseInt(a.$block_padding_right.val()),o=parseInt(a.$block_padding_bottom.val()),n=parseInt(a.$block_padding_left.val()),r=a.$padding_type_types_wrap.children(".selected").attr("data-rex-type-padding"),e={eventName:"rexlive:apply_paddings_block",data_to_send:{target:l,paddings:{top:isNaN(e)?i.top:e,right:isNaN(t)?i.right:t,bottom:isNaN(o)?i.bottom:o,left:isNaN(n)?i.left:n,type:r}}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},r=function(e){e.keydown(function(e){var t=o(e.target);-1!==o.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},c=function(e){e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),n())})};return{init:function(e){e=e.find("#block-paddings-wrapper");a={$block_padding_top:e.find("#bm-block-padding-top"),$block_padding_right:e.find("#bm-block-padding-right"),$block_padding_bottom:e.find("#bm-block-padding-bottom"),$block_padding_left:e.find("#bm-block-padding-left"),$padding_type_typeWrap:e.find(".rex-block-padding-type-wrap"),$padding_type_types_wrap:e.find("#block-padding-type-select")},i={top:5,right:5,bottom:5,left:5,type:"px"},t(),r(a.$block_padding_top),r(a.$block_padding_right),r(a.$block_padding_bottom),r(a.$block_padding_left),c(a.$block_padding_top),c(a.$block_padding_right),c(a.$block_padding_bottom),c(a.$block_padding_left),a.$padding_type_typeWrap.click(function(e){e.preventDefault();e=o(e.target).parents(".rex-block-padding-type-wrap");e.hasClass("selected")||(d(),e.addClass("selected"),e.find("input").prop("checked",!0),n())})},updatePaddings:function(e){l=e.target;var t=(isNaN(parseInt(e.paddings.top))?i:e.paddings).top,o=(isNaN(parseInt(e.paddings.right))?i:e.paddings).right,n=(isNaN(parseInt(e.paddings.bottom))?i:e.paddings).bottom,r=(isNaN(parseInt(e.paddings.left))?i:e.paddings).left;d(),e=(""==e.paddings.type?i:e.paddings).type,(e=a.$padding_type_types_wrap.children('[data-rex-type-padding="'+e+'"]')).addClass("selected"),e.find("input").prop("checked",!0),a.$block_padding_top.val(t),a.$block_padding_right.val(o),a.$block_padding_bottom.val(n),a.$block_padding_left.val(r)},resetPaddings:t,applyBlocksPaddings:n}}(jQuery),Block_Photoswipe_Modal=function(){"use strict";var t,o,n;function r(){o.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"}function a(){t.$checkboxPhotoswipe.prop("checked",!1)}function i(){var e={eventName:"rexlive:apply_photoswipe_block",data_to_send:{photoswipe:!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),r()}return{init:function(e){e=e.find(".background_set_image"),t={$is_photoswipe:e.find("#bg-set-photoswipe"),$checkboxPhotoswipe:e.find("#background_photoswipe")},o={imagePswpActive:!1},n=null,t.$is_photoswipe.click(function(e){e.preventDefault(),!0===t.$checkboxPhotoswipe.prop("checked")?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),i()})},updatePhotoswipeModal:function(e){a(),n=e.target,t.$checkboxPhotoswipe.prop("checked","true"==e.photoswipe.toString()),r()},resetPhotoswipeModal:a,updateBlockPhotoswipe:i}}(jQuery),Block_CustomClasses_Modal=function(){"use strict";function t(){o.$classes.val(n).trigger("focusout")}var o,n,r,a,i,l=function(){var e=(e=o.$classes.val()).trim(),e={eventName:"rexlive:apply_block_custom_classes",data_to_send:{customClasses:(e+=r).split(/\s+/),target:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){e=e.find(".block-custom-class-wrapper");o={$classes:e.find("#rex_block_custom_class")},n="",t(),o.$classes.blur(function(e){l()})},updateCustomClasses:function(e){i=e.target,r=a="",-1!==(a=e.classes).indexOf("active-large-block-overlay")&&(r+=" active-large-block-overlay",a=a.replace("active-large-block-overlay","")),-1!==a.indexOf("active-medium-block-overlay")&&(r+=" active-medium-block-overlay",a=a.replace("active-medium-block-overlay","")),-1!==a.indexOf("active-small-block-overlay")&&(r+=" active-small-block-overlay",a=a.replace("active-small-block-overlay","")),""==e.classes?o.$classes.siblings("label, .prefix").removeClass("active"):o.$classes.siblings("label, .prefix").addClass("active"),o.$classes.val(a).trigger("focusout")},resetCustomClasses:t,applyCustomClasses:l}}(jQuery),Block_Image_Editor_Modal=function(o){"use strict";var n,r,a,i=function(e){Background_Block_Image_Setting.updateImageModal(e.imageBG),Block_Image_Positions_Setting.updatePosition(e.flexImgPosition),Block_Photoswipe_Setting.updatePhotoswipeModal(e.imageBG)},t=function(){Background_Block_Image_Setting.updateImageBackground(),Block_Image_Positions_Setting.applyBlockPosition(),Block_Photoswipe_Setting.updateBlockPhotoswipe()},l=function(e){e&&d(),Rexlive_Modals_Utils.closeModal(n),a=null},d=function(){a&&i(a),t();var e={eventName:"rexlive:update_block_size",data_to_send:{sectionTarget:a.sectionTarget,blockState:a.blockState}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){var t;t=o("#rex-block-image-editor"),r={$modal:t,$options_buttons:t.find(".rex-modal-option"),$close_button:t.find(".rex-modal__close-button")},n=r.$modal.parent(".rex-modal-wrap"),r.$close_button.on("click",function(e){e.preventDefault(),l(!0)}),r.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":l(!1);break;case"reset":d()}}),Background_Block_Image_Setting.init(r.$modal),Block_Image_Positions_Setting.init(r.$modal),Block_Photoswipe_Setting.init(r.$modal)},openModal:function(e,t){i(a=e),Rexlive_Modals_Utils.positionModal(r.$modal,t),Rexlive_Modals_Utils.openModal(n)}}}(jQuery),Rexlive_Block_Accordion=function(t){"use strict";var i,l,o=function(){Rexlive_Modals_Utils.closeModal(i.$self.parent(".rex-modal-wrap"))},d=function(){var o=[];return i.$accordion_preview_gallery.find(".rex-accordion-gallery__item").each(function(e,t){o.push({id:t.getAttribute("data-gallery-item-id"),url:t.getAttribute("data-gallery-item-url"),size:t.getAttribute("data-gallery-item-size")})}),o},r=function(e){var o=[];return t(e).each(function(e,t){o.push({id:t.getAttribute("data-gallery-item-id"),url:t.getAttribute("src"),size:t.getAttribute("data-gallery-item-size")})}),o},n=function(){tinyMCE.get("rex-accordion-header-val"),tinyMCE.get("rex-accordion-content-val");var e=i.$accordion_state.prop("checked"),t=i.$accordion_toggle_state.prop("checked"),o="",n=d();if(0<n.length)for(var r=0;r<n.length;r++)o+=tmpl("tmpl-accordion-gallery-item-live",{id:n[r].id,url:n[r].url,size:n[r].size}).trim();tinyMCE.triggerSave();var a=i.$accordion_icon.val();""===a&&(a='<i class="rex-accordion--close-icon l-svg-icons"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#Z001-Plus"></use></svg></i>');t={eventName:"rexlive:updateAccordion",data_to_send:{accordion:{header:i.$accordion_header.val(),content:i.$accordion_content.val(),icon:"",complete:'<div class="rex-accordion'+(!0===e?" open":" close")+(!1===t?" no-toggle":"")+'"><div class="rex-accordion--toggle">'+i.$accordion_header.val()+'<span class="rex-accordion--toggle-icon">'+a+'</span></div><div class="rex-accordion--content'+(""!==o?" rex-accordion--gallery":"")+'"'+(!0!==e?' style="display:none;"':"")+">"+(""!==o?o:i.$accordion_content.val())+"</div></div>"},target:l}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)};return{init:function(){var e=t("#rex-block-accordion-editor");(i={$self:e,$accordion_header:e.find("[name=rex-accordion-header-val]"),$accordion_icon:e.find("[name=rex-accordion-toggle-icon-val]"),$accordion_content:e.find("[name=rex-accordion-content-val]"),$accordion_state:e.find("[name=rex-accordion-open-close-val]"),$accordion_toggle_state:e.find("[name=rex-accordion-hide-toggle]"),$accordion_insert_gallery:e.find(".rex-accordion-content-gallery"),$accordion_preview_gallery:e.find(".rex-accordion-content-gallery__preview"),$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button")}).$close_button.on("click",function(e){e.preventDefault(),o()}),i.$save_button.on("click",function(e){e.preventDefault(),n(),o()}),i.$accordion_insert_gallery.on("click",function(e){e.preventDefault();e={modal_info:i,image_info:d()};Rexlive_MediaUploader.openMediaUploaderAccordionGallery(e)}),i.$self.on("click",".rex-accordion-gallery__item__remove",function(e){e.preventDefault(),t(this).parents(".rex-accordion-gallery__item").remove()})},openModal:function(e){(l=e.blockData.target,e.blockData.accordion.state)==="open"?i.$accordion_state.prop("checked",!0):i.$accordion_state.prop("checked",!1);e.blockData.accordion.toggle_state==="visible"?i.$accordion_toggle_state.prop("checked",!0):i.$accordion_toggle_state.prop("checked",!1);i.$accordion_icon.val(e.blockData.accordion.icon);var t=tinyMCE.get("rex-accordion-header-val");null==t?(i.$accordion_header.val(e.blockData.accordion.header),i.$accordion_header.text(e.blockData.accordion.header)):(t.setContent(e.blockData.accordion.header),t.save({no_events:!0}));if(i.$accordion_preview_gallery.empty(),e.blockData.accordion.is_gallery)for(var o=r(e.blockData.accordion.content),n=0;n<o.length;n++)i.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:o[n].id,preview:o[n].url,url:o[n].url,size:o[n].size}));else null==(t=tinyMCE.get("rex-accordion-content-val"))?(i.$accordion_content.val(e.blockData.accordion.content),i.$accordion_content.text(e.blockData.accordion.content)):(t.setContent(e.blockData.accordion.content),t.save({no_events:!0}));Rexlive_Modals_Utils.openModal(i.$self.parent(".rex-modal-wrap"))}}}(jQuery),Rexlive_Block_Slideshow=function(n){"use strict";var r,a,t=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},o=function(){var o='<div class="rex-slideshow">',e=(r.$slide_list.find(".rex-slideshow__slide").each(function(e,t){o+='<div class="rex-slideshow__slide">'+n(t).find("textarea[name=rex-slideshow--slide-text]").val()+"</div>"}),{eventName:"rexlive:updateSlideshow",data_to_send:{slideshow:{slides:o+="</div>"},target:a}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},i=function(e,t){n(t.item).siblings().add(n(t.item)).each(function(e,t){n(t).attr("data-slideshow-slide-id",e).find(".rex-slideshow__slide-index").text(e+1)})};return{init:function(){var e=n("#rex-block-slideshow-editor");(r={$self:e,$add_slide:e.find("#rex-slideshow__add-new-slide"),$slide_list:e.find(".rex-slideshow__slide-list"),$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button")}).$slide_list.sortable({revert:!0,handle:".rex-slideshow__slide-edit[value=move]",update:function(e,t){i(e,t)}}),r.$close_button.on("click",function(e){e.preventDefault(),t()}),r.$save_button.on("click",function(e){e.preventDefault(),o(),t()}),r.$add_slide.on("click",function(){var e=r.$slide_list.find(".rex-slideshow__slide").length,e=tmpl("tmpl-slideshow-item",{slide_id:e,slide_id_label:e+1});r.$slide_list.append(e),r.$slide_list.sortable("refresh")}),r.$self.on("click",".rex-slideshow__slide-edit",function(e){var t=n(this).parents(".rex-slideshow__slide");"delete"===this.getAttribute("value")&&t.remove()})},openModal:function(e){var t=e;if(a=t.blockData.target,r.$slide_list.empty(),0<t.blockData.slideshow.slides.length)for(var o=0;o<t.blockData.slideshow.slides.length;o++){var n=tmpl("tmpl-slideshow-item",{slide_id:o,slide_id_label:o+1,slide_content:t.blockData.slideshow.slides[o]});r.$slide_list.append(n),r.$slide_list.sortable("refresh")}else n=tmpl("tmpl-slideshow-item",{slide_id:0,slide_id_label:1,slide_content:""}),r.$slide_list.append(n),r.$slide_list.sortable("refresh");Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))}}}(jQuery),Rexlive_Block_Background_Gradient=function(n){"use strict";var r,t,o=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},a=function(e,t){var o,t=void 0!==t&&t;""!==(e=void 0!==e?e:"")&&-1!==e.indexOf("gradient")?(r.gpicker.setValue(e,{silent:t}),e=r.gpicker.getType(),o=r.gpicker.getDirection(),r.$gradient_type.find("option[value="+e+"]").prop("selected",!0),r.$gradient_angle.find("option[value="+o+"]").prop("selected",!0)):(r.gpicker.setValue("",{silent:t}),r.$gradient_type.val(""),r.$gradient_angle.val(""))},i=function(){var e={eventName:"rexlive:updateBlockBackgroundGradient",data_to_send:{target:t,color:r.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(){var e=n("#rex-block-background-gradient-editor"),t="#gp-block-background-gradient";(r={$self:e,$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button"),$gpicker:e.find(t),gpicker_selector:t,gpicker:null,$gradient_type:e.find("#block-background-gradient-type"),$gradient_angle:e.find("#block-background-gradient-angle"),$palette_list:e.find(".palette-list"),$add_palette:e.find(".palette__add-gradient")}).gpicker=new Grapick({el:r.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),r.gpicker.setColorPicker(function(t){var e=t.getEl().querySelector("#colorpicker"),o=n(e);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default sp-draggable sp-meditor",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}});Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o,function(){var e=o.attr("data-color-on-show");e&&(t.setColor(e,0),o.spectrum("set",e))}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)}),r.$close_button.on("click",function(e){e.preventDefault(),o()}),r.$gradient_type.on("change",function(e){r.gpicker.setType(this.value)}),r.$gradient_angle.on("change",function(e){r.gpicker.setDirection(this.value)}),r.gpicker.on("change",function(e){i()}),r.$add_palette.on("click",function(e){e.preventDefault();var e=r.gpicker.getValue(),t=r.gpicker.getSafeValue(),o=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:e,gradient_preview:t,ID:o})}),r.$self.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-gradient-value");a(e,!1)}),r.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();e=this.parentElement.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:e})}),r.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},openModal:function(e){t=e.blockData.target,a(e.blockData.gradient,!0),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),Rexlive_Text_Gradient=function(n){"use strict";var r,a,o=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},i=function(e,t){var o;t=void 0!==t&&t,""!==(e=void 0!==e?e:"")&&-1!==e.indexOf("gradient")?(r.gpicker.setValue(e,{silent:!0}),e=r.gpicker.getType(),o=r.gpicker.getDirection(),r.$gradient_type.find("option[value="+e+"]").prop("selected",!0),r.$gradient_angle.find("option[value="+o+"]").prop("selected",!0),t||r.gpicker.change()):(r.gpicker.setValue("",{silent:t}),r.$gradient_type.val(""),r.$gradient_angle.val(""))},l=function(){var e=r.gpicker.getValue(),t=r.$gradient_type.val(),o=r.$gradient_angle.val(),t=Rexlive_Gradient_Utils.getMarkup(t,"315deg"===(o="135deg"===o?"top left":o)?"bottom right":o,r.gpicker.getHandlers(),"cover");""!==e&&(o={eventName:"rexlive:setTextGradient",data_to_send:{target:a,color:e,style:t,active:!0}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o))};return{init:function(){var e=n("#rex-text-gradient-editor"),t="#gp-text-gradient";(r={$self:e,$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button"),$gpicker:e.find(t),gpicker_selector:t,gpicker:null,$gradient_type:e.find("#text-gradient-type"),$gradient_angle:e.find("#text-gradient-angle"),$palette_list:e.find(".palette-list"),$add_palette:e.find(".palette__add-gradient")}).gpicker=new Grapick({el:r.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),r.gpicker.setColorPicker(function(t){var e=t.getEl().querySelector("#colorpicker"),o=n(e);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default sp-draggable sp-meditor",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}});Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o,function(){var e=o.attr("data-color-on-show");e&&(t.setColor(e,0),o.spectrum("set",e))}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)}),r.$close_button.on("click",function(e){e.preventDefault(),o()}),r.$gradient_type.on("change",function(e){r.gpicker.setType(this.value)}),r.$gradient_angle.on("change",function(e){r.gpicker.setDirection(this.value)}),r.gpicker.on("change",function(e){l()}),r.$add_palette.on("click",function(e){e.preventDefault();var e=r.gpicker.getValue(),t=r.gpicker.getSafeValue(),o=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:e,gradient_preview:t,ID:o})}),r.$self.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-gradient-value");i(e,!1)}),r.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();e=this.parentElement.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:e})}),r.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},openModal:function(e){a=e.blockData.target,i(e.blockData.gradient,!0),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},deletePaletteItem:function(e){n(e).remove()},getProps:function(){return r}}}(jQuery),Rexlive_Block_Overlay_Gradient=function(n){"use strict";var r,t,o=function(){Rexlive_Modals_Utils.closeModal(r.$self.parent(".rex-modal-wrap"))},a=function(e,t){var o,t=void 0!==t&&t;""!==(e=void 0!==e?e:"")&&-1!==e.indexOf("gradient")?(r.gpicker.setValue(e,{silent:t}),e=r.gpicker.getType(),o=r.gpicker.getDirection(),r.$gradient_type.find("option[value="+e+"]").prop("selected",!0),r.$gradient_angle.find("option[value="+o+"]").prop("selected",!0)):(r.gpicker.setValue("",{silent:t}),r.$gradient_type.val(""),r.$gradient_angle.val(""))},i=function(){var e={eventName:"rexlive:updateBlockOverlayGradient",data_to_send:{target:t,color:r.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(){var e=n("#rex-block-overlay-gradient-editor"),t="#gp-block-overlay-gradient";(r={$self:e,$close_button:e.find(".rex-modal__close-button"),$save_button:e.find(".rex-modal__save-button"),$gpicker:e.find(t),gpicker_selector:t,gpicker:null,$gradient_type:e.find("#block-overlay-gradient-type"),$gradient_angle:e.find("#block-overlay-gradient-angle"),$palette_list:e.find(".palette-list"),$add_palette:e.find(".palette__add-gradient")}).gpicker=new Grapick({el:r.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),r.gpicker.setColorPicker(function(t){var e=t.getEl().querySelector("#colorpicker"),o=n(e);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default sp-draggable sp-meditor",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}});Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o,function(){var e=o.attr("data-color-on-show");e&&(t.setColor(e,0),o.spectrum("set",e))}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)}),r.$close_button.on("click",function(e){e.preventDefault(),o()}),r.$gradient_type.on("change",function(e){r.gpicker.setType(this.value)}),r.$gradient_angle.on("change",function(e){r.gpicker.setDirection(this.value)}),r.gpicker.on("change",function(e){i()}),r.$add_palette.on("click",function(e){e.preventDefault();var e=r.gpicker.getValue(),t=r.gpicker.getSafeValue(),o=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:e,gradient_preview:t,ID:o})}),r.$self.on("click",".palette-item",function(e){e.preventDefault();e=this.getAttribute("data-gradient-value");a(e,!1)}),r.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();e=this.parentElement.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:e})}),r.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},openModal:function(e){t=e.blockData.target,a(e.blockData.gradient,!0),Rexlive_Modals_Utils.openModal(r.$self.parent(".rex-modal-wrap"))},deletePaletteItem:function(e){n(e).remove()}}}(jQuery),Block_Url_Modal=function(){"use strict";function t(){o.$urlInput.val(n)}var o,n,r,a=function(){var e={eventName:"rexlive:apply_block_link_url",data_to_send:{url:o.$urlInput.val(),target:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(e){e=e.find(".block-url-link-wrapper");o={$urlInput:e.find("#block_link_value")},n="",t(),o.$urlInput.blur(function(e){a()})},updateBlockUrl:function(e){r=e.target,o.$urlInput.val(e.link),""==e.link?o.$urlInput.siblings("label, .prefix").removeClass("active"):o.$urlInput.siblings("label, .prefix").addClass("active")},resetBlockUrl:t,applyBlockUrl:a}}(jQuery),BlockOptions_Modal=function(t){"use strict";var o,n,r=function(e){Background_Block_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_block_Modal.updateOverlayModal(e.overlay),Background_Block_Image_Modal.updateImageModal(e.imageBG),Block_Video_Background_Modal.updateVideoModal(e.bgVideo),BlockPaddings_Modal.updatePaddings(e.paddings),Block_Content_Positions_Setting.updatePosition(e.flexPosition),Block_Photoswipe_Modal.updatePhotoswipeModal(e.imageBG),Block_Image_Positions_Modal.updatePosition(e.flexImgPosition),Block_CustomClasses_Modal.updateCustomClasses(e.customClasses),Block_Url_Modal.updateBlockUrl(e.linkBlock)},a=function(e){e&&i(),Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap")),n=null},i=function(){n&&r(n),l();var e={eventName:"rexlive:update_block_size",data_to_send:{sectionTarget:n.sectionTarget,blockState:n.blockState}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},l=function(){Background_Block_Color_Modal.applyBackgroundColor(),Overlay_Color_block_Modal.applyOverlay(),Background_Block_Image_Modal.updateImageBackground(),Block_Video_Background_Modal.updateVideoBackground(),BlockPaddings_Modal.applyBlocksPaddings(),Block_Content_Positions_Setting.applyBlockPosition(),Block_Photoswipe_Modal.updateBlockPhotoswipe(),Block_Image_Positions_Modal.applyBlockPosition(),Block_CustomClasses_Modal.applyCustomClasses(),Block_Url_Modal.applyBlockUrl()};return{init:function(){var e=t("#rex-block-options");(o={$self:e,$options_buttons:e.find(".rex-modal-option"),$close_button:e.find(".rex-modal__close-button")}).$close_button.on("click",function(e){e.preventDefault(),a(!0)}),o.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":a(!1);break;case"reset":i()}}),Background_Block_Color_Modal.init(e),Overlay_Color_block_Modal.init(e),Background_Block_Image_Modal.init(e),Block_Video_Background_Modal.init(e),BlockPaddings_Modal.init(e),Block_Content_Positions_Setting.init(e),Block_Photoswipe_Modal.init(e),Block_Image_Positions_Modal.init(e),Block_Image_Editor_Modal.init(e),Block_CustomClasses_Modal.init(e),Block_Url_Modal.init(e)},openBlockOptionsModal:function(e){r(n=e),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))}}}(jQuery),Model_Modal=function(d){"use strict";var c,s,o,_,u,p,a,i,m=function(){Rexlive_Modals_Utils.closeModal(c.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=d("#rex-model-block"),t=e;c={$self:e,$save_button:t.find(".rex-save-button"),$cancel_button:t.find(".rex-cancel-button"),$model_import:t.find("#rex-model__import"),$model_name:t.find("#rex-model__name"),$add_new_model:t.find("#rex-model__add-new-model"),$model_import_wrap:t.find(".rex-model__import--wrap-active"),$model_insert_success_wrap:t.find(".rex-model__model-insert-success-wrap")},s=!1,o=a="",c.$save_button.click(function(e){e.preventDefault(),m()}),c.$cancel_button.click(function(e){e.preventDefault(),m()}),c.$model_import.on("change",function(e){var t=c.$model_import.val();""==t||"0"==t||s||(c.$self.addClass("rex-modal--loading"),d.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_live",nonce_param:live_editor_obj.rexnonce,model_data:{ID:t}},success:function(e){if(e.success){for(var t={eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:jQuery.extend(!0,{},p),model:e.data.model,modelName:e.data.name,modelID:e.data.id,customizationsData:e.data.customizations_data,customizationsNames:e.data.customizations_names}},o=e.data.sectionRexID[0][1],n=!1,r=1,a=0;a<i.length;a++)e.data.id==i[a].modelID&&(n=!0,i[a].number+=1,r=i[a].number);n||i.push({modelID:e.data.id,number:r}),p={sectionID:o,modelNumber:r},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}},error:function(e){},complete:function(e){c.$self.removeClass("rex-modal--loading")}}))}),c.$model_name.on("keyup",function(e){13===("which"in e?e.which:e.keyCode)&&c.$add_new_model.trigger("click")}),c.$model_name.on("focusout",function(e){e.preventDefault(),c.$model_name.parent().removeClass("input-active")}),c.$model_name.on("focusin",function(e){e.preventDefault(),c.$model_name.parent().addClass("input-active")}),c.$add_new_model.on("click",function(){var i,e,l;""!=c.$model_name.val()?(c.$self.addClass("setting-saving"),e={post_title:i=c.$model_name.val(),post_content:o},l={modelID:-1,modelTitle:"",modelHtml:""},d.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_model_from_builder",nonce_param:live_editor_obj.rexnonce,model_data:e},success:function(e){if(e.success){c.$model_import_wrap.addClass("hide-import-wrap");for(var t=e.data.model_id,o=(l.modelID=t,l.modelTitle=i,l.modelHtml=e.data.model_html,[]),n=0;n<_.length;n++){var r=_[n].name,a=_[n].targets;o.push(d.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization",nonce_param:live_editor_obj.rexnonce,model_id_to_update:t,targets:JSON.stringify(a),layout_name:r},success:function(e){},error:function(e){},complete:function(e){}}))}o.push(d.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization_names",nonce_param:live_editor_obj.rexnonce,model_id_to_update:t,names:u},success:function(e){},error:function(e){},complete:function(e){}})),d.when.apply(d,o).then(function(){c.$self.removeClass("rex-modal--loading");var e=l.modelID,t=l.modelTitle,o=l.modelHtml,o=(c.$model_name.val("").siblings("label").removeClass("active"),c.$save_button.val(""),c.$model_import.children().eq(0).after('<option value="'+e+'">'+t+"</option>"),c.$model_import.find("option[value="+e+"]").prop("selected",!0),{eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:p,model:o,modelName:t,modelID:e,customizationsData:_,customizationsNames:u}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:e,rexlive_model_name:t}),Rexbuilder_Util_Admin_Editor.updateModelId(e),Rexbuilder_Util_Admin_Editor.updateModelState(),s=!0,c.$model_insert_success_wrap.text("Model inserted"),Model_Import_Modal.updateModelList(),setTimeout(function(){m(),c.$self.removeClass("setting-saving")},1e3)}).fail(function(){}).always(function(){})}},error:function(e){c.$model_import_wrap.addClass("hide-import-wrap"),c.$model_name.val(live_editor_obj.labels.models.name_error)},complete:function(e){}})):c.$model_name.focus()})},openModal:function(e){c.$model_import_wrap.removeClass("hide-import-wrap"),c.$model_insert_success_wrap.text(""),p=e.sectionTarget,a=e.modelID,o=e.shortCode,_=e.layouts,u=e.layoutsNames,s=!1,i=e.modelsNumbers,d.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(e){if(e.success){for(var t,o=[],n=(o.push({id:"0",founded:!0}),c.$model_import.children().each(function(e,t){t=d(t).val();"0"!=t&&o.push({id:t,founded:!1})}),e.data.updated_list),r=0;r<n.length;r++)n[r].founded=!1;for(r=0;r<n.length;r++)for(t=0;t<o.length;t++)if(n[r].id==o[t].id){n[r].founded=!0,o[t].founded=!0;break}for(r=0;r<n.length;r++)n[r].founded||c.$model_import.children().eq(0).after('<option value="'+n[r].id+'">'+n[r].name+"</option>");for(r=0;r<o.length;r++)o[r].founded||c.$model_import.find("option[value="+o[r].id+"]").remove();c.$model_name.val(""),c.$model_import.find("option[value=0]").prop("selected",!0),""!=a&&(c.$model_import.find("option[value=0]").prop("selected",!1),c.$model_import.find("option[value="+a+"]").prop("selected",!0)),Rexlive_Modals_Utils.openModal(c.$self.parent(".rex-modal-wrap"))}},error:function(e){},complete:function(e){c.$self.removeClass("rex-modal--loading")}})},closeModal:m}}(jQuery),Rexlive_Model_Edit_Name_Modal=function(o){"use strict";var n,r,a=function(){n.model_name.blur(),Rexlive_Modals_Utils.closeModal(n.$modal),n.model_name.value="",r="",n.model_name.setAttribute("data-rex-model-id",""),Rexlive_Base_Settings.removeClass(n.model_name,"active")};return{init:function(){var e=document.getElementById("rex-model__edit-name__modal"),t=o(e);(n={$self:t,$modal:t.parent(".rex-modal-wrap"),save_button:e.querySelector("#rex-model__edit-name__save"),$save_button:null,cancel_button:e.querySelector(".rex-cancel-button"),model_name:e.querySelector("#rex-model__edit-name"),$model_name:null}).$save_button=o(n.save_button),n.$model_name=o(n.model_name),n.save_button.addEventListener("click",function(e){e.preventDefault(),n.model_name.value!==r&&Model_Import_Modal.editModelName({id:n.model_name.getAttribute("data-rex-model-id"),name:n.model_name.value}),a()}),n.cancel_button.addEventListener("click",function(e){e.preventDefault(),a()}),n.$model_name.on("keyup",function(e){13===("which"in e?e.which:e.keyCode)&&n.$save_button.trigger("click")})},openModal:function(e){n.model_name.value=e.name||"",r=e.name||"",Rexlive_Base_Settings.addClass(n.model_name,"active"),n.model_name.setAttribute("data-rex-model-id",e.id),Rexlive_Modals_Utils.openModal(n.$modal),n.model_name.focus()},closeModal:a}}(jQuery),Open_Models_Warning=function(o){"use strict";var n,r=function(){Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=o("#rex-open-models-warning"),t=e;(n={$self:e,$close_button:t.find(".rex-modal__close-button"),$models_list:t.find(".open-models-list")}).$close_button.on("click",function(){r()})},openModal:function(e){n.$models_list.empty();for(var t=0;t<e.length;t++)n.$models_list.append('<span class="modal-info--highlight">'+e[t].m_name+(t!=e.length-1?", ":"")+"</span>");Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery),CustomLayouts_Modal=function(l){"use strict";var d,n,c,r,a=function(){for(var e,t;t=!0,e=Rexbuilder_Util_Admin_Editor.createRandomID(4),d.$layoutsList.find(".layout__item").each(function(){l(this).find("input[name=rexlive-layout-id]").val()==e&&(t=!1)}),!t;);return e},i=function(e){var t;t=e,JSON.stringify(r)!==JSON.stringify(t)&&l.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_custom_layouts",nonce_param:live_editor_obj.rexnonce,custom_layouts:e},beforeSend:function(){NProgress.start()},success:function(e){e.success&&(NProgress.done(),1===e.data.new_layouts)&&(d.$buttonsWrapper.addClass("tool-button-floating--active"),d.$buttonsWrapper.one("mouseout",function(){d.$buttonsWrapper.removeClass("tool-button-floating--active")}))},error:function(e){}})},s=function(){var o=[];return d.$layoutsList.find(".layout__item").each(function(e,t){t=l(t),t={id:t.find("input[name=rexlive-layout-id]").val(),label:t.find("input[name=rexlive-layout-label]").val(),min:t.find("input[name=rexlive-layout-min]").val(),max:t.find("input[name=rexlive-layout-max]").val(),type:t.find("input[name=rexlive-layout-type]").val()};o.push(t)}),o},_=function(e){"dropdown"===d.layoutListType?d.$buttonsWrapper.find(".builder-add-custom-layout").parent().before(tmpl("rexlive-tmpl-custom-layout-button-list",e)):d.$buttonsWrapper.append(tmpl("rexlive-tmpl-custom-layout-button",e))},u=function(){for(var n,r,e=s(),t=(n=e,d.$buttonsWrapper.find(".btn-builder-layout").each(function(e,t){var o=l(t);for(r=0;r<n.length;r++)if(o.attr("data-name")==n[r].id&&"default"!=n[r].id){o.attr("data-min-width")!=n[r].min&&o.attr("data-min-width",n[r].min),o.attr("data-max-width")!=n[r].max&&o.attr("data-max-width",n[r].max);break}}),d.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(e,t){l(t).find(".rex-number").text(e+1)}),d.$layoutDataContainer.text(JSON.stringify(e)),e),o=!1,a=!1,i=0;i<t.length;i++)if(c.id==t[i].id){o=!0,c.min!=t[i].min&&"default"!=t[i].id&&(a=!0,c.min=t[i].min,Rexbuilder_Util_Admin_Editor.updateLayoutActiveData(null),Rexbuilder_Util_Admin_Editor.updateIframeWidth(t[i].min));break}Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:updateLayoutsDimensions",data_to_send:{layouts:t,updateHeights:a}}),setTimeout(function(){o||(Rexbuilder_Util_Admin_Editor.setActiveLayout("default"),Rexbuilder_Util_Admin_Editor.updateLayoutPage({min:"",max:"",id:"default",label:"My Desktop",type:"standard"}),p("default"))},50,o)},p=function(e){d.$layoutsList.find(".layout.active-on-page").removeClass("active-on-page"),d.$layoutsList.find('.layout input[name="rexlive-layout-id"][value="'+e+'"]').parents(".layout").addClass("active-on-page")},m=function(){Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("layout-window--active"),Rexlive_Modals_Utils.openModal(d.$self.parent(".rex-modal-wrap")),r=s()},v=function(){Rexlive_Modals_Utils.closeModal(d.$self.parent(".rex-modal-wrap")),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("layout-window--active"),r=null},f=function(){d.$layoutsList.find(".layout__item:not(.layout__item--standard)").remove(),d.$buttonsWrapper.find(".layout--custom").remove();for(var e,t,o=r.length,n=0;n<o;n++)"standard"!==r[n].type&&(e={id:r[n].id,label:r[n].label,minWidth:r[n].min,maxWidth:r[n].max,type:"custom"},tmpl.arg="customLayout",t=l(tmpl("rexlive-tmpl-custom-layout-modal",e)),d.$layoutsList.append(t[0]),_(e));Rexlive_Base_Settings.launchTooltips(),u()},g=function(e){var t=l(e.target);-1!==l.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault()},b=function(e){var t=l(e.target);(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),t.parents(".layout__setting").find(".layout-value").text(t.val()+"px"),u()),13!=e.keyCode&&27!=e.keyCode||(e.preventDefault(),(e=t.parents(".layout").eq(0)).find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),e.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),e.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),e.parent().removeClass("editing"),e.find("input[data-editable-field=true]").attr("type","hidden"))},h=function(e){e.preventDefault();var t=l(e.target);t.parents(".layout__setting").find(".layout-value").text(t.val()),13!=e.keyCode&&27!=e.keyCode||(e.preventDefault(),(e=t.parents(".layout").eq(0)).find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),e.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),e.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),e.parent().removeClass("editing"),e.find("input[data-editable-field=true]").attr("type","hidden")),u()};return{init:function(){var e=l("#rexlive-custom-layout-modal"),t=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-responsive-buttons-wrapper"),o=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find("#rexbuilder-layout-data-backend > .avaiable-layouts");(d={$self:e,$close_button:e.find(".rex-cancel-button"),$buttonsWrapper:t,$config_layouts:t.find(".builder-config-layouts"),$layoutDataContainer:o,$layoutsList:e.find(".layout__list"),$add_custom_layout_button:e.find("#rexlive-add-custom-layout"),layoutListType:e.attr("data-layout-list-type"),$options_buttons:e.find(".rex-modal-option")}).$close_button.click(function(e){e.preventDefault(),f(),v()}),d.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":i(s()),v();break;case"reset":f()}}),d.$self.parent(".rex-modal-wrap").on("rexlive:this_modal_closed",function(){i(s()),r=null}),d.$config_layouts.on("click",function(e){e.preventDefault(),n=Rexbuilder_Util_Admin_Editor.getActiveLayout(),c={id:"",min:"",max:""};e=d.$buttonsWrapper.find('div[data-name="'+n+'"]');c.id=e.attr("data-name"),c.min=e.attr("data-min-width"),c.max=e.attr("data-max-width"),p(n),m()}),d.$add_custom_layout_button.on("click",function(){var e={id:a(),label:"Custom",minWidth:"",maxWidth:"",type:"custom"},t=(tmpl.arg="customLayout",l(tmpl("rexlive-tmpl-custom-layout-modal",e))),t=(d.$layoutsList.append(t[0]),t.find(".layout").eq(0));t.find(".dashicons-before.dashicons-edit").addClass("hide-icon"),t.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),t.find(".dashicons-before.dashicons-yes").removeClass("hide-icon"),t.parent().addClass("editing"),t.find("input[data-editable-field=true]").attr("type","input"),_(e),Rexlive_Base_Settings.launchTooltips(),u()}),d.$self.on("click",".rexlive-layout--edit",function(e){l(e.currentTarget).find(".dashicons-before").toggleClass("hide-icon"),l(e.target).hasClass("dashicons-yes")?l(this).parents(".layout__item").eq(0).removeClass("editing").find("input[data-editable-field=true]").attr("type","hidden"):l(e.target).hasClass("dashicons-edit")&&l(this).parents(".layout__item").eq(0).addClass("editing").find("input[data-editable-field=true]").attr("type","input")}),d.$self.on("click",".rexlive-layout--delete",function(e){var t;confirm("Are you sure?")&&(t=l(this).parents(".layout__item").find("input[name=rexlive-layout-id]").val(),d.$buttonsWrapper.find('div[data-name="'+t+'"]').parent().remove(),l(this).parents(".layout__item").remove(),u())}),d.$self.on("keydown","input.layout-min-input",function(e){g(e)}),d.$self.on("keydown","input.layout-max-input",function(e){g(e)}),d.$self.on("keyup","input.layout-min-input",function(e){b(e)}),d.$self.on("keyup","input.layout-max-input",function(e){b(e)}),d.$self.on("keyup","input.layout-label-input",function(e){h(e)}),d.$layoutsList.sortable({items:".layout__item:not(.layout__item--standard)",handle:".rexlive-layout--move",stop:function(e,t){var o=t.item.find('input[name="rexlive-layout-id"]').val(),t=t.item.prev().find('input[name="rexlive-layout-id"]').val(),o=d.$buttonsWrapper.find('div[data-name="'+o+'"]').parent("div");("default"!==t?d.$buttonsWrapper.find('div[data-name="'+t+'"]'):d.$buttonsWrapper.find(".builder-add-custom-layout")).parent("div").after(o.detach()),d.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(e,t){l(t).find(".rex-number").text(e+1)})}})}}}(jQuery),Model_Edit_Modal=function(n){"use strict";var o,r,a,i=function(){Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=n("#rex-edit-model-choose"),t=e;o={$self:e,$button:t.find(".rex-button"),$close_button:t.find(".rex-modal__close-button"),$modelNamePreview:t.find(".info-model-name")},r={},o.$button.on("click",function(e){var t=n(this).attr("data-rex-option"),o={eventName:"",data_to_send:r};switch(t){case"remove":o.eventName="rexlive:modelBecameSection",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("REMOVE",r),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:"",rexlive_model_name:""}),Rexbuilder_Util_Admin_Editor.updateModelId(""),Rexbuilder_Util_Admin_Editor.updateModelState();break;case"edit":o.eventName="rexlive:editModel",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("OPEN",r),Rexbuilder_Util_Admin_Editor.updateModelEditing("true"),Rexbuilder_Util_Admin_Editor.updateModelState()}Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o),i()}),o.$close_button.on("click",function(){i()})},openModal:function(e){r=jQuery.extend(!0,{},e),a=e.layoutActive,o.$modelNamePreview.html('<span class="modal-info--highlight">'+e.modelName+"</span>"),o.$self.find(".rex-edit-option").each(function(e,t){t=n(t);"edit"!=t.attr("data-rex-option")&&("default"!=a?t.addClass("rex-hide-option"):t.removeClass("rex-hide-option"))}),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},closeModal:i}}(jQuery),Rexbuilder_RexSlider=function(p){var m,r,a,i,l,o,d,v,c=function(){var _={slides:[],settings:{}},e=m.$modal.find(".rex-slider__slide");return 0<e.length&&(_.settings.auto_start=m.$slider_autostart.prop("checked"),_.settings.prev_next=m.$slider_prev_next.prop("checked"),_.settings.dots=m.$slider_dots.prop("checked"),_.settings.natural_blur=m.$slider_natural_blur.prop("checked"),e.each(function(e,t){var t=p(t),o=t.children(".rex-slider__slide-data"),n=o.find("input[name=rex-slider--slide-id]").val(),r="",a=o.find("textarea[name=rex-slider--slide-text]").text(),i=o.find("input[name=rex-slider--slide-video-url]").val(),l=o.find("input[name=rex-slider--slide-video-type]").val(),d="",c=o.find("input[name=rex-slider--slide-video-audio]").val(),s=o.find("input[name=rex-slider--slide-url]").val(),n={slide_image_id:n,slide_image_url:r=void 0!==n?t.find(".rex-slider__slide__image-preview").css("background-image").replace("url(","").replace(")","").replace(/\"/gi,""):r,slide_text:a,slide_video:i,slide_videoMp4Url:d="mp4"==l?o.find("input[name=rex-slider--slide-video-url]").attr("data-mp4-url"):d,slide_video_type:l,slide_video_audio:c,slide_url:s};_.slides.push(n)})),_},s=function(e,t){switch(a.$modal.removeClass(a.visibility_classes.join(" ")),a.$save_button.val("").val(t),e){case"video":a.$video_type.prop("checked",!1),a.$video_audio.prop("checked",!1),a.$video_youtube.val("").next().removeClass("active"),a.$video_mp4.val(""),a.$video_vimeo.val("").next().removeClass("active");var o=p(t),n=o.find("input[name=rex-slider--slide-video-type]").val(),r=o.find("input[name=rex-slider--slide-video-url]").val(),o=o.find("input[name=rex-slider--slide-video-audio]").val();if(r&&n)switch(a.$video_type.filter("[value="+n+"]").prop("checked",!0),a.$video_audio.prop("checked",o),n){case"youtube":a.$video_youtube.val(r).next().addClass("active");break;case"mp4":a.$video_mp4.val(r);break;case"vimeo":a.$video_vimeo.val(r).next().addClass("active")}a.$modal.addClass("video-links--visible");break;case"url":a.$link_value.val("").next().removeClass("active"),(r=p(t).find("input[name=rex-slider--slide-url]").val())&&a.$link_value.val(r).next().addClass("active"),a.$modal.addClass("url-links--visible")}Rexlive_Modals_Utils.openModal(a.$modal_wrap,!0)},u=function(e){for(var t in m.$slider_autostart.prop("checked",!1),m.$slider_prev_next.prop("checked",!1),m.$slider_dots.prop("checked",!1),m.$slider_natural_blur.prop("checked",!1),e)if(e.hasOwnProperty(t)){var o=e[t];switch(t){case"auto_start":"true"==o&&m.$slider_autostart.prop("checked",!0);break;case"prev_next":"true"==o&&m.$slider_prev_next.prop("checked",!0);break;case"dots":"true"==o&&m.$slider_dots.prop("checked",!0);break;case"natural_blur":"true"==o&&m.$slider_natural_blur.prop("checked",!0)}}};function f(e,t,o){o=void 0!==o?o:null,i?(i.state("upload-slide").set("$data",e),i.state("upload-slide").set("$preview",t),i.state("upload-slide").set("image_id",o)):(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide",title:"Select Slide Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:o},wp.media.controller.Library.prototype.defaults)}),(i=wp.media({button:{text:"Select"},state:"upload-slide",states:[new t]})).on("close",function(){0==i.state("upload-slide").get("selection").length&&e.val()}),i.on("select",function(){var a=i.state("upload-slide"),e=a.get("selection");e&&e.each(function(e){var t,o=a.display(e).toJSON(),n=e.toJSON(),r=n.caption;wp.media.view.settings.captions||delete n.caption,o=wp.media.string.props(o,n),r={id:n.id,post_content:n.description,post_excerpt:r},o.linkUrl&&(r.url=o.linkUrl),"image"!==n.type&&("video"===n.type?t=wp.media.string.video(o,n):"audio"===n.type?t=wp.media.string.audio(o,n):(t=wp.media.string.link(o),r.post_title=o.title)),e.attributes.nonce=wp.media.view.settings.nonce.sendToEditor,e.attributes.attachment=r,e.attributes.html=t,e.attributes.post_id=wp.media.view.settings.post.id,i.state("upload-slide").get("$data").val(n.id),i.state("upload-slide").get("$preview").css("backgroundImage","url("+n.url+")").addClass("rex-slider__slide__image-preview--active")})}),i.on("open",function(){var t,o=i.state("upload-slide").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),i.state("upload-slide").get("image_id"));e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[]))})),i.open()}function e(){a.$video_youtube.on("change keyup paste",function(){""!=p(this).val()?a.$video_type.filter("[value=youtube]").prop("checked",!0):a.$video_type.filter("[value=youtube]").prop("checked",!1)}),a.$video_vimeo.on("change keyup paste",function(){""!=p(this).val()?a.$video_type.filter("[value=vimeo]").prop("checked",!0):a.$video_type.filter("[value=vimeo]").prop("checked",!1)}),Rexlive_Base_Settings.$document.on("click",".rex-slider__slide-edit",function(e){e.preventDefault();var e=p(this),t=e.parents(".rex-slider__slide"),o=t.find(".rex-slider__slide-data"),e=e.attr("value"),n=t.attr("data-slider-slide-id");switch(e){case"add-slide":f(r=o.find("input[name=rex-slider--slide-id]"),a=t.find(".rex-slider__slide__image-preview"));break;case"edit-slide":var r=o.find("input[name=rex-slider--slide-id]"),a=t.find(".rex-slider__slide__image-preview"),i=r.val();f(r,a,i);break;case"text":r=o.find("textarea[name=rex-slider--slide-text]").text();Rexlive_RexSlider_TextEditor.openTextEditor(".rex-slider__slide[data-slider-slide-id="+n+"]",r,!0,["hide-padding-position"]);break;case"video":m.$modal.addClass("push-down-modal"),s("video",".rex-slider__slide[data-slider-slide-id="+n+"]");break;case"url":m.$modal.addClass("push-down-modal"),s("url",".rex-slider__slide[data-slider-slide-id="+n+"]");break;case"copy":a=parseInt(m.$modal.find(".rex-slider__slide").length),i=t.clone();i.attr("data-slider-slide-id",a),i.find(".rex-slider__slide-index").text(a+1),m.$slide_list.append(i),m.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(m.$modal);break;case"delete":t.remove(),m.$modal.find(".rex-slider__slide").each(function(e,t){p(t).attr("data-slider-slide-id",e).find(".rex-slider__slide-index").text(e+1)}),Rexlive_Modals_Utils.resetModalDimensions(m.$modal)}}),m.$add_new_slide.on("click",function(){var e=parseInt(m.$modal.find(".rex-slider__slide").length),e=r.replace(/\bdata.slideindex\b/g,e).replace(/\bdata.slideindexfront\b/g,e+1);m.$slide_list.append(e),m.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(m.$modal)}),m.$cancel_button.on("click",function(){d||Rexlive_Modals_Utils.closeModal(m.$modal_wrap)}),m.$undo_button.on("click",function(){var t;d||(""===(t=p(this).attr("data-slider-to-edit"))?(m.$slider_autostart.prop("checked",!0),m.$slider_prev_next.prop("checked",!0),m.$slider_dots.prop("checked",!0),m.$slider_natural_blur.prop("checked",!0),m.$save_button.attr("data-block-to-edit",""),m.$save_button.attr("data-slider-to-edit",""),m.$slide_title.val(live_editor_obj.labels.slider.new_slider),m.$slide_list.empty().append(r.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),m.$slide_list.sortable("refresh")):(m.$modal.addClass("rex-modal--loading"),p.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:t},success:function(e){u(e.data.rexslider_attrs),m.$slide_list.empty().append(e.data.slides_markup),m.$slide_list.sortable("refresh"),m.$slide_title.val(live_editor_obj.labels.slider.copy_slider+Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),m.$undo_button.attr("data-slider-to-edit",t),m.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(m.$modal)},error:function(e){m.$modal.removeClass("rex-modal--loading")}})))}),m.$save_button.on("click",function(e){var t,o,n;d||(t=c(),o=p(this).attr("data-block-to-edit"),n=p(this).attr("data-slider-to-edit"),g(t,o,n),Rexlive_Modals_Utils.closeModal(m.$modal_wrap))}),m.$slider_import.on("change",function(e){e.preventDefault();var o=p(this).val();"0"!=o?(m.$modal.addClass("rex-modal--loading"),p.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:o},success:function(e){u(e.data.rexslider_attrs),m.$slide_list.empty().append(e.data.slides_markup),m.$slide_list.sortable("refresh");var e=Rexlive_Base_Settings.htmlDecode(e.data.slider.title),t=n(e);m.$slide_title.val(live_editor_obj.labels.slider.copy_slider+(0!==t?t+"-":"")+e),m.$undo_button.attr("data-slider-to-edit",o),m.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(m.$modal)},error:function(e){m.$modal.removeClass("rex-modal--loading")}})):(m.$save_button.attr("data-slider-to-edit",""),m.$undo_button.attr("data-slider-to-edit",""),m.$slide_list.empty(),m.$slider_autostart.prop("checked",!0),m.$slider_prev_next.prop("checked",!0),m.$slider_dots.prop("checked",!0),m.$slider_natural_blur.prop("checked",!0),m.$slide_title.val(live_editor_obj.labels.slider.new_slider),e=r.replace(/\bdata.slideindex\b/g,0).replace(/\bdata.slideindexfront\b/g,1),m.$slide_list.append(e),m.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(m.$modal))}),a.$cancel_button.on("click",function(){m.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(a.$modal_wrap,!0)}),a.$save_button.on("click",function(){var e=p(this.value);if(a.$modal.hasClass("video-links--visible")){var t=a.$video_type.filter(":checked").val(),o="",n="";switch(e.find("input[name=rex-slider--slide-video-type]").val(t),t){case"youtube":o=a.$video_youtube.val();break;case"mp4":o=a.$video_mp4.val(),n=a.$video_mp4.attr("data-video-mp4-url");break;case"vimeo":o=a.$video_vimeo.val()}""!=o?(e.find("input[name=rex-slider--slide-video-url]").val(o).attr("data-mp4-url",n),e.find(".rex-slider__slide-edit[value=video]").addClass("rex-slider__slide-edit__field-active-notice")):e.find(".rex-slider__slide-edit[value=video]").removeClass("rex-slider__slide-edit__field-active-notice"),e.find("input[name=rex-slider--slide-video-audio]").val(a.$video_audio.prop("checked"))}else a.$modal.hasClass("url-links--visible")&&(""!=(t=a.$link_value.val())?(e.find("input[name=rex-slider--slide-url]").val(t),e.find(".rex-slider__slide-edit[value=url]").addClass("rex-slider__slide-edit__field-active-notice")):(e.find("input[name=rex-slider--slide-url]").val(""),e.find(".rex-slider__slide-edit[value=url]").removeClass("rex-slider__slide-edit__field-active-notice")));m.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(a.$modal_wrap,!0)}),a.$video_mp4_add.on("click",function(e){var t,o;t=a.$video_mp4,l?l.state("upload-slide-video").set("$data",t):(o=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide-video",title:"Select Slide Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:t},wp.media.controller.Library.prototype.defaults)}),(l=wp.media({button:{text:"Select"},state:"upload-slide-video",states:[new o]})).on("close",function(){0==l.state("upload-slide-video").get("selection").length&&t.val()}),l.on("select",function(){var n=l.state("upload-slide-video"),e=n.get("selection");e&&e.each(function(e){var t={videoID:-1,videoUrl:""},o=n.display(e).toJSON(),e=e.toJSON();wp.media.view.settings.captions||delete e.caption,wp.media.string.props(o,e),t.videoID=e.id,t.videoUrl=e.url,l.state("upload-slide-video").get("$data").val(t.videoID),l.state("upload-slide-video").get("$data").attr("data-video-mp4-url",t.videoUrl)})}),l.on("open",function(){var t,o=l.state("upload-slide-video").get("selection"),e=(o.each(function(e){void 0!==e&&((t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[]))}),l.state("upload-slide-video").get("$data").val());e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[]))})),l.open()}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_btn",function(e){e=p(e.target).parents("#rex-slider-block").find(".rx__select-wrap"),o=e.children("select").find(":selected"),e.addClass("editing-title-slider"),e=o.val();m.$slide_title.val(o.text()),m.$slide_title.attr("data-rex-slider-id",e),d=!0}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_live_btn",function(e){e=p(e.target).parents("#rex-slider-block").find(".rx__select-wrap");o=e.children("select").find(":selected"),e.addClass("editing-title-slider"),m.$slide_title.prop("disabled",function(e,t){return!t})}),Rexlive_Base_Settings.$document.on("click","#save_slider_title_btn",function(e){var e=p(e.target).parents("#rex-slider-block").find(".rx__select-wrap"),t=m.$slide_title.val();o.text(t),m.$slide_title.attr("data-rex-slider-id",""),m.$slide_title.val(""),e.removeClass("editing-title-slider"),d=!1}),Rexlive_Base_Settings.$document.on("click","#cancel_slider_title_btn",function(e){e=p(e.target).parents("#rex-slider-block").find(".rx__select-wrap");m.$slide_title.attr("data-rex-slider-id",""),m.$slide_title.val(""),e.removeClass("editing-title-slider"),d=!1})}var g=function(o,n,e,t,r,a){var i=void 0!==t&&t,l=void 0!==r&&r;if(void 0!==a&&(v=a),""==(c=m.$slide_title.val())||"New Slider"==c){function d(e){return e<10?"0"+e:e}var t=new Date,c="SLIDER_"+t.getFullYear().toString()+d(t.getMonth()+1)+d(t.getDate())+d(t.getHours())+d(t.getMinutes())+d(t.getSeconds())}else if(i)if(-1!=c.indexOf(" - copy")){for(var s,_=/copy(?:\s+([0-9]+))*/gm,u=-1;null!==(s=_.exec(c));)s.index===_.lastIndex&&_.lastIndex++,u=void 0===s[1]?0:parseInt(s[1]);c=c.replace(_,""),c+="copy "+(u+=1)}else c+=" - copy";e&&!i?p.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:o,slider_id:e,sliderTitle:c},success:function(e){e.success&&!l&&(m.$slider_import.find("option[value="+e.data.slider_id+"]").text(live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix).attr("data-rex-slider-title",e.data.slider_title),(e={eventName:"",data_to_send:{id:e.data.slider_id,settings:o.settings,slides:o.slides,target:v}}).eventName=n?"rexlive:updateSlider":"rexlive:insert_new_slider",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e))},error:function(e){}}):p.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:o,sliderTitle:c},success:function(e){var t;e.success&&((t={eventName:"",data_to_send:{id:e.data.slider_id,settings:o.settings,slides:o.slides,target:v}}).eventName=i?"rexlive:newSliderSavedOnDB":n?"rexlive:updateSlider":"rexlive:insert_new_slider",m.$slider_import.children().first().after('<option value="'+e.data.slider_id+'" data-rex-slider-title="'+e.data.slider_title+'">'+live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix+"</option>"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t))},error:function(e){}})},n=function(e){var o=0,e="("+live_editor_obj.labels.slider.copy_slider+"(\\d-){0,1}){0,1}"+e,n=new RegExp(e,"");return m.$slider_import.find("option").each(function(e,t){if("0"===t.value)return!0;null!==t.getAttribute("data-rex-slider-title").match(n)&&o++}),o};return{init:function(){r=p("#rex-slider__new-slide-tmpl").html().trim(),(m={$modal:p("#rex-slider-block"),$modal_wrap:null,$cancel_button:null,$undo_button:null,$save_button:null,$add_new_slide:null,$slide_list:null,$slide_title:null,$slider_autostart:null,$slider_prev_next:null,$slider_natural_blur:null,$slider_dots:null,$slider_import:null}).$modal_wrap=m.$modal.parent(".rex-modal-wrap"),m.$cancel_button=m.$modal.find(".rex-modal__close-button"),m.$save_button=m.$modal.find(".rex-save-button"),m.$undo_button=m.$modal.find(".rex-undo-button"),m.$add_new_slide=m.$modal.find("#rex-slider__add-new-slide"),m.$slide_list=m.$modal.find(".rex-slider__slide-list"),m.$slide_title=m.$modal.find(".title-slider"),m.$slider_autostart=m.$modal.find("#rex-slider__autostart"),m.$slider_prev_next=m.$modal.find("#rex-slider__prev-next"),m.$slider_natural_blur=m.$modal.find("#rex-slider__natural-blur"),m.$slider_dots=m.$modal.find("#rex-slider__dots"),m.$slider_import=m.$modal.find("#rex-slider__import"),m.$slide_list.sortable({revert:!0,handle:".rex-slider__slide-edit[value=move]",update:function(e,t){p((t=t).item).siblings().add(p(t.item)).each(function(e,t){p(t).attr("data-slider-slide-id",e).find(".rex-slider__slide-index").text(e+1)})}}),(a={$modal:p("#rex-slider__links-editor"),$modal_wrap:null,$cancel_button:null,$save_button:null,visibility_classes:["video-links--visible","url-links--visible"],$link_value:null,$video_type:null,$video_youtube:null,$video_mp4:null,$video_mp4_add:null,$video_vimeo:null,$video_audio:null}).$modal_wrap=a.$modal.parent(".rex-modal-wrap"),a.$cancel_button=a.$modal.find(".rex-cancel-button"),a.$save_button=a.$modal.find(".rex-save-button"),a.$link_value=a.$modal.find("#rex-slider__slide-url-link"),a.$video_type=a.$modal.find("input[name=rex-slide-choose-video]"),a.$video_mp4_add=a.$modal.find("#rex-slide-choose-mp4"),a.$video_youtube=a.$modal.find("#rex-slide__video-youtube"),a.$video_mp4=a.$modal.find("#rex-slide__video-mp4"),a.$video_vimeo=a.$modal.find("#rex-slide__video-vimeo"),a.$video_audio=a.$modal.find("#rex-slide__video--audio"),o=null,d=!1,e()},openSliderModal:function(e,t,o,n){m.$slider_autostart.prop("checked",!1),m.$slider_prev_next.prop("checked",!1),m.$slider_dots.prop("checked",!1),m.$slider_natural_blur.prop("checked",!1),m.$slide_list.empty(),m.$slider_import.val("0"),m.$modal.removeClass("rex-slider-block--editing"),m.$slide_title.prop("disabled",!0),t=void 0!==t?t:"",o=void 0!==o?o:"",v=n,(e=void 0!==e?e:"")&&t&&o?(m.$save_button.attr("data-block-to-edit",e),m.$save_button.attr("data-slider-to-edit",o),m.$undo_button.attr("data-slider-to-edit",o),m.$modal.addClass("rex-modal--loading"),p.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,data:t,slider_id:o},success:function(e){e.success&&(u(e.data.rexslider_attrs),m.$slide_title.val(Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),m.$slide_list.append(e.data.slides_markup),m.$slide_list.sortable("refresh"),m.$modal.removeClass("rex-modal--loading"))},error:function(e){m.$modal.removeClass("rex-modal--loading")}})):(m.$slider_autostart.prop("checked",!0),m.$slider_prev_next.prop("checked",!0),m.$slider_dots.prop("checked",!0),m.$slider_natural_blur.prop("checked",!1),m.$save_button.attr("data-block-to-edit",""),m.$save_button.attr("data-slider-to-edit",""),m.$slide_title.val(live_editor_obj.labels.slider.new_slider).prop("disabled",!1),m.$slide_list.append(r.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),m.$slide_list.sortable("refresh")),Rexlive_Modals_Utils.openModal(m.$modal_wrap)},saveSlider:g}}(jQuery),Change_Layout_Modal=function(n){"use strict";var o,r,a,i=function(){Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=n("#rex-layout-page-changed"),t=e;(o={$self:e,$button:t.find(".rex-change-layout-option"),$layout_name_placholder:t.find(".layout-name")}).$button.on("click",function(e){switch(n(e.currentTarget).attr("data-rex-option")){case"save":Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving");var t={eventName:"rexlive:savePage",data_to_send:{buttonData:a}},o={eventName:"rexlive:saveModel",data_to_send:{buttonData:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:startChangeLayout"}),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active");break;case"continue":t={eventName:"rexlive:dropChanges",data_to_send:{selected:r,eventName:"",buttonData:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active"),Rexbuilder_Util_Admin_Editor.activeSavePageButton()}i()})},openModal:function(e){r=e.activeLayout,a=e.buttonData,Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap")),o.$layout_name_placholder.text(e.activeLayoutLabel)},closeModal:i}}(jQuery),SectionOrderChanged_Modal=function(o){"use strict";var t,n=null,r=function(){n=null,Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=o("#rex-layout-section-order-changed");(t={$self:e,$button:e.find(".rex-section-order-changed-option")}).$button.on("click",function(e){switch(o(e.currentTarget).attr("data-rex-option")){case"save":Rexbuilder_Util_Admin_Editor.isSectionOrderChanged=!1;var t={eventName:"rexlive:syncSectionOrderThroughLayouts",data:n};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t);break;case"continue":"changeLayout"===n.initiator?Change_Layout_Modal.openModal(n.dataObj):(Rexbuilder_Util_Admin_Editor.isSectionOrderChanged=!1,Rexbuilder_Util_Admin_Editor.runSavingProcess())}r()})},openModal:function(e){n=e,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery),Rexlive_Inline_SVG=function(o){"use strict";var n,r=function(){n.$icon_select.val(""),n.selected_icon=null,Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=o("#rexlive-inline-svg"),t=e;(n={$self:e,$close_button:t.find(".tool-button--close"),$save_button:t.find(".tool-button--save"),$icon_select:t.find("#rexlive-inline-svg-select"),$icon_select_box:t.find(".select-box__current"),selected_icon:null}).$close_button.on("click",function(e){r()}),n.$save_button.on("click",function(e){var t=n.$icon_select_box.find(".select-box__input:checked"),o=t.val();""!==o&&(t=t.attr("data-svg-class"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:mediumEditor:inlineSVG",data_to_send:{svg_ID:o,svg_class:t}})),r()})},openModal:function(e){(void 0!==e.id?n.$icon_select_box.find('.select-box__input[value="'+e.id+'"]'):n.$icon_select_box.find('.select-box__input[value=""]')).prop("checked",!0),Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery),Rexlive_PostEdit=function(){"use strict";var i;return{openMediaUploader:function(e){i?i.state("live-media-edit").set("media_data",e):(e=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-media-edit",title:"Edit Media",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",media_data:e},wp.media.controller.Library.prototype.defaults)}),(i=wp.media({button:{text:"Select"},state:"live-media-edit",states:[new e]})).on("open",function(){var t,o=i.state("live-media-edit").get("selection"),e=(o.each(function(e){void 0!==e&&((t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[]))}),i.state("live-media-edit").get("media_data"));void 0!==e.mediaId&&""!==e.mediaId&&((t=wp.media.attachment(e.mediaId)).fetch(),o.add(t?[t]:[]))}),i.on("select",function(){var o=i.state("live-media-edit"),e=o.get("selection");if(e){var t=o.get("media_data"),n=t.action,r=[],a=(e.each(function(e){var t=o.display(e).toJSON(),e=e.toJSON(),t=(wp.media.view.settings.captions||delete e.caption,wp.media.string.props(t,e));r.push({media_info:e,display_info:t})}),"");switch(n){case"add":a="rexlive:liveMediaAdd";break;case"edit":a="rexlive:liveMediaEdit"}Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:a,data_to_send:{imgData:r,media_data:t}})}}),i.on("close",function(){})),i.open()}}}(jQuery),Rexlive_PostEdit_MediaList=function(r){"use strict";var a,i,l=function(e,t){r(t.item).siblings().add(r(t.item)).each(function(e,t){r(t).attr("data-media-gallery-item-index",e).find(".media-gallery__item-index").text(e+1)})},d=function(e,t){var o=[],n=(i.$listWrap.find(".media-gallery__item").each(function(e,t){o.push(t.getAttribute("data-media-gallery-item-element-id"))}),{eventName:"rexlive:liveMediaReorder",data_to_send:{mediaList:o,mediaListAggregateSelector:i.mediaListAggregateSelector,completeReorderCallback:i.completeReorderCallback}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)};return{init:function(){(i={$modal:r("#rex-live-media-list"),$listWrap:null,$addMedia:null,$close_button:null,mediaListAggregateSelector:null,completeReorderCallback:null,completeRemoveCallback:null,destinationSelector:null,addTmplId:null,tmplDataGeneration:null,completeAddCallback:null}).$close_button=i.$modal.find(".rex-modal__close-button"),i.$listWrap=i.$modal.find("#rex-live-media-list__wrap"),i.$addMedia=i.$modal.find("#media-gallery__add-new-item"),a=i.$modal.parent(".rex-modal-wrap"),i.$close_button.on("click",function(e){e.preventDefault(),i.mediaListAggregateSelector=null,i.completeReorderCallback=null,i.completeRemoveCallback=null,i.destinationSelector=null,i.addTmplId=null,i.tmplDataGeneration=null,i.completeAddCallback=null,Rexlive_Modals_Utils.closeModal(a)}),i.$addMedia.on("click",function(e){e.preventDefault(),Rexlive_PostEdit.openMediaUploader({action:"add",fromMediaListModal:!0,destinationSelector:i.destinationSelector,addTmplId:i.addTmplId,tmplDataGeneration:i.tmplDataGeneration,completeAddCallback:i.completeAddCallback})}),i.$listWrap.on("click",".media-gallery__item-edit",function(e){e.preventDefault();var t=r(e.currentTarget).parents(".media-gallery__item"),o=(t.attr("data-media-gallery-item-index"),t.attr("data-media-gallery-item-element-id"));switch(e.currentTarget.getAttribute("value")){case"edit-media":var n={eventName:"rexlive:liveMediaOpenEdit",data_to_send:{elId:o,fromMediaListModal:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n);break;case"add-media":case"copy":break;case"delete":t.remove(),i.$listWrap.find(".media-gallery__item").each(function(e,t){r(t).attr("data-media-gallery-item-index",e).find(".media-gallery__item-index").text(e+1)});n={eventName:"rexlive:liveMediaDelete",data_to_send:{elId:o,mediaListAggregateSelector:i.mediaListAggregateSelector,completeRemoveCallback:i.completeRemoveCallback}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)}})},openModal:function(e){i.$listWrap.html("");for(var t=e.mediaList,o=0,n=t.length;o<n;o++){var r=tmpl("tmpl-editable-media-gallery-list-item",{index:o+1,id:t[o].id,src:t[o].src});i.$listWrap.append(r)}i.$listWrap.sortable({revert:!0,handle:'.media-gallery__item-edit[value="move"]',update:function(e,t){l(e,t),d(e,t)}}),i.$listWrap.disableSelection(),i.mediaListAggregateSelector=e.mediaListAggregateSelector,i.completeReorderCallback=e.completeReorderCallback,i.completeRemoveCallback=e.completeRemoveCallback,i.destinationSelector=e.destinationSelector,i.addTmplId=e.addTmplId,i.tmplDataGeneration=e.tmplDataGeneration,i.completeAddCallback=e.completeAddCallback,Rexlive_Modals_Utils.openModal(a)},addMediaItem:function(e){var t=i.$listWrap.find(".media-gallery__item").length,t=tmpl("tmpl-editable-media-gallery-list-item",{index:t+1,src:e.src,id:e.fieldId});i.$listWrap.append(t)},editMediaItem:function(e){var t=i.$listWrap.find('.media-gallery__item[data-media-gallery-item-element-id="'+e.fieldId+'"]');0<t.length&&t.find(".media-gallery__item__image-preview").css("backgroundImage","url("+e.src+")")}}}(jQuery),LockedOptionMask=function(o){"use strict";var t,n,r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=o("#rex-locked-option");(t={$self:e,$button:e.find(".rex-button")}).$button.on("click",function(e){var t;"save"===o(e.target).parents(".rex-locked-option-wrapper").attr("data-rex-option")&&(Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving"),e={eventName:"rexlive:savePage",data_to_send:{buttonData:n}},t={eventName:"rexlive:saveModel",data_to_send:{buttonData:n}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)),r()})},openModal:function(e){n=e.buttonData,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery),Model_Import_Modal=function(u){"use strict";function a(e,t,o){u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:e,image_selected:t,image_size:o,set_post_thumbnail_result:null,set_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})}function t(){var t=i.$self.find(".model-list")[0],e=[].slice.call(t.getElementsByClassName("model__element"));e.sort(function(e,t){e=e.querySelector(".model-name").textContent.toUpperCase(),t=t.querySelector(".model-name").textContent.toUpperCase();return e<t?-1:t<e?1:0}),t.innerHTML="",e.forEach(function(e){t.appendChild(e)})}function l(e,t,o){var n=d.state("live-image-model").get("selected_model"),r=u('.model__element[data-rex-model-id="'+n+'"]');r.attr("data-rex-model-thumbnail-id",o),r.attr("data-rex-model-thumbnail-size",t),r.find(".model-preview").addClass("model-preview--active").css("background-image",'url("'+e+'")'),r.find(".model__element--edit-thumbnail").addClass("tool-button--image-preview").css("background-image",'url("'+e+'")'),a(n,o,t)}function o(){var o,n,r,a,i,l=!!document.documentMode,d=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,e=u(d),c=0,s=0;Rexlive_Base_Settings.$document.on("dragstart",".model-list li",function(e){Rexbuilder_Util_Admin_Editor.dragImportType="rexmodel",Rexbuilder_Util_Admin_Editor.hideLateralMenu(),Rexbuilder_Util_Admin_Editor.blockIframeRows(),e.originalEvent.dataTransfer.effectAllowed="all",r=setInterval(p.processDragOverQueue.bind(p),100),tmpl.arg="o";var t=tmpl("rexlive-tmpl-insert-model-loader",{model_id:u(this).attr("data-rex-model-id")}),o=l?"text":"text/plain";e.originalEvent.dataTransfer.setData(o,t),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_started",data_to_send:{}})}),Rexlive_Base_Settings.$document.on("drag",".model-list li",function(){Rexbuilder_Util_Admin_Editor.setStopScroll(!0),s<150&&Rexbuilder_Util_Admin_Editor.scrollFrame(-15),s>e.height()-150&&Rexbuilder_Util_Admin_Editor.scrollFrame(15)}),Rexlive_Base_Settings.$document.on("dragend",".model-list li",function(){Rexbuilder_Util_Admin_Editor.setStopScroll(!0),Rexbuilder_Util_Admin_Editor.releaseIframeRows(),clearInterval(r),p.removeAllPlaceholders(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_ended",data_to_send:{}})}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var e=u(d.document).find(".rex-container").eq(0),t={};Model_Import_Modal.onDragOverWindow=function(e){e.preventDefault(),e.stopPropagation(),a=c,i=s,c=e.originalEvent.clientX,s=e.originalEvent.clientY,p.checkIfCursorMoves(a,i,c,s),Rexbuilder_Util_Admin_Editor.checkLateralMenu(c)},e.on("dragenter",".rexpansive-lock-section",function(e){o=u(e.target),n=e.target.getBoundingClientRect()}),e.on("dragover",function(e){t.xCoord=e.originalEvent.clientX,t.yCoord=e.originalEvent.clientY,p.addEntryToDragOverQueue(o,n,t)}),e.on("drop",function(e){var t;e.preventDefault(),e.stopPropagation(),t=(e.isTrigger?triggerEvent:e).originalEvent;try{var o=t.dataTransfer.getData("text/plain"),n=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker");u(jQuery.parseHTML(o)).insertAfter(n[0]),n.remove();Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:importModels"})}catch(t){console.error(t)}})})}var i,d,p;function n(){var e=Rexbuilder_Util_Admin_Editor.frameBuilder.contentDocument;p=new RexModelDragDrop(e)}return{init:function(){Rexbuilder_Util_Admin_Editor.frameBuilder.addEventListener("load",n);var e=document.getElementById("rex-models-list"),t=u(e);i={self:e,$self:t},o()},saveModelThumbnail:a,updateModelThumbnail:l,updateModelList:function(){u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(e){if(e.success){for(var t,o=[],n=(i.$self.find(".model__element").each(function(e,t){t=u(t).attr("data-rex-model-id");o.push({id:t,founded:!1})}),e.data.updated_list),r=0;r<n.length;r++)n[r].founded=!1;for(r=0;r<n.length;r++)for(t=0;t<o.length;t++)if(n[r].id==o[t].id){n[r].founded=!0,o[t].founded=!0;break}for(tmpl.arg="model",r=0;r<n.length;r++)n[r].founded||i.$self.find(".model-list").prepend(tmpl("rexlive-tmpl-model-item-list",{id:n[r].id,name:n[r].name,preview:""!=n[r].preview_image_url?n[r].preview_image_url:""}));for(r=0;r<o.length;r++)o[r].founded||i.$self.find('.model__element[data-rex-model-id="'+o[r].id+'"]').remove();e=jQuery.Event("rexlive:lateralMenuReady");u(document).trigger(e)}},error:function(e){},complete:function(e){i.$self.removeClass("rex-modal--loading")}})},editModelThumbnail:function(e,t){setUserSetting("imgsize","medium"),d?d.state("live-image-model").set("selected_image",t).set("selected_model",e):(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image-model",title:"Edit Model Thumbnail",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),selected_image:t,selected_model:e,type:"image"},wp.media.controller.Library.prototype.defaults)}),(d=wp.media({button:{text:"Select"},state:"live-image-model",states:[new t]})).on("open",function(){var t,o=d.state("live-image-model").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),d.state("live-image-model").get("selected_image"));e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[],{imgsize:""}))}),d.on("select",function(){var t,o,n=d.state("live-image-model"),e=n.get("liveTarget"),r=n.get("eventName"),a=(n.get("data_to_send"),n.get("selection")),i={eventName:r,data_to_send:{sectionTarget:e,target:e}};a&&(a.each(function(e){t=n.display(e).toJSON(),o=e.toJSON(),wp.media.view.settings.captions||delete o.caption,t=wp.media.string.props(t,o),i.data_to_send.idImage=o.id,i.data_to_send.urlImage=t.src}),l(t.src,t.size,o.id))}),d.on("close",function(){setUserSetting("imgsize","medium")})),d.open()},resetModelThumbnail:function(e){var t=u('.model__element[data-rex-model-id="'+e+'"]');t.attr("data-rex-model-thumbnail-id",""),t.attr("data-rex-model-thumbnail-size",""),t.find(".model-preview").css("background-image",'url("")').removeClass("model-preview--active"),t.find(".tool-button--image-preview").css("background-image",'url("")').removeClass("tool-button--image-preview"),u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:e,delete_post_thumbnail_result:null,delete_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})},deleteModel:function(e){var t,o=e.getAttribute("data-rex-model-id");o&&confirm(live_editor_obj.labels.models.confirm_delete)&&(o={action:"rex_delete_rexmodel",nonce_param:live_editor_obj.rexnonce,model_id:o},o=Rexlive_Base_Settings.encodeData(o),(t=new XMLHttpRequest).open("POST",live_editor_obj.ajaxurl,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onloadstart=function(){i.$self.addClass("rex-modal--loading")},t.onload=function(){200<=t.status&&t.status<400&&(e.style.display="none")},t.onerror=function(){},t.onloadend=function(){i.$self.removeClass("rex-modal--loading")},t.send(o))},editModelName:function(e){u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_model_name",nonce_param:live_editor_obj.rexnonce,modelData:e},success:function(e){e.success&&0!==e.data.update&&e.data.update===parseInt(e.data.modelData.id)&&(i.self.querySelector('[data-rex-model-id="'+e.data.modelData.id+'"] .model-name').innerHTML="<div>"+e.data.modelData.name+"</div>",t())},error:function(e){}})}}}(jQuery),Button_Import_Modal=function(u){var s,n,_=function(e,t){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",n.cssRules.length)},p=function(e,t){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",n.cssRules.length)},m=function(e,t){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",n.cssRules.length)},v=function(e,t){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",n.cssRules.length)},f=function(e,t){"insertRule"in n?n.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",n.cssRules.length):"addRule"in n&&n.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",n.cssRules.length)},g=function(e){for(var t=0;t<n.cssRules.length;t++)if(n.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container'){n.deleteRule(t);break}},b=function(e){for(var t=0;t<n.cssRules.length;t++)if(n.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background'){n.deleteRule(t);break}},h=function(e,t){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text'){n.deleteRule(o);break}},x=function(e){for(var t=0;t<n.cssRules.length;t++)if(n.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover'){n.deleteRule(t);break}},$=function(e,t){for(var o=0;o<n.cssRules.length;o++)if(n.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover'){n.deleteRule(o);break}},w=null;function r(){var o,n,r,a,l,d=!!document.documentMode,e=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,t=u(e),c={width:0,height:0},s=0,_=0;Rexlive_Base_Settings.$document.on("dragstart",".button-list li",function(e){var t=u(this),o=(Rexbuilder_Util_Admin_Editor.dragImportType="rexbutton",Rexbuilder_Util_Admin_Editor.hideLateralMenu(),e.originalEvent.dataTransfer.effectAllowed="all",r=setInterval(w.processDragOverQueue.bind(w),100),t.html()),t=t.find(".rex-button-background").eq(0),t=(c.width=t.outerWidth(),c.height=t.outerHeight(),"text/plain");e.originalEvent.dataTransfer.setData(t=d?"text":t,o),Rexbuilder_Util_Admin_Editor.addClassToLiveFrameRexContainer("rex-dragging-button"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_started",data_to_send:{}})}),Rexlive_Base_Settings.$document.on("drag",".button-list li",function(){Rexbuilder_Util_Admin_Editor.setStopScroll(!0),_<150&&Rexbuilder_Util_Admin_Editor.scrollFrame(-15),_>t.height()-150&&Rexbuilder_Util_Admin_Editor.scrollFrame(15)}),Rexlive_Base_Settings.$document.on("dragend",".button-list li",function(){clearInterval(r),Rexbuilder_Util_Admin_Editor.setStopScroll(!0),w.removeAllPlaceholders(),Rexbuilder_Util_Admin_Editor.removeClassToLiveFrameRexContainer("rex-dragging-button"),Rexbuilder_Util_Admin_Editor.dragImportType="",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_ended",data_to_send:{}})}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var t={},i={};Button_Import_Modal.onDragOverWindow=function(e){e.preventDefault(),e.stopPropagation(),a=s,l=_,s=e.originalEvent.clientX,_=e.originalEvent.clientY,w.checkIfCursorMoves(a,l,s,_),Rexbuilder_Util_Admin_Editor.checkLateralMenu(s)},Button_Import_Modal.onDragEnterRow=function(e){o=u(e.target),n=e.target.getBoundingClientRect()},Button_Import_Modal.onDragOverRow=function(e){e=e||window.event,t.xCoord=e.originalEvent.clientX,t.yCoord=e.originalEvent.clientY,i.x=e.originalEvent.pageX,i.y=e.originalEvent.pageY,w.addEntryToDragOverQueue(o,n,t)},Button_Import_Modal.onDropRow=function(e){var t;e.preventDefault(),e.stopPropagation(),t=(e.isTrigger?triggerEvent:e).originalEvent;try{var o="",o=d?t.dataTransfer.getData("text"):t.dataTransfer.getData("text/plain"),n=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker"),r=(o=o.trim(),u(jQuery.parseHTML(o))),a=(r.addClass("rex-loading-button"),r.insertAfter(n[0]),n.remove(),{eventName:"rexlive:importButton",data_to_send:{buttonDimensions:c,mousePosition:i}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}catch(t){console.error("Error when dropping the RexButton:",t)}}})}function a(){var e=Rexbuilder_Util_Admin_Editor.frameBuilder.contentDocument;w=new RexButtonDragDrop(e)}return{init:function(){Rexbuilder_Util_Admin_Editor.frameBuilder.addEventListener("load",a);var e,t=u("#rex-buttons-list");s={$self:t,$buttonList:t.find(".button-list")},this.$buttonsStyle=u("#rexliveStyle-inline-css"),0==Button_Import_Modal.$buttonsStyle.length&&(t=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css",e.id="rexliveStyle-inline-css",e.dataset.rexName="buttons-style",e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),t.appendChild(e));for(var o=0;o<document.styleSheets.length;o++)"rexliveStyle-inline-css"==document.styleSheets[o].ownerNode.id&&(n=document.styleSheets[o]);r(),Rexlive_Base_Settings.$document.on("click",".button__element--delete",function(e){var t=u(this).parents(".button-list__element").find(".rex-button-wrapper")[0];t&&Delete_Model_Modal.openModal({type:"button",element:t})}),Rexlive_Base_Settings.$document.on("click",".rex-button-container",function(e){e.preventDefault()})},updateButtonList:function(e){var t,o,n,r,a,i,l=e.buttonData,d=l.buttonTarget.button_id,e=e.html,c=(g(t=d),b(t),x(t),h(t),$(t),t=d,a={top:"20px",right:"20px",bottom:"20px",left:"20px"},n={top:"20px",right:"20px",bottom:"20px",left:"20px"},c={height:"70px",width:"100px"},o={width:"5px",radius:"10px"},r="12px",i="",i=(i=(i=(i=(i=(i=(i+="color: "+(l=l).text_color+";")+"font-size: "+(isNaN(parseInt(l.font_size.replace("px","")))?r:l.font_size)+";")+"min-height: "+(isNaN(parseInt(l.button_height.replace("px","")))?c.height:l.button_height)+";")+"min-width: "+(isNaN(parseInt(l.button_width.replace("px","")))?c.width:l.button_width)+";")+"margin-top: "+(isNaN(parseInt(l.margin_top.replace("px","")))?a.top:l.margin_top)+";")+"margin-right: "+(isNaN(parseInt(l.margin_right.replace("px","")))?a.right:l.margin_right)+";")+"margin-bottom: "+(isNaN(parseInt(l.margin_bottom.replace("px","")))?a.bottom:l.margin_bottom)+";",r=isNaN(parseInt(l.margin_left.replace("px","")))?a.left:l.margin_left,_(t,i+="margin-left: "+r+";"),c=(c=(c=(c="")+("border-color: "+l.border_color)+";border-style: solid;")+"border-width: "+(isNaN(parseInt(l.border_width.replace("px","")))?o.width:l.border_width)+";")+"border-radius: "+(isNaN(parseInt(l.border_radius.replace("px","")))?o.radius:l.border_radius)+";background-color: "+l.background_color+";",p(t,c),a="",a=(a=(a+="padding-top: "+(isNaN(parseInt(l.padding_top.replace("px","")))?n.top:l.padding_top)+";")+"padding-right: "+(isNaN(parseInt(l.padding_right.replace("px","")))?n.right:l.padding_right)+";")+"padding-bottom: "+(isNaN(parseInt(l.padding_bottom.replace("px","")))?n.bottom:l.padding_bottom)+";",r=isNaN(parseInt(l.padding_left.replace("px","")))?n.left:l.padding_left,m(t,a+="padding-left: "+r+";"),i="",i=(i+="background-color: "+l.hover_color+";")+"border-color: "+l.hover_border+";",v(t,i),o="",o+="color: "+l.hover_text+";",f(t,o),s.$buttonList.find('.rex-button-wrapper[data-rex-button-id="'+d+'"]'));0==c.length?((n=u(document.createElement("li"))).attr("draggable",!0),n.addClass("button-list__element"),(r=u(document.createElement("div"))).append(u(jQuery.parseHTML(e))),r.addClass("rex-container"),r.appendTo(n),n.appendTo(s.$buttonList),a=tmpl("tmpl-rex-button-delete")(),n.append(a)):(i=c.parent(),c.remove(),i.append(u(jQuery.parseHTML(e))))},getActiveStyleSheet:function(){return n},deleteButton:function(e){var t,o,n;(e=void 0!==e?e:null)&&""!==(t=e.getAttribute("data-rex-button-id"))&&(o={action:"rex_delete_rexbutton",nonce_param:live_editor_obj.rexnonce,button_id:t},o=Rexlive_Base_Settings.encodeData(o),(n=new XMLHttpRequest).open("POST",live_editor_obj.ajaxurl,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onloadstart=function(){s.$self.addClass("rex-modal--loading")},n.onload=function(){200<=n.status&&n.status<400&&(e.parentNode.parentNode.style.display="none",Button_Edit_Modal.removeIDButtonSoft(t))},n.onerror=function(){},n.onloadend=function(){s.$self.removeClass("rex-modal--loading")},n.send(o))}}}(jQuery),Button_Edit_Modal=function(D){"use strict";function n(){Rexlive_Modals_Utils.closeModal(I.$self.parent(".rex-modal-wrap"))}var I,N,E,A,B,U,r,T,P,j,F=D(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-close")),L=D(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-save")),z=!1,O=function(e,o){o=void 0!==o&&"true"==o.toString(),e.keydown(function(e){var t=D(e.target);-1!==D.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||"-"==e.key?(o||"-"!=e.key||e.preventDefault(),38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),o?t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val()-1)):t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},V=function(e,t,o){o=void 0!==o&&"true"==o.toString(),e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),!o&&"-"==e.key||t.call(this,parseInt(e.target.value)))})},W=function(){I.$button.on("click",function(e){var t,o=this.getAttribute("data-rex-option");switch(n(),o){case"remove":t=c(),i(t),d({rexID:t,separate:!0});break;case"edit":P=!0,N.$self.addClass("editing-model"),Rexlive_Modals_Utils.openModal(N.$self.parent(".rex-modal-wrap")),t={eventName:"rexlive:lock_synchronize_on_button",data_to_send:{buttonTarget:E.buttonTarget}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}}),I.$close_button.on("click",function(){n()})},Q=function(){Rexlive_Modals_Utils.closeModal(N.$self.parent(".rex-modal-wrap"))},t=function(){var e=D("#rex-button-link-target").val(),t=D("#rex-button__name").val();""==e||null==e?(D(".rexbutton-cont_row45").find(".prefix").removeClass("active"),D(".rexbutton-cont_row45").find("#rex-button-link-target-label").removeClass("active")):(D(".rexbutton-cont_row45").find(".prefix").addClass("active"),D(".rexbutton-cont_row45").find("#rex-button-link-target-label").addClass("active")),""==t||null==t?(D(".rexbutton-cont_row77").find(".prefix").removeClass("active"),D(".rexbutton-cont_row77").find("#rex-button__name-label").removeClass("active")):(D(".rexbutton-cont_row77").find(".prefix").addClass("active"),D(".rexbutton-cont_row77").find("#rex-button__name-label").addClass("active")),""!==N.$button_class.val()?(N.$button_class.prev().addClass("active"),N.$button_class.next().addClass("active")):(N.$button_class.prev().removeClass("active"),N.$button_class.next().removeClass("active"))};function G(){return(N.$button_class.val()+" "+JSON.parse(N.$button_effect_classes.val()).join(" ")).trim()}var o=function(){E={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}}},a=function(e){if("true"==e.separateButton.toString())E=jQuery.extend(!0,{},e.buttonInfo),P=!1;else{var t,o=e.buttonInfo.buttonTarget.button_id;for(P=!0,E.buttonTarget=jQuery.extend(!0,{},e.buttonInfo.buttonTarget),E.text=e.buttonInfo.text,E.link_target=e.buttonInfo.link_target,E.link_type=e.buttonInfo.link_type,E.classes=e.buttonInfo.classes,t=0;t<B.length;t++)if(o==B[t].rexID){E.text_color=void 0===B[t].rules.element.text_color?"":B[t].rules.element.text_color,E.font_size=void 0===B[t].rules.element.font_size?"":B[t].rules.element.font_size,E.background_color=void 0===B[t].rules.element.background_color?"":B[t].rules.element.background_color,E.button_height=void 0===B[t].rules.element.button_height?"":B[t].rules.element.button_height,E.button_width=void 0===B[t].rules.element.button_width?"":B[t].rules.element.button_width,E.hover_color=void 0===B[t].rules.hover.background_color?"":B[t].rules.hover.background_color,E.hover_text=void 0===B[t].rules.hover.text_color?"":B[t].rules.hover.text_color,E.hover_border=void 0===B[t].rules.hover.border_color?"":B[t].rules.hover.border_color,E.border_color=void 0===B[t].rules.element.border_color?"":B[t].rules.element.border_color,E.border_width=void 0===B[t].rules.element.border_width?"":B[t].rules.element.border_width,E.border_radius=void 0===B[t].rules.element.border_radius?"":B[t].rules.element.border_radius,E.margin_top=void 0===B[t].rules.element.margin_top?"":B[t].rules.element.margin_top,E.margin_bottom=void 0===B[t].rules.element.margin_bottom?"":B[t].rules.element.margin_bottom,E.margin_right=void 0===B[t].rules.element.margin_right?"":B[t].rules.element.margin_right,E.margin_left=void 0===B[t].rules.element.margin_left?"":B[t].rules.element.margin_left,E.padding_top=void 0===B[t].rules.element.padding_top?"":B[t].rules.element.padding_top,E.padding_bottom=void 0===B[t].rules.element.padding_bottom?"":B[t].rules.element.padding_bottom,E.padding_right=void 0===B[t].rules.element.padding_right?"":B[t].rules.element.padding_right,E.padding_left=void 0===B[t].rules.element.padding_left?"":B[t].rules.element.padding_left,E.buttonTarget.button_name=B[t].buttonName;break}void 0!==e.buttonInfo.synchronize&&e.buttonInfo.synchronize.toString()}r=jQuery.extend(!0,{},E),T=jQuery.extend(!0,{},E)},q=function(){N.$button_label_text.val(E.text),N.$button_label_text_size.val(E.font_size.replace("px","")),N.$button_height.val(E.button_height.replace("px","")),N.$button_width.val(E.button_width.replace("px","")),N.$button_border_width.val(E.border_width.replace("px","")),N.$button_border_radius.val(E.border_radius.replace("px","")),N.$button_margin_top.val(E.margin_top.replace("px","")),N.$button_margin_right.val(E.margin_right.replace("px","")),N.$button_margin_left.val(E.margin_left.replace("px","")),N.$button_margin_bottom.val(E.margin_bottom.replace("px","")),N.$button_padding_top.val(E.padding_top.replace("px","")),N.$button_padding_right.val(E.padding_right.replace("px","")),N.$button_padding_left.val(E.padding_left.replace("px","")),N.$button_padding_bottom.val(E.padding_bottom.replace("px","")),N.$button_link_target.val(E.link_target),N.$button_link_type.val(E.link_type),N.$button_name.val(E.buttonTarget.button_name),N.$button_effect_classes.val(""),-1!==E.classes.indexOf("popup-video-button")?N.$button_popup_video.prop("checked",!0):N.$button_popup_video.prop("checked",!1);for(var e=[],t=0;t<A.length;t++)-1!==E.classes.indexOf(A[t])&&(E.classes=E.classes.replace(A[t],"").trim(),e.push(A[t]));N.$button_effect_classes.val(JSON.stringify(e)),N.$button_class.val(E.classes),N.$button_preview_border.css("border-width",E.border_width),N.$button_label_text.css("color",E.text_color),N.$button_label_text_color_value.val(E.text_color),N.$button_label_text_color_preview.hide(),N.$button_label_text_color_value.spectrum("set",E.text_color),N.$button_preview_background_hover.css("background-color",E.hover_color),N.$button_background_hover_color_value.val(E.hover_color),N.$button_background_hover_color_value.spectrum("set",E.hover_color),N.$button_background_hover_color_preview.hide(),N.$button_preview_text_hover.css("background-color",E.hover_text),N.$button_text_hover_color_value.val(E.hover_text),N.$button_text_hover_color_value.spectrum("set",E.hover_text),N.$button_text_hover_color_preview.hide(),N.$button_preview_border_hover.css("background-color",E.hover_border),N.$button_border_hover_color_value.val(E.hover_border),N.$button_border_hover_color_value.spectrum("set",E.hover_border),N.$button_border_hover_color_preview.hide(),N.$button_preview_background.css("background-color",E.background_color),N.$button_background_color_value.val(E.background_color),N.$button_background_color_preview.hide(),N.$button_background_color_value.spectrum("set",E.background_color),N.$button_preview_border.css("border-color",E.border_color),N.$button_border_color_value.val(E.border_color),N.$button_border_color_preview.hide(),N.$button_border_color_value.spectrum("set",E.border_color),P?N.$self.addClass("editing-model"):N.$self.removeClass("editing-model")},Y=function(){E.font_size=N.$button_label_text_size.val()+"px",E.button_height=N.$button_height.val()+"px",E.button_width=N.$button_width.val()+"px",E.border_width=N.$button_border_width.val()+"px",E.border_radius=N.$button_border_radius.val()+"px",E.margin_top=N.$button_margin_top.val()+"px",E.margin_bottom=N.$button_margin_bottom.val()+"px",E.margin_right=N.$button_margin_right.val()+"px",E.margin_left=N.$button_margin_left.val()+"px",E.padding_top=N.$button_padding_top.val()+"px",E.padding_bottom=N.$button_padding_bottom.val()+"px",E.padding_right=N.$button_padding_right.val()+"px",E.padding_left=N.$button_padding_left.val()+"px",E.buttonTarget.button_name=N.$button_name.val(),E.text=N.$button_label_text.val(),E.link_target=N.$button_link_target.val(),E.link_type=N.$button_link_type.val(),E.classes=G()};var H=function(){for(var e=E.buttonTarget.button_id,t=0;t<B.length&&e!=B[t].rexID;t++);t!=B.length&&B.splice(t,1);var o={rexID:e,buttonName:E.buttonTarget.button_name,rules:{element:{text_color:E.text_color,font_size:E.font_size,background_color:E.background_color,button_height:E.button_height,button_width:E.button_width,border_color:E.border_color,border_width:E.border_width,border_radius:E.border_radius,margin_top:E.margin_top,margin_bottom:E.margin_bottom,margin_right:E.margin_right,margin_left:E.margin_left,padding_top:E.padding_top,padding_bottom:E.padding_bottom,padding_right:E.padding_right,padding_left:E.padding_left},hover:{background_color:E.hover_color,text_color:E.hover_text,border_color:E.hover_border}}},n=(B.push(o),tmpl.arg="button",o={text:"Learn More",link_target:"#",link_type:"_blank"},o={text_color:E.text_color,text:o.text,font_size:E.font_size,button_height:E.button_height,button_width:E.button_width,background_color:E.background_color,hover_color:E.hover_color,hover_text:E.hover_text,hover_border:E.hover_border,border_color:E.border_color,border_width:E.border_width,border_radius:E.border_radius,margin_top:E.margin_top,margin_bottom:E.margin_bottom,margin_right:E.margin_right,margin_left:E.margin_left,padding_top:E.padding_top,padding_bottom:E.padding_bottom,padding_right:E.padding_right,padding_left:E.padding_left,link_target:o.link_target,link_type:o.link_type,button_name:E.buttonTarget.button_name,id:E.buttonTarget.button_id},tmpl("tmpl-rex-button",o).trim()),o=(o=E.buttonTarget.button_id,r="",r='.rex-button-wrapper[data-rex-button-id="'+o+'"]',r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r+=" .rex-button-container{")+"font-size: "+(isNaN(parseInt(E.font_size.replace("px","")))?j:E).font_size+";color: "+E.text_color+";")+"min-height: "+(isNaN(parseInt(E.button_height.replace("px","")))?j.dimensions.height:E.button_height)+";")+"min-width: "+(isNaN(parseInt(E.button_width.replace("px","")))?j.dimensions.width:E.button_width)+";")+"margin-top: "+(isNaN(parseInt(E.margin_top.replace("px","")))?j.margins.top:E.margin_top)+";")+"margin-right: "+(isNaN(parseInt(E.margin_right.replace("px","")))?j.margins.right:E.margin_right)+";")+"margin-bottom: "+(isNaN(parseInt(E.margin_bottom.replace("px","")))?j.margins.bottom:E.margin_bottom)+";")+"margin-left: "+(isNaN(parseInt(E.margin_left.replace("px","")))?j.margins.left:E.margin_left)+";}")+'.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-text{')+"padding-top: "+(isNaN(parseInt(E.padding_top.replace("px","")))?j.paddings.top:E.padding_top)+";")+"padding-right: "+(isNaN(parseInt(E.padding_right.replace("px","")))?j.paddings.right:E.padding_right)+";")+"padding-bottom: "+(isNaN(parseInt(E.padding_bottom.replace("px","")))?j.paddings.bottom:E.padding_bottom)+";")+"padding-left: "+(isNaN(parseInt(E.padding_left.replace("px","")))?j.paddings.left:E.padding_left)+";")+'}.rex-button-wrapper[data-rex-button-id="'+o+'"]')+" .rex-button-background{background-color: "+E.background_color+";")+"border-color: "+E.border_color+";")+"border-width: "+(isNaN(parseInt(E.border_width.replace("px","")))?j.border.width:E.border_width)+";")+"border-radius: "+(isNaN(parseInt(E.border_radius.replace("px","")))?j.border.radius:E.border_radius)+";border-style: solid;")+'}.rex-button-wrapper[data-rex-button-id="'+o+'"]')+" .rex-button-background:hover{background-color: "+E.hover_color+";")+"border-color: "+E.hover_border+";}")+'.rex-button-wrapper[data-rex-button-id="'+o+'"] .rex-button-container:hover{')+"color: "+E.hover_text+";}"),r=JSON.stringify(B),a=E.buttonTarget.button_id;N.$add_model_button.addClass("saving-rex-button"),D.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_button",nonce_param:live_editor_obj.rexnonce,id_button:a,html_button:n,css_button:o,jsonRexButtons:r},beforeSend:function(){N.$self.addClass("rex-modal--loading")},success:function(e){var t;Button_Import_Modal.updateButtonList({html:n,buttonData:E}),P||(t={eventName:"rexlive:remove_separate_button",data_to_send:{buttonTarget:E.buttonTarget}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)),N.$add_model_button.removeClass("saving-rex-button")},error:function(e){},complete:function(e){N.$self.removeClass("rex-modal--loading")}})},i=function(e){U.push(e)},l=function(e){var t;t={eventName:"rexlive:separate_rex_button",data_to_send:{newID:e,buttonData:E}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),t={id:e,number:1},E.buttonTarget.button_id=t.id,E.buttonTarget.button_number=t.number,P=!1,q(),Rexlive_Modals_Utils.openModal(N.$self.parent(".rex-modal-wrap"))},d=function(e){var t=void 0!==e&&e.separate;D.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_buttons_ids",nonce_param:live_editor_obj.rexnonce,ids_used:JSON.stringify(U)},success:function(){t&&l(e.rexID)},error:function(){},complete:function(){}})},c=function(){var e,t,o="";do{for(e=!0,o=Rexbuilder_Util_Admin_Editor.createRandomID(4),t=0;t<U.length;t++)if(o==U[t]){e=!1;break}}while(!e);return o},J=function(){var e={eventName:"rexlive:update_button_page",data_to_send:{reverseButtonData:jQuery.extend(!0,{},r),actionButtonData:jQuery.extend(!0,{},E),needToSave:z}};r=jQuery.extend(!0,{},e.data_to_send.actionButtonData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},K=function(e){e={eventName:"rexlive:updateButtonLive",data_to_send:{buttonTarget:E.buttonTarget,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};return{init:function(){var t,o,n,r,a,i,l,d,c,s,u,p,m,v,f,g,b,h,e=D("#rex-button-editor"),x=e.find(".rex-accordion"),$=e,w=(N={$self:e,$modal:$.parent(".rex-modal-wrap"),$close_button:$.find(".rex-cancel-button"),$reset_button:$.find(".rex-reset-button"),$create_new_button:D("#rex-add-new-button"),$add_model_button:$.find(".add-rex-button-model"),$apply_changes_button:$.find(".rex-apply-button"),$button_label_text:$.find("#rex-button__label"),$button_label_text_size:$.find("#rex-button_text_font_size"),$button_label_text_color_value:$.find("#rex-button-text-color"),$button_label_text_color_runtime:$.find("#rex-button-text-color-runtime"),$button_label_text_color_preview:$.find("#rex-button-text-color-preview-icon"),$button_preview_background:$.find("#rex-button-preview-background"),$button_background_color_value:$.find("#rex-button-background-color"),$button_background_color_runtime:$.find("#rex-button-background-color-runtime"),$button_background_color_preview:$.find("#rex-button-background-color-preview-icon"),$button_height:$.find("#rex-button-height"),$button_width:$.find("#rex-button-width"),$button_preview_background_hover:$.find("#rex-button-preview-background-hover"),$button_background_hover_color_value:$.find("#rex-button-background-hover-color"),$button_background_hover_color_runtime:$.find("#rex-button-background-hover-color-runtime"),$button_background_hover_color_preview:$.find("#rex-button-background-hover-color-preview-icon"),$button_preview_text_hover:$.find("#rex-button-preview-text-hover"),$button_text_hover_color_value:$.find("#rex-button-text-hover-color"),$button_text_hover_color_runtime:$.find("#rex-button-text-hover-color-runtime"),$button_text_hover_color_preview:$.find("#rex-button-text-hover-color-preview-icon"),$button_preview_border_hover:$.find("#rex-button-preview-border-hover"),$button_border_hover_color_value:$.find("#rex-button-border-hover-color"),$button_border_hover_color_runtime:$.find("#rex-button-border-hover-color-runtime"),$button_border_hover_color_preview:$.find("#rex-button-border-hover-color-preview-icon"),$button_preview_border:$.find("#rex-button-border-preview"),$button_border_color_value:$.find("#rex-button-border-color"),$button_border_color_runtime:$.find("#rex-button-border-color-runtime"),$button_border_color_preview:$.find("#rex-button-color-preview-icon"),$button_border_width:$.find("#rex-button-border-width"),$button_border_radius:$.find("#rex-button-border-radius"),$button_margin_top:$.find("#rex-button-margin-top-radius"),$button_margin_right:$.find("#rex-button-margin-right-radius"),$button_margin_bottom:$.find("#rex-button-margin-bottom-radius"),$button_margin_left:$.find("#rex-button-margin-left-radius"),$button_padding_top:$.find("#rex-button-padding-top-radius"),$button_padding_right:$.find("#rex-button-padding-right-radius"),$button_padding_bottom:$.find("#rex-button-padding-bottom-radius"),$button_padding_left:$.find("#rex-button-padding-left-radius"),$button_link_target:$.find("#rex-button-link-target"),$button_link_type:$.find("#rex-button-link-type"),$button_class:$.find("#rex-button__class"),$button_effect_classes:$.find("#rex-button__effect-classes"),$button_effect_fields:$.find(".rex-button__effect-field"),$button_popup_video:$.find("#rex-button__popup-video"),$button_name:$.find("#rex-button__name")},B=JSON.parse(D("#rex-buttons-json-css").text()),U=JSON.parse(D("#rex-buttons-ids-used").text()),N.$modal.click(function(e){D(e.target).is(".rex-modal-wrap")&&(z=!_.isEqual(E,T))}),N.$reset_button.on("click",function(){z=!1,E=jQuery.extend(!0,{},T),q(),J()}),N.$add_model_button.on("click",function(){Y(),H()}),N.$close_button.on("click",function(){z=!1,E=jQuery.extend(!0,{},T),q(),J(),Q()}),N.$apply_changes_button.on("click",function(){z=!_.isEqual(E,T),Q()}),N.$modal.on("rexlive:this_modal_closed",function(){Y(),J(),P&&H()}),j={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},E={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_left:"",margin_right:"",padding_top:"",padding_bottom:"",padding_left:"",padding_right:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}},A=[],N.$button_effect_fields.each(function(e,t){A.push(t.value)}),N.$button_label_text.on("keyup",function(e){K({type:"button",name:"button_label",value:N.$button_label_text.val()})}),N.$button_link_target.on("keyup",function(e){K({type:"button",name:"link_target",value:N.$button_link_target.val()})}),N.$button_class.on("focusout",function(e){K({type:"button",name:"button_class",value:G()})}),N.$button_name.on("keyup",function(e){P||K({type:"button",name:"button_name",value:N.$button_name.val()})}),"");function k(e){t=e.toRgbString(),N.$button_label_text_color_preview.hide(),N.$button_label_text.css("color",t),K({type:"container",name:"color",value:t})}function y(e){r=e.toRgbString(),N.$button_background_color_preview.hide(),N.$button_preview_background.css("background-color",r),K({type:"background",name:"background-color",value:r})}function C(e){l=e.toRgbString(),N.$button_background_hover_color_preview.hide(),N.$button_preview_background_hover.css("background-color",l),K({type:"backgroundHover",name:"background-color",value:l})}function M(e){s=e.toRgbString(),N.$button_border_hover_color_preview.hide(),N.$button_preview_border_hover.css("background-color",s),K({type:"borderHover",name:"border-color",value:s})}function R(e){m=e.toRgbString(),N.$button_text_hover_color_preview.hide(),N.$button_preview_text_hover.css("background-color",m),K({type:"textHover",name:"color",value:m})}function S(e){g=e.toRgbString(),N.$button_border_color_preview.hide(),N.$button_preview_border.css("border-color",g),K({type:"background",name:"border-color",value:g})}O(N.$button_label_text_size,!1),V(N.$button_label_text_size,function(e){w=isNaN(parseInt(e))?j.font_size:e+"px",K({type:"container",name:"font-size",value:w})},!1),O(N.$button_height,!1),V(N.$button_height,function(e){w=isNaN(parseInt(e))?j.dimensions.height:e+"px",K({type:"container",name:"min-height",value:w})},!1),O(N.$button_width,!1),V(N.$button_width,function(e){w=isNaN(parseInt(e))?j.dimensions.width:e+"px",K({type:"container",name:"min-width",value:w})},!1),O(N.$button_border_width,!1),V(N.$button_border_width,function(e){w=isNaN(parseInt(e))?j.border.width:e+"px",K({type:"background",name:"border-width",value:w})},!1),O(N.$button_border_radius,!1),V(N.$button_border_radius,function(e){w=isNaN(parseInt(e))?j.border.radius:e+"px",K({type:"background",name:"border-radius",value:w})},!1),O(N.$button_margin_top,!1),V(N.$button_margin_top,function(e){w=isNaN(parseInt(e))?j.margins.top:e+"px",K({type:"container",name:"margin-top",value:w})},!1),O(N.$button_padding_top,!1),V(N.$button_padding_top,function(e){w=isNaN(parseInt(e))?j.paddings.top:e+"px",K({type:"text",name:"padding-top",value:w})},!1),O(N.$button_margin_bottom,!1),V(N.$button_margin_bottom,function(e){w=isNaN(parseInt(e))?j.margins.bottom:e+"px",K({type:"container",name:"margin-bottom",value:w})},!1),O(N.$button_padding_bottom,!1),V(N.$button_padding_bottom,function(e){w=isNaN(parseInt(e))?j.paddings.top:e+"px",K({type:"text",name:"padding-bottom",value:w})},!1),O(N.$button_margin_left,!1),V(N.$button_margin_left,function(e){w=isNaN(parseInt(e))?j.margins.left:e+"px",K({type:"container",name:"margin-left",value:w})},!1),O(N.$button_padding_left,!1),V(N.$button_padding_left,function(e){w=isNaN(parseInt(e))?j.paddings.left:e+"px",K({type:"text",name:"padding-left",value:w})},!1),O(N.$button_margin_right,!1),V(N.$button_margin_right,function(e){w=isNaN(parseInt(e))?j.margins.right:e+"px",K({type:"container",name:"margin-right",value:w})},!1),O(N.$button_padding_right,!1),V(N.$button_padding_right,function(e){w=isNaN(parseInt(e))?j.paddings.right:e+"px",K({type:"text",name:"padding-right",value:w})},!1),N.$button_link_type.on("change",function(e){K({type:"button",name:"link_type",value:N.$button_link_type.val()})}),N.$button_popup_video.on("change",function(e){e.preventDefault();var t=JSON.parse(N.$button_effect_classes.val());if(e.target.checked)t.push("popup-video-button");else for(var o=0;o<t.length;o++)if("popup-video-button"===t[o]){t.splice(o,1);break}N.$button_effect_classes.val(JSON.stringify(t)),N.$button_class.trigger("focusout")}),(n=N.$button_label_text_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){o=e},move:k,hide:function(e){E.text_color=e.toRgbString()}}),e=F.clone(),$=L.clone(),n.spectrum("container").append(e),n.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),n.spectrum("hide"),k(o)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),n.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),k(o)}),N.$button_label_text_color_preview.on("click",function(){return n.spectrum("show"),!1}),(i=N.$button_background_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){a=e},move:y,hide:function(e){E.background_color=e.toRgbString()}}),e=F.clone(),$=L.clone(),i.spectrum("container").append(e),i.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),i.spectrum("hide"),y(a)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),i.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),y(a)}),N.$button_background_color_preview.on("click",function(){return i.spectrum("show"),!1}),(c=N.$button_background_hover_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){d=e},move:C,hide:function(e){E.hover_color=e.toRgbString()}}),e=F.clone(),$=L.clone(),c.spectrum("container").append(e),c.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),c.spectrum("set",d.toRgbString()),c.spectrum("hide"),C(d)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),c.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),c.spectrum("set",d.toRgbString()),C(d)}),N.$button_background_color_preview.on("click",function(){return c.spectrum("show"),!1}),(p=N.$button_border_hover_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){u=e},move:M,hide:function(e){E.hover_border=e.toRgbString()}}),e=F.clone(),$=L.clone(),p.spectrum("container").append(e),p.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),p.spectrum("set",u.toRgbString()),p.spectrum("hide"),M(u)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),p.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),p.spectrum("set",u.toRgbString()),M(u)}),N.$button_border_color_preview.on("click",function(){return p.spectrum("show"),!1}),(f=N.$button_text_hover_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){v=e},move:R,hide:function(e){E.hover_text=e.toRgbString()}}),e=F.clone(),$=L.clone(),f.spectrum("container").append(e),f.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),f.spectrum("set",v.toRgbString()),f.spectrum("hide"),R(v)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),f.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),f.spectrum("set",v.toRgbString()),R(v)}),N.$button_text_hover_color_preview.on("click",function(){return f.spectrum("show"),!1}),(h=N.$button_border_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){b=e},move:S,hide:function(e){E.border_color=e.toRgbString()}}),e=F.clone(),$=L.clone(),h.spectrum("container").append(e),h.spectrum("container").append($),e.on("click",function(e){e.preventDefault(),h.spectrum("set",b.toRgbString()),h.spectrum("hide"),S(b)}),$.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),h.spectrum("hide")}),$.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),h.spectrum("set",b.toRgbString()),S(b)}),N.$button_border_color_preview.on("click",function(){return h.spectrum("show"),!1}),e=D("#rex-button-model-choose"),I={$self:$=e,$button:$.find(".rex-button"),$close_button:$.find(".rex-modal__close-button")},W(),x.rexAccordion({open:{},close:{}})},openButtonEditorModal:function(e){e=e,P=!1,o(),a(e),q(),t(),P?Rexlive_Modals_Utils.openModal(I.$self.parent(".rex-modal-wrap")):Rexlive_Modals_Utils.openModal(N.$self.parent(".rex-modal-wrap"))},removeIDButton:function(e){var t=U.indexOf(e.rexID);return-1!=t?(U.splice(t,1),e.updateDB&&d(),e.rexID):null},removeIDButtonSoft:function(e){e=U.indexOf(e);-1!=e&&U.splice(e,1)}}}(jQuery),Form_Import_Modal=function(u){"use strict";var c,p,i={};function t(e){u(i.noFormsMessage).addClass("lateral-menu-message--hidden");var t=e.updated_list,o=[];i.$self.find(".element-list__element").each(function(e,t){t.style.display="",u(t).removeClass("element-list__element--separated"),o.push({id:t.getAttribute("data-rex-element-id"),found:!1})});for(var n=0;n<t.length;n++)t[n].found=!1;for(n=0;n<t.length;n++)for(var r=0;r<o.length;r++)if(t[n].id==o[r].id){t[n].found=!0,o[r].found=!0;break}tmpl.arg="element";for(n=0;n<t.length;n++)t[n].found||i.$self.find(".element-list").prepend(tmpl("rexlive-tmpl-element-item-list",{id:t[n].id,name:t[n].name,preview:t[n].preview_image_url||""})).find(".rex-element-wrapper").prepend(t[n].element_data_html[0]);for(n=0;n<o.length;n++)o[n].found||i.$self.find('.element-list__element[data-rex-element-id="'+o[n].id+'"]').remove();e.separatedForms&&e.separatedForms&&e.separatedForms.forEach(function(e){i.$self.find('.element-list__element[data-rex-element-id="'+e+'"]').addClass("element-list__element--separated")}),0===i.$self.find(".element-list__element").get().filter(function(e){return"none"!==u(e).css("display")}).length&&u(i.noFormsMessage).removeClass("lateral-menu-message--hidden")}var s=function(e,t,o){u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_element_thumbnail",nonce_param:live_editor_obj.rexnonce,element_target:e,image_selected:t,image_size:o,set_post_thumbnail_result:null,set_post_thumbnail_url_result:null},success:function(e){},error:function(e){}})};function o(){i.importFormsButton.addEventListener("click",function(e){e.stopPropagation(),u(i.noFormsMessage).addClass("lateral-menu-message--hidden"),u.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_load_default_forms",nonce_param:live_editor_obj.rexnonce},beforeSend:function(){u(i.loadingPlaceholder).removeClass("loading-placeholder--hidden")},success:function(e){e.success?t(e.data):this.error(e,e.data[0].message,e.data[0].code)},error:function(e,t,o){u(i.noFormsMessage).removeClass("lateral-menu-message--hidden"),Rexbuilder_Util_Admin_Editor.displayAjaxError({response:e,textStatus:t,errorThrown:o},"Something went wrong when trying to import the Contact Forms. Please try again after refreshing the page.")},complete:function(){u(i.loadingPlaceholder).addClass("loading-placeholder--hidden")}})})}function n(){var o,n,r,a,l,d=!!document.documentMode,e=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,t=u(e),c=0,s=0;Rexlive_Base_Settings.$document.on("dragstart",".element-list li",function(e){Rexbuilder_Util_Admin_Editor.dragImportType="rexelement",Rexbuilder_Util_Admin_Editor.hideLateralMenu(),e.originalEvent.dataTransfer.effectAllowed="all",r=setInterval(p.processDragOverQueue.bind(p),100);var t=u(this).html();d?e.originalEvent.dataTransfer.setData("text",t):e.originalEvent.dataTransfer.setData("text/plain",t),Rexbuilder_Util_Admin_Editor.addClassToLiveFrameRexContainer("rex-dragging-element"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_started",data_to_send:{}})}),Rexlive_Base_Settings.$document.on("drag",".element-list li",function(){Rexbuilder_Util_Admin_Editor.setStopScroll(!0),s<150&&Rexbuilder_Util_Admin_Editor.scrollFrame(-15),s>t.height()-150&&Rexbuilder_Util_Admin_Editor.scrollFrame(15)}),Rexlive_Base_Settings.$document.on("dragend",".element-list li",function(){clearInterval(r),Rexbuilder_Util_Admin_Editor.setStopScroll(!0),p.removeAllPlaceholders(),Rexbuilder_Util_Admin_Editor.removeClassToLiveFrameRexContainer("rex-dragging-element"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:drag_drop_ended",data_to_send:{}})}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var t={},i={};Form_Import_Modal.onDragOverWindow=function(e){e.preventDefault(),e.stopPropagation(),a=c,l=s,c=e.originalEvent.clientX,s=e.originalEvent.clientY,p.checkIfCursorMoves(a,l,c,s),Rexbuilder_Util_Admin_Editor.checkLateralMenu(c)},Form_Import_Modal.onDragEnterRow=function(e){o=u(e.target),n=e.target.getBoundingClientRect()},Form_Import_Modal.onDragOverRow=function(e){c=e.originalEvent.clientX,s=e.originalEvent.clientY,t.xCoord=e.originalEvent.clientX,t.yCoord=e.originalEvent.clientY,i.x=e.originalEvent.pageX,i.y=e.originalEvent.pageY,p.addEntryToDragOverQueue(o,n,t)},Form_Import_Modal.onDropRow=function(e){var t;e.preventDefault(),e.stopPropagation(),t=(e.isTrigger?triggerEvent:e).originalEvent;try{var o="",o=d?t.dataTransfer.getData("text"):t.dataTransfer.getData("text/plain"),n=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker"),r=(o=o.trim(),u(u.parseHTML(o))),a=(r.addClass("rex-loading-element"),r.insertAfter(n[0]),r.hide(),n.remove(),{eventName:"rexlive:importElement",data:{mousePosition:i}});Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}catch(t){console.error(t)}}})}function r(){var e=Rexbuilder_Util_Admin_Editor.frameBuilder.contentDocument;p=new RexWpcf7DragDrop(e)}return{init:function(){Rexbuilder_Util_Admin_Editor.frameBuilder.addEventListener("load",r);var e=document.getElementById("rex-elements-list");i={self:e,$self:u(e),pluginNotActiveMessage:document.getElementById("cf7-not-active-message"),noFormsMessage:document.getElementById("no-forms-message"),loadingPlaceholder:e.querySelector(".loading-placeholder"),importFormsButton:document.getElementById("import-forms")},o(),n()},updateList:function(){u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_form_list",nonce_param:live_editor_obj.rexnonce},success:function(e){e.success?(u(i.self).removeClass("rex-elements-list--hidden"),u(i.pluginNotActiveMessage).addClass("lateral-menu-message--hidden"),u(i.noFormsMessage).addClass("lateral-menu-message--hidden"),u(i.loadingPlaceholder).addClass("loading-placeholder--hidden"),t(e.data),e=jQuery.Event("rexlive:lateralMenuReady"),u(document).trigger(e)):(u(i.self).addClass("rex-elements-list--hidden"),u(i.pluginNotActiveMessage).removeClass("lateral-menu-message--hidden"))},complete:function(){i.$self.removeClass("rex-modal--loading")}})},deleteForm:function(t){var n,e,r,o=t.getAttribute("data-rex-element-id"),a=parseInt(Rexbuilder_Util_Admin_Editor.frameBuilder.contentDocument.getElementById("id-post").getAttribute("data-post-id"));a&&o&&(n=o,e=u(Rexbuilder_Util_Admin_Editor.frameBuilder.contentDocument).find('.rex-container .rex-element-wrapper[data-rex-element-id="'+n+'"]').get(),r=[],e.forEach(function(o){r.push(u.post(live_editor_obj.ajaxurl,{action:"rex_separate_form",nonce_param:live_editor_obj.rexnonce,old_id:n},function(e){var t;e.success&&(e=e.data.new_id,t={element_target:{element_id:n,element_number:o.dataset.rexElementNumber}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:separate_rex_element",data_to_send:{newID:e,elementData:t}}),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:refresh_separated_rex_element",data_to_send:{elementID:e,oldElementID:n,elementData:t}}),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:lock_synchronize_on_element",data_to_send:t}))},"json"))}),e=r,u.when.apply(u,e).then(function(){u.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_rexelement",nonce_param:live_editor_obj.rexnonce,element_id:o,postID:a},beforeSend:function(){i.$self.addClass("rex-modal--loading")},success:function(e){(e.success||e.data.error)&&(t.style.display="none",0===i.$self.find(".element-list__element").get().filter(function(e){return"none"!==u(e).css("display")}).length)&&(u(i.loadingPlaceholder).addClass("loading-placeholder--hidden"),u(i.noFormsMessage).removeClass("lateral-menu-message--hidden"))},error:function(e,t,o){alert("Something went wrong when trying to delete the Contact Form. Please try again."),console.error("[Rexpansive] Something went wrong with your deletion AJAX request.",{status:e.status,message:t,errorThrown:o})},complete:function(){i.$self.removeClass("rex-modal--loading")}})}))},editElementThumbnail:function(e,t){setUserSetting("imgsize","medium"),c?c.state("live-image-element").set("selected_image",t).set("selected_element",e):(t=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image-element",title:"Edit Element Thumbnail",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),selected_image:t,selected_element:e,type:"image"},wp.media.controller.Library.prototype.defaults)}),(c=wp.media({button:{text:"Select"},state:"live-image-element",states:[new t]})).on("open",function(){var t,o=c.state("live-image-element").get("selection"),e=(o.each(function(e){(t=wp.media.attachment(e.attributes.id)).fetch(),o.remove(t?[t]:[])}),c.state("live-image-element").get("selected_image"));e&&((t=wp.media.attachment(e)).fetch(),o.add(t?[t]:[],{imgsize:""}))}),c.on("select",function(){var t,o,e,n,r=c.state("live-image-element"),a=r.get("liveTarget"),i=r.get("eventName"),l=(r.get("data_to_send"),r.get("selection")),d={eventName:i,data_to_send:{sectionTarget:a,target:a}};l&&(l.each(function(e){t=r.display(e).toJSON(),o=e.toJSON(),wp.media.view.settings.captions||delete o.caption,t=wp.media.string.props(t,o),d.data_to_send.idImage=o.id,d.data_to_send.urlImage=t.src}),i=t.src,a=t.size,l=o.id,e=c.state("live-image-element").get("selected_element"),(n=u('.element-list__element[data-rex-element-id="'+e+'"]')).attr("data-rex-element-thumbnail-id",l),n.attr("data-rex-element-thumbnail-size",a),n.find(".element-list-preview").addClass("element-list-preview--active").css("background-image",'url("'+i+'")'),n.find(".element-list__element--edit-thumbnail").addClass("tool-button--image-preview").css("background-image",'url("'+i+'")'),s(e,l,a))}),c.on("close",function(){setUserSetting("imgsize","medium")})),c.open()},resetElementThumbnail:function(e){var t=u('.element-list__element[data-rex-element-id="'+e+'"]');t.attr("data-rex-element-thumbnail-id",""),t.attr("data-rex-element-thumbnail-size",""),t.find(".element-list-preview").css("background-image",'url("")').removeClass("element-list-preview--active"),t.find(".tool-button--image-preview").css("background-image",'url("")').removeClass("tool-button--image-preview"),u.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_element_thumbnail",nonce_param:live_editor_obj.rexnonce,element_target:e,delete_post_thumbnail_result:null,delete_post_thumbnail_url_result:null},success:function(e){},error:function(e){}})}}}(jQuery),Element_Choose_Modal=function(o){var n,r,t,a,i,l;function d(){o.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_separate_form",nonce_param:live_editor_obj.rexnonce,old_id:a},beforeSend:function(){},success:function(e){i=e.data.new_id;var t=e=i,t=(t={eventName:"rexlive:separate_rex_element",data_to_send:{newID:e,elementData:r}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),{id:e,number:1}),t=(r.element_target.element_id=t.id,r.element_target.element_number=t.number,e);t={eventName:"rexlive:refresh_separated_rex_element",data_to_send:{elementID:e,oldElementID:a,elementData:r}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:r})}})}function c(){Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap"),!1,["wpcf7-choose-element"])}function s(){n.$button.on("click",function(e){l=!1;var t,o=this.getAttribute("data-rex-option");switch(c(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:edited",modelEdited:!1}),o){case"remove":a=r.element_target.element_id,r.element_target.is_separated=!0,d();break;case"edit":Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:r}),t={eventName:"rexlive:lock_synchronize_on_element",data_to_send:{element_target:r.element_target}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}}),n.$close_button.on("click",function(){c()}),n.$modal.on("rexlive:this_modal_closed",function(e){l&&Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:clearFormOutlines"}),Rexbuilder_Util_Admin_Editor.searchFocusedElement()})}return{init:function(){var e=o("#rex-element-choose"),t=e;n={$self:e,$modal:t.parent(".rex-modal-wrap"),$button:t.find(".rex-button"),$close_button:t.find(".rex-modal__close-button")},s()},selectModalToOpen:function(e){l=!(t=!1),e=e.elementData,r={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}},void 0!==(r=jQuery.extend(!0,{},e)).synchronize&&(t="true"==r.synchronize.toString()),jQuery.extend(!0,{},r),jQuery.extend(!0,{},r),t?Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:r}):Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap"),!1,["wpcf7-choose-element"])}}}(jQuery),Wpcf7_Add_Content_Modal=function(o){var n,t={};function r(){Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap"),!1,["wpcf7-adding-content"])}var a=function(e){e={eventName:"rexlive:wpcf7_add_field",data_to_send:{insertionPoint:t,fieldType:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e),r()};return{init:function(){var e=o("#rex-wpcf7-content-adder"),t=e;(n={$self:e,$modal:t.parent(".rex-modal-wrap"),$close_button:t.find(".rex-cancel-button"),$wpcf7_add_text_field:t.find("#rex-add-text-field"),$wpcf7_add_textarea_field:t.find("#rex-add-textarea-field"),$wpcf7_add_menu_field:t.find("#rex-add-menu-field"),$wpcf7_add_checkbox_field:t.find("#rex-add-checkbox-field"),$wpcf7_add_file_field:t.find("#rex-add-file-field"),$wpcf7_add_radio_buttons_field:t.find("#rex-add-radiobuttons-field"),$wpcf7_add_submit_button:t.find("#rex-add-submit-button")}).$close_button.on("click",function(){r()}),n.$wpcf7_add_text_field.on("click",function(){a("text")}),n.$wpcf7_add_textarea_field.on("click",function(){a("textarea")}),n.$wpcf7_add_menu_field.on("click",function(){a("menu")}),n.$wpcf7_add_radio_buttons_field.on("click",function(){a("radiobuttons")}),n.$wpcf7_add_checkbox_field.on("click",function(){a("acceptance")}),n.$wpcf7_add_file_field.on("click",function(){a("file")}),n.$wpcf7_add_submit_button.on("click",function(){a("submit")}),n.$modal.on("rexlive:this_modal_closed",function(e){Rexbuilder_Util_Admin_Editor.searchFocusedElement()})},openContentAdder:function(e){t=e.insertionPoint,Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap"),!1,["wpcf7-adding-content"])}}}(jQuery),Wpcf7_Edit_Content_Modal=function(ee){var te,t,oe,n,r,a,i,ne=!1,re={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",label_text:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}},ae={input_width:"100%",input_height:"100%",font_size:"15px"},ie=ee(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-close")),le=ee(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-save")),de=function(e,o){o=void 0!==o&&"true"==o.toString(),e.keydown(function(e){var t=ee(e.target);-1!==ee.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||"-"==e.key?(o||"-"!=e.key||e.preventDefault(),38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),o?t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val()-1)):t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},ce=function(e,t,o){o=void 0!==o&&"true"==o.toString(),e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),!o&&"-"==e.key||t.call(this,parseInt(e.target.value)))})},se=function(){_e(),Rexlive_Modals_Utils.closeModal(te.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-content"])},_e=function(){var e=te.$content_input_font_size.parents("#rex-wpcf7-font-size-field").detach();te.$self.find(".rex-wpcf7-font-size-row").append(e),te.$field_list.removeClass("rex-wpcf7-file-list"),te.$content_required_field.parents(".bl_modal__option-wrap").prependTo(te.$self.find("#required-field-row"))},ue=function(){var e={eventName:"rexlive:update_wcpf7_column_content_page",data_to_send:{reverseColumnContentData:jQuery.extend(!0,{},t),actionColumnContentData:jQuery.extend(!0,{},re),needToSave:ne}};t=jQuery.extend(!0,{},e.data_to_send.actionColumnContentData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},l=function(){re={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",label_text:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}}},d=function(e){re=jQuery.extend(!0,{},e),t=jQuery.extend(!0,{},re),oe=jQuery.extend(!0,{},re)},pe=function(){switch(te.$content_required_field.prop("checked",re.wpcf7_required_field),te.$content_set_email.prop("checked",re.wpcf7_email),te.$content_only_numbers.prop("checked",re.wpcf7_only_numbers),te.$content_input_default_check.prop("checked",re.wpcf7_default_check),te.$content_placeholder.siblings("label, .prefix").removeClass("active"),te.$content_placeholder.val(re.wpcf7_placeholder),""!=te.$content_placeholder.val()&&te.$content_placeholder.siblings("label, .prefix").addClass("active"),te.$content_input_width.val(/[0-9]+/.exec(re.input_width)),("px"===(null!=/[a-z]{2}|\%/.exec(re.input_width)?/[a-z]{2}|\%/.exec(re.input_width)[0]:"%")?te.$content_input_width_type.filter("[value=pixel]"):te.$content_input_width_type.filter("[value=percentage]")).prop("checked",!0),te.$content_input_width.siblings("label, .prefix").removeClass("active"),""!=te.$content_input_width.val()&&te.$content_input_width.siblings("label, .prefix").addClass("active"),te.$content_input_height.val(/[0-9]+/.exec(re.input_height)),te.$content_input_height.siblings("label, .prefix").removeClass("active"),""!=te.$content_input_height.val()&&te.$content_input_height.siblings("label, .prefix").addClass("active"),te.$content_input_font_size.val(/[0-9]+/.exec(re.font_size)),re.text=re.text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),n.setContent(re.text),r.value=re.text,re.label_text=re.label_text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),a.setContent(re.label_text),i.value=re.label_text,te.$content_file_max_dimensions.val(/[0-9]+/.exec(re.wpcf7_file_max_dimensions)),null!=/[a-z]{2}/.exec(re.wpcf7_file_max_dimensions)?/[a-z]{2}/.exec(re.wpcf7_file_max_dimensions)[0]:"kb"){case"mb":te.$content_file_max_dimensions_unit.val("mb");break;case"gb":te.$content_file_max_dimensions_unit.val("gb");break;default:te.$content_file_max_dimensions_unit.val("kb")}te.$content_file_max_dimensions.siblings("label, .prefix").removeClass("active"),""!=te.$content_file_max_dimensions.val()&&te.$content_file_max_dimensions.siblings("label, .prefix").addClass("active"),te.$field_list.empty(),tmpl.arg="o";for(var e=1;e<=re.wpcf7_list_fields.length;e++)te.$field_list.append(tmpl("tmpl-rex-wpcf7-edit-content-list",{number:e})),te.$field_list.find(".field-"+e).val(re.wpcf7_list_fields[e-1]);fe(),ge(),te.$content_preview_text.css("background-color",re.text_color),te.$content_text_color_value.val(re.text_color),te.$content_text_color_preview.hide(),te.$content_text_color_value.spectrum("set",re.text_color),te.$content_preview_text_focus.css("background-color",re.text_color_focus),te.$content_text_color_focus_value.val(re.text_color_focus),te.$content_text_color_focus_preview.hide(),te.$content_text_color_focus_value.spectrum("set",re.text_color_focus),te.$content_preview_select.css("background-color",re.text_color),te.$content_select_color_value.val(re.text_color),te.$content_select_color_preview.hide(),te.$content_select_color_value.spectrum("set",re.text_color),te.$content_preview_select_after_selection.css("background-color",re.select_color_after_selection),te.$content_select_color_after_selection_value.val(re.select_color_after_selection),te.$content_select_color_after_selection_preview.hide(),te.$content_select_color_after_selection_value.spectrum("set",re.select_color_after_selection),te.$content_preview_placeholder.css("background-color",re.placeholder_color),te.$content_placeholder_color_value.val(re.placeholder_color),te.$content_placeholder_color_preview.hide(),te.$content_placeholder_color_value.spectrum("set",re.placeholder_color),te.$content_preview_placeholder_hover.css("background-color",re.placeholder_hover_color),te.$content_placeholder_hover_color_value.val(re.placeholder_hover_color),te.$content_placeholder_hover_color_preview.hide(),te.$content_placeholder_hover_color_value.spectrum("set",re.placeholder_hover_color),te.$button_preview.css({width:re.wpcf7_button.width,height:re.wpcf7_button.height,color:re.wpcf7_button.text_color,"font-size":re.wpcf7_button.font_size,"background-color":re.wpcf7_button.background_color,"border-color":re.wpcf7_button.border_color,"border-style":"solid","border-width":re.wpcf7_button.border_width,"border-radius":re.wpcf7_button.border_radius,"margin-top":re.wpcf7_button.margin_top,"margin-right":re.wpcf7_button.margin_right,"margin-bottom":re.wpcf7_button.margin_bottom,"margin-left":re.wpcf7_button.margin_left,"padding-top":re.wpcf7_button.padding_top,"padding-right":re.wpcf7_button.padding_right,"padding-bottom":re.wpcf7_button.padding_bottom,"padding-left":re.wpcf7_button.padding_left}),te.$button_preview.text(re.wpcf7_button.text),te.$button_preview.hover(function(){ee(this).css({color:re.wpcf7_button.text_color_hover,"background-color":re.wpcf7_button.background_color_hover,"border-color":re.wpcf7_button.border_color_hover})},function(){ee(this).css({color:re.wpcf7_button.text_color,"background-color":re.wpcf7_button.background_color,"border-color":re.wpcf7_button.border_color})}),te.$content_button_text.siblings("label, .prefix").removeClass("active"),te.$content_button_text.val(re.wpcf7_button.text),""!=te.$content_button_text.val()&&te.$content_button_text.siblings("label, .prefix").addClass("active"),te.$content_button_text_font_size.val(/[0-9]+/.exec(re.wpcf7_button.font_size)),te.$content_button_border_width.val(/[0-9]+/.exec(re.wpcf7_button.border_width)),te.$content_button_border_radius.siblings("label, .prefix").removeClass("active"),te.$content_button_border_radius.val(/[0-9]+/.exec(re.wpcf7_button.border_radius)),""!=te.$content_button_border_radius.val()&&te.$content_button_border_radius.siblings("label, .prefix").addClass("active"),te.$content_button_height.siblings("label, .prefix").removeClass("active"),te.$content_button_height.val(/[0-9]+/.exec(re.wpcf7_button.height)),""!=te.$content_button_height.val()&&te.$content_button_height.siblings("label, .prefix").addClass("active"),te.$content_button_width.siblings("label, .prefix").removeClass("active"),te.$content_button_width.val(/[0-9]+/.exec(re.wpcf7_button.width)),""!=te.$content_button_width.val()&&te.$content_button_width.siblings("label, .prefix").addClass("active"),te.$content_button_margin_top.val(/[0-9]+/.exec(re.wpcf7_button.margin_top)),te.$content_button_margin_right.val(/[0-9]+/.exec(re.wpcf7_button.margin_right)),te.$content_button_margin_bottom.val(/[0-9]+/.exec(re.wpcf7_button.margin_bottom)),te.$content_button_margin_left.val(/[0-9]+/.exec(re.wpcf7_button.margin_left)),te.$content_button_padding_top.val(/[0-9]+/.exec(re.wpcf7_button.padding_top)),te.$content_button_padding_right.val(/[0-9]+/.exec(re.wpcf7_button.padding_right)),te.$content_button_padding_bottom.val(/[0-9]+/.exec(re.wpcf7_button.padding_bottom)),te.$content_button_padding_left.val(/[0-9]+/.exec(re.wpcf7_button.padding_left)),te.$content_button_text_color_value.val(re.wpcf7_button.text_color),te.$content_button_text_color_preview.hide(),te.$content_button_text_color_value.spectrum("set",re.wpcf7_button.text_color),te.$content_preview_button_text_color_hover.css("background-color",re.wpcf7_button.text_color_hover),te.$content_button_text_color_hover_value.val(re.wpcf7_button.text_color_hover),te.$content_button_text_color_hover_preview.hide(),te.$content_button_text_color_hover_value.spectrum("set",re.wpcf7_button.text_color_hover),te.$content_preview_button_background_color.css("background-color",re.wpcf7_button.background_color),te.$content_button_background_color_value.val(re.wpcf7_button.background_color),te.$content_button_background_color_preview.hide(),te.$content_button_background_color_value.spectrum("set",re.wpcf7_button.background_color),te.$content_preview_button_background_color_hover.css("background-color",re.wpcf7_button.background_color_hover),te.$content_button_background_color_hover_value.val(re.wpcf7_button.background_color_hover),te.$content_button_background_color_hover_preview.hide(),te.$content_button_background_color_hover_value.spectrum("set",re.wpcf7_button.background_color_hover),te.$content_preview_button_border_color.css("border-color",re.wpcf7_button.border_color),te.$content_button_border_color_value.val(re.wpcf7_button.border_color),te.$content_button_border_color_preview.hide(),te.$content_button_border_color_value.spectrum("set",re.wpcf7_button.border_color),te.$content_preview_button_border_color_hover.css("border-color",re.wpcf7_button.border_color_hover),te.$content_button_border_color_hover_value.val(re.wpcf7_button.border_color_hover),te.$content_button_border_color_hover_preview.hide(),te.$content_button_border_color_hover_value.spectrum("set",re.wpcf7_button.border_color_hover)},me=function(){switch(re.wpcf7_required_field=te.$content_required_field.prop("checked"),re.wpcf7_email=te.$content_set_email.prop("checked"),re.wpcf7_only_numbers=te.$content_only_numbers.prop("checked"),re.wpcf7_default_check=te.$content_input_default_check.prop("checked"),re.wpcf7_placeholder=te.$content_placeholder.val(),re.input_width=te.$content_input_width.val(),te.$content_input_width_type.filter(":checked").val()){case"percentage":re.input_width=re.input_width+"%";break;case"pixel":re.input_width=re.input_width+"px"}re.input_height=te.$content_input_height.val()+"px",re.font_size=te.$content_input_font_size.val()+"px",re.label_text=a.getContent(),re.label_text=re.label_text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),re.text=n.getContent(),re.text=re.text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),re.wpcf7_file_max_dimensions=te.$content_file_max_dimensions.val();var e=te.$content_file_max_dimensions_unit.val(),t=(re.wpcf7_file_max_dimensions+=e,te.$field_list.find(".wpcf7-select-field"));re.wpcf7_list_fields=[];for(var o=0;o<t.length;o++)re.wpcf7_list_fields.push(t[o].value);re.wpcf7_button.text=te.$content_button_text.val(),re.wpcf7_button.font_size=te.$content_button_text_font_size.val()+"px",re.wpcf7_button.height=te.$content_button_height.val()+"px",re.wpcf7_button.width=te.$content_button_width.val()+"px",re.wpcf7_button.border_width=te.$content_button_border_width.val()+"px",re.wpcf7_button.border_radius=te.$content_button_border_radius.val()+"px",re.wpcf7_button.margin_top=te.$content_button_margin_top.val()+"px",re.wpcf7_button.margin_right=te.$content_button_margin_right.val()+"px",re.wpcf7_button.margin_bottom=te.$content_button_margin_bottom.val()+"px",re.wpcf7_button.margin_left=te.$content_button_margin_left.val()+"px",re.wpcf7_button.padding_top=te.$content_button_padding_top.val()+"px",re.wpcf7_button.padding_right=te.$content_button_padding_right.val()+"px",re.wpcf7_button.padding_bottom=te.$content_button_padding_bottom.val()+"px",re.wpcf7_button.padding_left=te.$content_button_padding_left.val()+"px"},ve=function(e){me();e={eventName:"rexlive:updateColumnContentLive",data_to_send:{target:re.target,content:re,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},fe=function(){te.$field_list.find(".wpcf7-select-field").on("keyup",function(e){for(var t=te.$field_list.find(".wpcf7-select-field"),o=[],n=0;n<t.length;n++)o.push(t[n].value);ve({type:"wpcf7-list",value:{fields:o,type:"writing"}})})};var ge=function(){te.$delete_list_field=te.$self.find(".rex-wpcf7-delete-list-field"),te.$delete_list_field.off("click"),te.$delete_list_field.on("click",e)},e=function(e){for(var e=ee(e.target).parents(".rexwpcf7-cont_row"),t=/[0-9]+/.exec(/field-[0-9]+/.exec(e.find("[type='text']")[0].classList))[0],o=(e.remove(),te.$field_list.find(".wpcf7-select-field")),n=0;n<o.length;n++){var r=/field\-[0-9]+/.exec(o[n].classList)[0];ee(o[n]).removeClass(r),ee(o[n]).addClass("field-"+(n+1))}ve({type:"wpcf7-list-remove",value:t})};return{init:function(){var t,o,n,r,a,i,P,l,d,j,c,s,F,u,p,L,m,v,z,f,g,b,h,x,$,w,k,y,C,M,R,S,D,I,N,E,e=ee("#rex-wpcf7-content-editor"),A=e.find(".rex-accordion"),B=e.find(".rexpansive-accordion-outer"),U=e,T=(B.rexAccordion({open:{},close:{},selectors:{self:".rexpansive-accordion-outer",toggle:".rex-accordion-outer--toggle",content:".rex-accordion-outer--content"}}),(te={$self:e,$modal:U.parent(".rex-modal-wrap"),$close_button:U.find(".rex-cancel-button"),$apply_changes_button:U.find(".rex-apply-button"),$reset_button:U.find(".rex-reset-button"),$button_preview:U.find("#rex-wpcf7-button-modal-preview"),$content_required_field:U.find("#wpcf7-required-field"),$content_only_numbers:U.find("#wpcf7-only-numbers"),$content_set_email:U.find("#wpcf7-set-email"),$content_placeholder:U.find("#wpcf7-placeholder"),$content_input_default_check:U.find("#wpcf7-default-check"),$content_input_label_editor:U.find("#wpcf7-label-text-editor"),$content_input_text_editor:U.find("#wpcf7-text-editor"),$content_file_max_dimensions:U.find("#wpcf7-file-max-dimensions"),$content_file_max_dimensions_unit:U.find("#wpcf7-file-max-dimensions-unit"),$field_list:U.find("#wpcf7-list-fields"),$add_list_field:U.find("#rex-wpcf7-add-list-field"),$delete_list_field:"",$content_input_width:U.find("#wpcf7-input-width"),$content_input_width_type:U.find(".wpcf7-input-width-type"),$content_input_height:U.find("#wpcf7-input-height"),$content_input_font_size:U.find("#wpcf7-set-font-size"),$content_preview_text:U.find("#rex-wpcf7-preview-text"),$content_text_color_value:U.find("#rex-wpcf7-text-color"),$content_text_color_runtime:U.find("#rex-wpcf7-text-color-runtime"),$content_text_color_preview:U.find("#rex-wpcf7-text-color-preview-icon"),$content_text_color_palette_buttons:e.find("#content-text-color-palette .bg-palette-selector"),$content_preview_text_focus:U.find("#rex-wpcf7-preview-focus"),$content_text_color_focus_value:U.find("#rex-wpcf7-focus-color"),$content_text_color_focus_runtime:U.find("#rex-wpcf7-focus-color-runtime"),$content_text_color_focus_preview:U.find("#rex-wpcf7-focus-color-preview-icon"),$content_text_color_focus_palette_buttons:e.find("#focus-text-color-palette .bg-palette-selector"),$content_preview_select:U.find("#rex-wpcf7-preview-select-text"),$content_select_color_value:U.find("#rex-wpcf7-select-text-color"),$content_select_color_runtime:U.find("#rex-wpcf7-select-text-color-runtime"),$content_select_color_preview:U.find("#rex-wpcf7-select-text-color-preview-icon"),$content_select_color_palette_buttons:e.find("#select-color-palette .bg-palette-selector"),$content_preview_select_after_selection:U.find("#rex-wpcf7-preview-select-text-after-selection"),$content_select_color_after_selection_value:U.find("#rex-wpcf7-select-text-color-after-selection"),$content_select_color_after_selection_runtime:U.find("#rex-wpcf7-select-text-color-after-selection-runtime"),$content_select_color_after_selection_preview:U.find("#rex-wpcf7-select-text-color-after-selection-preview-icon"),$content_select_color_after_selection_palette_buttons:e.find("#select-color-after-selection-palette .bg-palette-selector"),$content_preview_placeholder:U.find("#rex-wpcf7-preview-placeholder"),$content_placeholder_color_value:U.find("#rex-wpcf7-placeholder-color"),$content_placeholder_color_runtime:U.find("#rex-wpcf7-placeholder-color-runtime"),$content_placeholder_color_preview:U.find("#rex-wpcf7-placeholder-color-preview-icon"),$content_placeholder_color_palette_buttons:e.find("#placeholder-color-palette .bg-palette-selector"),$content_preview_placeholder_hover:U.find("#rex-wpcf7-preview-placeholder-hover"),$content_placeholder_hover_color_value:U.find("#rex-wpcf7-placeholder-hover-color"),$content_placeholder_hover_color_runtime:U.find("#rex-wpcf7-placeholder-hover-color-runtime"),$content_placeholder_hover_color_preview:U.find("#rex-wpcf7-placeholder-hover-color-preview-icon"),$content_placeholder_hover_color_palette_buttons:e.find("#hover-placeholder-color-palette .bg-palette-selector"),$content_button_text:U.find("#rex-wpcf7-button-text"),$content_button_text_font_size:U.find("#wpcf7-button-text-font-size"),$content_button_height:U.find("#wpcf7-button-height"),$content_button_width:U.find("#wpcf7-button-width"),$content_button_border_width:U.find("#wpcf7-button-border-width"),$content_button_border_radius:U.find("#wpcf7-button-border-radius"),$content_button_margin_top:U.find("#wpcf7-button-margin-top"),$content_button_margin_right:U.find("#wpcf7-button-margin-right"),$content_button_margin_bottom:U.find("#wpcf7-button-margin-bottom"),$content_button_margin_left:U.find("#wpcf7-button-margin-left"),$content_button_padding_top:U.find("#wpcf7-button-padding-top"),$content_button_padding_right:U.find("#wpcf7-button-padding-right"),$content_button_padding_bottom:U.find("#wpcf7-button-padding-bottom"),$content_button_padding_left:U.find("#wpcf7-button-padding-left"),$content_button_text_color_value:U.find("#rex-wpcf7-button-text-color"),$content_button_text_color_preview:U.find("#rex-wpcf7-button-text-color-preview-icon"),$content_preview_button_text_color_hover:U.find("#rex-wpcf7-preview-button-text-color-hover"),$content_button_text_color_hover_value:U.find("#rex-wpcf7-button-text-color-hover"),$content_button_text_color_hover_runtime:U.find("#rex-wpcf7-button-text-color-hover-runtime"),$content_button_text_color_hover_preview:U.find("#rex-wpcf7-button-text-color-hover-preview-icon"),$content_button_hover_text_color_palette_buttons:e.find("#button-hover-text-color-palette .bg-palette-selector"),$content_preview_button_background_color:U.find("#rex-wpcf7-preview-button-background-color"),$content_button_background_color_value:U.find("#rex-wpcf7-button-background-color"),$content_button_background_color_preview:U.find("#rex-wpcf7-button-background-color-preview-icon"),$content_preview_button_background_color_hover:U.find("#rex-wpcf7-preview-button-background-color-hover"),$content_button_background_color_hover_value:U.find("#rex-wpcf7-button-background-color-hover"),$content_button_background_color_hover_runtime:U.find("#rex-wpcf7-button-background-color-hover-runtime"),$content_button_background_color_hover_preview:U.find("#rex-wpcf7-button-background-color-hover-preview-icon"),$content_button_hover_background_color_palette_buttons:e.find("#button-hover-background-color-palette .bg-palette-selector"),$content_preview_button_border_color:U.find("#rex-wpcf7-preview-button-border-color"),$content_button_border_color_value:U.find("#rex-wpcf7-button-border-color"),$content_button_border_color_preview:U.find("#rex-wpcf7-button-border-color-preview-icon"),$content_preview_button_border_color_hover:U.find("#rex-wpcf7-preview-button-border-color-hover"),$content_button_border_color_hover_value:U.find("#rex-wpcf7-button-border-color-hover"),$content_button_border_color_hover_runtime:U.find("#rex-wpcf7-button-border-color-hover-runtime"),$content_button_border_color_hover_preview:U.find("#rex-wpcf7-button-border-color-hover-preview-icon"),$content_button_hover_border_color_palette_buttons:e.find("#button-hover-border-color-palette .bg-palette-selector")}).$field_list.sortable({revert:!0,handle:".rexwpcf7-sort",cursor:"pointer",update:function(){for(var e=te.$field_list.find(".wpcf7-select-field"),t=0;t<e.length;t++){var o=/field\-[0-9]+/.exec(e[t].classList)[0];ee(e[t]).removeClass(o),ee(e[t]).addClass("field-"+(t+1))}for(var n=[],t=0;t<e.length;t++)n.push(e[t].value);ve({type:"wpcf7-list",value:{fields:n,type:"sorting"}})}}),A.rexAccordion({open:{},close:{}}),te.$modal.click(function(e){ee(e.target).is(".rex-modal-wrap")&&(ne=!0)}),te.$close_button.on("click",function(){ne=!1,se()}),te.$reset_button.on("click",function(){ne=!1,re=jQuery.extend(!0,{},oe);var e=te.$content_required_field.prop("checked"),t=te.$content_set_email.prop("checked"),o=te.$content_only_numbers.prop("checked"),n=(pe(),ue(),e&&ve({type:"wpcf7-required",value:!1}),t&&ve({type:"wpcf7-email",value:!1}),o&&ve({type:"wpcf7-only-numbers",value:!1}),ve({type:"button-text",name:"button-text",value:re.wpcf7_button.text}),ve({type:"wpcf7-placeholder",value:re.wpcf7_placeholder}),ve({type:"wpcf7-label-text-editor",value:re.label_text}),ve({type:"wpcf7-text-editor",value:re.text}),te.$field_list.find(".wpcf7-select-field"));if(0!==n.length){for(var r=[],a=0;a<n.length;a++)r.push(n[a].value);ve({type:"wpcf7-list",value:{fields:r,type:"resetting"}})}}),te.$apply_changes_button.on("click",function(){ne=!_.isEqual(re,oe),se()}),te.$modal.on("rexlive:this_modal_closed",function(){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:clearFormOutlines"}),Rexbuilder_Util_Admin_Editor.searchFocusedElement();var e=te.$content_set_email.prop("checked"),t=te.$content_only_numbers.prop("checked"),o=(ne||(re=jQuery.extend(!0,{},oe),pe()),me(),ue(),re.wpcf7_required_field),n=re.wpcf7_email,r=re.wpcf7_only_numbers;ve({type:"wpcf7-required",value:o}),n?ve({type:"wpcf7-email",value:!0}):r?ve({type:"wpcf7-only-numbers",value:!0}):!n&&e?ve({type:"wpcf7-email",value:!1}):!r&&t&&ve({type:"wpcf7-only-numbers",value:!1}),ve({type:"button-text",name:"button-text",value:re.wpcf7_button.text}),ve({type:"wpcf7-placeholder",value:re.wpcf7_placeholder}),_e()}),te.$content_required_field.on("click",function(){var e=te.$content_required_field.prop("checked");ve({type:"wpcf7-required",value:e})}),te.$content_set_email.on("click",function(){var e=te.$content_set_email.prop("checked");e&&te.$content_only_numbers.prop("checked",!1),ve({type:"wpcf7-email",value:e})}),te.$content_only_numbers.on("click",function(){var e=te.$content_only_numbers.prop("checked");e&&te.$content_set_email.prop("checked",!1),ve({type:"wpcf7-only-numbers",value:e})}),te.$content_input_default_check.on("click",function(){var e=te.$content_input_default_check.prop("checked");ve({type:"wpcf7-default-check",value:e})}),te.$content_input_width_type.on("click",function(){var e=te.$content_input_width.val();switch(ee(this).val()){case"percentage":e+="%";break;case"pixel":e+="px"}ve({type:"width",name:"width",value:e})}),te.$content_text_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_text.hide(),te.$content_text_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_text_color_value.spectrum("set",t),te.$content_text_color_runtime.val(t),re.text_color=t,ve({type:"text-color",name:"text-color",value:t})}),te.$content_text_color_focus_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_text_focus.hide(),te.$content_text_color_focus_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_text_color_focus_value.spectrum("set",t),te.$content_text_color_focus_runtime.val(t),re.text_color_focus=t,ve({type:"text-focus",name:"text-color",value:t})}),te.$content_select_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_select.hide(),te.$content_select_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_select_color_value.spectrum("set",t),te.$content_select_color_runtime.val(t),re.text_color=t,ve({type:"text-color",name:"text-color",value:t})}),te.$content_select_color_after_selection_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_select_after_selection.hide(),te.$content_select_color_after_selection_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_select_color_after_selection_value.spectrum("set",t),te.$content_select_color_after_selection_runtime.val(t),re.select_color_after_selection=t,ve({type:"select-color",name:"text-color",value:t})}),te.$content_placeholder_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_placeholder.hide(),te.$content_placeholder_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_placeholder_color_value.spectrum("set",t),te.$content_placeholder_color_runtime.val(t),re.placeholder_color=t,ve({type:"placeholder-color",name:"text-color",value:t})}),te.$content_placeholder_hover_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_placeholder_hover.hide(),te.$content_placeholder_hover_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_placeholder_hover_color_value.spectrum("set",t),te.$content_placeholder_hover_color_runtime.val(t),re.placeholder_hover_color=t,ve({type:"placeholder-color-hover",name:"text-color",value:t})}),te.$content_button_hover_text_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_button_text_color_hover.hide(),te.$content_button_hover_text_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_button_text_color_hover_value.spectrum("set",t),te.$content_button_text_color_hover_runtime.val(t),re.wpcf7_button.text_color_hover=t,ve({type:"button-text-color-hover",name:"text-color",value:t}),te.$button_preview.hover(function(){ee(this).css({color:t})},function(){ee(this).css({color:re.wpcf7_button.text_color})})}),te.$content_button_hover_background_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_button_background_color_hover.hide(),te.$content_button_hover_background_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_button_background_color_hover_value.spectrum("set",t),te.$content_button_background_color_hover_runtime.val(t),re.wpcf7_button.background_color_hover=t,ve({type:"button-background-color-hover",name:"background-color",value:t}),te.$button_preview.hover(function(){ee(this).css({"background-color":t})},function(){ee(this).css({"background-color":re.wpcf7_button.background_color})})}),te.$content_button_hover_border_color_palette_buttons.on("click",function(e){var t=ee(e.currentTarget).find(".bg-palette-value").val();ee(e.currentTarget).addClass("palette-color-active"),te.$content_preview_button_border_color_hover.hide(),te.$content_button_hover_border_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),te.$content_button_border_color_hover_value.spectrum("set",t),te.$content_button_border_color_hover_runtime.val(t),re.wpcf7_button.border_color_hover=t,ve({type:"button-border-color-hover",name:"border-color",value:t}),te.$button_preview.hover(function(){ee(this).css({"border-color":t})},function(){ee(this).css({"border-color":re.wpcf7_button.border_color})})}),te.$add_list_field.on("click",function(){var e=parseInt(te.$field_list.find(".wpcf7-select-field").length)+1;tmpl.arg="o",te.$field_list.append(tmpl("tmpl-rex-wpcf7-edit-content-list",{number:e})),ve({type:"wpcf7-list-add"}),fe(),ge()}),fe(),te.$content_placeholder.on("keyup",function(e){ve({type:"wpcf7-placeholder",value:te.$content_placeholder.val()})}),te.$content_button_text.on("keyup",function(e){var t=te.$content_button_text.val();ve({type:"button-text",name:"button-text",value:t}),te.$button_preview.text(t)}),"");function O(e){t=e.toRgbString(),te.$content_text_color_preview.hide(),te.$content_preview_text.css("background-color",t),ve({type:"text-color",name:"text-color",value:t})}function V(e){r=e.toRgbString(),te.$content_text_color_focus_preview.hide(),te.$content_preview_text_focus.css("background-color",r),ve({type:"text-focus",name:"text-color",value:r})}function W(e){P=e.toRgbString(),te.$content_select_color_preview.hide(),te.$content_preview_select.css("background-color",P),ve({type:"text-color",name:"text-color",value:P})}function Q(e){j=e.toRgbString(),te.$content_select_color_after_selection_preview.hide(),te.$content_preview_select_after_selection.css("background-color",j),ve({type:"select-color",name:"text-color",value:j})}function G(e){F=e.toRgbString(),te.$content_placeholder_color_preview.hide(),te.$content_preview_placeholder.css("background-color",F),ve({type:"placeholder-color",name:"text-color",value:F})}function q(e){L=e.toRgbString(),te.$content_placeholder_hover_color_preview.hide(),te.$content_preview_placeholder_hover.css("background-color",L),ve({type:"placeholder-color-hover",name:"text-color",value:L})}function Y(e){z=e.toRgbString(),te.$content_button_text_color_preview.hide(),ve({type:"button-text-color",name:"text-color",value:z}),te.$button_preview.css({color:z})}function H(e){b=e.toRgbString(),te.$content_button_text_color_hover_preview.hide(),te.$content_preview_button_text_color_hover.css("background-color",b),ve({type:"button-text-color-hover",name:"text-color",value:b}),te.$button_preview.hover(function(){ee(this).css({color:b})},function(){ee(this).css({color:re.wpcf7_button.text_color})})}function J(e){$=e.toRgbString(),te.$content_button_background_color_preview.hide(),te.$content_preview_button_background_color.css("background-color",$),ve({type:"button-background-color",name:"background-color",value:$}),te.$button_preview.css({"background-color":$})}function K(e){y=e.toRgbString(),te.$content_button_background_color_hover_preview.hide(),te.$content_preview_button_background_color_hover.css("background-color",y),ve({type:"button-background-color-hover",name:"background-color",value:y}),te.$button_preview.hover(function(){ee(this).css({"background-color":y})},function(){ee(this).css({"background-color":re.wpcf7_button.background_color})})}function X(e){R=e.toRgbString(),te.$content_button_border_color_preview.hide(),te.$content_preview_button_border_color.css("border-color",R),ve({type:"button-border-color",name:"border-color",value:R}),te.$button_preview.css({"border-color":R})}function Z(e){I=e.toRgbString(),te.$content_button_border_color_hover_preview.hide(),te.$content_preview_button_border_color_hover.css("border-color",I),ve({type:"button-border-color-hover",name:"border-color",value:I}),te.$button_preview.hover(function(){ee(this).css({"border-color":I})},function(){ee(this).css({"border-color":re.wpcf7_button.border_color})})}de(te.$content_input_font_size,!1),ce(te.$content_input_font_size,function(e){T=isNaN(parseInt(e))?ae.font_size:e+"px",ve({type:"font-size",name:"font-size",value:T})},!1),de(te.$content_input_width,!1),ce(te.$content_input_width,function(e){switch(te.$content_input_width_type.filter(":checked").val()){case"percentage":T=e+"%";break;case"pixel":T=e+"px"}ve({type:"width",name:"width",value:T})},!1),de(te.$content_input_height,!1),ce(te.$content_input_height,function(e){ve({type:"height",name:"height",value:T=e+"px"})},!1),de(te.$content_button_text_font_size,!1),ce(te.$content_button_text_font_size,function(e){ve({type:"button-font-size",name:"font-size",value:T=e+"px"}),te.$button_preview.css({"font-size":T})},!1),de(te.$content_button_height,!1),ce(te.$content_button_height,function(e){ve({type:"button-height",name:"height",value:T=e+"px"}),te.$button_preview.css({height:T})},!1),de(te.$content_button_width,!1),ce(te.$content_button_width,function(e){ve({type:"button-width",name:"width",value:T=e+"px"}),te.$button_preview.css({width:T})},!1),de(te.$content_button_border_width,!1),ce(te.$content_button_border_width,function(e){ve({type:"button-border-width",name:"border-width",value:T=e+"px"}),te.$button_preview.css({"border-width":T})},!1),de(te.$content_button_border_radius,!1),ce(te.$content_button_border_radius,function(e){ve({type:"button-border-radius",name:"border-radius",value:T=e+"px"}),te.$button_preview.css({"border-radius":T})},!1),de(te.$content_button_margin_top,!1),ce(te.$content_button_margin_top,function(e){ve({type:"button-margin-top",name:"margin-top",value:T=e+"px"}),te.$button_preview.css({"margin-top":T})},!1),de(te.$content_button_margin_right,!1),ce(te.$content_button_margin_right,function(e){ve({type:"button-margin-right",name:"margin-right",value:T=e+"px"}),te.$button_preview.css({"margin-right":T})},!1),de(te.$content_button_margin_bottom,!1),ce(te.$content_button_margin_bottom,function(e){ve({type:"button-margin-bottom",name:"margin-bottom",value:T=e+"px"}),te.$button_preview.css({"margin-bottom":T})},!1),de(te.$content_button_margin_left,!1),ce(te.$content_button_margin_left,function(e){ve({type:"button-margin-left",name:"margin-left",value:T=e+"px"}),te.$button_preview.css({"margin-left":T})},!1),de(te.$content_button_padding_top,!1),ce(te.$content_button_padding_top,function(e){ve({type:"button-padding-top",name:"padding-top",value:T=e+"px"}),te.$button_preview.css({"padding-top":T})},!1),de(te.$content_button_padding_right,!1),ce(te.$content_button_padding_right,function(e){ve({type:"button-padding-right",name:"padding-right",value:T=e+"px"}),te.$button_preview.css({"padding-right":T})},!1),de(te.$content_button_padding_bottom,!1),ce(te.$content_button_padding_bottom,function(e){ve({type:"button-padding-bottom",name:"padding-bottom",value:T=e+"px"}),te.$button_preview.css({"padding-bottom":T})},!1),de(te.$content_button_padding_left,!1),ce(te.$content_button_padding_left,function(e){ve({type:"button-padding-left",name:"padding-left",value:T=e+"px"}),te.$button_preview.css({"padding-left":T})},!1),(n=te.$content_text_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){o=e},move:O,hide:function(e){re.text_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),n.spectrum("container").append(B),n.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),n.spectrum("hide"),O(o)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),n.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),O(o)}),te.$content_text_color_preview.on("click",function(){return n.spectrum("show"),!1}),(i=te.$content_text_color_focus_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){a=e},move:V,hide:function(e){re.text_color_focus=e.toRgbString()}}),e=ie.clone(),A=le.clone(),i.spectrum("container").append(e),i.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),i.spectrum("hide"),V(a)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),i.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),V(a)}),te.$content_text_color_focus_preview.on("click",function(){return i.spectrum("show"),!1}),(d=te.$content_select_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){l=e},move:W,hide:function(e){re.text_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),d.spectrum("container").append(B),d.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),d.spectrum("set",l.toRgbString()),d.spectrum("hide"),W(l)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),d.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),d.spectrum("set",l.toRgbString()),W(l)}),te.$content_select_color_preview.on("click",function(){return d.spectrum("show"),!1}),(s=te.$content_select_color_after_selection_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){c=e},move:Q,hide:function(e){re.select_color_after_selection=e.toRgbString()}}),e=ie.clone(),A=le.clone(),s.spectrum("container").append(e),s.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),s.spectrum("set",c.toRgbString()),s.spectrum("hide"),Q(c)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),s.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),s.spectrum("set",c.toRgbString()),Q(c)}),te.$content_select_color_after_selection_preview.on("click",function(){return s.spectrum("show"),!1}),(p=te.$content_placeholder_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){u=e},move:G,hide:function(e){re.placeholder_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),p.spectrum("container").append(B),p.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),p.spectrum("set",u.toRgbString()),p.spectrum("hide"),G(u)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),p.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),p.spectrum("set",u.toRgbString()),G(u)}),te.$content_placeholder_color_preview.on("click",function(){return p.spectrum("show"),!1}),(v=te.$content_placeholder_hover_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){m=e},move:q,hide:function(e){re.placeholder_hover_color=e.toRgbString()}}),e=ie.clone(),A=le.clone(),v.spectrum("container").append(e),v.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),v.spectrum("set",m.toRgbString()),v.spectrum("hide"),q(m)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),v.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),v.spectrum("set",m.toRgbString()),q(m)}),te.$content_placeholder_hover_color_preview.on("click",function(){return v.spectrum("show"),!1}),(g=te.$content_button_text_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){f=e},move:Y,hide:function(e){re.wpcf7_button.text_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),g.spectrum("container").append(B),g.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),g.spectrum("set",f.toRgbString()),g.spectrum("hide"),Y(f)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),g.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),g.spectrum("set",f.toRgbString()),Y(f)}),te.$content_button_text_color_preview.on("click",function(){return g.spectrum("show"),!1}),(x=te.$content_button_text_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){h=e},move:H,hide:function(e){re.wpcf7_button.text_color_hover=e.toRgbString()}}),e=ie.clone(),A=le.clone(),x.spectrum("container").append(e),x.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),x.spectrum("set",h.toRgbString()),x.spectrum("hide"),H(h)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),x.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),x.spectrum("set",h.toRgbString()),H(h)}),te.$content_button_text_color_hover_preview.on("click",function(){return x.spectrum("show"),!1}),(k=te.$content_button_background_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){w=e},move:J,hide:function(e){re.wpcf7_button.background_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),k.spectrum("container").append(B),k.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),k.spectrum("set",w.toRgbString()),k.spectrum("hide"),J(w)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),k.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),k.spectrum("set",w.toRgbString()),J(w)}),te.$content_button_background_color_preview.on("click",function(){return k.spectrum("show"),!1}),(M=te.$content_button_background_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){C=e},move:K,hide:function(e){re.wpcf7_button.background_color_hover=e.toRgbString()}}),e=ie.clone(),A=le.clone(),M.spectrum("container").append(e),M.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),M.spectrum("set",C.toRgbString()),M.spectrum("hide"),K(C)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),M.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),M.spectrum("set",C.toRgbString()),K(C)}),te.$content_button_background_color_hover_preview.on("click",function(){return M.spectrum("show"),!1}),(D=te.$content_button_border_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){S=e},move:X,hide:function(e){re.wpcf7_button.border_color=e.toRgbString()}}),B=ie.clone(),U=le.clone(),D.spectrum("container").append(B),D.spectrum("container").append(U),B.on("click",function(e){e.preventDefault(),D.spectrum("set",S.toRgbString()),D.spectrum("hide"),X(S)}),U.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),D.spectrum("hide")}),U.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),D.spectrum("set",S.toRgbString()),X(S)}),te.$content_button_border_color_preview.on("click",function(){return D.spectrum("show"),!1}),(E=te.$content_button_border_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){N=e},move:Z,hide:function(e){re.wpcf7_button.border_color_hover=e.toRgbString()}}),e=ie.clone(),A=le.clone(),E.spectrum("container").append(e),E.spectrum("container").append(A),e.on("click",function(e){e.preventDefault(),E.spectrum("set",N.toRgbString()),E.spectrum("hide"),Z(N)}),A.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),E.spectrum("hide")}),A.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),E.spectrum("set",N.toRgbString()),Z(N)}),te.$content_button_border_color_hover_preview.on("click",function(){return E.spectrum("show"),!1})},setupTMCEEditors:function(){var e=["keyup","change"];function t(e){ve({type:"wpcf7-text-editor",value:"tmce"===e?n.getContent():r.value}),"tmce"===e?r.value=n.getContent():n.setContent(r.value)}function o(e){ve({type:"wpcf7-label-text-editor",value:"tmce"===e?a.getContent():i.value}),"tmce"===e?i.value=a.getContent():a.setContent(i.value)}n=tinyMCE.get("wpcf7_text_editor"),r=document.getElementById("wpcf7_text_editor"),n.on("NodeChange keyup",t.bind(null,"tmce")),e.forEach(function(e){r.addEventListener(e,t.bind(null,"dom"))}),a=tinyMCE.get("wpcf7_label_editor"),i=document.getElementById("wpcf7_label_editor"),a.on("NodeChange keyup",o.bind(null,"tmce")),e.forEach(function(e){i.addEventListener(e,o.bind(null,"dom"))})},openColumnContentEditorModal:function(e){re=jQuery.extend(!0,{},e.columnContentData),e.columnContentData.target;var t,e=re.input_type,o=(t=re,l(),d(t),pe(),te.$self.find(".bl_modal-row").not(".row-hidden").addClass("row-hidden"),te.$self.find(".bl_modal__option-wrap").not(".row-hidden").addClass("row-hidden"),te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("no-br"),te.$content_input_font_size.parents("#rex-wpcf7-font-size-field").detach());switch(te.$button_preview.parents(".rex-accordion-outer--content").css("display","none"),te.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","visible"),te.$button_preview.css({display:"","font-weight":"","justify-content":"","text-transform":"","text-align":"","align-items":""}),e){case"text":case"email":case"number":te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_set_email.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_only_numbers.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_label_editor.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"textarea":te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),te.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_label_editor.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"select":te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),te.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_select_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_select_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_select_color_after_selection_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$field_list.removeClass("row-hidden"),te.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden");break;case"radio":te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","hidden"),te.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$field_list.removeClass("row-hidden"),te.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden");break;case"acceptance":te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").appendTo(te.$content_input_width_type.parents(".bl_modal-row")),te.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_default_check.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","hidden"),te.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_text_editor.parents(".bl_modal-row").removeClass("row-hidden");break;case"file":"open"===te.$button_preview.parents(".rex-accordion-outer--content").attr("data-item-status")&&te.$button_preview.parents(".rex-accordion-outer--content").css("display",""),te.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),te.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),te.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_text_color_value.parents(".rexwpcf7-cont_row").append(o),te.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_input_text_editor.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_file_max_dimensions.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_file_max_dimensions_unit.parents(".bl_modal-row").removeClass("row-hidden"),te.$field_list.removeClass("row-hidden"),te.$field_list.addClass("rex-wpcf7-file-list"),te.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden"),te.$button_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$button_preview.css({display:"block","text-align":"left","text-transform":"none"}),te.$self.find(".accotdion-button-title").parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_background_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_border_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_text_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_background_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_border_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_margin_top.parents(".bl_modal-row").removeClass("row-hidden");break;case"submit":te.$button_preview.parents(".rex-accordion-outer--content").css("display",""),te.$button_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$button_preview.css({display:"flex","font-weight":700,"justify-content":"center","text-transform":"uppercase","align-items":"center"}),te.$content_button_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_background_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_border_color_value.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_text_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_background_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_border_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),te.$content_button_margin_top.parents(".bl_modal-row").removeClass("row-hidden")}Rexlive_Modals_Utils.openModal(te.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-content"])}}}(jQuery),Wpcf7_Edit_Form_Modal=function(Q){"use strict";var G,q,t,o,n,r,Y=Q(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-close")),H=Q(Rexbuilder_Admin_Templates.getParsedTemplate("tmpl-tool-save")),e=function(){var e=q.element_target.element_id;n.recipient=G.$form_mail_to.val(),r.validation_error=G.$form_error_message.val(),r.mail_sent_ok=G.$form_send_message.val(),Q.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_wpcf7_save_mail_settings",nonce_param:live_editor_obj.rexnonce,form_id:e,new_mail_settings:n,new_messages:r},success:function(e){},error:function(e){}})},J=function(e,o){o=void 0!==o&&"true"==o.toString(),e.keydown(function(e){var t=Q(e.target);-1!==Q.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40||"-"==e.key?(o||"-"!=e.key||e.preventDefault(),38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),o?t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val()-1)):t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},K=function(e,t,o){o=void 0!==o&&"true"==o.toString(),e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),!o&&"-"==e.key||t.call(this,parseInt(e.target.value)))})},a=function(){Rexlive_Modals_Utils.closeModal(G.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-form"])},i=function(){var e={eventName:"rexlive:update_wcpf7_page",data_to_send:{reverseFormData:jQuery.extend(!0,{},t),actionFormData:jQuery.extend(!0,{},q),needToSave:u}};t=jQuery.extend(!0,{},e.data_to_send.actionFormData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},l=function(){q={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}}},d=function(e){q=jQuery.extend(!0,{},e),t=jQuery.extend(!0,{},q),o=jQuery.extend(!0,{},q)},c=function(){q.element_target.is_separated&&G.$self.find("#rex-wpcf7-create-template").removeClass("bl_modal-row--hidden"),q.element_target.form_title&&(G.$form_create_template_text.val(q.element_target.form_title),G.$form_create_template_text.siblings("label").addClass("active")),""!=G.$form_mail_to.val()&&G.$form_mail_to.siblings("label, .prefix").addClass("active"),G.$input_preview.css({color:q.wpcf7_data.content.text_color,"font-size":q.wpcf7_data.content.font_size,"background-color":q.wpcf7_data.content.background_color,"border-color":q.wpcf7_data.content.border_color,"border-width":q.wpcf7_data.content.border_width,"border-radius":q.wpcf7_data.content.border_radius}),G.$input_preview.hover(function(){Q(this).css({color:q.wpcf7_data.content.text_color_hover,"background-color":q.wpcf7_data.content.background_color_hover,"border-color":q.wpcf7_data.content.border_color_hover})},function(){Q(this).css({color:q.wpcf7_data.content.text_color,"background-color":q.wpcf7_data.content.background_color,"border-color":q.wpcf7_data.content.border_color})}),G.$form_preview_background.css("background-color",q.wpcf7_data.background_color),G.$form_background_color_value.val(q.wpcf7_data.background_color),G.$form_background_color_preview.hide(),G.$form_background_color_value.spectrum("set",q.wpcf7_data.background_color),G.$form_preview_border_color.css("background-color",q.wpcf7_data.border_color),G.$form_border_color_value.val(q.wpcf7_data.border_color),G.$form_border_color_preview.hide(),G.$form_border_color_value.spectrum("set",q.wpcf7_data.border_color),G.$form_border_width.val(/[0-9]+/.exec(q.wpcf7_data.border_width)),G.$form_margin_top.val(/[0-9]+/.exec(q.wpcf7_data.margin_top)),G.$form_margin_left.val(/[0-9]+/.exec(q.wpcf7_data.margin_left)),G.$form_margin_right.val(/[0-9]+/.exec(q.wpcf7_data.margin_right)),G.$form_margin_bottom.val(/[0-9]+/.exec(q.wpcf7_data.margin_bottom)),G.$form_columns_padding_top.val(/[0-9]+/.exec(q.wpcf7_data.columns.padding_top)),G.$form_columns_padding_left.val(/[0-9]+/.exec(q.wpcf7_data.columns.padding_left)),G.$form_columns_padding_right.val(/[0-9]+/.exec(q.wpcf7_data.columns.padding_right)),G.$form_columns_padding_bottom.val(/[0-9]+/.exec(q.wpcf7_data.columns.padding_bottom)),G.$form_error_message_color_value.val(q.wpcf7_data.error_message_color),G.$form_error_message_color_preview.hide(),G.$form_error_message_color_value.spectrum("set",q.wpcf7_data.error_message_color),G.$form_error_message_font_size.val(/[0-9]+/.exec(q.wpcf7_data.error_message_font_size)),""!=G.$form_error_message.val()&&G.$form_error_message.siblings("label, .prefix").addClass("active"),G.$form_send_message_color_value.val(q.wpcf7_data.send_message_color),G.$form_send_message_color_preview.hide(),G.$form_send_message_color_value.spectrum("set",q.wpcf7_data.send_message_color),G.$form_send_message_font_size.val(/[0-9]+/.exec(q.wpcf7_data.send_message_font_size)),""!=G.$form_send_message.val()&&G.$form_send_message.siblings("label, .prefix").addClass("active"),q.wpcf7_data.options_different.width?(G.$content_width.val(""),G.$content_width.attr("placeholder",/[0-9]+/.exec(q.wpcf7_data.content.width))):(G.$content_width.val(/[0-9]+/.exec(q.wpcf7_data.content.width)),("px"===(null!=/[a-z]{2}|\%/.exec(q.wpcf7_data.content.width)?/[a-z]{2}|\%/.exec(q.wpcf7_data.content.width)[0]:"%")?G.$content_width_type.filter("[value=pixel]"):G.$content_width_type.filter("[value=percentage]")).prop("checked",!0),""!=G.$content_width.val()&&G.$content_width.siblings("label, .prefix").addClass("active")),q.wpcf7_data.options_different.height?(G.$content_height.val(""),G.$content_height.attr("placeholder",/[0-9]+/.exec(q.wpcf7_data.content.height))):(G.$content_height.val(/[0-9]+/.exec(q.wpcf7_data.content.height)),""!=G.$content_height.val()&&G.$content_height.siblings("label, .prefix").addClass("active")),q.wpcf7_data.options_different.font_size?(G.$content_set_font_size.val(""),G.$content_set_font_size.attr("placeholder",/[0-9]+/.exec(q.wpcf7_data.content.font_size))):G.$content_set_font_size.val(/[0-9]+/.exec(q.wpcf7_data.content.font_size)),G.$content_set_border_width.val(/[0-9]+/.exec(q.wpcf7_data.content.border_width)),G.$content_set_border_radius.val(/[0-9]+/.exec(q.wpcf7_data.content.border_radius)),q.wpcf7_data.options_different.text_color&&(G.$content_text_color_value.parent().prepend(tmpl("tmpl-color-picker-overlay",{})),G.$color_picker_overlay=G.$self.find(".wpcf7-modal-color-picker-overlay"),G.$color_picker_overlay.on("click",function(){G.$color_picker_overlay.remove()})),G.$content_text_color_value.val(q.wpcf7_data.content.text_color),G.$content_text_color_preview.hide(),G.$content_text_color_value.spectrum("set",q.wpcf7_data.content.text_color),G.$content_text_color_hover_value.val(q.wpcf7_data.content.text_color_hover),G.$content_text_color_hover_preview.hide(),G.$content_text_color_hover_value.spectrum("set",q.wpcf7_data.content.text_color_hover),G.$content_preview_background_color.css("background-color",q.wpcf7_data.content.background_color),G.$content_background_color_value.val(q.wpcf7_data.content.background_color),G.$content_background_color_preview.hide(),G.$content_background_color_value.spectrum("set",q.wpcf7_data.content.background_color),G.$content_preview_background_color_hover.css("background-color",q.wpcf7_data.content.background_color_hover),G.$content_background_color_hover_value.val(q.wpcf7_data.content.background_color_hover),G.$content_background_color_hover_preview.hide(),G.$content_background_color_hover_value.spectrum("set",q.wpcf7_data.content.background_color_hover),G.$content_preview_border_color.css("background-color",q.wpcf7_data.content.border_color),G.$content_border_color_value.val(q.wpcf7_data.content.border_color),G.$content_border_color_preview.hide(),G.$content_border_color_value.spectrum("set",q.wpcf7_data.content.border_color),G.$content_preview_border_color_hover.css("background-color",q.wpcf7_data.content.border_color_hover),G.$content_border_color_value.val(q.wpcf7_data.content.border_color_hover),G.$content_border_color_hover_preview.hide(),G.$content_border_color_hover_value.spectrum("set",q.wpcf7_data.content.border_color_hover)},s=function(){switch(q.wpcf7_data.border_width=G.$form_border_width.val()+"px",q.wpcf7_data.margin_top=G.$form_margin_top.val()+"px",q.wpcf7_data.margin_left=G.$form_margin_left.val()+"px",q.wpcf7_data.margin_right=G.$form_margin_right.val()+"px",q.wpcf7_data.margin_bottom=G.$form_margin_bottom.val()+"px",q.wpcf7_data.columns.padding_top=G.$form_columns_padding_top.val()+"px",q.wpcf7_data.columns.padding_left=G.$form_columns_padding_left.val()+"px",q.wpcf7_data.columns.padding_right=G.$form_columns_padding_right.val()+"px",q.wpcf7_data.columns.padding_bottom=G.$form_columns_padding_bottom.val()+"px",q.wpcf7_data.error_message_font_size=G.$form_error_message_font_size.val()+"px",q.wpcf7_data.send_message_font_size=G.$form_send_message_font_size.val()+"px",q.wpcf7_data.content.width=G.$content_width.val(),""==q.wpcf7_data.content.width&&(q.wpcf7_data.content.width=G.$content_width.attr("placeholder")),G.$content_width_type.filter(":checked").val()){case"percentage":q.wpcf7_data.content.width=q.wpcf7_data.content.width+"%";break;case"pixel":q.wpcf7_data.content.width=q.wpcf7_data.content.width+"px"}var e=G.$content_height.val();""===e&&(e=G.$content_height.attr("placeholder")),q.wpcf7_data.content.height=e+"px",q.wpcf7_data.content.font_size=G.$content_set_font_size.val()+"px","px"==q.wpcf7_data.content.font_size&&(q.wpcf7_data.content.font_size=G.$content_set_font_size.attr("placeholder")+"px"),q.wpcf7_data.content.border_width=G.$content_set_border_width.val()+"px",q.wpcf7_data.content.border_radius=G.$content_set_border_radius.val()+"px"},X=function(e){s();e={eventName:"rexlive:updateFormLive",data_to_send:{element_target:q.element_target,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},Z=function(e){s();e={eventName:"rexlive:updateFormContentLive",data_to_send:{element_target:q.element_target,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)};function ee(){G.$modal.click(function(e){Q(e.target).is(".rex-modal-wrap")&&(u=!0)}),G.$close_button.on("click",function(){u=!1,a()}),G.$reset_button.on("click",function(){u=!1;var e=q.element_target.is_separated;(q=jQuery.extend(!0,{},o)).element_target.is_separated=e,c(),i()}),G.$apply_changes_button.on("click",function(){u=!_.isEqual(q,o),a()}),G.$modal.on("rexlive:this_modal_closed",function(){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:clearFormOutlines"}),Rexbuilder_Util_Admin_Editor.searchFocusedElement(),u||(q=jQuery.extend(!0,{},o),c()),e(),s(),i()}),G.$form_create_template_button.on("click",function(e){e.preventDefault();var t=G.$form_create_template_text.val();Q.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_wpcf7_unseparate_form",nonce_param:live_editor_obj.rexnonce,formID:q.element_target.element_id,newName:t},beforeSend:function(){G.$self.addClass("rex-modal--loading")},success:function(e){e.success&&(q.element_target.is_separated=!1,Form_Import_Modal.updateList(),G.$self.find("#rex-wpcf7-create-template").addClass("bl_modal-row--hidden"),e=t,e={eventName:"rexlive:remove_separate_form",data_to_send:{formTarget:q.element_target,newName:t}},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e))},complete:function(){G.$self.removeClass("rex-modal--loading")}})}),G.$content_width_type.on("click",function(){var e=G.$content_width.val();switch(Q(this).val()){case"percentage":e+="%";break;case"pixel":e+="px"}Z({type:"width",name:"width",value:e})}),G.$content_text_color_palette_buttons.on("click",function(e){var t=Q(e.currentTarget).find(".bg-palette-value").val();Q(e.currentTarget).addClass("palette-color-active"),G.$content_preview_text_color.hide(),G.$content_text_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),G.$content_text_color_value.spectrum("set",t),G.$content_text_color_runtime.val(t),q.wpcf7_data.content.text_color=t,Z({type:"text-color",name:"text-color",value:t}),G.$input_preview.css({color:t}),q.wpcf7_data.options_different.text_color=!1,void 0!==G.$color_picker_overlay&&G.$color_picker_overlay.remove()}),G.$content_hover_text_color_palette_buttons.on("click",function(e){var t=Q(e.currentTarget).find(".bg-palette-value").val();Q(e.currentTarget).addClass("palette-color-active"),G.$content_preview_text_color_hover.hide(),G.$content_hover_text_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),G.$content_text_color_hover_value.spectrum("set",t),G.$content_text_color_hover_runtime.val(t),q.wpcf7_data.content.text_color_hover=t,Z({type:"text-color-hover",name:"text-color",value:t}),G.$input_preview.hover(function(){Q(this).css({color:t})},function(){Q(this).css({color:q.wpcf7_data.content.text_color})})}),G.$content_background_color_palette_buttons.on("click",function(e){var t=Q(e.currentTarget).find(".bg-palette-value").val();Q(e.currentTarget).addClass("palette-color-active"),G.$content_preview_background_color.hide(),G.$content_background_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),G.$content_background_color_value.spectrum("set",t),G.$content_background_color_runtime.val(t),q.wpcf7_data.content.background_color=t,Z({type:"background-color",name:"background-color",value:t}),G.$input_preview.css({"background-color":t})}),G.$content_hover_background_color_palette_buttons.on("click",function(e){var t=Q(e.currentTarget).find(".bg-palette-value").val();Q(e.currentTarget).addClass("palette-color-active"),G.$content_preview_background_color_hover.hide(),G.$content_hover_background_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),G.$content_background_color_hover_value.spectrum("set",t),G.$content_background_color_hover_runtime.val(t),q.wpcf7_data.content.background_color_hover=t,Z({type:"background-color-hover",name:"background-color",value:t}),G.$input_preview.hover(function(){Q(this).css({"background-color":t})},function(){Q(this).css({"background-color":q.wpcf7_data.content.background_color})})}),G.$content_hover_border_color_palette_buttons.on("click",function(e){var t=Q(e.currentTarget).find(".bg-palette-value").val();Q(e.currentTarget).addClass("palette-color-active"),G.$content_preview_border_color_hover.hide(),G.$content_hover_border_color_palette_buttons.not(e.currentTarget).removeClass("palette-color-active"),G.$content_border_color_hover_value.spectrum("set",t),G.$content_border_color_hover_runtime.val(t),q.wpcf7_data.content.border_color_hover=t,Z({type:"border-color-hover",name:"border-color",value:t}),G.$input_preview.hover(function(){Q(this).css({"border-color":t})},function(){Q(this).css({"border-color":q.wpcf7_data.content.border_color})})})}var u=!1;return{init:function(){var t,o,n,r,a,i,l,d,c,s,_,u,p,m,v,f,g,b,h,x,$,w,k,y,T,C,M,P,R,S,e=Q("#rex-wpcf7-form-editor"),D=e.find(".rexpansive-accordion-outer"),I=e.find(".rex-accordion"),N=e,E=(D.rexAccordion({open:{},close:{},selectors:{self:".rexpansive-accordion-outer",toggle:".rex-accordion-outer--toggle",content:".rex-accordion-outer--content"}}),I.rexAccordion({open:{},close:{}}),G={$self:e,$modal:N.parent(".rex-modal-wrap"),$close_button:N.find(".rex-cancel-button"),$apply_changes_button:N.find(".rex-apply-button"),$reset_button:N.find(".rex-reset-button"),$input_preview:N.find(".rex-wpcf7-text-modal-preview"),$form_mail_to:N.find("#rex-wpcf7-mail-to"),$form_error_message:N.find("#rex-wpcf7-error-message"),$form_send_message:N.find("#rex-wpcf7-send-message"),$form_preview_background:N.find("#rex-wpcf7-preview-background"),$form_background_color_value:N.find("#rex-wpcf7-background-color"),$form_background_color_runtime:N.find("#rex-wpcf7-background-color-runtime"),$form_background_color_preview:N.find("#rex-wpcf7-background-color-preview-icon"),$form_preview_border_color:N.find("#rex-wpcf7-preview-border"),$form_border_color_value:N.find("#rex-wpcf7-border-color"),$form_border_color_runtime:N.find("#rex-wpcf7-border-color-runtime"),$form_border_color_preview:N.find("#rex-wpcf7-border-color-preview-icon"),$form_border_width:N.find("#rex-wpcf7-set-border-width"),$form_margin_top:N.find("#rex-wpcf7-margin-top"),$form_margin_left:N.find("#rex-wpcf7-margin-left"),$form_margin_right:N.find("#rex-wpcf7-margin-right"),$form_margin_bottom:N.find("#rex-wpcf7-margin-bottom"),$form_columns_padding_top:N.find("#rex-wpcf7-columns-padding-top"),$form_columns_padding_left:N.find("#rex-wpcf7-columns-padding-left"),$form_columns_padding_right:N.find("#rex-wpcf7-columns-padding-right"),$form_columns_padding_bottom:N.find("#rex-wpcf7-columns-padding-bottom"),$content_width:N.find("#rex-wpcf7-content-width"),$content_width_type:N.find(".rex-wpcf7-content-width-type"),$content_height:N.find("#rex-wpcf7-content-height"),$content_set_font_size:N.find("#rex-wpcf7-set-content-font-size"),$content_set_border_width:N.find("#rex-wpcf7-set-content-border-width"),$content_set_border_radius:N.find("#rex-wpcf7-set-content-border-radius"),$content_preview_text_color:N.find("#rex-wpcf7-content-preview-text-color"),$content_text_color_value:N.find("#rex-wpcf7-content-text-color"),$content_text_color_runtime:N.find("#rex-wpcf7-content-text-color-runtime"),$content_text_color_preview:N.find("#rex-wpcf7-content-text-color-preview-icon"),$content_text_color_palette_buttons:e.find("#text-color-palette .bg-palette-selector"),$content_preview_text_color_hover:N.find("#rex-wpcf7-content-preview-text-color-hover"),$content_text_color_hover_value:N.find("#rex-wpcf7-content-text-color-hover"),$content_text_color_hover_runtime:N.find("#rex-wpcf7-content-text-color-hover-runtime"),$content_text_color_hover_preview:N.find("#rex-wpcf7-content-text-color-hover-preview-icon"),$content_hover_text_color_palette_buttons:e.find("#hover-text-color-palette .bg-palette-selector"),$content_preview_background_color:N.find("#rex-wpcf7-content-preview-background-color"),$content_background_color_value:N.find("#rex-wpcf7-content-background-color"),$content_background_color_runtime:N.find("#rex-wpcf7-content-background-color-runtime"),$content_background_color_preview:N.find("#rex-wpcf7-content-background-color-preview-icon"),$content_background_color_palette_buttons:e.find("#background-color-palette .bg-palette-selector"),$content_preview_background_color_hover:N.find("#rex-wpcf7-content-preview-background-color-hover"),$content_background_color_hover_value:N.find("#rex-wpcf7-content-background-color-hover"),$content_background_color_hover_runtime:N.find("#rex-wpcf7-content-background-color-hover-runtime"),$content_background_color_hover_preview:N.find("#rex-wpcf7-content-background-color-hover-preview-icon"),$content_hover_background_color_palette_buttons:e.find("#hover-background-color-palette .bg-palette-selector"),$content_preview_border_color:N.find("#rex-wpcf7-content-preview-border-color"),$content_border_color_value:N.find("#rex-wpcf7-content-border-color"),$content_border_color_runtime:N.find("#rex-wpcf7-content-border-color-runtime"),$content_border_color_preview:N.find("#rex-wpcf7-content-border-color-preview-icon"),$content_preview_border_color_hover:N.find("#rex-wpcf7-content-preview-border-color-hover"),$content_border_color_hover_value:N.find("#rex-wpcf7-content-border-color-hover"),$content_border_color_hover_runtime:N.find("#rex-wpcf7-content-border-color-hover-runtime"),$content_border_color_hover_preview:N.find("#rex-wpcf7-content-border-color-hover-preview-icon"),$content_hover_border_color_palette_buttons:e.find("#hover-border-color-palette .bg-palette-selector"),$form_error_message_font_size:N.find("#rex-wpcf7-set-error-message-font-size"),$form_send_message_font_size:N.find("#rex-wpcf7-set-send-message-font-size"),$form_error_message_color_value:N.find("#rex-wpcf7-error-message-color"),$form_error_message_color_runtime:N.find("#rex-wpcf7-error-message-color-runtime"),$form_error_message_color_preview:N.find("#rex-wpcf7-error-message-color-preview-icon"),$form_send_message_color_value:N.find("#rex-wpcf7-send-message-color"),$form_send_message_color_runtime:N.find("#rex-wpcf7-send-message-color-runtime"),$form_send_message_color_preview:N.find("#rex-wpcf7-send-message-color-preview-icon"),$form_create_template_text:N.find("#rex-wpcf7-create-template .bl_modal-row__input"),$form_create_template_button:N.find("#rex-wpcf7-create-template .bl_modal-row__button")},q={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}},ee(),"");function A(e){t=e.toRgbString(),G.$form_background_color_preview.hide(),G.$form_preview_background.css("background-color",t),X({type:"background",name:"background-color",value:t})}function B(e){r=e.toRgbString(),G.$form_border_color_preview.hide(),G.$form_preview_border_color.css("background-color",r),X({type:"border",name:"border-color",value:r})}function U(e){l=e.toRgbString(),G.$content_text_color_preview.hide(),G.$content_preview_text_color.css("background-color",l),G.$input_preview.css({color:l}),Z({type:"text-color",name:"text-color",value:l}),q.wpcf7_data.options_different.text_color=!1}function j(e){s=e.toRgbString(),G.$content_text_color_hover_preview.hide(),G.$content_preview_text_color_hover.css("background-color",s),G.$input_preview.hover(function(){Q(this).css({color:s})},function(){Q(this).css({color:q.wpcf7_data.content.text_color})}),Z({type:"text-color-hover",name:"text-color",value:s})}function F(e){p=e.toRgbString(),G.$content_background_color_preview.hide(),G.$content_preview_background_color.css("background-color",p),G.$input_preview.css({"background-color":p}),Z({type:"background-color",name:"background-color",value:p})}function L(e){f=e.toRgbString(),G.$content_background_color_hover_preview.hide(),G.$content_preview_background_color_hover.css("background-color",f),G.$input_preview.hover(function(){Q(this).css({"background-color":f})},function(){Q(this).css({"background-color":q.wpcf7_data.content.background_color})}),Z({type:"background-color-hover",name:"background-color",value:f})}function z(e){h=e.toRgbString(),G.$content_border_color_preview.hide(),G.$content_preview_border_color.css("background-color",h),G.$input_preview.css({"border-color":h}),Z({type:"border-color",name:"border-color",value:h})}function O(e){w=e.toRgbString(),G.$content_border_color_hover_preview.hide(),G.$content_preview_border_color_hover.css("background-color",w),G.$input_preview.hover(function(){Q(this).css({"border-color":w})},function(){Q(this).css({"border-color":q.wpcf7_data.content.border_color})}),Z({type:"border-color-hover",name:"border-color",value:w})}function V(e){T=e.toRgbString(),G.$form_error_message_color_preview.hide(),X({type:"validation-error",name:"text-color",value:T})}function W(e){P=e.toRgbString(),G.$form_send_message_color_preview.hide(),X({type:"send-message",name:"text-color",value:P})}J(G.$form_border_width,!1),K(G.$form_border_width,function(e){X({type:"border-width",name:"border-width",value:E=e+"px"})},!1),J(G.$form_margin_top,!1),K(G.$form_margin_top,function(e){X({type:"margin",name:"margin-top",value:E=e+"px"})},!1),J(G.$form_margin_left,!1),K(G.$form_margin_left,function(e){X({type:"margin",name:"margin-left",value:E=e+"px"})},!1),J(G.$form_margin_right,!1),K(G.$form_margin_right,function(e){X({type:"margin",name:"margin-right",value:E=e+"px"})},!1),J(G.$form_margin_bottom,!1),K(G.$form_margin_bottom,function(e){X({type:"margin",name:"margin-bottom",value:E=e+"px"})},!1),J(G.$form_columns_padding_top,!1),K(G.$form_columns_padding_top,function(e){X({type:"columns-padding",name:"padding-top",value:E=e+"px"})},!1),J(G.$form_columns_padding_left,!1),K(G.$form_columns_padding_left,function(e){X({type:"columns-padding",name:"padding-left",value:E=e+"px"})},!1),J(G.$form_columns_padding_right,!1),K(G.$form_columns_padding_right,function(e){X({type:"columns-padding",name:"padding-right",value:E=e+"px"})},!1),J(G.$form_columns_padding_bottom,!1),K(G.$form_columns_padding_bottom,function(e){X({type:"columns-padding",name:"padding-bottom",value:E=e+"px"})},!1),J(G.$form_error_message_font_size,!1),K(G.$form_error_message_font_size,function(e){X({type:"validation-error",name:"font-size",value:E=e+"px"})},!1),J(G.$form_send_message_font_size,!1),K(G.$form_send_message_font_size,function(e){X({type:"send-message",name:"font-size",value:E=e+"px"})},!1),J(G.$content_width,!1),K(G.$content_width,function(e){switch(G.$content_width_type.filter(":checked").val()){case"percentage":E=e+"%";break;case"pixel":E=e+"px"}Z({type:"width",name:"width",value:E}),q.wpcf7_data.options_different.width=!1},!1),J(G.$content_height,!1),K(G.$content_height,function(e){Z({type:"height",name:"height",value:E=e+"px"}),q.wpcf7_data.options_different.height=!1},!1),J(G.$content_set_font_size,!1),K(G.$content_set_font_size,function(e){Z({type:"font-size",name:"font-size",value:E=e+"px"}),G.$input_preview.css({"font-size":E}),q.wpcf7_data.options_different.font_size=!1},!1),J(G.$content_set_border_width,!1),K(G.$content_set_border_width,function(e){Z({type:"border-width",name:"border-width",value:E=e+"px"}),G.$input_preview.css({"border-width":E})},!1),J(G.$content_set_border_radius,!1),K(G.$content_set_border_radius,function(e){Z({type:"border-radius",name:"border-radius",value:E=e+"px"}),G.$input_preview.css({"border-radius":E})},!1),(n=G.$form_background_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){o=e},move:A,hide:function(e){q.wpcf7_data.background_color=e.toRgbString()}}),D=Y.clone(),I=H.clone(),n.spectrum("container").append(D),n.spectrum("container").append(I),D.on("click",function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),n.spectrum("hide"),A(o)}),I.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),n.spectrum("hide")}),I.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),n.spectrum("set",o.toRgbString()),A(o)}),G.$form_background_color_preview.on("click",function(){return n.spectrum("show"),!1}),(i=G.$form_border_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){a=e},move:B,hide:function(e){q.wpcf7_data.border_color=e.toRgbString()}}),e=Y.clone(),N=H.clone(),i.spectrum("container").append(e),i.spectrum("container").append(N),e.on("click",function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),i.spectrum("hide"),B(a)}),N.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),i.spectrum("hide")}),N.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),i.spectrum("set",a.toRgbString()),B(a)}),G.$form_border_color_preview.on("click",function(){return i.spectrum("show"),!1}),(c=G.$content_text_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){d=e},move:U,hide:function(e){q.wpcf7_data.content.text_color=e.toRgbString()}}),D=Y.clone(),I=H.clone(),c.spectrum("container").append(D),c.spectrum("container").append(I),D.on("click",function(e){e.preventDefault(),c.spectrum("set",d.toRgbString()),c.spectrum("hide"),U(d)}),I.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),c.spectrum("hide")}),I.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),c.spectrum("set",d.toRgbString()),U(d)}),G.$content_text_color_preview.on("click",function(){return c.spectrum("show"),!1}),(u=G.$content_text_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){_=e},move:j,hide:function(e){q.wpcf7_data.content.text_color_hover=e.toRgbString()}}),e=Y.clone(),N=H.clone(),u.spectrum("container").append(e),u.spectrum("container").append(N),e.on("click",function(e){e.preventDefault(),u.spectrum("set",_.toRgbString()),u.spectrum("hide"),j(_)}),N.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),u.spectrum("hide")}),N.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),u.spectrum("set",_.toRgbString()),j(_)}),G.$content_text_color_hover_preview.on("click",function(){return u.spectrum("show"),!1}),(v=G.$content_background_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){m=e},move:F,hide:function(e){q.wpcf7_data.content.background_color=e.toRgbString()}}),D=Y.clone(),I=H.clone(),v.spectrum("container").append(D),v.spectrum("container").append(I),D.on("click",function(e){e.preventDefault(),v.spectrum("set",m.toRgbString()),v.spectrum("hide"),F(m)}),I.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),v.spectrum("hide")}),I.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),v.spectrum("set",m.toRgbString()),F(m)}),G.$content_background_color_preview.on("click",function(){return v.spectrum("show"),!1}),(b=G.$content_background_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){g=e},move:L,hide:function(e){q.wpcf7_data.content.background_color_hover=e.toRgbString()}}),e=Y.clone(),N=H.clone(),b.spectrum("container").append(e),b.spectrum("container").append(N),e.on("click",function(e){e.preventDefault(),b.spectrum("set",g.toRgbString()),b.spectrum("hide"),L(g)}),N.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),b.spectrum("hide")}),N.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),b.spectrum("set",g.toRgbString()),L(g)}),G.$content_background_color_hover_preview.on("click",function(){return b.spectrum("show"),!1}),($=G.$content_border_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){x=e},move:z,hide:function(e){q.wpcf7_data.content.border_color=e.toRgbString()}}),D=Y.clone(),I=H.clone(),$.spectrum("container").append(D),$.spectrum("container").append(I),D.on("click",function(e){e.preventDefault(),$.spectrum("set",x.toRgbString()),$.spectrum("hide"),z(x)}),I.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),$.spectrum("hide")}),I.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),$.spectrum("set",x.toRgbString()),z(x)}),G.$content_border_color_preview.on("click",function(){return $.spectrum("show"),!1}),(y=G.$content_border_color_hover_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){k=e},move:O,hide:function(e){q.wpcf7_data.content.border_color_hover=e.toRgbString()}}),e=Y.clone(),N=H.clone(),y.spectrum("container").append(e),y.spectrum("container").append(N),e.on("click",function(e){e.preventDefault(),y.spectrum("set",k.toRgbString()),y.spectrum("hide"),O(k)}),N.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),y.spectrum("hide")}),N.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),y.spectrum("set",k.toRgbString()),O(k)}),G.$content_border_color_hover_preview.on("click",function(){return y.spectrum("show"),!1}),(M=G.$form_error_message_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){C=e},move:V,hide:function(e){q.wpcf7_data.error_message_color=e.toRgbString()}}),D=Y.clone(),I=H.clone(),M.spectrum("container").append(D),M.spectrum("container").append(I),D.on("click",function(e){e.preventDefault(),M.spectrum("set",C.toRgbString()),M.spectrum("hide"),V(C)}),I.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),M.spectrum("hide")}),I.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),M.spectrum("set",C.toRgbString()),V(C)}),G.$form_error_message_color_preview.on("click",function(){return M.spectrum("show"),!1}),(S=G.$form_send_message_color_value).spectrum({replacerClassName:"btn-floating spectrum-placeholder",preferredFormat:"hex",showAlpha:!0,showInput:!0,showButtons:!1,showPalette:!1,containerClassName:"rexbuilder-materialize-wrap sp-draggable sp-meditor",show:function(e){R=e},move:W,hide:function(e){q.wpcf7_data.send_message_color=e.toRgbString()}}),e=Y.clone(),N=H.clone(),S.spectrum("container").append(e),S.spectrum("container").append(N),e.on("click",function(e){e.preventDefault(),S.spectrum("set",R.toRgbString()),S.spectrum("hide"),W(R)}),N.on("click",'[data-rex-option="save"]',function(e){e.preventDefault(),S.spectrum("hide")}),N.on("click",'[data-rex-option="reset"]',function(e){e.preventDefault(),S.spectrum("set",R.toRgbString()),W(R)}),G.$form_send_message_color_preview.on("click",function(){return S.spectrum("show"),!1})},openFormEditorModal:function(e){q=e.elementData,e=q,l(),d(e),c();e=q.element_target.element_id;Q.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_wpcf7_get_mail_settings",nonce_param:live_editor_obj.rexnonce,form_id:e},beforeSend:function(){G.$self.addClass("rex-modal--loading")},success:function(e){e.success&&(n=e.data.mail_settings[0],r=e.data.messages[0],G.$form_mail_to.val(n.recipient),""!=G.$form_mail_to.val()&&G.$form_mail_to.siblings("label, .prefix").addClass("active"),G.$form_error_message.val(r.validation_error),""!=G.$form_error_message.val()&&G.$form_error_message.siblings("label, .prefix").addClass("active"),G.$form_send_message.val(r.mail_sent_ok),""!=G.$form_send_message.val())&&G.$form_send_message.siblings("label, .prefix").addClass("active")},error:function(e){},complete:function(e){G.$self.removeClass("rex-modal--loading")}}),Rexlive_Modals_Utils.openModal(G.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-form"])}}}(jQuery),Model_Lateral_Menu=function(n){var r;function t(){var e;r.$self.hasClass("rex-lateral-panel--open")||(r.$self.addClass("rex-lateral-panel--open"),e=r.$tabsButtons.filter(".active").parent().index(),r.$tabs.eq(e).show())}function o(){r.$self.hasClass("rex-lateral-panel--close")||r.$self.addClass("rex-lateral-panel--close").one(Rexbuilder_Util_Admin_Editor.animationEvent,function(e){r.$self.removeClass("rex-lateral-panel--open rex-lateral-panel--close")})}function a(e,t){var o=function(){switch(Rexbuilder_Util_Admin_Editor.dragImportType){case"rexmodel":return Model_Import_Modal;case"rexbutton":return Button_Import_Modal;case"rexelement":return Form_Import_Modal;default:return null}}();o&&e in o&&o[e](t)}function i(){var e=Rexbuilder_Util_Admin_Editor.frameBuilder.contentWindow,t=n(e),e=n(e.document.querySelector(".rex-container"));t.on("dragover",a.bind(null,"onDragOverWindow")),e.on("dragenter",".grid-stack-row",a.bind(null,"onDragEnterRow")),e.on("dragover",".grid-stack-row",_.throttle(a.bind(null,"onDragOverRow"),50)),e.on("drop",".grid-stack-row",a.bind(null,"onDropRow"))}return{init:function(){var e=n("#rexbuilder-lateral-panel");(r={$self:e,$close_button:e.find(".rex-lateral-panel--close"),$tabs:e.find(".tabgroup > div"),$tabsButtons:e.find(".rex-lateral-tabs-list a")}).$tabs.hide(),Rexlive_Base_Settings.$document.on("rexlive:lateralMenuReady",function(){t()}),r.$close_button.click(function(e){e.preventDefault(),o()}),r.$tabsButtons.click(function(e){e.preventDefault();var e=n(this),t=e.closest("li").siblings().children("a"),o=e.attr("data-rex-tab-target");t.removeClass("active"),e.addClass("active"),r.$tabs.hide(),r.$tabs.each(function(e,t){n(t).attr("id")==o&&n(t).show()})}),Rexlive_Base_Settings.$document.on("click",".model__element--title-edit",function(e){var t=this.parentNode.parentNode.parentNode,t={id:t.getAttribute("data-rex-model-id"),name:t.querySelector(".model-name").textContent};Rexlive_Model_Edit_Name_Modal.openModal(t)}),Rexlive_Base_Settings.$document.on("click",".model__element--edit-thumbnail",function(e){var t=n(this).parents(".model__element");Model_Import_Modal.editModelThumbnail(t.attr("data-rex-model-id"),t.attr("data-rex-model-thumbnail-id"))}),Rexlive_Base_Settings.$document.on("click",".model__element--delete",function(e){var t=this.parentNode.parentNode.parentNode;Model_Import_Modal.deleteModel(t)}),Rexlive_Base_Settings.$document.on("click",".model__element--reset-thumbnail",function(e){var t=n(this).parents(".model__element");Model_Import_Modal.resetModelThumbnail(t.attr("data-rex-model-id"))}),Rexlive_Base_Settings.$document.on("click",".element-list__element--delete",function(e){e=n(e.target).parents(".element-list__element").get(0);e&&Delete_Model_Modal.openModal({type:"form",element:e})}),Rexlive_Base_Settings.$document.on("click",".element-list__element--edit-thumbnail",function(e){var t=n(this).parents(".element-list__element");Form_Import_Modal.editElementThumbnail(t.attr("data-rex-element-id"),t.attr("data-rex-element-thumbnail-id"))}),Rexlive_Base_Settings.$document.on("click",".element-list__element--reset-thumbnail",function(e){var t=n(this).parents(".element-list__element");Form_Import_Modal.resetElementThumbnail(t.attr("data-rex-element-id"))}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(i)},openModal:function(){Model_Import_Modal.updateModelList(),Form_Import_Modal.updateList()},hide:o,show:t}}(jQuery),Rexlive_Modals=function(e){"use strict";return{init:function(){Rexlive_Top_Tools.init(),Section_Modal.init(),Insert_Video_Modal.init(),CssEditor_Modal.init(),HtmlEditor_Modal.init(),SectionBackground_Modal.init(),Rexlive_Section_Background_Gradient.init(),Rexlive_Section_Overlay_Gradient.init(),Section_Video_Background_Modal.init(),BlockOptions_Modal.init(),Block_Content_Positions_Modal.init(e("#rex-block-content-position-editor")),Rexlive_Block_Accordion.init(),Rexlive_Block_Slideshow.init(),Rexlive_Text_Gradient.init(),Rexlive_Block_Background_Gradient.init(),Rexlive_Block_Overlay_Gradient.init(),Model_Modal.init(),Model_Edit_Modal.init(),Rexlive_Model_Edit_Name_Modal.init(),Open_Models_Warning.init(),CustomLayouts_Modal.init(),Change_Layout_Modal.init(),SectionOrderChanged_Modal.init(),Resynch_Content_Modal.init(),LockedOptionMask.init(),Model_Lateral_Menu.init(),Rexlive_Page_Settings_Modal.init(),Model_Import_Modal.init(),Rexlive_Inline_SVG.init(),Button_Import_Modal.init(),Button_Edit_Modal.init(),Form_Import_Modal.init(),Element_Choose_Modal.init(),Wpcf7_Add_Content_Modal.init(),Wpcf7_Edit_Content_Modal.init(),Wpcf7_Edit_Form_Modal.init(),Delete_Model_Modal.init(),Rexlive_PostEdit_MediaList.init()}}}(jQuery),Rexlive_Base_Settings=function(t){"use strict";function e(){tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})}var o,n,r="classList"in document.documentElement?(o=function(e,t){return e.classList.contains(t)},n=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(o=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},n=function(e,t){o(e,t)||(e.className+=" "+t)},function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")});return{init:function(){this.$document=t(document),this.$window=t(window),e()},htmlDecode:function(e){return t("<div/>").html(e).text()},htmlEncode:function(e){return t("<div/>").text(e).html()},viewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},launchTooltips:e,encodeData:function(e){var t,o=[];for(t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&").replace(/%20/g,"+")},addClass:n,removeClass:r,hasClass:o,toggleClass:function(e,t){(o(e,t)?r:n)(e,t)}}}(jQuery),Rexbuilder_Util_Admin_Editor=function(l){"use strict";var n,r,i,d,c,s,_,u,p,m,j,F,L,o,a,v,f,g,b,h,x,$,w,k,y,C,M,R,S,D,I,N=[];function z(e,t){void 0!==N[e]&&N[e].forEach(function(e){e.call(null,t)})}var t;function O(e){t=S.scrollTop(),S.scrollTop(t+e),Rexbuilder_Util_Admin_Editor.stopScrolling||setTimeout(function(){O(e)},20)}function V(e,t){switch(e){case"OPEN":for(var o=null,n=0;n<C.length;n++)if(t.modelID==C[n].m_id){o=n;break}null!==o?C[n].m_state="open":(r={m_id:t.modelID,m_name:t.modelName,m_state:"open"},C.push(r));break;case"CLOSE":for(var r,o=null,n=0;n<C.length;n++)if(t.modelID==C[n].m_id){o=n;break}null!==o?C[n].m_state="close":(r={m_id:t.modelID,m_name:t.modelName,m_state:"close"},C.push(r));break;case"REMOVE":for(o=null,n=0;n<C.length;n++)if(t.modelID==C[n].m_id){o=n;break}null!==o&&C.splice(o,1)}}function W(e){e!=Rexbuilder_Util_Admin_Editor.activeWidth?(""==e?(M.css("width","100%"),M.css("min-width","1024px")):(M.css("width",e),M.css("min-width","")),Rexbuilder_Util_Admin_Editor.activeWidth=e):T(D)}function Q(e){p.val(e)}function E(){""!==u.val()&&void 0!==u.val()&&"false"===p.val()?Rexbuilder_Util_Admin_Editor.$responsiveToolbar.addClass("rexlive-toolbox--model"):Rexbuilder_Util_Admin_Editor.$responsiveToolbar.removeClass("rexlive-toolbox--model")}function e(){j.filter("[data-section_width="+m.dimension+"]").prop("checked",!0)}function G(){F.filter("[value="+m.layout+"]").prop("checked",!0)}function q(){var e="fixed"==m.layout;L.prop("checked",e)}function A(){E(),J(),e(),G(),q(),P(),K(),X(),Z()}var Y=function(e){return"default"==e||"mobile"==e||"tablet"==e?"standard":"custom"},H=function(e){if(e.data.rexliveEvent){var t,o,n,r,a=e.data;if("rexlive:edited"==e.data.eventName&&(e.data.modelEdited?i=!1:Rexbuilder_Util_Admin_Editor.pageSaved=!1,Rexbuilder_Util_Admin_Editor.deactiveSavePageButton()),"rexlive:sectionOrderStatus"==e.data.eventName&&(Rexbuilder_Util_Admin_Editor.isSectionOrderChanged=e.data.isSectionOrderChanged),"rexlive:undoRedoStackChange"==e.data.eventName&&(0<e.data.stacks.undo?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-undo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-undo--active"),0<e.data.stacks.redo?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-redo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active")),"rexlive:traceVisibleRow"==e.data.eventName&&(_.val(e.data.sectionTarget.sectionID),u.val(e.data.sectionTarget.modelNumber),p.val(e.data.sectionTarget.modelEditing),m=e.data.rowInfo,A(),z("admin_after_trace_visible_row",{sectionTarget:e.data.sectionTarget})),"rexlive:viewTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("top-fast-tools--hide"),"rexlive:hideTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("top-fast-tools--hide"),"rexlive:updateTopToolbar"==e.data.eventName&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData(e.data.updateInfo),A()),"rexlive:openMediaUploader"==e.data.eventName&&Rexlive_MediaUploader.openInsertImageBlocksMediaUploader(a),"rexlive:addNewBlockVideo"==e.data.eventName&&Insert_Video_Modal.openVideoModal(a),"rexlive:addNewSlider"==e.data.eventName&&Rexbuilder_RexSlider.openSliderModal("","","",a.target),"rexlive:editSlider"==e.data.eventName&&(a=e.data,Rexbuilder_RexSlider.openSliderModal(a.blockID,a.shortCodeSlider,a.sliderID,a.target)),"rexlive:openSectionModal"==e.data.eventName&&Section_Modal.openSectionModal(e.data.section_options_active,e.data.mousePosition),"rexlive:inlineVideoEditor"==e.data.eventName&&Change_UpdateVideoInline_Modal.openModal(e.data.modelData),"rexlive:inlineSVG"==e.data.eventName&&Rexlive_Inline_SVG.openModal(e.data.inlineSVGData),"rexlive:openModalMenu"==e.data.eventName&&Model_Modal.openModal(e.data.modelData),"rexlive:updateModel"==e.data.eventName&&Model_Modal.updateModel(e.data.modelData),"rexlive:uploadSliderFromLive"==e.data.eventName&&(r=(a=e.data.sliderInfo).slider,t=a.slider.id.toString(),o=a.newSlider,n=a.blockID,a=a.target,Rexbuilder_RexSlider.saveSlider(r,n,t,o,!0,a)),"rexlive:openCssEditor"==e.data.eventName&&CssEditor_Modal.openModal(e.data.currentStyle),"rexlive:openHTMLEditor"==e.data.eventName&&HtmlEditor_Modal.openModal(e.data.htmlContent),"rexlive:openChangeLayoutModal"==e.data.eventName&&Change_Layout_Modal.openModal(e.data.dataObj),"rexlive:openLiveImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageLiveMediaUploader(e.data.live_uploader_data),"rexlive:openMEImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageMEMediaUploader(e.data.img_data),"rexlive:openPostEditMediaUploader"===e.data.eventName&&Rexlive_PostEdit.openMediaUploader(e.data.mediaData),"rexlive:openPostEditMediaList"===e.data.eventName&&Rexlive_PostEdit_MediaList.openModal(e.data.data_to_send),"rexlive:liveMediaAddFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.addMediaItem(e.data.mediaData),"rexlive:liveMediaEditFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.editMediaItem(e.data.mediaData),"rexlive:editBackgroundSection"==e.data.eventName&&SectionBackground_Modal.openSectionBackgroundModal(e.data.activeBG),"rexlive:editSectionBackgroundGradient"==e.data.eventName&&Rexlive_Section_Background_Gradient.openModal(e.data.activeRowData),"rexlive:editRowOverlayGradient"==e.data.eventName&&Rexlive_Section_Overlay_Gradient.openModal(e.data.activeRowData),"rexlive:editRowVideoBackground"==e.data.eventName&&Section_Video_Background_Modal.openSectionVideoBackgroundModal(e.data.activeBG,e.data.mousePosition),"rexlive:reSynchContent"==e.data.eventName&&Resynch_Content_Modal.openModal(e.data),"rexlive:editBlockOptions"==e.data.eventName&&BlockOptions_Modal.openBlockOptionsModal(e.data.activeBlockData),"rexlive:editBlockContentPosition"==e.data.eventName&&Block_Content_Positions_Modal.openBlockContentPositionModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockAccordion"==e.data.eventName&&Rexlive_Block_Accordion.openModal(e.data.activeBlockData),"rexlive:editBlockSlideshow"==e.data.eventName&&Rexlive_Block_Slideshow.openModal(e.data.activeBlockData),"rexlive:editBlockGradient"==e.data.eventName&&Rexlive_Block_Background_Gradient.openModal(e.data.activeBlockData),"rexlive:editTextGradient"==e.data.eventName&&Rexlive_Text_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockOverlayGradient"==e.data.eventName&&Rexlive_Block_Overlay_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockImageSettings"==e.data.eventName&&Block_Image_Editor_Modal.openModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockVideoBackground"==e.data.eventName&&Block_Video_Background_Modal.openBlockVideoBackgroundModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:openRexButtonEditor"==e.data.eventName&&Button_Edit_Modal.openButtonEditorModal(e.data.buttonData),"rexlive:openRexElementChoose"==e.data.eventName&&Element_Choose_Modal.selectModalToOpen(e.data),"rexlive:openRexWpcf7AddContent"==e.data.eventName&&Wpcf7_Add_Content_Modal.openContentAdder(e.data),"rexlive:openRexWpcf7EditContent"==e.data.eventName&&Wpcf7_Edit_Content_Modal.openColumnContentEditorModal(e.data),"rexlive:openRexWpcf7EditForm"==e.data.eventName&&Wpcf7_Edit_Form_Modal.openFormEditorModal(e.data),"rexlive:editRemoveModal"==e.data.eventName&&Model_Edit_Modal.openModal(e.data.modelData),"rexlive:saveAndCloseModel"==e.data.eventName&&(V("CLOSE",e.data.modelData),Q("false"),E()),"rexlive:savePageEnded"==e.data.eventName){switch(e.data.dataSaved){case"model":i=!0;break;case"page":Rexbuilder_Util_Admin_Editor.pageSaved=!0}i&&Rexbuilder_Util_Admin_Editor.pageSaved&&(NProgress.done(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend",!1),Rexbuilder_Util_Admin_Editor.activeSavePageButton(),Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-builder-layout.active-layout").parent().addClass("layout-saved"),Rexlive_Ajax_Calls.save_process_ended(),d.removeClass("rex-saving"),void 0!==e.data.buttonData)&&""!=e.data.buttonData&&B(e.data.buttonData)}"rexlive:restoreStateEnded"==e.data.eventName&&(i=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,void 0!==(r=e.data.buttonData))&&""!=r&&B(r),"rexlive:animateContentsFadeOutEnd"==e.data.eventName&&NProgress.inc(.5),"rexlive:animateContentsEnd"==e.data.eventName&&NProgress.done(),"rexlive:esc_pressed"==e.data.eventName&&Rexlive_Modals_Utils.close_focus_modal(),"rexlive:savePageWithButton"==e.data.eventName&&d.trigger("click"),"rexlive:undoWithButton"==e.data.eventName&&c.trigger("click"),"rexlive:redoWithButton"==e.data.eventName&&s.trigger("click"),"rexlive:savePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteColor(e.data.color_data),"rexlive:deletePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteColor(e.data.color_data),"rexlive:savePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteOverlayColor(e.data.overlay_data),"rexlive:deletePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteOverlayColor(e.data.overlay_data),"rexlive:highlightRowSetData"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.highlightRowSetData(e.data.editedData)}},B=function(e){i=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,n=e.id,r=e.label,Rexbuilder_Util_Admin_Editor.setActiveLayout(n),Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".tool-option__choose-layout").find(".active-layout__icon").html(Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find('.btn-builder-layout[data-name="'+n+'"]').find(".layout__icon").html()),D={selectedLayoutName:n,eventName:"rexlive:changeLayout",layoutData:e},W(e.min)},U=function(){for(var e=[],t=0;t<C.length;t++)"open"==C[t].m_state&&e.push(C[t]);0===e.length?ce()?SectionOrderChanged_Modal.openModal({initiator:"savingProcess"}):function(){var e;NProgress.start(),l(this).addClass("rex-saving"),T({eventName:"rexlive:savePage",data_to_send:{activeLayout:n}})}():Open_Models_Warning.openModal(e)},T=function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),R.postMessage(t,"*")},J=function(){"true"==m.collapse?o.addClass("active"):o.removeClass("active")},P=function(){void 0!==m.id_image_bg_section&&""!==m.id_image_bg_section&&void 0!==m.image_bg_section&&""!==m.image_bg_section?(a.addClass("tool-button--image-preview").attr("value",m.id_image_bg_section).css("background-image","url("+m.image_bg_section+")"),g.addClass("tool-button--hide"),setTimeout(function(){b.parent().fadeIn()},300)):(g.removeClass("tool-button--hide"),b.parent().fadeOut({duration:300,complete:function(){a.removeClass("tool-button--image-preview").attr("value","").css("background-image","none")}}))},K=function(){""!==m.color_bg_section?(v.val(m.color_bg_section).spectrum("set",m.color_bg_section),v.parent().addClass("tool-button--picker-preview"),v.siblings(".tool-button--color-preview").css("background-color",m.color_bg_section),h.parent().addClass("tool-button--hide"),setTimeout(function(){x.parent().fadeIn()},300)):(v.val("").spectrum("set",""),h.parent().removeClass("tool-button--hide"),x.parent().fadeOut({duration:300,complete:function(){v.parent().removeClass("tool-button--picker-preview"),v.siblings(".tool-button--color-preview").css("background-color","")}}))},X=function(){""!==m.row_overlay_color&&void 0!==m.row_overlay_color?(f.val(m.row_overlay_color).spectrum("set",m.row_overlay_color),f.parent().addClass("tool-button--picker-preview"),f.siblings(".tool-button--color-preview").css("background-color",m.row_overlay_color),$.parent().addClass("tool-button--hide"),setTimeout(function(){w.parent().fadeIn()},300)):(f.val("").spectrum("set",""),$.parent().removeClass("tool-button--hide"),w.parent().fadeOut({duration:300,complete:function(){f.parent().removeClass("tool-button--picker-preview"),f.siblings(".tool-button--color-preview").css("background-color","")}}))},Z=function(){""!==m.video_bg_url_section&&void 0!==m.video_bg_url_section||""!==m.video_bg_url_vimeo_section&&void 0!==m.video_bg_url_vimeo_section||""!==m.video_mp4_url&&void 0!==m.video_mp4_url||""!==m.video_bg_id_section&&void 0!==m.video_bg_id_section?(k.addClass("tool-button--hide"),setTimeout(function(){y.parent().fadeIn()})):(k.removeClass("tool-button--hide"),y.parent().fadeOut({duration:300}))};function ee(t,o){var e=tmpl("tmpl-tool-save",{}),n=(e=l(e)).find(".rex-modal-option");t.spectrum("container").append(e),n.on("click",function(e){switch(e.stopPropagation(),e.preventDefault(),this.getAttribute("data-rex-option")){case"save":t.spectrum("container").find(".sp-choose").trigger("click");break;case"reset":"function"==typeof o&&o.call()}})}function te(t){var e=tmpl("tmpl-tool-close",{}),e=l(e);t.spectrum("container").append(e),e.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.attr("data-revert",!0),t.spectrum("container").find(".sp-cancel").trigger("click")})}function oe(){!!document.documentMode&&!ne&&(ne=!0,Rexbuilder_Util_Admin_Editor.$frameBuilder.trigger("load"))}var ne,re=function(){v.each(function(e,t){var o=l(t),n=!1,r=!1,a={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};o.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexlive_Color_Palette.show({$target:o,object:"section",action:"background"})},show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",n=!1,a.data_to_send.sectionTarget.sectionID=_.val(),a.data_to_send.sectionTarget.modelNumber=u.val(),r=JSON.parse(m.color_bg_section_active)},change:function(){},move:function(e){a.data_to_send.active=!0,a.data_to_send.color=e.toRgbString(),a.eventName=r?"rexlive:change_section_bg_color":"rexlive:apply_background_color_section",T(a),n=!0},hide:function(e){Rexlive_Color_Palette.hide(),n&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"true",color_bg_section:e.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrColTool(),a.data_to_send.active=!0,a.data_to_send.color=e.toRgbString(),a.eventName="rexlive:apply_background_color_section",T(a)),n=!1}});te(o),ee(o,function(){null!==m.color_bg_section&&(o.spectrum("set",m.color_bg_section),o.spectrum("container").find(".sp-input").trigger("change"))})})},ae=function(){f.each(function(e,t){function o(){null!==m.row_overlay_color&&(n.spectrum("set",m.row_overlay_color),n.spectrum("container").find(".sp-input").trigger("change"))}var n=l(t),r=!1,a=!1,i={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};n.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-draggable sp-meditor",beforeShow:function(){Rexlive_Overlay_Palette.show({$target:n,object:"section",action:"overlay"})},show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",r=!1,i.data_to_send.sectionTarget.sectionID=_.val(),i.data_to_send.sectionTarget.modelNumber=u.val(),a=JSON.parse(m.row_overlay_active)},move:function(e){i.data_to_send.active=!0,i.data_to_send.color=e.toRgbString(),i.eventName=a?"rexlive:change_section_overlay_color":"rexlive:change_section_overlay",T(i),r=!0},hide:function(e){Rexlive_Overlay_Palette.hide(),r&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_active:"true",row_overlay_color:e.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrOverlayTool(),i.data_to_send.active=!0,i.data_to_send.color=e.toRgbString(),i.eventName="rexlive:change_section_overlay",T(i)),r=!1}});te(f),ee(f,o)})},ie=function(e,t){return void 0!==e.clientX&&void 0!==e.clientY&&void 0!==e.offsetX&&void 0!==e.offsetY&&void 0!==t?{x:(e=e.target.getBoundingClientRect()).left+t.offset.w/2,y:e.top+Rexbuilder_Util_Admin_Editor.mousePositionFrameYOffset}:{x:Rexbuilder_Util_Admin_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Admin_Editor.viewportMeasurement.height/2}};function le(){Rexbuilder_Util_Admin_Editor.isLateralMenuOpen=!1,Model_Lateral_Menu.hide()}function de(){return Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".layout-container.layout-saved").length}function ce(){return"default"===n&&Rexbuilder_Util_Admin_Editor.isSectionOrderChanged&&1<de()}return{init:function(){this.$body=l("body"),this.$rexpansiveContainer=l("#rexpansive-builder-backend-wrapper"),M=this.$rexpansiveContainer.find(".rexpansive-live-frame-container"),this.$frameBuilder=this.$rexpansiveContainer.find("#rexpansive-live-frame"),this.frameBuilder=this.$frameBuilder.get(0),R=this.$frameBuilder[0].contentWindow,S=l(R),this.isLateralMenuOpen=!1,this.triggeredLoad=!1,this.$liveFrameRexContainer={},this.dragImportType="",this.stopScrolling=!0,ne=!1,this.$frameBuilder[0].onload=oe(),this.transitionEvent=function(){var e,t=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(void 0!==t.style[e])return o[e]}(),this.animationEvent=function(){var e,t=document.createElement("fakeelement"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(void 0!==t.style[e])return o[e]}(),this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexlive_Base_Settings.viewport(),this.$page_global_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--global"),this.$page_custom_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--custom"),this.$responsiveToolbar=this.$rexpansiveContainer.find(".rexlive-toolbox"),_=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-id]"),u=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-id]"),p=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-editing]"),j=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-width-toolbox"),F=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox"),L=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox-checkbox"),o=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-collapse-grid");var e=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-config-area"),t=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-fast-config-area");g=e.find(".edit-row-image-background-toolbox"),b=t.find(".edit-row-image-background-toolbox"),a=g.add(b),h=e.find("input[name=edit-row-color-background-toolbox]"),x=t.find("input[name=edit-row-color-background-toolbox]"),v=h.add(x),$=e.find("input[name=edit-row-overlay-color-toolbox]"),w=t.find("input[name=edit-row-overlay-color-toolbox]"),f=$.add(w),k=e.find(".edit-row-video-background-toolbox"),y=t.find(".edit-row-video-background-toolbox"),k.add(y),d=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save"),c=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-undo"),s=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-redo"),Rexbuilder_Util_Admin_Editor.pageSaved=!0,i=!0,C=[],this.isSectionOrderChanged=!1,r=n="default",this.$responsiveToolbar.find(".builder-default-layout").addClass("active-layout").parent().addClass("layout-container--active"),this.activeWidth=0,I="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea",NProgress.configure({template:'<div class="bar" role="bar"><div class="peg"></div></div>'}),M.on(Rexbuilder_Util_Admin_Editor.transitionEvent,function(){null!=D&&T(D)}),this.$frameBuilder.load(function(){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer=l(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0)}),re(),ae(),Rexlive_Base_Settings.$document.on("click",".btn-builder-layout",function(e){var t=l(this),o=t.attr("data-name");if(n!=o){t={min:t.attr("data-min-width"),max:t.attr("data-max-width"),id:o,label:void 0!==t.attr("data-label")?t.attr("data-label"):o,type:Y(o)},o={activeLayout:n,activeLayoutLabel:r,buttonData:t,modelSaved:i,pageSaved:Rexbuilder_Util_Admin_Editor.pageSaved};if("true"==Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend").toString())LockedOptionMask.openModal(o);else{if(!i||!Rexbuilder_Util_Admin_Editor.pageSaved)return ce()?void SectionOrderChanged_Modal.openModal({initiator:"changeLayout",dataObj:o}):void Change_Layout_Modal.openModal(o);NProgress.start(),T({eventName:"rexlive:startChangeLayout"}),B(t)}}}),d.on("click",function(){U()}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),U())}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode&&(e.preventDefault(),c.trigger("click"))}),Rexlive_Base_Settings.$document.on("keydown",function(e){((window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&89==e.keyCode)&&(e.preventDefault(),s.trigger("click"))}),Rexlive_Base_Settings.$document.on("click",".btn-undo",function(e){T({eventName:"rexlive:undo"})}),Rexlive_Base_Settings.$document.on("click",".btn-redo",function(e){T({eventName:"rexlive:redo"})}),Rexlive_Base_Settings.$document.on("click",".btn-models",function(e){Model_Lateral_Menu.openModal()}),Rexlive_Base_Settings.$document.on("click",".open-distancer-tool",function(e){Rexlive_Page_Settings_Modal.open()}),Rexlive_Base_Settings.$document.on("focus",I,function(e){l(e.target).is(I)&&l(e.target).siblings("label, .prefix").addClass("active")}),Rexlive_Base_Settings.$document.on("blur",I,function(e){l(e.target).is(I)&&""==e.target.value&&l(e.target).siblings("label, .prefix").removeClass("active")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-image",function(e){e.preventDefault();e={rexliveEvent:!0,eventName:"rexlive:openMediaUploader",returnEventName:"rexlive:insert_image",sectionTarget:{sectionID:_.val(),modelNumber:u.val()}};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-text",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$frameBuilder.focus();e={eventName:"rexlive:insert_new_text_block",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()}}};T(e)}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-video",function(e){e.preventDefault();e={rexliveEvent:!0,eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:_.val(),modelNumber:u.val()}};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-slider",function(e){e.preventDefault();e={rexliveEvent:!0,eventName:"rexlive:addNewSlider",target:{sectionID:_.val(),modelNumber:u.val()}};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-section",function(e){e.preventDefault();e={eventName:"rexlive:add_new_section_after",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},position:"after"}};T(e)}),Rexlive_Base_Settings.$document.on("click",".toolbox-collapse-grid",function(e){e.preventDefault(),"true"==m.collapse?m.collapse="false":m.collapse="true",J();e={eventName:"rexlive:collapse_row",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()}}};T(e)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox",function(e){Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.target.value});e={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},layout:e.target.value}};T(e)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox-checkbox",function(e){e=e.target.checked?"fixed":"masonry",Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e}),e={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},layout:e}};T(e)}),Rexlive_Base_Settings.$document.on("change",".edit-row-width-toolbox",function(e){var t=e.target.value.trim().split(/(\d+)/),o=t[1],t=t[2],e=(Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e.target.value,dimension:e.target.getAttribute("data-section_width")}),{eventName:"rexlive:set_section_width",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},sectionWidth:{width:o,type:t},forged:!0}});T(e)}),Rexlive_Base_Settings.$document.on("click",".toolbox-builder-section-config",function(e){e.preventDefault();e=ie(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}),e={rexliveEvent:!0,eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},activeLayout:m.layout,fullHeight:m.full_height,section_width:m.section_width,dimension:m.dimension,rowDistances:{gutter:m.block_distance,top:m.row_separator_top,right:m.row_separator_right,bottom:m.row_separator_bottom,left:m.row_separator_left},marginsSection:{top:m.row_margin_top,right:m.row_margin_right,bottom:m.row_margin_bottom,left:m.row_margin_left},photoswipe:!1,sectionName:m.section_name,sectionNavLabel:m.section_nav_label,customClasses:m.custom_classes},mousePosition:e};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".edit-row-image-background-toolbox",function(e){e.preventDefault();e={rexliveEvent:!0,eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},idImage:m.id_image_bg_section,returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-image-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:"false",image_bg_section:"",id_image_bg_section:""}),P();e={eventName:"rexlive:apply_background_image_section",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},active:!1,idImage:"",urlImage:"",width:"",height:""}};T(e)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-color-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"false",color_bg_section:""}),K();e={eventName:"rexlive:apply_background_color_section",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},active:!1,color:""}};T(e)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-overlay-color-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_color:"",row_overlay_active:"false"}),X();e={eventName:"rexlive:change_section_overlay",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},active:!1,color:""}};T(e)}),Rexlive_Base_Settings.$document.on("click",".edit-row-video-background-toolbox",function(e){e.preventDefault();e={rexliveEvent:!0,eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},youtubeVideo:m.video_bg_url_section,vimeoUrl:m.video_bg_url_vimeo_section,mp4Video:m.video_mp4_url,mp4VideoID:m.video_bg_id_section}}};window.postMessage(e,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-video-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}),Z(),m.video_bg_url_section="",m.video_bg_id_section="",m.video_bg_url_vimeo_section="",m.video_mp4_url="";e={eventName:"rexlive:update_section_background_video",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:""}}};T(e)}),Rexlive_Base_Settings.$document.on("click",".open-model-toolbox",function(e){e.preventDefault();e={eventName:"rexlive:openCreateModelModal",data_to_send:{sectionTarget:{sectionID:_.val(),modelNumber:u.val()}}};T(e)}),window.addEventListener("message",H,!1)},pageSaved:void 0,createRandomID:function(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t},createRandomNumericID:function(e){for(var t="",o="0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return parseInt(t)},sendIframeBuilderMessage:T,updateLayoutPage:B,getActiveLayout:function(){return n},setActiveLayout:function(e){n=e,this.$responsiveToolbar.find(".btn-builder-layout.active-layout").removeClass("active-layout").parent().removeClass("layout-container--active"),this.$responsiveToolbar.find('.btn-builder-layout[data-name="'+n+'"]').addClass("active-layout").parent().addClass("layout-container--active"),this.$rexpansiveContainer.attr("data-active-layout",e)},updateIframeWidth:W,updateLayoutActiveData:function(e){D=e},releaseIframeRows:function(){T({eventName:"rexlive:unlockRows"})},blockIframeRows:function(){T({eventName:"rexlive:lockRows"})},deactiveSavePageButton:function(){d.addClass("page-edited")},activeSavePageButton:function(){d.removeClass("page-edited")},updateOpenModelsList:V,highlightRowSetData:function(e){if(void 0!==m&&""!==e&&void 0!==e)for(var t in e)m[t]=e[t]},updateTopToolbar:A,updateModelId:function(e){u.val(e)},updateModelEditing:Q,updateModelState:E,updateWidthTool:e,updateLayoutTool:G,updateLayoutCheckboxTool:q,updateBkgrImgTool:P,updateBkgrColTool:K,updateBkgrOverlayTool:X,updateBkgrVidTool:Z,getGradientSafeValue:function(e){for(var t,o=document.createElement("div").style,n=Rexbuilder_Util_Admin_Editor.getPrefixedValues(e),r=0;r<n.length&&(t=n[r],o.backgroundImage=t,o.backgroundImage!=t);r++);return o.backgroundImage},getPrefixedValues:function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],o=[],n=0;n<t.length;n++)o.push(t[n]+e);return o},openRowColorPaletteModal:function(){var e={gradient:m.color_bg_section,sectionTarget:{sectionID:_.val(),modelNumber:u.val()}};Rexlive_Section_Background_Gradient.openModal(e)},openRowOverlayPaletteModal:function(){var e={gradient:m.row_overlay_color,sectionTarget:{sectionID:_.val(),modelNumber:u.val()}};Rexlive_Section_Overlay_Gradient.openModal(e)},addSpectrumCustomSaveButton:ee,addSpectrumCustomCloseButton:te,scrollFrame:O,setStopScroll:function(e){this.stopScrolling=e},addClassToLiveFrameRexContainer:function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)||Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.addClass(e)},removeClassToLiveFrameRexContainer:function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)&&Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.removeClass(e)},forceTriggerLoad:oe,searchFocusedElement:function(){l(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document.querySelector(".item--me-focus")).parents(".rexpansive_section").addClass("needs-refocus")},hideLateralMenu:le,checkLateralMenu:function(e){!Rexbuilder_Util_Admin_Editor.isLateralMenuOpen&&e<=350?(Rexbuilder_Util_Admin_Editor.isLateralMenuOpen=!0,Model_Lateral_Menu.show()):Rexbuilder_Util_Admin_Editor.isLateralMenuOpen&&350<e&&le()},displayAjaxError:function(e,t,o){alert(t),/^\[Rexpansive\]/.test(o=o||"[Rexpansive] Something went wrong with your AJAX request.")||(o="[Rexpansive] "+o),console.error(o,{status:e.response.status,message:e.textStatus,errorThrown:e.errorThrown})},runSavingProcess:U,addAdminAction:function(e,t){void 0===N[e]&&(N[e]=[]),N[e].push(t)},doAdminAction:z}}(jQuery),Change_UpdateVideoInline_Modal=function(o){"use strict";var n,r=function(){Rexlive_Modals_Utils.closeModal(n.$self.parent(".rex-modal-wrap"))};return{init:function(){var e=o("#rexlive-updatevideoinline"),t=e;(n={$self:e,$button:t.find(".rex-button"),$layout_name_placholder:t.find(".layout-name")}).$button.on("click",function(e){"uploadvideo"===o(e.target).parents(".rex-change-layout-option").attr("data-rex-option")?(e=document.getElementById("me-insert-embed-inline-video-text").value,0==/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)?(o("#me-insert-embed-url-isnot-valid").css("display","block"),document.getElementById("me-insert-embed-inline-video-text").value="",o("#me-insert-embed-url-isnot-valid").fadeOut(3e3)):(Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:mediumEditor:inlineVideoEditor",data_to_send:{valueUrl:e}}),r())):r()})},openModal:function(e){Rexlive_Modals_Utils.openModal(n.$self.parent(".rex-modal-wrap")),document.getElementById("me-insert-embed-inline-video-text").value="",o("#me-insert-embed-url-isnot-valid").css("display","none")},closeModal:r}}(jQuery),Rexlive_Gradient_Utils=function(){var i="ellipse";return{getMarkup:function(e,t,o,n){if("linear"==e)w3c=function(e,t){e="to "+("top left"==(r=(r=e).toLowerCase().trim())?"bottom right":"top"==r?"bottom":"top right"==r?"bottom left":"left"==r?"right":"right"==r?"left":"bottom left"==r?"top right":"bottom"!=r&&"bottom right"==r?"top left":"top")+", ";for(var o="",n=0;n<t.length;n++)o+=t[n].color+" "+t[n].position+"%, ";var r="linear-gradient("+e,r=(r+=o).slice(0,-2);return r+=")"}(t,o),gecko=function(e,t){"top left"==e&&(o="top left, "),"top"==e&&(o="top, "),"center"==e&&(o="top, "),"top right"==e&&(o="top right, "),"left"==e&&(o="left, "),"right"==e&&(o="right, "),"bottom left"==e&&(o="bottom left, "),"bottom"==e&&(o="bottom, "),"bottom right"==e&&(o="bottom right, ");for(var o,n="",r=0;r<t.length;r++)n+=t[r].color+" "+t[r].position+"%, ";return e="-moz-linear-gradient("+o,e=(e+=n).slice(0,-2),e+=")"}(t,o),oldwebkit=function(e,t){"top left"==e&&(o="left top, right bottom, "),"top"==e&&(o="left top, left bottom, "),"center"==e&&(o="left top, left bottom, "),"top right"==e&&(o="right top, left bottom, "),"left"==e&&(o="left top, right top, "),"right"==e&&(o="right top, left top, "),"bottom left"==e&&(o="left bottom, right top, "),"bottom"==e&&(o="left bottom, left top, "),"bottom right"==e&&(o="right bottom, left top, ");for(var o,n="",r=0;r<t.length;r++)n+="color-stop("+t[r].position+", "+t[r].color+"), ";return e="-webkit-gradient(linear, "+o,e=(e+=n).slice(0,-2),e+=")"}(t,o);else{if("radial"!=e)return"";gecko=function(e,t,o){"top left"==e&&(n="left top"),"top center"==e&&(n="center top"),"top right"==e&&(n="right top"),"middle left"==e&&(n="left center"),"middle center"==e&&(n="center"),"center"==e&&(n="center"),"middle right"==e&&(n="right center"),"bottom left"==e&&(n="left bottom"),"bottom center"==e&&(n="center bottom"),"bottom right"==e&&(n="right bottom");for(var n,r="",a=0;a<t.length;a++)r+=t[a].color+" "+t[a].position+"%, ";return dispInputSize=o.toString().toLowerCase(),e="-moz-radial-gradient("+n+", "+i+" "+dispInputSize+", ",e=(e+=r).slice(0,-2),e+=")"}(t,o,n),w3c=function(e,t,o){"top left"==e&&(n="at left top"),"top center"==e&&(n="at center top"),"top right"==e&&(n="at right top"),"middle left"==e&&(n="at left center"),"middle center"==e&&(n="at center"),"center"==e&&(n="at center"),"middle right"==e&&(n="at right center"),"bottom left"==e&&(n="at left bottom"),"bottom center"==e&&(n="at center bottom"),"bottom right"==e&&(n="at right bottom");for(var n,r="",a=0;a<t.length;a++)r+=t[a].color+" "+t[a].position+"%, ";return dispInputSize=o.toString().toLowerCase(),e="radial-gradient("+i+" "+dispInputSize+" "+n+", ",e=(e+=r).slice(0,-2),e+=")"}(t,o,n),oldwebkit=function(e,t){"top left"==e&&(o="left top"),"top center"==e&&(o="center top"),"top right"==e&&(o="right top"),"middle left"==e&&(o="left center"),"middle center"==e&&(o="center center"),"center"==e&&(o="center center"),"middle right"==e&&(o="right center"),"bottom left"==e&&(o="left bottom"),"bottom center"==e&&(o="center bottom"),"bottom right"==e&&(o="right bottom");for(var o,n="",r=0;r<t.length;r++)n+="color-stop("+t[r].position+", "+t[r].color+"), ";return e="-webkit-gradient(radial, "+o+", 0, "+o+", 100, ",e=(e+=n).slice(0,-2),e+=")"}(t,o)}return newwebkit=gecko.replace("-moz-","-webkit-"),opera=gecko.replace("-moz-","-o-"),ms=gecko.replace("-moz-","-ms-"),markup="",markup=(markup=(markup=(markup=(markup=(markup+="background:"+ms+";")+("background:"+gecko+";"))+("background:"+opera+";"))+("background:"+oldwebkit+";"))+("background:"+newwebkit+";"))+("background:"+w3c+";")+"-webkit-background-clip:text;-webkit-text-fill-color:transparent;"}}}(jQuery),Rexlive_Page_Margins=function(o){"use strict";function n(){var e=d();!1!==e&&(Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:set_container_margins",data_to_send:{distances:e}}),_(e))}function t(){var e=d(),t=(t=e,i.context!==t.context||i.vals.top!==t.vals.top);!1!==e&&t&&o.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_container_margins",nonce_param:live_editor_obj.rexnonce,pageID:o("#post_ID").val(),container_margins:e},success:function(){},error:function(){},complete:function(){}}),n()}var r,a,i,l,d=function(){var e=r.$separatorContext.filter(":checked").val(),t=parseInt(r.$separatorValsTop.filter("[data-context="+e+"]").val());return void 0!==e&&{context:e,vals:{top:isNaN(t)?a.top:t}}},c=function(e){e.keydown(function(e){var t=o(e.target);-1!==o.inArray(e.keyCode,[46,8,9,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||35<=e.keyCode&&e.keyCode<=40?(38==e.keyCode&&(e.preventDefault(),t.val(isNaN(parseInt(t.val()))?0:parseInt(t.val())+1)),40==e.keyCode&&(e.preventDefault(),t.val(Math.max(isNaN(parseInt(t.val()))?0:parseInt(t.val())-1,0)))):((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),27==e.keyCode&&t.blur())})},s=function(e){e.keyup(function(e){(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),n())})},_=function(e){switch(e.context){case"global":var t,o=Rexbuilder_Util_Admin_Editor.$page_global_settings.text();""!==o&&"[]"!==o?(t=JSON.parse(o)).container_distancer.top=e.vals.top:t={container_distancer:{top:e.vals.top}},Rexbuilder_Util_Admin_Editor.$page_global_settings.text(JSON.stringify(t)),""!==(o=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text())?(n=JSON.parse(o)).container_distancer.top="":n={container_distancer:{top:""}},Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(n));break;case"custom":var n;""!==(o=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text())?(n=JSON.parse(o)).container_distancer.top=e.vals.top:n={container_distancer:{top:e.vals.top}},Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(n))}};return{init:function(e){r={$self:e,$separatorContext:e.find("input[name=container-distancer]"),$separatorValsTop:e.find("input[name=container-distancer--mtop]"),$container_separator_top:e.find("#margin-rexlive-content"),$applyAllCheckBox:e.find("margin-rexlive-all-pages"),selected_margins:""},a={top:0,right:0,bottom:0,left:0},i=d(),c(r.$separatorValsTop),s(r.$separatorValsTop)},applyData:t,getData:function(){r.$separatorContext.filter("global").prop("checked",!0),r.$separatorValsTop.val("");var e=Rexbuilder_Util_Admin_Editor.$page_global_settings.text(),t=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(),o="global";""!==t&&void 0!==(t=JSON.parse(t)).container_distancer&&void 0!==t.container_distancer.top&&""!==t.container_distancer.top&&(o="custom",r.$separatorValsTop.filter("[data-context=custom]").val(t.container_distancer.top)),""!==e&&void 0!==(t=JSON.parse(e)).container_distancer&&void 0!==t.container_distancer.top&&""!==t.container_distancer.top&&(o=""==o?"global":o,r.$separatorValsTop.filter("[data-context=global]").val(t.container_distancer.top)),r.$separatorContext.filter("[value="+o+"]").prop("checked",!0),i=d(),l=i},resetData:function(){var e;l&&(e=l,r.$separatorContext.filter("[value="+e.context+"]").prop("checked",!0),r.$separatorValsTop.filter("[data-context="+e.context+"]").val(e.vals.top)),t()},updateData:_}}(jQuery),Rexlive_Page_Settings_Modal=function(t){"use strict";var o,n=function(){Rexlive_Modals_Utils.closeModal(o.$modal)},r=function(){Rexlive_Page_Margins.resetData()},a=function(){Rexlive_Page_Margins.applyData()};return{init:function(){var e=t("#rex-page-settings-modal");o={$self:e,$modal:e.parent(".rex-modal-wrap"),$options_buttons:e.find(".rex-modal-option"),$close_button:e.find(".rex-modal__close-button")},Rexlive_Page_Margins.init(o.$self),o.$close_button.on("click",function(e){e.preventDefault(),r(),n()}),o.$modal.on("rexlive:this_modal_closed",function(e){a()}),o.$options_buttons.on("click",function(e){switch(e.preventDefault(),this.getAttribute("data-rex-option")){case"save":n(!1),a();break;case"reset":r()}})},open:function(){Rexlive_Modals_Utils.openModal(o.$modal),Rexlive_Page_Margins.getData()}}}(jQuery),Delete_Model_Modal=function(t){"use strict";var o,n,r=function(){n=null,Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))};return{init:function(){n=null;var e=t("#rex-delete-model");(o={$self:e,$button:e.find(".rex-delete-model-option")}).$button.on("click",function(e){e=e.currentTarget.getAttribute("data-rex-option");if("confirm"===e)switch(n.type){case"template":break;case"button":Button_Import_Modal.deleteButton(n.element);break;case"form":Form_Import_Modal.deleteForm(n.element)}r()})},openModal:function(e){e&&(n=e),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery),Resynch_Content_Modal=function(t){"use strict";var o,n,r=function(){n=null,Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))};return{init:function(){n=null;var e=t("#rex-resynch-content");(o={$self:e,$button:e.find(".rex-resynch-content-option")}).$button.on("click",function(e){"save"===e.currentTarget.getAttribute("data-rex-option")&&Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:apply_reSynchContent",data:{targetInfo:n}}),r()})},openModal:function(e){n=e.data.targetInfo,Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},closeModal:r}}(jQuery);!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){Rexlive_Base_Settings.init(),Rexlive_Color_Palette.init(),Rexlive_Overlay_Palette.init(),Rexbuilder_Util_Admin_Editor.init(),Change_UpdateVideoInline_Modal.init(),Rexlive_Modals_Utils.init(),Rexlive_Modals.init(),Rexlive_RexSlider_TextEditor.init(),Rexbuilder_RexSlider.init()}),window.addEventListener("load",function(){Wpcf7_Edit_Content_Modal.setupTMCEEditors()}),window.addEventListener("beforeunload",function(e){if(0==Rexbuilder_Util_Admin_Editor.pageSaved)return e.preventDefault(),(e||window.event).returnValue="o/",console.log("WARNING: Before closing the page verify that you have saved the changes."),"o/"})}();