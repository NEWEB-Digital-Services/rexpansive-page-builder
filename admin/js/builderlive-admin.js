var Rexlive_MediaUploader=function(e){"use strict";function t(e){if(setUserSetting("imgsize","full"),d)return d.state("insert-image").set("liveTarget",e.sectionTarget),d.state("insert-image").set("eventName",e.returnEventName),void d.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),liveTarget:e.sectionTarget,eventName:e.returnEventName,type:"image"},wp.media.controller.Library.prototype.defaults)});d=wp.media({button:{text:"Select"},state:"insert-image",states:[new t]}),d.on("open",function(){var e=d.state("insert-image").get("selection");e.each(function(t){if("undefined"!=typeof t){var o=wp.media.attachment(t.attributes.id);o.fetch(),e.remove(o?[o]:[])}})}),d.on("close",function(){setUserSetting("imgsize","full")}),d.on("select",function(){var t=d.state("insert-image"),o=t.get("liveTarget"),n=t.get("eventName"),r=t.get("selection"),a={eventName:n,data_to_send:{info:e,media:[],sectionTarget:o}};r&&(r.each(function(e){var o=t.display(e).toJSON(),n=e.toJSON();wp.media.view.settings.captions||delete n.caption,o=wp.media.string.props(o,n);var r={media_info:n,display_info:o};a.data_to_send.media.push(r)}),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a))}),d.open()}function o(e){if(setUserSetting("imgsize","undefined"!=typeof e.imageSize&&""!==e.imageSize?e.imageSize:"full"),s)return s.state("live-image").set("liveTarget",e.sectionTarget).set("selected_image",e.idImage).set("eventName",e.returnEventName).set("data_to_send",e.data_to_send),void s.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image",title:"Edit Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),liveTarget:e.sectionTarget,eventName:e.returnEventName,data_to_send:e.data_to_send,selected_image:e.idImage,type:"image"},wp.media.controller.Library.prototype.defaults)});s=wp.media({button:{text:"Select"},state:"live-image",states:[new t]}),s.on("open",function(){var e,t=s.state("live-image").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=s.state("live-image").get("selected_image");s.state("live-image").get("data_to_send");o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),s.on("select",function(){var e=s.state("live-image"),t=e.get("liveTarget"),o=e.get("eventName"),n=e.get("data_to_send"),r=e.get("selection"),a={eventName:o,data_to_send:{sectionTarget:t,target:t}};r&&(r.each(function(t){var o=e.display(t).toJSON(),r=t.toJSON();wp.media.view.settings.captions||delete r.caption,o=wp.media.string.props(o,r),a.data_to_send.idImage=r.id,a.data_to_send.urlImage=o.src,a.data_to_send.image_size=o.size,a.data_to_send.width=o.width,a.data_to_send.height=o.height,"undefined"!=typeof n.photoswipe&&(a.data_to_send.photoswipe=n.photoswipe),"undefined"!=typeof n.active&&(a.data_to_send.active=n.active),"undefined"!=typeof n.typeBGimage&&(a.data_to_send.typeBGimage=n.typeBGimage)}),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:a.data_to_send.active,image_bg_section:a.data_to_send.urlImage,id_image_bg_section:a.data_to_send.idImage}),Rexbuilder_Util_Admin_Editor.updateBkgrImgTool(),a.data_to_send.tools=n.tools,Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a))}),s.on("close",function(){setUserSetting("imgsize","full")}),s.open()}function n(e){if(setUserSetting("imgsize","full"),u)return u.state("me-image").set("inlineImgData",e),void u.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"me-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",inlineImgData:e},wp.media.controller.Library.prototype.defaults)});u=wp.media({button:{text:"Select"},state:"me-image",states:[new t]}),u.on("select",function(){var e=u.state("me-image"),t=e.get("inlineImgData"),o=e.get("selection"),n={},r={};if(o){o.each(function(o){var a=e.display(o).toJSON(),i=o.toJSON();wp.media.view.settings.captions||delete i.caption,a=wp.media.string.props(a,i),r=a,n.idImage=i.id,n.urlImage=a.src,"undefined"==typeof t.width?n.width=a.width:n.width="string"==typeof t?t.width.replace("px",""):t.width,"undefined"==typeof t.height?n.height=a.height:n.height="string"==typeof t?t.height.replace("px",""):t.height,"undefined"==typeof t.align?n.align="alignnone":n.align=t.align,"undefined"!=typeof t.imgInsideLink&&!0===t.imgInsideLink?r.previousLink=!0:r.previousLink=!1});var a={eventName:"rexlive:inlineImageEdit",data_to_send:{imgData:n,displayData:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}}),u.on("close",function(){setUserSetting("imgsize","full")}),u.on("open",function(){var e,t=u.state("me-image").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=u.state("me-image").get("inlineImgData"),n=null;"undefined"!=typeof o&&(n="undefined"!=typeof o.image_id?o.image_id:null),n&&(e=wp.media.attachment(n),e.fetch(),t.add(e?[e]:[]))}),u.open()}function r(e,t,o){if(setUserSetting("imgsize","full"),o="undefined"!=typeof o?o:null,c)return c.state("upload-image-bg").set("$data",e),c.state("upload-image-bg").set("$preview",t),c.state("upload-image-bg").set("image_id",o),void c.open();var n=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-image-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:o},wp.media.controller.Library.prototype.defaults)});c=wp.media({button:{text:"Select"},state:"upload-image-bg",states:[new n]}),c.on("close",function(){setUserSetting("imgsize","full");var t=c.state("upload-image-bg").get("selection");0==t.length&&e.val()}),c.on("select",function(){var e=c.state("upload-image-bg"),t=e.get("selection");t&&t.each(function(t){var o=e.display(t).toJSON(),n=t.toJSON();wp.media.view.settings.captions||delete n.caption,o=wp.media.string.props(o,n);var r=c.state("upload-image-bg").get("$data");r.val(n.id),r.attr("data-rex-image-bg-url",o.src),r.attr("data-rex-image-width",o.width),r.attr("data-rex-image-height",o.height),c.state("upload-image-bg").get("$preview").css("backgroundImage","url("+n.url+")"),c.state("upload-image-bg").get("$preview").children().css("display","none"),0!=r.parents("#rex-edit-background-section").length?Background_Section_Image_Modal.updateImageBackground():0!=r.parents("#block-edit-image-bg").length?Background_Block_Image_Modal.updateImageBackground():0!=r.parents("#block-edit-image-setting-bg").length&&Background_Block_Image_Setting.updateImageBackground()})}),c.on("open",function(){var e,t=c.state("upload-image-bg").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=c.state("upload-image-bg").get("image_id");o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),c.open()}function a(e){if(p)return void p.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-video",title:"Insert Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"video"}),type:"video"},wp.media.controller.Library.prototype.defaults)});p=wp.media({button:{text:"Select"},state:"insert-video",states:[new t]}),p.on("close",function(){}),p.on("select",function(){var e=p.state("insert-video"),t=e.get("selection"),o=[];t&&(t.each(function(t){var n={videoID:-1,videoUrl:"",width:"",height:""},r=e.display(t).toJSON(),a=t.toJSON();wp.media.view.settings.captions||delete a.caption,r=wp.media.string.props(r,a),n.videoID=a.id,n.videoUrl=a.url,n.width=a.width,n.height=a.height,o.push(n)}),Insert_Video_Modal.updateMp4VideoModal(o))}),p.on("open",function(){var e=p.state("insert-video").get("selection");e.each(function(t){if("undefined"!=typeof t){var o=wp.media.attachment(t.attributes.id);o.fetch(),e.remove(o?[o]:[])}})}),p.open()}function i(e,t){if(t="undefined"!=typeof t?t:null,m)return m.state("upload-video-bg").set("$data",e),m.state("upload-video-bg").set("video_id",t),void m.open();var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-video-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:e,video_id:t},wp.media.controller.Library.prototype.defaults)});m=wp.media({button:{text:"Select"},state:"upload-video-bg",states:[new o]}),m.on("close",function(){var t=m.state("upload-video-bg").get("selection");0==t.length&&e.val()}),m.on("select",function(){var e=m.state("upload-video-bg"),t=e.get("selection");t&&t.each(function(t){var o=e.display(t).toJSON(),n=t.toJSON();wp.media.view.settings.captions||delete n.caption,o=wp.media.string.props(o,n);var r=m.state("upload-video-bg").get("$data");r.val(n.id),r.attr("data-rex-video-bg-url",n.url),r.attr("data-rex-video-bg-width",n.width),r.attr("data-rex-video-bg-height",n.height),0!=r.parents("#video-section-editor-wrapper").length?(Section_Video_Background_Modal.updateVideoBackground(),Section_Video_Background_Modal.updateVideoMp4Link(n.url)):0!=r.parents("#video-block-editor-wrapper").length&&(Block_Video_Background_Modal.updateVideoBackground(),Block_Video_Background_Modal.updateVideoMp4Link(n.url))})}),m.on("open",function(){var e,t=m.state("upload-video-bg").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=m.state("upload-video-bg").get("video_id");o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),m.open()}function l(e){if(v)return v.state("accordion-gallery").set("gallery_data",e),void v.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"accordion-gallery",title:"Accordion Gallery",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),type:"image",gallery_data:e},wp.media.controller.Library.prototype.defaults)});v=wp.media({button:{text:"Select"},state:"accordion-gallery",states:[new t]}),v.on("close",function(){}),v.on("select",function(){var e=v.state("accordion-gallery"),t=e.get("selection");if(t){var o=v.state("accordion-gallery").get("gallery_data");o.modal_info.$accordion_preview_gallery.empty(),t.each(function(t){var n=e.display(t).toJSON(),r=t.toJSON();wp.media.view.settings.captions||delete r.caption;var a=wp.media.string.props(n,r);o.modal_info.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:r.id,preview:r.url,url:a.src,size:a.size}))})}}),v.on("open",function(){var e,t=v.state("accordion-gallery").get("selection");t.each(function(o){"undefined"!=typeof o&&(e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[]))});var o=v.state("accordion-gallery").get("gallery_data");if(o.image_info.length>0)for(var n=0;n<o.image_info.length;n++)e=wp.media.attachment(o.image_info[n].id),e.fetch(),t.add(e?[e]:[])}),v.open()}var d,c,s,u,p,m,v;return{openInsertImageBlocksMediaUploader:t,openEditImageMediaUploader:r,openImageLiveMediaUploader:o,openImageMEMediaUploader:n,openInsertVideoBlocksMediaUploader:a,openMediaUploaderVideo:i,openMediaUploaderAccordionGallery:l}}(jQuery),Rexlive_RexSlider_TextEditor=function(e){"use strict";var t,o,n,r,a,i=function(t,n,r,i){r="undefined"!=typeof r&&r,i="undefined"!=typeof i?i:[];var l=tinyMCE.get("rexbuilder_editor");"undefined"!=typeof t&&null!==t&&a.val(t),"undefined"==typeof l||null===l?(e("#rexbuilder_editor").val(n),e("#rexbuilder_editor").text(n)):(l.setContent(n),l.save({no_events:!0})),Rexlive_Modals_Utils.openModal(o,r,i)},l=function(){n.on("click",function(e){e.preventDefault(),a.val(""),Rexlive_Modals_Utils.closeModal(o,!1,["hide-padding-position"]),tinyMCE.triggerSave()}),r.on("click",function(e){e.preventDefault(),r.val(""),a.val(""),Rexlive_Modals_Utils.closeModal(o,!1,["hide-padding-position"])}),a.on("click",function(t){t.preventDefault(),"new-block"==r.val()&&(Rexpansive_Builder_Admin_Utilities.createNewTextBlock(),Rexpansive_Builder_Admin_Utilities.launchTooltips()),tinyMCE.triggerSave();var n=(tinyMCE.get("rexbuilder_editor"),e("#rexbuilder_editor")),a=n.val(),i=e(e(this).val()),l=i.attr("data-block_type");switch(l){case"image":i.find(".element-preview .backend-image-preview").empty().append(a.replace(/'/gi,"’"));break;case"slide":i.find("textarea[name=rex-slider--slide-text]").text(a.replace(/'/gi,"’")),""!=a?i.find(".rex-slider__slide-edit[value=text]").addClass("rex-slider__slide-edit__field-active-notice"):i.find(".rex-slider__slide-edit[value=text]").removeClass("rex-slider__slide-edit__field-active-notice");break;case"empty":i.attr("data-block_type","text").removeClass("empty").addClass("text").find(".element-preview").empty().append(a.replace(/'/gi,"’"));break;default:i.find(".element-preview").empty().append(a.replace(/'/gi,"’"))}i.find(".data-text-content").text(a.replace(/'/gi,"’")),r.val(""),Rexlive_Modals_Utils.closeModal(o,!1,["hide-padding-position"]),e(document).trigger("rexbuilder:block_content_edit",i)})},d=function(){t=e("#rexeditor-modal"),o=t.parent(".rex-modal-wrap"),n=e("#rexeditor-close"),r=e("#editor-cancel"),a=e("#editor-save")},c=function(){d(),l(),this.$text_editor=t,this.$text_editor_modal_wrap=o};return{init:c,openTextEditor:i}}(jQuery),Rexlive_Ajax_Calls=function(e){"use strict";var t=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success},error:function(e){}})},o=function(t,o){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&"undefined"!=typeof o&&"function"==typeof o.success.callback&&o.success.callback.call(this,o.success.args)},error:function(e){"undefined"!=typeof o&&"function"==typeof o.error.callback&&o.error.callback.call(this,o.error.args)}})},n=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success},error:function(e){}})},r=function(t,o){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&"undefined"!=typeof o&&"function"==typeof o.success.callback&&o.success.callback.call(this,o.success.args)},error:function(e){"undefined"!=typeof o&&"function"==typeof o.error.callback&&o.error.callback.call(this,o.error.args)}})},a=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(o){o.success&&e(".palette-list__gradient").each(function(o,n){var r=e(n),a=tmpl("tmpl-palette-item",{}),i=e(a);r.find(".palette__add-gradient").before(i),i.css("background",t.gradient_preview),i.attr("data-gradient-id",t.ID),i.attr("data-gradient-value",t.gradient)})},error:function(e){}})},i=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(o){o.success&&e(".palette-list__gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(t,o){e(o).remove()})},error:function(e){}})},l=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(o){o.success&&e(".palette-list__overlay-gradient").each(function(o,n){var r=e(n),a=tmpl("tmpl-palette-item",{}),i=e(a);r.find(".palette__add-gradient").before(i),i.css("background",t.gradient_preview),i.attr("data-gradient-id",t.ID),i.attr("data-gradient-value",t.gradient)})},error:function(e){}})},d=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(o){o.success&&e(".palette-list__overlay-gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(t,o){e(o).remove()})},error:function(e){}})};return{savePaletteColor:t,deletePaletteColor:o,savePaletteOverlayColor:n,deletePaletteOverlayColor:r,savePaletteColorGradient:a,deletePaletteColorGradient:i,savePaletteOverlayGradient:l,deletePaletteOverlayGradient:d}}(jQuery),Rexlive_Color_Palette=function(e){"use strict";var t,o=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object;var o=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(o)},n=function(){t.$container.hide().detach().appendTo(e("#wpwrap")),t.$spicker=null,t.action=null,t.object=null},r=function(){t.$add_color.on("click",function(o){if(o.preventDefault(),null!==t.$spicker){var n=t.$spicker.spectrum("get"),r=Rexbuilder_Util_Admin_Editor.createRandomID(4),a=n.toRgbString(),i={color:a,ID:r};Rexlive_Ajax_Calls.savePaletteColor(i);var l=tmpl("tmpl-palette-item",{}),d=e(l);t.$add_color.before(d),d.css("background",a),d.attr("data-color-id",r),d.attr("data-color-value",a)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-color-value");t&&i(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-color-id"),n={ID:o};Rexlive_Ajax_Calls.deletePaletteColor(n),Rexlive_Color_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowColorPaletteModal()}t.$spicker.spectrum("hide")})},a=function(t){e(t).remove()},i=function(e,o){var o=void 0!==typeof o&&o;""!==e&&(t.$spicker.spectrum("set",e),o&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},l=function(){var o=e(".sp-rex-color-palette");t={$spicker:null,object:null,action:null,$container:o,$add_color:o.find(".palette__add-color"),$palette_list:o.find(".palette-list"),$open_gradient_palette:o.find(".palette__open-gradient")},r()};return{init:l,show:o,hide:n,deletePaletteItem:a}}(jQuery),Rexlive_Overlay_Palette=function(e){"use strict";var t,o=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object;var o=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(o)},n=function(){t.$container.hide().detach().appendTo(e("#wpwrap")),t.$spicker=null,t.action=null,t.object=null},r=function(){t.$add_color.on("click",function(o){if(o.preventDefault(),null!==t.$spicker){var n=t.$spicker.spectrum("get"),r=Rexbuilder_Util_Admin_Editor.createRandomID(4),a=n.toRgbString(),i={overlay:a,ID:r};Rexlive_Ajax_Calls.savePaletteOverlayColor(i);var l=tmpl("tmpl-palette-item",{}),d=e(l);t.$add_color.before(d),d.css("background",a),d.attr("data-overlay-id",r),d.attr("data-overlay-value",a)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-overlay-value");t&&i(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-overlay-id"),n={ID:o};Rexlive_Ajax_Calls.deletePaletteOverlayColor(n),Rexlive_Overlay_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowOverlayPaletteModal()}t.$spicker.spectrum("hide")})},a=function(t){e(t).remove()},i=function(e,o){var o=void 0!==typeof o&&o;""!==e&&(t.$spicker.spectrum("set",e),o&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},l=function(){var o=e(".sp-rex-color-overlay-palette");t={$spicker:null,object:null,action:null,$container:o,$add_color:o.find(".palette__add-color"),$palette_list:o.find(".palette-list"),$open_gradient_palette:o.find(".palette__open-gradient")},r()};return{init:l,show:o,hide:n,deletePaletteItem:a}}(jQuery),Rexlive_Modals_Utils=function(e){"use strict";var t,o,n,r,a=function(o,n,a,i,c){if(n="undefined"!=typeof n&&n,a="undefined"!=typeof a?a:[],i="undefined"!=typeof i&&i,r=c,n?o.addClass("rex-in--up"):(e("body").addClass("rex-modal-open"),t.show()),o.addClass("rex-modal--active").fadeIn({duration:300}),a.length)for(var s=0;s<a.length;s++)o.find(".rex-modal").addClass(a[s]);i&&d(o.find(".rex-modal"),{x:100,y:0}),l(o.find(".rex-modal"))},i=function(o,n,a){if(n="undefined"!=typeof n&&n,a="undefined"!=typeof a?a:[],n||o.hasClass("rex-in--up")||(e("body").removeClass("rex-modal-open"),t.hide()),o.removeClass("rex-modal--active").fadeOut({duration:300}),o.hasClass("rex-in--up")&&o.removeClass("rex-in--up"),o.children().removeClass("rex-modal__bottom-arrow--active").removeClass("rex-modal__top-arrow--active"),a.length)for(var i=0;i<a.length;i++)o.find(".rex-modal").removeClass(a[i]);var d={$modal:o};Rexlive_Base_Settings.$document.trigger("rexlive:modal_closed",[d]),o.trigger("rexlive:this_modal_closed");var c={eventName:"rexlive:close_modal",blockID:r};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(c),l(o.find(".rex-modal"))},l=function(e){e.css("height","auto"),e.css("width","auto")},d=function(e,t){if("undefined"!=typeof t&&null!==t){var o=e.actual("height");e.css("left",t.x-Rexlive_Base_Settings.viewport().width/2+"px"),o<t.y?(e.addClass("rex-modal__bottom-arrow--active"),e.css("top",t.y-o+n.y+"px")):(e.addClass("rex-modal__top-arrow--active"),e.css("top",t.y+n.y+"px"))}else e.css("left","0px"),e.css("top","50px")},c=function(){Rexlive_Base_Settings.$document.on("click",".rex-modal-wrap",function(t){t.target===this&&i(e(this))}),Rexlive_Base_Settings.$document.on("keydown",function(e){27===e.keyCode&&s()})},s=function(){if(Rexbuilder_Util_Admin_Editor.$body.hasClass("rex-modal-open")){var t=Rexbuilder_Util_Admin_Editor.$body.find(".rex-modal--active");0<t.length&&t.each(function(t,o){i(e(o))})}},_=function(){t=e(".lean-overlay"),o=e(".rex-modal-draggable"),o.each(function(t,o){var n=e(o);n.draggable({cancel:"input,textarea,button,select,option,.rex-check-icon, .input-field, .rex-slider__slide-edit, #rex-css-ace-editor, #rex-html-ace-editor, label, .no-draggable",stop:function(t,o){l(e(this))}})}),n={x:0,y:-20},c()};return{init:_,openModal:a,closeModal:i,resetModalDimensions:l,close_focus_modal:s,positionModal:d}}(jQuery),Insert_Video_Modal=function(e){"use strict";var t,o,n,r=function(e){l(),n=e.sectionTarget,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$radioChooseYoutube.attr("checked",!1),t.$radioChooseVimeo.attr("checked",!1),t.$radioChooseMp4.attr("checked",!1)},l=function(){t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val("").next("label").removeClass("active"),i()},d=function(){t.$youTubeWrap.addClass("selected"),t.$radioChooseYoutube.attr("checked",!0),t.$linkYoutube.trigger("focus")},c=function(){t.$vimeoWrap.addClass("selected"),t.$radioChooseVimeo.attr("checked",!0),t.$linkVimeo.trigger("focus")},s=function(){t.$mp4Wrap.addClass("selected"),t.$radioChooseMp4.attr("checked",!0)},_=function(e){o=e,t.$linkMp4.val(e[0].videoUrl).next("label").addClass("active"),t.$linkMp4.trigger("focus")},u=function(){t.$self.find(".input-field").click(function(t){t.preventDefault(),i();var o=e(t.target);o.is("div")||(o=o.parents(".input-field"));var n=o.attr("data-rex-video-type");switch(n){case"youtube":d();break;case"vimeo":c();break;case"mp4":s()}}),t.$close_modal_btn.click(function(e){e.preventDefault(),a()}),t.$self.find(".set-video-audio-btn").click(function(t){t.preventDefault();var o=e(t.target),n=o.parents(".set-video-audio-btn"),r=n.find(".video-audio-checkbox"),a=r.attr("checked");a=!a,r.attr("checked",a)}),t.$self.find(".rex-video-type-select").click(function(t){t.preventDefault(),i();var o=e(t.target);0!=o.parents(".youtube-insert-wrap").length?d():0!=o.parents(".vimeo-insert-wrap").length?c():0!=o.parents(".mp4-insert-wrap").length&&s()}),t.$self.find("#rex-upload-mp4-video").click(function(e){Rexlive_MediaUploader.openInsertVideoBlocksMediaUploader()}),t.$self.find("#rex-insert-video-block-save").click(function(e){var r,i,l,d,c,s=t.$self.find(".video-insert-wrap.selected");s.hasClass("youtube-insert-wrap")?(r="youtube",i=t.$linkYoutube.val(),c=t.$audioYoutube.attr("checked")):s.hasClass("vimeo-insert-wrap")?(r="vimeo",l=t.$linkVimeo.val(),c=t.$audioVimeo.attr("checked")):s.hasClass("mp4-insert-wrap")&&(r="mp4",d=o,c=t.$audioMp4.attr("checked")),c="undefined"!=typeof c&&"checked"==c;var _={eventName:"rexlive:insert_video",data_to_send:{urlYoutube:i,urlVimeo:l,videoMp4:d,hasAudio:c,typeVideo:r,sectionTarget:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(_),a()})},p=function(){var n=e("#rex-insert-new-video-block");t={$self:n,$close_modal_btn:n.find(".rex-modal__close-button"),$linkYoutube:n.find("#rex-insert-youtube-url"),$linkVimeo:n.find("#rex-insert-vimeo-url"),$linkMp4:n.find("#rex-insert-mp4-url"),$audioYoutube:n.find("#rex-new-block-video-youtube-audio"),$audioVimeo:n.find("#rex-new-block-video-vimeo-audio"),$audioMp4:n.find("#rex-new-block-video-mp4-audio"),$radioChooseYoutube:n.find("#rex-choose-youtube-video"),$radioChooseVimeo:n.find("#rex-choose-vimeo-video"),$radioChooseMp4:n.find("#rex-choose-mp4-video"),$youTubeWrap:n.find("#insert-video-block-wrap-1"),$vimeoWrap:n.find("#insert-video-block-wrap-2"),$mp4Wrap:n.find("#insert-video-block-wrap-3")},o=null,u()};return{init:p,openVideoModal:r,updateMp4VideoModal:_}}(jQuery),LayoutGrid_Modal=function(e){"use strict";var t,o,n=function(e){o=e.sectionTarget,i(e.activeLayout)},r=function(){a()},a=function(){t.$section_layout_typeWrap.each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)})},i=function(e){t.$choose_layout.prop("checked","fixed"==e)},l=function(){var e=t.$choose_layout.prop("checked"),o={layout:1==e?"fixed":"masonry"};return o},d=function(){var e=l();Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.layout}),Rexbuilder_Util_Admin_Editor.updateLayoutTool(),Rexbuilder_Util_Admin_Editor.updateLayoutCheckboxTool();var t={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:o,layout:e.layout}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},c=function(){Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-layout-type",function(t){t.preventDefault(),a();var o=e(t.target).parents(".rexlive-layout-type");o.addClass("selected"),o.find("input").attr("checked",!0),d()}),t.$choose_layout.on("change",function(e){d()})},s=function(e){t={$section_layout_typeWrap:e.find(".rexlive-layout-type"),$section_layout_types_wrap:e.find(".rex-edit-layout-wrap"),$choose_layout:e.find(".builder-edit-row-layout-checkbox")},c()};return{init:s,getData:l,updateLayoutModal:n,clearLayoutModal:r}}(jQuery),Section_Width_Modal=function(e){"use strict";var t,o,n,r,a=function(){o.dimension="",o.sectionWidth="",o.widthType=""},i=function(e){l(),r=e.sectionTarget;var n=e.dimension,a=e.section_width,i="%",d="100";"full"!=n&&(d=parseInt(a),a.indexOf("%")==-1&&(i="px")),o.type=n,o.sectionWidth=d,o.dimension=i,t.$section_boxed_width_input.val(d);var c=t.$section_width_type.children('[data-rex-section-width="'+n+'"]');c.addClass("selected"),c.find("input").attr("checked",!0);var s=t.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+i+'"]');s.addClass("selected"),s.find("input").attr("checked",!0)},l=function(){t.$section_width_type_wrap.each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)}),t.$section_boxed_width_input.val("")},d=function(){t.$section_boxed_width_wrap.children().each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)})},c=function(e){d(),t.$section_boxed_width_input.val(e.sectionWidth);var o=t.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+e.dimension+'"]');o.addClass("selected"),o.find("input").attr("checked",!0)},s=function(){var e=t.$section_boxed_width_input.val(),o=t.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type");return{width:e,type:o}},_=function(){var e=t.$section_boxed_width_input.val(),o=t.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type");Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e+o,dimension:"100%"===e+o?"full":"boxed"}),Rexbuilder_Util_Admin_Editor.updateWidthTool();var n={eventName:"rexlive:set_section_width",data_to_send:{sectionWidth:{width:e,type:o},sectionTarget:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},u=function(t){t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},p=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),_())})},m=function(){Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .boxed-width-type-wrap",function(o){o.preventDefault();var r="full"==t.$section_width_type.children(".selected").attr("data-rex-section-width");d();var a=e(o.target).parents(".boxed-width-type-wrap");if(a.addClass("selected"),a.find("input").attr("checked",!0),r&&"px"==a.attr("data-rex-section-width-type")){l();var i=t.$section_width_type.children('[data-rex-section-width="boxed"]');i.addClass("selected"),i.find("input").attr("checked",!0),t.$section_boxed_width_input.val(n.boxed.sectionWidth)}_()}),Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-section-width",function(t){t.preventDefault(),l();var r=e(t.target).parents(".rexlive-section-width");r.addClass("selected"),r.find("input").attr("checked",!0);var a=r.attr("data-rex-section-width");c(a!=o.type?"boxed"==a?n.boxed:n.full:o),_()}),p(t.$section_boxed_width_input),u(t.$section_boxed_width_input)},v=function(e){var r=e.find(".section-width-wrapper");t={$self:r,$section_width_type_wrap:r.find(".rexlive-section-width"),$section_width_type:r.find(".rex-edit-row-width"),$section_full:r.find("#section-full-modal"),$section_boxed:r.find("#section-boxed-modal"),$section_boxed_width_input:r.find(".section-set-boxed-width"),$section_boxed_width_type:r.find(".section-width-type"),$section_boxed_width_wrap:r.find(".section-set-boxed-width-wrap")},n={boxed:{type:"boxed",dimension:"%",sectionWidth:"80"},full:{type:"full",dimension:"%",sectionWidth:"100"}},o={dimension:"",sectionWidth:"",widthType:""},m()};return{init:v,resetOldWidthData:a,getData:s,clearSectionWidth:l,updateSectionWidth:i,applySectionWidth:_}}(jQuery),GridSeparators_Modal=function(e){"use strict";var t,o,n,r=function(){t.$block_gutter.val(o.gutter),t.$row_separator_top.val(o.top),t.$row_separator_right.val(o.right),t.$row_separator_bottom.val(o.bottom),t.$row_separator_left.val(o.left)},a=function(e){n=e.sectionTarget;var r=e.rowDistances,a=isNaN(r.gutter)?o.gutter:r.gutter,i=isNaN(r.top)?o.top:r.top,l=isNaN(r.right)?o.right:r.right,d=isNaN(r.bottom)?o.bottom:r.bottom,c=isNaN(r.left)?o.left:r.left;t.$block_gutter.val(a),t.$row_separator_top.val(i),t.$row_separator_right.val(l),t.$row_separator_bottom.val(d),t.$row_separator_left.val(c)},i=function(){
var e=parseInt(t.$block_gutter.val()),n=parseInt(t.$row_separator_top.val()),r=parseInt(t.$row_separator_right.val()),a=parseInt(t.$row_separator_bottom.val()),i=parseInt(t.$row_separator_left.val()),l={gutter:isNaN(e)?o.gutter:e,top:isNaN(n)?o.top:n,right:isNaN(r)?o.right:r,bottom:isNaN(a)?o.bottom:a,left:isNaN(i)?o.left:i};return l},l=function(){var e=i();Rexbuilder_Util_Admin_Editor.highlightRowSetData({block_distance:e.gutter,row_separator_top:e.top,row_separator_right:e.right,row_separator_bottom:e.bottom,row_separator_left:e.left});var t={eventName:"rexlive:set_row_separatos",data_to_send:{distances:i(),sectionTarget:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(t){t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},c=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),l())})},s=function(){d(t.$block_gutter),d(t.$row_separator_top),d(t.$row_separator_right),d(t.$row_separator_bottom),d(t.$row_separator_left),c(t.$block_gutter),c(t.$row_separator_top),c(t.$row_separator_right),c(t.$row_separator_bottom),c(t.$row_separator_left)},_=function(e){var n=e;t={$self:n,$block_gutter:n.find(".section-set-block-gutter"),$row_separator_top:n.find("#row-separator-top"),$row_separator_right:n.find("#row-separator-right"),$row_separator_bottom:n.find("#row-separator-bottom"),$row_separator_left:n.find("#row-separator-left")},o={gutter:20,top:20,right:20,bottom:20,left:20},r(),s()};return{init:_,updateDistances:a,resetDistances:r,getData:i}}(jQuery),SectionMargins_Modal=function(e){"use strict";var t,o,n,r=function(){t.$row_margin_top.val(o.top),t.$row_margin_right.val(o.right),t.$row_margin_bottom.val(o.bottom),t.$row_margin_left.val(o.left)},a=function(e){n=e.sectionTarget;var r=e.marginsSection,a=isNaN(r.top)?o.top:r.top,i=isNaN(r.right)?o.right:r.right,l=isNaN(r.bottom)?o.bottom:r.bottom,d=isNaN(r.left)?o.left:r.left;t.$row_margin_top.val(a),t.$row_margin_right.val(i),t.$row_margin_bottom.val(l),t.$row_margin_left.val(d)},i=function(){var e=parseInt(t.$row_margin_top.val()),n=parseInt(t.$row_margin_right.val()),r=parseInt(t.$row_margin_bottom.val()),a=parseInt(t.$row_margin_left.val()),i={top:isNaN(e)?o.top:e,right:isNaN(n)?o.right:n,bottom:isNaN(r)?o.bottom:r,left:isNaN(a)?o.left:a};return i},l=function(){var e=i();Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_margin_top:e.top,row_margin_bottom:e.bottom,row_margin_right:e.right,row_margin_left:e.left});var t={eventName:"rexlive:set_section_margins",data_to_send:{margins:e,sectionTarget:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(t){t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val()-1))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},c=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),l())})},s=function(){d(t.$row_margin_top),d(t.$row_margin_right),d(t.$row_margin_bottom),d(t.$row_margin_left),c(t.$row_margin_top),c(t.$row_margin_right),c(t.$row_margin_bottom),c(t.$row_margin_left)},_=function(e){t={$row_margin_top:e.find("#row-margin-top"),$row_margin_right:e.find("#row-margin-right"),$row_margin_bottom:e.find("#row-margin-bottom"),$row_margin_left:e.find("#row-margin-left")},o={top:0,right:0,bottom:0,left:0},r(),s()};return{init:_,updateMargins:a,resetMargins:r,getData:i}}(jQuery),PhotoSwipe_Modal=function(e){"use strict";var t,o,n,r=function(){t.$section_active_photoswipe.attr("checked",o)},a=function(e){n=e.sectionTarget,t.$section_active_photoswipe.attr("checked",e.photoswipe)},i=function(){var e=!0===t.$section_active_photoswipe.prop("checked")?"true":"false";return e},l=function(){var e=i();Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_active_photoswipe:e});var t={eventName:"rexlive:set_row_photoswipe",data_to_send:{sectionTarget:n,photoswipe:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$section_active_photoswipe.click(function(e){l()})},c=function(e){t={$section_active_photoswipe:e.find("#section-active-photoswipe")},o=!1,r(),d()};return{init:c,updatePhotoswipe:a,resetPhotoswipe:r,getData:i}}(jQuery),Hold_Grid_Modal=function(e){"use strict";var t,o,n,r=function(){t.$element.attr("checked",o)},a=function(e){n=e.sectionTarget;var o=!1;-1!==e.customClasses.indexOf("rex-block-grid")&&(o=!0),t.$element.attr("checked",o)},i=function(){return t.$element.prop("checked")},l=function(){var e=i(),t=Section_CustomClasses_Modal.getData(),o={sectionTarget:n,customClasses:""};e?o.customClasses=t+" rex-block-grid":(t=t.replace(/\s*rex-block-grid/,""),o.customClasses=t),o.customClasses=o.customClasses.trim(),Section_CustomClasses_Modal.update(o),Section_CustomClasses_Modal.apply()},d=function(){t.$element.click(l)},c=function(e){t={$element:e.find("#rx-hold-grid")},o=!1,r(),d()};return{init:c,getData:i,update:a,reset:r}}(jQuery),FullHeight_Modal=function(e){"use strict";var t,o,n,r=function(){t.$is_full.prop("checked",o)},a=function(e){n=e.sectionTarget,t.$is_full.prop("checked","true"==e.fullHeight)},i=function(){var e=!0===t.$is_full.prop("checked")?"true":"false";return e},l=function(){var e=i();Rexbuilder_Util_Admin_Editor.highlightRowSetData({full_height:e});var t={eventName:"rexlive:set_row_fullHeight",data_to_send:{sectionTarget:n,fullHeight:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$is_full.click(function(){l()})},c=function(e){t={$is_full:e.find("#section-is-full")},o=!1,r(),d()};return{init:c,updateFullHeight:a,resetFullHeight:r}}(jQuery),SectionName_Modal=function(e){"use strict";var t,o,n,r=function(){t.$section_id.val(o)},a=function(e){n=e.sectionTarget,t.$section_id.val(e.sectionName),""!=e.sectionName?t.$section_id.focus():t.$section_id.blur()},i=function(){var e=t.$section_id.val();return e},l=function(){var e=i();Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_name:e});var t={eventName:"rexlive:change_section_name",data_to_send:{sectionTarget:n,sectionName:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$section_id.keyup(function(e){l()})},c=function(e){t={$section_id:e.find("#sectionid-container")},o="",r(),d()};return{init:c,updateSectionName:a,resetSectionName:r,getData:i}}(jQuery),Rexlive_Top_Tools=function(e){"use strict";var t,o=function(){t=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-toolbox__toggle-wrap .close-toolbox")},n=function(){t.on("click",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.toggleClass("toolbox--closed")})},r=function(){o(),n()};return{init:r}}(jQuery),Section_CustomClasses_Modal=function(e){"use strict";var t,o,n,r,a=function(){},i=function(e){r=e.sectionTarget;var o=e.customClasses;n="",o.indexOf("active-large-overlay")!==-1&&(n+=" active-large-overlay",o=o.replace("active-large-overlay","")),o.indexOf("active-medium-overlay")!==-1&&(n+=" active-medium-overlay",o=o.replace("active-medium-overlay","")),o.indexOf("active-small-overlay")!==-1&&(n+=" active-small-overlay",o=o.replace("active-small-overlay","")),o.indexOf("rex-block-grid")!==-1&&(n+=" rex-block-grid",o=o.replace("rex-block-grid","")),""==o?t.$classes.siblings("label, .prefix").removeClass("active"):t.$classes.siblings("label, .prefix").addClass("active"),t.$classes.val(o)},l=function(){var e=d();e=e.trim();var t=e.split(/\s+/);Rexbuilder_Util_Admin_Editor.highlightRowSetData({custom_classes:t});var o={eventName:"rexlive:apply_section_custom_classes",data_to_send:{sectionTarget:r,customClasses:t}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o)},d=function(){var e=t.$classes.val();return e+=n},c=function(){t.$classes.blur(l)},s=function(e){t={$classes:e.find("#section-set-custom-class")},o="",a(),c()};return{init:s,getData:d,update:i,reset:a,apply:l}}(jQuery),Section_Modal=function(e){"use strict";var t,o=function(e,o){r(),a(e),Rexlive_Modals_Utils.positionModal(t.$self,o),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap")),setTimeout(function(){r()},300)},r=function(){LayoutGrid_Modal.clearLayoutModal(),Section_Width_Modal.clearSectionWidth(),GridSeparators_Modal.resetDistances(),SectionMargins_Modal.resetMargins(),PhotoSwipe_Modal.resetPhotoswipe(),Hold_Grid_Modal.reset(),FullHeight_Modal.resetFullHeight(),SectionName_Modal.resetSectionName(),Section_CustomClasses_Modal.reset()},a=function(e){LayoutGrid_Modal.updateLayoutModal(e),Section_Width_Modal.updateSectionWidth(e),GridSeparators_Modal.updateDistances(e),SectionMargins_Modal.updateMargins(e),PhotoSwipe_Modal.updatePhotoswipe(e),Hold_Grid_Modal.update(e),FullHeight_Modal.updateFullHeight(e),SectionName_Modal.updateSectionName(e),Section_CustomClasses_Modal.update(e)},i=function(){t.$close_button.click(function(e){e.preventDefault(),n()})},l=function(){var o=e("#modal-background-responsive-set");t={$self:o,$close_button:o.find(".rex-modal__close-button")},i(),LayoutGrid_Modal.init(o),Section_Width_Modal.init(o),GridSeparators_Modal.init(o),SectionMargins_Modal.init(o),PhotoSwipe_Modal.init(o),Hold_Grid_Modal.init(o),FullHeight_Modal.init(o),SectionName_Modal.init(o),Section_CustomClasses_Modal.init(o)};return{init:l,openSectionModal:o}}(jQuery),Background_Section_Color_Modal=function(e){"use strict";var t,o,n,r,a,i=function(e){r=e.sectionTarget,a.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(t.$color_runtime_value.val(e.color),t.$color_preview_icon.hide(),t.$color_value.spectrum("set",e.color)):(t.$color_runtime_value.val(""),t.$color_preview_icon.show(),t.$color_value.spectrum("set","")),o=e.color,n="true"==e.active.toString(),n?t.$color_active.prop("checked",!0):t.$color_active.prop("checked",!1)},l=function(){var e=!0===t.$color_active.prop("checked");n=e;var a={eventName:"rexlive:apply_background_color_section",data_to_send:{color:n?o:"",active:n,sectionTarget:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},d=function(){a={eventName:"rexlive:change_section_bg_color",data_to_send:{color:null,sectionTarget:{}}};var r;t.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){r=!1},move:function(e){t.$color_preview_icon.hide(),a.data_to_send.color=n?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a),r=!0},change:function(e){t.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){r&&(o=e.toRgbString()),t.$color_runtime_value.val(o),l()},cancelText:"",chooseText:""});var i=tmpl("tmpl-tool-close",{}),d=e(i);t.$color_value.spectrum("container").append(d),d.on("click",function(e){e.preventDefault(),t.$color_value.spectrum("hide")}),t.$color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$color_preview_icon.hide(),t.$color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$color_value.spectrum("set",r),t.$color_runtime_value.val(r),o=r,l()}),e(".block-background-color-picker .sp-choose").on("click",function(){t.$color_preview_icon.hide(),t.$color_runtime_value.val(t.$color_value.spectrum("get"))}),t.$color_preview_icon.on("click",function(){return t.$color_value.spectrum("show"),!1})},c=function(e){var r=e.find("#background-section-set-color");t={$color_active:r.find("#color-section-active"),$color_active_wrapper:r.find(".bg-color-section-active-wrapper"),$color_runtime_value:r.find("#background-section-color-runtime"),$color_value:r.find("#background-section-color"),$color_preview_icon:r.find("#background-section-preview-icon"),$color_palette_wrap:r.find("#bg-section-color-palette"),$color_palette_buttons:r.find("#bg-section-color-palette .bg-palette-selector")},n=!0,d(),t.$color_active_wrapper.click(function(e){e.preventDefault();var n=!0===t.$color_active.prop("checked");n?(t.$color_active.prop("checked",!1),o=""):(t.$color_active.prop("checked",!0),o=t.$color_runtime_value.val()),l()})};return{init:c,updateColorModal:i}}(jQuery),Overlay_Color_Section_Modal=function(e){"use strict";var t,o,n,r,a=function(e){r=e.sectionTarget,n.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(t.$overlay_color_value.val(e.color),t.$overlay_color_preview_icon.hide(),t.$overlay_color_value.spectrum("set",e.color),o=e.color):(t.$overlay_color_value.val(""),t.$overlay_color_preview_icon.show()),"true"==e.active.toString()?t.$overlay_active.prop("checked",!0):t.$overlay_active.prop("checked",!1)},i=function(){var e=!0===t.$overlay_active.prop("checked"),n={eventName:"rexlive:change_section_overlay",data_to_send:{color:o,active:e,sectionTarget:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},l=function(){n={eventName:"rexlive:change_section_overlay_color",data_to_send:{color:null,sectionTarget:{}}},t.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){t.$overlay_color_preview_icon.hide(),n.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},change:function(e){t.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){o=e.toRgbString(),i()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$overlay_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$overlay_color_value.spectrum("hide")}),t.$overlay_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$overlay_color_preview_icon.hide(),t.$overlay_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$overlay_color_value.spectrum("set",r),o=r,i()}),e(".block-overlay-color-picker .sp-choose").on("click",function(){t.$overlay_color_preview_icon.hide()}),t.$overlay_color_preview_icon.on("click",function(){return t.$overlay_color_value.spectrum("show"),!1})},d=function(e){t={$overlay_active:e.find("#overlay-section-active"),$overlay_active_wrapper:e.find(".overlay-active-wrapper"),$overlay_color_value:e.find("#overlay-color-row-value"),$overlay_color_preview_icon:e.find("#overlay-row-preview-icon"),$overlay_color_palette_buttons:e.find("#bg-overlay-row-color-palette .bg-palette-selector")},l(),t.$overlay_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$overlay_active.prop("checked");o?t.$overlay_active.prop("checked",!1):t.$overlay_active.prop("checked",!0),i()})};return{init:d,updateOverlayModal:a}}(jQuery),Background_Section_Image_Modal=function(e){"use strict";var t,o,n,r=function(e){n=e.sectionTarget,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),o="true"==e.active.toString(),o?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1)},a=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),o=!0,t.$image_active.prop("checked",!0)},i=function(){var e=!0===t.$image_active.prop("checked");o=e;var r=t.$image_url.val(),a="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),i="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),l="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),d={eventName:"rexlive:apply_background_image_section",data_to_send:{idImage:o?r:"",urlImage:o?a:"",width:o?i:"",height:o?l:"",active:o,sectionTarget:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d)},l=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var n=!0===t.$image_active.prop("checked");n?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),o=n,i()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())})},d=function(e){var n=e.find("#section-edit-image-bg");t={$image_upload_wrap:n.find("#bg-section-set-img-wrap"),$image_active:n.find("#image-section-active"),$image_active_wrapper:n.find(".bg-image-section-active-wrapper"),$image_preview:n.find("#bg-section-img-preview"),$image_preview_icon:n.find("#bg-section-img-preview i"),$image_url:n.find("#background-section-url"),$image_id:n.find("#background-section-up-img")},o=!0,l()};return{init:d,updateImageModal:r,resetImageModal:a,updateImageBackground:i}}(jQuery),Section_Video_Background_Modal=function(e){"use strict";var t,o,n,r=function(e,o){i(e.bgVideo),Rexlive_Modals_Utils.positionModal(t.$self,o),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(e){d(),n=e.sectionTarget,""!=e.mp4VideoID?(o="mp4",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(e.mp4VideoID),t.$linkMp4.attr("data-rex-video-bg-url",e.mp4Video),t.$linkMp4Preview.val(e.mp4Video).next("label").addClass("active"),_()):""!=e.vimeoUrl?(o="vimeo",t.$linkVimeo.val(e.vimeoUrl),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),s()):""!=e.youtubeVideo&&(o="youtube",t.$linkVimeo.val(""),t.$linkYoutube.val(e.youtubeVideo),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),c())},l=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.next("label").removeClass("active"),t.$linkVimeo.next("label").removeClass("active"),t.$linkMp4Preview.next("label").removeClass("active")},d=function(){l(),o="",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4Preview.val("").next("label").removeClass("active")},c=function(){t.$youTubeWrap.hasClass("selected")?(t.$youTubeWrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkYoutube.val()&&t.$linkYoutube.next("label").removeClass("active"),o=""):(t.$checkboxChooseYoutube.attr("checked",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$youTubeWrap.addClass("selected"),t.$linkYoutube.next("label").addClass("active"),t.$linkVimeo.attr("disabled",!0),o="youtube"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},s=function(){t.$vimeoWrap.hasClass("selected")?(t.$vimeoWrap.removeClass("selected"),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkVimeo.val()&&t.$linkVimeo.next("label").removeClass("active"),o=""):(t.$checkboxChooseVimeo.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$vimeoWrap.addClass("selected"),t.$linkVimeo.next("label").addClass("active"),t.$linkYoutube.attr("disabled",!0),o="vimeo"),t.$youTubeWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},_=function(){t.$mp4Wrap.hasClass("selected")?(t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkMp4Preview.val()&&t.$linkMp4Preview.next("label").removeClass("active"),o=""):(t.$checkboxChooseMp4.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$mp4Wrap.addClass("selected"),t.$linkMp4Preview.next("label").addClass("active"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.attr("disabled",!0),o="mp4"),t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected")},u=function(){var e="",o=t.$linkYoutube.val(),r=t.$linkVimeo.val(),a={linkMp4:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-url")?"":t.$linkMp4.attr("data-rex-video-bg-url"),idMp4:t.$linkMp4.val()},i={linkMp4:"",idMp4:""},l=t.$self.find(".video-insert-wrap.selected");l.hasClass("youtube-insert-wrap")?e="youtube":l.hasClass("vimeo-insert-wrap")?e="vimeo":l.hasClass("mp4-insert-wrap")&&(e="mp4"),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:""==e||"youtube"!=e?"":o,video_bg_id_section:""==e||"mp4"!=e?"":a.idMp4,video_bg_url_vimeo_section:""==e||"vimeo"!=e?"":r,video_mp4_url:""==e||"mp4"!=e?"":a.linkMp4}),Rexbuilder_Util_Admin_Editor.updateBkgrVidTool();var d={eventName:"rexlive:update_section_background_video",data_to_send:{urlYoutube:""==e||"youtube"!=e?"":o,urlVimeo:""==e||"vimeo"!=e?"":r,videoMp4:""==e||"mp4"!=e?i:a,typeVideo:e,sectionTarget:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d)},p=function(){t.$chooseVideoWrapper.click(function(t){t.preventDefault();var n=e(t.target);!n.hasClass("youtube-insert-wrap")&&0==n.parents(".youtube-insert-wrap").length||"youtube"!=o&&""!=o?!n.hasClass("vimeo-insert-wrap")&&0==n.parents(".vimeo-insert-wrap").length||"vimeo"!=o&&""!=o?!n.hasClass("mp4-insert-wrap")&&(0==n.parents(".mp4-insert-wrap").length||n.is("i"))||"mp4"!=o&&""!=o||(_(),u()):(s(),u()):(c(),u())}),t.$uploadMp4.click(function(){t.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(t.$linkMp4,t.$linkMp4.val())}),t.$close_button.on("click",function(e){e.preventDefault(),a()})},m=function(e){t.$linkMp4Preview.val(e).next("label").addClass("active")},v=function(){var n=e("#video-section-editor-wrapper");t={$self:n,$linkYoutube:n.find("#rex-youtube-video-section"),$linkVimeo:n.find("#rex-vimeo-video-section"),$linkMp4:n.find("#video-section-mp4-url"),$linkMp4Preview:n.find("#rex-mp4-video-section-preview"),$checkboxChooseYoutube:n.find("#rex-choose-youtube-video-section"),$checkboxChooseVimeo:n.find("#rex-choose-vimeo-video-section"),$checkboxChooseMp4:n.find("#rex-choose-mp4-video-section"),$chooseVideoWrapper:n.find(".rex-video-type-select"),$uploadMp4:n.find("#rex-upload-mp4-video-section"),$youTubeWrap:n.find("#edit-video-row-wrap-1"),$vimeoWrap:n.find("#edit-video-row-wrap-2"),$mp4Wrap:n.find("#edit-video-row-wrap-3"),$close_button:n.find(".rex-modal__close-button")},o="",p()};return{init:v,clearVideoModal:d,updateVideoModal:i,updateVideoBackground:u,openSectionVideoBackgroundModal:r,updateVideoMp4Link:m}}(jQuery),Rexlive_Section_Background_Gradient=function(e){"use strict";var t,o,n=function(e){c(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var o=t.getEl().querySelector("#colorpicker"),n=e(o);n.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",n.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(n),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(n)})},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){_()}),t.$add_palette.on("click",function(e){e.preventDefault();var o=t.gpicker.getValue(),n=t.gpicker.getSafeValue(),r=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:o,gradient_preview:n,ID:r})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");s(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:o})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},c=function(e){o=e.sectionTarget,s(e.gradient,!0)},s=function(e,o){if(o="undefined"!=typeof o&&o,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:o});var n=t.gpicker.getType(),r=t.gpicker.getDirection();t.$gradient_type.find("option[value="+n+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+r+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:o}),t.$gradient_type.val(""),t.$gradient_angle.val("")},_=function(){var e={eventName:"rexlive:updateSectionBackgroundGradient",data_to_send:{sectionTarget:o,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},u=function(){var o=e("#rex-section-background-gradient-editor"),n="#gp-section-background-gradient";t={$self:o,$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button"),$gpicker:o.find(n),gpicker_selector:n,gpicker:null,$gradient_type:o.find("#section-background-gradient-type"),$gradient_angle:o.find("#section-background-gradient-angle"),$palette_list:o.find(".palette-list"),$add_palette:o.find(".palette__add-gradient")},a(),i(),d()};return{init:u,openModal:n,deletePaletteItem:l}}(jQuery),Rexlive_Section_Overlay_Gradient=function(e){"use strict";var t,o,n=function(e){c(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var o=t.getEl().querySelector("#colorpicker"),n=e(o);n.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",n.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(n),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(n)})},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){_()}),t.$add_palette.on("click",function(e){e.preventDefault();var o=t.gpicker.getValue(),n=t.gpicker.getSafeValue(),r=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:o,gradient_preview:n,ID:r})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");s(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:o})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},c=function(e){o=e.sectionTarget,s(e.gradient,!0)},s=function(e,o){if(o="undefined"!=typeof o&&o,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:o});var n=t.gpicker.getType(),r=t.gpicker.getDirection();t.$gradient_type.find("option[value="+n+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+r+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:o}),t.$gradient_type.val(""),t.$gradient_angle.val("")},_=function(){var e={eventName:"rexlive:updateSectionOverlayGradient",data_to_send:{sectionTarget:o,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},u=function(){var o=e("#rex-section-overlay-gradient-editor"),n="#gp-section-overlay-gradient";t={$self:o,$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button"),$gpicker:o.find(n),gpicker_selector:n,gpicker:null,$gradient_type:o.find("#section-overlay-gradient-type"),$gradient_angle:o.find("#section-overlay-gradient-angle"),$palette_list:o.find(".palette-list"),$add_palette:o.find(".palette__add-gradient")},a(),i(),d()};return{init:u,openModal:n,deletePaletteItem:l}}(jQuery),SectionBackground_Modal=function(e){"use strict";var t,o=function(e){Background_Section_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_Section_Modal.updateOverlayModal(e.overlay),Background_Section_Image_Modal.updateImageModal(e.imageBG),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Background_Section_Image_Modal.resetImageModal(),Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.click(function(e){e.preventDefault(),n()})},a=function(){var o=e("#rex-edit-background-section");t={$self:o,$close_button:o.find(".rex-modal__close-button")},Background_Section_Color_Modal.init(o),Background_Section_Image_Modal.init(o),Overlay_Color_Section_Modal.init(o),r()};return{init:a,openSectionBackgroundModal:o}}(jQuery),CssEditor_Modal=function(e){"use strict";var t,o,n,r=function(e){"undefined"==typeof e||""==e.trim()?o.setValue(n):o.setValue(e),
o.clearSelection(),Rexlive_Modals_Utils.openModal(t.$modal_wrap)},a=function(){Rexlive_Modals_Utils.closeModal(t.$modal_wrap)},i=function(){t.$save_button.on("click",function(e){e.preventDefault();var n=o.getValue(),r={eventName:"rexlive:SetCustomCSS",data_to_send:{customCSS:n}};t.$self.addClass("setting-saving"),setTimeout(function(){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r),a(),t.$self.removeClass("setting-saving")},800)}),t.$cancel_button.on("click",function(e){a()}),t.$open_button.on("click",function(e){var t={eventName:"rexlive:getCustomCss"};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)})},l=function(){var r=e("#rex-css-editor");t={$self:r,$modal_wrap:null,$save_button:r.find("#css-editor-save"),$cancel_button:r.find("#css-editor-cancel"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#open-css-editor")},o=ace.edit("rex-css-ace-editor"),t.$modal_wrap=r.parent(".rex-modal-wrap"),o.setTheme("ace/theme/monokai"),o.getSession().setMode("ace/mode/css"),o.on("change",function(e){Rexbuilder_Util_Admin_Editor.editPageProperties()}),n="",i()};return{init:l,openModal:r}}(jQuery),HtmlEditor_Modal=function(e){"use strict";var t,o,n,r=function(e){"undefined"==typeof e||""==e.trim()?o.setValue(n):o.setValue(e),o.clearSelection(),Rexlive_Modals_Utils.openModal(t.$modal_wrap)},a=function(){Rexlive_Modals_Utils.closeModal(t.$modal_wrap)},i=function(){t.$save_button.on("click",function(e){e.preventDefault();var n=o.getValue(),r={eventName:"rexlive:SetcustomHTML",data_to_send:{customHTML:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r),t.$self.addClass("setting-saving").on(Rexbuilder_Util_Admin_Editor.animationEvent,function(e){a(),t.$self.removeClass("setting-saving")})}),t.$close_button.on("click",function(e){a()})},l=function(){var r=e("#rex-html-text-editor");t={$self:r,$modal_wrap:null,$save_button:r.find(".rex-modal__save-button"),$close_button:r.find(".rex-modal__close-button"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#test-html-editor")},t.$modal_wrap=r.parent(".rex-modal-wrap"),o=ace.edit("rex-html-ace-editor"),o.setTheme("ace/theme/monokai"),o.getSession().setMode("ace/mode/html"),o.getSession().setUseWrapMode(!0),o.getSession().setTabSize(2),n="",i()};return{init:l,openModal:r}}(jQuery),Background_Block_Color_Modal=function(e){"use strict";var t,o,n,r,a,i=function(e){r=e.target,a.data_to_send.target=e.target,""!=e.color?(t.$color_runtime_value.val(e.color),t.$color_preview_icon.hide(),t.$color_value.spectrum("set",e.color)):(t.$color_runtime_value.val(""),t.$color_preview_icon.show(),t.$color_value.spectrum("set","")),o=e.color,n="true"==e.active.toString(),n?t.$color_active.prop("checked",!0):t.$color_active.prop("checked",!1)},l=function(){var e=!0===t.$color_active.prop("checked");n=e;var a={eventName:"rexlive:apply_background_color_block",data_to_send:{color:n?o:"",active:n,target:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},d=function(){a={eventName:"rexlive:change_block_bg_color",data_to_send:{color:null,target:{}}};var r;t.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){r=!1},move:function(e){t.$color_preview_icon.hide(),a.data_to_send.color=n?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a),r=!0},change:function(e){t.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){r&&(o=e.toRgbString()),t.$color_runtime_value.val(o),l()},cancelText:"",chooseText:""});var i=tmpl("tmpl-tool-close",{}),d=e(i);t.$color_value.spectrum("container").append(d),d.on("click",function(e){e.preventDefault(),t.$color_value.spectrum("hide")}),t.$color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$color_preview_icon.hide(),t.$color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$color_value.spectrum("set",r),t.$color_runtime_value.val(r),o=r,l()}),e(".block-background-color-picker .sp-choose").on("click",function(){t.$color_preview_icon.hide(),t.$color_runtime_value.val(t.$color_value.spectrum("get"))}),t.$color_preview_icon.on("click",function(){return t.$color_value.spectrum("show"),!1})},c=function(e){var r=e.find("#background-block-set-color");t={$color_active:r.find("#color-block-active"),$color_active_wrapper:r.find(".bg-color-block-active-wrapper"),$color_runtime_value:r.find("#background-block-color-runtime"),$color_value:r.find("#background-block-color"),$color_preview_icon:r.find("#background-block-preview-icon"),$color_palette_wrap:r.find("#bg-block-color-palette"),$color_palette_buttons:r.find("#bg-block-color-palette .bg-palette-selector")},n=!0,d(),t.$color_active_wrapper.click(function(e){e.preventDefault();var n=!0===t.$color_active.prop("checked");n?(t.$color_active.prop("checked",!1),o=""):(t.$color_active.prop("checked",!0),o=t.$color_runtime_value.val()),l()})};return{init:c,updateColorModal:i}}(jQuery),Overlay_Color_block_Modal=function(e){"use strict";var t,o,n,r,a=function(e){n=e.target,r.data_to_send.target=e.target,""!=e.color?(t.$overlay_color_value.val(e.color),t.$overlay_color_preview_icon.hide(),t.$overlay_color_value.spectrum("set",e.color),o=e.color):(t.$overlay_color_value.val(""),t.$overlay_color_preview_icon.show()),"true"==e.active.toString()?t.$overlay_active.prop("checked",!0):t.$overlay_active.prop("checked",!1)},i=function(){var e=!0===t.$overlay_active.prop("checked"),r={eventName:"rexlive:change_block_overlay",data_to_send:{color:o,active:e,target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)},l=function(){r={eventName:"rexlive:change_block_overlay_color",data_to_send:{color:null,target:{}}},t.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){t.$overlay_color_preview_icon.hide(),r.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)},change:function(e){t.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){o=e.toRgbString(),i()},cancelText:"",chooseText:""});var n=tmpl("tmpl-tool-close",{}),a=e(n);t.$overlay_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$overlay_color_value.spectrum("hide")}),t.$overlay_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$overlay_color_preview_icon.hide(),t.$overlay_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$overlay_color_value.spectrum("set",r),o=r,i()}),e(".block-overlay-color-picker .sp-choose").on("click",function(){t.$overlay_color_preview_icon.hide()}),t.$overlay_color_preview_icon.on("click",function(){return t.$overlay_color_value.spectrum("show"),!1})},d=function(e){var o=e.find("#bg-overlay-block-set-color");t={$overlay_active:o.find("#overlay-block-active"),$overlay_active_wrapper:o.find(".overlay-active-wrapper"),$overlay_color_value:o.find("#overlay-color-block-value"),$overlay_color_preview_icon:o.find("#overlay-block-preview-icon"),$overlay_color_palette_buttons:o.find("#bg-overlay-block-color-palette .bg-palette-selector")},l(),t.$overlay_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$overlay_active.prop("checked");o?t.$overlay_active.prop("checked",!1):t.$overlay_active.prop("checked",!0),i()})};return{init:d,updateOverlayModal:a}}(jQuery),Background_Block_Image_Modal=function(e){"use strict";var t,o,n,r,a=function(e){i(),n=e.target,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),s(""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage),c(e.photoswipe),o="true"==e.active.toString(),o?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1),l()},i=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),o=!0,t.$image_active.prop("checked",!0),t.$checkboxPhotoswipe.prop("checked",!1),t.$image_type_typeWrap.removeClass("selected")},l=function(){r.imageActive=t.$image_active.prop("checked"),r.imageId=t.$image_url.val(),r.imageType=t.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),r.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"},d=function(){var e=!0===t.$image_active.prop("checked");o=e;var a=t.$image_url.val(),i="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),d="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),c="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),s=t.$image_type_types_wrap,_=s.children(".selected").attr("data-rex-type-image"),u=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",p=r.imageType!==_||r.imageId!==a,m={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:o?a:"",urlImage:o?i:"",width:o?d:"",height:o?c:"",typeBGimage:o?_:"",photoswipe:u,active:o,updateBlockHeight:p,target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(m),l()},c=function(e){t.$checkboxPhotoswipe.prop("checked","true"==e.toString())},s=function(e){var o=t.$image_type_types_wrap.children('[data-rex-type-image="'+e+'"]');o.addClass("selected"),o.find("input").attr("checked",!0)},_=function(){t.$image_type_typeWrap.each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)})},u=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var n=!0===t.$image_active.prop("checked");n?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),o=n,d()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())}),t.$image_type_typeWrap.click(function(t){t.preventDefault();var o=e(t.target).parents(".rex-background-image-type-wrap");o.hasClass("selected")||(_(),o.addClass("selected"),o.find("input").attr("checked",!0),d())}),t.$is_photoswipe.click(function(e){e.preventDefault();var o=!0===t.$checkboxPhotoswipe.prop("checked");o?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),d()})},p=function(e){var n=e.find(".background_set_image");t={$image_upload_wrap:n.find("#bg-block-set-img-wrap"),$image_active:n.find("#image-block-active"),$image_active_wrapper:n.find(".bg-image-block-active-wrapper"),$image_preview:n.find("#bg-block-img-preview"),$image_preview_icon:n.find("#bg-block-img-preview i"),$image_url:n.find("#background-block-url"),$image_id:n.find("#background-block-up-img"),$image_type_typeWrap:n.find(".rex-background-image-type-wrap"),$image_type_types_wrap:n.find("#bg-set-img-type"),$is_photoswipe:n.find("#bg-set-photoswipe"),$checkboxPhotoswipe:n.find("#background_photoswipe")},r={imageActive:!1,imageId:null,imageType:null,imagePositon:null,imagePswpActive:!1},o=!0,u()};return{init:p,updateImageModal:a,resetImageModal:i,updateImageBackground:d}}(jQuery),Background_Block_Image_Setting=function(e){"use strict";var t,o,n,r,a=function(e){i(),n=e.target,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),s(""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage),c(e.photoswipe),o="true"==e.active.toString(),o?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1),l()},i=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),o=!0,t.$image_active.prop("checked",!0),t.$checkboxPhotoswipe.prop("checked",!1),t.$image_type_typeWrap.removeClass("selected")},l=function(){r.imageActive=t.$image_active.prop("checked"),r.imageId=t.$image_url.val(),r.imageType=t.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),r.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"},d=function(){var e=!0===t.$image_active.prop("checked");o=e;var a=t.$image_url.val(),i="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),d="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),c="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),s=t.$image_type_types_wrap,_=s.children(".selected").attr("data-rex-type-image"),u=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",p=r.imageType!==_||r.imageId!==a,m={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:o?a:"",urlImage:o?i:"",width:o?d:"",height:o?c:"",typeBGimage:o?_:"",photoswipe:o?u:"",active:o,updateBlockHeight:p,target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(m),l()},c=function(e){t.$checkboxPhotoswipe.prop("checked","true"==e.toString())},s=function(e){var o=t.$image_type_types_wrap.children('[data-rex-type-image="'+e+'"]');o.addClass("selected"),o.find("input").attr("checked",!0)},_=function(){t.$image_type_typeWrap.each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)})},u=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var n=!0===t.$image_active.prop("checked");n?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),o=n,d()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())}),t.$image_type_typeWrap.click(function(t){t.preventDefault();var o=e(t.target).parents(".rex-background-image-type-wrap");o.hasClass("selected")||(_(),o.addClass("selected"),o.find("input").attr("checked",!0),d())}),t.$is_photoswipe.click(function(e){e.preventDefault();var o=!0===t.$checkboxPhotoswipe.prop("checked");o?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),d()})},p=function(e){var n=e.find(".background_set_image");t={$image_upload_wrap:n.find("#bg-block-set-img-wrap"),$image_active:n.find("#image-block-active"),$image_active_wrapper:n.find(".bg-image-block-active-wrapper"),$image_preview:n.find("#bg-block-img-preview"),$image_preview_icon:n.find("#bg-block-img-preview i"),$image_url:n.find("#background-block-url"),$image_id:n.find("#background-block-up-img"),$image_type_typeWrap:n.find(".rex-background-image-type-wrap"),$image_type_types_wrap:n.find("#bg-set-img-type"),$is_photoswipe:n.find("#bg-set-photoswipe"),$checkboxPhotoswipe:n.find("#background_photoswipe")},r={imageActive:!1,imageId:null,imageType:null,imagePositon:null,imagePswpActive:!1},o=!0,u()};return{init:p,updateImageModal:a,resetImageModal:i,updateImageBackground:d}}(jQuery),Block_Video_Background_Modal=function(e){"use strict";var t,o,n,r=function(e,o){i(e.bgVideo),t.$self.attr("data-block_tools",e.bgVideo.tools),Rexlive_Modals_Utils.positionModal(t.$self,o),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),""==e.youtubeUrl?t.$linkYoutube.blur():t.$linkYoutube.focus(),""==e.vimeoUrl?t.$linkVimeo.blur():t.$linkVimeo.focus(),""==e.mp4Data?t.$linkMp4Preview.blur():t.$linkMp4Preview.focus()},a=function(){t.$self.attr("data-block_tools",""),Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(e){d(),"mp4"==e.type?(o="mp4",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(e.mp4Data.idMp4),t.$linkMp4.attr("data-rex-video-bg-url",e.mp4Data.linkMp4),t.$linkMp4.attr("data-rex-video-bg-width",e.mp4Data.width),t.$linkMp4.attr("data-rex-video-bg-height",e.mp4Data.height),t.$linkMp4Preview.val(e.mp4Data.linkMp4).next("label"),t.$audioMp4.prop("checked","true"==e.audio.toString()),_()):"vimeo"==e.type?(o="vimeo",t.$linkVimeo.val(e.vimeoUrl),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),t.$audioVimeo.prop("checked","true"==e.audio.toString()),s()):"youtube"==e.type&&(o="youtube",t.$linkVimeo.val(""),t.$linkYoutube.val(e.youtubeUrl),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),t.$audioYoutube.prop("checked","true"==e.audio.toString()),c()),""==e.youtubeUrl?t.$linkYoutubeLabel.removeClass("active"):t.$linkYoutubeLabel.addClass("active"),""==e.vimeoUrl?t.$linkVimeoLabel.removeClass("active"):t.$linkVimeoLabel.addClass("active"),""==e.mp4Data.linkMp4?t.$linkMp4PreviewLabel.removeClass("active"):t.$linkMp4PreviewLabel.addClass("active"),n=e.target},l=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1)},d=function(){l(),o="",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4Preview.val("").next("label").removeClass("active")},c=function(){t.$youTubeWrap.hasClass("selected")?(t.$youTubeWrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkYoutube.val()&&t.$linkYoutube.next("label").removeClass("active"),t.$linkYoutube.trigger("blur"),o=""):(t.$checkboxChooseYoutube.attr("checked",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$youTubeWrap.addClass("selected"),t.$linkVimeo.attr("disabled",!0),t.$linkYoutube.trigger("focus"),o="youtube"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},s=function(){t.$vimeoWrap.hasClass("selected")?(t.$vimeoWrap.removeClass("selected"),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkVimeo.val()&&t.$linkVimeo.next("label").removeClass("active"),t.$linkVimeo.trigger("blur"),o=""):(t.$checkboxChooseVimeo.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$vimeoWrap.addClass("selected"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.trigger("focus"),o="vimeo"),t.$youTubeWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},_=function(){t.$mp4Wrap.hasClass("selected")?(t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkMp4Preview.val()&&t.$linkMp4Preview.next("label").removeClass("active"),o=""):(t.$checkboxChooseMp4.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$mp4Wrap.addClass("selected"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.attr("disabled",!0),o="mp4"),t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected")},u=function(){var e="",o="",r=t.$linkYoutube.val(),a=t.$linkVimeo.val(),i={linkMp4:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-url")?"":t.$linkMp4.attr("data-rex-video-bg-url"),width:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-width")?"":t.$linkMp4.attr("data-rex-video-bg-width"),height:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-height")?"":t.$linkMp4.attr("data-rex-video-bg-height"),idMp4:t.$linkMp4.val()},l={linkMp4:"",idMp4:"",width:"",height:""},d=t.$self.find(".video-insert-wrap.selected");d.hasClass("youtube-insert-wrap")?(e="youtube",o=!0===t.$audioYoutube.prop("checked")?"true":"false"):d.hasClass("vimeo-insert-wrap")?(e="vimeo",o=!0===t.$audioVimeo.prop("checked")?"true":"false"):d.hasClass("mp4-insert-wrap")&&(e="mp4",o=!0===t.$audioMp4.prop("checked")?"true":"false");var c={eventName:"rexlive:update_block_background_video",data_to_send:{target:n,urlYoutube:""==e||"youtube"!=e?"":r,urlVimeo:""==e||"vimeo"!=e?"":a,videoMp4:""==e||"mp4"!=e?l:i,audio:""==e?"":o,typeVideo:e,tols:t.$self.attr("data-block_tools")}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(c)},p=function(){t.$chooseVideoWrapper.click(function(t){t.preventDefault();var n=e(t.target);!n.hasClass("youtube-insert-wrap")&&0==n.parents(".youtube-insert-wrap").length||"youtube"!=o&&""!=o?!n.hasClass("vimeo-insert-wrap")&&0==n.parents(".vimeo-insert-wrap").length||"vimeo"!=o&&""!=o?!n.hasClass("mp4-insert-wrap")&&(0==n.parents(".mp4-insert-wrap").length||n.is("i"))||"mp4"!=o&&""!=o||(_(),u()):(s(),u()):(c(),u())}),t.$uploadMp4.click(function(){t.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(t.$linkMp4,t.$linkMp4.val())}),t.$self.find(".set-video-audio-btn").click(function(t){t.preventDefault();var o=e(t.target),n=o.parents(".set-video-audio-btn"),r=n.find(".video-audio-checkbox"),a=r.attr("checked");a=!a,r.attr("checked",a),u()}),t.$close_button.on("click",function(e){e.preventDefault(),a()})},m=function(e){},v=function(n){var r=e("#video-block-editor-wrapper");t={$self:r,$youTubeWrap:r.find("#edit-video-block-wrap-1"),$vimeoWrap:r.find("#edit-video-block-wrap-2"),$mp4Wrap:r.find("#edit-video-block-wrap-3"),$chooseVideoWrapper:r.find(".rex-video-type-select"),$linkYoutube:r.find("#rex-youtube-video-block"),$linkYoutubeFocus:r.find("#rex-youtube-video-block"),$linkYoutubeLabel:r.find("#rex-youtube-video-block-label"),$linkVimeo:r.find("#rex-vimeo-video-block"),$linkVimeoLabel:r.find("#rex-vimeo-video-block-label"),$linkMp4:r.find("#video-block-mp4-url"),$linkMp4Preview:r.find("#rex-mp4-video-block-preview"),$linkMp4PreviewLabel:r.find("#rex-mp4-video-block-preview-label"),$checkboxChooseYoutube:r.find("#rex-choose-youtube-video-block"),$checkboxChooseVimeo:r.find("#rex-choose-vimeo-video-block"),$checkboxChooseMp4:r.find("#rex-choose-mp4-video-block"),$uploadMp4:r.find("#rex-upload-mp4-video-block i"),$audioYoutube:r.find("#rex-edit-block-video-youtube-audio"),$audioVimeo:r.find("#rex-edit-block-video-vimeo-audio"),$audioMp4:r.find("#rex-edit-block-video-mp4-audio"),$close_button:r.find(".rex-modal__close-button")},o="",p()};return{init:v,clearVideoModal:d,updateVideoModal:i,updateVideoBackground:u,openBlockVideoBackgroundModal:r,updateVideoMp4Link:m}}(jQuery),Block_Content_Positions_Modal=function(e){"use strict";var t,o,n,r=function(e,o){l(e.flexPosition),Rexlive_Modals_Utils.positionModal(t.$self,o),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()})},l=function(e){n=e.target,d();var r=""==e.position?o:e.position;t.$positions.filter('[value="'+r+'"]').prop("checked",!0)},d=function(){t.$positions.prop("checked",!1)},c=function(){var e=t.$positions.filter(":checked").val(),o=e.split("-")[0],r=e.split("-")[1],a={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:r,y:o},target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},s=function(e){var n=e;t={$self:n,$positions:n.find(".content-position"),$close_button:n.find(".rex-modal__close-button")},o="",i(),t.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){c()},50)})};return{init:s,updatePosition:l,resetPosition:d,openBlockContentPositionModal:r,closeBlockContentPositionModal:a}}(jQuery),Block_Content_Positions_Setting=function(e){"use strict";var t,o,n,r=function(e){l(e.flexPosition),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()})},l=function(e){n=e.target,d();var r=""==e.position?o:e.position;t.$positions.filter('[value="'+r+'"]').prop("checked",!0)},d=function(){t.$positions.prop("checked",!1)},c=function(){var e=t.$positions.filter(":checked").val(),o=e.split("-")[0],r=e.split("-")[1],a={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:r,y:o},target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},s=function(e){var n=e;t={$self:n,$positions:n.find(".content-position"),$close_button:n.find(".rex-modal__close-button")},o="",i(),t.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){c()},50)})};return{init:s,updatePosition:l,resetPosition:d,openBlockContentPositionModal:r,closeBlockContentPositionModal:a}}(jQuery),Block_Image_Positions_Modal=function(e){"use strict";var t,o,n,r=function(e){n=e.target,a();var r=""==e.position?o:e.position;t.$positions.filter('[value="'+r+'"]').prop("checked",!0)},a=function(){t.$positions.prop("checked",!1)},i=function(){var e=t.$positions.filter(":checked").val(),o=e.split("-")[0],r=e.split("-")[1],a={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:r,y:o},target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},l=function(e){var n=e.find("#rex-block-image-position-editor");t={$self:n,$positions:n.find(".image-position")},o="",t.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){i()},50)})};return{init:l,updatePosition:r,resetPosition:a}}(jQuery),Block_Image_Positions_Setting=function(e){"use strict";var t,o,n,r=function(e){n=e.target,a();var r=""==e.position?o:e.position;t.$positions.filter('[value="'+r+'"]').prop("checked",!0)},a=function(){t.$positions.prop("checked",!1)},i=function(){var e=t.$positions.filter(":checked").val(),o=e.split("-")[0],r=e.split("-")[1],a={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:r,y:o},target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},l=function(e){var n=e.find("#rex-block-image-position-setting");t={$self:n,$positions:n.find(".image-position")},o="",t.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){i()},50)})};return{init:l,updatePosition:r,resetPosition:a}}(jQuery),BlockPaddings_Modal=function(e){"use strict";var t,o,n,r=function(){t.$block_padding_top.val(o.top),t.$block_padding_right.val(o.right),t.$block_padding_bottom.val(o.bottom),t.$block_padding_left.val(o.left)},a=function(e){n=e.target;var r=isNaN(parseInt(e.paddings.top))?o.top:e.paddings.top,a=isNaN(parseInt(e.paddings.right))?o.right:e.paddings.right,d=isNaN(parseInt(e.paddings.bottom))?o.bottom:e.paddings.bottom,c=isNaN(parseInt(e.paddings.left))?o.left:e.paddings.left;l(),i(""==e.paddings.type?o.type:e.paddings.type),t.$block_padding_top.val(r),t.$block_padding_right.val(a),t.$block_padding_bottom.val(d),t.$block_padding_left.val(c)},i=function(e){var o=t.$padding_type_types_wrap.children('[data-rex-type-padding="'+e+'"]');o.addClass("selected"),o.find("input").attr("checked",!0)},l=function(){t.$padding_type_typeWrap.each(function(t,o){e(o).removeClass("selected"),e(o).find("input").attr("checked",!1)})},d=function(){var e=parseInt(t.$block_padding_top.val()),r=parseInt(t.$block_padding_right.val()),a=parseInt(t.$block_padding_bottom.val()),i=parseInt(t.$block_padding_left.val()),l=t.$padding_type_types_wrap,d=l.children(".selected").attr("data-rex-type-padding"),c={eventName:"rexlive:apply_paddings_block",data_to_send:{target:n,paddings:{top:isNaN(e)?o.top:e,right:isNaN(r)?o.right:r,bottom:isNaN(a)?o.bottom:a,left:isNaN(i)?o.left:i,type:d}}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(c)},c=function(t){t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},s=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),d())})},_=function(){c(t.$block_padding_top),c(t.$block_padding_right),c(t.$block_padding_bottom),c(t.$block_padding_left),s(t.$block_padding_top),s(t.$block_padding_right),s(t.$block_padding_bottom),s(t.$block_padding_left),t.$padding_type_typeWrap.click(function(t){t.preventDefault();var o=e(t.target).parents(".rex-block-padding-type-wrap");o.hasClass("selected")||(l(),o.addClass("selected"),o.find("input").attr("checked",!0),d())})},u=function(e){var n=e.find("#block-paddings-wrapper");t={$block_padding_top:n.find("#bm-block-padding-top"),$block_padding_right:n.find("#bm-block-padding-right"),$block_padding_bottom:n.find("#bm-block-padding-bottom"),$block_padding_left:n.find("#bm-block-padding-left"),$padding_type_typeWrap:n.find(".rex-block-padding-type-wrap"),$padding_type_types_wrap:n.find("#block-padding-type-select")},o={top:5,right:5,bottom:5,left:5,type:"px"},r(),_()};return{init:u,updatePaddings:a,resetPaddings:r}}(jQuery),Block_CustomClasses_Modal=function(e){"use strict";var t,o,n,r,a,i=function(){t.$classes.val(o).trigger("focusout")},l=function(e){a=e.target,r="",n="",r=e.classes,r.indexOf("active-large-block-overlay")!==-1&&(n+=" active-large-block-overlay",r=r.replace("active-large-block-overlay","")),r.indexOf("active-medium-block-overlay")!==-1&&(n+=" active-medium-block-overlay",r=r.replace("active-medium-block-overlay","")),r.indexOf("active-small-block-overlay")!==-1&&(n+=" active-small-block-overlay",r=r.replace("active-small-block-overlay","")),""==e.classes?t.$classes.siblings("label, .prefix").removeClass("active"):t.$classes.siblings("label, .prefix").addClass("active"),t.$classes.val(r).trigger("focusout")},d=function(){var e=t.$classes.val();e=e.trim(),e+=n;var o=e.split(/\s+/),r={eventName:"rexlive:apply_block_custom_classes",data_to_send:{customClasses:o,target:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)},c=function(){t.$classes.blur(function(e){d()})},s=function(e){var n=e.find(".block-custom-class-wrapper");t={$classes:n.find("#rex_block_custom_class")},o="",i(),c()};return{init:s,updateCustomClasses:l,resetCustomClasses:i}}(jQuery),Block_Image_Editor_Modal=function(e){"use strict";var t,o,n=function(){o={$modal:e("#rex-block-image-editor"),$close_button:null},o.$close_button=o.$modal.find(".rex-modal__close-button"),t=o.$modal.parent(".rex-modal-wrap")},r=function(e,n){Background_Block_Image_Setting.updateImageModal(e.imageBG),Block_Image_Positions_Setting.updatePosition(e.flexImgPosition),Rexlive_Modals_Utils.positionModal(o.$modal,n),Rexlive_Modals_Utils.openModal(t)},a=function(){o.$close_button.on("click",function(e){e.preventDefault(),Rexlive_Modals_Utils.closeModal(t)})},i=function(e){n(),a(),Background_Block_Image_Setting.init(o.$modal),Block_Image_Positions_Setting.init(o.$modal)};return{
init:i,openModal:r}}(jQuery),Rexlive_Block_Accordion=function(e){"use strict";var t,o,n=function(e){d(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$save_button.on("click",function(e){e.preventDefault(),c(),r()}),t.$accordion_insert_gallery.on("click",function(e){e.preventDefault();var o={modal_info:t,image_info:i()};Rexlive_MediaUploader.openMediaUploaderAccordionGallery(o)}),t.$self.on("click",".rex-accordion-gallery__item__remove",function(t){t.preventDefault(),e(this).parents(".rex-accordion-gallery__item").remove()})},i=function(){var e=[];return t.$accordion_preview_gallery.find(".rex-accordion-gallery__item").each(function(t,o){e.push({id:o.getAttribute("data-gallery-item-id"),url:o.getAttribute("data-gallery-item-url"),size:o.getAttribute("data-gallery-item-size")})}),e},l=function(t){var o=[],n=e(t);return n.each(function(e,t){o.push({id:t.getAttribute("data-gallery-item-id"),url:t.getAttribute("src"),size:t.getAttribute("data-gallery-item-size")})}),o},d=function(e){switch(o=e.blockData.target,e.blockData.accordion.state){case"open":t.$accordion_state.prop("checked",!0);break;case"close":default:t.$accordion_state.prop("checked",!1)}t.$accordion_icon.val(e.blockData.accordion.icon);var n=tinyMCE.get("rex-accordion-header-val");if("undefined"==typeof n||null===n?(t.$accordion_header.val(e.blockData.accordion.header),t.$accordion_header.text(e.blockData.accordion.header)):(n.setContent(e.blockData.accordion.header),n.save({no_events:!0})),t.$accordion_preview_gallery.empty(),e.blockData.accordion.is_gallery)for(var r=l(e.blockData.accordion.content),a=0;a<r.length;a++)t.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:r[a].id,preview:r[a].url,url:r[a].url,size:r[a].size}));else{var i=tinyMCE.get("rex-accordion-content-val");"undefined"==typeof i||null===i?(t.$accordion_content.val(e.blockData.accordion.content),t.$accordion_content.text(e.blockData.accordion.content)):(i.setContent(e.blockData.accordion.content),i.save({no_events:!0}))}},c=function(){var e=(tinyMCE.get("rex-accordion-header-val"),tinyMCE.get("rex-accordion-content-val"),t.$accordion_state.prop("checked")),n="",r=i();if(r.length>0)for(var a=0;a<r.length;a++)n+=tmpl("tmpl-accordion-gallery-item-live",{id:r[a].id,url:r[a].url,size:r[a].size}).trim();tinyMCE.triggerSave();var l=t.$accordion_icon.val();""===l&&(l='<i class="rex-accordion--close-icon l-svg-icons"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#Z001-Plus"></use></svg></i>');var d={header:t.$accordion_header.val(),content:t.$accordion_content.val(),icon:"",complete:'<div class="rex-accordion'+(!0===e?" open":" close")+'"><div class="rex-accordion--toggle">'+t.$accordion_header.val()+'<span class="rex-accordion--toggle-icon">'+l+'</span></div><div class="rex-accordion--content'+(""!==n?" rex-accordion--gallery":"")+'"'+(!0!==e?' style="display:none;"':"")+">"+(""!==n?n:t.$accordion_content.val())+"</div></div>"},c={eventName:"rexlive:updateAccordion",data_to_send:{accordion:d,target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(c)},s=function(){var o=e("#rex-block-accordion-editor");t={$self:o,$accordion_header:o.find("[name=rex-accordion-header-val]"),$accordion_icon:o.find("[name=rex-accordion-toggle-icon-val]"),$accordion_content:o.find("[name=rex-accordion-content-val]"),$accordion_state:o.find("[name=rex-accordion-open-close-val]"),$accordion_insert_gallery:o.find(".rex-accordion-content-gallery"),$accordion_preview_gallery:o.find(".rex-accordion-content-gallery__preview"),$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button")},a()};return{init:s,openModal:n}}(jQuery),Rexlive_Block_Slideshow=function(e){"use strict";var t,o,n=function(e){i(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$save_button.on("click",function(e){e.preventDefault(),l(),r()}),t.$add_slide.on("click",function(){var e=t.$slide_list.find(".rex-slideshow__slide").length,o=tmpl("tmpl-slideshow-item",{slide_id:e,slide_id_label:e+1});t.$slide_list.append(o),t.$slide_list.sortable("refresh")}),t.$self.on("click",".rex-slideshow__slide-edit",function(t){var o=e(this),n=o.parents(".rex-slideshow__slide"),r=this.getAttribute("value");switch(r){case"delete":n.remove();break;case"copy":}})},i=function(e){if(o=e.blockData.target,t.$slide_list.empty(),e.blockData.slideshow.slides.length>0)for(var n=0;n<e.blockData.slideshow.slides.length;n++){var r=tmpl("tmpl-slideshow-item",{slide_id:n,slide_id_label:n+1,slide_content:e.blockData.slideshow.slides[n]});t.$slide_list.append(r),t.$slide_list.sortable("refresh")}else{var r=tmpl("tmpl-slideshow-item",{slide_id:0,slide_id_label:1,slide_content:""});t.$slide_list.append(r),t.$slide_list.sortable("refresh")}},l=function(){var n='<div class="rex-slideshow">';t.$slide_list.find(".rex-slideshow__slide").each(function(t,o){n+='<div class="rex-slideshow__slide">'+e(o).find("textarea[name=rex-slideshow--slide-text]").val()+"</div>"}),n+="</div>";var r={eventName:"rexlive:updateSlideshow",data_to_send:{slideshow:{slides:n},target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)},d=function(t,o){var n=e(o.item).siblings().add(e(o.item));n.each(function(t,o){e(o).attr("data-slideshow-slide-id",t).find(".rex-slideshow__slide-index").text(t+1)})},c=function(){t.$slide_list.sortable({revert:!0,handle:".rex-slideshow__slide-edit[value=move]",update:function(e,t){d(e,t)}})},s=function(){var o=e("#rex-block-slideshow-editor");t={$self:o,$add_slide:o.find("#rex-slideshow__add-new-slide"),$slide_list:o.find(".rex-slideshow__slide-list"),$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button")},c(),a()};return{init:s,openModal:n}}(jQuery),Rexlive_Block_Background_Gradient=function(e){"use strict";var t,o,n=function(e){c(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var o=t.getEl().querySelector("#colorpicker"),n=e(o);n.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",n.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(n),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(n)})},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){_()}),t.$add_palette.on("click",function(e){e.preventDefault();var o=t.gpicker.getValue(),n=t.gpicker.getSafeValue(),r=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:o,gradient_preview:n,ID:r})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");s(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:o})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},c=function(e){o=e.blockData.target,s(e.blockData.gradient,!0)},s=function(e,o){var o="undefined"!=typeof o&&o;if(e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:o});var n=t.gpicker.getType(),r=t.gpicker.getDirection();t.$gradient_type.find("option[value="+n+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+r+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:o}),t.$gradient_type.val(""),t.$gradient_angle.val("")},_=function(){var e={eventName:"rexlive:updateBlockBackgroundGradient",data_to_send:{target:o,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},u=function(){var o=e("#rex-block-background-gradient-editor"),n="#gp-block-background-gradient";t={$self:o,$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button"),$gpicker:o.find(n),gpicker_selector:n,gpicker:null,$gradient_type:o.find("#block-background-gradient-type"),$gradient_angle:o.find("#block-background-gradient-angle"),$palette_list:o.find(".palette-list"),$add_palette:o.find(".palette__add-gradient")},a(),i(),d()};return{init:u,openModal:n,deletePaletteItem:l}}(jQuery),Rexlive_Text_Gradient=function(e){"use strict";var t,o,n=function(e){c(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var o=t.getEl().querySelector("#colorpicker"),n=e(o);n.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",n.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(n),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(n)})},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){_()}),t.$add_palette.on("click",function(e){e.preventDefault();var o=t.gpicker.getValue(),n=t.gpicker.getSafeValue(),r=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:o,gradient_preview:n,ID:r})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");s(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:o})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},c=function(e){o=e.blockData.target,s(e.blockData.gradient,!0)},s=function(e,o){if(o="undefined"!=typeof o&&o,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:!0});var n=t.gpicker.getType(),r=t.gpicker.getDirection();t.$gradient_type.find("option[value="+n+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+r+"]").prop("selected",!0),o||t.gpicker.change()}else t.gpicker.setValue("",{silent:o}),t.$gradient_type.val(""),t.$gradient_angle.val("")},_=function(){var e=t.gpicker.getValue(),n=t.$gradient_type.val(),r=t.$gradient_angle.val();r="135deg"===r?"top left":r,r="315deg"===r?"bottom right":r;var a=Rexlive_Gradient_Utils.getMarkup(n,r,t.gpicker.getHandlers(),"cover");if(""!==e){var i={eventName:"rexlive:setTextGradient",data_to_send:{target:o,color:e,style:a,active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)}},u=function(){return t},p=function(){var o=e("#rex-text-gradient-editor"),n="#gp-text-gradient";t={$self:o,$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button"),$gpicker:o.find(n),gpicker_selector:n,gpicker:null,$gradient_type:o.find("#text-gradient-type"),$gradient_angle:o.find("#text-gradient-angle"),$palette_list:o.find(".palette-list"),$add_palette:o.find(".palette__add-gradient")},a(),i(),d()};return{init:p,openModal:n,deletePaletteItem:l,getProps:u}}(jQuery),Rexlive_Block_Overlay_Gradient=function(e){"use strict";var t,o,n=function(e){c(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var o=t.getEl().querySelector("#colorpicker"),n=e(o);n.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=n.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",n.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(n),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(n)})},i=function(){t.$close_button.on("click",function(e){e.preventDefault(),r()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){_()}),t.$add_palette.on("click",function(e){e.preventDefault();var o=t.gpicker.getValue(),n=t.gpicker.getSafeValue(),r=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:o,gradient_preview:n,ID:r})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");s(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,o=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:o})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},c=function(e){o=e.blockData.target,s(e.blockData.gradient,!0)},s=function(e,o){var o="undefined"!=typeof o&&o;if(e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:o});var n=t.gpicker.getType(),r=t.gpicker.getDirection();t.$gradient_type.find("option[value="+n+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+r+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:o}),t.$gradient_type.val(""),t.$gradient_angle.val("")},_=function(){var e={eventName:"rexlive:updateBlockOverlayGradient",data_to_send:{target:o,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},u=function(){var o=e("#rex-block-overlay-gradient-editor"),n="#gp-block-overlay-gradient";t={$self:o,$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button"),$gpicker:o.find(n),gpicker_selector:n,gpicker:null,$gradient_type:o.find("#block-overlay-gradient-type"),$gradient_angle:o.find("#block-overlay-gradient-angle"),$palette_list:o.find(".palette-list"),$add_palette:o.find(".palette__add-gradient")},a(),i(),d()};return{init:u,openModal:n,deletePaletteItem:l}}(jQuery),Block_Url_Modal=function(e){"use strict";var t,o,n,r=function(){t.$urlInput.val(o)},a=function(e){n=e.target,t.$urlInput.val(e.link),""==e.link?t.$urlInput.siblings("label, .prefix").removeClass("active"):t.$urlInput.siblings("label, .prefix").addClass("active")},i=function(){var e=t.$urlInput.val(),o={eventName:"rexlive:apply_block_link_url",data_to_send:{url:e,target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o)},l=function(){t.$urlInput.blur(function(e){i()})},d=function(e){var n=e.find(".block-url-link-wrapper");t={$urlInput:n.find("#block_link_value")},o="",r(),l()};return{init:d,updateBlockUrl:a,resetBlockUrl:r}}(jQuery),BlockOptions_Modal=function(e){"use strict";var t,o=function(e){Background_Block_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_block_Modal.updateOverlayModal(e.overlay),Background_Block_Image_Modal.updateImageModal(e.imageBG),Block_Video_Background_Modal.updateVideoModal(e.bgVideo),BlockPaddings_Modal.updatePaddings(e.paddings),Block_Content_Positions_Setting.updatePosition(e.flexPosition),Block_Image_Positions_Modal.updatePosition(e.flexImgPosition),Block_CustomClasses_Modal.updateCustomClasses(e.customClasses),Block_Url_Modal.updateBlockUrl(e.linkBlock),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(e){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),n()})},a=function(){var o=e("#rex-block-options");t={$self:o,$close_button:o.find(".rex-modal__close-button")},r(),Background_Block_Color_Modal.init(o),Overlay_Color_block_Modal.init(o),Background_Block_Image_Modal.init(o),Block_Video_Background_Modal.init(o),BlockPaddings_Modal.init(o),Block_Content_Positions_Setting.init(o),Block_Image_Positions_Modal.init(o),Block_Image_Editor_Modal.init(o),Block_CustomClasses_Modal.init(o),Block_Url_Modal.init(o)};return{init:a,openBlockOptionsModal:o}}(jQuery),Model_Modal=function(e){"use strict";var t,o,n,r,a,i,l,d,c=function(c){i=c.sectionTarget,l=c.modelID,n=c.shortCode,r=c.layouts,a=c.layoutsNames,o=!1,d=c.modelsNumbers,e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(o){if(o.success){var n=[],r={id:"0",founded:!0};n.push(r),t.$model_import.children().each(function(t,o){var r=e(o).val();if("0"!=r){var a={id:r,founded:!1};n.push(a)}});var a,i,d=o.data.updated_list;for(a=0;a<d.length;a++)d[a].founded=!1;for(a=0;a<d.length;a++)for(i=0;i<n.length;i++)if(d[a].id==n[i].id){d[a].founded=!0,n[i].founded=!0;break}for(a=0;a<d.length;a++)d[a].founded||t.$model_import.children().eq(0).after('<option value="'+d[a].id+'">'+d[a].name+"</option>");for(a=0;a<n.length;a++)n[a].founded||t.$model_import.find("option[value="+n[a].id+"]").remove();t.$model_name.val(""),t.$model_import.find("option[value=0]").prop("selected",!0),""!=l&&(t.$model_import.find("option[value=0]").prop("selected",!1),t.$model_import.find("option[value="+l+"]").prop("selected",!0)),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},s=function(e){t.$model_import_wrap.removeClass("hide-import-wrap"),t.$model_insert_success_wrap.text(""),c(e)},_=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},u=function(){t.$save_button.click(function(e){e.preventDefault(),_()}),t.$cancel_button.click(function(e){e.preventDefault(),_()}),t.$model_import.on("change",function(n){var r=t.$model_import.val();if(""!=r&&"0"!=r&&!o){t.$self.addClass("rex-modal--loading");var a={ID:r};e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_live",nonce_param:live_editor_obj.rexnonce,model_data:a},success:function(e){if(e.success){for(var t={eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:jQuery.extend(!0,{},i),model:e.data.model,modelName:e.data.name,modelID:e.data.id,customizationsData:e.data.customizations_data,customizationsNames:e.data.customizations_names}},o=e.data.sectionRexID[0][1],n=!1,r=1,a=0;a<d.length;a++)e.data.id==d[a].modelID&&(n=!0,d[a].number+=1,r=d[a].number);n||d.push({modelID:e.data.id,number:r}),i={sectionID:o,modelNumber:r},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})}}),t.$model_name.on("keyup",function(e){var o="which"in e?e.which:e.keyCode;13===o&&t.$add_new_model.trigger("click")}),t.$model_name.on("focusout",function(e){e.preventDefault(),t.$model_name.parent().removeClass("input-active")}),t.$model_name.on("focusin",function(e){e.preventDefault(),t.$model_name.parent().addClass("input-active")}),t.$add_new_model.on("click",function(){if(""!=t.$model_name.val()){t.$self.addClass("setting-saving");var l=t.$model_name.val(),d={post_title:l,post_content:n},c={modelID:-1,modelTitle:"",modelHtml:""};e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_model_from_builder",nonce_param:live_editor_obj.rexnonce,model_data:d},success:function(n){if(n.success){t.$model_import_wrap.addClass("hide-import-wrap");var d=n.data.model_id;c.modelID=d,c.modelTitle=l,c.modelHtml=n.data.model_html;for(var s=[],u=0;u<r.length;u++){var p=r[u].name,m=r[u].targets;s.push(e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization",nonce_param:live_editor_obj.rexnonce,model_id_to_update:d,targets:JSON.stringify(m),layout_name:p},success:function(e){},error:function(e){},complete:function(e){}}))}s.push(e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization_names",nonce_param:live_editor_obj.rexnonce,model_id_to_update:d,names:a},success:function(e){},error:function(e){},complete:function(e){}})),e.when.apply(e,s).then(function(){t.$self.removeClass("rex-modal--loading");var e=c.modelID,n=c.modelTitle,l=c.modelHtml;t.$model_name.val("").siblings("label").removeClass("active"),t.$save_button.val(""),t.$model_import.children().eq(0).after('<option value="'+e+'">'+n+"</option>"),t.$model_import.find("option[value="+e+"]").prop("selected",!0);var d={eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:i,model:l,modelName:n,modelID:e,customizationsData:r,customizationsNames:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:e,rexlive_model_name:n}),Rexbuilder_Util_Admin_Editor.updateModelId(e),Rexbuilder_Util_Admin_Editor.updateModelState(),o=!0,t.$model_insert_success_wrap.text("Model inserted"),Model_Import_Modal.updateModelList(),setTimeout(function(){_(),t.$self.removeClass("setting-saving")},1e3)}).fail(function(){}).always(function(){})}},error:function(e){t.$model_import_wrap.addClass("hide-import-wrap"),t.$model_name.val(live_editor_obj.labels.models.name_error)},complete:function(e){}})}else t.$model_name.focus()})},p=function(){var r=e("#rex-model-block"),a=r;t={$self:r,$save_button:a.find(".rex-save-button"),$cancel_button:a.find(".rex-cancel-button"),$model_import:a.find("#rex-model__import"),$model_name:a.find("#rex-model__name"),$add_new_model:a.find("#rex-model__add-new-model"),$model_import_wrap:a.find(".rex-model__import--wrap-active"),$model_insert_success_wrap:a.find(".rex-model__model-insert-success-wrap")},o=!1,l="",n="",u()};return{init:p,openModal:s,closeModal:_}}(jQuery),Rexlive_Model_Edit_Name_Modal=function(e){"use strict";var t,o,n=function(e){t.model_name.value=e.name?e.name:"",o=e.name?e.name:"",Rexlive_Base_Settings.addClass(t.model_name,"active"),t.model_name.setAttribute("data-rex-model-id",e.id),Rexlive_Modals_Utils.openModal(t.$modal),t.model_name.focus()},r=function(){t.model_name.blur(),Rexlive_Modals_Utils.closeModal(t.$modal),t.model_name.value="",o="",t.model_name.setAttribute("data-rex-model-id",""),Rexlive_Base_Settings.removeClass(t.model_name,"active")},a=function(){t.save_button.addEventListener("click",function(e){e.preventDefault(),t.model_name.value!==o&&Model_Import_Modal.editModelName({id:t.model_name.getAttribute("data-rex-model-id"),name:t.model_name.value}),r()}),t.cancel_button.addEventListener("click",function(e){e.preventDefault(),r()}),t.$model_name.on("keyup",function(e){var o="which"in e?e.which:e.keyCode;13===o&&t.$save_button.trigger("click")})},i=function(){var o=document.getElementById("rex-model__edit-name__modal"),n=e(o);t={$self:n,$modal:n.parent(".rex-modal-wrap"),save_button:o.querySelector("#rex-model__edit-name__save"),$save_button:null,cancel_button:o.querySelector(".rex-cancel-button"),model_name:o.querySelector("#rex-model__edit-name"),$model_name:null},t.$save_button=e(t.save_button),t.$model_name=e(t.model_name),a()};return{init:i,openModal:n,closeModal:r}}(jQuery),Open_Models_Warning=function(e){"use strict";var t,o=function(e){t.$models_list.empty();for(var o=0;o<e.length;o++)t.$models_list.append('<span class="modal-info--highlight">'+e[o].m_name+(o!=e.length-1?", ":"")+"</span>");Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.on("click",function(){n()})},a=function(){var o=e("#rex-open-models-warning"),n=o;t={$self:o,$close_button:n.find(".rex-modal__close-button"),$models_list:n.find(".open-models-list")},r()};return{init:a,openModal:o,closeModal:n}}(jQuery),CustomLayouts_Modal=function(e){"use strict";var t,o,n,r=function(){var o,n,r=4;do n=!0,o=Rexbuilder_Util_Admin_Editor.createRandomID(r),t.$layoutsList.find(".layout__item").each(function(){e(this).find("input[name=rexlive-layout-id]").val()==o&&(n=!1)});while(!n);return o},a=function(t){e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_custom_layouts",nonce_param:live_editor_obj.rexnonce,custom_layouts:t},success:function(e){e.success},error:function(e){}})},i=function(){var o=[];return t.$layoutsList.find(".layout__item").each(function(t,n){var r=e(n),a={id:r.find("input[name=rexlive-layout-id]").val(),label:r.find("input[name=rexlive-layout-label]").val(),min:r.find("input[name=rexlive-layout-min]").val(),max:r.find("input[name=rexlive-layout-max]").val(),type:r.find("input[name=rexlive-layout-type]").val()};o.push(a)}),o},l=function(e){for(var t=!1,o=!1,r=0;r<e.length;r++)if(n.id==e[r].id){t=!0,n.min!=e[r].min&&"default"!=e[r].id&&(o=!0,n.min=e[r].min,Rexbuilder_Util_Admin_Editor.updateLayoutActiveData(null),Rexbuilder_Util_Admin_Editor.updateIframeWidth(e[r].min));break}var a={eventName:"rexlive:updateLayoutsDimensions",data_to_send:{layouts:e,updateHeights:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a),setTimeout(function(){t||(Rexbuilder_Util_Admin_Editor.setActiveLayout("default"),Rexbuilder_Util_Admin_Editor.updateLayoutPage({min:"",max:"",id:"default",label:"My Desktop",type:"standard"}),_("default"))},50,t)},d=function(e){t.$layoutDataContainer.text(JSON.stringify(e))},c=function(o){var n;t.$buttonsWrapper.find(".btn-builder-layout").each(function(t,r){var a=e(r);for(n=0;n<o.length;n++)if(a.attr("data-name")==o[n].id&&"default"!=o[n].id){a.attr("data-min-width")!=o[n].min&&a.attr("data-min-width",o[n].min),a.attr("data-max-width")!=o[n].max&&a.attr("data-max-width",o[n].max);break}}),t.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(t,o){e(o).find(".rex-number").text(t+1)})},s=function(){var e=i();c(e),d(e),l(e)},_=function(e){t.$layoutsList.find(".layout.active-on-page").removeClass("active-on-page"),t.$layoutsList.find('.layout input[name="rexlive-layout-id"][value="'+e+'"]').parents(".layout").addClass("active-on-page")},u=function(){Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("layout-window--active"),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},p=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap")),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("layout-window--active")},m=function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):void((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault())},v=function(t){var o=e(t.target);if((t.keyCode>=48&&t.keyCode<=57||38==t.keyCode||40==t.keyCode||8==t.keyCode)&&(t.preventDefault(),o.parents(".layout__setting").find(".layout-value").text(o.val()+"px"),s()),13==t.keyCode||27==t.keyCode){t.preventDefault();var n=o.parents(".layout").eq(0);n.find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),n.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),n.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),n.parent().removeClass("editing"),n.find("input[data-editable-field=true]").attr("type","hidden")}},f=function(t){t.preventDefault();var o=e(t.target);if(o.parents(".layout__setting").find(".layout-value").text(o.val()),13==t.keyCode||27==t.keyCode){t.preventDefault();var n=o.parents(".layout").eq(0);n.find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),n.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),n.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),n.parent().removeClass("editing"),n.find("input[data-editable-field=true]").attr("type","hidden")}s()},g=function(){t.$close_button.click(function(e){e.preventDefault(),a(i()),p()}),t.$config_layouts.on("click",function(e){e.preventDefault(),o=Rexbuilder_Util_Admin_Editor.getActiveLayout(),n={id:"",min:"",max:""};var r=t.$buttonsWrapper.find('div[data-name="'+o+'"]');n.id=r.attr("data-name"),n.min=r.attr("data-min-width"),n.max=r.attr("data-max-width"),_(o),u()}),t.$add_custom_layout_button.on("click",function(){var o=r();tmpl.arg="customLayout";var n=e(tmpl("rexlive-tmpl-custom-layout-modal",{id:o,label:"",minWidth:"",maxWidth:"",type:"custom"}));t.$layoutsList.append(n[0]);var a=n.find(".layout").eq(0);switch(a.find(".dashicons-before.dashicons-edit").addClass("hide-icon"),a.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),a.find(".dashicons-before.dashicons-yes").removeClass("hide-icon"),a.parent().addClass("editing"),a.find("input[data-editable-field=true]").attr("type","input"),t.layoutListType){case"dropdown":t.$buttonsWrapper.find(".builder-add-custom-layout").parent().before(tmpl("rexlive-tmpl-custom-layout-button-list",{id:o,label:"",minWidth:"",maxWidth:"",type:"custom"}));break;case"list":default:t.$buttonsWrapper.append(tmpl("rexlive-tmpl-custom-layout-button",{id:o,label:"",minWidth:"",maxWidth:"",type:"custom"}))}Rexlive_Base_Settings.launchTooltips(),s()}),t.$self.on("click",".rexlive-layout--edit",function(t){e(t.currentTarget).find(".dashicons-before").toggleClass("hide-icon"),e(t.target).hasClass("dashicons-yes")?e(this).parents(".layout__item").eq(0).removeClass("editing").find("input[data-editable-field=true]").attr("type","hidden"):e(t.target).hasClass("dashicons-edit")&&e(this).parents(".layout__item").eq(0).addClass("editing").find("input[data-editable-field=true]").attr("type","input")}),t.$self.on("click",".rexlive-layout--delete",function(o){
if(confirm("Are you sure?")){var n=e(this).parents(".layout__item").find("input[name=rexlive-layout-id]").val();t.$buttonsWrapper.find('div[data-name="'+n+'"]').parent().remove(),e(this).parents(".layout__item").remove(),s()}}),t.$self.on("keydown","input.layout-min-input",function(e){m(e)}),t.$self.on("keydown","input.layout-max-input",function(e){m(e)}),t.$self.on("keyup","input.layout-min-input",function(e){v(e)}),t.$self.on("keyup","input.layout-max-input",function(e){v(e)}),t.$self.on("keyup","input.layout-label-input",function(e){f(e)})},b=function(){t.$layoutsList.children(".layout__item").each(function(t,o){var n=e(o);n.find('input[name="rexlive-layout-id"]').val()})},h=function(){var o=e("#rexlive-custom-layout-modal"),n=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-responsive-buttons-wrapper"),r=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find("#rexbuilder-layout-data-backend > .avaiable-layouts");t={$self:o,$close_button:o.find(".rex-cancel-button"),$buttonsWrapper:n,$config_layouts:n.find(".builder-config-layouts"),$layoutDataContainer:r,$layoutsList:o.find(".layout__list"),$add_custom_layout_button:o.find("#rexlive-add-custom-layout"),layoutListType:o.attr("data-layout-list-type")},b(),g(),t.$layoutsList.sortable({items:".layout__item:not(.layout__item--standard)",handle:".rexlive-layout--move",stop:function(o,n){var r=n.item.find('input[name="rexlive-layout-id"]').val(),a=n.item.prev().find('input[name="rexlive-layout-id"]').val(),i=t.$buttonsWrapper.find('div[data-name="'+r+'"]').parent("div");if("default"!==a)var l=t.$buttonsWrapper.find('div[data-name="'+a+'"]').parent("div");else var l=t.$buttonsWrapper.find(".builder-add-custom-layout").parent("div");l.after(i.detach()),t.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(t,o){e(o).find(".rex-number").text(t+1)})}})};return{init:h}}(jQuery),Model_Edit_Modal=function(e){"use strict";var t,o,n,r=function(r){o=jQuery.extend(!0,{},r),n=r.layoutActive,t.$modelNamePreview.html('<span class="modal-info--highlight">'+r.modelName+"</span>"),t.$self.find(".rex-edit-option").each(function(t,o){var r=e(o);"edit"!=r.attr("data-rex-option")&&("default"!=n?r.addClass("rex-hide-option"):r.removeClass("rex-hide-option"))}),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(){t.$button.on("click",function(t){var n=e(this),r=n.attr("data-rex-option"),i={eventName:"",data_to_send:o};switch(r){case"remove":i.eventName="rexlive:modelBecameSection",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("REMOVE",o),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:"",rexlive_model_name:""}),Rexbuilder_Util_Admin_Editor.updateModelId(""),Rexbuilder_Util_Admin_Editor.updateModelState();break;case"edit":i.eventName="rexlive:editModel",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("OPEN",o),Rexbuilder_Util_Admin_Editor.updateModelEditing("true"),Rexbuilder_Util_Admin_Editor.updateModelState()}Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i),a()}),t.$close_button.on("click",function(){a()})},l=function(){var n=e("#rex-edit-model-choose"),r=n;t={$self:n,$button:r.find(".rex-button"),$close_button:r.find(".rex-modal__close-button"),$modelNamePreview:r.find(".info-model-name")},o={},i()};return{init:l,openModal:r,closeModal:a}}(jQuery),Rexbuilder_RexSlider=function(e){function t(e,t,o){if(o="undefined"!=typeof o?o:null,i)return i.state("upload-slide").set("$data",e),i.state("upload-slide").set("$preview",t),i.state("upload-slide").set("image_id",o),void i.open();var n=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide",title:"Select Slide Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:o},wp.media.controller.Library.prototype.defaults)});i=wp.media({button:{text:"Select"},state:"upload-slide",states:[new n]}),i.on("close",function(){var t=i.state("upload-slide").get("selection");0==t.length&&e.val()}),i.on("select",function(){var e=i.state("upload-slide"),t=e.get("selection");t&&t.each(function(t){var o,n,r=e.display(t).toJSON(),a=t.toJSON(),l=a.caption;wp.media.view.settings.captions||delete a.caption,r=wp.media.string.props(r,a),o={id:a.id,post_content:a.description,post_excerpt:l},r.linkUrl&&(o.url=r.linkUrl),"image"===a.type||("video"===a.type?n=wp.media.string.video(r,a):"audio"===a.type?n=wp.media.string.audio(r,a):(n=wp.media.string.link(r),o.post_title=r.title)),t.attributes.nonce=wp.media.view.settings.nonce.sendToEditor,t.attributes.attachment=o,t.attributes.html=n,t.attributes.post_id=wp.media.view.settings.post.id,i.state("upload-slide").get("$data").val(a.id),i.state("upload-slide").get("$preview").css("backgroundImage","url("+a.url+")").addClass("rex-slider__slide__image-preview--active")})}),i.on("open",function(){var e,t=i.state("upload-slide").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=i.state("upload-slide").get("image_id");o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),i.open()}function o(e){if(l)return l.state("upload-slide-video").set("$data",e),void l.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide-video",title:"Select Slide Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:e},wp.media.controller.Library.prototype.defaults)});l=wp.media({button:{text:"Select"},state:"upload-slide-video",states:[new t]}),l.on("close",function(){var t=l.state("upload-slide-video").get("selection");0==t.length&&e.val()}),l.on("select",function(){var e=l.state("upload-slide-video"),t=e.get("selection");t&&t.each(function(t){var o={videoID:-1,videoUrl:""},n=e.display(t).toJSON(),r=t.toJSON();wp.media.view.settings.captions||delete r.caption,n=wp.media.string.props(n,r),o.videoID=r.id,o.videoUrl=r.url,l.state("upload-slide-video").get("$data").val(o.videoID),l.state("upload-slide-video").get("$data").attr("data-video-mp4-url",o.videoUrl)})}),l.on("open",function(){var e,t=l.state("upload-slide-video").get("selection");t.each(function(o){"undefined"!=typeof o&&(e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[]))});var o=l.state("upload-slide-video").get("$data").val();o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),l.open()}var n,r,a,i,l,d,c,s,u=function(){var t={slides:[],settings:{}},o=n.$modal.find(".rex-slider__slide");return o.length>0&&(t.settings.auto_start=n.$slider_autostart.prop("checked"),t.settings.prev_next=n.$slider_prev_next.prop("checked"),t.settings.dots=n.$slider_dots.prop("checked"),o.each(function(o,n){var r=e(n),a=r.children(".rex-slider__slide-data"),i=a.find("input[name=rex-slider--slide-id]").val(),l="",d=a.find("textarea[name=rex-slider--slide-text]").text(),c=a.find("input[name=rex-slider--slide-video-url]").val(),s=a.find("input[name=rex-slider--slide-video-type]").val(),_="",u=a.find("input[name=rex-slider--slide-video-audio]").val(),p=a.find("input[name=rex-slider--slide-url]").val();if("undefined"!=typeof i){var m=r.find(".rex-slider__slide__image-preview").css("background-image");l=m.replace("url(","").replace(")","").replace(/\"/gi,"")}"mp4"==s&&(_=a.find("input[name=rex-slider--slide-video-url]").attr("data-mp4-url"));var v={slide_image_id:i,slide_image_url:l,slide_text:d,slide_video:c,slide_videoMp4Url:_,slide_video_type:s,slide_video_audio:u,slide_url:p};t.slides.push(v)})),t},p=function(t,o){var n=e(o.item).siblings().add(e(o.item));n.each(function(t,o){e(o).attr("data-slider-slide-id",t).find(".rex-slider__slide-index").text(t+1)})},m=function(t,o){switch(a.$modal.removeClass(a.visibility_classes.join(" ")),a.$save_button.val("").val(o),t){case"video":a.$video_type.prop("checked",!1),a.$video_audio.prop("checked",!1),a.$video_youtube.val("").next().removeClass("active"),a.$video_mp4.val(""),a.$video_vimeo.val("").next().removeClass("active");var n=e(o),r=n.find("input[name=rex-slider--slide-video-type]").val(),i=n.find("input[name=rex-slider--slide-video-url]").val(),l=n.find("input[name=rex-slider--slide-video-audio]").val();if(i&&r)switch(a.$video_type.filter("[value="+r+"]").prop("checked",!0),a.$video_audio.prop("checked",l),r){case"youtube":a.$video_youtube.val(i).next().addClass("active");break;case"mp4":a.$video_mp4.val(i);break;case"vimeo":a.$video_vimeo.val(i).next().addClass("active")}a.$modal.addClass("video-links--visible");break;case"url":a.$link_value.val("").next().removeClass("active");var i=e(o).find("input[name=rex-slider--slide-url]").val();i&&a.$link_value.val(i).next().addClass("active"),a.$modal.addClass("url-links--visible")}Rexlive_Modals_Utils.openModal(a.$modal_wrap,!0)},v=function(e){n.$slider_autostart.prop("checked",!1),n.$slider_prev_next.prop("checked",!1),n.$slider_dots.prop("checked",!1);for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];switch(t){case"auto_start":"true"==o&&n.$slider_autostart.prop("checked",!0);break;case"prev_next":"true"==o&&n.$slider_prev_next.prop("checked",!0);break;case"dots":"true"==o&&n.$slider_dots.prop("checked",!0)}}},f=function(){n.$slider_autostart.prop("checked",!1),n.$slider_prev_next.prop("checked",!1),n.$slider_dots.prop("checked",!1),n.$slide_list.empty(),n.$slider_import.val("0"),n.$modal.removeClass("rex-slider-block--editing"),n.$slide_title.prop("disabled",!0)},g=function(t,o,a,i){f(),t="undefined"!=typeof t?t:"",o="undefined"!=typeof o?o:"",a="undefined"!=typeof a?a:"",s=i,t&&o&&a?(n.$save_button.attr("data-block-to-edit",t),n.$save_button.attr("data-slider-to-edit",a),n.$undo_button.attr("data-slider-to-edit",a),n.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,data:o,slider_id:a},success:function(e){e.success&&(v(e.data.rexslider_attrs),n.$slide_title.val(Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),n.$slide_list.append(e.data.slides_markup),n.$slide_list.sortable("refresh"),n.$modal.removeClass("rex-modal--loading"))},error:function(e){n.$modal.removeClass("rex-modal--loading")}}),Rexlive_Modals_Utils.openModal(n.$modal_wrap)):(n.$slider_autostart.prop("checked",!0),n.$slider_prev_next.prop("checked",!0),n.$slider_dots.prop("checked",!0),n.$save_button.attr("data-block-to-edit",""),n.$save_button.attr("data-slider-to-edit",""),n.$slide_title.val(live_editor_obj.labels.slider.new_slider).prop("disabled",!1),n.$slide_list.append(r.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),n.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.openModal(n.$modal_wrap))},b=function(t,o,r,a,i,l){function d(e){return e<10?"0"+e:e}var c,_="undefined"!=typeof a&&a,u="undefined"!=typeof i&&i;c=""!=r||_?r:0,"undefined"!=typeof l&&(s=l);var p=n.$slide_title.val();if(""==p||"New Slider"==p){var m=new Date;p="SLIDER_"+m.getFullYear().toString()+d(m.getMonth()+1)+d(m.getDate())+d(m.getHours())+d(m.getMinutes())+d(m.getSeconds())}else if(_)if(p.indexOf(" - copy")!=-1){for(var v,f=/copy(?:\s+([0-9]+))*/gm,g=-1;null!==(v=f.exec(p));)v.index===f.lastIndex&&f.lastIndex++,g="undefined"==typeof v[1]?0:parseInt(v[1]);p=p.replace(f,""),g+=1,p+="copy "+g}else p+=" - copy";r&&!_?e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:t,slider_id:r,sliderTitle:p},success:function(e){if(e.success&&!u){n.$slider_import.find("option[value="+e.data.slider_id+"]").text(live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix).attr("data-rex-slider-title",e.data.slider_title);var r={eventName:"",data_to_send:{id:e.data.slider_id,settings:t.settings,slides:t.slides,target:s}};o?r.eventName="rexlive:updateSlider":r.eventName="rexlive:insert_new_slider",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}},error:function(e){}}):e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:t,sliderTitle:p},success:function(e){if(e.success){var r={eventName:"",data_to_send:{id:e.data.slider_id,settings:t.settings,slides:t.slides,target:s}};_?r.eventName="rexlive:newSliderSavedOnDB":o?r.eventName="rexlive:updateSlider":r.eventName="rexlive:insert_new_slider",n.$slider_import.children().first().after('<option value="'+e.data.slider_id+'" data-rex-slider-title="'+e.data.slider_title+'">'+live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix+"</option>"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}},error:function(e){}})},h=function(){a.$video_youtube.on("change keyup paste",function(){""!=e(this).val()?a.$video_type.filter("[value=youtube]").attr("checked",!0):a.$video_type.filter("[value=youtube]").attr("checked",!1)}),a.$video_vimeo.on("change keyup paste",function(){""!=e(this).val()?a.$video_type.filter("[value=vimeo]").attr("checked",!0):a.$video_type.filter("[value=vimeo]").attr("checked",!1)}),Rexlive_Base_Settings.$document.on("click",".rex-slider__slide-edit",function(o){o.preventDefault();var r=e(this),a=r.parents(".rex-slider__slide"),i=a.find(".rex-slider__slide-data"),l=r.attr("value"),d=a.attr("data-slider-slide-id");switch(l){case"add-slide":var c=i.find("input[name=rex-slider--slide-id]"),s=a.find(".rex-slider__slide__image-preview");t(c,s);break;case"edit-slide":var c=i.find("input[name=rex-slider--slide-id]"),s=a.find(".rex-slider__slide__image-preview"),_=c.val();t(c,s,_);break;case"text":var u=i.find("textarea[name=rex-slider--slide-text]"),p=u.text(),v=".rex-slider__slide[data-slider-slide-id="+d+"]";Rexlive_RexSlider_TextEditor.openTextEditor(v,p,!0,["hide-padding-position"]);break;case"video":n.$modal.addClass("push-down-modal"),m("video",".rex-slider__slide[data-slider-slide-id="+d+"]");break;case"url":n.$modal.addClass("push-down-modal"),m("url",".rex-slider__slide[data-slider-slide-id="+d+"]");break;case"copy":var f=parseInt(n.$modal.find(".rex-slider__slide").length),g=a.clone();g.attr("data-slider-slide-id",f),g.find(".rex-slider__slide-index").text(f+1),n.$slide_list.append(g),n.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(n.$modal);break;case"delete":a.remove(),n.$modal.find(".rex-slider__slide").each(function(t,o){e(o).attr("data-slider-slide-id",t).find(".rex-slider__slide-index").text(t+1)}),Rexlive_Modals_Utils.resetModalDimensions(n.$modal)}}),n.$add_new_slide.on("click",function(){var e=parseInt(n.$modal.find(".rex-slider__slide").length),t=r.replace(/\bdata.slideindex\b/g,e).replace(/\bdata.slideindexfront\b/g,e+1);n.$slide_list.append(t),n.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(n.$modal)}),n.$cancel_button.on("click",function(){c||Rexlive_Modals_Utils.closeModal(n.$modal_wrap)}),n.$undo_button.on("click",function(){if(!c){var t=e(this).attr("data-slider-to-edit");""===t?(n.$slider_autostart.prop("checked",!0),n.$slider_prev_next.prop("checked",!0),n.$slider_dots.prop("checked",!0),n.$save_button.attr("data-block-to-edit",""),n.$save_button.attr("data-slider-to-edit",""),n.$slide_title.val(live_editor_obj.labels.slider.new_slider),n.$slide_list.empty().append(r.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),n.$slide_list.sortable("refresh")):(n.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:t},success:function(e){v(e.data.rexslider_attrs),n.$slide_list.empty().append(e.data.slides_markup),n.$slide_list.sortable("refresh"),n.$slide_title.val(live_editor_obj.labels.slider.copy_slider+Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),n.$undo_button.attr("data-slider-to-edit",t),n.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(n.$modal)},error:function(e){n.$modal.removeClass("rex-modal--loading")}}))}}),n.$save_button.on("click",function(t){if(!c){var o=u(),r=e(this).attr("data-block-to-edit"),a=e(this).attr("data-slider-to-edit");b(o,r,a),Rexlive_Modals_Utils.closeModal(n.$modal_wrap)}}),n.$slider_import.on("change",function(t){t.preventDefault();var o=e(this).val();if("0"!=o)n.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:o},success:function(e){v(e.data.rexslider_attrs),n.$slide_list.empty().append(e.data.slides_markup),n.$slide_list.sortable("refresh");var t=Rexlive_Base_Settings.htmlDecode(e.data.slider.title),r=x(t);n.$slide_title.val(live_editor_obj.labels.slider.copy_slider+(0!==r?r+"-":"")+t),n.$undo_button.attr("data-slider-to-edit",o),n.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(n.$modal)},error:function(e){n.$modal.removeClass("rex-modal--loading")}});else{n.$save_button.attr("data-slider-to-edit",""),n.$undo_button.attr("data-slider-to-edit",""),n.$slide_list.empty(),n.$slider_autostart.prop("checked",!0),n.$slider_prev_next.prop("checked",!0),n.$slider_dots.prop("checked",!0),n.$slide_title.val(live_editor_obj.labels.slider.new_slider);var a=0,i=r.replace(/\bdata.slideindex\b/g,a).replace(/\bdata.slideindexfront\b/g,a+1);n.$slide_list.append(i),n.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(n.$modal)}}),a.$cancel_button.on("click",function(){n.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(a.$modal_wrap,!0)}),a.$save_button.on("click",function(){var t=e(this.value);if(a.$modal.hasClass("video-links--visible")){var o=a.$video_type.filter(":checked").val(),r="",i="";switch(t.find("input[name=rex-slider--slide-video-type]").val(o),o){case"youtube":r=a.$video_youtube.val();break;case"mp4":r=a.$video_mp4.val(),i=a.$video_mp4.attr("data-video-mp4-url");break;case"vimeo":r=a.$video_vimeo.val()}""!=r?(t.find("input[name=rex-slider--slide-video-url]").val(r).attr("data-mp4-url",i),t.find(".rex-slider__slide-edit[value=video]").addClass("rex-slider__slide-edit__field-active-notice")):t.find(".rex-slider__slide-edit[value=video]").removeClass("rex-slider__slide-edit__field-active-notice"),t.find("input[name=rex-slider--slide-video-audio]").val(a.$video_audio.prop("checked"))}else if(a.$modal.hasClass("url-links--visible")){var l=a.$link_value.val();""!=l?(t.find("input[name=rex-slider--slide-url]").val(l),t.find(".rex-slider__slide-edit[value=url]").addClass("rex-slider__slide-edit__field-active-notice")):(t.find("input[name=rex-slider--slide-url]").val(""),t.find(".rex-slider__slide-edit[value=url]").removeClass("rex-slider__slide-edit__field-active-notice"))}n.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(a.$modal_wrap,!0)}),a.$video_mp4_add.on("click",function(e){o(a.$video_mp4)}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_btn",function(t){var o=e(t.target),r=o.parents("#rex-slider-block").find(".rx__select-wrap");d=r.children("select").find(":selected"),r.addClass("editing-title-slider");var a=d.val();n.$slide_title.val(d.text()),n.$slide_title.attr("data-rex-slider-id",a),c=!0}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_live_btn",function(t){var o=e(t.target),r=o.parents("#rex-slider-block").find(".rx__select-wrap");d=r.children("select").find(":selected"),r.addClass("editing-title-slider"),n.$slide_title.prop("disabled",function(e,t){return!t})}),Rexlive_Base_Settings.$document.on("click","#save_slider_title_btn",function(t){var o=e(t.target),r=o.parents("#rex-slider-block").find(".rx__select-wrap"),a=n.$slide_title.val();d.text(a),n.$slide_title.attr("data-rex-slider-id",""),n.$slide_title.val(""),r.removeClass("editing-title-slider"),c=!1}),Rexlive_Base_Settings.$document.on("click","#cancel_slider_title_btn",function(t){var o=e(t.target),r=o.parents("#rex-slider-block").find(".rx__select-wrap");n.$slide_title.attr("data-rex-slider-id",""),n.$slide_title.val(""),r.removeClass("editing-title-slider"),c=!1})},x=function(e){var t=0,o="("+live_editor_obj.labels.slider.copy_slider+"(\\d-){0,1}){0,1}"+e,r=new RegExp(o,"");return n.$slider_import.find("option").each(function(e,o){return"0"===o.value||void(null!==o.getAttribute("data-rex-slider-title").match(r)&&t++)}),t},$=function(){r=e("#rex-slider__new-slide-tmpl").html().trim(),n={$modal:e("#rex-slider-block"),$modal_wrap:null,$cancel_button:null,$undo_button:null,$save_button:null,$add_new_slide:null,$slide_list:null,$slide_title:null,$slider_autostart:null,$slider_prev_next:null,$slider_dots:null,$slider_import:null},n.$modal_wrap=n.$modal.parent(".rex-modal-wrap"),n.$cancel_button=n.$modal.find(".rex-modal__close-button"),n.$save_button=n.$modal.find(".rex-save-button"),n.$undo_button=n.$modal.find(".rex-undo-button"),n.$add_new_slide=n.$modal.find("#rex-slider__add-new-slide"),n.$slide_list=n.$modal.find(".rex-slider__slide-list"),n.$slide_title=n.$modal.find(".title-slider"),n.$slider_autostart=n.$modal.find("#rex-slider__autostart"),n.$slider_prev_next=n.$modal.find("#rex-slider__prev-next"),n.$slider_dots=n.$modal.find("#rex-slider__dots"),n.$slider_import=n.$modal.find("#rex-slider__import"),n.$slide_list.sortable({revert:!0,handle:".rex-slider__slide-edit[value=move]",update:function(e,t){p(e,t)}}),a={$modal:e("#rex-slider__links-editor"),$modal_wrap:null,$cancel_button:null,$save_button:null,visibility_classes:["video-links--visible","url-links--visible"],$link_value:null,$video_type:null,$video_youtube:null,$video_mp4:null,$video_mp4_add:null,$video_vimeo:null,$video_audio:null},a.$modal_wrap=a.$modal.parent(".rex-modal-wrap"),a.$cancel_button=a.$modal.find(".rex-cancel-button"),a.$save_button=a.$modal.find(".rex-save-button"),a.$link_value=a.$modal.find("#rex-slider__slide-url-link"),a.$video_type=a.$modal.find("input[name=rex-slide-choose-video]"),a.$video_mp4_add=a.$modal.find("#rex-slide-choose-mp4"),a.$video_youtube=a.$modal.find("#rex-slide__video-youtube"),a.$video_mp4=a.$modal.find("#rex-slide__video-mp4"),a.$video_vimeo=a.$modal.find("#rex-slide__video-vimeo"),a.$video_audio=a.$modal.find("#rex-slide__video--audio"),d=null,c=!1,h()};return{init:$,openSliderModal:g,saveSlider:b}}(jQuery),Change_Layout_Modal=function(e){"use strict";var t,o,n,r=function(e){o=e.activeLayout,n=e.buttonData,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),t.$layout_name_placholder.text(e.activeLayoutLabel)},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},i=function(){t.$button.on("click",function(t){var r=e(t.currentTarget),i=r.attr("data-rex-option");switch(i){case"save":Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving");var l={eventName:"rexlive:savePage",data_to_send:{buttonData:n}},d={eventName:"rexlive:saveModel",data_to_send:{buttonData:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:startChangeLayout"}),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active");break;case"continue":var c={eventName:"rexlive:dropChanges",data_to_send:{selected:o,eventName:"",buttonData:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(c),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active");break;case"abort":}a()})},l=function(){var o=e("#rex-layout-page-changed"),n=o;t={$self:o,$button:n.find(".rex-change-layout-option"),$layout_name_placholder:n.find(".layout-name")},i()};return{init:l,openModal:r,closeModal:a}}(jQuery),Rexlive_Inline_SVG=function(e){"use strict";var t,o=function(e){"undefined"!=typeof e.id?t.$icon_select_box.find('.select-box__input[value="'+e.id+'"]').prop("checked",!0):t.$icon_select_box.find('.select-box__input[value=""]').prop("checked",!0),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.$icon_select.val(""),t.selected_icon=null,Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.on("click",function(e){n()}),t.$save_button.on("click",function(e){var o=t.$icon_select_box.find(".select-box__input:checked"),r=o.val();if(""!==r){var a=o.attr("data-svg-class"),i={eventName:"rexlive:mediumEditor:inlineSVG",data_to_send:{svg_ID:r,svg_class:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)}n()})},a=function(){var o=e("#rexlive-inline-svg"),n=o;t={$self:o,$close_button:n.find(".tool-button--close"),$save_button:n.find(".tool-button--save"),$icon_select:n.find("#rexlive-inline-svg-select"),$icon_select_box:n.find(".select-box__current"),selected_icon:null},r()};return{init:a,openModal:o,closeModal:n}}(jQuery),Rexlive_PostEdit=function(e){"use strict";var t,o=function(e){if(t)return t.state("live-media-edit").set("media_data",e),void t.open();var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-media-edit",title:"Edit Media",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",media_data:e},wp.media.controller.Library.prototype.defaults)});t=wp.media({button:{text:"Select"},state:"live-media-edit",states:[new o]}),t.on("open",function(){var e,o=t.state("live-media-edit").get("selection");o.each(function(t){"undefined"!=typeof t&&(e=wp.media.attachment(t.attributes.id),e.fetch(),o.remove(e?[e]:[]))});var n=t.state("live-media-edit").get("media_data");"undefined"!=typeof n.mediaId&&""!==n.mediaId&&(e=wp.media.attachment(n.mediaId),e.fetch(),o.add(e?[e]:[]))}),t.on("select",function(){var e=t.state("live-media-edit"),o=e.get("selection");if(o){var n=e.get("media_data"),r=n.action,a=[];o.each(function(t){var o=e.display(t).toJSON(),n=t.toJSON();wp.media.view.settings.captions||delete n.caption;var r=wp.media.string.props(o,n);a.push({media_info:n,display_info:r})});var i="";switch(r){case"add":i="rexlive:liveMediaAdd";break;case"edit":i="rexlive:liveMediaEdit"}var l={eventName:i,data_to_send:{imgData:a,media_data:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l)}}),t.on("close",function(){}),t.open()};return{openMediaUploader:o}}(jQuery),Rexlive_PostEdit_MediaList=function(e){"use strict";var t,o,n=function(){o={$modal:e("#rex-live-media-list"),$listWrap:null,$addMedia:null,$close_button:null,mediaListAggregateSelector:null,completeReorderCallback:null,completeRemoveCallback:null,destinationSelector:null,addTmplId:null,tmplDataGeneration:null,completeAddCallback:null},o.$close_button=o.$modal.find(".rex-modal__close-button"),o.$listWrap=o.$modal.find("#rex-live-media-list__wrap"),o.$addMedia=o.$modal.find("#media-gallery__add-new-item"),t=o.$modal.parent(".rex-modal-wrap")},r=function(t,o){var n=e(o.item).siblings().add(e(o.item));n.each(function(t,o){e(o).attr("data-media-gallery-item-index",t).find(".media-gallery__item-index").text(t+1)})},a=function(e,t){var n=[];o.$listWrap.find(".media-gallery__item").each(function(e,t){n.push(t.getAttribute("data-media-gallery-item-element-id"))});var r={eventName:"rexlive:liveMediaReorder",data_to_send:{mediaList:n,mediaListAggregateSelector:o.mediaListAggregateSelector,completeReorderCallback:o.completeReorderCallback}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)},i=function(e){for(var t=0,n=e.length;t<n;t++){var i=tmpl("tmpl-editable-media-gallery-list-item",{index:t+1,id:e[t].id,src:e[t].src});o.$listWrap.append(i)}o.$listWrap.sortable({revert:!0,handle:'.media-gallery__item-edit[value="move"]',update:function(e,t){r(e,t),a(e,t)}}),o.$listWrap.disableSelection()},l=function(e){o.$listWrap.html(""),i(e.mediaList),o.mediaListAggregateSelector=e.mediaListAggregateSelector,o.completeReorderCallback=e.completeReorderCallback,o.completeRemoveCallback=e.completeRemoveCallback,o.destinationSelector=e.destinationSelector,o.addTmplId=e.addTmplId,o.tmplDataGeneration=e.tmplDataGeneration,o.completeAddCallback=e.completeAddCallback,Rexlive_Modals_Utils.openModal(t)},d=function(){o.$close_button.on("click",function(e){e.preventDefault(),o.mediaListAggregateSelector=null,o.completeReorderCallback=null,o.completeRemoveCallback=null,o.destinationSelector=null,o.addTmplId=null,o.tmplDataGeneration=null,o.completeAddCallback=null,Rexlive_Modals_Utils.closeModal(t)}),o.$addMedia.on("click",function(e){e.preventDefault(),Rexlive_PostEdit.openMediaUploader({action:"add",fromMediaListModal:!0,destinationSelector:o.destinationSelector,addTmplId:o.addTmplId,tmplDataGeneration:o.tmplDataGeneration,completeAddCallback:o.completeAddCallback})}),o.$listWrap.on("click",".media-gallery__item-edit",function(t){t.preventDefault();var n=e(t.currentTarget),r=n.parents(".media-gallery__item"),a=(r.attr("data-media-gallery-item-index"),r.attr("data-media-gallery-item-element-id")),i=t.currentTarget.getAttribute("value");switch(i){case"edit-media":var l={eventName:"rexlive:liveMediaOpenEdit",data_to_send:{elId:a,fromMediaListModal:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"add-media":break;case"copy":break;case"delete":r.remove(),o.$listWrap.find(".media-gallery__item").each(function(t,o){e(o).attr("data-media-gallery-item-index",t).find(".media-gallery__item-index").text(t+1)});var l={eventName:"rexlive:liveMediaDelete",data_to_send:{elId:a,mediaListAggregateSelector:o.mediaListAggregateSelector,completeRemoveCallback:o.completeRemoveCallback}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"move":}})},c=function(e){var t=o.$listWrap.find(".media-gallery__item").length,n=tmpl("tmpl-editable-media-gallery-list-item",{index:t+1,src:e.src,id:e.fieldId});o.$listWrap.append(n)},s=function(e){var t=o.$listWrap.find('.media-gallery__item[data-media-gallery-item-element-id="'+e.fieldId+'"]');t.length>0&&t.find(".media-gallery__item__image-preview").css("backgroundImage","url("+e.src+")")},_=function(){n(),d()};return{init:_,openModal:l,addMediaItem:c,editMediaItem:s}}(jQuery),LockedOptionMask=function(e){"use strict";var t,o,n=function(e){o=e.buttonData,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$button.on("click",function(t){var n=e(t.target),a=n.parents(".rex-locked-option-wrapper").attr("data-rex-option");switch(a){case"save":Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving");var i={eventName:"rexlive:savePage",data_to_send:{buttonData:o}},l={eventName:"rexlive:saveModel",data_to_send:{buttonData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"abort":}r()})},i=function(){var o=e("#rex-locked-option"),n=o;t={$self:o,$button:n.find(".rex-button")},a()};return{init:i,openModal:n,closeModal:r}}(jQuery),Model_Import_Modal=function(e){"use strict";var t,o,n=function(t,o,n){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:t,image_selected:o,image_size:n,set_post_thumbnail_result:null,set_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})},r=function(t){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:t,delete_post_thumbnail_result:null,delete_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})},a=function(o){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_model_name",nonce_param:live_editor_obj.rexnonce,
modelData:o},success:function(e){e.success&&0!==e.data.update&&e.data.update===parseInt(e.data.modelData.id)&&(t.self.querySelector('[data-rex-model-id="'+e.data.modelData.id+'"] .model-name').innerHTML="<div>"+e.data.modelData.name+"</div>",l())},error:function(e){}})},i=function(){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(o){if(o.success){var n=[],r=!1;t.$self.find(".model__element").each(function(t,o){var r=e(o).attr("data-rex-model-id"),a={id:r,founded:!1};n.push(a)});var a,i,d=o.data.updated_list;for(a=0;a<d.length;a++)d[a].founded=!1;for(a=0;a<d.length;a++)for(i=0;i<n.length;i++)if(d[a].id==n[i].id){d[a].founded=!0,n[i].founded=!0;break}for(tmpl.arg="model",a=0;a<d.length;a++)if(!d[a].founded){r=!0;var c=tmpl("rexlive-tmpl-model-item-list",{id:d[a].id,name:d[a].name,preview:""!=d[a].preview_image_url?d[a].preview_image_url:""});t.$self.find(".model-list").prepend(c)}for(a=0;a<n.length;a++)n[a].founded||(r=!0,t.$self.find('.model__element[data-rex-model-id="'+n[a].id+'"]').remove());r&&l();var s=jQuery.Event("rexlive:lateralMenuReady");e(document).trigger(s)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},l=function(){var e=t.$self.find(".model-list")[0],o=[].slice.call(e.getElementsByClassName("model__element"));o.sort(function(e,t){var o=e.querySelector(".model-name").textContent.toUpperCase(),n=t.querySelector(".model-name").textContent.toUpperCase();return o<n?-1:o>n?1:0}),e.innerHTML="",o.forEach(function(t){e.appendChild(t)})},d=function(e){var o=e.getAttribute("data-rex-model-id");if(o){var n=confirm(live_editor_obj.labels.models.confirm_delete);if(n){var r={action:"rex_delete_rexmodel",nonce_param:live_editor_obj.rexnonce,model_id:o},a=Rexlive_Base_Settings.encodeData(r),i=new XMLHttpRequest;i.open("POST",live_editor_obj.ajaxurl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.onloadstart=function(){t.$self.addClass("rex-modal--loading")},i.onload=function(){i.status>=200&&i.status<400&&(e.style.display="none")},i.onerror=function(){},i.onloadend=function(){t.$self.removeClass("rex-modal--loading")},i.send(a)}}},c=function(e,t){if(setUserSetting("imgsize","medium"),o)return o.state("live-image-model").set("selected_image",t).set("selected_model",e),void o.open();var n=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image-model",title:"Edit Model Thumbnail",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),selected_image:t,selected_model:e,type:"image"},wp.media.controller.Library.prototype.defaults)});o=wp.media({button:{text:"Select"},state:"live-image-model",states:[new n]}),o.on("open",function(){var e,t=o.state("live-image-model").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var n=o.state("live-image-model").get("selected_image");n&&(e=wp.media.attachment(n),e.fetch(),t.add(e?[e]:[],{imgsize:""}))}),o.on("select",function(){var e=o.state("live-image-model"),t=e.get("liveTarget"),n=e.get("eventName"),r=(e.get("data_to_send"),e.get("selection")),a={eventName:n,data_to_send:{sectionTarget:t,target:t}};if(r){var i,l;r.each(function(t){i=e.display(t).toJSON(),l=t.toJSON(),wp.media.view.settings.captions||delete l.caption,i=wp.media.string.props(i,l),a.data_to_send.idImage=l.id,a.data_to_send.urlImage=i.src}),s(i.src,i.size,l.id)}}),o.on("close",function(){setUserSetting("imgsize","medium")}),o.open()},s=function(t,r,a){var i=o.state("live-image-model").get("selected_model"),l=e('.model__element[data-rex-model-id="'+i+'"]');l.attr("data-rex-model-thumbnail-id",a),l.attr("data-rex-model-thumbnail-size",r),l.find(".model-preview").addClass("model-preview--active").css("background-image",'url("'+t+'")'),l.find(".model__element--edit-thumbnail").addClass("tool-button--image-preview").css("background-image",'url("'+t+'")'),n(i,a,r)},u=function(t){var o=e('.model__element[data-rex-model-id="'+t+'"]');o.attr("data-rex-model-thumbnail-id",""),o.attr("data-rex-model-thumbnail-size",""),o.find(".model-preview").css("background-image",'url("")').removeClass("model-preview--active"),o.find(".tool-button--image-preview").css("background-image",'url("")').removeClass("tool-button--image-preview"),r(t)},i=function(){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(o){if(o.success){var n=[];t.$self.find(".model__element").each(function(t,o){var r=e(o).attr("data-rex-model-id"),a={id:r,founded:!1};n.push(a)});var r,a,i=o.data.updated_list;for(r=0;r<i.length;r++)i[r].founded=!1;for(r=0;r<i.length;r++)for(a=0;a<n.length;a++)if(i[r].id==n[a].id){i[r].founded=!0,n[a].founded=!0;break}for(tmpl.arg="model",r=0;r<i.length;r++)i[r].founded||t.$self.find(".model-list").prepend(tmpl("rexlive-tmpl-model-item-list",{id:i[r].id,name:i[r].name,preview:""!=i[r].preview_image_url?i[r].preview_image_url:""}));for(r=0;r<n.length;r++)n[r].founded||t.$self.find('.model__element[data-rex-model-id="'+n[r].id+'"]').remove();var l=jQuery.Event("rexlive:lateralMenuReady");e(document).trigger(l)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},p=function(){},m=function(){var t,o,n,r,a,i=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,l=e(i),d=!!document.documentMode,c=0,s=0;Rexlive_Base_Settings.$document.on("dragstart",".model-list li",function(t){Rexbuilder_Util_Admin_Editor.dragImportType="rexmodel",Rexbuilder_Util_Admin_Editor.blockIframeRows(),t.originalEvent.dataTransfer.effectAllowed="all",a=setInterval(function(){m.ProcessDragOverQueue()},100),tmpl.arg="o";var o={model_id:e(this).attr("data-rex-model-id")},n=tmpl("rexlive-tmpl-insert-model-loader",o);d?t.originalEvent.dataTransfer.setData("text",n):t.originalEvent.dataTransfer.setData("text/plain",n);var r={eventName:"rexlive:drag_drop_starded",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}),Rexlive_Base_Settings.$document.on("drag",".model-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),s<150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(-1)),s>l.height()-150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(1))}),Rexlive_Base_Settings.$document.on("dragend",".model-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),Rexbuilder_Util_Admin_Editor.releaseIframeRows(),clearInterval(a),m.removePlaceholder(),m.ClearContainerContext(),Rexbuilder_Util_Admin_Editor.dragImportType="";var t={eventName:"rexlive:drag_drop_ended",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var a=e(i.document).find(".rex-container").eq(0),d={};l.on("dragover",function(e){"rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType&&(e.preventDefault(),e.stopPropagation(),c=e.originalEvent.clientX,s=e.originalEvent.clientY)}),a.on("dragenter",function(a){"rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType&&(a.stopPropagation(),t=e(a.target),o=!0,n=a.target.getBoundingClientRect(),r=1)}),a.on("dragover",function(e){if("rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType){if(r%15!=0&&0==o)return void(r+=1);e=e||window.event,r+=1,o=!1,d.x=e.originalEvent.clientX,d.y=e.originalEvent.clientY,m.AddEntryToDragOverQueue(t,n,d)}}),a.on("drop",function(t){if("rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType){t.preventDefault(),t.stopPropagation();var o;o=t.isTrigger?triggerEvent.originalEvent:t.originalEvent;try{var n=o.dataTransfer.getData("text/plain"),r=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker"),a=e(jQuery.parseHTML(n));a.insertAfter(r[0]),r.remove();var i={eventName:"rexlive:importModels"};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)}catch(o){console.log(o)}}})});var _,u=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"],p=u.join(","),m={dragoverqueue:[],GetMouseBearingsPercentage:function(e,t,o){return t||(t=e.get(0).getBoundingClientRect()),{x:(o.x-t.left)/(t.right-t.left)*100,y:(o.y-t.top)/(t.bottom-t.top)*100}},OrchestrateDragDrop:function(e,t,o){if(!e||0==e.length||!t||!o)return!1;e.is("html")&&(e=e.find("body"));var n={x:50,y:50};if(_=this.GetMouseBearingsPercentage(e,t,o),_.x>n.x&&_.x<100-n.x&&_.y>n.y&&_.y<100-n.y){var r=e.clone();if(r.find(".drop-marker").remove(),""!=r.html()||this.checkVoidElement(r))if(0==r.children().length)this.DecideBeforeAfter(e,_);else if(1==r.children().length)this.DecideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),_);else{var a=this.findNearestElement(e,o.x,o.y);this.DecideBeforeAfter(a.el,_,o)}else if(_.y<90)return this.PlaceInside(e)}else if(_.x<=n.x||_.y<=n.y){var i=this.FindValidParent(e,"top");i.is("body,html")&&(i=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.DecideBeforeAfter(i,_,o)}else if(_.x>=100-n.x||_.y>=100-n.y){var i=this.FindValidParent(e,"bottom");i.is("body,html")&&(i=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.DecideBeforeAfter(i,_,o)}},DecideBeforeAfter:function(e,t,o){o&&(t=this.GetMouseBearingsPercentage(e,null,o));var n="inline"==e.css("display")||"inline-block"==e.css("display");return e.is("br")&&(n=!1),n?t.x<50?this.PlaceBefore(e):this.PlaceAfter(e):t.y<50?this.PlaceBefore(e):this.PlaceAfter(e)},checkVoidElement:function(e){return e.is(p)},calculateDistance:function(e,t,o){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-o,2))},FindValidParent:function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(r.left-o.left))return e;e=e.parent()}break;case"right":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(r.right-o.right))return e;e=e.parent()}break;case"top":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(r.top-o.top))return e;e=e.parent()}break;case"bottom":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(r.bottom-o.bottom))return e;e=e.parent()}}},addPlaceHolder:function(e,t,o){switch(e.hasClass("rex-container")&&(t="before"==t?"inside-prepend":"inside-append"),o||(o=this.getPlaceHolder()),this.removePlaceholder(),t){case"before":o.find(".message").html(e.parent().data("sh-dnd-error")),e.before(o),this.AddContainerContext(e,"sibling");break;case"after":o.find(".message").html(e.parent().data("sh-dnd-error")),e.after(o),this.AddContainerContext(e,"sibling");break;case"inside-prepend":o.find(".message").html(e.data("sh-dnd-error")),e.prepend(o),this.AddContainerContext(e,"inside");break;case"inside-append":o.find(".message").html(e.data("sh-dnd-error")),e.append(o),this.AddContainerContext(e,"inside")}},removePlaceholder:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker").remove()},getPlaceHolder:function(){return e("<div class='drop-marker drop-marker--view'><div class='drop-marker--ruler'></div></div>")},PlaceInside:function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},PlaceBefore:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",t)},PlaceAfter:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},findNearestElement:function(t,o,n){var r=this,a=null,i=t.children(":not(.drop-marker,[data-dragcontext-marker])");if(i.length>0){if(i.each(function(){if(!e(this).is(".drop-marker")){var t,i=e(this).get(0).getBoundingClientRect(),l=0,d=null,c="",s=i.left,_=i.right,u=i.top,p=i.bottom,m=null,v=null;return n>u&&n<p?m=o<s&&n<_?{x:s,y:n,position:"before"}:{x:_,y:n,position:"after"}:o>s&&o<_?m=n<u&&n<p?{x:o,y:u,position:"before"}:{x:o,y:p,position:"after"}:o<s&&o<_?(m={x:s,y:u,position:"before"},v={x:s,y:p,position:"after"}):o>s&&o>_?(m={x:_,y:u,position:"before"},v={x:_,y:p,position:"after"}):n<u&&n<p?(m={x:s,y:u,position:"before"},v={x:_,y:u,position:"after"}):n>u&&n>p&&(m={x:s,y:p,position:"before"},v={x:_,y:p,position:"after"}),t=r.calculateDistance(m,o,n),null!==v&&(d=r.calculateDistance(v,o,n)),t<d||null===d?(l=t,c=m.position):(l=d,c=v.position),null!==a&&a.distance<l||void(a={el:this,distance:l,xPosition1:s,xPosition2:_,yPosition1:u,yPosition2:p,position:c})}}),null!==a){var l=a.position;return{el:e(a.el),position:l}}return!1}},AddEntryToDragOverQueue:function(e,t,o){var n=[e,t,o];this.dragoverqueue.push(n)},ProcessDragOverQueue:function(e,t,o){var n=this.dragoverqueue.pop();if(this.dragoverqueue=[],n&&3==n.length){var r=n[0],a=n[1],o=n[2];this.OrchestrateDragDrop(r,a,o)}},GetContextMarker:function(){var t=e("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>");return t},AddContainerContext:function(e,t){var o=this.GetContextMarker();switch(this.ClearContainerContext(),e.is("html,body")&&(t="inside",e=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body")),t){case"inside":this.PositionContextMarker(o,e),e.hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e);if(o.find("[data-dragcontext-marker-text]").html(n),0==Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length)break;Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o);case"sibling":this.PositionContextMarker(o,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e.parent());if(o.find("[data-dragcontext-marker-text]").html(n),o.attr("data-dragcontext-marker",n.toLowerCase()),0==Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length)break;Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o)}},PositionContextMarker:function(t,o){var n=o.get(0).getBoundingClientRect();t.css({height:n.height+4+"px",width:n.width+4+"px",top:n.top+e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollTop()-2+"px",left:n.left+e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollLeft()-2+"px"}),n.top+Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").scrollTop()<24&&t.find("[data-dragcontext-marker-text]").css("top","0px")},ClearContainerContext:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("[data-dragcontext-marker]").remove()},getElementName:function(e){return e.prop("tagName")}}},v=function(){var o=document.getElementById("rex-models-list"),n=e(o);t={self:o,$self:n},p(),m()};return{init:v,saveModelThumbnail:n,updateModelThumbnail:s,updateModelList:i,editModelThumbnail:c,resetModelThumbnail:u,deleteModel:d,editModelName:a}}(jQuery),Button_Import_Modal=function(e){"use strict";var t,o,n=function(e,t){"insertRule"in o?o.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",o.cssRules.length):"addRule"in o&&o.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",o.cssRules.length)},r=function(e,t){"insertRule"in o?o.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",o.cssRules.length):"addRule"in o&&o.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",o.cssRules.length)},a=function(e,t){"insertRule"in o?o.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",o.cssRules.length):"addRule"in o&&o.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",o.cssRules.length)},i=function(e,t){"insertRule"in o?o.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",o.cssRules.length):"addRule"in o&&o.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",o.cssRules.length)},l=function(e,t){"insertRule"in o?o.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",o.cssRules.length):"addRule"in o&&o.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",o.cssRules.length)},d=function(e){for(var t=0;t<o.cssRules.length;t++)if(o.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container'){o.deleteRule(t);break}},c=function(e){for(var t=0;t<o.cssRules.length;t++)if(o.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background'){o.deleteRule(t);break}},s=function(e,t){for(var n=0;n<o.cssRules.length;n++)if(o.cssRules[n].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text'){o.deleteRule(n);break}},_=function(e){for(var t=0;t<o.cssRules.length;t++)if(o.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover'){o.deleteRule(t);break}},u=function(e,t){for(var n=0;n<o.cssRules.length;n++)if(o.cssRules[n].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover'){o.deleteRule(n);break}},p=function(){if(0==Button_Import_Modal.$buttonsStyle.length){var e="",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.id="rexliveStyle-inline-css",n.dataset.rexName="buttons-style",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}for(var r=0;r<document.styleSheets.length;r++)"rexliveStyle-inline-css"==document.styleSheets[r].ownerNode.id&&(o=document.styleSheets[r])},m=function(e,t){var o={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},d="",c="",s="",_="",u="",p="";p+="color: "+t.text_color+";",u=isNaN(parseInt(t.font_size.replace("px","")))?o.font_size:t.font_size,p+="font-size: "+u+";",s=isNaN(parseInt(t.button_height.replace("px","")))?o.dimensions.height:t.button_height,p+="min-height: "+s+";",s=isNaN(parseInt(t.button_width.replace("px","")))?o.dimensions.width:t.button_width,p+="min-width: "+s+";",d=isNaN(parseInt(t.margin_top.replace("px","")))?o.margins.top:t.margin_top,p+="margin-top: "+d+";",d=isNaN(parseInt(t.margin_right.replace("px","")))?o.margins.right:t.margin_right,p+="margin-right: "+d+";",d=isNaN(parseInt(t.margin_bottom.replace("px","")))?o.margins.bottom:t.margin_bottom,p+="margin-bottom: "+d+";",d=isNaN(parseInt(t.margin_left.replace("px","")))?o.margins.left:t.margin_left,p+="margin-left: "+d+";",n(e,p);var m="";m+="border-color: "+t.border_color+";",m+="border-style: solid;",_=isNaN(parseInt(t.border_width.replace("px","")))?o.border.width:t.border_width,m+="border-width: "+_+";",_=isNaN(parseInt(t.border_radius.replace("px","")))?o.border.radius:t.border_radius,m+="border-radius: "+_+";",m+="background-color: "+t.background_color+";",r(e,m);var v="";c=isNaN(parseInt(t.padding_top.replace("px","")))?o.paddings.top:t.padding_top,v+="padding-top: "+c+";",c=isNaN(parseInt(t.padding_right.replace("px","")))?o.paddings.right:t.padding_right,v+="padding-right: "+c+";",c=isNaN(parseInt(t.padding_bottom.replace("px","")))?o.paddings.bottom:t.padding_bottom,v+="padding-bottom: "+c+";",c=isNaN(parseInt(t.padding_left.replace("px","")))?o.paddings.left:t.padding_left,v+="padding-left: "+c+";",a(e,v);var f="";f+="background-color: "+t.hover_color+";",f+="border-color: "+t.hover_border+";",i(e,f);var g="";g+="color: "+t.hover_text+";",l(e,g)},v=function(e){d(e),c(e),_(e),s(e),u(e)},f=function(){return o},g=function(o){var n=o.buttonData,r=n.buttonTarget.button_id,a=o.html;v(r),m(r,n);var i=t.$buttonList.find('.rex-button-wrapper[data-rex-button-id="'+r+'"]');if(0==i.length){var l=e(document.createElement("li"));l.attr("draggable",!0),l.addClass("button-list__element");var d=e(document.createElement("div"));d.append(e(jQuery.parseHTML(a))),d.addClass("rex-container"),d.appendTo(l),l.appendTo(t.$buttonList);var c=tmpl("tmpl-rex-button-delete")();l.append(c)}else{var s=i.parent();i.remove(),s.append(e(jQuery.parseHTML(a)))}},b=function(){var t,o,n,r,a,i=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,l=e(i),d={width:0,height:0},c={x:10,y:10},s=!1,_={x:50,y:50},u=!!document.documentMode,p=0,m=0;Rexlive_Base_Settings.$document.on("dragstart",".button-list li",function(t){Rexbuilder_Util_Admin_Editor.dragImportType="rexbutton",t.originalEvent.dataTransfer.effectAllowed="all",a=setInterval(function(){b.ProcessDragOverQueue()},100);var o=e(this).html(),n=e(this).find(".rex-button-background").eq(0);d.width=n.outerWidth(),d.height=n.outerHeight(),u?t.originalEvent.dataTransfer.setData("text",o):t.originalEvent.dataTransfer.setData("text/plain",o),Rexbuilder_Util_Admin_Editor.addClassToLiveFrameRexContainer("rex-dragging-button");var r={eventName:"rexlive:drag_drop_starded",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}),Rexlive_Base_Settings.$document.on("drag",".button-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),m<150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(-1)),m>l.height()-150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(1))}),Rexlive_Base_Settings.$document.on("dragend",".button-list li",function(e){clearInterval(a),Rexbuilder_Util_Admin_Editor.setScroll(!0),b.removePlaceholder(),b.ClearContainerContext(),Rexbuilder_Util_Admin_Editor.removeClassToLiveFrameRexContainer("rex-dragging-button"),Rexbuilder_Util_Admin_Editor.dragImportType="";var t={eventName:"rexlive:drag_drop_ended",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var a=e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0),i={},c={};l.on("dragover",function(e){"rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType&&(e.preventDefault(),e.stopPropagation(),p=e.originalEvent.clientX,m=e.originalEvent.clientY)}),a.on("dragenter",".grid-stack-row",function(a){"rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType&&(t=e(a.target),o=!0,n=a.target.getBoundingClientRect(),r=1)}),a.on("dragover",".grid-stack-row",function(e){if("rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType){if(r%15!=0&&0==o)return void(r+=1);e=e||window.event,r+=1,o=!1,i.x=e.originalEvent.clientX,i.y=e.originalEvent.clientY,c.x=e.originalEvent.pageX,c.y=e.originalEvent.pageY,b.AddEntryToDragOverQueue(t,n,i)}}),a.on("drop",".grid-stack-row",function(t){if("rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType){t.preventDefault(),t.stopPropagation();var o;o=t.isTrigger?triggerEvent.originalEvent:t.originalEvent;try{var n="";n=u?o.dataTransfer.getData("text"):o.dataTransfer.getData("text/plain");var r=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker");n=n.trim();var a=e(jQuery.parseHTML(n));a.addClass("rex-loading-button"),a.insertAfter(r[0]),r.remove();var i={eventName:"rexlive:importButton",data_to_send:{buttonDimensions:d,mousePosition:c}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)}catch(o){console.log(o)}}})});var v,f=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"],g=f.join(","),b={dragoverqueue:[],GetMouseBearingsPercentage:function(e,t,o){return t||(t=e.get(0).getBoundingClientRect()),{x:(o.x-t.left)/(t.right-t.left)*100,y:(o.y-t.top)/(t.bottom-t.top)*100}},OrchestrateDragDrop:function(e,t,o){if(!e||0==e.length||!t||!o)return!1;if(e.is("html")&&(e=e.find("body")),v=this.GetMouseBearingsPercentage(e,t,o),(e.hasClass("rex-button-wrapper")||0!=e.parents(".rex-button-wrapper").length)&&(e=e.hasClass("rex-button-wrapper")?e:e.parents(".rex-button-wrapper").eq(0),_=jQuery.extend(!0,{},c),s=!0,c.x=50,c.y=50),v.x>c.x&&v.x<100-c.x&&v.y>c.y&&v.y<100-c.y){var n=e.clone();if(n.find(".drop-marker").remove(),""!=n.html()||this.checkVoidElement(n))if(0==n.children().length)this.DecideBeforeAfter(e,v);else if(1==n.children().length)if(n.hasClass("rex-buttons-paragraph")){var r=this.findNearestElement(e,o.x,o.y);this.DecideBeforeAfter(r.el,v,o)}else this.DecideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),v);else{var r=this.findNearestElement(e,o.x,o.y);this.DecideBeforeAfter(r.el,v,o)}else if(v.y<90)return this.PlaceInside(e)}else if(v.x<=c.x||v.y<=c.y)a=v.y<=v.x?this.FindValidParent(e,"top"):this.FindValidParent(e,"left"),a.is("body,html")&&(a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.DecideBeforeAfter(a,v,o);else if(v.x>=100-c.x||v.y>=100-c.y){var a=null;a=v.y>=v.x?this.FindValidParent(e,"bottom"):this.FindValidParent(e,"right"),a.is("body,html")&&(a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.DecideBeforeAfter(a,v,o)}if(s&&(c.x=_.x,c.y=_.y,s=!1),!e.hasClass("rex-buttons-paragraph")&&!e.hasClass("text-wrap")&&!e.hasClass("rex-button-wrapper")){var i=e.parents(".grid-stack-item");0!=i.length&&(this.removePlaceholder(),i.find(".text-wrap").eq(0).append(this.getPlaceHolder()))}},DecideBeforeAfter:function(e,t,o){o&&(t=this.GetMouseBearingsPercentage(e,null,o));var n="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");return e.is("br")&&(n=!1),n?t.x<50?this.PlaceBefore(e):this.PlaceAfter(e):t.y<50?this.PlaceBefore(e):this.PlaceAfter(e)},checkVoidElement:function(e){return e.is(g)},calculateDistance:function(e,t,o){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-o,2))},FindValidParent:function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(r.left-o.left))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"right":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(r.right-o.right))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"top":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(r.top-o.top))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"bottom":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(r.bottom-o.bottom))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}}},addPlaceHolder:function(e,t,o){switch(o||(o=this.getPlaceHolder()),this.removePlaceholder(),t){case"before":o.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.prepend(o):e.before(o),this.AddContainerContext(e,"sibling");break;case"after":o.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.append(o):e.after(o),this.AddContainerContext(e,"sibling");break;case"inside-prepend":o.find(".message").html(e.data("sh-dnd-error")),e.prepend(o),this.AddContainerContext(e,"inside");break;case"inside-append":o.find(".message").html(e.data("sh-dnd-error")),e.append(o),this.AddContainerContext(e,"inside")}},removePlaceholder:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker").remove()},getPlaceHolder:function(){return e("<li class='drop-marker'></li>")},PlaceInside:function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},PlaceBefore:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",t)},PlaceAfter:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},findNearestElement:function(t,o,n){var r=this,a=null,i=t.children(":not(.drop-marker,[data-dragcontext-marker])");if(i.length>0){if(i.each(function(){if(!e(this).is(".drop-marker")){var t,i=e(this).get(0).getBoundingClientRect(),l=0,d=null,c="",s=i.left,_=i.right,u=i.top,p=i.bottom,m=null,v=null;return n>u&&n<p?m=o<s&&n<_?{x:s,y:n,position:"before"}:{x:_,y:n,position:"after"}:o>s&&o<_?m=n<u&&n<p?{x:o,y:u,position:"before"}:{x:o,y:p,position:"after"}:o<s&&o<_?(m={x:s,y:u,position:"before"},v={x:s,y:p,position:"after"}):o>s&&o>_?(m={x:_,y:u,position:"before"},v={x:_,y:p,position:"after"}):n<u&&n<p?(m={x:s,y:u,position:"before"},v={x:_,y:u,position:"after"}):n>u&&n>p&&(m={x:s,y:p,position:"before"},v={x:_,y:p,position:"after"}),t=r.calculateDistance(m,o,n),null!==v&&(d=r.calculateDistance(v,o,n)),t<d||null===d?(l=t,c=m.position):(l=d,c=v.position),null!==a&&a.distance<l||void(a={el:this,distance:l,xPosition1:s,xPosition2:_,yPosition1:u,yPosition2:p,position:c})}}),null!==a){var l=a.position;return{el:e(a.el),position:l}}return!1}},AddEntryToDragOverQueue:function(e,t,o){var n=[e,t,o];this.dragoverqueue.push(n)},ProcessDragOverQueue:function(e,t,o){var n=this.dragoverqueue.pop();if(this.dragoverqueue=[],n&&3==n.length){var r=n[0],a=n[1],o=n[2];this.OrchestrateDragDrop(r,a,o)}},GetContextMarker:function(){var t=e("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>");return t},AddContainerContext:function(e,t){var o=this.GetContextMarker();switch(this.ClearContainerContext(),e.is("html,body")&&(t="inside",e=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body")),
t){case"inside":this.PositionContextMarker(o,e),e.hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e);o.find("[data-dragcontext-marker-text]").html(n),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o);break;case"sibling":this.PositionContextMarker(o,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e.parent());o.find("[data-dragcontext-marker-text]").html(n),o.attr("data-dragcontext-marker",n.toLowerCase()),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o)}},PositionContextMarker:function(e,t){var o=t.get(0).getBoundingClientRect();e.css({height:o.height+4+"px",width:o.width+4+"px",top:o.top+l.scrollTop()-2+"px",left:o.left+l.scrollLeft()-2+"px"}),o.top+Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").scrollTop()<24&&e.find("[data-dragcontext-marker-text]").css("top","0px")},ClearContainerContext:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("[data-dragcontext-marker]").remove()},getElementName:function(e){return e.prop("tagName")}}},h=function(){Rexlive_Base_Settings.$document.on("click",".button__element--delete",function(o){var n=e(this).parents(".button-list__element").find(".rex-button-wrapper")[0];if(n){var r=n.getAttribute("data-rex-button-id"),a=confirm(live_editor_obj.labels.rexbuttons.confirm_delete);if(a){var i={action:"rex_delete_rexbutton",nonce_param:live_editor_obj.rexnonce,button_id:r},l=Rexlive_Base_Settings.encodeData(i),d=new XMLHttpRequest;d.open("POST",live_editor_obj.ajaxurl,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.onloadstart=function(){t.$self.addClass("rex-modal--loading")},d.onload=function(){d.status>=200&&d.status<400&&(n.parentNode.parentNode.style.display="none",Button_Edit_Modal.removeIDButtonSoft(r))},d.onerror=function(){},d.onloadend=function(){t.$self.removeClass("rex-modal--loading")},d.send(l)}}}),Rexlive_Base_Settings.$document.on("click",".rex-button-container",function(e){e.preventDefault()})},x=function(){var o=e("#rex-buttons-list");t={$self:o,$buttonList:o.find(".button-list")},this.$buttonsStyle=e("#rexliveStyle-inline-css"),p(),b(),h()};return{init:x,updateButtonList:g,getActiveStyleSheet:f}}(jQuery),Button_Edit_Modal=function(e){"use strict";var t,o,n,r,a,i,l,d,c,s,_=function(t,o){o="undefined"!=typeof o&&"true"==o.toString(),t.keydown(function(t){var n=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(o||"-"!=t.key||t.preventDefault(),38==t.keyCode&&(t.preventDefault(),n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o?n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val()-1)):n.val(Math.max(isNaN(parseInt(n.val()))?0:parseInt(n.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&n.blur()))})},u=function(e,t,o){o="undefined"!=typeof o&&"true"==o.toString(),e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),(o||"-"!=e.key)&&t.call(this,parseInt(e.target.value)))})},p=function(){Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},m=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},v=function(){t.$button.on("click",function(e){var t=this.getAttribute("data-rex-option");switch(m(),t){case"remove":j();break;case"edit":d=!0,o.$self.addClass("editing-model"),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap")),G()}}),t.$close_button.on("click",function(){m()})},f=function(){var o=e("#rex-button-model-choose"),n=o;t={$self:o,$button:n.find(".rex-button"),$close_button:n.find(".rex-modal__close-button")},v()},g=function(e){c=!1,h(e),d?p():Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},b=function(){Rexlive_Modals_Utils.closeModal(o.$self.parent(".rex-modal-wrap"))},h=function(e){d=!1,$(),w(e),k(),x()},x=function(){var t=e("#rex-button-link-target").val(),n=e("#rex-button__name").val();""==t||null==t||void 0==t?(e(".rexbutton-cont_row45").find(".prefix").removeClass("active"),e(".rexbutton-cont_row45").find("#rex-button-link-target-label").removeClass("active")):(e(".rexbutton-cont_row45").find(".prefix").addClass("active"),e(".rexbutton-cont_row45").find("#rex-button-link-target-label").addClass("active")),""==n||null==n||void 0==n?(e(".rexbutton-cont_row77").find(".prefix").removeClass("active"),e(".rexbutton-cont_row77").find("#rex-button__name-label").removeClass("active")):(e(".rexbutton-cont_row77").find(".prefix").addClass("active"),e(".rexbutton-cont_row77").find("#rex-button__name-label").addClass("active")),""!==o.$button_class.val()?(o.$button_class.prev().addClass("active"),o.$button_class.next().addClass("active")):(o.$button_class.prev().removeClass("active"),o.$button_class.next().removeClass("active"))},$=function(){n={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}}},w=function(e){if("true"==e.separateButton.toString())n=jQuery.extend(!0,{},e.buttonInfo),d=!1;else{var t,o=e.buttonInfo.buttonTarget.button_id;for(d=!0,n.buttonTarget=jQuery.extend(!0,{},e.buttonInfo.buttonTarget),n.text=e.buttonInfo.text,n.link_target=e.buttonInfo.link_target,n.link_type=e.buttonInfo.link_type,n.classes=e.buttonInfo.classes,t=0;t<r.length;t++)if(o==r[t].rexID){n.text_color="undefined"==typeof r[t].rules.element.text_color?"":r[t].rules.element.text_color,n.font_size="undefined"==typeof r[t].rules.element.font_size?"":r[t].rules.element.font_size,n.background_color="undefined"==typeof r[t].rules.element.background_color?"":r[t].rules.element.background_color,n.button_height="undefined"==typeof r[t].rules.element.button_height?"":r[t].rules.element.button_height,n.button_width="undefined"==typeof r[t].rules.element.button_width?"":r[t].rules.element.button_width,n.hover_color="undefined"==typeof r[t].rules.hover.background_color?"":r[t].rules.hover.background_color,n.hover_text="undefined"==typeof r[t].rules.hover.text_color?"":r[t].rules.hover.text_color,n.hover_border="undefined"==typeof r[t].rules.hover.border_color?"":r[t].rules.hover.border_color,n.border_color="undefined"==typeof r[t].rules.element.border_color?"":r[t].rules.element.border_color,n.border_width="undefined"==typeof r[t].rules.element.border_width?"":r[t].rules.element.border_width,n.border_radius="undefined"==typeof r[t].rules.element.border_radius?"":r[t].rules.element.border_radius,n.margin_top="undefined"==typeof r[t].rules.element.margin_top?"":r[t].rules.element.margin_top,n.margin_bottom="undefined"==typeof r[t].rules.element.margin_bottom?"":r[t].rules.element.margin_bottom,n.margin_right="undefined"==typeof r[t].rules.element.margin_right?"":r[t].rules.element.margin_right,n.margin_left="undefined"==typeof r[t].rules.element.margin_left?"":r[t].rules.element.margin_left,n.padding_top="undefined"==typeof r[t].rules.element.padding_top?"":r[t].rules.element.padding_top,n.padding_bottom="undefined"==typeof r[t].rules.element.padding_bottom?"":r[t].rules.element.padding_bottom,n.padding_right="undefined"==typeof r[t].rules.element.padding_right?"":r[t].rules.element.padding_right,n.padding_left="undefined"==typeof r[t].rules.element.padding_left?"":r[t].rules.element.padding_left,n.buttonTarget.button_name=r[t].buttonName;break}"undefined"!=typeof e.buttonInfo.synchronize&&(c="true"==e.buttonInfo.synchronize.toString())}i=jQuery.extend(!0,{},n),l=jQuery.extend(!0,{},n)},k=function(){o.$button_label_text.val(n.text),o.$button_label_text_size.val(n.font_size.replace("px","")),o.$button_height.val(n.button_height.replace("px","")),o.$button_width.val(n.button_width.replace("px","")),o.$button_border_width.val(n.border_width.replace("px","")),o.$button_border_radius.val(n.border_radius.replace("px","")),o.$button_margin_top.val(n.margin_top.replace("px","")),o.$button_margin_right.val(n.margin_right.replace("px","")),o.$button_margin_left.val(n.margin_left.replace("px","")),o.$button_margin_bottom.val(n.margin_bottom.replace("px","")),o.$button_padding_top.val(n.padding_top.replace("px","")),o.$button_padding_right.val(n.padding_right.replace("px","")),o.$button_padding_left.val(n.padding_left.replace("px","")),o.$button_padding_bottom.val(n.padding_bottom.replace("px","")),o.$button_link_target.val(n.link_target),o.$button_link_type.val(n.link_type),o.$button_name.val(n.buttonTarget.button_name),o.$button_class.val(n.classes),o.$button_preview_border.css("border-width",n.border_width),o.$button_label_text.css("color",n.text_color),o.$button_label_text_color_value.val(n.text_color),o.$button_label_text_color_preview.hide(),o.$button_label_text_color_value.spectrum("set",n.text_color),o.$button_preview_background_hover.css("background-color",n.hover_color),o.$button_background_hover_color_value.val(n.hover_color),o.$button_background_hover_color_value.spectrum("set",n.hover_color),o.$button_background_hover_color_preview.hide(),o.$button_preview_text_hover.css("background-color",n.hover_text),o.$button_text_hover_color_value.val(n.hover_text),o.$button_text_hover_color_value.spectrum("set",n.hover_text),o.$button_text_hover_color_preview.hide(),o.$button_preview_border_hover.css("background-color",n.hover_border),o.$button_border_hover_color_value.val(n.hover_border),o.$button_border_hover_color_value.spectrum("set",n.hover_border),o.$button_border_hover_color_preview.hide(),o.$button_preview_background.css("background-color",n.background_color),o.$button_background_color_value.val(n.background_color),o.$button_background_color_preview.hide(),o.$button_background_color_value.spectrum("set",n.background_color),o.$button_preview_border.css("border-color",n.border_color),o.$button_border_color_value.val(n.border_color),o.$button_border_color_preview.hide(),o.$button_border_color_value.spectrum("set",n.border_color),d?o.$self.addClass("editing-model"):o.$self.removeClass("editing-model")},y=function(){n.font_size=o.$button_label_text_size.val()+"px",n.button_height=o.$button_height.val()+"px",n.button_width=o.$button_width.val()+"px",n.border_width=o.$button_border_width.val()+"px",n.border_radius=o.$button_border_radius.val()+"px",n.margin_top=o.$button_margin_top.val()+"px",n.margin_bottom=o.$button_margin_bottom.val()+"px",n.margin_right=o.$button_margin_right.val()+"px",n.margin_left=o.$button_margin_left.val()+"px",n.padding_top=o.$button_padding_top.val()+"px",n.padding_bottom=o.$button_padding_bottom.val()+"px",n.padding_right=o.$button_padding_right.val()+"px",n.padding_left=o.$button_padding_left.val()+"px",n.buttonTarget.button_name=o.$button_name.val(),n.text=o.$button_label_text.val(),n.link_target=o.$button_link_target.val(),n.link_type=o.$button_link_type.val(),n.classes=o.$button_class.val()},C=function(){o.$button_label_text.on("keyup",function(e){H({type:"button",name:"button_label",value:o.$button_label_text.val()})}),o.$button_link_target.on("keyup",function(e){H({type:"button",name:"link_target",value:o.$button_link_target.val()})}),o.$button_class.on("focusout",function(e){H({type:"button",name:"button_class",value:o.$button_class.val()})}),o.$button_name.on("keyup",function(e){d||H({type:"button",name:"button_name",value:o.$button_name.val()})})},M=function(){var e="",t=function(t){e=isNaN(parseInt(t))?s.font_size:t+"px",H({type:"container",name:"font-size",value:e})};_(o.$button_label_text_size,!1),u(o.$button_label_text_size,t,!1);var n=function(t){e=isNaN(parseInt(t))?s.dimensions.height:t+"px",H({type:"container",name:"min-height",value:e})};_(o.$button_height,!1),u(o.$button_height,n,!1);var r=function(t){e=isNaN(parseInt(t))?s.dimensions.width:t+"px",H({type:"container",name:"min-width",value:e})};_(o.$button_width,!1),u(o.$button_width,r,!1);var a=function(t){e=isNaN(parseInt(t))?s.border.width:t+"px",H({type:"background",name:"border-width",value:e})};_(o.$button_border_width,!1),u(o.$button_border_width,a,!1);var i=function(t){e=isNaN(parseInt(t))?s.border.radius:t+"px",H({type:"background",name:"border-radius",value:e})};_(o.$button_border_radius,!1),u(o.$button_border_radius,i,!1);var l=function(t){e=isNaN(parseInt(t))?s.margins.top:t+"px",H({type:"container",name:"margin-top",value:e})};_(o.$button_margin_top,!1),u(o.$button_margin_top,l,!1);var d=function(t){e=isNaN(parseInt(t))?s.paddings.top:t+"px",H({type:"text",name:"padding-top",value:e})};_(o.$button_padding_top,!1),u(o.$button_padding_top,d,!1);var c=function(t){e=isNaN(parseInt(t))?s.margins.bottom:t+"px",H({type:"container",name:"margin-bottom",value:e})};_(o.$button_margin_bottom,!1),u(o.$button_margin_bottom,c,!1);var p=function(t){e=isNaN(parseInt(t))?s.paddings.top:t+"px",H({type:"text",name:"padding-bottom",value:e})};_(o.$button_padding_bottom,!1),u(o.$button_padding_bottom,p,!1);var m=function(t){e=isNaN(parseInt(t))?s.margins.left:t+"px",H({type:"container",name:"margin-left",value:e})};_(o.$button_margin_left,!1),u(o.$button_margin_left,m,!1);var v=function(t){e=isNaN(parseInt(t))?s.paddings.left:t+"px",H({type:"text",name:"padding-left",value:e})};_(o.$button_padding_left,!1),u(o.$button_padding_left,v,!1);var f=function(t){e=isNaN(parseInt(t))?s.margins.right:t+"px",H({type:"container",name:"margin-right",value:e})};_(o.$button_margin_right,!1),u(o.$button_margin_right,f,!1);var g=function(t){e=isNaN(parseInt(t))?s.paddings.right:t+"px",H({type:"text",name:"padding-right",value:e})};_(o.$button_padding_right,!1),u(o.$button_padding_right,g,!1)},R=function(){o.$button_link_type.on("change",function(e){H({type:"button",name:"link_type",value:o.$button_link_type.val()})})},E=function(){var t;o.$button_label_text_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_label_text_color_preview.hide(),o.$button_label_text.css("color",t),H({type:"container",name:"color",value:t})},change:function(e){},hide:function(e){n.text_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_label_text_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_label_text_color_value.spectrum("hide")}),o.$button_label_text_color_preview.on("click",function(){return o.$button_label_text_color_value.spectrum("show"),!1})},I=function(){var t;o.$button_background_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_background_color_preview.hide(),o.$button_preview_background.css("background-color",t),H({type:"background",name:"background-color",value:t})},change:function(e){},hide:function(e){n.background_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_background_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_background_color_value.spectrum("hide")}),o.$button_background_color_preview.on("click",function(){return o.$button_background_color_value.spectrum("show"),!1})},N=function(){var t;o.$button_background_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_background_hover_color_preview.hide(),o.$button_preview_background_hover.css("background-color",t),H({type:"backgroundHover",name:"background-color",value:t})},change:function(e){},hide:function(e){n.hover_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_background_hover_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_background_hover_color_value.spectrum("hide")}),o.$button_background_color_preview.on("click",function(){return o.$button_background_hover_color_value.spectrum("show"),!1})},S=function(){var t;o.$button_border_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-border-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_border_hover_color_preview.hide(),o.$button_preview_border_hover.css("background-color",t),H({type:"borderHover",name:"border-color",value:t})},change:function(e){},hide:function(e){n.hover_border=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_border_hover_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_border_hover_color_value.spectrum("hide")}),o.$button_border_color_preview.on("click",function(){return o.$button_border_hover_color_value.spectrum("show"),!1})},D=function(){var t;o.$button_text_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-text-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_text_hover_color_preview.hide(),o.$button_preview_text_hover.css("background-color",t),H({type:"textHover",name:"color",value:t})},change:function(e){},hide:function(e){n.hover_text=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_text_hover_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_text_hover_color_value.spectrum("hide")}),o.$button_text_hover_color_preview.on("click",function(){return o.$button_text_hover_color_value.spectrum("show"),!1})},A=function(){var t;o.$button_border_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),o.$button_border_color_preview.hide(),o.$button_preview_border.css("border-color",t),H({type:"background",name:"border-color",value:t})},change:function(e){},hide:function(e){n.border_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);o.$button_border_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),o.$button_border_color_value.spectrum("hide")}),o.$button_border_color_preview.on("click",function(){return o.$button_border_color_value.spectrum("show"),!1})},B=function(){O();var t=Q(),a=W(),i=JSON.stringify(r),l=n.buttonTarget.button_id;o.$add_model_button.addClass("saving-rex-button"),e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_button",nonce_param:live_editor_obj.rexnonce,id_button:l,html_button:t,css_button:a,jsonRexButtons:i},beforeSend:function(){o.$self.addClass("rex-modal--loading")},success:function(e){Button_Import_Modal.updateButtonList({html:t,buttonData:n}),d||Y(),o.$add_model_button.removeClass("saving-rex-button")},error:function(e){},complete:function(e){o.$self.removeClass("rex-modal--loading")}})},T=function(e){var t=a.indexOf(e.rexID);return t!=-1?(a.splice(t,1),e.updateDB&&F(),e.rexID):null},U=function(e){a.push(e)},P=function(e){var t=a.indexOf(e);t!=-1&&a.splice(t,1)},j=function(){var e=L();U(e),F({rexID:e,separate:!0})},z=function(e){J(e),V({id:e,number:1}),d=!1,k(),Rexlive_Modals_Utils.openModal(o.$self.parent(".rex-modal-wrap"))},F=function(t){var o="undefined"!=typeof t&&t.separate;e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_buttons_ids",nonce_param:live_editor_obj.rexnonce,ids_used:JSON.stringify(a)},success:function(){o&&z(t.rexID)},error:function(){},complete:function(){}})},V=function(e){n.buttonTarget.button_id=e.id,n.buttonTarget.button_number=e.number},L=function(){var e,t,o="";do for(e=!0,o=Rexbuilder_Util_Admin_Editor.createRandomID(4),t=0;t<a.length;t++)if(o==a[t]){e=!1;break}while(!e);return o},O=function(){var e,t=n.buttonTarget.button_id;for(e=0;e<r.length&&t!=r[e].rexID;e++);e!=r.length&&r.splice(e,1);var o={rexID:t,buttonName:n.buttonTarget.button_name,rules:{element:{text_color:n.text_color,font_size:n.font_size,background_color:n.background_color,button_height:n.button_height,button_width:n.button_width,border_color:n.border_color,border_width:n.border_width,border_radius:n.border_radius,margin_top:n.margin_top,margin_bottom:n.margin_bottom,margin_right:n.margin_right,margin_left:n.margin_left,padding_top:n.padding_top,padding_bottom:n.padding_bottom,padding_right:n.padding_right,padding_left:n.padding_left},hover:{background_color:n.hover_color,text_color:n.hover_text,border_color:n.hover_border}}};r.push(o)},W=function(){var e=n.buttonTarget.button_id,t="",o="",r="",a="",i="",l="";return t='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-container{",l=isNaN(parseInt(n.font_size.replace("px","")))?s.font_size:n.font_size,t+="font-size: "+l+";",t+="color: "+n.text_color+";",a=isNaN(parseInt(n.button_height.replace("px","")))?s.dimensions.height:n.button_height,t+="min-height: "+a+";",a=isNaN(parseInt(n.button_width.replace("px","")))?s.dimensions.width:n.button_width,t+="min-width: "+a+";",o=isNaN(parseInt(n.margin_top.replace("px","")))?s.margins.top:n.margin_top,t+="margin-top: "+o+";",o=isNaN(parseInt(n.margin_right.replace("px","")))?s.margins.right:n.margin_right,t+="margin-right: "+o+";",o=isNaN(parseInt(n.margin_bottom.replace("px","")))?s.margins.bottom:n.margin_bottom,t+="margin-bottom: "+o+";",o=isNaN(parseInt(n.margin_left.replace("px","")))?s.margins.left:n.margin_left,t+="margin-left: "+o+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-text{",r=isNaN(parseInt(n.padding_top.replace("px","")))?s.paddings.top:n.padding_top,t+="padding-top: "+r+";",r=isNaN(parseInt(n.padding_right.replace("px","")))?s.paddings.right:n.padding_right,t+="padding-right: "+r+";",r=isNaN(parseInt(n.padding_bottom.replace("px","")))?s.paddings.bottom:n.padding_bottom,t+="padding-bottom: "+r+";",r=isNaN(parseInt(n.padding_left.replace("px","")))?s.paddings.left:n.padding_left,t+="padding-left: "+r+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-background{",t+="background-color: "+n.background_color+";",t+="border-color: "+n.border_color+";",i=isNaN(parseInt(n.border_width.replace("px","")))?s.border.width:n.border_width,t+="border-width: "+i+";",i=isNaN(parseInt(n.border_radius.replace("px","")))?s.border.radius:n.border_radius,t+="border-radius: "+i+";",t+="border-style: solid;",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-background:hover{",t+="background-color: "+n.hover_color+";",t+="border-color: "+n.hover_border+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-container:hover{",t+="color: "+n.hover_text+";",t+="}"},Q=function(){var e="";tmpl.arg="button";var t={text:"Learn More",link_target:"#",link_type:"_blank"},o={text_color:n.text_color,text:t.text,font_size:n.font_size,button_height:n.button_height,button_width:n.button_width,background_color:n.background_color,hover_color:n.hover_color,hover_text:n.hover_text,hover_border:n.hover_border,border_color:n.border_color,border_width:n.border_width,border_radius:n.border_radius,margin_top:n.margin_top,margin_bottom:n.margin_bottom,margin_right:n.margin_right,margin_left:n.margin_left,padding_top:n.padding_top,padding_bottom:n.padding_bottom,padding_right:n.padding_right,padding_left:n.padding_left,link_target:t.link_target,link_type:t.link_type,button_name:n.buttonTarget.button_name,id:n.buttonTarget.button_id};return e=tmpl("tmpl-rex-button",o),e=e.trim()},G=function(){var e={eventName:"rexlive:lock_synchronize_on_button",data_to_send:{buttonTarget:n.buttonTarget}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},q=function(){var e={eventName:"rexlive:update_button_page",data_to_send:{reverseButtonData:jQuery.extend(!0,{},i),actionButtonData:jQuery.extend(!0,{},n)}};i=jQuery.extend(!0,{},e.data_to_send.actionButtonData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},H=function(e){var t={eventName:"rexlive:updateButtonLive",data_to_send:{buttonTarget:n.buttonTarget,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},Y=function(){var e={eventName:"rexlive:remove_separate_button",data_to_send:{buttonTarget:n.buttonTarget}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},J=function(e){var t={eventName:"rexlive:separate_rex_button",data_to_send:{newID:e,buttonData:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},K=function(){o.$reset_button.on("click",function(){n=jQuery.extend(!0,{},l),k(),q()}),o.$add_model_button.on("click",function(){y(),B()}),o.$close_button.on("click",function(){n=jQuery.extend(!0,{},l),k(),q(),b()}),o.$apply_changes_button.on("click",function(){b()}),o.$modal.on("rexlive:this_modal_closed",function(){y(),q(),d&&B()})},X=function(){var t=e("#rex-button-editor"),i=t.find(".rexpansive-accordion"),l=t;o={$self:t,$modal:l.parent(".rex-modal-wrap"),$close_button:l.find(".rex-cancel-button"),$reset_button:l.find(".rex-reset-button"),$create_new_button:e("#rex-add-new-button"),$add_model_button:l.find(".add-rex-button-model"),$apply_changes_button:l.find(".rex-apply-button"),$button_label_text:l.find("#rex-button__label"),$button_label_text_size:l.find("#rex-button_text_font_size"),$button_label_text_color_value:l.find("#rex-button-text-color"),$button_label_text_color_runtime:l.find("#rex-button-text-color-runtime"),$button_label_text_color_preview:l.find("#rex-button-text-color-preview-icon"),$button_preview_background:l.find("#rex-button-preview-background"),$button_background_color_value:l.find("#rex-button-background-color"),$button_background_color_runtime:l.find("#rex-button-background-color-runtime"),$button_background_color_preview:l.find("#rex-button-background-color-preview-icon"),$button_height:l.find("#rex-button-height"),$button_width:l.find("#rex-button-width"),$button_preview_background_hover:l.find("#rex-button-preview-background-hover"),$button_background_hover_color_value:l.find("#rex-button-background-hover-color"),$button_background_hover_color_runtime:l.find("#rex-button-background-hover-color-runtime"),$button_background_hover_color_preview:l.find("#rex-button-background-hover-color-preview-icon"),$button_preview_text_hover:l.find("#rex-button-preview-text-hover"),$button_text_hover_color_value:l.find("#rex-button-text-hover-color"),$button_text_hover_color_runtime:l.find("#rex-button-text-hover-color-runtime"),$button_text_hover_color_preview:l.find("#rex-button-text-hover-color-preview-icon"),$button_preview_border_hover:l.find("#rex-button-preview-border-hover"),$button_border_hover_color_value:l.find("#rex-button-border-hover-color"),$button_border_hover_color_runtime:l.find("#rex-button-border-hover-color-runtime"),$button_border_hover_color_preview:l.find("#rex-button-border-hover-color-preview-icon"),$button_preview_border:l.find("#rex-button-border-preview"),$button_border_color_value:l.find("#rex-button-border-color"),$button_border_color_runtime:l.find("#rex-button-border-color-runtime"),$button_border_color_preview:l.find("#rex-button-color-preview-icon"),$button_border_width:l.find("#rex-button-border-width"),$button_border_radius:l.find("#rex-button-border-radius"),$button_margin_top:l.find("#rex-button-margin-top-radius"),$button_margin_right:l.find("#rex-button-margin-right-radius"),$button_margin_bottom:l.find("#rex-button-margin-bottom-radius"),$button_margin_left:l.find("#rex-button-margin-left-radius"),$button_padding_top:l.find("#rex-button-padding-top-radius"),$button_padding_right:l.find("#rex-button-padding-right-radius"),$button_padding_bottom:l.find("#rex-button-padding-bottom-radius"),$button_padding_left:l.find("#rex-button-padding-left-radius"),$button_link_target:l.find("#rex-button-link-target"),$button_link_type:l.find("#rex-button-link-type"),$button_class:l.find("#rex-button__class"),$button_name:l.find("#rex-button__name")},r=JSON.parse(e("#rex-buttons-json-css").text()),a=JSON.parse(e("#rex-buttons-ids-used").text()),K(),s={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},n={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_left:"",margin_right:"",padding_top:"",padding_bottom:"",padding_left:"",padding_right:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}},C(),M(),R(),E(),I(),N(),S(),D(),A(),f(),i.rexAccordion({open:{},close:{}})};return{init:X,openButtonEditorModal:g,removeIDButton:T,removeIDButtonSoft:P}}(jQuery),Element_Import_Modal=function(e){"use strict";var t,o,n=function(){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_element_list",nonce_param:live_editor_obj.rexnonce},success:function(o){if(o.success){var n=[];t.$self.find(".element-list__element").each(function(t,o){var r=e(o).attr("data-rex-element-id"),a={id:r,founded:!1};n.push(a)});for(var r=o.data.updated_list,a=0;a<r.length;a++)r[a].founded=!1;for(var a=0;a<r.length;a++)for(var i=0;i<n.length;i++)if(r[a].id==n[i].id){r[a].founded=!0,n[i].founded=!0;break}tmpl.arg="element";for(var a=0;a<r.length;a++)r[a].founded||t.$self.find(".element-list").prepend(tmpl("rexlive-tmpl-element-item-list",{id:r[a].id,name:r[a].name,preview:""!=r[a].preview_image_url?r[a].preview_image_url:""})).find(".rex-element-wrapper").prepend(r[a].element_data_html[0]);for(var a=0;a<n.length;a++)n[a].founded||t.$self.find('.element-list__element[data-rex-element-id="'+n[a].id+'"]').remove();var l=jQuery.Event("rexlive:lateralMenuReady");e(document).trigger(l)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},r=function(t,o,n){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_element_thumbnail",nonce_param:live_editor_obj.rexnonce,element_target:t,image_selected:o,image_size:n,set_post_thumbnail_result:null,set_post_thumbnail_url_result:null},success:function(e){},error:function(e){}})},a=function(t){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_element_thumbnail",nonce_param:live_editor_obj.rexnonce,element_target:t,delete_post_thumbnail_result:null,delete_post_thumbnail_url_result:null},success:function(e){},error:function(e){}})},i=function(e){var o=e.getAttribute("data-rex-element-id");if(o){var n=confirm(live_editor_obj.labels.rexelements.confirm_delete);
if(n){var r={action:"rex_delete_rexelement",nonce_param:live_editor_obj.rexnonce,element_id:o},a=Rexlive_Base_Settings.encodeData(r),i=new XMLHttpRequest;i.open("POST",live_editor_obj.ajaxurl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.onloadstart=function(){t.$self.addClass("rex-modal--loading")},i.onload=function(){i.status>=200&&i.status<400&&(e.style.display="none")},i.onerror=function(){},i.onloadend=function(){t.$self.removeClass("rex-modal--loading")},i.send(a)}}},l=function(e,t){if(setUserSetting("imgsize","medium"),o)return o.state("live-image-element").set("selected_image",t).set("selected_element",e),void o.open();var n=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image-element",title:"Edit Element Thumbnail",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),selected_image:t,selected_element:e,type:"image"},wp.media.controller.Library.prototype.defaults)});o=wp.media({button:{text:"Select"},state:"live-image-element",states:[new n]}),o.on("open",function(){var e,t=o.state("live-image-element").get("selection");t.each(function(o){e=wp.media.attachment(o.attributes.id),e.fetch(),t.remove(e?[e]:[])});var n=o.state("live-image-element").get("selected_image");n&&(e=wp.media.attachment(n),e.fetch(),t.add(e?[e]:[],{imgsize:""}))}),o.on("select",function(){var e=o.state("live-image-element"),t=e.get("liveTarget"),n=e.get("eventName"),r=(e.get("data_to_send"),e.get("selection")),a={eventName:n,data_to_send:{sectionTarget:t,target:t}};if(r){var i,l;r.each(function(t){i=e.display(t).toJSON(),l=t.toJSON(),wp.media.view.settings.captions||delete l.caption,i=wp.media.string.props(i,l),a.data_to_send.idImage=l.id,a.data_to_send.urlImage=i.src}),d(i.src,i.size,l.id)}}),o.on("close",function(){setUserSetting("imgsize","medium")}),o.open()},d=function(t,n,a){var i=o.state("live-image-element").get("selected_element"),l=e('.element-list__element[data-rex-element-id="'+i+'"]');l.attr("data-rex-element-thumbnail-id",a),l.attr("data-rex-element-thumbnail-size",n),l.find(".element-list-preview").addClass("element-list-preview--active").css("background-image",'url("'+t+'")'),l.find(".element-list__element--edit-thumbnail").addClass("tool-button--image-preview").css("background-image",'url("'+t+'")'),r(i,a,n)},c=function(t){var o=e('.element-list__element[data-rex-element-id="'+t+'"]');o.attr("data-rex-element-thumbnail-id",""),o.attr("data-rex-element-thumbnail-size",""),o.find(".element-list-preview").css("background-image",'url("")').removeClass("element-list-preview--active"),o.find(".tool-button--image-preview").css("background-image",'url("")').removeClass("tool-button--image-preview"),a(t)},s=function(){var t,o,n,r,a,i=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,l=e(i),d={x:10,y:10},c=!1,s={x:50,y:50},_=!!document.documentMode,u=0,p=0;Rexlive_Base_Settings.$document.on("dragstart",".element-list li",function(t){Rexbuilder_Util_Admin_Editor.dragImportType="rexelement",t.originalEvent.dataTransfer.effectAllowed="all",a=setInterval(function(){g.ProcessDragOverQueue()},100);var o=e(this).html();_?t.originalEvent.dataTransfer.setData("text",o):t.originalEvent.dataTransfer.setData("text/plain",o),Rexbuilder_Util_Admin_Editor.addClassToLiveFrameRexContainer("rex-dragging-element");var n={eventName:"rexlive:drag_drop_starded",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)}),Rexlive_Base_Settings.$document.on("drag",".element-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),p<150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(-1)),p>l.height()-150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(1))}),Rexlive_Base_Settings.$document.on("dragend",".element-list li",function(e){clearInterval(a),Rexbuilder_Util_Admin_Editor.setScroll(!0),g.removePlaceholder(),g.ClearContainerContext(),Rexbuilder_Util_Admin_Editor.removeClassToLiveFrameRexContainer("rex-dragging-element"),Rexbuilder_Util_Admin_Editor.dragImportType="";var t={eventName:"rexlive:drag_drop_ended",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var a=e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0),i={},d={};l.on("dragover",function(e){"rexelement"==Rexbuilder_Util_Admin_Editor.dragImportType&&(e.preventDefault(),e.stopPropagation(),u=e.originalEvent.clientX,p=e.originalEvent.clientY)}),a.on("dragenter",".grid-stack-row",function(a){"rexelement"==Rexbuilder_Util_Admin_Editor.dragImportType&&(t=e(a.target),o=!0,n=a.target.getBoundingClientRect(),r=1)}),a.on("dragover",".grid-stack-row",function(e){if("rexelement"==Rexbuilder_Util_Admin_Editor.dragImportType){if(r%15!=0&&0==o)return void(r+=1);e=e||window.event,r+=1,o=!1,i.x=e.originalEvent.clientX,i.y=e.originalEvent.clientY,d.x=e.originalEvent.pageX,d.y=e.originalEvent.pageY,g.AddEntryToDragOverQueue(t,n,i)}}),a.on("drop",".grid-stack-row",function(t){if("rexelement"==Rexbuilder_Util_Admin_Editor.dragImportType){t.preventDefault(),t.stopPropagation();var o;o=t.isTrigger?triggerEvent.originalEvent:t.originalEvent;try{var n="";n=_?o.dataTransfer.getData("text"):o.dataTransfer.getData("text/plain");var r=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker");n=n.trim();var a=e(e.parseHTML(n));a.addClass("rex-loading-element"),a.insertAfter(r[0]),a.hide(),r.remove();var i={eventName:"rexlive:import_element",data:{mousePosition:d}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)}catch(o){console.log(o)}}})});var m,v=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"],f=v.join(","),g={dragoverqueue:[],GetMouseBearingsPercentage:function(e,t,o){return t||(t=e.get(0).getBoundingClientRect()),{x:(o.x-t.left)/(t.right-t.left)*100,y:(o.y-t.top)/(t.bottom-t.top)*100}},OrchestrateDragDrop:function(e,t,o){if(!e||0==e.length||!t||!o)return!1;if(e.is("html")&&(e=e.find("body")),m=this.GetMouseBearingsPercentage(e,t,o),(e.hasClass("rex-element-wrapper")||0!=e.parents(".rex-element-wrapper").length)&&(e=e.hasClass("rex-element-wrapper")?e:e.parents(".rex-element-wrapper").eq(0),s=jQuery.extend(!0,{},d),c=!0,d.x=50,d.y=50),m.x>d.x&&m.x<100-d.x&&m.y>d.y&&m.y<100-d.y){var n=e.clone();if(n.find(".drop-marker").remove(),""!=n.html()||this.checkVoidElement(n))if(0==n.children().length)this.DecideBeforeAfter(e,m);else if(1==n.children().length)if(n.hasClass("rex-elements-paragraph")){var r=this.findNearestElement(e,o.x,o.y);this.DecideBeforeAfter(r.el,m,o)}else this.DecideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),m);else{var r=this.findNearestElement(e,o.x,o.y);this.DecideBeforeAfter(r.el,m,o)}else if(m.y<90)return this.PlaceInside(e)}else if(m.x<=d.x||m.y<=d.y)a=m.y<=m.x?this.FindValidParent(e,"top"):this.FindValidParent(e,"left"),a.is("body,html")&&(a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.DecideBeforeAfter(a,m,o);else if(m.x>=100-d.x||m.y>=100-d.y){var a=null;a=m.y>=m.x?this.FindValidParent(e,"bottom"):this.FindValidParent(e,"right"),a.is("body,html")&&(a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.DecideBeforeAfter(a,m,o)}if(c&&(d.x=s.x,d.y=s.y,c=!1),!e.hasClass("rex-elements-paragraph")&&!e.hasClass("text-wrap")&&!e.hasClass(".rex-element-wrapper")){var i=e.parents(".grid-stack-item");0!=i.length&&(this.removePlaceholder(),i.find(".text-wrap").eq(0).append(this.getPlaceHolder()))}},DecideBeforeAfter:function(e,t,o){o&&(t=this.GetMouseBearingsPercentage(e,null,o));var n="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");return e.is("br")&&(n=!1),n?t.x<50?this.PlaceBefore(e):this.PlaceAfter(e):t.y<50?this.PlaceBefore(e):this.PlaceAfter(e)},checkVoidElement:function(e){return e.is(f)},calculateDistance:function(e,t,o){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-o,2))},FindValidParent:function(e,t){switch(t){case"left":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(r.left-o.left))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"right":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(r.right-o.right))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"top":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(r.top-o.top))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}break;case"bottom":for(;;){var o=e.get(0).getBoundingClientRect(),n=e.parent(),r=n.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||n.hasClass("rex-elements-paragraph"))return e;if(0!=Math.abs(r.bottom-o.bottom))return 0!=e.parents(".rex-element-wrapper").length?e.parents(".rex-element-wrapper").eq(0):e;e=e.parent()}}},addPlaceHolder:function(e,t,o){switch(o||(o=this.getPlaceHolder()),this.removePlaceholder(),t){case"before":o.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.prepend(o):e.before(o),this.AddContainerContext(e,"sibling");break;case"after":o.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.append(o):e.after(o),this.AddContainerContext(e,"sibling");break;case"inside-prepend":o.find(".message").html(e.data("sh-dnd-error")),e.prepend(o),this.AddContainerContext(e,"inside");break;case"inside-append":o.find(".message").html(e.data("sh-dnd-error")),e.append(o),this.AddContainerContext(e,"inside")}},removePlaceholder:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker").remove()},getPlaceHolder:function(){return e("<li class='drop-marker'></li>")},PlaceInside:function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},PlaceBefore:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",t)},PlaceAfter:function(e){var t=this.getPlaceHolder(),o="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))o=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t);o?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},findNearestElement:function(t,o,n){var r=this,a=null,i=t.children(":not(.drop-marker,[data-dragcontext-marker])");if(i.length>0){if(i.each(function(){if(!e(this).is(".drop-marker")){var t,i=e(this).get(0).getBoundingClientRect(),l=0,d=null,c="",s=i.left,_=i.right,u=i.top,p=i.bottom,m=null,v=null;return n>u&&n<p?m=o<s&&n<_?{x:s,y:n,position:"before"}:{x:_,y:n,position:"after"}:o>s&&o<_?m=n<u&&n<p?{x:o,y:u,position:"before"}:{x:o,y:p,position:"after"}:o<s&&o<_?(m={x:s,y:u,position:"before"},v={x:s,y:p,position:"after"}):o>s&&o>_?(m={x:_,y:u,position:"before"},v={x:_,y:p,position:"after"}):n<u&&n<p?(m={x:s,y:u,position:"before"},v={x:_,y:u,position:"after"}):n>u&&n>p&&(m={x:s,y:p,position:"before"},v={x:_,y:p,position:"after"}),t=r.calculateDistance(m,o,n),null!==v&&(d=r.calculateDistance(v,o,n)),t<d||null===d?(l=t,c=m.position):(l=d,c=v.position),null!==a&&a.distance<l||void(a={el:this,distance:l,xPosition1:s,xPosition2:_,yPosition1:u,yPosition2:p,position:c})}}),null!==a){var l=a.position;return{el:e(a.el),position:l}}return!1}},AddEntryToDragOverQueue:function(e,t,o){var n=[e,t,o];this.dragoverqueue.push(n)},ProcessDragOverQueue:function(e,t,o){var n=this.dragoverqueue.pop();if(this.dragoverqueue=[],n&&3==n.length){var r=n[0],a=n[1],o=n[2];this.OrchestrateDragDrop(r,a,o)}},GetContextMarker:function(){var t=e("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>");return t},AddContainerContext:function(e,t){var o=this.GetContextMarker();switch(this.ClearContainerContext(),e.is("html,body")&&(t="inside",e=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body")),t){case"inside":this.PositionContextMarker(o,e),e.hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e);o.find("[data-dragcontext-marker-text]").html(n),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o);break;case"sibling":this.PositionContextMarker(o,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&o.addClass("invalid");var n=this.getElementName(e.parent());o.find("[data-dragcontext-marker-text]").html(n),o.attr("data-dragcontext-marker",n.toLowerCase()),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(o)}},PositionContextMarker:function(e,t){var o=t.get(0).getBoundingClientRect();e.css({height:o.height+4+"px",width:o.width+4+"px",top:o.top+l.scrollTop()-2+"px",left:o.left+l.scrollLeft()-2+"px"}),o.top+Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").scrollTop()<24&&e.find("[data-dragcontext-marker-text]").css("top","0px")},ClearContainerContext:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("[data-dragcontext-marker]").remove()},getElementName:function(e){return e.prop("tagName")}}},u=function(){var o=e("#rex-elements-list");t={$self:o},s()};return{init:u,saveElementThumbnail:r,deleteElementThumbnail:a,updateElementList:n,deleteElement:i,editElementThumbnail:l,updateElementThumbnail:d,resetElementThumbnail:c}}(jQuery),Element_Choose_Modal=function(e){var t,o,n,r,a,i,l,d,c=function(e){a=!1,d=e.blockID,s(e.elementData),a?Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:o,blockID:d}):h()},s=function(e){_(),u(e)},_=function(){o={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}}},u=function(e){o=jQuery.extend(!0,{},e.elementInfo),"undefined"!=typeof o.synchronize&&(a="true"==o.synchronize.toString()),n=jQuery.extend(!0,{},o),r=jQuery.extend(!0,{},o)},p=function(){e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_clone_element",nonce_param:live_editor_obj.rexnonce,old_id:i},beforeSend:function(){},success:function(e){l=e.data.new_id,m(l)},error:function(){},complete:function(e){}})},m=function(e){v(e),f({id:e,number:1}),g(e),Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:o,blockID:d})},v=function(e){var t={eventName:"rexlive:separate_rex_element",data_to_send:{newID:e,elementData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},f=function(e){o.element_target.element_id=e.id,o.element_target.element_number=e.number},g=function(e){var t={eventName:"rexlive:refresh_separated_rex_element",data_to_send:{elementID:e,oldElementID:i,elementData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},b=function(){var e={eventName:"rexlive:lock_synchronize_on_element",data_to_send:{element_target:o.element_target}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},h=function(){Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-choose-element"],void 0,d)},x=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-choose-element"])},$=function(){var e={eventName:"rexlive:edited",modelEdited:!1};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},w=function(){t.$button.on("click",function(e){var t=this.getAttribute("data-rex-option");switch(x(),$(),t){case"remove":i=o.element_target.element_id,p();break;case"edit":Wpcf7_Edit_Form_Modal.openFormEditorModal({elementData:o,blockID:d}),b()}}),t.$close_button.on("click",function(){x()})},k=function(){var o=e("#rex-element-choose"),n=o;t={$self:o,$button:n.find(".rex-button"),$close_button:n.find(".rex-modal__close-button")},w()};return{init:k,selectModalToOpen:c,updateElementData:u}}(jQuery),Wpcf7_Add_Content_Modal=function(e){var t,o={},n=function(e){var n=e.blockID;o=e.insertionPoint,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-adding-content"],void 0,n)},r=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-adding-content"])},a=function(e){var t={eventName:"rexlive:wpcf7_add_field",data_to_send:{insertionPoint:o,fieldType:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),r()},i=function(){t.$close_button.on("click",function(){r()}),t.$wpcf7_add_text_field.on("click",function(){a("text")}),t.$wpcf7_add_textarea_field.on("click",function(){a("textarea")}),t.$wpcf7_add_menu_field.on("click",function(){a("menu")}),t.$wpcf7_add_radio_buttons_field.on("click",function(){a("radiobuttons")}),t.$wpcf7_add_checkbox_field.on("click",function(){a("acceptance")}),t.$wpcf7_add_file_field.on("click",function(){a("file")}),t.$wpcf7_add_submit_button.on("click",function(){a("submit")})},l=function(){var o=e("#rex-wpcf7-content-adder"),n=o;t={$self:o,$modal:n.parent(".rex-modal-wrap"),$close_button:n.find(".rex-cancel-button"),$wpcf7_add_text_field:n.find("#rex-add-text-field"),$wpcf7_add_textarea_field:n.find("#rex-add-textarea-field"),$wpcf7_add_menu_field:n.find("#rex-add-menu-field"),$wpcf7_add_checkbox_field:n.find("#rex-add-checkbox-field"),$wpcf7_add_file_field:n.find("#rex-add-file-field"),$wpcf7_add_radio_buttons_field:n.find("#rex-add-radiobuttons-field"),$wpcf7_add_submit_button:n.find("#rex-add-submit-button")},i()};return{init:l,openContentAdder:n}}(jQuery),Wpcf7_Edit_Content_Modal=function(e){var t,o,n,r,a,i,l=!0,d=!1,c=function(t,o){o="undefined"!=typeof o&&"true"==o.toString(),t.keydown(function(t){var n=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(o||"-"!=t.key||t.preventDefault(),38==t.keyCode&&(t.preventDefault(),n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o?n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val()-1)):n.val(Math.max(isNaN(parseInt(n.val()))?0:parseInt(n.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&n.blur()))})},s=function(e,t,o){o="undefined"!=typeof o&&"true"==o.toString(),e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),(o||"-"!=e.key)&&t.call(this,parseInt(e.target.value)))})},u=function(e){n=jQuery.extend(!0,{},e.columnContentData),o=e.columnContentData.target,l=!e.spanDataExists;var r=n.input_type,a=e.blockID;f(n),t.$self.find(".bl_modal-row").not(".row-hidden").addClass("row-hidden"),t.$self.find(".bl_modal__option-wrap").not(".row-hidden").addClass("row-hidden"),t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("no-br");var i=t.$content_input_font_size.parents("#rex-wpcf7-font-size-field").detach();switch(t.$button_preview.parents(".rex-accordion-outer--content").css("display","none"),t.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","visible"),t.$button_preview.css({display:"","font-weight":"","justify-content":"","text-transform":"","text-align":"","align-items":""}),r){case"text":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_set_email.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_only_numbers.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"email":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_set_email.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_only_numbers.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"number":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_set_email.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_only_numbers.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"textarea":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder_hover_color_value.parents(".bl_modal-row").removeClass("row-hidden");break;case"select":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_placeholder.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_select_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_select_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_select_color_after_selection_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$field_list.removeClass("row-hidden"),t.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden");break;case"radio":t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$field_list.removeClass("row-hidden"),t.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden");break;case"acceptance":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_default_check.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").find(".rex-wpcf7-accordion-plus-wrap").css("visibility","hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_text_editor.parents(".bl_modal-row").removeClass("row-hidden");break;case"file":t.$content_required_field.parents(".bl_modal__option-wrap").removeClass("row-hidden").addClass("no-br"),t.$content_required_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_width.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height_type.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_height.parents(".bl_modal__option-wrap").removeClass("row-hidden"),t.$content_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_text_color_value.parents(".rexwpcf7-cont_row").append(i),t.$content_text_color_focus_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_input_text_editor.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_file_max_dimensions.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_file_max_dimensions_unit.parents(".bl_modal-row").removeClass("row-hidden"),t.$field_list.removeClass("row-hidden"),t.$field_list.addClass("rex-wpcf7-file-list"),t.$add_list_field.parents(".bl_modal-row").removeClass("row-hidden"),t.$button_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$button_preview.css({display:"block","text-align":"left","text-transform":"none"}),t.$self.find(".accotdion-button-title").parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_background_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_border_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_text_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_background_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_border_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_margin_top.parents(".bl_modal-row").removeClass("row-hidden");break;case"submit":t.$button_preview.parents(".rex-accordion-outer--content").css("display",""),t.$button_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$button_preview.css({display:"flex","font-weight":700,"justify-content":"center","text-transform":"uppercase","align-items":"center"}),t.$content_button_text_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_background_color_value.parents(".bl_modal-row").removeClass("row-hidden"),
t.$content_button_border_color_value.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_text_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_background_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_border_color_hover_preview.parents(".bl_modal-row").removeClass("row-hidden"),t.$content_button_margin_top.parents(".bl_modal-row").removeClass("row-hidden")}Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-content"],void 0,a)},p=function(){m(),Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-content"])},m=function(){var e=t.$content_input_font_size.parents("#rex-wpcf7-font-size-field").detach();t.$self.find(".rex-wpcf7-font-size-row").append(e),t.$field_list.removeClass("rex-wpcf7-file-list")},v=function(){var e={eventName:"rexlive:update_wcpf7_column_content_page",data_to_send:{reverseColumnContentData:jQuery.extend(!0,{},r),actionColumnContentData:jQuery.extend(!0,{},n),needToSave:d}};r=jQuery.extend(!0,{},e.data_to_send.actionColumnContentData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},f=function(e){g(),b(e),h()},g=function(){n={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}}},b=function(e){n=jQuery.extend(!0,{},e),r=jQuery.extend(!0,{},n),a=jQuery.extend(!0,{},n)},h=function(){t.$content_required_field.prop("checked",n.wpcf7_required_field),t.$content_set_email.prop("checked",n.wpcf7_email),t.$content_only_numbers.prop("checked",n.wpcf7_only_numbers),t.$content_input_default_check.prop("checked",n.wpcf7_default_check),t.$content_placeholder.siblings("label, .prefix").removeClass("active"),t.$content_placeholder.val(n.wpcf7_placeholder),""!=t.$content_placeholder.val()&&t.$content_placeholder.siblings("label, .prefix").addClass("active"),t.$content_input_width.val(/[0-9]+/.exec(n.input_width));var o=null!=/[a-z]{2}|\%/.exec(n.input_width)?/[a-z]{2}|\%/.exec(n.input_width)[0]:"%";switch(o){case"px":t.$content_input_width_type.filter("[value=pixel]").prop("checked",!0);break;case"%":default:t.$content_input_width_type.filter("[value=percentage]").prop("checked",!0)}t.$content_input_width.siblings("label, .prefix").removeClass("active"),""!=t.$content_input_width.val()&&t.$content_input_width.siblings("label, .prefix").addClass("active"),t.$content_input_height.val(/[0-9]+/.exec(n.input_height));var r=null!=/[a-z]{2}|\%/.exec(n.input_height)?/[a-z]{2}|\%/.exec(n.input_height)[0]:"%";switch(r){case"%":t.$content_input_height_type.filter("[value=percentage]").prop("checked",!0);break;case"px":t.$content_input_height_type.filter("[value=pixel]").prop("checked",!0)}t.$content_input_height.siblings("label, .prefix").removeClass("active"),""!=t.$content_input_height.val()&&t.$content_input_height.siblings("label, .prefix").addClass("active"),t.$content_input_font_size.val(/[0-9]+/.exec(n.font_size)),i=tinyMCE.get("wpcf7_text_editor"),n.text=n.text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),i.setContent(n.text),F(),t.$content_file_max_dimensions.val(/[0-9]+/.exec(n.wpcf7_file_max_dimensions));var a=null!=/[a-z]{2}/.exec(n.wpcf7_file_max_dimensions)?/[a-z]{2}/.exec(n.wpcf7_file_max_dimensions)[0]:"kb";switch(a){case"mb":t.$content_file_max_dimensions_unit.val("mb");break;case"gb":t.$content_file_max_dimensions_unit.val("gb");break;case"kb":default:t.$content_file_max_dimensions_unit.val("kb")}t.$content_file_max_dimensions.siblings("label, .prefix").removeClass("active"),""!=t.$content_file_max_dimensions.val()&&t.$content_file_max_dimensions.siblings("label, .prefix").addClass("active"),t.$field_list.empty(),tmpl.arg="o";for(var l=1;l<=n.wpcf7_list_fields.length;l++)t.$field_list.append(tmpl("tmpl-rex-wpcf7-edit-content-list",{number:l})),t.$field_list.find(".field-"+l).val(n.wpcf7_list_fields[l-1]);k(),j(),t.$content_preview_text.css("background-color",n.text_color),t.$content_text_color_value.val(n.text_color),t.$content_text_color_preview.hide(),t.$content_text_color_value.spectrum("set",n.text_color),t.$content_preview_text_focus.css("background-color",n.text_color_focus),t.$content_text_color_focus_value.val(n.text_color_focus),t.$content_text_color_focus_preview.hide(),t.$content_text_color_focus_value.spectrum("set",n.text_color_focus),t.$content_preview_select.css("background-color",n.text_color),t.$content_select_color_value.val(n.text_color),t.$content_select_color_preview.hide(),t.$content_select_color_value.spectrum("set",n.text_color),t.$content_preview_select_after_selection.css("background-color",n.select_color_after_selection),t.$content_select_color_after_selection_value.val(n.select_color_after_selection),t.$content_select_color_after_selection_preview.hide(),t.$content_select_color_after_selection_value.spectrum("set",n.select_color_after_selection),t.$content_preview_placeholder.css("background-color",n.placeholder_color),t.$content_placeholder_color_value.val(n.placeholder_color),t.$content_placeholder_color_preview.hide(),t.$content_placeholder_color_value.spectrum("set",n.placeholder_color),t.$content_preview_placeholder_hover.css("background-color",n.placeholder_hover_color),t.$content_placeholder_hover_color_value.val(n.placeholder_hover_color),t.$content_placeholder_hover_color_preview.hide(),t.$content_placeholder_hover_color_value.spectrum("set",n.placeholder_hover_color),t.$button_preview.css({width:n.wpcf7_button.width,height:n.wpcf7_button.height,color:n.wpcf7_button.text_color,"font-size":n.wpcf7_button.font_size,"background-color":n.wpcf7_button.background_color,"border-color":n.wpcf7_button.border_color,"border-style":"solid","border-width":n.wpcf7_button.border_width,"border-radius":n.wpcf7_button.border_radius,"margin-top":n.wpcf7_button.margin_top,"margin-right":n.wpcf7_button.margin_right,"margin-bottom":n.wpcf7_button.margin_bottom,"margin-left":n.wpcf7_button.margin_left,"padding-top":n.wpcf7_button.padding_top,"padding-right":n.wpcf7_button.padding_right,"padding-bottom":n.wpcf7_button.padding_bottom,"padding-left":n.wpcf7_button.padding_left}),t.$button_preview.text(n.wpcf7_button.text),t.$button_preview.hover(function(){e(this).css({color:n.wpcf7_button.text_color_hover,"background-color":n.wpcf7_button.background_color_hover,"border-color":n.wpcf7_button.border_color_hover})},function(){e(this).css({color:n.wpcf7_button.text_color,"background-color":n.wpcf7_button.background_color,"border-color":n.wpcf7_button.border_color})}),t.$content_button_text.siblings("label, .prefix").removeClass("active"),t.$content_button_text.val(n.wpcf7_button.text),""!=t.$content_button_text.val()&&t.$content_button_text.siblings("label, .prefix").addClass("active"),t.$content_button_text_font_size.val(/[0-9]+/.exec(n.wpcf7_button.font_size)),t.$content_button_border_width.val(/[0-9]+/.exec(n.wpcf7_button.border_width)),t.$content_button_border_radius.siblings("label, .prefix").removeClass("active"),t.$content_button_border_radius.val(/[0-9]+/.exec(n.wpcf7_button.border_radius)),""!=t.$content_button_border_radius.val()&&t.$content_button_border_radius.siblings("label, .prefix").addClass("active"),t.$content_button_height.siblings("label, .prefix").removeClass("active"),t.$content_button_height.val(/[0-9]+/.exec(n.wpcf7_button.height)),""!=t.$content_button_height.val()&&t.$content_button_height.siblings("label, .prefix").addClass("active"),t.$content_button_width.siblings("label, .prefix").removeClass("active"),t.$content_button_width.val(/[0-9]+/.exec(n.wpcf7_button.width)),""!=t.$content_button_width.val()&&t.$content_button_width.siblings("label, .prefix").addClass("active"),t.$content_button_margin_top.val(/[0-9]+/.exec(n.wpcf7_button.margin_top)),t.$content_button_margin_right.val(/[0-9]+/.exec(n.wpcf7_button.margin_right)),t.$content_button_margin_bottom.val(/[0-9]+/.exec(n.wpcf7_button.margin_bottom)),t.$content_button_margin_left.val(/[0-9]+/.exec(n.wpcf7_button.margin_left)),t.$content_button_padding_top.val(/[0-9]+/.exec(n.wpcf7_button.padding_top)),t.$content_button_padding_right.val(/[0-9]+/.exec(n.wpcf7_button.padding_right)),t.$content_button_padding_bottom.val(/[0-9]+/.exec(n.wpcf7_button.padding_bottom)),t.$content_button_padding_left.val(/[0-9]+/.exec(n.wpcf7_button.padding_left)),t.$content_button_text_color_value.val(n.wpcf7_button.text_color),t.$content_button_text_color_preview.hide(),t.$content_button_text_color_value.spectrum("set",n.wpcf7_button.text_color),t.$content_preview_button_text_color_hover.css("background-color",n.wpcf7_button.text_color_hover),t.$content_button_text_color_hover_value.val(n.wpcf7_button.text_color_hover),t.$content_button_text_color_hover_preview.hide(),t.$content_button_text_color_hover_value.spectrum("set",n.wpcf7_button.text_color_hover),t.$content_preview_button_background_color.css("background-color",n.wpcf7_button.background_color),t.$content_button_background_color_value.val(n.wpcf7_button.background_color),t.$content_button_background_color_preview.hide(),t.$content_button_background_color_value.spectrum("set",n.wpcf7_button.background_color),t.$content_preview_button_background_color_hover.css("background-color",n.wpcf7_button.background_color_hover),t.$content_button_background_color_hover_value.val(n.wpcf7_button.background_color_hover),t.$content_button_background_color_hover_preview.hide(),t.$content_button_background_color_hover_value.spectrum("set",n.wpcf7_button.background_color_hover),t.$content_preview_button_border_color.css("border-color",n.wpcf7_button.border_color),t.$content_button_border_color_value.val(n.wpcf7_button.border_color),t.$content_button_border_color_preview.hide(),t.$content_button_border_color_value.spectrum("set",n.wpcf7_button.border_color),t.$content_preview_button_border_color_hover.css("border-color",n.wpcf7_button.border_color_hover),t.$content_button_border_color_hover_value.val(n.wpcf7_button.border_color_hover),t.$content_button_border_color_hover_preview.hide(),t.$content_button_border_color_hover_value.spectrum("set",n.wpcf7_button.border_color_hover)},x=function(){n.wpcf7_required_field=void 0!==t.$content_required_field.attr("checked"),n.wpcf7_email=void 0!==t.$content_set_email.attr("checked"),n.wpcf7_only_numbers=void 0!==t.$content_only_numbers.attr("checked"),n.wpcf7_default_check=void 0!==t.$content_input_default_check.attr("checked"),n.wpcf7_placeholder=t.$content_placeholder.val(),n.input_width=t.$content_input_width.val();var e=t.$content_input_width_type.filter(":checked").val();switch(e){case"percentage":n.input_width=n.input_width+"%";break;case"pixel":n.input_width=n.input_width+"px"}n.input_height=t.$content_input_height.val();var o=t.$content_input_height_type.filter(":checked").val();switch(o){case"percentage":n.input_height=n.input_height+"%";break;case"pixel":n.input_height=n.input_height+"px"}n.font_size=t.$content_input_font_size.val()+"px",n.text=i.getContent(),n.text=n.text.replace(/<p>[\u25A0\u00A0\s]*<\/p>/g,""),n.wpcf7_file_max_dimensions=t.$content_file_max_dimensions.val();var r=t.$content_file_max_dimensions_unit.val();n.wpcf7_file_max_dimensions+=r;var a=t.$field_list.find(".wpcf7-select-field");n.wpcf7_list_fields=[];for(var l=0;l<a.length;l++)n.wpcf7_list_fields.push(a[l].value);n.wpcf7_button.text=t.$content_button_text.val(),n.wpcf7_button.font_size=t.$content_button_text_font_size.val()+"px",n.wpcf7_button.height=t.$content_button_height.val()+"px",n.wpcf7_button.width=t.$content_button_width.val()+"px",n.wpcf7_button.border_width=t.$content_button_border_width.val()+"px",n.wpcf7_button.border_radius=t.$content_button_border_radius.val()+"px",n.wpcf7_button.margin_top=t.$content_button_margin_top.val()+"px",n.wpcf7_button.margin_right=t.$content_button_margin_right.val()+"px",n.wpcf7_button.margin_bottom=t.$content_button_margin_bottom.val()+"px",n.wpcf7_button.margin_left=t.$content_button_margin_left.val()+"px",n.wpcf7_button.padding_top=t.$content_button_padding_top.val()+"px",n.wpcf7_button.padding_right=t.$content_button_padding_right.val()+"px",n.wpcf7_button.padding_bottom=t.$content_button_padding_bottom.val()+"px",n.wpcf7_button.padding_left=t.$content_button_padding_left.val()+"px"},$=function(e){x();var t={eventName:"rexlive:updateColumnContentLive",data_to_send:{target:n.target,content:n,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},w=function(){k(),t.$content_placeholder.on("keyup",function(e){$({type:"wpcf7-placeholder",value:t.$content_placeholder.val()})}),t.$content_button_text.on("keyup",function(e){var o=t.$content_button_text.val();$({type:"button-text",name:"button-text",value:o}),t.$button_preview.text(o)})},k=function(){t.$field_list.find(".wpcf7-select-field").on("keyup",function(e){for(var o=t.$field_list.find(".wpcf7-select-field"),n=[],r=0;r<o.length;r++)n.push(o[r].value);$({type:"wpcf7-list",value:{fields:n,type:"writing"}})})},y=function(){var e="",o=function(t){e=isNaN(parseInt(t))?defaultColumnContentValues.font_size:t+"px",$({type:"font-size",name:"font-size",value:e})};c(t.$content_input_font_size,!1),s(t.$content_input_font_size,o,!1);var n=function(o){var n=t.$content_input_width_type.filter(":checked").val();switch(n){case"percentage":e=o+"%";break;case"pixel":e=o+"px"}$({type:"width",name:"width",value:e})};c(t.$content_input_width,!1),s(t.$content_input_width,n,!1);var r=function(o){var n=t.$content_input_height_type.filter(":checked").val();switch(n){case"percentage":e=o+"%";break;case"pixel":e=o+"px"}$({type:"height",name:"height",value:e})};c(t.$content_input_height,!1),s(t.$content_input_height,r,!1);var a=function(o){e=o+"px",$({type:"button-font-size",name:"font-size",value:e}),t.$button_preview.css({"font-size":e})};c(t.$content_button_text_font_size,!1),s(t.$content_button_text_font_size,a,!1);var i=function(o){e=o+"px",$({type:"button-height",name:"height",value:e}),t.$button_preview.css({height:e})};c(t.$content_button_height,!1),s(t.$content_button_height,i,!1);var l=function(o){e=o+"px",$({type:"button-width",name:"width",value:e}),t.$button_preview.css({width:e})};c(t.$content_button_width,!1),s(t.$content_button_width,l,!1);var d=function(o){e=o+"px",$({type:"button-border-width",name:"border-width",value:e}),t.$button_preview.css({"border-width":e})};c(t.$content_button_border_width,!1),s(t.$content_button_border_width,d,!1);var _=function(o){e=o+"px",$({type:"button-border-radius",name:"border-radius",value:e}),t.$button_preview.css({"border-radius":e})};c(t.$content_button_border_radius,!1),s(t.$content_button_border_radius,_,!1);var u=function(o){e=o+"px",$({type:"button-margin-top",name:"margin-top",value:e}),t.$button_preview.css({"margin-top":e})};c(t.$content_button_margin_top,!1),s(t.$content_button_margin_top,u,!1);var p=function(o){e=o+"px",$({type:"button-margin-right",name:"margin-right",value:e}),t.$button_preview.css({"margin-right":e})};c(t.$content_button_margin_right,!1),s(t.$content_button_margin_right,p,!1);var m=function(o){e=o+"px",$({type:"button-margin-bottom",name:"margin-bottom",value:e}),t.$button_preview.css({"margin-bottom":e})};c(t.$content_button_margin_bottom,!1),s(t.$content_button_margin_bottom,m,!1);var v=function(o){e=o+"px",$({type:"button-margin-left",name:"margin-left",value:e}),t.$button_preview.css({"margin-left":e})};c(t.$content_button_margin_left,!1),s(t.$content_button_margin_left,v,!1);var f=function(o){e=o+"px",$({type:"button-padding-top",name:"padding-top",value:e}),t.$button_preview.css({"padding-top":e})};c(t.$content_button_padding_top,!1),s(t.$content_button_padding_top,f,!1);var g=function(o){e=o+"px",$({type:"button-padding-right",name:"padding-right",value:e}),t.$button_preview.css({"padding-right":e})};c(t.$content_button_padding_right,!1),s(t.$content_button_padding_right,g,!1);var b=function(o){e=o+"px",$({type:"button-padding-bottom",name:"padding-bottom",value:e}),t.$button_preview.css({"padding-bottom":e})};c(t.$content_button_padding_bottom,!1),s(t.$content_button_padding_bottom,b,!1);var h=function(o){e=o+"px",$({type:"button-padding-left",name:"padding-left",value:e}),t.$button_preview.css({"padding-left":e})};c(t.$content_button_padding_left,!1),s(t.$content_button_padding_left,h,!1)},C=function(){var o;t.$content_text_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_text_color_preview.hide(),t.$content_preview_text.css("background-color",o),$({type:"text-color",name:"text-color",value:o})},change:function(e){},hide:function(e){n.text_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_text_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_text_color_value.spectrum("hide")}),t.$content_text_color_preview.on("click",function(){return t.$content_text_color_value.spectrum("show"),!1})},M=function(){var o;t.$content_text_color_focus_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_text_color_focus_preview.hide(),t.$content_preview_text_focus.css("background-color",o),$({type:"text-focus",name:"text-color",value:o})},change:function(e){},hide:function(e){n.text_color_focus=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_text_color_focus_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_text_color_focus_value.spectrum("hide")}),t.$content_text_color_focus_preview.on("click",function(){return t.$content_text_color_focus_value.spectrum("show"),!1})},R=function(){var o;t.$content_select_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_select_color_preview.hide(),t.$content_preview_select.css("background-color",o),$({type:"text-color",name:"text-color",value:o})},change:function(e){},hide:function(e){n.text_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_select_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_select_color_value.spectrum("hide")}),t.$content_select_color_preview.on("click",function(){return t.$content_select_color_value.spectrum("show"),!1})},E=function(){var o;t.$content_select_color_after_selection_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_select_color_after_selection_preview.hide(),t.$content_preview_select_after_selection.css("background-color",o),$({type:"select-color",name:"text-color",value:o})},change:function(e){},hide:function(e){n.select_color_after_selection=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_select_color_after_selection_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_select_color_after_selection_value.spectrum("hide")}),t.$content_select_color_after_selection_preview.on("click",function(){return t.$content_select_color_after_selection_value.spectrum("show"),!1})},I=function(){var o;t.$content_placeholder_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-placeholder-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_placeholder_color_preview.hide(),t.$content_preview_placeholder.css("background-color",o),$({type:"placeholder-color",name:"text-color",value:o})},change:function(e){},hide:function(e){n.placeholder_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_placeholder_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_placeholder_color_value.spectrum("hide")}),t.$content_placeholder_color_preview.on("click",function(){return t.$content_placeholder_color_value.spectrum("show"),!1})},N=function(){var o;t.$content_placeholder_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-placeholder-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_placeholder_hover_color_preview.hide(),t.$content_preview_placeholder_hover.css("background-color",o),$({type:"placeholder-color-hover",name:"text-color",value:o})},change:function(e){},hide:function(e){n.placeholder_hover_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_placeholder_hover_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_placeholder_hover_color_value.spectrum("hide")}),t.$content_placeholder_hover_color_preview.on("click",function(){return t.$content_placeholder_hover_color_value.spectrum("show"),!1})},S=function(){var o;t.$content_button_text_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_button_text_color_preview.hide(),$({type:"button-text-color",name:"text-color",value:o}),t.$button_preview.css({color:o})},change:function(e){},hide:function(e){n.wpcf7_button.text_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_text_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_text_color_value.spectrum("hide")}),t.$content_button_text_color_preview.on("click",function(){return t.$content_button_text_color_value.spectrum("show"),!1})},D=function(){var o;t.$content_button_text_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(r){l&&(l=!1),o=r.toRgbString(),t.$content_button_text_color_hover_preview.hide(),t.$content_preview_button_text_color_hover.css("background-color",o),$({type:"button-text-color-hover",name:"text-color",value:o}),t.$button_preview.hover(function(){e(this).css({color:o})},function(){e(this).css({color:n.wpcf7_button.text_color})})},change:function(e){},hide:function(e){n.wpcf7_button.text_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_text_color_hover_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_text_color_hover_value.spectrum("hide")}),t.$content_button_text_color_hover_preview.on("click",function(){return t.$content_button_text_color_hover_value.spectrum("show"),!1})},A=function(){var o;t.$content_button_background_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_button_background_color_preview.hide(),t.$content_preview_button_background_color.css("background-color",o),$({type:"button-background-color",name:"background-color",value:o}),t.$button_preview.css({"background-color":o})},change:function(e){},hide:function(e){n.wpcf7_button.background_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_background_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_background_color_value.spectrum("hide")}),t.$content_button_background_color_preview.on("click",function(){return t.$content_button_background_color_value.spectrum("show"),!1})},B=function(){var o;t.$content_button_background_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(r){l&&(l=!1),o=r.toRgbString(),t.$content_button_background_color_hover_preview.hide(),t.$content_preview_button_background_color_hover.css("background-color",o),$({type:"button-background-color-hover",name:"background-color",value:o}),t.$button_preview.hover(function(){e(this).css({"background-color":o})},function(){e(this).css({"background-color":n.wpcf7_button.background_color})})},change:function(e){},hide:function(e){n.wpcf7_button.background_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_background_color_hover_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_background_color_hover_value.spectrum("hide")}),t.$content_button_background_color_hover_preview.on("click",function(){return t.$content_button_background_color_hover_value.spectrum("show"),!1})},T=function(){var o;t.$content_button_border_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){l&&(l=!1),o=e.toRgbString(),t.$content_button_border_color_preview.hide(),t.$content_preview_button_border_color.css("border-color",o),$({type:"button-border-color",name:"border-color",value:o}),t.$button_preview.css({"border-color":o})},change:function(e){},hide:function(e){n.wpcf7_button.border_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_border_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_border_color_value.spectrum("hide")}),t.$content_button_border_color_preview.on("click",function(){return t.$content_button_border_color_value.spectrum("show"),!1})},U=function(){var o;t.$content_button_border_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(r){l&&(l=!1),o=r.toRgbString(),t.$content_button_border_color_hover_preview.hide(),t.$content_preview_button_border_color_hover.css("border-color",o),$({type:"button-border-color-hover",name:"border-color",value:o}),t.$button_preview.hover(function(){e(this).css({"border-color":o})},function(){e(this).css({"border-color":n.wpcf7_button.border_color})})},change:function(e){},hide:function(e){n.wpcf7_button.border_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_button_border_color_hover_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_button_border_color_hover_value.spectrum("hide")}),t.$content_button_border_color_hover_preview.on("click",function(){return t.$content_button_border_color_hover_value.spectrum("show"),!1})},P=function(){t.$modal.click(function(t){e(t.target).is(".rex-modal-wrap")&&(d=!1)}),t.$close_button.on("click",function(){d=!1,p()}),t.$reset_button.on("click",function(){d=!1,n=jQuery.extend(!0,{},a);var e=void 0!==t.$content_required_field.attr("checked"),o=void 0!==t.$content_set_email.attr("checked"),r=void 0!==t.$content_only_numbers.attr("checked");h(),v(),e&&$({type:"wpcf7-required",value:!1}),o&&$({type:"wpcf7-email",value:!1}),r&&$({type:"wpcf7-only-numbers",value:!1}),$({type:"button-text",name:"button-text",value:n.wpcf7_button.text}),$({type:"wpcf7-placeholder",value:n.wpcf7_placeholder});var i=t.$field_list.find(".wpcf7-select-field");if(0!==i.length){for(var l=[],c=0;c<i.length;c++)l.push(i[c].value);$({type:"wpcf7-list",value:{fields:l,type:"resetting"}})}}),t.$apply_changes_button.on("click",function(){d=!_.isEqual(n,a),p()}),t.$modal.on("rexlive:this_modal_closed",function(){var e=void 0!==t.$content_set_email.attr("checked"),o=void 0!==t.$content_only_numbers.attr("checked");d||(n=jQuery.extend(!0,{},a),h()),x(),v();var r=n.wpcf7_required_field,i=n.wpcf7_email,l=n.wpcf7_only_numbers;$({type:"wpcf7-required",value:r}),i?$({type:"wpcf7-email",value:!0}):l?$({type:"wpcf7-only-numbers",value:!0}):!i&&e?$({type:"wpcf7-email",value:!1}):!l&&o&&$({type:"wpcf7-only-numbers",value:!1}),$({type:"button-text",name:"button-text",value:n.wpcf7_button.text}),$({type:"wpcf7-placeholder",value:n.wpcf7_placeholder})}),t.$content_required_field.on("click",function(){var e=void 0!==t.$content_required_field.attr("checked");$({type:"wpcf7-required",value:e})}),t.$content_set_email.on("click",function(){var e=void 0!==t.$content_set_email.attr("checked");e&&t.$content_only_numbers.prop("checked",!1),$({type:"wpcf7-email",value:e})}),t.$content_only_numbers.on("click",function(){var e=void 0!==t.$content_only_numbers.attr("checked");e&&t.$content_set_email.prop("checked",!1),$({type:"wpcf7-only-numbers",value:e})}),t.$content_input_default_check.on("click",function(){var e=void 0!==t.$content_input_default_check.attr("checked");$({type:"wpcf7-default-check",value:e})}),t.$content_input_width_type.on("click",function(){var o=t.$content_input_width.val(),n=e(this).val();switch(n){case"percentage":o+="%";break;case"pixel":o+="px"}$({type:"width",name:"width",value:o})}),t.$content_input_height_type.on("click",function(){var o=t.$content_input_height.val(),n=e(this).val();switch(n){case"percentage":o+="%";break;case"pixel":o+="px"}$({type:"height",name:"height",value:o})}),t.$content_text_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_text.hide(),t.$content_text_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_text_color_value.spectrum("set",r),t.$content_text_color_runtime.val(r),n.text_color=r,$({type:"text-color",name:"text-color",value:r})}),t.$content_text_color_focus_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_text_focus.hide(),t.$content_text_color_focus_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),
t.$content_text_color_focus_value.spectrum("set",r),t.$content_text_color_focus_runtime.val(r),n.text_color_focus=r,$({type:"text-focus",name:"text-color",value:r})}),t.$content_select_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_select.hide(),t.$content_select_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_select_color_value.spectrum("set",r),t.$content_select_color_runtime.val(r),n.text_color=r,$({type:"text-color",name:"text-color",value:r})}),t.$content_select_color_after_selection_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_select_after_selection.hide(),t.$content_select_color_after_selection_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_select_color_after_selection_value.spectrum("set",r),t.$content_select_color_after_selection_runtime.val(r),n.text_color=r,$({type:"select-color",name:"text-color",value:r})}),t.$content_placeholder_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_placeholder.hide(),t.$content_placeholder_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_placeholder_color_value.spectrum("set",r),t.$content_placeholder_color_runtime.val(r),n.placeholder_color=r,$({type:"placeholder-color",name:"text-color",value:r})}),t.$content_placeholder_hover_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_placeholder_hover.hide(),t.$content_placeholder_hover_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_placeholder_hover_color_value.spectrum("set",r),t.$content_placeholder_hover_color_runtime.val(r),n.placeholder_hover_color=r,$({type:"placeholder-color-hover",name:"text-color",value:r})}),t.$content_button_hover_text_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_button_text_color_hover.hide(),t.$content_button_hover_text_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_button_text_color_hover_value.spectrum("set",r),t.$content_button_text_color_hover_runtime.val(r),n.wpcf7_button.text_color_hover=r,$({type:"button-text-color-hover",name:"text-color",value:r}),t.$button_preview.hover(function(){e(this).css({color:r})},function(){e(this).css({color:n.wpcf7_button.text_color})})}),t.$content_button_hover_background_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_button_background_color_hover.hide(),t.$content_button_hover_background_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_button_background_color_hover_value.spectrum("set",r),t.$content_button_background_color_hover_runtime.val(r),n.wpcf7_button.background_color_hover=r,$({type:"button-background-color-hover",name:"background-color",value:r}),t.$button_preview.hover(function(){e(this).css({"background-color":r})},function(){e(this).css({"background-color":n.wpcf7_button.background_color})})}),t.$content_button_hover_border_color_palette_buttons.on("click",function(o){var r=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$content_preview_button_border_color_hover.hide(),t.$content_button_hover_border_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$content_button_border_color_hover_value.spectrum("set",r),t.$content_button_border_color_hover_runtime.val(r),n.wpcf7_button.border_color_hover=r,$({type:"button-border-color-hover",name:"border-color",value:r}),t.$button_preview.hover(function(){e(this).css({"border-color":r})},function(){e(this).css({"border-color":n.wpcf7_button.border_color})})}),t.$add_list_field.on("click",function(){var e=parseInt(t.$field_list.find(".wpcf7-select-field").length)+1;tmpl.arg="o",t.$field_list.append(tmpl("tmpl-rex-wpcf7-edit-content-list",{number:e})),$({type:"wpcf7-list-add"}),k(),j()})},j=function(){t.$delete_list_field=t.$self.find(".rex-wpcf7-delete-list-field"),t.$delete_list_field.off("click"),t.$delete_list_field.on("click",z)},z=function(o){var n=e(o.target).parents(".rexwpcf7-cont_row"),r=/[0-9]+/.exec(/field-[0-9]+/.exec(n.find("[type='text']")[0].classList))[0];n.remove();for(var a=t.$field_list.find(".wpcf7-select-field"),i=0;i<a.length;i++){var l=/field\-[0-9]+/.exec(a[i].classList)[0];e(a[i]).removeClass(l),e(a[i]).addClass("field-"+(i+1))}$({type:"wpcf7-list-remove",value:r})},F=function(){i.on("keyup",V),i.on("change",V),i.on("undo",V),i.on("redo",V),i.on("cut",V),i.on("paste",V)},V=function(){$({type:"wpcf7-text-editor",value:i.getContent()})},L=function(){var o=e("#rex-wpcf7-content-editor"),r=o.find(".rexpansive-accordion"),a=o.find(".rexpansive-accordion-outer"),i=o;a.rexAccordion({open:{},close:{},selectors:{toggle:".rex-accordion-outer--toggle",content:".rex-accordion-outer--content"}}),t={$self:o,$modal:i.parent(".rex-modal-wrap"),$close_button:i.find(".rex-cancel-button"),$apply_changes_button:i.find(".rex-apply-button"),$reset_button:i.find(".rex-reset-button"),$button_preview:i.find("#rex-wpcf7-button-modal-preview"),$content_required_field:i.find("#wpcf7-required-field"),$content_only_numbers:i.find("#wpcf7-only-numbers"),$content_set_email:i.find("#wpcf7-set-email"),$content_placeholder:i.find("#wpcf7-placeholder"),$content_input_default_check:i.find("#wpcf7-default-check"),$content_input_text_editor:i.find("#wpcf7-text-editor"),$content_file_max_dimensions:i.find("#wpcf7-file-max-dimensions"),$content_file_max_dimensions_unit:i.find("#wpcf7-file-max-dimensions-unit"),$field_list:i.find("#wpcf7-list-fields"),$add_list_field:i.find("#rex-wpcf7-add-list-field"),$delete_list_field:"",$content_input_width:i.find("#wpcf7-input-width"),$content_input_width_type:i.find(".wpcf7-input-width-type"),$content_input_height:i.find("#wpcf7-input-height"),$content_input_height_type:i.find(".wpcf7-input-height-type"),$content_input_font_size:i.find("#wpcf7-set-font-size"),$content_preview_text:i.find("#rex-wpcf7-preview-text"),$content_text_color_value:i.find("#rex-wpcf7-text-color"),$content_text_color_runtime:i.find("#rex-wpcf7-text-color-runtime"),$content_text_color_preview:i.find("#rex-wpcf7-text-color-preview-icon"),$content_text_color_palette_buttons:o.find("#content-text-color-palette .bg-palette-selector"),$content_preview_text_focus:i.find("#rex-wpcf7-preview-focus"),$content_text_color_focus_value:i.find("#rex-wpcf7-focus-color"),$content_text_color_focus_runtime:i.find("#rex-wpcf7-focus-color-runtime"),$content_text_color_focus_preview:i.find("#rex-wpcf7-focus-color-preview-icon"),$content_text_color_focus_palette_buttons:o.find("#focus-text-color-palette .bg-palette-selector"),$content_preview_select:i.find("#rex-wpcf7-preview-select-text"),$content_select_color_value:i.find("#rex-wpcf7-select-text-color"),$content_select_color_runtime:i.find("#rex-wpcf7-select-text-color-runtime"),$content_select_color_preview:i.find("#rex-wpcf7-select-text-color-preview-icon"),$content_select_color_palette_buttons:o.find("#select-color-palette .bg-palette-selector"),$content_preview_select_after_selection:i.find("#rex-wpcf7-preview-select-text-after-selection"),$content_select_color_after_selection_value:i.find("#rex-wpcf7-select-text-color-after-selection"),$content_select_color_after_selection_runtime:i.find("#rex-wpcf7-select-text-color-after-selection-runtime"),$content_select_color_after_selection_preview:i.find("#rex-wpcf7-select-text-color-after-selection-preview-icon"),$content_select_color_after_selection_palette_buttons:o.find("#select-color-after-selection-palette .bg-palette-selector"),$content_preview_placeholder:i.find("#rex-wpcf7-preview-placeholder"),$content_placeholder_color_value:i.find("#rex-wpcf7-placeholder-color"),$content_placeholder_color_runtime:i.find("#rex-wpcf7-placeholder-color-runtime"),$content_placeholder_color_preview:i.find("#rex-wpcf7-placeholder-color-preview-icon"),$content_placeholder_color_palette_buttons:o.find("#placeholder-color-palette .bg-palette-selector"),$content_preview_placeholder_hover:i.find("#rex-wpcf7-preview-placeholder-hover"),$content_placeholder_hover_color_value:i.find("#rex-wpcf7-placeholder-hover-color"),$content_placeholder_hover_color_runtime:i.find("#rex-wpcf7-placeholder-hover-color-runtime"),$content_placeholder_hover_color_preview:i.find("#rex-wpcf7-placeholder-hover-color-preview-icon"),$content_placeholder_hover_color_palette_buttons:o.find("#hover-placeholder-color-palette .bg-palette-selector"),$content_button_text:i.find("#rex-wpcf7-button-text"),$content_button_text_font_size:i.find("#wpcf7-button-text-font-size"),$content_button_height:i.find("#wpcf7-button-height"),$content_button_width:i.find("#wpcf7-button-width"),$content_button_border_width:i.find("#wpcf7-button-border-width"),$content_button_border_radius:i.find("#wpcf7-button-border-radius"),$content_button_margin_top:i.find("#wpcf7-button-margin-top"),$content_button_margin_right:i.find("#wpcf7-button-margin-right"),$content_button_margin_bottom:i.find("#wpcf7-button-margin-bottom"),$content_button_margin_left:i.find("#wpcf7-button-margin-left"),$content_button_padding_top:i.find("#wpcf7-button-padding-top"),$content_button_padding_right:i.find("#wpcf7-button-padding-right"),$content_button_padding_bottom:i.find("#wpcf7-button-padding-bottom"),$content_button_padding_left:i.find("#wpcf7-button-padding-left"),$content_button_text_color_value:i.find("#rex-wpcf7-button-text-color"),$content_button_text_color_preview:i.find("#rex-wpcf7-button-text-color-preview-icon"),$content_preview_button_text_color_hover:i.find("#rex-wpcf7-preview-button-text-color-hover"),$content_button_text_color_hover_value:i.find("#rex-wpcf7-button-text-color-hover"),$content_button_text_color_hover_runtime:i.find("#rex-wpcf7-button-text-color-hover-runtime"),$content_button_text_color_hover_preview:i.find("#rex-wpcf7-button-text-color-hover-preview-icon"),$content_button_hover_text_color_palette_buttons:o.find("#button-hover-text-color-palette .bg-palette-selector"),$content_preview_button_background_color:i.find("#rex-wpcf7-preview-button-background-color"),$content_button_background_color_value:i.find("#rex-wpcf7-button-background-color"),$content_button_background_color_preview:i.find("#rex-wpcf7-button-background-color-preview-icon"),$content_preview_button_background_color_hover:i.find("#rex-wpcf7-preview-button-background-color-hover"),$content_button_background_color_hover_value:i.find("#rex-wpcf7-button-background-color-hover"),$content_button_background_color_hover_runtime:i.find("#rex-wpcf7-button-background-color-hover-runtime"),$content_button_background_color_hover_preview:i.find("#rex-wpcf7-button-background-color-hover-preview-icon"),$content_button_hover_background_color_palette_buttons:o.find("#button-hover-background-color-palette .bg-palette-selector"),$content_preview_button_border_color:i.find("#rex-wpcf7-preview-button-border-color"),$content_button_border_color_value:i.find("#rex-wpcf7-button-border-color"),$content_button_border_color_preview:i.find("#rex-wpcf7-button-border-color-preview-icon"),$content_preview_button_border_color_hover:i.find("#rex-wpcf7-preview-button-border-color-hover"),$content_button_border_color_hover_value:i.find("#rex-wpcf7-button-border-color-hover"),$content_button_border_color_hover_runtime:i.find("#rex-wpcf7-button-border-color-hover-runtime"),$content_button_border_color_hover_preview:i.find("#rex-wpcf7-button-border-color-hover-preview-icon"),$content_button_hover_border_color_palette_buttons:o.find("#button-hover-border-color-palette .bg-palette-selector")},t.$field_list.sortable({revert:!0,handle:".rexwpcf7-sort",cursor:"pointer",update:function(){for(var o=t.$field_list.find(".wpcf7-select-field"),n=0;n<o.length;n++){var r=/field\-[0-9]+/.exec(o[n].classList)[0];e(o[n]).removeClass(r),e(o[n]).addClass("field-"+(n+1))}for(var a=[],n=0;n<o.length;n++)a.push(o[n].value);$({type:"wpcf7-list",value:{fields:a,type:"sorting"}})}}),n={wpcf7_required_field:"",wpcf7_email:"",wpcf7_only_numbers:"",wpcf7_default_check:"",wpcf7_placeholder:"",wpcf7_list_fields:[],wpcf7_file_max_dimensions:"",wpcf7_button:{text:"",font_size:"",height:"",width:"",border_width:"",border_radius:"",margin_top:"",margin_right:"",margin_bottom:"",margin_left:"",padding_top:"",padding_right:"",padding_bottom:"",padding_left:"",text_color:"",text_color_hover:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:""},input_width:"",input_height:"",font_size:"",border_width:"",border_radius:"",background_color:"",background_color_hover:"",border_color:"",border_color_hover:"",placeholder_color:"",placeholder_hover_color:"",select_color_after_selection:"",text_color:"",text_color_hover:"",text_color_focus:"",text:"",type:"",field_class:"",input_type:"",target:{element_id:"",row_number:"",column_number:""}},defaultColumnContentValues={input_width:"100%",input_height:"100%",font_size:"15px"},r.rexAccordion({open:{},close:{}}),P(),w(),y(),C(),M(),R(),E(),I(),N(),S(),D(),A(),B(),T(),U()};return{init:L,openColumnContentEditorModal:u}}(jQuery),Wpcf7_Edit_Form_Modal=function(e){"use strict";var t,o,n,r,a,i,l,d=function(o){e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_wpcf7_get_mail_settings",nonce_param:live_editor_obj.rexnonce,form_id:o},beforeSend:function(){t.$self.addClass("rex-modal--loading")},success:function(e){e.success&&(a=e.data.mail_settings[0],i=e.data.messages[0],t.$form_mail_to.val(a.recipient),""!=t.$form_mail_to.val()&&t.$form_mail_to.siblings("label, .prefix").addClass("active"),t.$form_error_message.val(i.validation_error),""!=t.$form_error_message.val()&&t.$form_error_message.siblings("label, .prefix").addClass("active"),t.$form_send_message.val(i.mail_sent_ok),""!=t.$form_send_message.val()&&t.$form_send_message.siblings("label, .prefix").addClass("active"))},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},c=function(){var n=o.element_target.element_id;a.recipient=t.$form_mail_to.val(),i.validation_error=t.$form_error_message.val(),i.mail_sent_ok=t.$form_send_message.val(),e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_wpcf7_save_mail_settings",nonce_param:live_editor_obj.rexnonce,form_id:n,new_mail_settings:a,new_messages:i},success:function(e){e.success},error:function(e){}})},s=function(t,o){o="undefined"!=typeof o&&"true"==o.toString(),t.keydown(function(t){var n=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(o||"-"!=t.key||t.preventDefault(),38==t.keyCode&&(t.preventDefault(),n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o?n.val(isNaN(parseInt(n.val()))?0:parseInt(n.val()-1)):n.val(Math.max(isNaN(parseInt(n.val()))?0:parseInt(n.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&n.blur()))})},u=function(e,t,o){o="undefined"!=typeof o&&"true"==o.toString(),e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),(o||"-"!=e.key)&&t.call(this,parseInt(e.target.value)))})},p=function(e){o=e.elementData,l=e.blockID,f(o);var n=o.element_target.element_id;d(n),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-form"],void 0,l)},m=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"),!1,["wpcf7-editing-form"])},v=function(){var e={eventName:"rexlive:update_wcpf7_page",data_to_send:{reverseFormData:jQuery.extend(!0,{},n),actionFormData:jQuery.extend(!0,{},o),needToSave:B}};n=jQuery.extend(!0,{},e.data_to_send.actionFormData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},f=function(e){g(),b(e),h()},g=function(){o={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}}},b=function(e){o=jQuery.extend(!0,{},e),n=jQuery.extend(!0,{},o),r=jQuery.extend(!0,{},o)},h=function(){if(""!=t.$form_mail_to.val()&&t.$form_mail_to.siblings("label, .prefix").addClass("active"),t.$input_preview.css({color:o.wpcf7_data.content.text_color,"font-size":o.wpcf7_data.content.font_size,"background-color":o.wpcf7_data.content.background_color,"border-color":o.wpcf7_data.content.border_color,"border-width":o.wpcf7_data.content.border_width,"border-radius":o.wpcf7_data.content.border_radius}),t.$input_preview.hover(function(){e(this).css({color:o.wpcf7_data.content.text_color_hover,"background-color":o.wpcf7_data.content.background_color_hover,"border-color":o.wpcf7_data.content.border_color_hover})},function(){e(this).css({color:o.wpcf7_data.content.text_color,"background-color":o.wpcf7_data.content.background_color,"border-color":o.wpcf7_data.content.border_color})}),t.$form_preview_background.css("background-color",o.wpcf7_data.background_color),t.$form_background_color_value.val(o.wpcf7_data.background_color),t.$form_background_color_preview.hide(),t.$form_background_color_value.spectrum("set",o.wpcf7_data.background_color),t.$form_preview_border_color.css("background-color",o.wpcf7_data.border_color),t.$form_border_color_value.val(o.wpcf7_data.border_color),t.$form_border_color_preview.hide(),t.$form_border_color_value.spectrum("set",o.wpcf7_data.border_color),t.$form_border_width.val(/[0-9]+/.exec(o.wpcf7_data.border_width)),t.$form_margin_top.val(/[0-9]+/.exec(o.wpcf7_data.margin_top)),t.$form_margin_left.val(/[0-9]+/.exec(o.wpcf7_data.margin_left)),t.$form_margin_right.val(/[0-9]+/.exec(o.wpcf7_data.margin_right)),t.$form_margin_bottom.val(/[0-9]+/.exec(o.wpcf7_data.margin_bottom)),t.$form_columns_padding_top.val(/[0-9]+/.exec(o.wpcf7_data.columns.padding_top)),t.$form_columns_padding_left.val(/[0-9]+/.exec(o.wpcf7_data.columns.padding_left)),t.$form_columns_padding_right.val(/[0-9]+/.exec(o.wpcf7_data.columns.padding_right)),t.$form_columns_padding_bottom.val(/[0-9]+/.exec(o.wpcf7_data.columns.padding_bottom)),t.$form_error_message_color_value.val(o.wpcf7_data.error_message_color),t.$form_error_message_color_preview.hide(),t.$form_error_message_color_value.spectrum("set",o.wpcf7_data.error_message_color),t.$form_error_message_font_size.val(/[0-9]+/.exec(o.wpcf7_data.error_message_font_size)),""!=t.$form_error_message.val()&&t.$form_error_message.siblings("label, .prefix").addClass("active"),t.$form_send_message_color_value.val(o.send_message_color),t.$form_send_message_color_preview.hide(),t.$form_send_message_color_value.spectrum("set",o.send_message_color),t.$form_send_message_font_size.val(/[0-9]+/.exec(o.wpcf7_data.send_message_font_size)),""!=t.$form_send_message.val()&&t.$form_send_message.siblings("label, .prefix").addClass("active"),o.wpcf7_data.options_different.width)t.$content_width.val(""),t.$content_width.attr("placeholder",/[0-9]+/.exec(o.wpcf7_data.content.width));else{t.$content_width.val(/[0-9]+/.exec(o.wpcf7_data.content.width));var n=null!=/[a-z]{2}|\%/.exec(o.wpcf7_data.content.width)?/[a-z]{2}|\%/.exec(o.wpcf7_data.content.width)[0]:"%";switch(n){case"px":t.$content_width_type.filter("[value=pixel]").prop("checked",!0);break;case"%":default:t.$content_width_type.filter("[value=percentage]").prop("checked",!0)}""!=t.$content_width.val()&&t.$content_width.siblings("label, .prefix").addClass("active")}if(o.wpcf7_data.options_different.height)t.$content_height.val(""),t.$content_height.attr("placeholder",/[0-9]+/.exec(o.wpcf7_data.content.height));else{t.$content_height.val(/[0-9]+/.exec(o.wpcf7_data.content.height));var r=null!=/[a-z]{2}|\%/.exec(o.wpcf7_data.content.height)?/[a-z]{2}|\%/.exec(o.wpcf7_data.content.height)[0]:"%";switch(r){case"px":t.$content_height_type.filter("[value=pixel]").prop("checked",!0);break;case"%":default:t.$content_height_type.filter("[value=percentage]").prop("checked",!0)}""!=t.$content_height.val()&&t.$content_height.siblings("label, .prefix").addClass("active")}o.wpcf7_data.options_different.font_size?(t.$content_set_font_size.val(""),t.$content_set_font_size.attr("placeholder",/[0-9]+/.exec(o.wpcf7_data.content.font_size))):t.$content_set_font_size.val(/[0-9]+/.exec(o.wpcf7_data.content.font_size)),t.$content_set_border_width.val(/[0-9]+/.exec(o.wpcf7_data.content.border_width)),t.$content_set_border_radius.val(/[0-9]+/.exec(o.wpcf7_data.content.border_radius)),o.wpcf7_data.options_different.text_color&&(t.$content_text_color_value.parent().prepend(tmpl("tmpl-color-picker-overlay",{})),t.$color_picker_overlay=t.$self.find(".wpcf7-modal-color-picker-overlay"),t.$color_picker_overlay.on("click",function(){t.$color_picker_overlay.remove()})),t.$content_text_color_value.val(o.wpcf7_data.content.text_color),t.$content_text_color_preview.hide(),t.$content_text_color_value.spectrum("set",o.wpcf7_data.content.text_color),t.$content_text_color_hover_value.val(o.wpcf7_data.content.text_color_hover),t.$content_text_color_hover_preview.hide(),t.$content_text_color_hover_value.spectrum("set",o.wpcf7_data.content.text_color_hover),t.$content_preview_background_color.css("background-color",o.wpcf7_data.content.background_color),t.$content_background_color_value.val(o.wpcf7_data.content.background_color),t.$content_background_color_preview.hide(),t.$content_background_color_value.spectrum("set",o.wpcf7_data.content.background_color),t.$content_preview_background_color_hover.css("background-color",o.wpcf7_data.content.background_color_hover),t.$content_background_color_hover_value.val(o.wpcf7_data.content.background_color_hover),t.$content_background_color_hover_preview.hide(),t.$content_background_color_hover_value.spectrum("set",o.wpcf7_data.content.background_color_hover),t.$content_preview_border_color.css("background-color",o.wpcf7_data.content.border_color),t.$content_border_color_value.val(o.wpcf7_data.content.border_color),t.$content_border_color_preview.hide(),t.$content_border_color_value.spectrum("set",o.wpcf7_data.content.border_color),t.$content_preview_border_color_hover.css("background-color",o.wpcf7_data.content.border_color_hover),t.$content_border_color_value.val(o.wpcf7_data.content.border_color_hover),t.$content_border_color_hover_preview.hide(),t.$content_border_color_hover_value.spectrum("set",o.wpcf7_data.content.border_color_hover)},x=function(){o.wpcf7_data.border_width=t.$form_border_width.val()+"px",o.wpcf7_data.margin_top=t.$form_margin_top.val()+"px",o.wpcf7_data.margin_left=t.$form_margin_left.val()+"px",o.wpcf7_data.margin_right=t.$form_margin_right.val()+"px",o.wpcf7_data.margin_bottom=t.$form_margin_bottom.val()+"px",o.wpcf7_data.columns.padding_top=t.$form_columns_padding_top.val()+"px",o.wpcf7_data.columns.padding_left=t.$form_columns_padding_left.val()+"px",o.wpcf7_data.columns.padding_right=t.$form_columns_padding_right.val()+"px",o.wpcf7_data.columns.padding_bottom=t.$form_columns_padding_bottom.val()+"px",o.wpcf7_data.error_message_font_size=t.$form_error_message_font_size.val()+"px",o.wpcf7_data.send_message_font_size=t.$form_send_message_font_size.val()+"px",o.wpcf7_data.content.width=t.$content_width.val(),""==o.wpcf7_data.content.width&&(o.wpcf7_data.content.width=t.$content_width.attr("placeholder"));var e=t.$content_width_type.filter(":checked").val();switch(e){case"percentage":o.wpcf7_data.content.width=o.wpcf7_data.content.width+"%";break;case"pixel":o.wpcf7_data.content.width=o.wpcf7_data.content.width+"px"}o.wpcf7_data.content.height=t.$content_height.val(),""==o.wpcf7_data.content.height&&(o.wpcf7_data.content.height=t.$content_height.attr("placeholder"));var n=t.$content_height_type.filter(":checked").val();switch(n){case"percentage":o.wpcf7_data.content.height=o.wpcf7_data.content.height+"%";break;case"pixel":o.wpcf7_data.content.height=o.wpcf7_data.content.height+"px"}o.wpcf7_data.content.font_size=t.$content_set_font_size.val()+"px","px"==o.wpcf7_data.content.font_size&&(o.wpcf7_data.content.font_size=t.$content_set_font_size.attr("placeholder")+"px"),o.wpcf7_data.content.border_width=t.$content_set_border_width.val()+"px",o.wpcf7_data.content.border_radius=t.$content_set_border_radius.val()+"px"},$=function(e){var t={eventName:"rexlive:updateFormLive",data_to_send:{element_target:o.element_target,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},w=function(e){x();var t={eventName:"rexlive:updateFormContentLive",data_to_send:{element_target:o.element_target,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},k=function(){var e="",n=function(t){e=t+"px",$({type:"border-width",name:"border-width",value:e})};s(t.$form_border_width,!1),u(t.$form_border_width,n,!1);var r=function(t){e=t+"px",$({type:"margin",name:"margin-top",value:e})};s(t.$form_margin_top,!1),u(t.$form_margin_top,r,!1);var a=function(t){e=t+"px",$({type:"margin",name:"margin-left",value:e})};s(t.$form_margin_left,!1),u(t.$form_margin_left,a,!1);var i=function(t){e=t+"px",$({type:"margin",name:"margin-right",value:e})};s(t.$form_margin_right,!1),u(t.$form_margin_right,i,!1);var l=function(t){e=t+"px",$({type:"margin",name:"margin-bottom",value:e})};s(t.$form_margin_bottom,!1),u(t.$form_margin_bottom,l,!1);var d=function(t){e=t+"px",$({type:"columns-padding",name:"padding-top",value:e})};s(t.$form_columns_padding_top,!1),u(t.$form_columns_padding_top,d,!1);var c=function(t){e=t+"px",$({type:"columns-padding",name:"padding-left",value:e})};s(t.$form_columns_padding_left,!1),u(t.$form_columns_padding_left,c,!1);var _=function(t){e=t+"px",$({type:"columns-padding",name:"padding-right",value:e})};s(t.$form_columns_padding_right,!1),u(t.$form_columns_padding_right,_,!1);var p=function(t){e=t+"px",$({type:"columns-padding",name:"padding-bottom",value:e})};s(t.$form_columns_padding_bottom,!1),u(t.$form_columns_padding_bottom,p,!1);var m=function(t){e=t+"px",$({type:"validation-error",name:"font-size",value:e})};s(t.$form_error_message_font_size,!1),u(t.$form_error_message_font_size,m,!1);var v=function(t){e=t+"px",$({type:"send-message",name:"font-size",value:e})};s(t.$form_send_message_font_size,!1),u(t.$form_send_message_font_size,v,!1);var f=function(n){var r=t.$content_width_type.filter(":checked").val();switch(r){case"percentage":e=n+"%";break;case"pixel":e=n+"px"}w({type:"width",name:"width",value:e}),o.wpcf7_data.options_different.width=!1};s(t.$content_width,!1),u(t.$content_width,f,!1);var g=function(n){var r=t.$content_height_type.filter(":checked").val();switch(r){case"percentage":e=n+"%";break;case"pixel":e=n+"px"}w({type:"height",name:"height",value:e}),o.wpcf7_data.options_different.height=!1};s(t.$content_height,!1),u(t.$content_height,g,!1);var b=function(n){e=n+"px",w({type:"font-size",name:"font-size",value:e}),t.$input_preview.css({"font-size":e}),o.wpcf7_data.options_different.font_size=!1};s(t.$content_set_font_size,!1),u(t.$content_set_font_size,b,!1);var h=function(o){e=o+"px",w({type:"border-width",name:"border-width",value:e}),t.$input_preview.css({"border-width":e})};s(t.$content_set_border_width,!1),u(t.$content_set_border_width,h,!1);var x=function(o){e=o+"px",w({type:"border-radius",name:"border-radius",value:e}),t.$input_preview.css({"border-radius":e})};s(t.$content_set_border_radius,!1),u(t.$content_set_border_radius,x,!1)},y=function(){var n;t.$form_background_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$form_background_color_preview.hide(),t.$form_preview_background.css("background-color",n),$({type:"background",name:"background-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.background_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$form_background_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$form_background_color_value.spectrum("hide")}),t.$form_background_color_preview.on("click",function(){return t.$form_background_color_value.spectrum("show"),!1})},C=function(){var n;t.$form_border_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-border-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$form_border_color_preview.hide(),t.$form_preview_border_color.css("background-color",n),$({type:"border",name:"border-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.border_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$form_border_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$form_border_color_value.spectrum("hide")}),t.$form_border_color_preview.on("click",function(){return t.$form_border_color_value.spectrum("show"),!1})},M=function(){var n;t.$content_text_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-text-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$content_text_color_preview.hide(),t.$content_preview_text_color.css("background-color",n),t.$input_preview.css({color:n}),w({type:"text-color",name:"text-color",value:n}),o.wpcf7_data.options_different.text_color=!1},change:function(e){},hide:function(e){o.wpcf7_data.content.text_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_text_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_text_color_value.spectrum("hide")}),t.$content_text_color_preview.on("click",function(){return t.$content_text_color_value.spectrum("show"),!1})},R=function(){var n;t.$content_text_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-text-color-hover-picker",show:function(){},move:function(r){n=r.toRgbString(),t.$content_text_color_hover_preview.hide(),t.$content_preview_text_color_hover.css("background-color",n),t.$input_preview.hover(function(){e(this).css({color:n})},function(){e(this).css({color:o.wpcf7_data.content.text_color})}),w({type:"text-color-hover",name:"text-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.content.text_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_text_color_hover_value.spectrum("container").append(a),
a.on("click",function(e){e.preventDefault(),t.$content_text_color_hover_value.spectrum("hide")}),t.$content_text_color_hover_preview.on("click",function(){return t.$content_text_color_hover_value.spectrum("show"),!1})},E=function(){var n;t.$content_background_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-background-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$content_background_color_preview.hide(),t.$content_preview_background_color.css("background-color",n),t.$input_preview.css({"background-color":n}),w({type:"background-color",name:"background-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.content.background_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_background_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_background_color_value.spectrum("hide")}),t.$content_background_color_preview.on("click",function(){return t.$content_background_color_value.spectrum("show"),!1})},I=function(){var n;t.$content_background_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-background-color-hover-picker",show:function(){},move:function(r){n=r.toRgbString(),t.$content_background_color_hover_preview.hide(),t.$content_preview_background_color_hover.css("background-color",n),t.$input_preview.hover(function(){e(this).css({"background-color":n})},function(){e(this).css({"background-color":o.wpcf7_data.content.background_color})}),w({type:"background-color-hover",name:"background-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.content.background_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_background_color_hover_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_background_color_hover_value.spectrum("hide")}),t.$content_background_color_hover_preview.on("click",function(){return t.$content_background_color_hover_value.spectrum("show"),!1})},N=function(){var n;t.$content_border_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-border-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$content_border_color_preview.hide(),t.$content_preview_border_color.css("background-color",n),t.$input_preview.css({"border-color":n}),w({type:"border-color",name:"border-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.content.border_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_border_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_border_color_value.spectrum("hide")}),t.$content_border_color_preview.on("click",function(){return t.$content_border_color_value.spectrum("show"),!1})},S=function(){var n;t.$content_border_color_hover_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-content-border-color-hover-picker",show:function(){},move:function(r){n=r.toRgbString(),t.$content_border_color_hover_preview.hide(),t.$content_preview_border_color_hover.css("background-color",n),t.$input_preview.hover(function(){e(this).css({"border-color":n})},function(){e(this).css({"border-color":o.wpcf7_data.content.border_color})}),w({type:"border-color-hover",name:"border-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.content.border_color_hover=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$content_border_color_hover_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$content_border_color_hover_value.spectrum("hide")}),t.$content_border_color_hover_preview.on("click",function(){return t.$content_border_color_hover_value.spectrum("show"),!1})},D=function(){var n;t.$form_error_message_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap error-message-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$form_error_message_color_preview.hide(),$({type:"validation-error",name:"text-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.error_message_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$form_error_message_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$form_error_message_color_value.spectrum("hide")}),t.$form_error_message_color_preview.on("click",function(){return t.$form_error_message_color_value.spectrum("show"),!1})},A=function(){var n;t.$form_send_message_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap send-message-color-picker",show:function(){},move:function(e){n=e.toRgbString(),t.$form_send_message_color_preview.hide(),$({type:"send-message",name:"text-color",value:n})},change:function(e){},hide:function(e){o.wpcf7_data.send_message_color=e.toRgbString()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),a=e(r);t.$form_send_message_color_value.spectrum("container").append(a),a.on("click",function(e){e.preventDefault(),t.$form_send_message_color_value.spectrum("hide")}),t.$form_send_message_color_preview.on("click",function(){return t.$form_error_message_color_value.spectrum("show"),!1})},B=!1,T=function(){t.$modal.click(function(t){e(t.target).is(".rex-modal-wrap")&&(B=!1)}),t.$close_button.on("click",function(){B=!1,m()}),t.$reset_button.on("click",function(){B=!1,o=jQuery.extend(!0,{},r),h(),v()}),t.$apply_changes_button.on("click",function(){B=!_.isEqual(o,r),m()}),t.$modal.on("rexlive:this_modal_closed",function(){B||(o=jQuery.extend(!0,{},r),h()),c(),x(),v()}),t.$content_width_type.on("click",function(){var o=t.$content_width.val(),n=e(this).val();switch(n){case"percentage":o+="%";break;case"pixel":o+="px"}w({type:"width",name:"width",value:o})}),t.$content_height_type.on("click",function(){var o=t.$content_height.val(),n=e(this).val();switch(n){case"percentage":o+="%";break;case"pixel":o+="px"}w({type:"height",name:"height",value:o})}),t.$content_text_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$content_preview_text_color.hide(),t.$content_text_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$content_text_color_value.spectrum("set",r),t.$content_text_color_runtime.val(r),o.wpcf7_data.content.text_color=r,w({type:"text-color",name:"text-color",value:r}),t.$input_preview.css({color:r}),o.wpcf7_data.options_different.text_color=!1,"undefined"!=typeof t.$color_picker_overlay&&t.$color_picker_overlay.remove()}),t.$content_hover_text_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$content_preview_text_color_hover.hide(),t.$content_hover_text_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$content_text_color_hover_value.spectrum("set",r),t.$content_text_color_hover_runtime.val(r),o.wpcf7_data.content.text_color_hover=r,w({type:"text-color-hover",name:"text-color",value:r}),t.$input_preview.hover(function(){e(this).css({color:r})},function(){e(this).css({color:o.wpcf7_data.content.text_color})})}),t.$content_background_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$content_preview_background_color.hide(),t.$content_background_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$content_background_color_value.spectrum("set",r),t.$content_background_color_runtime.val(r),o.wpcf7_data.content.background_color=r,w({type:"background-color",name:"background-color",value:r}),t.$input_preview.css({"background-color":r})}),t.$content_hover_background_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$content_preview_background_color_hover.hide(),t.$content_hover_background_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$content_background_color_hover_value.spectrum("set",r),t.$content_background_color_hover_runtime.val(r),o.wpcf7_data.content.background_color_hover=r,w({type:"background-color-hover",name:"background-color",value:r}),t.$input_preview.hover(function(){e(this).css({"background-color":r})},function(){e(this).css({"background-color":o.wpcf7_data.content.background_color})})}),t.$content_hover_border_color_palette_buttons.on("click",function(n){var r=e(n.currentTarget).find(".bg-palette-value").val();e(n.currentTarget).addClass("palette-color-active"),t.$content_preview_border_color_hover.hide(),t.$content_hover_border_color_palette_buttons.not(n.currentTarget).removeClass("palette-color-active"),t.$content_border_color_hover_value.spectrum("set",r),t.$content_border_color_hover_runtime.val(r),o.wpcf7_data.content.border_color_hover=r,w({type:"border-color-hover",name:"border-color",value:r}),t.$input_preview.hover(function(){e(this).css({"border-color":r})},function(){e(this).css({"border-color":o.wpcf7_data.content.border_color})})})},U=function(){var n=e("#rex-wpcf7-form-editor"),r=n.find(".rexpansive-accordion-outer"),a=n.find(".rexpansive-accordion"),i=n;r.rexAccordion({open:{},close:{},selectors:{toggle:".rex-accordion-outer--toggle",content:".rex-accordion-outer--content"}}),a.rexAccordion({open:{},close:{}}),t={$self:n,$modal:i.parent(".rex-modal-wrap"),$close_button:i.find(".rex-cancel-button"),$apply_changes_button:i.find(".rex-apply-button"),$reset_button:i.find(".rex-reset-button"),$input_preview:i.find(".rex-wpcf7-text-modal-preview"),$form_mail_to:i.find("#rex-wpcf7-mail-to"),$form_error_message:i.find("#rex-wpcf7-error-message"),$form_send_message:i.find("#rex-wpcf7-send-message"),$form_preview_background:i.find("#rex-wpcf7-preview-background"),$form_background_color_value:i.find("#rex-wpcf7-background-color"),$form_background_color_runtime:i.find("#rex-wpcf7-background-color-runtime"),$form_background_color_preview:i.find("#rex-wpcf7-background-color-preview-icon"),$form_preview_border_color:i.find("#rex-wpcf7-preview-border"),$form_border_color_value:i.find("#rex-wpcf7-border-color"),$form_border_color_runtime:i.find("#rex-wpcf7-border-color-runtime"),$form_border_color_preview:i.find("#rex-wpcf7-border-color-preview-icon"),$form_border_width:i.find("#rex-wpcf7-set-border-width"),$form_margin_top:i.find("#rex-wpcf7-margin-top"),$form_margin_left:i.find("#rex-wpcf7-margin-left"),$form_margin_right:i.find("#rex-wpcf7-margin-right"),$form_margin_bottom:i.find("#rex-wpcf7-margin-bottom"),$form_columns_padding_top:i.find("#rex-wpcf7-columns-padding-top"),$form_columns_padding_left:i.find("#rex-wpcf7-columns-padding-left"),$form_columns_padding_right:i.find("#rex-wpcf7-columns-padding-right"),$form_columns_padding_bottom:i.find("#rex-wpcf7-columns-padding-bottom"),$content_width:i.find("#rex-wpcf7-content-width"),$content_width_type:i.find(".rex-wpcf7-content-width-type"),$content_height:i.find("#rex-wpcf7-content-height"),$content_height_type:i.find(".rex-wpcf7-content-height-type"),$content_set_font_size:i.find("#rex-wpcf7-set-content-font-size"),$content_set_border_width:i.find("#rex-wpcf7-set-content-border-width"),$content_set_border_radius:i.find("#rex-wpcf7-set-content-border-radius"),$content_preview_text_color:i.find("#rex-wpcf7-content-preview-text-color"),$content_text_color_value:i.find("#rex-wpcf7-content-text-color"),$content_text_color_runtime:i.find("#rex-wpcf7-content-text-color-runtime"),$content_text_color_preview:i.find("#rex-wpcf7-content-text-color-preview-icon"),$content_text_color_palette_buttons:n.find("#text-color-palette .bg-palette-selector"),$content_preview_text_color_hover:i.find("#rex-wpcf7-content-preview-text-color-hover"),$content_text_color_hover_value:i.find("#rex-wpcf7-content-text-color-hover"),$content_text_color_hover_runtime:i.find("#rex-wpcf7-content-text-color-hover-runtime"),$content_text_color_hover_preview:i.find("#rex-wpcf7-content-text-color-hover-preview-icon"),$content_hover_text_color_palette_buttons:n.find("#hover-text-color-palette .bg-palette-selector"),$content_preview_background_color:i.find("#rex-wpcf7-content-preview-background-color"),$content_background_color_value:i.find("#rex-wpcf7-content-background-color"),$content_background_color_runtime:i.find("#rex-wpcf7-content-background-color-runtime"),$content_background_color_preview:i.find("#rex-wpcf7-content-background-color-preview-icon"),$content_background_color_palette_buttons:n.find("#background-color-palette .bg-palette-selector"),$content_preview_background_color_hover:i.find("#rex-wpcf7-content-preview-background-color-hover"),$content_background_color_hover_value:i.find("#rex-wpcf7-content-background-color-hover"),$content_background_color_hover_runtime:i.find("#rex-wpcf7-content-background-color-hover-runtime"),$content_background_color_hover_preview:i.find("#rex-wpcf7-content-background-color-hover-preview-icon"),$content_hover_background_color_palette_buttons:n.find("#hover-background-color-palette .bg-palette-selector"),$content_preview_border_color:i.find("#rex-wpcf7-content-preview-border-color"),$content_border_color_value:i.find("#rex-wpcf7-content-border-color"),$content_border_color_runtime:i.find("#rex-wpcf7-content-border-color-runtime"),$content_border_color_preview:i.find("#rex-wpcf7-content-border-color-preview-icon"),$content_preview_border_color_hover:i.find("#rex-wpcf7-content-preview-border-color-hover"),$content_border_color_hover_value:i.find("#rex-wpcf7-content-border-color-hover"),$content_border_color_hover_runtime:i.find("#rex-wpcf7-content-border-color-hover-runtime"),$content_border_color_hover_preview:i.find("#rex-wpcf7-content-border-color-hover-preview-icon"),$content_hover_border_color_palette_buttons:n.find("#hover-border-color-palette .bg-palette-selector"),$form_error_message_font_size:i.find("#rex-wpcf7-set-error-message-font-size"),$form_send_message_font_size:i.find("#rex-wpcf7-set-send-message-font-size"),$form_error_message_color_value:i.find("#rex-wpcf7-error-message-color"),$form_error_message_color_runtime:i.find("#rex-wpcf7-error-message-color-runtime"),$form_error_message_color_preview:i.find("#rex-wpcf7-error-message-color-preview-icon"),$form_send_message_color_value:i.find("#rex-wpcf7-send-message-color"),$form_send_message_color_runtime:i.find("#rex-wpcf7-send-message-color-runtime"),$form_send_message_color_preview:i.find("#rex-wpcf7-send-message-color-preview-icon")},o={synchronize:"",wpcf7_data:{background_color:"",border_color:"",border_width:"",margin_top:"",margin_left:"",margin_right:"",margin_bottom:"",error_message_color:"",error_message_font_size:"",send_message_color:"",send_message_font_size:"",columns:{padding_top:"",padding_left:"",padding_right:"",padding_bottom:""},content:{background_color:"",background_color_hover:"",text_color:"",text_color_hover:"",border_color:"",border_color_hover:"",width:"",height:"",font_size:"",border_width:"",border_radius:""},options_different:{width:!0,height:!0,font_size:!0,text_color:!0}},element_target:{element_id:"",element_number:""}},T(),k(),y(),C(),M(),R(),E(),I(),N(),S(),D(),A()};return{init:U,openFormEditorModal:p}}(jQuery),Model_Lateral_Menu=function(e){"use strict";var t,o=function(){t.$close_button.click(function(e){e.preventDefault(),r()})},n=function(){Model_Import_Modal.updateModelList(),Element_Import_Modal.updateElementList()},r=function(){t.$self.addClass("rex-lateral-panel--close").one(Rexbuilder_Util_Admin_Editor.animationEvent,function(e){t.$self.removeClass("rex-lateral-panel--open rex-lateral-panel--close")})},o=function(){Rexlive_Base_Settings.$document.on("rexlive:lateralMenuReady",function(){t.$self.addClass("rex-lateral-panel--open");var e=t.$tabsButtons.filter(".active").parent().index();t.$tabs.eq(e).show()}),t.$close_button.click(function(e){e.preventDefault(),r()}),t.$tabsButtons.click(function(o){o.preventDefault();var n=e(this),r=n.closest("li").siblings().children("a"),a=n.attr("data-rex-tab-target");r.removeClass("active"),n.addClass("active"),t.$tabs.hide(),t.$tabs.each(function(t,o){e(o).attr("id")==a&&e(o).show()})}),Rexlive_Base_Settings.$document.on("click",".model__element--title-edit",function(e){var t=this.parentNode.parentNode.parentNode,o={id:t.getAttribute("data-rex-model-id"),name:t.querySelector(".model-name").textContent};Rexlive_Model_Edit_Name_Modal.openModal(o)}),Rexlive_Base_Settings.$document.on("click",".model__element--edit-thumbnail",function(t){var o=e(this).parents(".model__element");Model_Import_Modal.editModelThumbnail(o.attr("data-rex-model-id"),o.attr("data-rex-model-thumbnail-id"))}),Rexlive_Base_Settings.$document.on("click",".model__element--delete",function(e){var t=this.parentNode.parentNode.parentNode;Model_Import_Modal.deleteModel(t)}),Rexlive_Base_Settings.$document.on("click",".model__element--reset-thumbnail",function(t){var o=e(this).parents(".model__element");Model_Import_Modal.resetModelThumbnail(o.attr("data-rex-model-id"))}),Rexlive_Base_Settings.$document.on("click",".element-list__element--delete",function(e){var t=this.parentNode.parentNode.parentNode;Element_Import_Modal.deleteElement(t)}),Rexlive_Base_Settings.$document.on("click",".element-list__element--edit-thumbnail",function(t){var o=e(this).parents(".element-list__element");Element_Import_Modal.editElementThumbnail(o.attr("data-rex-element-id"),o.attr("data-rex-element-thumbnail-id"))}),Rexlive_Base_Settings.$document.on("click",".element-list__element--reset-thumbnail",function(t){var o=e(this).parents(".element-list__element");Element_Import_Modal.resetElementThumbnail(o.attr("data-rex-element-id"))})},a=function(){var n=e("#rexbuilder-lateral-panel");t={$self:n,$close_button:n.find(".rex-lateral-panel--close"),$tabs:n.find(".tabgroup > div"),$tabsButtons:n.find(".rex-lateral-tabs-list a")},t.$tabs.hide(),o()};return{init:a,openModal:n,closeModal:r}}(jQuery),Rexlive_Modals=function(e){"use strict";function t(){Rexlive_Top_Tools.init(),Section_Modal.init(),Insert_Video_Modal.init(),CssEditor_Modal.init(),HtmlEditor_Modal.init(),SectionBackground_Modal.init(),Rexlive_Section_Background_Gradient.init(),Rexlive_Section_Overlay_Gradient.init(),Section_Video_Background_Modal.init(),BlockOptions_Modal.init(),Block_Content_Positions_Modal.init(e("#rex-block-content-position-editor")),Rexlive_Block_Accordion.init(),Rexlive_Block_Slideshow.init(),Rexlive_Text_Gradient.init(),Rexlive_Block_Background_Gradient.init(),Rexlive_Block_Overlay_Gradient.init(),Model_Modal.init(),Model_Edit_Modal.init(),Rexlive_Model_Edit_Name_Modal.init(),Open_Models_Warning.init(),CustomLayouts_Modal.init(),Change_Layout_Modal.init(),LockedOptionMask.init(),Model_Lateral_Menu.init(),Rexlive_Page_Settings_Modal.init(),Model_Import_Modal.init(),Rexlive_Inline_SVG.init(),Button_Import_Modal.init(),Button_Edit_Modal.init(),Element_Import_Modal.init(),Element_Choose_Modal.init(),Wpcf7_Add_Content_Modal.init(),Wpcf7_Edit_Content_Modal.init(),Wpcf7_Edit_Form_Modal.init(),Rexlive_PostEdit_MediaList.init()}return{init:t}}(jQuery),Rexlive_Base_Settings=function(e){"use strict";function t(t){return e("<div/>").html(t).text()}function o(t){return e("<div/>").text(t).html()}var n,r,a,i;"classList"in document.documentElement?(n=function(e,t){return e.classList.contains(t)},r=function(e,t){e.classList.add(t)},a=function(e,t){e.classList.remove(t)}):(n=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},r=function(e,t){n(e,t)||(e.className+=" "+t)},a=function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),i=function(e,t){n(e,t)?a(e,t):r(e,t)};var l=function(){tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},d=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},c=function(e){var t,o="",n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o=n.join("&").replace(/%20/g,"+")},s=function(){this.$document=e(document),this.$window=e(window),l()};return{init:s,htmlDecode:t,htmlEncode:o,viewport:d,launchTooltips:l,encodeData:c,addClass:r,removeClass:a,hasClass:n,toggleClass:i}}(jQuery),Rexbuilder_Util_Admin_Editor=function(e){"use strict";var t,o,n,r,a,i,l,d,c,s,_,u,p,m,v,f,g,b,h,x,$,w,k,y,C,M,R,E,I,N,S,D,A,B,T,U=function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)||Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.addClass(e)},P=function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)&&Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.removeClass(e)},j=function(e){this.stopScrolling=e},z=function(e){B=S.scrollTop(),S.scrollTop(B+e),Rexbuilder_Util_Admin_Editor.stopScrolling||setTimeout(function(){z(e)},20)},F=function(e){return"default"==e||"mobile"==e||"tablet"==e?"standard":"custom"},V=function(e){if(e.data.rexliveEvent){var t=e.data;if("rexlive:edited"==e.data.eventName&&(e.data.modelEdited?n=!1:Rexbuilder_Util_Admin_Editor.pageSaved=!1,a.addClass("page-edited")),"rexlive:undoRedoStackChange"==e.data.eventName&&(e.data.stacks.undo>0?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-undo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-undo--active"),e.data.stacks.redo>0?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-redo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active")),"rexlive:traceVisibleRow"==e.data.eventName&&(d.val(e.data.sectionTarget.sectionID),c.val(e.data.sectionTarget.modelNumber),s.val(e.data.sectionTarget.modelEditing),_=e.data.rowInfo,ue()),"rexlive:viewTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("top-fast-tools--hide"),"rexlive:hideTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("top-fast-tools--hide"),"rexlive:updateTopToolbar"==e.data.eventName&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData(e.data.updateInfo),ue()),"rexlive:openMediaUploader"==e.data.eventName&&Rexlive_MediaUploader.openInsertImageBlocksMediaUploader(t),"rexlive:addNewBlockVideo"==e.data.eventName&&Insert_Video_Modal.openVideoModal(t),"rexlive:addNewSlider"==e.data.eventName&&Rexbuilder_RexSlider.openSliderModal("","","",t.target),"rexlive:editSlider"==e.data.eventName){var o=e.data;Rexbuilder_RexSlider.openSliderModal(o.blockID,o.shortCodeSlider,o.sliderID,o.target)}if("rexlive:openSectionModal"==e.data.eventName&&Section_Modal.openSectionModal(e.data.section_options_active,e.data.mousePosition),"rexlive:inlineVideoEditor"==e.data.eventName&&Change_UpdateVideoInline_Modal.openModal(e.data.modelData),"rexlive:inlineSVG"==e.data.eventName&&Rexlive_Inline_SVG.openModal(e.data.inlineSVGData),"rexlive:openModalMenu"==e.data.eventName&&Model_Modal.openModal(e.data.modelData),"rexlive:updateModel"==e.data.eventName&&Model_Modal.updateModel(e.data.modelData),"rexlive:uploadSliderFromLive"==e.data.eventName){var r=e.data.sliderInfo,u=r.slider,p=r.slider.id.toString(),m=r.newSlider,v=r.blockID,f=r.target;Rexbuilder_RexSlider.saveSlider(u,v,p,m,!0,f)}if("rexlive:openCssEditor"==e.data.eventName&&CssEditor_Modal.openModal(e.data.currentStyle),"rexlive:openHTMLEditor"==e.data.eventName&&HtmlEditor_Modal.openModal(e.data.htmlContent),"rexlive:openLiveImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageLiveMediaUploader(e.data.live_uploader_data),"rexlive:openMEImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageMEMediaUploader(e.data.img_data),"rexlive:openPostEditMediaUploader"===e.data.eventName&&Rexlive_PostEdit.openMediaUploader(e.data.mediaData),"rexlive:openPostEditMediaList"===e.data.eventName&&Rexlive_PostEdit_MediaList.openModal(e.data.data_to_send),"rexlive:liveMediaAddFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.addMediaItem(e.data.mediaData),"rexlive:liveMediaEditFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.editMediaItem(e.data.mediaData),"rexlive:editBackgroundSection"==e.data.eventName&&SectionBackground_Modal.openSectionBackgroundModal(e.data.activeBG),"rexlive:editSectionBackgroundGradient"==e.data.eventName&&Rexlive_Section_Background_Gradient.openModal(e.data.activeRowData),"rexlive:editRowOverlayGradient"==e.data.eventName&&Rexlive_Section_Overlay_Gradient.openModal(e.data.activeRowData),"rexlive:editRowVideoBackground"==e.data.eventName&&Section_Video_Background_Modal.openSectionVideoBackgroundModal(e.data.activeBG,e.data.mousePosition),"rexlive:editBlockOptions"==e.data.eventName&&BlockOptions_Modal.openBlockOptionsModal(e.data.activeBlockData),"rexlive:editBlockContentPosition"==e.data.eventName&&Block_Content_Positions_Modal.openBlockContentPositionModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockAccordion"==e.data.eventName&&Rexlive_Block_Accordion.openModal(e.data.activeBlockData),"rexlive:editBlockSlideshow"==e.data.eventName&&Rexlive_Block_Slideshow.openModal(e.data.activeBlockData),"rexlive:editBlockGradient"==e.data.eventName&&Rexlive_Block_Background_Gradient.openModal(e.data.activeBlockData),"rexlive:editTextGradient"==e.data.eventName&&Rexlive_Text_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockOverlayGradient"==e.data.eventName&&Rexlive_Block_Overlay_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockImageSettings"==e.data.eventName&&Block_Image_Editor_Modal.openModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockVideoBackground"==e.data.eventName&&Block_Video_Background_Modal.openBlockVideoBackgroundModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:openRexButtonEditor"==e.data.eventName&&Button_Edit_Modal.openButtonEditorModal(e.data.buttonData),"rexlive:openRexElementChoose"==e.data.eventName&&Element_Choose_Modal.selectModalToOpen(e.data),"rexlive:openRexWpcf7AddContent"==e.data.eventName&&Wpcf7_Add_Content_Modal.openContentAdder(e.data),"rexlive:openRexWpcf7EditContent"==e.data.eventName&&Wpcf7_Edit_Content_Modal.openColumnContentEditorModal(e.data),"rexlive:openRexWpcf7EditForm"==e.data.eventName&&Wpcf7_Edit_Form_Modal.openFormEditorModal(e.data),"rexlive:editRemoveModal"==e.data.eventName&&Model_Edit_Modal.openModal(e.data.modelData),"rexlive:saveAndCloseModel"==e.data.eventName&&(Q("CLOSE",e.data.modelData),oe("false"),ne()),"rexlive:savePageEnded"==e.data.eventName){switch(e.data.dataSaved){case"model":n=!0;break;case"page":Rexbuilder_Util_Admin_Editor.pageSaved=!0}n&&Rexbuilder_Util_Admin_Editor.pageSaved&&(NProgress.done(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend",!1),a.removeClass("page-edited"),a.removeClass("rex-saving"),"undefined"!=typeof e.data.buttonData&&""!=e.data.buttonData&&O(e.data.buttonData))}"rexlive:restoreStateEnded"==e.data.eventName&&(n=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,"undefined"!=typeof e.data.buttonData&&""!=typeof e.data.buttonData&&O(e.data.buttonData)),"rexlive:animateContentsFadeOutEnd"==e.data.eventName&&NProgress.inc(.5),"rexlive:animateContentsEnd"==e.data.eventName&&NProgress.done(),"rexlive:esc_pressed"==e.data.eventName&&Rexlive_Modals_Utils.close_focus_modal(),"rexlive:savePageWithButton"==e.data.eventName&&a.trigger("click"),"rexlive:undoWithButton"==e.data.eventName&&i.trigger("click"),"rexlive:redoWithButton"==e.data.eventName&&l.trigger("click"),"rexlive:savePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteColor(e.data.color_data),"rexlive:deletePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteColor(e.data.color_data),"rexlive:savePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteOverlayColor(e.data.overlay_data),"rexlive:deletePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteOverlayColor(e.data.overlay_data)}},L=function(){Rexlive_Base_Settings.$document.on("click",".btn-builder-layout",function(r){var a=e(this),i=a.attr("data-name");if(t!=i){var l={min:a.attr("data-min-width"),max:a.attr("data-max-width"),id:i,label:"undefined"!=typeof a.attr("data-label")?a.attr("data-label"):i,type:F(i)},d={activeLayout:t,activeLayoutLabel:o,buttonData:l,modelSaved:n,pageSaved:Rexbuilder_Util_Admin_Editor.pageSaved};if("true"==Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend").toString())LockedOptionMask.openModal(d);else{if(!n||!Rexbuilder_Util_Admin_Editor.pageSaved)return void Change_Layout_Modal.openModal(d);NProgress.start(),H({eventName:"rexlive:startChangeLayout"}),O(l)}}}),a.on("click",function(e){for(var t=[],o=0;o<E.length;o++)"open"==E[o].m_state&&t.push(E[o]);0===t.length?G():Open_Models_Warning.openModal(t)}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),a.trigger("click"))}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode&&(e.preventDefault(),i.trigger("click"))}),Rexlive_Base_Settings.$document.on("keydown",function(e){((window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&89==e.keyCode)&&(e.preventDefault(),l.trigger("click"))}),Rexlive_Base_Settings.$document.on("click",".btn-undo",function(e){var t={eventName:"rexlive:undo"};H(t)}),Rexlive_Base_Settings.$document.on("click",".btn-redo",function(e){var t={eventName:"rexlive:redo"};H(t)}),Rexlive_Base_Settings.$document.on("click",".btn-models",function(e){Model_Lateral_Menu.openModal()}),Rexlive_Base_Settings.$document.on("click",".open-distancer-tool",function(e){Rexlive_Page_Settings_Modal.open()}),Rexlive_Base_Settings.$document.on("focus",A,function(t){e(t.target).is(A)&&e(t.target).siblings("label, .prefix").addClass("active")}),Rexlive_Base_Settings.$document.on("blur",A,function(t){e(t.target).is(A)&&""==t.target.value&&e(t.target).siblings("label, .prefix").removeClass("active")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-image",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:openMediaUploader",returnEventName:"rexlive:insert_image",sectionTarget:{sectionID:d.val(),modelNumber:c.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-text",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$frameBuilder.focus();var t={eventName:"rexlive:insert_new_text_block",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()}}};H(t)}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-video",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:d.val(),modelNumber:c.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-slider",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:addNewSlider",target:{sectionID:d.val(),
modelNumber:c.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-section",function(e){e.preventDefault();var t={eventName:"rexlive:add_new_section_after",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},position:"after"}};H(t)}),Rexlive_Base_Settings.$document.on("click",".toolbox-collapse-grid",function(e){e.preventDefault(),"true"==_.collapse?_.collapse="false":_.collapse="true",re();var t={eventName:"rexlive:collapse_row",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()}}};H(t)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox",function(e){Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.target.value});var t={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},layout:e.target.value}};H(t)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox-checkbox",function(e){var t=e.target.checked?"fixed":"masonry";Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:t});var o={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},layout:t}};H(o)}),Rexlive_Base_Settings.$document.on("change",".edit-row-width-toolbox",function(e){var t="",o="",n=e.target.value.trim().split(/(\d+)/);t=n[1],o=n[2],Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e.target.value,dimension:e.target.getAttribute("data-section_width")});var r={eventName:"rexlive:set_section_width",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},sectionWidth:{width:t,type:o},forged:!0}};H(r)}),Rexlive_Base_Settings.$document.on("click",".toolbox-builder-section-config",function(e){e.preventDefault();var t=he(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}),o={rexliveEvent:!0,eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},activeLayout:_.layout,fullHeight:_.full_height,section_width:_.section_width,dimension:_.dimension,rowDistances:{gutter:_.block_distance,top:_.row_separator_top,right:_.row_separator_right,bottom:_.row_separator_bottom,left:_.row_separator_left},marginsSection:{top:_.row_margin_top,right:_.row_margin_right,bottom:_.row_margin_bottom,left:_.row_margin_left},photoswipe:!1,sectionName:_.section_name,customClasses:_.custom_classes},mousePosition:t};window.postMessage(o,"*")}),Rexlive_Base_Settings.$document.on("click",".edit-row-image-background-toolbox",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},idImage:_.id_image_bg_section,returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-image-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:"false",image_bg_section:"",id_image_bg_section:""}),de();var t={eventName:"rexlive:apply_background_image_section",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},active:!1,idImage:"",urlImage:"",width:"",height:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-color-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"false",color_bg_section:""}),ce();var t={eventName:"rexlive:apply_background_color_section",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},active:!1,color:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-overlay-color-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_color:"",row_overlay_active:"false"}),se();var t={eventName:"rexlive:change_section_overlay",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},active:!1,color:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".edit-row-video-background-toolbox",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},youtubeVideo:_.video_bg_url_section,vimeoUrl:_.video_bg_url_vimeo_section,mp4Video:_.video_mp4_url,mp4VideoID:_.video_bg_id_section}}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-video-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}),_e(),_.video_bg_url_section="",_.video_bg_id_section="",_.video_bg_url_vimeo_section="",_.video_mp4_url="";var t={eventName:"rexlive:update_section_background_video",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:""}}};H(t)}),Rexlive_Base_Settings.$document.on("click",".open-model-toolbox",function(e){e.preventDefault();var t={eventName:"rexlive:openCreateModelModal",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:c.val()}}};H(t)}),window.addEventListener("message",V,!1)},O=function(e){n=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,t=e.id,o=e.label;var r=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]');Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-builder-layout.active-layout").removeClass("active-layout"),r.addClass("active-layout"),Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".tool-option__choose-layout").find(".active-layout__icon").html(Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]').find(".layout__icon").html()),D={selectedLayoutName:t,eventName:"rexlive:changeLayout",layoutData:e},q(e.min)},W=function(e){D=e},Q=function(e,t){switch(e){case"OPEN":for(var o=null,n=0;n<E.length;n++)if(t.modelID==E[n].m_id){o=n;break}if(null!==o)E[n].m_state="open";else{var r={m_id:t.modelID,m_name:t.modelName,m_state:"open"};E.push(r)}break;case"CLOSE":for(var o=null,n=0;n<E.length;n++)if(t.modelID==E[n].m_id){o=n;break}if(null!==o)E[n].m_state="close";else{var r={m_id:t.modelID,m_name:t.modelName,m_state:"close"};E.push(r)}break;case"REMOVE":for(var o=null,n=0;n<E.length;n++)if(t.modelID==E[n].m_id){o=n;break}null!==o&&E.splice(o,1)}},G=function(){NProgress.start(),e(this).addClass("rex-saving");var o={eventName:"rexlive:savePage",data_to_send:{activeLayout:t}};H(o)},q=function(e){e!=Rexbuilder_Util_Admin_Editor.activeWidth?(""==e?(I.css("width","100%"),I.css("min-width","1024px")):(I.css("width",e),I.css("min-width","")),Rexbuilder_Util_Admin_Editor.activeWidth=e):H(D)},H=function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),N.postMessage(t,"*")},Y=function(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t},J=function(e){for(var t="",o="0123456789",n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return parseInt(t)},K=function(){return t},X=function(e){t=e,this.$responsiveToolbar.find(".btn-builder-layout.active-layout").removeClass("active-layout"),this.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]').addClass("active-layout")},Z=function(){var e,t=document.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(void 0!==t.style[e])return o[e]},ee=function(){var e,t=document.createElement("fakeelement"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(void 0!==t.style[e])return o[e]},te=function(e){c.val(e)},oe=function(e){s.val(e)},ne=function(){""!==c.val()&&"undefined"!=typeof c.val()&&"false"===s.val()?Rexbuilder_Util_Admin_Editor.$responsiveToolbar.addClass("rexlive-toolbox--model"):Rexbuilder_Util_Admin_Editor.$responsiveToolbar.removeClass("rexlive-toolbox--model")},re=function(){"true"==_.collapse?v.addClass("active"):v.removeClass("active")},ae=function(){u.filter("[data-section_width="+_.dimension+"]").attr("checked",!0)},ie=function(){p.filter("[value="+_.layout+"]").attr("checked",!0)},le=function(){var e="fixed"==_.layout;m.prop("checked",e)},de=function(){"undefined"!=typeof _.id_image_bg_section&&""!==_.id_image_bg_section&&"undefined"!=typeof _.image_bg_section&&""!==_.image_bg_section?(f.addClass("tool-button--image-preview").attr("value",_.id_image_bg_section).css("background-image","url("+_.image_bg_section+")"),h.addClass("tool-button--hide"),setTimeout(function(){x.parent().fadeIn()},300)):(h.removeClass("tool-button--hide"),x.parent().fadeOut({duration:300,complete:function(){f.removeClass("tool-button--image-preview").attr("value","").css("background-image","none")}}))},ce=function(){""!==_.color_bg_section?(g.val(_.color_bg_section).spectrum("set",_.color_bg_section),g.parent().addClass("tool-button--picker-preview"),g.siblings(".tool-button--color-preview").css("background-color",_.color_bg_section),$.parent().addClass("tool-button--hide"),setTimeout(function(){w.parent().fadeIn()},300)):(g.val("").spectrum("set",""),$.parent().removeClass("tool-button--hide"),w.parent().fadeOut({duration:300,complete:function(){g.parent().removeClass("tool-button--picker-preview"),g.siblings(".tool-button--color-preview").css("background-color","")}}))},se=function(){""!==_.row_overlay_color&&"undefined"!=typeof _.row_overlay_color?(b.val(_.row_overlay_color).spectrum("set",_.row_overlay_color),b.parent().addClass("tool-button--picker-preview"),b.siblings(".tool-button--color-preview").css("background-color",_.row_overlay_color),k.parent().addClass("tool-button--hide"),setTimeout(function(){y.parent().fadeIn()},300)):(b.val("").spectrum("set",""),k.parent().removeClass("tool-button--hide"),y.parent().fadeOut({duration:300,complete:function(){b.parent().removeClass("tool-button--picker-preview"),b.siblings(".tool-button--color-preview").css("background-color","")}}))},_e=function(){""!==_.video_bg_url_section&&"undefined"!=typeof _.video_bg_url_section||""!==_.video_bg_url_vimeo_section&&"undefined"!=typeof _.video_bg_url_vimeo_section||""!==_.video_mp4_url&&"undefined"!=typeof _.video_mp4_url||""!==_.video_bg_id_section&&"undefined"!=typeof _.video_bg_id_section?(M.addClass("tool-button--hide"),setTimeout(function(){R.parent().fadeIn()})):(M.removeClass("tool-button--hide"),R.parent().fadeOut({duration:300}))},ue=function(){ne(),re(),ae(),ie(),le(),de(),ce(),se(),_e()},pe=function(){var e={eventName:"rexlive:lockRows"};H(e)},me=function(){var e={eventName:"rexlive:unlockRows"};H(e)},ve=function(){a.addClass("page-edited")},fe=function(){ge(),be()},ge=function(){var e=!1,t=!1,o={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};g.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,beforeShow:function(){Rexlive_Color_Palette.show({$target:w,object:"section",action:"background"})},show:function(){var n=g.spectrum("container")[0];n.style.top=parseInt(n.style.top)+10+"px",e=!1,o.data_to_send.sectionTarget.sectionID=d.val(),o.data_to_send.sectionTarget.modelNumber=c.val(),t=JSON.parse(_.color_bg_section_active)},change:function(){},move:function(n){o.data_to_send.active=!0,o.data_to_send.color=n.toRgbString(),t?o.eventName="rexlive:change_section_bg_color":o.eventName="rexlive:apply_background_color_section",H(o),e=!0},hide:function(t){Rexlive_Color_Palette.hide(),e&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"true",color_bg_section:t.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrColTool(),o.data_to_send.active=!0,o.data_to_send.color=t.toRgbString(),o.eventName="rexlive:apply_background_color_section",H(o)),e=!1}})},be=function(){var e=!1,t=!1,o={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};b.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,beforeShow:function(){Rexlive_Overlay_Palette.show({$target:y,object:"section",action:"overlay"})},show:function(){var n=b.spectrum("container")[0];n.style.top=parseInt(n.style.top)+10+"px",e=!1,o.data_to_send.sectionTarget.sectionID=d.val(),o.data_to_send.sectionTarget.modelNumber=c.val(),t=JSON.parse(_.row_overlay_active)},move:function(n){o.data_to_send.active=!0,o.data_to_send.color=n.toRgbString(),t?o.eventName="rexlive:change_section_overlay_color":o.eventName="rexlive:change_section_overlay",H(o),e=!0},hide:function(t){Rexlive_Overlay_Palette.hide(),e&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_active:"true",row_overlay_color:t.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrOverlayTool(),o.data_to_send.active=!0,o.data_to_send.color=t.toRgbString(),o.eventName="rexlive:change_section_overlay",H(o)),e=!1}})},he=function(e,t){var o={};if("undefined"!=typeof e.clientX&&"undefined"!=typeof e.clientY&&"undefined"!=typeof e.offsetX&&"undefined"!=typeof e.offsetY&&"undefined"!=typeof t){var n=e.target.getBoundingClientRect();o={x:n.left+t.offset.w/2,y:n.top+Rexbuilder_Util_Admin_Editor.mousePositionFrameYOffset}}else o={x:Rexbuilder_Util_Admin_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Admin_Editor.viewportMeasurement.height/2};return o},xe=function(e){if("undefined"!=typeof _&&""!==e&&"undefined"!=typeof e)for(var t in e)_[t]=e[t]},$e=function(){var e={gradient:_.color_bg_section,sectionTarget:{sectionID:d.val(),modelNumber:c.val()}};Rexlive_Section_Background_Gradient.openModal(e)},we=function(){var e={gradient:_.row_overlay_color,sectionTarget:{sectionID:d.val(),modelNumber:c.val()}};Rexlive_Section_Overlay_Gradient.openModal(e)},ke=function(e){for(var t,o=document.createElement("div"),n=o.style,r=Rexbuilder_Util_Admin_Editor.getPrefixedValues(e),a=0;a<r.length&&(t=r[a],n.backgroundImage=t,n.backgroundImage!=t);a++);return n.backgroundImage},ye=function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],o=[],n=0;n<t.length;n++)o.push(t[n]+e);return o},Ce=function(t){var o=tmpl("tmpl-tool-simple-save",{}),n=e(o);t.spectrum("container").append(n),n.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.spectrum("container").find(".sp-choose").trigger("click")})},Me=function(t){var o=tmpl("tmpl-tool-close",{}),n=e(o);t.spectrum("container").append(n),n.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.attr("data-revert",!0),t.spectrum("container").find(".sp-cancel").trigger("click")})},Re=function(){var e=!!document.documentMode;e&&(T||(T=!0,Rexbuilder_Util_Admin_Editor.$frameBuilder.trigger("load")))},Ee=function(){this.$body=e("body"),this.$rexpansiveContainer=e("#rexpansive-builder-backend-wrapper"),I=this.$rexpansiveContainer.find(".rexpansive-live-frame-container"),this.$frameBuilder=this.$rexpansiveContainer.find("#rexpansive-live-frame"),N=this.$frameBuilder[0].contentWindow,S=e(N),this.triggeredLoad=!1,this.$liveFrameRexContainer={},this.dragImportType="",this.stopScrolling=!0,T=!1,this.$frameBuilder[0].onload=Re(),this.transitionEvent=Z(),this.animationEvent=ee(),this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexlive_Base_Settings.viewport(),this.$page_global_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--global"),this.$page_custom_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--custom"),this.$responsiveToolbar=this.$rexpansiveContainer.find(".rexlive-toolbox"),d=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-id]"),c=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-id]"),s=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-editing]"),u=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-width-toolbox"),p=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox"),m=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox-checkbox"),v=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-collapse-grid");var r=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-config-area"),_=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-fast-config-area");h=r.find(".edit-row-image-background-toolbox"),x=_.find(".edit-row-image-background-toolbox"),f=h.add(x),$=r.find("input[name=edit-row-color-background-toolbox]"),w=_.find("input[name=edit-row-color-background-toolbox]"),g=$.add(w),k=r.find("input[name=edit-row-overlay-color-toolbox]"),y=_.find("input[name=edit-row-overlay-color-toolbox]"),b=k.add(y),M=r.find(".edit-row-video-background-toolbox"),R=_.find(".edit-row-video-background-toolbox"),C=M.add(R),a=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save"),i=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-undo"),l=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-redo"),Rexbuilder_Util_Admin_Editor.pageSaved=!0,n=!0,E=[],t="default",o="default",this.$responsiveToolbar.find(".builder-default-layout").addClass("active-layout"),this.activeWidth=0,A="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea",NProgress.configure({template:'<div class="bar" role="bar"><div class="peg"></div></div>'}),I.on(Rexbuilder_Util_Admin_Editor.transitionEvent,function(){null!==D&&"undefined"!=typeof D&&H(D)}),this.$frameBuilder.load(function(){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer=e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0)}),fe(),L()};return{init:Ee,pageSaved:r,createRandomID:Y,createRandomNumericID:J,sendIframeBuilderMessage:H,updateLayoutPage:O,getActiveLayout:K,setActiveLayout:X,updateIframeWidth:q,updateLayoutActiveData:W,releaseIframeRows:me,blockIframeRows:pe,editPageProperties:ve,updateOpenModelsList:Q,highlightRowSetData:xe,updateTopToolbar:ue,updateModelId:te,updateModelEditing:oe,updateModelState:ne,updateWidthTool:ae,updateLayoutTool:ie,updateLayoutCheckboxTool:le,updateBkgrImgTool:de,updateBkgrColTool:ce,updateBkgrOverlayTool:se,updateBkgrVidTool:_e,getGradientSafeValue:ke,getPrefixedValues:ye,openRowColorPaletteModal:$e,openRowOverlayPaletteModal:we,addSpectrumCustomSaveButton:Ce,addSpectrumCustomCloseButton:Me,scrollFrame:z,setScroll:j,addClassToLiveFrameRexContainer:U,removeClassToLiveFrameRexContainer:P,forceTriggerLoad:Re}}(jQuery),Change_UpdateVideoInline_Modal=function(e){"use strict";var t,o=function(o){Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),document.getElementById("me-insert-embed-inline-video-text").value="",e("#me-insert-embed-url-isnot-valid").css("display","none")},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$button.on("click",function(t){function o(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}var r=e(t.target),a=r.parents(".rex-change-layout-option").attr("data-rex-option");switch(a){case"uploadvideo":var i=document.getElementById("me-insert-embed-inline-video-text").value,l=o(i);if(0==l)e("#me-insert-embed-url-isnot-valid").css("display","block"),document.getElementById("me-insert-embed-inline-video-text").value="",console.log("InsertVIDEO || The value has an error, it isn't a valid URL\nValue:",i,"\nisUrl:",l),e("#me-insert-embed-url-isnot-valid").fadeOut(3e3);else{var d={eventName:"rexlive:mediumEditor:inlineVideoEditor",data_to_send:{valueUrl:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),n()}break;case"hide":n();break;default:n()}})},a=function(){var o=e("#rexlive-updatevideoinline"),n=o;t={$self:o,$button:n.find(".rex-button"),$layout_name_placholder:n.find(".layout-name")},r()};return{init:a,openModal:o,closeModal:n}}(jQuery),Rexlive_Gradient_Utils=function(e){function t(e){return e=e.toLowerCase().trim(),"top left"==e?"bottom right":"top"==e?"bottom":"top right"==e?"bottom left":"left"==e?"right":"right"==e?"left":"bottom left"==e?"top right":"bottom"==e?"top":"bottom right"==e?"top left":"top"}function o(e,o){var e;e="to "+t(e)+", ";for(var n="",r=0;r<o.length;r++)n+=o[r].color+" "+o[r].position+"%, ";var a="linear-gradient("+e;return a+=n,a=a.slice(0,-2),a+=")"}function n(e,t){var o;"top left"==e&&(o="top left, "),"top"==e&&(o="top, "),"center"==e&&(o="top, "),"top right"==e&&(o="top right, "),"left"==e&&(o="left, "),"right"==e&&(o="right, "),"bottom left"==e&&(o="bottom left, "),"bottom"==e&&(o="bottom, "),"bottom right"==e&&(o="bottom right, ");for(var n="",r=0;r<t.length;r++)n+=t[r].color+" "+t[r].position+"%, ";var a="-moz-linear-gradient("+o;return a+=n,a=a.slice(0,-2),a+=")"}function r(e,t){var o;"top left"==e&&(o="left top, right bottom, "),"top"==e&&(o="left top, left bottom, "),"center"==e&&(o="left top, left bottom, "),"top right"==e&&(o="right top, left bottom, "),"left"==e&&(o="left top, right top, "),"right"==e&&(o="right top, left top, "),"bottom left"==e&&(o="left bottom, right top, "),"bottom"==e&&(o="left bottom, left top, "),"bottom right"==e&&(o="right bottom, left top, ");for(var n="",r=0;r<t.length;r++)n+="color-stop("+t[r].position+", "+t[r].color+"), ";var a="-webkit-gradient(linear, "+o;return a+=n,a=a.slice(0,-2),a+=")"}function a(e,t,o){var n;"top left"==e&&(n="left top"),"top center"==e&&(n="center top"),"top right"==e&&(n="right top"),"middle left"==e&&(n="left center"),"middle center"==e&&(n="center"),"center"==e&&(n="center"),"middle right"==e&&(n="right center"),"bottom left"==e&&(n="left bottom"),"bottom center"==e&&(n="center bottom"),"bottom right"==e&&(n="right bottom");for(var r="",a=0;a<t.length;a++)r+=t[a].color+" "+t[a].position+"%, ";dispInputSize=o.toString().toLowerCase();var i="-moz-radial-gradient("+n+", "+c+" "+dispInputSize+", ";return i+=r,i=i.slice(0,-2),i+=")"}function i(e,t,o){var n;"top left"==e&&(n="at left top"),"top center"==e&&(n="at center top"),"top right"==e&&(n="at right top"),"middle left"==e&&(n="at left center"),"middle center"==e&&(n="at center"),"center"==e&&(n="at center"),"middle right"==e&&(n="at right center"),"bottom left"==e&&(n="at left bottom"),"bottom center"==e&&(n="at center bottom"),"bottom right"==e&&(n="at right bottom");for(var r="",a=0;a<t.length;a++)r+=t[a].color+" "+t[a].position+"%, ";dispInputSize=o.toString().toLowerCase();var i="radial-gradient("+c+" "+dispInputSize+" "+n+", ";return i+=r,i=i.slice(0,-2),i+=")"}function l(e,t){var o;"top left"==e&&(o="left top"),"top center"==e&&(o="center top"),"top right"==e&&(o="right top"),"middle left"==e&&(o="left center"),"middle center"==e&&(o="center center"),"center"==e&&(o="center center"),"middle right"==e&&(o="right center"),"bottom left"==e&&(o="left bottom"),"bottom center"==e&&(o="center bottom"),"bottom right"==e&&(o="right bottom");for(var n="",r=0;r<t.length;r++)n+="color-stop("+t[r].position+", "+t[r].color+"), ";var a="-webkit-gradient(radial, "+o+", 0, "+o+", 100, ";return a+=n,a=a.slice(0,-2),a+=")"}function d(e,t,d,c){if("linear"==e)w3c=o(t,d),gecko=n(t,d),oldwebkit=r(t,d),newwebkit=gecko.replace("-moz-","-webkit-"),opera=gecko.replace("-moz-","-o-"),ms=gecko.replace("-moz-","-ms-");else{if("radial"!=e)return"";gecko=a(t,d,c),w3c=i(t,d,c),oldwebkit=l(t,d,c),newwebkit=gecko.replace("-moz-","-webkit-"),opera=gecko.replace("-moz-","-o-"),ms=gecko.replace("-moz-","-ms-")}return markup="",markup+="background:"+ms+";",markup+="background:"+gecko+";",markup+="background:"+opera+";",markup+="background:"+oldwebkit+";",markup+="background:"+newwebkit+";",markup+="background:"+w3c+";",markup+=s(),markup}var c="ellipse",s=function(){return"-webkit-background-clip:text;-webkit-text-fill-color:transparent;"};return{getMarkup:d}}(jQuery),Rexlive_Page_Margins=function(e){"use strict";var t,o,n,r=function(){var e=t.$separatorContext.filter(":checked").val(),n=parseInt(t.$separatorValsTop.filter("[data-context="+e+"]").val());return"undefined"!=typeof e&&{context:e,vals:{top:isNaN(n)?o.top:n}}},a=function(){var e=r();if(!1!==e){var t={eventName:"rexlive:set_container_margins",data_to_send:{distances:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),_(e)}},i=function(t){t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},l=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),a())})},d=function(){i(t.$separatorValsTop),l(t.$separatorValsTop)},c=function(e){return n.context!==e.context||n.vals.top!==e.vals.top},s=function(){t.$separatorContext.filter("global").prop("checked",!0),t.$separatorValsTop.val("");var e=Rexbuilder_Util_Admin_Editor.$page_global_settings.text(),o=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(),a="global";if(""!==o){var i=JSON.parse(o);"undefined"!=typeof i.container_distancer&&"undefined"!=typeof i.container_distancer.top&&""!==i.container_distancer.top&&(a="custom",t.$separatorValsTop.filter("[data-context=custom]").val(i.container_distancer.top))}if(""!==e){var l=JSON.parse(e);"undefined"!=typeof l.container_distancer&&"undefined"!=typeof l.container_distancer.top&&""!==l.container_distancer.top&&(a=""==a?"global":a,t.$separatorValsTop.filter("[data-context=global]").val(l.container_distancer.top))}t.$separatorContext.filter("[value="+a+"]").prop("checked",!0),n=r()},_=function(e){switch(e.context){case"global":var t=Rexbuilder_Util_Admin_Editor.$page_global_settings.text();if(""!==t&&"[]"!==t){var o=JSON.parse(t);o.container_distancer.top=e.vals.top}else var o={container_distancer:{top:e.vals.top}};Rexbuilder_Util_Admin_Editor.$page_global_settings.text(JSON.stringify(o));var n=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text();if(""!==n){var r=JSON.parse(n);r.container_distancer.top=""}else var r={container_distancer:{top:""}};Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(r));break;case"custom":var n=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text();if(""!==n){var r=JSON.parse(n);r.container_distancer.top=e.vals.top}else var r={container_distancer:{top:e.vals.top}};Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(r))}},u=function(){var t=r(),o=c(t);!1!==t&&o&&e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_container_margins",nonce_param:live_editor_obj.rexnonce,pageID:e("#post_ID").val(),container_margins:t},success:function(){},error:function(){},complete:function(){}}),a()},p=function(e){var a=e;t={$self:a,$separatorContext:a.find("input[name=container-distancer]"),$separatorValsTop:a.find("input[name=container-distancer--mtop]"),$container_separator_top:a.find("#margin-rexlive-content"),$applyAllCheckBox:a.find("margin-rexlive-all-pages"),selected_margins:""},o={top:0,right:0,bottom:0,left:0},n=r(),d()};return{init:p,applyData:u,getData:s}}(jQuery),Rexlive_Page_Settings_Modal=function(e){"use strict";var t,o=function(){Rexlive_Modals_Utils.openModal(t.$modal),l()},n=function(){Rexlive_Modals_Utils.closeModal(t.$modal)},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),n()}),t.$modal.on("rexlive:this_modal_closed",function(e){i()})},a=function(){Rexlive_Page_Margins.init(t.$self)},i=function(){Rexlive_Page_Margins.applyData()},l=function(){Rexlive_Page_Margins.getData()},d=function(){var o=e("#rex-page-settings-modal");t={$self:o,$modal:o.parent(".rex-modal-wrap"),$close_button:o.find(".rex-modal__close-button"),$save_button:o.find(".rex-modal__save-button")},a(),r()};return{init:d,open:o}}(jQuery);!function(){"use strict";var e=function(){Rexlive_Base_Settings.init(),Rexlive_Color_Palette.init(),Rexlive_Overlay_Palette.init(),Rexbuilder_Util_Admin_Editor.init(),Change_UpdateVideoInline_Modal.init(),Rexlive_Modals_Utils.init(),Rexlive_Modals.init(),Rexlive_RexSlider_TextEditor.init(),Rexbuilder_RexSlider.init()},t=function(e){if(0==Rexbuilder_Util_Admin_Editor.pageSaved){e.preventDefault();var t="o/";return(e||window.event).returnValue=t,console.log("WARNING: Before closing the page verify that you have saved the changes."),t}};document.addEventListener("DOMContentLoaded",e),window.addEventListener("beforeunload",t)}();