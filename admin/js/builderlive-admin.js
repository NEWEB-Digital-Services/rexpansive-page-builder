var Rexlive_MediaUploader=function(e){"use strict";function t(e){if(setUserSetting("imgsize","full"),d)return d.state("insert-image").set("liveTarget",e.sectionTarget),d.state("insert-image").set("eventName",e.returnEventName),void d.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),liveTarget:e.sectionTarget,eventName:e.returnEventName,type:"image"},wp.media.controller.Library.prototype.defaults)});d=wp.media({button:{text:"Select"},state:"insert-image",states:[new t]}),d.on("open",function(){var e=d.state("insert-image").get("selection");e.each(function(t){if("undefined"!=typeof t){var i=wp.media.attachment(t.attributes.id);i.fetch(),e.remove(i?[i]:[])}})}),d.on("close",function(){setUserSetting("imgsize","full")}),d.on("select",function(){var t=d.state("insert-image"),i=t.get("liveTarget"),o=t.get("eventName"),a=t.get("selection"),n={eventName:o,data_to_send:{info:e,media:[],sectionTarget:i}};a&&(a.each(function(e){var i=t.display(e).toJSON(),o=e.toJSON();wp.media.view.settings.captions||delete o.caption,i=wp.media.string.props(i,o);var a={media_info:o,display_info:i};n.data_to_send.media.push(a)}),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n))}),d.open()}function i(e){if(setUserSetting("imgsize","undefined"!=typeof e.imageSize&&""!==e.imageSize?e.imageSize:"full"),c)return c.state("live-image").set("liveTarget",e.sectionTarget).set("selected_image",e.idImage).set("eventName",e.returnEventName).set("data_to_send",e.data_to_send),void c.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image",title:"Edit Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),liveTarget:e.sectionTarget,eventName:e.returnEventName,data_to_send:e.data_to_send,selected_image:e.idImage,type:"image"},wp.media.controller.Library.prototype.defaults)});c=wp.media({button:{text:"Select"},state:"live-image",states:[new t]}),c.on("open",function(){var e,t=c.state("live-image").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var i=c.state("live-image").get("selected_image");c.state("live-image").get("data_to_send");i&&(e=wp.media.attachment(i),e.fetch(),t.add(e?[e]:[]))}),c.on("select",function(){var e=c.state("live-image"),t=e.get("liveTarget"),i=e.get("eventName"),o=e.get("data_to_send"),a=e.get("selection"),n={eventName:i,data_to_send:{sectionTarget:t,target:t}};a&&(a.each(function(t){var i=e.display(t).toJSON(),a=t.toJSON();wp.media.view.settings.captions||delete a.caption,i=wp.media.string.props(i,a),n.data_to_send.idImage=a.id,n.data_to_send.urlImage=i.src,n.data_to_send.image_size=i.size,n.data_to_send.width=i.width,n.data_to_send.height=i.height,"undefined"!=typeof o.photoswipe&&(n.data_to_send.photoswipe=o.photoswipe),"undefined"!=typeof o.active&&(n.data_to_send.active=o.active),"undefined"!=typeof o.typeBGimage&&(n.data_to_send.typeBGimage=o.typeBGimage)}),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:n.data_to_send.active,image_bg_section:n.data_to_send.urlImage,id_image_bg_section:n.data_to_send.idImage}),Rexbuilder_Util_Admin_Editor.updateBkgrImgTool(),n.data_to_send.tools=o.tools,Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n))}),c.on("close",function(){setUserSetting("imgsize","full")}),c.open()}function o(e){if(setUserSetting("imgsize","full"),u)return u.state("me-image").set("inlineImgData",e),void u.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"me-image",title:"Insert Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",inlineImgData:e},wp.media.controller.Library.prototype.defaults)});u=wp.media({button:{text:"Select"},state:"me-image",states:[new t]}),u.on("select",function(){var e=u.state("me-image"),t=e.get("inlineImgData"),i=e.get("selection"),o={},a={};if(i){i.each(function(i){var n=e.display(i).toJSON(),r=i.toJSON();wp.media.view.settings.captions||delete r.caption,n=wp.media.string.props(n,r),a=n,o.idImage=r.id,o.urlImage=n.src,"undefined"==typeof t.width?o.width=n.width:o.width="string"==typeof t?t.width.replace("px",""):t.width,"undefined"==typeof t.height?o.height=n.height:o.height="string"==typeof t?t.height.replace("px",""):t.height,"undefined"==typeof t.align?o.align="alignnone":o.align=t.align,"undefined"!=typeof t.imgInsideLink&&!0===t.imgInsideLink?a.previousLink=!0:a.previousLink=!1});var n={eventName:"rexlive:inlineImageEdit",data_to_send:{imgData:o,displayData:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)}}),u.on("close",function(){setUserSetting("imgsize","full")}),u.on("open",function(){var e,t=u.state("me-image").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var i=u.state("me-image").get("inlineImgData"),o=null;"undefined"!=typeof i&&(o="undefined"!=typeof i.image_id?i.image_id:null),o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[]))}),u.open()}function a(e,t,i){if(setUserSetting("imgsize","full"),i="undefined"!=typeof i?i:null,s)return s.state("upload-image-bg").set("$data",e),s.state("upload-image-bg").set("$preview",t),s.state("upload-image-bg").set("image_id",i),void s.open();var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-image-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:i},wp.media.controller.Library.prototype.defaults)});s=wp.media({button:{text:"Select"},state:"upload-image-bg",states:[new o]}),s.on("close",function(){setUserSetting("imgsize","full");var t=s.state("upload-image-bg").get("selection");0==t.length&&e.val()}),s.on("select",function(){var e=s.state("upload-image-bg"),t=e.get("selection");t&&t.each(function(t){var i=e.display(t).toJSON(),o=t.toJSON();wp.media.view.settings.captions||delete o.caption,i=wp.media.string.props(i,o);var a=s.state("upload-image-bg").get("$data");a.val(o.id),a.attr("data-rex-image-bg-url",i.src),a.attr("data-rex-image-width",i.width),a.attr("data-rex-image-height",i.height),s.state("upload-image-bg").get("$preview").css("backgroundImage","url("+o.url+")"),s.state("upload-image-bg").get("$preview").children().css("display","none"),0!=a.parents("#rex-edit-background-section").length?Background_Section_Image_Modal.updateImageBackground():0!=a.parents("#block-edit-image-bg").length?Background_Block_Image_Modal.updateImageBackground():0!=a.parents("#block-edit-image-setting-bg").length&&Background_Block_Image_Setting.updateImageBackground()})}),s.on("open",function(){var e,t=s.state("upload-image-bg").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var i=s.state("upload-image-bg").get("image_id");i&&(e=wp.media.attachment(i),e.fetch(),t.add(e?[e]:[]))}),s.open()}function n(e){if(p)return void p.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-video",title:"Insert Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"video"}),type:"video"},wp.media.controller.Library.prototype.defaults)});p=wp.media({button:{text:"Select"},state:"insert-video",states:[new t]}),p.on("close",function(){}),p.on("select",function(){var e=p.state("insert-video"),t=e.get("selection"),i=[];t&&(t.each(function(t){var o={videoID:-1,videoUrl:"",width:"",height:""},a=e.display(t).toJSON(),n=t.toJSON();wp.media.view.settings.captions||delete n.caption,a=wp.media.string.props(a,n),o.videoID=n.id,o.videoUrl=n.url,o.width=n.width,o.height=n.height,i.push(o)}),Insert_Video_Modal.updateMp4VideoModal(i))}),p.on("open",function(){var e=p.state("insert-video").get("selection");e.each(function(t){if("undefined"!=typeof t){var i=wp.media.attachment(t.attributes.id);i.fetch(),e.remove(i?[i]:[])}})}),p.open()}function r(e,t){if(t="undefined"!=typeof t?t:null,m)return m.state("upload-video-bg").set("$data",e),m.state("upload-video-bg").set("video_id",t),void m.open();var i=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-video-bg",title:"Select Background Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:e,video_id:t},wp.media.controller.Library.prototype.defaults)});m=wp.media({button:{text:"Select"},state:"upload-video-bg",states:[new i]}),m.on("close",function(){var t=m.state("upload-video-bg").get("selection");0==t.length&&e.val()}),m.on("select",function(){var e=m.state("upload-video-bg"),t=e.get("selection");t&&t.each(function(t){var i=e.display(t).toJSON(),o=t.toJSON();wp.media.view.settings.captions||delete o.caption,i=wp.media.string.props(i,o);var a=m.state("upload-video-bg").get("$data");a.val(o.id),a.attr("data-rex-video-bg-url",o.url),a.attr("data-rex-video-bg-width",o.width),a.attr("data-rex-video-bg-height",o.height),0!=a.parents("#video-section-editor-wrapper").length?(Section_Video_Background_Modal.updateVideoBackground(),Section_Video_Background_Modal.updateVideoMp4Link(o.url)):0!=a.parents("#video-block-editor-wrapper").length&&(Block_Video_Background_Modal.updateVideoBackground(),Block_Video_Background_Modal.updateVideoMp4Link(o.url))})}),m.on("open",function(){var e,t=m.state("upload-video-bg").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var i=m.state("upload-video-bg").get("video_id");i&&(e=wp.media.attachment(i),e.fetch(),t.add(e?[e]:[]))}),m.open()}function l(e){if(v)return v.state("accordion-gallery").set("gallery_data",e),void v.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"accordion-gallery",title:"Accordion Gallery",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!0,library:wp.media.query({type:"image"}),type:"image",gallery_data:e},wp.media.controller.Library.prototype.defaults)});v=wp.media({button:{text:"Select"},state:"accordion-gallery",states:[new t]}),v.on("close",function(){}),v.on("select",function(){var e=v.state("accordion-gallery"),t=e.get("selection");if(t){var i=v.state("accordion-gallery").get("gallery_data");i.modal_info.$accordion_preview_gallery.empty(),t.each(function(t){var o=e.display(t).toJSON(),a=t.toJSON();wp.media.view.settings.captions||delete a.caption;var n=wp.media.string.props(o,a);i.modal_info.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:a.id,preview:a.url,url:n.src,size:n.size}))})}}),v.on("open",function(){var e,t=v.state("accordion-gallery").get("selection");t.each(function(i){"undefined"!=typeof i&&(e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[]))});var i=v.state("accordion-gallery").get("gallery_data");if(i.image_info.length>0)for(var o=0;o<i.image_info.length;o++)e=wp.media.attachment(i.image_info[o].id),e.fetch(),t.add(e?[e]:[])}),v.open()}var d,s,c,u,p,m,v;return{openInsertImageBlocksMediaUploader:t,openEditImageMediaUploader:a,openImageLiveMediaUploader:i,openImageMEMediaUploader:o,openInsertVideoBlocksMediaUploader:n,openMediaUploaderVideo:r,openMediaUploaderAccordionGallery:l}}(jQuery),Rexlive_RexSlider_TextEditor=function(e){"use strict";var t,i,o,a,n,r=function(t,o,a,r){a="undefined"!=typeof a&&a,r="undefined"!=typeof r?r:[];var l=tinyMCE.get("rexbuilder_editor");"undefined"!=typeof t&&null!==t&&n.val(t),"undefined"==typeof l||null===l?(e("#rexbuilder_editor").val(o),e("#rexbuilder_editor").text(o)):(l.setContent(o),l.save({no_events:!0})),Rexlive_Modals_Utils.openModal(i,a,r)},l=function(){o.on("click",function(e){e.preventDefault(),n.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"]),tinyMCE.triggerSave()}),a.on("click",function(e){e.preventDefault(),a.val(""),n.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"])}),n.on("click",function(t){t.preventDefault(),"new-block"==a.val()&&(Rexpansive_Builder_Admin_Utilities.createNewTextBlock(),Rexpansive_Builder_Admin_Utilities.launchTooltips()),tinyMCE.triggerSave();var o=(tinyMCE.get("rexbuilder_editor"),e("#rexbuilder_editor")),n=o.val(),r=e(e(this).val()),l=r.attr("data-block_type");switch(l){case"image":r.find(".element-preview .backend-image-preview").empty().append(n.replace(/'/gi,"’"));break;case"slide":r.find("textarea[name=rex-slider--slide-text]").text(n.replace(/'/gi,"’")),""!=n?r.find(".rex-slider__slide-edit[value=text]").addClass("rex-slider__slide-edit__field-active-notice"):r.find(".rex-slider__slide-edit[value=text]").removeClass("rex-slider__slide-edit__field-active-notice");break;case"empty":r.attr("data-block_type","text").removeClass("empty").addClass("text").find(".element-preview").empty().append(n.replace(/'/gi,"’"));break;default:r.find(".element-preview").empty().append(n.replace(/'/gi,"’"))}r.find(".data-text-content").text(n.replace(/'/gi,"’")),a.val(""),Rexlive_Modals_Utils.closeModal(i,!1,["hide-padding-position"]),e(document).trigger("rexbuilder:block_content_edit",r)})},d=function(){t=e("#rexeditor-modal"),i=t.parent(".rex-modal-wrap"),o=e("#rexeditor-close"),a=e("#editor-cancel"),n=e("#editor-save")},s=function(){d(),l(),this.$text_editor=t,this.$text_editor_modal_wrap=i};return{init:s,openTextEditor:r}}(jQuery),Rexlive_Ajax_Calls=function(e){"use strict";var t=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success},error:function(e){}})},i=function(t,i){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&"undefined"!=typeof i&&"function"==typeof i.success.callback&&i.success.callback.call(this,i.success.args)},error:function(e){"undefined"!=typeof i&&"function"==typeof i.error.callback&&i.error.callback.call(this,i.error.args)}})},o=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success},error:function(e){}})},a=function(t,i){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_color",nonce_param:live_editor_obj.rexnonce,data:t},success:function(e){e.success&&"undefined"!=typeof i&&"function"==typeof i.success.callback&&i.success.callback.call(this,i.success.args)},error:function(e){"undefined"!=typeof i&&"function"==typeof i.error.callback&&i.error.callback.call(this,i.error.args)}})},n=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(i){i.success&&e(".palette-list__gradient").each(function(i,o){var a=e(o),n=tmpl("tmpl-palette-item",{}),r=e(n);a.find(".palette__add-gradient").before(r),r.css("background",t.gradient_preview),r.attr("data-gradient-id",t.ID),r.attr("data-gradient-value",t.gradient)})},error:function(e){}})},r=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(i){i.success&&e(".palette-list__gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(t,i){e(i).remove()})},error:function(e){}})},l=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_save_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(i){i.success&&e(".palette-list__overlay-gradient").each(function(i,o){var a=e(o),n=tmpl("tmpl-palette-item",{}),r=e(n);a.find(".palette__add-gradient").before(r),r.css("background",t.gradient_preview),r.attr("data-gradient-id",t.ID),r.attr("data-gradient-value",t.gradient)})},error:function(e){}})},d=function(t){e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_palette_overlay_gradient",nonce_param:live_editor_obj.rexnonce,data:t},success:function(i){i.success&&e(".palette-list__overlay-gradient").find(".palette-item[data-gradient-id="+t.ID+"]").each(function(t,i){e(i).remove()})},error:function(e){}})};return{savePaletteColor:t,deletePaletteColor:i,savePaletteOverlayColor:o,deletePaletteOverlayColor:a,savePaletteColorGradient:n,deletePaletteColorGradient:r,savePaletteOverlayGradient:l,deletePaletteOverlayGradient:d}}(jQuery),Rexlive_Color_Palette=function(e){"use strict";var t,i=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object;var i=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(i)},o=function(){t.$container.hide().detach().appendTo(e("#wpwrap")),t.$spicker=null,t.action=null,t.object=null},a=function(){t.$add_color.on("click",function(i){if(i.preventDefault(),null!==t.$spicker){var o=t.$spicker.spectrum("get"),a=Rexbuilder_Util_Admin_Editor.createRandomID(4),n=o.toRgbString(),r={color:n,ID:a};Rexlive_Ajax_Calls.savePaletteColor(r);var l=tmpl("tmpl-palette-item",{}),d=e(l);t.$add_color.before(d),d.css("background",n),d.attr("data-color-id",a),d.attr("data-color-value",n)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-color-value");t&&r(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-color-id"),o={ID:i};Rexlive_Ajax_Calls.deletePaletteColor(o),Rexlive_Color_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowColorPaletteModal()}t.$spicker.spectrum("hide")})},n=function(t){e(t).remove()},r=function(e,i){var i=void 0!==typeof i&&i;""!==e&&(t.$spicker.spectrum("set",e),i&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},l=function(){var i=e(".sp-rex-color-palette");t={$spicker:null,object:null,action:null,$container:i,$add_color:i.find(".palette__add-color"),$palette_list:i.find(".palette-list"),$open_gradient_palette:i.find(".palette__open-gradient")},a()};return{init:l,show:i,hide:o,deletePaletteItem:n}}(jQuery),Rexlive_Overlay_Palette=function(e){"use strict";var t,i=function(e){t.$spicker=e.$target,t.action=e.action,t.object=e.object;var i=t.$spicker.spectrum("container").find(".sp-picker-container");t.$container.show().detach().appendTo(i)},o=function(){t.$container.hide().detach().appendTo(e("#wpwrap")),t.$spicker=null,t.action=null,t.object=null},a=function(){t.$add_color.on("click",function(i){if(i.preventDefault(),null!==t.$spicker){var o=t.$spicker.spectrum("get"),a=Rexbuilder_Util_Admin_Editor.createRandomID(4),n=o.toRgbString(),r={overlay:n,ID:a};Rexlive_Ajax_Calls.savePaletteOverlayColor(r);var l=tmpl("tmpl-palette-item",{}),d=e(l);t.$add_color.before(d),d.css("background",n),d.attr("data-overlay-id",a),d.attr("data-overlay-value",n)}}),t.$container.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-overlay-value");t&&r(t,!0)}),t.$container.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-overlay-id"),o={ID:i};Rexlive_Ajax_Calls.deletePaletteOverlayColor(o),Rexlive_Overlay_Palette.deletePaletteItem(t)}),t.$open_gradient_palette.on("click",function(e){switch(e.preventDefault(),t.object){case"block":break;case"section":Rexbuilder_Util_Admin_Editor.openRowOverlayPaletteModal()}t.$spicker.spectrum("hide")})},n=function(t){e(t).remove()},r=function(e,i){var i=void 0!==typeof i&&i;""!==e&&(t.$spicker.spectrum("set",e),i&&t.$spicker.spectrum("container").find(".sp-input").trigger("change"))},l=function(){var i=e(".sp-rex-color-overlay-palette");t={$spicker:null,object:null,action:null,$container:i,$add_color:i.find(".palette__add-color"),$palette_list:i.find(".palette-list"),$open_gradient_palette:i.find(".palette__open-gradient")},a()};return{init:l,show:i,hide:o,deletePaletteItem:n}}(jQuery),Rexlive_Modals_Utils=function(e){"use strict";var t,i,o,a,n=function(i,o,n,r,s){if(o="undefined"!=typeof o&&o,n="undefined"!=typeof n?n:[],r="undefined"!=typeof r&&r,a=s,o?i.addClass("rex-in--up"):(e("body").addClass("rex-modal-open"),t.show()),i.addClass("rex-modal--active").fadeIn({duration:300}),n.length)for(var c=0;c<n.length;c++)i.find(".rex-modal").addClass(n[c]);r&&d(i.find(".rex-modal"),{x:100,y:0}),l(i.find(".rex-modal"))},r=function(i,o,n){if(o="undefined"!=typeof o&&o,n="undefined"!=typeof n?n:[],o||i.hasClass("rex-in--up")||(e("body").removeClass("rex-modal-open"),t.hide()),i.removeClass("rex-modal--active").fadeOut({duration:300}),i.hasClass("rex-in--up")&&i.removeClass("rex-in--up"),i.children().removeClass("rex-modal__bottom-arrow--active").removeClass("rex-modal__top-arrow--active"),n.length)for(var r=0;r<n.length;r++)i.find(".rex-modal").removeClass(n[r]);var d={$modal:i};Rexlive_Base_Settings.$document.trigger("rexlive:modal_closed",[d]),i.trigger("rexlive:this_modal_closed");var s={eventName:"rexlive:close_modal",blockID:a};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(s),l(i.find(".rex-modal"))},l=function(e){e.css("height","auto"),e.css("width","auto")},d=function(e,t){if("undefined"!=typeof t&&null!==t){var i=e.actual("height");e.css("left",t.x-Rexlive_Base_Settings.viewport().width/2+"px"),i<t.y?(e.addClass("rex-modal__bottom-arrow--active"),e.css("top",t.y-i+o.y+"px")):(e.addClass("rex-modal__top-arrow--active"),e.css("top",t.y+o.y+"px"))}else e.css("left","0px"),e.css("top","50px")},s=function(){Rexlive_Base_Settings.$document.on("click",".rex-modal-wrap",function(t){t.target===this&&r(e(this))}),Rexlive_Base_Settings.$document.on("keydown",function(e){27===e.keyCode&&c()})},c=function(){if(Rexbuilder_Util_Admin_Editor.$body.hasClass("rex-modal-open")){var t=Rexbuilder_Util_Admin_Editor.$body.find(".rex-modal--active");0<t.length&&t.each(function(t,i){r(e(i))})}},u=function(){t=e(".lean-overlay"),i=e(".rex-modal-draggable"),i.each(function(t,i){var o=e(i);o.draggable({cancel:"input,textarea,button,select,option,.rex-check-icon, .input-field, .rex-slider__slide-edit, #rex-css-ace-editor, #rex-html-ace-editor, label, .no-draggable",stop:function(t,i){l(e(this))}})}),o={x:0,y:-20},s()};return{init:u,openModal:n,closeModal:r,resetModalDimensions:l,close_focus_modal:c,positionModal:d}}(jQuery),Insert_Video_Modal=function(e){"use strict";var t,i,o,a=function(e){l(),o=e.sectionTarget,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$radioChooseYoutube.attr("checked",!1),t.$radioChooseVimeo.attr("checked",!1),t.$radioChooseMp4.attr("checked",!1)},l=function(){t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val("").next("label").removeClass("active"),r()},d=function(){t.$youTubeWrap.addClass("selected"),t.$radioChooseYoutube.attr("checked",!0),t.$linkYoutube.trigger("focus")},s=function(){t.$vimeoWrap.addClass("selected"),t.$radioChooseVimeo.attr("checked",!0),t.$linkVimeo.trigger("focus")},c=function(){t.$mp4Wrap.addClass("selected"),t.$radioChooseMp4.attr("checked",!0)},u=function(e){i=e,t.$linkMp4.val(e[0].videoUrl).next("label").addClass("active"),t.$linkMp4.trigger("focus")},_=function(){t.$self.find(".input-field").click(function(t){t.preventDefault(),r();var i=e(t.target);i.is("div")||(i=i.parents(".input-field"));var o=i.attr("data-rex-video-type");switch(o){case"youtube":d();break;case"vimeo":s();break;case"mp4":c()}}),t.$close_modal_btn.click(function(e){e.preventDefault(),n()}),t.$self.find(".set-video-audio-btn").click(function(t){t.preventDefault();var i=e(t.target),o=i.parents(".set-video-audio-btn"),a=o.find(".video-audio-checkbox"),n=a.attr("checked");n=!n,a.attr("checked",n)}),t.$self.find(".rex-video-type-select").click(function(t){t.preventDefault(),r();var i=e(t.target);0!=i.parents(".youtube-insert-wrap").length?d():0!=i.parents(".vimeo-insert-wrap").length?s():0!=i.parents(".mp4-insert-wrap").length&&c()}),t.$self.find("#rex-upload-mp4-video").click(function(e){Rexlive_MediaUploader.openInsertVideoBlocksMediaUploader()}),t.$self.find("#rex-insert-video-block-save").click(function(e){var a,r,l,d,s,c=t.$self.find(".video-insert-wrap.selected");c.hasClass("youtube-insert-wrap")?(a="youtube",r=t.$linkYoutube.val(),s=t.$audioYoutube.attr("checked")):c.hasClass("vimeo-insert-wrap")?(a="vimeo",l=t.$linkVimeo.val(),s=t.$audioVimeo.attr("checked")):c.hasClass("mp4-insert-wrap")&&(a="mp4",d=i,s=t.$audioMp4.attr("checked")),s="undefined"!=typeof s&&"checked"==s;var u={eventName:"rexlive:insert_video",data_to_send:{urlYoutube:r,urlVimeo:l,videoMp4:d,hasAudio:s,typeVideo:a,sectionTarget:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(u),n()})},p=function(){var o=e("#rex-insert-new-video-block");t={$self:o,$close_modal_btn:o.find(".rex-modal__close-button"),$linkYoutube:o.find("#rex-insert-youtube-url"),$linkVimeo:o.find("#rex-insert-vimeo-url"),$linkMp4:o.find("#rex-insert-mp4-url"),$audioYoutube:o.find("#rex-new-block-video-youtube-audio"),$audioVimeo:o.find("#rex-new-block-video-vimeo-audio"),$audioMp4:o.find("#rex-new-block-video-mp4-audio"),$radioChooseYoutube:o.find("#rex-choose-youtube-video"),$radioChooseVimeo:o.find("#rex-choose-vimeo-video"),$radioChooseMp4:o.find("#rex-choose-mp4-video"),$youTubeWrap:o.find("#insert-video-block-wrap-1"),$vimeoWrap:o.find("#insert-video-block-wrap-2"),$mp4Wrap:o.find("#insert-video-block-wrap-3")},i=null,_()};return{init:p,openVideoModal:a,updateMp4VideoModal:u}}(jQuery),LayoutGrid_Modal=function(e){"use strict";var t,i,o=function(e){i=e.sectionTarget,r(e.activeLayout)},a=function(){n()},n=function(){t.$section_layout_typeWrap.each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)})},r=function(e){t.$choose_layout.prop("checked","fixed"==e)},l=function(){var e=t.$choose_layout.prop("checked"),i={layout:1==e?"fixed":"masonry"};return i},d=function(){var e=l();Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.layout}),Rexbuilder_Util_Admin_Editor.updateLayoutTool(),Rexbuilder_Util_Admin_Editor.updateLayoutCheckboxTool();var t={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:i,layout:e.layout}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},s=function(){Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-layout-type",function(t){t.preventDefault(),n();var i=e(t.target).parents(".rexlive-layout-type");i.addClass("selected"),i.find("input").attr("checked",!0),d()}),t.$choose_layout.on("change",function(e){d()})},c=function(e){t={$section_layout_typeWrap:e.find(".rexlive-layout-type"),$section_layout_types_wrap:e.find(".rex-edit-layout-wrap"),$choose_layout:e.find(".builder-edit-row-layout-checkbox")},s()};return{init:c,getData:l,updateLayoutModal:o,clearLayoutModal:a}}(jQuery),Section_Width_Modal=function(e){"use strict";var t,i,o,a,n=function(){i.dimension="",i.sectionWidth="",i.widthType=""},r=function(e){l(),a=e.sectionTarget;var o=e.dimension,n=e.section_width,r="%",d="100";"full"!=o&&(d=parseInt(n),n.indexOf("%")==-1&&(r="px")),i.type=o,i.sectionWidth=d,i.dimension=r,t.$section_boxed_width_input.val(d);var s=t.$section_width_type.children('[data-rex-section-width="'+o+'"]');s.addClass("selected"),s.find("input").attr("checked",!0);var c=t.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+r+'"]');c.addClass("selected"),c.find("input").attr("checked",!0)},l=function(){t.$section_width_type_wrap.each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)}),t.$section_boxed_width_input.val("")},d=function(){t.$section_boxed_width_wrap.children().each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)})},s=function(e){d(),t.$section_boxed_width_input.val(e.sectionWidth);var i=t.$section_boxed_width_wrap.children('[data-rex-section-width-type="'+e.dimension+'"]');i.addClass("selected"),i.find("input").attr("checked",!0)},c=function(){var e=t.$section_boxed_width_input.val(),i=t.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type");return{width:e,type:i}},u=function(){var e=t.$section_boxed_width_input.val(),i=t.$section_boxed_width_wrap.children(".selected").attr("data-rex-section-width-type");Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e+i,dimension:"100%"===e+i?"full":"boxed"}),Rexbuilder_Util_Admin_Editor.updateWidthTool();var o={eventName:"rexlive:set_section_width",data_to_send:{sectionWidth:{width:e,type:i},sectionTarget:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o)},_=function(t){t.keydown(function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(Math.max(isNaN(parseInt(i.val()))?0:parseInt(i.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&i.blur()))})},p=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),u())})},m=function(){Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .boxed-width-type-wrap",function(i){i.preventDefault();var a="full"==t.$section_width_type.children(".selected").attr("data-rex-section-width");d();var n=e(i.target).parents(".boxed-width-type-wrap");if(n.addClass("selected"),n.find("input").attr("checked",!0),a&&"px"==n.attr("data-rex-section-width-type")){l();var r=t.$section_width_type.children('[data-rex-section-width="boxed"]');r.addClass("selected"),r.find("input").attr("checked",!0),t.$section_boxed_width_input.val(o.boxed.sectionWidth)}u()}),Rexlive_Base_Settings.$document.on("click","#modal-background-responsive-set .rexlive-section-width",function(t){t.preventDefault(),l();var a=e(t.target).parents(".rexlive-section-width");a.addClass("selected"),a.find("input").attr("checked",!0);var n=a.attr("data-rex-section-width");s(n!=i.type?"boxed"==n?o.boxed:o.full:i),u()}),p(t.$section_boxed_width_input),_(t.$section_boxed_width_input)},v=function(e){var a=e.find(".section-width-wrapper");t={$self:a,$section_width_type_wrap:a.find(".rexlive-section-width"),$section_width_type:a.find(".rex-edit-row-width"),$section_full:a.find("#section-full-modal"),$section_boxed:a.find("#section-boxed-modal"),$section_boxed_width_input:a.find(".section-set-boxed-width"),$section_boxed_width_type:a.find(".section-width-type"),$section_boxed_width_wrap:a.find(".section-set-boxed-width-wrap")},o={boxed:{type:"boxed",dimension:"%",sectionWidth:"80"},full:{type:"full",dimension:"%",sectionWidth:"100"}},i={dimension:"",sectionWidth:"",widthType:""},m()};return{init:v,resetOldWidthData:n,getData:c,clearSectionWidth:l,updateSectionWidth:r,applySectionWidth:u}}(jQuery),GridSeparators_Modal=function(e){"use strict";var t,i,o,a=function(){t.$block_gutter.val(i.gutter),t.$row_separator_top.val(i.top),t.$row_separator_right.val(i.right),t.$row_separator_bottom.val(i.bottom),t.$row_separator_left.val(i.left)},n=function(e){o=e.sectionTarget;var a=e.rowDistances,n=isNaN(a.gutter)?i.gutter:a.gutter,r=isNaN(a.top)?i.top:a.top,l=isNaN(a.right)?i.right:a.right,d=isNaN(a.bottom)?i.bottom:a.bottom,s=isNaN(a.left)?i.left:a.left;t.$block_gutter.val(n),t.$row_separator_top.val(r),t.$row_separator_right.val(l),t.$row_separator_bottom.val(d),t.$row_separator_left.val(s)},r=function(){
var e=parseInt(t.$block_gutter.val()),o=parseInt(t.$row_separator_top.val()),a=parseInt(t.$row_separator_right.val()),n=parseInt(t.$row_separator_bottom.val()),r=parseInt(t.$row_separator_left.val()),l={gutter:isNaN(e)?i.gutter:e,top:isNaN(o)?i.top:o,right:isNaN(a)?i.right:a,bottom:isNaN(n)?i.bottom:n,left:isNaN(r)?i.left:r};return l},l=function(){var e=r();Rexbuilder_Util_Admin_Editor.highlightRowSetData({block_distance:e.gutter,row_separator_top:e.top,row_separator_right:e.right,row_separator_bottom:e.bottom,row_separator_left:e.left});var t={eventName:"rexlive:set_row_separatos",data_to_send:{distances:r(),sectionTarget:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(t){t.keydown(function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(Math.max(isNaN(parseInt(i.val()))?0:parseInt(i.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&i.blur()))})},s=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),l())})},c=function(){d(t.$block_gutter),d(t.$row_separator_top),d(t.$row_separator_right),d(t.$row_separator_bottom),d(t.$row_separator_left),s(t.$block_gutter),s(t.$row_separator_top),s(t.$row_separator_right),s(t.$row_separator_bottom),s(t.$row_separator_left)},u=function(e){var o=e;t={$self:o,$block_gutter:o.find(".section-set-block-gutter"),$row_separator_top:o.find("#row-separator-top"),$row_separator_right:o.find("#row-separator-right"),$row_separator_bottom:o.find("#row-separator-bottom"),$row_separator_left:o.find("#row-separator-left")},i={gutter:20,top:20,right:20,bottom:20,left:20},a(),c()};return{init:u,updateDistances:n,resetDistances:a,getData:r}}(jQuery),SectionMargins_Modal=function(e){"use strict";var t,i,o,a=function(){t.$row_margin_top.val(i.top),t.$row_margin_right.val(i.right),t.$row_margin_bottom.val(i.bottom),t.$row_margin_left.val(i.left)},n=function(e){o=e.sectionTarget;var a=e.marginsSection,n=isNaN(a.top)?i.top:a.top,r=isNaN(a.right)?i.right:a.right,l=isNaN(a.bottom)?i.bottom:a.bottom,d=isNaN(a.left)?i.left:a.left;t.$row_margin_top.val(n),t.$row_margin_right.val(r),t.$row_margin_bottom.val(l),t.$row_margin_left.val(d)},r=function(){var e=parseInt(t.$row_margin_top.val()),o=parseInt(t.$row_margin_right.val()),a=parseInt(t.$row_margin_bottom.val()),n=parseInt(t.$row_margin_left.val()),r={top:isNaN(e)?i.top:e,right:isNaN(o)?i.right:o,bottom:isNaN(a)?i.bottom:a,left:isNaN(n)?i.left:n};return r},l=function(){var e=r();Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_margin_top:e.top,row_margin_bottom:e.bottom,row_margin_right:e.right,row_margin_left:e.left});var t={eventName:"rexlive:set_section_margins",data_to_send:{margins:e,sectionTarget:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(t){t.keydown(function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val()-1))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&i.blur()))})},s=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),l())})},c=function(){d(t.$row_margin_top),d(t.$row_margin_right),d(t.$row_margin_bottom),d(t.$row_margin_left),s(t.$row_margin_top),s(t.$row_margin_right),s(t.$row_margin_bottom),s(t.$row_margin_left)},u=function(e){t={$row_margin_top:e.find("#row-margin-top"),$row_margin_right:e.find("#row-margin-right"),$row_margin_bottom:e.find("#row-margin-bottom"),$row_margin_left:e.find("#row-margin-left")},i={top:0,right:0,bottom:0,left:0},a(),c()};return{init:u,updateMargins:n,resetMargins:a,getData:r}}(jQuery),PhotoSwipe_Modal=function(e){"use strict";var t,i,o,a=function(){t.$section_active_photoswipe.attr("checked",i)},n=function(e){o=e.sectionTarget,t.$section_active_photoswipe.attr("checked",e.photoswipe)},r=function(){var e=!0===t.$section_active_photoswipe.prop("checked")?"true":"false";return e},l=function(){var e=r();Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_active_photoswipe:e});var t={eventName:"rexlive:set_row_photoswipe",data_to_send:{sectionTarget:o,photoswipe:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$section_active_photoswipe.click(function(e){l()})},s=function(e){t={$section_active_photoswipe:e.find("#section-active-photoswipe")},i=!1,a(),d()};return{init:s,updatePhotoswipe:n,resetPhotoswipe:a,getData:r}}(jQuery),Hold_Grid_Modal=function(e){"use strict";var t,i,o,a=function(){t.$element.attr("checked",i)},n=function(e){o=e.sectionTarget;var i=!1;-1!==e.customClasses.indexOf("rex-block-grid")&&(i=!0),t.$element.attr("checked",i)},r=function(){return t.$element.prop("checked")},l=function(){var e=r(),t=Section_CustomClasses_Modal.getData(),i={sectionTarget:o,customClasses:""};e?i.customClasses=t+" rex-block-grid":(t=t.replace(/\s*rex-block-grid/,""),i.customClasses=t),i.customClasses=i.customClasses.trim(),Section_CustomClasses_Modal.update(i),Section_CustomClasses_Modal.apply()},d=function(){t.$element.click(l)},s=function(e){t={$element:e.find("#rx-hold-grid")},i=!1,a(),d()};return{init:s,getData:r,update:n,reset:a}}(jQuery),FullHeight_Modal=function(e){"use strict";var t,i,o,a=function(){t.$is_full.prop("checked",i)},n=function(e){o=e.sectionTarget,t.$is_full.prop("checked","true"==e.fullHeight)},r=function(){var e=!0===t.$is_full.prop("checked")?"true":"false";return e},l=function(){var e=r();Rexbuilder_Util_Admin_Editor.highlightRowSetData({full_height:e});var t={eventName:"rexlive:set_row_fullHeight",data_to_send:{sectionTarget:o,fullHeight:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$is_full.click(function(){l()})},s=function(e){t={$is_full:e.find("#section-is-full")},i=!1,a(),d()};return{init:s,updateFullHeight:n,resetFullHeight:a}}(jQuery),SectionName_Modal=function(e){"use strict";var t,i,o,a=function(){t.$section_id.val(i)},n=function(e){o=e.sectionTarget,t.$section_id.val(e.sectionName),""!=e.sectionName?t.$section_id.focus():t.$section_id.blur()},r=function(){var e=t.$section_id.val();return e},l=function(){var e=r();Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_name:e});var t={eventName:"rexlive:change_section_name",data_to_send:{sectionTarget:o,sectionName:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},d=function(){t.$section_id.keyup(function(e){l()})},s=function(e){t={$section_id:e.find("#sectionid-container")},i="",a(),d()};return{init:s,updateSectionName:n,resetSectionName:a,getData:r}}(jQuery),Rexlive_Top_Tools=function(e){"use strict";var t,i=function(){t=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-toolbox__toggle-wrap .close-toolbox")},o=function(){t.on("click",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.toggleClass("toolbox--closed")})},a=function(){i(),o()};return{init:a}}(jQuery),Section_CustomClasses_Modal=function(e){"use strict";var t,i,o,a,n=function(){},r=function(e){a=e.sectionTarget;var i=e.customClasses;o="",i.indexOf("active-large-overlay")!==-1&&(o+=" active-large-overlay",i=i.replace("active-large-overlay","")),i.indexOf("active-medium-overlay")!==-1&&(o+=" active-medium-overlay",i=i.replace("active-medium-overlay","")),i.indexOf("active-small-overlay")!==-1&&(o+=" active-small-overlay",i=i.replace("active-small-overlay","")),i.indexOf("rex-block-grid")!==-1&&(o+=" rex-block-grid",i=i.replace("rex-block-grid","")),""==i?t.$classes.siblings("label, .prefix").removeClass("active"):t.$classes.siblings("label, .prefix").addClass("active"),t.$classes.val(i)},l=function(){var e=d();e=e.trim();var t=e.split(/\s+/);Rexbuilder_Util_Admin_Editor.highlightRowSetData({custom_classes:t});var i={eventName:"rexlive:apply_section_custom_classes",data_to_send:{sectionTarget:a,customClasses:t}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)},d=function(){var e=t.$classes.val();return e+=o},s=function(){t.$classes.blur(l)},c=function(e){t={$classes:e.find("#section-set-custom-class")},i="",n(),s()};return{init:c,getData:d,update:r,reset:n,apply:l}}(jQuery),Section_Modal=function(e){"use strict";var t,i=function(e,i){a(),n(e),Rexlive_Modals_Utils.positionModal(t.$self,i),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},o=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap")),setTimeout(function(){a()},300)},a=function(){LayoutGrid_Modal.clearLayoutModal(),Section_Width_Modal.clearSectionWidth(),GridSeparators_Modal.resetDistances(),SectionMargins_Modal.resetMargins(),PhotoSwipe_Modal.resetPhotoswipe(),Hold_Grid_Modal.reset(),FullHeight_Modal.resetFullHeight(),SectionName_Modal.resetSectionName(),Section_CustomClasses_Modal.reset()},n=function(e){LayoutGrid_Modal.updateLayoutModal(e),Section_Width_Modal.updateSectionWidth(e),GridSeparators_Modal.updateDistances(e),SectionMargins_Modal.updateMargins(e),PhotoSwipe_Modal.updatePhotoswipe(e),Hold_Grid_Modal.update(e),FullHeight_Modal.updateFullHeight(e),SectionName_Modal.updateSectionName(e),Section_CustomClasses_Modal.update(e)},r=function(){t.$close_button.click(function(e){e.preventDefault(),o()})},l=function(){var i=e("#modal-background-responsive-set");t={$self:i,$close_button:i.find(".rex-modal__close-button")},r(),LayoutGrid_Modal.init(i),Section_Width_Modal.init(i),GridSeparators_Modal.init(i),SectionMargins_Modal.init(i),PhotoSwipe_Modal.init(i),Hold_Grid_Modal.init(i),FullHeight_Modal.init(i),SectionName_Modal.init(i),Section_CustomClasses_Modal.init(i)};return{init:l,openSectionModal:i}}(jQuery),Background_Section_Color_Modal=function(e){"use strict";var t,i,o,a,n,r=function(e){a=e.sectionTarget,n.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(t.$color_runtime_value.val(e.color),t.$color_preview_icon.hide(),t.$color_value.spectrum("set",e.color)):(t.$color_runtime_value.val(""),t.$color_preview_icon.show(),t.$color_value.spectrum("set","")),i=e.color,o="true"==e.active.toString(),o?t.$color_active.prop("checked",!0):t.$color_active.prop("checked",!1)},l=function(){var e=!0===t.$color_active.prop("checked");o=e;var n={eventName:"rexlive:apply_background_color_section",data_to_send:{color:o?i:"",active:o,sectionTarget:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},d=function(){n={eventName:"rexlive:change_section_bg_color",data_to_send:{color:null,sectionTarget:{}}};var a;t.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){a=!1},move:function(e){t.$color_preview_icon.hide(),n.data_to_send.color=o?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n),a=!0},change:function(e){t.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){a&&(i=e.toRgbString()),t.$color_runtime_value.val(i),l()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),d=e(r);t.$color_value.spectrum("container").append(d),d.on("click",function(e){e.preventDefault(),t.$color_value.spectrum("hide")}),t.$color_palette_buttons.on("click",function(o){var a=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$color_preview_icon.hide(),t.$color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$color_value.spectrum("set",a),t.$color_runtime_value.val(a),i=a,l()}),e(".block-background-color-picker .sp-choose").on("click",function(){t.$color_preview_icon.hide(),t.$color_runtime_value.val(t.$color_value.spectrum("get"))}),t.$color_preview_icon.on("click",function(){return t.$color_value.spectrum("show"),!1})},s=function(e){var a=e.find("#background-section-set-color");t={$color_active:a.find("#color-section-active"),$color_active_wrapper:a.find(".bg-color-section-active-wrapper"),$color_runtime_value:a.find("#background-section-color-runtime"),$color_value:a.find("#background-section-color"),$color_preview_icon:a.find("#background-section-preview-icon"),$color_palette_wrap:a.find("#bg-section-color-palette"),$color_palette_buttons:a.find("#bg-section-color-palette .bg-palette-selector")},o=!0,d(),t.$color_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$color_active.prop("checked");o?(t.$color_active.prop("checked",!1),i=""):(t.$color_active.prop("checked",!0),i=t.$color_runtime_value.val()),l()})};return{init:s,updateColorModal:r}}(jQuery),Overlay_Color_Section_Modal=function(e){"use strict";var t,i,o,a,n=function(e){a=e.sectionTarget,o.data_to_send.sectionTarget=e.sectionTarget,""!=e.color?(t.$overlay_color_value.val(e.color),t.$overlay_color_preview_icon.hide(),t.$overlay_color_value.spectrum("set",e.color),i=e.color):(t.$overlay_color_value.val(""),t.$overlay_color_preview_icon.show()),"true"==e.active.toString()?t.$overlay_active.prop("checked",!0):t.$overlay_active.prop("checked",!1)},r=function(){var e=!0===t.$overlay_active.prop("checked"),o={eventName:"rexlive:change_section_overlay",data_to_send:{color:i,active:e,sectionTarget:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o)},l=function(){o={eventName:"rexlive:change_section_overlay_color",data_to_send:{color:null,sectionTarget:{}}},t.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){t.$overlay_color_preview_icon.hide(),o.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(o)},change:function(e){t.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){i=e.toRgbString(),r()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);t.$overlay_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),t.$overlay_color_value.spectrum("hide")}),t.$overlay_color_palette_buttons.on("click",function(o){var a=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$overlay_color_preview_icon.hide(),t.$overlay_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$overlay_color_value.spectrum("set",a),i=a,r()}),e(".block-overlay-color-picker .sp-choose").on("click",function(){t.$overlay_color_preview_icon.hide()}),t.$overlay_color_preview_icon.on("click",function(){return t.$overlay_color_value.spectrum("show"),!1})},d=function(e){t={$overlay_active:e.find("#overlay-section-active"),$overlay_active_wrapper:e.find(".overlay-active-wrapper"),$overlay_color_value:e.find("#overlay-color-row-value"),$overlay_color_preview_icon:e.find("#overlay-row-preview-icon"),$overlay_color_palette_buttons:e.find("#bg-overlay-row-color-palette .bg-palette-selector")},l(),t.$overlay_active_wrapper.click(function(e){e.preventDefault();var i=!0===t.$overlay_active.prop("checked");i?t.$overlay_active.prop("checked",!1):t.$overlay_active.prop("checked",!0),r()})};return{init:d,updateOverlayModal:n}}(jQuery),Background_Section_Image_Modal=function(e){"use strict";var t,i,o,a=function(e){o=e.sectionTarget,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),i="true"==e.active.toString(),i?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1)},n=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),i=!0,t.$image_active.prop("checked",!0)},r=function(){var e=!0===t.$image_active.prop("checked");i=e;var a=t.$image_url.val(),n="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),r="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),l="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),d={eventName:"rexlive:apply_background_image_section",data_to_send:{idImage:i?a:"",urlImage:i?n:"",width:i?r:"",height:i?l:"",active:i,sectionTarget:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d)},l=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$image_active.prop("checked");o?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),i=o,r()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())})},d=function(e){var o=e.find("#section-edit-image-bg");t={$image_upload_wrap:o.find("#bg-section-set-img-wrap"),$image_active:o.find("#image-section-active"),$image_active_wrapper:o.find(".bg-image-section-active-wrapper"),$image_preview:o.find("#bg-section-img-preview"),$image_preview_icon:o.find("#bg-section-img-preview i"),$image_url:o.find("#background-section-url"),$image_id:o.find("#background-section-up-img")},i=!0,l()};return{init:d,updateImageModal:a,resetImageModal:n,updateImageBackground:r}}(jQuery),Section_Video_Background_Modal=function(e){"use strict";var t,i,o,a=function(e,i){r(e.bgVideo),Rexlive_Modals_Utils.positionModal(t.$self,i),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(e){d(),o=e.sectionTarget,""!=e.mp4VideoID?(i="mp4",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(e.mp4VideoID),t.$linkMp4.attr("data-rex-video-bg-url",e.mp4Video),t.$linkMp4Preview.val(e.mp4Video).next("label").addClass("active"),u()):""!=e.vimeoUrl?(i="vimeo",t.$linkVimeo.val(e.vimeoUrl),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),c()):""!=e.youtubeVideo&&(i="youtube",t.$linkVimeo.val(""),t.$linkYoutube.val(e.youtubeVideo),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),s())},l=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.next("label").removeClass("active"),t.$linkVimeo.next("label").removeClass("active"),t.$linkMp4Preview.next("label").removeClass("active")},d=function(){l(),i="",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4Preview.val("").next("label").removeClass("active")},s=function(){t.$youTubeWrap.hasClass("selected")?(t.$youTubeWrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkYoutube.val()&&t.$linkYoutube.next("label").removeClass("active"),i=""):(t.$checkboxChooseYoutube.attr("checked",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$youTubeWrap.addClass("selected"),t.$linkYoutube.next("label").addClass("active"),t.$linkVimeo.attr("disabled",!0),i="youtube"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},c=function(){t.$vimeoWrap.hasClass("selected")?(t.$vimeoWrap.removeClass("selected"),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkVimeo.val()&&t.$linkVimeo.next("label").removeClass("active"),i=""):(t.$checkboxChooseVimeo.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$vimeoWrap.addClass("selected"),t.$linkVimeo.next("label").addClass("active"),t.$linkYoutube.attr("disabled",!0),i="vimeo"),t.$youTubeWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},u=function(){t.$mp4Wrap.hasClass("selected")?(t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkMp4Preview.val()&&t.$linkMp4Preview.next("label").removeClass("active"),i=""):(t.$checkboxChooseMp4.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$mp4Wrap.addClass("selected"),t.$linkMp4Preview.next("label").addClass("active"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.attr("disabled",!0),i="mp4"),t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected")},_=function(){var e="",i=t.$linkYoutube.val(),a=t.$linkVimeo.val(),n={linkMp4:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-url")?"":t.$linkMp4.attr("data-rex-video-bg-url"),idMp4:t.$linkMp4.val()},r={linkMp4:"",idMp4:""},l=t.$self.find(".video-insert-wrap.selected");l.hasClass("youtube-insert-wrap")?e="youtube":l.hasClass("vimeo-insert-wrap")?e="vimeo":l.hasClass("mp4-insert-wrap")&&(e="mp4"),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:""==e||"youtube"!=e?"":i,video_bg_id_section:""==e||"mp4"!=e?"":n.idMp4,video_bg_url_vimeo_section:""==e||"vimeo"!=e?"":a,video_mp4_url:""==e||"mp4"!=e?"":n.linkMp4}),Rexbuilder_Util_Admin_Editor.updateBkgrVidTool();var d={eventName:"rexlive:update_section_background_video",data_to_send:{urlYoutube:""==e||"youtube"!=e?"":i,urlVimeo:""==e||"vimeo"!=e?"":a,videoMp4:""==e||"mp4"!=e?r:n,typeVideo:e,sectionTarget:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d)},p=function(){t.$chooseVideoWrapper.click(function(t){t.preventDefault();var o=e(t.target);!o.hasClass("youtube-insert-wrap")&&0==o.parents(".youtube-insert-wrap").length||"youtube"!=i&&""!=i?!o.hasClass("vimeo-insert-wrap")&&0==o.parents(".vimeo-insert-wrap").length||"vimeo"!=i&&""!=i?!o.hasClass("mp4-insert-wrap")&&(0==o.parents(".mp4-insert-wrap").length||o.is("i"))||"mp4"!=i&&""!=i||(u(),_()):(c(),_()):(s(),_())}),t.$uploadMp4.click(function(){t.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(t.$linkMp4,t.$linkMp4.val())}),t.$close_button.on("click",function(e){e.preventDefault(),n()})},m=function(e){t.$linkMp4Preview.val(e).next("label").addClass("active")},v=function(){var o=e("#video-section-editor-wrapper");t={$self:o,$linkYoutube:o.find("#rex-youtube-video-section"),$linkVimeo:o.find("#rex-vimeo-video-section"),$linkMp4:o.find("#video-section-mp4-url"),$linkMp4Preview:o.find("#rex-mp4-video-section-preview"),$checkboxChooseYoutube:o.find("#rex-choose-youtube-video-section"),$checkboxChooseVimeo:o.find("#rex-choose-vimeo-video-section"),$checkboxChooseMp4:o.find("#rex-choose-mp4-video-section"),$chooseVideoWrapper:o.find(".rex-video-type-select"),$uploadMp4:o.find("#rex-upload-mp4-video-section"),$youTubeWrap:o.find("#edit-video-row-wrap-1"),$vimeoWrap:o.find("#edit-video-row-wrap-2"),$mp4Wrap:o.find("#edit-video-row-wrap-3"),$close_button:o.find(".rex-modal__close-button")},i="",p()};return{init:v,clearVideoModal:d,updateVideoModal:r,updateVideoBackground:_,openSectionVideoBackgroundModal:a,updateVideoMp4Link:m}}(jQuery),Rexlive_Section_Background_Gradient=function(e){"use strict";var t,i,o=function(e){s(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var i=t.getEl().querySelector("#colorpicker"),o=e(i);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)})},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){u()}),t.$add_palette.on("click",function(e){e.preventDefault();var i=t.gpicker.getValue(),o=t.gpicker.getSafeValue(),a=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:i,gradient_preview:o,ID:a})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");c(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:i})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},s=function(e){i=e.sectionTarget,c(e.gradient,!0)},c=function(e,i){if(i="undefined"!=typeof i&&i,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:i});var o=t.gpicker.getType(),a=t.gpicker.getDirection();t.$gradient_type.find("option[value="+o+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+a+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:i}),t.$gradient_type.val(""),t.$gradient_angle.val("")},u=function(){var e={eventName:"rexlive:updateSectionBackgroundGradient",data_to_send:{sectionTarget:i,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},_=function(){var i=e("#rex-section-background-gradient-editor"),o="#gp-section-background-gradient";t={$self:i,$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button"),$gpicker:i.find(o),gpicker_selector:o,gpicker:null,$gradient_type:i.find("#section-background-gradient-type"),$gradient_angle:i.find("#section-background-gradient-angle"),$palette_list:i.find(".palette-list"),$add_palette:i.find(".palette__add-gradient")},n(),r(),d()};return{init:_,openModal:o,deletePaletteItem:l}}(jQuery),Rexlive_Section_Overlay_Gradient=function(e){"use strict";var t,i,o=function(e){s(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var i=t.getEl().querySelector("#colorpicker"),o=e(i);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)})},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){u()}),t.$add_palette.on("click",function(e){e.preventDefault();var i=t.gpicker.getValue(),o=t.gpicker.getSafeValue(),a=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:i,gradient_preview:o,ID:a})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");c(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:i})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},s=function(e){i=e.sectionTarget,c(e.gradient,!0)},c=function(e,i){if(i="undefined"!=typeof i&&i,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:i});var o=t.gpicker.getType(),a=t.gpicker.getDirection();t.$gradient_type.find("option[value="+o+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+a+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:i}),t.$gradient_type.val(""),t.$gradient_angle.val("")},u=function(){var e={eventName:"rexlive:updateSectionOverlayGradient",data_to_send:{sectionTarget:i,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},_=function(){var i=e("#rex-section-overlay-gradient-editor"),o="#gp-section-overlay-gradient";t={$self:i,$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button"),$gpicker:i.find(o),gpicker_selector:o,gpicker:null,$gradient_type:i.find("#section-overlay-gradient-type"),$gradient_angle:i.find("#section-overlay-gradient-angle"),$palette_list:i.find(".palette-list"),$add_palette:i.find(".palette__add-gradient")},n(),r(),d()};return{init:_,openModal:o,deletePaletteItem:l}}(jQuery),SectionBackground_Modal=function(e){"use strict";var t,i=function(e){Background_Section_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_Section_Modal.updateOverlayModal(e.overlay),Background_Section_Image_Modal.updateImageModal(e.imageBG),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},o=function(){Background_Section_Image_Modal.resetImageModal(),Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.click(function(e){e.preventDefault(),o()})},n=function(){var i=e("#rex-edit-background-section");t={$self:i,$close_button:i.find(".rex-modal__close-button")},Background_Section_Color_Modal.init(i),Background_Section_Image_Modal.init(i),Overlay_Color_Section_Modal.init(i),a()};return{init:n,openSectionBackgroundModal:i}}(jQuery),CssEditor_Modal=function(e){"use strict";var t,i,o,a=function(e){"undefined"==typeof e||""==e.trim()?i.setValue(o):i.setValue(e),
i.clearSelection(),Rexlive_Modals_Utils.openModal(t.$modal_wrap)},n=function(){Rexlive_Modals_Utils.closeModal(t.$modal_wrap)},r=function(){t.$save_button.on("click",function(e){e.preventDefault();var o=i.getValue(),a={eventName:"rexlive:SetCustomCSS",data_to_send:{customCSS:o}};t.$self.addClass("setting-saving"),setTimeout(function(){Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a),n(),t.$self.removeClass("setting-saving")},800)}),t.$cancel_button.on("click",function(e){n()}),t.$open_button.on("click",function(e){var t={eventName:"rexlive:getCustomCss"};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)})},l=function(){var a=e("#rex-css-editor");t={$self:a,$modal_wrap:null,$save_button:a.find("#css-editor-save"),$cancel_button:a.find("#css-editor-cancel"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#open-css-editor")},i=ace.edit("rex-css-ace-editor"),t.$modal_wrap=a.parent(".rex-modal-wrap"),i.setTheme("ace/theme/monokai"),i.getSession().setMode("ace/mode/css"),i.on("change",function(e){Rexbuilder_Util_Admin_Editor.editPageProperties()}),o="",r()};return{init:l,openModal:a}}(jQuery),HtmlEditor_Modal=function(e){"use strict";var t,i,o,a=function(e){"undefined"==typeof e||""==e.trim()?i.setValue(o):i.setValue(e),i.clearSelection(),Rexlive_Modals_Utils.openModal(t.$modal_wrap)},n=function(){Rexlive_Modals_Utils.closeModal(t.$modal_wrap)},r=function(){t.$save_button.on("click",function(e){e.preventDefault();var o=i.getValue(),a={eventName:"rexlive:SetcustomHTML",data_to_send:{customHTML:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a),t.$self.addClass("setting-saving").on(Rexbuilder_Util_Admin_Editor.animationEvent,function(e){n(),t.$self.removeClass("setting-saving")})}),t.$close_button.on("click",function(e){n()})},l=function(){var a=e("#rex-html-text-editor");t={$self:a,$modal_wrap:null,$save_button:a.find(".rex-modal__save-button"),$close_button:a.find(".rex-modal__close-button"),$open_button:Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("#test-html-editor")},t.$modal_wrap=a.parent(".rex-modal-wrap"),i=ace.edit("rex-html-ace-editor"),i.setTheme("ace/theme/monokai"),i.getSession().setMode("ace/mode/html"),i.getSession().setUseWrapMode(!0),i.getSession().setTabSize(2),o="",r()};return{init:l,openModal:a}}(jQuery),Background_Block_Color_Modal=function(e){"use strict";var t,i,o,a,n,r=function(e){a=e.target,n.data_to_send.target=e.target,""!=e.color?(t.$color_runtime_value.val(e.color),t.$color_preview_icon.hide(),t.$color_value.spectrum("set",e.color)):(t.$color_runtime_value.val(""),t.$color_preview_icon.show(),t.$color_value.spectrum("set","")),i=e.color,o="true"==e.active.toString(),o?t.$color_active.prop("checked",!0):t.$color_active.prop("checked",!1)},l=function(){var e=!0===t.$color_active.prop("checked");o=e;var n={eventName:"rexlive:apply_background_color_block",data_to_send:{color:o?i:"",active:o,target:a}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},d=function(){n={eventName:"rexlive:change_block_bg_color",data_to_send:{color:null,target:{}}};var a;t.$color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){a=!1},move:function(e){t.$color_preview_icon.hide(),n.data_to_send.color=o?e.toRgbString():"",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n),a=!0},change:function(e){t.$color_palette_buttons.removeClass("palette-color-active")},hide:function(e){a&&(i=e.toRgbString()),t.$color_runtime_value.val(i),l()},cancelText:"",chooseText:""});var r=tmpl("tmpl-tool-close",{}),d=e(r);t.$color_value.spectrum("container").append(d),d.on("click",function(e){e.preventDefault(),t.$color_value.spectrum("hide")}),t.$color_palette_buttons.on("click",function(o){var a=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$color_preview_icon.hide(),t.$color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$color_value.spectrum("set",a),t.$color_runtime_value.val(a),i=a,l()}),e(".block-background-color-picker .sp-choose").on("click",function(){t.$color_preview_icon.hide(),t.$color_runtime_value.val(t.$color_value.spectrum("get"))}),t.$color_preview_icon.on("click",function(){return t.$color_value.spectrum("show"),!1})},s=function(e){var a=e.find("#background-block-set-color");t={$color_active:a.find("#color-block-active"),$color_active_wrapper:a.find(".bg-color-block-active-wrapper"),$color_runtime_value:a.find("#background-block-color-runtime"),$color_value:a.find("#background-block-color"),$color_preview_icon:a.find("#background-block-preview-icon"),$color_palette_wrap:a.find("#bg-block-color-palette"),$color_palette_buttons:a.find("#bg-block-color-palette .bg-palette-selector")},o=!0,d(),t.$color_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$color_active.prop("checked");o?(t.$color_active.prop("checked",!1),i=""):(t.$color_active.prop("checked",!0),i=t.$color_runtime_value.val()),l()})};return{init:s,updateColorModal:r}}(jQuery),Overlay_Color_block_Modal=function(e){"use strict";var t,i,o,a,n=function(e){o=e.target,a.data_to_send.target=e.target,""!=e.color?(t.$overlay_color_value.val(e.color),t.$overlay_color_preview_icon.hide(),t.$overlay_color_value.spectrum("set",e.color),i=e.color):(t.$overlay_color_value.val(""),t.$overlay_color_preview_icon.show()),"true"==e.active.toString()?t.$overlay_active.prop("checked",!0):t.$overlay_active.prop("checked",!1)},r=function(){var e=!0===t.$overlay_active.prop("checked"),a={eventName:"rexlive:change_block_overlay",data_to_send:{color:i,active:e,target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},l=function(){a={eventName:"rexlive:change_block_overlay_color",data_to_send:{color:null,target:{}}},t.$overlay_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-overlay-color-picker",move:function(e){t.$overlay_color_preview_icon.hide(),a.data_to_send.color=e.toRgbString(),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},change:function(e){t.$overlay_color_palette_buttons.removeClass("palette-color-active")},hide:function(e){i=e.toRgbString(),r()},cancelText:"",chooseText:""});var o=tmpl("tmpl-tool-close",{}),n=e(o);t.$overlay_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),t.$overlay_color_value.spectrum("hide")}),t.$overlay_color_palette_buttons.on("click",function(o){var a=e(o.currentTarget).find(".bg-palette-value").val();e(o.currentTarget).addClass("palette-color-active"),t.$overlay_color_preview_icon.hide(),t.$overlay_color_palette_buttons.not(o.currentTarget).removeClass("palette-color-active"),t.$overlay_color_value.spectrum("set",a),i=a,r()}),e(".block-overlay-color-picker .sp-choose").on("click",function(){t.$overlay_color_preview_icon.hide()}),t.$overlay_color_preview_icon.on("click",function(){return t.$overlay_color_value.spectrum("show"),!1})},d=function(e){var i=e.find("#bg-overlay-block-set-color");t={$overlay_active:i.find("#overlay-block-active"),$overlay_active_wrapper:i.find(".overlay-active-wrapper"),$overlay_color_value:i.find("#overlay-color-block-value"),$overlay_color_preview_icon:i.find("#overlay-block-preview-icon"),$overlay_color_palette_buttons:i.find("#bg-overlay-block-color-palette .bg-palette-selector")},l(),t.$overlay_active_wrapper.click(function(e){e.preventDefault();var i=!0===t.$overlay_active.prop("checked");i?t.$overlay_active.prop("checked",!1):t.$overlay_active.prop("checked",!0),r()})};return{init:d,updateOverlayModal:n}}(jQuery),Background_Block_Image_Modal=function(e){"use strict";var t,i,o,a,n=function(e){r(),o=e.target,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),c(""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage),s(e.photoswipe),i="true"==e.active.toString(),i?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1),l()},r=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),i=!0,t.$image_active.prop("checked",!0),t.$checkboxPhotoswipe.prop("checked",!1),t.$image_type_typeWrap.removeClass("selected")},l=function(){a.imageActive=t.$image_active.prop("checked"),a.imageId=t.$image_url.val(),a.imageType=t.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),a.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"},d=function(){var e=!0===t.$image_active.prop("checked");i=e;var n=t.$image_url.val(),r="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),d="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),s="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),c=t.$image_type_types_wrap,u=c.children(".selected").attr("data-rex-type-image"),_=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",p=a.imageType!==u||a.imageId!==n,m={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:i?n:"",urlImage:i?r:"",width:i?d:"",height:i?s:"",typeBGimage:i?u:"",photoswipe:_,active:i,updateBlockHeight:p,target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(m),l()},s=function(e){t.$checkboxPhotoswipe.prop("checked","true"==e.toString())},c=function(e){var i=t.$image_type_types_wrap.children('[data-rex-type-image="'+e+'"]');i.addClass("selected"),i.find("input").attr("checked",!0)},u=function(){t.$image_type_typeWrap.each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)})},_=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$image_active.prop("checked");o?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),i=o,d()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())}),t.$image_type_typeWrap.click(function(t){t.preventDefault();var i=e(t.target).parents(".rex-background-image-type-wrap");i.hasClass("selected")||(u(),i.addClass("selected"),i.find("input").attr("checked",!0),d())}),t.$is_photoswipe.click(function(e){e.preventDefault();var i=!0===t.$checkboxPhotoswipe.prop("checked");i?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),d()})},p=function(e){var o=e.find(".background_set_image");t={$image_upload_wrap:o.find("#bg-block-set-img-wrap"),$image_active:o.find("#image-block-active"),$image_active_wrapper:o.find(".bg-image-block-active-wrapper"),$image_preview:o.find("#bg-block-img-preview"),$image_preview_icon:o.find("#bg-block-img-preview i"),$image_url:o.find("#background-block-url"),$image_id:o.find("#background-block-up-img"),$image_type_typeWrap:o.find(".rex-background-image-type-wrap"),$image_type_types_wrap:o.find("#bg-set-img-type"),$is_photoswipe:o.find("#bg-set-photoswipe"),$checkboxPhotoswipe:o.find("#background_photoswipe")},a={imageActive:!1,imageId:null,imageType:null,imagePositon:null,imagePswpActive:!1},i=!0,_()};return{init:p,updateImageModal:n,resetImageModal:r,updateImageBackground:d}}(jQuery),Background_Block_Image_Setting=function(e){"use strict";var t,i,o,a,n=function(e){r(),o=e.target,t.$image_url.val(e.idImage),""!=e.idImage&&(t.$image_preview.css("backgroundImage","url("+e.imageUrl+")"),t.$image_preview.children().css("display","none"),t.$image_url.attr("data-rex-image-bg-url",e.imageUrl),t.$image_url.attr("data-rex-image-width",e.width),t.$image_url.attr("data-rex-image-height",e.height)),c(""==e.typeBGimage?e.defaultTypeImage:e.typeBGimage),s(e.photoswipe),i="true"==e.active.toString(),i?t.$image_active.prop("checked",!0):t.$image_active.prop("checked",!1),l()},r=function(){t.$image_url.val(""),t.$image_preview.css("backgroundImage",""),t.$image_preview.children().css("display","block"),t.$image_url.attr("data-rex-image-bg-url",""),t.$image_url.attr("data-rex-image-width",""),t.$image_url.attr("data-rex-image-height",""),i=!0,t.$image_active.prop("checked",!0),t.$checkboxPhotoswipe.prop("checked",!1),t.$image_type_typeWrap.removeClass("selected")},l=function(){a.imageActive=t.$image_active.prop("checked"),a.imageId=t.$image_url.val(),a.imageType=t.$image_type_types_wrap.children(".selected").attr("data-rex-type-image"),a.imagePswpActive=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false"},d=function(){var e=!0===t.$image_active.prop("checked");i=e;var n=t.$image_url.val(),r="undefined"==typeof t.$image_url.attr("data-rex-image-bg-url")?"":t.$image_url.attr("data-rex-image-bg-url"),d="undefined"==typeof t.$image_url.attr("data-rex-image-width")?"":t.$image_url.attr("data-rex-image-width"),s="undefined"==typeof t.$image_url.attr("data-rex-image-height")?"":t.$image_url.attr("data-rex-image-height"),c=t.$image_type_types_wrap,u=c.children(".selected").attr("data-rex-type-image"),_=!0===t.$checkboxPhotoswipe.prop("checked")?"true":"false",p=a.imageType!==u||a.imageId!==n,m={eventName:"rexlive:apply_background_image_block",data_to_send:{idImage:i?n:"",urlImage:i?r:"",width:i?d:"",height:i?s:"",typeBGimage:i?u:"",photoswipe:i?_:"",active:i,updateBlockHeight:p,target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(m),l()},s=function(e){t.$checkboxPhotoswipe.prop("checked","true"==e.toString())},c=function(e){var i=t.$image_type_types_wrap.children('[data-rex-type-image="'+e+'"]');i.addClass("selected"),i.find("input").attr("checked",!0)},u=function(){t.$image_type_typeWrap.each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)})},_=function(){t.$image_active_wrapper.click(function(e){e.preventDefault();var o=!0===t.$image_active.prop("checked");o?t.$image_active.prop("checked",!1):t.$image_active.prop("checked",!0),i=o,d()}),t.$image_upload_wrap.click(function(e){Rexlive_MediaUploader.openEditImageMediaUploader(t.$image_url,t.$image_preview,t.$image_url.val())}),t.$image_type_typeWrap.click(function(t){t.preventDefault();var i=e(t.target).parents(".rex-background-image-type-wrap");i.hasClass("selected")||(u(),i.addClass("selected"),i.find("input").attr("checked",!0),d())}),t.$is_photoswipe.click(function(e){e.preventDefault();var i=!0===t.$checkboxPhotoswipe.prop("checked");i?t.$checkboxPhotoswipe.prop("checked",!1):t.$checkboxPhotoswipe.prop("checked",!0),d()})},p=function(e){var o=e.find(".background_set_image");t={$image_upload_wrap:o.find("#bg-block-set-img-wrap"),$image_active:o.find("#image-block-active"),$image_active_wrapper:o.find(".bg-image-block-active-wrapper"),$image_preview:o.find("#bg-block-img-preview"),$image_preview_icon:o.find("#bg-block-img-preview i"),$image_url:o.find("#background-block-url"),$image_id:o.find("#background-block-up-img"),$image_type_typeWrap:o.find(".rex-background-image-type-wrap"),$image_type_types_wrap:o.find("#bg-set-img-type"),$is_photoswipe:o.find("#bg-set-photoswipe"),$checkboxPhotoswipe:o.find("#background_photoswipe")},a={imageActive:!1,imageId:null,imageType:null,imagePositon:null,imagePswpActive:!1},i=!0,_()};return{init:p,updateImageModal:n,resetImageModal:r,updateImageBackground:d}}(jQuery),Block_Video_Background_Modal=function(e){"use strict";var t,i,o,a=function(e,i){r(e.bgVideo),t.$self.attr("data-block_tools",e.bgVideo.tools),Rexlive_Modals_Utils.positionModal(t.$self,i),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),""==e.youtubeUrl?t.$linkYoutube.blur():t.$linkYoutube.focus(),""==e.vimeoUrl?t.$linkVimeo.blur():t.$linkVimeo.focus(),""==e.mp4Data?t.$linkMp4Preview.blur():t.$linkMp4Preview.focus()},n=function(){t.$self.attr("data-block_tools",""),Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(e){d(),"mp4"==e.type?(i="mp4",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(e.mp4Data.idMp4),t.$linkMp4.attr("data-rex-video-bg-url",e.mp4Data.linkMp4),t.$linkMp4.attr("data-rex-video-bg-width",e.mp4Data.width),t.$linkMp4.attr("data-rex-video-bg-height",e.mp4Data.height),t.$linkMp4Preview.val(e.mp4Data.linkMp4).next("label"),t.$audioMp4.prop("checked","true"==e.audio.toString()),u()):"vimeo"==e.type?(i="vimeo",t.$linkVimeo.val(e.vimeoUrl),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),t.$audioVimeo.prop("checked","true"==e.audio.toString()),c()):"youtube"==e.type&&(i="youtube",t.$linkVimeo.val(""),t.$linkYoutube.val(e.youtubeUrl),t.$linkMp4.val(""),t.$linkMp4.attr("data-rex-video-bg-url",""),t.$linkMp4Preview.val("").next("label").removeClass("active"),t.$audioYoutube.prop("checked","true"==e.audio.toString()),s()),""==e.youtubeUrl?t.$linkYoutubeLabel.removeClass("active"):t.$linkYoutubeLabel.addClass("active"),""==e.vimeoUrl?t.$linkVimeoLabel.removeClass("active"):t.$linkVimeoLabel.addClass("active"),""==e.mp4Data.linkMp4?t.$linkMp4PreviewLabel.removeClass("active"):t.$linkMp4PreviewLabel.addClass("active"),o=e.target},l=function(){t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1)},d=function(){l(),i="",t.$linkVimeo.val(""),t.$linkYoutube.val(""),t.$linkMp4.val(""),t.$linkMp4Preview.val("").next("label").removeClass("active")},s=function(){t.$youTubeWrap.hasClass("selected")?(t.$youTubeWrap.removeClass("selected"),t.$checkboxChooseYoutube.attr("checked",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkYoutube.val()&&t.$linkYoutube.next("label").removeClass("active"),t.$linkYoutube.trigger("blur"),i=""):(t.$checkboxChooseYoutube.attr("checked",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$youTubeWrap.addClass("selected"),t.$linkVimeo.attr("disabled",!0),t.$linkYoutube.trigger("focus"),i="youtube"),t.$vimeoWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},c=function(){t.$vimeoWrap.hasClass("selected")?(t.$vimeoWrap.removeClass("selected"),t.$checkboxChooseVimeo.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseMp4.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkVimeo.val()&&t.$linkVimeo.next("label").removeClass("active"),t.$linkVimeo.trigger("blur"),i=""):(t.$checkboxChooseVimeo.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseMp4.attr("disabled",!0),t.$vimeoWrap.addClass("selected"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.trigger("focus"),i="vimeo"),t.$youTubeWrap.removeClass("selected"),t.$mp4Wrap.removeClass("selected")},u=function(){t.$mp4Wrap.hasClass("selected")?(t.$mp4Wrap.removeClass("selected"),t.$checkboxChooseMp4.attr("checked",!1),t.$checkboxChooseYoutube.attr("disabled",!1),t.$checkboxChooseVimeo.attr("disabled",!1),t.$linkYoutube.attr("disabled",!1),t.$linkVimeo.attr("disabled",!1),""===t.$linkMp4Preview.val()&&t.$linkMp4Preview.next("label").removeClass("active"),i=""):(t.$checkboxChooseMp4.attr("checked",!0),t.$checkboxChooseYoutube.attr("disabled",!0),t.$checkboxChooseVimeo.attr("disabled",!0),t.$mp4Wrap.addClass("selected"),t.$linkYoutube.attr("disabled",!0),t.$linkVimeo.attr("disabled",!0),i="mp4"),t.$youTubeWrap.removeClass("selected"),t.$vimeoWrap.removeClass("selected")},_=function(){var e="",i="",a=t.$linkYoutube.val(),n=t.$linkVimeo.val(),r={linkMp4:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-url")?"":t.$linkMp4.attr("data-rex-video-bg-url"),width:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-width")?"":t.$linkMp4.attr("data-rex-video-bg-width"),height:"undefined"==typeof t.$linkMp4.attr("data-rex-video-bg-height")?"":t.$linkMp4.attr("data-rex-video-bg-height"),idMp4:t.$linkMp4.val()},l={linkMp4:"",idMp4:"",width:"",height:""},d=t.$self.find(".video-insert-wrap.selected");d.hasClass("youtube-insert-wrap")?(e="youtube",i=!0===t.$audioYoutube.prop("checked")?"true":"false"):d.hasClass("vimeo-insert-wrap")?(e="vimeo",i=!0===t.$audioVimeo.prop("checked")?"true":"false"):d.hasClass("mp4-insert-wrap")&&(e="mp4",i=!0===t.$audioMp4.prop("checked")?"true":"false");var s={eventName:"rexlive:update_block_background_video",data_to_send:{target:o,urlYoutube:""==e||"youtube"!=e?"":a,urlVimeo:""==e||"vimeo"!=e?"":n,videoMp4:""==e||"mp4"!=e?l:r,audio:""==e?"":i,typeVideo:e,tols:t.$self.attr("data-block_tools")}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(s)},p=function(){t.$chooseVideoWrapper.click(function(t){t.preventDefault();var o=e(t.target);!o.hasClass("youtube-insert-wrap")&&0==o.parents(".youtube-insert-wrap").length||"youtube"!=i&&""!=i?!o.hasClass("vimeo-insert-wrap")&&0==o.parents(".vimeo-insert-wrap").length||"vimeo"!=i&&""!=i?!o.hasClass("mp4-insert-wrap")&&(0==o.parents(".mp4-insert-wrap").length||o.is("i"))||"mp4"!=i&&""!=i||(u(),_()):(c(),_()):(s(),_())}),t.$uploadMp4.click(function(){t.$mp4Wrap.hasClass("selected")&&Rexlive_MediaUploader.openMediaUploaderVideo(t.$linkMp4,t.$linkMp4.val())}),t.$self.find(".set-video-audio-btn").click(function(t){t.preventDefault();var i=e(t.target),o=i.parents(".set-video-audio-btn"),a=o.find(".video-audio-checkbox"),n=a.attr("checked");n=!n,a.attr("checked",n),_()}),t.$close_button.on("click",function(e){e.preventDefault(),n()})},m=function(e){},v=function(o){var a=e("#video-block-editor-wrapper");t={$self:a,$youTubeWrap:a.find("#edit-video-block-wrap-1"),$vimeoWrap:a.find("#edit-video-block-wrap-2"),$mp4Wrap:a.find("#edit-video-block-wrap-3"),$chooseVideoWrapper:a.find(".rex-video-type-select"),$linkYoutube:a.find("#rex-youtube-video-block"),$linkYoutubeFocus:a.find("#rex-youtube-video-block"),$linkYoutubeLabel:a.find("#rex-youtube-video-block-label"),$linkVimeo:a.find("#rex-vimeo-video-block"),$linkVimeoLabel:a.find("#rex-vimeo-video-block-label"),$linkMp4:a.find("#video-block-mp4-url"),$linkMp4Preview:a.find("#rex-mp4-video-block-preview"),$linkMp4PreviewLabel:a.find("#rex-mp4-video-block-preview-label"),$checkboxChooseYoutube:a.find("#rex-choose-youtube-video-block"),$checkboxChooseVimeo:a.find("#rex-choose-vimeo-video-block"),$checkboxChooseMp4:a.find("#rex-choose-mp4-video-block"),$uploadMp4:a.find("#rex-upload-mp4-video-block i"),$audioYoutube:a.find("#rex-edit-block-video-youtube-audio"),$audioVimeo:a.find("#rex-edit-block-video-vimeo-audio"),$audioMp4:a.find("#rex-edit-block-video-mp4-audio"),$close_button:a.find(".rex-modal__close-button")},i="",p()};return{init:v,clearVideoModal:d,updateVideoModal:r,updateVideoBackground:_,openBlockVideoBackgroundModal:a,updateVideoMp4Link:m}}(jQuery),Block_Content_Positions_Modal=function(e){"use strict";var t,i,o,a=function(e,i){l(e.flexPosition),Rexlive_Modals_Utils.positionModal(t.$self,i),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),n()})},l=function(e){o=e.target,d();var a=""==e.position?i:e.position;t.$positions.filter('[value="'+a+'"]').prop("checked",!0)},d=function(){t.$positions.prop("checked",!1)},s=function(){var e=t.$positions.filter(":checked").val(),i=e.split("-")[0],a=e.split("-")[1],n={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:a,y:i},target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},c=function(e){var o=e;t={$self:o,$positions:o.find(".content-position"),$close_button:o.find(".rex-modal__close-button")},i="",r(),t.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){s()},50)})};return{init:c,updatePosition:l,resetPosition:d,openBlockContentPositionModal:a,closeBlockContentPositionModal:n}}(jQuery),Block_Content_Positions_Setting=function(e){"use strict";var t,i,o,a=function(e){l(e.flexPosition),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),n()})},l=function(e){o=e.target,d();var a=""==e.position?i:e.position;t.$positions.filter('[value="'+a+'"]').prop("checked",!0)},d=function(){t.$positions.prop("checked",!1)},s=function(){var e=t.$positions.filter(":checked").val(),i=e.split("-")[0],a=e.split("-")[1],n={eventName:"rexlive:apply_flex_position_block",data_to_send:{position:{x:a,y:i},target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},c=function(e){var o=e;t={$self:o,$positions:o.find(".content-position"),$close_button:o.find(".rex-modal__close-button")},i="",r(),t.$self.find(".rex-block-position").on("click",function(e){setTimeout(function(){s()},50)})};return{init:c,updatePosition:l,resetPosition:d,openBlockContentPositionModal:a,closeBlockContentPositionModal:n}}(jQuery),Block_Image_Positions_Modal=function(e){"use strict";var t,i,o,a=function(e){o=e.target,n();var a=""==e.position?i:e.position;t.$positions.filter('[value="'+a+'"]').prop("checked",!0)},n=function(){t.$positions.prop("checked",!1)},r=function(){var e=t.$positions.filter(":checked").val(),i=e.split("-")[0],a=e.split("-")[1],n={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:a,y:i},target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},l=function(e){var o=e.find("#rex-block-image-position-editor");t={$self:o,$positions:o.find(".image-position")},i="",t.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){r()},50)})};return{init:l,updatePosition:a,resetPosition:n}}(jQuery),Block_Image_Positions_Setting=function(e){"use strict";var t,i,o,a=function(e){o=e.target,n();var a=""==e.position?i:e.position;t.$positions.filter('[value="'+a+'"]').prop("checked",!0)},n=function(){t.$positions.prop("checked",!1)},r=function(){var e=t.$positions.filter(":checked").val(),i=e.split("-")[0],a=e.split("-")[1],n={eventName:"rexlive:apply_flex_image_position_block",data_to_send:{position:{x:a,y:i},target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n)},l=function(e){var o=e.find("#rex-block-image-position-setting");t={$self:o,$positions:o.find(".image-position")},i="",t.$self.find(".rex-block-image-position").on("click",function(e){setTimeout(function(){r()},50)})};return{init:l,updatePosition:a,resetPosition:n}}(jQuery),BlockPaddings_Modal=function(e){"use strict";var t,i,o,a=function(){t.$block_padding_top.val(i.top),t.$block_padding_right.val(i.right),t.$block_padding_bottom.val(i.bottom),t.$block_padding_left.val(i.left)},n=function(e){o=e.target;var a=isNaN(parseInt(e.paddings.top))?i.top:e.paddings.top,n=isNaN(parseInt(e.paddings.right))?i.right:e.paddings.right,d=isNaN(parseInt(e.paddings.bottom))?i.bottom:e.paddings.bottom,s=isNaN(parseInt(e.paddings.left))?i.left:e.paddings.left;l(),r(""==e.paddings.type?i.type:e.paddings.type),t.$block_padding_top.val(a),t.$block_padding_right.val(n),t.$block_padding_bottom.val(d),t.$block_padding_left.val(s)},r=function(e){var i=t.$padding_type_types_wrap.children('[data-rex-type-padding="'+e+'"]');i.addClass("selected"),i.find("input").attr("checked",!0)},l=function(){t.$padding_type_typeWrap.each(function(t,i){e(i).removeClass("selected"),e(i).find("input").attr("checked",!1)})},d=function(){var e=parseInt(t.$block_padding_top.val()),a=parseInt(t.$block_padding_right.val()),n=parseInt(t.$block_padding_bottom.val()),r=parseInt(t.$block_padding_left.val()),l=t.$padding_type_types_wrap,d=l.children(".selected").attr("data-rex-type-padding"),s={eventName:"rexlive:apply_paddings_block",data_to_send:{target:o,paddings:{top:isNaN(e)?i.top:e,right:isNaN(a)?i.right:a,bottom:isNaN(n)?i.bottom:n,left:isNaN(r)?i.left:r,type:d}}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(s)},s=function(t){t.keydown(function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(Math.max(isNaN(parseInt(i.val()))?0:parseInt(i.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&i.blur()))})},c=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),d())})},u=function(){s(t.$block_padding_top),s(t.$block_padding_right),s(t.$block_padding_bottom),s(t.$block_padding_left),c(t.$block_padding_top),c(t.$block_padding_right),c(t.$block_padding_bottom),c(t.$block_padding_left),t.$padding_type_typeWrap.click(function(t){t.preventDefault();var i=e(t.target).parents(".rex-block-padding-type-wrap");i.hasClass("selected")||(l(),i.addClass("selected"),i.find("input").attr("checked",!0),d())})},_=function(e){var o=e.find("#block-paddings-wrapper");t={$block_padding_top:o.find("#bm-block-padding-top"),$block_padding_right:o.find("#bm-block-padding-right"),$block_padding_bottom:o.find("#bm-block-padding-bottom"),$block_padding_left:o.find("#bm-block-padding-left"),$padding_type_typeWrap:o.find(".rex-block-padding-type-wrap"),$padding_type_types_wrap:o.find("#block-padding-type-select")},i={top:5,right:5,bottom:5,left:5,type:"px"},a(),u()};return{init:_,updatePaddings:n,resetPaddings:a}}(jQuery),Block_CustomClasses_Modal=function(e){"use strict";var t,i,o,a,n,r=function(){t.$classes.val(i).trigger("focusout")},l=function(e){n=e.target,a="",o="",a=e.classes,a.indexOf("active-large-block-overlay")!==-1&&(o+=" active-large-block-overlay",a=a.replace("active-large-block-overlay","")),a.indexOf("active-medium-block-overlay")!==-1&&(o+=" active-medium-block-overlay",a=a.replace("active-medium-block-overlay","")),a.indexOf("active-small-block-overlay")!==-1&&(o+=" active-small-block-overlay",a=a.replace("active-small-block-overlay","")),""==e.classes?t.$classes.siblings("label, .prefix").removeClass("active"):t.$classes.siblings("label, .prefix").addClass("active"),t.$classes.val(a).trigger("focusout")},d=function(){var e=t.$classes.val();e=e.trim(),e+=o;var i=e.split(/\s+/),a={eventName:"rexlive:apply_block_custom_classes",data_to_send:{customClasses:i,target:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},s=function(){t.$classes.blur(function(e){d()})},c=function(e){var o=e.find(".block-custom-class-wrapper");t={$classes:o.find("#rex_block_custom_class")},i="",r(),s()};return{init:c,updateCustomClasses:l,resetCustomClasses:r}}(jQuery),Block_Image_Editor_Modal=function(e){"use strict";var t,i,o=function(){i={$modal:e("#rex-block-image-editor"),$close_button:null},i.$close_button=i.$modal.find(".rex-modal__close-button"),t=i.$modal.parent(".rex-modal-wrap")},a=function(e,o){Background_Block_Image_Setting.updateImageModal(e.imageBG),Block_Image_Positions_Setting.updatePosition(e.flexImgPosition),Rexlive_Modals_Utils.positionModal(i.$modal,o),Rexlive_Modals_Utils.openModal(t)},n=function(){i.$close_button.on("click",function(e){e.preventDefault(),Rexlive_Modals_Utils.closeModal(t)})},r=function(e){o(),n(),Background_Block_Image_Setting.init(i.$modal),Block_Image_Positions_Setting.init(i.$modal)};return{
init:r,openModal:a}}(jQuery),Rexlive_Block_Accordion=function(e){"use strict";var t,i,o=function(e){d(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$save_button.on("click",function(e){e.preventDefault(),s(),a()}),t.$accordion_insert_gallery.on("click",function(e){e.preventDefault();var i={modal_info:t,image_info:r()};Rexlive_MediaUploader.openMediaUploaderAccordionGallery(i)}),t.$self.on("click",".rex-accordion-gallery__item__remove",function(t){t.preventDefault(),e(this).parents(".rex-accordion-gallery__item").remove()})},r=function(){var e=[];return t.$accordion_preview_gallery.find(".rex-accordion-gallery__item").each(function(t,i){e.push({id:i.getAttribute("data-gallery-item-id"),url:i.getAttribute("data-gallery-item-url"),size:i.getAttribute("data-gallery-item-size")})}),e},l=function(t){var i=[],o=e(t);return o.each(function(e,t){i.push({id:t.getAttribute("data-gallery-item-id"),url:t.getAttribute("src"),size:t.getAttribute("data-gallery-item-size")})}),i},d=function(e){switch(i=e.blockData.target,e.blockData.accordion.state){case"open":t.$accordion_state.prop("checked",!0);break;case"close":default:t.$accordion_state.prop("checked",!1)}t.$accordion_icon.val(e.blockData.accordion.icon);var o=tinyMCE.get("rex-accordion-header-val");if("undefined"==typeof o||null===o?(t.$accordion_header.val(e.blockData.accordion.header),t.$accordion_header.text(e.blockData.accordion.header)):(o.setContent(e.blockData.accordion.header),o.save({no_events:!0})),t.$accordion_preview_gallery.empty(),e.blockData.accordion.is_gallery)for(var a=l(e.blockData.accordion.content),n=0;n<a.length;n++)t.$accordion_preview_gallery.append(tmpl("tmpl-accordion-gallery-item",{id:a[n].id,preview:a[n].url,url:a[n].url,size:a[n].size}));else{var r=tinyMCE.get("rex-accordion-content-val");"undefined"==typeof r||null===r?(t.$accordion_content.val(e.blockData.accordion.content),t.$accordion_content.text(e.blockData.accordion.content)):(r.setContent(e.blockData.accordion.content),r.save({no_events:!0}))}},s=function(){var e=(tinyMCE.get("rex-accordion-header-val"),tinyMCE.get("rex-accordion-content-val"),t.$accordion_state.prop("checked")),o="",a=r();if(a.length>0)for(var n=0;n<a.length;n++)o+=tmpl("tmpl-accordion-gallery-item-live",{id:a[n].id,url:a[n].url,size:a[n].size}).trim();tinyMCE.triggerSave();var l=t.$accordion_icon.val();""===l&&(l='<i class="rex-accordion--close-icon l-svg-icons"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#Z001-Plus"></use></svg></i>');var d={header:t.$accordion_header.val(),content:t.$accordion_content.val(),icon:"",complete:'<div class="rex-accordion'+(!0===e?" open":" close")+'"><div class="rex-accordion--toggle">'+t.$accordion_header.val()+'<span class="rex-accordion--toggle-icon">'+l+'</span></div><div class="rex-accordion--content'+(""!==o?" rex-accordion--gallery":"")+'"'+(!0!==e?' style="display:none;"':"")+">"+(""!==o?o:t.$accordion_content.val())+"</div></div>"},s={eventName:"rexlive:updateAccordion",data_to_send:{accordion:d,target:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(s)},c=function(){var i=e("#rex-block-accordion-editor");t={$self:i,$accordion_header:i.find("[name=rex-accordion-header-val]"),$accordion_icon:i.find("[name=rex-accordion-toggle-icon-val]"),$accordion_content:i.find("[name=rex-accordion-content-val]"),$accordion_state:i.find("[name=rex-accordion-open-close-val]"),$accordion_insert_gallery:i.find(".rex-accordion-content-gallery"),$accordion_preview_gallery:i.find(".rex-accordion-content-gallery__preview"),$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button")},n()};return{init:c,openModal:o}}(jQuery),Rexlive_Block_Slideshow=function(e){"use strict";var t,i,o=function(e){r(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$save_button.on("click",function(e){e.preventDefault(),l(),a()}),t.$add_slide.on("click",function(){var e=t.$slide_list.find(".rex-slideshow__slide").length,i=tmpl("tmpl-slideshow-item",{slide_id:e,slide_id_label:e+1});t.$slide_list.append(i),t.$slide_list.sortable("refresh")}),t.$self.on("click",".rex-slideshow__slide-edit",function(t){var i=e(this),o=i.parents(".rex-slideshow__slide"),a=this.getAttribute("value");switch(a){case"delete":o.remove();break;case"copy":}})},r=function(e){if(i=e.blockData.target,t.$slide_list.empty(),e.blockData.slideshow.slides.length>0)for(var o=0;o<e.blockData.slideshow.slides.length;o++){var a=tmpl("tmpl-slideshow-item",{slide_id:o,slide_id_label:o+1,slide_content:e.blockData.slideshow.slides[o]});t.$slide_list.append(a),t.$slide_list.sortable("refresh")}else{var a=tmpl("tmpl-slideshow-item",{slide_id:0,slide_id_label:1,slide_content:""});t.$slide_list.append(a),t.$slide_list.sortable("refresh")}},l=function(){var o='<div class="rex-slideshow">';t.$slide_list.find(".rex-slideshow__slide").each(function(t,i){o+='<div class="rex-slideshow__slide">'+e(i).find("textarea[name=rex-slideshow--slide-text]").val()+"</div>"}),o+="</div>";var a={eventName:"rexlive:updateSlideshow",data_to_send:{slideshow:{slides:o},target:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},d=function(t,i){var o=e(i.item).siblings().add(e(i.item));o.each(function(t,i){e(i).attr("data-slideshow-slide-id",t).find(".rex-slideshow__slide-index").text(t+1)})},s=function(){t.$slide_list.sortable({revert:!0,handle:".rex-slideshow__slide-edit[value=move]",update:function(e,t){d(e,t)}})},c=function(){var i=e("#rex-block-slideshow-editor");t={$self:i,$add_slide:i.find("#rex-slideshow__add-new-slide"),$slide_list:i.find(".rex-slideshow__slide-list"),$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button")},s(),n()};return{init:c,openModal:o}}(jQuery),Rexlive_Block_Background_Gradient=function(e){"use strict";var t,i,o=function(e){s(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var i=t.getEl().querySelector("#colorpicker"),o=e(i);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)})},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){u()}),t.$add_palette.on("click",function(e){e.preventDefault();var i=t.gpicker.getValue(),o=t.gpicker.getSafeValue(),a=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:i,gradient_preview:o,ID:a})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");c(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:i})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},s=function(e){i=e.blockData.target,c(e.blockData.gradient,!0)},c=function(e,i){var i="undefined"!=typeof i&&i;if(e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:i});var o=t.gpicker.getType(),a=t.gpicker.getDirection();t.$gradient_type.find("option[value="+o+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+a+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:i}),t.$gradient_type.val(""),t.$gradient_angle.val("")},u=function(){var e={eventName:"rexlive:updateBlockBackgroundGradient",data_to_send:{target:i,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},_=function(){var i=e("#rex-block-background-gradient-editor"),o="#gp-block-background-gradient";t={$self:i,$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button"),$gpicker:i.find(o),gpicker_selector:o,gpicker:null,$gradient_type:i.find("#block-background-gradient-type"),$gradient_angle:i.find("#block-background-gradient-angle"),$palette_list:i.find(".palette-list"),$add_palette:i.find(".palette__add-gradient")},n(),r(),d()};return{init:_,openModal:o,deletePaletteItem:l}}(jQuery),Rexlive_Text_Gradient=function(e){"use strict";var t,i,o=function(e){s(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var i=t.getEl().querySelector("#colorpicker"),o=e(i);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)})},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){u()}),t.$add_palette.on("click",function(e){e.preventDefault();var i=t.gpicker.getValue(),o=t.gpicker.getSafeValue(),a=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteColorGradient({gradient:i,gradient_preview:o,ID:a})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");c(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteColorGradient({ID:i})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},s=function(e){i=e.blockData.target,c(e.blockData.gradient,!0)},c=function(e,i){if(i="undefined"!=typeof i&&i,e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:!0});var o=t.gpicker.getType(),a=t.gpicker.getDirection();t.$gradient_type.find("option[value="+o+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+a+"]").prop("selected",!0),i||t.gpicker.change()}else t.gpicker.setValue("",{silent:i}),t.$gradient_type.val(""),t.$gradient_angle.val("")},u=function(){var e=t.gpicker.getValue(),o=t.$gradient_type.val(),a=t.$gradient_angle.val();a="135deg"===a?"top left":a,a="315deg"===a?"bottom right":a;var n=Rexlive_Gradient_Utils.getMarkup(o,a,t.gpicker.getHandlers(),"cover");if(""!==e){var r={eventName:"rexlive:setTextGradient",data_to_send:{target:i,color:e,style:n,active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}},_=function(){return t},p=function(){var i=e("#rex-text-gradient-editor"),o="#gp-text-gradient";t={$self:i,$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button"),$gpicker:i.find(o),gpicker_selector:o,gpicker:null,$gradient_type:i.find("#text-gradient-type"),$gradient_angle:i.find("#text-gradient-angle"),$palette_list:i.find(".palette-list"),$add_palette:i.find(".palette__add-gradient")},n(),r(),d()};return{init:p,openModal:o,deletePaletteItem:l,getProps:_}}(jQuery),Rexlive_Block_Overlay_Gradient=function(e){"use strict";var t,i,o=function(e){s(e),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.gpicker=new Grapick({el:t.gpicker_selector,colorEl:'<input id="colorpicker"/>'}),t.gpicker.setColorPicker(function(t){var i=t.getEl().querySelector("#colorpicker"),o=e(i);o.spectrum({color:t.getColor(),showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"sp-container-default",replacerClassName:"sp-replacer__gradient",clickoutFiresChange:!0,preferredFormat:"hex",show:function(){var e=o.spectrum("container")[0];e.style.top=parseInt(e.style.top)+10+"px",this.setAttribute("data-revert",!1),this.setAttribute("data-color-on-show",o.spectrum("get").toRgbString())},change:function(e){t.setColor(e.toRgbString())},move:function(e){t.setColor(e.toRgbString(),0)},hide:function(){"true"==this.getAttribute("data-revert")&&t.setColor(this.getAttribute("data-color-on-show"),0)}}),Rexbuilder_Util_Admin_Editor.addSpectrumCustomSaveButton(o),Rexbuilder_Util_Admin_Editor.addSpectrumCustomCloseButton(o)})},r=function(){t.$close_button.on("click",function(e){e.preventDefault(),a()}),t.$gradient_type.on("change",function(e){t.gpicker.setType(this.value)}),t.$gradient_angle.on("change",function(e){t.gpicker.setDirection(this.value)}),t.gpicker.on("change",function(e){u()}),t.$add_palette.on("click",function(e){e.preventDefault();var i=t.gpicker.getValue(),o=t.gpicker.getSafeValue(),a=Rexbuilder_Util_Admin_Editor.createRandomID(4);Rexlive_Ajax_Calls.savePaletteOverlayGradient({gradient:i,gradient_preview:o,ID:a})}),t.$self.on("click",".palette-item",function(e){e.preventDefault();var t=this.getAttribute("data-gradient-value");c(t,!1)}),t.$self.on("click",".palette-item__delete",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.parentElement,i=t.getAttribute("data-gradient-id");Rexlive_Ajax_Calls.deletePaletteOverlayGradient({ID:i})})},l=function(t){e(t).remove()},d=function(){t.$palette_list.find(".palette-item").each(function(e,t){t.style.background=Rexbuilder_Util_Admin_Editor.getGradientSafeValue(t.getAttribute("data-gradient-value"))})},s=function(e){i=e.blockData.target,c(e.blockData.gradient,!0)},c=function(e,i){var i="undefined"!=typeof i&&i;if(e="undefined"!=typeof e?e:"",""!==e&&-1!==e.indexOf("gradient")){t.gpicker.setValue(e,{silent:i});var o=t.gpicker.getType(),a=t.gpicker.getDirection();t.$gradient_type.find("option[value="+o+"]").prop("selected",!0),t.$gradient_angle.find("option[value="+a+"]").prop("selected",!0)}else t.gpicker.setValue("",{silent:i}),t.$gradient_type.val(""),t.$gradient_angle.val("")},u=function(){var e={eventName:"rexlive:updateBlockOverlayGradient",data_to_send:{target:i,color:t.gpicker.getValue(),active:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},_=function(){var i=e("#rex-block-overlay-gradient-editor"),o="#gp-block-overlay-gradient";t={$self:i,$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button"),$gpicker:i.find(o),gpicker_selector:o,gpicker:null,$gradient_type:i.find("#block-overlay-gradient-type"),$gradient_angle:i.find("#block-overlay-gradient-angle"),$palette_list:i.find(".palette-list"),$add_palette:i.find(".palette__add-gradient")},n(),r(),d()};return{init:_,openModal:o,deletePaletteItem:l}}(jQuery),Block_Url_Modal=function(e){"use strict";var t,i,o,a=function(){t.$urlInput.val(i)},n=function(e){o=e.target,t.$urlInput.val(e.link),""==e.link?t.$urlInput.siblings("label, .prefix").removeClass("active"):t.$urlInput.siblings("label, .prefix").addClass("active")},r=function(){var e=t.$urlInput.val(),i={eventName:"rexlive:apply_block_link_url",data_to_send:{url:e,target:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(i)},l=function(){t.$urlInput.blur(function(e){r()})},d=function(e){var o=e.find(".block-url-link-wrapper");t={$urlInput:o.find("#block_link_value")},i="",a(),l()};return{init:d,updateBlockUrl:n,resetBlockUrl:a}}(jQuery),BlockOptions_Modal=function(e){"use strict";var t,i=function(e){Background_Block_Color_Modal.updateColorModal(e.bgColor),Overlay_Color_block_Modal.updateOverlayModal(e.overlay),Background_Block_Image_Modal.updateImageModal(e.imageBG),Block_Video_Background_Modal.updateVideoModal(e.bgVideo),BlockPaddings_Modal.updatePaddings(e.paddings),Block_Content_Positions_Setting.updatePosition(e.flexPosition),Block_Image_Positions_Modal.updatePosition(e.flexImgPosition),Block_CustomClasses_Modal.updateCustomClasses(e.customClasses),Block_Url_Modal.updateBlockUrl(e.linkBlock),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},o=function(e){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.on("click",function(e){e.preventDefault(),o()})},n=function(){var i=e("#rex-block-options");t={$self:i,$close_button:i.find(".rex-modal__close-button")},a(),Background_Block_Color_Modal.init(i),Overlay_Color_block_Modal.init(i),Background_Block_Image_Modal.init(i),Block_Video_Background_Modal.init(i),BlockPaddings_Modal.init(i),Block_Content_Positions_Setting.init(i),Block_Image_Positions_Modal.init(i),Block_Image_Editor_Modal.init(i),Block_CustomClasses_Modal.init(i),Block_Url_Modal.init(i)};return{init:n,openBlockOptionsModal:i}}(jQuery),Model_Modal=function(e){"use strict";var t,i,o,a,n,r,l,d,s=function(s){r=s.sectionTarget,l=s.modelID,o=s.shortCode,a=s.layouts,n=s.layoutsNames,i=!1,d=s.modelsNumbers,e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(i){if(i.success){var o=[],a={id:"0",founded:!0};o.push(a),t.$model_import.children().each(function(t,i){var a=e(i).val();if("0"!=a){var n={id:a,founded:!1};o.push(n)}});var n,r,d=i.data.updated_list;for(n=0;n<d.length;n++)d[n].founded=!1;for(n=0;n<d.length;n++)for(r=0;r<o.length;r++)if(d[n].id==o[r].id){d[n].founded=!0,o[r].founded=!0;break}for(n=0;n<d.length;n++)d[n].founded||t.$model_import.children().eq(0).after('<option value="'+d[n].id+'">'+d[n].name+"</option>");for(n=0;n<o.length;n++)o[n].founded||t.$model_import.find("option[value="+o[n].id+"]").remove();t.$model_name.val(""),t.$model_import.find("option[value=0]").prop("selected",!0),""!=l&&(t.$model_import.find("option[value=0]").prop("selected",!1),t.$model_import.find("option[value="+l+"]").prop("selected",!0)),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},c=function(e){t.$model_import_wrap.removeClass("hide-import-wrap"),t.$model_insert_success_wrap.text(""),s(e)},u=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},_=function(){t.$save_button.click(function(e){e.preventDefault(),u()}),t.$cancel_button.click(function(e){e.preventDefault(),u()}),t.$model_import.on("change",function(o){var a=t.$model_import.val();if(""!=a&&"0"!=a&&!i){t.$self.addClass("rex-modal--loading");var n={ID:a};e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_live",nonce_param:live_editor_obj.rexnonce,model_data:n},success:function(e){if(e.success){for(var t={eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:jQuery.extend(!0,{},r),model:e.data.model,modelName:e.data.name,modelID:e.data.id,customizationsData:e.data.customizations_data,customizationsNames:e.data.customizations_names}},i=e.data.sectionRexID[0][1],o=!1,a=1,n=0;n<d.length;n++)e.data.id==d[n].modelID&&(o=!0,d[n].number+=1,a=d[n].number);o||d.push({modelID:e.data.id,number:a}),r={sectionID:i,modelNumber:a},Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})}}),t.$model_name.on("keyup",function(e){var i="which"in e?e.which:e.keyCode;13===i&&t.$add_new_model.trigger("click")}),t.$model_name.on("focusout",function(e){e.preventDefault(),t.$model_name.parent().removeClass("input-active")}),t.$model_name.on("focusin",function(e){e.preventDefault(),t.$model_name.parent().addClass("input-active")}),t.$add_new_model.on("click",function(){if(""!=t.$model_name.val()){t.$self.addClass("setting-saving");var l=t.$model_name.val(),d={post_title:l,post_content:o},s={modelID:-1,modelTitle:"",modelHtml:""};e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_model_from_builder",nonce_param:live_editor_obj.rexnonce,model_data:d},success:function(o){if(o.success){t.$model_import_wrap.addClass("hide-import-wrap");var d=o.data.model_id;s.modelID=d,s.modelTitle=l,s.modelHtml=o.data.model_html;for(var c=[],_=0;_<a.length;_++){var p=a[_].name,m=a[_].targets;c.push(e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization",nonce_param:live_editor_obj.rexnonce,model_id_to_update:d,targets:JSON.stringify(m),layout_name:p},success:function(e){},error:function(e){},complete:function(e){}}))}c.push(e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_customization_names",nonce_param:live_editor_obj.rexnonce,model_id_to_update:d,names:n},success:function(e){},error:function(e){},complete:function(e){}})),e.when.apply(e,c).then(function(){t.$self.removeClass("rex-modal--loading");var e=s.modelID,o=s.modelTitle,l=s.modelHtml;t.$model_name.val("").siblings("label").removeClass("active"),t.$save_button.val(""),t.$model_import.children().eq(0).after('<option value="'+e+'">'+o+"</option>"),t.$model_import.find("option[value="+e+"]").prop("selected",!0);var d={eventName:"rexlive:applyModelSection",data_to_send:{sectionTarget:r,model:l,modelName:o,modelID:e,customizationsData:a,customizationsNames:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:e,rexlive_model_name:o}),Rexbuilder_Util_Admin_Editor.updateModelId(e),Rexbuilder_Util_Admin_Editor.updateModelState(),i=!0,t.$model_insert_success_wrap.text("Model inserted"),Model_Import_Modal.updateModelList(),setTimeout(function(){u(),t.$self.removeClass("setting-saving")},1e3)}).fail(function(){}).always(function(){})}},error:function(e){t.$model_import_wrap.addClass("hide-import-wrap"),t.$model_name.val(live_editor_obj.labels.models.name_error)},complete:function(e){}})}else t.$model_name.focus()})},p=function(){var a=e("#rex-model-block"),n=a;t={$self:a,$save_button:n.find(".rex-save-button"),$cancel_button:n.find(".rex-cancel-button"),$model_import:n.find("#rex-model__import"),$model_name:n.find("#rex-model__name"),$add_new_model:n.find("#rex-model__add-new-model"),$model_import_wrap:n.find(".rex-model__import--wrap-active"),$model_insert_success_wrap:n.find(".rex-model__model-insert-success-wrap")},i=!1,l="",o="",_()};return{init:p,openModal:c,closeModal:u}}(jQuery),Rexlive_Model_Edit_Name_Modal=function(e){"use strict";var t,i,o=function(e){t.model_name.value=e.name?e.name:"",i=e.name?e.name:"",Rexlive_Base_Settings.addClass(t.model_name,"active"),t.model_name.setAttribute("data-rex-model-id",e.id),Rexlive_Modals_Utils.openModal(t.$modal),t.model_name.focus()},a=function(){t.model_name.blur(),Rexlive_Modals_Utils.closeModal(t.$modal),t.model_name.value="",i="",t.model_name.setAttribute("data-rex-model-id",""),Rexlive_Base_Settings.removeClass(t.model_name,"active")},n=function(){t.save_button.addEventListener("click",function(e){e.preventDefault(),t.model_name.value!==i&&Model_Import_Modal.editModelName({id:t.model_name.getAttribute("data-rex-model-id"),name:t.model_name.value}),a()}),t.cancel_button.addEventListener("click",function(e){e.preventDefault(),a()}),t.$model_name.on("keyup",function(e){var i="which"in e?e.which:e.keyCode;13===i&&t.$save_button.trigger("click")})},r=function(){var i=document.getElementById("rex-model__edit-name__modal"),o=e(i);t={$self:o,$modal:o.parent(".rex-modal-wrap"),save_button:i.querySelector("#rex-model__edit-name__save"),$save_button:null,cancel_button:i.querySelector(".rex-cancel-button"),model_name:i.querySelector("#rex-model__edit-name"),$model_name:null},t.$save_button=e(t.save_button),t.$model_name=e(t.model_name),n()};return{init:r,openModal:o,closeModal:a}}(jQuery),Open_Models_Warning=function(e){"use strict";var t,i=function(e){t.$models_list.empty();for(var i=0;i<e.length;i++)t.$models_list.append('<span class="modal-info--highlight">'+e[i].m_name+(i!=e.length-1?", ":"")+"</span>");Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},o=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.on("click",function(){o()})},n=function(){var i=e("#rex-open-models-warning"),o=i;t={$self:i,$close_button:o.find(".rex-modal__close-button"),$models_list:o.find(".open-models-list")},a()};return{init:n,openModal:i,closeModal:o}}(jQuery),CustomLayouts_Modal=function(e){"use strict";var t,i,o,a=function(){var i,o,a=4;do o=!0,i=Rexbuilder_Util_Admin_Editor.createRandomID(a),t.$layoutsList.find(".layout__item").each(function(){e(this).find("input[name=rexlive-layout-id]").val()==i&&(o=!1)});while(!o);return i},n=function(t){e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_custom_layouts",nonce_param:live_editor_obj.rexnonce,custom_layouts:t},success:function(e){e.success},error:function(e){}})},r=function(){var i=[];return t.$layoutsList.find(".layout__item").each(function(t,o){var a=e(o),n={id:a.find("input[name=rexlive-layout-id]").val(),label:a.find("input[name=rexlive-layout-label]").val(),min:a.find("input[name=rexlive-layout-min]").val(),max:a.find("input[name=rexlive-layout-max]").val(),type:a.find("input[name=rexlive-layout-type]").val()};i.push(n)}),i},l=function(e){for(var t=!1,i=!1,a=0;a<e.length;a++)if(o.id==e[a].id){t=!0,o.min!=e[a].min&&"default"!=e[a].id&&(i=!0,o.min=e[a].min,Rexbuilder_Util_Admin_Editor.updateLayoutActiveData(null),Rexbuilder_Util_Admin_Editor.updateIframeWidth(e[a].min));break}var n={eventName:"rexlive:updateLayoutsDimensions",data_to_send:{layouts:e,updateHeights:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(n),setTimeout(function(){t||(Rexbuilder_Util_Admin_Editor.setActiveLayout("default"),Rexbuilder_Util_Admin_Editor.updateLayoutPage({min:"",max:"",id:"default",label:"My Desktop",type:"standard"}),u("default"))},50,t)},d=function(e){t.$layoutDataContainer.text(JSON.stringify(e))},s=function(i){var o;t.$buttonsWrapper.find(".btn-builder-layout").each(function(t,a){var n=e(a);for(o=0;o<i.length;o++)if(n.attr("data-name")==i[o].id&&"default"!=i[o].id){n.attr("data-min-width")!=i[o].min&&n.attr("data-min-width",i[o].min),n.attr("data-max-width")!=i[o].max&&n.attr("data-max-width",i[o].max);break}}),t.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(t,i){e(i).find(".rex-number").text(t+1)})},c=function(){var e=r();s(e),d(e),l(e)},u=function(e){t.$layoutsList.find(".layout.active-on-page").removeClass("active-on-page"),t.$layoutsList.find('.layout input[name="rexlive-layout-id"][value="'+e+'"]').parents(".layout").addClass("active-on-page")},_=function(){Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("layout-window--active"),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},p=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap")),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("layout-window--active")},m=function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(Math.max(isNaN(parseInt(i.val()))?0:parseInt(i.val())-1,0))))):void((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault())},v=function(t){var i=e(t.target);if((t.keyCode>=48&&t.keyCode<=57||38==t.keyCode||40==t.keyCode||8==t.keyCode)&&(t.preventDefault(),i.parents(".layout__setting").find(".layout-value").text(i.val()+"px"),c()),13==t.keyCode||27==t.keyCode){t.preventDefault();var o=i.parents(".layout").eq(0);o.find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),o.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),o.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),o.parent().removeClass("editing"),o.find("input[data-editable-field=true]").attr("type","hidden")}},g=function(t){t.preventDefault();var i=e(t.target);if(i.parents(".layout__setting").find(".layout-value").text(i.val()),13==t.keyCode||27==t.keyCode){t.preventDefault();var o=i.parents(".layout").eq(0);o.find(".dashicons-before.dashicons-edit").removeClass("hide-icon"),o.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),o.find(".dashicons-before.dashicons-yes").addClass("hide-icon"),o.parent().removeClass("editing"),o.find("input[data-editable-field=true]").attr("type","hidden")}c()},f=function(){t.$close_button.click(function(e){e.preventDefault(),n(r()),p()}),t.$config_layouts.on("click",function(e){e.preventDefault(),i=Rexbuilder_Util_Admin_Editor.getActiveLayout(),o={id:"",min:"",max:""};var a=t.$buttonsWrapper.find('div[data-name="'+i+'"]');o.id=a.attr("data-name"),o.min=a.attr("data-min-width"),o.max=a.attr("data-max-width"),u(i),_()}),t.$add_custom_layout_button.on("click",function(){var i=a();tmpl.arg="customLayout";var o=e(tmpl("rexlive-tmpl-custom-layout-modal",{id:i,label:"",minWidth:"",maxWidth:"",type:"custom"}));t.$layoutsList.append(o[0]);var n=o.find(".layout").eq(0);switch(n.find(".dashicons-before.dashicons-edit").addClass("hide-icon"),n.find(".dashicons-before.dashicons-trash").removeClass("hide-icon"),n.find(".dashicons-before.dashicons-yes").removeClass("hide-icon"),n.parent().addClass("editing"),n.find("input[data-editable-field=true]").attr("type","input"),t.layoutListType){case"dropdown":t.$buttonsWrapper.find(".builder-add-custom-layout").parent().before(tmpl("rexlive-tmpl-custom-layout-button-list",{id:i,label:"",minWidth:"",maxWidth:"",type:"custom"}));break;case"list":default:t.$buttonsWrapper.append(tmpl("rexlive-tmpl-custom-layout-button",{id:i,label:"",minWidth:"",maxWidth:"",type:"custom"}))}Rexlive_Base_Settings.launchTooltips(),c()}),t.$self.on("click",".rexlive-layout--edit",function(t){e(t.currentTarget).find(".dashicons-before").toggleClass("hide-icon"),e(t.target).hasClass("dashicons-yes")?e(this).parents(".layout__item").eq(0).removeClass("editing").find("input[data-editable-field=true]").attr("type","hidden"):e(t.target).hasClass("dashicons-edit")&&e(this).parents(".layout__item").eq(0).addClass("editing").find("input[data-editable-field=true]").attr("type","input")}),t.$self.on("click",".rexlive-layout--delete",function(i){
if(confirm("Are you sure?")){var o=e(this).parents(".layout__item").find("input[name=rexlive-layout-id]").val();t.$buttonsWrapper.find('div[data-name="'+o+'"]').parent().remove(),e(this).parents(".layout__item").remove(),c()}}),t.$self.on("keydown","input.layout-min-input",function(e){m(e)}),t.$self.on("keydown","input.layout-max-input",function(e){m(e)}),t.$self.on("keyup","input.layout-min-input",function(e){v(e)}),t.$self.on("keyup","input.layout-max-input",function(e){v(e)}),t.$self.on("keyup","input.layout-label-input",function(e){g(e)})},b=function(){t.$layoutsList.children(".layout__item").each(function(t,i){var o=e(i);o.find('input[name="rexlive-layout-id"]').val()})},x=function(){var i=e("#rexlive-custom-layout-modal"),o=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find(".rexlive-responsive-buttons-wrapper"),a=Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.find("#rexbuilder-layout-data-backend > .avaiable-layouts");t={$self:i,$close_button:i.find(".rex-cancel-button"),$buttonsWrapper:o,$config_layouts:o.find(".builder-config-layouts"),$layoutDataContainer:a,$layoutsList:i.find(".layout__list"),$add_custom_layout_button:i.find("#rexlive-add-custom-layout"),layoutListType:i.attr("data-layout-list-type")},b(),f(),t.$layoutsList.sortable({items:".layout__item:not(.layout__item--standard)",handle:".rexlive-layout--move",stop:function(i,o){var a=o.item.find('input[name="rexlive-layout-id"]').val(),n=o.item.prev().find('input[name="rexlive-layout-id"]').val(),r=t.$buttonsWrapper.find('div[data-name="'+a+'"]').parent("div");if("default"!==n)var l=t.$buttonsWrapper.find('div[data-name="'+n+'"]').parent("div");else var l=t.$buttonsWrapper.find(".builder-add-custom-layout").parent("div");l.after(r.detach()),t.$buttonsWrapper.find('.btn-builder-layout[data-layout-type="custom"]').each(function(t,i){e(i).find(".rex-number").text(t+1)})}})};return{init:x}}(jQuery),Model_Edit_Modal=function(e){"use strict";var t,i,o,a=function(a){i=jQuery.extend(!0,{},a),o=a.layoutActive,t.$modelNamePreview.html('<span class="modal-info--highlight">'+a.modelName+"</span>"),t.$self.find(".rex-edit-option").each(function(t,i){var a=e(i);"edit"!=a.attr("data-rex-option")&&("default"!=o?a.addClass("rex-hide-option"):a.removeClass("rex-hide-option"))}),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$button.on("click",function(t){var o=e(this),a=o.attr("data-rex-option"),r={eventName:"",data_to_send:i};switch(a){case"remove":r.eventName="rexlive:modelBecameSection",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("REMOVE",i),Rexbuilder_Util_Admin_Editor.highlightRowSetData({rexlive_model_id:"",rexlive_model_name:""}),Rexbuilder_Util_Admin_Editor.updateModelId(""),Rexbuilder_Util_Admin_Editor.updateModelState();break;case"edit":r.eventName="rexlive:editModel",Rexbuilder_Util_Admin_Editor.updateOpenModelsList("OPEN",i),Rexbuilder_Util_Admin_Editor.updateModelEditing("true"),Rexbuilder_Util_Admin_Editor.updateModelState()}Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r),n()}),t.$close_button.on("click",function(){n()})},l=function(){var o=e("#rex-edit-model-choose"),a=o;t={$self:o,$button:a.find(".rex-button"),$close_button:a.find(".rex-modal__close-button"),$modelNamePreview:a.find(".info-model-name")},i={},r()};return{init:l,openModal:a,closeModal:n}}(jQuery),Rexbuilder_RexSlider=function(e){function t(e,t,i){if(i="undefined"!=typeof i?i:null,r)return r.state("upload-slide").set("$data",e),r.state("upload-slide").set("$preview",t),r.state("upload-slide").set("image_id",i),void r.open();var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide",title:"Select Slide Image",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",$data:e,$preview:t,image_id:i},wp.media.controller.Library.prototype.defaults)});r=wp.media({button:{text:"Select"},state:"upload-slide",states:[new o]}),r.on("close",function(){var t=r.state("upload-slide").get("selection");0==t.length&&e.val()}),r.on("select",function(){var e=r.state("upload-slide"),t=e.get("selection");t&&t.each(function(t){var i,o,a=e.display(t).toJSON(),n=t.toJSON(),l=n.caption;wp.media.view.settings.captions||delete n.caption,a=wp.media.string.props(a,n),i={id:n.id,post_content:n.description,post_excerpt:l},a.linkUrl&&(i.url=a.linkUrl),"image"===n.type||("video"===n.type?o=wp.media.string.video(a,n):"audio"===n.type?o=wp.media.string.audio(a,n):(o=wp.media.string.link(a),i.post_title=a.title)),t.attributes.nonce=wp.media.view.settings.nonce.sendToEditor,t.attributes.attachment=i,t.attributes.html=o,t.attributes.post_id=wp.media.view.settings.post.id,r.state("upload-slide").get("$data").val(n.id),r.state("upload-slide").get("$preview").css("backgroundImage","url("+n.url+")").addClass("rex-slider__slide__image-preview--active")})}),r.on("open",function(){var e,t=r.state("upload-slide").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var i=r.state("upload-slide").get("image_id");i&&(e=wp.media.attachment(i),e.fetch(),t.add(e?[e]:[]))}),r.open()}function i(e){if(l)return l.state("upload-slide-video").set("$data",e),void l.open();var t=wp.media.controller.Library.extend({defaults:_.defaults({id:"upload-slide-video",title:"Select Slide Video",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"video"}),type:"video",$data:e},wp.media.controller.Library.prototype.defaults)});l=wp.media({button:{text:"Select"},state:"upload-slide-video",states:[new t]}),l.on("close",function(){var t=l.state("upload-slide-video").get("selection");0==t.length&&e.val()}),l.on("select",function(){var e=l.state("upload-slide-video"),t=e.get("selection");t&&t.each(function(t){var i={videoID:-1,videoUrl:""},o=e.display(t).toJSON(),a=t.toJSON();wp.media.view.settings.captions||delete a.caption,o=wp.media.string.props(o,a),i.videoID=a.id,i.videoUrl=a.url,l.state("upload-slide-video").get("$data").val(i.videoID),l.state("upload-slide-video").get("$data").attr("data-video-mp4-url",i.videoUrl)})}),l.on("open",function(){var e,t=l.state("upload-slide-video").get("selection");t.each(function(i){"undefined"!=typeof i&&(e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[]))});var i=l.state("upload-slide-video").get("$data").val();i&&(e=wp.media.attachment(i),e.fetch(),t.add(e?[e]:[]))}),l.open()}var o,a,n,r,l,d,s,c,u=function(){var t={slides:[],settings:{}},i=o.$modal.find(".rex-slider__slide");return i.length>0&&(t.settings.auto_start=o.$slider_autostart.prop("checked"),t.settings.prev_next=o.$slider_prev_next.prop("checked"),t.settings.dots=o.$slider_dots.prop("checked"),i.each(function(i,o){var a=e(o),n=a.children(".rex-slider__slide-data"),r=n.find("input[name=rex-slider--slide-id]").val(),l="",d=n.find("textarea[name=rex-slider--slide-text]").text(),s=n.find("input[name=rex-slider--slide-video-url]").val(),c=n.find("input[name=rex-slider--slide-video-type]").val(),u="",_=n.find("input[name=rex-slider--slide-video-audio]").val(),p=n.find("input[name=rex-slider--slide-url]").val();if("undefined"!=typeof r){var m=a.find(".rex-slider__slide__image-preview").css("background-image");l=m.replace("url(","").replace(")","").replace(/\"/gi,"")}"mp4"==c&&(u=n.find("input[name=rex-slider--slide-video-url]").attr("data-mp4-url"));var v={slide_image_id:r,slide_image_url:l,slide_text:d,slide_video:s,slide_videoMp4Url:u,slide_video_type:c,slide_video_audio:_,slide_url:p};t.slides.push(v)})),t},p=function(t,i){var o=e(i.item).siblings().add(e(i.item));o.each(function(t,i){e(i).attr("data-slider-slide-id",t).find(".rex-slider__slide-index").text(t+1)})},m=function(t,i){switch(n.$modal.removeClass(n.visibility_classes.join(" ")),n.$save_button.val("").val(i),t){case"video":n.$video_type.prop("checked",!1),n.$video_audio.prop("checked",!1),n.$video_youtube.val("").next().removeClass("active"),n.$video_mp4.val(""),n.$video_vimeo.val("").next().removeClass("active");var o=e(i),a=o.find("input[name=rex-slider--slide-video-type]").val(),r=o.find("input[name=rex-slider--slide-video-url]").val(),l=o.find("input[name=rex-slider--slide-video-audio]").val();if(r&&a)switch(n.$video_type.filter("[value="+a+"]").prop("checked",!0),n.$video_audio.prop("checked",l),a){case"youtube":n.$video_youtube.val(r).next().addClass("active");break;case"mp4":n.$video_mp4.val(r);break;case"vimeo":n.$video_vimeo.val(r).next().addClass("active")}n.$modal.addClass("video-links--visible");break;case"url":n.$link_value.val("").next().removeClass("active");var r=e(i).find("input[name=rex-slider--slide-url]").val();r&&n.$link_value.val(r).next().addClass("active"),n.$modal.addClass("url-links--visible")}Rexlive_Modals_Utils.openModal(n.$modal_wrap,!0)},v=function(e){o.$slider_autostart.prop("checked",!1),o.$slider_prev_next.prop("checked",!1),o.$slider_dots.prop("checked",!1);for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];switch(t){case"auto_start":"true"==i&&o.$slider_autostart.prop("checked",!0);break;case"prev_next":"true"==i&&o.$slider_prev_next.prop("checked",!0);break;case"dots":"true"==i&&o.$slider_dots.prop("checked",!0)}}},g=function(){o.$slider_autostart.prop("checked",!1),o.$slider_prev_next.prop("checked",!1),o.$slider_dots.prop("checked",!1),o.$slide_list.empty(),o.$slider_import.val("0"),o.$modal.removeClass("rex-slider-block--editing"),o.$slide_title.prop("disabled",!0)},f=function(t,i,n,r){g(),t="undefined"!=typeof t?t:"",i="undefined"!=typeof i?i:"",n="undefined"!=typeof n?n:"",c=r,t&&i&&n?(o.$save_button.attr("data-block-to-edit",t),o.$save_button.attr("data-slider-to-edit",n),o.$undo_button.attr("data-slider-to-edit",n),o.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,data:i,slider_id:n},success:function(e){e.success&&(v(e.data.rexslider_attrs),o.$slide_title.val(Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),o.$slide_list.append(e.data.slides_markup),o.$slide_list.sortable("refresh"),o.$modal.removeClass("rex-modal--loading"))},error:function(e){o.$modal.removeClass("rex-modal--loading")}}),Rexlive_Modals_Utils.openModal(o.$modal_wrap)):(o.$slider_autostart.prop("checked",!0),o.$slider_prev_next.prop("checked",!0),o.$slider_dots.prop("checked",!0),o.$save_button.attr("data-block-to-edit",""),o.$save_button.attr("data-slider-to-edit",""),o.$slide_title.val(live_editor_obj.labels.slider.new_slider).prop("disabled",!1),o.$slide_list.append(a.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),o.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.openModal(o.$modal_wrap))},b=function(t,i,a,n,r,l){function d(e){return e<10?"0"+e:e}var s,u="undefined"!=typeof n&&n,_="undefined"!=typeof r&&r;s=""!=a||u?a:0,"undefined"!=typeof l&&(c=l);var p=o.$slide_title.val();if(""==p||"New Slider"==p){var m=new Date;p="SLIDER_"+m.getFullYear().toString()+d(m.getMonth()+1)+d(m.getDate())+d(m.getHours())+d(m.getMinutes())+d(m.getSeconds())}else if(u)if(p.indexOf(" - copy")!=-1){for(var v,g=/copy(?:\s+([0-9]+))*/gm,f=-1;null!==(v=g.exec(p));)v.index===g.lastIndex&&g.lastIndex++,f="undefined"==typeof v[1]?0:parseInt(v[1]);p=p.replace(g,""),f+=1,p+="copy "+f}else p+=" - copy";a&&!u?e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:t,slider_id:a,sliderTitle:p},success:function(e){if(e.success&&!_){o.$slider_import.find("option[value="+e.data.slider_id+"]").text(live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix).attr("data-rex-slider-title",e.data.slider_title);var a={eventName:"",data_to_send:{id:e.data.slider_id,settings:t.settings,slides:t.slides,target:c}};i?a.eventName="rexlive:updateSlider":a.eventName="rexlive:insert_new_slider",Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}},error:function(e){}}):e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_create_slider_from_builder",nonce_param:live_editor_obj.rexnonce,slider_data:t,sliderTitle:p},success:function(e){if(e.success){var a={eventName:"",data_to_send:{id:e.data.slider_id,settings:t.settings,slides:t.slides,target:c}};u?a.eventName="rexlive:newSliderSavedOnDB":i?a.eventName="rexlive:updateSlider":a.eventName="rexlive:insert_new_slider",o.$slider_import.children().first().after('<option value="'+e.data.slider_id+'" data-rex-slider-title="'+e.data.slider_title+'">'+live_editor_obj.labels.slider.list_title_prefix+e.data.slider_title+live_editor_obj.labels.slider.list_title_suffix+"</option>"),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}},error:function(e){}})},x=function(){n.$video_youtube.on("change keyup paste",function(){""!=e(this).val()?n.$video_type.filter("[value=youtube]").attr("checked",!0):n.$video_type.filter("[value=youtube]").attr("checked",!1)}),n.$video_vimeo.on("change keyup paste",function(){""!=e(this).val()?n.$video_type.filter("[value=vimeo]").attr("checked",!0):n.$video_type.filter("[value=vimeo]").attr("checked",!1)}),Rexlive_Base_Settings.$document.on("click",".rex-slider__slide-edit",function(i){i.preventDefault();var a=e(this),n=a.parents(".rex-slider__slide"),r=n.find(".rex-slider__slide-data"),l=a.attr("value"),d=n.attr("data-slider-slide-id");switch(l){case"add-slide":var s=r.find("input[name=rex-slider--slide-id]"),c=n.find(".rex-slider__slide__image-preview");t(s,c);break;case"edit-slide":var s=r.find("input[name=rex-slider--slide-id]"),c=n.find(".rex-slider__slide__image-preview"),u=s.val();t(s,c,u);break;case"text":var _=r.find("textarea[name=rex-slider--slide-text]"),p=_.text(),v=".rex-slider__slide[data-slider-slide-id="+d+"]";Rexlive_RexSlider_TextEditor.openTextEditor(v,p,!0,["hide-padding-position"]);break;case"video":o.$modal.addClass("push-down-modal"),m("video",".rex-slider__slide[data-slider-slide-id="+d+"]");break;case"url":o.$modal.addClass("push-down-modal"),m("url",".rex-slider__slide[data-slider-slide-id="+d+"]");break;case"copy":var g=parseInt(o.$modal.find(".rex-slider__slide").length),f=n.clone();f.attr("data-slider-slide-id",g),f.find(".rex-slider__slide-index").text(g+1),o.$slide_list.append(f),o.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(o.$modal);break;case"delete":n.remove(),o.$modal.find(".rex-slider__slide").each(function(t,i){e(i).attr("data-slider-slide-id",t).find(".rex-slider__slide-index").text(t+1)}),Rexlive_Modals_Utils.resetModalDimensions(o.$modal)}}),o.$add_new_slide.on("click",function(){var e=parseInt(o.$modal.find(".rex-slider__slide").length),t=a.replace(/\bdata.slideindex\b/g,e).replace(/\bdata.slideindexfront\b/g,e+1);o.$slide_list.append(t),o.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(o.$modal)}),o.$cancel_button.on("click",function(){s||Rexlive_Modals_Utils.closeModal(o.$modal_wrap)}),o.$undo_button.on("click",function(){if(!s){var t=e(this).attr("data-slider-to-edit");""===t?(o.$slider_autostart.prop("checked",!0),o.$slider_prev_next.prop("checked",!0),o.$slider_dots.prop("checked",!0),o.$save_button.attr("data-block-to-edit",""),o.$save_button.attr("data-slider-to-edit",""),o.$slide_title.val(live_editor_obj.labels.slider.new_slider),o.$slide_list.empty().append(a.replace(/\bdata.slideindex\b/g,"0").replace(/\bdata.slideindexfront\b/g,"1")),o.$slide_list.sortable("refresh")):(o.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:t},success:function(e){v(e.data.rexslider_attrs),o.$slide_list.empty().append(e.data.slides_markup),o.$slide_list.sortable("refresh"),o.$slide_title.val(live_editor_obj.labels.slider.copy_slider+Rexlive_Base_Settings.htmlDecode(e.data.slider.title)),o.$undo_button.attr("data-slider-to-edit",t),o.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(o.$modal)},error:function(e){o.$modal.removeClass("rex-modal--loading")}}))}}),o.$save_button.on("click",function(t){if(!s){var i=u(),a=e(this).attr("data-block-to-edit"),n=e(this).attr("data-slider-to-edit");b(i,a,n),Rexlive_Modals_Utils.closeModal(o.$modal_wrap)}}),o.$slider_import.on("change",function(t){t.preventDefault();var i=e(this).val();if("0"!=i)o.$modal.addClass("rex-modal--loading"),e.ajax({type:"POST",url:live_editor_obj.ajaxurl,data:{action:"rex_create_rexslider_admin_markup",nonce_param:live_editor_obj.rexnonce,slider_id:i},success:function(e){v(e.data.rexslider_attrs),o.$slide_list.empty().append(e.data.slides_markup),o.$slide_list.sortable("refresh");var t=Rexlive_Base_Settings.htmlDecode(e.data.slider.title),a=h(t);o.$slide_title.val(live_editor_obj.labels.slider.copy_slider+(0!==a?a+"-":"")+t),o.$undo_button.attr("data-slider-to-edit",i),o.$modal.removeClass("rex-modal--loading"),Rexlive_Modals_Utils.resetModalDimensions(o.$modal)},error:function(e){o.$modal.removeClass("rex-modal--loading")}});else{o.$save_button.attr("data-slider-to-edit",""),o.$undo_button.attr("data-slider-to-edit",""),o.$slide_list.empty(),o.$slider_autostart.prop("checked",!0),o.$slider_prev_next.prop("checked",!0),o.$slider_dots.prop("checked",!0),o.$slide_title.val(live_editor_obj.labels.slider.new_slider);var n=0,r=a.replace(/\bdata.slideindex\b/g,n).replace(/\bdata.slideindexfront\b/g,n+1);o.$slide_list.append(r),o.$slide_list.sortable("refresh"),Rexlive_Modals_Utils.resetModalDimensions(o.$modal)}}),n.$cancel_button.on("click",function(){o.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(n.$modal_wrap,!0)}),n.$save_button.on("click",function(){var t=e(this.value);if(n.$modal.hasClass("video-links--visible")){var i=n.$video_type.filter(":checked").val(),a="",r="";switch(t.find("input[name=rex-slider--slide-video-type]").val(i),i){case"youtube":a=n.$video_youtube.val();break;case"mp4":a=n.$video_mp4.val(),r=n.$video_mp4.attr("data-video-mp4-url");break;case"vimeo":a=n.$video_vimeo.val()}""!=a?(t.find("input[name=rex-slider--slide-video-url]").val(a).attr("data-mp4-url",r),t.find(".rex-slider__slide-edit[value=video]").addClass("rex-slider__slide-edit__field-active-notice")):t.find(".rex-slider__slide-edit[value=video]").removeClass("rex-slider__slide-edit__field-active-notice"),t.find("input[name=rex-slider--slide-video-audio]").val(n.$video_audio.prop("checked"))}else if(n.$modal.hasClass("url-links--visible")){var l=n.$link_value.val();""!=l?(t.find("input[name=rex-slider--slide-url]").val(l),t.find(".rex-slider__slide-edit[value=url]").addClass("rex-slider__slide-edit__field-active-notice")):(t.find("input[name=rex-slider--slide-url]").val(""),t.find(".rex-slider__slide-edit[value=url]").removeClass("rex-slider__slide-edit__field-active-notice"))}o.$modal.removeClass("push-down-modal"),Rexlive_Modals_Utils.closeModal(n.$modal_wrap,!0)}),n.$video_mp4_add.on("click",function(e){i(n.$video_mp4)}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_btn",function(t){var i=e(t.target),a=i.parents("#rex-slider-block").find(".rx__select-wrap");d=a.children("select").find(":selected"),a.addClass("editing-title-slider");var n=d.val();o.$slide_title.val(d.text()),o.$slide_title.attr("data-rex-slider-id",n),s=!0}),Rexlive_Base_Settings.$document.on("click","#edit_slider_title_live_btn",function(t){var i=e(t.target),a=i.parents("#rex-slider-block").find(".rx__select-wrap");d=a.children("select").find(":selected"),a.addClass("editing-title-slider"),o.$slide_title.prop("disabled",function(e,t){return!t})}),Rexlive_Base_Settings.$document.on("click","#save_slider_title_btn",function(t){var i=e(t.target),a=i.parents("#rex-slider-block").find(".rx__select-wrap"),n=o.$slide_title.val();d.text(n),o.$slide_title.attr("data-rex-slider-id",""),o.$slide_title.val(""),a.removeClass("editing-title-slider"),s=!1}),Rexlive_Base_Settings.$document.on("click","#cancel_slider_title_btn",function(t){var i=e(t.target),a=i.parents("#rex-slider-block").find(".rx__select-wrap");o.$slide_title.attr("data-rex-slider-id",""),o.$slide_title.val(""),a.removeClass("editing-title-slider"),s=!1})},h=function(e){var t=0,i="("+live_editor_obj.labels.slider.copy_slider+"(\\d-){0,1}){0,1}"+e,a=new RegExp(i,"");return o.$slider_import.find("option").each(function(e,i){return"0"===i.value||void(null!==i.getAttribute("data-rex-slider-title").match(a)&&t++)}),t},$=function(){a=e("#rex-slider__new-slide-tmpl").html().trim(),o={$modal:e("#rex-slider-block"),$modal_wrap:null,$cancel_button:null,$undo_button:null,$save_button:null,$add_new_slide:null,$slide_list:null,$slide_title:null,$slider_autostart:null,$slider_prev_next:null,$slider_dots:null,$slider_import:null},o.$modal_wrap=o.$modal.parent(".rex-modal-wrap"),o.$cancel_button=o.$modal.find(".rex-modal__close-button"),o.$save_button=o.$modal.find(".rex-save-button"),o.$undo_button=o.$modal.find(".rex-undo-button"),o.$add_new_slide=o.$modal.find("#rex-slider__add-new-slide"),o.$slide_list=o.$modal.find(".rex-slider__slide-list"),o.$slide_title=o.$modal.find(".title-slider"),o.$slider_autostart=o.$modal.find("#rex-slider__autostart"),o.$slider_prev_next=o.$modal.find("#rex-slider__prev-next"),o.$slider_dots=o.$modal.find("#rex-slider__dots"),o.$slider_import=o.$modal.find("#rex-slider__import"),o.$slide_list.sortable({revert:!0,handle:".rex-slider__slide-edit[value=move]",update:function(e,t){p(e,t)}}),n={$modal:e("#rex-slider__links-editor"),$modal_wrap:null,$cancel_button:null,$save_button:null,visibility_classes:["video-links--visible","url-links--visible"],$link_value:null,$video_type:null,$video_youtube:null,$video_mp4:null,$video_mp4_add:null,$video_vimeo:null,$video_audio:null},n.$modal_wrap=n.$modal.parent(".rex-modal-wrap"),n.$cancel_button=n.$modal.find(".rex-cancel-button"),n.$save_button=n.$modal.find(".rex-save-button"),n.$link_value=n.$modal.find("#rex-slider__slide-url-link"),n.$video_type=n.$modal.find("input[name=rex-slide-choose-video]"),n.$video_mp4_add=n.$modal.find("#rex-slide-choose-mp4"),n.$video_youtube=n.$modal.find("#rex-slide__video-youtube"),n.$video_mp4=n.$modal.find("#rex-slide__video-mp4"),n.$video_vimeo=n.$modal.find("#rex-slide__video-vimeo"),n.$video_audio=n.$modal.find("#rex-slide__video--audio"),d=null,s=!1,x()};return{init:$,openSliderModal:f,saveSlider:b}}(jQuery),Change_Layout_Modal=function(e){"use strict";var t,i,o,a=function(e){i=e.activeLayout,o=e.buttonData,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),t.$layout_name_placholder.text(e.activeLayoutLabel)},n=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},r=function(){t.$button.on("click",function(t){var a=e(t.currentTarget),r=a.attr("data-rex-option");switch(r){case"save":Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving");var l={eventName:"rexlive:savePage",data_to_send:{buttonData:o}},d={eventName:"rexlive:saveModel",data_to_send:{buttonData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage({eventName:"rexlive:startChangeLayout"}),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active");break;case"continue":var s={eventName:"rexlive:dropChanges",data_to_send:{selected:i,eventName:"",buttonData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(s),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active btn-undo--active");break;case"abort":}n()})},l=function(){var i=e("#rex-layout-page-changed"),o=i;t={$self:i,$button:o.find(".rex-change-layout-option"),$layout_name_placholder:o.find(".layout-name")},r()};return{init:l,openModal:a,closeModal:n}}(jQuery),Rexlive_Inline_SVG=function(e){"use strict";var t,i=function(e){"undefined"!=typeof e.id?t.$icon_select_box.find('.select-box__input[value="'+e.id+'"]').prop("checked",!0):t.$icon_select_box.find('.select-box__input[value=""]').prop("checked",!0),Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},o=function(){t.$icon_select.val(""),t.selected_icon=null,Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$close_button.on("click",function(e){o()}),t.$save_button.on("click",function(e){var i=t.$icon_select_box.find(".select-box__input:checked"),a=i.val();if(""!==a){var n=i.attr("data-svg-class"),r={eventName:"rexlive:mediumEditor:inlineSVG",data_to_send:{svg_ID:a,svg_class:n}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}o()})},n=function(){var i=e("#rexlive-inline-svg"),o=i;t={$self:i,$close_button:o.find(".tool-button--close"),$save_button:o.find(".tool-button--save"),$icon_select:o.find("#rexlive-inline-svg-select"),$icon_select_box:o.find(".select-box__current"),selected_icon:null},a()};return{init:n,openModal:i,closeModal:o}}(jQuery),Rexlive_PostEdit=function(e){"use strict";var t,i=function(e){if(t)return t.state("live-media-edit").set("media_data",e),void t.open();var i=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-media-edit",title:"Edit Media",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),type:"image",media_data:e},wp.media.controller.Library.prototype.defaults)});t=wp.media({button:{text:"Select"},state:"live-media-edit",states:[new i]}),t.on("open",function(){var e,i=t.state("live-media-edit").get("selection");i.each(function(t){"undefined"!=typeof t&&(e=wp.media.attachment(t.attributes.id),e.fetch(),i.remove(e?[e]:[]))});var o=t.state("live-media-edit").get("media_data");"undefined"!=typeof o.mediaId&&""!==o.mediaId&&(e=wp.media.attachment(o.mediaId),e.fetch(),i.add(e?[e]:[]))}),t.on("select",function(){var e=t.state("live-media-edit"),i=e.get("selection");if(i){var o=e.get("media_data"),a=o.action,n=[];i.each(function(t){var i=e.display(t).toJSON(),o=t.toJSON();wp.media.view.settings.captions||delete o.caption;var a=wp.media.string.props(i,o);n.push({media_info:o,display_info:a})});var r="";switch(a){case"add":r="rexlive:liveMediaAdd";break;case"edit":r="rexlive:liveMediaEdit"}var l={eventName:r,data_to_send:{imgData:n,media_data:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l)}}),t.on("close",function(){}),t.open()};return{openMediaUploader:i}}(jQuery),Rexlive_PostEdit_MediaList=function(e){"use strict";var t,i,o=function(){i={$modal:e("#rex-live-media-list"),$listWrap:null,$addMedia:null,$close_button:null,mediaListAggregateSelector:null,completeReorderCallback:null,completeRemoveCallback:null,destinationSelector:null,addTmplId:null,tmplDataGeneration:null,completeAddCallback:null},i.$close_button=i.$modal.find(".rex-modal__close-button"),i.$listWrap=i.$modal.find("#rex-live-media-list__wrap"),i.$addMedia=i.$modal.find("#media-gallery__add-new-item"),t=i.$modal.parent(".rex-modal-wrap")},a=function(t,i){var o=e(i.item).siblings().add(e(i.item));o.each(function(t,i){e(i).attr("data-media-gallery-item-index",t).find(".media-gallery__item-index").text(t+1)})},n=function(e,t){var o=[];i.$listWrap.find(".media-gallery__item").each(function(e,t){o.push(t.getAttribute("data-media-gallery-item-element-id"))});var a={eventName:"rexlive:liveMediaReorder",data_to_send:{mediaList:o,mediaListAggregateSelector:i.mediaListAggregateSelector,completeReorderCallback:i.completeReorderCallback}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)},r=function(e){for(var t=0,o=e.length;t<o;t++){var r=tmpl("tmpl-editable-media-gallery-list-item",{index:t+1,id:e[t].id,src:e[t].src});i.$listWrap.append(r)}i.$listWrap.sortable({revert:!0,handle:'.media-gallery__item-edit[value="move"]',update:function(e,t){a(e,t),n(e,t)}}),i.$listWrap.disableSelection()},l=function(e){i.$listWrap.html(""),r(e.mediaList),i.mediaListAggregateSelector=e.mediaListAggregateSelector,i.completeReorderCallback=e.completeReorderCallback,i.completeRemoveCallback=e.completeRemoveCallback,i.destinationSelector=e.destinationSelector,i.addTmplId=e.addTmplId,i.tmplDataGeneration=e.tmplDataGeneration,i.completeAddCallback=e.completeAddCallback,Rexlive_Modals_Utils.openModal(t)},d=function(){i.$close_button.on("click",function(e){e.preventDefault(),i.mediaListAggregateSelector=null,i.completeReorderCallback=null,i.completeRemoveCallback=null,i.destinationSelector=null,i.addTmplId=null,i.tmplDataGeneration=null,i.completeAddCallback=null,Rexlive_Modals_Utils.closeModal(t)}),i.$addMedia.on("click",function(e){e.preventDefault(),Rexlive_PostEdit.openMediaUploader({action:"add",fromMediaListModal:!0,destinationSelector:i.destinationSelector,addTmplId:i.addTmplId,tmplDataGeneration:i.tmplDataGeneration,completeAddCallback:i.completeAddCallback})}),i.$listWrap.on("click",".media-gallery__item-edit",function(t){t.preventDefault();var o=e(t.currentTarget),a=o.parents(".media-gallery__item"),n=(a.attr("data-media-gallery-item-index"),a.attr("data-media-gallery-item-element-id")),r=t.currentTarget.getAttribute("value");switch(r){case"edit-media":var l={eventName:"rexlive:liveMediaOpenEdit",data_to_send:{elId:n,fromMediaListModal:!0}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"add-media":break;case"copy":break;case"delete":a.remove(),i.$listWrap.find(".media-gallery__item").each(function(t,i){e(i).attr("data-media-gallery-item-index",t).find(".media-gallery__item-index").text(t+1)});var l={eventName:"rexlive:liveMediaDelete",data_to_send:{elId:n,mediaListAggregateSelector:i.mediaListAggregateSelector,completeRemoveCallback:i.completeRemoveCallback}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"move":}})},s=function(e){var t=i.$listWrap.find(".media-gallery__item").length,o=tmpl("tmpl-editable-media-gallery-list-item",{index:t+1,src:e.src,id:e.fieldId});i.$listWrap.append(o)},c=function(e){var t=i.$listWrap.find('.media-gallery__item[data-media-gallery-item-element-id="'+e.fieldId+'"]');t.length>0&&t.find(".media-gallery__item__image-preview").css("backgroundImage","url("+e.src+")")},u=function(){o(),d()};return{init:u,openModal:l,addMediaItem:s,editMediaItem:c}}(jQuery),LockedOptionMask=function(e){"use strict";var t,i,o=function(e){i=e.buttonData,Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},a=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},n=function(){t.$button.on("click",function(t){var o=e(t.target),n=o.parents(".rex-locked-option-wrapper").attr("data-rex-option");switch(n){case"save":Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save").addClass("rex-saving");var r={eventName:"rexlive:savePage",data_to_send:{buttonData:i}},l={eventName:"rexlive:saveModel",data_to_send:{buttonData:i}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(l);break;case"abort":}a()})},r=function(){var i=e("#rex-locked-option"),o=i;t={$self:i,$button:o.find(".rex-button")},n()};return{init:r,openModal:o,closeModal:a}}(jQuery),Model_Import_Modal=function(e){"use strict";var t,i,o=function(t,i,o){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_save_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:t,image_selected:i,image_size:o,set_post_thumbnail_result:null,set_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})},a=function(t){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_delete_model_thumbnail",nonce_param:live_editor_obj.rexnonce,model_target:t,delete_post_thumbnail_result:null,delete_post_thumbnail_url_result:null},success:function(e){e.success},error:function(e){}})},n=function(i){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_edit_model_name",nonce_param:live_editor_obj.rexnonce,
modelData:i},success:function(e){e.success&&0!==e.data.update&&e.data.update===parseInt(e.data.modelData.id)&&(t.self.querySelector('[data-rex-model-id="'+e.data.modelData.id+'"] .model-name').innerHTML="<div>"+e.data.modelData.name+"</div>",l())},error:function(e){}})},r=function(){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(i){if(i.success){var o=[],a=!1;t.$self.find(".model__element").each(function(t,i){var a=e(i).attr("data-rex-model-id"),n={id:a,founded:!1};o.push(n)});var n,r,d=i.data.updated_list;for(n=0;n<d.length;n++)d[n].founded=!1;for(n=0;n<d.length;n++)for(r=0;r<o.length;r++)if(d[n].id==o[r].id){d[n].founded=!0,o[r].founded=!0;break}for(tmpl.arg="model",n=0;n<d.length;n++)if(!d[n].founded){a=!0;var s=tmpl("rexlive-tmpl-model-item-list",{id:d[n].id,name:d[n].name,preview:""!=d[n].preview_image_url?d[n].preview_image_url:""});t.$self.find(".model-list").prepend(s)}for(n=0;n<o.length;n++)o[n].founded||(a=!0,t.$self.find('.model__element[data-rex-model-id="'+o[n].id+'"]').remove());a&&l();var c=jQuery.Event("rexlive:lateralMenuReady");e(document).trigger(c)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},l=function(){var e=t.$self.find(".model-list")[0],i=[].slice.call(e.getElementsByClassName("model__element"));i.sort(function(e,t){var i=e.querySelector(".model-name").textContent.toUpperCase(),o=t.querySelector(".model-name").textContent.toUpperCase();return i<o?-1:i>o?1:0}),e.innerHTML="",i.forEach(function(t){e.appendChild(t)})},d=function(e){var i=e.getAttribute("data-rex-model-id");if(i){var o=confirm(live_editor_obj.labels.models.confirm_delete);if(o){var a={action:"rex_delete_rexmodel",nonce_param:live_editor_obj.rexnonce,model_id:i},n=Rexlive_Base_Settings.encodeData(a),r=new XMLHttpRequest;r.open("POST",live_editor_obj.ajaxurl,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.onloadstart=function(){t.$self.addClass("rex-modal--loading")},r.onload=function(){r.status>=200&&r.status<400&&(e.style.display="none")},r.onerror=function(){},r.onloadend=function(){t.$self.removeClass("rex-modal--loading")},r.send(n)}}},s=function(e,t){if(setUserSetting("imgsize","medium"),i)return i.state("live-image-model").set("selected_image",t).set("selected_model",e),void i.open();var o=wp.media.controller.Library.extend({defaults:_.defaults({id:"live-image-model",title:"Edit Model Thumbnail",allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,library:wp.media.query({type:"image"}),selected_image:t,selected_model:e,type:"image"},wp.media.controller.Library.prototype.defaults)});i=wp.media({button:{text:"Select"},state:"live-image-model",states:[new o]}),i.on("open",function(){var e,t=i.state("live-image-model").get("selection");t.each(function(i){e=wp.media.attachment(i.attributes.id),e.fetch(),t.remove(e?[e]:[])});var o=i.state("live-image-model").get("selected_image");o&&(e=wp.media.attachment(o),e.fetch(),t.add(e?[e]:[],{imgsize:""}))}),i.on("select",function(){var e=i.state("live-image-model"),t=e.get("liveTarget"),o=e.get("eventName"),a=(e.get("data_to_send"),e.get("selection")),n={eventName:o,data_to_send:{sectionTarget:t,target:t}};if(a){var r,l;a.each(function(t){r=e.display(t).toJSON(),l=t.toJSON(),wp.media.view.settings.captions||delete l.caption,r=wp.media.string.props(r,l),n.data_to_send.idImage=l.id,n.data_to_send.urlImage=r.src}),c(r.src,r.size,l.id)}}),i.on("close",function(){setUserSetting("imgsize","medium")}),i.open()},c=function(t,a,n){var r=i.state("live-image-model").get("selected_model"),l=e('.model__element[data-rex-model-id="'+r+'"]');l.attr("data-rex-model-thumbnail-id",n),l.attr("data-rex-model-thumbnail-size",a),l.find(".model-preview").addClass("model-preview--active").css("background-image",'url("'+t+'")'),l.find(".model__element--edit-thumbnail").addClass("tool-button--image-preview").css("background-image",'url("'+t+'")'),o(r,n,a)},u=function(t){var i=e('.model__element[data-rex-model-id="'+t+'"]');i.attr("data-rex-model-thumbnail-id",""),i.attr("data-rex-model-thumbnail-size",""),i.find(".model-preview").css("background-image",'url("")').removeClass("model-preview--active"),i.find(".tool-button--image-preview").css("background-image",'url("")').removeClass("tool-button--image-preview"),a(t)},r=function(){e.ajax({type:"GET",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_get_model_list",nonce_param:live_editor_obj.rexnonce},success:function(i){if(i.success){var o=[];t.$self.find(".model__element").each(function(t,i){var a=e(i).attr("data-rex-model-id"),n={id:a,founded:!1};o.push(n)});var a,n,r=i.data.updated_list;for(a=0;a<r.length;a++)r[a].founded=!1;for(a=0;a<r.length;a++)for(n=0;n<o.length;n++)if(r[a].id==o[n].id){r[a].founded=!0,o[n].founded=!0;break}for(tmpl.arg="model",a=0;a<r.length;a++)r[a].founded||t.$self.find(".model-list").prepend(tmpl("rexlive-tmpl-model-item-list",{id:r[a].id,name:r[a].name,preview:""!=r[a].preview_image_url?r[a].preview_image_url:""}));for(a=0;a<o.length;a++)o[a].founded||t.$self.find('.model__element[data-rex-model-id="'+o[a].id+'"]').remove();var l=jQuery.Event("rexlive:lateralMenuReady");e(document).trigger(l)}},error:function(e){},complete:function(e){t.$self.removeClass("rex-modal--loading")}})},p=function(){},m=function(){var t,i,o,a,n,r=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,l=e(r),d=!!document.documentMode,s=0,c=0;Rexlive_Base_Settings.$document.on("dragstart",".model-list li",function(t){Rexbuilder_Util_Admin_Editor.dragImportType="rexmodel",Rexbuilder_Util_Admin_Editor.blockIframeRows(),t.originalEvent.dataTransfer.effectAllowed="all",n=setInterval(function(){m.ProcessDragOverQueue()},100),tmpl.arg="o";var i={model_id:e(this).attr("data-rex-model-id")},o=tmpl("rexlive-tmpl-insert-model-loader",i);d?t.originalEvent.dataTransfer.setData("text",o):t.originalEvent.dataTransfer.setData("text/plain",o);var a={eventName:"rexlive:drag_drop_starded",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}),Rexlive_Base_Settings.$document.on("drag",".model-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),c<150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(-1)),c>l.height()-150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(1))}),Rexlive_Base_Settings.$document.on("dragend",".model-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),Rexbuilder_Util_Admin_Editor.releaseIframeRows(),clearInterval(n),m.removePlaceholder(),m.ClearContainerContext(),Rexbuilder_Util_Admin_Editor.dragImportType="";var t={eventName:"rexlive:drag_drop_ended",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var n=e(r.document).find(".rex-container").eq(0),d={};l.on("dragover",function(e){"rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType&&(e.preventDefault(),e.stopPropagation(),s=e.originalEvent.clientX,c=e.originalEvent.clientY)}),n.on("dragenter",function(n){"rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType&&(n.stopPropagation(),t=e(n.target),i=!0,o=n.target.getBoundingClientRect(),a=1)}),n.on("dragover",function(e){if("rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType){if(a%15!=0&&0==i)return void(a+=1);e=e||window.event,a+=1,i=!1,d.x=e.originalEvent.clientX,d.y=e.originalEvent.clientY,m.AddEntryToDragOverQueue(t,o,d)}}),n.on("drop",function(t){if("rexmodel"==Rexbuilder_Util_Admin_Editor.dragImportType){t.preventDefault(),t.stopPropagation();var i;i=t.isTrigger?triggerEvent.originalEvent:t.originalEvent;try{var o=i.dataTransfer.getData("text/plain"),a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker"),n=e(jQuery.parseHTML(o));n.insertAfter(a[0]),a.remove();var r={eventName:"rexlive:importModels"};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}catch(i){console.log(i)}}})});var u,_=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"],p=_.join(","),m={dragoverqueue:[],GetMouseBearingsPercentage:function(e,t,i){return t||(t=e.get(0).getBoundingClientRect()),{x:(i.x-t.left)/(t.right-t.left)*100,y:(i.y-t.top)/(t.bottom-t.top)*100}},OrchestrateDragDrop:function(e,t,i){if(!e||0==e.length||!t||!i)return!1;e.is("html")&&(e=e.find("body"));var o={x:50,y:50};if(u=this.GetMouseBearingsPercentage(e,t,i),u.x>o.x&&u.x<100-o.x&&u.y>o.y&&u.y<100-o.y){var a=e.clone();if(a.find(".drop-marker").remove(),""!=a.html()||this.checkVoidElement(a))if(0==a.children().length)this.DecideBeforeAfter(e,u);else if(1==a.children().length)this.DecideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),u);else{var n=this.findNearestElement(e,i.x,i.y);this.DecideBeforeAfter(n.el,u,i)}else if(u.y<90)return this.PlaceInside(e)}else if(u.x<=o.x||u.y<=o.y){var r=this.FindValidParent(e,"top");r.is("body,html")&&(r=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.DecideBeforeAfter(r,u,i)}else if(u.x>=100-o.x||u.y>=100-o.y){var r=this.FindValidParent(e,"bottom");r.is("body,html")&&(r=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.DecideBeforeAfter(r,u,i)}},DecideBeforeAfter:function(e,t,i){i&&(t=this.GetMouseBearingsPercentage(e,null,i));var o="inline"==e.css("display")||"inline-block"==e.css("display");return e.is("br")&&(o=!1),o?t.x<50?this.PlaceBefore(e):this.PlaceAfter(e):t.y<50?this.PlaceBefore(e):this.PlaceAfter(e)},checkVoidElement:function(e){return e.is(p)},calculateDistance:function(e,t,i){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-i,2))},FindValidParent:function(e,t){switch(t){case"left":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(a.left-i.left))return e;e=e.parent()}break;case"right":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(a.right-i.right))return e;e=e.parent()}break;case"top":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(a.top-i.top))return e;e=e.parent()}break;case"bottom":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("rex-container"))return e;if(0!=Math.abs(a.bottom-i.bottom))return e;e=e.parent()}}},addPlaceHolder:function(e,t,i){switch(e.hasClass("rex-container")&&(t="before"==t?"inside-prepend":"inside-append"),i||(i=this.getPlaceHolder()),this.removePlaceholder(),t){case"before":i.find(".message").html(e.parent().data("sh-dnd-error")),e.before(i),this.AddContainerContext(e,"sibling");break;case"after":i.find(".message").html(e.parent().data("sh-dnd-error")),e.after(i),this.AddContainerContext(e,"sibling");break;case"inside-prepend":i.find(".message").html(e.data("sh-dnd-error")),e.prepend(i),this.AddContainerContext(e,"inside");break;case"inside-append":i.find(".message").html(e.data("sh-dnd-error")),e.append(i),this.AddContainerContext(e,"inside")}},removePlaceholder:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker").remove()},getPlaceHolder:function(){return e("<div class='drop-marker drop-marker--view'><div class='drop-marker--ruler'></div></div>")},PlaceInside:function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},PlaceBefore:function(e){var t=this.getPlaceHolder(),i="inline"==e.css("display")||"inline-block"==e.css("display");if(e.is("br"))i=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t);i?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",t)},PlaceAfter:function(e){var t=this.getPlaceHolder(),i="inline"==e.css("display")||"inline-block"==e.css("display");if(e.is("br"))i=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t);i?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},findNearestElement:function(t,i,o){var a=this,n=null,r=t.children(":not(.drop-marker,[data-dragcontext-marker])");if(r.length>0){if(r.each(function(){if(!e(this).is(".drop-marker")){var t,r=e(this).get(0).getBoundingClientRect(),l=0,d=null,s="",c=r.left,u=r.right,_=r.top,p=r.bottom,m=null,v=null;return o>_&&o<p?m=i<c&&o<u?{x:c,y:o,position:"before"}:{x:u,y:o,position:"after"}:i>c&&i<u?m=o<_&&o<p?{x:i,y:_,position:"before"}:{x:i,y:p,position:"after"}:i<c&&i<u?(m={x:c,y:_,position:"before"},v={x:c,y:p,position:"after"}):i>c&&i>u?(m={x:u,y:_,position:"before"},v={x:u,y:p,position:"after"}):o<_&&o<p?(m={x:c,y:_,position:"before"},v={x:u,y:_,position:"after"}):o>_&&o>p&&(m={x:c,y:p,position:"before"},v={x:u,y:p,position:"after"}),t=a.calculateDistance(m,i,o),null!==v&&(d=a.calculateDistance(v,i,o)),t<d||null===d?(l=t,s=m.position):(l=d,s=v.position),null!==n&&n.distance<l||void(n={el:this,distance:l,xPosition1:c,xPosition2:u,yPosition1:_,yPosition2:p,position:s})}}),null!==n){var l=n.position;return{el:e(n.el),position:l}}return!1}},AddEntryToDragOverQueue:function(e,t,i){var o=[e,t,i];this.dragoverqueue.push(o)},ProcessDragOverQueue:function(e,t,i){var o=this.dragoverqueue.pop();if(this.dragoverqueue=[],o&&3==o.length){var a=o[0],n=o[1],i=o[2];this.OrchestrateDragDrop(a,n,i)}},GetContextMarker:function(){var t=e("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>");return t},AddContainerContext:function(e,t){var i=this.GetContextMarker();switch(this.ClearContainerContext(),e.is("html,body")&&(t="inside",e=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body")),t){case"inside":this.PositionContextMarker(i,e),e.hasClass("stackhive-nodrop-zone")&&i.addClass("invalid");var o=this.getElementName(e);if(i.find("[data-dragcontext-marker-text]").html(o),0==Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length)break;Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(i);case"sibling":this.PositionContextMarker(i,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&i.addClass("invalid");var o=this.getElementName(e.parent());if(i.find("[data-dragcontext-marker-text]").html(o),i.attr("data-dragcontext-marker",o.toLowerCase()),0==Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length)break;Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(i)}},PositionContextMarker:function(t,i){var o=i.get(0).getBoundingClientRect();t.css({height:o.height+4+"px",width:o.width+4+"px",top:o.top+e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollTop()-2+"px",left:o.left+e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow).scrollLeft()-2+"px"}),o.top+Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").scrollTop()<24&&t.find("[data-dragcontext-marker-text]").css("top","0px")},ClearContainerContext:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("[data-dragcontext-marker]").remove()},getElementName:function(e){return e.prop("tagName")}}},v=function(){var i=document.getElementById("rex-models-list"),o=e(i);t={self:i,$self:o},p(),m()};return{init:v,saveModelThumbnail:o,updateModelThumbnail:c,updateModelList:r,editModelThumbnail:s,resetModelThumbnail:u,deleteModel:d,editModelName:n}}(jQuery),Button_Import_Modal=function(e){"use strict";var t,i,o=function(e,t){"insertRule"in i?i.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",i.cssRules.length):"addRule"in i&&i.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container{'+t+"}",i.cssRules.length)},a=function(e,t){"insertRule"in i?i.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",i.cssRules.length):"addRule"in i&&i.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background{'+t+"}",i.cssRules.length)},n=function(e,t){"insertRule"in i?i.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",i.cssRules.length):"addRule"in i&&i.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text{'+t+"}",i.cssRules.length)},r=function(e,t){"insertRule"in i?i.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",i.cssRules.length):"addRule"in i&&i.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover{'+t+"}",i.cssRules.length)},l=function(e,t){"insertRule"in i?i.insertRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",i.cssRules.length):"addRule"in i&&i.addRule('.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover{'+t+"}",i.cssRules.length)},d=function(e){for(var t=0;t<i.cssRules.length;t++)if(i.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container'){i.deleteRule(t);break}},s=function(e){for(var t=0;t<i.cssRules.length;t++)if(i.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background'){i.deleteRule(t);break}},c=function(e,t){for(var o=0;o<i.cssRules.length;o++)if(i.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-text'){i.deleteRule(o);break}},u=function(e){for(var t=0;t<i.cssRules.length;t++)if(i.cssRules[t].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-background:hover'){i.deleteRule(t);break}},_=function(e,t){for(var o=0;o<i.cssRules.length;o++)if(i.cssRules[o].selectorText=='.rex-button-wrapper[data-rex-button-id="'+e+'"] .rex-button-container:hover'){i.deleteRule(o);break}},p=function(){if(0==Button_Import_Modal.$buttonsStyle.length){var e="",t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.id="rexliveStyle-inline-css",o.dataset.rexName="buttons-style",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t.appendChild(o)}for(var a=0;a<document.styleSheets.length;a++)"rexliveStyle-inline-css"==document.styleSheets[a].ownerNode.id&&(i=document.styleSheets[a])},m=function(e,t){var i={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},d="",s="",c="",u="",_="",p="";p+="color: "+t.text_color+";",_=isNaN(parseInt(t.font_size.replace("px","")))?i.font_size:t.font_size,p+="font-size: "+_+";",c=isNaN(parseInt(t.button_height.replace("px","")))?i.dimensions.height:t.button_height,p+="min-height: "+c+";",c=isNaN(parseInt(t.button_width.replace("px","")))?i.dimensions.width:t.button_width,p+="min-width: "+c+";",d=isNaN(parseInt(t.margin_top.replace("px","")))?i.margins.top:t.margin_top,p+="margin-top: "+d+";",d=isNaN(parseInt(t.margin_right.replace("px","")))?i.margins.right:t.margin_right,p+="margin-right: "+d+";",d=isNaN(parseInt(t.margin_bottom.replace("px","")))?i.margins.bottom:t.margin_bottom,p+="margin-bottom: "+d+";",d=isNaN(parseInt(t.margin_left.replace("px","")))?i.margins.left:t.margin_left,p+="margin-left: "+d+";",o(e,p);var m="";m+="border-color: "+t.border_color+";",m+="border-style: solid;",u=isNaN(parseInt(t.border_width.replace("px","")))?i.border.width:t.border_width,m+="border-width: "+u+";",u=isNaN(parseInt(t.border_radius.replace("px","")))?i.border.radius:t.border_radius,m+="border-radius: "+u+";",m+="background-color: "+t.background_color+";",a(e,m);var v="";s=isNaN(parseInt(t.padding_top.replace("px","")))?i.paddings.top:t.padding_top,v+="padding-top: "+s+";",s=isNaN(parseInt(t.padding_right.replace("px","")))?i.paddings.right:t.padding_right,v+="padding-right: "+s+";",s=isNaN(parseInt(t.padding_bottom.replace("px","")))?i.paddings.bottom:t.padding_bottom,v+="padding-bottom: "+s+";",s=isNaN(parseInt(t.padding_left.replace("px","")))?i.paddings.left:t.padding_left,v+="padding-left: "+s+";",n(e,v);var g="";g+="background-color: "+t.hover_color+";",g+="border-color: "+t.hover_border+";",r(e,g);var f="";f+="color: "+t.hover_text+";",l(e,f)},v=function(e){d(e),s(e),u(e),c(e),_(e)},g=function(){return i},f=function(i){var o=i.buttonData,a=o.buttonTarget.button_id,n=i.html;v(a),m(a,o);var r=t.$buttonList.find('.rex-button-wrapper[data-rex-button-id="'+a+'"]');if(0==r.length){var l=e(document.createElement("li"));l.attr("draggable",!0),l.addClass("button-list__element");var d=e(document.createElement("div"));d.append(e(jQuery.parseHTML(n))),d.addClass("rex-container"),d.appendTo(l),l.appendTo(t.$buttonList);var s=tmpl("tmpl-rex-button-delete")();l.append(s)}else{var c=r.parent();r.remove(),c.append(e(jQuery.parseHTML(n)))}},b=function(){var t,i,o,a,n,r=Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow,l=e(r),d={width:0,height:0},s={x:10,y:10},c=!1,u={x:50,y:50},_=!!document.documentMode,p=0,m=0;Rexlive_Base_Settings.$document.on("dragstart",".button-list li",function(t){Rexbuilder_Util_Admin_Editor.dragImportType="rexbutton",t.originalEvent.dataTransfer.effectAllowed="all",n=setInterval(function(){b.ProcessDragOverQueue()},100);var i=e(this).html(),o=e(this).find(".rex-button-background").eq(0);d.width=o.outerWidth(),d.height=o.outerHeight(),_?t.originalEvent.dataTransfer.setData("text",i):t.originalEvent.dataTransfer.setData("text/plain",i),Rexbuilder_Util_Admin_Editor.addClassToLiveFrameRexContainer("rex-dragging-button");var a={eventName:"rexlive:drag_drop_starded",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(a)}),Rexlive_Base_Settings.$document.on("drag",".button-list li",function(e){Rexbuilder_Util_Admin_Editor.setScroll(!0),m<150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(-1)),m>l.height()-150&&(Rexbuilder_Util_Admin_Editor.setScroll(!1),Rexbuilder_Util_Admin_Editor.scrollFrame(1))}),Rexlive_Base_Settings.$document.on("dragend",".button-list li",function(e){clearInterval(n),Rexbuilder_Util_Admin_Editor.setScroll(!0),b.removePlaceholder(),b.ClearContainerContext(),Rexbuilder_Util_Admin_Editor.removeClassToLiveFrameRexContainer("rex-dragging-button"),Rexbuilder_Util_Admin_Editor.dragImportType="";var t={eventName:"rexlive:drag_drop_ended",data_to_send:{}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)}),Rexbuilder_Util_Admin_Editor.$frameBuilder.load(function(){var n=e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0),r={},s={};l.on("dragover",function(e){"rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType&&(e.preventDefault(),e.stopPropagation(),p=e.originalEvent.clientX,m=e.originalEvent.clientY)}),n.on("dragenter",".grid-stack-row",function(n){"rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType&&(t=e(n.target),i=!0,o=n.target.getBoundingClientRect(),a=1)}),n.on("dragover",".grid-stack-row",function(e){if("rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType){if(a%15!=0&&0==i)return void(a+=1);e=e||window.event,a+=1,i=!1,r.x=e.originalEvent.clientX,r.y=e.originalEvent.clientY,s.x=e.originalEvent.pageX,s.y=e.originalEvent.pageY,b.AddEntryToDragOverQueue(t,o,r)}}),n.on("drop",".grid-stack-row",function(t){if("rexbutton"==Rexbuilder_Util_Admin_Editor.dragImportType){t.preventDefault(),t.stopPropagation();var i;i=t.isTrigger?triggerEvent.originalEvent:t.originalEvent;try{var o="";o=_?i.dataTransfer.getData("text"):i.dataTransfer.getData("text/plain");var a=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker");o=o.trim();var n=e(jQuery.parseHTML(o));n.addClass("rex-loading-button"),n.insertAfter(a[0]),a.remove();var r={eventName:"rexlive:importButton",data_to_send:{buttonDimensions:d,mousePosition:s}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(r)}catch(i){console.log(i)}}})});var v,g=["i","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","video","iframe","source","track","wbr"],f=g.join(","),b={dragoverqueue:[],GetMouseBearingsPercentage:function(e,t,i){return t||(t=e.get(0).getBoundingClientRect()),{x:(i.x-t.left)/(t.right-t.left)*100,y:(i.y-t.top)/(t.bottom-t.top)*100}},OrchestrateDragDrop:function(e,t,i){if(!e||0==e.length||!t||!i)return!1;if(e.is("html")&&(e=e.find("body")),v=this.GetMouseBearingsPercentage(e,t,i),(e.hasClass("rex-button-wrapper")||0!=e.parents(".rex-button-wrapper").length)&&(e=e.hasClass("rex-button-wrapper")?e:e.parents(".rex-button-wrapper").eq(0),u=jQuery.extend(!0,{},s),c=!0,s.x=50,s.y=50),v.x>s.x&&v.x<100-s.x&&v.y>s.y&&v.y<100-s.y){var o=e.clone();if(o.find(".drop-marker").remove(),""!=o.html()||this.checkVoidElement(o))if(0==o.children().length)this.DecideBeforeAfter(e,v);else if(1==o.children().length)if(o.hasClass("rex-buttons-paragraph")){var a=this.findNearestElement(e,i.x,i.y);this.DecideBeforeAfter(a.el,v,i)}else this.DecideBeforeAfter(e.children(":not(.drop-marker,[data-dragcontext-marker])").first(),v);else{var a=this.findNearestElement(e,i.x,i.y);this.DecideBeforeAfter(a.el,v,i)}else if(v.y<90)return this.PlaceInside(e)}else if(v.x<=s.x||v.y<=s.y)n=v.y<=v.x?this.FindValidParent(e,"top"):this.FindValidParent(e,"left"),n.is("body,html")&&(n=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").first()),this.DecideBeforeAfter(n,v,i);else if(v.x>=100-s.x||v.y>=100-s.y){var n=null;n=v.y>=v.x?this.FindValidParent(e,"bottom"):this.FindValidParent(e,"right"),n.is("body,html")&&(n=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").children(":not(.drop-marker,[data-dragcontext-marker])").last()),this.DecideBeforeAfter(n,v,i)}if(c&&(s.x=u.x,s.y=u.y,c=!1),!e.hasClass("rex-buttons-paragraph")&&!e.hasClass("text-wrap")&&!e.hasClass("rex-button-wrapper")){var r=e.parents(".grid-stack-item");0!=r.length&&(this.removePlaceholder(),r.find(".text-wrap").eq(0).append(this.getPlaceHolder()))}},DecideBeforeAfter:function(e,t,i){i&&(t=this.GetMouseBearingsPercentage(e,null,i));var o="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");return e.is("br")&&(o=!1),o?t.x<50?this.PlaceBefore(e):this.PlaceAfter(e):t.y<50?this.PlaceBefore(e):this.PlaceAfter(e)},checkVoidElement:function(e){return e.is(f)},calculateDistance:function(e,t,i){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-i,2))},FindValidParent:function(e,t){switch(t){case"left":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||o.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(a.left-i.left))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"right":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||o.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(a.right-i.right))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"top":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||o.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(a.top-i.top))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}break;case"bottom":for(;;){var i=e.get(0).getBoundingClientRect(),o=e.parent(),a=o.get(0).getBoundingClientRect();if(e.is("body")||e.hasClass("grid-stack-row")||o.hasClass("rex-buttons-paragraph"))return e;if(0!=Math.abs(a.bottom-i.bottom))return 0!=e.parents(".rex-button-wrapper").length?e.parents(".rex-button-wrapper").eq(0):e;e=e.parent()}}},addPlaceHolder:function(e,t,i){switch(i||(i=this.getPlaceHolder()),this.removePlaceholder(),t){case"before":i.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.prepend(i):e.before(i),this.AddContainerContext(e,"sibling");break;case"after":i.find(".message").html(e.data("sh-dnd-error")),e.hasClass("grid-stack-row")?e.append(i):e.after(i),this.AddContainerContext(e,"sibling");break;case"inside-prepend":i.find(".message").html(e.data("sh-dnd-error")),e.prepend(i),this.AddContainerContext(e,"inside");break;case"inside-append":i.find(".message").html(e.data("sh-dnd-error")),e.append(i),this.AddContainerContext(e,"inside")}},removePlaceholder:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find(".drop-marker").remove()},getPlaceHolder:function(){return e("<li class='drop-marker'></li>")},PlaceInside:function(e){var t=this.getPlaceHolder();t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t)},PlaceBefore:function(e){var t=this.getPlaceHolder(),i="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))i=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-prepend",t);i?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"before",t)},PlaceAfter:function(e){var t=this.getPlaceHolder(),i="inline"==e.css("display")||"inline-block"==e.css("display")||"inline-flex"==e.css("display");if(e.is("br"))i=!1;else if(e.is("td,th"))return t.addClass("horizontal").css("width",e.width()+"px"),this.addPlaceHolder(e,"inside-append",t);i?t.addClass("vertical").css("height",e.innerHeight()+"px"):t.addClass("horizontal").css("width",e.parent().width()+"px"),this.addPlaceHolder(e,"after",t)},findNearestElement:function(t,i,o){var a=this,n=null,r=t.children(":not(.drop-marker,[data-dragcontext-marker])");if(r.length>0){if(r.each(function(){if(!e(this).is(".drop-marker")){var t,r=e(this).get(0).getBoundingClientRect(),l=0,d=null,s="",c=r.left,u=r.right,_=r.top,p=r.bottom,m=null,v=null;return o>_&&o<p?m=i<c&&o<u?{x:c,y:o,position:"before"}:{x:u,y:o,position:"after"}:i>c&&i<u?m=o<_&&o<p?{x:i,y:_,position:"before"}:{x:i,y:p,position:"after"}:i<c&&i<u?(m={x:c,y:_,position:"before"},v={x:c,y:p,position:"after"}):i>c&&i>u?(m={x:u,y:_,position:"before"},v={x:u,y:p,position:"after"}):o<_&&o<p?(m={x:c,y:_,position:"before"},v={x:u,y:_,position:"after"}):o>_&&o>p&&(m={x:c,y:p,position:"before"},v={x:u,y:p,position:"after"}),t=a.calculateDistance(m,i,o),null!==v&&(d=a.calculateDistance(v,i,o)),t<d||null===d?(l=t,s=m.position):(l=d,s=v.position),null!==n&&n.distance<l||void(n={el:this,distance:l,xPosition1:c,xPosition2:u,yPosition1:_,yPosition2:p,position:s})}}),null!==n){var l=n.position;return{el:e(n.el),position:l}}return!1}},AddEntryToDragOverQueue:function(e,t,i){var o=[e,t,i];this.dragoverqueue.push(o)},ProcessDragOverQueue:function(e,t,i){var o=this.dragoverqueue.pop();if(this.dragoverqueue=[],o&&3==o.length){var a=o[0],n=o[1],i=o[2];this.OrchestrateDragDrop(a,n,i)}},GetContextMarker:function(){var t=e("<div data-dragcontext-marker><span data-dragcontext-marker-text></span></div>");return t},AddContainerContext:function(e,t){var i=this.GetContextMarker();switch(this.ClearContainerContext(),e.is("html,body")&&(t="inside",e=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body")),
t){case"inside":this.PositionContextMarker(i,e),e.hasClass("stackhive-nodrop-zone")&&i.addClass("invalid");var o=this.getElementName(e);i.find("[data-dragcontext-marker-text]").html(o),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(i);break;case"sibling":this.PositionContextMarker(i,e.parent()),e.parent().hasClass("stackhive-nodrop-zone")&&i.addClass("invalid");var o=this.getElementName(e.parent());i.find("[data-dragcontext-marker-text]").html(o),i.attr("data-dragcontext-marker",o.toLowerCase()),0!=Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").length&&Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body [data-sh-parent-marker]").first().before(i)}},PositionContextMarker:function(e,t){var i=t.get(0).getBoundingClientRect();e.css({height:i.height+4+"px",width:i.width+4+"px",top:i.top+l.scrollTop()-2+"px",left:i.left+l.scrollLeft()-2+"px"}),i.top+Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("body").scrollTop()<24&&e.find("[data-dragcontext-marker-text]").css("top","0px")},ClearContainerContext:function(){Rexbuilder_Util_Admin_Editor.$frameBuilder.contents().find("[data-dragcontext-marker]").remove()},getElementName:function(e){return e.prop("tagName")}}},x=function(){Rexlive_Base_Settings.$document.on("click",".button__element--delete",function(i){var o=e(this).parents(".button-list__element").find(".rex-button-wrapper")[0];if(o){var a=o.getAttribute("data-rex-button-id"),n=confirm(live_editor_obj.labels.rexbuttons.confirm_delete);if(n){var r={action:"rex_delete_rexbutton",nonce_param:live_editor_obj.rexnonce,button_id:a},l=Rexlive_Base_Settings.encodeData(r),d=new XMLHttpRequest;d.open("POST",live_editor_obj.ajaxurl,!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),d.onloadstart=function(){t.$self.addClass("rex-modal--loading")},d.onload=function(){d.status>=200&&d.status<400&&(o.parentNode.parentNode.style.display="none",Button_Edit_Modal.removeIDButtonSoft(a))},d.onerror=function(){},d.onloadend=function(){t.$self.removeClass("rex-modal--loading")},d.send(l)}}}),Rexlive_Base_Settings.$document.on("click",".rex-button-container",function(e){e.preventDefault()})},h=function(){var i=e("#rex-buttons-list");t={$self:i,$buttonList:i.find(".button-list")},this.$buttonsStyle=e("#rexliveStyle-inline-css"),p(),b(),x()};return{init:h,updateButtonList:f,getActiveStyleSheet:g}}(jQuery),Button_Edit_Modal=function(e){"use strict";var t,i,o,a,n,r,l,d,s,c,u=function(t,i){i="undefined"!=typeof i&&"true"==i.toString(),t.keydown(function(t){var o=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||"-"==t.key?(i||"-"!=t.key||t.preventDefault(),38==t.keyCode&&(t.preventDefault(),o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i?o.val(isNaN(parseInt(o.val()))?0:parseInt(o.val()-1)):o.val(Math.max(isNaN(parseInt(o.val()))?0:parseInt(o.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&o.blur()))})},_=function(e,t,i){i="undefined"!=typeof i&&"true"==i.toString(),e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||38==e.keyCode||40==e.keyCode||8==e.keyCode||"-"==e.key)&&(e.preventDefault(),(i||"-"!=e.key)&&t.call(this,parseInt(e.target.value)))})},p=function(){Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap"))},m=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},v=function(){t.$button.on("click",function(e){var t=this.getAttribute("data-rex-option");switch(m(),t){case"remove":j();break;case"edit":d=!0,i.$self.addClass("editing-model"),Rexlive_Modals_Utils.openModal(i.$self.parent(".rex-modal-wrap")),Q()}}),t.$close_button.on("click",function(){m()})},g=function(){var i=e("#rex-button-model-choose"),o=i;t={$self:i,$button:o.find(".rex-button"),$close_button:o.find(".rex-modal__close-button")},v()},f=function(e){s=!1,x(e),!d||s?Rexlive_Modals_Utils.openModal(i.$self.parent(".rex-modal-wrap")):p()},b=function(){Rexlive_Modals_Utils.closeModal(i.$self.parent(".rex-modal-wrap"))},x=function(e){d=!1,$(),k(e),y(),h()},h=function(){var t=e("#rex-button-link-target").val(),o=e("#rex-button__name").val();""==t||null==t||void 0==t?(e(".rexbutton-cont_row45").find(".prefix").removeClass("active"),e(".rexbutton-cont_row45").find("#rex-button-link-target-label").removeClass("active")):(e(".rexbutton-cont_row45").find(".prefix").addClass("active"),e(".rexbutton-cont_row45").find("#rex-button-link-target-label").addClass("active")),""==o||null==o||void 0==o?(e(".rexbutton-cont_row77").find(".prefix").removeClass("active"),e(".rexbutton-cont_row77").find("#rex-button__name-label").removeClass("active")):(e(".rexbutton-cont_row77").find(".prefix").addClass("active"),e(".rexbutton-cont_row77").find("#rex-button__name-label").addClass("active")),""!==i.$button_class.val()?(i.$button_class.prev().addClass("active"),i.$button_class.next().addClass("active")):(i.$button_class.prev().removeClass("active"),i.$button_class.next().removeClass("active"))},$=function(){o={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_right:"",margin_left:"",padding_top:"",padding_bottom:"",padding_right:"",padding_left:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}}},k=function(e){if("true"==e.separateButton.toString())o=jQuery.extend(!0,{},e.buttonInfo),d=!1;else{var t,i=e.buttonInfo.buttonTarget.button_id;for(d=!0,o.buttonTarget=jQuery.extend(!0,{},e.buttonInfo.buttonTarget),o.text=e.buttonInfo.text,o.link_target=e.buttonInfo.link_target,o.link_type=e.buttonInfo.link_type,o.classes=e.buttonInfo.classes,t=0;t<a.length;t++)if(i==a[t].rexID){o.text_color="undefined"==typeof a[t].rules.element.text_color?"":a[t].rules.element.text_color,o.font_size="undefined"==typeof a[t].rules.element.font_size?"":a[t].rules.element.font_size,o.background_color="undefined"==typeof a[t].rules.element.background_color?"":a[t].rules.element.background_color,o.button_height="undefined"==typeof a[t].rules.element.button_height?"":a[t].rules.element.button_height,o.button_width="undefined"==typeof a[t].rules.element.button_width?"":a[t].rules.element.button_width,o.hover_color="undefined"==typeof a[t].rules.hover.background_color?"":a[t].rules.hover.background_color,o.hover_text="undefined"==typeof a[t].rules.hover.text_color?"":a[t].rules.hover.text_color,o.hover_border="undefined"==typeof a[t].rules.hover.border_color?"":a[t].rules.hover.border_color,o.border_color="undefined"==typeof a[t].rules.element.border_color?"":a[t].rules.element.border_color,o.border_width="undefined"==typeof a[t].rules.element.border_width?"":a[t].rules.element.border_width,o.border_radius="undefined"==typeof a[t].rules.element.border_radius?"":a[t].rules.element.border_radius,o.margin_top="undefined"==typeof a[t].rules.element.margin_top?"":a[t].rules.element.margin_top,o.margin_bottom="undefined"==typeof a[t].rules.element.margin_bottom?"":a[t].rules.element.margin_bottom,o.margin_right="undefined"==typeof a[t].rules.element.margin_right?"":a[t].rules.element.margin_right,o.margin_left="undefined"==typeof a[t].rules.element.margin_left?"":a[t].rules.element.margin_left,o.padding_top="undefined"==typeof a[t].rules.element.padding_top?"":a[t].rules.element.padding_top,o.padding_bottom="undefined"==typeof a[t].rules.element.padding_bottom?"":a[t].rules.element.padding_bottom,o.padding_right="undefined"==typeof a[t].rules.element.padding_right?"":a[t].rules.element.padding_right,o.padding_left="undefined"==typeof a[t].rules.element.padding_left?"":a[t].rules.element.padding_left,o.buttonTarget.button_name=a[t].buttonName;break}"undefined"!=typeof e.buttonInfo.synchronize&&(s="true"==e.buttonInfo.synchronize.toString())}r=jQuery.extend(!0,{},o),l=jQuery.extend(!0,{},o)},y=function(){i.$button_label_text.val(o.text),i.$button_label_text_size.val(o.font_size.replace("px","")),i.$button_height.val(o.button_height.replace("px","")),i.$button_width.val(o.button_width.replace("px","")),i.$button_border_width.val(o.border_width.replace("px","")),i.$button_border_radius.val(o.border_radius.replace("px","")),i.$button_margin_top.val(o.margin_top.replace("px","")),i.$button_margin_right.val(o.margin_right.replace("px","")),i.$button_margin_left.val(o.margin_left.replace("px","")),i.$button_margin_bottom.val(o.margin_bottom.replace("px","")),i.$button_padding_top.val(o.padding_top.replace("px","")),i.$button_padding_right.val(o.padding_right.replace("px","")),i.$button_padding_left.val(o.padding_left.replace("px","")),i.$button_padding_bottom.val(o.padding_bottom.replace("px","")),i.$button_link_target.val(o.link_target),i.$button_link_type.val(o.link_type),i.$button_name.val(o.buttonTarget.button_name),i.$button_class.val(o.classes),i.$button_preview_border.css("border-width",o.border_width),i.$button_label_text.css("color",o.text_color),i.$button_label_text_color_value.val(o.text_color),i.$button_label_text_color_preview.hide(),i.$button_label_text_color_value.spectrum("set",o.text_color),i.$button_preview_background_hover.css("background-color",o.hover_color),i.$button_background_hover_color_value.val(o.hover_color),i.$button_background_hover_color_value.spectrum("set",o.hover_color),i.$button_background_hover_color_preview.hide(),i.$button_preview_text_hover.css("background-color",o.hover_text),i.$button_text_hover_color_value.val(o.hover_text),i.$button_text_hover_color_value.spectrum("set",o.hover_text),i.$button_text_hover_color_preview.hide(),i.$button_preview_border_hover.css("background-color",o.hover_border),i.$button_border_hover_color_value.val(o.hover_border),i.$button_border_hover_color_value.spectrum("set",o.hover_border),i.$button_border_hover_color_preview.hide(),i.$button_preview_background.css("background-color",o.background_color),i.$button_background_color_value.val(o.background_color),i.$button_background_color_preview.hide(),i.$button_background_color_value.spectrum("set",o.background_color),i.$button_preview_border.css("border-color",o.border_color),i.$button_border_color_value.val(o.border_color),i.$button_border_color_preview.hide(),i.$button_border_color_value.spectrum("set",o.border_color),d?i.$self.addClass("editing-model"):i.$self.removeClass("editing-model")},w=function(){o.font_size=i.$button_label_text_size.val()+"px",o.button_height=i.$button_height.val()+"px",o.button_width=i.$button_width.val()+"px",o.border_width=i.$button_border_width.val()+"px",o.border_radius=i.$button_border_radius.val()+"px",o.margin_top=i.$button_margin_top.val()+"px",o.margin_bottom=i.$button_margin_bottom.val()+"px",o.margin_right=i.$button_margin_right.val()+"px",o.margin_left=i.$button_margin_left.val()+"px",o.padding_top=i.$button_padding_top.val()+"px",o.padding_bottom=i.$button_padding_bottom.val()+"px",o.padding_right=i.$button_padding_right.val()+"px",o.padding_left=i.$button_padding_left.val()+"px",o.buttonTarget.button_name=i.$button_name.val(),o.text=i.$button_label_text.val(),o.link_target=i.$button_link_target.val(),o.link_type=i.$button_link_type.val(),o.classes=i.$button_class.val()},C=function(){i.$button_label_text.on("keyup",function(e){H({type:"button",name:"button_label",value:i.$button_label_text.val()})}),i.$button_link_target.on("keyup",function(e){H({type:"button",name:"link_target",value:i.$button_link_target.val()})}),i.$button_class.on("focusout",function(e){H({type:"button",name:"button_class",value:i.$button_class.val()})}),i.$button_name.on("keyup",function(e){d||H({type:"button",name:"button_name",value:i.$button_name.val()})})},M=function(){var e="",t=function(t){e=isNaN(parseInt(t))?c.font_size:t+"px",H({type:"container",name:"font-size",value:e})};u(i.$button_label_text_size,!1),_(i.$button_label_text_size,t,!1);var o=function(t){e=isNaN(parseInt(t))?c.dimensions.height:t+"px",H({type:"container",name:"min-height",value:e})};u(i.$button_height,!1),_(i.$button_height,o,!1);var a=function(t){e=isNaN(parseInt(t))?c.dimensions.width:t+"px",H({type:"container",name:"min-width",value:e})};u(i.$button_width,!1),_(i.$button_width,a,!1);var n=function(t){e=isNaN(parseInt(t))?c.border.width:t+"px",H({type:"background",name:"border-width",value:e})};u(i.$button_border_width,!1),_(i.$button_border_width,n,!1);var r=function(t){e=isNaN(parseInt(t))?c.border.radius:t+"px",H({type:"background",name:"border-radius",value:e})};u(i.$button_border_radius,!1),_(i.$button_border_radius,r,!1);var l=function(t){e=isNaN(parseInt(t))?c.margins.top:t+"px",H({type:"container",name:"margin-top",value:e})};u(i.$button_margin_top,!1),_(i.$button_margin_top,l,!1);var d=function(t){e=isNaN(parseInt(t))?c.paddings.top:t+"px",H({type:"text",name:"padding-top",value:e})};u(i.$button_padding_top,!1),_(i.$button_padding_top,d,!1);var s=function(t){e=isNaN(parseInt(t))?c.margins.bottom:t+"px",H({type:"container",name:"margin-bottom",value:e})};u(i.$button_margin_bottom,!1),_(i.$button_margin_bottom,s,!1);var p=function(t){e=isNaN(parseInt(t))?c.paddings.top:t+"px",H({type:"text",name:"padding-bottom",value:e})};u(i.$button_padding_bottom,!1),_(i.$button_padding_bottom,p,!1);var m=function(t){e=isNaN(parseInt(t))?c.margins.left:t+"px",H({type:"container",name:"margin-left",value:e})};u(i.$button_margin_left,!1),_(i.$button_margin_left,m,!1);var v=function(t){e=isNaN(parseInt(t))?c.paddings.left:t+"px",H({type:"text",name:"padding-left",value:e})};u(i.$button_padding_left,!1),_(i.$button_padding_left,v,!1);var g=function(t){e=isNaN(parseInt(t))?c.margins.right:t+"px",H({type:"container",name:"margin-right",value:e})};u(i.$button_margin_right,!1),_(i.$button_margin_right,g,!1);var f=function(t){e=isNaN(parseInt(t))?c.paddings.right:t+"px",H({type:"text",name:"padding-right",value:e})};u(i.$button_padding_right,!1),_(i.$button_padding_right,f,!1)},R=function(){i.$button_link_type.on("change",function(e){H({type:"button",name:"link_type",value:i.$button_link_type.val()})})},I=function(){var t;i.$button_label_text_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_label_text_color_preview.hide(),i.$button_label_text.css("color",t),H({type:"container",name:"color",value:t})},change:function(e){},hide:function(e){o.text_color=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_label_text_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_label_text_color_value.spectrum("hide")}),i.$button_label_text_color_preview.on("click",function(){return i.$button_label_text_color_value.spectrum("show"),!1})},S=function(){var t;i.$button_background_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_background_color_preview.hide(),i.$button_preview_background.css("background-color",t),H({type:"background",name:"background-color",value:t})},change:function(e){},hide:function(e){o.background_color=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_background_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_background_color_value.spectrum("hide")}),i.$button_background_color_preview.on("click",function(){return i.$button_background_color_value.spectrum("show"),!1})},N=function(){var t;i.$button_background_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_background_hover_color_preview.hide(),i.$button_preview_background_hover.css("background-color",t),H({type:"backgroundHover",name:"background-color",value:t})},change:function(e){},hide:function(e){o.hover_color=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_background_hover_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_background_hover_color_value.spectrum("hide")}),i.$button_background_color_preview.on("click",function(){return i.$button_background_hover_color_value.spectrum("show"),!1})},E=function(){var t;i.$button_border_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-border-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_border_hover_color_preview.hide(),i.$button_preview_border_hover.css("background-color",t),H({type:"borderHover",name:"border-color",value:t})},change:function(e){},hide:function(e){o.hover_border=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_border_hover_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_border_hover_color_value.spectrum("hide")}),i.$button_border_color_preview.on("click",function(){return i.$button_border_hover_color_value.spectrum("show"),!1})},D=function(){var t;i.$button_text_hover_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-text-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_text_hover_color_preview.hide(),i.$button_preview_text_hover.css("background-color",t),H({type:"textHover",name:"color",value:t})},change:function(e){},hide:function(e){o.hover_text=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_text_hover_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_text_hover_color_value.spectrum("hide")}),i.$button_text_hover_color_preview.on("click",function(){return i.$button_text_hover_color_value.spectrum("show"),!1})},A=function(){var t;i.$button_border_color_value.spectrum({replacerClassName:"btn-floating",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,containerClassName:"rexbuilder-materialize-wrap block-background-color-picker",show:function(){},move:function(e){t=e.toRgbString(),i.$button_border_color_preview.hide(),i.$button_preview_border.css("border-color",t),H({type:"background",name:"border-color",value:t})},change:function(e){},hide:function(e){o.border_color=e.toRgbString()},cancelText:"",chooseText:""});var a=tmpl("tmpl-tool-close",{}),n=e(a);i.$button_border_color_value.spectrum("container").append(n),n.on("click",function(e){e.preventDefault(),i.$button_border_color_value.spectrum("hide")}),i.$button_border_color_preview.on("click",function(){return i.$button_border_color_value.spectrum("show"),!1})},B=function(){W();var t=G(),n=z(),r=JSON.stringify(a),l=o.buttonTarget.button_id;i.$add_model_button.addClass("saving-rex-button"),e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_button",nonce_param:live_editor_obj.rexnonce,id_button:l,html_button:t,css_button:n,jsonRexButtons:r},beforeSend:function(){i.$self.addClass("rex-modal--loading")},success:function(e){Button_Import_Modal.updateButtonList({html:t,buttonData:o}),d||q(),i.$add_model_button.removeClass("saving-rex-button")},error:function(e){},complete:function(e){i.$self.removeClass("rex-modal--loading")}})},U=function(e){var t=n.indexOf(e.rexID);return t!=-1?(n.splice(t,1),e.updateDB&&F(),e.rexID):null},T=function(e){n.push(e)},P=function(e){var t=n.indexOf(e);t!=-1&&n.splice(t,1)},j=function(){var e=O();T(e),F({rexID:e,separate:!0})},V=function(e){J(e),L({id:e,number:1}),d=!1,y(),Rexlive_Modals_Utils.openModal(i.$self.parent(".rex-modal-wrap"))},F=function(t){var i="undefined"!=typeof t&&t.separate;e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_buttons_ids",nonce_param:live_editor_obj.rexnonce,ids_used:JSON.stringify(n)},success:function(){i&&V(t.rexID)},error:function(){},complete:function(){}})},L=function(e){o.buttonTarget.button_id=e.id,o.buttonTarget.button_number=e.number},O=function(){var e,t,i="";do for(e=!0,i=Rexbuilder_Util_Admin_Editor.createRandomID(4),t=0;t<n.length;t++)if(i==n[t]){e=!1;break}while(!e);return i},W=function(){var e,t=o.buttonTarget.button_id;for(e=0;e<a.length&&t!=a[e].rexID;e++);e!=a.length&&a.splice(e,1);var i={rexID:t,buttonName:o.buttonTarget.button_name,rules:{element:{text_color:o.text_color,font_size:o.font_size,background_color:o.background_color,button_height:o.button_height,button_width:o.button_width,border_color:o.border_color,border_width:o.border_width,border_radius:o.border_radius,margin_top:o.margin_top,margin_bottom:o.margin_bottom,margin_right:o.margin_right,margin_left:o.margin_left,padding_top:o.padding_top,padding_bottom:o.padding_bottom,padding_right:o.padding_right,padding_left:o.padding_left},hover:{background_color:o.hover_color,text_color:o.hover_text,border_color:o.hover_border}}};a.push(i)},z=function(){var e=o.buttonTarget.button_id,t="",i="",a="",n="",r="",l="";return t='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-container{",l=isNaN(parseInt(o.font_size.replace("px","")))?c.font_size:o.font_size,t+="font-size: "+l+";",t+="color: "+o.text_color+";",n=isNaN(parseInt(o.button_height.replace("px","")))?c.dimensions.height:o.button_height,t+="min-height: "+n+";",n=isNaN(parseInt(o.button_width.replace("px","")))?c.dimensions.width:o.button_width,t+="min-width: "+n+";",i=isNaN(parseInt(o.margin_top.replace("px","")))?c.margins.top:o.margin_top,t+="margin-top: "+i+";",i=isNaN(parseInt(o.margin_right.replace("px","")))?c.margins.right:o.margin_right,t+="margin-right: "+i+";",i=isNaN(parseInt(o.margin_bottom.replace("px","")))?c.margins.bottom:o.margin_bottom,t+="margin-bottom: "+i+";",i=isNaN(parseInt(o.margin_left.replace("px","")))?c.margins.left:o.margin_left,t+="margin-left: "+i+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-text{",a=isNaN(parseInt(o.padding_top.replace("px","")))?c.paddings.top:o.padding_top,t+="padding-top: "+a+";",a=isNaN(parseInt(o.padding_right.replace("px","")))?c.paddings.right:o.padding_right,t+="padding-right: "+a+";",a=isNaN(parseInt(o.padding_bottom.replace("px","")))?c.paddings.bottom:o.padding_bottom,t+="padding-bottom: "+a+";",a=isNaN(parseInt(o.padding_left.replace("px","")))?c.paddings.left:o.padding_left,t+="padding-left: "+a+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-background{",t+="background-color: "+o.background_color+";",t+="border-color: "+o.border_color+";",r=isNaN(parseInt(o.border_width.replace("px","")))?c.border.width:o.border_width,t+="border-width: "+r+";",r=isNaN(parseInt(o.border_radius.replace("px","")))?c.border.radius:o.border_radius,t+="border-radius: "+r+";",t+="border-style: solid;",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-background:hover{",t+="background-color: "+o.hover_color+";",t+="border-color: "+o.hover_border+";",t+="}",t+='.rex-button-wrapper[data-rex-button-id="'+e+'"]',t+=" .rex-button-container:hover{",t+="color: "+o.hover_text+";",t+="}"},G=function(){var e="";tmpl.arg="button";var t={text:"Learn More",link_target:"#",link_type:"_blank"},i={text_color:o.text_color,text:t.text,font_size:o.font_size,button_height:o.button_height,button_width:o.button_width,background_color:o.background_color,hover_color:o.hover_color,hover_text:o.hover_text,hover_border:o.hover_border,border_color:o.border_color,border_width:o.border_width,border_radius:o.border_radius,margin_top:o.margin_top,margin_bottom:o.margin_bottom,margin_right:o.margin_right,margin_left:o.margin_left,padding_top:o.padding_top,padding_bottom:o.padding_bottom,padding_right:o.padding_right,padding_left:o.padding_left,link_target:t.link_target,link_type:t.link_type,button_name:o.buttonTarget.button_name,id:o.buttonTarget.button_id};return e=tmpl("tmpl-rex-button",i),e=e.trim()},Q=function(){var e={eventName:"rexlive:lock_synchronize_on_button",data_to_send:{buttonTarget:o.buttonTarget}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},Y=function(){var e={eventName:"rexlive:update_button_page",data_to_send:{reverseButtonData:jQuery.extend(!0,{},r),actionButtonData:jQuery.extend(!0,{},o)}};r=jQuery.extend(!0,{},e.data_to_send.actionButtonData),Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},H=function(e){var t={eventName:"rexlive:updateButtonLive",data_to_send:{buttonTarget:o.buttonTarget,propertyType:e.type,propertyName:e.name,newValue:e.value}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},q=function(){var e={eventName:"rexlive:remove_separate_button",data_to_send:{buttonTarget:o.buttonTarget}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(e)},J=function(e){var t={eventName:"rexlive:separate_rex_button",data_to_send:{newID:e,buttonData:o}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t)},K=function(){i.$reset_button.on("click",function(){o=jQuery.extend(!0,{},l),y(),Y()}),i.$add_model_button.on("click",function(){w(),B()}),i.$close_button.on("click",function(){o=jQuery.extend(!0,{},l),y(),Y(),b()}),i.$apply_changes_button.on("click",function(){b()}),i.$modal.on("rexlive:this_modal_closed",function(){w(),Y(),d&&B()})},X=function(){var t=e("#rex-button-editor"),r=t.find(".rexpansive-accordion"),l=t;i={$self:t,$modal:l.parent(".rex-modal-wrap"),$close_button:l.find(".rex-cancel-button"),$reset_button:l.find(".rex-reset-button"),$create_new_button:e("#rex-add-new-button"),$add_model_button:l.find(".add-rex-button-model"),$apply_changes_button:l.find(".rex-apply-button"),$button_label_text:l.find("#rex-button__label"),$button_label_text_size:l.find("#rex-button_text_font_size"),$button_label_text_color_value:l.find("#rex-button-text-color"),$button_label_text_color_runtime:l.find("#rex-button-text-color-runtime"),$button_label_text_color_preview:l.find("#rex-button-text-color-preview-icon"),$button_preview_background:l.find("#rex-button-preview-background"),$button_background_color_value:l.find("#rex-button-background-color"),$button_background_color_runtime:l.find("#rex-button-background-color-runtime"),$button_background_color_preview:l.find("#rex-button-background-color-preview-icon"),$button_height:l.find("#rex-button-height"),$button_width:l.find("#rex-button-width"),$button_preview_background_hover:l.find("#rex-button-preview-background-hover"),$button_background_hover_color_value:l.find("#rex-button-background-hover-color"),$button_background_hover_color_runtime:l.find("#rex-button-background-hover-color-runtime"),$button_background_hover_color_preview:l.find("#rex-button-background-hover-color-preview-icon"),$button_preview_text_hover:l.find("#rex-button-preview-text-hover"),$button_text_hover_color_value:l.find("#rex-button-text-hover-color"),$button_text_hover_color_runtime:l.find("#rex-button-text-hover-color-runtime"),$button_text_hover_color_preview:l.find("#rex-button-text-hover-color-preview-icon"),$button_preview_border_hover:l.find("#rex-button-preview-border-hover"),$button_border_hover_color_value:l.find("#rex-button-border-hover-color"),$button_border_hover_color_runtime:l.find("#rex-button-border-hover-color-runtime"),$button_border_hover_color_preview:l.find("#rex-button-border-hover-color-preview-icon"),$button_preview_border:l.find("#rex-button-border-preview"),$button_border_color_value:l.find("#rex-button-border-color"),$button_border_color_runtime:l.find("#rex-button-border-color-runtime"),$button_border_color_preview:l.find("#rex-button-color-preview-icon"),$button_border_width:l.find("#rex-button-border-width"),$button_border_radius:l.find("#rex-button-border-radius"),$button_margin_top:l.find("#rex-button-margin-top-radius"),$button_margin_right:l.find("#rex-button-margin-right-radius"),$button_margin_bottom:l.find("#rex-button-margin-bottom-radius"),$button_margin_left:l.find("#rex-button-margin-left-radius"),$button_padding_top:l.find("#rex-button-padding-top-radius"),$button_padding_right:l.find("#rex-button-padding-right-radius"),$button_padding_bottom:l.find("#rex-button-padding-bottom-radius"),$button_padding_left:l.find("#rex-button-padding-left-radius"),$button_link_target:l.find("#rex-button-link-target"),$button_link_type:l.find("#rex-button-link-type"),$button_class:l.find("#rex-button__class"),$button_name:l.find("#rex-button__name")},a=JSON.parse(e("#rex-buttons-json-css").text()),n=JSON.parse(e("#rex-buttons-ids-used").text()),K(),c={margins:{top:"20px",right:"20px",bottom:"20px",left:"20px"},paddings:{top:"20px",right:"20px",bottom:"20px",left:"20px"},dimensions:{height:"70px",width:"100px"},border:{width:"5px",radius:"10px"},font_size:"12px"},o={text_color:"",text:"",font_size:"",background_color:"",button_height:"",button_width:"",hover_color:"",hover_text:"",hover_border:"",border_color:"",border_width:"",border_radius:"",margin_top:"",margin_bottom:"",margin_left:"",margin_right:"",padding_top:"",padding_bottom:"",padding_left:"",padding_right:"",link_target:"",link_type:"",classes:"",buttonTarget:{button_name:"",button_id:"",button_number:0}},C(),M(),R(),I(),S(),N(),E(),D(),A(),g(),r.rexAccordion({open:{},close:{}})};return{init:X,openButtonEditorModal:f,removeIDButton:U,removeIDButtonSoft:P}}(jQuery),Model_Lateral_Menu=function(e){"use strict";var t,i=function(){t.$close_button.click(function(e){e.preventDefault(),a()})},o=function(){Model_Import_Modal.updateModelList()},a=function(){t.$self.addClass("rex-lateral-panel--close").one(Rexbuilder_Util_Admin_Editor.animationEvent,function(e){t.$self.removeClass("rex-lateral-panel--open rex-lateral-panel--close")})},i=function(){Rexlive_Base_Settings.$document.on("rexlive:lateralMenuReady",function(){t.$self.addClass("rex-lateral-panel--open");var e=t.$tabsButtons.filter(".active").parent().index();t.$tabs.eq(e).show()}),t.$close_button.click(function(e){e.preventDefault(),a()}),t.$tabsButtons.click(function(i){i.preventDefault();var o=e(this),a=o.closest("li").siblings().children("a"),n=o.attr("data-rex-tab-target");a.removeClass("active"),o.addClass("active"),t.$tabs.hide(),t.$tabs.each(function(t,i){e(i).attr("id")==n&&e(i).show()})}),Rexlive_Base_Settings.$document.on("click",".model__element--title-edit",function(e){var t=this.parentNode.parentNode.parentNode,i={id:t.getAttribute("data-rex-model-id"),name:t.querySelector(".model-name").textContent};Rexlive_Model_Edit_Name_Modal.openModal(i)}),Rexlive_Base_Settings.$document.on("click",".model__element--edit-thumbnail",function(t){var i=e(this).parents(".model__element");Model_Import_Modal.editModelThumbnail(i.attr("data-rex-model-id"),i.attr("data-rex-model-thumbnail-id"))}),Rexlive_Base_Settings.$document.on("click",".model__element--delete",function(e){var t=this.parentNode.parentNode.parentNode;Model_Import_Modal.deleteModel(t)}),Rexlive_Base_Settings.$document.on("click",".model__element--reset-thumbnail",function(t){var i=e(this).parents(".model__element");Model_Import_Modal.resetModelThumbnail(i.attr("data-rex-model-id"))}),Rexlive_Base_Settings.$document.on("click",".element-list__element--delete",function(e){
this.parentNode.parentNode.parentNode}),Rexlive_Base_Settings.$document.on("click",".element-list__element--edit-thumbnail",function(t){e(this).parents(".element-list__element")}),Rexlive_Base_Settings.$document.on("click",".element-list__element--reset-thumbnail",function(t){e(this).parents(".element-list__element")})},n=function(){var o=e("#rexbuilder-lateral-panel");t={$self:o,$close_button:o.find(".rex-lateral-panel--close"),$tabs:o.find(".tabgroup > div"),$tabsButtons:o.find(".rex-lateral-tabs-list a")},t.$tabs.hide(),i()};return{init:n,openModal:o,closeModal:a}}(jQuery),Rexlive_Modals=function(e){"use strict";var t=function(){Rexlive_Top_Tools.init(),Section_Modal.init(),Insert_Video_Modal.init(),CssEditor_Modal.init(),HtmlEditor_Modal.init(),SectionBackground_Modal.init(),Rexlive_Section_Background_Gradient.init(),Rexlive_Section_Overlay_Gradient.init(),Section_Video_Background_Modal.init(),BlockOptions_Modal.init(),Block_Content_Positions_Modal.init(e("#rex-block-content-position-editor")),Rexlive_Block_Accordion.init(),Rexlive_Block_Slideshow.init(),Rexlive_Text_Gradient.init(),Rexlive_Block_Background_Gradient.init(),Rexlive_Block_Overlay_Gradient.init(),Model_Modal.init(),Model_Edit_Modal.init(),Rexlive_Model_Edit_Name_Modal.init(),Open_Models_Warning.init(),CustomLayouts_Modal.init(),Change_Layout_Modal.init(),LockedOptionMask.init(),Model_Lateral_Menu.init(),Rexlive_Page_Settings_Modal.init(),Model_Import_Modal.init(),Rexlive_Inline_SVG.init(),Button_Import_Modal.init(),Button_Edit_Modal.init(),Rexlive_PostEdit_MediaList.init()};return{init:t}}(jQuery),Rexlive_Base_Settings=function(e){"use strict";function t(t){return e("<div/>").html(t).text()}function i(t){return e("<div/>").text(t).html()}var o,a,n,r;"classList"in document.documentElement?(o=function(e,t){return e.classList.contains(t)},a=function(e,t){e.classList.add(t)},n=function(e,t){e.classList.remove(t)}):(o=function(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)},a=function(e,t){o(e,t)||(e.className+=" "+t)},n=function(e,t){e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}),r=function(e,t){o(e,t)?n(e,t):a(e,t)};var l=function(){tippy(".tippy",{arrow:!0,arrowType:"round",size:"small",theme:"rexlive"})},d=function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},s=function(e){var t,i="",o=[];for(t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i=o.join("&").replace(/%20/g,"+")},c=function(){this.$document=e(document),this.$window=e(window),l()};return{init:c,htmlDecode:t,htmlEncode:i,viewport:d,launchTooltips:l,encodeData:s,addClass:a,removeClass:n,hasClass:o,toggleClass:r}}(jQuery),Rexbuilder_Util_Admin_Editor=function(e){"use strict";var t,i,o,a,n,r,l,d,s,c,u,_,p,m,v,g,f,b,x,h,$,k,y,w,C,M,R,I,S,N,E,D,A,B,U,T=function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)||Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.addClass(e)},P=function(e){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.hasClass(e)&&Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer.removeClass(e)},j=function(e){this.stopScrolling=e},V=function(e){B=E.scrollTop(),E.scrollTop(B+e),Rexbuilder_Util_Admin_Editor.stopScrolling||setTimeout(function(){V(e)},20)},F=function(e){return"default"==e||"mobile"==e||"tablet"==e?"standard":"custom"},L=function(e){if(e.data.rexliveEvent){var t=e.data;if("rexlive:edited"==e.data.eventName&&(e.data.modelEdited?o=!1:Rexbuilder_Util_Admin_Editor.pageSaved=!1,n.addClass("page-edited")),"rexlive:undoRedoStackChange"==e.data.eventName&&(e.data.stacks.undo>0?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-undo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-undo--active"),e.data.stacks.redo>0?Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("btn-redo--active"):Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("btn-redo--active")),"rexlive:traceVisibleRow"==e.data.eventName&&(d.val(e.data.sectionTarget.sectionID),s.val(e.data.sectionTarget.modelNumber),c.val(e.data.sectionTarget.modelEditing),u=e.data.rowInfo,_e()),"rexlive:viewTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.removeClass("top-fast-tools--hide"),"rexlive:hideTopFastTools"==e.data.eventName&&Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.addClass("top-fast-tools--hide"),"rexlive:updateTopToolbar"==e.data.eventName&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData(e.data.updateInfo),_e()),"rexlive:openMediaUploader"==e.data.eventName&&Rexlive_MediaUploader.openInsertImageBlocksMediaUploader(t),"rexlive:addNewBlockVideo"==e.data.eventName&&Insert_Video_Modal.openVideoModal(t),"rexlive:addNewSlider"==e.data.eventName&&Rexbuilder_RexSlider.openSliderModal("","","",t.target),"rexlive:editSlider"==e.data.eventName){var i=e.data;Rexbuilder_RexSlider.openSliderModal(i.blockID,i.shortCodeSlider,i.sliderID,i.target)}if("rexlive:openSectionModal"==e.data.eventName&&Section_Modal.openSectionModal(e.data.section_options_active,e.data.mousePosition),"rexlive:inlineVideoEditor"==e.data.eventName&&Change_UpdateVideoInline_Modal.openModal(e.data.modelData),"rexlive:inlineSVG"==e.data.eventName&&Rexlive_Inline_SVG.openModal(e.data.inlineSVGData),"rexlive:openModalMenu"==e.data.eventName&&Model_Modal.openModal(e.data.modelData),"rexlive:updateModel"==e.data.eventName&&Model_Modal.updateModel(e.data.modelData),"rexlive:uploadSliderFromLive"==e.data.eventName){var a=e.data.sliderInfo,_=a.slider,p=a.slider.id.toString(),m=a.newSlider,v=a.blockID,g=a.target;Rexbuilder_RexSlider.saveSlider(_,v,p,m,!0,g)}if("rexlive:openCssEditor"==e.data.eventName&&CssEditor_Modal.openModal(e.data.currentStyle),"rexlive:openHTMLEditor"==e.data.eventName&&HtmlEditor_Modal.openModal(e.data.htmlContent),"rexlive:openLiveImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageLiveMediaUploader(e.data.live_uploader_data),"rexlive:openMEImageUploader"==e.data.eventName&&Rexlive_MediaUploader.openImageMEMediaUploader(e.data.img_data),"rexlive:openPostEditMediaUploader"===e.data.eventName&&Rexlive_PostEdit.openMediaUploader(e.data.mediaData),"rexlive:openPostEditMediaList"===e.data.eventName&&Rexlive_PostEdit_MediaList.openModal(e.data.data_to_send),"rexlive:liveMediaAddFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.addMediaItem(e.data.mediaData),"rexlive:liveMediaEditFromListComplete"===e.data.eventName&&Rexlive_PostEdit_MediaList.editMediaItem(e.data.mediaData),"rexlive:editBackgroundSection"==e.data.eventName&&SectionBackground_Modal.openSectionBackgroundModal(e.data.activeBG),"rexlive:editSectionBackgroundGradient"==e.data.eventName&&Rexlive_Section_Background_Gradient.openModal(e.data.activeRowData),"rexlive:editRowOverlayGradient"==e.data.eventName&&Rexlive_Section_Overlay_Gradient.openModal(e.data.activeRowData),"rexlive:editRowVideoBackground"==e.data.eventName&&Section_Video_Background_Modal.openSectionVideoBackgroundModal(e.data.activeBG,e.data.mousePosition),"rexlive:editBlockOptions"==e.data.eventName&&BlockOptions_Modal.openBlockOptionsModal(e.data.activeBlockData),"rexlive:editBlockContentPosition"==e.data.eventName&&Block_Content_Positions_Modal.openBlockContentPositionModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockAccordion"==e.data.eventName&&Rexlive_Block_Accordion.openModal(e.data.activeBlockData),"rexlive:editBlockSlideshow"==e.data.eventName&&Rexlive_Block_Slideshow.openModal(e.data.activeBlockData),"rexlive:editBlockGradient"==e.data.eventName&&Rexlive_Block_Background_Gradient.openModal(e.data.activeBlockData),"rexlive:editTextGradient"==e.data.eventName&&Rexlive_Text_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockOverlayGradient"==e.data.eventName&&Rexlive_Block_Overlay_Gradient.openModal(e.data.activeBlockData),"rexlive:editBlockImageSettings"==e.data.eventName&&Block_Image_Editor_Modal.openModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:editBlockVideoBackground"==e.data.eventName&&Block_Video_Background_Modal.openBlockVideoBackgroundModal(e.data.activeBlockData,e.data.mousePosition),"rexlive:openRexButtonEditor"==e.data.eventName&&Button_Edit_Modal.openButtonEditorModal(e.data.buttonData),"rexlive:openRexElementChoose"==e.data.eventName&&Element_Choose_Modal.selectModalToOpen(e.data),"rexlive:openRexWpcf7AddContent"==e.data.eventName&&Wpcf7_Add_Content_Modal.openContentAdder(e.data),"rexlive:openRexWpcf7EditContent"==e.data.eventName&&Wpcf7_Edit_Content_Modal.openColumnContentEditorModal(e.data),"rexlive:openRexWpcf7EditForm"==e.data.eventName&&Wpcf7_Edit_Form_Modal.openFormEditorModal(e.data),"rexlive:editRemoveModal"==e.data.eventName&&Model_Edit_Modal.openModal(e.data.modelData),"rexlive:saveAndCloseModel"==e.data.eventName&&(G("CLOSE",e.data.modelData),ie("false"),oe()),"rexlive:savePageEnded"==e.data.eventName){switch(e.data.dataSaved){case"model":o=!0;break;case"page":Rexbuilder_Util_Admin_Editor.pageSaved=!0}o&&Rexbuilder_Util_Admin_Editor.pageSaved&&(NProgress.done(),Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend",!1),n.removeClass("page-edited"),n.removeClass("rex-saving"),"undefined"!=typeof e.data.buttonData&&""!=e.data.buttonData&&W(e.data.buttonData))}"rexlive:restoreStateEnded"==e.data.eventName&&(o=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,"undefined"!=typeof e.data.buttonData&&""!=typeof e.data.buttonData&&W(e.data.buttonData)),"rexlive:animateContentsFadeOutEnd"==e.data.eventName&&NProgress.inc(.5),"rexlive:animateContentsEnd"==e.data.eventName&&NProgress.done(),"rexlive:esc_pressed"==e.data.eventName&&Rexlive_Modals_Utils.close_focus_modal(),"rexlive:savePageWithButton"==e.data.eventName&&n.trigger("click"),"rexlive:undoWithButton"==e.data.eventName&&r.trigger("click"),"rexlive:redoWithButton"==e.data.eventName&&l.trigger("click"),"rexlive:savePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteColor(e.data.color_data),"rexlive:deletePaletteColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteColor(e.data.color_data),"rexlive:savePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.savePaletteOverlayColor(e.data.overlay_data),"rexlive:deletePaletteOverlayColor"==e.data.eventName&&Rexlive_Ajax_Calls.deletePaletteOverlayColor(e.data.overlay_data)}},O=function(){Rexlive_Base_Settings.$document.on("click",".btn-builder-layout",function(a){var n=e(this),r=n.attr("data-name");if(t!=r){var l={min:n.attr("data-min-width"),max:n.attr("data-max-width"),id:r,label:"undefined"!=typeof n.attr("data-label")?n.attr("data-label"):r,type:F(r)},d={activeLayout:t,activeLayoutLabel:i,buttonData:l,modelSaved:o,pageSaved:Rexbuilder_Util_Admin_Editor.pageSaved};if("true"==Rexbuilder_Util_Admin_Editor.$rexpansiveContainer.attr("data-rex-edited-backend").toString())LockedOptionMask.openModal(d);else{if(!o||!Rexbuilder_Util_Admin_Editor.pageSaved)return void Change_Layout_Modal.openModal(d);NProgress.start(),H({eventName:"rexlive:startChangeLayout"}),W(l)}}}),n.on("click",function(e){for(var t=[],i=0;i<I.length;i++)"open"==I[i].m_state&&t.push(I[i]);0===t.length?Q():Open_Models_Warning.openModal(t)}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),n.trigger("click"))}),Rexlive_Base_Settings.$document.on("keydown",function(e){(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&!e.shiftKey&&90==e.keyCode&&(e.preventDefault(),r.trigger("click"))}),Rexlive_Base_Settings.$document.on("keydown",function(e){((window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.shiftKey&&90==e.keyCode||(window.navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&89==e.keyCode)&&(e.preventDefault(),l.trigger("click"))}),Rexlive_Base_Settings.$document.on("click",".btn-undo",function(e){var t={eventName:"rexlive:undo"};H(t)}),Rexlive_Base_Settings.$document.on("click",".btn-redo",function(e){var t={eventName:"rexlive:redo"};H(t)}),Rexlive_Base_Settings.$document.on("click",".btn-models",function(e){Model_Lateral_Menu.openModal()}),Rexlive_Base_Settings.$document.on("click",".open-distancer-tool",function(e){Rexlive_Page_Settings_Modal.open()}),Rexlive_Base_Settings.$document.on("focus",A,function(t){e(t.target).is(A)&&e(t.target).siblings("label, .prefix").addClass("active")}),Rexlive_Base_Settings.$document.on("blur",A,function(t){e(t.target).is(A)&&""==t.target.value&&e(t.target).siblings("label, .prefix").removeClass("active")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-image",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:openMediaUploader",returnEventName:"rexlive:insert_image",sectionTarget:{sectionID:d.val(),modelNumber:s.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-text",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.$frameBuilder.focus();var t={eventName:"rexlive:insert_new_text_block",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()}}};H(t)}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-video",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:addNewBlockVideo",sectionTarget:{sectionID:d.val(),modelNumber:s.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-block-slider",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:addNewSlider",target:{sectionID:d.val(),modelNumber:s.val()}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".toolbox-add-new-section",function(e){e.preventDefault();var t={eventName:"rexlive:add_new_section_after",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},position:"after"}};H(t)}),Rexlive_Base_Settings.$document.on("click",".toolbox-collapse-grid",function(e){e.preventDefault(),"true"==u.collapse?u.collapse="false":u.collapse="true",ae();var t={eventName:"rexlive:collapse_row",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()}}};H(t)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox",function(e){Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:e.target.value});var t={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},layout:e.target.value}};H(t)}),Rexlive_Base_Settings.$document.on("change",".edit-row-layout-toolbox-checkbox",function(e){var t=e.target.checked?"fixed":"masonry";Rexbuilder_Util_Admin_Editor.highlightRowSetData({layout:t});var i={eventName:"rexlive:set_gallery_layout",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},layout:t}};H(i)}),Rexlive_Base_Settings.$document.on("change",".edit-row-width-toolbox",function(e){var t="",i="",o=e.target.value.trim().split(/(\d+)/);t=o[1],i=o[2],Rexbuilder_Util_Admin_Editor.highlightRowSetData({section_width:e.target.value,dimension:e.target.getAttribute("data-section_width")});var a={eventName:"rexlive:set_section_width",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},sectionWidth:{width:t,type:i},forged:!0}};H(a)}),Rexlive_Base_Settings.$document.on("click",".toolbox-builder-section-config",function(e){e.preventDefault();var t=xe(e,{offset:{w:this.offsetWidth,h:this.offsetHeight}}),i={rexliveEvent:!0,eventName:"rexlive:openSectionModal",section_options_active:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},activeLayout:u.layout,fullHeight:u.full_height,section_width:u.section_width,dimension:u.dimension,rowDistances:{gutter:u.block_distance,top:u.row_separator_top,right:u.row_separator_right,bottom:u.row_separator_bottom,left:u.row_separator_left},marginsSection:{top:u.row_margin_top,right:u.row_margin_right,bottom:u.row_margin_bottom,left:u.row_margin_left},photoswipe:!1,sectionName:u.section_name,customClasses:u.custom_classes},mousePosition:t};window.postMessage(i,"*")}),Rexlive_Base_Settings.$document.on("click",".edit-row-image-background-toolbox",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:openLiveImageUploader",live_uploader_data:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},idImage:u.id_image_bg_section,returnEventName:"rexlive:apply_background_image_section",data_to_send:{active:!0}}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-image-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({image_bg_section_active:"false",image_bg_section:"",id_image_bg_section:""}),de();var t={eventName:"rexlive:apply_background_image_section",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},active:!1,idImage:"",urlImage:"",width:"",height:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-color-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"false",color_bg_section:""}),se();var t={eventName:"rexlive:apply_background_color_section",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},active:!1,color:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-overlay-color-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_color:"",row_overlay_active:"false"}),ce();var t={eventName:"rexlive:change_section_overlay",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},active:!1,color:""}};H(t)}),Rexlive_Base_Settings.$document.on("click",".edit-row-video-background-toolbox",function(e){e.preventDefault();var t={rexliveEvent:!0,eventName:"rexlive:editRowVideoBackground",activeBG:{bgVideo:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},youtubeVideo:u.video_bg_url_section,vimeoUrl:u.video_bg_url_vimeo_section,mp4Video:u.video_mp4_url,mp4VideoID:u.video_bg_id_section}}};window.postMessage(t,"*")}),Rexlive_Base_Settings.$document.on("click",".deactivate-row-video-background-toolbox",function(e){e.preventDefault(),Rexbuilder_Util_Admin_Editor.highlightRowSetData({video_bg_url_section:"",video_bg_id_section:"",video_bg_url_vimeo_section:"",video_mp4_url:""}),ue(),u.video_bg_url_section="",u.video_bg_id_section="",u.video_bg_url_vimeo_section="",u.video_mp4_url="";var t={eventName:"rexlive:update_section_background_video",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()},typeVideo:"",urlVimeo:"",urlYoutube:"",videoMp4:{idMp4:"",linkMp4:""}}};H(t)}),Rexlive_Base_Settings.$document.on("click",".open-model-toolbox",function(e){e.preventDefault();var t={eventName:"rexlive:openCreateModelModal",data_to_send:{sectionTarget:{sectionID:d.val(),modelNumber:s.val()}}};H(t)}),window.addEventListener("message",L,!1)},W=function(e){o=!0,Rexbuilder_Util_Admin_Editor.pageSaved=!0,t=e.id,i=e.label;var a=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]');Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-builder-layout.active-layout").removeClass("active-layout"),a.addClass("active-layout"),Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".tool-option__choose-layout").find(".active-layout__icon").html(Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]').find(".layout__icon").html()),D={selectedLayoutName:t,eventName:"rexlive:changeLayout",layoutData:e},Y(e.min)},z=function(e){D=e},G=function(e,t){switch(e){case"OPEN":for(var i=null,o=0;o<I.length;o++)if(t.modelID==I[o].m_id){i=o;break}if(null!==i)I[o].m_state="open";else{var a={m_id:t.modelID,m_name:t.modelName,m_state:"open"};I.push(a)}break;case"CLOSE":for(var i=null,o=0;o<I.length;o++)if(t.modelID==I[o].m_id){i=o;break}if(null!==i)I[o].m_state="close";else{var a={m_id:t.modelID,m_name:t.modelName,m_state:"close"};I.push(a)}break;case"REMOVE":for(var i=null,o=0;o<I.length;o++)if(t.modelID==I[o].m_id){i=o;break}null!==i&&I.splice(i,1)}},Q=function(){NProgress.start(),e(this).addClass("rex-saving");var i={eventName:"rexlive:savePage",data_to_send:{activeLayout:t}};H(i)},Y=function(e){e!=Rexbuilder_Util_Admin_Editor.activeWidth?(""==e?(S.css("width","100%"),S.css("min-width","1024px")):(S.css("width",e),S.css("min-width","")),Rexbuilder_Util_Admin_Editor.activeWidth=e):H(D)},H=function(e){var t={rexliveEvent:!0};jQuery.extend(t,e),N.postMessage(t,"*")},q=function(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},J=function(e){for(var t="",i="0123456789",o=0;o<e;o++)t+=i.charAt(Math.floor(Math.random()*i.length));return parseInt(t)},K=function(){return t},X=function(e){t=e,this.$responsiveToolbar.find(".btn-builder-layout.active-layout").removeClass("active-layout"),this.$responsiveToolbar.find('.btn-builder-layout[data-name="'+t+'"]').addClass("active-layout")},Z=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},ee=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},te=function(e){s.val(e)},ie=function(e){c.val(e)},oe=function(){""!==s.val()&&"undefined"!=typeof s.val()&&"false"===c.val()?Rexbuilder_Util_Admin_Editor.$responsiveToolbar.addClass("rexlive-toolbox--model"):Rexbuilder_Util_Admin_Editor.$responsiveToolbar.removeClass("rexlive-toolbox--model")},ae=function(){"true"==u.collapse?v.addClass("active"):v.removeClass("active")},ne=function(){_.filter("[data-section_width="+u.dimension+"]").attr("checked",!0)},re=function(){p.filter("[value="+u.layout+"]").attr("checked",!0)},le=function(){var e="fixed"==u.layout;m.prop("checked",e)},de=function(){"undefined"!=typeof u.id_image_bg_section&&""!==u.id_image_bg_section&&"undefined"!=typeof u.image_bg_section&&""!==u.image_bg_section?(g.addClass("tool-button--image-preview").attr("value",u.id_image_bg_section).css("background-image","url("+u.image_bg_section+")"),x.addClass("tool-button--hide"),setTimeout(function(){h.parent().fadeIn()},300)):(x.removeClass("tool-button--hide"),h.parent().fadeOut({duration:300,complete:function(){g.removeClass("tool-button--image-preview").attr("value","").css("background-image","none")}}))},se=function(){""!==u.color_bg_section?(f.val(u.color_bg_section).spectrum("set",u.color_bg_section),f.parent().addClass("tool-button--picker-preview"),f.siblings(".tool-button--color-preview").css("background-color",u.color_bg_section),$.parent().addClass("tool-button--hide"),setTimeout(function(){k.parent().fadeIn()},300)):(f.val("").spectrum("set",""),$.parent().removeClass("tool-button--hide"),k.parent().fadeOut({duration:300,complete:function(){f.parent().removeClass("tool-button--picker-preview"),f.siblings(".tool-button--color-preview").css("background-color","")}}))},ce=function(){""!==u.row_overlay_color&&"undefined"!=typeof u.row_overlay_color?(b.val(u.row_overlay_color).spectrum("set",u.row_overlay_color),b.parent().addClass("tool-button--picker-preview"),b.siblings(".tool-button--color-preview").css("background-color",u.row_overlay_color),y.parent().addClass("tool-button--hide"),setTimeout(function(){w.parent().fadeIn()},300)):(b.val("").spectrum("set",""),y.parent().removeClass("tool-button--hide"),w.parent().fadeOut({duration:300,complete:function(){b.parent().removeClass("tool-button--picker-preview"),b.siblings(".tool-button--color-preview").css("background-color","")}}))},ue=function(){""!==u.video_bg_url_section&&"undefined"!=typeof u.video_bg_url_section||""!==u.video_bg_url_vimeo_section&&"undefined"!=typeof u.video_bg_url_vimeo_section||""!==u.video_mp4_url&&"undefined"!=typeof u.video_mp4_url||""!==u.video_bg_id_section&&"undefined"!=typeof u.video_bg_id_section?(M.addClass("tool-button--hide"),setTimeout(function(){R.parent().fadeIn()})):(M.removeClass("tool-button--hide"),R.parent().fadeOut({duration:300}))},_e=function(){oe(),ae(),ne(),re(),le(),de(),se(),ce(),ue()},pe=function(){var e={eventName:"rexlive:lockRows"};H(e)},me=function(){var e={eventName:"rexlive:unlockRows"};H(e)},ve=function(){n.addClass("page-edited")},ge=function(){fe(),be()},fe=function(){var e=!1,t=!1,i={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};f.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,beforeShow:function(){Rexlive_Color_Palette.show({$target:k,object:"section",action:"background"})},show:function(){var o=f.spectrum("container")[0];o.style.top=parseInt(o.style.top)+10+"px",e=!1,i.data_to_send.sectionTarget.sectionID=d.val(),i.data_to_send.sectionTarget.modelNumber=s.val(),t=JSON.parse(u.color_bg_section_active)},change:function(){},move:function(o){i.data_to_send.active=!0,i.data_to_send.color=o.toRgbString(),t?i.eventName="rexlive:change_section_bg_color":i.eventName="rexlive:apply_background_color_section",H(i),e=!0},hide:function(t){Rexlive_Color_Palette.hide(),e&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({color_bg_section_active:"true",color_bg_section:t.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrColTool(),i.data_to_send.active=!0,i.data_to_send.color=t.toRgbString(),i.eventName="rexlive:apply_background_color_section",H(i)),e=!1}})},be=function(){var e=!1,t=!1,i={eventName:null,data_to_send:{color:null,sectionTarget:{sectionID:null,modelNumber:null}}};b.spectrum({replacerClassName:"tool-button tool-button--inline tool-button--empty tool-button--color tool-button--spectrum",preferredFormat:"hex",showPalette:!1,showAlpha:!0,showInput:!0,showButtons:!1,beforeShow:function(){Rexlive_Overlay_Palette.show({$target:w,object:"section",action:"overlay"})},show:function(){var o=b.spectrum("container")[0];o.style.top=parseInt(o.style.top)+10+"px",e=!1,i.data_to_send.sectionTarget.sectionID=d.val(),i.data_to_send.sectionTarget.modelNumber=s.val(),t=JSON.parse(u.row_overlay_active)},move:function(o){i.data_to_send.active=!0,i.data_to_send.color=o.toRgbString(),t?i.eventName="rexlive:change_section_overlay_color":i.eventName="rexlive:change_section_overlay",H(i),e=!0},hide:function(t){Rexlive_Overlay_Palette.hide(),e&&(Rexbuilder_Util_Admin_Editor.highlightRowSetData({row_overlay_active:"true",row_overlay_color:t.toRgbString()}),Rexbuilder_Util_Admin_Editor.updateBkgrOverlayTool(),i.data_to_send.active=!0,i.data_to_send.color=t.toRgbString(),i.eventName="rexlive:change_section_overlay",H(i)),e=!1}})},xe=function(e,t){var i={};if("undefined"!=typeof e.clientX&&"undefined"!=typeof e.clientY&&"undefined"!=typeof e.offsetX&&"undefined"!=typeof e.offsetY&&"undefined"!=typeof t){var o=e.target.getBoundingClientRect();i={x:o.left+t.offset.w/2,y:o.top+Rexbuilder_Util_Admin_Editor.mousePositionFrameYOffset}}else i={x:Rexbuilder_Util_Admin_Editor.viewportMeasurement.width/2,y:Rexbuilder_Util_Admin_Editor.viewportMeasurement.height/2};return i},he=function(e){if("undefined"!=typeof u&&""!==e&&"undefined"!=typeof e)for(var t in e)u[t]=e[t]},$e=function(){var e={gradient:u.color_bg_section,sectionTarget:{sectionID:d.val(),modelNumber:s.val()}};Rexlive_Section_Background_Gradient.openModal(e)},ke=function(){var e={gradient:u.row_overlay_color,sectionTarget:{sectionID:d.val(),modelNumber:s.val()}};Rexlive_Section_Overlay_Gradient.openModal(e)},ye=function(e){for(var t,i=document.createElement("div"),o=i.style,a=Rexbuilder_Util_Admin_Editor.getPrefixedValues(e),n=0;n<a.length&&(t=a[n],o.backgroundImage=t,o.backgroundImage!=t);n++);return o.backgroundImage},we=function(e){for(var t=["-moz-","-webkit-","-o-","-ms-"],i=[],o=0;o<t.length;o++)i.push(t[o]+e);return i},Ce=function(t){var i=tmpl("tmpl-tool-simple-save",{}),o=e(i);t.spectrum("container").append(o),o.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.spectrum("container").find(".sp-choose").trigger("click")})},Me=function(t){var i=tmpl("tmpl-tool-close",{}),o=e(i);t.spectrum("container").append(o),o.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.attr("data-revert",!0),t.spectrum("container").find(".sp-cancel").trigger("click")})},Re=function(){var e=!!document.documentMode;e&&(U||(U=!0,Rexbuilder_Util_Admin_Editor.$frameBuilder.trigger("load")))},Ie=function(){this.$body=e("body"),this.$rexpansiveContainer=e("#rexpansive-builder-backend-wrapper"),S=this.$rexpansiveContainer.find(".rexpansive-live-frame-container"),this.$frameBuilder=this.$rexpansiveContainer.find("#rexpansive-live-frame"),N=this.$frameBuilder[0].contentWindow,E=e(N),this.triggeredLoad=!1,this.$liveFrameRexContainer={},this.dragImportType="",this.stopScrolling=!0,U=!1,this.$frameBuilder[0].onload=Re(),this.transitionEvent=Z(),this.animationEvent=ee(),this.mousePositionFrameYOffset=50,this.viewportMeasurement=Rexlive_Base_Settings.viewport(),this.$page_global_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--global"),this.$page_custom_settings=this.$rexpansiveContainer.find("#rexlive-page-settings--custom"),this.$responsiveToolbar=this.$rexpansiveContainer.find(".rexlive-toolbox"),d=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-id]"),s=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-id]"),c=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find("input[name=toolbox-insert-area--row-model-editing]"),_=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-width-toolbox"),p=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox"),m=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".edit-row-layout-toolbox-checkbox"),v=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-collapse-grid");var a=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-config-area"),u=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".toolbox-right-fast-config-area");x=a.find(".edit-row-image-background-toolbox"),h=u.find(".edit-row-image-background-toolbox"),g=x.add(h),$=a.find("input[name=edit-row-color-background-toolbox]"),k=u.find("input[name=edit-row-color-background-toolbox]"),f=$.add(k),y=a.find("input[name=edit-row-overlay-color-toolbox]"),w=u.find("input[name=edit-row-overlay-color-toolbox]"),b=y.add(w),M=a.find(".edit-row-video-background-toolbox"),R=u.find(".edit-row-video-background-toolbox"),C=M.add(R),n=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-save"),r=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-undo"),l=Rexbuilder_Util_Admin_Editor.$responsiveToolbar.find(".btn-redo"),Rexbuilder_Util_Admin_Editor.pageSaved=!0,o=!0,I=[],t="default",i="default",this.$responsiveToolbar.find(".builder-default-layout").addClass("active-layout"),this.activeWidth=0,A="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea",NProgress.configure({template:'<div class="bar" role="bar"><div class="peg"></div></div>'}),S.on(Rexbuilder_Util_Admin_Editor.transitionEvent,function(){null!==D&&"undefined"!=typeof D&&H(D)}),this.$frameBuilder.load(function(){Rexbuilder_Util_Admin_Editor.$liveFrameRexContainer=e(Rexbuilder_Util_Admin_Editor.$frameBuilder.get(0).contentWindow.document).find(".rex-container").eq(0)}),ge(),O()};return{init:Ie,pageSaved:a,createRandomID:q,createRandomNumericID:J,sendIframeBuilderMessage:H,updateLayoutPage:W,getActiveLayout:K,setActiveLayout:X,updateIframeWidth:Y,updateLayoutActiveData:z,releaseIframeRows:me,blockIframeRows:pe,editPageProperties:ve,updateOpenModelsList:G,highlightRowSetData:he,updateTopToolbar:_e,updateModelId:te,
updateModelEditing:ie,updateModelState:oe,updateWidthTool:ne,updateLayoutTool:re,updateLayoutCheckboxTool:le,updateBkgrImgTool:de,updateBkgrColTool:se,updateBkgrOverlayTool:ce,updateBkgrVidTool:ue,getGradientSafeValue:ye,getPrefixedValues:we,openRowColorPaletteModal:$e,openRowOverlayPaletteModal:ke,addSpectrumCustomSaveButton:Ce,addSpectrumCustomCloseButton:Me,scrollFrame:V,setScroll:j,addClassToLiveFrameRexContainer:T,removeClassToLiveFrameRexContainer:P,forceTriggerLoad:Re}}(jQuery),Change_UpdateVideoInline_Modal=function(e){"use strict";var t,i=function(i){Rexlive_Modals_Utils.openModal(t.$self.parent(".rex-modal-wrap")),document.getElementById("me-insert-embed-inline-video-text").value="",e("#me-insert-embed-url-isnot-valid").css("display","none")},o=function(){Rexlive_Modals_Utils.closeModal(t.$self.parent(".rex-modal-wrap"))},a=function(){t.$button.on("click",function(t){function i(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)}var a=e(t.target),n=a.parents(".rex-change-layout-option").attr("data-rex-option");switch(n){case"uploadvideo":var r=document.getElementById("me-insert-embed-inline-video-text").value,l=i(r);if(0==l)e("#me-insert-embed-url-isnot-valid").css("display","block"),document.getElementById("me-insert-embed-inline-video-text").value="",console.log("InsertVIDEO || The value has an error, it isn't a valid URL\nValue:",r,"\nisUrl:",l),e("#me-insert-embed-url-isnot-valid").fadeOut(3e3);else{var d={eventName:"rexlive:mediumEditor:inlineVideoEditor",data_to_send:{valueUrl:r}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(d),o()}break;case"hide":o();break;default:o()}})},n=function(){var i=e("#rexlive-updatevideoinline"),o=i;t={$self:i,$button:o.find(".rex-button"),$layout_name_placholder:o.find(".layout-name")},a()};return{init:n,openModal:i,closeModal:o}}(jQuery),Rexlive_Gradient_Utils=function(e){function t(e){return e=e.toLowerCase().trim(),"top left"==e?"bottom right":"top"==e?"bottom":"top right"==e?"bottom left":"left"==e?"right":"right"==e?"left":"bottom left"==e?"top right":"bottom"==e?"top":"bottom right"==e?"top left":"top"}function i(e,i){var e;e="to "+t(e)+", ";for(var o="",a=0;a<i.length;a++)o+=i[a].color+" "+i[a].position+"%, ";var n="linear-gradient("+e;return n+=o,n=n.slice(0,-2),n+=")"}function o(e,t){var i;"top left"==e&&(i="top left, "),"top"==e&&(i="top, "),"center"==e&&(i="top, "),"top right"==e&&(i="top right, "),"left"==e&&(i="left, "),"right"==e&&(i="right, "),"bottom left"==e&&(i="bottom left, "),"bottom"==e&&(i="bottom, "),"bottom right"==e&&(i="bottom right, ");for(var o="",a=0;a<t.length;a++)o+=t[a].color+" "+t[a].position+"%, ";var n="-moz-linear-gradient("+i;return n+=o,n=n.slice(0,-2),n+=")"}function a(e,t){var i;"top left"==e&&(i="left top, right bottom, "),"top"==e&&(i="left top, left bottom, "),"center"==e&&(i="left top, left bottom, "),"top right"==e&&(i="right top, left bottom, "),"left"==e&&(i="left top, right top, "),"right"==e&&(i="right top, left top, "),"bottom left"==e&&(i="left bottom, right top, "),"bottom"==e&&(i="left bottom, left top, "),"bottom right"==e&&(i="right bottom, left top, ");for(var o="",a=0;a<t.length;a++)o+="color-stop("+t[a].position+", "+t[a].color+"), ";var n="-webkit-gradient(linear, "+i;return n+=o,n=n.slice(0,-2),n+=")"}function n(e,t,i){var o;"top left"==e&&(o="left top"),"top center"==e&&(o="center top"),"top right"==e&&(o="right top"),"middle left"==e&&(o="left center"),"middle center"==e&&(o="center"),"center"==e&&(o="center"),"middle right"==e&&(o="right center"),"bottom left"==e&&(o="left bottom"),"bottom center"==e&&(o="center bottom"),"bottom right"==e&&(o="right bottom");for(var a="",n=0;n<t.length;n++)a+=t[n].color+" "+t[n].position+"%, ";dispInputSize=i.toString().toLowerCase();var r="-moz-radial-gradient("+o+", "+s+" "+dispInputSize+", ";return r+=a,r=r.slice(0,-2),r+=")"}function r(e,t,i){var o;"top left"==e&&(o="at left top"),"top center"==e&&(o="at center top"),"top right"==e&&(o="at right top"),"middle left"==e&&(o="at left center"),"middle center"==e&&(o="at center"),"center"==e&&(o="at center"),"middle right"==e&&(o="at right center"),"bottom left"==e&&(o="at left bottom"),"bottom center"==e&&(o="at center bottom"),"bottom right"==e&&(o="at right bottom");for(var a="",n=0;n<t.length;n++)a+=t[n].color+" "+t[n].position+"%, ";dispInputSize=i.toString().toLowerCase();var r="radial-gradient("+s+" "+dispInputSize+" "+o+", ";return r+=a,r=r.slice(0,-2),r+=")"}function l(e,t){var i;"top left"==e&&(i="left top"),"top center"==e&&(i="center top"),"top right"==e&&(i="right top"),"middle left"==e&&(i="left center"),"middle center"==e&&(i="center center"),"center"==e&&(i="center center"),"middle right"==e&&(i="right center"),"bottom left"==e&&(i="left bottom"),"bottom center"==e&&(i="center bottom"),"bottom right"==e&&(i="right bottom");for(var o="",a=0;a<t.length;a++)o+="color-stop("+t[a].position+", "+t[a].color+"), ";var n="-webkit-gradient(radial, "+i+", 0, "+i+", 100, ";return n+=o,n=n.slice(0,-2),n+=")"}function d(e,t,d,s){if("linear"==e)w3c=i(t,d),gecko=o(t,d),oldwebkit=a(t,d),newwebkit=gecko.replace("-moz-","-webkit-"),opera=gecko.replace("-moz-","-o-"),ms=gecko.replace("-moz-","-ms-");else{if("radial"!=e)return"";gecko=n(t,d,s),w3c=r(t,d,s),oldwebkit=l(t,d,s),newwebkit=gecko.replace("-moz-","-webkit-"),opera=gecko.replace("-moz-","-o-"),ms=gecko.replace("-moz-","-ms-")}return markup="",markup+="background:"+ms+";",markup+="background:"+gecko+";",markup+="background:"+opera+";",markup+="background:"+oldwebkit+";",markup+="background:"+newwebkit+";",markup+="background:"+w3c+";",markup+=c(),markup}var s="ellipse",c=function(){return"-webkit-background-clip:text;-webkit-text-fill-color:transparent;"};return{getMarkup:d}}(jQuery),Rexlive_Page_Margins=function(e){"use strict";var t,i,o,a=function(){var e=t.$separatorContext.filter(":checked").val(),o=parseInt(t.$separatorValsTop.filter("[data-context="+e+"]").val());return"undefined"!=typeof e&&{context:e,vals:{top:isNaN(o)?i.top:o}}},n=function(){var e=a();if(!1!==e){var t={eventName:"rexlive:set_container_margins",data_to_send:{distances:e}};Rexbuilder_Util_Admin_Editor.sendIframeBuilderMessage(t),u(e)}},r=function(t){t.keydown(function(t){var i=e(t.target);return e.inArray(t.keyCode,[46,8,9,13,110])!==-1||65===t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40?(38==t.keyCode&&(t.preventDefault(),i.val(isNaN(parseInt(i.val()))?0:parseInt(i.val())+1)),void(40==t.keyCode&&(t.preventDefault(),i.val(Math.max(isNaN(parseInt(i.val()))?0:parseInt(i.val())-1,0))))):((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),void(27==t.keyCode&&i.blur()))})},l=function(e){e.keyup(function(e){(e.keyCode>=48&&e.keyCode<=57||38==e.keyCode||40==e.keyCode||8==e.keyCode)&&(e.preventDefault(),n())})},d=function(){r(t.$separatorValsTop),l(t.$separatorValsTop)},s=function(e){return o.context!==e.context||o.vals.top!==e.vals.top},c=function(){t.$separatorContext.filter("global").prop("checked",!0),t.$separatorValsTop.val("");var e=Rexbuilder_Util_Admin_Editor.$page_global_settings.text(),i=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(),n="global";if(""!==i){var r=JSON.parse(i);"undefined"!=typeof r.container_distancer&&"undefined"!=typeof r.container_distancer.top&&""!==r.container_distancer.top&&(n="custom",t.$separatorValsTop.filter("[data-context=custom]").val(r.container_distancer.top))}if(""!==e){var l=JSON.parse(e);"undefined"!=typeof l.container_distancer&&"undefined"!=typeof l.container_distancer.top&&""!==l.container_distancer.top&&(n=""==n?"global":n,t.$separatorValsTop.filter("[data-context=global]").val(l.container_distancer.top))}t.$separatorContext.filter("[value="+n+"]").prop("checked",!0),o=a()},u=function(e){switch(e.context){case"global":var t=Rexbuilder_Util_Admin_Editor.$page_global_settings.text();if(""!==t&&"[]"!==t){var i=JSON.parse(t);i.container_distancer.top=e.vals.top}else var i={container_distancer:{top:e.vals.top}};Rexbuilder_Util_Admin_Editor.$page_global_settings.text(JSON.stringify(i));var o=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text();if(""!==o){var a=JSON.parse(o);a.container_distancer.top=""}else var a={container_distancer:{top:""}};Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(a));break;case"custom":var o=Rexbuilder_Util_Admin_Editor.$page_custom_settings.text();if(""!==o){var a=JSON.parse(o);a.container_distancer.top=e.vals.top}else var a={container_distancer:{top:e.vals.top}};Rexbuilder_Util_Admin_Editor.$page_custom_settings.text(JSON.stringify(a))}},_=function(){var t=a(),i=s(t);!1!==t&&i&&e.ajax({type:"POST",dataType:"json",url:live_editor_obj.ajaxurl,data:{action:"rex_update_container_margins",nonce_param:live_editor_obj.rexnonce,pageID:e("#post_ID").val(),container_margins:t},success:function(){},error:function(){},complete:function(){}}),n()},p=function(e){var n=e;t={$self:n,$separatorContext:n.find("input[name=container-distancer]"),$separatorValsTop:n.find("input[name=container-distancer--mtop]"),$container_separator_top:n.find("#margin-rexlive-content"),$applyAllCheckBox:n.find("margin-rexlive-all-pages"),selected_margins:""},i={top:0,right:0,bottom:0,left:0},o=a(),d()};return{init:p,applyData:_,getData:c}}(jQuery),Rexlive_Page_Settings_Modal=function(e){"use strict";var t,i=function(){Rexlive_Modals_Utils.openModal(t.$modal),l()},o=function(){Rexlive_Modals_Utils.closeModal(t.$modal)},a=function(){t.$close_button.on("click",function(e){e.preventDefault(),o()}),t.$modal.on("rexlive:this_modal_closed",function(e){r()})},n=function(){Rexlive_Page_Margins.init(t.$self)},r=function(){Rexlive_Page_Margins.applyData()},l=function(){Rexlive_Page_Margins.getData()},d=function(){var i=e("#rex-page-settings-modal");t={$self:i,$modal:i.parent(".rex-modal-wrap"),$close_button:i.find(".rex-modal__close-button"),$save_button:i.find(".rex-modal__save-button")},n(),a()};return{init:d,open:i}}(jQuery);!function(){"use strict";var e=function(){Rexlive_Base_Settings.init(),Rexlive_Color_Palette.init(),Rexlive_Overlay_Palette.init(),Rexbuilder_Util_Admin_Editor.init(),Change_UpdateVideoInline_Modal.init(),Rexlive_Modals_Utils.init(),Rexlive_Modals.init(),Rexlive_RexSlider_TextEditor.init(),Rexbuilder_RexSlider.init()},t=function(e){if(0==Rexbuilder_Util_Admin_Editor.pageSaved){e.preventDefault();var t="o/";return(e||window.event).returnValue=t,console.log("WARNING: Before closing the page verify that you have saved the changes."),t}};document.addEventListener("DOMContentLoaded",e),window.addEventListener("beforeunload",t)}();